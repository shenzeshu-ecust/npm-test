"use strict";require("../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[701],{83794:function(e,t,n){var o=n(32180),i=n(57042),a=n(24460),d=n(81876),c=n(21867),r=n(86066),s=n(45023),l=(n(90201),n(71515)),m={__next:"index-module_V9Lxe",methodPage:"index-module_r4qhm",loadingContainer:"index-module__Vvbp",headerTitleView:"index-module_q66Nh",headerTitle:"index-module_s1mZs",headerBack:"index-module__wkGJ",methodContentContainer:"index-module_Q3KoU",methodItem:"index-module_CWquH",methodItemIcon:"index-module_IISwu",methodItemTitle:"index-module_YjLsw",methodItemContent:"index-module_gSzKS",methodItemSupport:"index-module_OVcVn",methodHeaderBack:"index-module_BMAzw",methodFlexRow:"index-module_U68Fd",methodChoice:"index-module_slwSV",methodChoiceIcon:"index-module_KQsi7",methodUnChoiceIcon:"index-module_gfK43"},h=n(43881),u=n(14028),x=n(39441),g=n(31789),f=n(35706),k=n(11478),C=n(45185),v=n(99415),p=n(70407),w=n(83661),_=n(92954),N=n(2269),I=function(e){(0,c.Z)(n,e);var t=(0,r.Z)(n);function n(e){var o;(0,i.Z)(this,n),o=t.call(this,e),(0,s.Z)((0,d.Z)(o),"loadMethodConfig",(function(){x.Z.postAsync("/27207/systemConfig",{}).then((function(e){var t=e.delivers;if((0,g.x)(t))o.setState({loading:-1});else{var n=o.model.trainPackage.fares,i=void 0===n?[]:n,a=k.Z.getFirstFares(i),d=a.printingOptions,c=void 0===d?[]:d,r=[];c.forEach((function(e){t.forEach((function(t){var n=t.type;n===e&&r.push(t)}))})),o.setState({loading:1,ticketMethodList:r})}})).catch((function(e){o.setState({loading:-1})}))})),(0,s.Z)((0,d.Z)(o),"renderMethodBody",(function(){var e=o.state,t=e.loading,n=e.ticketMethodList,i=e.currentSelectedMethod,a=void 0===i?{}:i;return 0===t?(0,N.jsx)(l.View,{className:m.loadingContainer,children:(0,N.jsx)(h.gb,{})}):-1===t||(0,g.x)(n)?(0,N.jsx)(l.View,{className:m.loadingContainer,style:{marginBottom:44},children:(0,N.jsx)(f.Z,{errorCode:"-1001",retryClick:function(e){"retry"===e&&o.setState({loading:0},(function(){o.loadMethodConfig()}))}})}):(0,N.jsx)(l.View,{className:m.methodContentContainer,children:n.map((function(e){var t=e.desc,n=e.type,i=t.title,d=t.prefixLink,c=t.content,r=t.bottom,s=t.bottomLink,x=a.type,f=x===n;return(0,N.jsxs)(l.View,{className:m.methodItem,children:[(0,N.jsxs)(l.View,{className:m.methodFlexRow,children:[(0,N.jsx)(l.Image,{className:m.methodItemIcon,src:d}),(0,N.jsx)(l.Text,{className:m.methodItemTitle,children:i})]}),(0,N.jsxs)(l.View,{className:m.methodFlexRow,children:[(0,N.jsx)(l.Text,{className:m.methodItemContent,children:c}),f?(0,N.jsx)(h.En,{className:m.methodChoice,onClick:function(){h.Nd.navigateBack()},children:(0,N.jsx)(u.Z,{className:m.methodChoiceIcon,children:"\ued0f"})}):(0,N.jsx)(h.En,{className:m.methodChoice,onClick:function(){o.setState({currentSelectedMethod:e},(function(){var t=o.model.callback;t&&t(e),h.Nd.navigateBack()}))},children:(0,N.jsx)(u.Z,{className:m.methodUnChoiceIcon,children:"\uf623"})})]}),!(0,g.x)(r)&&(0,N.jsx)(h.En,{onClick:function(){(0,g.x)(s)||h.Nd.navigateTo({url:s})},children:(0,N.jsx)(l.Text,{className:m.methodItemSupport,children:r})})]},n)}))})})),o.statusBarHeight=h.A_.currentHeight;var a=w.Z.getParamsWithInstance((0,_.getCurrentInstance)()),c=a.ticketMethodList,r=a.currentSelectedMethod,C=a.callback,v=a.trainPackage;return o.model={callback:C,trainPackage:v},o.state={loading:0,currentSelectedMethod:r,ticketMethodList:c},o}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.state.ticketMethodList;(0,g.x)(e)?this.loadMethodConfig():this.setState({loading:1})}},{key:"render",value:function(){return(0,N.jsxs)(l.View,{className:m.methodPage,children:[(0,N.jsx)(C.Z,{title:"\u9009\u62e9\u53d6\u7968\u65b9\u5f0f",onBackClick:function(){v.W.userTraceBook("headerBack","\u5bfc\u822a\u9000\u51fa\u53d6\u7968\u65b9\u5f0f\u9875"),h.Nd.navigateBack()}}),this.renderMethodBody()]})}}]),n}(p.Z),j={rnPageName:"ticketMethod",navigationBarTitleText:"\u9009\u62e9\u53d6\u7968\u65b9\u5f0f",disableScroll:!0,customHeader:!0,navigationStyle:"custom"};Page((0,o.createPageConfig)(I,"pages/trainAbroad/ticketMethod/index",{root:{cn:[]}},j||{}))},79181:function(e){e.exports=require("../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../cwx/cwx")},65238:function(e){e.exports=require("../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[202,2107,1216,8592],(function(){return t(83794)}));e.O()}]);
//# sourceMappingURL=index.js.map