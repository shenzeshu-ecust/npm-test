"use strict";require("../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[9204],{19702:function(e,t,n){var i,o=n(32180),a=n(90129),s=n(57042),r=n(24460),l=n(81876),c=n(21867),d=n(86066),u=n(45023),m=n(90201),x=n(70407),h={__next:"index-module_YfmAV",orderContainer:"index-module_uyBRj",oHeaderRight:"index-module_lwObG",oHeaderIcon:"index-module_aMzv8",oHeaderText:"index-module_ZCYoD",orderBackground:"index-module_FQYxA",loadingContainer:"index-module_cYufJ",errorContainer:"index-module_NyDZ3",orderScrollContainer:"index-module_TMkMN",noticeContainer:"index-module_Yb1j3",noticePlaceholderContainer:"index-module_fkaZa",ticketJourneyWrapper:"index-module_PpJWD",clearJourneyMargin:"index-module_yO3a6",checkinReminder:"index-module_jCeu5",checkinReminderText:"index-module_vJmHs",ticketBackground:"index-module_WQr2J",guideCardContainer:"index-module_Io3Jl",cancelView:"index-module_j62mo",cancelText:"index-module_R9kOJ",eTicketDialog:"index-module_YBhif",eTicketDialogContent:"index-module_aSHju",commonDialog:"index-module_oQ9NC",todDialog:"index-module_xFfiY",todContent:"index-module_SKUnq",spaceOccupy:"index-module_pGXlP"},p=n(71515),f=n(45185),T=n(10860),g=n(71559),N=n(39441),y=n(35706),k=n(31789),w=n(92954),j=n.n(w),v={enableApplyContainer:"index-module_HFc8A",enableApplyTitle:"index-module_d0lxh",enableApplyContent:"index-module_JhszE",applyContainer:"index-module_vIKds",applyTitleContainer:"index-module_a8Wv6",applyTitle:"index-module_nIVGq",applyIcon:"index-module_F4b3i",applyRight:"index-module_Xje02",applySentText:"index-module_dobCZ",applyArrow:"index-module_qH_TR",applyInfoItem:"index-module_GsC6z",label:"index-module_Y4rbx",labelMarginTop:"index-module_Oi3B3",info:"index-module_CHwpk",applyInput:"index-module_OEWqA",applySendIcon:"index-module_Ue0Oh",applyStatus:"index-module_GAt6V",line:"index-module_MAq0g",tipIcon:"index-module_fZ5M1",tipText:"index-module_tMhGW",sendButton:"index-module_ahKu_",sendText:"index-module_OQhRK",receiptRowCenter:"index-module_bTEsy"},C=n(14028),_=n(43881),Z=n(2269),S={height:1},I=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,s.Z)(this,n),i=t.call(this,e);var o=i.props.data;return i.state={isOpen:!1,email:o.email,maxCount:o.maxCount,appliedCount:o.appliedCount,isApplyFailure:!1},i.isRequestApply=!1,i}return(0,r.Z)(n,[{key:"applyTravelReceipt",value:function(){var e=this,t=this.props.orderNumber,n=this.state,i=n.email,o=n.appliedCount,a=n.maxCount;this.isRequestApply||o>=a||(j().showLoading({title:"\u8bf7\u6c42\u4e2d..."}),N.Z.postAsync("/27467/applyTravelReceipt",{orderId:t,email:i}).then((function(t){var n=t.bizHead,i=void 0===n?{}:n;200===i.code?e.setState({appliedCount:o+1},(function(){e.isRequestApply=!1,j().hideLoading()})):e.setState({isApplyFailure:!0},(function(){e.isRequestApply=!1,j().hideLoading(),(0,k.x)(null===i||void 0===i?void 0:i.displayMessage)||j().showToast({title:null===i||void 0===i?void 0:i.displayMessage,duration:2e3,icon:"none"})}))})).catch((function(t){e.setState({isApplyFailure:!0},(function(){e.isRequestApply=!1,j().hideLoading()}))})))}},{key:"render",value:function(){var e=this,t=this.state.isOpen,n=this.props,i=n.data,o=n.showReceiptDialog;if(!i.enableApply)return(0,Z.jsxs)(p.View,{className:v.enableApplyContainer,children:[(0,Z.jsx)(p.Text,{className:v.enableApplyTitle,children:"\u62a5\u9500\u51ed\u8bc1"}),(0,Z.jsx)(p.Text,{className:v.enableApplyContent,children:"\u4ec5\u6210\u529f\u51fa\u884c\u540e\uff0c\u624d\u53ef\u7533\u8bf7\u62a5\u9500\u51ed\u8bc1"})]});var a=i.drawer,s=i.amount,r=this.state,l=r.maxCount,c=r.appliedCount,d=r.email,u=r.isApplyFailure,m="\u5355\u7b14\u8ba2\u5355\u81f3\u591a\u7533\u8bf7".concat(l,"\u6b21\u62a5\u9500\u51ed\u8bc1");c===l&&(m="\u5355\u7b14\u8ba2\u5355\u81f3\u591a\u7533\u8bf7".concat(l,"\u6b21\uff0c\u5982\u9700\u5e2e\u52a9\u8bf7\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d"));var x=c<l;return(0,Z.jsxs)(p.View,{className:v.applyContainer,children:[(0,Z.jsxs)(p.View,{className:v.receiptRowCenter,children:[(0,Z.jsxs)(_.En,{className:v.applyTitleContainer,onClick:function(){o()},children:[(0,Z.jsx)(p.Text,{className:v.applyTitle,children:"\u62a5\u9500\u51ed\u8bc1"}),(0,Z.jsx)(C.Z,{className:v.applyIcon,children:"\ue013"})]}),(0,Z.jsxs)(_.En,{className:v.applyRight,onClick:function(){e.setState({isOpen:!t})},children:[(0,Z.jsx)(p.Text,{className:v.applySentText,children:0===c||t?"":"\u5df2\u53d1\u9001"}),t?(0,Z.jsx)(C.Z,{className:v.applyArrow,children:"\uee56"}):(0,Z.jsx)(C.Z,{className:v.applyArrow,children:"\uee55"})]})]}),t&&(0,Z.jsxs)(p.View,{children:[(0,Z.jsxs)(p.View,{className:v.applyInfoItem,style:{marginTop:0},children:[(0,Z.jsx)(p.Text,{className:v.label,children:"\u5f00\u7968\u65b9"}),(0,Z.jsx)(p.Text,{className:v.info,children:a})]}),(0,Z.jsx)(p.View,{className:v.line,style:S}),(0,Z.jsxs)(p.View,{className:v.applyInfoItem,children:[(0,Z.jsx)(p.Text,{className:v.label,children:"\u53d1\u7968\u91d1\u989d"}),(0,Z.jsx)(p.Text,{className:v.info,children:"\xa5".concat(s)})]}),(0,Z.jsx)(p.View,{className:v.line,style:S}),(0,Z.jsxs)(p.View,{className:v.applyInfoItem,style:{marginTop:0},children:[(0,Z.jsx)(p.Text,{className:(0,_.AK)(v.label,v.labelMarginTop),children:"\u7535\u5b50\u90ae\u7bb1"}),x?(0,Z.jsx)(p.Input,{className:v.applyInput,value:this.state.email,onInput:function(t){var n=t.detail.value;e.setState({email:n})},onFocus:function(){e.props.onInputFocus&&e.props.onInputFocus()}}):(0,Z.jsx)(p.Text,{className:v.applyInput,children:d}),x&&(0,Z.jsx)(C.Z,{className:v.applySendIcon,children:"\ue45e"})]}),(0,Z.jsx)(p.View,{className:v.line,style:S}),(0,Z.jsxs)(p.View,{className:v.applyInfoItem,style:{paddingBottom:10},children:[(0,Z.jsxs)(p.View,{style:{flex:1},children:[0!==c&&(0,Z.jsx)(p.Text,{className:v.applyStatus,style:{color:u?"#f5190a":"#00b87a"},children:u?"\u53d1\u9001\u5931\u8d25":"\u5df2\u53d1\u9001"}),(0,Z.jsxs)(p.View,{className:v.receiptRowCenter,children:[(0,Z.jsx)(C.Z,{className:v.tipIcon,children:"\ue6d5"}),(0,Z.jsx)(p.Text,{className:v.tipText,children:m})]})]}),x&&(0,Z.jsx)(_.En,{className:v.sendButton,onClick:function(){e.applyTravelReceipt()},children:(0,Z.jsx)(p.Text,{className:v.sendText,children:0===c?"\u7533\u8bf7\u51ed\u8bc1":"\u518d\u6b21\u7533\u8bf7"})})]})]})]})}}]),n}(m.Component),R={statusContainer:"index-module_X7c8Y",statusIcon:"index-module_FikEb",statusTextContent:"index-module_myIaz",statusText:"index-module_LoO2b",statusContent:"index-module_aP5GF",returnTicketContainer:"index-module_PbS_Y",returnTicketTitle:"index-module_JdVfq",returnTicketSubtitle:"index-module_C6GmL",returnTicketForward:"index-module_AtOq5",payContainer:"index-module_WA3C_",payTimerView:"index-module_jg2K8",payTimerRow:"index-module_TVzQf",payTimerText:"index-module_pKGd6",payTime:"index-module_tlHam",payTimeWidth:"index-module_TYC09",payTimerPrice:"index-module_mwcdv",payTimerTips:"index-module_Sv4AY",payGradient:"index-module_w58hn",payText:"index-module_Q2r6b"},D=n(80741),b=n(95392),A=function(){function e(){(0,s.Z)(this,e)}return(0,r.Z)(e,null,[{key:"getReorderButton",value:function(){return{button:"\u518d\u8ba2\u4e00\u5f20",action:"home",type:3}}},{key:"getRefundButton",value:function(){return{button:"\u7533\u8bf7\u9000\u7968",action:"refund",type:1}}},{key:"getResendEmailButton",value:function(){return{button:"\u91cd\u53d1\u90ae\u4ef6",action:"email",type:2}}}]),e}();i=A,(0,u.Z)(A,"getOrderStatusObject",(function(e){var t,n=e.orderStatus,o=e.enableRefund,a=[i.getReorderButton()];switch(n){case b.D.orderCompleted:t=D.Z.ORDER_STATUS_DONE;break;case b.D.ticketProcess:t=D.Z.ORDER_STATUS_WAIT;break;case b.D.ticketIssued:t=D.Z.ORDER_STATUS_DONE,a=[i.getResendEmailButton(),i.getReorderButton()],o&&a.unshift(i.getRefundButton());break;case b.D.ticketFailed:t=D.Z.ORDER_STATUS_FAILURE;break;case b.D.cancelled:t=D.Z.ORDER_STATUS_CANCEL;break;case b.D.ticketReturning:t=D.Z.ORDER_STATUS_WAIT;break;case b.D.ticketReturned:t=D.Z.ORDER_STATUS_DONE;break;case b.D.tickedReturnFailed:t=D.Z.ORDER_STATUS_FAILURE;break;default:t=D.Z.ORDER_STATUS_WAIT,a=[]}return{icon:t,buttons:a}}));var E=n(12111),O=n(46208),P=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"handleTime",(function(){var e=i.model.remnantSecond;i.handleSetTime(e),i.handleTimer=setInterval((function(){var e=i.model.remnantSecond;0===e&&(clearInterval(i.handleTimer),i.setState({canPay:!1},(function(){i.props.refreshOrder&&i.props.refreshOrder()}))),i.handleSetTime(e)}),1e3)})),(0,u.Z)((0,l.Z)(i),"handleSetTime",(function(e){var t=0,n=0,o=e%86400,a=Math.floor(o/3600);a>=1?(o=60,t=o,n=o%60):(o%=3600,t=Math.floor(o/60),n=o%60),console.log("hours",a,"minutes",t,"seconds",n),i.setState({minutes:t>=10?t:"0".concat(t),seconds:n>=10?n:"0".concat(n)}),e-=1,i.model.remnantSecond=e})),(0,u.Z)((0,l.Z)(i),"formatStatusData",(function(){var e=i.props.orderData,t=e.orderInfo,n=t.orderStatusName,o=t.orderStatusDesc,a=t.orderStatus,s=t.orderPrice,r=t.ticketCollected,l=void 0!==r&&r,c=A.getOrderStatusObject(t),d=c.icon;return{ticketCollected:l,orderStatus:a,orderPrice:s,statusDisplay:n,statusTips:o,statusIcon:d}}));var o=i.props.orderData,a=o.orderInfo,r=a.enablePay,c=a.payExpireDate,d=(0,E.Z)(c),m=(0,E.Z)();return r&&d.isAfter(m,"second")?(i.state={canPay:!0},i.model={remnantSecond:d.diff(m,"second")}):(i.model={},i.state={canPay:!1}),i}return(0,r.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var n=this,i=e.orderData,o=i.orderInfo;o.enablePay||this.setState({canPay:!1},(function(){clearInterval(n.handleTimer)}))}},{key:"UNSAFE_componentWillMount",value:function(){this.state.canPay&&this.handleTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.handleTimer)}},{key:"UNSAFE_componentWillUnmount",value:function(){clearInterval(this.handleTimer)}},{key:"render",value:function(){var e=this.props,t=e.gotoPay,n=e.showReturnTicket,i=this.formatStatusData(),o=i.statusDisplay,a=i.statusTips,s=i.statusIcon,r=i.orderStatus,l=i.orderPrice,c=i.ticketCollected,d=this.state,u=d.minutes,m=d.seconds,x=d.canPay;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(p.View,{className:R.statusContainer,children:[(0,Z.jsx)(p.Image,{src:s,className:R.statusIcon}),(0,Z.jsxs)(p.View,{className:R.statusTextContent,children:[(0,Z.jsx)(p.Text,{className:R.statusText,children:o}),(0,Z.jsx)(p.Text,{className:R.statusContent,children:a})]})]}),c&&r===b.D.ticketReturning&&(0,Z.jsxs)(_.En,{className:R.returnTicketContainer,onClick:n,children:[(0,Z.jsx)(p.Text,{className:R.returnTicketTitle,children:"\u8f66\u7968\u5bc4\u9001\u5730\u5740"}),(0,Z.jsx)(p.Text,{className:R.returnTicketSubtitle,children:"\u67e5\u770b"}),(0,Z.jsx)(C.Z,{className:R.returnTicketForward,children:"\ue944"})]}),x&&(0,Z.jsxs)(p.View,{className:R.payContainer,children:[(0,Z.jsxs)(p.View,{className:R.payTimerView,children:[(0,Z.jsxs)(p.View,{className:R.payTimerRow,children:[(0,Z.jsx)(p.Text,{className:R.payTimerText,children:"\u8bf7\u5728 "}),(0,Z.jsxs)(O.ZP,{fontFamily:O.Fk.Medium,className:(0,_.AK)(R.payTimerText,R.payTime),children:[u,"\u5206"]}),(0,Z.jsx)(O.ZP,{fontFamily:O.Fk.Medium,className:(0,_.AK)(R.payTimerText,R.payTimeWidth),children:m}),(0,Z.jsx)(p.Text,{className:(0,_.AK)(R.payTimerText,R.payTime),children:"\u79d2"}),(0,Z.jsx)(p.Text,{className:R.payTimerText,children:" \u5185\u5b8c\u6210\u652f\u4ed8 "}),(0,Z.jsxs)(O.ZP,{fontFamily:O.Fk.Medium,className:(0,_.AK)(R.payTimerText,R.payTimerPrice),children:["\xa5",l]})]}),(0,Z.jsx)(p.Text,{className:R.payTimerTips,children:"\u5230\u671f\u672a\u652f\u4ed8\u5c06\u81ea\u52a8\u53d6\u6d88\u8ba2\u5355"})]}),(0,Z.jsx)(_.En,{withFeedback:!0,activeOpacity:.5,onClick:function(){t&&t()},children:(0,Z.jsx)(_.o,{className:R.payGradient,start:{x:1,y:.5},end:{x:0,y:.5},locations:[0,1],colors:["rgb(255,102,0)","rgb(255,136,0)"],children:(0,Z.jsx)(p.Text,{className:R.payText,children:"\u53bb\u652f\u4ed8"})})})]})]})}}]),n}(m.Component),V={infoContainer:"index-module_jOUWN",infoTitle:"index-module_KXEvr",infoRow:"index-module_yk6_b",infoLine:"index-module_rcABJ",infoRowLeftText:"index-module_Tp5eN",infoPrice:"index-module_lLeCP",infoPriceIcon:"index-module_O13fN",infoSalePrice:"index-module_BAKYy",passengerRow:"index-module_gf7o9",passengerText:"index-module_kHuok",passengerInfoContainer:"index-module__rGK3",passengerName:"index-module_JfjHW",passengerPassport:"index-module_be3Sw",passengerViewAllView:"index-module_WQZqf",passengerViewAll:"index-module_XLMzF",passengerFoldArrow:"index-module_np6ET",passengerLine:"index-module_FOoGR",infoMobile:"index-module_m0DWx",infoOrder:"index-module_Vicr8",infoCopyIcon:"index-module_mh36b",infoCopyText:"index-module_wtsNf",infoCopyContainer:"index-module_V1NXn"},L=n(6980),B={height:1},F=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"formatBookInfoData",(function(){var e=i.props.orderData,t=e.passengers,n=void 0===t?[]:t,o=e.contact,a=e.orderInfo,s=e.refunds,r=void 0===s?[]:s,l=a.orderPrice,c=a.refundFee,d=a.orderStatus,u=o.contactMobile,m=o.contactEmail,x=o.countryCode,h=[];n.forEach((function(e){var t=e.gender,n=e.firstName,i=e.lastName,o=e.idCardType,a=e.idCardNum;h.push({gender:L.Z.formatGender(t),fullName:"".concat(L.Z.formatName(i)," ").concat(L.Z.formatName(n)),cardNum:a,cardType:b.Z.formatCardType(o)})}));var p="",f=b.Z.calcRefundPrice(l,c);return d===b.D.ticketReturning?p="\u9884\u8ba1\u9000\u6b3e":d===b.D.ticketReturned&&(k.Z.isEmpty(r)?p=f<=0?"\u9000\u6b3e\u91d1\u989d":"\u9884\u8ba1\u9000\u6b3e":(p="\u9000\u6b3e\u91d1\u989d",f=k.Z.reduce(r,(function(e,t){return e+t.amount}),0))),{orderPrice:l,calcRefundFee:f<0?0:f,passengerList:h,contactMobile:u,contactEmail:m,contactCountryCode:x,refundFeeText:p}})),i.state={expandedPassengers:!1},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.orderNumber,i=t.showRefundExpense,o=t.showPriceExpense,a=this.formatBookInfoData(),s=a.orderPrice,r=a.calcRefundFee,l=a.passengerList,c=a.contactMobile,d=a.contactEmail,u=a.contactCountryCode,m=a.refundFeeText,x=this.state.expandedPassengers,h=l.length,f=x?l:l.slice(0,1);return(0,Z.jsxs)(p.View,{className:V.infoContainer,children:[(0,Z.jsx)(p.Text,{className:V.infoTitle,children:"\u9884\u8ba2\u4fe1\u606f"}),(0,Z.jsxs)(p.View,{className:V.infoRow,children:[(0,Z.jsx)(p.Text,{className:V.infoRowLeftText,children:"\u8ba2\u5355\u91d1\u989d"}),(0,Z.jsxs)(_.En,{className:V.infoRow,onClick:function(){k.Z.isEmpty(m)?o():i()},children:[(0,Z.jsxs)(O.ZP,{className:V.infoPrice,fontFamily:O.Fk.SemiBold,children:["\xa5",s]}),(0,Z.jsx)(C.Z,{className:V.infoPriceIcon,children:"\ue013"})]})]}),(0,Z.jsx)(p.View,{className:V.infoLine,style:B}),!k.Z.isEmpty(m)&&(0,Z.jsxs)(p.View,{className:V.infoRow,children:[(0,Z.jsx)(p.Text,{className:V.infoRowLeftText,children:m}),(0,Z.jsx)(_.En,{className:V.infoRow,onClick:function(){i&&i()},children:(0,Z.jsxs)(p.Text,{className:V.infoSalePrice,children:["\xa5",r]})})]}),!k.Z.isEmpty(m)&&(0,Z.jsx)(p.View,{className:V.infoLine,style:B}),(0,Z.jsxs)(p.View,{className:V.passengerRow,children:[(0,Z.jsx)(p.Text,{className:V.passengerText,children:"\u51fa\u884c\u4eba"}),(0,Z.jsx)(p.View,{style:{flex:1},children:f.map((function(t,n){var i=t.gender,o=t.fullName,a=t.cardNum,s=t.cardType;return(0,Z.jsxs)(p.View,{className:V.passengerInfoContainer,children:[(0,Z.jsx)(p.Text,{className:V.passengerName,children:o}),(0,Z.jsxs)(O.ZP,{className:V.passengerPassport,children:[s," ",a," ",i]}),h>1&&!x&&(0,Z.jsxs)(_.En,{withFeedback:!0,activeOpacity:.5,className:V.passengerViewAllView,onClick:function(){e.setState({expandedPassengers:!0})},children:[(0,Z.jsx)(p.Text,{className:V.passengerViewAll,children:"\u67e5\u770b\u5168\u90e8"}),(0,Z.jsx)(C.Z,{className:V.passengerFoldArrow,children:"\uee55"})]}),h>1&&n===h-1&&x&&(0,Z.jsxs)(_.En,{withFeedback:!0,activeOpacity:.5,className:V.passengerViewAllView,onClick:function(){e.setState({expandedPassengers:!1})},children:[(0,Z.jsx)(p.Text,{className:V.passengerViewAll,children:"\u6536\u8d77"}),(0,Z.jsx)(C.Z,{className:V.passengerFoldArrow,children:"\uee56"})]}),(0,Z.jsx)(p.View,{className:V.passengerLine,style:B})]},n)}))})]}),(0,Z.jsxs)(p.View,{className:V.infoRow,children:[(0,Z.jsx)(p.Text,{className:V.infoRowLeftText,children:"\u8054\u7cfb\u7535\u8bdd"}),(0,Z.jsxs)(O.ZP,{className:V.infoMobile,children:["+",u," ",c]})]}),(0,Z.jsx)(p.View,{className:V.infoLine,style:B}),(0,Z.jsxs)(p.View,{className:V.infoRow,children:[(0,Z.jsx)(p.Text,{className:V.infoRowLeftText,children:"\u8054\u7cfb\u90ae\u7bb1"}),(0,Z.jsx)(O.ZP,{className:V.infoMobile,children:d})]}),(0,Z.jsx)(p.View,{className:V.infoLine,style:B}),(0,Z.jsxs)(p.View,{className:V.infoRow,children:[(0,Z.jsx)(p.Text,{className:V.infoRowLeftText,children:"\u8ba2\u5355\u53f7"}),(0,Z.jsx)(O.ZP,{className:V.infoOrder,children:n}),(0,Z.jsxs)(_.En,{withFeedback:!0,className:V.infoCopyContainer,onClick:function(){j().setClipboardData({data:n})},children:[(0,Z.jsx)(C.Z,{className:V.infoCopyIcon,children:"\udb80\uddd6"}),(0,Z.jsx)(p.Text,{className:V.infoCopyText,children:"\u590d\u5236"})]})]})]})}}]),n}(m.Component),M=n(4151),U={eTicketContainer:"index-module_FjmKD",eTicketTitle:"index-module_Ai07P",buttonContainer:"index-module_e0k8m",viewTicketButton:"index-module_qBMnf",buttonSpacer:"index-module_Gs7zW",ticketButtonText:"index-module_erg_G",checkinText:"index-module_dt18F",eTicketContent:"index-module_ef3kp",ticketButton:"index-module_RiUPS",ticketCode:"index-module_Kk83v",ticketArrow:"index-module_qGIro",ticketRow:"index-module_IibwG",ticketReminderIcon:"index-module_aUeZU",eurailIcon:"index-module_PTzF_",ticketContentText:"index-module_ggUmc",ticketFetchPositionButton:"index-module_pU4Cn",ticketContentViewText:"index-module_apBOO",ticketBackground:"index-module__2X2p"},H=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"renderTicket",(function(e){var t=e.ticketCode;return(0,Z.jsxs)(p.View,{className:U.eTicketContainer,children:[(0,Z.jsx)(p.Text,{className:U.eTicketTitle,children:"\u51ed\u3010\u7eb8\u8d28\u7968\u3011\u4e58\u8f66"}),(0,Z.jsx)(_.En,{className:U.ticketButton,children:(0,Z.jsxs)(O.ZP,{fontFamily:O.Fk.SemiBold,className:U.ticketCode,children:["\u53d6\u7968\u7801 ",t]})}),(0,Z.jsxs)(p.View,{className:U.ticketRow,children:[(0,Z.jsx)(p.Image,{className:U.eurailIcon,src:D.Z.ORDER_EU_RAIL_ICON}),(0,Z.jsx)(p.Text,{className:U.ticketContentText,children:"\u51ed\u53d6\u7968\u7801\u5728\u652f\u6301\u53d6\u7968\u673a\u7684\u8f66\u7ad9\u53d6\u7968"}),(0,Z.jsxs)(_.En,{className:U.ticketFetchPositionButton,onClick:i.props.onViewTodStation,children:[(0,Z.jsx)(p.Text,{className:U.ticketContentViewText,children:"\u67e5\u770b"}),(0,Z.jsx)(C.Z,{className:U.ticketArrow,children:"\ue944"})]})]}),(0,Z.jsxs)(p.View,{className:U.ticketRow,children:[(0,Z.jsx)(C.Z,{className:U.ticketReminderIcon,children:"\uf4bb"}),(0,Z.jsx)(p.Text,{className:U.ticketContentText,children:"\u5efa\u8bae\u81f3\u5c11\u63d0\u524d40\u5206\u949f\u5230\u8fbe\u8f66\u7ad9\u529e\u7406\u53d6\u7968"})]})]})})),i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onViewETicker,n=e.ticketInfo,i=e.doCheckin,o=n.outTicketInfo,s=void 0===o?{}:o,r=n.checkinTicket,l=s.tickets,c=(0,a.Z)(l,1),d=c[0];if("TOD"===(null===d||void 0===d?void 0:d.ticketType))return this.renderTicket(d);var u=[];return l.length>0&&u.push((0,Z.jsx)(_.En,{className:U.viewTicketButton,onClick:t,children:(0,Z.jsx)(p.Text,{className:U.ticketButtonText,children:"\u67e5\u770b\u7535\u5b50\u7968"})})),k.Z.isEmpty(r)||u.push((0,Z.jsx)(_.En,{className:(0,_.AK)(U.viewTicketButton,u.length>0&&U.buttonSpacer),onClick:function(){return i(r)},children:(0,Z.jsxs)(p.Text,{className:U.ticketButtonText,children:["\u884c\u7a0b\u767b\u8bb0",(0,Z.jsx)(p.Text,{className:U.checkinText,children:"(Check in)"})]})})),(0,Z.jsxs)(p.View,{className:U.eTicketContainer,children:[(0,Z.jsx)(p.Text,{className:U.eTicketTitle,children:"\u51ed\u3010\u7535\u5b50\u7968\u3011\u4e58\u8f66"}),(0,Z.jsx)(p.View,{className:U.buttonContainer,children:u}),(0,Z.jsx)(p.Text,{className:U.eTicketContent,children:"\u65e0\u9700\u53d6\u7968\uff01\u5411\u9a8c\u7968\u5458\u51fa\u793a\u7535\u5b50\u7968\u6216\u90ae\u7bb1\u5185PDF\u6587\u4ef6\u5373\u53ef"})]})}}]),n}(m.Component),G=n(89838),Y=n(91618),q=n(64018),K=n(99415),W={eTicketContainer:"index-module_ieoPF",eTicketScroll:"index-module_S2YxU",backGradient:"index-module_rvHq5",segContainer:"index-module_iG929",ticketItemContainer:"index-module_yuQze",segTopPart:"index-module_w5ra2",timeRow:"index-module_uHqrl",time:"index-module_ssH99",crossDay:"index-module_UprB9",arrow:"index-module_hNOtn",station:"index-module_eBYsg",dashImage:"index-module_OLwGK",segBottomPart:"index-module_TEXD1",topTicketHeight:"index-module_tyUvM",ticketItem:"index-module_JBRX6",separateLine:"index-module_UiKXv",ticketIndex:"index-module_BUbbo",ticketArrow:"index-module_ANyX4"},z={container:"index-module_gfc48",segItem:"index-module_YB_Ls",segItemHighlight:"index-module_AuKIg",segIndicator:"index-module_HOcwQ",segText:"index-module_hpdZn"},J=j().getSystemInfoSync().windowWidth,X=J-48,Q=(X-6)/2,$={width:X},ee={width:Q},te=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"onChangeIndex",(function(e){var t=i.props.onChangeIndex;i.setState({currentIndex:e,animation:j().createAnimation({timingFunction:"ease"}).translateX(e*Q+3).step({duration:300}).export()},(function(){t&&t(e)}))})),i.state={currentIndex:0,animation:j().createAnimation({timingFunction:"ease"}).translateX(3).step({duration:0}).export()},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.animation,i=t.currentIndex;return(0,Z.jsxs)(p.View,{className:z.container,style:$,children:[(0,Z.jsx)(_.AF.View,{className:z.segIndicator,style:ee,animation:n}),(0,Z.jsx)(_.En,{className:[z.segItem,0===i&&z.segItemHighlight],onClick:function(){return e.onChangeIndex(0)},children:(0,Z.jsx)(p.Text,{className:z.segText,children:"\u53bb\u7a0b"})}),(0,Z.jsx)(_.En,{className:[z.segItem,1===i&&z.segItemHighlight],onClick:function(){return e.onChangeIndex(1)},children:(0,Z.jsx)(p.Text,{className:z.segText,children:"\u8fd4\u7a0b"})})]})}}]),n}(m.Component),ne=n(34008),ie=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"renderItem",(function(e){var t=e.item,n=(e.index,t.tickets),i=void 0===n?[]:n,o=t.tripLine,a=t.crossDay,s=t.departTime,r=t.arriveTime;return(0,Z.jsxs)(p.View,{className:W.ticketItemContainer,children:[(0,Z.jsxs)(p.View,{className:W.segTopPart,children:[(0,Z.jsxs)(p.View,{className:W.timeRow,children:[(0,Z.jsx)(p.Text,{className:W.time,children:s}),(0,Z.jsx)(C.Z,{className:W.arrow,children:"\ue29b"}),(0,Z.jsx)(p.Text,{className:W.time,children:r}),a>0&&(0,Z.jsxs)(p.Text,{className:W.crossDay,children:["+",a,"\u5929"]})]}),(0,Z.jsx)(p.Text,{className:W.station,children:o})]}),(0,Z.jsx)(p.Image,{className:W.dashImage,mode:"widthFix",src:D.Z.ORDER_TICKET_DASH_LINE}),(0,Z.jsx)(p.View,{className:W.segBottomPart,children:i.map((function(e,t){var n=t+1,i=e.ticketUrl,o=0===t;return(0,Z.jsxs)(_.En,{className:[W.ticketItem,o&&W.topTicketHeight],onClick:function(){return _.Nd.navigateTo({url:i,data:{title:"\u7535\u5b50\u7968".concat(n)}})},children:[!o&&(0,Z.jsx)(p.View,{className:W.separateLine}),(0,Z.jsxs)(p.Text,{className:W.ticketIndex,children:["\u7535\u5b50\u7968",n]}),(0,Z.jsx)(C.Z,{className:W.ticketArrow,children:"\ue944"})]},t)}))})]})})),(0,u.Z)((0,l.Z)(i),"onChangeTravel",(function(e){var t=i.props.ticketInfo,n=void 0===t?{}:t,o=n.inTicketInfo,a=n.outTicketInfo;i.setState({travelIndex:e,ticketInfos:0===e?[a]:[o]})}));var o=e.ticketInfo,a=void 0===o?{}:o,r=a.outTicketInfo;return i.state={travelIndex:0,ticketInfos:[r]},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props.ticketInfo,t=void 0===e?{}:e,n=t.inTicketInfo,i=this.props.onClose,o=this.state.ticketInfos,a=void 0===o?[]:o;return(0,Z.jsxs)(p.View,{className:W.eTicketContainer,children:[(0,Z.jsx)(_.o,{start:{x:.5,y:0},end:{x:.5,y:1},locations:[0,1],colors:["#fff","#f5f7fa"],className:W.backGradient}),(0,Z.jsx)(f.Z,{title:"\u67e5\u770b\u7535\u5b50\u7968",onBackClick:i,headerBackgroundColor:"transparent"}),!k.Z.isEmpty(n)&&(0,Z.jsx)(p.View,{className:W.segContainer,children:(0,Z.jsx)(te,{onChangeIndex:this.onChangeTravel})}),(0,Z.jsx)(ne.Z,{className:W.eTicketScroll,scrollY:!0,data:a,renderItem:this.renderItem})]})}}]),n}(m.Component),oe={bannerRoot:"index-module_GNB2_",bannerContainer:"index-module_aSR0u",infoIcon:"index-module_Ljmsu",mainTitle:"index-module_G2G3E",content:"index-module_MViD_",forwardIcon:"index-module_mupYv"},ae=m.memo((function(e){var t=e.noticeTitle,n=e.noticeContent,i=(e.jumpURL,e.showDialog);return(0,Z.jsx)(_.o,{className:oe.bannerRoot,start:{x:0,y:.5},end:{x:1,y:.5},locations:[0,1],colors:["#fff6f0","#ffeae9"],children:(0,Z.jsxs)(_.En,{className:oe.bannerContainer,activeOpacity:1,onClick:function(){return i()},children:[(0,Z.jsx)(C.Z,{className:oe.infoIcon,isCommon:!0,children:"\ue6d5"}),(0,Z.jsx)(p.Text,{className:oe.mainTitle,numberOfLines:1,children:t}),(0,Z.jsx)(p.Text,{className:oe.content,numberOfLines:1,children:n}),(0,Z.jsx)(C.Z,{className:oe.forwardIcon,isCommon:!0,children:"\ue944"})]})})}),(function(e,t){return e.noticeTitle===t.noticeTitle})),se=n(65741),re=(0,r.Z)((function e(){(0,s.Z)(this,e)}));(0,u.Z)(re,"getRefreshControl",(function(e,t){return null}));var le={rootContainer:"index-module_DAa3E",orderButton:"index-module_Y5DBO",orderButtonDisable:"index-module_w0SZI",orderButtonText:"index-module_D6wLq",orderButtonTag:"index-module_TEElt",orderButtonTagText:"index-module_SJbUa"},ce=n(11478),de=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"getSearchListParams",(function(){var e=i.props.orderData,t=e.orderPassengers,n=e.orderPtpProductInfo,o=(0,a.Z)(n,1),s=o[0],r=s.departeDate,l=s.fromCityCName,c=s.toCityCName,d=s.segments,u=[{age:35,count:t.length}],m=(0,E.Z)(r).format(ce.Z.DATE_FORMAT_YYYY_MM_DD),x=(0,E.Z)().format(ce.Z.DATE_FORMAT_YYYY_MM_DD),h=(0,E.Z)(m).isAfter((0,E.Z)(x),"d")?m:x;return{fromcity:l,tocity:c,fromcitycode:d[0].fromStationCode,tocitycode:d[d.length-1].toStationCode,searchAgeInfoList:u,departuredate:h,fromcitycountry:"\u82f1\u56fd",tocitycountry:"\u82f1\u56fd",ageRanges:[{passengerTypeCode:1,passengerType:"\u6210\u4eba",ageLow:16,ageHigh:999},{passengerTypeCode:3,passengerType:"\u513f\u7ae5",ageLow:5,ageHigh:15},{passengerTypeCode:5,passengerType:"\u514d\u8d39\u513f\u7ae5",ageLow:0,ageHigh:4}],RNEuRailVersion:"23071001"}})),(0,u.Z)((0,l.Z)(i),"debounceResendEmail",k.Z.debounce((function(){var e=i.props.oid;b.Z.resendEmail(e,(function(){i.setState({isSentEmail:!0},(function(){j().showToast({title:"\u8f66\u7968\u5df2\u53d1\u9001\u81f3\u60a8\u7684\u90ae\u7bb1\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",duration:2e3,icon:"none"})}))}))}),500,{leading:!1,trailing:!0})),(0,u.Z)((0,l.Z)(i),"debounceRefund",k.Z.debounce((function(){var e=i.props,t=e.oid,n=e.refreshOrder;b.Z.applyRefund(t,(function(e){null===e?n&&n():_.Nd.navigateTo({url:"/pages/trainAbroad/refund/index",data:{orderNumber:t,refundFee:e}})}))}),500,{leading:!1,trailing:!0})),i.state={isSentEmail:!1},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.orderData;if((0,k.x)(t))return null;var n=t.orderInfo,i=n.orderStatus,o=A.getOrderStatusObject(n),a=o.buttons;return(0,k.x)(a)?null:(0,Z.jsx)(p.View,{className:le.rootContainer,style:{elevation:10,shadowColor:"rgb(0,0,0)",shadowOpacity:.1,paddingBottom:_.ua.isIPhoneX()?44:32},children:a.map((function(t){var n=t.button,o=t.tag,a=t.action,s=t.type,r=le.orderButton;return"email"===a&&e.state.isSentEmail&&(r=(0,_.AK)(le.orderButton,le.orderButtonDisable)),(0,Z.jsxs)(_.En,{withFeedback:"email"!==a||!e.state.isSentEmail,className:r,onClick:function(){T.Z.traceViewBottomButton(s,i),"home"===a?g.Z.gotoPlatHome():"buyAgain"===a||("email"===a?e.state.isSentEmail||e.debounceResendEmail():"refund"===a&&e.debounceRefund())},children:[(0,Z.jsx)(p.Text,{className:le.orderButtonText,children:n}),!(0,k.x)(o)&&(0,Z.jsx)(p.View,{className:le.orderButtonTag,children:(0,Z.jsx)(p.Text,{className:le.orderButtonTagText,children:o})})]},a)}))})}}]),n}(m.Component),ue=n(38080),me=n(67215),xe={container:"index-module_Zk3NS",journeyRow:"index-module_xROKv",departArrive:"index-module_ifXHp",viewDetailButton:"index-module_V9a6p",viewDetailText:"index-module_Lz65E",viewDetailArrow:"index-module_ZuXjA",departRow:"index-module_rUIlY",transferTag:"index-module_Hys1P",transferTagText:"index-module_LcohC",departDate:"index-module_XVyIK",departDateReminder:"index-module_TM7GQ",separateLine:"index-module_BV4y8",seatContainer:"index-module_AIecw",seatRow:"index-module_SK8Qm",seatRowSimple:"index-module_QdmRt",seatLeftPartSimple:"index-module_aT3OO",seatClassSimple:"index-module_tIL4L",seatClassSeparator:"index-module_BTQkv",seatLeftPart:"index-module_eUD92",seatTurnContainer:"index-module_ZHlxp",seatTurn:"index-module_ZGUsl",seatClassContainer:"index-module_MGrLk",seatClass:"index-module_rXB9F",seatText:"index-module_bkdAU",foldButton:"index-module_KqPuC",foldText:"index-module_D4eHe",foldArrow:"index-module_twEFk",refundRow:"index-module_blwjR",refundGradient:"index-module_hi4UQ",refundText:"index-module_yBU3b",refundArrow:"index-module_QxKcs"},he=n(43261),pe=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),i.state={showAllJourneySeats:!1},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.cardInfo,i=t.showTransferSheet,o=t.seatInfo,a=t.openRuleList,s=t.style,r=t.ignoreType,l=void 0===r?{}:r,c=this.state.showAllJourneySeats,d=o.outSeats,u=void 0===d?[]:d,m=n.stations,x=n.transferTag,h=n.departureYear,f=n.departureDate,T=n.departArrive,g=u.length>2,N=g&&c?u:u.slice(0,2),y=l.hideJourneySteps;return(0,Z.jsxs)(p.View,{className:xe.container,style:s,children:[(0,Z.jsxs)(p.View,{className:xe.journeyRow,children:[(0,Z.jsx)(p.Text,{className:xe.departArrive,children:T}),(0,Z.jsxs)(_.En,{className:xe.viewDetailButton,onClick:i,children:[(0,Z.jsx)(p.Text,{className:xe.viewDetailText,children:"\u884c\u7a0b\u8be6\u60c5"}),(0,Z.jsx)(C.Z,{className:xe.viewDetailArrow,children:"\ue944"})]})]}),(0,Z.jsxs)(p.View,{className:xe.departRow,children:[(0,Z.jsx)(_.o,{className:xe.transferTag,start:{x:0,y:.5},end:{x:1,y:.5},locations:[0,1],colors:["#0088F6","#006FF6"],children:(0,Z.jsx)(p.Text,{className:xe.transferTagText,children:x})}),(0,Z.jsxs)(O.ZP,{fontFamily:O.Fk.Medium,className:xe.departDate,children:[h,f]}),(0,Z.jsx)(p.Text,{className:xe.departDateReminder,children:"(\u65f6\u95f4\u5747\u4e3a\u5f53\u5730\u65f6\u95f4)"})]}),(0,Z.jsx)(he.Z,{ignoreType:l,stations:m,showTransferSheet:i}),(0,Z.jsxs)(p.View,{className:xe.seatContainer,children:[u.length>0&&(0,Z.jsx)(p.View,{className:xe.separateLine,style:{height:1}}),N.map((function(e){var t=e.journeyTitle,n=e.journeyLevel,i=e.seatFormatShow;return(0,Z.jsxs)(p.View,{className:y?xe.seatRowSimple:xe.seatRow,children:[y?(0,Z.jsxs)(p.View,{className:xe.seatLeftPartSimple,children:[(0,Z.jsx)(p.Text,{className:xe.seatClassSimple,children:n}),(0,Z.jsx)(p.View,{className:xe.seatClassSeparator})]}):(0,Z.jsxs)(p.View,{className:xe.seatLeftPart,children:[(0,Z.jsx)(p.View,{className:xe.seatTurnContainer,children:(0,Z.jsx)(p.Text,{className:xe.seatTurn,children:t})}),(0,Z.jsx)(p.View,{className:xe.seatClassContainer,children:(0,Z.jsx)(p.Text,{className:xe.seatClass,children:n})})]}),(0,Z.jsx)(p.Text,{className:xe.seatText,children:i})]},t)})),g&&(0,Z.jsxs)(_.En,{className:xe.foldButton,onClick:function(){return e.setState({showAllJourneySeats:!c})},children:[(0,Z.jsx)(p.Text,{className:xe.foldText,children:c?"\u6536\u8d77":"\u5c55\u5f00\u5168\u90e8"}),(0,Z.jsx)(C.Z,{className:xe.foldArrow,children:String.fromCodePoint(c?61014:61013)})]})]}),(0,Z.jsx)(_.En,{className:xe.refundRow,onClick:a,children:(0,Z.jsxs)(_.o,{className:xe.refundGradient,start:{x:0,y:.5},end:{x:1,y:.5},locations:[0,1],colors:["#f5f7fa","#fbfcfd"],children:[(0,Z.jsx)(p.Text,{className:xe.refundText,children:"\u9000\u6539\u548c\u4f7f\u7528\u8bf4\u660e"}),(0,Z.jsx)(C.Z,{className:xe.refundArrow,children:"\ue944"})]})})]})}}]),n}(m.Component),fe=n(77537),Te=n(71279),ge={refundItemContainer:"index-module_j5558",refundItemText:"index-module_F6oE9",refundItemTextBlack:"index-module__dHX7",refundItemTextBlue:"index-module_R18O8",refundItemTextDarkBlue:"index-module_kIyAq",refundItemDetail:"index-module_FwrT1",refundItemArrow:"index-module_eXOgG"},Ne=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.orderStatus,n=e.refunds,i=e.oid,o=e.pageCode,a=b.Z.isShowRefundBanner(t,n);return a?(0,Z.jsxs)(_.En,{className:ge.refundItemContainer,onClick:function(){fe.Z.openCustomService(i,o)},children:[(0,Z.jsx)(p.Text,{className:[ge.refundItemText,ge.refundItemTextBlack],children:"\u9000\u6b3e\u57281~3\u5929\u5185\u9000\u56de\u652f\u4ed8\u8d26\u6237\uff0c\u5982\u9700\u5e2e\u52a9\u8bf7\u8054\u7cfb\u5ba2\u670d"}),(0,Z.jsx)(C.Z,{className:ge.refundItemArrow,children:"\ue944"})]}):null}}]),n}(m.Component),ye=n(25940),ke=n(32143),we=n(38913),je={todStation:"index-module_Zdtd3",scroll:"index-module_wvzpw",todGradient:"index-module_myyt9",title:"index-module_GpYnI",todContainer:"index-module_pMIF8",borderContainer:"index-module_F7UUZ",topicContainer:"index-module_Ovb0v",topicItem:"index-module_YMovE",topicText:"index-module_kiFSO",topicLine:"index-module_PRQbm",topicHorizontalLine:"index-module_hp5z_",contentContainer:"index-module_P3HKZ",contentItem:"index-module_ErZoq",contentText:"index-module_Y8Bqw",contentLine:"index-module_Qol1M",questionContent:"index-module_hh3yQ",qTitle:"index-module_wWF7R",qContent:"index-module_Bt1AG"},ve=function(e){var t=e.closeDialog,n=[{title:"\u975e\u8de8\u5883\u8f66\u7968",topic:["\u706b\u8f66\u7968\u533a\u95f4","\u53d6\u7968\u8f66\u7ad9"],contents:[{left:"\u6cd5\u56fd\u5883\u5185\u706b\u8f66\u7968",right:"\u53ef\u5728\u6cd5\u56fd\u4efb\u610f\u706b\u8f66\u7ad9\u7684\u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968"},{left:"\u82f1\u56fd\u5883\u5185\u706b\u8f66\u7968",right:"\u53ef\u5728\u82f1\u56fd\u4efb\u610f\u706b\u8f66\u7ad9\u7684\u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968\uff0c\u9700\u4f7f\u7528\u4efb\u610f\u59d3\u540d\u7684\u4e00\u5f20\u82af\u7247\u5361\u53d6\u7968"},{left:"\u5fb7\u56fd\u5883\u5185\u706b\u8f66\u7968",right:"\u53ef\u5728\u5fb7\u56fd\u4efb\u610f\u706b\u8f66\u7ad9\u7684\u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968"}]},{title:"\u8de8\u5883\u8f66\u7968",topic:["\u706b\u8f66\u7968\u533a\u95f4","\u53d6\u7968\u8f66\u7ad9"],contents:[{left:"\u6b27\u6d32\u4e4b\u661f",right:"\u53ef\u5728\u6b27\u6d32\u4e4b\u661f\u7ecf\u505c\u7ad9 (Paris Nord, Brussels Midi, London St Pancras, Ashford, Ebbsfleet) \u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968"},{left:"TGV\u610f\u5927\u5229-\u6cd5\u56fd\uff0cTGV\u65e5\u5185\u74e6-Med\uff0cTGV\u5e03\u9c81\u585e\u5c14-\u6cd5\u56fd\uff0cTGV Lyria\uff0c\u5927\u529b\u58ebThalys\uff0c\u5fb7\u56fd-\u5df4\u9ece",right:"\u4ec5\u80fd\u5728\u6cd5\u56fd\u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968 \uff08\u5982\u5206\u6bb5\u884c\u7a0b\u4e2d\u67d0\u6bb5\u4e3a\u4ee5\u4e0a\u8f66\u6b21\uff0c\u5219\u8be5\u6bb5\u4e5f\u4ec5\u80fd\u5728\u6cd5\u56fd\u53d6\u7968)"}]}],i=function(e,t){var n=e.title,i=e.topic,o=e.contents;return(0,Z.jsxs)(p.View,{children:[(0,Z.jsx)(p.Text,{className:je.title,children:n}),(0,Z.jsxs)(p.View,{className:je.borderContainer,children:[(0,Z.jsxs)(p.View,{className:je.topicContainer,children:[(0,Z.jsx)(p.View,{className:je.topicItem,children:(0,Z.jsx)(p.Text,{className:je.topicText,children:i[0]})}),(0,Z.jsx)(p.View,{className:je.topicLine}),(0,Z.jsx)(p.View,{className:je.topicItem,children:(0,Z.jsx)(p.Text,{className:je.topicText,children:i[1]})})]}),(0,Z.jsx)(p.View,{className:je.topicHorizontalLine}),o.map((function(e,t){var n=e.left,i=e.right;return(0,Z.jsxs)(p.View,{children:[(0,Z.jsxs)(p.View,{className:je.contentContainer,children:[(0,Z.jsx)(p.View,{className:je.contentItem,children:(0,Z.jsx)(p.Text,{className:je.contentText,children:n})}),(0,Z.jsx)(p.View,{className:je.contentLine}),(0,Z.jsx)(p.View,{className:je.contentItem,children:(0,Z.jsx)(p.Text,{className:je.contentText,children:i})})]}),t!==o.length-1&&(0,Z.jsx)(p.View,{className:je.topicHorizontalLine})]},t)}))]})]},t)};return(0,Z.jsxs)(p.View,{className:je.todStation,children:[(0,Z.jsx)(f.Z,{headerBackgroundColor:"transparent",title:"\u652f\u6301\u53d6\u7968\u673a\u53d6\u7968\u7684\u8f66\u7ad9",onBackClick:function(){t&&t()}}),(0,Z.jsx)(_.o,{start:{x:0,y:1},end:{x:0,y:0},locations:[0,1],colors:["rgb(245,247,250)","rgb(255,255,255)"],className:je.todGradient}),(0,Z.jsxs)(p.ScrollView,{scrollY:!0,className:je.scroll,children:[(0,Z.jsx)(p.View,{className:je.todContainer,children:n.map((function(e,t){return i(e,t)}))}),(0,Z.jsxs)(p.View,{className:je.questionContent,children:[(0,Z.jsx)(p.Text,{className:je.qTitle,children:"\u5206\u6bb5\u884c\u7a0b\u5982\u4f55\u53d6\u7968\uff1f"}),(0,Z.jsx)(p.Text,{className:je.qContent,children:"1. \u591a\u6bb5\u884c\u7a0b\u7684\u7ebf\u4e0b\u53d6\u7968\uff0c\u53ea\u80fd\u5728\u6bcf\u6bb5\u5bf9\u5e94\u7684\u81ea\u52a9\u53d6\u7968\u673a\u53d6\u7968\u3002\n\u4f8b\u5982\u4e9a\u7ef4\u519c-\u5df4\u9ece-\u4f26\u6566\uff0c\u7b2c\u4e00\u7a0b\u4e3a\u6cd5\u56fd\u5883\u5185\u884c\u7a0b\uff0c\u7b2c\u4e8c\u7a0b\u4e3a\u6b27\u6d32\u4e4b\u661f\uff0c\u7b2c\u4e8c\u7a0b\u53ea\u80fd\u5728\u6b27\u6d32\u4e4b\u661f\u7ecf\u505c\u7ad9\u53d6\u7968\uff0c\u65e0\u6cd5\u5728\u8be5\u884c\u7a0b\u59cb\u53d1\u7ad9\u6cd5\u56fd\u4e9a\u7ef4\u519c\u53d6\u7968\u3002"}),(0,Z.jsx)(p.Text,{className:je.qContent,children:"2. ABS fares+\u5927\u529b\u58eb/\u6b27\u6d32\u4e4b\u661f\u7ec4\u5408 (\u5e03\u9c81\u65e5-\u5e03\u9c81\u585e\u5c14-\u5df4\u9ece/\u5e03\u9c81\u65e5-\u5e03\u9c81\u585e\u5c14-\u4f26\u6566) \u5efa\u8bae\u9009\u62e9\u7eb8\u8d28\u7968\uff0c\u7b2c\u4e00\u7a0b\u65e0\u6cd5\u5728\u51fa\u53d1\u5730\u53d6\u7968\u3002"})]})]})]})},Ce=ve,_e=n(55943),Ze=n(78670),Se=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;(0,s.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"bizType",_e.c.UNKNOWN),(0,u.Z)((0,l.Z)(i),"startAutoRefreshOrder",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.orderStatus,n=void 0===t?"":t;b.Z.isAutoRefresh(n)&&(i.autoRefreshTimer=setTimeout((function(){i.loadOrderDetail()}),1e4))})),(0,u.Z)((0,l.Z)(i),"stopAutoRefreshOrder",(function(){i.autoRefreshTimer&&clearTimeout(i.autoRefreshTimer)})),(0,u.Z)((0,l.Z)(i),"loadPassRecommend",(function(e){var t=e.outSolution,n=void 0===t?{}:t,o=n.departureLocation,a=void 0===o?{}:o,s=n.arrivalLocation,r=void 0===s?{}:s,l={scene:"orderDetail",departureCityCode:null===a||void 0===a?void 0:a.geoId,departureStationCode:null===a||void 0===a?void 0:a.locationCode,arrivalCityCode:null===r||void 0===r?void 0:r.geoId,arrivalStationCode:null===r||void 0===r?void 0:r.locationCode};N.Z.postAsync("/18483/json/passRecommend",l).then((function(e){var t=e.isSuccess,n=e.recommends,o=void 0===n?[]:n,a=e.link;t&&!k.Z.isEmpty(o)&&i.setState({passListLink:a,recommends:o})})).catch((function(e){}))})),(0,u.Z)((0,l.Z)(i),"loadDestination",(function(){N.Z.postAsync("/18712/getBookPage",{districtId:2,bookType:2,levelOneCatalogNameList:[],orderByLevelOneCatalogNameList:["\u600e\u4e48\u73a9","\u4f4f\u54ea\u91cc","\u5403\u4ec0\u4e48","\u8d2d\u7269"],filterRankCatalog:!0}).then((function(e){var t=e.catalogList,n=void 0===t?[]:t;k.Z.isEmpty(n)||i.setState({catalogList:n})}))})),(0,u.Z)((0,l.Z)(i),"gotoPay",(function(){T.Z.traceGoPay(),j().showLoading({title:"\u8bf7\u6c42\u4e2d...",mask:!0}),N.Z.postAsync("/15724/json/createpayment",{orderId:i.orderNumber}).then((function(e){j().hideLoading();var t=e.isSuccess,n=e.payInfo;t&&!k.Z.isEmpty(n)&&q.Z.regularPayV2(i.orderNumber,n,(function(e,t){"result"===e&&_.Nd.navigateTo({url:"/pages/trainAbroad/payResult/index",data:{orderNumber:i.orderNumber,pageFrom:"order",bizType:i.bizType}})}))})).catch((function(e){j().hideLoading(),j().showToast({title:"\u5524\u8d77\u652f\u4ed8\u5931\u8d25",duration:2e3,icon:"none"})}))})),(0,u.Z)((0,l.Z)(i),"cancelOrder",(function(){j().showLoading({title:"\u8bf7\u6c42\u4e2d..."}),N.Z.postAsync("/27467/json/cancelOrder",{orderId:i.orderNumber}).then((function(e){j().hideLoading();var t=e.isSuccess,n=e.bizHead,o=void 0===n?{}:n;if(t&&200===(null===o||void 0===o?void 0:o.code))return j().showToast({title:"\u8ba2\u5355\u5df2\u53d6\u6d88",duration:2e3,icon:"none"}),void i.loadOrderDetail();var a=we.Z.getHttpErrorMessage(o.code,o.displayMessage,"\u53d6\u6d88\u8ba2\u5355\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");j().showToast({title:a,duration:2e3,icon:"none"})})).catch((function(e){j().hideLoading(),j().showToast({title:"\u53d6\u6d88\u8ba2\u5355\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",duration:2e3,icon:"none"})}))})),(0,u.Z)((0,l.Z)(i),"showETicket",(function(e){if(e){T.Z.traceViewETickets();var t=i.state.ticketInfo,n=t.outTicketInfo,o=void 0===n?{}:n,s=o.tickets,r=void 0===s?[]:s,l=(0,a.Z)(r,1),c=l[0];if("PAH"===(null===c||void 0===c?void 0:c.ticketType)&&1===r.length)return void _.Nd.navigateTo({url:c.ticketUrl,data:{title:"\u7535\u5b50\u7968"}})}i.setState({showETicket:e})})),(0,u.Z)((0,l.Z)(i),"doCheckin",(function(e){_.Nd.navigateTo({url:e.ticketUrl,data:{title:"\u884c\u7a0b\u767b\u8bb0\uff08Check in\uff09"}})})),(0,u.Z)((0,l.Z)(i),"showReturnTicketDialog",(function(e){i.setState({showReturnTicket:e})})),(0,u.Z)((0,l.Z)(i),"renderPaperTicketCard",(function(){return(0,Z.jsx)(p.View,{})})),(0,u.Z)((0,l.Z)(i),"renderOrderBody",(function(){var e=i.state.loadingStatus,t=i.getIgnoreType();if(0===e)return(0,Z.jsx)(p.View,{className:h.loadingContainer,children:(0,Z.jsx)(_.gb,{style:{backgroundColor:"transparent"}})});if(e<0)return(0,Z.jsx)(p.View,{className:h.errorContainer,children:(0,Z.jsx)(y.Z,{containerStyle:{backgroundColor:"transparent"},errorCode:"-1001",retryClick:function(e){"retry"===e&&i.setState({loadingStatus:0},(function(){i.doLoginLoadOrderDetail()}))}})});var n=i.state,o=n.orderData,a=n.passListLink,s=n.recommends,r=n.noticeObj,l=void 0===r?{}:r,c=n.cardInfo,d=n.ticketInfo,u=n.seatInfo,m=n.isWeAppRefreshing,x=l.noticeCount,f=l.firstNotice,g=void 0===f?{}:f,N=g.contentType,w=g.content,j=g.title,v=o.orderInfo,C=o.receipt,S=o.refunds,R=v.enableCancel,A=v.orderStatus,E=A===b.D.ticketIssued||A===b.D.ticketReturning||A===b.D.tickedReturnFailed,O=!k.Z.isEmpty(d.checkinTicket)&&E,V=E&&d.outTicketInfo.tickets.length>0;return(0,Z.jsxs)(p.ScrollView,{refresherEnabled:!0,refresherTriggered:m,ref:i.scrollViewRef,refresherBackground:"transparent",className:h.orderScrollContainer,scrollIndicatorInsets:{right:1},scrollY:!0,onRefresherRefresh:function(){i.setState({isWeAppRefreshing:!0},(function(){i.loadOrderDetail()}))},refreshControl:re.getRefreshControl(e,(function(){i.loadOrderDetail()})),children:[(0,Z.jsx)(P,{orderData:o,showReturnTicket:function(){return i.showReturnTicketDialog(!0)},gotoPay:i.gotoPay,refreshOrder:function(){i.loadOrderDetail()}}),k.Z.isEmpty(l)?(0,Z.jsx)(p.View,{className:h.noticePlaceholderContainer}):(0,Z.jsx)(p.View,{className:h.noticeContainer,children:(0,Z.jsx)(ae,{noticeTitle:x>1?"\u51fa\u884c\u63d0\u9192\uff1a".concat(x,"\u6761\u516c\u544a"):"\u51fa\u884c\u63d0\u9192\uff1a",noticeContent:(x>1?"\xb7":"")+(k.Z.isEmpty(j)?w:j),showDialog:function(){2!==N||1!==x?i.setState({showNoticeDialog:!0}):_.Nd.navigateTo({url:w})}})}),(0,Z.jsx)(Ne,{pageCode:T.Z.getOrderPageId(i.bizType),oid:i.orderNumber,refunds:S,orderStatus:A}),(0,Z.jsxs)(p.View,{className:h.ticketJourneyWrapper,children:[O&&(0,Z.jsx)(_.o,{start:{x:1,y:.54},end:{x:.06,y:.54},locations:[0,1],colors:["#FFEAE9","#FFF6F0"],className:h.checkinReminder,children:(0,Z.jsx)(p.Text,{className:h.checkinReminderText,children:"\u8bf7\u5728\u300c\u51fa\u884c\u5f53\u65e5\u300d\u5b8c\u6210\u4e0b\u65b9 \u884c\u7a0b\u767b\u8bb0 \u540e\u4e58\u8f66\u3002\u672a\u5b8c\u6210\u767b\u8bb0\u53ef\u80fd \u65e0\u6cd5\u6b63\u5e38\u4e58\u8f66\u6216\u9762\u4e34\u8f66\u7ad9\u7f5a\u6b3e\u3002"})}),V&&(0,Z.jsx)(_.Zy,{className:h.ticketBackground,source:{uri:D.Z.ORDER_TICKET_BACKGROUND},children:(0,Z.jsx)(H,{ticketInfo:d,onViewTodStation:function(){return i.setState({showTodStations:!0})},onViewETicker:function(){return i.showETicket(!0)},doCheckin:i.doCheckin})}),!k.Z.isEmpty(c)&&(0,Z.jsx)(pe,{ignoreType:t,style:V?"":{marginTop:0},cardInfo:c,seatInfo:u,openRuleList:function(){T.Z.traceViewRefundRule(A),b.Z.loadOrderPolicy(i.orderNumber).then((function(e){i.setState({isShowRefundRule:!0,refundRuleData:{ruleList:e}})}))},showTransferSheet:function(){T.Z.traceViewJourneyDetail(),i.setState({isShowTransferSheet:!0})}})]}),(0,Z.jsx)(F,{orderData:o,orderNumber:i.orderNumber,showRefundExpense:function(){i.setState({priceExpenseData:b.Z.getRefundExpenseData(i.bizType,o)})},showPriceExpense:function(){i.setState({priceExpenseData:b.Z.getPriceExpenseData(i.bizType,o)})}}),!k.Z.isEmpty(C)&&(0,Z.jsx)(I,{data:C,orderNumber:i.orderNumber,showReceiptDialog:function(){i.setState({isShowReceiptDialog:!0})},onInputFocus:function(e){i.scrollViewRef&&i.scrollViewRef.current.scrollTo&&i.scrollViewRef.current.scrollTo({y:800})}}),!k.Z.isEmpty(s)&&(0,Z.jsx)(G.Z,{passListLink:a,recommends:s}),i.renderPaperTicketCard(),R&&(0,Z.jsx)(_.En,{withFeedback:!0,activeOpacity:.5,className:h.cancelView,onClick:function(){i.setState({isShowCancelDialog:!0})},children:(0,Z.jsx)(p.Text,{className:h.cancelText,children:"\u53d6\u6d88\u8ba2\u5355"})}),(0,Z.jsx)(M.Z,{})]})})),(0,u.Z)((0,l.Z)(i),"onCloseScheduleDetail",(function(){i.setState({isShowTransferSheet:!1})})),ce.Z.initialLocale();var o=(0,w.getCurrentInstance)().router.params;return i.orderNumber=o.orderNumber,i.pageFrom=e.pageFrom||o.pageFrom||"order",i.state={showReceiptDialog:!1,loadingStatus:0,orderData:{},priceExpenseData:{},isWeAppRefreshing:!1},i.needLogExpose=!0,i.isFirstShowOrderPage=!0,i.enterOrderPageTime=(new Date).getTime(),i.scrollViewRef=(0,m.createRef)(),K.W.traceOrder({action:"constructor",orderNumber:i.orderNumber,pageFrom:i.pageFrom,enterTime:(0,E.Z)(i.enterOrderPageTime).format("YYYY-MM-DD HH:mm:ss.SSS")}),i}return(0,r.Z)(n,[{key:"getIgnoreType",value:function(){var e=this.bizType;return e===_e.c.KOREA?Object.freeze({hideSupplierLogo:!0,hideJourneySteps:!0}):Object.freeze({})}},{key:"getPageId",value:function(){return"ignore_page_pv"}},{key:"componentDidMount",value:function(){this.doLoginLoadOrderDetail()}},{key:"UNSAFE_componentWillUnmount",value:function(){this.stopAutoRefreshOrder()}},{key:"componentDidShow",value:function(){this.needLogExpose=!0,this.isFirstShowOrderPage?this.isFirstShowOrderPage=!1:this.doLoginLoadOrderDetail()}},{key:"pageDidAppear",value:function(){this.needLogExpose=!0,this.isFirstShowOrderPage?this.isFirstShowOrderPage=!1:this.doLoginLoadOrderDetail()}},{key:"doLoginLoadOrderDetail",value:function(){var e=this,t=_.Y8.user.isLogin();t?this.loadOrderDetail():_.Y8.user.login({callback:function(t){t&&t.data?e.loadOrderDetail():e.setState({loadingStatus:-1})}})}},{key:"loadNotice",value:function(e){var t=this,n=e.departureLocation,i=e.arrivalLocation,o=e.supplier,s={departLocationCode:null===n||void 0===n?void 0:n.locationCode,arrivalLocationCode:null===i||void 0===i?void 0:i.locationCode,location:"orderDetailPage",suppliers:k.Z.isEmpty(o)?[]:[o]};N.Z.postAsync("/27304/getNotice",s).then((function(e){var n=e.noticeList,i=void 0===n?[]:n,o=i.length;if(o>0){var s=(0,a.Z)(i,1),r=s[0],l=void 0===r?{}:r;t.setState({noticeObj:{noticeCount:o,firstNotice:l,noticeList:i}})}})).catch((function(e){K.W.UserTrace({action:"getNoticeError",desc:"\u8bf7\u6c42\u516c\u544a\u63a5\u53e3\u62a5\u9519",businessType:"order_detail",pageId:t.getPageId(),dataBody:{error:e}})}))}},{key:"loadOrderDetail",value:function(){var e=this;this.stopAutoRefreshOrder(),b.Z.loadOrderDetail(this.orderNumber).then((function(t){var n=t.isSuccess;if(n&&!k.Z.isEmpty(t.orderInfo)){var i,o,a=e.state,s=a.orderData,r=void 0===s?{}:s,l=a.isWeAppRefreshing;if(l&&setTimeout((function(){e.setState({isWeAppRefreshing:!1})}),2e3),!k.Z.isEmpty(r)&&!e.needLogExpose&&r.orderInfo.orderStatus===t.orderInfo.orderStatus&&b.Z.isAutoRefresh(t.orderInfo.orderStatus))return console.log("************ same order status ************"),void e.startAutoRefreshOrder(t.orderInfo);console.log("************ refresh order detail ************");var c={loadingStatus:1,orderData:t},d=t.scheduledPTPInfo,u=void 0===d?{}:d,m=t.orderInfo,x=void 0===m?{}:m,h=t.passengers,p=void 0===h?[]:h,f=u.outSolution,g=void 0===f?{}:f,N=x.orderStatus,y=x.travelDay,w=null===g||void 0===g||null===(i=g.departureLocation)||void 0===i?void 0:i.countryCode;e.bizType=(0,_e.H)(w),e.needLogExpose&&(e.needLogExpose=!1,fe.Z.sendPV(T.Z.getOrderPageId(e.bizType),{orderid:e.orderNumber}),T.Z.tracePageExpose(e.orderNumber,x.orderStatus,w,(null===p||void 0===p?void 0:p.length)>1?1:0)),k.Z.isEmpty(g)||(c.cardInfo=ce.Z.formatScheduleCard(g),c.scheduleDetailInfo=ce.Z.formatTransferData(g));var j=ce.Z.formatTicketInfos(t),v=null===(o=j.checkinTicket)||void 0===o?void 0:o.ticketMsg;c.ticketInfo=j,c.seatInfo=ce.Z.formatSeatInfo(t),"boolean"===typeof e.state.showTicketAlert||k.Z.isEmpty(v)||(c.ticketAlert=v,c.showTicketAlert=(N===b.D.ticketIssued||N===b.D.ticketReturning||N===b.D.tickedReturnFailed)&&!!y&&!Ze.ZP.getOrderHasAlert(e.orderNumber)),e.setState(c,(function(){e.loadPassRecommend(u),e.loadNotice(g),e.startAutoRefreshOrder(x)}))}else e.setState({loadingStatus:-1})})).catch((function(t){e.setState({loadingStatus:-1}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingStatus,i=t.priceExpenseData,o=t.orderData,a=t.showETicket,s=void 0!==a&&a,r=t.showNoticeDialog,l=void 0!==r&&r,c=t.isShowTransferSheet,d=void 0!==c&&c,u=t.noticeObj,m=void 0===u?{}:u,x=t.scheduleDetailInfo,N=t.isShowCancelDialog,y=void 0!==N&&N,w=t.isShowReceiptDialog,j=t.ticketInfo,v=t.isShowRefundRule,S=void 0!==v&&v,I=t.refundRuleData,R=t.showReturnTicket,b=void 0!==R&&R,A=t.showTodStations,E=void 0!==A&&A,O=t.ticketAlert,P=t.showTicketAlert,V=void 0!==P&&P,L=this.getIgnoreType();return(0,Z.jsxs)(p.View,{className:h.orderContainer,children:[(0,Z.jsx)(p.Image,{className:h.orderBackground,mode:"scaleToFill",src:D.Z.ORDER_BACKGROUND}),(0,Z.jsx)(f.Z,{titleColor:"#082c5c",headerBackgroundColor:"transparent",title:"\u8ba2\u5355\u8be6\u60c5",onBackClick:function(){var t=(new Date).getTime(),n=t-e.enterOrderPageTime;T.Z.traceNaviBack(n/1e3),g.Z.navigateBack({})},renderRightView:function(){return(0,Z.jsxs)(_.En,{className:h.oHeaderRight,withFeedback:!0,onClick:function(){var t,n="";k.Z.isEmpty(e.state.orderData)||(n=null===(t=e.state.orderData)||void 0===t||null===(t=t.orderInfo)||void 0===t?void 0:t.orderStatus);T.Z.traceViewIMService(n),fe.Z.openCustomService(e.orderNumber,e.getPageId())},children:[(0,Z.jsx)(C.Z,{className:h.oHeaderIcon,children:"\udb83\ude0e"}),(0,Z.jsx)(p.Text,{className:h.oHeaderText,children:"\u5ba2\u670d"})]})}}),this.renderOrderBody(),1===n&&(0,Z.jsx)(de,{oid:this.orderNumber,orderData:o,refreshOrder:function(){e.loadOrderDetail()}}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},visible:!k.Z.isEmpty(i),closeOnMaskClick:!0,onClose:function(){e.setState({priceExpenseData:{}})},children:(0,Z.jsx)(Y.S,{priceExpenseData:i,closeExpenseDetail:function(){e.setState({priceExpenseData:{}})}})}),(0,Z.jsx)(_.lI,{mask:!1,crnModalProps:{statusBarTranslucent:!0,lightStatusBar:!0,coverStatusBar:!0},className:h.eTicketDialog,contentClassName:h.eTicketDialogContent,coverStatusBar:!0,closeOnMaskClick:!1,visible:s,children:(0,Z.jsx)(ie,{ticketInfo:j,orderData:o,onClose:function(){return e.showETicket(!1)}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},visible:l,closeOnMaskClick:!0,onClose:function(){e.setState({showNoticeDialog:!1})},children:(0,Z.jsx)(se.Z,{noticeList:m.noticeList,onClose:function(){e.setState({showNoticeDialog:!1})}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},visible:d,closeOnMaskClick:!0,onClose:this.onCloseScheduleDetail,children:(0,Z.jsx)(me.Z,{ignoreType:L,scheduleDetailInfo:x,hideBottom:!0,onClose:this.onCloseScheduleDetail})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},className:h.commonDialog,visible:y,children:(0,Z.jsx)(ue.Z,{data:{contents:[{content:"\u60a8\u662f\u5426\u786e\u8ba4\u53d6\u6d88\u8ba2\u5355"}],confirm:"\u6211\u518d\u60f3\u60f3",cancel:"\u786e\u8ba4\u53d6\u6d88",confirmCallback:function(){e.setState({isShowCancelDialog:!1})},cancelCallback:function(){e.setState({isShowCancelDialog:!1},(function(){e.cancelOrder()}))}}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},className:h.commonDialog,visible:V,children:(0,Z.jsx)(ue.Z,{onClose:function(){return e.setState({showTicketAlert:!1},(function(){var t;return Ze.ZP.setOrderHasAlert(e.orderNumber,null===o||void 0===o||null===(t=o.scheduledPTPInfo)||void 0===t||null===(t=t.outSolution)||void 0===t?void 0:t.arrivalDateTime)}))},data:{title:"\u884c\u7a0b\u767b\u8bb0\u63d0\u9192",contents:[{content:O}],confirm:"\u53bb\u767b\u8bb0\uff08Check in\uff09",confirmCallback:function(){e.setState({showTicketAlert:!1},(function(){var t;e.doCheckin(j.checkinTicket),Ze.ZP.setOrderHasAlert(e.orderNumber,null===o||void 0===o||null===(t=o.scheduledPTPInfo)||void 0===t||null===(t=t.outSolution)||void 0===t?void 0:t.arrivalDateTime)}))}}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},visible:w,coverStatusBar:!0,closeOnMaskClick:!0,onClose:function(){e.setState({isShowReceiptDialog:!1})},children:(0,Z.jsx)(Te.Z,{onClose:function(){e.setState({isShowReceiptDialog:!1})}})}),(0,Z.jsx)(_.lI,{zIndex:10,crnModalProps:{statusBarTranslucent:!0},coverStatusBar:!0,visible:S,closeOnMaskClick:!0,onClose:function(){e.setState({isShowRefundRule:!1})},children:(0,Z.jsx)(ye.Z,{bottomData:{hideBottom:!0},ticketData:I,onClose:function(){e.setState({isShowRefundRule:!1})},gotoPolicyPage:function(t){e.setState({isShowRefundRule:!1},(function(){_.Nd.navigateTo({url:"/pages/trainAbroad/policy/index",data:{orderNumber:e.orderNumber}})}))}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0},visible:b,closeOnMaskClick:!0,onClose:function(){return e.showReturnTicketDialog(!1)},children:(0,Z.jsx)(ke.Z,{onClose:function(){return e.showReturnTicketDialog(!1)}})}),(0,Z.jsx)(_.lI,{crnModalProps:{statusBarTranslucent:!0,lightStatusBar:!0,coverStatusBar:!0},mask:!0,hideIphoneXAdapter:!0,coverStatusBar:!0,className:h.todDialog,contentClassName:h.todContent,closeOnMaskClick:!1,visible:E,children:(0,Z.jsx)(Ce,{closeDialog:function(){e.setState({showTodStations:!1})}})})]})}}]),n}(x.Z),Ie={rnPageName:"order",navigationBarTitleText:"\u8ba2\u5355",disableScroll:!0,customHeader:!0,navigationStyle:"custom"};Page((0,o.createPageConfig)(Se,"pages/trainAbroad/order/index",{root:{cn:[]}},Ie||{}))},79181:function(e){e.exports=require("../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../cwx/cwx")},65238:function(e){e.exports=require("../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[202,2107,1216,8592],(function(){return t(19702)}));e.O()}]);
//# sourceMappingURL=index.js.map