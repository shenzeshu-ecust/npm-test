"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6604],{45643:function(e,t,o){var i={};o.r(i),o.d(i,{initHotelData:function(){return fe},updateFilterInfo:function(){return pe},updateGuranteeTime:function(){return xe},updateRelatedInfo:function(){return ve},updateRoom:function(){return ye},updateRoomCountMap:function(){return ge},updateSimpleModel:function(){return he},updateUnfoldBaseRooms:function(){return ke}});var n={};o.r(n),o.d(n,{closeGuranteeDiff:function(){return Ze},handleScroll:function(){return Pe},hideInvalidRoomAlert:function(){return Se},showGuranteeTime:function(){return Ie},showInvalidRoomAlert:function(){return be},showUnfoldBaseRooms:function(){return je},updateMaskFlag:function(){return Re},updatePageStatus:function(){return we},updatePositionInfo:function(){return Ce},updateRoomBookable:function(){return Te}});var a={};o.r(a),o.d(a,{getHotelComment:function(){return ze},handleGetCurSelect:function(){return Ye},handleSelectCommentFilter:function(){return qe},handleSelectCommentTag:function(){return Qe},handleShowMoreComment:function(){return Ge}});var r,s,l,c=o(32180),d=o(298),u=o(57042),m=o(24460),h=o(81876),f=o(21867),p=o(86066),g=o(45023),y=o(92954),x=o.n(y),k=o(28009),v=o(90983),b=o(79301),S=o(95308),T=o(14930),w=o(17394),R=o(46542),C=o(53059),j=o(22276),I=o(68277),Z=function(e){return e[e["signJustConfirm"]=3]="signJustConfirm",e[e["signFreeEnjoy"]=4]="signFreeEnjoy",e[e["signLowBreakfast"]=5]="signLowBreakfast",e[e["signConfirmTime"]=6]="signConfirmTime",e[e["signWifi"]=7]="signWifi",e[e["signGuessLike"]=9]="signGuessLike",e[e["signLandTraffic"]=10]="signLandTraffic",e[e["signOffLine"]=11]="signOffLine",e[e["signPkgSave"]=101]="signPkgSave",e[e["signGift"]=102]="signGift",e[e["signBookPolicy"]=103]="signBookPolicy",e[e["signCancelPolicy"]=104]="signCancelPolicy",e[e["signBreakfast"]=105]="signBreakfast",e[e["signKingBed"]=106]="signKingBed",e[e["signTwinBed"]=107]="signTwinBed",e[e["signFamilyBed"]=108]="signFamilyBed",e[e["signMemberBenefit"]=109]="signMemberBenefit",e[e["signPayAtOnline"]=110]="signPayAtOnline",e[e["signPayAtHotel"]=111]="signPayAtHotel",e}({}),P={hotelDetailTitle:{id:"key.diy.hotelDetail.hotelDetailTitle",defaultMessage:"\u9152\u5e97\u8be6\u60c5"},score:{id:"key.diy.hotelDetail.score",defaultMessage:"{0}\u5206",plural:!0},point:{id:"key.diy.hotelDetail.point",defaultMessage:"{0}\u6761\u70b9\u8bc4",plural:!0},confirmNight:{id:"key.diy.confirm.night",defaultMessage:"{0}\u665a",plural:!0},roomNight:{id:"key.diy.confirm.roomNight",defaultMessage:"{0}x{1}x{2}"},xAdult:{id:"key.diy.confirm.xadult",defaultMessage:"{0}\u6210\u4eba",plural:!0},xChild:{id:"key.diy.confirm.xchild",defaultMessage:"{0}\u513f\u7ae5",plural:!0},xInfant:{id:"key.diy.confirm.xinfant",defaultMessage:"{0}\u5a74\u513f",plural:!0},guessLike:{id:"key.hoteldetail.guessYouLike",defaultMessage:"\u731c\u4f60\u559c\u6b22"},numberRoom:{id:"key.diy.hoteldetail.numberroom",defaultMessage:"{0}\u95f4"},select:{id:"key.diy.hotelDetail.select",defaultMessage:"\u9009\u62e9"},onlineAtPay:{id:"key.diy.hotelDetail.payOnline",defaultMessage:"\u5728\u7ebf\u4ed8"},storeAtPay:{id:"key.diy.hotelDetail.payAtStore",defaultMessage:"\u5230\u5e97\u4ed8"},guarantee:{id:"key.diy.hotelDetail.guarantee",defaultMessage:"\u62c5\u4fdd"},expectedShop:{id:"key.hoteldetail.expectedTime",defaultMessage:"\u9884\u8ba1\u5230\u5e97:{0}"},deposit:{id:"key.hoteldetail.deposit",defaultMessage:"(\u62c5\u4fdd\u91d1{0})"},stayAllNight:{id:"key.hoteldetail.stayAllNight",defaultMessage:"\u623f\u95f4\u6574\u665a\u4fdd\u7559"},priceRoomNight:{id:"key.diy.hotelDetail.priceroomnight",defaultMessage:"\u6bcf\u95f4\u6bcf\u665a"},priceFrom:{id:"key.diy.hotelDetail.priceFrom",defaultMessage:"\u8d77"},extraPkgSave:{id:"key.diy.hotelDetail.extraPkgSave",defaultMessage:"\u6b64\u5957\u9910\u53ef\u518d\u7701{0}"},pkgHasFood:{id:"key.diy.hotelDetail.pkgHasFood",defaultMessage:"\u5957\u9910\u542b\u98df"},pkgHasGift:{id:"key.diy.hotelDetail.pkgHasGift",defaultMessage:"\u5957\u9910\u53ef\u4eab\u793c\u9047"},chooseRoomCount:{id:"key.diy.hotel.chooseroomcount",defaultMessage:"\u9009\u62e9\u95f4\u6570"},noRooms:{id:"key.diy.hotelDetail.noRooms",defaultMessage:"\u623f\u95f4\u4e0d\u8db3"},soldOut:{id:"key.diy.hotelDetail.soldOut",defaultMessage:"\u5df2\u8ba2\u5b8c"},bookingFail:{id:"key.diy.hotelDetail.bookingFail",defaultMessage:"\u8d44\u6e90\u5f53\u524d\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"},noHotRooms:{id:"key.diy.hotelDetail.noHotRooms",defaultMessage:"\u8be5\u623f\u578b\u623f\u95f4\u6570\u91cf\u4e0d\u8db3\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u54c8"},hotRoomsSoldOut:{id:"key.diy.hotelDetail.hotRoomsSoldOut",defaultMessage:"\u8be5\u623f\u578b\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u54c8"},chooseRoom:{id:"key.diy.hotelDetail.chooseRoom",defaultMessage:"\u9009\u62e9\u5176\u4ed6\u623f\u578b"},backToOrderDetail:{id:"key.diy.hotelDetail.backToOrderDetail",defaultMessage:"\u8fd4\u56de\u8ba2\u5355\u8be6\u60c5"},confirmButton:{id:"key.diy.hotelDetail.confirmButton",defaultMessage:"\u786e\u8ba4"},systemFail:{id:"key.diy.hotelDetail.systemFail",defaultMessage:"\u7cfb\u7edf\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u5c1d\u8bd5"},reChoose:{id:"key.diy.hotelDetail.reChoose",defaultMessage:"\u91cd\u65b0\u9009\u62e9"},loadingFail:{id:"key.diy.hotelDetail.loadingFail",defaultMessage:"\u5f88\u62b1\u6b49\uff0c\u52a0\u8f7d\u5931\u8d25"},reload:{id:"key.diy.hotelDetail.reload",defaultMessage:"\u91cd\u65b0\u52a0\u8f7d"},fullRoom:{id:"key.diy.hotelDetail.roomFull",defaultMessage:"\u8be5\u9152\u5e97\u5df2\u6ee1\u623f,\u8bf7\u66f4\u6362\u9152\u5e97\u8bd5\u8bd5\u54e6\uff5e"},searchFail:{id:"key.diy.hotelDetail.searchFail",defaultMessage:"\u5f88\u62b1\u6b49\uff0c\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c,\u6362\u4e2a\u6761\u4ef6\u8bd5\u8bd5\u5427\uff5e"},totalPriceMoney:{id:"key.diy.hotelDetail.totalPriceMoney",defaultMessage:"\u603b\u4ef7{0}"},totalPrice:{id:"key.diy.hotelDetail.totalPrice",defaultMessage:"\u603b\u4ef7"},viewRest:{id:"key.hoteldetail.morePrices",defaultMessage:"\u67e5\u770b\u5269\u4f59{0}\u4e2a\u4ef7\u683c"},differencePrice:{id:"key.hoteldetail.differencePrice",defaultMessage:"\u4ef7\u683c\u4e3a\u5dee\u4ef7"},perNightPrice:{id:"key.hoteldetail.perNightPrice",defaultMessage:"\u4ef7\u683c\u4e3a\u6bcf\u665a\u4ef7\u683c"},payExtra:{id:"key.hoteldetail.payExtra",defaultMessage:"\u5230\u5e97\u53e6\u4ed8"},packUp:{id:"key.diy.hotelDetail.packUp",defaultMessage:"\u6536\u8d77"},hotelNoCommentText:{id:"key.hoteldetail.noComments",defaultMessage:"\u6682\u65e0\u70b9\u8bc4"},position:{id:"key.diy.hotelDetail.positon",defaultMessage:"\u6682\u65e0\u4f4d\u7f6e\u4fe1\u606f"},detail:{id:"key.diy.hotelDetail.detail",defaultMessage:"\u8be6\u60c5"},morePriceMeal:{id:"key.diy.hotel.morepricemeal",defaultMessage:"\u66f4\u591a\u4ef7\u683c\u3001\u9910\u98df\u8be6\u60c5"},moreRoomFacility:{id:"key.diy.hotel.moreroomfacility",defaultMessage:"\u66f4\u591a\u623f\u578b\u8bbe\u65bd"},nowChoose:{id:"key.diy.hotel.nowchoose",defaultMessage:"\u5f53\u524d\u9009\u62e9"},price:{id:"key.diy.hotel.price",defaultMessage:"\u4ef7\u683c"},food:{id:"key.diy.hotel.food",defaultMessage:"\u9910\u98df"},feePolicy:{id:"key.diy.hotel.feePolicy",defaultMessage:"\u8d39\u7528\u653f\u7b56"},hotelDiscount:{id:"key.diy.hotel.hoteldiscount",defaultMessage:"\u9152\u5e97\u7279\u60e0"},detailFacility:{id:"key.diy.hotel.detailfacility",defaultMessage:"\u8be6\u60c5\xb7\u8bbe\u65bd"},mapAround:{id:"key.diy.hotel.maparound",defaultMessage:"\u5730\u56fe\xb7\u5468\u8fb9"},openYear:{id:"key.diy.hotel.openyear",defaultMessage:"{0}\u5e74\u5f00\u4e1a"},redecoratedYearTime:{id:"key.diy.hotelDetail.redecorated",defaultMessage:"\u88c5\u4fee\u65f6\u95f4\uff1a"},openYearTime:{id:"key.diy.hotelDetail.openTime",defaultMessage:"\u5f00\u4e1a\u65f6\u95f4\uff1a"},today:{id:"key.diy.hotel.today",defaultMessage:"\u4eca\u5929"},tomorrow:{id:"key.diy.hotel.tomorrow",defaultMessage:"\u660e\u5929"},tdat:{id:"key.diy.hotel.tdat",defaultMessage:"\u540e\u5929"},taxInfo:{id:"key.diy.hotelDetail.taxfee",defaultMessage:"\u7a0e/\u5176\u4ed6"},includeTax:{id:"key.diy.hotel.includetax",defaultMessage:"(\u542b\u7a0e)"},partFacility:{id:"key.diy.hotel.partFacility",defaultMessage:"\u4ee5\u4e0b\u8bbe\u65bd\u53ea\u6709\u90e8\u5206\u623f\u95f4\u6709"},free:{id:"key.diy.hotel.free",defaultMessage:"\u514d\u8d39"},policy:{id:"key.diy.hotel.policy",defaultMessage:"\u76f8\u5173\u653f\u7b56"},hotelBooking:{id:"key.diy.hotel.hotelBooking",defaultMessage:"\u9152\u5e97\u9884\u8ba2"},infoReading:{id:"key.diy.hotelDetail.policyneedtoknow",defaultMessage:"\u8ba2\u623f\u5fc5\u8bfb"},childAndBed:{id:"key.diy.hotel.childAndBed",defaultMessage:"\u513f\u7ae5\u53ca\u52a0\u5e8a"},back:{id:"key.diy.hotelDetail.btnReturn",defaultMessage:"\u8fd4\u56de"},loading:{id:"key.hoteldetail.waitAMinute",defaultMessage:"\u8bf7\u7a0d\u540e\uff0c\u6b63\u5728\u4e3a\u60a8\u67e5\u8be2..."},roomList:{id:"key.hoteldetail.roomList",defaultMessage:"\u623f\u578b\u5217\u8868"},hotelDesc:{id:"key.hoteldetail.hotelDesc",defaultMessage:"\u9152\u5e97\u63cf\u8ff0"},hotelComment:{id:"key.hoteldetail.hoteEvaluation",defaultMessage:"\u9152\u5e97\u70b9\u8bc4"},bannerListNum:{id:"key.diy.hotelDetail.bannerListNum",defaultMessage:"\u9152\u5e97\u56fe\u7247\u5171\u6709{0}\u5f20",plural:!0},openTime:{id:"key.diy.hotelDetail.openTime1",defaultMessage:"\u5f00\u4e1a: {0}\u5e74\u5f00\u4e1a"},redecorated:{id:"key.diy.hotelDetail.redecorated1",defaultMessage:"\u88c5\u4fee: {0}\u5e74\u88c5\u4fee"},hotelPolicyAndAddBedTitle:{id:"key.diy.hotelDetail.hotelPolicyAndAddBedTitle",defaultMessage:"\u9152\u5e97\u53ca\u513f\u7ae5/\u52a0\u5e8a\u653f\u7b56"},serviceAndFacility:{id:"key.hoteldetail.hotelFacilities",defaultMessage:"\u670d\u52a1&\u8bbe\u65bd"},hotelPolicy:{id:"key.diy.hotelDetail.hotelPolicy",defaultMessage:"\u9152\u5e97\u653f\u7b56"},hotelNoPolicyText:{id:"key.hoteldetail.noPolities",defaultMessage:"\u6682\u65e0\u9152\u5e97\u653f\u7b56"},hotFacilityTitle:{id:"key.hoteldetail.popularFacility",defaultMessage:"\u70ed\u95e8\u8bbe\u65bd"},npFacilties:{id:"key.hoteldetail.npFacilties",defaultMessage:"\u6682\u65e0\u70ed\u95e8\u8bbe\u65bd"},totalServices:{id:"key.hoteldetail.allFacility",defaultMessage:"\u67e5\u770b\u5168\u90e8\u8bbe\u65bd"},hotelCommentTitle:{id:"key.hoteldetail.hotelEvaluationTitle",defaultMessage:"\u9152\u5e97\u8bc4\u4ef7"},hotelNoCommentTip:{id:"key.hoteldetail.noComments.tip",defaultMessage:"\u6682\u65e0\u9152\u5e97\u8bc4\u4ef7"},lookTotalComments:{id:"key.hoteldetail.allEvaluationTitle",defaultMessage:"\u67e5\u770b\u5168\u90e8{0}\u6761\u70b9\u8bc4",plural:!0},hotelPositionTitle:{id:"key.hoteldetail.hotelLocation",defaultMessage:"\u9152\u5e97\u4f4d\u7f6e"},lookMapText:{id:"key.hoteldetail.checkMap",defaultMessage:"\u67e5\u770b\u5730\u56fe\u53ca\u5468\u8fb9"},lookMap:{id:"key.hoteldetail.lookMap",defaultMessage:"\u67e5\u770b\u5730\u56fe"},hotelDescTitle:{id:"key.hoteldetail.hotelDescription",defaultMessage:"\u9152\u5e97\u4ecb\u7ecd"},contactDetail:{id:"key.diy.hoteldetail.contactDetail",defaultMessage:"\u8054\u7cfb\u65b9\u5f0f"},telNum:{id:"key.diy.hoteldetail.telNum",defaultMessage:"\u7535\u8bdd\uff1a{0}"},hotelContact:{id:"key.diy.hoteldetail.hotelContact",defaultMessage:"\u9152\u5e97\u8054\u7cfb\u65b9\u5f0f"},iknow:{id:"key.hoteldetail.IKnow",defaultMessage:"\u6211\u77e5\u9053\u4e86"},hotelNoDescText:{id:"key.hoteldetail.noDiscription",defaultMessage:"\u6682\u65e0\u9152\u5e97\u63cf\u8ff0"},noFacilities:{id:"key.hoteldetail.noFacilities",defaultMessage:"\u6682\u65e0\u9152\u5e97\u8bbe\u65bd"},clearAll:{id:"key.hoteldetail.clearFilter",defaultMessage:"\u6e05\u9664\u6240\u6709\u7b5b\u9009"},areaRange:{id:"key.diy.hoteldetail.buildingSquare",defaultMessage:"{0}m\xb2"},floorRange:{id:"key.diy.hoteldetail.floorRange",defaultMessage:"{0}\u5c42"},averagePriceFrom:{id:"key.diy.hotelDetail.averagePriceFrom",defaultMessage:"\u5747{0}\u8d77"},tabtype:{id:"key.diy.hotelDetail.tabtype",defaultMessage:"\u7c7b\u578b"},tabmaxAndBed:{id:"key.hoteldetail.maxAndBed",defaultMessage:"\u4eba\u6570\u4e0a\u9650/\u5e8a\u578b/\u65e9\u9910"},tabfacility:{id:"key.hoteldetail.facilities",defaultMessage:"\u8bbe\u65bd"},tabpolicy:{id:"key.hoteldetail.policies",defaultMessage:"\u653f\u7b56"},tabprice0:{id:"key.diy.hotelDetail.averagePrice",defaultMessage:"\u5747\u4ef7"},tabprice1:{id:"key.diy.hotelDetail.diffPrice",defaultMessage:"\u5dee\u4ef7"},tabpriceTax:{id:"key.diy.hotelDetail.averageTaxPriceText",defaultMessage:"\u6bcf\u665a\u5e73\u5747\u4ef7\u683c(\u542b\u7a0e\u8d39)"},tradePriceText:{id:"key.diy.relatedOption.referPrice",defaultMessage:"\u53c2\u8003\u7ed3\u7b97\u4ef7{0}"},extendPriceTaxText:{id:"key.diy.hoteldetail.extendPriceTaxText",defaultMessage:"\u989d\u5916\u9700\u5230\u9152\u5e97\u652f\u4ed8"},tabcount:{id:"key.hoteldetail.room",defaultMessage:"\u95f4\u6570"},seeRoom:{id:"key.diy.hotelDetail.roomviewmore",defaultMessage:"\u67e5\u770b\u5ba2\u623f\u8be6\u60c5"},roomCount:{id:"key.diy.hotelDetail.roomCount",defaultMessage:"\u5ba2\u623f\u6570\uff1a"},spread:{id:"key.hoteldetail.expand",defaultMessage:"\u5c55\u5f00"},personNum:{id:"key.diy.hoteldetail.personNum",defaultMessage:"\u53ef\u4f4f{0}\u4eba"},maxPersonTxt:{id:"key.diy.hotelDetail.maxPerson",defaultMessage:"\u53ef\u4f4f\u4eba\u6570\uff1a"},maxPerson:{id:"key.diy.hotelDetail.maxPersonTxt",defaultMessage:"\u53ef\u4f4f\u4eba\u6570\uff1a{0}"},basicInfo:{id:"key.hoteldetail.basicInformation",defaultMessage:"\u57fa\u7840\u4fe1\u606f"},fullFacility:{id:"key.diy.hoteldetail.fullFacility",defaultMessage:"\u5168\u90e8\u8bbe\u65bd"},roomTaxFee:{id:"key.hoteldetail.taxFee",defaultMessage:"\u7a0e/\u5176\u4ed6\u8d39\u7528{0}"},commentCustomer:{id:"key.hoteldetail.review",defaultMessage:"\u4f4f\u5ba2\u70b9\u8bc4"},fromCommentCustomer:{id:"key.hoteldetail.residentComment",defaultMessage:"(\u6e90\u81ea{0}\u4f4d\u4f4f\u5ba2\u70b9\u8bc4)",plural:!0},moreComments:{id:"key.hoteldetail.moreComments",defaultMessage:"\u67e5\u770b\u66f4\u591a\u70b9\u8bc4"},noMoreComments:{id:"key.diy.hotelDetail.noMoreComments",defaultMessage:"\u5df2\u663e\u793a\u5168\u90e8\u70b9\u8bc4"},location:{id:"key.diy.hoteldetail.location",defaultMessage:"\u73af\u5883"},service:{id:"key.hoteldetail.service",defaultMessage:"\u670d\u52a1"},facility:{id:"key.hoteldetail.theFacilities",defaultMessage:"\u8bbe\u65bd"},health:{id:"key.hoteldetail.cleanlines",defaultMessage:"\u536b\u751f"},hotelNoScoreText:{id:"key.diy.hotelDetail.hotelNoScoreText",defaultMessage:"\u6682\u65e0\u8bc4\u5206"},liveTime:{id:"key.hoteldetail.liveTime",defaultMessage:"{0}\u5165\u4f4f"},commentDate:{id:"key.hoteldetail.presentTime",defaultMessage:"\u53d1\u8868\u4e8e{0}"},selected:{id:"key.diy.hotelDetail.selected",defaultMessage:"\u5df2\u9009\u62e9"},relatedTitle:{id:"key.diy.hotelDetail.relatedResource.title",defaultMessage:"\u6dfb\u52a0\u9152\u5e97\u5173\u8054\u9879\u76ee\uff0c\u63d0\u5347\u60a8\u7684\u51fa\u884c\u4f53\u9a8c"},addConfirm:{id:"key.diy.hotelDetail.relatedResource.btnConfirm",defaultMessage:"\u786e\u8ba4\u6dfb\u52a0"},ignore:{id:"key.diy.hotelDetail.relatedResource.btnSkip",defaultMessage:"\u8df3\u8fc7"},requiredItem:{id:"key.diy.hotelDetail.relatedResource.subtitle",defaultMessage:"\u90e8\u5206\u9879\u76ee\u4e3a\u5fc5\u9009\uff0c\u8bf7\u4ed4\u7ec6\u6838\u5bf9"},modifyRequiredItem:{id:"key.diy.hotelDetail.relatedResource.subTitle2",defaultMessage:"\u4e0e\u9152\u5e97\u5173\u8054\u7684\u4ea7\u54c1\u9700\u8981\u91cd\u65b0\u9884\u8ba2\uff0c\u90e8\u5206\u5fc5\u9009\uff0c\u8bf7\u4ed4\u7ec6\u6838\u5bf9"},discountPrice:{id:"key.hoteldetail.hotelDiscount",defaultMessage:"\u9152\u5e97\u4f18\u60e0"},hotelPriceAndIntructionTitle:{id:"key.diy.confirm.hotelPriceAndIntructionTitle",defaultMessage:"\u9152\u5e97\u4ef7\u683c\u53ca\u4f18\u60e0\u8bf4\u660e"},avePrice:{id:"key.diy.confirm.avePrice",defaultMessage:"\u5747{0}"},hasTaxPrice:{id:"key.diy.confirm.hasTaxPrice",defaultMessage:"\u542b\u7a0e\u4ef7"},hasTaxPrice2:{id:"key.diy.hoteldetail.hasTaxPrice",defaultMessage:"\u542b\u7a0e\u8d39"},checkInTime:{id:"key.diy.hotelDetail.checkInTime",defaultMessage:"\u5165\u4f4f {0}"},checkOutTime:{id:"key.diy.hotelDetail.checkOutTime",defaultMessage:"\u9000\u623f {0}"},adults:{id:"key.diy.hotelDetail.adults",defaultMessage:"{0} \u6210\u4eba"},children:{id:"key.diy.hotelDetail.children",defaultMessage:"{0} \u513f\u7ae5"},roomCode:{id:"key.diy.hotelDetail.roomCode",defaultMessage:"\u7f16\u53f7\uff1a{0}"},roomStatus:{id:"key.diy.hotelDetail.roomStatus",defaultMessage:"\u623f\u6001\uff1a{0}"},commentSortBy0:{id:"key.diy.hotelDetail.commentSortBy0",defaultMessage:"\u63a8\u8350\u6392\u5e8f"},commentSortBy1:{id:"key.diy.hotelDetail.commentSortBy1",defaultMessage:"\u6700\u8fd1\u5165\u4f4f"},feedbackType1:{id:"key.diy.hotelDetail.feedbackType1",defaultMessage:"\u643a\u7a0b\u56de\u590d"},feedbackType2:{id:"key.diy.hotelDetail.feedbackType2",defaultMessage:"\u7528\u6237\u8ffd\u8bc4:"},feedbackType3:{id:"key.diy.hotelDetail.feedbackType3",defaultMessage:"\u9152\u5e97\u56de\u590d"},emptyPic:{id:"key.diy.hoteldetail.emptyPic",defaultMessage:"\u6682\u65e0\u56fe\u7247"},filterLabel:{id:"key.diy.hoteldetail.filterLabel",defaultMessage:"\u7b5b\u9009"},sortLabel:{id:"key.diy.hoteldetail.sortLabel",defaultMessage:"\u6392\u5e8f\u65b9\u5f0f"},filterName0:{id:"key.diy.hotelDetail.commentSortBy0",defaultMessage:"\u63a8\u8350\u6392\u5e8f"},filterName1:{id:"key.diy.hotelDetail.filterName2",defaultMessage:"\u6240\u6709\u70b9\u8bc4"},filterName2:{id:"key.diy.hotelDetail.filterName2",defaultMessage:"\u6240\u6709\u51fa\u6e38\u7c7b\u578b"},filterName3:{id:"key.diy.hotelDetail.filterName3",defaultMessage:"\u6240\u6709\u623f\u578b"},addBedPolicy:{id:"key.diy.hotelDetail.addbedpolicy",defaultMessage:"\u52a0\u5e8a\uff1a{0}"},guestComment:{id:"key.diy.hoteldetail.guestComment",defaultMessage:"\u4f4f\u5ba2\u70b9\u8bc4"},allGuestComment:{id:"key.diy.hoteldetail.allGuestComment",defaultMessage:"\u5168\u90e8\u4f4f\u5ba2\u70b9\u8bc4"},similarGuestComment:{id:"key.diy.hoteldetail.similarGuestComment",defaultMessage:"\u504f\u597d\u76f8\u4f3c\u4f4f\u5ba2\u70b9\u8bc4"},commentCount:{id:"key.diy.hotelDetail.commentCount",defaultMessage:"{0}\u6761",plural:!0},allComment:{id:"key.diy.hoteldetail.allComment",defaultMessage:"\u5168\u90e8\u70b9\u8bc4"},similarComment:{id:"key.diy.hoteldetail.similarComment",defaultMessage:"\u504f\u597d\u76f8\u4f3c\u70b9\u8bc4"},tabComment:{id:"key.diy.hoteldetail.tabComment",defaultMessage:"\u70b9\u8bc4"},noSearch:{id:"key.diy.hotelDetail.noSearch",defaultMessage:"\u62b1\u6b49\uff0c\u65e0\u76f8\u5e94\u641c\u7d22\u7ed3\u679c\uff0c\u8bf7\u66f4\u6539\u7b5b\u9009\u6761\u4ef6\u91cd\u8bd5"},xieCheng:{id:"key.diy.hotel.xieCheng",defaultMessage:"\u643a\u7a0b"},ctrip:{id:"key.diy.hoteldetail.ctrip",defaultMessage:"\u643a\u7a0b"},moreRoomCount:{id:"key.diy.hoteldetail.moreRoomCount",defaultMessage:"\u66f4\u591a\u95f4\u6570"},selfPerchaseNotice:{id:"key.diy.hoteldetail.selfPerchaseNotice",defaultMessage:"\u8be5\u623f\u578b\u9700\u81ea\u91c7"},noNumCheckin:{id:"key.diy.hotel.nonumcheckin",defaultMessage:"\u4e0d\u6ee1\u8db3\u5165\u4f4f\u4eba\u6570"},needAddBed:{id:"key.diy.hotel.needaddbed",defaultMessage:"\u9700\u8981\u52a0\u5e8a"},checkinRiskone:{id:"key.diy.hotelDetail.checkinRiskone",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\uff0c\u5efa\u8bae\u9009\u62e9{0}\u95f4"},checkinRisktwo:{id:"key.diy.hotelDetail.checkinRisktwo",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39{0}\uff0c\u5efa\u8bae\u9009\u62e9{1}\u95f4"},checkinRiskthree:{id:"key.diy.hotelDetail.checkinRiskthree",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39"},checkinRiskfour:{id:"key.diy.hotelDetail.checkinRiskfour",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39{0}\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"},checkinRiskfive:{id:"key.diy.hotelDetail.checkinRiskfive",defaultMessage:"\u53ef\u9009\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"},checkinRisksix:{id:"key.diy.hotelDetail.checkinRisksix",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u8981\u52a0\u5e8a({0})\uff0c\u5efa\u8bae\u9009\u62e9{1}\u95f4"},checkinRiskseven:{id:"key.diy.hotelDetail.checkinRiskseven",defaultMessage:"\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u8981\u52a0\u5e8a({0})\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"},GPrice:{id:"key.diy.hotelDetail.guaranteeAmount",defaultMessage:"\u8be5\u623f\u578b\u7684\u62c5\u4fdd\u91d1\u53d1\u751f\u53d8\u5316\u54e6\uff0c\u8bf7\u786e\u8ba4\u3002"},GTime:{id:"key.diy.hotelDetail.guaranteeTime",defaultMessage:"\u60a8\u4e0a\u4e00\u6b21\u5df2\u9009\u7684\u9884\u8ba1\u5230\u5e97\u65f6\u95f4\u5df2\u8fc7\u671f\uff0c\u4e3a\u60a8\u9009\u62e9\u5176\u5b83\u5230\u5e97\u65f6\u95f4\uff0c\u8bf7\u786e\u8ba4\u3002"},GPriceTime:{id:"key.diy.hotelDetail.guaranteeAmountAndTime",defaultMessage:"\u8be5\u623f\u578b\u7684\u9884\u8ba1\u5230\u5e97\u65f6\u95f4\u548c\u62c5\u4fdd\u91d1\u53d1\u751f\u53d8\u5316\u54e6\uff0c\u8bf7\u786e\u8ba4\u3002"},includeText:{id:"key.diy.hoteldetail.includeText",defaultMessage:"\u5305\u542b"},risktips:{id:"key.diy.hoteldetail.risktips",defaultMessage:"\u98ce\u9669\u63d0\u793a"},memberTips:{id:"key.diy.hoteldetail.memberTips",defaultMessage:"\u4eab\u53d7\u6b64\u623f\u578b\u7684\u4f1a\u5458\u4ef7\u4f18\u60e0\u63d0\u4ea4\u8ba2\u5355\u524d\u9700\u7ebf\u4e0a\u6ce8\u518c\u9152\u5e97\u4f1a\u5458"},chooseHotel:{id:"key.diy.hoteldetail.chooseHotel",defaultMessage:"\u9884\u8ba2\u6d41\u7a0b-\u9009\u62e9\u9152\u5e97"},noWindow:{id:"key.diy.hoteldetail.noWindow",defaultMessage:"\u65e0\u7a97"},naviOverview:{id:"key.diy.hotelDetail.naviOverview",defaultMessage:"\u6982\u89c8"},bookingFail1:{id:"key.diy.hoteldetail.bookingFail1",defaultMessage:"\u8be5\u4ea7\u54c1\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"},facilityPopText:{id:"key.diy.hotelDetail.facilityPopText",defaultMessage:"\u67e5\u770b\u56fe\u7247"},room:{id:"key.diy.orderDetail.room.pluralsuffix.other",defaultMessage:"\u623f\u95f4"},serviceAndFacilityNew:{id:"key.hoteldetail.hotelServiceAndFacilities",defaultMessage:"\u670d\u52a1\u53ca\u8bbe\u65bd"}},M=function(e){return e["HIDE"]="hide",e["PENDING"]="pending",e["SUCCESS"]="success",e}({}),_=function(e){return e["ABORT"]="Abort",e["HotelBasic_Error"]="HotelBasic_Error",e["HotelBasic_Empty"]="HotelBasic_Empty",e["HotelBasic_Failure"]="HotelBasic_Failure",e["RoomList_Empty"]="RoomList_Empty",e["RoomList_Error"]="RoomList_Error",e["RoomPriceCalculate_Error"]="RoomPriceCalculate_Error",e["RoomPriceCalculate_Empty"]="RoomPriceCalculate_Empty",e["RoomList_Search_Empty"]="RoomList_Search_Empty",e["UPDATEHOTEL_ERROR"]="UPDATEHOTEL_ERROR",e["UPDATEHOTEL_COUNT_ERROR"]="UPDATEHOTEL_COUNT_ERROR",e["UPDATEHOTEL_INVALID_ERROR"]="UPDATEHOTEL_INVALID_ERROR",e["UPDATEHOTEL_BOOING_ERROR"]="UPDATEHOTEL_BOOING_ERROR",e["UPDATEHOTEL_CAN_BOOKING_FAIL"]="UPDATEHOTEL_CAN_BOOKING_FAIL",e["WoXie_Product_Expired"]="WoXie_Product_Expired",e["WoXie_Update_Error"]="WoXie_Update_Error",e["WoXie_Update_XItem_Error"]="WoXie_Update_XItem_Error",e["WoXie_CanBook_XItem_Error"]="WoXie_CanBook_XItem_Error",e["WoXie_CanBook_Error"]="WoXie_CanBook_Error",e}({}),F=(r={},(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)(r,_.HotelBasic_Error,"\u9152\u5e97\u57fa\u7840\u4fe1\u606f\u5f02\u5e38"),_.HotelBasic_Empty,"\u9152\u5e97\u57fa\u7840\u4fe1\u606f\u4e3a\u7a7a"),_.HotelBasic_Failure,"\u9152\u5e97\u5df2\u5931\u6548"),_.RoomList_Empty,"\u623f\u578b\u5217\u8868\u4e3a\u7a7a"),_.RoomList_Error,"\u623f\u578b\u5217\u8868\u5f02\u5e38"),_.RoomList_Search_Empty,"\u623f\u578b\u5217\u8868\u7b5b\u9009\u4e3a\u7a7a"),_.RoomPriceCalculate_Error,"\u66f4\u6362\u623f\u578b\u95f4\u6570\u5f02\u5e38"),_.RoomPriceCalculate_Empty,"\u53ef\u66f4\u6362\u623f\u578b\u7684\u95f4\u6570\u4e3a\u7a7a"),_.UPDATEHOTEL_COUNT_ERROR,"update \u6ee1\u623f\u5931\u8d25"),_.UPDATEHOTEL_INVALID_ERROR,"update \u623f\u578b\u4e0d\u53ef\u5b9a"),(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)(r,_.UPDATEHOTEL_BOOING_ERROR,"update \u52a0\u8d2d\u5931\u8d25"),_.UPDATEHOTEL_CAN_BOOKING_FAIL,"\u53ef\u8ba2\u5931\u8d25"),_.WoXie_Product_Expired,"\u6211\u643a\u4ea7\u54c1\u8fc7\u671f"),_.WoXie_Update_Error,"\u6211\u643a\u5176\u4ed6update\u5931\u8d25"),_.WoXie_Update_XItem_Error,"\u6211\u643ax\u9879\u52a0\u8d2d\u5931\u8d25"),_.WoXie_CanBook_XItem_Error,"\u6211\u643ax\u9879\u53ef\u8ba2\u5931\u8d25"),_.WoXie_CanBook_Error,"\u6211\u643a\u623f\u578b\u6216\u5176\u4ed6\u53ef\u8ba2\u5931\u8d25")),B=(s={},(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)(s,_.HotelBasic_Error,"10102"),_.HotelBasic_Empty,"10103"),_.RoomList_Empty,"10104"),_.RoomList_Error,"10105"),_.RoomList_Search_Empty,"42014"),_.RoomPriceCalculate_Error,"10106"),_.RoomPriceCalculate_Empty,"10107"),_.HotelBasic_Failure,"10109"),_.WoXie_Product_Expired,"20019"),_.WoXie_Update_Error,"20020"),(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)(s,_.WoXie_Update_XItem_Error,"20021"),_.WoXie_CanBook_XItem_Error,"20022"),_.WoXie_CanBook_Error,"20023"),_.UPDATEHOTEL_CAN_BOOKING_FAIL,"20024"),_.UPDATEHOTEL_BOOING_ERROR,"20025"),_.UPDATEHOTEL_INVALID_ERROR,"20026"),_.UPDATEHOTEL_COUNT_ERROR,"20027")),D=function(e){return e[e["25-true"]=Z.signFreeEnjoy]="25-true",e[e["6-true"]=Z.signBreakfast]="6-true",e[e["7-TwinBed"]=Z.signTwinBed]="7-TwinBed",e[e["7-KingBed"]=Z.signKingBed]="7-KingBed",e[e["7-MultiBed"]=Z.signFamilyBed]="7-MultiBed",e[e["15-PP"]=Z.signPayAtOnline]="15-PP",e[e["15-FG"]=Z.signPayAtHotel]="15-FG",e[e["13-true"]=Z.signJustConfirm]="13-true",e[e["12-true"]=Z.signCancelPolicy]="12-true",e}({}),E={2:"hotellist",3:"hotelinfoedit"},N=o(92261),H=function(e){return e[e["breakfast"]=1]="breakfast",e[e["roomBed"]=2]="roomBed",e[e["areaRange"]=3]="areaRange",e[e["person"]=4]="person",e[e["broadband"]=19]="broadband",e[e["wired"]=19]="wired",e[e["addBed"]=6]="addBed",e[e["bedWidth"]=8]="bedWidth",e[e["smokeInfo"]=9]="smokeInfo",e[e["hasWindow"]=10]="hasWindow",e[e["wireless"]=11]="wireless",e[e["floorRange"]=12]="floorRange",e[e["currency"]=17]="currency",e[e["roomCode"]=18]="roomCode",e}({}),L=(l={},(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)(l,H.addBed,"icons-h-bed"),H.areaRange,"icons-h-acreage"),H.bedWidth,"icons-h-bed"),H.broadband,"icons-h-broadband"),H.wireless,"icons-h-wifi"),H.floorRange,"icons-h-floor"),H.hasWindow,"icons-h-window"),H.person,"icons-h-adult"),H.roomBed,""),H.wired,"icons-h-wired"),(0,g.Z)(l,H.smokeInfo,"icons-h-no-smoking"),{commentFilters:[]}),A=function(e){return e[e["commentTagList"]=1]="commentTagList",e[e["travelTypeList"]=2]="travelTypeList",e[e["basicRoomList"]=3]="basicRoomList",e[e["statisticsList"]=4]="statisticsList",e}({}),V=(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({},H.areaRange,"\uf0c6"),H.bedWidth,"\uf0cc"),H.broadband,"\uf0c9"),H.floorRange,"\uf0c5"),H.hasWindow,"\uf0c7"),H.person,"\uf0ca"),H.smokeInfo,"\uf49c"),O=(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({},H.areaRange,"icons-htl_area"),H.bedWidth,"icons-htl_bedwidth"),H.broadband,"icons-htl_broadband"),H.floorRange,"icons-htl_floor"),H.hasWindow,"icons-htl_tips"),H.person,"icons-htl_num"),H.smokeInfo,"icons-htl_nosmoking"),U=(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({},H.areaRange,2),H.bedWidth,0),H.roomBed,0),H.broadband,7),H.wireless,6),H.floorRange,5),H.hasWindow,3),H.person,1),H.smokeInfo,4),W={is4126:{showGroupTips:!0}},X={jump:{action:N.o.UCL},showFilters:{scene:"\u70b9\u51fb\u7b5b\u9009\u9879",module:"\u7b5b\u9009\u9879",action:N.o.UCH},roomAction:{module:"\u623f\u578b",action:N.o.UCH},chooseRoom:{action:N.o.UCL,desc:"\u9009\u62e9\u5b50\u623f\u578b"},chooseCount:{action:N.o.UCL,desc:"\u9009\u62e9\u95f4\u6570"},popupAction:{module:"\u8499\u5c42",action:N.o.UCL},tabAction:{module:"\u5934\u90e8tab",action:N.o.UCH},updateRelatedInfo:{module:"\u5173\u8054\u9879\u6d6e\u5c42",action:N.o.UCL,desc:"\u5173\u8054\u9879\u9009\u62e9\u4fe1\u606f\u53d8\u66f4"}},z=["showHotelDetailComments","isShowHotelMap","showShopPayFilterTab","replacedContent","isShowHotelFacility","showPKGDesc"],G=T._,q=T.moment,Q=function(e){var t=e.countInfo,o=e.isSelectedToken,i=e.arrivalLocalTimeInfos;e.roomToken;return o&&t.select===t.default&&(!i||i&&i.defaultAmountLocal===i.selectdAmountLocal&&i.defaultTime===i.selectdTime)},Y=function(e){var t=e.shoppingCartConfig,o=void 0===t?{}:t,i=o.common,n=void 0===i?{}:i,a=o.hotel,r=void 0===a?{}:a,s=n.isShowHotelFacility,l=void 0===s||s,c=n.showDiscountPackageDesc,d=void 0===c||c,u=n.showBackButton,m=void 0===u||u,h=n.replacedContent,f=void 0===h?"\u643a\u7a0b":h,p=r.jumpHotelGallery,g=void 0===p||p,y=r.showHotelLinePrice,x=void 0===y||y,k=r.showCheckDateAndPassenger,v=void 0!==k&&k,b=r.showExtendRoomInfo,S=void 0!==b&&b,T=r.showHotelDetailComments,w=void 0===T||T,R=r.showHotelDetailMap,C=void 0===R||R,j=r.showHotelIntroduction,I=void 0===j||j,Z=r.showHotelPolicy,P=void 0===Z||Z,M=r.supportArrivalPayCriteria,_=void 0===M||M,F=r.supportOnlinePayCriteria,B=void 0===F||F,D=r.showQuickFilter,E=void 0===D||D,N=r.showHotelFacility,H=void 0===N||N,L=r.customHotelDetailMapUrl,A=void 0===L?"":L,V=r.showHotelQualPicture,O=void 0===V||V;return{jumpHotelGallery:g,showHotelDetailComments:w,replacedContent:f,showHotelLinePrice:x,isShowHotelMap:C,isShowHotelFacility:l,showDateAndPerson:v,showRoomStatus:S,showPolicy:P,showShopPayFilterTab:_,showIntroduction:I,showOnlinePay:B,showBackButton:m,showPKGDesc:d,showQuickFilter:E,showHotelFacility:H,customHotelDetailMapUrl:A,showHotelQualPicture:O}},K=function(e){var t=e.distributionChannelConfig,o=void 0===t?{}:t,i=e.baseContext,n=void 0===i?{}:i,a=e.isTourPOI,r=Y(n),s=r.showHotelDetailComments,l=r.isShowHotelMap,c=r.showShopPayFilterTab,u=r.replacedContent,m=r.isShowHotelFacility,h=r.showPKGDesc,f=(0,I.Z)(r,z),p=o.hotel,g=void 0===p?{}:p,y=o.common,x=void 0===y?{}:y,k=o.globalConfig,v=void 0===k?{}:k,b=g.showHotelDetailComments,S=void 0===b?s:b,T=g.showHotelDetailMap,w=void 0===T?l:T,R=g.showShopPayFilterTab,C=void 0===R?c:R,j=x.replacedContent,Z=void 0===j?u:j,P=x.isShowHotelFacility,M=void 0===P?m:P,_=v.showPKGDesc,F=void 0===_?h:_;return(0,d.Z)({showHotelDetailComments:S,replacedContent:Z,isShowHotelMap:w,isShowHotelFacility:M,showPKGDesc:F,showShopPayFilterTab:C,showTourTab:!a},f)},$=function(e){for(var t={},o=0,i=Object.keys(e);o<i.length;o++){var n=i[o];t[n.toLowerCase()]=e[n]}return t},J=function(e){var t=e.preInfo,o=e.curInfo,i=e.i;if(!t.isSame&&!t.isInit)return t;if(i)o.name!==t.name&&(t.isSame=!1);else{var n=o.type;t=(0,d.Z)((0,d.Z)({},o),{},{icon:V[n],index:U[n],h5Icon:O[n]}),t.isSame=!0}return t},ee=function(e,t,o,i){var n,a=e.shark,r=G.map(o,(function(e){return t[e]})),s=null===(n=G.sortBy(r,(function(e){var t=e.priceInfo,o=void 0===t?{}:t,n=o.dailyPriceDiff,a=o.dailyPrice,r=o.diffSign,s=i?n:a,l=i&&!r?"-":"+";return Number("".concat(l).concat(s))})))||void 0===n?void 0:n[0],l=s.baseRoomInfo,c=void 0===l?{}:l;if(c.computed)return s;var u={isSame:!1,isInit:!0},m={isSame:!1,isInit:!0},h={isSame:!1,isInit:!0};G.forEach(r,(function(e,t){var o=e.staticInfo;G.forEach(o,(function(e){var o=e.type;switch(o){case H.smokeInfo:h=J({preInfo:h,curInfo:e,i:t});break;case H.hasWindow:m=J({preInfo:m,curInfo:e,i:t});break;case H.roomBed:e.type=H.bedWidth,u=J({preInfo:u,curInfo:e,i:t});break;default:break}}))}));var f=c,p=f.staticInfo,g=void 0===p?[]:p,y=G.find(g,(function(e){return e.type===H.areaRange}))||{},x=G.find(g,(function(e){return e.type===H.addBed}))||{},k=x.name;k&&(k=a.getShark(P.addBedPolicy.id,[k])),y.isSame=!0,u.name?u.extend=k:k&&(u.name=k,u.isSame=!0);var v=[u,m].filter((function(e){return e.isSame}));return c=(0,d.Z)((0,d.Z)({},c),{},{computed:!0,staticInfo:G.sortBy([].concat((0,j.Z)(g),(0,j.Z)(v)),"index"),baseTitleForList:[u,y,m,h].filter((function(e){return e.isSame&&e.name}))}),s.baseRoomInfo=c,s},te=function(e,t){var o={};return G.map(e,(function(e,i){o[i]=G.map(e,(function(e){return t[e.roomToken]?t[e.roomToken]:e}))})),o},oe=function(e){var t=e.isWoXie,o=e.CanBookingResults,i=void 0===o?{}:o,n=e.ShoppingUpdateInfo,a=void 0===n?{}:n,r=e.roomToken,s=a.ResourceStatus,l=i.Code,c=void 0===l?"":l,d="";return d=t?"1619"===c||"1606"===c?_.WoXie_Product_Expired:ne(t,s,r)?ne(t,s,r):["1401","1402"].includes(c)?_.WoXie_CanBook_XItem_Error:_.WoXie_CanBook_Error:ne(t,s,r),d},ie=function(e){var t=e.isWoXie,o=e.CanBookingResults,i=void 0===o?{}:o,n=e.ShoppingUpdateInfo,a=void 0===n?{}:n,r=e.roomToken,s=a.ResourceStatus,l=i.code,c=void 0===l?"":l,d="";return d=t?"1619"===c||"1606"===c?_.WoXie_Product_Expired:ne(t,s,r)?ne(t,s,r):["1401","1402"].includes(c)?_.WoXie_CanBook_XItem_Error:_.WoXie_CanBook_Error:ne(t,s,r),d},ne=function(e,t,o){var i,n=(null===t||void 0===t||null===(i=t.HotelRooms)||void 0===i?void 0:i.length)>0?t.HotelRooms:null,a=G.find(n,(function(e){return e.Token===o}));if(G.isEmpty(a)&&e)return null;var r=2===(null===a||void 0===a?void 0:a.Status)?_.UPDATEHOTEL_COUNT_ERROR:3===(null===a||void 0===a?void 0:a.Status)?_.UPDATEHOTEL_INVALID_ERROR:e?_.WoXie_Update_Error:_.UPDATEHOTEL_BOOING_ERROR;return r},ae=function(e){var t=e.cidt,o=e.cityid,i=e.name,n=e.codt,a=e.adult,r=e.child,s=e.infant,l=e.childages;return{curTab:0,passenger:{adultNum:Number(a),childNum:Number(r),childsAge:l,infantNum:Number(s)},segments:[{DepartCity:{cityId:Number(o),cityName:i},ArriveCity:{cityId:Number(o),cityName:i},DepartDate:t,ArriveDate:n}]}},re=function(e,t){var o=e.cidt,i=e.codt,n=e.adult,a=e.child,r=e.infant,s=e.hotelid,l=t.roomId,c=t.select;return{roomNumber:c,roomid:l,hotelid:s,checkout:i,checkin:o,adult:n,child:a,baby:r}};function se(e,t,o,i){var n=o,a=i,r=G.find(t,(function(t){return t.count===e}));return r&&(n.select!==r.count&&(n=(0,d.Z)((0,d.Z)({},n),{},{select:r.count})),a.totalPkgSave!==r.totalPkgSave&&(a=(0,d.Z)((0,d.Z)({},a),{},{totalPkgSave:r.totalPkgSave})),a=(0,d.Z)((0,d.Z)({},a),{},{tradeDailyPriceDiff:r.tradeDailyPriceDiff,tradeTotalPrice:r.tradeTotalPrice,tradeDiffSign:r.tradeDiffSign,dailyPriceDiff:r.diffPrice,diffSign:r.diffSign})),{curCountInfo:n,curPriceInfo:a}}var le=function(e,t,o){var i=o.max,n=o.recommend,a=o.bizRecommend,r=o.select,s=o.addBedDesc,l=void 0===s?"":s;return o.tip=r<n?i<a?t<0?e(P.checkinRiskfive.id):e(0===t?P.checkinRiskseven.id:P.checkinRiskfour.id,[l]):t<0?e(P.checkinRiskone.id,[n]):e(0===t?P.checkinRisksix.id:P.checkinRisktwo.id,[l,n]):"",o};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o={},i={},n="",a=t.reduce((function(t,a){for(var r=a.roomToken,s=a.baseRoomId,l=a.signs,c=!0,u=0,m=Object.keys(e);u<m.length;u++){var h=m[u],f=l[Z[h]];if(!f||f.id!==e[h].id){c=!1;break}}return c&&(l.signGuessLike&&(n=r),t.indexOf(s)<0&&(t.push(s),i[s]=[]),o[r]=(0,d.Z)({},a),i[s].push(a.roomToken)),t}),[]);return{guessLikeRoomToken:n,baseRoomIds:a,roomsMap:o,groupRooms:i}}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=e[t.sltRoomToken||t.sltroomtoken];if(!i||!t.opats||!i.arrivalLocalTimeInfos)return null;var n="",a=i.arrivalLocalTimeInfos,r=a,s=r.lists,l=r.selectdAmountLocal,c=r.selectdTime,u=G.find(s,(function(e){return q(e.date).valueOf()===Number(t.opats)}));return u?(c!==u.date&&(a=(0,d.Z)((0,d.Z)({},a),{},{defaultTime:u.date,selectdTime:u.date,defaultAmountLocal:u.amountLocal,selectdAmountLocal:u.amountLocal,displaySelectdTime:u.displayTime})),a.selectdAmountLocal!==Number(t.gcny)&&(n=o(P.GPrice.id))):n=l===Number(t.gcny)?o(P.GTime.id):o(P.GPriceTime.id),{tip:n,sltRoomToken:t.sltRoomToken||t.sltroomtoken,arrivalLocalTimeInfos:a}}function ue(e,t){return{MinCount:e.countInfo.min,MaxCount:e.countInfo.max,RoomToken:e.roomToken,Days:e.Days,PropertyValueIds:e.PropertyValueIds&&e.PropertyValueIds.join(",")||"",RoomTokenTBChanged:t.sltRoomToken||t.sltroomtoken||"",HotelTokenTBChanged:t.sltHotelToken||t.slthoteltoken||"",PkgSave:e.priceInfo.pkgSave||0,ShoppingId:t.shoppingId||t.shoppingid,OrderId:t.orderId||t.orderid||"",ActionType:t.sltHotelToken||t.slthoteltoken?2:1}}function me(e,t,o){var i=o.sltPrice,n=void 0===i?0:i,a=o.baseTradePrice,r=void 0===a?0:a,s=e.priceInfo,l=s.price,c=s.tradePrice;return G.map(t.PkgPrices,(function(e){var t=e.PkgPrice,o=e.Count,i=t.LocalTotalPkgSave,a=Math.ceil(l*o),s=c*o;console.log("totalPrice===>",l,o,a,n);var d=Math.ceil(a-n),u=d>=0,m=Math.ceil(s-r),h=m>=0;return{count:o,diffSign:u,diffPrice:Math.abs(d),tradeTotalPrice:Math.ceil(s),tradeDailyPriceDiff:Math.abs(m),tradeDiffSign:h,totalPkgSave:Math.floor(i),totalPrice:a}}))}var he=function(e,t){return(0,d.Z)((0,d.Z)({},e),t)},fe=function(e,t){var o;return(0,d.Z)((0,d.Z)({},e),{},{hotelBasic:t.hotelBasic,filters:null===(o=t.RoomModel)||void 0===o?void 0:o.filters,pageStatus:(0,d.Z)((0,d.Z)({},e.pageStatus),{},{hotelStatus:M.SUCCESS})})},pe=function(e,t){var o=t.baseRoomIds,i=t.roomsMap,n=t.groupRooms,a=t.guessLikeRoomToken;return(0,d.Z)((0,d.Z)({},e),{},{roomsMap:i,baseRoomIds:o,groupRooms:n,guessLikeRoomToken:a})},ge=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{roomCountMap:(0,d.Z)((0,d.Z)({},e.roomCountMap),t)})},ye=function(e,t){var o=t.roomToken,i=t.countInfo,n=t.count,a=t.priceInfo;return(0,d.Z)((0,d.Z)({},e),{},{roomsMap:(0,d.Z)((0,d.Z)({},e.roomsMap),{},(0,g.Z)({},o,(0,d.Z)((0,d.Z)({},e.roomsMap[o]),{},{countInfo:i,priceInfo:a}))),roomCountMap:(0,d.Z)((0,d.Z)({},e.roomCountMap),{},(0,g.Z)({},o,(0,d.Z)((0,d.Z)({},e.roomCountMap[o]),{},{curCount:n})))})},xe=function(e,t){var o=t.roomToken,i=t.arrivalLocalTimeInfos;return(0,d.Z)((0,d.Z)({},e),{},{roomsMap:(0,d.Z)((0,d.Z)({},e.roomsMap),{},(0,g.Z)({},o,(0,d.Z)((0,d.Z)({},e.roomsMap[o]),{},{arrivalLocalTimeInfos:i})))})},ke=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{unfoldBaseRooms:(0,d.Z)((0,d.Z)({},e.unfoldBaseRooms),{},(0,g.Z)({},t,!e.unfoldBaseRooms[t]))})},ve=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{relatedInfo:(0,d.Z)((0,d.Z)({},e.relatedInfo),t)})},be=function(e,t){var o=t.alertTitle,i=t.alertButton,n=t.chooseText,a=t.roomToken,r=t.backToOrderDetail;return(0,d.Z)((0,d.Z)({},e),{},{alertInfo:{showAlert:!0,titleText:o,buttonText:i,chooseText:n,roomToken:a,backToOrderDetail:r}})},Se=function(e){var t,o,i,n;return null!==(t=e.alertInfo)&&void 0!==t&&t.chooseText&&null!==(o=e.alertInfo)&&void 0!==o&&o.roomToken?(0,d.Z)((0,d.Z)({},e),{},{invalidRooms:(0,d.Z)((0,d.Z)({},e.invalidRooms),{},(0,g.Z)({},null===(i=e.alertInfo)||void 0===i?void 0:i.roomToken,{invalid:!0,chooseText:null===(n=e.alertInfo)||void 0===n?void 0:n.chooseText})),alertInfo:void 0}):(0,d.Z)((0,d.Z)({},e),{},{alertInfo:void 0})},Te=function(e,t){var o=t.roomToken,i=t.bookable;return(0,d.Z)((0,d.Z)({},e),{},{roomsMap:(0,d.Z)((0,d.Z)({},e.roomsMap),{},(0,g.Z)({},o,(0,d.Z)((0,d.Z)({},e.roomsMap[o]),{},{tempBookable:i})))})},we=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{pageStatus:(0,d.Z)((0,d.Z)({},e.pageStatus),t)})},Re=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{maskFlag:(0,d.Z)((0,d.Z)({},e.maskFlag),t)})},Ce=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{positionInfo:(0,d.Z)((0,d.Z)({},e.positionInfo),t)})},je=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{unfoldBaseRooms:(0,d.Z)((0,d.Z)({},e.unfoldBaseRooms),{},(0,g.Z)({},t,!0))})},Ie=function(e,t){var o=t.roomToken,i=t.tip;return(0,d.Z)((0,d.Z)({},e),{},{guaranteeDiff:{roomToken:o,tip:i,closed:!1}})},Ze=function(e){return(0,d.Z)((0,d.Z)({},e),{},{guaranteeDiff:{closed:!0}})},Pe=function(e,t){return(0,d.Z)((0,d.Z)({},e),{},{pageStatus:(0,d.Z)((0,d.Z)({},e.pageStatus),{},{offsetY:t})})},Me=(o(96854),o(87406),T.moment),_e=function(e){var t=/^\/Date\(([-]?\d+)[+-]?[0-9]{4}\)\/$/,o=/^([0-9]{4}-[0-9]{2}-[0-9]{2})[T,' '][0-9]{2}:[0-9]{2}:[0-9]{2}/,i=e.match(t),n=e.match(o);return null!==i&&void 0!==i&&i[1]&&"-62135596800000"!==i[1]?Me.utc(parseInt(i[1],0)).utcOffset(8):null!==n&&void 0!==n&&n[1]&&"0001-01-01"!==n[1]?Me.utc(e.substr(0,19)):void 0},Fe=_e;T._;function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,o=Fe(e);return o?o.format(t||"YYYY-MM-DD"):""}var De,Ee=T._,Ne=1,He=Ee.cloneDeep(L),Le=function(e){var t,o=[],i=[],n=(0,v.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.commentImageUrl;o.push({bigImageUrl:r.replace(/\.(jpg|png|jpeg)$/,"_R_690_517_R5.$1"),smallImageUrl:r.replace(/\.(jpg|png|jpeg)$/,"_R_125_125_R5.$1")}),i.push(r.replace(/\.(jpg|png|jpeg)$/,"_R_900_504_R5.$1"))}}catch(e){n.e(e)}finally{n.f()}return{commentImgs:o.slice(0,9),commentImgsAll:i}},Ae=function(e,t){if(!t)return{};var o=["health","location","service","facility"],i=Ee.map(o,(function(o){var i=t["".concat(o,"Score")]||0;return{key:e.getShark(P[o].id),score:i,ratio:"".concat(Math.round(i/5*1e4)/100,"%")}})),n=t.totalScore,a=t.commentCount,r=t.scoreDesc;return{scores:i,totalScore:n,CNScore:r,commentCount:a}},Ve=function(e){return Ee.map(Array(2).fill(1),(function(t,o){return{id:String(o),name:e.getShark(P["commentSortBy".concat(o)].id),count:0,type:0}}))},Oe=function(e,t){return Ee.map(t,(function(t){var o=t.hotelInfo,i=void 0===o?{}:o,n=t.orderInfo,a=void 0===n?{}:n,r=t.images,s=void 0===r?[]:r,l=t.userInfo,c=void 0===l?{}:l,u=(t.feedbacks,t.travelTypeText),m=t.content,h=t.commentDate,f=t.scoreDesc,p=t.score,g=t.userId,y=i,x=y.masterBasicRoomName,k=a,v=k.checkinDate,b=c,S=b.nickName,T=b.avatarPicUrl,w=b.gradeName,R=b.isSimilar,C=[],j=[],I=C[0]||{},Z=I.content,M=I.type,_=j[0]||{},F=_.content,B=_.type,D=M&&e.getShark(P["feedbackType".concat(M)].id),E=B&&"".concat(e.getShark(P["feedbackType".concat(B)].id)).concat(F);return(0,d.Z)((0,d.Z)({userId:g,commentCon:m,user2ndComment:E,commentDate:Be(h),cidt:Be(v,"YYYY\u5e74MM\u6708"),roomName:x,userPhoto:T||"//pic.c-ctrip.com/VacationOnlinePic/diytour/userimg.png",nickName:S||g,CNScore:f,userGrade:w,travelType:u,feedbackContent:Z,feedbackType:D,isSimilar:R},Le(s)),{},{score:p})}))},Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=e.shark,i={commentTagList:[],travelTypeList:[],basicRoomList:[],statisticsList:[]};return Ee.forEach(t,(function(e){var t=e.type,n=e.commentFilterSummaryInfos,a=void 0===n?[]:n,r=A[t];if(r&&a.length){var s=[A.basicRoomList,A.travelTypeList],l=s.includes(Number(t));i[r]=Ee.map(a,(function(e){return(0,d.Z)((0,d.Z)({},e),{},{type:t,name:l?e.name:"".concat(e.name,"(").concat(e.count,")"),id:String(e.id)})})),l&&i[r].unshift({type:t,name:o.getShark(P["filterName".concat(t)].id),id:"-1"})}})),i},We=function(e,t,o){var i,n,a=e.shark,r=e.store,s=t.comments,l=void 0===s?[]:s,c=t.hotelBasicInfo,d=void 0===c?{}:c,u=t.similarCommentSummary,m=t.commentFilterSummaries,h=Ue(e,m),f=h.commentTagList,p=h.travelTypeList,g=h.basicRoomList,y=(h.statisticsList,d.commentSummary),x=Ae(a,y);x.CNScore=Ee.get(r.getState(),["hotelBasic","levelTag","name"],"");var k=Ae(a,u),v=Oe(a,l);Ee.isEmpty(null===(i=k)||void 0===i?void 0:i.totalScore)&&(k=o||{});var b=Ve(a);return{hasSimilar:(null===(n=k)||void 0===n?void 0:n.totalScore)>0,commentTagList:Ee.map(f.slice(0,3),(function(e){return e.name})),sortList:b,travelTypeList:p,basicRoomList:g,statisticsList:[],commentMainInfos:x,commentSimilarInfos:k,commentInfos:v}},Xe=function(e,t){var o=e.store,i=e.request,n=o.getState(),a=n.hotelBasic.encryptHotelId,r=(0,d.Z)({hotelToken:a,queryTypes:["hotel","comment"],commentPagingInfo:{pageIndex:Ne,pageSize:15}},t||{});return i(R.Hq.getHotelBasicInfo,r)},ze=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o){var i,n,a,r,s,l,c,u,m,h,f,p,g,y,x,k,v,S=arguments;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=S.length>2&&void 0!==S[2]?S[2]:{isInit:!1,similar:void 0},n=t.store,a=t.actions,a.updatePageStatus({commentLoading:!0}),e.prev=3,r=i.isInit,s=i.similar,r&&(Ne=1,He=Ee.cloneDeep(L)),e.next=8,Xe(t,o);case 8:l=e.sent,1===Ne?(c=We(t,l,s),u=n.getState(),m=u.hotelComment,h=void 0===m?{}:m,a.updateSimpleModel,Ee.isEmpty(h)||(c=(0,d.Z)((0,d.Z)({},h),{},{commentInfos:c.commentInfos})),a.updateSimpleModel({hotelComment:c})):(f=n.getState(),p=f.hotelComment,g=void 0===p?{}:p,y=g.commentInfos,x=void 0===y?[]:y,k=We(t,l,s),v=Ee.get(k,"commentInfos"),0===v.length&&a.updatePageStatus({showMoreComment:!1}),a.updateSimpleModel({hotelComment:(0,d.Z)((0,d.Z)({},g),{},{commentInfos:Ee.concat(x,v)})})),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log("comment error",e.t0);case 15:a.updatePageStatus({commentLoading:!1});case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,o){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ne++,e.next=3,ze(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o,i){var n,a,r,s,l,c,d,u;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return n=t.store,a=t.actions,Ne=1,r=o.type,s=o.id,l=n.getState(),c=l.commentFilter,d=void 0===c?{}:c,d[r]=s,a.updateSimpleModel({commentFilter:d}),u=Number(s),r?(Ee.remove(He.commentFilters,(function(e){return e.type===r})),"-1"===s||He.commentFilters.push({type:r,ids:[u]})):He.commentOrderByType=u,e.next=12,ze(t,He);case 12:case"end":return e.stop()}}),e)})));return function(t,o,i){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o,i){var n,a,r,s,l,c,d,u,m,h,f;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=o.id,a=o.type,r="1"===n,!i||!r){e.next=4;break}return e.abrupt("return");case 4:return s=t.store,l=t.actions,Ne=1,c=s.getState(),d=c.commentFilter,u=void 0===d?{}:d,m=u[a]||"",h=Ee.find(He.commentFilters,(function(e){return e.type===a})),h||(h={type:a},He.commentFilters.push(h)),f=Number(n),i?(h.ids=[],m=""):r?(h.ids=[],m="1"):(h.ids=[f],m=n),u[a]=m,l.updateSimpleModel({commentFilter:u}),e.next=16,ze(t,He);case 16:case"end":return e.stop()}}),e)})));return function(t,o,i){return e.apply(this,arguments)}}(),Ye=function(e){var t=e.store,o=t.getState(),i=o.commentFilter;return Ee.some(i,(function(e){return e}))},Ke=o(95565),$e=o(90129),Je=o(32180)["window"],et=T._,tt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var o,i,n,a,r,s,l,c,d,u,m,h,f,p,g,y,x,k,v,S,T,w,R,C,j,I;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.store,i=t.isSingleResources,n=t.isH5,a=t.isOnline,r=t.context,s=t.graphqlFetch,l=t.traceEventLog,c=t.showToast,d=t.sharkContext,u=t.sharkConfig,m=t.actions,h=t.sourceFrom,f=t.initSingleRelatedXNew,p=o.getState(),g=p.urlQuery,y=void 0===g?{}:g,x=p.roomsMap,k=void 0===x?{}:x,v=y.shoppingid,S=y.cidt,T=y.codt,i){e.next=5;break}return e.abrupt("return");case 5:return w=et.map(k,(function(e){return e.roomId})),R=n?"h5":a?"online":"CtripApp"===r.platform?"rn":"",e.next=9,f(v,s,w,{startDate:S,endDate:T},"hotel",R,l);case 9:C=e.sent,j=C.relatedXList,I=C.isTimeOut,I&&c(null===d||void 0===d?void 0:d.SharkUtil.getShark(u.loadingFail.id)),m.updateRelatedInfo({isTimeOut:I,relatedXList:j,sourceFrom:h});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){var t,o=e.store,i=e.handleSingleJudgeIsRelatedX,n=e.relatedXList,a=e.roomId,r=e.traceEventLog,s=e.actions,l=e.isSingleResources,c=o.getState(),d=c.urlQuery,u=!!Number((null===d||void 0===d?void 0:d.showreferencetradeprice)||0),m=i(n,a),h=m.isShowRelatedX,f=m.showRelatedXList,p=m.isRequired;return r({code:"shoppingCart-hotelRelatedX-showMask-res",type:1,desc:{roomId:a,isShowRelatedX:h,showRelatedXList:f,isRequired:p}}),s.updateRelatedInfo({showRelatedXList:f,isRequired:p,showReferPrice:u&&l}),!!h&&(s.updateMaskFlag({showRelated:!0}),s.updatePageStatus({showIconLoading:!1}),null!==(t=Je)&&void 0!==t&&null!==(t=t.document)&&void 0!==t&&t.body&&(Je.document.body.style.cssText="overflow: hidden;height: 100%;"),!0)},it=function(e){var t,o=e.pageContext,i=e.sourceFrom,n=e.actions;o.traceLog("grp_shophdet_maskclose_click",{sourceFrom:i}),n.updatePageStatus({showIconLoading:!1}),n.updateMaskFlag({showRelated:!1}),null!==(t=Je)&&void 0!==t&&null!==(t=t.document)&&void 0!==t&&t.body&&(Je.document.body.style.cssText="")},nt=function(e){var t=e.store,o=e.actions,i=e.roomToken,n=e.info,a=t.getState(),r=a.roomsMap,s=o.updateGuranteeTime,l=r[i].arrivalLocalTimeInfos;!l||l.selectdAmountLocal===n.amountLocal&&l.selectdTime===n.date||s({roomToken:i,arrivalLocalTimeInfos:(0,d.Z)((0,d.Z)({},l),{},{selectdAmountLocal:n.amountLocal,selectdTime:n.date,displaySelectdTime:n.displayTime})})},at=function(e){var t=e.store,o=e.roomToken,i=e.urlQuery,n=e.shoppingId,a=e.pageContext,r=t.getState(),s=r.roomsMap,l=s[o],c={roomId:l.roomId,baseRoomId:l.baseRoomInfo.baseRoomId,result:"unselected"};"1"===(null===i||void 0===i?void 0:i.overmax)&&(c=(0,d.Z)((0,d.Z)({},c),{},{overMax:1})),console.log("\u81ea\u91c7\u4f20\u53c2\uff1a",JSON.stringify(c)),a.jumpForChooseSingleResource(n,c)},rt=function(e){var t=e.store,o=e.actions,i=e.pageContext,n=e.sourceFrom,a=e.isIgnore,r=e.handleSelectRoom,s=e.handleAddSingleRelatedX,l=t.getState(),c=l.relatedInfo,d=o.updatePageStatus,u=o.updateRelatedInfo,m=c.showRelatedXList;if(i.traceLog("grp_shophdet_maskcofadd_click",{sourceFrom:n}),d({showRelatedIconLoading:!0}),a)return r(c.relatedToken,[]);var h=s(m),f=h.isPass,p=void 0!==f&&f,g=h.incompleteInfoRes,y=void 0===g?[]:g,x=h.selectResourceList,k=void 0===x?[]:x;return p?r(c.relatedToken,k):(u({relatedXIncompleteInfoRes:y}),void d({showRelatedIconLoading:!1}))},st=function(e){var t=e.store,o=e.STATUS,i=e.actions,n=e.offsetY,a=e.getQunarTopOffset,r=t.getState(),s=r.pageStatus,l=void 0===s?{}:s,c=r.activeTabBar,d=r.positionInfo,u=void 0===d?{}:d,m=r.isInTDS,h=l.hotelStatus,f=l.subRoomStatus,p=l.showHeader,g=l.headerHeight,y=void 0===g?1:g,x=l.tabHeight,k=void 0===x?44:x,v=l.filterHeight,b=void 0===v?87:v,S=l.showFixedFilters,T=l.baseRoomHeights,w=void 0===T?[]:T,R=l.baseRoomTops,C=void 0===R?[]:R,j=l.fixedRoomIndex,I=void 0===j?-1:j,Z=l.lastSubRoomHeight,P=l.moreBtnHeight,M=u.reading,_=u.filter;if(m&&(y=0),h===o.SUCCESS&&f){var F=i.updatePageStatus,B=i.updateSimpleModel,D={};n>0===p||(D.showHeader=!p);var E=y+k+((null===a||void 0===a?void 0:a())||0),N=M&&n>=M-E?"reading":"booking";N===c||B({activeTabBar:N});var H=n>_-E&&n<M-E-b;S===H||(D.showFixedFilters=H);for(var L=-1,A=n+E+b,V=C.length-1;V>=0;V--){if("reading"===N){L=-1;break}var O=C[V];if(A>=O){L=V===C.length-1?A<M-(Z+P+8)-20?V:-1:A+w[V]<C[V+1]-20?V:-1;break}}L===I||(D.fixedRoomIndex=L),et.isEmpty(D)||F(D)}},lt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var o,i,n,a,r,s;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.searchParams,i=t.urlQuery,n=t.search,a=t.graphqlFetch,r=t.pageContext,console.log("handleSearch",o),o.segments[0].SegmentId=Number(i.segment),e.next=5,n({sourcefrom:i.sourcefrom,orderId:i.orderid,productId:i.pid,isMandatoryOrder:i.ismandatoryorder,distributionChannelId:i.distributionchannelid,distributionChannel:i.distributionchannel,modifiedResToken:i.modifiedrestoken,graphqlRequest:a})(o);case 5:s=e.sent,s.shoppingId&&r.diyForwardPage&&r.diyForwardPage("hotelDetail",(0,d.Z)((0,d.Z)({},i),{},{cidt:o.segments[0].DepartDate,codt:o.segments[0].ArriveDate,shoppingid:s.shoppingId,shoppingId:s.shoppingId}),{isIgnore:!0,pageOptions:{scrolltochangedate:!0}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){var t=e.store,o=e.actions,i=e.offsetY,n="main",a=t.getState(),r=a.pageStatus,s=void 0===r?{}:r,l=a.activeTabBar,c=a.positionInfo,d=void 0===c?{}:c,u=a.isFixedTop,m=o.updateSimpleModel,h=s.headerHeight,f=void 0===h?1:h,p=s.tabHeight,g=void 0===p?0:p;if(i>0){var y=f+g,x=!1;et.reduceRight(d,(function(e,t,o){return!x&&t&&t-y<=i&&(n=o,x=!0),t}),0)}n===l||m({activeTabBar:n});var k=i>=f;k===u||m({isFixedTop:k})},dt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var o,i,n,a,r,s,l,c,d;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.isSSR,i=t.getSDTLink,n=t.request,a=t.shoppingId,r=t.initHotelBasic,s=t.actions,!o){e.next=16;break}return e.prev=2,console.log("preload call back"),e.next=6,Promise.all([i(n,a),r()]);case 6:l=e.sent,c=(0,$e.Z)(l,1),d=c[0].Link,s.updateSimpleModel({Link:d,hasPreload:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0),s.updateSimpleModel({hasPreload:!1});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),ut=o(96086),mt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o){var i,n,a,r,s,l,c,d,u,m,h,f=arguments;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=f.length>2&&void 0!==f[2]?f[2]:[],n=f.length>3?f[3]:void 0,a=f.length>4?f[4]:void 0,r=f.length>5?f[5]:void 0,s=f.length>6?f[6]:void 0,!T._.isEmpty(i)){e.next=7;break}return e.abrupt("return",{});case 7:return e.prev=7,e.next=10,ht(t,o,i,n,a,r);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return l=e.t0,c=l.isTimeOut,d=void 0!==c&&c,u=l.XItems,m=void 0===u?[]:u,h=T._.sortBy(m,(function(e){var t=e.isRequire,o=e.resourceItem.basic.defaultCount;return t?1:o?2:3})),s({code:"shoppingCart-RelatedX-SearchX-res",type:1,desc:{relatedXList:h,shoppingId:t}}),e.abrupt("return",{isTimeOut:d,relatedXList:h});case 23:return e.prev=23,e.t1=e["catch"](7),console.log(e.t1),e.abrupt("return",{isTimeOut:!0,relatedXList:[]});case 27:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(t,o){return e.apply(this,arguments)}}(),ht=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o){var i,n,a,r,s,l,c,d,u,m,h,f,p,g,y,x,k,v=arguments;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=v.length>2&&void 0!==v[2]?v[2]:[],n=v.length>3?v[3]:void 0,a=v.length>4?v[4]:void 0,r=v.length>5?v[5]:void 0,s=n,l=s.startDate,c=void 0===l?"":l,d=s.endDate,u=void 0===d?"":d,m=i.map((function(e){return{RelationId:e,RelationType:"hotel"===a?2:1,StartDate:c,EndDate:u}})),h=T.GraphqlClient.gql(De||(De=(0,ut.Z)(["\n            query GetOptionX($params: GetOptionXParams){\n                OptionX(params: $params){\n                    ShoppingOptionXs\n                    OptionXData{\n                        isDateRequired\n                        isRoomRelated\n                        isFlightRelated\n                        isRequire\n                        resourceItem{\n                            token\n                            resourceType\n                            calendarInfo\n                            relatedIds\n                            basic{\n                                name\n                                price\n                                tradePrice\n                                unit\n                                maxCount\n                                minCount\n                                stepCount\n                                defaultCount\n                                defaultUseDate\n                                guardUseDate\n                                description\n                                tags\n                                resourceId\n                            }\n                        }\n                    }\n                }\n            }\n        "]))),f={ActionType:10,ShoppingId:t,ResourceType:"relatedX",Platform:r,ResourceRelations:m,IsNeedDetail:!0},e.prev=8,e.next=11,Promise.race([new Promise(function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var i;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(h,f);case 2:i=e.sent,t(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ft()]);case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:return p=e.t0,g=p.isTimeOut,y=void 0!==g&&g,x=p.OptionX,k=void 0===x?{}:x,e.abrupt("return",{isTimeOut:y,XItems:(null===k||void 0===k?void 0:k.OptionXData)||[]});case 22:return e.prev=22,e.t1=e["catch"](8),console.log("load relatedX error",e.t1),e.abrupt("return",{isTimeOut:!0,XItems:[]});case 26:case"end":return e.stop()}}),e,null,[[8,22]])})));return function(t,o){return e.apply(this,arguments)}}(),ft=function(){return new Promise((function(e){setTimeout((function(){e({isTimeOut:!0,OptionX:{}})}),1e4)}))},pt=function(e,t){var o=!1,i=[];return e.forEach((function(e){var n=e.isRoomRelated,a=void 0!==n&&n,r=e.resourceItem,s=void 0===r?{}:r,l=e.isRequire,c=void 0!==l&&l,d=s,u=d.relatedIds,m=void 0===u?[]:u;a&&m.includes(t+"")&&(i.push(e),c&&!o&&(o=!0))})),{isShowRelatedX:0!==i.length,isRequired:o,showRelatedXList:i}},gt=function(e){var t=yt(e);if(0!==t.length)return{isPass:!1,incompleteInfoRes:t,selectResourceList:[]};var o=[];return e.forEach((function(e){var t=e.isRequire,i=e.resourceItem,n=void 0===i?{}:i,a=n,r=a.token,s=a.basic,l=void 0===s?{}:s,c=l,d=c.defaultCount,u=c.defaultUseDate;(t||0!==d&&!T._.isEmpty(u))&&o.push({Count:d,Token:r,UseDate:u,UseEndDate:u})})),{isPass:!0,selectResourceList:o,incompleteInfoRes:[]}},yt=function(e){var t=[];return e.forEach((function(e){var o=e.isRequire,i=e.resourceItem,n=void 0===i?{}:i,a=n,r=a.token,s=a.basic,l=void 0===s?{}:s,c=l,d=c.defaultCount,u=c.defaultUseDate;(o&&(0===d||T._.isEmpty(u))||0!==d&&T._.isEmpty(u))&&t.push(r)})),t},xt=o(45913),kt=o(32180)["window"],vt=T._,bt=T.createReactModel,St=T.setupContext,Tt=T.setupEnvContext,wt=T.setupPreloadCallback,Rt={pageStatus:{showRoomLoading:!1,showIconLoading:!1,subRoomStatus:!1,moreBtnStatus:!1,moreBtnHeight:0,lastSubRoomHeight:0,roomStatus:M.PENDING,hotelStatus:M.PENDING,offsetY:0,filterHeight:87,headerHeight:44,changeDateHeight:92,scrollY:0,safeAreaTop:0,showFacility:!1,tabHeight:44,unSticky:!1,showMoreComment:!0,showHeader:!1},hotelBasic:{},rooms:[],guessLikeRoomToken:"",roomCountMap:{},maskFlag:{chooseCountMask:"",baseRoomMask:"",subRoomMask:"",guaranteeMask:"",pricePopMask:"",faciltyPicMask:!1,honourMask:""},unfoldBaseRooms:{},baseRoomIds:[],roomsMap:{},groupRooms:{},filters:[],selectFilters:{},layouts:{},urlQuery:{},invalidRooms:{},alertInfo:void 0,guaranteeDiff:void 0,positionInfo:{main:1,booking:0,policy:0,facility:0,comment:0},activeTabBar:"main",isFixedTop:!1,distributionChannelConfig:{},_pageName:"hotelDetail",hiddenHeader:!0,cargoContext:{isNotZhCn:!1}},Ct=function(e){var t,o=Tt(),r=St(Ke.Iy),s=r.initialState,l=r.getQunarTopOffset,c=r.TraceLog,u=r.showToast,m=r.traceEventLog,h=r.observer,f=St(w.fH),p=St(w.G1),y=St(w.z1),x=St(w.fI),k=x.urlQuery,T=x.pageOptions,j=$((0,d.Z)((0,d.Z)({},k),T)),I=(0,d.Z)({sltprice:j.baseprice},j);I.segment=I.segment||I.segmentid;var F=I.frompagename,B=I.fromhotellist,N=I.frompage,H=(I.from,I.slthoteltoken),L=I.sltroomtoken,A=I.diffcity,V=I.baseprice,O=I.shoppingid,U=I.sourcefrom,z=I.sltquick,G=I.callback,q=I.guidetype,Y=I.segment,J=I.choosesingleresource,ne=JSON.parse(decodeURIComponent(z||"[]")),he=I.basetradeprice,fe=void 0===he?"":he,pe=I.baseprice,ge=void 0===pe?"":pe,ye=I.cidt,xe=I.codt,ke=I.cityid,ve=!ye||!xe||!ke;V=Number(V);var be=I.hoteltoken||H,Se=f.baseContext,Te=void 0===Se?{}:Se,we=f.requestFn,Re=f.gqlRequestFn,Ce=we((0,d.Z)((0,d.Z)({},o),f)),je=Re((0,d.Z)((0,d.Z)({},o),f)),Ie=(null===(t=y.getBaseState)||void 0===t?void 0:t.call(y))||{},Ze={},Pe={},Me={},_e=!1,Fe=!!J,Be="H5"===y.pageType,De="PC"===y.pageType,Ee=!!Number(I.pdid)||!!Number(I.pid),Ne={tour_channel:"isTour",customtravel:"isDingZhi",4126:"is4126",order_change:"isWoXie",qunar_poi:"isTourPOI",tour_poi:"isTourPOI"}[I.sourcefrom]||"isNothing",He="isTour"===Ne||Fe&&Ee,Le="isDingZhi"!==Ne&&Fe&&!Ee,Ae=s||{},Ve=Ae.isInTDS,Oe=Ae.isInWeiMiniProgram,Ue=Oe||Ve,We=W[Ne]||{},Xe=null===Te||void 0===Te?void 0:Te.isServer,ze=(0,C.zn)({keyTraceMap:X,name:"HotelDetailModel",initialState:(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},Rt),s),Ie),{},(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({distributionChannelConfig:K((0,d.Z)((0,d.Z)((0,d.Z)((0,g.Z)({},Ne,!0),s),Ie),{},{baseContext:Te})),noLeftBtn:Ue,showOptions:We,showDiffPrice:""!==ge||""!==fe,urlQuery:(0,d.Z)((0,d.Z)({},I),{},{callback:""})},Ne,!0),"isTour",He),"hasShell",Ee),"showChangeDate",Le)),reducers:(0,d.Z)((0,d.Z)({},i),n),logger:!1,devtools:!1}),Ge=ze.store,qe=ze.actions,Qe={store:Ge,actions:qe,request:Ce,shark:null===p||void 0===p?void 0:p.SharkUtil},Ye={};vt.forEach(a,(function(e,t){Ye[t]=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.apply(void 0,[Qe].concat(o))}}));var $e=function(){var e=Ge.getState(),t=e.urlQuery,o=qe.kmDevTraceLog,i=De?"query GetHotelInfo($params: HotelInfoReq) {\n            HotelInfo(params: $params) {\n                ResponseStatus,\n                hotelRiskWarning,\n                hotelBasic,\n                queryInfo,\n            }\n        }":"query GetHotelBasicData($params: HotelBasicReq) {\n            HotelBasic(params: $params) {\n                ResponseStatus,\n                hotelRiskWarning,\n                hotelBasic,\n                queryInfo,\n            }\n        }";try{var n=t.cachekey1;return je(i,{urlQuery:t},n?{cachePolicy:{enableCache:!0,cacheExpireTime:5,cacheLocation:"MEM",cacheKey:n}}:void 0)}catch(e){throw new It(_.HotelBasic_Error,{trace:o})}},Je=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var t,o,i,n,a,r,s,l,c,d,u,m,h,f,p,g,y,x,k,v;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ge.getState();case 2:return t=e.sent,o=t.urlQuery,i=t.cargoContext,n=void 0===i?{}:i,e.next=8,(0,Ke.zo)(Ce,o,n);case 8:if(a=e.sent,a!==Ke.dw.WAIT){e.next=12;break}throw setTimeout(ft,10),new It(_.ABORT);case 12:if(r=Ge.getState(),s=r.isTour,l=r.hasShell,c=qe.kmDevTraceLog,e.prev=14,u=n.isNotZhCn,!De){e.next=22;break}return h="query GetHotelRooms($params: HotelRoomsReq) {\n                    HotelRooms(params: $params) {\n                        RoomModel,\n                        ResponseStatus\n                    }\n                }",f={sltPrice:V,simpleRoomData:!0,baseTradePrice:Number(o.basetradeprice),isNotZhCn:u,isTour:s||l},a&&null!==(m=kt)&&void 0!==m&&m.idiyHotelAntiSpiderToken&&(f.fingerprintkeys=(null===(p=kt.Kar98k)||void 0===p?void 0:p.hoteluuidkeys)||"",f.token=kt.idiyHotelAntiSpiderToken),g=o.cachekey2,e.abrupt("return",je(h,{urlQuery:o,opts:f},g?{cachePolicy:{enableCache:!0,cacheExpireTime:5,cacheLocation:"MEM",cacheKey:g}}:void 0));case 22:return y="query GetRoomList($params: RoomListReq) {\n                RoomList(params: $params) {\n                    RoomModel,\n                    hoteltoken,\n                    policy,\n                    ResponseStatus\n                }\n            }",x={sltPrice:V,simpleRoomData:!0,baseTradePrice:Number(o.basetradeprice),isNotZhCn:u,isTour:s||l},a&&null!==(d=kt)&&void 0!==d&&d.idiyHotelAntiSpiderToken&&(x.fingerprintkeys=(null===(k=kt.Kar98k)||void 0===k?void 0:k.hoteluuidkeys)||"",x.token=kt.idiyHotelAntiSpiderToken),v=o.cachekey2,e.abrupt("return",je(y,{urlQuery:o,opts:x},v?{cachePolicy:{enableCache:!0,cacheExpireTime:5,cacheLocation:"MEM",cacheKey:v}}:void 0));case 29:throw e.prev=29,e.t0=e["catch"](14),new It(_.RoomList_Error,{trace:c});case 32:case"end":return e.stop()}}),e,null,[[14,29]])})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var t,o,i,n;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ge.getState();case 2:return t=e.sent,o=t.urlQuery,e.prev=4,i="query GetHotelBasicDelay($params: HotelBasicDelayReq) {\n                HotelBasicDelay(params: $params) {\n                    hotelBasicDelay,\n                    ResponseStatus\n                }\n            }",n=o.cachekey3,e.abrupt("return",je(i,{urlQuery:o,opts:{newFaci:De}},n?{cachePolicy:{enableCache:!0,cacheExpireTime:5,cacheLocation:"MEM",cacheKey:n}}:void 0));case 10:e.prev=10,e.t0=e["catch"](4);case 12:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o){var i,n,a,r,s,l,c,d,u,m,h,f,p,x,k,v,S,T,w,R,j,I,Z,P,F,B,D,E,N,H,L,A,V,U,W,X,z,G,q,Q,Y,K,$,J,ee,te,ne,ae;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Ge.getState(),n=i.roomsMap,a=i.hasShell,r=i.urlQuery,s=i.isWoXie,l=qe.kmDevTraceLog,c=qe.getQconfig,d=n[t],d.arrivalLocalTimeInfos,u=d.countInfo,d.Days,m=d.ExtendInfos,h=O,f=be,p=r.segment,x=[{HotelToken:f,Token:t,SegmentId:p,Count:u.select,ExtendInfos:m}],o&&(x=x.concat(o)),e.prev=8,!Fe){e.next=31;break}return v="query AddShoppingAndBook($params: AddShoppingAndBookParams) {\n                    AddShoppingAndBook(params: $params) {\n                        isSuccess,\n                        type,\n                        message,\n                        ShoppingUpdateInfo,\n                        CanBookingResults\n                    }\n                }",e.next=13,je(v,{shoppingId:h,clearType:[4],requestData:{IsShoppingDetailUpdate:!0,ResourceType:null!==o&&void 0!==o&&o.length?6:2,SelectedResources:x,Header:a?[{Key:"GroupOrSdpPartialUpdate",Value:"true"}]:[]},needBook:!0});case 13:if(S=e.sent,T=S.AddShoppingAndBook,w=void 0===T?{}:T,R=w.isSuccess,j=w.type,I=w.ShoppingUpdateInfo,Z=w.CanBookingResults,P=ie({isWoXie:s,CanBookingResults:Z,ShoppingUpdateInfo:I,roomToken:t}),F=w.message,B=P===(_.UPDATEHOTEL_COUNT_ERROR||_.UPDATEHOTEL_INVALID_ERROR),B||!((null===I||void 0===I||null===(k=I.ResourceStatus)||void 0===k||null===(k=k.XResources)||void 0===k?void 0:k.length)>0)){e.next=24;break}return E=null===I||void 0===I||null===(D=I.ResourceStatus)||void 0===D?void 0:D.XResources[0],N=E.Token,H=(0,g.Z)({},N,"\u8be5\u4ea7\u54c1\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),qe.updateRelatedInfo({unavailableResInfo:H}),e.abrupt("return",{status:_.WoXie_Update_XItem_Error});case 24:if(!R){e.next=28;break}return e.abrupt("return",{status:M.SUCCESS});case 28:return e.abrupt("return",{status:1===j||s?P:_.UPDATEHOTEL_CAN_BOOKING_FAIL,message:F});case 29:e.next=61;break;case 31:return e.next=33,c("100023026:booking_switch");case 33:if(L=e.sent,A=L.bookingResource,V=void 0===A||A,U={ShoppingId:O,ShoppingDetailUpdateRequest:{ResourceType:o?6:2,SelectedResources:x,ShoppingId:h,IsShoppingDetailUpdate:!0}},!V){e.next=51;break}return e.next=40,(0,C.gK)(U)({urlQuery:r,graphqlFetch:je});case 40:if(W=e.sent,X=W.AddShoppingAndBook,z=void 0===X?{}:X,G=z.isSuccess,q=z.ShoppingUpdateInfo,Q=void 0===q?{}:q,!G){e.next=47;break}return e.abrupt("return",{status:M.SUCCESS});case 47:throw Y=ie({ShoppingUpdateInfo:Q,roomToken:t}),new It(Y,{trace:l});case 49:e.next=61;break;case 51:return e.next=53,(0,C.IK)(U)(Ce,r);case 53:if(K=e.sent,$=K.Data,J=$.IsSuccess,ee=$.ShoppingUpdateInfo,te=void 0===ee?{}:ee,!J){e.next=59;break}return e.abrupt("return",{status:M.SUCCESS});case 59:throw ne=oe({ShoppingUpdateInfo:te,roomToken:t}),new It(ne,{trace:l});case 61:e.next=70;break;case 63:return e.prev=63,e.t0=e["catch"](8),ae=new It(_.UPDATEHOTEL_ERROR,{e:e.t0,trace:l}),zt(ae),console.log(_.UPDATEHOTEL_ERROR,e.t0),y.recCoreBusinessError&&y.recCoreBusinessError({error:ae,businessId:"hotelDetail_shopping_car",errorFunName:"updateShoppingCar",errorFrom:"hotelDetailController",businessAttribute:"other"}),e.abrupt("return",{status:ae.name,message:e.t0.message});case 70:case"end":return e.stop()}}),e,null,[[8,63]])})));return function(t,o){return e.apply(this,arguments)}}(),ht=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var t,o,i,n,a,r,s,l,c,u,m,h,f,p,g,x,k;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e();case 3:if(t=e.sent,o=t.HotelInfo,i=void 0===o?{}:o,n=t.HotelBasic,a=void 0===n?i:n,r=a.hotelBasic,s=a.hotelRiskWarning,l=void 0===s?[]:s,c=qe.kmDevTraceLog,null===r||void 0===r||!r.hotelName){e.next=18;break}return u=Ge.getState(),m=u.urlQuery,h=void 0===m?{}:m,f=a.queryInfo,p=void 0===f?{}:f,g=!!Number(p.pdid)||!!Number(p.pid),qe.updateSimpleModel({urlQuery:(0,d.Z)((0,d.Z)({},h),p),hasShell:g,hotelRiskWarning:l,hotelBasic:a.hotelBasic}),qe.updatePageStatus({hotelStatus:M.SUCCESS}),x=Ge.getState(),k=x.distributionChannelConfig.showHotelDetailComments,k&&Ye.getHotelComment({},{similar:null===r||void 0===r?void 0:r.similarComment,isInit:!0}),e.abrupt("return",p);case 18:if(null===r||void 0===r||!r.hotelBasicFailure){e.next=22;break}throw new It(_.HotelBasic_Failure,{trace:c});case 22:throw new It(_.HotelBasic_Empty,{trace:c});case 23:e.next=30;break;case 25:e.prev=25,e.t0=e["catch"](0),console.log(e.t0),zt(e.t0),y.recCoreBusinessError&&y.recCoreBusinessError({error:e.t0,businessId:"hotelDetail_initHotelBasic",errorFunName:"initHotelBasic",errorFrom:"hotelDetailController",businessAttribute:"other"});case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),ft=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var t,o,i,n,a,r,s,l,c,d,u,m,h,f,p,g,y,x,k,v,S,T;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!De){e.next=25;break}return e.next=4,Je();case 4:if(t=e.sent,o=t.HotelRooms,i=void 0===o?{}:o,n=i.RoomModel,a=void 0===n?{}:n,r=Ge.getState(),s=r.urlQuery,l=r.distributionChannelConfig.showShopPayFilterTab,r.hotelBasic,be||(H=s.slthoteltoken,L=s.sltroomtoken),c=a.filters,d=a.xProductInfo,u=!l||Fe,u&&(c=vt.filter(c,(function(e){return 111!==e.type}))),m=ae(s),qe.updateSimpleModel({filters:c,xProductInfo:d,searchParams:m}),vt.isEmpty(i.RoomModel.rooms)){e.next=23;break}Ze={All:i.RoomModel.rooms},Mt(_t(c),!0),qe.updatePageStatus({roomStatus:M.SUCCESS}),jt(),e.next=24;break;case 23:throw new It(_.RoomList_Empty,{trace:qe.kmDevTraceLog});case 24:return e.abrupt("return");case 25:return e.next=27,Je();case 27:if(h=e.sent,f=h.RoomList,p=Ge.getState(),g=p.urlQuery,y=p.distributionChannelConfig.showShopPayFilterTab,x=f.policy,k=f.hoteltoken,be||(H=g.slthoteltoken,L=g.sltroomtoken,be=k),v=f.RoomModel.filters,S=!y||Fe,S&&(v=vt.filter(v,(function(e){return 111!==e.type}))),T=ae(g),qe.updateSimpleModel({filters:v,policy:x,searchParams:T}),vt.isEmpty(f.RoomModel.rooms)){e.next=44;break}Ze={All:f.RoomModel.rooms},Mt(_t(v),!0),qe.updatePageStatus({roomStatus:M.SUCCESS}),jt(),e.next=45;break;case 44:throw new It(_.RoomList_Empty,{trace:qe.kmDevTraceLog});case 45:e.next=50;break;case 47:e.prev=47,e.t0=e["catch"](0),e.t0.name!==_.ABORT&&zt(e.t0);case 50:case"end":return e.stop()}}),e,null,[[0,47]])})));return function(){return e.apply(this,arguments)}}(),yt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var t,o,i;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et();case 3:t=e.sent,o=t.HotelBasicDelay,i=o.hotelBasicDelay,qe.updateSimpleModel({hotelBasicDelay:i}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),e.t0.name!==_.ABORT&&zt(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var o,i,n,a,r,s;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(!_e){e.next=5;break}return e.abrupt("return");case 5:_e=!0;case 6:if(e.prev=6,o=Ge.getState(),i=o.isTourPOI,n=o.Link,a=o.hasPreload,o.urlQuery,r=o.distributionChannelConfig.showHotelDetailComments,!a){e.next=13;break}(0,Ke.ZW)(n),r&&Ye.getHotelComment({},{isInit:!0}),e.next=19;break;case 13:if(!ve||!(0,Ke.In)()){e.next=18;break}return e.next=16,ht();case 16:e.next=19;break;case 18:ht();case 19:return e.t0=Promise,e.next=22,yt();case 22:if(e.t1=e.sent,!i){e.next=27;break}e.t2=qe.updatePageStatus({roomStatus:M.HIDE}),e.next=30;break;case 27:return e.next=29,ft();case 29:e.t2=e.sent;case 30:e.t3=e.t2,e.t4=[e.t1,e.t3],e.t0.all.call(e.t0,e.t4),e.next=40;break;case 35:e.prev=35,e.t5=e["catch"](6),s=new It(_.RoomList_Error,{e:e.t5,trace:qe.kmDevTraceLog}),zt(s),y.recCoreBusinessError&&y.recCoreBusinessError({error:e.t5,businessId:"hotelDetail_init",errorFunName:"initPage",errorFrom:"hotelDetailController",businessAttribute:"other"});case 40:return e.prev=40,console.log("observer",h),null===h||void 0===h||h.subscribe("tracePageInfo",Ct),Ct(),e.finish(40);case 45:case"end":return e.stop()}}),e,null,[[6,35,40,45]])})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Ge.getState(),t=e.urlQuery,o=e.hotelBasic,i=qe.logPageInfo,n={cidt:"\u5165\u4f4f\u65e5\u671f",codt:"\u79bb\u5e97\u65e5\u671f",cityName:"\u57ce\u5e02",hotelName:"\u9152\u5e97\u540d\u79f0",zone:"\u9152\u5e97\u5730\u533a"},a=[],r={adult:"\u6210\u4eba",infant:"\u5a74\u513f",child:"\u513f\u7ae5"},s=[];for(var l in r)t[l]&&a.push("".concat(t[l]).concat(r[l]));for(var c in n)t[c]&&s.push({key:n[c],value:t[c]}),o[c]&&s.push({key:n[c],value:o[c]});a.length&&s.push({key:"\u5165\u4f4f\u4eba\u6570",value:a.join("\uff0c")}),i({contents:s})},jt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:tt({store:Ge,isSingleResources:Fe,isH5:Be,isOnline:De,context:o,graphqlFetch:je,traceEventLog:m,showToast:u,sharkContext:p,sharkConfig:P,actions:qe,sourceFrom:U,initSingleRelatedXNew:mt});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zt=function(e,t){return ot({store:Ge,handleSingleJudgeIsRelatedX:pt,relatedXList:t,roomId:e,traceEventLog:m,actions:qe,isSingleResources:Fe})},Pt=function(){it({pageContext:y,sourceFrom:U,actions:qe})},Mt=function(e,t){var o=Ge.getState(),i=o.selectFilters,n=o.guaranteeDiff,a=o.urlQuery,r=o.roomsMap,s=e||i;Ze=te(Ze,r);var l=Ze.All||[];qe.updateSimpleModel({selectFilters:s});var c=ce(s,l),d=c.baseRoomIds,u=c.roomsMap,m=c.groupRooms,h=c.guessLikeRoomToken;if(vt.isEmpty(d))qe.updatePageStatus({roomStatus:_.RoomList_Search_Empty});else{var f;if(t)qe.updateUnfoldBaseRooms((null===(f=u[L])||void 0===f?void 0:f.baseRoomId)||d[0]);if(!n||!n.closed){var g=de(u,a,null===p||void 0===p?void 0:p.SharkUtil.getShark);g&&(u[g.sltRoomToken].arrivalLocalTimeInfos=g.arrivalLocalTimeInfos,g.tip&&qe.updateSimpleModel({guaranteeDiff:{roomToken:g.sltRoomToken,tip:g.tip,close:!1}}))}u[L]&&(u[L].isSelectedToken=!0),qe.updateFilterInfo({baseRoomIds:d,roomsMap:u,groupRooms:m,guessLikeRoomToken:h}),qe.updatePageStatus({roomStatus:M.SUCCESS})}},_t=function(e){var t=ne||[];"string"===typeof t&&(t=[t]);var o,i={},n=(0,v.Z)(t);try{var a=function(){var t=o.value,n=e.find((function(e){return e.type===D[t]}));n&&(i[n.type]=n)};for(n.s();!(o=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}return i},Ft=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){var o,i,n,a,r,s,l,c,d,u;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Ge.getState(),n=i.roomCountMap,a=i.maskFlag,r=i.roomsMap,s=i.urlQuery,null!==t&&void 0!==t&&null!==(o=t.countInfo)&&void 0!==o&&o.canModify){e.next=3;break}return e.abrupt("return");case 3:if(l=(null===t||void 0===t?void 0:t.roomToken)||a.chooseCountMask||"",l){e.next=8;break}qe.updateMaskFlag({chooseCountMask:void 0}),e.next=28;break;case 8:if(n[l]&&n[l].status===M.SUCCESS){e.next=27;break}return c=r[t.roomToken].countInfo.select,e.prev=10,qe.updateRoomCountMap((0,g.Z)({},t.roomToken,{status:M.SUCCESS,list:[],curCount:c})),e.next=14,Ce(R.Hq.ROOM_PRICE_CALULATE,ue(t,s));case 14:if(d=e.sent,u=me(t,d,{sltPrice:V,baseTradePrice:Number(s.basetradeprice)}),!vt.isEmpty(u)){e.next=20;break}throw _.RoomPriceCalculate_Empty;case 20:qe.updateRoomCountMap((0,g.Z)({},t.roomToken,{status:M.SUCCESS,list:u,curCount:c}));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](10),console.log(_.RoomPriceCalculate_Error,e.t0),qe.updateRoomCountMap((0,g.Z)({},t.roomToken,{status:_.RoomPriceCalculate_Error,list:[],curCount:c}));case 27:qe.updateMaskFlag({chooseCountMask:l},"popupAction",{scene:"\u6253\u5f00\u95f4\u6570\u8499\u5c42",value:"\u5f53\u524d\u9009\u62e9\u662f\uff1a".concat(t.countInfo.select,"\u95f4"),contents:[{key:"\u6bcd\u623f\u578b\u540d\u79f0",value:t.baseRoomInfo.baseRoomName},{key:"\u5b50\u623f\u578b\u540d\u79f0",value:t.roomName}]});case 28:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}(),Bt=function(e){var t=Ge.getState(),o=t.maskFlag,i=t.roomCountMap,n=t.roomsMap,a=o.chooseCountMask;if(a){var r=i[a].list,s=n[a],l=s.countInfo,c=s.priceInfo,d=s.baseRoomInfo,u=s.roomName,m=se(e,r,l,c),h=m.curCountInfo,f=m.curPriceInfo;h=le(null===p||void 0===p?void 0:p.SharkUtil.getShark,f.addBedFee,h),qe.updateRoom({roomToken:a,countInfo:h,priceInfo:f,count:e},"roomAction",{scene:"\u9009\u62e9\u95f4\u6570",value:"".concat(String(e),"\u95f4"),before:"".concat(l.select,"\u95f4"),contents:[{key:"\u6bcd\u623f\u578b\u540d\u79f0",value:d.baseRoomName},{key:"\u5b50\u623f\u578b\u540d\u79f0",value:u}]})}},Dt=function(e){var t=Ge.getState(),o=t.selectFilters,i=e?(0,d.Z)({},o):{};if(e){var n,a=[[Z.signFamilyBed,Z.signKingBed,Z.signTwinBed],[Z.signPayAtHotel,Z.signPayAtOnline]];if(o[e.type])delete i[e.type];else{var r,s=(0,v.Z)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.includes(e.type)){var c,u=(0,v.Z)(l);try{for(u.s();!(c=u.n()).done;){var m=c.value;delete i[m]}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){s.e(e)}finally{s.f()}i[e.type]=e}qe.updateSimpleModel({},"showFilters",{value:(o[e.type]?"\u672a\u9009\u4e2d":"\u9009\u4e2d")+e.filterName,before:o[e.type]?"\u9009\u4e2d":"\u672a\u9009\u4e2d",contents:[{key:"\u5f53\u524d\u5df2\u9009\u7b5b\u9009\u9879\u548c\u5f53\u524d\u6392\u5e8f\u7684\u4f4d\u7f6e",value:null===(n=Object.keys(o))||void 0===n||null===(n=n.map((function(e,t){return"".concat(t+1,".").concat(o[e].filterName)})))||void 0===n?void 0:n.join("\u3001")}]})}try{Mt(i)}catch(e){y.recCoreBusinessError&&y.recCoreBusinessError({error:e,businessId:"hotelDetail_filter",errorFunName:"handleSelectFilter",errorFrom:"hotelDetailController",businessAttribute:"business"})}},Et=function(e,t){nt({store:Ge,actions:qe,roomToken:e,info:t})},Nt=function(e,t){Pe[e]=t},Ht=function(e){return Pe[e]},Lt=function(e,t){Me[e]=t},At=function(e){return Me[e]},Vt=function(e,t,o){var i,n=Ge.getState(),a=n.unfoldBaseRooms,r=n.pageStatus,s=n.groupRooms,l=n.roomsMap,c=qe.updateUnfoldBaseRooms,d=qe.updateSimpleModel,u=!a[e];c(e);var m=s[e].map((function(e){return l[e]}));if(d({},"roomAction",{scene:"\u70b9\u51fb\u6bcd\u623f\u578b".concat(null===(i=m[0])||void 0===i?void 0:i.baseRoomName),before:u?"\u6536\u8d77":"\u5c55\u5f00",value:u?"\u5c55\u5f00":"\u6536\u8d77"}),u){var h,f=Pe[e]||(null===r||void 0===r||null===(h=r.baseRoomTops)||void 0===h?void 0:h[o]);return{y:f-r.filterHeight-r.headerHeight-r.tabHeight-r.safeAreaTop,animated:!0}}return!1},Ot=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,o){var i,n,a,r,s,l,d,u,h,f,g,x,v,S,T,w,R,C,j,I,Z,D,V,U,W,X,z,K,$,J,ee,te,oe,ie,ne,ae,se,le;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=qe.updatePageStatus,n=qe.showInvalidRoomAlert,qe.updateMaskFlag,a=qe.updateSimpleModel,i({showIconLoading:!0}),r=Ge.getState(),s=r.roomsMap,l=r.hotelBasic,d=r.appType,u=r.urlQuery,h=r.relatedInfo,f=r.isWoXie,r.hasShell,g=u.pdid,x=l.checkInDate,v=l.checkOutDate,S=l.hotelId,T=l.hotelName,w=F||"resourceConfirm",R=2===Number(B)?-2:"",C=E[B]?E[B]:"",j=s[t],I="bestone"===d,Z=j.roomId,D=j.countInfo,V=void 0===D?{}:D,U=V.select,null===c||void 0===c||c("grp_shophdet_subroomselct_click",re(u,{roomId:Z,select:U})),W=[{key:"\u95f4\u6570",value:U},{key:"\u6bcd\u623f\u578b\u540d\u79f0",value:j.baseRoomName},{key:"\u9910\u98df\u3001\u5e8a\u578b\u3001\u53d6\u6d88\u653f\u7b56",value:j.subSigns},{key:"\u603b\u4ef7\uff08\u95f4\u6570x\u665a\u6570x\u5355\u4ef7\uff09",value:j.priceInfo.totalPrice},{key:"\u623f\u578bid",value:Z},{key:"\u5165\u4f4f\u65e5\u671f",value:x},{key:"\u79bb\u5e97\u65e5\u671f",value:v},{key:"\u9152\u5e97id",value:S},{key:"\u9152\u5e97\u540d\u79f0",value:T}],X={shoppingId:O,productId:g,contents:W},a({},"roomAction",{scene:"\u9009\u62e9\u5b50\u623f\u578b",value:j.roomName,contents:W}),!Q(j)){e.next=19;break}return y.navigateBack?y.diyBackPage({params:{hotelUpdated:!1}},R):N?y.popToPage&&y.popToPage(N,{hotelUpdated:!1},X):I&&"middle"===u.srcfrom?y.diyForwardPage&&y.diyForwardPage("confirm",{shoppingId:O,srcfrom:k.srcfrom,sourcefrom:k.sourcefrom},{pageOptions:{hotelChanged:!1,hotelAdded:!0,hotelRoomChanged:!1,shoppingUpdated:!1,segment:Y,diffCity:A}}):De||Be?y.diyBackPage&&y.diyBackPage({sourceName:C,params:{hotelUpdated:!1}},R):y.diyBackPage&&y.diyBackPage(w),e.abrupt("return");case 19:if(!Fe||o){e.next=30;break}if(qe.updateRelatedInfo({relatedId:j.roomId,relatedToken:j.roomToken}),z=h||{},K=z.relatedXList,$=void 0===K?[]:K,J=z.isTimeOut,!J||h){e.next=27;break}qe.updateRelatedInfo({isTimeOut:void 0}),jt(),e.next=30;break;case 27:if(vt.isUndefined(J)){e.next=30;break}if(!Zt(j.roomId,$)){e.next=30;break}return e.abrupt("return");case 30:return null===m||void 0===m||m({code:"shoppingCart-hotelRelatedX-addCart-res",type:1,desc:{roomId:j.roomId,roomToken:t,relatedResourceList:o}}),e.next=33,ut(t,o);case 33:if(ee=e.sent,i({showIconLoading:!1,showRelatedIconLoading:!1}),ee.status!==M.SUCCESS){e.next=39;break}return te={hotelChanged:H!==l.hotelToken,hotelAdded:!H,hotelRoomChanged:L!==t,shoppingUpdated:!0,segment:Y,diffCity:A},y.navigateBack?y.diyBackPage({params:{hotelUpdated:!0}},R):G instanceof Function?(G({needUpdateShopping:!0,hotelChanged:be!==H,diffCity:A}),y.diyBackPage&&y.diyBackPage(w)):2===Number(q)?y.diyForwardPage&&y.diyForwardPage(Be?"confirm":w,{shoppingId:O,guideType:q,diffCity:A},{isIgnore:!0,pageOptions:te}):f?y.jumpForWoXieToTourOrder(u):N?y.popToPage&&y.popToPage(N,{hotelUpdated:!0},X):Be?y.diyBackPage&&y.diyBackPage({pageOptions:te,sourceName:C,params:{hotelUpdated:!0}},R):De?"middle"===u.srcfrom?y.diyForwardPage&&y.diyForwardPage("confirm",{shoppingId:O,srcfrom:k.srcfrom,sourcefrom:k.sourcefrom},{pageOptions:te}):Fe?y.jumpForChooseSingleResource(O):y.diyBackPage&&y.diyBackPage({pageOptions:te,sourceName:C,params:{hotelUpdated:!0}},R):y.diyBackPage&&y.diyBackPage(w),e.abrupt("return");case 39:if(ee.status!==_.WoXie_Update_XItem_Error){e.next=41;break}return e.abrupt("return");case 41:return oe=null===p||void 0===p?void 0:p.SharkUtil.getShark,ie="",ne=oe(P.systemFail.id),ae=oe(P.reChoose.id),se=!1,ee.status===_.WoXie_Product_Expired?(ne=ee.message,ae=oe(P.backToOrderDetail.id),se=!0):ee.status===_.UPDATEHOTEL_COUNT_ERROR?(ie=oe(P.noRooms.id),ne=oe(P.noHotRooms.id),ae=oe(P.chooseRoom.id)):ee.status===_.UPDATEHOTEL_INVALID_ERROR?(ie=oe(P.soldOut.id),ne=oe(P.hotRoomsSoldOut.id),ae=oe(P.chooseRoom.id)):ee.status===_.UPDATEHOTEL_BOOING_ERROR?ne=oe(P.bookingFail.id):ee.status===_.UPDATEHOTEL_CAN_BOOKING_FAIL?ne=ee.message:ee.status===_.WoXie_Update_Error?(ne=ee.message,ae=oe(P.confirmButton.id),se=!0):ee.status===_.WoXie_CanBook_Error?(ne=ee.message,ae=oe(P.backToOrderDetail.id),se=!0):ee.status===_.WoXie_CanBook_XItem_Error&&(ne=ee.message,ae=oe(P.chooseRoom.id)),le={chooseText:ie,roomToken:t,alertButton:ae,alertTitle:ne,backToOrderDetail:se},Pt(),n(le),e.abrupt("return",le);case 51:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),Ut=function(e){at({store:Ge,roomToken:e,urlQuery:I,shoppingId:O,pageContext:y})},Wt=function(e){return rt({store:Ge,actions:qe,pageContext:y,sourceFrom:U,isIgnore:e,handleSelectRoom:Ot,handleAddSingleRelatedX:gt})},Xt=function(){var e=Ge.getState(),t=(e.pageStatus,e.maskFlag);t.subRoomMask||t.baseRoomMask||t.guaranteeMask||t.pricePopMask||t.honourMask?qe.updateMaskFlag({subRoomMask:!1,baseRoomMask:!1,guaranteeMask:!1,pricePopMask:!1,honourMask:!1}):y.diyBackPage&&y.diyBackPage()},zt=function(e){console.log(e),console.log("%c".concat(e.name),"color:red");var t=qe.updatePageStatus;switch(e.name){case _.HotelBasic_Error:case _.HotelBasic_Empty:t({hotelStatus:e.name});break;case _.HotelBasic_Failure:t({hotelStatus:e.name});break;case _.RoomList_Empty:case _.RoomList_Error:case _.RoomList_Search_Empty:t({roomStatus:e.name});break;case _.RoomPriceCalculate_Error:break;default:break}},Gt=function(e){ct({store:Ge,actions:qe,offsetY:e})},qt=function(e){st({store:Ge,STATUS:M,actions:qe,offsetY:e,getQunarTopOffset:l})},Qt=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:lt({searchParams:t,urlQuery:I,search:xt.y,graphqlFetch:je,pageContext:y});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return wt((0,S.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt({isSSR:Xe,getSDTLink:Ke.lx,request:Ce,shoppingId:O,initHotelBasic:ht,actions:qe});case 2:case"end":return e.stop()}}),e)})))),{store:Ge,actions:(0,d.Z)((0,d.Z)((0,d.Z)({},qe),{},{initHotelDetail:bt,initAntiSpider:function(){return(0,Ke.nu)(Ce,O)},handleScrollWithCompute:Gt,handleScrollWithComputeInH5:qt,handleTriggerChooseCountMask:Ft,handleChooseCount:Bt,handleSelectFilter:Dt,handleSelectGuaranteeTime:Et},Ye),{},{updateBaseRoomTops:Nt,getBaseRoom:function(e,t){return ee({shark:null===p||void 0===p?void 0:p.SharkUtil},e,t,He||Ge.getState().hasShell)},getBaseRoomTops:Ht,updateBaseRoomHeight:Lt,getBaseRoomHeight:At,handleTriggerSubRoom:Vt,handleSelectRoom:Ot,selfPurchaseFromDingshi:Ut,handleBack:Xt,handleSelectRelatedX:Wt,hideRelatedPop:Pt,handleSearch:Qt})}},jt=bt(Ct),It=function(e){(0,f.Z)(o,e);var t=(0,p.Z)(o);function o(e,i){var n;(0,u.Z)(this,o),n=t.call(this);var a=i||{},r=a.e,s=a.trace;return e&&B[e]&&(null===s||void 0===s||s({messageId:B[e],desc:F[e]})),n.name=r instanceof o?r.name:e||"",r instanceof Error&&(n.message=r.message,n.stack=r.stack),n}return(0,m.Z)(o)}((0,k.Z)(Error)),Zt=o(59083),Pt=o(95749),Mt=o(90201),_t=o(71515),Ft=o(12167),Bt=o(2269),Dt=(T._,function(e){var t,o,i="horizontal";switch(e){case _.HotelBasic_Error:case _.HotelBasic_Empty:o="error",t=Pt.ZP.getShark(P.systemFail.id),i="vertical";break;case _.RoomList_Empty:o="noResult",t=Pt.ZP.getShark(P.fullRoom.id);break;case _.RoomList_Error:case _.RoomPriceCalculate_Error:case _.RoomPriceCalculate_Empty:o="error",t=Pt.ZP.getShark(P.loadingFail.id);break;case _.RoomList_Search_Empty:o="noResult",t=Pt.ZP.getShark(P.searchFail.id);break;default:break}return[t,o,i]}),Et=(0,Mt.memo)((function(e){var t=e.callback,o=e.errorType,i=Dt(o),n=(0,$e.Z)(i,3),a=n[0],r=n[1],s=n[2],l={type:r,direction:s,text:[{type:"textOnly",text:a}]};return t&&(l.button={text:Pt.ZP.getShark(P.reload.id),onPress:function(){t()}}),(0,Bt.jsx)(_t.View,{style:{flex:1,alignItems:"center",padding:"40px"},children:(0,Bt.jsx)(Ft.ExceptionStatus,(0,d.Z)({},l))})})),Nt=function(){return(0,Bt.jsxs)(_t.View,{className:"base_loading_s",children:["\u52aa\u529b\u52a0\u8f7d\u4e2d",(0,Bt.jsxs)(_t.View,{className:"loader_inner",children:[(0,Bt.jsx)(_t.View,{className:"span"}),(0,Bt.jsx)(_t.View,{className:"span"}),(0,Bt.jsx)(_t.View,{className:"span"})]})]})},Ht=function(e){(0,f.Z)(o,e);var t=(0,p.Z)(o);function o(e){var i;return(0,u.Z)(this,o),i=t.call(this,e),(0,g.Z)((0,h.Z)(i),"handleCallback",(function(){i.props.initPage(),i.setState({hasError:!1})})),i.state={hasError:!1},i}return(0,m.Z)(o,[{key:"render",value:function(){return this.state.hasError?(0,Bt.jsx)(Et,{errorType:_.HotelBasic_Error,callback:this.handleCallback}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log(e),{hasError:!0}}}]),o}(Mt.Component),Lt=o(33675),At=o.n(Lt),Vt=o(36658),Ot=o(21832),Ut={typeIndex:{f28:{fontSize:28,lineHeight:"33px"},f25:{fontSize:25,lineHeight:"31px"},f22:{fontSize:22,lineHeight:"27px"},f20:{fontSize:20,lineHeight:"24px"},f18:{fontSize:18,lineHeight:"22px"},f17:{fontSize:17,lineHeight:"21px"},f16:{fontSize:16,lineHeight:"20px"},f15:{fontSize:15,lineHeight:"19px"},f14:{fontSize:14,lineHeight:"18px"},f13:{fontSize:13,lineHeight:"17px"},f12:{fontSize:12,lineHeight:"15px"},f11:{fontSize:11,lineHeight:"12px"},f10:{fontSize:10,lineHeight:"11px"}},weightIndex:{light:"200",regular:"400",medium:"700",sembold:"700"}},Wt={gBlue:["#00A7FA","#0076F5"],gOrange:["#FFA50A","#FF7700"],gOrangeS:["#FF9D0A","#FF7700"],black:"#000000",goldText:"#B37E36",goldBorder:"#E8DEC2",purple01:"#6800D1",purple02:"#7400E9",purple03:"#7800F5",purple04:"#8E26F7",purple05:"#A34DF8",purple06:"#B573F9",purple07:"#C898FC",purple08:"#DDBFFB",purple09:"#F2E6FC",purple10:"#F8F2FE",yellow01:"#D8AD00",yellow02:"#F2C200",yellow03:"#FFCC00",yellow04:"#FED325",yellow05:"#FFDC4E",yellow06:"#FFE473",yellow07:"#FFEA97",yellow08:"#FFF2BE",yellow09:"#FFFAE6",yellow10:"#FFFCF3",blueGray01:"#5678A8",blueGray02:"#89A0C2",blueGray03:"#99AECA",blueGray04:"#AABBD3",blueGray05:"#BBC9DC",blueGray06:"#CCD6E5",blueGray07:"#DDE4ED",blueGray08:"#EEF1F6",blueGray09:"#F6F8FA",blueGray10:"#F8FAFD",gray01:"#333333",gray02:"#666666",gray03:"#999999",gray04:"#AAAAAA",gray05:"#BBBBBB",gray06:"#CCCCCC",gray07:"#DDDDDD",gray08:"#EEEEEE",gray09:"#F4F4F4",gray10:"#F8F8F8",red01:"#D01508",red02:"#E81709",red03:"#F5190A",red04:"#F63B2E",red05:"#F85E53",red06:"#F98078",red07:"#FBA39D",red08:"#FCC5C1",red09:"#FEE8E6",red10:"#FEF3F2",orangeS:"#FF6600",orange01:"#D96500",orange02:"#F27000",orange03:"#FF7700",orange04:"#FF8B26",orange05:"#FFA04D",orange06:"#FFB473",orange07:"#FFC899",orange08:"#FFDCBF",orange09:"#FFF1E6",orange10:"#FFF8F2",green01:"#009C67",green02:"#00AE73",green03:"#00B87A",green04:"#26C28D",green05:"#4DCDA2",green06:"#73D8B5",green07:"#99E2C9",green08:"#BFEDDD",green09:"#E6F8F1",green10:"#F2FBF8",blue01:"#0072D1",blue02:"#007FE9",blue03:"#0086F6",blue04:"#2698F7",blue05:"#4DAAF8",blue06:"#73BCFA",blue07:"#99CEFB",blue08:"#BFE0FC",blue09:"#E6F3FE",blue10:"#F2F8FE",white:"#FFFFFF"},Xt=function(e){return e[e["signJustConfirm"]=3]="signJustConfirm",e[e["signFreeEnjoy"]=4]="signFreeEnjoy",e[e["signLowBreakfast"]=5]="signLowBreakfast",e[e["signConfirmTime"]=6]="signConfirmTime",e[e["signWifi"]=7]="signWifi",e[e["signGuessLike"]=9]="signGuessLike",e[e["signLandTraffic"]=10]="signLandTraffic",e[e["signOffLine"]=11]="signOffLine",e[e["signPkgSave"]=101]="signPkgSave",e[e["signGift"]=102]="signGift",e[e["signBookPolicy"]=103]="signBookPolicy",e[e["signCancelPolicy"]=104]="signCancelPolicy",e[e["signBreakfast"]=105]="signBreakfast",e[e["signKingBed"]=106]="signKingBed",e[e["signTwinBed"]=107]="signTwinBed",e[e["signFamilyBed"]=108]="signFamilyBed",e[e["signMemberBenefit"]=109]="signMemberBenefit",e[e["signPayAtOnline"]=110]="signPayAtOnline",e[e["signPayAtHotel"]=111]="signPayAtHotel",e}({}),zt=44,Gt={invalid:!1,chooseText:"",guaranteeDiff:void 0},qt=Mt.createContext(Gt);qt.displayName="SubRoomContext";var Qt=o(32180)["requestAnimationFrame"],Yt=["style","color","type","fontWeight","className"],Kt=["hitSlopSize","onPress","className"],$t=T._;Pt.ZP.init(P);x().getSystemInfoSync().windowWidth;var Jt=function(e){var t=e.name,o=e.className,i=e.style,n=e.testId,a=void 0===n?"":n;return(0,Bt.jsx)(_t.Text,{className:"icon icons-".concat(t," ").concat(o||""),"data-testid":a,style:i})},eo=function(e){var t=(0,Mt.useContext)(qt),o=e.style,i=e.color,n=e.type,a=e.fontWeight,r=e.className,s=(0,I.Z)(e,Yt),l=null!==t&&void 0!==t&&t.invalid?i===Wt.white?Wt.gray03:Wt.gray05:i,c=(0,d.Z)((0,d.Z)((0,d.Z)({},n||{}),{},{fontWeight:a},o||{}),{},{color:l});return(0,Bt.jsx)(_t.Text,(0,d.Z)({className:r,style:c},s))};eo.typeIndex=Ut.typeIndex,eo.weightIndex=Ut.weightIndex;var to=function(){var e=(0,Mt.useState)(!1),t=(0,$e.Z)(e,2),o=t[0],i=t[1],n=Mt.memo((function(e){var t=e.text,n=e.className,a=e.size;return(0,Bt.jsxs)(oo,{onPress:function(){i(!o)},style:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"24rpx"},className:n,"data-testid":"show-more-room",children:[(0,Bt.jsx)(eo,{type:"big"===a?eo.typeIndex.f14:eo.typeIndex.f12,color:Wt.blue03,children:o?Pt.ZP.getShark(P.packUp.id):t}),(0,Bt.jsx)(Jt,{name:o?"arrow2Top":"arrow2Bottom",style:{color:Wt.blue03,fontSize:"big"===a?14:12,marginLeft:"8rpx"}})]})}));return{showMore:o,MoreLine:n}},oo=(0,Mt.memo)((function(e){var t=e.hitSlopSize,o=e.onPress,i=void 0===o?function(){}:o,n=e.className,a=(0,I.Z)(e,Kt),r={activeOpacity:1};t&&(r.hitSlop={top:t,left:t,bottom:t,right:t}),r=(0,d.Z)((0,d.Z)({},r),a);var s=function(e){Qt((function(){i(e)})),e.stopPropagation(),e.preventDefault()};return(0,Bt.jsx)(_t.View,(0,d.Z)((0,d.Z)({onClick:s},r),{},{className:n}))})),io=(0,Mt.memo)((function(e){var t=e.countInfo,o=e.onCountChooseClick,i=(0,Mt.useContext)(qt);if(!t||null!==i&&void 0!==i&&i.invalid)return null;var n=t.canModify;return(0,Bt.jsxs)(oo,{onPress:o,className:"room_countChoose","data-testid":"diy-415088-count-mask",hitSlopSize:10,children:[(0,Bt.jsx)(eo,{color:n?Wt.blue03:Wt.gray03,type:eo.typeIndex.f14,fontWeight:eo.weightIndex.sembold,children:Pt.ZP.getShark(P.numberRoom.id,[t.select])}),n?(0,Bt.jsx)(Jt,{name:"arrow2BottomFilling",style:{color:Wt.blue03}}):null]})})),no=(0,Mt.memo)((function(e){var t=e.infos,o=void 0===t?[]:t,i=e.color;return $t.isEmpty(o)?null:(0,Bt.jsx)(_t.View,{className:"room_staticInfoRow",children:o.map((function(e,t){return(0,Bt.jsx)(eo,{type:eo.typeIndex.f12,color:e.highlight?Wt.green03:i||Wt.gray01,style:{marginRight:"24rpx"},children:e.name},t)}))})})),ao=[2,3,5],ro=(0,Mt.memo)((function(e){var t=e.signs,o=t.signCancelPolicy,i=t.signJustConfirm,n=t.signConfirmTime;if($t.isEmpty(o)&&$t.isEmpty(i)&&$t.isEmpty(n))return null;var a=ao.includes(Number(null===o||void 0===o?void 0:o.id)),r=(0,Mt.useContext)(qt);return(0,Bt.jsxs)(_t.View,{className:"room_cancelPolicyRow",children:[o?(0,Bt.jsx)(eo,{style:{marginRight:"24rpx"},type:eo.typeIndex.f12,color:a?Wt.green03:Wt.gray01,children:o.name}):null,i?(0,Bt.jsx)(Jt,{name:"flash",style:{color:null!==r&&void 0!==r&&r.invalid?Wt.gray08:Wt.green03,fontSize:"28rpx",marginRight:"4rpx"}}):null,(0,Bt.jsx)(eo,{type:eo.typeIndex.f12,color:Wt.green03,children:(null===i||void 0===i?void 0:i.name)||(null===n||void 0===n?void 0:n.name)})]})})),so=function(e){var t=e.text,o=e.color,i=e.borderColor,n=e.backgroundColor,a=e.icon,r=(e.enabled,{display:"inline-block",color:o,borderColor:i,border:"1rpx solid",backgroundColor:n,fontSize:"20rpx",padding:"0 1px",borderRadius:"4rpx"});return(0,Bt.jsxs)(_t.View,{style:r,children:[a?(0,Bt.jsx)(Jt,{name:a}):null,t]})},lo=(0,Mt.memo)((function(e){var t=e.tag,o=e.invalid;switch(t.type){case Xt.signPkgSave:return(0,Bt.jsx)(so,{enabled:!o,text:t.name,color:"orange",borderColor:"orange",icon:"discountFilling",backgroundColor:"orange"});case Xt.signMemberBenefit:return(0,Bt.jsx)(so,{enabled:!o,text:t.name,color:"#b27f38",borderColor:"#b27f38"});default:return(0,Bt.jsx)(so,{enabled:!o,text:t.name,color:"orange",borderColor:"orange"})}})),co=(0,Mt.memo)((function(e){var t=e.tags,o=(0,Mt.useContext)(qt);return $t.isEmpty(t)?null:(0,Bt.jsx)(_t.View,{className:"room_tagsView",children:t.map((function(e){return(0,Bt.jsx)(_t.View,{style:{marginRight:"8rpx",marginTop:"8rpx"},children:(0,Bt.jsx)(lo,{tag:e,invalid:null===o||void 0===o?void 0:o.invalid})},e.type)}))})})),uo=(0,Mt.memo)((function(e){var t=e.spic,o=void 0===t?"":t;e.isGuessLike;return(0,Bt.jsx)(_t.View,{className:"room_picBox",children:(0,Bt.jsx)(_t.Image,{className:"room_htlListPic",mode:"aspectFill",src:o})})})),mo=(0,Mt.memo)((function(e){var t=e.roomName,o=e.needArrow,i=e.needCount,n=e.onCountChooseClick,a=e.countInfo,r=e.isBase,s=void 0!==r&&r,l=[];$t.isArray(t)?l=(0,j.Z)(t):$t.isString(t)&&(l=[{name:t,highlight:!1}]);var c=l.length,d=$t.map(l,(function(e,t){return e.highlight?'<span class="span">'.concat(e.name).concat(t===c-1&&o?'<i class="i"/>':"","</span>"):'<p class="'.concat(s?"":"p",'">').concat(e.name).concat(t===c-1&&o&&!s?'<i class="i"/>':"","</p>")})).join("");return(0,Bt.jsxs)(_t.View,{className:"room_nameRow",children:[(0,Bt.jsx)(_t.View,{className:"room_roomName",children:(0,Bt.jsx)(_t.View,{style:{flexDirection:"row",display:"flex",flexWrap:"wrap"},dangerouslySetInnerHTML:{__html:d}})}),i?(0,Bt.jsx)(io,{onCountChooseClick:n,countInfo:a}):null]})})),ho=(0,Mt.memo)((function(e){var t=e.text,o=e.color;return(0,Bt.jsx)(_t.View,{style:{marginTop:"16rpx"},children:(0,Bt.jsx)(eo,{type:eo.typeIndex.f12,color:o||Wt.red03,children:t})})})),fo=function(e){return e/2},po=T.classnames,go=(0,Mt.memo)((function(e){var t=e.pictureInfo,o=void 0===t?{}:t,i=e.hotelId,n=e.jumpMorePictures,a=(0,Mt.useState)(!1),r=(0,$e.Z)(a,2),s=r[0],l=r[1],c=(0,Mt.useState)(0),d=(0,$e.Z)(c,2),u=d[0],m=d[1],h=(0,Mt.useRef)(!1),f=(0,Mt.useRef)(null),p=(0,Vt.B)(),g=o.pictures,y=void 0===g?[]:g,x=o.countInfo,k=void 0===x?{}:x,v=o.titles,b=void 0===v?[]:v,S=function(e){if(u===y.length-1){var t,o=null===(t=e.detail)||void 0===t?void 0:t.dx,i=fo(126);o>i&&(l(!0),h.current=!0)}},T=(0,Mt.useCallback)((function(e){e.detail.current!==u&&(console.log(e.detail.current),m(e.detail.current)),h.current&&(l(!1),h.current=!1,n())}),[p,i]);return(0,Bt.jsxs)(_t.View,{children:[y.length?(0,Bt.jsxs)(_t.View,{className:"htl-jump-view",children:[(0,Bt.jsx)(_t.View,{className:"htl-jump-icon",children:"\u2190"}),(0,Bt.jsx)(_t.Text,{className:"htl-jump-text",children:s?"\u91ca\u653e\u67e5\u770b":"\u52a0\u8f7d\u66f4\u591a"})]}):null,(0,Bt.jsx)(ko,{jumpMorePictures:n,titles:b,countInfo:k,picRef:f,setCurIndex:m,curIndex:u}),(0,Bt.jsx)(_t.Swiper,{style:{height:"494rpx"},ref:f,current:u,onTransition:S,onAnimationFinish:T,children:y.map((function(e,t){return(0,Bt.jsx)(xo,{url:e,jumpMorePictures:n},t)}))})]})})),yo=go,xo=(0,Mt.memo)((function(e){var t=e.url,i=e.needJump,n=void 0===i||i,a=e.jumpMorePictures,r=x().getSystemInfoSync().windowWidth,s=(0,Mt.useState)(t),l=(0,$e.Z)(s,2),c=l[0],d=l[1];return console.log("PicView===>"),(0,Bt.jsx)(_t.SwiperItem,{"data-testid":"diy-415088-top-picture-375483",onClick:function(){n&&a()},children:(0,Bt.jsx)(_t.View,{className:"htl-pic-con",children:(0,Bt.jsx)(_t.Image,{src:c,style:{width:r,height:"494rpx"},mode:"scaleToFill",onError:function(){return d(o(7843))}})})})})),ko=(0,Mt.memo)((function(e){e.picRef;var t=e.titles,o=void 0===t?[]:t,i=e.countInfo,n=e.curIndex,a=e.setCurIndex,r=e.jumpMorePictures,s=o.slice(0,3),l=((0,Vt.B)(),(0,Mt.useState)(0)),c=(0,$e.Z)(l,2),d=c[0],u=c[1];return(0,Mt.useEffect)((function(){var e,t=-1;if(s.length&&(null===s||void 0===s||null===(e=s.reduce)||void 0===e||e.call(s,(function(e,o,a){var r=i[e]||0,s=i[o]||0;return r<=n&&s>n&&(t=a-1),o}))),-1===t){var o=s.length-1;t=o>0?o:0}t===d||u(t)}),[n]),null!==s&&void 0!==s&&s.length?(0,Bt.jsxs)(_t.View,{className:"picBanner",children:[s.map((function(e,t){return(0,Bt.jsx)(oo,{onPress:function(){u(t),a(null===i||void 0===i?void 0:i[e])},children:(0,Bt.jsx)(_t.Text,{className:po({bannerTxt:!0,bannerCur:t===d}),children:e})},t)})),(0,Bt.jsx)(_t.Image,{src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/hotel-gap.png",style:{width:"1px",height:fo(32)}}),(0,Bt.jsxs)(oo,{className:"bannerRight",onPress:function(){return r()},children:[(0,Bt.jsx)(_t.Text,{className:"bannerTxt bannerRightTxt",children:"\u76f8\u518c"}),(0,Bt.jsx)(_t.Text,{className:"icon-right bannerRightIcon"})]})]}):null}));Pt.ZP.init(P);var vo,bo,So=jt.useState,To=(0,Mt.memo)((function(){var e=So((function(e){return e.hotelBasic})),t=So((function(e){var t;return null===(t=e.hotelBasicDelay)||void 0===t?void 0:t.pictureInfo})),o=So((function(e){return e.hotelRiskWarning})),i=e||{},n=i.commentCount,a=i.hotelPureName,r=(i.hotelPureEName,i.facilities),s=i.openDate,l=(i.commentTags,i.star),c=i.starType,d=void 0===c?"diamondShapeFilling":c,u=i.hotelId,m=(i.isLicense,i.themeTags,i.optimizationTag,i.score),h=(i.levelTag,i.videoCover),f=i.video,p=i.hasHotelVideo,g=i.distance,y=void 0===g?"":g,k=i.address,v=void 0===k?"":k,b=(i.isAbroad,i.isHMT,i.hasHotelVrPicture),S=(i.medalType,(0,Vt.B)()),T=x().createSelectorQuery(),w=(0,Mt.useState)(340),R=(0,$e.Z)(w,2),C=(R[0],R[1]);(0,Mt.useEffect)((function(){var e=setTimeout((function(){T.select("#htl-header-swiper").boundingClientRect((function(e){C(e.height)})).exec()}),16);return function(){return clearTimeout(e)}}),[]);var j=(0,Mt.useCallback)((function(){return S.jumpMorePictures(e)}),[e]),I={circle:"icon-bnb",star:"icon-star",diamondShapeFilling:"icon-diamond"};return(0,Bt.jsxs)(_t.View,{className:"htl-base-info","data-testid":"hotelBasicInfo",children:[(0,Bt.jsx)(_t.View,{className:"htl-header-swiper",id:"htl-header-swiper",children:(0,Bt.jsx)(yo,{video:f,videoCover:h,pictureInfo:t,hotelId:u,hasHotelVideo:p,hasHotelVrPicture:b,jumpMorePictures:j})}),(0,Bt.jsxs)(_t.View,{className:"baseInfoBox",children:[(0,Bt.jsxs)(_t.View,{className:"titleInfo",children:[(0,Bt.jsx)(_t.Text,{className:"nameTxt",children:a}),(0,Bt.jsx)(Ro,{star:l,starType:I[d]})]}),(0,Bt.jsxs)(_t.View,{className:"row",children:[(0,Bt.jsxs)(_t.View,{className:"addressBox",onClick:function(){return S.jumpHotelMap(e)},"data-testid":"diy-415088-info-map-375483",children:[(0,Bt.jsxs)(_t.View,{className:"addressInfo",style:{width:"91%"},children:[(0,Bt.jsx)(_t.Text,{className:"distanceTxt",children:y}),(0,Bt.jsx)(_t.Text,{className:"addressTxt",children:v})]}),(0,Bt.jsxs)(_t.View,{className:"mapBox",children:[(0,Bt.jsx)(_t.Text,{className:"icons-location mapIcon"}),(0,Bt.jsx)(_t.Text,{className:"mapTxt",children:"\u5730\u56fe"})]})]}),(0,Bt.jsx)(_t.View,{onClick:function(){var t;S.jumpCommentVotes(e),null===(t=S.handleDevTraceLog)||void 0===t||t.call(S,"jump",{module:"\u9152\u5e97\u4fe1\u606f",scene:"\u8df3\u8f6c\u70b9\u8bc4\u9875\u9762",value:e.hotelName})},"data-testid":"diy-415088-comment-detail-".concat(u),className:"scoreView",children:m>0?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsxs)(_t.View,{className:"scoreBox",children:[(0,Bt.jsx)(_t.Text,{className:"scoreTxt",children:m}),(0,Bt.jsx)(_t.Text,{className:"subScoreTxt",children:"\u5206"})]}),(0,Bt.jsxs)(_t.View,{className:"commentBox",children:[(0,Bt.jsx)(_t.Text,{className:"commentTxt",children:Pt.ZP.getShark(P.point.id,[n])}),(0,Bt.jsx)(_t.Text,{className:"commentIcon icons-arrow2RightFilling"})]})]}):(0,Bt.jsx)(_t.Text,{className:"subScoreTxt noScore",children:"\u6682\u65e0\u8bc4\u5206"})})]}),(0,Bt.jsxs)(_t.View,{onClick:function(){S.jumpHotelFacilityInfo(e),S.handleDevTraceLog("jump",{module:"\u9152\u5e97\u4fe1\u606f",scene:"\u8df3\u8f6c\u8be6\u60c5\u8bbe\u65bd\u9875\u9762",value:e.hotelName})},"data-testid":"diy-415088-info-facility-375483-2001-01-01",className:"facilitiesBox",children:[(0,Bt.jsx)(_t.Text,{className:"icons-arrow-check-circle facilitiesTitle",style:{fontSize:"30rpx",marginRight:"4rpx"},"data-testid":"check-icon"}),(0,Bt.jsx)(_t.Text,{className:"facilitiesTitle",children:"\u4eae\u70b9/\u8bbe\u65bd"}),(0,Bt.jsx)(Co,{openDate:s}),(0,Bt.jsx)(jo,{facilities:r}),(0,Bt.jsx)(_t.Text,{className:"icon-right",style:{fontSize:"24rpx"}})]})]}),null!==o&&void 0!==o&&o.length?(0,Bt.jsxs)(_t.View,{className:"risk-warning margin-top16","data-testid":"risk-warning",children:[(0,Bt.jsxs)(_t.View,{className:"risk-warning-title-container",children:[(0,Bt.jsx)(_t.View,{className:"icon risk-warning-title icon-information"}),(0,Bt.jsx)(_t.Text,{className:"risk-warning-title",children:"\u98ce\u9669\u63d0\u793a"})]}),(0,Bt.jsx)(_t.View,{className:"risk-warning-text-container",children:o.map((function(e,t){return(0,Bt.jsx)(_t.Text,{style:{color:"#666666",fontSize:"12px",lineHeight:"18px",marginBottom:t===o.length-1?0:"4px"},children:e})}))})]}):null]})})),wo=To,Ro=function(e){var t=e.star,o=e.starType;return t?(0,Bt.jsx)(_t.View,{className:"label-view",children:(0,j.Z)(Array(t).keys()).map((function(e,t){return(0,Bt.jsx)(_t.View,{className:"icon "+o,"data-testid":"label_view_hotel_star",children:"icon-bnb"===o?(0,Bt.jsx)(Bt.Fragment,{children:"\udb80\ude0e"}):""},t)}))}):null},Co=function(e){var t=e.openDate;if(!t)return null;var o=t.split("-")[0];return(0,Bt.jsx)(_t.View,{style:{fontSize:"24rpx",color:"#666"},children:Pt.ZP.getShark(P.openYear.id,[o])})},jo=function(e){var t=e.facilities,o=void 0===t?[]:t,i=o.slice(0,3).map((function(e,t){return(0,Bt.jsxs)(_t.View,{className:"facilities",children:[(0,Bt.jsx)(_t.Text,{className:"faci_vertical_line"}),(0,Bt.jsx)(_t.Text,{className:"label-text",children:e.name})]},t)}));return(0,Bt.jsx)(_t.View,{className:"facilitiesContainer",children:i})},Io=T._,Zo=(jt.useActions,jt.useState),Po=(0,Mt.memo)((function(){var e,t=Zo((function(e){return e.hotelComment})),o=Zo((function(e){return e.hotelBasic})),i=(0,Vt.B)(),n=(0,Mt.useCallback)((function(){return i.jumpCommentVotes(o)}),[]);if(null===t||void 0===t||null===(e=t.commentInfos)||void 0===e||!e.length)return null;var a=t.hasSimilar,r=void 0!==a&&a,s=t.commentMainInfos,l=void 0===s?{}:s,c=!!l.totalScore;return(0,Bt.jsx)(_t.View,{className:"htl-comment",children:c&&r?(0,Bt.jsx)(_o,{hotelComment:t,onClickComment:n}):(0,Bt.jsx)(Fo,{hotelComment:t,onClickComment:n})})})),Mo=Po,_o=function(e){var t=e.hotelComment,o=e.onClickComment,i=t.commentMainInfos,n=i.commentCount,a=i.totalScore,r=i.CNScore,s=void 0===r?"":r,l=t.commentSimilarInfos,c=l.commentCount,d=l.totalScore,u=l.CNScore,m=void 0===u?"":u,h=t.commentInfos,f=void 0===h?[]:h,p=t.commentTagList,g=void 0===p?[]:p,y=(0,Bt.jsx)(_t.Text,{className:"score-text",children:a}),x=Pt.ZP.getShark(P.score.id,[y]).filter(Boolean),k=Pt.ZP.getShark(P.commentCount.id,[n]),v=(0,Bt.jsx)(_t.Text,{className:"score-text",children:d}),b=Pt.ZP.getShark(P.score.id,[v]).filter(Boolean),S=Pt.ZP.getShark(P.commentCount.id,[c]);return(0,Bt.jsxs)(_t.View,{className:"",children:[(0,Bt.jsxs)(_t.View,{className:"title-wrap",children:[a>0&&(0,Bt.jsxs)(_t.View,{className:"all-comment-wrap",children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"17px",color:"#333333",fontWeight:700},children:Pt.ZP.getShark(P.allGuestComment.id)}),(0,Bt.jsxs)(_t.View,{className:"main-score-wrap",style:{marginTop:"20px"},onClick:o,children:[x[0],(0,Bt.jsx)(_t.View,{style:{width:"2px"}}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"2px"},children:x[1]}),!Io.isEmpty(s)&&(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"4px",fontWeight:700},children:s}),(0,Bt.jsx)(_t.Text,{style:{top:"-2px",fontSize:"12px",color:"#333333"},children:k})]})]}),d>0&&(0,Bt.jsxs)(_t.View,{className:"similar-common-wrap",children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"17px",color:"#333333",fontWeight:700},children:Pt.ZP.getShark(P.similarGuestComment.id)}),(0,Bt.jsxs)(_t.View,{className:"main-score-wrap",style:{marginTop:"20px"},onClick:o,children:[b[0],(0,Bt.jsx)(_t.View,{style:{width:"2px"}}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"2px"},children:b[1]}),!Io.isEmpty(m)&&(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"4px",fontWeight:700},children:m}),(0,Bt.jsx)(_t.Text,{style:{top:"-2px",fontSize:"12px",color:"#333333"},children:S})]})]})]}),(0,Bt.jsxs)(_t.View,{children:[(0,Bt.jsx)(Do,{commentTagList:g,onClickComment:o}),(0,Bt.jsx)(No,{commentInfos:f}),(0,Bt.jsx)(_t.View,{className:"button-view",children:(0,Bt.jsx)(Bo,{onClickComment:o})})]})]})},Fo=function(e){var t=e.hotelComment,o=e.onClickComment,i=t.commentMainInfos,n=i.commentCount,a=i.totalScore,r=i.scores,s=void 0===r?[]:r,l=i.CNScore,c=void 0===l?"":l,d=t.commentInfos,u=void 0===d?[]:d,m=t.commentTagList,h=void 0===m?[]:m,f=(0,Bt.jsx)(_t.Text,{style:{fontSize:"22px",color:"#0086F6",fontWeight:700},children:a}),p=Pt.ZP.getShark(P.score.id,[f]).filter(Boolean),g=Pt.ZP.getShark(P.commentCount.id,[n]);return console.log("Shark.getShark(sharkConfig.guestComment.id)===>",Pt.ZP.getShark(P.guestComment.id)),(0,Bt.jsxs)(_t.View,{"data-testid":"unlogin-comment",children:[(0,Bt.jsx)(_t.Text,{style:{color:"#333333",fontSize:"17px",fontWeight:700},children:Pt.ZP.getShark(P.guestComment.id)}),a>0&&(0,Bt.jsxs)(_t.View,{className:"score-info","data-testid":"comment-total",onClick:o,children:[(0,Bt.jsxs)(_t.View,{className:"main-score-wrap",children:[p[0],(0,Bt.jsx)(_t.View,{style:{width:"2px"}}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"2px"},children:p[1]}),!Io.isEmpty(c)&&(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#0086F6",marginRight:"4px",fontWeight:700},children:c}),(0,Bt.jsx)(_t.Text,{style:{top:"-2px",fontSize:"12px",color:"#333333"},children:g})]}),(0,Bt.jsx)(_t.View,{className:"detail-score-wrap","data-testid":"comment-sub",children:s.map((function(e,t){return(0,Bt.jsxs)(_t.View,{className:"detail-score",children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#333333"},children:e.key}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#333333",fontWeight:700},children:e.score})]},t)}))})]}),(0,Bt.jsxs)(_t.View,{children:[(0,Bt.jsx)(Do,{commentTagList:h,onClickComment:o}),(0,Bt.jsx)(No,{commentInfos:u}),(0,Bt.jsx)(_t.View,{className:"button-view",children:(0,Bt.jsx)(Bo,{onClickComment:o})})]})]})},Bo=function(e){var t=e.onClickComment;return(0,Bt.jsx)(_t.View,{className:"button",onClick:function(){t()},children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"13px"},children:Pt.ZP.getShark(P.allComment.id)})})},Do=function(e){var t=e.commentTagList,o=void 0===t?[]:t,i=e.onClickComment;return o.length>0?(0,Bt.jsx)(_t.View,{className:"tag-wrap",children:o.map((function(e,t){return(0,Bt.jsx)(_t.View,{className:"tag",onClick:i,children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#333333"},children:e})},t)}))}):null},Eo={"\u70b9\u8bc4\u65b0\u661f":{grade:"\u70b9\u8bc4\u65b0\u661f",backgroundColor:"#FEF9E6",color:"#F5B400"},"\u70b9\u8bc4\u8fbe\u4eba":{grade:"\u70b9\u8bc4\u8fbe\u4eba",backgroundColor:"#FEF4E6",color:"#FE9700"},"\u70b9\u8bc4\u4e13\u5bb6":{grade:"\u70b9\u8bc4\u4e13\u5bb6",backgroundColor:"#FEECE5",color:"#FA4700"}},No=function(e){var t,o,i=e.commentInfos,n=void 0===i?[]:i;if(Io.isEmpty(n))return null;var a=n[0],r=a.userPhoto,s=a.nickName,l=a.userId,c=a.userGrade,d=a.commentCon,u=(0,Mt.useState)(!1),m=(0,$e.Z)(u,2),h=m[0],f=m[1],p=h?"https://pic.c-ctrip.com/VacationOnlinePic/diytour/userimg.png":r;return(0,Bt.jsxs)(_t.View,{className:"detail-wrap",children:[(0,Bt.jsxs)(_t.View,{className:"user-info",children:[(0,Bt.jsx)(_t.Image,{"data-testid":"comment-avator",src:p,className:"user-photo",onError:function(e){return f(!0)}}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"14px",fontWeight:700,color:"#333333"},children:s||l}),c&&Eo[c]&&(0,Bt.jsx)(_t.View,{className:"grade",style:{backgroundColor:(null===(t=Eo[c])||void 0===t?void 0:t.backgroundColor)||"#FEF9E6"},children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"10px",color:null===(o=Eo[c])||void 0===o?void 0:o.color},children:c})})]}),(0,Bt.jsx)(_t.View,{className:"comment-text",children:(0,Bt.jsx)(_t.Text,{className:"c-text",children:d})})]})},Ho={notice:"js_koala_hotel_notice",policy:"js_koala_hotel_policy",facility:"js_hotel_facility",booking:"js_htl_filter",reading:"js_policy_and_facility"},Lo=T._,Ao=jt.useState,Vo={booking:Pt.ZP.getShark(null===(vo=P.hotelBooking)||void 0===vo?void 0:vo.id)||"\u9152\u5e97\u9884\u8ba2",reading:Pt.ZP.getShark(null===(bo=P.infoReading)||void 0===bo?void 0:bo.id)||"\u8ba2\u623f\u5fc5\u8bfb"},Oo=(0,Mt.memo)((function(e){var t=e.handleScroll,o=Ao((function(e){return e.activeTabBar})),i=Ao((function(e){return{showHeader:e.pageStatus.showHeader,headerHeight:e.pageStatus.headerHeight,tabHeight:e.pageStatus.tabHeight}})),n=i.showHeader,a=i.headerHeight,r=i.tabHeight,s=(0,Mt.useCallback)((function(e){Object.keys(Vo).map((function(o,i){e===o&&Ho[e]&&t("".concat(Ho[e]),a+r)}))}),[]);return console.log("showHeader===>",n),n?(0,Bt.jsx)(_t.View,{className:"tour_tab_container","data-testid":"tour-tab",style:{top:"".concat(a,"px")},children:(0,Bt.jsx)(Uo,{navigations:Vo,activeTabBar:o,handleScrollToPosition:s})}):null})),Uo=(0,Mt.memo)((function(e){var t=e.navigations,o=e.activeTabBar,i=e.handleScrollToPosition;return console.log("navigations==>",t),(0,Bt.jsx)(_t.View,{className:"navigation_container","data-testid":"navigation-bar",children:Lo.map(t,(function(e,t){return(0,Bt.jsx)(_t.View,{className:"navigation_item",onClick:function(){return i(t)},children:(0,Bt.jsx)(_t.View,{className:t===o?"cur":"",children:e})},t+e)}))})})),Wo=Oo,Xo=Mt.memo((function(e){var t=e.facilityCard,o=jt.useState((function(e){return{hotelBasic:e.hotelBasic}})),i=o.hotelBasic,n=(0,Vt.B)(),a=n.jumpHotelFacilityInfo,r=t||{},s=r.facilityIcons,l=void 0===s?[]:s,c=r.facilityPictures,d=void 0===c?[]:c;return console.log("facilityPictures===>",d,l),l.length+d.length?(0,Bt.jsxs)(_t.View,{className:"faci_facilityView","data-testid":"facility-container",children:[(0,Bt.jsx)(eo,{type:eo.typeIndex.f17,fontWeight:eo.weightIndex.sembold,className:"faci_title",children:"\u8bbe\u65bd"}),null!==d&&void 0!==d&&d.length?(0,Bt.jsx)(_t.ScrollView,{enableFlex:!0,scrollX:!0,className:"faci_pic_box",children:d.map((function(e,t){var o=e.title,i=e.coverUrl;e.pictureCount,e.pictures;return(0,Bt.jsxs)(oo,{className:"fac_pic",children:[(0,Bt.jsx)(_t.Image,{src:i,className:"coverPic"}),(0,Bt.jsx)(eo,{className:"coverPicTxt",children:o})]},t)}))}):null,null!==l&&void 0!==l&&l.length?(0,Bt.jsx)(_t.View,{className:"facilitiesContainer",children:l.map((function(e,t){var o=e.name,i=e.icon;return(0,Bt.jsxs)(_t.View,{className:"facilitySingle",children:[(0,Bt.jsx)(_t.Image,{src:i,className:"facilityIcon"}),(0,Bt.jsx)(eo,{type:eo.typeIndex.f12,color:Wt.gray01,fontWeight:eo.weightIndex.medium,style:{lineHeight:"36rpx"},children:o})]},t)}))}):null,(0,Bt.jsx)(_t.View,{className:"faci_footer",children:(0,Bt.jsx)(oo,{onPress:function(){return a(i)},className:"faci_footerText","data-testid":"all-facility",children:(0,Bt.jsx)(eo,{color:Wt.gray01,type:eo.typeIndex.f13,children:"\u5168\u90e8\u8bbe\u65bd"})})})]}):null})),zo=Xo,Go=o(39680),qo=function(e){var t=Ot.y.navBarHeight,o=Ot.y.statusBarHeight,i=e.title,n=e.scrollTop,a=e.children;return console.log("scrollTop===>",n),n>0?(0,Bt.jsx)(Yo,{navBarHeight:t,statusBarHeight:o,title:i,scrollTop:n,children:a}):(0,Bt.jsx)(Qo,{navBarHeight:t,statusBarHeight:o})},Qo=function(e){var t=e.navBarHeight,o=e.statusBarHeight;return(0,Mt.useEffect)((function(){console.log("Immersed==>"),x().setNavigationBarColor({frontColor:"#ffffff",backgroundColor:""})}),[]),(0,Bt.jsxs)(_t.View,{style:(0,d.Z)((0,d.Z)({},Go.W.navBar),{},{height:t}),children:[(0,Bt.jsx)(_t.View,{style:{height:o}}),(0,Bt.jsx)(_t.View,{style:Go.W.barWrap,children:(0,Bt.jsx)(_t.Text,{style:Go.W.iconBack,onClick:function(){return At().navigateBack()},children:"\ue1a9"})})]})},Yo=function(e){var t=e.navBarHeight,o=e.statusBarHeight,i=e.title,n=e.scrollTop,a=e.children,r=Math.min(n/t,1);return(0,Mt.useEffect)((function(){x().setNavigationBarColor({frontColor:1===r?"#000000":"#ffffff",backgroundColor:""})}),[1===r]),(0,Bt.jsx)(Bt.Fragment,{children:(0,Bt.jsxs)(_t.View,{style:(0,d.Z)((0,d.Z)({},Go.W.navBar),{},{height:t,backgroundColor:"#FFFFFF",opacity:r}),children:[(0,Bt.jsx)(_t.View,{style:{height:o}}),(0,Bt.jsxs)(_t.View,{style:Go.W.barWrap,children:[(0,Bt.jsx)(_t.View,{style:(0,d.Z)((0,d.Z)({},Go.W.iconBack),Go.W.iconBackDark),onClick:function(){return At().navigateBack()},"data-testid":"diy-415088-top-back",children:"\ue1a9"}),(0,Bt.jsx)(_t.View,{style:Go.W.titleWrap,children:(0,Bt.jsx)(_t.Text,{style:Go.W.titleText,"data-testid":"vac_shoppingcart_header",children:i})})]}),a]})})},Ko=null,$o=function(e,t){null===Ko&&(e(),Ko=setTimeout((function(){return Ko=null}),t))},Jo=function(){var e=(0,Mt.useState)(0),t=(0,$e.Z)(e,2),o=t[0],i=t[1],n=(0,Mt.useCallback)((function(e){e<=20?i(e):$o((function(){return i(e)}),100)}),[]),a=(0,Mt.useCallback)((function(e){return console.log("ImmersedNav===>"),(0,Bt.jsx)(qo,(0,d.Z)((0,d.Z)({},e),{},{scrollTop:o}))}),[o]);return{handleScroll:n,ImmersedNav:a}},ei=(jt.useActions,jt.useState),ti=T._,oi=(0,Mt.memo)((function(e){var t=e.diffSign,o=e.price,i=e.diffPrice,n=e.needWeight,a=e.color,r=ei((function(e){return e.showDiffPrice})),s=r&&!t,l=s?Wt.green03:!r&&a||Wt.orangeS;return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsxs)(eo,{color:l,type:eo.typeIndex.f12,style:{lineHeight:"36rpx"},children:[r?t?"+":"-":"","\xa5"]}),(0,Bt.jsx)(eo,{type:eo.typeIndex.f18,color:l,style:{marginRight:"4rpx",lineHeight:"36rpx"},"data-testid":"sub_room_price_detail",fontWeight:n?eo.weightIndex.medium:eo.weightIndex.regular,children:r?i:o})]})})),ii=(0,Mt.memo)((function(e){var t=e.room,o=e.isSimple,i=e.isSubRoom,n=ei((function(e){return e.showDiffPrice})),a=t.priceInfo,r=t.roomToken,s=(!o&&a.totalPkgSave,!o&&!ti.isEmpty(a.discountList)),l=jt.useActions(),c=l.updateMaskFlag,d=a,u=d.dailyPrice,m=d.dailyPriceDiff,h=d.diffSign;return(0,Bt.jsxs)(_t.View,{className:"room_priceConView",children:[(0,Bt.jsx)(_t.View,{children:n?null:(0,Bt.jsx)(eo,{type:eo.typeIndex.f11,color:Wt.gray02,children:Pt.ZP.getShark(P.priceRoomNight.id)})}),(0,Bt.jsxs)(_t.View,{className:"room_priceRow",children:[(0,Bt.jsx)(oi,{diffSign:h,price:u,diffPrice:m,needWeight:!0}),n&&i?null:(0,Bt.jsx)(eo,{type:eo.typeIndex.f11,color:Wt.gray02,style:{marginRight:"4rpx",lineHeight:"18rpx"},children:Pt.ZP.getShark(P.priceFrom.id)}),s?(0,Bt.jsx)(oo,{onPress:function(){c({pricePopMask:r})},hitSlopSize:15,children:(0,Bt.jsx)(Jt,{name:"informationWithCircle",style:{color:Wt.gray03,fontSize:"24rpx",lineHeight:"30rpx"}})}):null]})]})})),ni=(0,Mt.memo)((function(e){var t=e.text;return(0,Bt.jsx)(oo,{className:"chooseView invalidView",children:(0,Bt.jsx)(eo,{type:eo.typeIndex.f12,color:Wt.white,style:{marginHorizontal:"8rpx"},children:t})})})),ai=(0,Mt.memo)((function(e){var t,o=e.room,i=ei((function(e){return e.showDiffPrice})),n=jt.useActions(),a=n.handleSelectRoom,r=(n.showInvalidRoomAlert,Pt.ZP.getShark(P.onlineAtPay.id));null!==(t=o.arrivalLocalTimeInfos)&&void 0!==t&&t.selectdAmountLocal?r=Pt.ZP.getShark(P.guarantee.id):"FG"===o.balanceType&&(r=Pt.ZP.getShark(P.storeAtPay.id));var s=(0,Mt.useContext)(qt),l=(0,Mt.useCallback)(ti.throttle((0,S.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return x().showLoading({title:"\u52a0\u8f7d\u4e2d",mask:!0}),e.next=3,a(o.roomToken);case 3:x().hideLoading();case 4:case"end":return e.stop()}}),e)}))),1e3,{leading:!0,trailing:!1}),[o.roomToken]);if(null!==s&&void 0!==s&&s.invalid)return(0,Bt.jsx)(ni,{text:s.chooseText});var c={height:"58rpx",borderTopLeftRadius:"8rpx",borderTopRightRadius:"8rpx"};return i&&(c.borderBottomLeftRadius="8rpx",c.borderBottomRightRadius="8rpx"),(0,Bt.jsxs)(oo,{className:"room_chooseView linear_gradient_orange",style:c,onPress:l,"data-testid":"choose-button-".concat(o.roomToken),children:[(0,Bt.jsx)(_t.View,{className:"room_chooseLine",children:(0,Bt.jsx)(eo,{type:eo.typeIndex.f13,fontWeight:eo.weightIndex.medium,color:Wt.white,children:Pt.ZP.getShark(P.select.id)})}),i?null:(0,Bt.jsx)(_t.View,{className:"room_payLine","data-testid":"subText_".concat(o.roomToken),children:(0,Bt.jsx)(eo,{type:eo.typeIndex.f10,color:Wt.orangeS,children:r})})]})})),ri=(0,Mt.memo)((function(e){var t=e.room,o=e.isSimple,i=e.isSubRoom;return(0,Bt.jsxs)(_t.View,{className:"room_priceChooseViewView",children:[(0,Bt.jsx)(ii,{room:t,isSimple:o,isSubRoom:i}),(0,Bt.jsx)(ai,{room:t})]})})),si=ri,li=T.classnames;Pt.ZP.init(P);var ci=jt.useState,di=jt.useActions,ui=[],mi=Mt.memo((function(e){var t=e.room,o=e.showSubRooms,i=e.showBaseRoomSelected,n=e.fixedTop,a=e.index,r=t.spic,s=t.baseRoomInfo,l=t.baseRoomId,c=t.roomToken,d=t.roomId,u=t.priceInfo,m=t.baseRoomInfo.baseRoomName,h=void 0===m?"":m,f=di(),p=f.updateMaskFlag,g=f.handleTriggerSubRoom,y=f.updatePageStatus,k=ci((function(e){var t=e.pageStatus,o=t.headerHeight,i=t.filterHeight,n=void 0===i?87:i,a=t.tabHeight;return o+n+a})),v=(0,Mt.useState)(0),T=(0,$e.Z)(v,2),w=(T[0],T[1]),R=((0,Vt.B)(),"js_baseRoom_".concat(l));return(0,Mt.useEffect)((function(){x().nextTick((0,S.Z)((0,b.Z)().mark((function e(){var t,o;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vn("#".concat(R));case 2:t=e.sent,o=t.height||0,ui[a]=o,y({baseRoomHeights:ui}),w(o);case 7:case"end":return e.stop()}}),e)}))))}),[]),(0,Bt.jsx)(Bt.Fragment,{children:(0,Bt.jsxs)(oo,{id:R,"data-testid":"diy-415088-list-picture-".concat(d,"-").concat(u.dailyPrice),className:li("room_baseRoom dn_inner choose_box_top",{base_fixed_top:n}),style:{top:n?k+"px":0},onPress:function(){console.log(c),p({baseRoomMask:c})},children:[i?(0,Bt.jsx)(_t.View,{className:"htl_selected icon_selected"}):null,(0,Bt.jsx)(uo,{spic:r}),(0,Bt.jsxs)(_t.View,{className:"room_baseDes",children:[(0,Bt.jsx)(mo,{roomName:h,needArrow:!0,needCount:!1,isBase:!0}),(0,Bt.jsx)(no,{infos:(null===s||void 0===s?void 0:s.baseTitleForList)||[],color:Wt.gray02}),(0,Bt.jsx)(co,{tags:s.tags||[]})]}),(0,Bt.jsxs)(oo,{className:"room_priceView",onPress:function(){var e=g(l,zt,a);e&&x().pageScrollTo({scrollTop:e.y}),console.log(e)},"data-testid":"diy-415088-hotel-spread-".concat(l),hitSlopSize:10,children:[(0,Bt.jsx)(ii,{room:t,isSimple:!0}),(0,Bt.jsx)(Jt,{name:"arrow-circle",className:"room_arrowIcon "+(o?"up":"down")})]})]})})})),hi=Mt.memo((function(e){var t=e.room,o=ci((function(e){return e.urlQuery})),i=(o.sltroomid,o.sltrateid,o.sltuniquekey),n=t.roomName,a=t.roomToken,r=t.countInfo,s=t.tags,l=t.subTitleForList,c=t.signs,d=t.roomId,u=(t.rateId,t.uniqueKey),m=t.baseRoomInfo.baseRoomName,h=n===m?[]:[{name:n}],f=(0,Vt.B)(),p=di(),g=p.updateMaskFlag,y=p.handleTriggerChooseCountMask,x=(0,Mt.useCallback)((function(){y(t)}),[a]),k=c.signLowBreakfast||r.resetMessage||r.tip,v=String(i)===String(u);return(0,Bt.jsxs)(oo,{className:"room_subRoom","data-testid":"diy-415088-subroom-mask-".concat(d),onPress:function(){try{g({subRoomMask:a})}catch(e){f.recCoreBusinessError({error:e,businessId:"hotelDetail_sub_room",errorFunName:"updateRoomMaskFlag",errorFrom:"hotelDetailRooms",businessAttribute:"business"})}},children:[v?(0,Bt.jsx)(_t.View,{className:"htl_selected icon_selected"}):null,(0,Bt.jsx)(mo,{roomName:l,needArrow:!0,needCount:!0,countInfo:r,onCountChooseClick:x}),(0,Bt.jsx)(no,{infos:h}),(0,Bt.jsxs)(_t.View,{className:"room_box ".concat(k?"boxBottom":"boxTop"),children:[(0,Bt.jsxs)(_t.View,{className:"room_leftView",children:[(0,Bt.jsx)(co,{tags:s}),(0,Bt.jsx)(ro,{signs:c}),c.signLowBreakfast?(0,Bt.jsx)(ho,{text:c.signLowBreakfast.name,color:Wt.orange03}):null,r.resetMessage?(0,Bt.jsx)(ho,{text:r.resetMessage}):null,r.tip?(0,Bt.jsx)(ho,{text:r.tip,color:Wt.orange03}):null]}),(0,Bt.jsx)(si,{room:t,isSubRoom:!0})]})]})})),fi=Mt.memo((function(e){var t=e.rooms,o=e.roomsMap,i=e.invalidRooms,n=e.guaranteeDiff,a=to(),r=a.showMore,s=a.MoreLine,l=5,c=t.length>l,d=r?t.length:l,u=t.slice(0,d),m=di(),h=m.updatePageStatus;return(0,Mt.useEffect)((function(){var e=setTimeout((function(){h({subRoomStatus:!0})}),350);return function(){return clearTimeout(e)}}),[]),(0,Bt.jsxs)(Bt.Fragment,{children:[u.map((function(e){var t=(null===n||void 0===n?void 0:n.roomToken)===e?n:void 0,a=null===i||void 0===i?void 0:i[e];return t&&(a=a||{},a.guaranteeDiff=t),(0,Bt.jsx)(qt.Provider,{value:a,children:(0,Bt.jsx)(_t.View,{children:(0,Bt.jsx)(hi,{room:o[e]})})},e)})),c?(0,Bt.jsx)(s,{className:"room_moreBtnView",size:"big",text:Pt.ZP.getShark(P.viewRest.id,[t.length-d])}):null]})})),pi=[],gi=Mt.memo((function(e){var t=e.showSubRooms,o=(e.filterHeight,e.rooms),i=e.roomsMap,n=e.invalidRooms,a=e.guaranteeDiff,r=e.index,s=e.isLast,l=e.isTour,c=(e.tabHeight,e.fixedTop),u=e.unfoldBaseRooms,m=ci((function(e){return e.pageStatus.subRoomStatus})),h=ci((function(e){return e.pageStatus.moreBtnStatus})),f=di(),p=(f.updateBaseRoomTops,f.getBaseRoomTops,f.getBaseRoom),g=f.updatePageStatus,y=p(i,o,l),x=(ci((function(e){return e.pageStatus.unSticky})),(0,Mt.useState)(0)),k=(0,$e.Z)(x,2),v=(k[0],k[1],ci((function(e){return e.urlQuery}))),T=v.sltroomid,w=Number(T)===y.roomId,R="js_single_room_".concat(r);return(0,Mt.useEffect)((function(){var e,t=setTimeout((0,S.Z)((0,b.Z)().mark((function t(){var o,i;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vn("#".concat(R));case 2:o=t.sent,i=o.top+o.scrollTop,pi[r]=i,0===r&&(e=setTimeout((function(){o.top&&g({baseRoomTops:pi})}),300));case 6:case"end":return t.stop()}}),t)}))),16);return function(){clearTimeout(t),clearTimeout(e)}}),[m,h,u]),(0,Bt.jsxs)(_t.View,{id:R,className:"htl_rooms",style:(0,d.Z)({backgroundColor:Wt.gray09},s?{zIndex:1}:{}),children:[(0,Bt.jsx)(mi,{fixedTop:c,index:r,room:y,showSubRooms:t,showBaseRoomSelected:w&&!t}),t?(0,Bt.jsx)(fi,{rooms:o,roomsMap:i,invalidRooms:n,guaranteeDiff:a}):null,!s&&(0,Bt.jsx)(_t.View,{style:{height:"16rpx",backgroundColor:Wt.gray09}})]})})),yi=(0,Mt.memo)((function(){var e=ci((function(e){var t=e.groupRooms,o=e.baseRoomIds,i=e.roomsMap,n=e.unfoldBaseRooms,a=e.invalidRooms,r=e.pageStatus,s=e.guaranteeDiff,l=e.isTour;return{groupRooms:t,baseRoomIds:o,roomsMap:i,unfoldBaseRooms:n,invalidRooms:a,fixedRoomIndex:r.fixedRoomIndex,filterHeight:r.filterHeight,tabHeight:r.tabHeight,guaranteeDiff:s,isTour:l}})),t=e.groupRooms,o=e.baseRoomIds,i=e.roomsMap,n=e.unfoldBaseRooms,a=e.invalidRooms,r=e.fixedRoomIndex,s=e.filterHeight,l=e.tabHeight,c=e.guaranteeDiff,d=e.isTour,u=(0,Mt.useState)(!0),m=(0,$e.Z)(u,2),h=m[0],f=m[1];(0,Mt.useEffect)((function(){f(!1)}),[]);var p=h?o.slice(0,1):o;return(0,Bt.jsxs)(_t.View,{"data-testid":"vac_shoppingcart_hotel_hoteldetail_roomlist",children:[(0,Bt.jsx)(_t.View,{style:{height:"16rpx",backgroundColor:"#eeeeee"}}),p.map((function(e,u){var m=t[e],h=null===n||void 0===n?void 0:n[e],f=n[e]&&u===r;return(0,Bt.jsx)(gi,{fixedTop:f,unfoldBaseRooms:n,index:u,isLast:u===o.length-1,guaranteeDiff:c,rooms:m,filterHeight:s,showSubRooms:h,roomsMap:i,invalidRooms:a,isTour:d,tabHeight:l},e)}))]})})),xi=yi,ki=T.moment,vi=(T._,T.classnames),bi=(jt.useActions,jt.useState);Pt.ZP.init(P);var Si=(0,Mt.memo)((function(){var e=bi((function(e){return e.hotelBasic})),t=bi((function(e){return e.selectFilters})),o=bi((function(e){return e.filters})),i=bi((function(e){return e.urlQuery})),n=bi((function(e){return e.positionInfo.filter})),a=bi((function(e){return e.unfoldBaseRooms})),r=bi((function(e){return e.pageStatus.moreBtnStatus})),s=e.checkInDate,l=e.checkOutDate,c=bi((function(e){return{filterHeight:e.pageStatus.filterHeight,fixedTop:e.pageStatus.showFixedFilters,headerHeight:e.pageStatus.headerHeight,tabHeight:e.pageStatus.tabHeight}})),d=c.filterHeight,u=c.fixedTop,m=c.headerHeight,h=c.tabHeight,f=jt.useActions(),p=f.updatePageStatus,g=f.updatePositionInfo;return(0,Mt.useEffect)((function(){x().nextTick((0,S.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vn("#js_htl_filter_container");case 2:t=e.sent,t.height&&(t.height===d||p({filterHeight:t.height}));case 4:case"end":return e.stop()}}),e)}))))}),[]),(0,Mt.useEffect)((function(){var e=setTimeout((0,S.Z)((0,b.Z)().mark((function e(){var t,o;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vn("#js_htl_filter");case 2:t=e.sent,o=t.top+t.scrollTop,o===n||g({filter:o});case 5:case"end":return e.stop()}}),e)}))),350);return function(){return clearTimeout(e)}}),[r,a]),(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(_t.View,{style:{width:"100%",height:"8px",backgroundColor:"#eeeeee"}}),(0,Bt.jsx)(_t.View,{id:"js_htl_filter"}),(0,Bt.jsxs)(_t.View,{className:vi("filter-container",{filter_fixed_top:u}),style:{top:u?m+h+"px":0},id:"js_htl_filter_container",children:[(0,Bt.jsxs)(_t.View,{className:"filter-base-line",children:[(0,Bt.jsx)(wi,{checkInDate:s,checkOutDate:l}),(0,Bt.jsx)(_t.View,{className:"filter-vertical-line"}),(0,Bt.jsx)(ji,{urlQuery:i})]}),o.length?(0,Bt.jsx)(Ii,{selectFilters:t,filters:o}):null]})]})})),Ti=Si,wi=(0,Mt.memo)((function(e){var t=e.checkInDate,o=e.checkOutDate,i=ki(t),n=ki(o),a=i.format("M\u6708D\u65e5"),r=n.format("M\u6708D\u65e5"),s=Ri(t),l=Ri(o),c=Pt.ZP.getShark(P.confirmNight.id,[n.diff(i,"days")]);return(0,Bt.jsxs)(_t.View,{className:"htl-line filter-data-info-view",children:[(0,Bt.jsx)(Ci,{date:a,dateSub:s}),(0,Bt.jsx)(_t.View,{className:"filter-diff-day",children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"10px",color:"#333333"},children:c})}),(0,Bt.jsx)(Ci,{date:r,dateSub:l})]})})),Ri=function(e){var t=ki().format("YYYY-MM-DD"),o=ki().add(1,"days").format("YYYY-MM-DD"),i=ki().add(2,"days").format("YYYY-MM-DD");switch(e){case t:return Pt.ZP.getShark(P.today.id);case o:return Pt.ZP.getShark(P.tomorrow.id);case i:return Pt.ZP.getShark(P.tdat.id);default:return ki(e).format("ddd")}},Ci=(0,Mt.memo)((function(e){var t=e.date,o=void 0===t?"":t,i=e.dateSub,n=void 0===i?"":i;return(0,Bt.jsxs)(_t.View,{className:"filter-date-row",children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"14px",color:"#333333",fontWeight:700},children:o}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#333333",fontWeight:400},children:n})]})})),ji=(0,Mt.memo)((function(e){var t=e.urlQuery,o=t.adult,i=void 0===o?2:o,n=t.child,a=void 0===n?0:n,r=t.infant,s=void 0===r?0:r,l=function(e,t){return(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#333333",fontWeight:700,marginRight:"4px"},children:Pt.ZP.getShark(e,[(0,Bt.jsx)(_t.Text,{style:{fontSize:"14px",fontWeight:700},children:t},e)])})};return(0,Bt.jsxs)(_t.View,{className:"htl-line filter-passenger-view",children:[l(P.xAdult.id,i),l(P.xChild.id,Number(a)+Number(s))]})})),Ii=Mt.memo((function(e){var t=e.filters,o=e.selectFilters,i=jt.useActions(),n=i.handleSelectFilter;return(0,Bt.jsx)(_t.ScrollView,{scrollX:!0,children:(0,Bt.jsxs)(_t.View,{className:"filter-quick-view",children:[t.map((function(e,t){var i=o[e.type]?"#0086F6":"#EEF1F6",a=o[e.type]?"#ffffff":"#333333";return(0,Bt.jsx)(_t.View,{"data-testid":"diy-415088-list-quick-".concat(e.filterName),className:"filter-quick-item",style:{backgroundColor:i},onClick:function(){n(e)},children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:a,fontWeight:400},children:e.filterName})},e.type)})),(0,Bt.jsx)(_t.View,{style:{display:"inline-block",width:"12px",height:"1px"},children:"\xa0"})]})})})),Zi={full:1,taller:.94,tall:.8,middle:.6,short:.4},Pi=function(e){var t=(0,Mt.useRef)(null),o=(0,Mt.useRef)(null),i=(0,Mt.useState)(0),n=(0,$e.Z)(i,2),a=n[0],r=n[1],s=x().getSystemInfoSync().windowHeight,l=(0,Mt.useState)(!0),c=(0,$e.Z)(l,2),u=c[0],m=c[1],h=e.renderTitle,f=e.topChildren,p=e.height,g=void 0===p?"taller":p,y=e.handleClose,k=e.submit,v=e.handleScroll,T=e.scrollTop,w=e.scrollIntoView,R=e.setTabIndex,C=void 0===R?function(){}:R,j=e.listName,I=void 0===j?[]:j,Z=e.testId,P=void 0===Z?"":Z,M=e.closeTestId,_=void 0===M?"":M,F="full"===g;(0,Mt.useEffect)((function(){setTimeout((function(){var e=x().createSelectorQuery();e.select("#JS-popup").boundingClientRect().exec((function(e){B()}))}),300)}),[]);var B=function(){var e=(0,S.Z)((0,b.Z)().mark((function e(){var o,i;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=[],i=0,I.map(function(){var e=(0,S.Z)((0,b.Z)().mark((function e(t,n){var a,r;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D("#".concat(t));case 2:a=e.sent,r=a.top,0===n&&(i=r),console.log("TOP=".concat(n),r-i),o.push(r-i);case 7:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}()),t.current=o;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){return new Promise((function(t){x().createSelectorQuery().select(e).boundingClientRect().exec((function(e){var o=e[0],i=o.top,n=o.height;t({top:i,height:n})}))}))},E=function(e){var i=e&&e.detail&&e.detail.scrollTop||0;console.log("scrollTop=",i),t.current&&Array.isArray(t.current)&&(o.current||(o.current=setTimeout((function(){o.current=null,N(i)}),16))),null===v||void 0===v||v(e)},N=function(e){for(var o=t.current,i=0;i<=o.length-2;i++){var n=i+1;if(e>=o[i]&&e<o[n]&&a!==i){r(i),null===C||void 0===C||C(i);break}if(i===o.length-2&&e>=o[n]&&a!==n){r(n),null===C||void 0===C||C(n);break}}},H=function(e){e.stopPropagation(),m(!1),null===y||void 0===y||y()},L=F?{borderRadius:0}:{},A=F?{maxHeight:"100%",minHeight:"100%"}:{};return u?(0,Bt.jsxs)(_t.View,{catchMove:!0,style:{height:s},"data-testid":P,className:"'shoppingcart-popup-wrapper '".concat(e.className?e.className:""),children:[(0,Bt.jsx)(_t.View,{className:"shoppingcart-popup-mask","data-testid":_,onClick:function(e){return H(e)}}),(0,Bt.jsxs)(_t.View,{className:"shoppingcart-popup-box fadeInUp",style:(0,d.Z)((0,d.Z)({},A),L),children:[(0,Bt.jsxs)(_t.View,{className:"shoppingcart-popup-head",style:L,children:[(0,Bt.jsx)(_t.View,{className:"shoppingcart-popup-icon icon shoppingcart-icon-close",onClick:function(e){H(e)}}),h||(0,Bt.jsx)(_t.View,{className:"shoppingcart-popup-title",children:e.title}),k?(0,Bt.jsx)(_t.View,{className:"shoppingcart-popup-submit",onClick:function(e){k.func(),H(e)},children:k.name}):null]}),f,(0,Bt.jsx)(_t.ScrollView,{id:"JS-popup",className:"shoppingcart-popup-content",style:{height:s*Zi[null===e||void 0===e?void 0:e.height]-45},scrollY:!0,onScroll:function(e){return E(e)},scrollTop:T,scrollIntoView:w,scrollWithAnimation:!0,refresherThreshold:16,children:e.children})]})]}):null},Mi=Pi,_i=jt.useActions,Fi=(0,Mt.memo)((function(e){var t=e.maskRoomCountMap,o=e.countInfo,i=e.roomToken,n=_i(),a=n.updateMaskFlag,r=n.handleTriggerChooseCountMask,s=n.handleChooseCount,l=((0,Vt.B)(),(0,Mt.useCallback)((function(e){s(e),a({chooseCountMask:void 0})}),[])),c=[o.maxQuantityTips,o.quantityTips].filter(Boolean).map((function(e){return{message:e}})),d=function(){switch(t.status){case _.RoomPriceCalculate_Empty:case _.RoomPriceCalculate_Error:return(0,Bt.jsx)(Et,{errorType:t.status,callback:function(){r()}});case M.SUCCESS:return(0,Bt.jsxs)(Bt.Fragment,{children:[c.length>0?(0,Bt.jsx)(_t.View,{style:{marginLeft:"18px"}},"head"):null,t.list.map((function(e,o){var n=t.curCount===e.count,a=n?"#0086F6":"#333333";return(0,Bt.jsxs)(oo,{onPress:function(){l(e.count)},"data-testid":"diy-415088-count-choose-".concat(i,"-").concat(e.count),className:"count-single-line",children:[(0,Bt.jsxs)(_t.Text,{style:{fontWeight:400,color:a},children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"14px",marginRight:"6px"},children:Pt.ZP.getShark(P.numberRoom.id,[e.count])}),(0,Bt.jsx)(_t.Text,{style:{fontSize:"16px",lineHeight:"20px"},children:Pt.ZP.getShark(P.totalPriceMoney.id,[(0,Bt.jsx)(oi,{diffSign:e.diffSign,price:e.totalPrice,diffPrice:e.diffPrice,color:a},"price")])})]}),n?(0,Bt.jsx)(Jt,{name:"check",testId:"checkIcon",style:{fontSize:"16px",color:a}}):null]},o)}))]});case M.PENDING:default:return(0,Bt.jsx)(Nt,{})}};return(0,Bt.jsx)(Mi,{title:Pt.ZP.getShark(P.chooseRoomCount.id),testId:"koala_pop",closeTestId:"koala_pop_close",handleClose:function(){return a({chooseCountMask:void 0})},height:"short",children:(0,Bt.jsx)(_t.View,{className:"count-container",children:d()})})})),Bi=Fi,Di=(T._,jt.useActions),Ei=jt.useState,Ni=Mt.memo((function(e){var t=e.room,o=e.onHide,i=e.hideBottom,n=e.invalidInfo,a=e.opts,r=void 0===a?{}:a;return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Ft.HotelSubRoomMask,{testId:"HotelSubRoomMask",popUpTestId:"koala_pop",closeTestId:"koala_pop_close",room:t,onHide:o,opts:r,hideBottom:i}),i?null:(0,Bt.jsx)(qt.Provider,{value:n,children:(0,Bt.jsx)(Hi,{room:t})})]})})),Hi=(0,Mt.memo)((function(e){var t=e.room,o=(0,Mt.useContext)(qt),i=t.roomToken,n=t.priceInfo,a=t.countInfo,r=Di(),s=r.handleTriggerChooseCountMask,l=(0,Mt.useCallback)((function(){s(t)}),[i]);return(0,Bt.jsxs)(_t.View,{style:{zIndex:9999,position:"fixed",bottom:0,right:0,left:0},"data-testid":"SubRoomMaskBottom",children:[n.totalPkgSave>0?(0,Bt.jsx)(_t.View,{className:"room-mask-bottom-pkg",children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#FFFFFF",fontWeight:700},children:Pt.ZP.getShark(P.extraPkgSave.id,[Pt.ZP.numberFormat.currencyString(String(n.totalPkgSave))])})}):null,(0,Bt.jsxs)(_t.View,{className:"room-mask-bottom-box",children:[null!==o&&void 0!==o&&o.invalid?(0,Bt.jsx)(_t.View,{}):(0,Bt.jsxs)(_t.View,{className:"htl-line",children:[(0,Bt.jsx)(_t.Text,{style:{fontSize:"12px",color:"#666666",marginRight:"8px"},children:Pt.ZP.getShark(P.nowChoose.id)}),(0,Bt.jsx)(io,{countInfo:a,onCountChooseClick:l})]}),(0,Bt.jsx)(si,{room:t,isSimple:!0})]}),(0,Bt.jsx)(_t.View,{style:{height:"10px",backgroundColor:"#FFFFFF"}})]})})),Li=(0,Mt.memo)((function(e){var t=e.baseRoomInfo,o=e.roomCounts,i=t.baseRoomId,n=void 0===i?0:i,a=Ei((function(e){return{headerHeight:e.pageStatus.headerHeight,filterHeight:e.pageStatus.filterHeight,tabHeight:e.pageStatus.tabHeight,baseRoomTop:e.pageStatus.baseRoomTops[e.baseRoomIds.findIndex((function(e){return e===n}))]}})),r=a.headerHeight,s=a.filterHeight,l=a.tabHeight,c=a.baseRoomTop,d=Di(),u=d.updateMaskFlag,m=d.showUnfoldBaseRooms,h=(d.getBaseRoomTops,(0,Vt.B)(),function(e){var t={y:c-r-s-l,animated:!0};t&&x().pageScrollTo({scrollTop:t.y})}),f=(0,Mt.useCallback)((function(){u({baseRoomMask:void 0}),m(n),h(n)}),[n]);return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Ft.HotelBaseRoomMask,{baseRoom:t,onHide:function(){return u({baseRoomMask:void 0})},hideBottom:!1}),(0,Bt.jsx)(Ai,{text:"\u67e5\u770b\u5168\u90e8".concat(o,"\u4e2a\u4ef7\u683c"),callback:f})]})})),Ai=(0,Mt.memo)((function(e){var t=e.text,o=e.callback;return(0,Bt.jsx)(_t.View,{style:{zIndex:9999,position:"fixed",bottom:0,right:0,left:0},children:(0,Bt.jsxs)(_t.View,{className:"room-mask-bottom-box",children:[(0,Bt.jsx)(_t.View,{className:"linear_gradient_orange baseroom-mask-button",onClick:o,children:t}),(0,Bt.jsx)(_t.View,{style:{height:"10px",backgroundColor:"#FFFFFF"}})]})})})),Vi=function(e){var t=e.children,o=e.renderBottom,i=e.onHide;return(0,Bt.jsxs)(_t.View,{children:[(0,Bt.jsxs)(_t.View,{className:"dp_pop_box",children:[(0,Bt.jsx)(_t.View,{className:"pop_bd",children:t}),o&&o()]}),(0,Bt.jsx)(_t.View,{className:"pop_mask",onClick:function(){i&&i()}})]})},Oi=(T._,function(e){var t=function(e,t){return e?(0,Bt.jsx)(_t.View,{className:"pop_foot flexbox",onClick:function(){t&&t()},children:(0,Bt.jsx)(_t.Text,{className:"pop_btn",children:e})}):null},o=e.data,i=e.callback,n=o.title,a=o.button;return(0,Bt.jsx)(Vi,{renderBottom:function(){return t(a,i)},children:(0,Bt.jsx)(_t.View,{className:"pro_pop_tit",children:n})})}),Ui=Oi,Wi=x().getSystemInfoSync().windowWidth;console.log(Wi,"device width");var Xi={basicInfo:{margin:"0 12px",marginTop:170,padding:12,backgroundColor:"white",borderRadius:8},addressLine:{margin:"8px 12px",padding:12,backgroundColor:"white",borderRadius:8},bothEndsLine:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",backgroundColor:"white"},tagLine:{paddingBottom:8,borderBottomColor:"#eee",borderBottomWidth:.5},scoreLine:{paddingTop:9},filterInfo:{backgroundColor:"white",padding:"16px 0",paddingLeft:12},dateLine:{paddingRight:12},filterLine:{width:"110%",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-around",marginTop:14,marginLeft:-3},childLine:{marginTop:8,paddingTop:8,paddingRight:12,width:"100%",borderTopColor:"#eee",borderTopWidth:.5},roomContainer:{marginTop:8},basicRoom:{padding:12,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"white"},basicRoomLeft:{display:"flex",flexDirection:"row"},basicRoomMiddle:{marginLeft:8,height:82,display:"flex",flexDirection:"column",justifyContent:"space-between"},subRoom:{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"white",margin:"0 12px",marginTop:8,borderRadius:8,padding:12,height:129},subRoomLeft:{display:"flex",flexDirection:"column",justifyContent:"space-between"},subRoomRight:{display:"flex",flexDirection:"column",justifyContent:"space-between"},subRoomCount:{display:"flex",flexDirection:"row",alignSelf:"flex-end"},subRoomPriceContainer:{display:"flex",flexDirection:"row",alignItems:"center"},subRoomPrice:{marginRight:8}},zi=function(e){var t=e.btnStyle,o=void 0===t?null:t;return(0,Bt.jsx)(_t.View,{style:(0,d.Z)({height:30,backgroundColor:"#EEE",borderRadius:4},o)})},Gi=function(e){var t=e.isRoom,o=void 0!==t&&t,i=(jt.useState((function(e){var t=null===e||void 0===e?void 0:e.urlQuery,o=t.imgurl,i=t.imgUrl,n=void 0===i?o:i;return n})),jt.useState((function(e){var t=null===e||void 0===e?void 0:e.urlQuery,o=t.child,i=t.infant;return Number(o)+Number(i)})));return(0,Bt.jsxs)(_t.View,{style:{height:"100%",marginTop:o?8:0},children:[o?null:(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Yi,{}),(0,Bt.jsx)(Qi,{extendStyle:Xi.addressLine,leftSize:[100]})]}),(0,Bt.jsx)($i,{hasChild:i}),(0,Bt.jsx)(an,{})]})},qi=function(e){var t=e.size,o=e.extendStyle,i=void 0===o?{}:o,n=(0,$e.Z)(t,2),a=n[0],r=n[1],s=void 0===r?"auto":r;return(0,Bt.jsx)(_t.View,{style:(0,d.Z)({width:a,height:s,backgroundColor:"#EEEEEE",borderRadius:2},i)})},Qi=function(e){var t=e.extendStyle,o=void 0===t?{}:t,i=e.leftSize,n=void 0===i?[]:i,a=e.rightSize,r=void 0===a?[]:a,s=(0,$e.Z)(n,2),l=s[0],c=void 0===l?220:l,u=s[1],m=void 0===u?15:u,h=(0,$e.Z)(r,2),f=h[0],p=void 0===f?75:f,g=h[1],y=void 0===g?15:g;return(0,Bt.jsxs)(_t.View,{style:(0,d.Z)((0,d.Z)({},Xi.bothEndsLine),o),children:[(0,Bt.jsx)(qi,{size:[c,m]}),(0,Bt.jsx)(qi,{size:[p,y]})]})},Yi=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.basicInfo,children:[(0,Bt.jsx)(qi,{size:[130,21]}),(0,Bt.jsx)(qi,{size:[160,15],extendStyle:{margin:"8px 0"}}),(0,Bt.jsx)(Qi,{extendStyle:Xi.tagLine,leftSize:[240,11]}),(0,Bt.jsx)(Qi,{extendStyle:Xi.scoreLine,leftSize:[88,22],rightSize:[90]})]})},Ki=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.filterLine,children:[(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}}),(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}}),(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}}),(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}}),(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}}),(0,Bt.jsx)(zi,{btnStyle:{width:"15%"}})]})},$i=function(e){var t=e.hasChild;return(0,Bt.jsxs)(_t.View,{style:Xi.filterInfo,children:[(0,Bt.jsx)(Qi,{extendStyle:Xi.dateLine,leftSize:[230,18],rightSize:[100,18]}),(0,Bt.jsx)(Ki,{}),t?(0,Bt.jsx)(Qi,{extendStyle:Xi.childLine,leftSize:[100,18],rightSize:[100,18]}):null]})},Ji=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.basicRoomMiddle,children:[(0,Bt.jsx)(qi,{size:[110,18]}),(0,Bt.jsx)(qi,{size:[125,15]}),(0,Bt.jsx)(qi,{size:[50,14]})]})},en=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.basicRoom,children:[(0,Bt.jsxs)(_t.View,{style:Xi.basicRoomLeft,children:[(0,Bt.jsx)(qi,{size:[82,82]}),(0,Bt.jsx)(Ji,{})]}),(0,Bt.jsx)(qi,{size:[60,36]})]})},tn=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.subRoomLeft,children:[(0,Bt.jsx)(qi,{size:[220,18]}),(0,Bt.jsx)(qi,{size:[85,15]}),(0,Bt.jsx)(qi,{size:[130,15]}),(0,Bt.jsx)(qi,{size:[60,14]}),(0,Bt.jsx)(qi,{size:[80,15]})]})},on=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.subRoomRight,children:[(0,Bt.jsx)(qi,{size:[44,18],extendStyle:Xi.subRoomCount}),(0,Bt.jsxs)(_t.View,{style:Xi.subRoomPriceContainer,children:[(0,Bt.jsx)(qi,{size:[60,36],extendStyle:Xi.subRoomPrice}),(0,Bt.jsx)(qi,{size:[44,44]})]})]})},nn=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.subRoom,children:[(0,Bt.jsx)(tn,{}),(0,Bt.jsx)(on,{})]})},an=function(){return(0,Bt.jsxs)(_t.View,{style:Xi.roomContainer,children:[(0,Bt.jsx)(en,{}),(0,Bt.jsx)(nn,{}),(0,Bt.jsx)(nn,{})]})},rn=Mt.memo(Gi),sn=function(e){var t=e.questions,o=e.hotelId,i=(0,Vt.B)(),n=i.jumpHotelAskCard;return null!==t&&void 0!==t&&t.length?(0,Bt.jsxs)(_t.View,{className:"htl_ask_card",children:[(0,Bt.jsx)(_t.View,{className:"header",children:(0,Bt.jsx)(_t.Text,{className:"headerTxt",children:"\u7591\u95ee\u89e3\u7b54"})}),(0,Bt.jsxs)(_t.View,{className:"body",children:[(0,Bt.jsx)(_t.View,{className:"bodyHeader",children:(0,Bt.jsx)(_t.Text,{className:"bodyHeaderTxt",children:"\u95ee\u5927\u5bb6"})}),(0,Bt.jsx)(_t.View,{className:"questionBox",children:t.map((function(e,t){var o=e.question,i=e.answer;return(0,Bt.jsxs)(_t.View,{className:"questionBody",children:[(0,Bt.jsx)(_t.Text,{className:"questionTxt",children:o}),(0,Bt.jsx)(_t.Text,{className:"answerTxt",children:i})]},t)}))})]}),(0,Bt.jsx)(_t.View,{className:"footer",children:(0,Bt.jsx)(_t.View,{className:"button",onClick:function(){return n(o)},children:(0,Bt.jsx)(_t.Text,{style:{fontSize:"13px"},children:"\u5168\u90e8\u7528\u6237\u56de\u7b54"})})})]}):null},ln=(0,Mt.memo)(sn),cn=x().getSystemInfoSync().windowWidth,dn=(0,Mt.memo)((function(e){var t=e.pic,o=(0,Mt.useState)(0),i=(0,$e.Z)(o,2),n=i[0],a=i[1];return(0,Bt.jsx)(_t.Image,{src:t,mode:n?"scaleToFill":"widthFix",onLoad:function(e){var t=e.detail,o=t.height;a(Number(o))},style:{marginTop:"-10rpx",width:"100%",height:n}})})),un=(0,Mt.memo)((function(e){var t=e.sellPointPics,o=(0,Mt.useState)(!1),i=(0,$e.Z)(o,2),n=i[0],a=i[1];return null!==t&&void 0!==t&&t.length?(0,Bt.jsxs)(_t.View,{className:"htl_sell_card",children:[(0,Bt.jsx)(_t.View,{className:"header",children:(0,Bt.jsx)(_t.Text,{className:"headerTxt",children:"\u9152\u5e97\u5356\u70b9"})}),(0,Bt.jsx)(_t.View,{className:"picContainer",style:(0,d.Z)({},n?{}:{height:cn,borderBottomLeftRadius:0,borderBottomRightRadius:0}),children:t.map((function(e,t){return(0,Bt.jsx)(dn,{pic:e},t)}))}),160*t.length>cn+44?(0,Bt.jsxs)(oo,{className:"footer",onPress:function(){return a(!n)},children:[(0,Bt.jsx)(_t.Text,{className:"footerTxt",children:n?"\u6536\u8d77":"\u5c55\u5f00\u5168\u90e8"}),(0,Bt.jsx)(_t.Text,{className:"icons-".concat(n?"arrow2Top":"arrow2Bottom"),style:{color:"#111"}})]}):null]}):null})),mn=un,hn=function(e){var t=e.callback;return(0,Bt.jsxs)(_t.View,{className:"htl_error_page",children:[(0,Bt.jsx)(_t.View,{className:"htl_search_failure_pic",children:(0,Bt.jsx)(_t.Image,{src:"http://pic.c-ctrip.com/VacationH5Pic/taocan/dp2/koala_pub_error.png"})}),(0,Bt.jsx)(_t.View,{className:"htl_search_warnText",children:(0,Bt.jsx)(_t.Text,{children:"\u62b1\u6b49\uff0c\u8be5\u9152\u5e97\u5df2\u5931\u6548"})}),(0,Bt.jsx)(_t.View,{className:"htl_search_subWarnText",children:(0,Bt.jsx)(_t.Text,{children:"\u8bf7\u9009\u62e9\u5176\u4ed6\u9152\u5e97\u9884\u8ba2"})}),(0,Bt.jsx)(_t.View,{className:"return_button",onClick:function(){return t()},children:(0,Bt.jsx)(_t.Text,{children:"\u8fd4\u56de"})})]})},fn=(0,Mt.memo)(hn),pn=T._;Pt.ZP.init(P);var gn,yn,xn=jt.useActions,kn=jt.useState,vn=function(e){return new Promise((function(t){var o=x().createSelectorQuery();o.select(e).boundingClientRect(),o.selectViewport().scrollOffset();try{o.exec((function(e){t((0,d.Z)((0,d.Z)({},e[0]),e[1]))}))}catch(e){console.log(e)}}))},bn=(0,Mt.memo)((function(e){var t=e.setExternalProps,o=e.scrollToModule,i=(0,Vt.B)(),n=xn(),a=kn((function(e){var t;return null===(t=e.pageStatus)||void 0===t?void 0:t.hotelStatus})),r=(kn((function(e){var t;return null===(t=e.pageStatus)||void 0===t?void 0:t.showIconLoading})),kn((function(e){return e.maskFlag}))),s=kn((function(e){return e.roomsMap})),l=kn((function(e){return e.groupRooms})),c=kn((function(e){return e.alertInfo})),u=kn((function(e){return e.roomCountMap})),m=kn((function(e){return e.invalidRooms})),h=(kn((function(e){return e.isTour})),kn((function(e){return e.positionInfo})),kn((function(e){var t;return null===(t=e.urlQuery)||void 0===t?void 0:t.orderid})),kn((function(e){return e.hotelBasic}))),f=kn((function(e){return(0,d.Z)({},e.hotelBasicDelay||{})})),p=f.facilityCard,g=f.questions,y=f.sellPointPics,x=pn.get(s,"".concat(r.baseRoomMask,".baseRoomInfo")),k=pn.get(l,"".concat(null===x||void 0===x?void 0:x.baseRoomId),[]).length,v=(pn.get(s,"".concat(r.guaranteeMask)),pn.get(s,"".concat(r.subRoomMask))),b=(pn.get(s,"".concat(r.pricePopMask)),pn.get(s,"".concat(r.chooseCountMask))),S=null===r||void 0===r?void 0:r.showRelated,T=(0,Mt.useState)(0),w=(0,$e.Z)(T,2);w[0],w[1];(0,Mt.useEffect)((function(){t("handleScrollWithComputeInH5",n.handleScrollWithComputeInH5)}),[]);var R=Ot.y.navBarHeight;switch((0,Mt.useEffect)((function(){n.updatePageStatus({headerHeight:R})}),[R]),a){case _.HotelBasic_Error:case _.HotelBasic_Empty:return(0,Bt.jsx)(Et,{errorType:a,callback:function(){n.initHotelDetail()}});case _.HotelBasic_Failure:return(0,Bt.jsx)(fn,{callback:function(){At().navigateBack()}});case M.SUCCESS:case M.PENDING:default:return(0,Bt.jsxs)(Bt.Fragment,{children:[a===M.SUCCESS?(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Tn,{setExternalProps:t,scrollToModule:o}),(0,Bt.jsx)(wo,{}),(0,Bt.jsx)(wn,{}),(0,Bt.jsx)(Mo,{}),(0,Bt.jsx)(ln,{questions:g,hotelId:null===h||void 0===h?void 0:h.hotelId}),(0,Bt.jsx)(mn,{sellPointPics:y}),(0,Bt.jsx)(zo,{facilityCard:p}),(0,Bt.jsx)(Rn,{})]}):(0,Bt.jsx)(rn,{}),v?(0,Bt.jsx)(Ni,{room:v,onHide:function(){return n.updateMaskFlag({subRoomMask:void 0})},invalidInfo:m[v.roomToken],hideBottom:!!S,opts:{ctrl:i}}):null,r.chooseCountMask?(0,Bt.jsx)(Bi,{roomToken:r.chooseCountMask,maskRoomCountMap:u[r.chooseCountMask],countInfo:b.countInfo}):null,x?(0,Bt.jsx)(Li,{baseRoomInfo:x,roomCounts:k}):null,null!==c&&void 0!==c&&c.showAlert?(0,Bt.jsx)(Ui,{data:{title:null===c||void 0===c?void 0:c.titleText,button:null===c||void 0===c?void 0:c.buttonText},callback:n.hideInvalidRoomAlert}):null]})}})),Sn=bn,Tn=(0,Mt.memo)((function(e){var t=e.setExternalProps,o=e.scrollToModule,i=kn((function(e){var t;return null===(t=e.hotelBasic)||void 0===t?void 0:t.hotelName})),n=Jo(),a=n.ImmersedNav,r=n.handleScroll;return(0,Mt.useEffect)((function(){t("navHandleScroll",r)}),[]),(0,Bt.jsx)(a,{title:i||Pt.ZP.getShark(P.hotelDetailTitle.id),children:(0,Bt.jsx)(Wo,{handleScroll:o})})})),wn=(0,Mt.memo)((function(){var e=kn((function(e){var t=e.selectFilters,o=e.filters,i=e.pageStatus,n=e.guessLikeRoomToken,a=e.hotelBasic,r=e.urlQuery,s=e.roomsMap,l=e.invalidRooms,c=e.positionInfo;return{selectFilters:t,filters:o,roomStatus:i.roomStatus,guessLikeRoomToken:n,hotelBasic:a,urlQuery:r,roomsMap:s,invalidRooms:l,positionInfo:c}})),t=(e.selectFilters,e.filters,e.guessLikeRoomToken,e.hotelBasic,e.urlQuery),o=(e.roomsMap,e.invalidRooms,e.positionInfo,e.roomStatus),i=xn(),n=i.initHotelDetail;null!==t&&void 0!==t&&t.child&&(null===t||void 0===t||t.child);switch(o){case _.RoomList_Empty:case _.RoomList_Search_Empty:return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Ti,{}),(0,Bt.jsx)(Et,{errorType:o})]});case _.RoomList_Error:return(0,Bt.jsx)(Et,{errorType:o,callback:function(){return n()}});case M.HIDE:return null;case M.SUCCESS:return(0,Bt.jsxs)(Bt.Fragment,{children:[(0,Bt.jsx)(Ti,{}),(0,Bt.jsx)(xi,{})]});case M.PENDING:default:return(0,Bt.jsx)(rn,{isRoom:!0})}})),Rn=(0,Mt.memo)((function(){var e=kn((function(e){return{subRoomStatus:e.pageStatus.subRoomStatus,moreBtnStatus:e.pageStatus.moreBtnStatus}})),t=e.subRoomStatus,o=e.moreBtnStatus,i=kn((function(e){return e.positionInfo}))||{},n=kn((function(e){return e.unfoldBaseRooms})),a=kn((function(e){return e.hotelBasic}))||{},r=kn((function(e){return e.policy})),s=(0,Vt.B)(),l=xn(),c=l.updatePositionInfo;return(0,Mt.useEffect)((function(){var e=setTimeout((0,S.Z)((0,b.Z)().mark((function t(){var o,n;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vn("#js_policy_and_facility");case 2:o=t.sent,n=o.top+o.scrollTop||i.reading||0,n&&(c({reading:n}),clearTimeout(e));case 5:case"end":return t.stop()}}),t)}))),500);return function(){return clearTimeout(e)}}),[t,o,n]),(0,Bt.jsxs)(_t.View,{id:"js_policy_and_facility","data-testid":"bottom-view",children:[(0,Bt.jsx)(_t.View,{style:{height:"10px",backgroundColor:"#eeeeee"}}),(0,Bt.jsx)(Ft.HotelPolicyAndNotice,{policy:r,showOuter:!0,outerNotice:!0,onClickNotice:function(){s.jumpHotelFacilityInfo(a)},onClickPolicy:function(){s.jumpHotelFacilityInfo(a)},testID:"hotel-policy-and-notice"})]})})),Cn=(0,Mt.memo)((function(e){var t=e.setExternalProps,o=e.scrollToModule,i=jt.useActions(),n=i.initHotelDetail;return(0,Mt.useEffect)((function(){n()}),[]),(0,Bt.jsx)(_t.View,{id:"HotelDetail","data-testid":"hotel-detail-scroll-view",style:{backgroundColor:"#eeeeee",minHeight:"100vh"},children:(0,Bt.jsx)(Ht,{initPage:n,children:(0,Bt.jsx)(Sn,{setExternalProps:t,scrollToModule:o})})})})),jn=Cn,In=o(4309),Zn=T.PureModel,Pn=T.MODEL_CONTEXT,Mn=T._,_n=(gn=Zn({hotelDetailModel:jt}),gn(yn=function(e){(0,f.Z)(o,e);var t=(0,p.Z)(o);function o(e){var i;return(0,u.Z)(this,o),i=t.call(this,e),(0,g.Z)((0,h.Z)(i),"pageId",415088),(0,g.Z)((0,h.Z)(i),Pn,(0,d.Z)((0,d.Z)((0,d.Z)({},i[Pn]),w.G1.impl({SharkUtil:Pt.ZP})),Ke.Iy.impl({}))),(0,g.Z)((0,h.Z)(i),"jumpHotelFacilityInfo",(function(e){var t=e.hotelId;console.log("\u8df3\u8f6c\u4e3b\u5c0f\u7a0b\u5e8f"),i.jumpXCMainPage("pages/hotel/detail/sellingpoint/index?id=".concat(t,"&rivettab=facility-policy"))})),(0,g.Z)((0,h.Z)(i),"jumpCommentVotes",(function(e){console.log("jumpCommentVotes");var t=e.hotelId,o=e.hotelName;e.isAbroad,e.cityId;i.jumpXCMainPage("pages/hotel/newcomment/index?id=".concat(t,"&hotelName=").concat(o,"&biz=1"))})),(0,g.Z)((0,h.Z)(i),"jumpHotelMap",(function(e){var t=e.hotelName,o=e.lat,n=e.lon,a=e.address,r=e.hotelId,s=e.isAbroad,l=(e.cityId,e.poiType),c=s?2:1,d=Fn(s,r,"map");i.jumpH5(d,{hotelName:t,hotelId:r,addressText:a,type:c,poiType:l,pos:"".concat(o,",").concat(n)},{needDomain:!1})})),(0,g.Z)((0,h.Z)(i),"jumpMorePictures",(function(e){var t=e.hotelId,o=e.hotelName;e.isAbroad;i.jumpXCMainPage("pages/hotel/detail/photolist/index?hotelid=".concat(t,"&hotelname=").concat(o,"&biz=1"))})),(0,g.Z)((0,h.Z)(i),"jumpHotelAskCard",(function(e){i.jumpH5("https://m.ctrip.com/webapp/you/hotelasks/".concat(e,".html"),void 0,{needDomain:!1})})),(0,g.Z)((0,h.Z)(i),"externalProps",{}),(0,g.Z)((0,h.Z)(i),"scrollTopNumber",0),(0,g.Z)((0,h.Z)(i),"handleScroll",Mn.debounce((function(e){var t,o,n,a;null===(t=(o=i.externalProps)["navHandleScroll"])||void 0===t||t.call(o,e.scrollTop),null===(n=(a=i.externalProps)["handleScrollWithComputeInH5"])||void 0===n||n.call(a,e.scrollTop),i.scrollTopNumber=e.scrollTop}),16)),(0,g.Z)((0,h.Z)(i),"scrollToModule",(function(e,t){console.log("scrollToModule");var o=x().createSelectorQuery();o.select("#".concat(e)).boundingClientRect((function(e){if(e){var o=i.scrollTopNumber+e.top-t+1;x().pageScrollTo({scrollTop:o})}})).exec()})),(0,g.Z)((0,h.Z)(i),"setExternalProps",(function(e,t){i.externalProps[e]=t})),(0,g.Z)((0,h.Z)(i),"handleDevTraceLog",(function(e,t){var o=X[e],n=(0,d.Z)((0,d.Z)({},o),t);i.devTracelog("km_tour_trace_log",n)})),i.state={hideHeader:!0},i}return(0,m.Z)(o,[{key:"onPageScroll",value:function(e){this.handleScroll(e)}},{key:"render",value:function(){return(0,Bt.jsx)(In.Z.Provider,{value:this,children:(0,Bt.jsx)(jn,{setExternalProps:this.setExternalProps,scrollToModule:this.scrollToModule})})}}]),o}(Zt.Z))||yn),Fn=function(e,t,o){return"https://m.ctrip.com/webapp/hotel/".concat(e?"oversea/":"","hoteldetail/").concat(o,"/").concat(t,".html")},Bn={navigationStyle:"custom",backgroundColor:"#eeeeee",backgroundTextStyle:"light"};Page((0,c.createPageConfig)(_n,"pages/shoppingcarthotel/hotel/hotelDetail/index",{root:{cn:[]}},Bn||{}))},7843:function(e,t,o){e.exports=o.p+"pages/shoppingcarthotel/hotel/hotelDetail/components/pic_none750x400.png"},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../cwx/cwx")},46346:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[7420,2107,1216,8592],(function(){return t(45643)}));e.O()}]);
//# sourceMappingURL=index.js.map