(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[2655],{32253:function(e,t,n){"use strict";var r=n(93212),o=(n(91780),n(32180)["window"]);function a(){return(new o.Date).getTime()}function i(e){var t=(0,r.Z)(e);return null!=e&&("object"==t||"function"==t)}function c(e){if("number"==typeof e)return e;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}return"string"==typeof e?+e:NAN}var s="Expected a function",u=Math.max,l=Math.min;function f(e,t,n){var r,o,f,d,p,h,g=0,v=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError(s);function b(t){var n=r,a=o;return r=o=void 0,g=t,d=e.apply(a,n),d}function w(e){return g=e,p=setTimeout(S,t),v?b(e):d}function x(e){var n=e-h,r=e-g,o=t-n;return m?l(o,f-r):o}function k(e){var n=e-h,r=e-g;return void 0===h||n>=t||n<0||m&&r>=f}function S(){var e=a();if(k(e))return C(e);p=setTimeout(S,x(e))}function C(e){return p=void 0,y&&r?b(e):(r=o=void 0,d)}function T(){void 0!==p&&clearTimeout(p),g=0,r=h=o=p=void 0}function P(){return void 0===p?d:C(a())}function E(){var e=a(),n=k(e);if(r=arguments,o=this,h=e,n){if(void 0===p)return w(h);if(m)return p=setTimeout(S,t),b(h)}return void 0===p&&(p=setTimeout(S,t)),d}return t=c(t)||0,i(n)&&(v=!!n.leading,m="maxWait"in n,f=m?u(c(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),E.cancel=T,E.flush=P,E}t["Z"]=f},26875:function(e,t,n){"use strict";n.d(t,{_:function(){return o._},z4:function(){return o.__global},Y8:function(){return o.cwx},N$:function(){return a.Pservice},cg:function(){return c.a},Pz:function(){return u.a},fz:function(){return f.a},WE:function(){return p.a},cQ:function(){return g.a},oG:function(){return m.a},zB:function(){return b.a},fd:function(){return x.a},rQ:function(){return S.a},Ke:function(){return T.a},Oh:function(){return P.TaskScheduler},u4:function(){return E.createEventManager},uM:function(){return L.a}});var r=n(91780),o=(n(57798),n(33675)),a=(n(39270),n(95524)),i=n(3609),c=n.n(i),s=n(44750),u=n.n(s),l=n(76678),f=n.n(l),d=n(23600),p=n.n(d),h=n(84231),g=n.n(h),v=n(93850),m=n.n(v),y=n(93125),b=n.n(y),w=n(91525),x=n.n(w),k=n(23946),S=n.n(k),C=n(93935),T=n.n(C),P=n(13044),E=n(87809),_=n(57897),L=n.n(_);n(62408);a.Pservice.setWrap(r.wrapOpt),c().setLoginFunc((0,r.wrapLogin)(o.cwx.user.login))},14020:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});n(91780);function r(e){var t=e.selectX,n=e.detail,r=n||{},o=r.serviceChargeInfo,a=r.fromCity,i=r.toCity,c=r.fromStation,s=r.toStationShow,u={fromName:a,toName:i},l={fromName:c,toName:s},f="0",d=[],p=[],h=[];if(o&&o.price&&d.push({name:"serviceFee",price:o.price}),t){var g=t.type,v=t.attachPackages,m=t.payShowPrice;f=t.channelId;var y=function(e){var t=e.pkgType,n=e.price;"insurance"===t?d.push({name:"insurance",price:n}):"fiveMin"===t&&d.push({name:"fiveMinute",price:n})};"group"===g?v&&v.forEach((function(e){var t=e.showPrice,n=e.extraMap,r=e.packageCode,o=n||{},a=o.packageType;y({pkgType:a,price:t}),exclusionProductList.includes(a)&&(p.push(r),0===e.showPrice&&h.push(a))})):y({pkgType:g,price:m})}return{couponParams:{products:d,city:u,station:l,level:1},channelId:f,exclusionPackageCode:p,exclusionProducts:h}}},46097:function(e,t,n){"use strict";n.d(t,{Sj:function(){return v},em:function(){return p},gW:function(){return g},NG:function(){return f}});var r=n(22276),o=n(298),a=(n(91780),n(26875)),i=n(22937);function c(e){if(e.extraInfo=e.extraMap||{},e.extraInfo){var t=e.extraInfo,n=t.member,r=t.grade,o=t.newGuest,a=t.ali,i=t.marketing;o&&o.quality?(e.extraInfo.newGuestQuality=o.quality,e.extraInfo.newGuestPackageCode=o.packageCode,e.extraInfo.displayQuality=o.quality):(n&&n.quality&&(e.extraInfo.memberQuality=n.quality,e.extraInfo.memberPackageCode=n.packageCode),r&&r.quality&&(e.extraInfo.gradeQuality=r.quality,e.extraInfo.gradePackageCode=r.packageCode),a&&a.quality&&(e.extraInfo.aliQuality=a.quality,e.extraInfo.aliPackageCode=a.packageCode),i&&i.quality&&(e.extraInfo.marketingQuality=i.quality,e.extraInfo.marketingPackageCode=i.packageCode),e.extraInfo.displayQuality=(e.extraInfo.gradeQuality||0)+(e.extraInfo.memberQuality||0)+(e.extraInfo.aliQuality||0)+(e.extraInfo.marketingQuality||0))}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.type||"").toLowerCase(),n=(e.extraMap.packageType||"").toLowerCase();return t.indexOf("insurance")>=0||n.indexOf("insurance")>=0}function u(e,t,n){e&&"x_original"!==e.channelName&&(e.excludeTicketPrice=e.showPriceAndServerFee||e.excludeTicketPrice),e.originalImage="https://pages.c-ctrip.com/bus-resource/busxcx/X-test-icon/icon-%E6%99%AE%E9%80%9A%E8%B4%AD%E7%A5%A8.png";var r=e||{},o=r.extraMap,i=void 0===o?{}:o,u=r.type,l=r.attachPackages,f=r.tags,d=(f||[]).map((function(e){return{icon:"",id:a.cQ.randomString(8),tagList:[{text:e.key},{text:e.value,highLight:!0}]}})),p=i||{},h=p.extraInfo,g=p.modalTags,v=p.xTags,m=p.fwbProductImage,y=p.fwbName,b=p.fwbSubTitle,w=p.fwbExtraInfo,x=p.fwbDesc;try{v=v?JSON.parse(v):[],g=g?JSON.parse(g):[]}catch(e){v=[],g=[]}var k=a.cQ.formatHighLight(h),S=v&&v.map((function(e){var t=a.cQ.formatHighLight(e.value);return{icon:"Y"===e.key?"icon-yes":"icon-no",id:a.cQ.randomString(8),tagList:t}})),C=g&&g.map((function(e){var t=a.cQ.formatHighLight(e.value);return{icon:"Y"===e.key?"icon-yes":"icon-no",id:a.cQ.randomString(8),tagList:t}})),T=[];"group"===u&&(l&&l.forEach((function(e){var t=e||{},n=t.extraMap,r=t.title,o=n||{},a=o.fwbProductImage,i=o.fwbSubTitle,c=o.fwbDesc,s=o.fwbExtraInfo,u=o.packageType;a&&r&&"allRound"!==u&&T.push({productImage:a,productTitle:r,productSubTitle:i,productExtraInfo:s,productDesc:c?JSON.parse(c):[]})})),T.push({productImage:m,productTitle:y,productSubTitle:b,productExtraInfo:w,productDesc:x?JSON.parse(x):[]})),e.extraMap&&e.extraMap.channelType&&(e.recommendTitle=e.extraMap.channelType),e.iconImageSrc="https://pic.c-ctrip.com/bus/resource/list/icon_".concat(e.type||"original",".png");var P=e.priceDetails&&e.priceDetails.reduce((function(e,t){return e+t.price}),0);e.xListSavePrice=P,e.tagList=d,e.xTagList=S,e.modalTagList=C,e.bannerTag=k,e.productList=T,e.isInsurance=s(e),t&&(e.xPosition=t),n&&(e.channelId=n),c(e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"book",n=arguments.length>2?arguments[2]:void 0;return(e||[]).forEach((function(e){u(e,t,n)})),e}function f(e){var t={},n=e.xlist||[],r=e.extend||{},o=r.xListShowNum,a=r.maxCouponPrice,i=r.serviceFee;return o&&(t.xListShowNum=o||5),a&&a>0&&(t.maxCouponPrice=a),t.serviceFee=i||0,t.xList=l(n,"list"),t.hasX=t.xList.length>0,t}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bus",r=null,a=0;e.forEach((function(e,t){e.tagList&&e.tagList.length>a&&(a=e.tagList.length)}));var c=new Array(a).fill(0).map((function(e,t){return t})),s=[{id:0,channelId:"0",packageCode:"0",tag:"",title:"\u65e0\u4fdd\u969c",packageName:"\u65e0\u4fdd\u969c",payShowPrice:0,selected:!0,tagList:[],showTagsLength:c,extraMap:r}];return e.forEach((function(e,r){var a,u=e.extraMap,l=u||{},f=l.insuranceLink,d=void 0===f?"":f;if(d)try{a=JSON.parse(d)}catch(t){a=(0,i.Z)(e,n)}else a=(0,i.Z)(e,n);s.push((0,o.Z)((0,o.Z)({},e),{},{channelId:t,id:e.packageCode+"_"+r,localClause:a,showTagsLength:c}))})),s}function p(e,t){var n=e||{},r=n.channelId,o=n.attachPackages,a=n.channelMainTitle,i=n.channelSubTitle,c=n.channelDesc,s=void 0===c?"\u672c\u6a21\u5757\u4e3a\u6295\u4fdd\u9875\u9762\uff0c\u7531\u643a\u7a0b\u4fdd\u9669\u4ee3\u7406\u6709\u9650\u516c\u53f8\u7ba1\u7406\u5e76\u8fd0\u8425\u3002\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u6295\u4fdd\u987b\u77e5\u7b49\u5185\u5bb9\uff0c\u5e76\u77e5\u6653\u627f\u4fdd\u4fdd\u9669\u516c\u53f8\u548c\u4ea7\u54c1\u6761\u6b3e\u5185\u5bb9\u3002\u4e3a\u786e\u4fdd\u60a8\u7684\u6295\u4fdd\u6743\u76ca\uff0c\u60a8\u7684\u6295\u4fdd\u4fe1\u606f\u8f68\u8ff9\u5c06\u88ab\u8bb0\u5f55\u3002":c,u=h(d(l(o,"book",null===t||void 0===t?void 0:t.channelId),null===t||void 0===t?void 0:t.channelId),t);return e?{insuranceChannelId:r,insuranceChannelMainTitle:a,insuranceChannelSubTitle:i,insuranceChannelDesc:s,insuranceList:u}:{insuranceChannelId:"0",insuranceChannelMainTitle:"",insuranceChannelSubTitle:"",insuranceChannelDesc:"",insuranceList:[]}}function h(e,t){var n="0";return t&&t.isInsurance&&0!=t.packageCode&&(n=t.packageCode),e.forEach((function(e){e.packageCode===n||e.defaultOpen||e.packageCode===(t&&t.packageCode)?e.selected=!0:e.selected=!1})),e}function g(e,t){var n,o=e.tollUpgradePriv||e.freeUpgradePriv||e.easyRefund||{},a=h((0,r.Z)(l((null===(n=e.easyRefund)||void 0===n?void 0:n.attachPackages)||[],"book",null===t||void 0===t?void 0:t.channelId)),t),i=o.channelMainTitle,c=o.channelSubTitle;return{salePackageList:a,salePackageChannelMainTitle:i,salePackageChannelSubTitle:c}}function v(e,t){return l(e||[],"book",null===t||void 0===t?void 0:t.channelId)}},28612:function(e,t,n){"use strict";n.d(t,{IQ:function(){return o},Cq:function(){return a},_$:function(){return i},Vn:function(){return c},Cu:function(){return s},bX:function(){return l},ZP:function(){return p}});var r=n(298);n(91780);function o(e){return 1===e}function a(e){return 2===e}function i(e,t){return t&&"1"===t.busType||e.isWayStation}function c(e){return e.transferPorts&&e.transferPorts.length>0}function s(e){return!!e.overNight}function u(e){var t=e.extraData;if(t){var n=t.businessType;return 4===n}return!1}function l(e){var t=e.extraData;if(t){var n=t.businessType;return 0===n||1===n||4===n}return!1}function f(e){var t=e.extraData;if(t){var n=t.businessType;return 1===n}return!1}function d(e){var t=e.length;return e.map((function(e,n){var o="";1===e.stationType&&(o="\u4e0a\u8f66\u70b9"),2===e.stationType&&(o="\u4e0b\u8f66\u70b9"),n===t-1&&(o="\u7ec8\u70b9\u7ad9"),0===n&&(o="\u59cb\u53d1\u7ad9");var a=0===n||n===t-1,i=!!(e.flag||e.stationType&&a||e.stationType),c=(0,r.Z)({},e);return c.stationTip=o,c.isActivity=i,c}))}function p(e){var t=e.shiftType,n=e.shiftTypeDesc,r=e.passStationList,p=e.busLineTypeInfo,h=e.overNightDesc,g=e.transferDesc,v=e.fromTimeDesc,m=[];if(o(t)?m.push({title:"\u6d41\u6c34\u73ed",desc:n||v||"\u591a\u73ed\u6b21\u6eda\u52a8\u53d1\u8f66\uff0c\u6bcf\u73ed\u95f4\u9694\u4e00\u6bb5\u65f6\u95f4\u53d1\u8f66/\u5750\u6ee1\u53d1\u8f66"}):a(t)&&m.push({title:"\u52a0\u73ed\u8f66",desc:"\u8be5\u73ed\u6b21\u4e3a\u8282\u5047\u65e5\u5ba2\u6d41\u8f83\u5927\u65f6\uff0c\u8f66\u7ad9\u4e34\u65f6\u52a0\u5f00\u7684\u73ed\u6b21\u3002\u52a0\u73ed\u8f66\u9000\u6539\u7b7e\u89c4\u5219\u8bf7\u4ee5\u8f66\u7ad9\u5b9e\u9645\u516c\u793a\u4e3a\u51c6"}),i(e,p)?m.push({title:"\u8fc7\u8def\u8f66",desc:"\u4ee5\u4e0b\u4fe1\u606f\u4ec5\u4f9b\u53c2\u8003\uff0c\u4ee5\u5b9e\u9645\u884c\u8f66\u8def\u7ebf\u4e3a\u51c6\u3002\u9014\u5f84\u4e0a\u4e0b\u8f66\u70b9\u53ef\u80fd\u4e0d\u5728\u8f66\u7ad9\u5185\uff0c\u90e8\u5206\u73ed\u6b21\u5728\u670d\u52a1\u533a\u4e0b\u8f66",passStationList:d(r)}):c(e)&&m.push({title:"\u4e2d\u8f6c\u8f66",desc:g||"\u4e2d\u8f6c\u63d0\u9192\uff1a\u672c\u6b21\u884c\u7a0b\u9700\u5728\u4e2d\u9014\u4e0b\u8f66\u540e\u6362\u4e58\u8f66\u8f86\u3002"}),s(e)&&m.push({title:"\u8fc7\u591c\u8f66",desc:h}),m.length>0&&(u(e)||f(e)||l(e))){var y=e.extraData,b=y.businessTypeName;y.fromTimeType,y.isMergePackage;m=[{title:b,desc:"\u4e13\u7ebf\u7279\u8272\uff1a\u63d0\u4f9b\u76f4\u8fbe\u673a\u573a\u6216\u666f\u533a\u7ebf\u8def\uff0c\u5176\u4ed6\u8de8\u57ce\u7ebf\u8def\u53ef\u542b\u514d\u8d39\u4e0a\u95e8\u63a5\u9001\u3001\u591a\u4e0a\u4e0b\u8f66\u70b9\u3001\u5347\u7ea7\u8c6a\u534e\u8f66\u578b\u7b49\u670d\u52a1\u3002"}].concat(m)}return m}},22937:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});n(91780);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bus";if("ship"===t)return{leftClause:[{title:"\u6295\u4fdd\u987b\u77e5",key:"insuranceNotice",url:e.descUrl},{title:"\u514d\u8d23\u8bf4\u660e",key:"disclaimer",url:"https://pages.c-ctrip.com/bus-resource/SHIP_insurance/insuranceclause/%E5%85%8D%E8%B4%A3%E8%AF%B4%E6%98%8E.html"},{title:"\u4fdd\u9669\u6761\u6b3e",key:"insurancePolicy",url:"https://pages.c-ctrip.com/bus-resource/SHIP_insurance/insuranceclause/%E4%BF%9D%E9%99%A9%E6%9D%A1%E6%AC%BE.html"},{title:"\u88ab\u4fdd\u9669\u4eba\u540c\u610f\u58f0\u660e",key:"insuranrantAgreeNote",url:"https://pages.c-ctrip.com/bus-resource/SHIP_insurance/Customer-notification/%E8%A2%AB%E4%BF%9D%E9%99%A9%E4%BA%BA%E5%90%8C%E6%84%8F%E5%A3%B0%E6%98%8E.pdf"}],rightClause:[{title:"\u4e2a\u4eba\u4fe1\u606f\u4fdd\u62a4\u653f\u7b56",key:"privacyPolicy",url:"https://pages.c-ctrip.com/bus-resource/SHIP_insurance/Customer-notification/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96.pdf"},{title:"\u5ba2\u6237\u544a\u77e5\u4e66",url:"https://pages.c-ctrip.com/bus-resource/SHIP_insurance/Customer-notification/%E5%AE%A2%E6%88%B7%E5%91%8A%E7%9F%A5%E4%B9%A6.pdf",key:"userNotification"}]};var n=e.title,r=n.indexOf("\u57fa\u7840")>-1;return{leftClause:[{title:"\u6295\u4fdd\u987b\u77e5",key:"insuranceNotice",url:e.descUrl},{title:"\u514d\u8d23\u8bf4\u660e",key:"disclaimer",url:r?"https://pages.c-ctrip.com/bus-images/busapp/%E6%B3%B0%E5%BA%B7.html":"https://pages.c-ctrip.com/bus-images/busapp/%E5%85%8D%E8%B4%A3%E8%AF%B4%E6%98%8E.html"},{title:"\u4fdd\u9669\u6761\u6b3e",key:"insurancePolicy",url:r?"https://pages.c-ctrip.com/bus-images/busapp/%E6%B3%B0%E5%BA%B7%E6%9D%A1%E6%AC%BE.html":"https://pages.c-ctrip.com/bus-images/busapp/%E4%BC%97%E5%AE%89%E4%BF%9D%E9%99%A9%E6%9D%A1%E6%AC%BE.html"},{title:"\u88ab\u4fdd\u9669\u4eba\u540c\u610f\u58f0\u660e",key:"insuranrantAgreeNote",url:"https://pages.c-ctrip.com/bus-images/busapp/%E8%A2%AB%E4%BF%9D%E9%99%A9%E4%BA%BA%E5%90%8C%E6%84%8F%E5%A3%B0%E6%98%8E.html"}],rightClause:[{title:"\u4e2a\u4eba\u4fe1\u606f\u4fdd\u62a4\u653f\u7b56",key:"privacyPolicy",url:"https://pages.c-ctrip.com/bus-images/busapp/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96.html"},{title:"\u5ba2\u6237\u544a\u77e5\u4e66",url:"https://pages.c-ctrip.com/bus-images/busapp/%E5%AE%A2%E6%88%B7%E5%91%8A%E7%9F%A5%E4%B9%A6.pdf",key:"userNotification"}]}}},20132:function(e,t,n){"use strict";n.d(t,{Do:function(){return d},hk:function(){return u},nE:function(){return p},tR:function(){return c}});n(91780);var r=n(298),o=n(26875);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{_choosetime:e.selected&&e._choosetime||e.updateTimeStamp})}));return t=o._.sortBy(t,(function(e){return-e._choosetime})),t}var i=n(32180)["window"];var c=function(e){if(!e||e.length<=0)return!1;var t=e.toLowerCase().match(/\w/g);if(e.match(/^\d{17}[\dx]$/i)){for(var n=0,r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=0;o<17;o++)n+=parseInt(t[o],10)*r[o];return"10x98765432".charAt(n%11)===t[17]&&!!e.replace(/^\d{6}(\d{4})(\d{2})(\d{2}).+$/,"$1-$2-$3")}return!!e.match(/^\d{15}$/)&&!!e.replace(/^\d{6}(\d{2})(\d{2})(\d{2}).+$/,"19$1-$2-$3")},s=function(e){return/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(e)},u=function(e){if(!e||e.length<=0)return"";var t=e.substring(6,12),n=t.substring(0,4),r=t.substring(4,6),o=t.substring(6);return"".concat(n,"-").concat(r,"-").concat(o)},l=function(e){if(!s(e))return-1;var t,n=u(e),r=n.split("-"),o=r[0],a=r[1],c=r[2],l=new i.Date,f=l.getFullYear(),d=l.getMonth()+1,p=l.getDate();if(f===o)t=0;else{var h=f-o;if(h>0)if(d===a){var g=p-c;t=g<0?h-1:h}else{var v=d-a;t=v<0?h-1:h}else t=-1}return t-0},f=function(e){if(!e)return-1;var t,n=e.split("-"),r=n[0],o=n[1],a=n[2],c=new i.Date,s=c.getFullYear(),u=c.getMonth()+1,l=c.getDate();if(s===r)t=0;else{var f=s-r;if(f>0)if(u===o){var d=l-a;t=d<0?f-1:f}else{var p=u-o;t=p<0?f-1:f}else t=-1}return t-0};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0,r=0,o=0,i=0,c=!1;e.forEach((function(e){if(e.idcards&&e.idcards.length>0||(e.selected=!1),e.selected){if(t.push(e),e.birthday){var a=f(e.birthday);a>=18&&(c=!0)}else e.commonPassengerCardList&&e.commonPassengerCardList.forEach((function(e){if("1"===e.cardType){var t=l(e.cardNo);t>=18&&(c=!0)}}));e.isChildTicket?r+=1:e.isTakeChildTicket?o+=1:n+=1,e.child&&(i+=1)}}));var s=t.filter((function(e){return e.isRealnamePassenger})),u=s.length>0?reaNamePassengners[0]:void 0,d=a(e);return{realNamePassenger:u,passengerList:d,allPassengerList:e,selPassengerList:t,childCount:r,takeChildCount:o,childIdCardCount:i,adultCount:n,isHasAdult:c}}function p(e,t){var n=t.isSaleChildTicket,r=t.isSaleTakeChildTicket,o=function(){var t=e&&e.filter((function(e){return!(!n&&"C"===e.passengerType)&&!(!r&&"T"===e.passengerType)}));return e&&t.length>2?t.length:2}();return o}},1772:function(e,t,n){"use strict";n.d(t,{Z:function(){return _e},J:function(){return Ee}});var r=n(298),o=n(57042),a=n(24460),i=n(21867),c=n(86066),s=n(45023),u=n(91780),l=(n(90201),n(81876)),f=n(65542),d=n(92954),p=n(26875),h=[];(0,u.initCoffeebeanTaro)({path:"pages/bus/taro/",code:"CB43b4a2245a14563ea2c1337123d1aa76",bizCode:"BUS",orderid:0,requestConfig:{getRootID:function(e,t){try{if("string"===typeof t.data.data&&h.some((function(t){return e.indexOf(t)>-1}))){var n=JSON.parse(t.data.data);return n.msgID?n.msgID:""}}catch(e){return""}}}},{cwx:p.Y8});var g=p.Pz.pageId,v=p.uM.getExposeData,m=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,l.Z)(r),"pageQuery",{}),(0,s.Z)((0,l.Z)(r),"routerInfo",void 0),(0,s.Z)((0,l.Z)(r),"_pageId_","");var a=(0,d.getCurrentInstance)(),i=a.router;return console.log(i),r.pageQuery=i.params,r.routerInfo=i,r.autoExpose=2,r.exposeThreshold=.5,r.exposeDuration=1e3,r.__page.autoExpose=2,r.__page.exposeThreshold=.5,r.__page.exposeDuration=1e3,r.getExposeData=v.bind((0,l.Z)(r)),r.checkPerformance=!0,u.trackPage&&(0,u.trackPage)(),(0,u.trackInitData)("cwxBus",p.Y8.bus,(function(e){p.Y8.bus=e})),console.log("token-----",(0,u.getToken)()),r}return(0,a.Z)(n,[{key:"pageId",get:function(){return this._pageId_||(this._pageId_=g(this.__page)),this._pageId_}},{key:"getPageId",value:function(){return this.pageId}}]),n}(f.Z),y=n(71515),b=n(79301),w=n(95308),x=p.Ke.create("BUS_BOOK_INPUT",!1,u.wrapCWXStorage),k={PARENT_INFO:"PARENT_INFO",BUS_PHONE_NUMBER:"BUS_PHONE_NUMBER",SELECTED_PASSENGERS:"PSG_S"},S={getSelectedPassengers:function(){var e=x.get(k.SELECTED_PASSENGERS);return e&&e.length>0?e:[]},storeSelectedPassengers:function(e){return x.set(k.SELECTED_PASSENGERS,e)},getStoredPhoneNumber:function(){var e=x.get(k.BUS_PHONE_NUMBER);return e&&e.length>0?e:""},storePhoneNumber:function(e){x.set(k.BUS_PHONE_NUMBER,e)},getParentInfo:function(){var e=x.get(k.PARENT_INFO);return e&&e.parentName?e:{}},storeParentInfo:function(e){x.set(k.PARENT_INFO,e)}},C=S;function T(){return new Promise((function(e,t){var n=C.getStoredPhoneNumber();if(!n)return p.N$.coffeeBeanWrap(p.N$.getBindedPhoneNumber)().then((function(t){e(t)})).catch((function(t){e("")}));e(n)}))}function P(e){return p.N$.coffeeBeanWrap(p.N$.getServiceFeeExplain)({website:e}).then((function(e){return e.data})).catch((function(e){return{}}))}function E(){var e={busDetail:{},savePrice:0,totalPrice:0,totalOriginPrice:0,priceList:[],priceTicket:[],priceSale:[],priceDeCount:[],phoneNumber:"",policyHolder:{parentName:"",parentIdNumber:""},showPriceDetail:!1,showConfirmChildInfo:!1,confirmChildInfo:!1,confirmChildInfoMessage:"",enableBackupLine:!1};return e}var _={state:E(),effects:function(e){return{getBusDetail:function(t){return(0,w.Z)((0,b.Z)().mark((function n(){return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",p.fz.getBusDetail(t).then((function(t){return t&&e["bookParams"].update({busDetail:t}),t})));case 1:case"end":return n.stop()}}),n)})))()},getServiceFeeExplain:function(e,t){return(0,w.Z)((0,b.Z)().mark((function e(){var n,r,o,a;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t["bookParams"],a=(null===o||void 0===o||null===(n=o.busDetail)||void 0===n||null===(n=n.detail)||void 0===n||null===(n=n.tempFields)||void 0===n?void 0:n.website)||(null===o||void 0===o||null===(r=o.busDetail)||void 0===r||null===(r=r.detail)||void 0===r||null===(r=r.tempFields)||void 0===r?void 0:r.webiste),e.abrupt("return",P(a));case 3:case"end":return e.stop()}}),e)})))()},getStoredPhoneNumber:function(){return(0,w.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",T().then((function(t){return e["bookParams"].update({phoneNumber:t}),t})));case 1:case"end":return t.stop()}}),t)})))()},storePhoneNumber:function(e,t){var n=t["bookParams"],r=n.phoneNumber;C.storePhoneNumber(r)},storeParentInfo:function(e,t){var n=t["bookParams"],r=n.policyHolder;C.storeParentInfo(r)},getParentInfo:function(){return C.getParentInfo()},setParentInfo:function(t){return(0,w.Z)((0,b.Z)().mark((function n(){var r,o,a;return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.idCardNo,o=t.name,a={parentName:o,parentIdNumber:r},n.next=4,e["bookParams"].update({policyHolder:a});case 4:return n.next=6,e["bookParams"].storeParentInfo(a);case 6:case"end":return n.stop()}}),n)})))()}}},reducers:{clear:function(){return E()},update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)},unselectInsurance:function(e){var t=e.busDetail,n=t.selectX;n&&n.isInsurance&&(n.cancel=!0)},showConfirmChildInfo:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{showConfirmChildInfo:!0,confirmChildInfoMessage:t})},toggleCheckConfirmChildInfo:function(e){return(0,r.Z)((0,r.Z)({},e),{},{confirmChildInfo:!e.confirmChildInfo})},toggleXPackageSelected:function(e){var t=e.busDetail,n=t.selectX;n&&(n.selected=!n.selected)},toggleShowPriceDetail:function(e){return(0,r.Z)((0,r.Z)({},e),{},{showPriceDetail:!e.showPriceDetail})},toggleBackupLine:function(e){return(0,r.Z)((0,r.Z)({},e),{},{enableBackupLine:!e.enableBackupLine})}}},L=n(32180)["window"],I=(0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},"1","\u8eab\u4efd\u8bc1"),"2","\u62a4\u7167"),"7","\u56de\u4e61\u8bc1"),"8","\u53f0\u80de\u8bc1"),"4","\u519b\u5b98\u8bc1");function N(e){return"C"===(e.passengerType||"A").toUpperCase()}function O(e){return"T"===(e.passengerType||"A").toUpperCase()||"TC"===(e.passengerType||"A").toUpperCase()||"X"===(e.passengerType||"A").toUpperCase()}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u8eab\u4efd\u8bc1",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n||(n=e.updateTimeStamp?e.updateTimeStamp:(new L.Date).getTime()),e.passengerType=e.passengerType||"A";var o=[];(e.commonPassengerCardList||[]).forEach((function(e){"1"===e.cardType?e.no=(e.cardNo||"").replace(/^(\d{4})(.{11})(\w{3})/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1]).concat(t[2].replace(/./g,"*")).concat(t[3])})):"2"===e.cardType?e.no=(e.cardNo||"").replace(/^(\w{1})(.*)/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1]).concat(t[2].replace(/./g,"*"))})):e.no=e.cardNo||"",e.text=I[e.cardType],e.type=e.cardType,t.indexOf(e.text)>=0&&e.cardNo&&I[e.cardType]&&o.push(e)})),o=o.sort((function(e,t){return e.cardType<t.cardType?-1:0}));var a=o;if(!e.confirmType||"1"!==e.confirmType&&"2"!==e.confirmType)for(var i=e.commonPassengerCardList,c=void 0===i?[]:i,s=0;s<c.length;s++){var u=c[s];if(u.cardType&&u.cardNo){e.confirmType=u.cardType;break}}r&&t.indexOf(I[e.confirmType])<0&&(e.confirmType="1");var l=p._.find(o,(function(t){return t.cardType===e.confirmType}))||{},f=N(e),d=O(e),h=e.birthday,g=e.passengerID,v=d?"\u643a\u7ae5\u7968":f?"\u513f\u7ae5\u7968":"\u6210\u4eba\u7968",m=e.cNName,y="".concat(e.eNFirstName,"/").concat(e.eNLastName),b="2"===l.type?y:m;b||(b=m||y);var w={};return Object.assign(w,e,{updateTimeStamp:a.length?n:0,idcards:a,idcard:l,isChildTicket:f,isTakeChildTicket:d,birth:h,id:g,ptypeText:v,cname:m,EName:y,name:b}),w}function j(e){var t=e.passengerList,n=void 0===t?[]:t,r=e.selPassengerList,o=void 0===r?[]:r,a=e.supportPassengerTypes,i=e.isSaleChildTicket,c=(e.isSaleTakeChildTicket,e.maxSaleTicketNumber),s=[],u=[],l=(new L.Date).getTime(),f={};o&&o.length>0&&o.forEach((function(e){e.selected&&(N(e)&&!i&&(e.selected=!1),O(e)&&(e.selected=!1)),f[e.passengerID]=e.selected}));var d=0;return n.forEach((function(e,t){var n=D(e,a,l,!0),r=!1;d<c&&f[n.passengerID]&&n.idcards.length>0&&(r=!0,d+=1),n.selected=r,n.selected&&(n.updateTimeStamp=l+1e3-t),n.idcards.length>0?s.push(n):(n.selected=!1,u.push(n))})),s.concat(u)}var B=n(20132);function A(){var e={realNamePassenger:{},allPassengerList:[],passengerList:[],selPassengerList:[],isSaleChildTicket:!1,isSaleTakeChildTicket:!1,supportPassengerTypes:"\u8eab\u4efd\u8bc1",showPsgLength:2,maxSaleTicketNumber:5,adultCount:0,childCount:0,takeChildCount:0,isHasAdult:!1};return e}var R=p.Ke.create("BUS_BOOK_INPUT",!1,u.wrapCWXStorage),Z="PSG_S",M={state:(0,r.Z)({},A()),effects:function(e){return{useCommonPassenger:function(t,n){var o=this;return(0,w.Z)((0,b.Z)().mark((function t(){var a,i,c,s,u,l,f,d,p,h,g,v,m,y,w,x;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.getCommonPassengers();case 2:return a=t.sent,t.next=5,o.getStoredSelectedPassengers();case 5:return i=t.sent,c=n["bookParams"],s=c["busDetail"]||{},u=s.supportPassengerTypes,l=void 0===u?"\u8eab\u4efd\u8bc1":u,f=s.isSaleChildTicket,d=void 0!==f&&f,p=s.isSaleTakeChildTicket,h=void 0!==p&&p,g=s.maxSaleTicketNumber,v=void 0===g?5:g,m=j({passengerList:a,selPassengerList:i,supportPassengerTypes:l,isSaleChildTicket:d,isSaleTakeChildTicket:h,maxSaleTicketNumber:v}),y=(0,B.Do)(m),w=y.selPassengerList,x=(0,B.nE)(w,{isSaleChildTicket:d,isSaleTakeChildTicket:h}),e["passengers"].update((0,r.Z)((0,r.Z)({},y),{},{showPsgLength:x,isSaleChildTicket:d,isSaleTakeChildTicket:h,supportPassengerTypes:l,maxSaleTicketNumber:v})),t.abrupt("return",m);case 15:case"end":return t.stop()}}),t)})))()},getCommonPassengers:function(){return(0,w.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",p.N$.coffeeBeanWrap(p.N$.getCommonPassengers)({}).then((function(e){if(e.commonPassengers&&e.commonPassengers.length>0)return e.commonPassengers;throw e})).catch((function(e){return[]})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))()},getStoredSelectedPassengers:function(){return(0,w.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",C.getSelectedPassengers());case 1:case"end":return e.stop()}}),e)})))()},storeSelectedPassengers:function(){var e=arguments;return(0,w.Z)((0,b.Z)().mark((function t(){var n;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],t.abrupt("return",R.set(Z,n));case 2:case"end":return t.stop()}}),t)})))()},resetSelectedPassengers:function(){var t=arguments,n=this;return(0,w.Z)((0,b.Z)().mark((function o(){var a,i,c,s,u,l,f,d;return(0,b.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:a=t.length>0&&void 0!==t[0]?t[0]:[],i=t.length>1?t[1]:void 0,c=i["passengers"],s=c.isSaleChildTicket,u=c.isSaleTakeChildTicket,l=(0,B.Do)(a),f=l.selPassengerList,d=(0,B.nE)(f,{isSaleChildTicket:s,isSaleTakeChildTicket:u}),e["passengers"].update((0,r.Z)((0,r.Z)({},l),{},{showPsgLength:d})),n.storeSelectedPassengers(f);case 9:case"end":return o.stop()}}),o)})))()},togglePassengerSelected:function(t,n){var o=this;return(0,w.Z)((0,b.Z)().mark((function a(){var i,c,s,u,l;return(0,b.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=n["passengers"],c=i.passengerList,s=c.map((function(e){return(0,r.Z)({},e)})),s[t].selected=!s[t].selected,u=(0,B.Do)(s),l=u.selPassengerList,e["passengers"].update(u),o.storeSelectedPassengers(l);case 8:case"end":return a.stop()}}),a)})))()}}},reducers:{clear:function(){return A()},update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)}}},F=n(68277),W=n(28612);function U(e){var t=e.shiftType,n=e.busLineTypeInfo,r=[];if((0,W.bX)(e)){var o=e.extraData,a=o.businessTypeName;r.push(a)}return(0,W.IQ)(t)?r.push("\u6d41\u6c34\u73ed"):(0,W.Cq)(t)&&r.push("\u52a0\u73ed\u8f66"),(0,W._$)(e,n)?r.push("\u8fc7\u8def\u8f66"):(0,W.Vn)(e)&&r.push("\u4e2d\u8f6c\u8f66"),(0,W.Cu)(e)&&r.push("\u8fc7\u591c\u8f66"),r.join("\xb7")}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bus",n=e.data||{},r=n[t]||{},o=r.data,a={data:o,message:e.message};if(!o.busList||Array.isArray(o.busList)&&0===o.busList.length)return a.loadFailed=!0,a;a.loadFailed=!1;var i=$(o.busList),c=i.filter((function(e){return e.isBookable})),s=i.filter((function(e){return!e.isBookable}));return s.length>0&&!1,c.length>0&&s.length>0?c[c.length-1].isShowExpendunable=!0:s.length>0&&(s[0].isShowExpendunable=!0),a.data.busList=c.concat(s),a.data.ableList=c,a.data.unableList=s,a}function $(e){var t=e||[];return t.forEach((function(e){e._show=!0,e.id=p.cQ.randomString(8);var t=e.ticketUnitOriginalPrice||e.ticketUnitSalePrice,n=e.ticketUnitReducedPrice,r=e.discountTagList&&e.discountTagList.length?e.discountTagList[0]:"";if(e.showPrice=t,e.reducePrice=n,e.discountTagList=r,"pointBus"==e.businessType&&!0,e.toStationList&&e.toStationList.length){var o=e.toStationList.length;e._toStationName=e.toStationList[o-1].stationAddress}else e._toStationName=e.toStationShow||e.toStation;try{if(e.tempFields.extraJsonData){var a=JSON.parse(e.tempFields.extraJsonData);if(e.isFloatTime="3"==a.fromTimeType,e.passStationDesc=a.pathStation||"",a.tag&&a.tag.length>0){var i=a.tag.map((function(e){return e.tagName})).join(" ");e.extraTag=i,e.extraData=a}}}catch(e){console.log(e)}e.tagName=U(e)})),t}var q=["bizType"];function Q(e){var t=e.bizType,n=(0,F.Z)(e,q);return p.N$.coffeeBeanWrap(p.N$.busListV2)(n).then((function(e){return V(e,t)})).catch((function(){return{loadFailed:!0,data:{resultType:4,loadFailed:!0,ableList:[],unableList:[],busList:[]}}}))}var G=n(32180)["window"],H=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"];function X(e,t){var n=t.data||{},o=!n.extraInfo||n.extraInfo.needBookDates;return n.ableList&&n.ableList.length>0||!o?Promise.resolve(t):p.N$.coffeeBeanWrap(p.N$.checkBookDate)({fromCity:e.fromCity,toCity:e.toCity,fromDate:e.fromDate}).then((function(e){var t;return console.log(e),e.data&&e.data.forEach((function(e){e.date=new G.Date(e.fromDate.replace(/\-/g,"/")).format("MM-dd"),e.price=e&&e.lowerPrice&&e.lowerPrice.length>0?"".concat(1*(e.lowerPrice-0)):"";var n=new G.Date(e.fromDate).getDaySymbol();n||(n=H[new G.Date(e.fromDate).getDay()]),e.day=n,"\u65e0\u7968"!==e.cnt&&e.canBook&&(t=!0)})),t?e.data:[]})).catch((function(e){return[]})).then((function(e){var n=(0,r.Z)({},t);return!n.message&&e.length>0&&(n.message="\u6b64\u7ebf\u8def\u4e3a\u9694\u65e5\u53d1\u8f66\uff0c\n\u6e38\u6e38\u5efa\u8bae\u60a8\u9009\u62e9\u4ee5\u4e0b\u6709\u73ed\u6b21\u7684\u65e5\u671f"),n.recommendDate=e,n}))}function J(e,t){var n=t.data||{},o=!n.extraInfo||n.extraInfo.hasPlanA;return n.ableList&&n.ableList.length>0||!o?Promise.resolve(t):p.N$.coffeeBeanWrap(p.N$.getNoResultRecommend)({fromCity:e.fromCity,fromCityId:e.fromCityID,toCity:e.toCity,toCityId:e.toCityID,date:e.date||e.fromDate}).then((function(e){console.log(e);var t=e.planA&&e.planA.planAList||[];return t.length>0?t:[]})).catch((function(e){return[]})).then((function(e){var n=(0,r.Z)({},t);return!n.message&&e.length>0&&(n.message="\u4e3a\u60a8\u63a8\u8350\u4ee5\u4e0b\u51fa\u884c\u65b9\u5f0f"),n.recommendData=e,n}))}function Y(e){return p.N$.coffeeBeanWrap(p.N$.getShipNotice)(e).then((function(e){if(e&&1===e.code&&e.data){var t=e.data,n=t.content,r=t.title;return{content:n,title:r}}throw e})).catch((function(e){console.log(e)}))}var z=n(98482),K=n(82021);function ee(e){var t=e.fromCity,n=e.toCity,r=e.utmSource,o=e.website,a=e.bigChannel,i=e.pageType,c=void 0===i?0:i,s={fromCity:t,toCity:n,utmSource:r,fromStation:t,toStation:n,type:c,website:o};return a&&(s.basicParams={bigChannel:a}),p.N$.coffeeBeanWrap(p.N$.getShipCouponData)(s).then((function(e){if(console.log("res-----",e),e&&e.data&&e.data.couponList&&e.data.couponList.length>0)return e.data;throw e})).catch((function(e){return console.log("err-----",e),{}}))}var te=function(e){return e[e["Loading"]=0]="Loading",e[e["Success"]=1]="Success",e[e["Failed"]=2]="Failed",e[e["ReLoading"]=3]="ReLoading",e}(te||{}),ne=["00:00-06:00","06:00-12:00","12:00-18:00","18:00-24:00"];function re(){var e={busListData:{},pageParams:{selectFromStationList:[],selectToStationList:[],selectTimeRange:[],date:""},listData:[],loadingStatus:te.Loading,recommendData:[],recommendDate:[],selectTimeRange:[],message:"",loadFailed:!1,extraInfo:{},fromStationList:[],toStationList:[],timeRangeList:ne,showUnableList:!1,scanId:"",showExpandItem:{},expandXList:[],reloadList:!0,busNotice:void 0};return e}var oe=[],ae={state:(0,r.Z)({},re()),effects:function(e){return{refreshData:function(e,t){var n=this;return(0,w.Z)((0,b.Z)().mark((function o(){var a,i,c,s;return(0,b.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=t.busList,i=a.pageParams,console.log("params----",i),c=p.cQ.getUtmSource(),s={fromCity:i.fromCity,fromCityId:i.fromCityID,toCity:i.toCity,toCityId:i.toCityID,fromStation:"",toStation:"",fromDate:i.date,utmsource:c,fromStationList:i.selectFromStationList||[],toStationList:i.selectToStationList||[],fromTimeList:(i.selectTimeRange||[]).map((function(e){return ne.indexOf(e)+1})),busListExtendParams:{busMixType:1},supportIntervalSch:!0,bizType:i.bizType||"bus",website:i.website||""},n.update({loadingStatus:e?te.ReLoading:te.Loading}),o.abrupt("return",(0,p.rQ)({list:Q(s),busNotice:Y({location:2,fromCity:s.fromCity,toCity:s.toCity})}).then((function(e){var t=e.list,n=e.busNotice;return t=t||{},t.busNotice=n,t})).then((function(e){return X(s,e)})).then((function(e){return J(s,e)})).then((function(e){var t;console.log("res----",e);var o=e.data||{},c=e.message||"",u=e.loadFailed||!1,l=(o.fromStationInfoList||[]).map((function(e){return e.name})),f=o.toStationList||[],d=o.extraInfo||{},h=e.busNotice;console.log("busNotice----",h);var g=i.selectTimeRange&&i.selectTimeRange.length>0||i.selectFromStationList&&(null===(t=i.selectFromStationList)||void 0===t?void 0:t.length)>0||i.selectToStationList&&i.selectToStationList.length>0;4==o.resultType||o.busList&&0!==o.busList.length||!g?d.showTrimFilter=!1:d.showTrimFilter=!0;var v=o.busList||[];g||l.length>1||f.length>1||v.length>1?d.showFilter=!0:d.showFilter=!1;var m=(0,r.Z)((0,r.Z)({},a),{},{busListData:o,fromStationList:l,toStationList:f,extraInfo:d,message:c,showUnableList:!1,loadFailed:u,loadingStatus:u?2:1,scanId:p.cQ.uuid(),recommendData:e.recommendData||[],recommendDate:e.recommendDate||[],reloadList:!0,busNotice:h});return(0,K.Ww)({list:o.busList,ableList:o.ableList,unableList:o.unableList,recommendData:e.recommendData||[],recommendDate:e.recommendDate||[]},s,m.scanId),n.updateDisplay(m)})));case 7:case"end":return o.stop()}}),o)})))()},getCouponWindowData:function(e,t){return(0,w.Z)((0,b.Z)().mark((function e(){var n,r,o,a;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.busList,r=n.pageParams,console.log("params----",r),o=p.cQ.getUtmSource(),a={fromCity:r.fromCity,toCity:r.toCity,website:r.website,utmSource:o,pageType:3},r.bigChannel&&(a.bigChannel=r.bigChannel),e.abrupt("return",ee(a));case 7:case"end":return e.stop()}}),e)})))()},toggleShowUnableList:function(e,t){var n=this;return(0,w.Z)((0,b.Z)().mark((function e(){var r;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.busList,e.abrupt("return",n.update({showUnableList:!r.showUnableList}));case 2:case"end":return e.stop()}}),e)})))()},confirmFilter:function(e,t){var n=t.busList,o=n.pageParams;return this.update((0,r.Z)((0,r.Z)({},n),{},{pageParams:(0,r.Z)((0,r.Z)({},o),e)})),this.refreshData(!0)},updateDisplay:function(e){var t=e.busListData,n=(e.fromStationList,e.toStationList,e.message),o=(e.loadFailed,e.loadingStatus),a=void 0===o?0:o,i=e.recommendData,c=void 0===i?[]:i,s=e.recommendDate,u=void 0===s?[]:s,l=(e.showUnableList,e.busNotice),f=t.busList,d=void 0===f?[]:f,p=t.ableList,h=void 0===p?[]:p,g=t.unableList,v=void 0===g?[]:g,m=t.resultType,y=void 0===m?4:m,b=[];l&&l.title&&b.push({type:"top-notice",id:"top-notice-content"});var w="";return 0===d.length&&0===c.length&&0===u.length&&(w="noResult-center"),a>0&&1===y&&0===h.length?b.push({type:"message",value:"\u8be5\u6761\u4ef6\u4e0b\u65e0\u53ef\u552e\u73ed\u6b21, \u8bf7\u91cd\u65b0\u641c\u7d22\uff5e",messageClass:w,id:"top-message-none"}):a>0&&(2===y||3===y)?c.length>0||u.length>0?b.push({type:"message",value:"\u6682\u672a\u67e5\u8be2\u5230\u60a8\u641c\u7d22\u7684\u73ed\u6b21\uff0c\u4e3a\u60a8\u63a8\u8350\u5982\u4e0b\u51fa\u884c\u65b9\u6848\uff1a",messageClass:w,id:"top-message-recommend"}):b.push({type:"message",value:n,messageClass:w,id:"top-message-message"}):4===y&&b.push({type:"message",value:"\u5f88\u62b1\u6b49\uff0c\u6682\u672a\u67e5\u5230\u60a8\u641c\u7d22\u7684\u73ed\u6b21",messageClass:w,id:"top-message-nodata"}),b=b.concat(h),v.length>0&&b.push({type:"showUnableList",id:"show-un-able-list-button"}),this.update((0,r.Z)((0,r.Z)({},e),{},{listData:b}))}}},reducers:{clear:function(e,t){return re()},revert:function(e){if(console.log("pageParams revert----",e),oe.length>0){var t=oe.pop();return console.log("pageParams revert----",JSON.stringify(t)),t}return re()},update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)},updatePageParams:function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{pageParams:(0,r.Z)((0,r.Z)({},e.pageParams),t)})},setPageParams:function(e,t){return oe.push((0,z.Z)(e)),console.log("pageParams push----",JSON.stringify(e)),(0,r.Z)((0,r.Z)({},e),{},{pageParams:(0,r.Z)((0,r.Z)({},e.pageParams),t)})}}},ie=["1. \u8eab\u9ad81.2\u7c73-1.5\u7c73\u7684\u513f\u7ae5\uff0c\u53ef\u8d2d\u4e70\u513f\u7ae5\u7968","2. \u8eab\u9ad81.5\u7c73\u4ee5\u4e0a\u7684\u513f\u7ae5\uff0c\u9700\u8d2d\u4e70\u5168\u4ef7\u7968","3. \u513f\u7ae5\u4e0d\u80fd\u72ec\u81ea\u4e58\u8f66\uff0c\u987b\u6210\u4eba\u966a\u540c","4. \u8bf7\u6839\u636e\u513f\u7ae5\u5b9e\u9645\u8eab\u9ad8\u8d2d\u7968\uff0c\u68c0\u7968\u4e58\u8f66\u65f6\u4f1a\u6d4b\u91cf\u8eab\u9ad8\uff0c\u82e5\u56e0\u8eab\u8eab\u9ad8\u4e0d\u7b26\u65e0\u6cd5\u8fdb\u7ad9\uff0c\u6211\u53f8\u4e0d\u627f\u62c5\u8d23\u4efb"],ce=["1. \u6839\u636e\u89c4\u5b9a\uff0c1.2\u7c73\u4ee5\u4e0b\u513f\u7ae5\u4e58\u8f66\u53ef\u8d2d\u4e70\u643a\u540c\u7968 (\u4e0d\u63d0\u4f9b\u5ea7\u4f4d)\uff0c\u8eab\u9ad81.2\u7c73\u81f31.5\u7c73\u7684\u513f\u7ae5\u53ef\u8d2d\u4e70\u534a\u4ef7\u513f\u7ae5\u7968\uff0c\u8eab\u9ad8\u8d85\u8fc71.5\u7c73\u7684\u513f\u7ae5\u5fc5\u987b\u8d2d\u4e70\u5168\u7968\u3002","2. \u8bf7\u6839\u636e\u513f\u7ae5\u5b9e\u9645\u8eab\u9ad8\u8d2d\u7968\uff0c\u68c0\u7968\u65f6\u4f1a\u6709\u76f8\u5e94\u7684\u68c0\u67e5\u9650\u5236\uff0c\u4e0d\u7b26\u5408\u89c4\u5b9a\u6761\u4ef6\u7684\uff0c\u8f66\u7ad9\u6709\u6743\u8981\u6c42\u7528\u6237\u8865\u8d2d\u5dee\u4ef7\uff0c\u6211\u53f8\u4e0d\u627f\u62c5\u56e0\u513f\u7ae5\u8eab\u9ad8\u4e0e\u6240\u8d2d\u8f66\u7968\u4e0d\u7b26\u800c\u65e0\u6cd5\u8fdb\u5c55\u7684\u8d23\u4efb\u3002","3.\u4e00\u5f20\u5168\u7968\u9650\u8d2d\u4e00\u5f20\u513f\u7ae5\u7968\uff0c\u6bcf\u4f4d\u6210\u4eba\u65c5\u5ba2\u643a\u5e26\u514d\u8d39\u513f\u7ae5\u8d85\u8fc7\u4e00\u4eba\u6216\u8981\u6c42\u63d0\u4f9b\u5ea7\u4f4d\u7684\uff0c\u8bf7\u6309\u89c4\u5b9a\u8d2d\u4e70\u513f\u7ae5\u534a\u4ef7\u7968\u6216\u8005\u5168\u7968\u3002","4.\u5b9e\u884c\u643a\u7ae5\u7968\u4e3b\u8981\u662f\u63a7\u5236\u8d85\u8f7d\u7684\u513f\u7ae5\u4eba\u6570\uff0c\u4ee5\u514d\u53d1\u751f\u610f\u5916\uff1b\u5982\u60a8\u6709\u643a\u5e26\u514d\u7968\u513f\u7ae5\u51fa\u884c\u8ba1\u5212\u65f6\uff0c\u8bf7\u5728\u7f51\u4e0a\u8d2d\u7968\u8fc7\u7a0b\u4e2d\u7533\u62a5\uff0c\u6211\u53f8\u4e0d\u627f\u62c5\u60a8\u4e0d\u4e8b\u524d\u7533\u62a5\u6240\u9020\u6210\u7684\u7684\u6240\u643a\u5e26\u513f\u7ae5\u4e0d\u80fd\u540c\u884c\u7684\u8d23\u4efb\u3002","5.\u5982\u6240\u8d2d\u73ed\u6b21\u514d\u7968\u513f\u7ae5\u8ba1\u5212\uff08\u73ed\u8f66\u6838\u5b9a\u8f7d\u5ba2\u4eba\u6570\u768410%\uff09\u5df2\u7528\u5b8c\uff0c\u8bf7\u6539\u4e58\u5176\u4ed6\u73ed\u6b21\u6216\u8d2d\u4e70\u513f\u7ae5\u7968\u3002"],se={showOcr:!1,fromScan:!1,title:"\u7f16\u8f91\u4e58\u5ba2",name:"",firstName:"",lastName:"",cardNo:"",birthDay:"",startDateRange:"",endDateRange:"",ticketTypeList:[],passengerTypeIndex:0,supportPassengerTypes:["\u8eab\u4efd\u8bc1"],selectedCardTypeIndex:0,cardType:1,childTicketTips:ie,takeChildTicketTips:ce},ue={state:(0,r.Z)({},se),effects:function(e){return{}},reducers:{update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)},clear:function(e){return(0,r.Z)((0,r.Z)({},se),{},{ticketTypeList:[],supportPassengerTypes:["\u8eab\u4efd\u8bc1"]})}}};function le(e){return p.N$.coffeeBeanWrap(p.N$.getBookActivityList)((0,r.Z)((0,r.Z)({},e),{},{basicParams:{bigChannel:"bus"}})).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),{}}))}var fe=n(46097);function de(e,t,n){var r=-1;return r=e.findIndex((function(e){return e.selected})),r<=0?{selectedIndex:r,title:t||"\u6dfb\u52a0\u4fdd\u969c",subTitle:n||"\u4fdd\u9669\u53ef\u4ee5\u72b9\u8c6b, \u98ce\u9669\u4e0d\u53ef\u6f14\u4e60",color:"#FF7929",image:"http://pic.c-ctrip.com/pic/bus/resource/app/book_insurance_tip.png"}:{selectedIndex:r>=0?r:0,title:t||"\u51fa\u884c\u4fdd\u969c",subTitle:"\u4fdd\u969c\u5df2\u9886\u53d6\uff0c\u51fa\u884c\u66f4\u5b89\u5fc3",color:"#00B87A",image:"http://pic.c-ctrip.com/pic/bus/resource/app/book_insurance_tip_sel.png"}}function pe(e,t,n){var r=!1;return e.forEach((function(e){e.selected&&e.showPrice>=0&&(r=!0)})),r?{title:t||"\u51fa\u884c\u4fdd\u969c",subTitle:"",color:"#00B87A",image:"http://pic.c-ctrip.com/pic/bus/resource/app/book_sale_tip_sel.png"}:{title:t||"\u6dfb\u52a0\u4fdd\u969c",subTitle:"",color:"#FF7929",image:"http://pic.c-ctrip.com/pic/bus/resource/app/book_sale_tip.png"}}function he(){var e={recommendList:[],insuranceChannelId:"0",insuranceChannelMainTitle:"",insuranceChannelSubTitle:"",insuranceChannelDesc:"",insuranceList:[],insuranceHeaderConfig:{selectedIndex:0,title:"  ",subTitle:" ",color:"",image:""},salePackageChannelId:"",salePackageChannelMainTitle:"",salePackageChannelSubTitle:"",salePackageList:[],salePackageHeaderConfig:{title:" ",subTitle:" ",color:"",image:""}};return e}var ge={state:(0,r.Z)({},he()),effects:function(e){return{getBookActivityList:function(t,n){return(0,w.Z)((0,b.Z)().mark((function n(){var o,a,i,c,s,u,l,f,d,p,h,g,v,m,y,w,x,k,S,C,T,P,E,_,L,I,N;return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.busNumber,a=t.fromCity,i=t.fromDate,c=t.fromStation,s=t.fromTime,u=t.fullPrice,l=t.symbol,f=t.toCity,d=t.toStation,p=t.utmSource,h=t.exclusionPackageCode,g=t.channelId,v=t.selectX,m={busNumber:o,channelId:g,fromCity:a,fromDate:i,fromStation:c,fromTime:s,fullPrice:u,packageCodes:h,symbol:l,toCity:f,toStation:d,utmSource:p,exclusionPackageCode:h},n.next=4,le(m);case 4:return y=n.sent,w=(0,fe.em)(y.accidentInsurance,v),x=(0,fe.gW)(y,v),k=(0,fe.Sj)(y.buttonRecommend,v),S=x.salePackageChannelMainTitle,C=x.salePackageChannelSubtitle,T=x.salePackageList,P=w.insuranceList,E=w.insuranceChannelMainTitle,_=w.insuranceChannelSubTitle,L=de(P||[],E,_),I=pe(T||[],S,C),N=(0,r.Z)((0,r.Z)((0,r.Z)({},w),x),{},{salePackageHeaderConfig:I,insuranceHeaderConfig:L}),e["bookSale"].update((0,r.Z)((0,r.Z)((0,r.Z)({},w),x),{},{recommendList:k,salePackageHeaderConfig:I,insuranceHeaderConfig:L})),n.abrupt("return",N);case 15:case"end":return n.stop()}}),n)})))()},cancelAllInsurance:function(){return(0,w.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e["bookSale"].unselectAllInsurance();case 2:return t.next=4,e["bookParams"].unselectInsurance();case 4:case"end":return t.stop()}}),t)})))()},addRecommendPackage:function(e){this.toggleCheckItem(e)},toggleCheckItem:function(t,n){return(0,w.Z)((0,b.Z)().mark((function r(){var o,a,i,c,s,u,l;return(0,b.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=n["bookSale"],a=o.salePackageList,i=o.insuranceList,c=!1,s=a.concat(i),u=0;case 5:if(!(u<s.length)){r.next=14;break}if(l=s[u],l.packageCode!==t.packageCode){r.next=11;break}return r.next=10,e["bookSale"].toggleCheckPackage(l);case 10:c=!0;case 11:u++,r.next=5;break;case 14:if(c){r.next=17;break}return r.next=17,e["bookParams"].toggleXPackageSelected();case 17:case"end":return r.stop()}}),r)})))()}}},reducers:{clear:function(){return he()},update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)},selectInsurance:function(e,t){var n=e.insuranceList,r=e.insuranceChannelMainTitle,o=e.insuranceChannelSubTitle;n.forEach((function(e,n){e.selected=n===t}));var a=de(n||[],r,o);e.insuranceHeaderConfig=a},selectSalePackage:function(e,t){var n=e.salePackageList,r=e.salePackageChannelMainTitle,o=e.salePackageChannelSubTitle;n.forEach((function(e,n){n===t&&(e.selected=!e.selected,e.open=e.selected,e.selected&&(e.cancel=!1))})),e.salePackageHeaderConfig=pe(n,r,o)},toggleCheckPackage:function(e,t){var n=e.salePackageList,r=e.insuranceList,o=e.salePackageChannelMainTitle,a=e.salePackageChannelSubTitle,i=e.insuranceChannelMainTitle,c=e.insuranceChannelSubTitle;n.forEach((function(e){e.packageCode===t.packageCode&&(e.selected=!e.selected)}));var s=!1;r.forEach((function(e){e.packageCode===t.packageCode&&(s=!0)})),s&&r.forEach((function(e){e.selected=e.packageCode===t.packageCode})),e.insuranceHeaderConfig=de(r||[],i,c),e.salePackageHeaderConfig=pe(n,o,a)},unselectAllInsurance:function(e){var t=e.salePackageList,n=e.insuranceList,r=e.salePackageChannelMainTitle,o=e.salePackageChannelSubTitle,a=e.insuranceChannelMainTitle,i=e.insuranceChannelSubTitle;t.concat(n).forEach((function(e){e.isInsurance&&(e.selected=!1,e.open=!1)})),n.length>0&&(n[0].selected=!0),e.insuranceHeaderConfig=de(n||[],a,i),e.salePackageHeaderConfig=pe(t,r,o)}}};function ve(e){return p.N$.coffeeBeanWrap(p.N$.filteredCouponQuery)(e).then((function(e){var t=e.data.availableCoupons||[],n=e.data.unavailableCoupons||[];n.length>0&&n.forEach((function(e){e["_unavailable"]=!0}));var r=t.concat(n);return r})).catch((function(e){return[]}))}var me=n(14020),ye=n(32180)["window"];function be(e){var t=_e.getModelState("bookParams"),n=_e.getModelState("coupon"),o=t.busDetail,a=o||{},i=a.serviceChargeInfo,c=void 0===i?{}:i,s=n.checkedCoupon,u=n.userCheckNotUseCoupon,l=n.userSelect,f=t.totalPrice,d=1*(new ye.Date).getTime(),p=void 0,h=0,g=0,v=!1;s&&(g=1*s["deductionAmount"]);var m=f+g,y=e.map((function(e){var t=(0,r.Z)({},e),n=1*new ye.Date(t["couponStartDate"].replace(/\-/g,"/")).getTime(),o=1*new ye.Date(t["couponEndDate"].replace(/\-/g,"/")).getTime();t["available"]=n<=d&&d<=o,t["unavailable"]=t["unavailable"]||!t["available"],t["canUse"]=!0,t.alertMessage=[],(m<t.limitPrice||m<=t.deductionAmount)&&(t["canUse"]=!1,t.alertMessage.push("\u8ba2\u5355\u91d1\u989d\u4e0d\u6ee1\u8db3"));var a=c&&c.price||0;a<t.limitServicePrice&&(t.canUse=!1,t.alertMessage.push("\u4ec5\u670d\u52a1\u8d39\u7ebf\u8def\u53ef\u7528")),t["showMessage"]=!1;var i=1*t.deductionAmount;return!t.unavailable&&t.available&&t.canUse&&(i>h&&(h=i,p=t),s&&t.couponCode===s.couponCode&&(v=!0,s=t)),t["_aviable"]=t["available"],t["_canuse"]=t["canUse"],t["_unavailable"]=t["unavailable"],t["alartMessage"]=t["alertMessage"],t})),b=void 0,w=l;return l?v?b=s:(b=p,w=!1):u||(b=p),{userSelect:w,couponList:y,maxCouponPrice:h,maxCanUseCoupon:p,checkedCoupon:b}}function we(e){return p.N$.coffeeBeanWrap(p.N$.discountNoticeBeforeBuy)(e).then((function(e){if(1===e.code&&e.data&&e.data.title&&e.data.title.length>0){var t=p.cQ.formatHighLight(e.data.title);return(0,r.Z)({hotelCouponDesc:t},e.data)}return null})).catch((function(e){return null}))}var xe={couponList:[],userCheckNotUseCoupon:!1,checkedCoupon:void 0,userSelect:!1,maxCanUseCoupon:void 0,maxCouponPrice:0,hotelCoupon:null},ke={state:(0,r.Z)({},xe),effects:function(e){return{getCouponList:function(t,n){return(0,w.Z)((0,b.Z)().mark((function r(){var o,a,i,c,s,u,l,f,d;return(0,b.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t||(o=n["bookParams"],a=o.busDetail,i=a||{},c=i.selectX,s=i.detail,u=(0,me.Z)({selectX:c,detail:s}),l=u.couponParams,u.exclusionPackageCode,u.exclusionProducts,u.channelId,t=l),r.next=3,ve(t);case 3:return f=r.sent,d=be(f),r.next=7,e["coupon"].update(d);case 7:case"end":return r.stop()}}),r)})))()},updateCouponList:function(t,n){return(0,w.Z)((0,b.Z)().mark((function r(){var o,a;return(0,b.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t||(o=n["coupon"],t=o.couponList),r.next=3,be(t);case 3:return a=r.sent,r.next=6,e["coupon"].update(a);case 6:case"end":return r.stop()}}),r)})))()},getHotelCoupon:function(){return(0,w.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",we({tag:"wechatxcx"}).then(function(){var t=(0,w.Z)((0,b.Z)().mark((function t(n){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e["coupon"].update({hotelCoupon:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},unSelectCoupon:function(){return(0,w.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e["coupon"].update({userCheckNotUseCoupon:!0,userSelect:!1,checkedCoupon:void 0});case 2:case"end":return t.stop()}}),t)})))()},onSelectCoupon:function(t,n){return(0,w.Z)((0,b.Z)().mark((function r(){var o,a,i,c,s,u;return(0,b.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=n["coupon"],a=o.couponList,i=void 0,c=0;case 4:if(!(c<a.length)){r.next=12;break}if(s=a[c],s.couponCode!=t.couponCode){r.next=9;break}return i=s,r.abrupt("break",12);case 9:c++,r.next=4;break;case 12:return u={},i&&(u.checkedCoupon=i,u.userSelect=!0,u.userCheckNotUseCoupon=!1),r.next=16,e["coupon"].update(u);case 16:case"end":return r.stop()}}),r)})))()}}},reducers:{update:function(e,t){return(0,r.Z)((0,r.Z)({},e),t)},clear:function(e){return(0,r.Z)((0,r.Z)({},e),{},{userCheckNotUseCoupon:!1,checkedCoupon:void 0,userSelect:!1})}}},Se=n(2269),Ce=(0,u.createStore)({bookParams:_,passengers:M,busList:ae,passengerEdit:ue,bookSale:ge,coupon:ke}),Te=Ce.Provider;function Pe(e){return e.displyName||e.name||"component"}function Ee(e){console.log("withStore----");var t=function(t){(0,i.Z)(s,t);var n=(0,c.Z)(s);function s(){return(0,o.Z)(this,s),n.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var t=this;return(0,Se.jsxs)(Te,{children:[(0,Se.jsx)(e,(0,r.Z)({pageQuery:this.pageQuery,routerInfo:this.routerInfo},this.props)),(0,Se.jsx)(y.View,{className:"view-check",onAnimationEnd:function(){return t.viewReadyHandle()}})]})}}]),s}(m);return(0,s.Z)(t,"displayName","StoreWrapped".concat(Pe(e))),t}var _e=Ce},86308:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(68277),o=(n(91780),n(92954)),a=["retry","delayTime"],i=100,c={retry:1,delayTime:i,id:!0,dataset:!1,mark:!0,rect:!0,size:!1,scrollOffset:!0,context:!1,node:!1,properties:[],computedStyle:[]};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=t.retry,s=void 0===n?0:n,u=t.delayTime,l=void 0===u?i:u,f=(0,r.Z)(t,a),d=s,p=function t(n,r){try{(0,o.createSelectorQuery)().select(e).fields(f).exec((function(e){var o=e[0];o?n(o):d>0?setTimeout((function(){d--,t(n,r)}),l):n(null)}))}catch(e){n(null)}};return new Promise(p)}},67928:function(e,t,n){"use strict";n.d(t,{tL:function(){return u},R2:function(){return s},So:function(){return c}});var r,o=n(298),a=(n(91780),n(92954)),i=function(){return(0,a.getMenuButtonBoundingClientRect)()};function c(){if(r)return r;var e=(0,a.getSystemInfoSync)(),t=e,n=t.statusBarHeight;return n&&!Number.isNaN(n)||(e=(0,o.Z)((0,o.Z)({},e),{},{statusBarHeight:20})),r=e}var s=function(){var e=c()||{},t=e.safeArea,n=e.screenHeight,r=e.statusBarHeight;if(t&&t.bottom>0){var o=n-t.bottom;return 0===o&&r>25&&(o=34),{top:t.top,bottom:o,left:0,right:0}}return{top:0,bottom:0,left:0,right:0}},u=function(){var e=c(),t=e.statusBarHeight,n=void 0===t?0:t,r=e.platform,o="android"===r?48:40,a=i(),s=a.top,u=a.height;return s&&0!==s&&u&&0!==u?2*(s-n)+u:o}},71148:function(e,t,n){"use strict";n(91780);var r=n(90201),o=n(71515),a=n(67928),i=n(2269),c=(0,a.R2)(),s=c.top,u=c.bottom,l=(0,a.tL)(),f={"--safe-padding-bottom":u+"px","--status-bar-height":s+"px","--nav-bar-height":l+"px"};function d(e){var t=e.children,n=e.className,r=void 0===n?"":n,a=e.holdPlace,c=void 0!==a&&a;return(0,i.jsxs)(o.View,{className:"bottom-bar-container ",style:f,children:[c&&(0,i.jsx)(o.View,{className:"bottom-bar-placeholder safe-padding-bottom"}),(0,i.jsx)(o.View,{className:"bottom-bar safe-padding-bottom ".concat(r||""),children:t})]})}t["Z"]=r.memo(d)},62234:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(90129),o=n(91780),a=n(90201),i=n(71515),c=n(81225),s=n(2269);function u(e){var t=e.tagInfos,n=(0,a.useState)(0),c=(0,r.Z)(n,2),u=c[0],l=c[1],f=(0,a.useMemo)((function(){var e=t[u];return e}),[u,t]);return(0,s.jsxs)(i.View,{className:"list-type-bus-dialog-content",onClick:(0,o.trackFn)("onClick--90d72",(function(e){e.stopPropagation()})),children:[(0,s.jsx)(i.View,{className:"top-bar",children:t.map((function(e,t){return(0,s.jsx)(i.View,{className:"top-bar-item ".concat(u===t?"select":""),onClick:(0,o.trackFn)(t+"--148a0",(function(e){l(t)})),children:(0,s.jsx)(i.Text,{className:"".concat(u===t?"select":""),children:e.title})},t)}))}),(0,s.jsxs)(i.View,{className:"desc-container",children:[(0,s.jsx)(i.View,{className:"".concat(f.passStationList?"desc-gray":""),children:f.desc}),f.passStationList&&f.passStationList.length>0&&(0,s.jsx)(i.View,{className:"pass-station-list-container",children:f.passStationList.map((function(e,t){var n=0!==t&&f.passStationList[t-1].isActivity&&e.isActivity,r=t!==f.passStationList.length-1&&f.passStationList[t+1].isActivity&&e.isActivity;return(0,s.jsxs)(i.View,{className:"pass-station-item",children:[(0,s.jsxs)(i.View,{className:"pass-station-tip-container",children:[(1===e.stationType||2===e.stationType)&&(0,s.jsx)(i.Text,{className:"icon-font icon-bus-black"}),(0,s.jsx)(i.View,{className:"station-tip",children:e.stationTip})]}),(0,s.jsxs)(i.View,{className:"pass-station-item-line-container",children:[(0,s.jsx)(i.View,{className:"pass-station-item-dot-circle ".concat(e.isActivity?"activity":"")}),t!==f.passStationList.length-1&&(0,s.jsx)(i.View,{className:"pass-station-item-top-line ".concat(r?"top-line-activity":"")}),0!==t&&(0,s.jsx)(i.View,{className:"pass-station-item-bottom-line ".concat(n?"bottom-line-activity":"")})]}),(0,s.jsx)(i.View,{className:"pass-station-item-name",children:e.stationName})]},"pass_station_".concat(t))}))})]})]})}var l=(0,c.LU)(u)},85169:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});n(91780);var r=n(90201),o=n(71515),a=n(2269);function i(e){var t=e.title,n=e.children,r=e.className,i=void 0===r?"":r,c=e.id,s=void 0===c?void 0:c,u=e.childContainerClass,l=void 0===u?"":u,f=e.titleClass,d=void 0===f?"":f;return(0,a.jsxs)(o.View,{id:s,className:"cell-row ".concat(i," || ''"),children:[t&&(0,a.jsx)(o.View,{className:"cell-title skeleton-item skeleton-square skeleton-shimmer ".concat(d),children:t}),n&&(0,a.jsx)(o.View,{className:"cell-desc skeleton-item skeleton-square skeleton-shimmer ".concat(l),children:n})]})}var c=r.memo(i)},81225:function(e,t,n){"use strict";n.d(t,{_d:function(){return W},K4:function(){return y},LU:function(){return F}});var r,o=n(91780),a=n(298),i=n(68277),c=n(90201),s=n(71515),u=n(92954);function l(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=(0,u.getCurrentInstance)();return o.page&&(r=o.page),(null===(e=r)||void 0===e?void 0:e.path)||(null===(t=r)||void 0===t?void 0:t.route)||n}var f=n(26875),d=(0,f.u4)(void 0,!1),p=d,h=n(32180)["window"],g=function(){var e=0;return function(){return(++e).toString()}}(),v=function(e){return(0,a.Z)((0,a.Z)({createdAt:h.Date.now(),autoClose:!0},e),{},{id:(null===e||void 0===e?void 0:e.id)||g()})},m=function(e){var t=l(),n=v(e);return p.$emit&&p.$emit("bus-modal-event-".concat(t),{type:"show",options:n,pageName:t}),n.id},y=function(e){return m(e)},b=function(e){var t=l();p.$emit&&p.$emit("bus-modal-event-".concat(t),{type:"close",modalId:e,pageName:t})},w=n(90129),x=n(45023),k=n(67928),S=(0,k.R2)(),C=function(e){switch(e){case"bottom":return{position:"absolute",bottom:0,left:0,width:"100vw",padding:0,borderBottomLeftRadius:0,borderBottomRightRadius:0,paddingBottom:"".concat(S.bottom?S.bottom:0,"px")};case"middle":return{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100vw",padding:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"".concat(S.top?S.top:0,"px"),paddingBottom:"".concat(S.bottom?S.bottom:0,"px")}}return null},T=C,P=function(e){return"function"===typeof e},E=function(e,t){return P(e)?e(t):e},_=n(2269);function L(e){var t=e.options,n=e.handlers,r=t.id,i=t.mask,c=i||{},u=c.enableClose,l=void 0===u||u,f=c.style,d=c.callback;return(0,_.jsx)(s.View,{className:"taro-modal-mask",style:(0,a.Z)({},f),onClick:(0,o.trackFn)("onClick--5df52",(function(){l&&n.close(r),d&&d()}))})}function I(e){var t=e.options,n=e.handlers,r=t.close,i=t.id;if(r){if(r.hidden)return null;var c=r.style,u=r.position,l=void 0===u?"":u,f=r.callback,d=l.includes("top")?{top:0}:{bottom:0},p=l.includes("left")?{left:0}:{right:0};return(0,_.jsx)(s.View,{className:"modal-close",style:(0,a.Z)((0,a.Z)((0,a.Z)({},d),p),c),onClick:(0,o.trackFn)("onClick--2fe7d",(function(){n.close(i),f&&f()})),children:(0,_.jsx)(s.Text,{className:"iconfont icon-close"})})}return null}function N(e){var t=e.options,n=t.title;return n?"string"===typeof n?(0,_.jsx)(s.View,{className:"modal-title",children:(0,_.jsx)(s.Text,{children:n})}):n:null}function O(e){var t=e.options,n=t.content;return n?"string"!==typeof n?E(n,t):(0,_.jsx)(s.View,{className:"modal-content",children:(0,_.jsx)(s.Text,{children:n})}):null}function D(e){var t=e.options,n=e.handlers,r=t.buttons,i=t.autoClose,c=t.id;if(!r||r.length<=0)return null;function u(e){i?(n.close(c),e&&e()):e&&e()}return(0,_.jsx)(s.View,{className:"modal-btns",children:r.map((function(e){return(0,_.jsx)(s.Text,{className:"modal-btn ".concat(e.class?e.class:""),style:(0,a.Z)({},e.style),onClick:(0,o.trackFn)(e.text+"--8c32d",(function(){return u(e.callback)})),children:e.text},e.text)}))})}var j=function(e,t){var n=(0,a.Z)({},e[t.pageName]||{});switch(t.type){case"show":var r,o=(null===(r=t.options)||void 0===r?void 0:r.id)||"";return n[o]=t.options,(0,a.Z)((0,a.Z)({},e),{},(0,x.Z)({},t.pageName,n));case"close":var i=t.modalId;return Reflect.deleteProperty(n,i),(0,a.Z)((0,a.Z)({},e),{},(0,x.Z)({},t.pageName,n));case"clear":return(0,a.Z)((0,a.Z)({},e),{},(0,x.Z)({},t.pageName,{}))}return{}},B=function(e,t){var n=t[e]||{},r=(0,c.useMemo)((function(){var e=Object.keys(n).map((function(e){return n[e]}));return e}),[n]),o=(0,c.useMemo)((function(){return{close:function(t){p.$emit&&p.$emit("bus-modal-event-".concat(e),{type:"close",modalId:t,pageName:e})},clear:function(){p.$emit&&p.$emit("bus-modal-event-".concat(e),{type:"clear",pageName:e})}}}),[e]);return{modals:r,handlers:o}},A=function(){var e=(0,c.useMemo)((function(){return l(Math.random().toString())}),[]),t=(0,c.useReducer)(j,{}),n=(0,w.Z)(t,2),r=n[0],o=n[1],i=B(e,r),u=i.modals,f=void 0===u?[]:u,d=i.handlers;return(0,c.useLayoutEffect)((function(){p.$on&&p.$on("bus-modal-event-".concat(e),(function(e){o(e)}))}),[e]),(0,_.jsx)(_.Fragment,{children:f&&f.reverse().map((function(e){var t=e.animationClassName,n=void 0===t?"":t,r=e.position,o=e.style,i=e.id,c=n||("bottom"===r?"animate__animated animate__slideInUp animate__faster":"");return(0,_.jsx)(s.View,{className:"taro-modal-container ".concat(e&&e.className?e.className:""),children:(0,_.jsxs)(s.View,{className:"taro-modal-content",children:[(0,_.jsx)(L,{options:e,handlers:d}),(0,_.jsxs)(s.View,{className:"flex-content ".concat(c),style:(0,a.Z)((0,a.Z)({},T(r)),o),children:[(0,_.jsx)(I,{options:e,handlers:d}),(0,_.jsx)(N,{options:e}),(0,_.jsx)(O,{options:e}),(0,_.jsx)(D,{options:e,handlers:d})]})]})},i)}))})},R=["close"],Z=["close"];function M(e){return e.displyName||e.name||"component"}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;return n.hide=function(e){b(e)},n.show=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=g(),c=function(){b(o)},s=t.close,u=void 0===s?{}:s,l=(0,i.Z)(t,R),f=r.close,d=void 0===f?{}:f,p=(0,i.Z)(r,Z);return y((0,a.Z)((0,a.Z)((0,a.Z)({close:(0,a.Z)((0,a.Z)({position:"top-left"},u),d),closeMethod:"close",position:"bottom"},l),p),{},{content:(0,_.jsx)(n,(0,a.Z)((0,a.Z)({},e),{},{modalID:o,hide:c})),id:o})),o},n}function W(e){console.log("injectModal----");var t=function(t){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(e,(0,a.Z)({},t)),(0,_.jsx)(s.View,{className:"modal-container",id:"modal-container-0789",children:(0,_.jsx)(A,{})})]})};return t.displayName="ModalWrapped_".concat(M(e)),t}},13699:function(e,t,n){"use strict";var r=n(93212),o=n(91780),a=n(90201),i=n(71515),c=n(92954),s=n.n(c),u=n(67928),l=n(70792),f=n(26875),d=n(2269),p="pages/home/homepage";function h(e){if(e=e.replace(/\/pages\/(.*)/i,"pages/$1"),"object"===("undefined"===typeof __wxConfig?"undefined":(0,r.Z)(__wxConfig))){if(e===__wxConfig.pages[0])return!0}else if(e===p)return!0;return!1}function g(){var e;e="object"===("undefined"===typeof __wxConfig?"undefined":(0,r.Z)(__wxConfig))?__wxConfig.pages[0]:p,f.Y8.reLaunch({url:"/"+e})}function v(){f.Y8.navigateBack().catch((function(){}))}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s().setNavigationBarTitle({title:e})}function y(e){var t=e.onBack,n=(e.children,e.left),r=e.title,o=e.titleText,s=e.className,f=e.hide,p=e.holdPlace,g=void 0===p||p,y=(0,c.useRouter)(),w=y.path,x=y.params,k=(0,a.useMemo)((function(){var e,t,n=f||"YES"===x.isHideNavBar||"1"===x.hideNavbar,r=(null===(e=(0,c.getCurrentPages)())||void 0===e?void 0:e.length)<=1;return{hideNavbar:n,hideNavbarBackBtn:r,showHome:(null===(t=(0,c.getCurrentPages)())||void 0===t?void 0:t.length)<=1&&!h(w)}}),[w,x,f]),S=k.hideNavbar,C=k.hideNavbarBackBtn,T=k.showHome;if((0,a.useEffect)((function(){m(o)}),[o]),S)return null;var P=(0,u.So)(),E=P.statusBarHeight,_=void 0===E?0:E,L=(0,u.tL)(),I="function"===typeof t?t:v;return S?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.View,{className:"navigation-container ".concat(s||""),children:(0,d.jsx)(l.Z,{title:r?"string"===typeof r?(0,d.jsx)(i.Text,{className:"navigation-title",children:r}):r:o,left:n||(0,d.jsx)(b,{leftClickFn:I,hideNavbarBackBtn:C,showHome:T})})}),g&&(0,d.jsx)(i.View,{style:"height:".concat(L+_,"px")})]})}function b(e){var t=e.leftClickFn,n=e.hideNavbarBackBtn,r=e.showHome,a=!1;return(0,d.jsxs)(d.Fragment,{children:[!n&&!a&&(0,d.jsx)(i.View,{className:"btn-wrap btn-back",onClick:(0,o.trackFn)("leftClickFn--3a54c",t),children:(0,d.jsx)(i.Text,{className:"icon-font icon-arrow-back btn-icon"})}),r&&(0,d.jsx)(i.View,{className:"btn-wrap btn-home ".concat(a?"swan-home":""),onClick:(0,o.trackFn)("backHome--7acb3",g),children:(0,d.jsx)(i.Text,{className:"icon-font icon-home btn-icon"})})]})}t["Z"]=a.memo(y)},70792:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(298),o=(n(91780),n(90201)),a=n(71515),i=n(67928),c=n(2269),s=(0,i.R2)(),u=s.top,l=s.bottom,f=(0,i.tL)(),d={"--safe-padding-bottom":l+"px","--status-bar-height":u+"px","--nav-bar-height":f+"px"};function p(e){var t=e.children,n=e.title,i=e.left,s=e.navbarHeight,u=e.statusBarHeight,l=e.background,f=e.className,p=(0,o.useMemo)((function(){var e=(0,r.Z)({},d);return l&&(e.background=l),e}),[l]),h=(0,o.useMemo)((function(){var e={};return u&&(e.height=u+"px"),e}),[u]),g=(0,o.useMemo)((function(){var e={};return s&&(e.height=s+"px"),e}),[s]);return(0,c.jsxs)(a.View,{className:"top-bar-container ".concat(f||""),style:p,children:[(0,c.jsx)(a.View,{className:"status-bar safe-padding-top",style:h}),(0,c.jsxs)(a.View,{className:"navigation-bar nav-bar-height",style:g,children:[t||(0,c.jsx)(a.View,{className:"navigation-middle",children:n}),(0,c.jsx)(a.View,{className:"home-btn-group-new",children:i})]})]})}},45130:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(91780),o=n(90201),a=n(71515),i=n(81225),c=n(26345),s=n(26875),u=n(2269),l=s.uM.withTrace;function f(e){var t=e.onClose,n=e.linearColor,i=e.showCloseIcon,s=e.data,f=e.onConfirmClick,d=e.onPressDetail,p=e.customBottomView,h=e.fromPage,g=e.onClickModalOrder,v=e.onCancelClick,m=(0,o.useMemo)((function(){var e=s,t=e.id,n=e.title,r=e.modalTagList,o=e.type,a=e.excludeTicketPrice,i=e.showPrice,c=e.sellType,u=e.extraMap,l=e.freeServiceFeeChannel,f=e.channelName,d=u||{},p=d.subModalTitle,g=d.savePrice,v=d.fwbSetDesc,m=d.packageType,y=d.modalTitle,b=u||{},w=b.modalHeaderImg,x=b.modalHeadImg;w=w||x||"";var k="insurance"===o||"insurance"===m,S=k,C=l?a:i,T="\xa5".concat(C).concat(2===c?"/\u5355":1===c?"/\u4eba":"/\u6b21"),P=k?"\u672c\u6a21\u5757\u4e3a\u6295\u4fdd\u9875\u9762\uff0c\u7531\u643a\u7a0b\u4fdd\u9669\u4ee3\u7406\u6709\u9650\u516c\u53f8\u7ba1\u7406\u5e76\u8fd0\u8425\u3002\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u6295\u4fdd\u987b\u77e5\u7b49\u5185\u5bb9\uff0c\u5e76\u77e5\u6653\u627f\u4fdd\u4fdd\u9669\u516c\u53f8\u548c\u4ea7\u54c1\u6761\u6b3e\u5185\u5bb9\u3002\u4e3a\u786e\u4fdd\u60a8\u7684\u6295\u4fdd\u6743\u76ca\uff0c\u60a8\u7684\u6295\u4fdd\u4fe1\u606f\u8f68\u8ff9\u5c06\u88ab\u8bb0\u5f55\u3002":"",E={ChannelName:f};return{isInsurance:k,showInsuranceLogo:S,priceInfo:T,desc:P,subTitle:p,modalHeaderImg:w,savePrice:g,fwbSetDesc:v,id:t,title:"book"===h?y:n,tagList:r,tipText:k?"\u6295\u4fdd\u987b\u77e5":"",traceData:E}}),[s,h]),y=(m.isInsurance,m.showInsuranceLogo),b=m.priceInfo,w=m.desc,x=m.subTitle,k=m.modalHeaderImg,S=m.savePrice,C=(m.fwbSetDesc,m.id,m.title),T=m.tagList,P=m.tipText,E=m.traceData;return(0,u.jsxs)(a.View,{className:"x-modal-contaienr",children:[(0,u.jsx)(a.View,{className:"close-content",onClick:(0,r.trackFn)("onClick--aade0",(function(){t&&t(s)}))}),(0,u.jsx)(a.View,{className:"inner-container",children:(0,u.jsxs)(a.View,{className:"linear-container ",style:{background:"linear-gradient(180deg, ".concat(n||"rgb(230, 251, 243)"," 0%, rgb(255, 255, 255) 100%)")},children:[!!i&&(0,u.jsx)(a.View,{className:"close-icon"}),(0,u.jsxs)(a.View,{className:"header-container",children:[(0,u.jsxs)(a.View,{className:"title-container",children:[(0,u.jsxs)(a.View,{className:"title-wrap",children:[(0,u.jsx)(a.Text,{style:{color:"freeOrder"===s.type?"#7C2400":"#333"},children:C}),!!S&&(0,u.jsxs)(a.View,{className:"banner-tag-container",children:[(0,u.jsx)(a.View,{className:"triangle-view "}),(0,u.jsx)(a.View,{className:"banner-tag-inner",children:(0,u.jsx)(a.Text,{children:S})})]})]}),(0,u.jsxs)(a.View,{className:"sub-title",children:[!!x&&(0,u.jsx)(a.Text,{className:"text",style:{color:"freeOrder"===s.type?"#7C2400":"#333"},children:x}),!!b&&(0,u.jsx)(a.Text,{style:{color:"freeOrder"===s.type?"#7C2400":"#333"},children:b})]})]}),!!k&&(0,u.jsx)(a.View,{className:"image-wrap",children:(0,u.jsx)(a.Image,{mode:"aspectFit",className:"header-icon",src:k})})]}),!!T&&T.length>0&&(0,u.jsx)(a.View,{className:"main-container",children:T&&T.map((function(e,t){var n=e.tagList;return(0,u.jsxs)(a.View,{className:"desc-item",children:[(0,u.jsx)(a.Image,{className:"tip-icon",src:"freeOrder"===s.type?"https://pages.c-ctrip.com/bus-images/ship/x/hong-gou.png":"https://pages.c-ctrip.com/bus-images/busapp/modalSlectedIcon.png"}),n&&n.map((function(e,n){var r=e.fontWeight?"main-highlight-text":e.highLight?"main-desc-highlight":"main-desc",o={};return"main-desc-highlight"==r&&"freeOrder"===s.type&&(o={color:"#F5190A"}),(0,u.jsx)(a.Text,{className:r,style:o,children:e.text},n+t)}))]},t)}))}),(0,u.jsxs)(a.View,{onClick:(0,r.trackFn)("onClick--a23ea",(function(){d&&d(s)})),className:"bottom-tip",children:[(0,u.jsxs)(a.View,{className:"tip-content",children:[(0,u.jsx)(a.Image,{className:"tip-icon",src:"https://pages.c-ctrip.com/bus-images/busapp/official.png"}),(0,u.jsx)(a.Text,{children:"\u5b98\u65b9\u5408\u4f5c\xb7\u4fdd\u969c\u51fa\u884c"})]}),(0,u.jsxs)(a.View,{className:"tip-content",children:[(0,u.jsx)(a.Text,{children:P||"\u8be6\u7ec6\u8bf4\u660e"}),(0,u.jsx)(a.Image,{className:"desc-arrow",src:"https://pages.c-ctrip.com/bus-images/busapp/rightRow.png"})]})]}),!!w&&(0,u.jsx)(a.View,{className:"desc-container",children:(0,u.jsx)(a.Text,{children:w.split("").map((function(e,t){return(0,u.jsx)(a.Text,{className:"desc-text",children:e},t)}))})}),y&&(0,u.jsxs)(a.View,{className:"channel",children:[(0,u.jsx)(a.Image,{className:"img",src:"https://pages.c-ctrip.com/bus-images/ship/insurance/safe.png"}),(0,u.jsx)(a.Text,{children:"\u643a\u7a0b\u65d7\u4e0b\u4fdd\u9669\u4ee3\u7406\u81ea\u8425\u5e73\u53f0"})]}),p||("book"===h?(0,u.jsxs)(a.View,{className:"btn-group  safe-padding-bottom",children:[(0,u.jsx)(a.View,{className:"button cancel",onClick:(0,r.trackFn)("onClick--bbebe",(function(){v&&v(s)})),children:(0,u.jsx)(a.Text,{children:"\u5426"})}),(0,u.jsx)(a.View,{className:"button confirm",onClick:(0,r.trackFn)("onClick--2fcad",(function(){f&&f(s)})),children:(0,u.jsx)(a.Text,{children:"\u662f"})})]}):(0,u.jsx)(a.View,{className:'order-button-wrap safe-padding-bottom"',id:c.Z.list.BCWList_Middle_XChannelPopReserve.value,"data-trace":E,onClick:(0,r.trackFn)(c.Z.list.BCWList_Middle_XChannelPopReserve.value,l((function(){g&&g(s)}))),children:(0,u.jsx)(a.View,{className:"order-button",children:(0,u.jsx)(a.Text,{children:"\u9884\u8ba2"})})}))]})})]})}var d=(0,i.LU)(f)},91780:function(e,t,n){var r=n(32180)["window"],o=n(32180)["document"],a=n(66371)["default"];!function(){var t={786:function(e,t,n){e.exports=n(751)},121:function(e,t,n){"use strict";var r=n(469),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function s(e){return r.isMemo(e)?i:c[e.$$typeof]||o}c[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[r.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=p(n);o&&o!==h&&e(t,o,r)}var i=l(n);f&&(i=i.concat(f(n)));for(var c=s(t),g=s(n),v=0;v<i.length;++v){var m=i[v];if(!(a[m]||r&&r[m]||g&&g[m]||c&&c[m])){var y=d(n,m);try{u(t,m,y)}catch(e){}}}}return t}},29:function(e,t,n){var r=n(125).default,o="object"==(void 0===n.g?"undefined":r(n.g))&&n.g&&n.g.Object===Object&&n.g,a="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,i=o||a||Function("return this")(),c=Object.prototype,s=c.hasOwnProperty,u=c.toString,l=i.Symbol,f=l?l.toStringTag:void 0;e.exports=function(e){if(!function(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?function(e){var t=s.call(e,f),n=e[f];try{e[f]=void 0;var r=!0}catch(e){}var o=u.call(e);return r&&(t?e[f]=n:delete e[f]),o}(e):function(e){return u.call(e)}(e)}(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},751:function(e,t,n){e=n.nmd(e);var r=n(125).default,o=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new N(r||[]);return a(i,"_invoke",{value:E(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p="suspendedStart",h="suspendedYield",g="executing",v="completed",m={};function y(){}function b(){}function w(){}var x={};l(x,c,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(O([])));S&&S!==n&&o.call(S,c)&&(x=S);var C=w.prototype=y.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,i,c,s){var u=d(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(e,t,n){var r=p;return function(o,a){if(r===g)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw a;return D()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var s=d(e,t,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}function _(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=d(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function O(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},T(P.prototype),l(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new P(f(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},T(C),l(C,u,"Generator"),l(C,c,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}("object"===r(e)?e.exports:{});try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},469:function(e){"use strict";e.exports=n(10668)},125:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},i={};function c(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return t[e](r,r.exports,c),r.loaded=!0,r.exports}c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==("undefined"===typeof globalThis?"undefined":a(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"===typeof r?"undefined":a(r)))return r}}(),c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var s={};!function(){"use strict";c.r(s),c.d(s,{createModel:function(){return gt},createReplayPage:function(){return Vn},createStore:function(){return kt},getToken:function(){return Gn},initCoffeebeanTaro:function(){return $n},trackFn:function(){return qn},trackInitData:function(){return Xn},trackPage:function(){return Hn},withModel:function(){return St},wrapCWXStorage:function(){return on},wrapLogin:function(){return Jn},wrapOpt:function(){return Qn},wrapRunOnlyUser:function(){return Yn}});var e={};c.r(e),c.d(e,{__DO_NOT_USE__ActionTypes:function(){return S},applyMiddleware:function(){return I},bindActionCreators:function(){return _},combineReducers:function(){return P},compose:function(){return L},createStore:function(){return C},legacy_createStore:function(){return T}});var t=n(90201),i=c.n(t);function u(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var l=u();l.withExtraArgument=u;var f=l,d=function(e){},p={exposed:{storeDispatch:function(e,t){console.warn("Warning: store not yet loaded")},storeGetState:function(){console.warn("Warning: store not yet loaded")},dispatch:function(e){return this.storeDispatch(e)},createDispatcher:function(e,t){var n=this;return function(r,o){return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))}(n,void 0,void 0,(function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(a){return n={type:e+"/"+t},void 0!==r&&(n.payload=r),void 0!==o&&(n.meta=o),[2,this.dispatch(n)]}))}))}}},onStoreCreated:function(e){return this.storeDispatch=e.dispatch,this.storeGetState=e.getState,{dispatch:this.dispatch}},onModel:function(e){if(this.dispatch[e.name]={},e.reducers)for(var t=0,n=Object.keys(e.reducers);t<n.length;t++){var r=n[t];this.validate([[!!r.match(/\/.+\//),"Invalid reducer name ("+e.name+"/"+r+")"],["function"!=typeof e.reducers[r],"Invalid reducer ("+e.name+"/"+r+"). Must be a function"]]),this.dispatch[e.name][r]=this.createDispatcher.apply(this,[e.name,r])}}};function h(e){return h="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},h(e)}var g={exposed:{effects:{}},onModel:function(e){if(e.effects){var t="function"==typeof e.effects?e.effects(this.dispatch):e.effects;this.validate([["object"!==h(t),"Invalid effects from Model("+e.name+"), effects should return an object"]]);for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];this.validate([[!!o.match(/\//),"Invalid effect name ("+e.name+"/"+o+")"],["function"!=typeof t[o],"Invalid effect ("+e.name+"/"+o+"). Must be a function"]]),this.effects[e.name+"/"+o]=t[o].bind(this.dispatch[e.name]),this.dispatch[e.name][o]=this.createDispatcher.apply(this,[e.name,o]),this.dispatch[e.name][o].isEffect=!0}}},middleware:function(e){var t=this;return function(n){return function(r){return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))}(t,void 0,void 0,(function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){switch(t.label){case 0:return r.type in this.effects?[4,n(r)]:[3,2];case 1:return t.sent(),[2,this.effects[r.type](r.payload,e.getState(),r.meta)];case 2:return[2,n(r)]}}))}))}}}},v=g;function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var x="function"==typeof Symbol&&Symbol.observable||"@@observable",k=function(){return Math.random().toString(36).substring(7).split("").join(".")},S={INIT:"@@redux/INIT"+k(),REPLACE:"@@redux/REPLACE"+k(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+k()}};function C(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(w(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(w(1));return n(C)(e,t)}if("function"!=typeof e)throw new Error(w(2));var o=e,a=t,i=[],c=i,s=!1;function u(){c===i&&(c=i.slice())}function l(){if(s)throw new Error(w(3));return a}function f(e){if("function"!=typeof e)throw new Error(w(4));if(s)throw new Error(w(5));var t=!0;return u(),c.push(e),function(){if(t){if(s)throw new Error(w(6));t=!1,u();var n=c.indexOf(e);c.splice(n,1),i=null}}}function d(e){if(!function(e){if("object"!==h(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(w(7));if(void 0===e.type)throw new Error(w(8));if(s)throw new Error(w(9));try{s=!0,a=o(a,e)}finally{s=!1}for(var t=i=c,n=0;n<t.length;n++)(0,t[n])();return e}return d({type:S.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error(w(10));o=e,d({type:S.REPLACE})}})[x]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==h(e)||null===e)throw new Error(w(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[x]=function(){return this},e},r}var T=C;function P(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var a,i=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:S.INIT}))throw new Error(w(12));if(void 0===n(void 0,{type:S.PROBE_UNKNOWN_ACTION()}))throw new Error(w(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},c=0;c<i.length;c++){var s=i[c],u=n[s],l=e[s],f=u(l,t);if(void 0===f)throw t&&t.type,new Error(w(14));o[s]=f,r=r||f!==l}return(r=r||i.length!==Object.keys(e).length)?o:e}}function E(e,t){return function(){return t(e.apply(this,arguments))}}function _(e,t){if("function"==typeof e)return E(e,t);if("object"!==h(e)||null===e)throw new Error(w(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=E(o,t))}return n}function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(w(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return r=L.apply(void 0,a)(n.dispatch),b(b({},n),{},{dispatch:r})}}}var N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)};function O(t){var n=this,o=t.redux,a=t.models,i=o.combineReducers||P,c=o.createStore||C,s=void 0!==o.initialStates?o.initialStates:{};this.reducers=o.reducers,this.mergeReducers=function(e){return void 0===e&&(e={}),n.reducers=N(N({},n.reducers),e),Object.keys(n.reducers).length?i(n.reducers):function(e){return e}},this.createModelReducer=function(e){for(var t=e.baseReducer,r={},o=0,a=Object.keys(e.reducers||{});o<a.length;o++){var i=a[o],c=i.indexOf("/")>-1?i:e.name+"/"+i;r[c]=e.reducers[i]}var s=function(t,n){return void 0===t&&(t=e.state),"function"==typeof r[n.type]?r[n.type](t,n.payload,n.meta):t};n.reducers[e.name]=t?function(e,n){return s(t(e,n),n)}:s};for(var u=0,l=a;u<l.length;u++){var f=l[u];this.createModelReducer(f)}this.createRootReducer=function(e){void 0===e&&(e={});var t=n.mergeReducers();return Object.keys(e).length?function(n,r){var o=e[r.type];return t(o?o(n,r):n,r)}:t};var d=this.createRootReducer(o.rootReducers),p=I.apply(e,o.middlewares),g=function(e){void 0===e&&(e={});var t=e.disabled,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["disabled"]);return!t&&"object"===("undefined"==typeof r?"undefined":h(r))&&r.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?r.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(n):L}(o.devtoolOptions).apply(void 0,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r}(o.enhancers,[p]));return this.store=c(d,s,g),this}var D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D.apply(this,arguments)},j=[p,v],B=function(){function e(e){var t=this;this.plugins=[],this.getModels=function(e){return Object.keys(e).map((function(t){return D(D({name:t},e[t]),{reducers:e[t].reducers||{}})}))},this.config=e,this.pluginFactory=function(e){return{config:e,validate:d,create:function(e){e.onStoreCreated&&e.onStoreCreated,e.onModel&&e.onModel,e.middleware&&e.middleware,e.onInit&&e.onInit.call(this);var t={};if(e.exposed)for(var n=0,r=Object.keys(e.exposed);n<r.length;n++){var o=r[n];this[o]="function"==typeof e.exposed[o]?e.exposed[o].bind(this):Object.create(e.exposed[o])}for(var a=0,i=["onModel","middleware","onStoreCreated"];a<i.length;a++){var c=i[a];e[c]&&(t[c]=e[c].bind(this))}return t}}}(e);for(var n=0,r=j.concat(this.config.plugins);n<r.length;n++){var o=r[n];this.plugins.push(this.pluginFactory.create(o))}this.forEachPlugin("middleware",(function(e){t.config.redux.middlewares.push(e)}))}return e.prototype.forEachPlugin=function(e,t){for(var n=0,r=this.plugins;n<r.length;n++){var o=r[n];o[e]&&t(o[e])}},e.prototype.addModel=function(e){e.name,void 0===e.state&&e.baseReducer,e.name,void 0!==e.baseReducer&&e.baseReducer,e.name,this.forEachPlugin("onModel",(function(t){return t(e)}))},e.prototype.init=function(){var e=this;this.models=this.getModels(this.config.models);for(var t=0,n=this.models;t<n.length;t++){var r=n[t];this.addModel(r)}var o=O.call(this,{redux:this.config.redux,models:this.models}),a=D(D({name:this.config.name},o.store),{model:function(t){e.addModel(t),o.mergeReducers(o.createModelReducer(t)),o.store.replaceReducer(o.createRootReducer(e.config.redux.rootReducers)),o.store.dispatch({type:"@@redux/REPLACE "})}});return this.forEachPlugin("onStoreCreated",(function(e){var t=e(a);t&&Object.keys(t||{}).forEach((function(e){a[e]=t[e]}))})),a},e}(),A=B,R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},Z=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r},M=function(e,t){return t?R(R({},t),e||{}):e||{}},F=i().createContext(null),W=function(e){e()},U=function(){return W},V={notify:function(){},get:function(){return[]}};function $(e,t){var n,r=V;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=U(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=V)},getListeners:function(){return r}};return i}var q="undefined"!=typeof r&&void 0!==r.document&&void 0!==r.document.createElement?t.useLayoutEffect:t.useEffect,Q=function(e){var n=e.store,r=e.context,o=e.children,a=(0,t.useMemo)((function(){var e=$(n);return{store:n,subscription:e}}),[n]),c=(0,t.useMemo)((function(){return n.getState()}),[n]);q((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,c]);var s=r||F;return i().createElement(s.Provider,{value:a},o)};function G(){return(0,t.useContext)(F)}function H(e){void 0===e&&(e=F);var n=e===F?G:function(){return(0,t.useContext)(e)};return function(){return n().store}}c(121),c(469);var X,J=H(),Y=function(e,t){return e===t};X=n(88967).unstable_batchedUpdates,W=X;var z={SET_STATE:"@@icestore_SET_STATE"+Math.random().toString(36).substring(7).split("").join(".")},K=z.SET_STATE,ee=function(){return ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ee.apply(this,arguments)};function te(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ne(e){return!!e&&!!e[Ue]}function re(e){var t;return!!e&&(function(e){if(!e||"object"!=a(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ve}(e)||Array.isArray(e)||!!e[We]||!!(null===(t=e.constructor)||void 0===t?void 0:t[We])||ue(e)||le(e))}function oe(e,t,n){void 0===n&&(n=!1),0===ae(e)?(n?Object.keys:$e)(e).forEach((function(r){n&&"symbol"==a(r)||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function ae(e){var t=e[Ue];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ue(e)?2:le(e)?3:0}function ie(e,t){return 2===ae(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t,n){var r=ae(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function se(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ue(e){return Re&&e instanceof Map}function le(e){return Ze&&e instanceof Set}function fe(e){return e.o||e.t}function de(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=qe(e);delete t[Ue];for(var n=$e(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function pe(e,t){return void 0===t&&(t=!1),ge(e)||ne(e)||!re(e)||(ae(e)>1&&(e.set=e.add=e.clear=e.delete=he),Object.freeze(e),t&&oe(e,(function(e,t){return pe(t,!0)}),!0)),e}function he(){te(2)}function ge(e){return null==e||"object"!=a(e)||Object.isFrozen(e)}function ve(e){var t=Qe[e];return t||te(18,e),t}function me(){return Be}function ye(e,t){t&&(ve("Patches"),e.u=[],e.s=[],e.v=t)}function be(e){we(e),e.p.forEach(ke),e.p=null}function we(e){e===Be&&(Be=e.l)}function xe(e){return Be={p:[],l:Be,h:e,m:!0,_:0}}function ke(e){var t=e[Ue];0===t.i||1===t.i?t.j():t.g=!0}function Se(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||ve("ES5").S(t,e,r),r?(n[Ue].P&&(be(t),te(4)),re(e)&&(e=Ce(t,e),t.l||Pe(t,e)),t.u&&ve("Patches").M(n[Ue].t,e,t.u,t.s)):e=Ce(t,n,[]),be(t),t.u&&t.v(t.u,t.s),e!==Fe?e:void 0}function Ce(e,t,n){if(ge(t))return t;var r=t[Ue];if(!r)return oe(t,(function(o,a){return Te(e,r,t,o,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Pe(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=de(r.k):r.o,a=o,i=!1;3===r.i&&(a=new Set(o),o.clear(),i=!0),oe(a,(function(t,a){return Te(e,r,o,t,a,n,i)})),Pe(e,o,!1),n&&e.u&&ve("Patches").N(r,n,e.u,e.s)}return r.o}function Te(e,t,n,r,o,a,i){if(ne(o)){var c=Ce(e,o,a&&t&&3!==t.i&&!ie(t.R,r)?a.concat(r):void 0);if(ce(n,r,c),!ne(c))return;e.m=!1}else i&&n.add(o);if(re(o)&&!ge(o)){if(!e.h.D&&e._<1)return;Ce(e,o),t&&t.A.l||Pe(e,o)}}function Pe(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&pe(t,n)}function Ee(e,t){var n=e[Ue];return(n?fe(n):e)[t]}function _e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Le(e){e.P||(e.P=!0,e.l&&Le(e.l))}function Ie(e){e.o||(e.o=de(e.t))}function Ne(e,t,n){var r=ue(t)?ve("MapSet").F(t,n):le(t)?ve("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:me(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,a=Ge;n&&(o=[r],a=He);var i=Proxy.revocable(o,a),c=i.revoke,s=i.proxy;return r.k=s,r.j=c,s}(t,n):ve("ES5").J(t,n);return(n?n.A:me()).p.push(r),r}function Oe(e){return ne(e)||te(22,e),function e(t){if(!re(t))return t;var n,r=t[Ue],o=ae(t);if(r){if(!r.P&&(r.i<4||!ve("ES5").K(r)))return r.t;r.I=!0,n=De(t,o),r.I=!1}else n=De(t,o);return oe(n,(function(t,o){r&&function(e,t){return 2===ae(e)?e.get(t):e[t]}(r.t,t)===o||ce(n,t,e(o))})),3===o?new Set(n):n}(e)}function De(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return de(e)}var je,Be,Ae="undefined"!=typeof Symbol&&"symbol"==a(Symbol("x")),Re="undefined"!=typeof Map,Ze="undefined"!=typeof Set,Me="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Fe=Ae?Symbol.for("immer-nothing"):((je={})["immer-nothing"]=!0,je),We=Ae?Symbol.for("immer-draftable"):"__$immer_draftable",Ue=Ae?Symbol.for("immer-state"):"__$immer_state",Ve=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),$e="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qe=Object.getOwnPropertyDescriptors||function(e){var t={};return $e(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Qe={},Ge={get:function(e,t){if(t===Ue)return e;var n=fe(e);if(!ie(n,t))return function(e,t,n){var r,o=_e(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!re(r)?r:r===Ee(e.t,t)?(Ie(e),e.o[t]=Ne(e.A.h,r,e)):r},has:function(e,t){return t in fe(e)},ownKeys:function(e){return Reflect.ownKeys(fe(e))},set:function(e,t,n){var r=_e(fe(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=Ee(fe(e),t),a=null==o?void 0:o[Ue];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(se(n,o)&&(void 0!==n||ie(e.t,t)))return!0;Ie(e),Le(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Ee(e.t,t)||t in e.t?(e.R[t]=!1,Ie(e),Le(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=fe(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){te(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){te(12)}},He={};oe(Ge,(function(e,t){He[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),He.deleteProperty=function(e,t){return He.set.call(this,e,t,void 0)},He.set=function(e,t,n){return Ge.set.call(this,e[0],t,n,e[0])};var Xe=function(){function e(e){var t=this;this.O=Me,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var c;if("function"!=typeof n&&te(6),void 0!==r&&"function"!=typeof r&&te(7),re(e)){var s=xe(t),u=Ne(t,e,void 0),l=!0;try{c=n(u),l=!1}finally{l?be(s):we(s)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return ye(s,r),Se(e,s)}),(function(e){throw be(s),e})):(ye(s,r),Se(c,s))}if(!e||"object"!=a(e)){if(void 0===(c=n(e))&&(c=e),c===Fe&&(c=void 0),t.D&&pe(c,!0),r){var f=[],d=[];ve("Patches").M(e,c,f,d),r(f,d)}return c}te(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,a=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,o]})):[a,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){re(e)||te(8),ne(e)&&(e=Oe(e));var t=xe(this),n=Ne(this,e,void 0);return n[Ue].C=!0,we(t),n},t.finishDraft=function(e,t){var n=(e&&e[Ue]).A;return ye(n,t),Se(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Me&&te(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=ve("Patches").$;return ne(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),Je=new Xe,Ye=Je.produce,ze=(Je.produceWithPatches.bind(Je),Je.setAutoFreeze.bind(Je),Je.setUseProxies.bind(Je),Je.applyPatches.bind(Je),Je.createDraft.bind(Je),Je.finishDraft.bind(Je),Ye);!function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Ue];return Ge.get(t,e)},set:function(t){var n=this[Ue];Ge.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][Ue];if(!o.P)switch(o.i){case 5:r(o)&&Le(o);break;case 4:n(o)&&Le(o)}}}function n(e){for(var t=e.t,n=e.k,r=$e(n),o=r.length-1;o>=0;o--){var a=r[o];if(a!==Ue){var i=t[a];if(void 0===i&&!ie(t,a))return!0;var c=n[a],s=c&&c[Ue];if(s?s.t!==i:!se(c,i))return!0}}var u=!!t[Ue];return r.length!==$e(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};!function(e,t){Qe[e]||(Qe[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),o=function(t,n){if(t){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,e(o,!0));return r}var a=qe(n);delete a[Ue];for(var i=$e(a),c=0;c<i.length;c++){var s=i[c];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:me(),P:!1,I:!1,R:{},l:n,t:t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,Ue,{value:a,writable:!0}),o},S:function(e,n,o){o?ne(n)&&n[Ue].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==a(t)){var n=t[Ue];if(n){var o=n.t,i=n.k,c=n.R,s=n.i;if(4===s)oe(i,(function(t){t!==Ue&&(void 0!==o[t]||ie(o,t)?c[t]||e(i[t]):(c[t]=!0,Le(n)))})),oe(o,(function(e){void 0!==i[e]||ie(i,e)||(c[e]=!1,Le(n))}));else if(5===s){if(r(n)&&(Le(n),c.length=!0),i.length<o.length)for(var u=i.length;u<o.length;u++)c[u]=!1;else for(var l=o.length;l<i.length;l++)c[l]=!0;for(var f=Math.min(i.length,o.length),d=0;d<f;d++)i.hasOwnProperty(d)||(c[d]=!0),void 0===c[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ke.apply(this,arguments)},et={global:0,models:{},effects:{}},tt=Ke(Ke({},et),{models:Ke({},et.models),effects:Ke({},et.effects)}),nt=function(e,t){return function(n,r){var o,a,i,c=r.name,s=r.action;return tt.global+=t,void 0===tt.models[c]&&(tt.models[c]=0),tt.models[c]+=t,void 0===tt.effects[c]&&(tt.effects[c]={}),void 0===tt.effects[c][s]&&(tt.effects[c][s]=0),tt.effects[c][s]+=t,Ke(Ke({},n),{global:e(tt.global),models:Ke(Ke({},n.models),(o={},o[c]=e(tt.models[c]),o)),effects:Ke(Ke({},n.effects),(a={},a[c]=Ke(Ke({},n.effects[c]),(i={},i[s]=e(tt.effects[c][s]),i)),a))})}},rt=function(e){void 0===e&&(e={}),function(e){if(e.name&&"string"!=typeof e.name)throw new Error("loading plugin config name must be a string");if(e.asNumber&&"boolean"!=typeof e.asNumber)throw new Error("loading plugin config asNumber must be a boolean");if(e.whitelist&&!Array.isArray(e.whitelist))throw new Error("loading plugin config whitelist must be an array of strings");if(e.blacklist&&!Array.isArray(e.blacklist))throw new Error("loading plugin config blacklist must be an array of strings");if(e.whitelist&&e.blacklist)throw new Error("loading plugin config cannot have both a whitelist & a blacklist")}(e);var t=e.name||"loading",n=!0===e.asNumber?function(e){return e}:function(e){return e>0},r={name:t,reducers:{hide:nt(n,-1),show:nt(n,1)},state:Ke({},et)};return et.global=0,r.state.global=n(et.global),{config:{models:{loading:r}},onModel:function(o){var a=this,i=o.name;if(i!==t){et.models[i]=0,r.state.models[i]=n(et.models[i]),r.state.effects[i]={};var c=this.dispatch[i];Object.keys(c).forEach((function(t){if(!0===a.dispatch[i][t].isEffect){et.effects[i][t]=0,r.state.effects[i][t]=n(et.effects[i][t]);var o=i+"/"+t;if((!e.whitelist||e.whitelist.includes(o))&&(!e.blacklist||!e.blacklist.includes(o))){var c=a.dispatch[i][t],s=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))}(a,void 0,void 0,(function(){var n,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.dispatch.loading.show({name:i,action:t}),[4,c.apply(void 0,e)];case 1:return n=o.sent(),this.dispatch.loading.hide({name:i,action:t}),[2,n];case 2:throw r=o.sent(),this.dispatch.loading.hide({name:i,action:t}),r;case 3:return[2]}}))}))};s.isEffect=!0,a.dispatch[i][t]=s}}}))}}}},ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ot.apply(this,arguments)},at={error:null,value:0},it={global:ot({},at),models:{},effects:{}},ct={global:ot({},it.global),models:ot({},it.models),effects:ot({},it.effects)};function st(e){return e<0?0:e}var ut=function(e,t){return function(n,r,o){var a,i,c,s=r.name,u=r.action;return ct.global={value:st(ct.global.value+t),error:o},void 0===ct.models[s]&&(ct.models[s]=ot({},at)),ct.models[s]={value:st(ct.models[s].value+t),error:o},void 0===ct.effects[s]&&(ct.effects[s]={}),void 0===ct.effects[s][u]&&(ct.effects[s][u]=ot({},at)),ct.effects[s][u]={value:st(ct.effects[s][u].value+t),error:o},ot(ot({},n),{global:e(ct.global),models:ot(ot({},n.models),(a={},a[s]=e(ct.models[s]),a)),effects:ot(ot({},n.effects),(i={},i[s]=ot(ot({},n.effects[s]),(c={},c[u]=e(ct.effects[s][u]),c)),i))})}},lt=function(e){void 0===e&&(e={}),function(e){if(e.name&&"string"!=typeof e.name)throw new Error("error plugin config name must be a string");if(e.asNumber&&"boolean"!=typeof e.asNumber)throw new Error("error plugin config asNumber must be a boolean");if(e.whitelist&&!Array.isArray(e.whitelist))throw new Error("error plugin config whitelist must be an array of strings");if(e.blacklist&&!Array.isArray(e.blacklist))throw new Error("error plugin config blacklist must be an array of strings");if(e.whitelist&&e.blacklist)throw new Error("error plugin config cannot have both a whitelist & a blacklist")}(e);var t=e.name||"error",n=!0===e.asNumber?function(e){return e}:function(e){return ot(ot({},e),{value:e.value>0})},r={name:t,reducers:{hide:ut(n,-1),show:ut(n,1)},state:ot({},it)};return it.global=ot({},at),r.state.global=n(it.global),{config:{models:{error:r}},onModel:function(o){var a=this,i=o.name;if(i!==t){it.models[i]=ot({},at),r.state.models[i]=n(it.models[i]),r.state.effects[i]={};var c=this.dispatch[i];Object.keys(c).forEach((function(t){if(!0===a.dispatch[i][t].isEffect){it.effects[i][t]=ot({},at),r.state.effects[i][t]=n(it.effects[i][t]);var o=i+"/"+t;if((!e.whitelist||e.whitelist.includes(o))&&(!e.blacklist||!e.blacklist.includes(o))){var c=a.dispatch[i][t],s=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))}(a,void 0,void 0,(function(){var n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(r){switch(r.label){case 0:ct.effects[i]&&ct.effects[i][t]&&ct.effects[i][t].error&&this.dispatch.error.hide({name:i,action:t},null),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.apply(void 0,e)];case 2:return[2,r.sent()];case 3:return n=r.sent(),console.error(n),this.dispatch.error.show({name:i,action:t},n),[3,4];case 4:return[2]}}))}))};s.isEffect=!0,a.dispatch[i][t]=s}}}))}}}},ft=c(29),dt=c.n(ft),pt=function(){return pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pt.apply(this,arguments)},ht=z.SET_STATE;function gt(e){return e}var vt,mt,yt,bt,wt=function(){return wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wt.apply(this,arguments)},xt=0,kt=function(e,n){var r=n||{},o=r.disableImmer,a=r.disableLoading,c=r.disableError,s=r.plugins,u=void 0===s?[]:s,l=r.redux,d=void 0===l?{}:l,p=d.middlewares||[],g=i().createContext(null);p.push(f),u.push(function(e){var t=e.context;return{onStoreCreated:function(e){return{Provider:function(n){var r=n.children,o=n.initialStates;return o&&Object.keys(o).forEach((function(t){var n=o[t];n&&e.dispatch[t][K]&&e.dispatch[t][K](n)})),i().createElement(Q,{store:e,context:t},r)},context:t}}}}({context:g})),u.push(function(e){var n=e.context,r=function(e){void 0===e&&(e=F);var n=e===F?G:function(){return(0,t.useContext)(e)};return function(e,r){void 0===r&&(r=Y);var o=n(),a=function(e,n,r,o){var a,i=(0,t.useReducer)((function(e){return e+1}),0),c=i[1],s=(0,t.useMemo)((function(){return $(r,o)}),[r,o]),u=(0,t.useRef)(),l=(0,t.useRef)(),f=(0,t.useRef)(),d=(0,t.useRef)(),p=r.getState();try{if(e!==l.current||p!==f.current||u.current){var h=e(p);a=void 0!==d.current&&n(h,d.current)?d.current:h}else a=d.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return q((function(){l.current=e,f.current=p,d.current=a,u.current=void 0})),q((function(){function e(){try{var e=r.getState();if(e===f.current)return;var t=l.current(e);if(n(t,d.current))return;d.current=t,f.current=e}catch(e){u.current=e}c()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[r,s]),a}(e,r,o.store,o.subscription);return(0,t.useDebugValue)(a),a}}(n),o=function(e){void 0===e&&(e=F);var t=e===F?J:H(e);return function(){return t().dispatch}}(n);return{onStoreCreated:function(){return{useSelector:r,useDispatch:o}}}}({context:g})),u.push({onStoreCreated:function(e){function t(e){return[n(e),r(e)]}function n(t){var n=e.useSelector((function(e){return e[t]}));if(void 0!==n)return n;throw new Error("Not found model by namespace: "+t+".")}function r(t){var n=e.useDispatch();if(n[t])return n[t];throw new Error("Not found model by namespace: "+t+".")}function o(e){var t=r(e),n=c(e),o=a(e),i={};return Object.keys(t).forEach((function(e){i[e]={isLoading:n[e],error:o[e]?o[e].error:null}})),i}function a(t){return e.useSelector((function(e){return e.error?e.error.effects[t]:void 0}))}function c(t){return e.useSelector((function(e){return e.loading?e.loading.effects[t]:void 0}))}function s(e){return[u(e),l(e)]}function u(t){return e.getState()[t]}function l(t){return e.dispatch[t]}function f(e,n){return n=n||function(t){var n;return(n={})[e]=t,n},function(r){return function(o){var a=t(e),c=n(a);return i().createElement(r,ee({},c,o))}}}var d,p=(void 0===d&&(d="Dispatchers"),function(e,t){return t=t||function(t){var n;return(n={})[""+e+d]=t,n},function(n){return function(o){var a=r(e),c=t(a);return i().createElement(n,ee({},c,o))}}}),h=function(e){return void 0===e&&(e="EffectsState"),function(t,n){return n=n||function(n){var r;return(r={})[""+t+e]=n,r},function(e){return function(r){var a=o(t),c=n(a);return i().createElement(e,ee({},c,r))}}}}();function g(e,t){return t=t||function(t){var n;return(n={})[e+"EffectsError"]=t,n},function(n){return function(r){var o=a(e),c=t(o);return i().createElement(n,ee({},c,r))}}}function v(e,t){return t=t||function(t){var n;return(n={})[e+"EffectsLoading"]=t,n},function(n){return function(r){var o=c(e),a=t(o);return i().createElement(n,ee({},a,r))}}}return{getModelAPIs:function(e){return{useValue:function(){return t(e)},useState:function(){return n(e)},useDispatchers:function(){return r(e)},useEffectsState:function(){return o(e)},useEffectsError:function(){return a(e)},useEffectsLoading:function(){return c(e)},getValue:function(){return s(e)},getState:function(){return u(e)},getDispatchers:function(){return l(e)},withValue:function(t){return f(e,t)},withDispatchers:function(t){return p(e,t)},withEffectsState:function(t){return h(e,t)},withEffectsError:function(t){return g(e,t)},withEffectsLoading:function(t){return v(e,t)}}},useModel:t,useModelState:n,useModelDispatchers:r,useModelEffectsState:o,useModelEffectsError:a,useModelEffectsLoading:c,getModel:s,getModelState:u,getModelDispatchers:l,withModel:f,withModelDispatchers:p,withModelEffectsState:h,withModelEffectsError:g,withModelEffectsLoading:v}}});var v,m,y,b=[];a||(u.push(rt()),b.push("loading")),c||(u.push(lt()),b.push("error")),o||u.push((void 0===(m={blacklist:b})&&(m={}),{config:{redux:{combineReducers:(y=m.blacklist,void 0===y&&(y=[]),function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];t[n]=function(e,t){return"object"!==h(e)||y.includes(n)?r(e,t):ze(e,(function(e){var n=r(e,t);if("object"===h(n))return n}))}})),P(t)})}}})),v=e,Object.keys(v).forEach((function(e){var t=v[e];if(t.effects&&!dt()(t.effects))throw new Error("Model("+e+"): Defining effects as objects has been detected, please use `{ effects: () => ({ effectName: () => {} }) }` instead. \n\n\n Visit https://github.com/ice-lab/icestore/blob/master/docs/upgrade-guidelines.md#define-model-effects to learn about how to upgrade.");if(t.actions)throw new Error("Model("+e+"): The actions field has been detected, please use `reducers` and `effects` instead. Visit https://github.com/ice-lab/icestore/blob/master/docs/upgrade-guidelines.md#define-model-actions to learn about how to upgrade.")}));var w=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];r.reducers||(r.reducers={}),r.reducers.setState||(r.reducers.setState=function(e,t){return pt(pt({},e),t)}),r.reducers[ht]||(r.reducers[ht]=function(e,t){return t}),t[n]=r})),t}(e);return function(e){void 0===e&&(e={});var t=e.name||xt.toString();xt+=1;var n=function(e){for(var t=R(R({name:e.name,models:{},plugins:[]},e),{redux:R(R({reducers:{},rootReducers:{},enhancers:[],middlewares:[]},e.redux),{devtoolOptions:R({name:e.name},e.redux&&e.redux.devtoolOptions?e.redux.devtoolOptions:{})})}),n=0,r=t.plugins;n<r.length;n++){var o=r[n];if(o.config){var a=M(t.models,o.config.models);t.models=a,t.plugins=Z(t.plugins,o.config.plugins||[]),o.config.redux&&(t.redux.initialStates=M(t.redux.initialStates,o.config.redux.initialStates),t.redux.reducers=M(t.redux.reducers,o.config.redux.reducers),t.redux.rootReducers=M(t.redux.rootReducers,o.config.redux.reducers),t.redux.enhancers=Z(t.redux.enhancers,o.config.redux.enhancers||[]),t.redux.middlewares=Z(t.redux.middlewares,o.config.redux.middlewares||[]),t.redux.combineReducers=t.redux.combineReducers||o.config.redux.combineReducers,t.redux.createStore=t.redux.createStore||o.config.redux.createStore)}}return t}(wt(wt({},e),{name:t}));return new A(n).init()}({models:w,plugins:u,redux:wt(wt({},d),{middlewares:p})})},St=function(e,t,n){var r,o="model";t=t||function(e){var t;return(t={})[o]=e,t};var a=kt(((r={})[o]=e,r),n),c=a.Provider,s=t((0,a.getModelAPIs)(o));return function(e){return function(t){return i().createElement(c,null,i().createElement(e,wt({},s,t)))}}},Ct=n(92954),Tt=c.n(Ct),Pt=!1,Et=function(){return"function"!=typeof Tt().getLaunchOptionsSync?{fakeDate:!1}:(null===(e=Tt().getLaunchOptionsSync())||void 0===e?void 0:e.query)||{fakeDate:!1};var e},_t=function(){var e,t;return"release"!==("function"==typeof(null===Tt()||void 0===Tt()?void 0:Tt().getAccountInfoSync)&&(null===(e=Tt().getAccountInfoSync())||void 0===e||null===(t=e.miniProgram)||void 0===t?void 0:t.envVersion))&&(Et().playback||Pt)},Lt=function(e,t,n){var r=e[t];e[t]=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=r.apply(void 0,t);if(!n({args:t,res:a}))return a}},It={base64:{key:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",btoa:function(e,t){for(var n=(t=t||{}).key||It.base64.key,r="",o=0,a=t.charCodeArray?function(t){return e[t]}:function(t){return e.charCodeAt(t)};o<e.length;){var i=a(o++),c=a(o++),s=a(o++);r+=n[i>>2]+n[(3&i)<<4|c>>4]+n[isNaN(c)?64:(15&c)<<2|s>>6]+n[isNaN(s)?64:63&s]}return r},encode:function(e){return It.base64.btoa(unescape(encodeURIComponent(e)))}}},Nt=It.base64.encode,Ot=function(){return!!Et().coffeebean},Dt=function(e){return e instanceof Error?{message:e.message,stack:e.stack}:"string"==typeof e?e:JSON.stringify(e)};function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t,n){return t&&Zt(e.prototype,t),n&&Zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(e){e.MINI_INIT="MINI_INIT",e.INIT_PAGE="INIT_PAGE",e.AJAX="AJAX",e.FN="FN",e.STORAGE_LOAD="STORAGE_LOAD",e.GET_AJAX_LIST="GET_AJAX_LIST",e.GET_STORAGE="GET_STORAGE",e.MINI_PAGE_SCROLL="MINI_PAGE_SCROLL",e.SCROLL_VIEW_SCROLL="SCROLL_VIEW_SCROLL",e.INIT_LOAD_DATA="INIT_LOAD_DATA"}(vt||(vt={})),function(e){e.REQUEST_RUN_TYPE="REQUEST_RUN_TYPE",e.READY="READY",e.STEP="STEP",e.ERROR="ERROR",e.REPLAY_STEP="REPLAY_STEP",e.EXEC_STEP="EXEC_STEP",e.STOP_RECORD="STOP_RECORD",e.EXPECT="EXPECT"}(mt||(mt={})),function(e){e.RECORD="RECORD",e.REPLAY="REPLAY"}(yt||(yt={})),function(e){e.ADD="ADD"}(bt||(bt={}));var Ft,Wt="%c[coffeebean]",Ut=Ot(),Vt=Ut?console.log.bind(console,Wt,"color:cyan"):function(){},$t=Ut?console.error.bind(console,Wt,"color:cyan"):function(){},qt="0.5.9",Qt="$COFFEEBEAN_INIT$",Gt=0,Ht=function(e){return e.replace(/.+(\d{4})(\d{2})(\d{2}).+/,"$1-$2-$3")},Xt=function(){function e(t){Rt(this,e),jt(this,"devData",[]),jt(this,"data",[]),jt(this,"routeMap",new Map),jt(this,"lastIdx",-1),jt(this,"idx",0),jt(this,"prevScrollInfo",null),jt(this,"prevScrollID",void 0),jt(this,"reqBaseParam",{}),jt(this,"sendLocker",!1),jt(this,"token",function(){var e=new Date,t=e.getFullYear(),n="0"+(e.getMonth()+1),r="0"+e.getDate();return Gt++,"".concat("PRD","-").concat(0,"-").concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),"-").concat(t).concat(n.slice(-2)).concat(r.slice(-2),"-").concat(Gt,"-").concat(qt,"-MINI")}()),jt(this,"collectSwitch",!0),e.$instanceList.push(this),e.instance=this,t&&this.setSaveReqParam(t)}return Mt(e,[{key:"bindRoute",value:function(e){this.routeMap.set(e,!0)}},{key:"unBindRoute",value:function(e){return this.routeMap.delete(e),0===this.routeMap.size&&(this.save(!1),!0)}},{key:"hasRoute",value:function(){return this.routeMap.size>0}},{key:"setSaveReqParam",value:function(e){this.reqBaseParam=At({},e)}},{key:"createSaveReqParam",value:function(e){return At(At({},this.reqBaseParam),{},{token:this.token,replayContent:e})}},{key:"setCollectSwitch",value:function(e){this.collectSwitch=e}},{key:"getLastItem",value:function(){return this.data[this.data.length-1]}},{key:"isScrollItem",value:function(e){return[vt.SCROLL_VIEW_SCROLL,vt.MINI_PAGE_SCROLL].includes(e)}},{key:"add",value:function(t){if(this.collectSwitch){var n=At({ts:Date.now(),idx:this.idx},t);this.data.push(n),Ot()&&this.devData.push(n),this.idx++,this.isScrollItem(t.eventType)||(this.prevScrollInfo=null),e.events[bt.ADD]&&e.events[bt.ADD].forEach((function(e){return e(n)}))}}},{key:"addPage",value:function(t,n){this.add({eventType:vt.INIT_PAGE,eventParam:t,eventExtend:{params:n,miniInitData:e.miniInitData}})}},{key:"addInit",value:function(t){this.add(t),e.miniInitData=t}},{key:"checkScrollInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(e){case"+":return t>=n?"":"-";case"-":return t<=n?"":"+";default:return t>n?"+":t<n?"-":""}}},{key:"addScroll",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.SCROLL_VIEW_SCROLL,o=t.scrollTop,a=t.scrollLeft,i=t.route,c=this.getLastItem();this.prevScrollID&&clearTimeout(this.prevScrollID),this.prevScrollID=setTimeout((function(){n.prevScrollInfo=null}),1e3);var s=!0,u="",l="";c&&this.prevScrollInfo&&this.prevScrollInfo.eventType===r&&((u=this.checkScrollInfo(this.prevScrollInfo.scrollLeftType,a,this.prevScrollInfo.scrollLeft))||(c.ts=+new Date,c.eventExtend.scrollLeft=a,s=!1),(l=this.checkScrollInfo(this.prevScrollInfo.scrollTopType,o,this.prevScrollInfo.scrollTop))||(c.ts=+new Date,c.eventExtend.scrollTop=o,s=!1)),this.prevScrollInfo&&(this.prevScrollInfo.scrollLeftType=u,this.prevScrollInfo.scrollTopType=l),s&&(this.prevScrollInfo={eventType:r,scrollTop:o||0,scrollLeft:a||0,scrollLeftType:u,scrollTopType:l},this.add({eventType:r,eventParam:e,eventExtend:{scrollTop:o,scrollLeft:a,route:i}}))}},{key:"addGetStorage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.add({eventType:vt.STORAGE_LOAD,eventParam:e,eventExtend:{params:{value:t},isCWX:n}})}},{key:"addInitLoadData",value:function(e,t){this.add({eventType:vt.INIT_LOAD_DATA,eventParam:e,eventExtend:{data:t}})}},{key:"addFn",value:function(e,t){this.add({eventType:vt.FN,eventParam:e,eventExtend:t})}},{key:"getSendData",value:function(){return this.data}},{key:"getSendContentList",value:function(){return Vt("getSendContentList",this.data),this.data.length?(this.lastIdx=this.data[this.data.length-1].idx,function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,n=[],r=Math.ceil(e.length/t),o=0;o<r;o++)n.push(e.slice(0,t)),e=e.slice(t);return n}(Nt(JSON.stringify(this.data)))):[]}},{key:"clearData",value:function(){var e=this;this.data=this.data.filter((function(t){return t.idx>e.lastIdx}))}},{key:"addRequest",value:function(e,t){this.add({eventType:vt.AJAX,eventParam:e,eventExtend:t})}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Vt("validate",JSON.stringify(this.reqBaseParam)),!(e&&this.sendLocker||!this.collectSwitch||!this.getSendData().length)}},{key:"send",value:function(t){var n=e.cwx;return new Promise((function(e,r){n.request({url:"/restapi/soa2/20589/SaveTraceInfo?_fxpcqlniredt",header:{"Content-Type":"application/json"},data:t,success:function(t){e(t)},fail:function(e){r(e)}})}))}},{key:"save",value:function(e){var t=this;if(this.validate(e)){this.sendLocker=!0;var n=+new Date,r=this.getSendContentList()||[],o=r.length;Promise.all(r.map((function(e,r){var a="{spID=".concat(r,",gID=").concat(n,",len=").concat(o,"}")+e,i=t.createSaveReqParam(a);return t.send(i)}))).then((function(e){t.sendLocker=!1,t.clearData(),Vt(t.token,"save success",e)})).catch((function(e){t.sendLocker=!1,$t(t.token,"save error",e)}))}}},{key:"getToken",value:function(){return this.token}}],[{key:"on",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"onPageUnload",value:function(t){var n=e.instance.unBindRoute(t);if(Vt("onPageUnload",n),n){var r=e.$instanceList.pop();e.instance=e.$instanceList[e.$instanceList.length-1],r&&e.instance.setSaveReqParam(r.reqBaseParam)}}},{key:"useNewToken",value:function(t){return new e(At({},e.instance.reqBaseParam)),e.instance.bindRoute(t),e.instance.token}}]),e}();function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e){return zt="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},zt(e)}jt(Xt,"cwx",void 0),jt(Xt,"$instanceList",[]),jt(Xt,"instance",void 0),jt(Xt,"miniInitData",void 0),jt(Xt,"events",{}),Object.defineProperty(Xt,"instance",{get:function(){return Ft||(Ft=new Xt)},set:function(e){Ft=e}}),new Map;var Kt=function(e){return"object"===zt(e[0])?e[0].key:e[0]},en=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=n.args,o=n.res;Promise.resolve(o).then((function(n){var o=Kt(r);!e.has(o)&&n&&(Xt.instance.addGetStorage(o,n,t),e.add(o))}))}},tn=function(e){return function(t){var n=t.args,r=Kt(n);e.add(r)}},nn=function(e){return function(t){var n=t.args,r=Kt(n);e.delete(r)}},rn=function(e,t,n){var r=e.apply(void 0,Yt(t));if(!n({args:t,res:r}))return r},on=function(e){var t=new Set;return{getStorage:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return rn(e.getStorage,r,en(t,!0))},setStorage:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return rn(e.setStorage,r,tn(t))},getStorageSync:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return rn(e.getStorageSync,r,en(t,!0))},setStorageSync:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return rn(e.setStorageSync,r,tn(t))}}},an={},cn=function(){function e(t,n){var o,a,i,s;Rt(this,e),jt(this,"config",void 0),jt(this,"tid",void 0),jt(this,"sendLocker",void 0),jt(this,"dep",void 0),this.dep=n,this.config=At({code:"",env:Tt().getEnv(),extendCommon:"",autoInterval:5e3,path:""},t),this.sendLocker=!1,this.initQConfig(),t.requestConfig&&(s=t.requestConfig,an=At(At({},an),s));var u=n.cwx,l=u.getSystemInfoSync(),f=l.windowWidth,d=l.windowHeight,p=l.pixelRatio,h=l.language,g=null===(o=function(){switch("weapp"){case"weapp":return wx;case"swan":return swan;case"alipay":return my;case"tt":return Page;case"qq":return qq;case"quickapp":default:return{};case"h5":return r}}())||void 0===o?void 0:o.buildId,v="function"==typeof(null===Tt()||void 0===Tt()?void 0:Tt().getAccountInfoSync)&&(null===(a=Tt().getAccountInfoSync())||void 0===a||null===(i=a.miniProgram)||void 0===i?void 0:i.envVersion);Ot()&&(c.g.ActionList=Xt.instance),Xt.cwx=u;var m,y={code:this.config.code||"",bizCode:this.config.bizCode||"",orderid:this.config.orderid||0,tsid:this.config.transactionid||"",replayType:"MINI-"+this.config.env,uid:this.config.uid||"",version:qt,extend:this.config.extendCommon||""};Xt.instance.setSaveReqParam(y),Xt.instance.addInit({eventType:vt.MINI_INIT,eventParam:g,eventExtend:{w:f,h:d,pr:p,locale:h,taroEnv:this.config.env,tzo:(new Date).getTimezoneOffset()}}),m=new Set,Lt(Tt(),"getStorageSync",en(m)),Lt(Tt(),"getStorage",en(m)),Lt(Tt(),"setStorageSync",tn(m)),Lt(Tt(),"setStorage",tn(m)),Lt(Tt(),"removeStorageSync",nn(m)),Lt(Tt(),"removeStorage",nn(m)),this.auto(),"release"===v&&g&&u.mcdAppId&&Xt.instance.send(At(At({},y),{},{extend:JSON.stringify({buildId:g,mcdAppId:u.mcdAppId}),token:Xt.instance.token,replayType:"MINI",replayContent:"START"})).catch($t)}return Mt(e,[{key:"auto",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.tid=setTimeout((function(){e.save(),e.auto(t)}),t)}},{key:"initQConfig",value:function(){var e=this;return Vt("initQConfig"),new Promise((function(t,n){e.dep.cwx.request({url:"/restapi/soa2/16163/GetConfigInfo?_fxpcqlniredt",header:{"Content-Type":"application/json"},data:{},success:t,fail:n})})).then((function(e){var t=JSON.parse(e.data.text);return Et().coffeebean||t.switch&&Math.random()<=t.ratio?(Vt("initQConfig 1"),Xt.instance.setCollectSwitch(!0)):(Vt("initQConfig 2"),Xt.instance.setCollectSwitch(!1)),e})).catch((function(e){Xt.instance.setCollectSwitch(!1),$t("initQConfig catch",e)}))}},{key:"save",value:function(){Xt.instance.save(this.dep.cwx)}},{key:"trackPage",value:function(){var e,t=this.config.path,n=Tt().getCurrentPages(),r=n[n.length-2],o=n[n.length-1],a=(null==r||null===(e=r.route)||void 0===e?void 0:e.indexOf(t))>-1;if(o&&(a||!Xt.instance.hasRoute()?Xt.instance.bindRoute(o.route):Xt.useNewToken(o.route),!o[Qt])){var i=o.onUnload;o.onUnload=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(o,t),Vt("currentPage.route",o.route,t),Xt.onPageUnload(o.route)},o[Qt]=!0}}},{key:"getToken",value:function(){return Xt.instance.token}}]),e}();function sn(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function un(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sn(a,r,o,i,c,"next",e)}function c(e){sn(a,r,o,i,c,"throw",e)}i(void 0)}))}}var ln=c(786),fn=c.n(ln),dn=function(){function e(t,n){if(Rt(this,e),jt(this,"token",void 0),jt(this,"res",void 0),e.current=this,this.token=t,!n)throw Error("\u56de\u6eaf\u6570\u636e\u4e0d\u5b58\u5728 res:".concat(n," token:").concat(t));this.res=n}return Mt(e,[{key:"getActionList",value:function(){return this.res.actionList.filter((function(e){return![vt.MINI_INIT].includes(e.eventType)}))}},{key:"getRequestItem",value:function(e){return this.res.requestList.filter((function(t){return!t.played&&t.eventParam.indexOf(e.replace(/.+\/platform-taro/,""))>-1}))[0]}},{key:"getInitItem",value:function(){return this.res.actionList.filter((function(e){return e.eventType===vt.MINI_INIT}))[0]}},{key:"getJumpInfo",value:function(){var e,t,n=this.res.actionList.filter((function(e){return e.eventType===vt.INIT_PAGE}))[0];if(!n)return null;var r=null==n?void 0:n.eventParam;return{url:r?"/"+r:"",data:null===(e=n.eventExtend)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.data}}},{key:"getInitLoadData",value:function(e){var t,n=this.res.actionList.filter((function(t){return t.eventParam===e&&t.eventType===vt.INIT_LOAD_DATA}))[0];return null==n||null===(t=n.eventExtend)||void 0===t?void 0:t.data}}]),e}();jt(dn,"current",void 0);var pn,hn={code:"",setConfig:function(e){hn.code=e.code},fetch:(pn=un(fn().mark((function e(t,n,r){var o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,o){var a=Ht(n);Vt("tokenDate",a),r({url:t,header:{"Content-Type":"application/json"},data:{code:hn.code,token:n,sTime:"".concat(a," 00:00:00"),eTime:"".concat(a," 23:59:59")},success:e,fail:o})}));case 2:return o=e.sent,Vt("data",o.data),e.abrupt("return",new dn(n,o.data));case 5:case"end":return e.stop()}}),e)}))),function(e,t,n){return pn.apply(this,arguments)})},gn={},vn=function(){},mn=function(e){Vt("mockFn",e.eventParam);var t=gn[e.eventParam];if(!t)return!0;try{t&&t.apply(void 0,Yt(e.eventExtend.args.map((function(e){return"TaroEvent"===e.__type__&&(e.stopPropagation=vn),e}))))}catch(e){console.error(e)}},yn=function(e){Vt("fireScroll",e);var t=o.getElementById(e.eventParam);Vt("elem",t,null==t?void 0:t.scrollTo,Tt()),t?Tt().createSelectorQuery().select("#"+e.eventParam).node().exec((function(t){t[0].node.scrollTo({top:e.eventExtend.scrollTop,left:e.eventExtend.scrollLeft})})):Tt().pageScrollTo({scrollTop:e.eventExtend.scrollTop})},bn=function(e){Tt().pageScrollTo({scrollTop:e.eventExtend.scrollTop})},wn=function(){var e=un(fn().mark((function e(t,n){var r;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dn.current.getInitLoadData(t),e.abrupt("return",n(r));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xn=n(32180),kn=!0;function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e,t){return Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cn(e,t)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}function Pn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var En=n(71515);function _n(e,t,n){return _n=Pn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Cn(o,n.prototype),o},_n.apply(null,arguments)}var Ln,In=function(e){r.__RealDate=r.__RealDate||r.Date;var t=r.__RealDate,n=t.now(),o=new t(e).getTime(),a=function(){return+(t.now()-n+o)};r.Date=new Proxy(r.Date,{construct:function(e,t){return 0===t.length?new e(a()):_n(e,Yt(t))},get:function(e,t){return"now"===t?function(){return new e(a()).getTime()}:Reflect.get(e,t)}})},Nn=function(){function e(t,n,r){var o=this,a=r.onFinish,i=r.isRecordModel;Rt(this,e),jt(this,"handlerMap",void 0),jt(this,"processList",void 0),jt(this,"totalDelay",void 0),jt(this,"tid",void 0),this.handlerMap=n,this.totalDelay=0,this.processList=t,function e(){o.tid=setTimeout((function(){o.run(),i||o.processList.length?e():a&&a()}),300)}()}return Mt(e,[{key:"stop",value:function(){clearTimeout(this.tid)}},{key:"addAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.processList.push(At(At({},e),{},{delay:t}))}},{key:"run",value:function(){var e=this;this.totalDelay+=300;var t=[];this.processList.forEach((function(n){if(n.delay>e.totalDelay)t.push(n);else{var r=(n.retryTimes||0)+1;Vt("fire action",n,"times:",r),e.handlerMap[n.eventType]&&e.handlerMap[n.eventType](n)&&(r<10?t.push(At(At({},n),{},{retryTimes:r})):(o="o_flight_coffeebean_mini_dev",a=n,(c=(i=Tt().getCurrentPages())[i.length-1])&&c.ubtDevTrace?(c.ubtDevTrace(o,a),Vt("[ubtDevTrace]",o,a)):Vt("[ubtDevTrace error]","page",!c,"ubtTrace",!c.ubtDevTrace,o,a),Vt("error action",n)))}var o,a,i,c})),this.processList=t}}]),e}(),On=function(){function e(t){Rt(this,e),jt(this,"socketTask",void 0),jt(this,"messageQueue",[]),jt(this,"config",void 0),this.config=At({},t),this.init()}return Mt(e,[{key:"init",value:function(){var e=this,t=this.config,n=t.cwx,r=t.url,o=n.connectSocket({url:r,header:{sourceGroup:"fltest_minitset"},success:function(){Vt("WebSocket connection success")},fail:function(e){$t("WebSocket connection fail",e)}});o.onOpen((function(){Vt("WebSocket connection opened"),e.socketTask=o,o.send({data:JSON.stringify({name:"coffeebean_client"})}),e.messageQueue.forEach((function(t){e.socketTask.send({data:JSON.stringify(t.message)})}))})),o.onClose((function(){Vt("WebSocket connection closed"),e.socketTask=null})),o.onError((function(e){Tt().showModal({title:"WebSocket connection error",content:JSON.stringify({url:r,error:e})}),$t("WebSocket connection error",e)})),o.onMessage((function(t){try{var n,r,a=JSON.parse(t.data);e.messageQueue=e.messageQueue.filter((function(e){return e.message.messageID===a.messageID&&e.resolve(a),e.message.messageID!==a.messageID})),null===(n=(r=e.config.onReceiveMessage)[a.cmd])||void 0===n||n.call(r,{message:a,sendFn:function(e){o.send({data:JSON.stringify(At(At({},a),{},{data:e,name:"coffeebean_client"}))})}}),Vt("WebSocket received message",a)}catch(e){$t("WebSocket received message Error",e)}}))}},{key:"waitAllMessageSend",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return new Promise((function(n,r){var o=setTimeout((function(){r("waitAllMessageSend timeout")}),t),a=setInterval((function(){0===e.messageQueue.length&&(clearTimeout(o),clearInterval(a),n())}),100)}))}},{key:"send",value:function(e){var t=this;return new Promise((function(n,r){var o=setTimeout((function(){r("socket send timeout")}),1e4),a=At(At({},e),{},{messageID:"C_"+Date.now()});t.messageQueue.push({message:a,resolve:function(e){clearTimeout(o),n(e)}}),Vt("WebSocket send message",a),t.socketTask&&t.socketTask.send({data:JSON.stringify(a)})}))}},{key:"sendError",value:function(e){return this.send({cmd:mt.ERROR,data:{detail:Dt(e)}})}}]),e}(),Dn=new Map,jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return new Promise((function(t,n){var r=setTimeout((function(){n("waitAllRequestMapDone timeout")}),e),o=setInterval((function(){0===Dn.size&&(clearTimeout(r),clearInterval(o),t())}),100)}))},Bn=function e(t,n,r){var o=n.url,a=n.data,i=r.times,c=void 0===i?0:i,s=r.guid,u=void 0===s?o+Date.now():s,l=new Promise((function(n,r){t({url:o,header:{"Content-Type":"application/json"},data:a,success:function(i){Vt(i),i.data.isSuccess?(Dn.delete(u),Vt("saveRequest success",i.data),n(i.data)):c<3?n(e(t,{url:o,data:a},{times:c+1,guid:u})):(Dn.delete(u),r(i.data))},fail:function(i){c<3?n(e(t,{url:o,data:a},{times:c+1,guid:u})):(Dn.delete(u),r(i))}})}));return Dn.has(u)||Dn.set(u,l),l},An=function(e){var t=e.socketService,n=e.cwx,r=e.page,o=e.message,a=o.data.url||"/pages/flight/pages/home/index",i=o.data.saveUrl||"http://test.storage.fws.qa.nt.ctripcorp.com/api/saveEventData";new Nn([],{},{onFinish:function(){},isRecordModel:!0}),Vt("navigateTo",a),Xt.on(bt.ADD,function(){var e=un(fn().mark((function e(r){return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(![vt.FN,vt.SCROLL_VIEW_SCROLL,vt.MINI_PAGE_SCROLL].includes(r.eventType)){e.next=5;break}return e.next=3,t.send({cmd:mt.STEP,data:{token:Xt.instance.token,action:r}});case 3:e.next=7;break;case 5:Vt("saveRequest",Xt.instance.token,r.eventType),Bn(n.request,{url:i,data:{token:Xt.instance.token,eventData:JSON.stringify([r])}},{}).then((function(e){Vt("saveRequest success",e)})).catch((function(e){t.sendError(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.navigateTo({url:a,success:function(){return Vt("navigateTo success")},fail:function(e){return $t("navigateTo fail",e)}})},Rn=function(){var e=un(fn().mark((function e(t){var n,r,o,a,i,c,s,u,l,f,d;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.socketService,r=t.cwx,o=t.page,a=t.message,Pt=!0,i=a.data,c=i.queryUrl,s=void 0===c?"http://test.storage.fws.qa.nt.ctripcorp.com/api/queryEventData":c,u=i.token,e.next=5,Bn(r.request,{url:s,data:{token:u}},{}).catch((function(e){n.sendError(e)}));case 5:if(l=e.sent){e.next=8;break}return e.abrupt("return");case 8:["storageList","requestList"].forEach((function(e){l[e]=l[e].map((function(e){return e.eventExtend=JSON.parse(e.eventExtendString),e}))})),f=new dn(u,l),o.mockEnv(f),o.mockStorage(f),Vt("uiReplay",u,l,f),d=f.getJumpInfo(),Vt("info",d),o.navigateTo(At(At({},d),{},{complete:function(){n.send({cmd:mt.READY,data:{}})},fail:function(e){n.sendError(e)}}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zn=function(){var e=un(fn().mark((function e(t){return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("expectFn",t),e.abrupt("return",{result:!0,msg:""});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn=function(e){Zn=e},Fn=function(){var e=un(fn().mark((function e(t){return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wn=function(){var e=un(fn().mark((function e(t,n,r){var o,a,i,c,s;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jt(o={},vt.FN,mn),jt(o,vt.SCROLL_VIEW_SCROLL,yn),jt(o,vt.MINI_PAGE_SCROLL,bn),i=o,c=new On({cwx:n,url:decodeURIComponent(t),onReceiveMessage:(a={},jt(a,mt.EXPECT,function(){var e=un(fn().mark((function e(t){var n,r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.sendFn,e.next=3,Fn(n.data).catch((function(e){return $t(e),{result:!1,detail:Dt(e)}}));case 3:o=e.sent,r(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jt(a,mt.STOP_RECORD,function(){var e=un(fn().mark((function e(t){var n,r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sendFn,Xt.instance.collectSwitch=!1,e.next=4,jn().catch((function(e){return e}));case 4:return r=e.sent,e.next=7,c.waitAllMessageSend().catch((function(e){return e}));case 7:o=e.sent,n({isFinish:!(r||o),requestErrMsg:r,socketErrMsg:o});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jt(a,mt.REPLAY_STEP,function(){var e=un(fn().mark((function e(t){var n,r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.sendFn,e.next=3,new Promise((function(e,t){var r=setTimeout((function(){clearInterval(o),t("REPLAY_STEP timeout")}),15e3),o=setInterval((function(){i[n.data.eventType](n.data)||(clearInterval(o),clearTimeout(r),e({result:!0,msg:""}))}),100)})).catch((function(e){return $t(e),{result:!1,detail:Dt(e)}}));case 3:o=e.sent,r(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jt(a,mt.EXEC_STEP,(function(e){var t=e.message,n=e.sendFn;Vt(t),n({result:!0,msg:""})})),a)}),e.next=4,c.send({cmd:mt.REQUEST_RUN_TYPE,data:{}});case 4:s=e.sent,e.t0=s.data.runType,e.next=e.t0===yt.RECORD?8:e.t0===yt.REPLAY?10:13;break;case 8:return An({socketService:c,cwx:n,page:r,message:s}),e.abrupt("break",14);case 10:return e.next=12,Rn({socketService:c,cwx:n,page:r,message:s});case 12:case 13:return e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e[e.START_RECORD=1]="START_RECORD",e[e.STOP_RECORD=2]="STOP_RECORD"}(Ln||(Ln={}));var Un,Vn=function(e,t,n){var r=function(){var e=un(fn().mark((function e(n,r){var o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){Ot()?(Vt("changeUITaskStatus",e.url,e.data),setTimeout((function(){e.success({data:{success:!0}})}),1e3)):t.request(e)},e.abrupt("return",new Promise((function(e){o({url:decodeURIComponent(null==r?void 0:r.aUrl),header:{"Content-Type":"application/json"},data:{key:null==r?void 0:r.airTestToken,status:n},success:function(t){t.data.success?e(!0):($t(t.data),e(!1))},fail:function(t){$t(t),e(!1)}})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return n&&n({setExpectFn:Mn}),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cn(e,t)}(u,e);var n,o,a,c,s=(a=u,c=Pn(),function(){var e,t=Tn(a);if(c){var n=Tn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}(this,e)});function u(){var e;Rt(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return jt(Sn(e=s.call.apply(s,[this].concat(n))),"coffeebeanActionRunner",void 0),e}return Mt(u,[{key:"mockEnv",value:function(e){var t=e.getInitItem();null!=t&&t.ts&&new In(+t.ts)}},{key:"mockStorage",value:function(e){Vt("replayData",e),Tt().setStorageSync("flight_scrollView_enhanced",1),e.res.storageList.forEach((function(e){var n,r=e.eventExtend.isCWX,o="string"==typeof e.eventExtend.params.value?e.eventExtend.params.value:null===(n=e.eventExtend.params.value)||void 0===n?void 0:n.data;r?t.setStorageSync(e.eventParam,o):Tt().setStorageSync(e.eventParam,o)}))}},{key:"jump",value:(o=un(fn().mark((function e(t){var n,o,a,i,c=this;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getJumpInfo(),a=null===(n=(0,Ct.getCurrentInstance)().router)||void 0===n?void 0:n.params,Vt("navigateTo",o),i=Boolean((null==a?void 0:a.airTestToken)&&(null==a?void 0:a.aUrl)),!o){e.next=14;break}if(!i){e.next=11;break}return e.next=8,r(Ln.START_RECORD,a);case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:this.navigateTo(At(At({},o),{},{complete:function(e){var t;Vt("navigateTo complete",e);var n=dn.current.getActionList();Vt("actionList",n);var o=(jt(t={},vt.FN,mn),jt(t,vt.SCROLL_VIEW_SCROLL,yn),jt(t,vt.MINI_PAGE_SCROLL,bn),t);c.coffeebeanActionRunner=new Nn(n,o,{isRecordModel:!1,onFinish:function(){i&&r(Ln.STOP_RECORD,a)}})}})),e.next=15;break;case 14:console.error("\u672a\u83b7\u53d6\u5230\u8df3\u8f6curl\uff0c\u65e0\u6cd5\u56de\u6eaf \uff08\u53ef\u80fd\u6570\u636e\u4e0d\u5168\uff09",t);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"autoCheckPage",value:function(e){setInterval((function(){var n=Tt().getCurrentPages(),r=n[n.length-1];null!=r&&r.route&&!e.res.pageList.includes(null==r?void 0:r.route)&&(Vt("autoCheckPage navigateBack"),t.navigateBack()),console.log("currentPage",r)}),5e3)}},{key:"onLoad",value:(n=un(fn().mark((function e(){var n,r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=(0,Ct.getCurrentInstance)().router)||void 0===n?void 0:n.params,Vt("before fetch"),null==r||!r.flyTestSocket){e.next=4;break}return e.abrupt("return",Wn(r.flyTestSocket,t,this));case 4:if(null==r||!r.url||null==r||!r.token){e.next=8;break}return e.next=7,hn.fetch(decodeURIComponent(r.url),r.token,t.request).catch((function(e){Vt("err",e)}));case 7:o=e.sent;case 8:if(!o){e.next=16;break}return this.mockEnv(o),this.mockStorage(o),this.autoCheckPage(o),e.next=14,this.jump(o);case 14:e.next=17;break;case 16:console.error("token",null==r?void 0:r.token,"replayData\u83b7\u53d6\u5931\u8d25\u65e0\u6cd5\u56de\u6eaf");case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return i().createElement(En.View,null,i().createElement(En.Text,null,"loading...."))}}]),u}(e)},$n=function(e,t){var n=t.cwx;Tt().getEnv()!==Ct.ENV_TYPE.WEB&&(_t()?(hn.setConfig(e),Vt("isPlaybackModel")):Un||(Un=new cn(e,{cwx:n})))},qn=function(e,t){return _t()?function(e,t){return gn[e]=function(){t.apply(void 0,arguments)},function(){t.apply(void 0,arguments)}}(e,t):function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];try{var a,i,c={args:r.map((function(e){return e instanceof xn.TaroEvent?(i=e,{__type__:"TaroEvent",detail:e.detail,type:e.type}):e}))};if(1===c.args.length&&"scroll"===(null===(a=i)||void 0===a?void 0:a.type)){var s={scrollTop:i.detail.scrollTop,scrollLeft:i.detail.scrollLeft,route:(u=Tt().getCurrentPages(),u.length?u[u.length-1].route:"")};Xt.instance.addScroll(e,s)}else kn&&(Vt(e),Xt.instance.addFn(e,c),kn=!1)}catch(e){console.error(e)}var u;try{t&&t.apply(void 0,r)}catch(e){throw kn=!0,e}kn=!0}}(e,t)},Qn=function(e){return _t()?function(e){var t=e||{},n=t.url,r=t.success,o=t.fail,a=dn.current.getRequestItem(n);return a?(a.played=!0,Vt("inject",n),setTimeout((function(){"fail"===a.eventExtend.type?o(a.eventExtend.response):r(a.eventExtend.response)}),100),{url:"/",data:{ori:n}}):(Vt("pass",n),e)}(e):function(e){var t=e||{},n=t.url,r=t.success,o=t.fail;if(/\/20589\/SaveTraceInfo/.test(n))return e;var a=Date.now();return e.success=function(e){var t,o,i,c=an.getRootID?an.getRootID(n,e):an.useRootMessageId&&(null==e||null===(t=e.data)||void 0===t||null===(o=t.ResponseStatus)||void 0===o||null===(i=o.Extension)||void 0===i?void 0:i.filter((function(e){return"RootMessageId"===(null==e?void 0:e.Id)}))[0].Value)||0;Xt.instance.addRequest(n,{startTime:a,url:n,responseTime:Date.now(),response:c?"":e,rootID:c}),r&&r(e)},e.fail=function(e){Xt.instance.addRequest(n,{startTime:a,url:n,type:"fail",responseTime:Date.now(),response:e,rootID:""}),o&&o(e)},e}(e)},Gn=function(){return Un?Un.getToken():""},Hn=function(){return Tt().getEnv()===Ct.ENV_TYPE.WEB||_t()?void 0:(Un.trackPage(),function(){var e=Tt().getCurrentPages();if(e.length){var t=e[e.length-1];Xt.instance.addPage(t.$taroPath,t.$taroParams),t.$cb$onPageScroll||(t.$cb$onPageScroll=t.onPageScroll||function(){},t.onPageScroll=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];try{var o;Vt("onPageScroll",n),n[0]&&null!==(o=n[0])&&void 0!==o&&o.scrollTop&&Xt.instance.addScroll(t.route,{scrollTop:n[0].scrollTop},vt.MINI_PAGE_SCROLL)}catch(e){console.error(e)}t.$cb$onPageScroll.apply(t,n)})}}())},Xn=function(e,t,n){return _t()?wn(e,n):function(e,t){Xt.instance.addInitLoadData(e,t)}(e,t)},Jn=function(e){return _t()?function(e){null==e||e.callback({ReturnCode:"0"})}:e},Yn=function(e){return _t()?function(){}:e}}(),e.exports=s}()},82021:function(e,t,n){"use strict";n.d(t,{Oq:function(){return a},Ww:function(){return l},EM:function(){return f},Cu:function(){return d}});n(91780);var r=n(32180)["window"],o=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"];function a(e){var t,n="";if(e){var a=e.substring(0,10);n=e.substr(11,5).replace(/\-/g,":");var i=a.replace(/\-/g,"/");t=new r.Date(i);var c=new r.Date;t<c&&(t=c)}else t=new r.Date;var s=t.format("yyyy-MM-dd");return{curDateNum:1*s.replace(/\-/g,""),date:s,time:n||"",showDate:t.format("MM-dd"),displayDate:o[t.getDay()]}}var i=n(298),c=n(26875),s=n(1772);function u(e){var t=(e.tempFields&&e.tempFields.runMinutes||0)/60;return{fromTime:e.fromTime||"",min_take_time:t||"",bus_type:e.busLineTypeInfo&&e.busLineTypeInfo.busType||e.busType||"",price:e.ticketUnitSalePrice||"",discount:Array.isArray(e&&e.discountTagList)?(e&&e.discountTagList||[]).join(","):e&&e.discountTagList||"",payPrice:e.ticketUnitSalePrice||"",realFromCity:e.fromCity||"",realToCity:e.toCity||"",realFromStation:e.fromStation||"",realToStation:e.toStation||"",productLine:"bus"==e.businessType?1:3}}function l(e,t,n,r){var o=e.list,a=e.ableList,s=e.unableList;e.recommendData,e.recommendDate;try{var l=c.Y8.getCurrentPage(),f=c.cQ.getUtmSource(),d={pageId:l.pageId||"",utmSource:f||"",type:c.zB.traceType||"ctripwxxcx",userFromCity:t.fromCity||"",userToCity:t.toCity||"",fromDate:t.date||"",scanId:n||"",userFromCont:t.fromStation||t.fromCity||"",userToCont:t.toStation||t.toCity||"",userFromContAtrr:t.userFromContAtrr||"\u7ad9\u70b9",userToContAtrr:t.userToContAtrr||"\u7ad9\u70b9"};if(a&&a.length>0){var p=o,h=p.map(u),g=(0,i.Z)((0,i.Z)({},d),{},{keyid:"138763",key_des:"\u641c\u7d22\u6709\u7ed3\u679c_\u66dd\u5149",isHasResult:1,typeSnd:"list_hasRuseltModule_show",comment:"\u5217\u8868\u9875-\u73ed\u6b21\u66dd\u5149",lines:JSON.stringify(h)});c.uM.ubtTrace("ssyjg_exp",g)}else{var v=(0,i.Z)((0,i.Z)({},d),{},{keyid:"138766",key_des:"\u65e0\u7ed3\u679c\u63a8\u8350\u6a21\u5757_\u66dd\u5149",isHasResult:0});v.noResultType=s&&s.length>0?"\u6709\u8d44\u6e90\u8fd4\u56de\u4f46\u4e0d\u53ef\u9884\u8ba2":"\u65e0\u8d44\u6e90\u8fd4\u56de",c.uM.ubtTrace("wjgtj_exp",v)}}catch(e){console.log(e)}}function f(e){var t=s.Z.getModelState("busList"),n=c.Y8.getCurrentPage(),r=c.cQ.getUtmSource(),o=t.scanId,a={pageId:n.pageId||"",utmSource:r||"",type:c.zB.traceType||"ctripwxxcx",fromDate:e.fromDate||"",scanId:o||"",typeSnd:"list_hasRuseltModule_click",comment:"\u5217\u8868\u9875-\u73ed\u6b21\u70b9\u51fb"};a.lines=[u(e)],c.uM.ubtTrace("bus_list_linesclick_trace",a)}function d(e,t){var n=s.Z.getModelState("busList"),r=c.Y8.getCurrentPage(),o=c.cQ.getUtmSource(),a=n.scanId,i=n.pageParams,u={pageId:r.pageId||"",utmSource:o||"",type:c.zB.traceType||"ctripwxxcx",scanId:a||"",typeSnd:"list_noRuseltModule_click",comment:"\u5217\u8868\u9875-\u641c\u7d22\u7ed3\u679c\u6a21\u5757\u70b9\u51fb"};if("recommend"===t){u.recommentType="\u4e34\u8fd1\u5927\u5df4\u63a8\u8350";var l={realFromStation:e.from||"",realToStation:e.to||"",price:e.price||"",realFromDate:i.date||""};u.lines=l}else{u.recommentType="\u5176\u4ed6\u65e5\u671f\u63a8\u8350";var f={realFromStation:i.fromStation||i.fromCity||"",realToStation:i.toStation||i.toCity||"",price:e.price||"",realFromDate:e.fromDate||""};u.lines=f}c.uM.ubtTrace("wjgtj_click",u)}},98482:function(e,t,n){"use strict";n(91780);var r=n(32180)["window"];function o(e){var t="";if(null===e)t="null";else if(void 0===e)t="undefined";else{var n=Object.prototype.toString.call(e),r=n.match(/^\[object (\w+?)\]$/);t=r?r[1].toLowerCase():n}return t}function a(e){var t;switch(o(e)){case"array":t=e.map(a);break;case"object":for(var n in t={},e)e.hasOwnProperty(n)&&(t[n]=a(e[n]));break;case"date":t=new r.Date(+e);break;default:t=e;break}return t}t["Z"]=a},26345:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(93212),o=(n(91780),{BCWList_Top_DayBefore:"BCWList_Top_DayBefore",BCWList_Top_DayAfter:"BCWList_Top_DayAfter",BCWList_Bottom_PopAffirm:"BCWList_Bottom_PopAffirm",BCWList_Bottom_PopReset:"BCWList_Bottom_PopReset",BCWList_Bottom_PopTime:"BCWList_Bottom_PopTime",BCWList_Bottom_PopToStation:"BCWList_Bottom_PopToStation",BCWList_Bottom_PopFromStation:"BCWList_Bottom_PopFromStation",BCWList_Bottom_Time:"BCWList_Bottom_Time",BCWList_Bottom_Station:"BCWList_Bottom_Station",BCWList_Middle_XChannelPopReserve:"BCWList_Middle_XChannelPopReserve",BCWList_Middle_XChannelReserve:"BCWList_Middle_XChannelReserve",BCWList_Middle_XChannel:"BCWList_Middle_XChannel",BCWList_Middle_StationRecommend:"BCWList_Middle_StationRecommend",BCWList_Middle_DateRecommend:"BCWList_Middle_DateRecommend",BCWList_Middle_UnfoldUnSubscribable:"BCWList_Middle_UnfoldUnSubscribable",BCWList_Middle_Shift:"BCWList_Middle_Shift",BCWList_Top_Notice:"BCWList_Top_Notice",BCWList_Top_Calender:"BCWList_Top_Calender"}),a=o,i={BCWBooking_XProduct:"BCWBooking_XProduct",BCWBooking_XProduct_BaseGuarantee:"BCWBooking_XProduct_BaseGuarantee",BCWBooking_TripInfo_StationMap:"BCWBooking_TripInfo_StationMap",BCWBooking_TripInfo_Notice:"BCWBooking_TripInfo_Notice",BCWBooking_TripInfo_NoticeRefundRule:"BCWBooking_TripInfo_NoticeRefundRule",BCWBooking_TripInfo_NoticeBuyExplanation:"BCWBooking_TripInfo_NoticeBuyExplanation",BCWBooking_TripInfo:"BCWBooking_TripInfo",BCWBooking_TripInfo_AddPassenger:"BCWBooking_TripInfo_AddPassenger",BCWBooking_Pay_PrebookingAgreement:"BCWBooking_Pay_PrebookingAgreement",BCWBooking_Pay_ExpenseVoucher:"BCWBooking_Pay_ExpenseVoucher",BCWBooking_Pay_EnterpriseQualification:"BCWBooking_Pay_EnterpriseQualification",BCWBooking_Pay_detail:"BCWBooking_Pay_detail",BCWBooking_Pay_CreditPay:"BCWBooking_Pay_CreditPay",BCWBooking_Pay_CommonPay:"BCWBooking_Pay_CommonPay",BCWBooking_Pay:"BCWBooking_Pay",BCWBooking_Pay_BackupLine:"BCWBooking_Pay_BackupLine",BCWBooking_PassengerChange_ScanIDCard:"BCWBooking_PassengerChange_ScanIDCard",BCWBooking_PassengerChange_PhoneNO:"BCWBooking_PassengerChange_PhoneNO",BCWBooking_PassengerChange_EditPassenger:"BCWBooking_PassengerChange_EditPassenger",BCWBooking_PassengerChange:"BCWBooking_PassengerChange",BCWBooking_PassengerChange_AddPassenger:"BCWBooking_PassengerChange_AddPassenger"},c=i;function s(e){var t="";return t="object"===(0,r.Z)(e)?Object.keys(e).sort().map((function(t){return"".concat(t,"_").concat(e[t])})).join("_"):e,this+".__index_".concat(t)}function u(e){return new Proxy(e,{get:function(e,t){var n=Reflect.get(e,t);if(Object.prototype.hasOwnProperty.call(e,t)){var r=new String(n);return new Proxy(r,{get:function(e,t){if("click"===t)return"".concat(e,"_click");if("exposure"===t)return"".concat(e,"_exposure");if("value"===t)return"".concat(e);if("buildWith"===t)return s.bind(n);var r=n[t];return"function"===typeof r?r.bind(n):r}})}return n}})}var l={list:u(a),book:u(c)}}}]);
//# sourceMappingURL=taroCommon.js.map