"use strict";(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[9952],{94057:function(t,e){var a=Component({properties:{title:{type:String,value:""},positiveDesc:{type:String,value:""},negativeDesc:{type:String,value:""},env:{type:String,value:"fat"},bizId:{type:String,value:""},bizBindType:{type:String,value:""},bizBindId:{type:String,value:""},pageId:{type:String,value:""},auth:{type:String,value:""}},data:{show:!1,scores:[0,1,2,3,4,5,6,7,8,9,10],selectedScore:-1,commentPlaceholder:"",comment:""},lifetimes:{attached:function(){var t=this,e=this.properties,a=e.env,i=e.bizBindId,n=e.bizBindType,r=e.bizId,c=e.auth,d={bindType:n,bindId:i,bizId:r,head:{auth:c||""}};o({url:s[a]+"/18852/canDoSurvey",data:d,success:function(e){e&&e.data&&e.data.canDoSurvey&&t.setData({show:!0})},fail:function(t){console.log(t)}})}},methods:{selectScore:function(t){var e=t.currentTarget.dataset.score;if(this.data.selectedScore!==e){var a=this.properties,i=a.positiveDesc,s=a.negativeDesc;this.setData({selectedScore:t.currentTarget.dataset.score,commentPlaceholder:e>7?i:s})}},updateComment:function(t){this.setData({comment:t.detail.value})},submit:function(){var t=this,e=this.properties,a=e.env,n=e.bizBindId,r=e.bizBindType,c=e.bizId,d=e.pageId,u=e.auth,p=this.data,l=p.selectedScore,m=p.comment,h=p.commentPlaceholder;if(!i&&!(l<0)){i=!0;var v={surveyInfo:{bizId:c,bindType:r,bindId:n,pageId:d,items:[{configId:1,title:h,scoreGrade:l,content:m}]},head:{auth:u||""}};o({url:s[a]+"/18852/submitSurvey",data:v,success:function(e){if(i=!1,e&&e.data&&e.data.ret&&0===e.data.ret.code)wx.showToast({icon:"none",title:"\u63d0\u4ea4\u6210\u529f\uff0c\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01",mask:!0}),setTimeout((function(){return t.setData({show:!1})}),1500);else{var a="\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";e&&e.data&&e.data.ret&&e.data.ret.msg&&(a=e.data.ret.msg),wx.showToast({icon:"none",title:a,mask:!0})}},fail:function(){i=!1,wx.showToast({icon:"none",title:"\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01",mask:!0})}})}}}});var i=!1,s={fat:"https://gateway.m.fws.qa.nt.ctripcorp.com/restapi/soa2",uat:"https://gateway.m.uat.qa.nt.ctripcorp.com/restapi/soa2",prod:"https://m.ctrip.com/restapi/soa2",prd:"https://m.ctrip.com/restapi/soa2"};function o(t){var e=t.url,a=t.data,i=t.success,s=t.fail;wx.request({url:e,method:"POST",data:a,success:i,fail:s})}}},function(t){var e=function(e){return t(t.s=e)};e(94057)}]);
//# sourceMappingURL=nps-score.js.map