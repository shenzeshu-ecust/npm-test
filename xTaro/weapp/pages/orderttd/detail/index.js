require("../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[9611],{31934:function(e,n,t){"use strict";t.d(n,{o:function(){return i},m:function(){return r}});var i=t(88064),r={TITLE:"key.couponcenter.receivedetailspage.title",USECODELIST_TITLE:"key.couponcenter.usecodelist.title",PROMOTIONCODE_PLACEHOLDER:"key.couponcenter.usecodelist.promocode_placeholder",USECODELIST_USE:"key.couponcenter.usecodelist.use",VALIDATY_TIMEZONE:"key.couponcenter.common.validitytimezone",AVAILABLECODES_TITLE:"key.couponcenter.usecodelist.availablecodes_title",DONOTUSECODE:"key.couponcenter.usecodelist.donotusecode",AVAILABLE_CURRENCY_AMOUNT:"key.couponcenter.usecodelist.availablecurrencyamount",UNAVAILABLE_REASON:"key.couponcenter.usecodelist.unavailablereason",USECODELIST_NOCODE:"key.couponcenter.usecodelist.nocode",POPUP_CLAIM:"key.couponcenter.popup.claimall",RECEIVESTATUS_RECEIVED:"key.couponcenter.common.receivestatus_received",POPUP_CLAIMED:"key.couponcenter.popup.claimed",POP_TOUSE:"key.couponcenter.popup.touse",TERMS_CONDITIONS:"key.couponcenter.common.termsandconditions",COMMON_DETAILS:"key.couponcenter.common.details",CURRENCYAMOUNT_TIERS:"key.couponcenter.common.currencyamount_tiers",PERCENTAGE_TIERS:"key.couponcenter.common.percentage_tiers",POPUP_OUTOFSTOCK:"key.couponcenter.popup.outofstock",NEWUSER_ONLY:"key.couponcenter.common.receivestatus_newuseronly",CURRENCYAMOUNT_OFF:"key.couponcenter.common.currencyamount_off",FAILURE_NOTICE:"key.couponcenter.popup.failurenotice",SUCCESS_NOTICE:"key.couponcenter.popup.successnotice",PROMOTIONCODE:"key.couponcenter.common.promocode",VALIDITY:"key.couponcenter.common.validity",RECEIVE:"key.couponcenter.common.receive",USECODES_PROMPT:"key.couponcenter.receivedetailspage.usablecodes_prompt",RECEIVABLECODES_TITLE:"key.couponcenter.receivedetailspage.receivablecodes_title",USEABLECODES_TITLE:"key.couponcenter.receivedetailspage.usablecodes_title",USEABLECODES_SUBTITLES:"key.couponcenter.receivedetailspage.usablecodes_subtitle",CANNOT_RECEIVE:"key.couponcenter.common.receivestatus_cannotreceive",NULL_ERROR:"key.couponcenter.popup.failurenotice.nullerror",CROSS_TITLE:"key.couponcenter.crosscouponlist.title",CROSS_BEFOREBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.beforebooking.subtitle",CROSS_AFTERBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.afterbooking.subtitle",CROSS_DETAIL:"key.couponcenter.crosscouponlist.promodetail",CROSS_VALIDPERIOD_TIITLE:"key.couponcenter.crosscouponlist.promovalidperiod.titile",CROSS_USEDETAIL:"key.couponcenter.crosscouponlist.promousedetail",CROSS_BULINE_USER_PROMO:"key.couponcenter.crosscouponlist.businesslineuserpromo",CROSS_BULINE_USER:"key.couponcenter.crosscouponlist.businesslineuser",DETAILS_REALNAME_CONFIRM:"key.couponcenter.receivedetailspage.realnameconfirm",DETAILS_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",DETAILS_REALNAME_CONFIRM_AUTH:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",DETAILS_REALNAME_CLAIM_FAIL:"key.couponcenter.receivedetailspage.claimfailure.realname",POPUP_REALNAME_CONFIRM:"key.couponcenter.receivepopup.realnameconfirm",POPUP_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivepopup.realnameconfirm.giveup"}},88064:function(e,n,t){"use strict";t.d(n,{mE:function(){return o},CE:function(){return a},rG:function(){return s},NG:function(){return c},k5:function(){return l},bl:function(){return d},dW:function(){return u},Rr:function(){return m}});var i=t(45023),r=t(24183),o=1e4,a=((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},r.m5.TICKET,"tkt"),r.m5.THINGS_TODO,"act"),r.m5.TOUR,"grp"),r.m5.CRUISE,"cru"),{ORDER_USE_COUPON:{id:1,name:"order_usecodelist"},RECEIVEDETAIL:{id:2,name:"detail_claimcoupon"},POPCOUPON:{id:3,name:"popup"},SHOP_COUPON:{id:4,name:"storedetailreceive"},CROSS_COUPON:{id:5,name:"crocsscouponlist"}}),s={AUTH_FAILURE:4001,REALNAME_FAILURE:7027},c={EXPOSURE:"vac_couponlist_exposure",CLICK:"vac_couponlist_click",POPUP_EXPOSURE:"vac_couponpopup_exposure",POP_CLICK:"vac_couponpopup_click",CROSS_BEFOREBOOKING_EXPOSURE:"vac_crocsscouponlist_beforebooking_exposure",CROSS_BEFOREBOOKING_CLICK:"vac_crocsscouponlist_beforebooking_click",CROSS_AFTERBOOKING_EXPOSURE:"vac_crocsscouponlist_afterbooking_exposure",CROSS_AFTERBOOKING_CLICK:"vac_crocsscouponlist_afterbooking_click",CROSS_ONLOAD:"ttd_marketing_crosscoupon_onload",CLAIMCOUPON_INVOKE_SHOW:"ttd_marketing_claimcoupon_invokeshow",CLAIMCOUPON_INVOKE_HIDE:"ttd_marketing_claimcoupon_invokehide",CLAIMCOUPON_CLOSE:"ttd_marketing_claimcoupon_close",USECOUPON_LOAD:"ttd_marketing_usecoupon_load",USECOUPON_CLOSE:"ttd_marketing_usecoupon_close",USECOUPON_INVOKE_SHOW:"ttd_marketing_usecoupon_invokeshow",USECOUPON_INVOKE_HIDE:"ttd_marketing_usecoupon_invokehide",USECOUPON_ONSELECT:"ttd_marketing_usecoupon_onselect",USECOUPN_BESTSELECT_VALIDATEFAIL:"ttd_marketing_usecoupon_bestselect_validate_fail",POPUP_LOAD:"ttd_marketing_popcoupon_load",JSERROR:"ttd_marketing_jserror",POST_EXCEPTION:"ttdmkt_post_expection",BFF_EXTENSION:"ttd_marketing_bffextensions",DHT_KEY:"o_tour_marketing_coupon",REALNAME_DETAIL_EXPO:"ctrip_realname_detailpage_expo",REALNAME_DETAIL_REFUSE_CLICK:"ctrip_realname_detailpagerefuse_click",REALNAME_DETAIL_VERIFY_CLICK:"ctrip_realname_detailpageverify_click",REALNAME_POPUPALL_EXPO:"ctrip_realname_popupall_expo",REALNAME_POPUPALL_REFUSE_CLICK:"ctrip_realname_popupallrefuse_click",REALNAME_POPUPALL_VERIFY_CLICK:"ctrip_realname_popupallverify_click",REALNAME_POPUPSOME_EXPO:"ctrip_realname_popupsome_expo",REALNAME_POPUPSOME_REFUSE_CLICK:"ctrip_realname_popupsomerefuse_click",REALNAME_POPUPSOME_VERIFY_CLICK:"ctrip_realname_popupsomeverify_click",O_TICKET_RENAME_AUTH_START:"ttd_marketing_rename_auth_start",O_TICKET_RENAME_AUTH_CALLBACK:"ttd_marketing_rename_auth_callback"},l="Error",d={RECEIVE_PROMOTION:"getByRelationId",PROMOTION_TAG:"getPromotionTag",SHARK:"getShark",CLAIM:"claimCoupon",CROSS_COUPON:"getCrossCouponList",SCENE_CONFIG:"getSceneConfig",POP_COUPON:"getByScenesCode",SHOP_COUPON:"getShopCouponList",USE_COUPON:"getUseCouponList",VALIDATE:"validateCoupon",SERVER_TIME:"getServeTime"},u={fat:"https://secure.fat18.qa.nt.ctripcorp.com",prod:"https://secure.ctrip.com"},m="/webapp/paywallet/realname"},24183:function(e,n,t){"use strict";t.d(n,{Yw:function(){return c},AH:function(){return a},Lm:function(){return o},NT:function(){return r},Qo:function(){return i},vw:function(){return s},Y8:function(){return d},zr:function(){return m},Dc:function(){return _},nS:function(){return h},m5:function(){return l},K1:function(){return u}});var i=function(e){return e[e["BeforeBooking"]=0]="BeforeBooking",e[e["AfterBooking"]=1]="AfterBooking",e}({}),r=function(e){return e[e["OrderUse"]=1]="OrderUse",e[e["DetailClaim"]=2]="DetailClaim",e[e["PopClaim"]=3]="PopClaim",e[e["ShopClaim"]=4]="ShopClaim",e[e["DetailClaim_Useable"]=5]="DetailClaim_Useable",e[e["Tangram"]=6]="Tangram",e[e["CrossCoupon"]=7]="CrossCoupon",e}({}),o=function(e){return e[e["H5"]=1]="H5",e[e["PC"]=2]="PC",e[e["RN"]=3]="RN",e[e["MiniProgram"]=4]="MiniProgram",e[e["Taro"]=5]="Taro",e}({}),a=function(e){return e[e["PC"]=0]="PC",e[e["NATIVE"]=1]="NATIVE",e[e["H5"]=2]="H5",e[e["MiniProgram"]=3]="MiniProgram",e}({}),s=function(e){return e["Fat"]="fat",e["Uat"]="uat",e["Prod"]="prod",e}({}),c=function(e){return e[e["CTRIP"]=0]="CTRIP",e[e["TRIP"]=1]="TRIP",e}({}),l=function(e){return e["TICKET"]="TICKET",e["THINGS_TODO"]="THINGS_TODO",e["TOUR"]="TOUR",e["CRUISE"]="CRUISE",e["CUS"]="CUS",e["VISA"]="VISA",e}({}),d=function(e){return e["MINI_WECHAT"]="MINI_WECHAT",e["ALI_PAY"]="ALI_PAY",e["BYTE_DANCE"]="BYTE_DANCE",e["BAIDU"]="BAIDU",e["QQ"]="QQ",e}({}),u=function(e){return e["TICKET"]="TICKET",e["THINGS_TODO"]="THINGS_TODO",e["TOUR"]="TOUR",e["VISA"]="VISA",e["CRUISE"]="CRUISE",e["CUS"]="CUS",e["TANGRAM"]="TANGRAM",e["RENT_CAR"]="RENT_CAR",e["GUIDE"]="GUIDE",e["OTHER"]="OTHER",e}({}),m=function(e){return e[e["MINI"]=0]="MINI",e[e["APP"]=1]="APP",e[e["H5"]=2]="H5",e}({}),_=function(e){return e["WECHAT_PAGE_SOURCE"]="ctripwechatmini_ticketpromotion_realname",e["OTHER_PAGE_SOURCE"]="ctrip_ticketpromotion_realname",e}({}),h="/pages/wallet/setrealname/index"},62652:function(e,n,t){"use strict";t.d(n,{Ke:function(){return T},ES:function(){return h},yo:function(){return S},Y8:function(){return v},v0:function(){return I},qL:function(){return V},So:function(){return A},tv:function(){return E},HR:function(){return D},qn:function(){return R},q6:function(){return P},H9:function(){return b},jJ:function(){return j},Sx:function(){return C},RO:function(){return O}});var i=t(79301),r=t(95308),o=t(92954),a=t.n(o),s=t(24183),c=t(31934),l=t(57042),d=t(24460),u=t(45023),m=function(){function e(){(0,l.Z)(this,e)}return(0,d.Z)(e,null,[{key:"getInstance",value:function(){return null==this.singleInstance?new e:this.singleInstance}}]),e}();(0,u.Z)(m,"singleInstance",null);var _,h=m,f=t(298);try{var p=t(33675);_=p&&p.cwx}catch(e){console.log("%c ".concat(e),"color:red;")}var v,x,g=o.request,j=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{n.data.head.auth=_&&_.user.auth||o.getStorageSync("auth")}catch(e){}if(_){e.next=5;break}return e.next=4,g(n);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",new Promise((function(e,t){_&&_.request((0,f.Z)((0,f.Z)({},n),{success:function(n){e(n)},fail:function(e){t(e)}}))})));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();try{var w=t(33675);v=w&&w.cwx,x=w&&w.__global}catch(e){console.log("%c ".concat(e),"color:red;")}var N=null;try{var y=t(34725);N=y.compVerison}catch(e){console.error("\u8bfb\u53d6\u7248\u672c\u53f7\u5f02\u5e38!")}var T=N;function I(){var e="";try{e=a().getStorageSync("auth")}catch(e){}return e}function b(){var e=a().getEnv();switch(e){case o.ENV_TYPE.WEAPP:return s.Y8.MINI_WECHAT;case o.ENV_TYPE.SWAN:return s.Y8.BAIDU;case o.ENV_TYPE.TT:return s.Y8.BYTE_DANCE;case o.ENV_TYPE.ALIPAY:return s.Y8.ALI_PAY;case o.ENV_TYPE.QQ:return s.Y8.QQ;default:return s.Y8.MINI_WECHAT}}function S(e,n){if(e.length<=0||n<=0)return e;for(var t=[],i=0;i<e.length;i+=n)t.push(e.slice(i,i+n));return t}function V(){var e=a().getCurrentInstance(),n=s.vw.Prod;if(x){var t=x.env;t!==s.vw.Fat&&t!==s.vw.Uat||(n=t)}try{n=e.page.$taroParams.testenv||n}catch(e){}return n}function C(e,n,t){v&&v.user.login({param:{},callback:function(e){e&&"0"===e.ReturnCode?n&&n():t&&t()}})}function k(e){var n=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==n}function E(e){if(e)if(k(e)){var n={url:encodeURIComponent(e),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0,loginErrorUrl:e};v&&v.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(n)})}else v&&v.navigateTo({url:e})}function R(e){try{v&&v.sendUbtByPage.ubtTrace(e.key,e.value)}catch(e){}}function P(e){try{v&&v.sendUbtByPage.ubtDevTrace(e.key,e.value)}catch(e){}}function D(e){try{v&&v.sendUbtByPage.ubtMetric(e)}catch(e){}}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(P({key:c.o.NG.O_TICKET_RENAME_AUTH_START,value:{desc:"start_rename"}}),b()===s.Y8.MINI_WECHAT){var i={pageSource:s.Dc.WECHAT_PAGE_SOURCE,clientType:s.zr.MINI,isNavBack:!0},r=v.getCurrentPage();r&&r.navigateTo({url:s.nS,data:i,callback:function(e){P({key:c.o.NG.O_TICKET_RENAME_AUTH_CALLBACK,value:e}),null!==e&&void 0!==e&&e.realNamed?null===n||void 0===n||n():null===t||void 0===t||t()}})}else{var o="".concat(c.o.dW[e]).concat(c.o.Rr,"?sceneid=").concat(s.Dc.OTHER_PAGE_SOURCE,"&clientType=").concat(s.zr.H5),a={url:encodeURIComponent(o),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0};v&&v.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(a)})}}function A(){return L.apply(this,arguments)}function L(){return L=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a().getSystemInfo());case 1:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}},98455:function(e,n,t){"use strict";var i={};t.r(i),t.d(i,{HIDE_GLOBAL_LOADING:function(){return en},SHOW_GLOBAL_LOADING:function(){return Xe},UPDATE_ADDITIONAL_SALE:function(){return Ue},UPDATE_ADDITIONAL_SCENIC_SPOTS:function(){return rn},UPDATE_ADD_OPTION_INFO:function(){return ze},UPDATE_CANCEL_LIST:function(){return $e},UPDATE_CHOOSE_CANCEL_REASON:function(){return Ke},UPDATE_CUT_ORDER_EXPENSES:function(){return Ge},UPDATE_ERROR_ORDER_INFO:function(){return Qe},UPDATE_IM_SERVICE_PARAMS:function(){return Le},UPDATE_IS_IN_MINI_PROGRAM:function(){return We},UPDATE_MASK_LOADING:function(){return nn},UPDATE_NETWORK_STATUS:function(){return De},UPDATE_ORDER_EXPENSES:function(){return He},UPDATE_ORDER_EXPENSES_STATUS:function(){return Be},UPDATE_ORDER_INFO:function(){return Pe},UPDATE_ORDER_INFO_STATUS:function(){return Oe},UPDATE_ORDER_PROCESS:function(){return Fe},UPDATE_ORDER_PROCESS_STATUS:function(){return Me},UPDATE_PACKAGE_INFO:function(){return sn},UPDATE_PHONE_ENCRYPT:function(){return qe},UPDATE_REASON_LIST:function(){return Ye},UPDATE_REFRESH_STATUS:function(){return Ae},UPDATE_REQUEST_PARAMS:function(){return Ze},UPDATE_SHORT_URL:function(){return Je},UPDATE_STATE:function(){return Re},UPDATE_VOUCHER_INFO:function(){return tn},UPDATE_VOUCHER_INFO_BY_RESOURCE:function(){return an},UPDATE_VOUCHER_REFRESH_INFO:function(){return on}});var r=t(32180),o=t(57042),a=t(24460),s=t(81876),c=t(21867),l=t(86066),d=t(45023),u=t(90201),m=t(65542),_=t(71515),h=t(90129),f=t(33675),p=t.n(f),v=t(298),x=t(23135),g=t(1933),j=t(79301),w=t(95308),N=t(71439),y=t(22276);function T(e){return e=Number(e),!isNaN(e)&&Math.ceil(e)!==e}function I(e){return T(e)?b(e).split(".")[1].length:0}function b(e){if(!e)return"0";var n=String(e);if(-1===n.indexOf("e"))return n;e=Number(e);var t=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return e.toFixed(Math.max(0,((null===t||void 0===t?void 0:t[1])||"").length-Number(null===t||void 0===t?void 0:t[2])))}function S(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=Number(n[0]);return n.slice(1).forEach((function(e){if(e){if(!i)return i=e;var n=I(i),t=I(e),r=n+t;if(r){var o=Math.pow(10,Math.max(n,t));i=(Math.round(i*o)+Math.round(e*o))/o}else i+=e}})),i}function V(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=Number(n[0]);return n.length?(n.slice(1).forEach((function(e){if("number"!==typeof e&&(e=+e||0),!e||!i)return i=0;if(1===i)return i=e;var n=I(i),t=I(e),r=n+t;if(r){var o=Math.pow(10,r);i=n?Math.round(i*Math.pow(10,n)):i,e=t?Math.round(e*Math.pow(10,t)):e,i=i*e/o}else i*=e})),i):0}t(32180)["document"];function C(e){var n,t=Object.prototype.toString.call(e);if("[object Array]"===t)n=[];else{if("[object Object]"!==t)return e;n={}}return"[object Array]"===t&&e.forEach((function(e){n.push(C(e))})),"[object Object]"===t&&Object.keys(e).forEach((function(t){n[t]=C(e[t])})),n}var k=function(e){var n=null===e||void 0===e?void 0:e.data,t=D(n),i=O(n),r=n,o=A(n),a=U(n),s=Z(n),c=M(n),l=F(n),d=q(n),u=z(n),m=Y(n),_={},h=ce(n),f=R(n);se(n)&&(f=E(f));var p=P(n);return{originOrderInfo:r,contact:t,invoiceButton:i,delivery:o,renewInfo:a,reserveInfo:s,operationInfo:c,basicInfo:l,resource:d,packages:u,category:m,abtestsMap:_,sortComponent:f,newFooterButton:p,isNewGroundPromotionOrders:h}};function E(e){var n=e.componentList,t=n.indexOf("ScenicSpotAdditionSale"),i=n.indexOf("ResourceCard");return t>=0&&i>=0&&n.splice.apply(n,[i+1,0].concat((0,y.Z)(n.splice(t,1)))),{componentList:n}}var R=function(e){var n=e.basicInfo,t=n.orderStatusNew,i=n.useDatePrompt,r=[];switch(t){case 0:case 2:case 3:r=["HeaderStatus","HeaderNotice","ForbidCancel","UpComing","ServiceFlow","BookingInfo","ResourceCard","ScenicSpotAdditionSale","ScenicSpotDetail","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 1:case 4:case 5:case 6:r=["HeaderStatus","HeaderNotice","ForbidCancel","UpComing","ServiceFlow","ResourceCard","ScenicSpotAdditionSale","ScenicSpotDetail","BookingInfo","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:r=["HeaderStatus","HeaderNotice","ForbidCancel","UpComing","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","ScenicSpotAdditionSale","ScenicSpotDetail","BookingInfo","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 16:case 20:r=1===i?["HeaderStatus","HeaderNotice","ForbidCancel","UpComing","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","BookingInfo","ScenicSpotAdditionSale","ScenicSpotDetail","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"]:2===i?["HeaderStatus","ForbidCancel","UpComing","ScenicSpotDetail","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","BookingInfo","ScenicSpotAdditionSale","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"]:["HeaderStatus","ForbidCancel","UpComing","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","NPS","BookingInfo","ScenicSpotDetail","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 17:r=["HeaderStatus","ForbidCancel","UpComing","ServiceFlow","BookingInfo","ResourceCard","GuideInfo","ScenicSpotAdditionSale","ScenicSpotDetail","NPS","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 18:case 19:r=["HeaderStatus","ForbidCancel","UpComing","ServiceFlow","BookingInfo","ResourceCard","GuideInfo","NPS","ScenicSpotDetail","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;case 21:r=["HeaderStatus","ForbidCancel","UpComing","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","NPS","BookingInfo","ScenicSpotDetail","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"];break;default:r=["HeaderStatus","ForbidCancel","UpComing","WIFISubscription","ServiceFlow","ResourceCard","GuideInfo","NPS","BookingInfo","ScenicSpotDetail","WeeklyJoy","CrossRecommend","MarketingBanner","BottomServices"]}return{componentList:r}};function P(e){var n=ce(e),t=e.basicInfo,i=e.operation,r=e.rebate,o=void 0===r?{}:r,a=t.orderType,s=t.bizLineType,c=t.notShowSubUnit,l=void 0===c?[]:c,d=l&&-1!==(null===l||void 0===l?void 0:l.indexOf("booking")),u=(null===i||void 0===i?void 0:i.items)||[],m=u.find((function(e){return[10,11,12,13,19].includes(e.operationType)})),_=u.find((function(e){return 38===e.operationType})),h=u.find((function(e){return 37===e.operationType}))&&!d,p=u.find((function(e){return 30===e.operationType})),v=u.find((function(e){return 40===e.operationType})),x=u.find((function(e){return 4===e.operationType})),g=u.find((function(e){return 5===e.operationType})),j=u.find((function(e){return 45===e.operationType})),w=x||g||j,N=u.find((function(e){return 42===e.operationType})),T=u.find((function(e){return 44===e.operationType})),I=u.find((function(e){return 46===e.operationType})),b=N||I||T,S=o.rebateAmt,V=o.cmtCredit,C=u.find((function(e){return 36===e.operationType})),k=u.find((function(e){return 39===e.operationType})),E=f._.find(u,(function(e){return 61===e.operationType})),R=2===s||3===s,P=u.find((function(e){return 43===e.operationType})),D=u.find((function(e){return[41].includes(e.operationType)})),A=O(e),L=A.applyInvoice,U=A.cannotApplyInvoice,Z=A.checkInvoice,M=A.downloadInvoice,F=A.downloadVipInvoice,B=(A.backupInvoice,A.invoiceInfo),H=A.superVipInvoiceInfo,G=U,q=L&&!U,z=!!(Z||M||F||null!==B&&void 0!==B&&B.invoiceId||H),Y=[],$=n;if($&&(m=u.find((function(e){return[10,11,19].includes(e.operationType)})),w=!1,b=!1,p=!1,v=!1,D=!1),P&&Y.push({title:"\u5220\u9664\u8ba2\u5355",type:"deleteOrder"}),m&&Y.push({title:"\u53d6\u6d88\u8ba2\u5355",type:"cancel"}),D&&Y.push({title:"\u50ac\u786e\u8ba4",type:"urge"}),_&&Y.push({title:"\u53d1\u9001\u77ed\u4fe1",type:"resendMessage",opt:_[0]}),h&&Y.push({title:"\u518d\u6b21\u9884\u8ba2",type:"bookingagain"}),(G||q||z)&&Y.push({title:"\u53d1\u7968\u4fe1\u606f",type:"invoice"}),p){var K="\u7533\u8bf7\u7eed\u8ba2";Y.push({title:K,type:"rebooking",opt:{highlight:!0}})}if(v){var W,Q="\u7533\u8bf7\u7eed\u8ba2";Y.push({title:Q,type:"rebooking",opt:{disable:!0,toast:null===(W=v)||void 0===W?void 0:W.operationName}})}var J=function(){var e=[];return x&&e.push({title:"\u4fee\u6539\u65e5\u671f",type:"applyChangeDate",opt:{highlight:!0}}),j&&e.push({title:"\u4fee\u6539\u65e5\u671f",type:"applyChangeDate",opt:{highlight:!0,toast:"\u51fa\u884c\u4eba\u4fe1\u606f\u4fee\u6539\u786e\u8ba4\u4e2d\uff0c\u6682\u65e0\u6cd5\u4fee\u6539\u4f7f\u7528\u65e5\u671f",disable:!0}}),g&&e.push({title:"\u4fee\u6539\u65e5\u671f",type:"applyChangeDate",opt:{disable:!0,toast:null===g||void 0===g?void 0:g.operationName}}),e},X=function(){var e=[];return N&&e.push({title:"\u4fee\u6539\u8bc1\u4ef6",type:"applyChangeId",opt:{highlight:!0}}),T&&e.push({title:"\u4fee\u6539\u8bc1\u4ef6",type:"applyChangeId",opt:{highlight:!0,toast:"\u4f7f\u7528\u65e5\u671f\u4fee\u6539\u786e\u8ba4\u4e2d,\u6682\u65e0\u6cd5\u4fee\u6539\u51fa\u884c\u4eba\u4fe1\u606f",disable:!0}}),I&&e.push({title:"\u4fee\u6539\u8bc1\u4ef6",type:"applyChangeId",opt:{disable:!0,toast:"\u51fa\u884c\u4eba\u4fe1\u606f\u4fee\u6539\u786e\u8ba4\u4e2d\uff0c\u8bf7\u52ff\u91cd\u590d\u63d0\u4ea4"}}),e};if(w&&b){var ee=J(),ne=X(),te=[].concat(ee,ne);Y.push({title:"\u4fee\u6539\u8ba2\u5355",type:"applyChangeOrder",opt:{highlight:!0},buttons:te})}else if(w){var ie=J();Y.push.apply(Y,(0,y.Z)(ie))}else if(b){var re=X();Y.push.apply(Y,(0,y.Z)(re))}return k&&!R&&(S?Y.push({title:"\u70b9\u8bc4\u8fd4\u73b0",type:"addcomment",link:k.linkUrl,opt:{tips:"\u5956\xa5"+S,highlight:!0}}):V&&!R?Y.push({title:"\u70b9\u8bc4\u8d5a\u79ef\u5206",type:"addcomment",link:k.linkUrl,opt:{tips:1===a?"\u6700\u9ad8".concat(V,"\u79ef\u5206"):"\u8d5a".concat(V,"\u79ef\u5206"),highlight:!0}}):Y.push({title:"\u70b9\u8bc4",type:"addcomment",link:k.linkUrl,opt:{highlight:!0}})),C&&Y.push({title:"\u6211\u7684\u70b9\u8bc4",type:"mycomment",link:C.linkUrl,opt:{highlight:!0}}),E&&Y.push({title:"\u8ffd\u8bc4",type:"reAddComment",link:null===E||void 0===E?void 0:E.linkUrl}),Y.length>4&&P&&Y.splice(Y.findIndex((function(e){return"deleteOrder"===(null===e||void 0===e?void 0:e.type)})),1),Y.length>4&&h&&Y.splice(Y.findIndex((function(e){return"bookingagain"===(null===e||void 0===e?void 0:e.type)})),1),Y.length>4&&(Y.findIndex((function(e){return"addcomment"===(null===e||void 0===e?void 0:e.type)}))>-1&&Y.splice(Y.findIndex((function(e){return"addcomment"===(null===e||void 0===e?void 0:e.type)})),1),Y.findIndex((function(e){return"mycomment"===(null===e||void 0===e?void 0:e.type)}))>-1&&Y.splice(Y.findIndex((function(e){return"mycomment"===(null===e||void 0===e?void 0:e.type)})),1),Y.findIndex((function(e){return"reAddComment"===(null===e||void 0===e?void 0:e.type)}))>-1&&Y.splice(Y.findIndex((function(e){return"reAddComment"===(null===e||void 0===e?void 0:e.type)})),1)),Y}function D(e){var n,t=null===e||void 0===e?void 0:e.contract,i=(null===e||void 0===e?void 0:e.product)||{},r=i.resources,o=null===(n=r||[])||void 0===n?void 0:n.every((function(e){var n,t;return 2===(null===e||void 0===e||null===(n=e.resourceUsage)||void 0===n?void 0:n.exchangeWay)||5===(null===e||void 0===e||null===(t=e.resourceUsage)||void 0===t?void 0:t.exchangeWay)}));return t?(0,v.Z)((0,v.Z)({},t),{},{isAllQuick:o}):null}function O(e){var n,t,i,r=(null===e||void 0===e||null===(n=e.operation)||void 0===n?void 0:n.items)||[],o=null===e||void 0===e?void 0:e.invoice,a=null===e||void 0===e||null===(t=e.superVip)||void 0===t?void 0:t.invoice,s=r.find((function(e){return 2===e.operationType})),c=r.find((function(e){return 3===e.operationType})),l=r.find((function(e){return 14===e.operationType})),d=r.find((function(e){return 15===e.operationType})),u=r.find((function(e){return 21===e.operationType})),m=r.find((function(e){return 35===e.operationType})),_=o&&1===o.invoiceType||a&&1===a.invoiceType,h=o&&a&&o.invoiceType===a.invoiceType,f=r.find((function(e){return 18===e.operationType}));return(null!==(i=o)&&void 0!==i&&i.invoiceId||a)&&(s=!1,l=!0),s&&(o=null),{applyInvoice:s,cannotApplyInvoice:c,checkInvoice:l,downloadInvoice:d,downloadVipInvoice:u,backupInvoice:m,hasPaperInvoice:_,isSameInvoiceType:h,viewLogistics:f,invoiceInfo:o,superVipInvoiceInfo:a}}function A(e){var n=(null===e||void 0===e?void 0:e.resourceDelivery)||{},t=(null===e||void 0===e?void 0:e.basicInfo)||{},i=t.orderStatusNew,r=n.items,o=void 0===r?[]:r,a=n.delivery,s=((o||[]).every((function(e){return 1===e.deliveryMethod})),(o||[]).every((function(e){return 2===e.deliveryMethod}))),c=((o||[]).filter((function(e){return 1===e.deliveryMethod})),(o||[]).filter((function(e){return 2===e.deliveryMethod})),(o||[]).filter((function(e){return 9!==e.deliveryStatus}))||[]),l=(o||[]).filter((function(e){return 9===e.deliveryStatus}))||[],d=l,u=L(c),m=!(!c.length&&!l.length),_=[0,1,2,3,17,18,19],h=_.includes(i);return m=m&&!h,{deliveryAddress:a,hasUniqueDelivery:u,notDelivery:{lastSendTimeList:d,show:l.length},showDelivery:m,isAllProviderExpress:s}}function L(e){var n={};e.forEach((function(e){var t=e.deliveryCode;n[t]||(n[t]=e)}));var t=Object.keys(n),i=[];return t.forEach((function(e){i.push(n[e])})),i}function U(e){return null===e||void 0===e?void 0:e.renewInfo}function Z(e){e.product;var n,t,i=e.basicInfo,r=e.operation,o=null===r||void 0===r?void 0:r.items,a=(o||[]).find((function(e){return 25===e.operationType||26===e.operationType})),s=(o||[]).find((function(e){return 34===e.operationType})),c=(o||[]).filter((function(e){return 34===e.operationType})),l=(o||[]).find((function(e){return 32===e.operationType})),d=i.payMode,u=i.payDesc,m=l&&"H"===d&&null!==u;return{localDate:i.localDate,reserveStartTime:null===e||void 0===e||null===(n=e.product)||void 0===n||null===(n=n.resources[0])||void 0===n?void 0:n.reserveStartTime,reserveEndTime:null===e||void 0===e||null===(t=e.product)||void 0===t||null===(t=t.resources[0])||void 0===t?void 0:t.reserveEndTime,showReserve:a,showPay:m,showAddTraveler:s,addTravelerInfo:c}}function M(e){var n,t=(null===e||void 0===e||null===(n=e.operation)||void 0===n?void 0:n.items)||[];return t}function F(e){var n=null===e||void 0===e?void 0:e.basicInfo,t=null===e||void 0===e?void 0:e.refund,i=G(null===e||void 0===e?void 0:e.product),r=null===i||void 0===i?void 0:i.bizLineType;return(0,v.Z)((0,v.Z)({},n),{},{bizLineType:r,refund:t})}function B(e){var n=null===e||void 0===e?void 0:e.data,t=n.remark,i=n.orderProgressList,r={remark:t,orderProgressList:(i||[]).reverse(),status:"done"};return r}function H(e){var n=null===e||void 0===e?void 0:e.data,t=0,i=0,r=0,o=0,a=0,s=0,c=0,l=0,d=n.basicItemList,u=n.additionalResourceList,m=n.deposit,_=n.resourceInsurance,h=n.superVip,f=n.backCashList,p=(n.bankPromotionList,n.promotionItemList),v=n.orderTotalAmount,x=(n.billItemList,n.deliveryFee),g=n.productAddInfoList,j=n.currency,w=n.rebate,N=[];x&&(N=[{name:"\u53d1\u7968\u914d\u9001\u8d39",quantity:1,unitPrice:x}]),(d||[]).forEach((function(e){var n=e.days;t=S(t,n?V(V(e.unitPrice,e.quantity),e.days):V(e.unitPrice,e.quantity))})),(u||[]).forEach((function(e){i=S(i,V(e.days,V(e.unitPrice,e.quantity)))})),null!==m&&void 0!==m&&m.unitPrice&&m.quantity&&(r=S(r,V(m.unitPrice,m.quantity))),_&&(o=V(null===_||void 0===_?void 0:_.unitPrice,null===_||void 0===_?void 0:_.quantity)||0),h&&(c=V(h.unitPrice,h.quantity)),(f||[]).forEach((function(e){s=(e.type,S(s,V(e.quantity,e.backCashAmount)))})),(p||[]).forEach((function(e){a=(e.type,S(a,e.reductionAmount))}));var y=[],T=[],I=(p||[]).filter((function(e){return 1===e.type&&2===e.minusType}))||[],b=(p||[]).filter((function(e){return 0===e.type||1===e.type&&1===e.minusType}))||[],C=(p||[]).filter((function(e){return 10===e.type}))||[],k=I.length||y.length||T.length||b.length||C.length,E={flightPromotion:I,bankPromotion:y,bankGold:T,coupon:b,discountCoupon:C,showPromotion:!!k},R={ressTotalMount:t,additionMount:i,depositMount:r,insurancesMount:o,promotionsMount:a,rebateaMount:s,superVipMount:c,bankredeemMount:l,orderTotalAmount:v};return{expenses:n,deliveryFeeList:N,productAddInfoList:g,totalOpt:R,promotionOpt:E,currency:j,rebate:w,status:"done"}}function G(e){var n=e.resources,t=e.productId,i=e.productName,r=(null===n||void 0===n?void 0:n[0])||{};return(0,v.Z)((0,v.Z)({},r),{},{productId:t,productName:i})}function q(e){var n=e.product,t=e.basicInfo,i=e.reserve,r=n.resources,o=n.hasTaxi,a=n.address,s=$(r,t,o,a,i);return s}function z(e){var n=e.product,t=e.basicInfo,i=e.reserve,r=n.packages,o=n.resources,a=n.address,s=n.hasTaxi,c=r?C(r):[];return null===c||void 0===c||c.forEach((function(e){var n;e.subResList=[];var r=!0;null===e||void 0===e||null===(n=e.subOrderItemIds)||void 0===n||n.forEach((function(n){var t=null===o||void 0===o?void 0:o.find((function(e){return(null===e||void 0===e?void 0:e.orderItemId)===n}));null!==t&&void 0!==t&&t.isResourceExpired||(r=!1),t&&e.subResList.push(t)})),e.subResList=$(e.subResList,t,s,a,i),e.isAllExpired=r})),c}function Y(e){var n=e.product,t=e.basicInfo,i=t.orderType,r=t.payMode;if(1===i)return{};var o=n.resources,a=void 0===o?[]:o,s=n.productId,c=n.productName,l=n.resourceAggregatedInfos,d=void 0===l?[]:l,u=(a||[]).filter((function(e){return 0===e.relResourceType}))||[],m=(a||[]).filter((function(e){return 1===e.relResourceType}))||[],_=u.slice(0,1),h=(null===u||void 0===u?void 0:u[0])||{},f=[],p=null===h||void 0===h?void 0:h.packageName,v=h.depositPayMode,x=h.deposit,g=(h.depositCurrency,h.depositPayTypes),j=(h.unit,h.depositUnit),w=h.depositReturnDesc,N={1:"",2:"/\u9650\u5237\u5361\u652f\u4ed8",3:"/\u9650\u73b0\u91d1\u652f\u4ed8"},y="";(g||[]).forEach((function(e){y+=N[e]||""}));var T="";1===v?T="\u73b0\u573a\u652f\u4ed8":2===v&&(T="\u5728\u7ebf\u652f\u4ed8");var I=[],b=0,V=[],C=a.every((function(e){return 2===(null===e||void 0===e?void 0:e.limitType)})),k=(u||[]).find((function(e){return 1===e.limitType}));if(!k||C){var E={title:h.peopleGroupName,value:h.passengers};f.push(E)}(u||[]).forEach((function(e){if(k&&!C){var n={title:e.peopleGroupName,value:e.passengers};f.push(n)}var t={unitPrice:e.unitPrice,unit:e.unit,peopleGroupName:e.peopleGroupName||"\u6807\u51c6\u4ef7",quantity:S(e.unitQuantity,e.refundQuantity),refundQuantity:e.refundQuantity};I.push(t),b+=e.unitQuantity;var i=e.voucherWraps;V.push({unitQuantity:e.unitQuantity,resourceName:e.resourceName,resourceId:e.resourceId,voucherWraps:i})}));var R={title:p,value:I};T=T+"\uff0c\xa5"+x+"x"+b+j+" ("+(y?y+"\uff0c":"")+w+")";var P={title:T,isShow:"H"!==r&&x>0},D=$(_,t)||[],O=$(m,t)||[];return{productId:s,productName:c,categoryInfo:D[0],packageInfo:R,passenger:f,appendCategory:O,depositInfo:P,voucherList:V,resourceAggregatedInfos:d}}function $(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=n.isDomestic,o=n.cityId,a=void 0===o?0:o,s=n.cityName,c=void 0===s?"":s,l=n.countryId,d=void 0===l?0:l,u=n.countryName,m=void 0===u?"":u,_=n.inChina,h=n.orderId,f=n.saleStrategy,p=n.orderStatus,x=(n.payMode,n.orderStatusNew),g=n.useDatePrompt,j=n.orderType,w=[],N=(e||[]).filter((function(e){return!e.superVipFlag})),y=(N||[]).find((function(e){return 1===e.limitType}));return(e||[]).forEach((function(n){var o=(0,v.Z)({},n),s=(n.useDate,n.useDateDesc),l=n.useValidity,u=n.useType,N=n.priceMode,T=n.addInfos,I=n.addExts,b=n.resourceUsage,S=n.resourceType,V=n.subItems,C=n.vbkRemark,k=n.viewSpotGLon,E=void 0===k?0:k,R=n.viewSpotGLat,P=void 0===R?0:R,D=n.viewSpotName,O=n.afterOrderToActiveTime,A=(T||[]).filter((function(e){return"113"===e.titleCode&&"13"===e.subTitleCode})),L="";(T||[]).forEach((function(e){"13"===e.subTitleCode||e.addDetails[0].desc||((null===e||void 0===e?void 0:e.addDetails)||[]).forEach((function(e,n){0!==e.descType&&(L=String(/.\u5165\u56ed$/.test(e.desc))&&e.desc)})),"113"===e.titleCode&&"121"===e.subTitleCode&&((null===e||void 0===e?void 0:e.addDetails)||[]).forEach((function(e,n){e.desc}))}));var U=ee(A),Z="",M="\u4f7f\u7528\u65e5\u671f";if(0===u){var F=_?"":"\uff08\u5f53\u5730\u65f6\u95f4\uff09";Z=s+" "+F}else u>0&&(Z=l);"S"===N&&1!==u||"M"===N?M="\u4f7f\u7528\u65e5\u671f":("U"===N||"S"===N&&1===u)&&(M="\u6709\u6548\u671f");var B="";O>0&&(B=W(O));var H=(T||[]).find((function(e){return"111"===e.titleCode&&"10001"===e.subTitleCode})),G=(T||[]).find((function(e){return"111"===e.titleCode&&"10002"===e.subTitleCode})),q=!1;1!==f||5!==p&&0!==p||(q=!0);var z=!1,Y=!1,$=!1;if(b&&!z){var te=b.exchangeProofStep,ie=(b.reservationStep,b.pickupTicketStep),re=b.useTicketStep,oe=b.customSteps;if(te&&!z){var ae=X(te.images);ae&&(z=!0)}if(ie){var se=ie.exchanges;$=!0;var ce=(se||[]).find((function(e){return X(e.images)>0}));ce&&(z=!0)}if(re){var le=re.uses;Y=!0;var de=(le||[]).find((function(e){return X(e.images)>0}));de&&(z=!0)}if(oe){var ue=(oe||[]).find((function(e){return X(e.images)>0}));ue&&(z=!0)}(Y||$)&&(b.taxiInfo={hasTaxi:t,isDomestic:r,viewSpotGLon:E,viewSpotGLat:P,viewSpotName:D,address:i,cityId:a,cityName:c,countryId:d,countryName:m,orderId:h,orderStatus:p})}var me=(T||[]).filter((function(e){return"113"===e.titleCode&&"13"!==e.subTitleCode&&"121"!==e.subTitleCode}));Y&&(me=(me||[]).filter((function(e){return"113"===e.titleCode&&"120"!==e.subTitleCode&&"119"!==e.subTitleCode}))),$&&(me=(me||[]).filter((function(e){return"113"===e.titleCode&&"128"!==e.subTitleCode})));var he=[];1===j&&1!==f&&(he=(me||[]).filter((function(e){return"113"===e.titleCode&&("117"===e.subTitleCode||"118"===e.subTitleCode)})),me=(me||[]).filter((function(e){return"113"===e.titleCode&&"117"!==e.subTitleCode&&"118"!==e.subTitleCode})));var fe=ee(me),pe=ee(he),ve=(T||[]).filter((function(e){return"113"===e.titleCode&&"121"===e.subTitleCode})),xe=ne(ve);C&&xe.push({title:"\u5546\u5bb6\u63d0\u9192",valueArray:[C]});var ge=(I||[]).filter((function(e){var n;return(null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n.length)&&1!==(null===e||void 0===e?void 0:e.extId)&&2!==(null===e||void 0===e?void 0:e.extId)})),je=(I||[]).filter((function(e){return 1===(null===e||void 0===e?void 0:e.extId)})),we=(I||[]).filter((function(e){return 2===(null===e||void 0===e?void 0:e.extId)})),Ne="",ye=[];3===S&&(Ne=Q(T),ye=J(V));var Te=K(x,g),Ie=_e({resource:e});Te=!Ie&&Te;var be=[];be=(T||[]).filter((function(e){return"111"===e.titleCode&&"135"===e.subTitleCode})),o.validTime=B,o.useDateString=Z,o.udateTitle=M,o.useGuideList=U,o.otherGuideList=fe,o.reserveStrategyList=pe,o.qkdesc=L,o.showGraphicDetail=z,o.showReserve=q,o.reserveInfo=H,o.reserveDateInfo=G,o.inChina=_,o.realAddExt=ge,o.otherRemarkList=xe,o.boxUseGuide=Ne,o.boxInfo=ye,o.isShowTraveller=y,o.WifiPickup=je,o.WifiReturn=we,o.isFold=Te,o.disneyValidityList=be,w.push(o)})),w}function K(e,n){var t=!1;return[16,20].includes(e)?t=2!==n:[17,18,19,21].includes(e)&&(t=!0),t}function W(e){var n=60;if(e<=0)return"";var t=Math.floor(e/n),i=e%n;return"\u9884\u8ba2\u6210\u529f".concat(t?t+"\u5c0f\u65f6":"").concat(i?i+"\u5206\u949f":"","\u540e\u751f\u6548")}function Q(e){var n=(e||[]).filter((function(e){return"113"===e.titleCode})),t=ee(n);return t}function J(e){var n=[];return(e||[]).forEach((function(e){var t=e.addInfos,i=e.useDateDesc,r=(0,v.Z)({},e),o=(t||[]).filter((function(e){return"113"===e.titleCode})),a=ee(o);r.userGuideInfo=a;var s="\u4f7f\u7528\u65e5\u671f",c={udateTitle:s,useDateDesc:i},l="";e.afterOrderToActiveTime>0&&(l=W(e.afterOrderToActiveTime)),r.validTime=l,r.udateInfo=c,n.push(r)})),n}function X(e){return(e||[]).length}function ee(e){var n=[];return(e||[]).forEach((function(e){var t=e.subTitle,i=e.addDetails,r="";(i||[]).forEach((function(e){r+=e.desc}));var o={title:t,value:r};n.push(o)})),n}function ne(e){var n=[];return(e||[]).forEach((function(e){var t=e.subTitle,i=e.addDetails,r=[];(i||[]).forEach((function(e){r.push(e.desc)}));var o={title:t,valueArray:r};n.push(o)})),n}function te(e){var n=G(e),t=(null===n||void 0===n?void 0:n.guideInfos)||[],i=(null===n||void 0===n?void 0:n.guideManager)||{};return{guideInfos:t,guideManager:i}}function ie(e){return(e||[]).filter((function(e){return 1===e.relResourceType&&!0!==e.useExisted}))||[]}function re(e){var n=ie(e);return n.map((function(e){return e.resourceId}))}function oe(e){var n,t=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.reinfos)||[],i=[];return f._.map(t,(function(e){e.isref&&i.push({orderItemId:e.oitem.toString()})})),i}function ae(e){var n,t=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.value)||[];return JSON.parse(t)}function se(e){var n=e.basicInfo,t=void 0===n?{}:n,i=t.tagMap,r=void 0===i?{}:i;return r.hasOwnProperty("GROUNDPROMOTION")}function ce(e){var n=e.basicInfo,t=void 0===n?{}:n,i=t.tagMap,r=void 0===i?{}:i;return null===r||void 0===r?void 0:r.hasOwnProperty("isGroundNewPage")}function le(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.resourceList,i=(null===t||void 0===t?void 0:t.map((function(e){var n=e.resourceId,t=e.resourceName,i=e.imgInfo,r=void 0===i?{}:i,o=r.originalImgUrl,a=void 0===o?"":o,s=e.userSelectionDesc,c=e.tagInfos,l=void 0===c?[]:c,d=e.price,u=void 0===d?0:d,m=e.marketPrice,_=void 0===m?0:m,h=e.bizLineType,f=_>u?Number((_-u).toFixed(2).replace(".00","")):0;return(0,v.Z)({id:n,name:t,desc:s,tags:l,imageUrl:a.replace(/\.(jpg|png|Jpg|jpeg)/,"_C_358_600.$1"),bizLineType:h,priceInfo:{price:u,marketPrice:_,preferentialPrice:f,hidePreferentialPrice:!0}},e)})))||[];return i}function de(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=null!==t&&void 0!==t?t:{},o=r.voucherInfos,a=null===o||void 0===o?void 0:o.reduce((function(e,n){return(0,v.Z)((0,v.Z)({},e),{},(0,d.Z)({},n.orderItemId,n.voucherInfoDatas))}),{});if(i){var s,c,l=null!==(s=null===(c=n.filter((function(e){return e.orderItemId===i})))||void 0===c?void 0:c.map((function(e){var n=(0,v.Z)({},e),t=n,i=(t.resourceId,t.orderItemId),r=n,o=r.voucherWraps,s=o.map((function(e){var n,t=e.vouchers,r=null===(n=a[i]||[])||void 0===n?void 0:n.reduce((function(e,n){return(0,v.Z)((0,v.Z)({},e),{},(0,d.Z)({},n.voucherId,n))}),{}),o=t.map((function(e){return(0,v.Z)((0,v.Z)({},e),r[e.voucherId])}));return(0,v.Z)((0,v.Z)({},e),{},{vouchers:o})}));return n=(0,v.Z)((0,v.Z)({},n),{},{voucherWraps:s}),n}))[0])&&void 0!==s?s:{};return l}return null!==(e=n.map((function(e){var n=(0,v.Z)({},e),t=n,i=(t.resourceId,t.orderItemId),r=n,o=r.voucherWraps,s=o.map((function(e){var n,t=e.vouchers,r=null===(n=a[i]||[])||void 0===n?void 0:n.reduce((function(e,n){return(0,v.Z)((0,v.Z)({},e),{},(0,d.Z)({},n.voucherId,n))}),{}),o=t.map((function(e){return(0,v.Z)((0,v.Z)({},e),r[e.voucherId])}));return(0,v.Z)((0,v.Z)({},e),{},{vouchers:o})}));return n=(0,v.Z)((0,v.Z)({},n),{},{voucherWraps:s}),n})))&&void 0!==e?e:[]}function ue(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=n?{isSuccess:!1}:{};return null!==(t=e.map((function(e){var n=(0,v.Z)({},e),t=n,o=(t.resourceId,t.orderItemId);if(i&&o!==i)return e;var a=n,s=a.voucherWraps,c=s.map((function(e){var n=e.vouchers,t=n.map((function(e){return(0,v.Z)((0,v.Z)({},e),{},{expTime:void 0},r)}));return(0,v.Z)((0,v.Z)({},e),{},{vouchers:t})}));return n=(0,v.Z)((0,v.Z)({},n),{},{voucherWraps:c}),n})))&&void 0!==t?t:[]}function me(e,n){var t,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=n?{isSuccess:!1}:{};return null!==(t=null===(i=e.filter((function(e){return e.orderItemId===r})))||void 0===i?void 0:i.map((function(e){var n=(0,v.Z)({},e),t=n,i=t.orderItemId;if(r&&i!==r)return e;var a=n,s=a.voucherWraps,c=s.map((function(e){var n=e.vouchers,t=n.map((function(e){return(0,v.Z)((0,v.Z)({},e),{},{expTime:void 0},o)}));return(0,v.Z)((0,v.Z)({},e),{},{vouchers:t})}));return n=(0,v.Z)((0,v.Z)({},n),{},{voucherWraps:c}),n}))[0])&&void 0!==t?t:{}}function _e(e){var n=e.resource,t=void 0===n?[]:n,i=function(e){return 1===(null===e||void 0===e?void 0:e.voucherForm)},r=[];return null===t||void 0===t||t.forEach((function(e){var n;null===e||void 0===e||null===(n=e.voucherWraps)||void 0===n||n.forEach((function(e){r=r.concat(e.vouchers)}))})),r.some(i)}function he(e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,t=e.basicInfo,i=e.resource,r=t.orderId,o=i.map((function(e){var n,t=e.resourceId,i=e.voucherWraps,r=e.orderItemId,o=[];null===i||void 0===i||i.forEach((function(e){o=o.concat(e.vouchers)}));var a=null===(n=o)||void 0===n||null===(n=n.filter((function(e){return 1===e.voucherForm})))||void 0===n?void 0:n.map((function(e){return{voucherType:parseInt(e.voucherType,10),voucherId:e.voucherId}}));return null!==a&&void 0!==a&&a.length?{orderItemId:r,resourceId:t,voucherInfos:a}:{}}));o=o.filter((function(e){return null===e||void 0===e?void 0:e.orderItemId})),console.log("//////////",o);var a,s=[];n?s=(null===(a=o)||void 0===a?void 0:a.filter((function(e){return e.orderItemId===n})))||[]:s=o;var c={orderItemVouchers:s,orderId:r};return c}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(e){return 1===(null===e||void 0===e?void 0:e.voucherForm)},t=[];return null===e||void 0===e||e.forEach((function(e){t=t.concat(e.vouchers)})),t.some(n)}function pe(e){var n=function(e){return!1===(null===e||void 0===e?void 0:e.isSuccess)},t=[];return null===e||void 0===e||e.forEach((function(e){t=t.concat(e.voucherInfoDatas)})),t.some(n)}function ve(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n[0];return null===t||void 0===t||null===(e=t.voucherInfoDatas[0])||void 0===e?void 0:e.expTime}function xe(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=function(e){return 1===(null===e||void 0===e?void 0:e.voucherForm)&&(1===e.validStatus||1===e.voucherUseStatus||!1===e.isSuccess)},i=[];return null===n||void 0===n||n.forEach((function(e){i=i.concat(e.vouchers)})),null===(e=i)||void 0===e?void 0:e.every(t)}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.map((function(e){var n=e.scenicSpotId,t=e.scenicSpotName,i=e.scenicSpotLevel,r=e.dynamicImageUrl,o=void 0===r?"":r,a=e.rankDesc,s=e.features,c=e.tagInfoList,l=void 0===c?[]:c,d=e.wechatUrl,u=e.priceInfo,m=u.price,_=u.marketPrice,h=u.preferentialPrice,f=u.displayPriceType,p=void 0===f?1:f,v=u.displayPriceTypeDesc,x=u.isFree,g=Number(p),j=o.match("_C_200_250")?o.replace(/_C_200_250\.(jpg|png|Jpg|jpeg)/,"_C_358_600.$1"):o.replace(/\.(jpg|png|Jpg|jpeg)/,"_C_358_600.$1"),w=[1,4,7].includes(Number(g))?"\u9884\u7ea6":"\u9884\u8ba2",N="";return 1==g?N="\u514d\u8d39\u9884\u7ea6":4==g?N="\u514d\u8d39":6==g?N="\u6682\u65e0\u62a5\u4ef7":7==g&&(N="\u9650\u65f6\u514d\u8d39"),{displayPriceTypeDesc:v,displayPriceDesc:N,displayPriceType:g,displayBtnDesc:w,id:n,name:t,level:i,desc:a,features:s,tags:l,imageUrl:j,wechatUrl:d,priceInfo:{price:m,marketPrice:_,preferentialPrice:Number(h),isFree:x}}})))||[];return n}function je(e,n){var t=f._.filter(n,(function(e){return!!e.isPackage3SubItem})),i=(t||[]).reduce((function(e,n){return(0,v.Z)((0,v.Z)({},e),{},(0,d.Z)({},n.orderItemId,n))}),{}),r=f._.map(e,(function(e){var n=e,t=n.subOrderItemIds,r=n.resourceShowType,o=[],a=[],s=r&&1!==r;f._.forEach(t,(function(e){var n=null===i||void 0===i?void 0:i[e],t={resourceTitle:n.resourceTitle,resourceDateDesc:n.resourceDateDesc,isResourceExpired:n.isResourceExpired,orderItemId:n.orderItemId};o.push(null===i||void 0===i?void 0:i[e]),a.push(t)}));var c=f._.every(o,(function(e){return!0===e.isResourceExpired}));return n.isAllExpired=c,n.subResList=o,n.packageTabInfo=a,n.showTab=s,n}));return r}function we(e,n){var t,i=e.resource,r=void 0===i?[]:i,o=function(e){return 1===(null===e||void 0===e?void 0:e.voucherForm)},a=null===r||void 0===r?void 0:r.filter((function(e){return(null===e||void 0===e?void 0:e.orderItemId)===n})),s=[];return null===a||void 0===a||a.forEach((function(e){var n;null===e||void 0===e||null===(n=e.voucherWraps)||void 0===n||n.forEach((function(e){var n;s=null===(n=s)||void 0===n?void 0:n.concat(e.vouchers)}))})),null===(t=s)||void 0===t?void 0:t.some(o)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(e){return 1===(null===e||void 0===e?void 0:e.voucherForm)},t=[];return null===e||void 0===e||e.forEach((function(e){t=t.concat(e.vouchers)})),t.filter(n)[0]}var ye=10650062960,Te={POP:"act-".concat(ye,"-cancel-click-"),ENTERSERVICE:"act-".concat(ye,"-entry-click-"),ONLINESERVICE:"act-".concat(ye,"-assortarea-click-"),VOIP:"act-".concat(ye,"-voip-click-"),PHONE:"act-".concat(ye,"-compaint-click-"),OSPHONE:"act-".concat(ye,"-guess-click-"),ORDERTIPCLICK:"act-".concat(ye,"-tip-click-"),ORDERSTATUS:"act-".concat(ye,"-attention-add-"),ORDERGRPCLICK:"act-".concat(ye,"-grp-click-"),COPYORDER:"act-".concat(ye,"-cruise-click-"),CONTINUEPAY:"act-".concat(ye,"-deal-add-"),VOICECLICK:"act-".concat(ye,"-voice-click-"),MYPHOTO:"act-".concat(ye,"-userinfo-click-"),APPLYCHANGEDATE:"act-".concat(ye,"-activity-add-"),RESENDMESSAGE:"act-".concat(ye,"-filter-click-"),URGEMESSAGE:"act-".concat(ye,"-urge-click-"),ADDCOMMENT:"act-".concat(ye,"-comment-add-"),MYCOMMENT:"act-".concat(ye,"-concern-click-"),DESTAREACLICK:"act-".concat(ye,"-destarea-click-"),BACKLOGCLICK:"act-".concat(ye,"-backlog-click-"),SPIKECLICK:"act-".concat(ye,"-spike-click-"),THMCLICK:"act-".concat(ye,"-thm-click-"),AROUNDADDPLAN:"act-".concat(ye,"-around-addplan-"),TICKETCLICK:"act-".concat(ye,"-ticket-click-"),FLICHTCLICK:"act-".concat(ye,"-flight-click-"),CONTENTSCLICK:"act-".concat(ye,"-Contents-click-"),WXGCLICK:"act-".concat(ye,"-wxg-click-"),NAQUHUACLICK:"act-".concat(ye,"-nqh-click-"),HEALTHCODE4AREACLICK:199797,COUPONCLICK:"act-".concat(ye,"-coupon-click-"),BACKLOGADD:"act-".concat(ye,"-backlog-add-"),TOPCLICK:"act-".concat(ye,"-top-click-"),SPOTCLICK:"act-".concat(ye,"-spot-click-"),SHOPLISTCLICK:"act-".concat(ye,"-shoplist-click-"),SHELFCLICK:"act-".concat(ye,"-shelf-click-"),STRATEGYCLICK:"act-".concat(ye,"-strategy-click-"),UPLOADCLICK:"act-".concat(ye,"-upload-click-"),DIYCLICK:"act-".concat(ye,"-diy-add-"),GRIDCLICK:"act-".concat(ye,"-grid-click-"),APPLYCLICK:"act-".concat(ye,"-apply-click-"),GIVEUPCLICK:"act-".concat(ye,"-giveup-click-"),SHOPCLICK:"act-".concat(ye,"-shop-click-"),ADDITIONGUIDECLICK:"act-".concat(ye,"-mask-click-"),ADDITIONMORECLICK:"act-".concat(ye,"-Contents-more-")},Ie={orderInfoWtapper:"order-Info-Wtapper",orderIDText:"order-id-text",IMService:"order_ttd_imservice",IMservicePrivoder:"providers_imservice",ShareBtn:"share-btn",GobackBtn:"order_ttd_goback",orderStatusModal:"status-modal",orderStatusDesc:"status_desc",orderFolder:"order_folder",orderFundDesc:"fund_desc",orderFundFolder:"fund_folder",orderScenicNotice:"scenic_notice",orderScenicNoticeFolder:"scenic_notice_folder",orderSecondFolder:"order_seconds_folder",orderExpenseBtn:"order_expense_btn",orderExpenseModelWrapper:"order_expense_wrapper",ScenicDetailBtn:"scenic_detail_btn",OrderBookInfoTittle:"order_detail_booking_info_tittle",ViewEye:"f_view_eye",phoneCode:"phone_code",phoneCodeBtn:"phone_code_btn",travelDetailShow:"travel_detail_show",travelDetailHide:"travel_detail_hide",DigitFile:"digit_file",RefundHead:"refund_head",ProducuTittle:"product_tittle",ElerticTicketIcon:"elertic_ticket_icon",packageTab:"package_tab_",TtdSild:"ttd-card-slide",serviceBtn:"service_flow_btn",toCheck:"to_check",orderExpense:"order_detail_expense_wrapper",cancelReasonLayer:"cancel_reason_layer",confirmReservation:"confirm_reservation_btn",digitFileBtn:"digit_file_btn"},be=t(76862),Se={LAST_PAGE:"LAST_PAGE",HOME_PAGE:"HOME_PAGE",NEED_LOGIN:"NEED_LOGIN",SEARCH_ORDER:"SEARCH_ORDER",MOBILE_ORDER:"MOBILE_ORDER",DELETED_ORDER:"DELETED_ORDER"},Ve={data:{CityEntities:[{CityID:2,CityName:"\u4e0a\u6d77",cityCode:"SHA",cityEName:"Shanghai",cityID:2,cityLocalName:"\u4e0a\u6d77",cityName:"\u4e0a\u6d77"}]}};function Ce(e){var n=(null===e||void 0===e?void 0:e["CityEntities"])||[];return(null===n||void 0===n?void 0:n[0])||{}}var ke=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n,t){var i,r,o,a,s,c,l,d,u,m,_,h,f,x,g,w,N,y,T,I,b,S,V,C,k,E,R;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.imService,o){e.next=3;break}return e.abrupt("return",null);case 3:if(a=n.data.basicInfo,s=a.vendorId,c=a.saleType,l=a.servicePrivoder,d=a.agreementType,a.vendorName,u=function(){return new Promise((function(e,n){p().locate.getCtripCity((function(n){e(n)}),"vacations-ttdorder-lbs")}))},null===p()||void 0===p()||null===(r=p().locate)||void 0===r||!r.getCtripCity){e.next=12;break}return e.next=9,u();case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=Ve;case 13:if(m=e.t0,_={},m&&null!==m&&void 0!==m&&m.data&&(_=Ce(m.data)),h=!1,f=!1,x=_,g=x.CityID,!g){e.next=25;break}return w={ver:be.G,pageid:ye,dcid:g,type:1},e.next=23,t(w);case 23:N=e.sent,N&&(f=!0,h=N.isOversea);case 25:return y=o.servicePhone,T=o.overseaServicePhone,o.destCityIds,I=o.displayIM,b=o.imCodes,S=void 0===b?[]:b,V=o.isService,0!==c&&1!==l||(y=y||"400-632-1088",T=T||"+86(21)-3406-4888",V=!0),C=!!y||!!T,k=S.reduce((function(e,n){return e[n.key]=n.val,e}),{}),E=1===c||2===l,R=(0,v.Z)((0,v.Z)({},o),{},{vendorId:s,saleType:c,isOversea:h,hasLocation:f,imcodehash:k,hasPhone:C,displayIm:I,servicePrivoder:l,agreementType:d,servicePhone:y,overseaServicePhone:T,isService:V,isNotAgent:E}),e.abrupt("return",R);case 32:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ee=function(){function e(n,t,i){var r=this;(0,o.Z)(this,e),(0,d.Z)(this,"store",void 0),(0,d.Z)(this,"actions",void 0),(0,d.Z)(this,"post",void 0),(0,d.Z)(this,"timer",void 0),(0,d.Z)(this,"orderDetailService",new N.h),(0,d.Z)(this,"reRequestDynamicCodeCount",void 0),(0,d.Z)(this,"setTimeoutMethod",void 0),(0,d.Z)(this,"reRequestDynamicCodeCountMap",{}),(0,d.Z)(this,"init",(function(e,n,t){var i=r.getRequestParam(e,n);r.fetchOrderDetail(i,!0,t),r.getAdditionalSale(e,t),r.getAdditionalScenicSpotsInfo(e,n)})),(0,d.Z)(this,"doGetAdvisorShopMember",(function(e){return r.orderDetailService.getGuideSearch(e)})),(0,d.Z)(this,"getOrderProcessInfo",(function(e){var n=e,t=r.actions,i=t.UPDATE_ORDER_PROCESS,o=t.UPDATE_ORDER_PROCESS_STATUS,a={headExt:{locale:"zh-CN",currency:"CNY"},pageid:ye,ver:be.G,orderId:n},s=r.orderDetailService.getOrderProcess(a);return s.then((function(e){var n=B(e);i(n)})).catch((function(e){o("done")})),s})),(0,d.Z)(this,"getOrderExpensesInfo",(function(e){var n,t=null===(n=e.basicInfo)||void 0===n?void 0:n.orderId,i=r.actions,o=i.UPDATE_ORDER_EXPENSES,a=i.UPDATE_ORDER_EXPENSES_STATUS,s=e.operationInfo,c=s.find((function(e){return 9===e.operationType}));if(c){var l=r.getRequestParamByStore(),d=l.token,u=d?{token:d}:{},m=(0,v.Z)({pageid:ye,headExt:{locale:"zh-CN",currency:"CNY"},ver:be.G,orderId:t},u);r.orderDetailService.getUnifiedOrderExpenses(m).then((function(e){var n=H(e);o(n)})).catch((function(e){a("done")}))}})),(0,d.Z)(this,"getUtcTime",(function(){var e={ver:"8.33.2.202102071052",pageid:ye};return r.orderDetailService.getUTCTime(e)})),(0,d.Z)(this,"getRequestParamByStore",(function(){var e=r.store.getState(),n=e.requestParam,t=void 0===n?{}:n;return t})),(0,d.Z)(this,"refreshOrderByContinuePay",(function(e){var n=null===r||void 0===r?void 0:r.actions,t=n.UPDATE_MASK_LOADING,i=r.getRequestParamByStore(),o=r.fetchOrderDetail(i,!1,e);t(!0),o.then((function(e){t(!1),r.resetRefreshStatus()})).catch((function(e){t(!1),r.resetRefreshStatus()}));var a=i.orderId,s=i.token;r.getAdditionalSale(a,e),r.getAdditionalScenicSpotsInfo(a,s)})),(0,d.Z)(this,"doCheckCodeSendMsgByPhone",(function(e){var n=(0,v.Z)((0,v.Z)({},e),{},{sourceType:1,messageCode:"1",pageid:ye,ver:be.G});return r.orderDetailService.getSendMessageByPhone(n)})),(0,d.Z)(this,"doCheckCodeCheckPhoneCode",(function(e){var n=(0,v.Z)((0,v.Z)({},e),{},{sourceType:1,messageCode:"1",pageid:ye,ver:be.G});return r.orderDetailService.getPhoneCode(n)})),(0,d.Z)(this,"getGsLocation",(function(e){return new Promise((function(n){var t=r.orderDetailService.getGsLocation(e);t.then((function(e){if(null!==e&&void 0!==e&&e.head&&0===e.head.errcode){var t=e.data,i=t.did,r=t.dname,o=t.glon,a=t.glat,s=t.gscid,c=t.isOversea;n({districtid:i,districtname:r,lon:o,lat:a,gscid:s,isOversea:c})}else n(0)}))}))})),(0,d.Z)(this,"doContinuePay",(function(e){var n=(0,v.Z)((0,v.Z)({},e),{},{ver:be.G,sid:0,aid:0,from:"",payVersion:"2.0",paySdkType:9,orderSummary:{}});return r.orderDetailService.getContinuePay(n)})),(0,d.Z)(this,"cancelOrder",(function(e){var n=r.store.getState(),t=n.cancelList,i={orderId:n.basicInfo.orderId.toString(),items:t,ver:be.G,reason:e};return r.orderDetailService.handleOrderManagement(i)})),(0,d.Z)(this,"deleteOrder",(function(){var e=r.store.getState(),n={clientInfo:{version:be.G,crnVersion:""},orderId:e.basicInfo.orderId};return r.orderDetailService.doDeleteOrder(n)})),(0,d.Z)(this,"sendMessage",(function(e){return r.orderDetailService.setSendMessage(e)})),(0,d.Z)(this,"doReminderMessage",(function(e){return r.orderDetailService.setReminderMessage(e)})),(0,d.Z)(this,"doSubmitReserveValidityOrderInfo",(function(e){var n=(0,v.Z)((0,v.Z)({},e),{},{pageid:ye,ver:be.G});return r.orderDetailService.doSubmitReserveValidityOrderInfo(n)})),(0,d.Z)(this,"resendMailInfo",(function(e){var n=(0,v.Z)({ver:be.G},e);return r.orderDetailService.resendMailInfo(n)})),(0,d.Z)(this,"generateShortUrlService",(function(e){var n,t={pageid:ye,orderId:null===e||void 0===e||null===(n=e.orderId)||void 0===n?void 0:n.toString()};r.orderDetailService.generateShortUrl(t).then((function(e){var n;if(0===(null===e||void 0===e||null===(n=e.head)||void 0===n?void 0:n.errcode)){var t,i=r.actions.UPDATE_SHORT_URL;i(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.shortUrl)}})).catch((function(e){}))})),(0,d.Z)(this,"checkDynamicCode",(function(e){var n=_e(e);if(n){var t=r.store.getState(),i=he(t,void 0,void 0);r.getDynamicCode(i,!1,{},!0)}})),(0,d.Z)(this,"getDynamicCode",(function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(0,v.Z)({},e),a=r.actions,s=a.UPDATE_VOUCHER_INFO,c=a.UPDATE_VOUCHER_REFRESH_INFO,l=a.UPDATE_PACKAGE_INFO;r.orderDetailService.getDynamicVoucherInfo(o).then((function(o){var a,d,u=r.store.getState(),m=u.resource,_=u.packages,h=o||{},f=h.data,p=void 0===f?{}:f,v=p,x=v.voucherInfos;if(n&&r.showDynamicCodeToast(o,t),null===t||void 0===t||null===(a=t.sendUbtByPage)||void 0===a||null===(d=a.ubtDevTrace)||void 0===d||d.call(a,"o_orderttd_getDynamicCode",{param:e,res:o}),null!==p&&void 0!==p&&p.voucherInfos){var g=pe(x);if(i&&r.reRequestDynamicCodeCount<4&&g){if(r.reRequestDynamicCodeCount=r.reRequestDynamicCodeCount+1,r.setTimeoutMethod=setTimeout((function(){r.getDynamicCode(e,!1,i)}),2e3),r.reRequestDynamicCodeCount>3)return void clearTimeout(r.setTimeoutMethod)}else clearTimeout(r.setTimeoutMethod);var j=de(m,p),w=je(_,j);if(s(j),l(w),i){var N=ve(x);c({refreshRate:N})}}}))})),(0,d.Z)(this,"_resetDynamicCode",(function(e){var n=r.actions.UPDATE_VOUCHER_INFO,t=r.store.getState(),i=t.resource,o=ue(i,e);n(o)})),this.store=n,this.actions=t,this.post=i.request,this.reRequestDynamicCodeCount=0,this.refreshOrderInfo=this.refreshOrderInfo.bind(this),this.refreshComponentDynamicCode=this.refreshComponentDynamicCode.bind(this),this.getDayTripContractInfo=this.getDayTripContractInfo.bind(this),this.clearRefreshOrderInterval=this.clearRefreshOrderInterval.bind(this),this.getDynamicCodeByResourceId=this.getDynamicCodeByResourceId.bind(this),this.getDynamicCodeByOrderItemId=this.getDynamicCodeByOrderItemId.bind(this),this.refreshComponentDynamicCodeByPackageChangeTab=this.refreshComponentDynamicCodeByPackageChangeTab.bind(this)}return(0,a.Z)(e,[{key:"getRequestParam",value:function(e,n){var t=this.actions.UPDATE_REQUEST_PARAMS,i={orderId:e,ver:be.G,pageid:ye,csource:0,showEx:0,locale:"zh-CN",currency:"CNY",aid:"",sid:"",tags:[{key:"platformTrade",value:"continueToPay"},{key:"platformTrade",value:"queryRefund"}]};return n&&(i["token"]=n),t(i),i}},{key:"refreshOrderInfo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0,i=this.getRequestParamByStore(),r=i.token;return this.getAdditionalSale(e,t),this.getAdditionalScenicSpotsInfo(e,r),i.orderId=e,this.fetchOrderDetail(i,n,t)}},{key:"fetchOrderDetail",value:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=this.actions,o=r.UPDATE_ORDER_INFO,a=r.UPDATE_ERROR_ORDER_INFO,s=r.UPDATE_IM_SERVICE_PARAMS,c=r.SHOW_GLOBAL_LOADING,l=r.HIDE_GLOBAL_LOADING;t&&c();var d=this.orderDetailService.getOrderDetail(e);return d.then(function(){var r=(0,w.Z)((0,j.Z)().mark((function r(c){var d,u,m,_,h,f,p,v;return(0,j.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(m=(null===c||void 0===c?void 0:c.head)||{},_=m.errcode,h=m.errmsg,0===_){r.next=17;break}if(4002!==_){r.next=6;break}return t&&l(),a({type:Se.MOBILE_ORDER,msg:h}),r.abrupt("return");case 6:if(4003!==_){r.next=10;break}return t&&l(),a({type:Se.NEED_LOGIN,msg:h}),r.abrupt("return");case 10:if(4004!==_){r.next=14;break}return t&&l(),a({type:Se.DELETED_ORDER,msg:h}),r.abrupt("return");case 14:return t&&l(),a({type:Se.LAST_PAGE,msg:""}),r.abrupt("return");case 17:if(2!==(null===c||void 0===c||null===(d=c.data)||void 0===d?void 0:d.usertype)){r.next=21;break}return t&&l(),a({type:Se.SEARCH_ORDER,msg:""}),r.abrupt("return");case 21:if(f=null===c||void 0===c||null===(u=c.data)||void 0===u||null===(u=u.basicInfo)||void 0===u?void 0:u.orderId,f){r.next=26;break}return t&&l(),a({type:Se.LAST_PAGE,msg:""}),r.abrupt("return");case 26:return r.next=28,ke(c,n.getGsLocation);case 28:p=r.sent,s(p),v=k(c),o(v),a({}),t&&l(),n.checkDynamicCode(v),n.getOrderExpensesInfo(v),n.getOptionInfo(v),n.getCancelInfo(v),n.getCancelReason(v),n.generateShortUrlService(e),n.checkRefreshOrder(v,i);case 41:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),d}},{key:"getCrawlerKey",value:function(e,n){var t={appid:"wx0e6ed4f51db9d078"},i={fat:"/restapi/soa2/12530/json/crawlerScripting",uat:"/restapi/soa2/12530/json/crawlerScripting",prd:"/restapi/soa2/12530/json/crawlerScripting"},r=i.prd,o={url:r,fixedParams:t,getScriptFromRsp:function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.script},callback:function(e){n(e)}};try{null!==e&&void 0!==e&&e.createAntiSpiderRequest?null===e||void 0===e||e.createAntiSpiderRequest(o):n(null)}catch(e){n(null)}}},{key:"getAdditionalSale",value:function(e,n){var t=this;this.getCrawlerKey(n,(function(n){console.log(n,"keykeykey"),n&&t._getAdditionalSale(e,n)}))}},{key:"_getAdditionalSale",value:function(e,n){var t=null===this||void 0===this?void 0:this.actions,i=t.UPDATE_ADDITIONAL_SALE,r={locale:"zh-CN",currency:"CNY",orderId:e,customExtension:[{name:"MiniType",value:"WAP/WECHATAPP"},{name:"crawlerKey",value:n}]};this.orderDetailService.getAdditionalSaleRelation(r).then((function(e){var n=le(e);i({resourceList:n})}))}},{key:"resetRefreshStatus",value:function(){var e=null===this||void 0===this?void 0:this.actions,n=e.UPDATE_REFRESH_STATUS;setTimeout((function(){n("refreshed")}),500)}},{key:"getOptionInfo",value:function(e){var n=null===e||void 0===e?void 0:e.resource,t=re(n);if(null!==t&&void 0!==t&&t.length){var i=this.actions.UPDATE_ADD_OPTION_INFO,r={pageid:ye,ver:be.G,type:1,optids:t};this.orderDetailService.getOptionInfo(r).then((function(e){var n,t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.ress;i(t)}))}}},{key:"getCancelInfo",value:function(e){var n,t,i=null===(n=e.basicInfo)||void 0===n?void 0:n.orderId,r=null===(t=e.basicInfo)||void 0===t?void 0:t.backOrderStatus;if(3===r){var o=this.actions.UPDATE_CANCEL_LIST,a={oid:i,ostatus:r,ver:be.G,pageid:ye};this.orderDetailService.getOrderRefundInfo(a).then((function(e){var n=oe(e);o(n)})).catch((function(e){}))}}},{key:"getCancelReason",value:function(e){var n=e.basicInfo.orderType,t=e.basicInfo.backOrderStatus;if(3===t){var i={key:2===n?"actCancelReason_notPay":"tktCancelReason_notPay",pageid:ye,ver:be.G},r=this.actions.UPDATE_REASON_LIST;this.orderDetailService.getApplicationConfig(i).then((function(e){var n=ae(e);r(n)})).catch((function(e){}))}}},{key:"getDynamicCodeByResourceId",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;clearTimeout(this.setTimeoutMethod),console.log("===",this.actions);var o=this.actions,a=o.UPDATE_VOUCHER_INFO_BY_RESOURCE,s=(o.UPDATE_VOUCHER_REFRESH_INFO,(0,v.Z)({},e));this.orderDetailService.getDynamicVoucherInfo(s).then((function(o){var s,c=4005===(null===o||void 0===o||null===(s=o.responseHead)||void 0===s?void 0:s.errcode);if(n._resetDynamicCodeByResource(c,r),t&&n.showDynamicCodeToast(o,i),null!==o&&void 0!==o&&o.data){var l=n.store.getState(),d=l.resource,u=o||{},m=u.data,_=m,h=_.voucherInfos,f=pe(h),p=n.reRequestDynamicCodeCountMap[r]||0;f&&p<3&&!t?(n.reRequestDynamicCodeCountMap[r]=p+1,setTimeout((function(){n.getDynamicCodeByResourceId(e,t,i,r)}),2e3)):f||t||(n.reRequestDynamicCodeCountMap[r]=0);var v=de(d,m,r);console.log("info",v);var x={info:v,rid:r};setTimeout((function(){a(x)}),500)}})).catch((function(e){console.log(e),n.showDynamicCodeToast({},i)}))}},{key:"getDynamicCodeByOrderItemId",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;clearTimeout(this.setTimeoutMethod);var o=this.actions.UPDATE_VOUCHER_INFO_BY_RESOURCE,a=(0,v.Z)({},e);this.orderDetailService.getDynamicVoucherInfo(a).then((function(a){var s,c=4005===(null===a||void 0===a||null===(s=a.responseHead)||void 0===s?void 0:s.errcode);if(n._resetDynamicCodeByResource(c,r),null!==a&&void 0!==a&&a.data){var l=n.store.getState(),d=l.resource,u=a||{},m=u.data,_=m,h=_.voucherInfos,f=pe(h),p=n.reRequestDynamicCodeCountMap[r]||0;f&&p<3&&!t?(n.reRequestDynamicCodeCountMap[r]=p+1,setTimeout((function(){n.getDynamicCodeByOrderItemId(e,t,i,r)}),2e3)):f||t||(n.reRequestDynamicCodeCountMap[r]=0);var v=de(d,m,r);console.log("info",v);var x={info:v,orderItemId:r};o(x),t&&n.showDynamicCodeToast(a,i)}else t&&n.showDynamicCodeToast(a,i)})).catch((function(e){console.log(e),n.showDynamicCodeToast({},i)}))}},{key:"getDynamicCodeByOrderItemIdForChangePackageTab",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=this.actions,a=o.UPDATE_VOUCHER_INFO_BY_RESOURCE,s=(o.UPDATE_VOUCHER_REFRESH_INFO,(0,v.Z)({},e));this.orderDetailService.getDynamicVoucherInfo(s).then((function(e){var o,s=4005===(null===e||void 0===e||null===(o=e.responseHead)||void 0===o?void 0:o.errcode);if(n._resetDynamicCodeByResource(s,r),t&&n.showDynamicCodeToast(e,i,t),null!==e&&void 0!==e&&e.data){var c=n.store.getState(),l=c.resource,d=e||{},u=d.data,m=de(l,u,r),_={info:m,orderItemId:r};setTimeout((function(){a(_)}),500)}})).catch((function(e){console.log(e),n.showDynamicCodeToast({},i)}))}},{key:"showDynamicCodeToast",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e||{},r=i.responseHead,o=i.data,a=r||{},s=a.errcode,c=a.errmsg;4005===s?n.showToast({title:c||"\u51ed\u8bc1\u5237\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}):4004===s?n.showToast({title:c||"\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}):o?t||n.showToast({title:"\u51ed\u8bc1\u5237\u65b0\u6210\u529f",icon:"none"}):n.showToast({title:c||"\u51ed\u8bc1\u5237\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}},{key:"refreshComponentDynamicCode",value:function(e,n,t){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this.store.getState(),o=we(r,t);if(o){var a=he(r,n,t);this.getDynamicCodeByOrderItemId(a,i,e,n)}}},{key:"refreshComponentDynamicCodeByPackageChangeTab",value:function(e,n,t){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this.store.getState(),o=we(r,t);if(o){var a=he(r,n,t);this.getDynamicCodeByOrderItemIdForChangePackageTab(a,i,e,n)}}},{key:"_resetDynamicCodeByResource",value:function(e,n){var t=this.actions.UPDATE_VOUCHER_INFO_BY_RESOURCE,i=this.store.getState(),r=i.resource,o=me(r,e,n),a={info:o,orderItemId:n};t(a)}},{key:"getDayTripContractInfo",value:function(e){return this.orderDetailService.getDayTripOrderContractInfo(e)}},{key:"getAdditionalScenicSpotsInfo",value:function(e,n){var t=this,i={orderId:e,token:n};this.orderDetailService.getAdditionalScenicSpotsInfo(i).then((function(e){var n=(null===e||void 0===e?void 0:e.data)||[],i=ge(n),r=t.actions.UPDATE_ADDITIONAL_SCENIC_SPOTS;r(i)}))}},{key:"getCheckRefreshOrderInfo",value:function(e,n){var t={orderId:e,backOrderStatus:n};return this.orderDetailService.getCheckRefreshOrderInfo(t)}},{key:"checkRefreshOrder",value:function(e,n){var t=this,i=e.basicInfo,r=i.orderId,o=i.backOrderStatus,a=i.refreshFixRate,s=void 0===a?0:a,c=1,l=s;console.log(s),console.log(l<=0),l<=0||(null!==this&&void 0!==this&&this.timer&&clearInterval(null===this||void 0===this?void 0:this.timer),this.timer=setInterval((0,w.Z)((0,j.Z)().mark((function e(){var i,a,s;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c++,e.next=3,t.getCheckRefreshOrderInfo(r,o);case 3:if(i=e.sent,a=i||{},s=a.refreshOrderFlag,!s){e.next=9;break}return clearInterval(null===t||void 0===t?void 0:t.timer),t.refreshOrderInfo(r,!0,n),e.abrupt("return");case 9:if(!(c>l||s)){e.next=12;break}return clearInterval(null===t||void 0===t?void 0:t.timer),e.abrupt("return");case 12:case"end":return e.stop()}}),e)}))),5e3))}},{key:"clearRefreshOrderInterval",value:function(){clearInterval(null===this||void 0===this?void 0:this.timer)}}]),e}(),Re=function(e,n){return(0,v.Z)((0,v.Z)({},e),n)},Pe=function(e,n){var t=null===e||void 0===e?void 0:e.abtestsMap,i=n.originOrderInfo,r=n.contact,o=n.invoiceButton,a=n.delivery,s=n.renewInfo,c=n.reserveInfo,l=n.operationInfo,d=n.basicInfo,u=n.resource,m=n.packages,_=n.category,h=n.abtestsMap,f=n.sortComponent,p=n.newFooterButton,x=n.isNewGroundPromotionOrders;return e.orderInfo=i,e.contact=r,e.invoiceButton=o,e.deliveryInfo=a,e.renewInfo=s,e.reserveInfo=c,e.operationInfo=l,e.basicInfo=d,e.resource=u,e.packages=m,e.category=_,e.sortComponent=f,e.newFooterButton=p,e.abtestsMap=(0,v.Z)((0,v.Z)({},t),h),e.done=!0,e.noNetnork=!1,e.isNewGroundPromotionOrders=x,(0,v.Z)({},e)},De=function(e,n){return e.noNetwork=n,(0,v.Z)({},e)},Oe=function(e,n){return e.done=n,(0,v.Z)({},e)},Ae=function(e,n){return e.refreshStatus=n,(0,v.Z)({},e)},Le=function(e,n){return e.imService=n,(0,v.Z)({},e)},Ue=function(e,n){var t=n.abtests,i=n.resourceList,r=(t||[]).reduce((function(e,n){return(0,v.Z)((0,v.Z)({},e),{},(0,d.Z)({},n.testno,n.version))}),{}),o=e.abtestsMap;return e.abtestsMap=(0,v.Z)((0,v.Z)({},o),r),e.additionalSale=i,(0,v.Z)({},e)},Ze=function(e,n){return e.requestParam=n,(0,v.Z)({},e)},Me=function(e,n){return e.orderProcess.status=n,(0,v.Z)({},e)},Fe=function(e,n){return e.orderProcess=n,(0,v.Z)({},e)},Be=function(e,n){return e.orderExpenses.status=n,(0,v.Z)({},e)},He=function(e,n){return e.orderExpenses=n,(0,v.Z)({},e)},Ge=function(e,n){return e.cutOrderInfo=n,(0,v.Z)({},e)},qe=function(e,n){return e.hasChecked=n,(0,v.Z)({},e)},ze=function(e,n){return e.optionInfo=n,(0,v.Z)({},e)},Ye=function(e,n){return e.cancelReason=n,(0,v.Z)({},e)},$e=function(e,n){return e.cancelList=n,(0,v.Z)({},e)},Ke=function(e,n){return e.chooseCancelReason=n,(0,v.Z)({},e)},We=function(e,n){return e.isInMiniProgram=n,(0,v.Z)({},e)},Qe=function(e,n){return e.errorInfo=n,(0,v.Z)({},e)},Je=function(e,n){return e.shortUrl=n,(0,v.Z)({},e)},Xe=function(e,n){return e.globalLoading=!0,(0,v.Z)({},e)},en=function(e,n){return e.globalLoading=!1,(0,v.Z)({},e)},nn=function(e,n){return e.maskLoading=n,(0,v.Z)({},e)},tn=function(e,n){return e.time=(new Date).getTime(),e.resource=n,(0,v.Z)({},e)},rn=function(e,n){return e.additionalScenicSpots=n,(0,v.Z)({},e)},on=function(e,n){return e.voucherRefresh=n,(0,v.Z)({},e)},an=function(e,n){e.time=(new Date).getTime();var t=n.info,i=n.orderItemId,r=e.resource,o=e.packages,a=r.map((function(e){return e.orderItemId===i?t:e})),s=je(o,a);return e.packages=s,e.resource=a,(0,v.Z)({},e)},sn=function(e,n){return e.time=(new Date).getTime(),e.packages=n,(0,v.Z)({},e)},cn=x.setupStore,ln=x.setupContext,dn=x.createReactModel,un={data:"",globalLoading:!1,maskLoading:!1,requestParam:{},orderProcess:{},orderExpenses:{},errorInfo:{},voucherRefresh:{}},mn=dn((function(){var e=ln(g.fH),n=ln(g.fI),t=n.urlQuery,r=cn({initialState:(0,v.Z)((0,v.Z)({},un),{},{urlQuery:t,orderId:(null===t||void 0===t?void 0:t.orderid)||(null===t||void 0===t?void 0:t.orderId)}),reducers:(0,v.Z)({},i)}),o=r.store,a=r.actions,s=new Ee(o,a,e);return{store:o,actions:(0,v.Z)({init:s.init,refreshOrderInfo:s.refreshOrderInfo,getUtcTime:s.getUtcTime,doGetAdvisorShopMember:s.doGetAdvisorShopMember,getRequestParamByStore:s.getRequestParamByStore,refreshOrderByContinuePay:s.refreshOrderByContinuePay,doCheckCodeSendMsgByPhone:s.doCheckCodeSendMsgByPhone,doCheckCodeCheckPhoneCode:s.doCheckCodeCheckPhoneCode,doContinuePay:s.doContinuePay,cancelOrder:s.cancelOrder,deleteOrder:s.deleteOrder,sendMessage:s.sendMessage,doReminderMessage:s.doReminderMessage,doSubmitReserveValidityOrderInfo:s.doSubmitReserveValidityOrderInfo,resendMail:s.resendMailInfo,getDynamicCode:s.getDynamicCode,refreshComponentDynamicCode:s.refreshComponentDynamicCode,getDayTripContractInfo:s.getDayTripContractInfo,getCheckRefreshOrderInfo:s.getCheckRefreshOrderInfo,clearRefreshOrderInterval:s.clearRefreshOrderInterval,refreshComponentDynamicCodeByPackageChangeTab:s.refreshComponentDynamicCodeByPackageChangeTab,getOrderProcessInfo:s.getOrderProcessInfo},a)}}));function _n(){return mn.useState((function(e){return(0,v.Z)({},e)}))}function hn(){return mn.useActions()}var fn=t(72637),pn=t(2269),vn=fn.gk.showPopup;function xn(){var e=_n(),n=null===e||void 0===e?void 0:e.basicInfo,t=n.noticeContent,i=n.noticeTitle;if(!t)return null;var r=(0,pn.jsx)(_.View,{className:"order_detail_scenic_notice_detail",children:(0,pn.jsx)(_.RichText,{nodes:t})}),o=function(){vn({title:"\u666f\u533a\u516c\u544a",children:r})};return(0,pn.jsx)(_.View,{className:"ottd_orderDetail_header_notice","data-testid":Ie.orderScenicNotice,children:(0,pn.jsx)(_.View,{className:"ottd_orderDetail_header_status_contain order_detail_padding_horizontal_16",children:(0,pn.jsxs)(_.View,{onClick:o,className:"order_detail_scenic_notice_wrap",children:[(0,pn.jsxs)(_.View,{className:"order_detail_scenic_notice",children:[(0,pn.jsx)(_.View,{className:"order_detail_scenic_notice_left",children:(0,pn.jsx)(_.Text,{className:"scenic_notice",children:"\u666f\u533a\u516c\u544a"})}),(0,pn.jsx)(_.View,{className:"order_detail_scenic_notice_right",children:(0,pn.jsx)(_.Text,{className:"scenic_content",dangerouslySetInnerHTML:{__html:i}})})]}),(0,pn.jsx)(_.View,{className:"icon-Forward scenic_icon","data-testid":Ie.orderScenicNoticeFolder})]})})})}var gn=t(87039);function jn(e){var n=_n(),t=n.orderProcess,i=t.orderProgressList;return i?(0,pn.jsxs)(_.View,{className:"ottd_orderDetail_order_progress order_detail_padding_horizontal_16","data-testid":Ie.orderStatusModal,children:[i.map((function(e,n){return(0,pn.jsxs)(_.View,{className:"order_progress_item",children:[(0,pn.jsx)(_.View,{className:"order_detail_icon_contain",children:1===e.processStatus?(0,pn.jsx)(_.View,{className:"icon-radiobox2 order_progress_icon1"}):(0,pn.jsx)(_.View,{className:"order_progress_icon2"})}),(0,pn.jsxs)(_.View,{className:"flex_row",children:[(0,pn.jsx)(_.View,{className:n+1===i.length?"left_border_contain":"left_border left_border_contain"}),(0,pn.jsxs)(_.View,{className:"order_progress_inner_item",children:[(0,pn.jsx)(_.View,{children:e.progressDescription}),e.processStatus?(0,pn.jsx)(_.View,{children:e.occurrenceTime}):null]})]})]},String(n))})),(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{children:"*\u4e0a\u8ff0\u65f6\u95f4\u4e3a\u5317\u4eac\u65f6\u95f4"})})]}):null}var wn,Nn,yn=t(56884),Tn=t.n(yn),In={distance:120,touchesStart:{},pullRefresh:{}};function bn(e,n){n&&(In.isLoading||(In.isLoading?In.isTouch=!1:(In.isTouch=!0,In.touchesStart.x=e.touches[0].pageX,In.touchesStart.y=e.touches[0].pageY)))}function Sn(e){var n=e.enableScroll,t=void 0===n||n,i=e.className,r=void 0===i?"":i,o=e.style,a=void 0===o?{}:o,s=e.children,c=e.handleRefresh,l=e.scrollIntoView,d=e.scrollAction,m=(0,u.useState)([0,""]),f=(0,h.Z)(m,2),p=f[0],x=f[1],g=(0,u.useState)(0),j=(0,h.Z)(g,2),w=j[0],N=j[1],y=(0,u.useState)(!0),T=(0,h.Z)(y,2),I=T[0],b=T[1],S=(0,h.Z)(p,2),V=S[0],C=S[1];wn=function(e,n){In.pullRefresh=(0,v.Z)((0,v.Z)({},In.pullRefresh),{},{offsetY:e,actionName:n}),x([e,n])};var k="",E="";"PULL_REFRESH"===C?k="\u4e0b\u62c9\u5237\u65b0":"RELEASE_REFRESH"===C?k="\u91ca\u653e\u5237\u65b0":"IN_REFRESH"===C?(k="\u6b63\u5728\u5237\u65b0",E="go"):"FINISH_REFRESH"===C&&(k="\u5237\u65b0\u5b8c\u6210");var R=function(e,n){if(n&&In.isTouch&&!In.isLoading&&I){var t=e.touches[0].pageY;if(In.touchesDiff=t-In.touchesStart.y,In.touchesDiff<0)wn(0,"");else{e.cancelable&&e.preventDefault();var i=0;In.touchesDiff<=In.distance?(i=In.touchesDiff,wn(i,"PULL_REFRESH")):In.touchesDiff>In.distance&&In.touchesDiff<=2*In.distance?(i=In.distance+.5*(In.touchesDiff-In.distance),wn(i,"RELEASE_REFRESH")):(i=In.distance+.5*In.distance+.2*(In.touchesDiff-2*In.distance),wn(i,"RELEASE_REFRESH"));var r=Math.ceil(In.touchesDiff/In.distance*100)/100;r=r>1?1:r,N(Math.ceil(12*r))}}},P=function(e){var n,t;e&&(null!==In&&void 0!==In&&null!==(n=In.pullRefresh)&&void 0!==n&&n.actionName&&"PULL_REFRESH"!==(null===In||void 0===In||null===(t=In.pullRefresh)||void 0===t?void 0:t.actionName)||(In.isLoading=!1,wn(0,""),N(0)),"RELEASE_REFRESH"===In.pullRefresh.actionName&&(wn(60,"IN_REFRESH"),In.isTouch=!1,In.isLoading=!0,e((function(){wn(60,"FINISH_REFRESH"),setTimeout((function(){In.isLoading=!1,wn(0,""),N(0)}),1e3)}))))},D=function(e){P(e)},O={};return t?I||(O={height:"28vh"}):O={backgroundColor:"transparent"},Nn=function(){c&&(N(12),wn(60,"IN_REFRESH"),In.isTouch=!1,In.isLoading=!0,c((function(){wn(60,"FINISH_REFRESH"),setTimeout((function(){In.isLoading=!1,wn(0,""),N(0)}),1e3)})))},(0,pn.jsxs)(_.View,{"data-testid":"order-Info-Wtapper",children:[(0,pn.jsxs)(_.View,{className:"ottd_refresh_wrap",style:O,children:[(0,pn.jsx)(_.View,{className:"ani_loading ".concat(E),children:Array.from({length:w}).map((function(e,n){return(0,pn.jsx)(_.View,{},n)}))}),(0,pn.jsx)(_.View,{className:"ani_loading_center",style:{opacity:Math.ceil(w/12*100)/100},children:(0,pn.jsx)(_.Text,{className:"refresh-txt",children:k})})]}),(0,pn.jsx)(_.View,{style:{height:V}}),(0,pn.jsx)(_.ScrollView,{className:r,style:a,scrollY:t,scrollIntoView:l,scrollWithAnimation:!0,onTouchMove:function(e){R(e,t)},onTouchStart:function(e){bn(e,t)},onTouchEnd:function(e){P(c)},onTouchCancel:function(e){D(c)},onScroll:function(e){var n;d();var t=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.scrollTop;!I&&t<=60?b(!0):I&&t>60&&b(!1)},children:s})]})}function Vn(){var e;null===(e=Nn)||void 0===e||e()}var Cn=fn.gk.showPopup;function kn(e){var n=new RegExp("<a","g");return e.replace(n,'<a style="color: #fff"')}function En(){var e,n=_n(),t=(0,gn.f)(300),i=(0,gn.f)(1e3),r=mn.useActions(),o=n.basicInfo,a=n.operationInfo,s=o.orderId,c=o.orderStatusDesc,l=o.orderStatusRemark,d=o.secondaryStatusList,u=o.refund,m=o.orderStatusNew,h=o.notShowSubUnit,f=void 0===h?[]:h,p=o.orderStatus,v=(a||[]).find((function(e){return 8===e.operationType})),x=u||{},g=x.rejectReason,j=null===d||void 0===d?void 0:d.map((function(e){return e.statusName})),w=null===(e=j||[])||void 0===e?void 0:e.join(" | "),N=w+(w&&l?" - ":"")+(l||""),y=f.length>0&&f.indexOf("headerstatus")>=0;if(y)return null;var T=(0,pn.jsx)(jn,{}),I=function(){r.getOrderProcessInfo(s).then((function(){Cn({title:"\u8ba2\u5355\u8fdb\u5ea6",children:T})})).catch((function(){Tn().showToast("\u83b7\u53d6\u8ba2\u5355\u8fdb\u5ea6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}))},b=s+"-"+p;return(0,pn.jsxs)(_.View,{className:"order_detail_header_status_contain order_detail_padding_horizontal_16",style:{paddingTop:4,marginTop:0},children:[(0,pn.jsxs)(_.View,{className:"order_detail_header_status",children:[(0,pn.jsxs)(_.View,{"data-testid":"act-10650062960-attention-add-"+b,onClick:function(){return t((function(){v&&I()}))},children:[(0,pn.jsx)(_.Text,{className:"status_text",dangerouslySetInnerHTML:{__html:c}}),v?(0,pn.jsx)(_.View,{className:"icon-right"}):null]}),1===m||3===m?(0,pn.jsx)(_.View,{className:"order_detail_header_status_reload",onClick:function(){i((function(){Vn(),Tn().showToast({title:"\u6b63\u5728\u4e3a\u60a8\u66f4\u65b0\u9875\u9762\u4fe1\u606f",icon:"none"})}))},children:"\u5237\u65b0"}):null]}),g?(0,pn.jsx)(Rn,{refund:u}):(0,pn.jsx)(pn.Fragment,{children:N?(0,pn.jsx)(_.View,{"data-testid":Ie.orderStatusDesc,className:"order_detail_header_status_desc",dangerouslySetInnerHTML:{__html:kn(N)}}):null})]})}function Rn(e){var n=e.refund,t=n||{},i=t.rejectContent,r=void 0===i?"":i,o=t.rejectReason,a=void 0===o?"":o,s=(0,pn.jsx)(Pn,{rejectReason:a}),c=function(){Cn({title:"\u62d2\u7edd\u7406\u7531",children:s})};return(0,pn.jsx)(_.View,{className:"order_detail_header_status_reject_cancel",children:(0,pn.jsxs)(_.View,{className:"refund_reason",children:[(0,pn.jsx)(_.View,{className:"refund_desc",children:r}),(0,pn.jsx)(_.View,{className:"refund_text",onClick:function(){return c()},children:(0,pn.jsx)(_.Text,{children:"\u67e5\u770b\u8be6\u60c5"})})]})})}function Pn(e){var n=e.rejectReason;return(0,pn.jsx)(_.View,{className:"order_detail_header_status_reject_layer order_detail_padding_horizontal_16",children:n})}var Dn=fn.gk.showPopup;function On(e){var n=e.title,t=e.desc,i=e.voucherDesc,r=e.iconType,o=void 0===r?"icon-dujia-piaof1161-f":r,a=(0,gn.f)(300),s=(0,pn.jsx)(_.View,{className:"voucher_desc_layer_contain",children:(0,pn.jsx)(_.Text,{children:i})}),c=function(){Dn({title:"\u7535\u5b50\u51ed\u8bc1\u8bf4\u660e",children:s,className:"order_detail_expense_layer_wrapper"})};return n||t?(0,pn.jsxs)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_resource_ticket_instruction_contain","data-testid":Ie.ElerticTicketIcon,children:[(0,pn.jsx)(_.View,{onClick:function(){i&&a(c)},children:(0,pn.jsxs)(_.Text,{className:"instruction_contain_title",children:[(0,pn.jsx)(_.Text,{className:"instruction_icon ".concat(o)}),n,i?(0,pn.jsx)(_.Text,{className:"icon-Help instruction_tail_icon"}):null]})}),t?(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"remark_list_item_text",children:(0,fn.P6)({text:t})})}):null]}):null}function An(e){var n=e.type,t=e.list,i=void 0===t?[]:t,r=null===i||void 0===i?void 0:i.length;return r?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsxs)(_.View,{className:"ottd_certificate_wrap",children:[(0,pn.jsx)(Ln,{title:"\u51fa\u884c\u4eba\u8bc1\u4ef6",desc:1===n?"\u5fc5\u5e26":""}),i.map((function(e,n){var t=e.passengerName,i=e.passengerEName,r=e.identificationName,o=e.identificationNumber;return(0,pn.jsxs)(_.View,{className:"name_info",children:[(0,pn.jsx)(_.View,{className:"name_left",children:(0,pn.jsx)(_.Text,{children:t||i})}),(0,pn.jsx)(_.View,{style:{marginLeft:"auto",whiteSpace:"nowrap"},children:(0,pn.jsx)(_.Text,{children:"".concat(r," ").concat(o)})})]},String(n))}))]})}):null}var Ln=u.memo((function(e){var n=e.title,t=e.desc;return(0,pn.jsxs)(_.View,{className:"voucher_title_wrap",children:[(0,pn.jsx)(_.View,{className:"title_text",children:(0,pn.jsx)(_.Text,{children:n})}),t?(0,pn.jsx)(_.View,{className:"title_label",children:(0,pn.jsx)(_.Text,{children:t})}):null]})})),Un=t(68277),Zn=t(15970),Mn=function(e){return e[e["Ticket"]=1]="Ticket",e[e["Act"]=2]="Act",e}({}),Fn=function(e){var n={1:"ttd-act",2:"ttd-gst",3:"ttd-gst",4:"ttd-act",5:"ttd-act"};return n[e]||n["1"]},Bn={jumpH5:function(e){(0,Zn.mi)(e)},login:function(){var e;null===p()||void 0===p()||null===(e=p().user)||void 0===e||e.login({callback:function(e){e&&e.ReturnCode}})},forwardExpress:function(e){e.orderType;var n=e.orderId,t=e.type,i=void 0===t?"ticket":t,r=(e.deliveryInfo,"logisticsinfo"),o={},a="ticket";o={oid:n,type:i},(0,Zn.mi)({targetPageURI:r,path:a,params:o,from:!0})},forwardEditPhone:function(e){var n=e.orderType,t=e.orderid,i="orderedit",r="ticket",o={orderid:t};2===n&&(i="modifycontactinfo",r="activity",o={oid:t}),(0,Zn.mi)({targetPageURI:i,params:o,path:r,from:!0})},forwardSpotDetailMiniProgram:function(e){var n="/pages/gs/sight/newDetail?sightId=".concat(e,"&href=ticket");p().navigateTo({url:n})},forwardResDetail:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Zn.mi)({targetPageURI:"dest/r".concat(e,".html?popup=close"),path:"ticket",params:(0,v.Z)({},n)})},forwardElectronicDetail:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Zn.mi)({targetPageURI:"voicepoidetail",path:"ticket",params:(0,v.Z)({navBarStyle:"white",isHideNavBar:"YES",optionid:e},n),from:!0})},forwardThirdOrderInsurance:function(e){(0,Zn.mi)({targetPageURI:"insurance/order_detail",path:"vacations",params:{orderid:e,appid:3}})},forwardInsuranceDetail:function(e){var n=e.url,t=e.path,i=e.params;(0,Zn.mi)({targetPageURI:n,path:t,params:i})},forwardActDetail:function(e){(0,Zn.mi)({targetPageURI:"detail/".concat(e,"?isHideNavBar=YES"),path:"things-to-do"})},forwardPickReturn:function(e){(0,Zn.mi)({targetPageURI:"pickreturn",path:"activity",params:{actid:e,pageType:"rtnAdd",isnew:!0,isMultiDate:!0},from:!0})},forwardReserveDate:function(e){(0,Zn.mi)(e)},goToOrderCancel:function(e,n,t){var i="ordercancel?orderid=".concat(e,"&ostatus=").concat(n,"&isHideNavBar=YES&navBarStyle=white"),r="unsubscribe?orderid=".concat(e,"&ostatus=").concat(n,"&isHideNavBar=YES&navBarStyle=white"),o=t?r:i;(0,Zn.mi)({targetPageURI:o,path:"order_ttd"})},goToOrderRefund:function(e){var n="applyrefund?orderid=".concat(e,"&isHideNavBar=YES&navBarStyle=white");(0,Zn.mi)({targetPageURI:n,path:"order_ttd"})},topButtonForward:function(e,n,t){var i=n.basicInfo,r=n.contact,o=n.orderInfo,a=(e.title,e.type),s=e.opt,c=i.orderId,l=i.backOrderStatus,d=(i.orderType,i.bizLineType,r||{}),u=d.phone,m=d.osPhone,_=o.product,h=_.resources;_.productId,_.productName,(0,Zn.ye)(_);if("resendMessage"===a){var f={orderId:c,mobile:u||m,headExt:{locale:"zh-CN",currency:"CNY",platformId:25},pageid:ye,ver:be.G};t&&t(f)}else if("electronicPlay"===a){var p=h.find((function(e){return"voice"===e.viewTemplateCode}))||{},v=p.resourceId;this.forwardElectronicDetail(v)}else if("myPhoto"===a)this.forwardMyPhoto(s);else if("applyChangeDate"===a)this.applyChangeDateAction(c);else if("applyChangeId"===a)this.gotoChangeId(c);else if("mycomment"===a)this.forwardGuideComment(e.link);else if("addcomment"===a||"reAddComment"===a)this.forwardGuideComment(e.link);else if("rebooking"===a)this.goReBooking(c,l);else if("bookingagain"===a)this.goBookingAgain(n);else if("urge"===a){var x={orderId:c,headExt:{locale:"zh-CN",currency:"CNY",platformId:25},pageid:ye,ver:be.G};t&&t(x)}},goBookingAgain:function(e){var n,t,i,r=null===(n=e.orderInfo)||void 0===n||null===(n=n.operation)||void 0===n||null===(n=n.items)||void 0===n?void 0:n.find((function(e){return 37===e.operationType}));if(r)if(null!==r&&void 0!==r&&r.linkUrl)(0,Zn.mi)({targetPageURI:r.linkUrl});else switch(null===(t=e.orderInfo)||void 0===t||null===(t=t.basicInfo)||void 0===t?void 0:t.orderType){case Mn.Act:var o,a="";a="dest/t".concat(null===(o=e.orderInfo)||void 0===o||null===(o=o.product)||void 0===o||null===(o=o.resources)||void 0===o?void 0:o[0].resourceId,".html"),(0,Zn.mi)({targetPageURI:a,path:"activity"});break;case Mn.Ticket:var s=null===(i=e.orderInfo)||void 0===i||null===(i=i.product)||void 0===i||null===(i=i.resources)||void 0===i?void 0:i[0].viewSpotId;this.forwardSpotDetailMiniProgram(s);break}},goReBooking:function(e,n){(0,Zn.mi)({targetPageURI:"wifirenew",path:"activity",params:{orderId:e,orderStatus:n}})},forwardMyPhoto:function(e){var n=e.linkUrl;(0,Zn.mi)({targetPageURI:n})},applyChangeDateAction:function(e){(0,Zn.mi)({targetPageURI:"ordermodifydate",path:"ticket",params:{orderid:e,from:"orderdetail"}})},gotoChangeId:function(e){(0,Zn.mi)({targetPageURI:"changeid?orderid=".concat(e,"&isHideNavBar=YES"),path:"order_ttd",from:!0})},goToComment:function(e){var n=e.viewSpotId,t="comment/0/".concat(n,"-sight.html?isBack=yes");(0,Zn.mi)({targetPageURI:t,path:"you",from:!0})},gotoActCommentList:function(e,n){var t=Fn(n),i="order/public/comment_detail?orderid=".concat(e,"&channel=").concat(t);(0,Zn.mi)({targetPageURI:i,path:"vacations"})},forwardGuideComment:function(e){(0,Zn.mi)({targetPageURI:e})},goIm:function(e){var n=this.getIMUrl(e);(0,Zn.mi)({targetPageURI:n,path:"im",from:!0})},getIMUrl:function(e){var n=e.imService,t=void 0===n?{}:n,i=e.orderInfo,r=void 0===i?{}:i,o=e.basicInfo,a=r.product,s=(0,Zn.ye)(a),c=o.orderId,l=o.backOrderStatus,d="orderdetailinfo",u=t.vendorId,m=t.imcodehash,_=t.destCityIds,h=t.opUid,p=m[d],v=o.servicePrivoder,x=o.bizLineType,g=o.saleType,j=o.orderType,w=[2,3].indexOf(x)>-1,N=2===v||1===g,y=N&&u||0,T=function(e){switch(e){case 0:return 2;case 4:return 3;case 1:return 4;case 2:return 5;case 7:return 7;case 6:return 8;case 5:return 9;case 8:return 10;default:return 0}},I=T(l),b={Platform:"H5",Type:1===j?3===(null===s||void 0===s?void 0:s.resourceType)?2:1:3};N&&(b["providerId"]=y),!f._.isEmpty(_)&&(b["DestinationIdList"]=_);var S=1===j?null===s||void 0===s?void 0:s.resourceId:null===a||void 0===a?void 0:a.productId,V="im/group",C="".concat(V,"?IMCode=").concat(p)+"&productId=".concat(S)+"&platformId=1"+"&pageId=".concat(ye)+"&isPreSale=".concat(c?0:1)+"&orderId=".concat(c)+"&orderStatus=".concat(I)+"&extendJson=".concat(JSON.stringify(b));return w&&(C+="&opUid=".concat(h||0)),!f._.isEmpty(_)&&(C+="&destinationIdList=".concat(_)),C},doPay:function(e){var n;if(0===(null===e||void 0===e||null===(n=e.head)||void 0===n?void 0:n.errcode)){var t=null===e||void 0===e?void 0:e.data,i=(t.merchantId,t.psign),r=t.ptokenjson,o=t.pextendjson,a=t.oid,s=(t.payLink,t.requestPayId),c=t.payToken,l=t.payVersion,d=t.cashierJumpUrl,u="7",m={},_="/pages/orderttd/detail/index?orderid=".concat(a);if(d)return m={payLink:d},void p().payment.callPay2({serverData:m,sbackCallback:function(){p().redirectTo({url:_})},fromCallback:function(){p().redirectTo({url:_})},ebackCallback:function(){p().redirectTo({url:_})}});if("2.0"===l)return m={requestId:s,orderId:a,payToken:c,busType:u},void p().payment.callPay2({serverData:m,sbackCallback:function(){p().redirectTo({url:_})},fromCallback:function(){p().redirectTo({url:_})},ebackCallback:function(){p().redirectTo({url:_})}});var h=encodeURIComponent(p().util.base64Encode(r||"")),f=encodeURIComponent(p().util.base64Encode(o||""));m={bustype:u,oid:a,token:h,extend:f},i&&(m.sign=i),p().payment.callPay({data:m,sbackCallback:function(){p().redirectTo({url:_})},fromCallback:function(){p().redirectTo({url:_})},ebackCallback:function(){p().redirectTo({url:_})}})}else{var v;p().showToast({title:null===e||void 0===e||null===(v=e.head)||void 0===v?void 0:v.errmsg,icon:"none"})}},applyInvoice:function(e){var n=e.orderId,t="invoiceapply",i={},r="ticket";i={orderid:n},(0,Zn.mi)({targetPageURI:t,params:i,path:r})},downloadInvoice:function(e){var n=e.invoiceId,t=e.orderId,i=(e.orderType,"downloadinvoice"),r={},o="ticket";r={invoiceid:n,oid:t},(0,Zn.mi)({targetPageURI:i,params:r,path:o,from:!0})},gotoServiceTrackPage:function(e,n){var t="servicetrack?orderid=".concat(e,"&eventId=").concat(n,"&isHideNavBar=YES&navBarStyle=white");(0,Zn.mi)({targetPageURI:t,path:"order_ttd"})}},Hn=t(92954),Gn=t.n(Hn),qn=t(16255),zn=function(e){var n=e.title,t=void 0===n?"\u8054\u7cfb\u5ba2\u670d":n,i=e.modules,r=e.onCloseButtonClick,o=e.show,a=void 0===o||o,s=(0,pn.jsx)(_.View,{className:"im_container",children:i.map((function(e,n){return(0,pn.jsx)(Yn,{data:e})}))});return a&&null!==i&&void 0!==i&&i.length&&(0,qn.U)({title:t,children:s,handleClose:r}),null},Yn=function(e){var n=e.data,t=n.secondary,i=n.title,r=t&&t.length,o=r?t:[e.data];return(0,pn.jsxs)(pn.Fragment,{children:[r?(0,pn.jsx)(_.View,{className:"secondary_title",children:(0,pn.jsx)(_.Text,{children:i})}):null,o.map((function(e,n){return(0,pn.jsx)($n,{isSecondary:r,data:e})}))]})},$n=function(e){var n=e.data,t=e.isSecondary,i=n.title,r=n.iconType,o=n.onIconClick,a=n.tag,s=n.detail,c=function(){(0,qn.hj)(),setTimeout((function(){o()}),200)};return(0,pn.jsxs)(_.View,{className:"".concat(t?"secondary_item":""," render_item"),children:[(0,pn.jsxs)(_.View,{className:"render_item_left",children:[(0,pn.jsxs)(_.View,{className:"render_item_title",children:[(0,pn.jsx)(_.Text,{className:"render_item_title_text",children:i}),a&&(0,pn.jsx)(_.Text,{className:"render_item_title_tag",children:a})]}),(s||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"render_item_desc",children:(0,pn.jsx)(_.Text,{children:e})})}))]}),(0,pn.jsx)(_.View,{onClick:c,className:"".concat(r," render_item_right"),"data-testid":"imPopup"})]})},Kn=zn;function Wn(e){var n=e.isRecommendPage,t=void 0!==n&&n,i=_n(),r=i.imService,o=i.basicInfo,a=void 0===o?{}:o,s=a.orderId,c=a.notShowSubUnit,l=void 0===c?[]:c,d=r.serviceTime,u=r.servicePhone,m=r.overseaServicePhone,h=r.hasLocation,f=r.isOversea,p=r.displayIm,v=r.isNotAgent,x=m&&(h&&f||!h),g=l.length>0&&l.indexOf("imbtn")>=0,j=[],w="",N="",y=[],T=[];w=v&&d?"\u670d\u52a1\u65f6\u95f4 (\u5317\u4eac\u65f6\u95f4)\uff1a".concat(d):"",N="\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5\u5ba2\u670d\u8ba2\u5355\u53f7\uff1a".concat(s),d&&j.push(String(d)),s&&j.push(String(s));var I=Bn.getIMUrl(i);p&&y.push({title:"\u5728\u7ebf\u5ba2\u670d",tag:"\u63a8\u8350",iconType:"icon-IM-sevice-ctrip",onIconClick:function(){(0,Zn.mi)({targetPageURI:I,from:!0,path:"im"})},detail:["\u6e29\u99a8\u63d0\u793a\uff1a\u4e3a\u4e86\u8282\u7ea6\u60a8\u7684\u65f6\u95f4\uff0c\u5efa\u8bae\u60a8\u4f18\u5148\u9009\u62e9\u5728\u7ebf\u54a8\u8be2"]}),u&&T.push({title:"\u5883\u5185\u62e8\u6253",iconType:"icon-Phone",onIconClick:function(){if(!u)return null;Gn().makePhoneCall({phoneNumber:u})},detail:[u,w,N]}),x&&T.push({title:"\u5883\u5916\u62e8\u6253",iconType:"icon-Phone",onIconClick:function(){if(!m)return null;Gn().makePhoneCall({phoneNumber:m})},detail:[m,w,N]}),T.length&&y.push({title:"\u7535\u8bdd\u5ba2\u670d",secondary:T});var b=function(){Kn({title:"\u8054\u7cfb\u5ba2\u670d",modules:y,onCloseButtonClick:function(){console.log("onCloseButtonClick")}})};return Jn(b),g?null:t?(0,pn.jsx)(fn.Gn,{customStyle:{marginTop:8},children:(0,pn.jsxs)(_.View,{className:"recommend_im_wrap",onClick:function(){return b()},children:[(0,pn.jsx)(_.View,{className:"icon-Service"}),(0,pn.jsx)(_.Text,{className:"call-text",children:"\u8054\u7cfb\u5ba2\u670d"})]})}):(0,pn.jsx)(_.View,{catchMove:!0,className:"im-movable-wrap",children:(0,pn.jsx)(_.MovableArea,{className:"im-movable-area",children:(0,pn.jsx)(_.MovableView,{className:"im-movable-view",direction:"vertical",y:140,animation:!1,children:(0,pn.jsxs)(_.View,{className:"top-header-float-call",onClick:function(){return b()},"data-testid":Ie.IMService,children:[(0,pn.jsx)(_.View,{className:"icon-IM-sevice-ctrip"}),(0,pn.jsx)(_.Text,{className:"call-text",children:"\u5ba2\u670d"})]})})})})}var Qn=null,Jn=function(e){return Qn=e},Xn=function(){var e;return null===(e=Qn)||void 0===e?void 0:e(!0)};function et(e,n){var t=(0,u.useRef)();(0,u.useEffect)((function(){t.current=e})),(0,u.useEffect)((function(){function e(){t.current()}if(null!==n){var i=setInterval(e,n);return function(){return clearInterval(i)}}}),[n])}var nt=["voucherInfo","cardInfo","showTitle","additionalVoucherPrompt","shareVoucherPrompt"],tt=x.QRCode,it=function(){return{traceDev:function(){}}};function rt(e){var n=_n(),t=hn(),i=t.refreshComponentDynamicCode,r=n.basicInfo,o=(n.orderInfo,n.voucherRefresh),a=(r.orderId,r.orderType,r.dynamicVoucherRefreshCount),s=e.voucherInfo,c=e.cardInfo,l=e.showTitle,d=e.additionalVoucherPrompt,m=e.shareVoucherPrompt,f=(0,Un.Z)(e,nt),p=fe(s),v=p&&Ne(s)||{},x=v.imgOriginalCode,g=v.isSuccess,j=(0,u.useState)(!!d),w=(0,h.Z)(j,2),N=(w[0],w[1],(0,u.useState)(p)),y=(0,h.Z)(N,2),T=y[0],I=y[1],b=(0,u.useState)(a),S=(0,h.Z)(b,2),V=S[0],C=S[1],k=f||{},E=k.resourceId,R=k.orderItemId,P=o.refreshRate,D=xe(s),O=V<=0||D||!P||!T||!x&&!g;console.log("stopRefresh",O);var A=function(){console.log("dododododo=========<<<<<<<"),i(Tn(),E,R,!1)};return(0,u.useEffect)((function(){I(p),C(a)}),[a,R]),(0,u.useEffect)((function(){console.log("\u5237\u65b0\u52a8\u6001\u4e8c\u7ef4\u7801",n)}),[E,R]),et((function(){console.log("\u5237\u65b0\u52a8\u6001\u4e8c\u7ef4\u7801"),C(V-1),V>=0&&A(),console.log("\u5237\u65b0\u6b21\u6570",V)}),O?null:1e3*P),s&&s.length?(0,pn.jsxs)(_.View,{children:[(s||[]).map((function(e,n){var t=e.vouchers||[],i=t.length,r="only_ext_msg_voucher_container";return r=i>1?"vouchers_slider_wrap ".concat(r):"order_detail_padding_horizontal_16 ".concat(r),i?(0,pn.jsxs)(_.View,{className:r,children:[l?(0,pn.jsxs)(_.View,{className:"voucher_title_contain",children:[(0,pn.jsx)(_.View,{className:"left_border"}),(0,pn.jsx)(_.View,{className:"voucher_title_view",children:(0,pn.jsx)(_.Text,{className:"card_title_text",children:e.voucherDesc})}),(0,pn.jsx)(_.View,{className:"left_border"})]}):null,(0,pn.jsx)(at,{list:t,voucherExtMsg:e.voucherExtMsg,qrinfos:f,idx:n,cardInfo:c})]},String(n)):(0,pn.jsxs)(_.View,{className:r,style:{marginTop:10},children:[l?(0,pn.jsxs)(_.View,{className:"voucher_title_contain",children:[(0,pn.jsx)(_.View,{className:"left_border"}),(0,pn.jsx)(_.View,{className:"voucher_title_view",children:(0,pn.jsx)(_.Text,{className:"card_title_text",children:e.voucherDesc})}),(0,pn.jsx)(_.View,{className:"left_border"})]}):null,(0,pn.jsx)(lt,{voucherExtMsg:e.voucherExtMsg})]},String(n))})),m?(0,pn.jsx)(_.View,{className:"order_detail_resource_ticket_certificate_voucher_view order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.View,{className:"certificateOrVoucher",children:m})}):null]}):null}var ot=(0,u.memo)(rt);function at(e){var n=(0,u.useState)(1),t=(0,h.Z)(n,2),i=t[0],r=t[1],o=e.list,a=e.voucherExtMsg,s=e.qrinfos,c=e.cardInfo,l=o.length,d=519,m=d*l-(l-1),f=function(e){var n,t=~~(d/2),o=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.scrollLeft,a=1+~~(o/t),s=~~(o%t);s>143&&(a+=1),a!==i&&r(a)};return l<2?(0,pn.jsx)(pn.Fragment,{children:null===o||void 0===o?void 0:o.map((function(e,n){return(0,pn.jsx)(ct,{info:e,voucherExtMsg:a,qrinfos:s,idx:n,cardInfo:c,totale:l},"".concat(n,"_index"))}))}):(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.ScrollView,{onScroll:f,scrollX:!0,scrollY:!1,enableFlex:!1,className:"voucher_scroll_view",children:(0,pn.jsx)(_.View,{className:"scroll_view_voucher_card_contain",style:{width:m+"rpx"},children:o.map((function(e,n){return(0,pn.jsx)(_.View,{className:"out_card_contain",style:0===n?{}:{marginLeft:-1},children:(0,pn.jsx)(ct,{info:e,voucherExtMsg:a,qrinfos:s,idx:n,cardInfo:c,totale:l})},"".concat(n,"_index"))}))})}),(0,pn.jsx)(st,{total:l,idx:i})]})}var st=(0,u.memo)((function(e){var n=e.idx,t=e.total;return(0,pn.jsxs)(_.View,{className:"scroll_view_pagination",children:[Array(t).fill("").map((function(e,t){return(0,pn.jsx)(_.View,{className:t+1===n?"current_dot":"dot"},String(t))})),(0,pn.jsxs)(_.Text,{children:[n,"/",t]})]})}));function ct(e){var n=e.info,t=e.qrinfos,i=e.idx,r=e.voucherExtMsg,o=n.imgUrl,a=n.voucherFileUrl,s=n.imgOriginalCode,c=n.voucherType,l=n.voucherNO,d=n.imgShortUrl,u=n.supplierShortUrl,m=n.supportOpenUrl,h=n.voucherForm,f=n.expTime,p=n.voucherUseStatus,v=n.validStatus,x=n.isSuccess,g=n.seatInfoNew,j=Object.keys(n).filter((function(e){return"seatInfoNew"!==e&&"voucherForm"!==e&&"voucherType"!==e})),w=!j.every((function(e){return!n[e]})),N=0===h&&!o&&d,y=0===h&&!o&&l,T=1;o&&T++,N&&T++,y&&T++,a&&T++,u&&T++,1===h&&(T=1);var I=T>2,b=function(){return I?(0,pn.jsx)(ht,{url:o,acode:l,qrinfos:t,idx:i,voucherType:c,imgOriginalCode:s,info:n}):1===h?(0,pn.jsx)(vt,{acode:s,qrinfos:t,idx:i,voucherType:c,expTime:f,voucherUseStatus:p,validStatus:v,isSuccess:x}):(0,pn.jsxs)(_.View,{className:"code_image_wrap",style:{width:196},children:[o?(0,pn.jsx)(dt,{url:o,acode:l,qrinfos:t,idx:i,voucherType:c,imgOriginalCode:s}):null,y?(0,pn.jsx)(ut,{code:y}):null,N?(0,pn.jsx)(mt,{url:d}):null,u?(0,pn.jsx)(mt,{url:u,open:m,text:"\u7535\u5b50\u7968"}):null,a?(0,pn.jsx)(_t,{url:a}):null]})};return(0,pn.jsxs)(_.View,{className:"order_detail_voucher_card",children:[(0,pn.jsx)(Ln,{title:"\u4f7f\u7528\u51ed\u8bc1"}),(0,pn.jsxs)(_.View,{className:"voucher_card_contain",children:[w?b():null,r?(0,pn.jsxs)(_.View,{style:{width:"100%"},children:[w?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(ft,{text:r})]}):null,g?(0,pn.jsxs)(_.View,{style:{width:"100%"},children:[w||r?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(_.View,{className:"order_detail_ext_msg",children:(0,pn.jsx)(_.Text,{children:g})})]}):null]})]})}function lt(e){var n=e.voucherExtMsg;return(0,pn.jsxs)(_.View,{className:"order_detail_voucher_card",children:[(0,pn.jsx)(Ln,{title:"\u4f7f\u7528\u51ed\u8bc1"}),(0,pn.jsx)(_.View,{className:"voucher_card_contain",children:(0,pn.jsx)(ft,{text:n})})]})}var dt=(0,u.memo)((function(e){var n=e.url,t=e.acode,i=it(),r=(0,u.useState)(n),o=(0,h.Z)(r,2),a=o[0],s=o[1],c=(0,u.useState)(!1),l=(0,h.Z)(c,2),d=l[0],m=l[1],f=(0,u.useState)(196),p=(0,h.Z)(f,2),v=p[0],x=(p[1],(0,u.useState)(0)),g=(0,h.Z)(x,2),j=g[0],w=g[1];function N(){i.traceDev({key:"o_ttd_orderdetail_voucher",value:{acode:t,url:n}}),m(!0)}(0,u.useEffect)((function(){s(n)}),[n,s]);var y=function(e){var n=null===e||void 0===e?void 0:e.detail,t=n.width,i=n.height,r=t/i;w(v/r)};if(!n)return null;function T(e){return e.indexOf("?")>-1?"".concat(e,"&time=").concat(Date.now()):"".concat(e,"?time=").concat(Date.now())}return(0,pn.jsxs)(_.View,{id:"code_image_container",children:[d?(0,pn.jsx)(_.View,{className:"order_detail_img_out_reload",children:(0,pn.jsxs)(_.View,{className:"order_detail_img_out_reload_contain",onClick:function(){i.traceDev({key:"o_ttd_orderdetail_voucher_reload",value:n}),m(!1),s((function(){return T(n)}))},children:[(0,pn.jsx)(_.View,{className:"icon-Refresh"}),(0,pn.jsx)(_.Text,{children:"\u70b9\u51fb\u83b7\u53d6\u5165\u56ed\u51ed\u8bc1"})]})}):(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Image,{className:"voucher_code_img",src:a,mode:"aspectFill",style:{width:v,height:j},onError:N,onLoad:y})})}),t?(0,pn.jsxs)(_.View,{className:"order_detail_img_code_contain",style:{width:196},children:[(0,pn.jsx)(_.Text,{className:"label",children:"\u8f85\u52a9\u7801"}),(0,pn.jsx)(_.Text,{children:t})]}):null]})}));function ut(e){var n=e.code;return n?(0,pn.jsx)(_.View,{className:"order_detail_digit_code_contain",children:(0,pn.jsxs)(_.View,{className:"order_detail_digit_code",children:[(0,pn.jsx)(_.Text,{children:"\u6570\u5b57\u9a8c\u8bc1\u7801\uff1a"}),(0,pn.jsx)(fn.Uk,{text:n,className:"order_detail_digit_code_copy_clipboard",children:(0,pn.jsx)(_.Text,{children:n})})]})}):null}function mt(e){var n=e.url,t=e.text,i=e.open,r=1===i,o=_n(),a=o.basicInfo,s=a.orderId,c=function(){Tn().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_voucher_jump",{orderId:s,url:n,type:t||"\u7535\u5b50\u51ed\u8bc1"})},l=function(){(0,Zn.mi)({targetPageURI:n})};return(0,pn.jsx)(_.View,{className:"digit_file_contain",children:r?(0,pn.jsx)(_.View,{className:"order_detail_button",onClick:l,"data-testid":Ie.DigitFile,children:(0,pn.jsxs)(_.View,{className:"order_detail_button_inner",children:[t&&(0,pn.jsx)(_.Image,{style:{width:13,height:13,marginTop:2},src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/orderttd/electronic-certificate.png"}),(0,pn.jsx)(_.Text,{className:"order_detail_ext_msg_text",children:t||"\u70b9\u51fb\u67e5\u770b"})]})}):(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.Text,{className:"order_detail_ext_msg_text",children:"\u51ed\u8bc1\u94fe\u63a5\uff1a"}),(0,pn.jsx)(fn.Uk,{text:n,className:"order_detail_ext_msg",onCopyClick:c,children:(0,pn.jsx)(_.Text,{className:"order_detail_ext_msg_text","data-testid":Ie.DigitFile,children:n})})]})})}function _t(e){var n=e.url,t=e.email,i=_n(),r=i.basicInfo,o=r.orderId,a=hn(),s=a.resendMail,c=(0,u.useState)(!1),l=(0,h.Z)(c,2),d=l[0],m=l[1],f=function(){Tn().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_voucher_jump",{orderId:o,url:n,type:"\u786e\u8ba4\u5355"})},p=function(e){var t=e.err,i=e.type;Tn().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_download",{orderId:o,url:n,type:i,result:JSON.stringify(t)})};return(0,pn.jsxs)(_.View,{className:"digit_file_contain flex_column",children:[(0,pn.jsxs)(_.View,{className:"digit_file_contain",children:[(0,pn.jsxs)(_.View,{className:"digit_file_button","data-testid":Ie.digitFileBtn,onClick:function(){Tn().downloadFile({url:n,success:function(e){var n=null===e||void 0===e?void 0:e.tempFilePath;Tn().openDocument({filePath:n,success:function(e){console.log("\u6253\u5f00\u6587\u6863\u6210\u529f")},fail:function(e){p({err:e,type:"open"}),Tn().showToast({title:"\u786e\u8ba4\u5355\u6253\u5f00\u5931\u8d25\uff0c\u8bf7\u590d\u5236\u94fe\u63a5\u5230\u6d4f\u89c8\u5668\u6253\u5f00",icon:"none"}),m(!0)}})},fail:function(e){p({err:e,type:"download"}),Tn().showToast({title:"\u786e\u8ba4\u5355\u6253\u5f00\u5931\u8d25\uff0c\u8bf7\u590d\u5236\u94fe\u63a5\u5230\u6d4f\u89c8\u5668\u6253\u5f00",icon:"none"}),m(!0)}})},children:[(0,pn.jsx)(_.Image,{src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/orderttd/confirmed-list.png",className:"digit_file_icon"}),(0,pn.jsx)(_.Text,{children:"\u786e\u8ba4\u5355"})]}),d?(0,pn.jsx)(fn.Uk,{text:n,className:"order_detail_ext_msg",onCopyClick:f,children:(0,pn.jsxs)(_.Text,{className:"order_detail_ext_msg_text",children:["\u786e\u8ba4\u5355\u94fe\u63a5\uff1a",n]})}):null]}),t?(0,pn.jsx)(_.View,{className:"order_detail_send_btn",onClick:function(){s({orderId:o}).then((function(e){var n=null===e||void 0===e?void 0:e.errMsg;Tn().showToast({title:n,icon:"none"})})).catch((function(){Tn().showToast({title:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}))},children:(0,pn.jsx)(_.Text,{children:"\u53d1\u9001\u81f3\u90ae\u7bb1"})}):null]})}function ht(e){var n=e.info,t=n.imgUrl,i=n.voucherFileUrl,r=(n.imgOriginalCode,n.voucherType,n.voucherNO),o=n.imgShortUrl,a=n.supplierShortUrl,s=n.supportOpenUrl,c=!t&&r,l=!t&&o,d=_n(),u=d.contact,m=null===u||void 0===u?void 0:u.email;return(0,pn.jsxs)(_.View,{className:"voucher_mix_contain",children:[t?(0,pn.jsx)(_.View,{className:"code_image_wrap",style:{width:196},children:(0,pn.jsx)(dt,(0,v.Z)((0,v.Z)({},e),{},{isMix:!0}))}):null,c?(0,pn.jsxs)(_.View,{className:"mix_voucher_item_desc",children:[t?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(ut,{code:c})]}):null,l?(0,pn.jsxs)(_.View,{className:"mix_voucher_item_desc",children:[t||c?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(mt,{url:l})]}):null,a?(0,pn.jsxs)(_.View,{className:"mix_voucher_item_desc",children:[t||c||l?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(mt,{url:a,open:s,text:"\u7535\u5b50\u7968"})]}):null,i?(0,pn.jsxs)(_.View,{className:"mix_voucher_item_desc",children:[t||c||l||a?(0,pn.jsx)(_.View,{className:"voucher_border"}):null,(0,pn.jsx)(_t,{url:i,email:m})]}):null]})}function ft(e){var n=e.text;return(0,pn.jsx)(_.View,{className:"order_detail_ext_msg",children:(0,fn.P6)({text:n})})}function pt(e){var n=e.title,t=e.showIm,i=(e.resourceId,_n()),r=i.imService,o=i.requestParam,a=i.basicInfo,s=a.notShowSubUnit,c=void 0===s?[]:s,l=c.length>0&&c.indexOf("urgecertificate")>=0,d=l||c.length>0&&c.indexOf("imbtn")>=0,u=null===o||void 0===o?void 0:o.token;return n?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsxs)(_.View,{className:"order_detail_resource_certificate_place_contain",children:[(0,pn.jsx)(Ln,{title:"\u51ed\u8bc1"}),(0,pn.jsxs)(_.View,{className:"certificatePlaceContain",children:[(0,pn.jsx)(_.View,{className:"certificatePlaceText",children:n}),!u&&!d&&(null!==r&&void 0!==r&&r.displayIm||null!==r&&void 0!==r&&r.hasPhone)&&t?(0,pn.jsxs)(_.View,{className:"certificateButton",onClick:function(){var e=r.hasPhone;e?Xn():Bn.goIm(i)},children:[(0,pn.jsx)(_.Text,{children:"\u54a8\u8be2\u51ed\u8bc1\u4fe1\u606f"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]}):null]})]})}):null}function vt(e){var n=hn(),t=n.refreshComponentDynamicCode,i=_n(),r=i.basicInfo,o=i.orderInfo,a=i.time,s=(0,u.useState)(190),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=(r.orderId,r.orderType,r.useDatePrompt,r.orderStatusNew,o.product,e.acode),f=e.qrinfos,p=e.voucherUseStatus,v=e.isSuccess,x=e.validStatus,g=(e.idx,e.voucherType,e.imgOriginalCode,e.cardInfo,e.isMix,e.WIDTH,e.expTime),j=(f.udate,f.quantity,f.resourceName,f.resourceId),w=f.orderItemId,N=(f.qkdesc,f.qkadded,1===p),y=g<=0,T=1e3,I=g>0?g*T:T,b=(0,u.useState)(I),S=(0,h.Z)(b,2),V=S[0],C=S[1],k=V<0;et((function(){var e=V-1e3;C(e)}),k?null:1e3),(0,u.useEffect)((function(){C(I)}),[g,I,a]),(0,u.useEffect)((function(){Tn().sendUbtExpose.refreshObserve(),Gn().nextTick((function(){Gn().createSelectorQuery().select(".dynamic_code_image_container").boundingClientRect((function(e){var n=(null===e||void 0===e?void 0:e.width)||190;n<l&&d(n)})).exec()}))}),[]);var E=function(){t(Tn(),j,w)},R="https://m.ctrip.com";return console.log("getDynamicVoucherInfo-",k),1===x?(0,pn.jsx)(_.View,{className:"dynamic_code_image_container",children:(0,pn.jsx)(_.View,{className:"order_detail_img_out_contain",children:(0,pn.jsxs)(_.View,{className:"img_contain",children:[m?(0,pn.jsx)(tt,{text:m,size:l,foregroundColor:"#dddddd"}):(0,pn.jsx)(tt,{text:R,size:l,foregroundColor:"#dddddd"}),(0,pn.jsx)(_.Image,{className:"used_voucher",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/voucher_valid.png"})]})})}):N?(0,pn.jsx)(_.View,{className:"dynamic_code_image_container",children:(0,pn.jsx)(_.View,{className:"order_detail_img_out_contain",children:(0,pn.jsxs)(_.View,{className:"img_contain",children:[m?(0,pn.jsx)(tt,{text:m,size:l,foregroundColor:"#dddddd"}):(0,pn.jsx)(tt,{text:R,size:l,foregroundColor:"#dddddd"}),(0,pn.jsx)(_.Image,{className:"used_voucher",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/voucher_is_used.png"})]})})}):y||!1===v?(0,pn.jsx)(_.View,{className:"dynamic_code_image_container",children:(0,pn.jsxs)(_.View,{className:"order_detail_img_out_contain",children:[(0,pn.jsxs)(_.View,{className:"img_contain",children:[m?(0,pn.jsx)(tt,{text:m,size:l,foregroundColor:"#dddddd"}):(0,pn.jsx)(tt,{text:R,size:l,foregroundColor:"#dddddd"}),(0,pn.jsx)(_.View,{className:"img_contain_btn_contain",children:(0,pn.jsxs)(_.View,{className:"refresh_btn",onClick:E,children:[(0,pn.jsx)(_.View,{className:"icon-Refresh"}),(0,pn.jsx)(_.Text,{className:"refresh_btn_text",children:"\u5237\u65b0\u51ed\u8bc1"})]})})]}),(0,pn.jsx)(_.View,{className:"refresh_view",children:(0,pn.jsx)(_.Text,{className:"refresh_tips_text",children:v?"\u51ed\u8bc1\u5df2\u8fc7\u671f\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0":"\u51ed\u8bc1\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0"})})]})}):m?(0,pn.jsx)(_.View,{className:"dynamic_code_image_container",children:(0,pn.jsxs)(_.View,{className:"order_detail_img_out_contain",children:[(0,pn.jsxs)(_.View,{className:"img_contain",children:[(0,pn.jsx)(tt,{text:m,size:l,foregroundColor:k?"#dddddd":"#000000"}),k&&!N?(0,pn.jsx)(_.View,{className:"img_contain_btn_contain",children:(0,pn.jsxs)(_.View,{className:"refresh_btn",onClick:E,children:[(0,pn.jsx)(_.View,{className:"icon-Refresh"}),(0,pn.jsx)(_.Text,{className:"refresh_btn_text",children:"\u5237\u65b0\u51ed\u8bc1"})]})}):null]}),k&&!N?(0,pn.jsx)(_.View,{className:"refresh_view",children:(0,pn.jsx)(_.Text,{className:"refresh_tips_text",children:"\u51ed\u8bc1\u5df2\u8fc7\u671f\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0"})}):null]})}):(0,pn.jsx)(_.View,{className:"dynamic_code_image_container",children:(0,pn.jsx)(_.View,{className:"order_detail_img_out_contain",children:(0,pn.jsx)(_.View,{className:"img_contain",children:(0,pn.jsxs)(_.View,{className:"qr_loading",children:[(0,pn.jsx)(_.View,{className:"icon-Time"}),(0,pn.jsx)(_.Text,{children:"\u51ed\u8bc1\u7a0d\u540e\u63d0\u4f9b "})]})})})})}var xt=t(86595),gt=t.n(xt),jt=function(e){return(0,pn.jsx)(wt,(0,v.Z)({},e))},wt=function(e){var n=e.items,t=e.inChina,i=e.close,r=e.basicInfo,o=e.ctrl,a=(0,u.useState)(1),s=(0,h.Z)(a,2),c=s[0],l=s[1],d=function(){i()};return(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_overflow_hidden",children:(0,pn.jsxs)(_.View,{className:"".concat(c>1?"order_detail_refund_guide_go_next order_detail_refund_guide_layer_wrap":"order_detail_refund_guide_layer_wrap"),children:[(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_layer",children:[(0,pn.jsx)(Tt,{onClose:d,title:"\u9000\u6539\u89c4\u5219"}),(0,pn.jsx)(Nt,{goNextPage:function(){return l((function(e){return++e}))},data:n,inChina:t})]}),(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_layer",children:[(0,pn.jsx)(Tt,{onClose:d,onBack:function(){return l((function(e){return--e}))},title:"\u65f6\u5dee\u8bf4\u660e"}),(0,pn.jsx)(It,{basicInfo:r,ctrl:o})]})]})})},Nt=function(e){var n=e.data;return(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_outer",children:n.map((function(n,t){var i=n.title;return(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain_wrap",children:[i?(0,pn.jsx)(_.Text,{className:"order_detail_refund_guide_contain_title",children:i}):null,(0,pn.jsx)(yt,(0,v.Z)((0,v.Z)({},e),{},{info:n}))]},String(t))}))})},yt=function(e){var n=e.goNextPage,t=e.info,i=e.inChina,r=t.structDetails,o=t.backDescs,a=t.frontDescs,s=function(){i||n()};return(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_table",children:[(a||[]).map((function(e,n){return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_desc",children:e.desc})},String(n))})),a&&r?(0,pn.jsx)(_.View,{style:{height:8}}):null,!a&&r?(0,pn.jsx)(_.View,{style:{height:12}}):null,(r||[]).length?(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain",children:[(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain_header",children:[(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_left_view",children:(0,pn.jsxs)(_.Text,{onClick:s,children:["\u9000\u8ba2\u65f6\u95f4",i?"":"\uff08\u5f53\u5730\u65f6\u95f4\uff09"]})}),(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_right_view",children:(0,pn.jsx)(_.Text,{children:"\u635f\u5931\u8d39\u7528"})})]}),(r||[]).map((function(e,n){return 0===e.isOverNowTimeCode?(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain_body",children:[(0,pn.jsx)(_.View,{className:"order_detail_refund_layer_now",children:(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain_left_contain",children:[(0,pn.jsxs)(_.View,{className:"refund_guide_now",children:[(0,pn.jsx)(_.View,{className:"refund_guide_now_tag_layer"}),"\u5f53\u524d\u65f6\u6bb5"]}),(0,pn.jsx)(_.Text,{className:"order_detail_refund_guide_contain_left_contain_text",children:e.refundTime})]})}),(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_right_view",children:(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_left_contain",children:(0,pn.jsx)(_.Text,{className:"order_detail_refund_guide_contain_left_contain_text",children:e.refundCost})})})]},String(n)):(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_contain_body",children:[(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_left_view",children:(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_left_contain",children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"order_detail_refund_guide_contain_left_contain_text table_text_line":"order_detail_refund_guide_contain_left_contain_text",style:{textDecorationLine:2===Number(t.type)&&e.isOverNowTime?"line-through":"none"},children:e.refundTime})})}),(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_right_view",children:(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_contain_left_contain",children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"order_detail_refund_guide_contain_left_contain_text table_text_line":"order_detail_refund_guide_contain_left_contain_text",style:{textDecorationLine:2===Number(t.type)&&e.isOverNowTime?"line-through":"none"},children:e.refundCost})})})]},String(n))}))]}):null,o?(0,pn.jsx)(_.View,{style:{height:8}}):null,(o||[]).map((function(e,n){return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"order_detail_refund_guide_contain_desc",children:e.desc})},String(n))}))]})},Tt=function(e){var n=e.onClose,t=e.onBack,i=e.title;return(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_layer_title",children:[t?(0,pn.jsx)(_.View,{className:"back_icon icon-go_back",onClick:t}):(0,pn.jsx)(_.View,{}),(0,pn.jsx)(_.Text,{children:i}),(0,pn.jsx)(_.View,{className:"back_icon icon-cancel_close",onClick:n})]})},It=function(e){var n=e.basicInfo,t=void 0===n?{}:n,i=(e.ctrl,t.utcOffSet),r=t.utcTime,o=i/60,a=o/60,s=mn.useActions(),c=s.getUtcTime,l=a-8,d=(0,u.useState)(r),m=(0,h.Z)(d,2),f=m[0],p=m[1];return(0,u.useEffect)((function(){var e=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:t=e.sent,i=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.utcTime,p(i),console.log(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_time_tips",children:[0===l?(0,pn.jsx)(_.View,{className:"order_detail_refund_guide_time_text",children:"\u5f53\u5730\u65f6\u95f4\u4e0e\u5317\u4eac\u65f6\u95f4\u4e00\u81f4"}):(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_time_text",children:["\u5f53\u5730\u65f6\u95f4\u6bd4\u5317\u4eac\u65f6\u95f4",l>0?"\u5feb":"\u6162",Math.abs(l),"\u4e2a\u5c0f\u65f6"]}),(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_time_text",children:["\u5f53\u524d\u5f53\u5730\u65f6\u95f4\u4e3a",gt()(f).add(i,"seconds").format("YYYY-MM-DD HH:mm:ss")]}),(0,pn.jsxs)(_.View,{className:"order_detail_refund_guide_time_text",children:["\u5317\u4eac\u65f6\u95f4\u4e3a"," ",gt()(f).add(480,"minutes").format("YYYY-MM-DD HH:mm:ss")]})]})},bt=fn.gk.showPopup,St=fn.gk.hidePopup,Vt=(0,u.forwardRef)(Ct);function Ct(e,n){var t,i=(0,u.useState)(!1),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=_n(),c=s.basicInfo,l=c.orderType,d=c.inChina,m=e.rule,f=void 0===m?{}:m,p=e.showReserve,v=e.reserveType,x=f.refundTagCode,g=f.refundName,j=f.refundDesc,w=f.overdueRefund,N=f.items,y=function(){};1===l?t=function(){return a(!o)}:2===l&&(t=function(){return y()}),(0,u.useImperativeHandle)(n,(function(){return{refundCollapse:t}}));var T=1===v?"\u672a\u786e\u8ba4\u968f\u65f6\u9000":"\u672a\u9884\u7ea6\u968f\u65f6\u9000";T=p?T:g;var I={0:"",1:"refund_name_00B87A",2:"refund_name_FF7700",3:"refund_name_FF7700",4:"refund_name_FF7700"},b={1:"refund_tag_00B87A",2:"refund_tag_FF7700",3:"refund_tag_FF7700",4:"refund_tag_FF7700"};if(!f)return null;var S=I[x],V=b[x];if(1===l)return(0,pn.jsxs)(_.View,{className:"order_detail_refund_wrap",children:[(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u9000\u6539\u89c4\u5219"})},renderRight:function(){return(0,pn.jsxs)(_.View,{onClick:function(){a(!o)},className:"order_detail_refund_head",children:[(0,pn.jsxs)(_.View,{className:"left column_overdueRefund",children:[w?(0,pn.jsx)(kt,{}):(0,pn.jsx)(_.View,{children:T?(0,pn.jsx)(_.Text,{className:"refund_tag border1px ".concat(V),children:T}):null}),(0,pn.jsx)(_.Text,{className:"refund_name ".concat(S),children:j})]}),(0,pn.jsx)(_.View,{className:"right",children:(0,pn.jsx)(_.View,{className:"order_refund_more_button flex_row",children:(0,pn.jsx)(_.View,{className:o?"icon-DropUp":"icon-DropDown","data-testid":Ie.orderFundFolder})})})]})}}),(0,pn.jsx)(_.View,{children:o?(0,pn.jsx)(pn.Fragment,{children:(N||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(Et,{list:e.frontDescs}),p?(0,pn.jsx)(_.Text,{children:g}):null,(0,pn.jsx)(Rt,{data:e.structDetails,type:e.type,inChina:d}),(0,pn.jsx)(Et,{list:e.backDescs})]},String(n))}))}):null})]});if(2===l||!N){var C=(0,pn.jsx)(jt,{items:N,inChina:d,basicInfo:c,close:function(){St()}}),k=function(){bt({children:C})};return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_play_refund_wrap",onClick:function(){k()},children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u9000\u6539\u89c4\u5219"})},renderRight:function(){return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"order_detail_play_refund_tag_wrap",children:[(0,pn.jsx)(_.Text,{className:"refund_tag border1px ".concat(V),children:g}),j?(0,pn.jsx)(_.View,{style:{marginTop:5},children:(0,pn.jsx)(_.Text,{className:"order_detail_play_refund_tag_wrap_text",children:j})}):null]}),(0,pn.jsx)(_.View,{className:"order_detail_right_detail",children:(0,pn.jsx)(_.View,{className:"icon-Forward",style:{fontSize:"14px",color:"#999"}})})]})}})})})}return null}function kt(e){return(0,pn.jsx)(_.View,{className:"refund_guide_icon_image flex_row",children:(0,pn.jsxs)(_.View,{className:"refund_guide_icon_image_text",children:[(0,pn.jsx)(_.Text,{className:"refund_guide_overdueRefund_icon",children:"\u65e0\u5fe7\u9000"}),(0,pn.jsx)(_.Text,{className:"refund_guide_overdueRefund_desc",children:"\u968f\u65f6\u9000\xb7\u8fc7\u671f\u9000"})]})})}function Et(e){var n=e.list;return n?(0,pn.jsx)(_.View,{className:"refund_guide_desc_wrap",children:(n||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"refund_guide_desc","data-testid":Ie.orderFundDesc,children:(0,pn.jsx)(_.Text,{className:"refund_guide_desc_text",children:e.desc})},String(n))}))}):null}function Rt(e){var n=e.data,t=e.inChina,i=e.type,r=void 0===i?1:i;if(!n||!n.length)return null;var o=8.5*(n||[]).map((function(e){return e.refundCost})).reduce((function(e,n){return n.length>e.length?n:e}),"").length,a=o>=52?o>=190?190:o:52;return(0,pn.jsxs)(_.View,{className:"border1px order_detail_refund_table",style:{marginLeft:60},children:[(0,pn.jsxs)(_.View,{className:"flex_row order_detail_refund_table_thead",children:[(0,pn.jsx)(_.View,{className:"refund_guide_left",style:{fontWeight:500},children:(0,pn.jsxs)(_.Text,{children:["\u9000\u8ba2\u65f6\u95f4 ",t?"":"(\u5f53\u5730\u65f6\u95f4)"]})}),(0,pn.jsx)(_.View,{className:"refund_guide_right tkt_hairline_l",style:{fontWeight:500,display:"flex",alignItems:"center",width:a,padding:"12px 12px"},children:(0,pn.jsx)(_.Text,{children:"\u635f\u5931\u8d39\u7528"})})]}),(n||[]).map((function(e,n){return 0===e.isOverNowTimeCode?(0,pn.jsxs)(_.View,{className:"flex_row order_detail_refund_table_tbody tkt_hairline_t",children:[(0,pn.jsxs)(_.View,{className:"refund_guide_left_now",children:[(0,pn.jsxs)(_.View,{className:"refund_guide_now",children:[(0,pn.jsx)(_.View,{className:"refund_guide_now_tag"}),"\u5f53\u524d\u65f6\u6bb5"]}),(0,pn.jsx)(_.Text,{children:e.refundTime})]}),(0,pn.jsx)(_.View,{className:"refund_guide_right tkt_hairline_l",style:{display:"flex",alignItems:"center",width:a,padding:"12px 12px",wordBreak:"break-all"},children:(0,pn.jsx)(_.Text,{children:e.refundCost})})]},String(n)):(0,pn.jsxs)(_.View,{className:"flex_row order_detail_refund_table_tbody tkt_hairline_t ".concat(e.isOverNowTime?"over_time":""),children:[(0,pn.jsx)(_.View,{className:"refund_guide_left",children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"table_text_line":"",style:{textDecorationLine:2===Number(r)&&e.isOverNowTime?"line-through":"none"},children:e.refundTime})}),(0,pn.jsx)(_.View,{className:"refund_guide_right tkt_hairline_l",style:{display:"flex",alignItems:"center",width:a,padding:"12px 12px",wordBreak:"break-all",textDecorationLine:2===Number(r)&&e.isOverNowTime?"line-through":"none"},children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"table_text_line":"",children:e.refundCost})})]},String(n))}))]})}function Pt(e){var n=e.destroyModal,t=e.address,i=e.enAddress,r=e.localAddress;return(0,pn.jsxs)(_.View,{className:"order_detail_address_info_road_card_wrap",children:[(0,pn.jsx)(_.Image,{className:"road_card_wrap_img",src:"https://pages.c-ctrip.com/ticket/app/roadcard_bg.png"}),(0,pn.jsxs)(_.View,{className:"header",children:[(0,pn.jsx)(_.View,{onClick:n,className:"icon-close_regular"}),(0,pn.jsx)(_.Text,{className:"header_text",children:"\u95ee\u8def\u5361"})]}),(0,pn.jsxs)(_.View,{className:"body",children:[(0,pn.jsxs)(_.View,{className:"body_title",children:[(0,pn.jsx)(_.Text,{className:"body_title_text",children:"\u5730\u5740"}),(0,pn.jsx)(_.Text,{className:"body_title_text",children:"Address"})]}),(0,pn.jsxs)(_.View,{className:"body_address",children:[t?(0,pn.jsx)(_.Text,{className:"body_address_text",children:t}):null,i?(0,pn.jsx)(_.Text,{className:"body_address_text",children:i}):null,r?(0,pn.jsx)(_.Text,{className:"body_address_text",children:r}):null]})]})]})}function Dt(e){return null===e}fn.gk.hidePopup;var Ot=fn.gk.showPopup,At=function(e){var n=e.resourceUsage,t=void 0===n?{}:n,i=t.pickupTicketStep,r=void 0===i?{}:i,o=t.useTicketStep,a=void 0===o?{}:o,s=a.uses,c=void 0===s?[]:s,l=a.sameAddWithExchange,d=void 0!==l&&l,u=a.sameTimeWithExchange,m=void 0!==u&&u,h=r.exchanges,f=void 0===h?[]:h,p=(c||[]).length||(f||[]).length;if(!p)return null;var v=a.headlineTime,x=a.headlineAddress,g=a.headline,j=r.headline,w=r.headlineTime,N=r.headlineAddress,y=d&&m?[]:(c||[]).map((function(e,n){var t=C(e);return t.type=2,t._idx=n+1,t.titleInfo={title:g,timeTitle:v,addressTitle:x},t}))||[],T=(f||[]).map((function(e,n){var t=C(e);return t.type=1,t._idx=n+1,t.titleInfo={title:j,timeTitle:w,addressTitle:N},t}))||[],I=function(e){var n=(0,pn.jsx)(Lt,{tmpExchanges:T,tmpUses:y,addressType:e,shouldCloseMask:!0});Ot({title:"\u66f4\u591a\u65f6\u95f4\u5730\u5740",children:n})};return(0,pn.jsxs)(_.View,{className:"order_detail_padding_horizontal_16",children:[T.length>0?(0,pn.jsx)(Ut,{item:null===T||void 0===T?void 0:T[0],children:T.length>1?(0,pn.jsxs)(_.View,{onClick:function(){return I("tmpExchanges")},className:"address_more_btn",children:[(0,pn.jsx)(_.Text,{children:"\u66f4\u591a\u65f6\u95f4\u5730\u5740"}),(0,pn.jsx)(_.View,{className:"icon-right"})]}):null}):null,y.length>0?(0,pn.jsx)(Ut,{item:null===y||void 0===y?void 0:y[0],children:y.length>1?(0,pn.jsxs)(_.View,{onClick:function(){return I("tmpUses")},className:"address_more_btn",children:[(0,pn.jsx)(_.Text,{children:"\u66f4\u591a\u65f6\u95f4\u5730\u5740"}),(0,pn.jsx)(_.View,{className:"icon-right"})]}):null}):null]})},Lt=u.memo((function(e){var n=e.addressType,t=e.shouldCloseMask,i=e.tmpExchanges,r=e.tmpUses,o="tmpExchanges"===n?i:r,a=o.length>1?"\uff08\u4efb\u9009\u5176\u4e00\uff09":"";return(0,pn.jsxs)(_.View,{className:"address_layer_inner_wrapper",children:[(0,pn.jsx)(_.View,{className:"order_detail_address_title",children:(0,pn.jsxs)(_.Text,{children:["\u66f4\u591a\u65f6\u95f4\u5730\u5740",a]})}),(o||[]).map((function(e,n){return(0,pn.jsx)(Ut,{item:e,shouldCloseMask:t},String(n))}))]})})),Ut=u.memo((function(e){var n=e.item,t=n.titleInfo,i=t.addressTitle,r=t.timeTitle,o=t.title,a=n.ticketUseTimes||n.ticketOpenTimes||[],s=[],c="";return a.forEach((function(e,n){var t=e.startTime&&e.endTime?e.startTime+"-"+e.endTime:e.startTime||e.endTime||"";c=t+(e.remark?"\uff08"+e.remark+"\uff09":""),c&&s.push(c)})),(0,pn.jsxs)(pn.Fragment,{children:[s.length>0?(0,pn.jsx)(fn.e2,{className:"address_item_wrap",renderLeft:function(){return(0,pn.jsx)(_.Text,{children:r})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"address_info_item_left_text",children:s.join("\uff1b")})}}):null,(0,pn.jsx)(fn.e2,{className:"address_item_wrap",renderLeft:function(){return(0,pn.jsx)(_.Text,{children:i})},renderRight:function(){return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Zt,{title:o,item:n}),e.children]})}})]})})),Zt=function(e){var n=_n(),t={0:"",1:"",2:"\u3010\u9700\u673a\u573a\u53d6\u7968\u3011",3:"\u3010\u975e\u666f\u533a\u53d6\u7968\u3011"},i=(n.operationInfo,n.basicInfo),r=(i.notShowSubUnit,e.item),o=e.title,a=e.shouldCloseMask,s=t[r.pickupPoint]||"",c=r.mapInfo&&!Dt(r.mapInfo),l=!c&&(!!r.enAddress||!!r.localAddress),d=!c&&r.images&&r.images.length,u={isExistMap:c,showRoadCard:l,showImage:d,item:r,title:o,basicInfo:i,shouldCloseMask:a},m=[];return r.address&&m.push(r.address),r.localAddress&&m.push(r.localAddress),m.length<2&&r.enAddress&&m.push(r.enAddress),(0,pn.jsxs)(_.View,{className:"address_info_item_contain",children:[(0,pn.jsx)(_.View,{className:"address_info_item",children:m.map((function(e,n){return(0,pn.jsx)(fn.Uk,{text:e,type:"between",children:(0,pn.jsx)(_.View,{className:"address_info_item_left_board_contain flex_box",children:(0,pn.jsxs)(_.Text,{className:"address_info_item_left_text",children:[s,e]})})},String(n))}))}),(0,pn.jsx)(Ft,(0,v.Z)({},u))]})},Mt={isExistMap:{type:"isExistMap",icon:"https://pages.c-ctrip.com/tourorder/ttd/app/addressicon/map@4x.png",text:"\u5730\u56fe",desc:"\u8bd5\u8bd5\u5730\u56fe\uff0c\u4e00\u952e\u5bfc\u822a"},showImage:{type:"showImage",icon:"https://pages.c-ctrip.com/tourorder/ttd/app/addressicon/viewpoint@4x.png",text:"\u5b9e\u666f\u56fe",desc:"\u70b9\u5f00\u5feb\u901f\u8fa8\u522b\u5165\u53e3"},showRoadCard:{type:"showRoadCard",icon:"https://pages.c-ctrip.com/tourorder/ttd/app/addressicon/road@4x.png",text:"\u95ee\u8def\u5361",desc:"\u95ee\u8def\u5fc5\u5907\uff0c\u8f7b\u677e\u8868\u8fbe"}},Ft=function(e){var n=(0,u.useState)(!1),t=(0,h.Z)(n,2),i=t[0],r=t[1],o=(0,u.useState)(!1),a=(0,h.Z)(o,2),s=a[0],c=a[1],l=(e.baggageDelivery,e.skiDelivery),d=e.item,m=e.title,f=(e.basicInfo,e.shouldCloseMask,[]);if(["showImage","showRoadCard"].forEach((function(n){null!==e&&void 0!==e&&e[n]&&Mt[n]&&f.push(Mt[n])})),0===f.length)return null;var p=function(){r(!1)},x=function(){c(!1)},g=function(e){"showImage"===e?r(!0):"showRoadCard"===e&&c(!0)},j=1===f.length,w=j?"address_outer_multi_actions":"",N=j?"":"action_items";return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"address_outer_action_wrap ".concat(w),children:[l?(0,pn.jsx)(_.Image,{className:"address_outer_action_bg",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/ski_bg.png"}):null,(0,pn.jsx)(_.View,{className:"address_outer_action_container",children:f.map((function(e,n){var t=e.icon,i=e.text,r=e.desc,o=e.tag,a=e.type;return(0,pn.jsxs)(u.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"outer_action_item ".concat(N),style:j?{width:"100%",paddingLeft:12,paddingRight:12,justifyContent:"space-between"}:{},onClick:function(){return g(a)},children:[(0,pn.jsxs)(_.View,{className:"outer_action_item_left",children:[(0,pn.jsx)(_.Image,{className:"img",src:t,mode:"aspectFit"}),(0,pn.jsx)(_.View,{style:{width:4}}),j?(0,pn.jsx)(_.Text,{style:{color:"#555555",fontSize:13},children:r}):null]}),(0,pn.jsxs)(_.View,{className:"outer_action_item_right",children:[(0,pn.jsx)(_.Text,{style:j?{fontSize:13,lineHeight:"17px"}:{fontSize:10,lineHeight:"11px"},children:i}),j?(0,pn.jsx)(_.View,{className:"icon-Forward"}):null,o&&j?(0,pn.jsx)(_.View,{className:"action_item_tag",children:(0,pn.jsx)(_.Text,{className:"action_item_tag_text",children:"HOT"})}):null]})]},t),n!==f.length-1?(0,pn.jsx)(_.Image,{className:"separate_line",src:"https://pages.c-ctrip.com/tourorder/ttd/app/addressicon/border@3x.png",mode:"aspectFit"}):null]},t+n)}))})]}),(0,pn.jsxs)(_.View,{children:[i?(0,pn.jsx)(Ht,{title:m+"\u5730\u5740",imgs:d.images,close:p}):null,s?(0,pn.jsx)(Pt,(0,v.Z)((0,v.Z)({},d),{},{destroyModal:x})):null]})]})},Bt=At,Ht=function(e){var n,t=(0,u.useState)(!1),i=(0,h.Z)(t,2),r=i[0],o=(i[1],(0,u.useState)(0)),a=(0,h.Z)(o,2),s=a[0],c=a[1],l=e.title,d=e.imgs,m=e.close,f=function(e){c(e)};return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_address_info_scenic_wrap",children:(0,pn.jsxs)(_.View,{className:"order_detail_address_info_scenic_inner ".concat(r?"slide_up":""),children:[(0,pn.jsx)(_.View,{className:"body",onClick:m,children:(0,pn.jsx)(Gt,{imgList:d,onCurrentPage:f})}),(0,pn.jsx)(_.View,{className:"header",onClick:m,children:(0,pn.jsx)(_.View,{className:"icon-close_regular"})}),(0,pn.jsxs)(_.View,{className:"footer",children:[(0,pn.jsxs)(_.View,{className:"footer_title",children:[(0,pn.jsx)(_.Text,{className:"footer_title_text",children:l}),(0,pn.jsxs)(_.Text,{className:"footer_title_text",children:[s+1,"/",d.length]})]}),(0,pn.jsx)(_.Text,{className:"footer_title_text",children:null===d||void 0===d||null===(n=d[s])||void 0===n?void 0:n.desc})]})]})})})},Gt=function(e){var n=e.imgList,t=e.onCurrentPage,i=(0,u.useState)("200px"),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=function(e){var n=e.detail,t=n.width,i=n.height,r=i/t,o="calc(100vw / ".concat(r,")");a(o)},c=function(e){var n=null===e||void 0===e?void 0:e.detail,i=n.current;t(i)};return(0,pn.jsx)(_.Swiper,{className:"order_detail_view_loop_img_wrap",style:{height:o},onChange:c,children:n.map((function(e,n){return(0,pn.jsx)(_.SwiperItem,{children:0===n?(0,pn.jsx)(_.Image,{className:"image",mode:"aspectFit",src:e.imgUrl,onLoad:s}):(0,pn.jsx)(_.Image,{className:"image",mode:"aspectFit",src:e.imgUrl})},String(n))}))})},qt=function(e){return e[e["Ticket"]=1]="Ticket",e[e["Act"]=2]="Act",e}(qt||{}),zt=function(e){var n;return null===e||void 0===e||null===(n=e.map((function(e){return e.quantity})))||void 0===n?void 0:n.reduce((function(e,n){return e+n}))};function Yt(){var e,n,t=_n(),i=null===(e=t.orderInfo)||void 0===e||null===(e=e.insurance)||void 0===e?void 0:e.items,r=zt(i),o=null===(n=t.orderInfo)||void 0===n||null===(n=n.operation)||void 0===n||null===(n=n.items)||void 0===n?void 0:n.find((function(e){return 20===e.operationType}));return r||o?(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_insurance_info_outer order_detail_padding_horizontal_16 order_detail_margin_top0",children:[(0,pn.jsx)($t,{}),(0,pn.jsx)(Kt,{})]})}):null}var $t=function(){var e,n,t=_n(),i=null===(e=t.orderInfo)||void 0===e||null===(e=e.insurance)||void 0===e?void 0:e.items,r=null===t||void 0===t||null===(n=t.requestParam)||void 0===n?void 0:n.token,o=zt(i);if(!o)return null;var a=function(){var e,n,o,a,s;if(!r)if(i[0].thirdOrderId)Bn.forwardThirdOrderInsurance(i[0].thirdOrderId);else switch(null===(e=t.orderInfo)||void 0===e||null===(e=e.basicInfo)||void 0===e?void 0:e.orderType){case qt.Act:Bn.forwardInsuranceDetail({url:"orderdetailinsurance",path:"activity",params:(0,v.Z)({from:"",oid:null===(n=t.orderInfo)||void 0===n||null===(n=n.basicInfo)||void 0===n?void 0:n.orderId},/^baoche(you)?$/.test(null!==(o=null===(a=t.orderInfo)||void 0===a||null===(a=a.product)||void 0===a?void 0:a.templateCode)&&void 0!==o?o:"")?{target:"applicant"}:{})});break;case qt.Ticket:Bn.forwardInsuranceDetail({url:"insurance",path:"ticket",params:{oid:null===(s=t.orderInfo)||void 0===s||null===(s=s.basicInfo)||void 0===s?void 0:s.orderId,rid:null===i||void 0===i?void 0:i[0].resourceId}});break}};return(0,pn.jsxs)(_.View,{className:"order_detail_insurance_info_wrap",onClick:a,children:[(0,pn.jsxs)(_.View,{className:"insurance_title_contain",children:[(0,pn.jsx)(_.View,{className:"insurance_title",children:(0,pn.jsx)(_.Text,{className:"insurance_title_text",children:null===i||void 0===i?void 0:i[0].insuranceName})}),(0,pn.jsx)(_.View,{className:"insurance_no",children:(0,pn.jsxs)(_.Text,{className:"insurance_title_text",children:["\xa0\xd7 ",o,"\u4efd"]})})]}),r?null:(0,pn.jsx)(_.View,{className:"icon-right"})]})},Kt=function(){var e,n,t=_n(),i=null===(e=t.orderInfo)||void 0===e||null===(e=e.operation)||void 0===e||null===(e=e.items)||void 0===e?void 0:e.find((function(e){return 20===e.operationType})),r=null===t||void 0===t||null===(n=t.requestParam)||void 0===n?void 0:n.token,o=function(){var e=i.linkUrl;e?Bn.jumpH5({targetPageURI:e}):Tn().showToast({title:"\u8df3\u8f6c\u5931\u8d25",icon:"none"})};return!i||r?null:(0,pn.jsxs)(_.View,{className:"order_detail_insurance_info_wrap super_vip",onClick:o,children:[(0,pn.jsx)(_.Text,{className:"insurance_title",children:i.operationName}),(0,pn.jsx)(_.View,{className:"icon-right"})]})};fn.gk.showPopup;function Wt(){var e=_n(),n=e.packages,t=e.basicInfo,i=e.orderInfo,r=t.orderId,o=i.reserve,a=t.notShowSubUnit,s=void 0===a?[]:a,c=s.length>0&&-1!==s.indexOf("resourcejump"),l=s.length>0&&s.indexOf("cancelrules")>-1;return n.map((function(e,n){var t=e.isAllExpired,i=e.resourceShowType;return 1===i?(0,pn.jsx)(Jt,{packageInfo:e,forbidResourceEvent:c,orderId:r,reserve:o,hideRefundRule:l,isAllExpired:t},String(n)):(0,pn.jsx)(Qt,{packageInfo:e,forbidResourceEvent:c,orderId:r,reserve:o,hideRefundRule:l,isAllExpired:t},String(n))}))}var Qt=function(e){var n,t=e.packageInfo,i=e.forbidResourceEvent,r=e.orderId,o=e.reserve,a=e.hideRefundRule,s=e.isAllExpired,c=(t.packageName,t.packageId,t.refundRule),l=(t.snapshotUrl,t.refundQuantity,t.quantity,t.unit,t.isActive,t.subResList),d=(0,u.useState)(null===l||void 0===l||null===(n=l[0])||void 0===n?void 0:n.orderItemId),m=(0,h.Z)(d,2),f=m[0],p=m[1],v=(0,u.useState)(s),x=(0,h.Z)(v,2),g=x[0],j=x[1],w=l.filter((function(e){return e.orderItemId===f}));return g?(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ni,{forbidResourceEvent:i,packageInfo:t}),(0,pn.jsxs)(_.View,{onClick:function(){return j(!1)},className:"fold_expand_btn","data-testid":Ie.orderFolder,children:["\u5c55\u5f00",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]})}):(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(fn.Q4,{customInnerClass:"ottd_package_resource_wrap",children:[(0,pn.jsx)(ni,{packageInfo:t,forbidResourceEvent:i}),(0,pn.jsx)(ti,{resourceList:l,currentItemId:f,setOrderItemId:p})]}),w.map((function(e,n){return(0,pn.jsxs)(fn.Q4,{customStyle:0===n?{}:{marginTop:12},children:[(0,pn.jsx)(Xt,{cardInfo:e,reserve:o,orderId:r,forbidResourceEvent:i,hideRefundRule:a,isSubTitle:!0}),(0,pn.jsx)(ei,{refundRule:c,isAllExpired:s,setFold:j})]},e.viewSpotId+"_"+n)}))]})},Jt=function(e){var n=e.packageInfo,t=e.forbidResourceEvent,i=e.orderId,r=e.reserve,o=e.hideRefundRule,a=e.isAllExpired,s=(0,u.useState)(a),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=(n.packageName,n.packageId,n.refundRule),f=(n.snapshotUrl,n.refundQuantity,n.quantity,n.unit,n.isActive,n.subResList);return l?(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ni,{forbidResourceEvent:t,packageInfo:n}),(0,pn.jsxs)(_.View,{onClick:function(){return d(!1)},className:"fold_expand_btn",children:["\u5c55\u5f00",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]})}):f.map((function(e,s){return(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsx)(Xt,{cardInfo:e,reserve:r,orderId:i,forbidResourceEvent:t,hideRefundRule:o,packageInfo:n,children:(0,pn.jsx)(ei,{refundRule:m,isAllExpired:a,setFold:d})})},e.viewSpotId+"_"+s)}))};function Xt(e){var n,t=e.cardInfo,i=e.forbidResourceEvent,r=e.hideRefundRule,o=(e.isFold,e.setFold,e.isSubTitle),a=void 0!==o&&o,s=e.packageInfo,c=(e.isAllExpired,t.resourceName),l=t.resourceId,d=t.orderItemId,u=(t.boxId,t.viewSpotId,t.quantity),m=(t.refundQuantity,t.unit),h=t.useDateString,f=t.useGuideList,p=t.otherGuideList,v=t.reserveStrategyList,x=t.resourceUsage,g=t.voucherWraps,j=t.qkdesc,w=t.qkadded,N=t.viewTemplateCode,y=(t.resourceType,t.udateTitle),T=t.showReserve,I=t.reserveInfo,b=t.inChina,S=t.realAddExt,V=t.otherRemarkList,C=(t.boxInfo,t.modifyUseDateDesc),k=t.useType,E=t.validTime,R=t.passengerIdentifications,P=t.identificationNessaryType,D=t.useDateDesc,O=t.sendVoucherPrompt,A=t.voucherProviderPrompt,L=t.shareVoucherPrompt,U=t.shareVoucherType,Z=t.additionalVoucherPrompt,M=(t.resourceUsedPrompt,t.isActive,t.actAttributeList),F=t.disneyValidityList,B=t.electronicVoucherPrompt,H=t.refundRule;H=!r&&H;var G=function(e){return(e||[]).filter((function(e){return 0===e.descType})).map((function(e){return e.desc})).join("\n").split(/[\u3010\u3011]/).map((function(e,n){return(0,pn.jsx)(_.View,{style:n%2===1?{color:"#FF7D13",display:"inline-block"}:{display:"inline-block"},children:(0,fn.P6)({text:e})},String(n))}))},q="",z="";return(f||[]).forEach((function(e){q+=e.value})),null===(n=V||[])||void 0===n||n.forEach((function(e){var n;"\u8865\u5145\u8bf4\u660e"===e.title&&(null===(n=(null===e||void 0===e?void 0:e.valueArray)||[])||void 0===n||n.forEach((function(e){z+=e})))})),(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ni,{name:c,quantity:u,unit:m,forbidResourceEvent:i,isSubTitle:a,packageInfo:s}),T||-1===k?null:(0,pn.jsx)(_.View,{children:0===k?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:y})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_desc",children:[(0,pn.jsx)(_.Text,{className:"use_time_red",children:D}),b?null:(0,pn.jsx)(_.Text,{className:"local_time",children:"\u5f53\u5730\u65f6\u95f4"})]})}})}):(0,pn.jsx)(_.View,{children:h?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:y})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:h})}})}):null})}),E?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u751f\u6548\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:E})}})}):null,C?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1 desc_with_bg",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return null},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:C})}})}):null,(M||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===e||void 0===e?void 0:e.attName})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,pn.jsx)(_.Text,{className:"use_time",children:null===e||void 0===e?void 0:e.attValue})})}})},String(n))})),F.length>0?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){var e;return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===F||void 0===F||null===(e=F[0])||void 0===e?void 0:e.subTitle})},renderRight:function(){var e;return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:G(null===F||void 0===F||null===(e=F[0])||void 0===e?void 0:e.addDetails)})})}})}):null,T&&null!==I&&void 0!==I&&I.subTitle?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===I||void 0===I?void 0:I.subTitle})},renderRight:function(){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{className:"border1px order_detail_reserve_tag",children:(0,pn.jsx)(_.Text,{className:"order_detail_reserve_tag_text",children:"\u5148\u4e70\u540e\u7ea6"})}),(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:G(null===I||void 0===I?void 0:I.addDetails)})]})}})}):null,(0,pn.jsxs)(_.View,{children:[(v||[]).length>0?(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(On,{title:"\u5165\u56ed\u524d\u8bf7\u5148\u9884\u7ea6",iconType:"icon-time"}),(v||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e.value})})}})},String(n))}))]}):null,(p||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))]}),(0,pn.jsx)(_.View,{children:"voice"===N?(0,pn.jsx)(_.View,{children:f.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))}):(0,pn.jsx)(On,{title:q,desc:z,voucherDesc:B})}),(0,pn.jsx)(An,{type:P,list:R}),(0,pn.jsx)(ot,{voucherInfo:g,udate:h,quantity:u,resourceName:c,resourceId:l,orderItemId:d,qkdesc:j,qkadded:w,cardInfo:t,showTitle:(null===g||void 0===g?void 0:g.length)>1,additionalVoucherPrompt:Z,shareVoucherPrompt:1===U||3===U?L:""}),O?(0,pn.jsx)(pt,{title:O,showIm:!1,resourceId:l}):null,A?(0,pn.jsx)(pt,{title:A,showIm:!0,resourceId:l}):null,V.length?li((V||[]).filter((function(e){return"\u5546\u5bb6\u63d0\u9192"===e.title})),!1,!1):null,(0,pn.jsx)(Bt,{resourceUsage:x}),V.length?(V||[]).filter((function(e){return"\u5546\u5bb6\u63d0\u9192"!==e.title&&"\u8865\u5145\u8bf4\u660e"!==e.title})).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_8",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{children:e.valueArray?(0,pn.jsx)(_.View,{className:"remark_list_item_text",children:(e.valueArray||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{children:(0,fn.P6)({text:e})},String(n))}))}):(0,pn.jsx)(di,{text:e.value})})}})},String(n))})):null,S.length?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{className:"order_detail_ext_wrap",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u51fa\u884c\u4fe1\u606f"})},renderRight:function(){return(S||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.name})},renderRight:function(){return(0,pn.jsx)(pn.Fragment,{children:((null===e||void 0===e?void 0:e.items)||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.content},String(n))}))})}})},String(n))}))}})}):null,e.children]})}var ei=(0,u.memo)((function(e){var n=(0,u.useRef)(),t=e.refundRule,i=e.isAllExpired,r=e.setFold;return(0,pn.jsx)(_.View,{className:"order_detail_package_refund_rule",children:(0,pn.jsxs)(_.View,{className:"package_refund_rule_inner",children:[t?(0,pn.jsx)(Vt,{ref:n,rule:t,showReserve:!1,reserveType:1}):null,i?(0,pn.jsx)(_.View,{className:"fold_btn_wrap",children:(0,pn.jsxs)(_.View,{className:"fold_expand_btn",onClick:function(){r(!0)},children:[(0,pn.jsx)(_.Text,{children:"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:"icon-DropUp"})]})}):null]})})})),ni=(0,u.memo)((function(e){var n=e.isSubTitle,t=e.packageInfo,i=e.forbidResourceEvent;if(n){var r=e.name,o=e.quantity,a=e.unit,s=r;return o&&(s+="".concat(r,"x").concat(o).concat(a)),(0,pn.jsx)(_.View,{className:"pacakge_resource_sub_title",children:(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.Text,{children:s})})})}var c=t.packageName,l=t.packageId,d=t.packageUsedPrompt,u=(t.snapshotUrl,t.refundQuantity),m=t.quantity,h=t.unit,f=t.isActive,p=(t.subResList,{name:c,id:l,quantity:m,refundQuantity:u,unit:h,viewTemplateCode:"",resourceType:0,resourceUsedPrompt:d,isActive:f,forbidResourceEvent:i});return(0,pn.jsx)(ci,(0,v.Z)({},p))})),ti=(0,u.memo)((function(e){var n=e.resourceList,t=e.currentItemId,i=e.setOrderItemId,r=hn(),o=(r.refreshComponentDynamicCode,r.refreshComponentDynamicCodeByPackageChangeTab),a=function(e){i(e);var t=n.filter((function(n){return n.orderItemId===e}))[0]||{},r=t.resourceId;o(Tn(),r,e)};return(0,pn.jsx)(_.View,{className:"radio_wrap",children:n.map((function(e,n){var i=null===e||void 0===e?void 0:e.isResourceExpired,r=null===e||void 0===e?void 0:e.orderItemId,o="unselected";return i&&(o="expired"),r===t&&(o=""),(0,pn.jsx)(ii,{item:e,index:n,status:o,onAction:function(){return a(r)}},String(n))}))})})),ii=function(e){var n=e.item,t=e.status,i=e.onAction,r=e.index,o=n.resourceTitle,a=n.resourceDateDesc,s="";return"unselected"===t&&(s="item_unselected"),"expired"===t&&(s="item_expired"),(0,pn.jsxs)(_.View,{className:"radio_item ".concat(s),onClick:i,"data-testid":"".concat(Ie.packageTab).concat(r),children:[(0,pn.jsx)(_.Text,{className:"title",children:o}),a?(0,pn.jsx)(_.Text,{className:"desc",children:a}):null,(0,pn.jsx)(_.Text,{className:"icon-triangle"})]})},ri=(0,u.memo)(Wt);function oi(){var e=_n(),n=e.resource,t=e.basicInfo,i=e.orderInfo,r=t.orderId,o=!0,a=t.notShowSubUnit,s=void 0===a?[]:a,c=s.length>0&&-1!==s.indexOf("resourcejump"),l=s.length>0&&s.indexOf("cancelrules")>-1,d=i.reserve,u=(n||[]).filter((function(e){return!(null!==e&&void 0!==e&&e.isPackage3SubItem)})),m=(u||[]).filter((function(e){return!(null!==e&&void 0!==e&&e.superVipFlag)}));return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(ri,{}),m.map((function(e,n){return(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsx)(si,{cardInfo:e,reserve:d,orderId:r,forbidResourceEvent:c,hideRefundRule:l,isScan:o})},e.viewSpotId+"_"+n)})),(0,pn.jsx)(Yt,{})]})}var ai=(0,u.memo)(oi);function si(e){var n,t=(0,u.useRef)(),i=e.cardInfo,r=e.reserve,o=e.forbidResourceEvent,a=e.hideRefundRule,s=e.isScan,c=i.resourceName,l=i.resourceId,d=i.orderItemId,m=i.boxId,f=i.viewSpotId,p=i.quantity,v=i.refundQuantity,x=i.unit,g=i.useDateString,j=i.useGuideList,w=i.otherGuideList,N=i.reserveStrategyList,y=i.resourceUsage,T=i.voucherWraps,I=i.qkdesc,b=i.qkadded,S=i.viewTemplateCode,V=i.resourceType,C=i.udateTitle,k=i.showReserve,E=i.reserveInfo,R=i.inChina,P=i.realAddExt,D=i.otherRemarkList,O=i.boxInfo,A=i.modifyUseDateDesc,L=i.useType,U=i.validTime,Z=i.passengerIdentifications,M=i.identificationNessaryType,F=i.useDateDesc,B=i.isFold,H=i.sendVoucherPrompt,G=i.voucherProviderPrompt,q=i.shareVoucherPrompt,z=i.shareVoucherType,Y=i.additionalVoucherPrompt,$=i.resourceUsedPrompt,K=i.isActive,W=i.actAttributeList,Q=i.disneyValidityList,J=i.electronicVoucherPrompt,X=i.refundRule;X=!a&&X;var ee=3===V,ne=function(e){return(e||[]).filter((function(e){return 0===e.descType})).map((function(e){return e.desc})).join("\n").split(/[\u3010\u3011]/).map((function(e,n){return(0,pn.jsx)(_.View,{style:n%2===1?{color:"#FF7D13",display:"inline-block"}:{display:"inline-block"},children:(0,fn.P6)({text:e})},String(n))}))},te="",ie="";(j||[]).forEach((function(e){te+=e.value})),null===(n=D||[])||void 0===n||n.forEach((function(e){var n;"\u8865\u5145\u8bf4\u660e"===e.title&&(null===(n=(null===e||void 0===e?void 0:e.valueArray)||[])||void 0===n||n.forEach((function(e){ie+=e})))}));var re=(0,u.useState)(B),oe=(0,h.Z)(re,2),ae=oe[0],se=oe[1],ce=(0,u.useState)(s),le=(0,h.Z)(ce,2),de=le[0],ue=le[1];return ae?(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ci,{name:c,id:l,quantity:p,refundQuantity:v,unit:x,viewTemplateCode:S,boxId:m,viewSpotId:f,resourceType:V,resourceUsedPrompt:$,isActive:K,forbidResourceEvent:o}),k||ee||-1===L?null:(0,pn.jsx)(_.View,{children:0===L?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsxs)(_.Text,{className:"order_detail_right_desc",children:[(0,pn.jsx)(_.Text,{className:"use_time_red",children:F}),R?null:(0,pn.jsx)(_.Text,{className:"local_time",children:"\u5f53\u5730\u65f6\u95f4"})]})}})}):(0,pn.jsx)(_.View,{children:g?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:g})}})}):null})}),(0,pn.jsxs)(_.View,{onClick:function(){return se(!1)},className:"fold_expand_btn","data-testid":Ie.orderFolder,children:["\u5c55\u5f00",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]}):de&&!B?(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ci,{name:c,id:l,quantity:p,refundQuantity:v,unit:x,viewTemplateCode:S,boxId:m,viewSpotId:f,resourceType:V,resourceUsedPrompt:$,isActive:K,forbidResourceEvent:o}),k||ee||-1===L?null:(0,pn.jsx)(_.View,{children:0===L?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_desc",children:[(0,pn.jsx)(_.Text,{className:"use_time_red",children:F}),R?null:(0,pn.jsx)(_.Text,{className:"local_time",children:"\u5f53\u5730\u65f6\u95f4"})]})}})}):(0,pn.jsx)(_.View,{children:g?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:g})}})}):null})}),U?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u751f\u6548\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:U})}})}):null,A?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1 desc_with_bg",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return null},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:A})}})}):null,(W||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===e||void 0===e?void 0:e.attName})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,pn.jsx)(_.Text,{className:"use_time",children:null===e||void 0===e?void 0:e.attValue})})}})},String(n))})),Q.length>0?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){var e;return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===Q||void 0===Q||null===(e=Q[0])||void 0===e?void 0:e.subTitle})},renderRight:function(){var e;return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:ne(null===Q||void 0===Q||null===(e=Q[0])||void 0===e?void 0:e.addDetails)})})}})}):null,k&&null!==E&&void 0!==E&&E.subTitle?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===E||void 0===E?void 0:E.subTitle})},renderRight:function(){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{className:"border1px order_detail_reserve_tag",children:(0,pn.jsx)(_.Text,{className:"order_detail_reserve_tag_text",children:"\u5148\u4e70\u540e\u7ea6"})}),(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:ne(null===E||void 0===E?void 0:E.addDetails)})]})}})}):null,ee?null:(0,pn.jsxs)(_.View,{children:[(N||[]).length>0?(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(On,{title:"\u5165\u56ed\u524d\u8bf7\u5148\u9884\u7ea6"})}),(N||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))]}):null,(w||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))]}),(0,pn.jsx)(ui,{list:O}),ee?null:(0,pn.jsx)(_.View,{children:"voice"===S?(0,pn.jsx)(_.View,{children:j.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))}):(0,pn.jsx)(On,{title:te,desc:ie})}),(0,pn.jsx)(An,{type:M,list:Z}),2===z&&q?(0,pn.jsx)(_.View,{className:"order_detail_certificate_or_voucher_view order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.Text,{className:"certificateOrVoucher",children:q})}):null,ee?null:(0,pn.jsx)(ot,{voucherInfo:T,udate:g,quantity:p,resourceName:c,resourceId:l,qkdesc:I,qkadded:b,cardInfo:i,showTitle:!1,additionalVoucherPrompt:Y,shareVoucherPrompt:1===z||3===z?q:""}),H?(0,pn.jsx)(pt,{title:H,showIm:!1,resourceId:l}):null,G?(0,pn.jsx)(pt,{title:G,showIm:!0,resourceId:l}):null,(0,pn.jsxs)(_.View,{onClick:function(){return ue(!1)},className:"fold_expand_btn",children:["\u67e5\u770b\u5165\u56ed\u65f6\u95f4/\u5730\u5740\u3001\u9000\u6539\u89c4\u5219\u7b49",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]}):(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(ci,{name:c,id:l,quantity:p,refundQuantity:v,unit:x,viewTemplateCode:S,boxId:m,viewSpotId:f,resourceType:V,resourceUsedPrompt:$,isActive:K,forbidResourceEvent:o}),k||ee||-1===L?null:(0,pn.jsx)(_.View,{children:0===L?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_desc",children:[(0,pn.jsx)(_.Text,{className:"use_time_red",children:F}),R?null:(0,pn.jsx)(_.Text,{className:"local_time",children:"\u5f53\u5730\u65f6\u95f4"})]})}})}):(0,pn.jsx)(_.View,{children:g?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:C})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:g})}})}):null})}),U?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u751f\u6548\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:U})}})}):null,A?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1 desc_with_bg",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return null},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:A})}})}):null,(W||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===e||void 0===e?void 0:e.attName})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,pn.jsx)(_.Text,{className:"use_time",children:null===e||void 0===e?void 0:e.attValue})})}})},String(n))})),Q.length>0?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){var e;return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===Q||void 0===Q||null===(e=Q[0])||void 0===e?void 0:e.subTitle})},renderRight:function(){var e;return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:ne(null===Q||void 0===Q||null===(e=Q[0])||void 0===e?void 0:e.addDetails)})})}})}):null,k&&null!==E&&void 0!==E&&E.subTitle?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===E||void 0===E?void 0:E.subTitle})},renderRight:function(){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{className:"border1px order_detail_reserve_tag",children:(0,pn.jsx)(_.Text,{className:"order_detail_reserve_tag_text",children:"\u5148\u4e70\u540e\u7ea6"})}),(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:ne(null===E||void 0===E?void 0:E.addDetails)})]})}})}):null,ee?null:(0,pn.jsxs)(_.View,{children:[(N||[]).length>0?(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(On,{title:"\u5165\u56ed\u524d\u8bf7\u5148\u9884\u7ea6",iconType:"icon-time"}),(N||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e.value})})}})},String(n))}))]}):null,(w||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))]}),(0,pn.jsx)(ui,{list:O}),ee?null:(0,pn.jsx)(_.View,{children:"voice"===S?(0,pn.jsx)(_.View,{children:j.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.value})}})},String(n))}))}):(0,pn.jsx)(On,{title:te,desc:ie,voucherDesc:J})}),(0,pn.jsx)(An,{type:M,list:Z}),2===z&&q?(0,pn.jsx)(_.View,{className:"order_detail_certificate_or_voucher_view order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.Text,{className:"certificateOrVoucher",children:q})}):null,ee?null:(0,pn.jsx)(ot,{voucherInfo:T,udate:g,quantity:p,resourceName:c,resourceId:l,orderItemId:d,qkdesc:I,qkadded:b,cardInfo:i,showTitle:(null===T||void 0===T?void 0:T.length)>1,additionalVoucherPrompt:Y,shareVoucherPrompt:1===z||3===z?q:""}),H?(0,pn.jsx)(pt,{title:H,showIm:!1,resourceId:l}):null,G?(0,pn.jsx)(pt,{title:G,showIm:!0,resourceId:l}):null,!ee&&D.length?li((D||[]).filter((function(e){return"\u5546\u5bb6\u63d0\u9192"===e.title})),!1,!1):null,(0,pn.jsx)(Bt,{resourceUsage:y}),!ee&&D.length?(D||[]).filter((function(e){return"\u5546\u5bb6\u63d0\u9192"!==e.title&&"\u8865\u5145\u8bf4\u660e"!==e.title})).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_8",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{children:e.valueArray?(0,pn.jsx)(_.View,{className:"remark_list_item_text",children:(e.valueArray||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{children:(0,fn.P6)({text:e})},String(n))}))}):(0,pn.jsx)(di,{text:e.value})})}})},String(n))})):null,P.length?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(fn.e2,{className:"order_detail_ext_wrap",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u51fa\u884c\u4fe1\u606f"})},renderRight:function(){return(P||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.name})},renderRight:function(){return(0,pn.jsx)(pn.Fragment,{children:((null===e||void 0===e?void 0:e.items)||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.content},String(n))}))})}})},String(n))}))}})}):null,(0,pn.jsx)(_.View,{className:"order_detail_package_refund_rule",children:(0,pn.jsxs)(_.View,{className:"package_refund_rule_inner",children:[X?(0,pn.jsx)(Vt,{ref:t,rule:X,showReserve:k,reserveType:null===r||void 0===r?void 0:r.reserveType}):null,B||s?(0,pn.jsx)(_.View,{className:"fold_btn_wrap",children:(0,pn.jsxs)(_.View,{className:"fold_expand_btn",onClick:function(){B?se(!0):ue(!0)},children:[(0,pn.jsx)(_.Text,{children:"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:"icon-DropUp"})]})}):null]})})]})}function ci(e){var n=e.name,t=e.id,i=e.quantity,r=e.refundQuantity,o=e.unit,a=e.viewTemplateCode,s=e.viewSpotId,c=e.resourceType,l=e.resourceUsedPrompt,d=e.isActive,u=e.forbidResourceEvent,m=(0,gn.f)(300);return(0,pn.jsxs)(_.View,{className:"resource_card_ticket_title order_detail_padding_horizontal_16",onClick:function(){m((function(){u||("voice"===a&&d?Bn.forwardElectronicDetail(t):3!==c?t&&d&&Bn.forwardResDetail(t):Bn.forwardSpotDetailMiniProgram(s))}))},children:[(0,pn.jsx)(_.View,{className:"resource_card_ticket_title_left",children:(0,pn.jsxs)(_.Text,{className:"resource_card_ticket_title_left_text","data-testid":"resourceUsedPrompt",children:[n,"x",i+(r||0),o,r?"(\u5df2\u9000x"+r+o+")":"",l?"("+l+")":""]})}),!d&&3!==c||u?null:(0,pn.jsx)(_.View,{className:"resource_card_ticket_title_right",children:(0,pn.jsx)(_.View,{className:"icon-Forward"})})]})}function li(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.map((function(e,i){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_8 ",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{style:n?{borderTop:"1px solid #eeeeee",paddingTop:12}:void 0,children:e.valueArray?(0,pn.jsx)(pn.Fragment,{children:(e.valueArray||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e})},String(n))}))}):(0,pn.jsx)(_.View,{children:t?(0,pn.jsx)(di,{text:e.value}):(0,pn.jsx)(_.View,{className:"remark_list_item_text",children:null===e||void 0===e?void 0:e.value})})})}})},String(i))}))}var di=function(e){var n=e.text,t=(0,u.useState)(!1),i=(0,h.Z)(t,2),r=i[0],o=i[1],a=(0,u.useState)(!1),s=(0,h.Z)(a,2),c=s[0],l=s[1],d=(0,u.useRef)();return(0,u.useEffect)((function(){var e,n=null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.offsetHeight;o(n>42),l(n>42)}),[]),(0,pn.jsxs)(_.View,{className:"remark_list_item",children:[(0,pn.jsx)(_.Text,{className:"".concat(c?"ellipsis2lines":""," remark_list_item_text"),ref:d,children:(0,fn.P6)({text:n})}),r?(0,pn.jsxs)(_.View,{className:"flex_row remark_more_button",onClick:function(){l(!c)},children:[(0,pn.jsx)(_.Text,{children:c?"\u5c55\u5f00\u66f4\u591a":"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:c?"icon-DropDown":"icon-DropUp"})]}):null]})},ui=function(e){var n=e.list,t=e.useDateString,i=e.qkdesc,r=e.qkadded,o=e.cardInfo;return null!==n&&void 0!==n&&n.length?(0,pn.jsx)(pn.Fragment,{children:n.map((function(e,n){var a=e.userGuideInfo,s=e.udateInfo,c=e.resourceName,l=e.voucherWraps,d=e.quantity,u=e.resourceId,m=e.validTime,h=e.orderItemId,f=s.udateTitle,p=s.useDateDesc;return(0,pn.jsxs)(_.View,{style:n>0?{marginTop:16}:{},children:[(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u540d\u79f0"})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:c})})}})}),p?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:f})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:p})}})}):null,m?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u751f\u6548\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:m})})}})}):null,a.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_1",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e.value})})}})},String(n))})),(0,pn.jsx)(_.View,{style:null!==l&&void 0!==l&&l.length?{marginTop:16}:{},children:(0,pn.jsx)(ot,{voucherInfo:l,udate:t,quantity:d,resourceName:c,resourceId:u,orderItemId:h,qkdesc:i,qkadded:r,cardInfo:o,showTitle:(null===l||void 0===l?void 0:l.length)>1})})]},String(n))}))}):null},mi=t(10088);function _i(){var e=_n(),n=e.basicInfo,t=e.category,i=e.optionInfo,r=e.operationInfo,o=n.orderId,a=n.notShowSubUnit,s=void 0===a?[]:a,c=t.appendCategory,l=s.length>0&&s.indexOf("cancelrules")>-1,d=s.length>0&&-1!==s.indexOf("resourcejump"),u=(r||[]).find((function(e){return 52===(null===e||void 0===e?void 0:e.operationType)}));return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(fn.Q4,{customStyle:{marginTop:12},children:[(0,pn.jsx)(hi,(0,v.Z)((0,v.Z)({},t),{},{orderId:o,hideUnit:l,forbidResourceEvent:d,dayTourSnapShot:u})),c.map((function(e,n){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(fn.TG,{}),(0,pn.jsx)(fi,{optionInfo:i,categoryInfo:e,isAppendCategory:!0})]},String(n))}))]}),(0,pn.jsx)(Yt,{})]})}function hi(e){var n=(0,u.useRef)(),t=e.categoryInfo,i=e.productId,r=e.productName,o=(e.packageInfo,e.resourceAggregatedInfos),a=e.depositInfo,s=e.voucherList,c=e.hideUnit,l=e.forbidResourceEvent,d=e.dayTourSnapShot,m=t.resourceId,f=t.useDateString,p=t.validTime,v=t.useGuideList,x=t.otherGuideList,g=t.qkdesc,j=t.qkadded,w=t.udateTitle,N=t.useDateDesc,y=t.showReserve,T=t.inChina,I=t.otherRemarkList,b=t.productAddInfos,S=t.useType,V=t.addExts,C=t.categoryId,k=t.travelInfos,E=t.isFold,R=t.sendVoucherPrompt,P=t.voucherProviderPrompt,D=t.shareVoucherPrompt,O=t.shareVoucherType,A=t.additionalVoucherPrompt,L=t.secureTour,U=t.secureTourUrl,Z=t.refundRule;Z=!c&&Z;var M=(b||[]).find((function(e){return"74"===e.titleCode&&"41"===e.subTitleCode})),F={title:"",list:[]},B=[];null===M||void 0===M||M.addDetails.forEach((function(e,n){var t,i=e.desc,r=void 0===i?"":i,o=e.descType,a=void 0===o?0:o;1===a?(0!==n&&(B.push(F),F={title:"",list:[]}),F.title=r):(F.list.push(e),n===(null===M||void 0===M||null===(t=M.addDetails)||void 0===t?void 0:t.length)-1&&B.push(F))}));var H,G,q=249===C||250===C?"\u53d6\u8fd8\u8bf4\u660e":"\u4f7f\u7528\u65b9\u6cd5",z="",Y=I.filter((function(e){return"\u8865\u5145\u8bf4\u660e"!==(null===e||void 0===e?void 0:e.title)||(H=e,!1)}));H&&((null===(G=H)||void 0===G?void 0:G.valueArray)||[]).forEach((function(e,n){var t;z=z+e+((null===(t=H.valueArray)||void 0===t?void 0:t.length)===n+1?"":"\n")}));var $=(0,u.useState)(E),K=(0,h.Z)($,2),W=K[0],Q=K[1];return W?(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(pi,{productName:r,productId:i,forbidResourceEvent:l}),(0,pn.jsxs)(_.View,{onClick:function(){return Q(!1)},className:"fold_expand_btn","data-testid":Ie.orderFolder,children:["\u5c55\u5f00",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]}):(0,pn.jsxs)(_.View,{className:"order_detail_resource order_detail_resource_ticket",children:[(0,pn.jsx)(pi,{productName:r,productId:i,isSecureTour:L,forbidResourceEvent:l}),L?(0,pn.jsx)(yi,{isShow:L,url:U}):null,(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.View,{className:"horizontal_line"})}),S>-1?(0,pn.jsx)(_.View,{children:0===S?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:w})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_desc",children:[(0,pn.jsx)(_.Text,{className:"use_time_red",children:N}),T?null:(0,pn.jsx)(_.Text,{children:"\u5f53\u5730\u65f6\u95f4"})]})}})}):(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:w})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:f})}})})}):null,p?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u751f\u6548\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:p})}})}):null,null===o||void 0===o?void 0:o.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_contain",children:[(0,pn.jsx)(_.View,{className:"order_detail_right_contain_desc",children:e.descList.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:e},String(n))}))}),null!==d&&void 0!==d&&d.linkUrl&&1===(null===e||void 0===e?void 0:e.type)?(0,pn.jsx)(_.View,{className:"order_detail_right_contain_button",onClick:function(){Bn.jumpH5({targetPageURI:null===d||void 0===d?void 0:d.linkUrl,params:{navBarStyle:"white",isHideNavBar:"YES"}})},children:(0,pn.jsx)(_.Text,{children:"\u8be6\u60c5"})}):null]})}})},String(n))})),a.isShow?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8bbe\u5907\u62bc\u91d1"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:a.title})}})}):null,B.map((function(e,n){var t=e.title,i=void 0===t?"":t,r=e.list,o=void 0===r?[]:r;return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:i||q})},renderRight:function(){return(0,pn.jsx)(_.View,{style:{flexDirection:"column"},children:o.map((function(e,n){var t=e.desc,i=void 0===t?"":t,r=e.descType,o=void 0===r?0:r;if(i.indexOf("\u8fd8\u4ef6\u5730\u5740\uff1a")>-1){var a="",s=i.split("\u8fd8\u4ef6\u5730\u5740\uff1a");return a=s.length>1?s[1]:i,(0,pn.jsx)(_.View,{style:2===o?0!==n?{fontWeight:"bold",marginTop:8}:{fontWeight:"bold"}:{},className:"order_detail_right_desc render_html_desc",children:(0,pn.jsx)(mi.U,{text:a,className:"order_detail_right_desc_copy",children:i})},"desc-".concat(n))}return(0,pn.jsx)(_.View,{style:2===o?0!==n?{fontWeight:"bold",marginTop:8}:{fontWeight:"bold"}:{},className:"order_detail_right_desc render_html_desc",children:(0,fn.P6)({text:i})},"desc-".concat(n))}))})}})},"addDetail-".concat(n))})),z?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8865\u5145\u8bf4\u660e"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc render_html_desc",children:(0,fn.P6)({text:z})})}})}):null,V?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(Ti,{addExts:V,productId:i})}):null,(x||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e.value})})}})},String(n))})),v.length?v.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===e||void 0===e?void 0:e.title})},renderRight:function(){return(0,pn.jsx)(gi,{title:null===e||void 0===e?void 0:e.title,desc:null===e||void 0===e?void 0:e.value})}},String(n))},"key_".concat(n))})):null,(0,pn.jsx)(On,{}),(0,pn.jsx)(An,{}),2===O&&D?(0,pn.jsx)(_.View,{className:"order_detail_certificate_or_voucher_view order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.Text,{className:"certificateOrVoucher",children:D})}):null,(0,pn.jsx)(_.View,{children:(s||[]).map((function(e,n){return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(ot,{voucherInfo:e.voucherWraps,udate:f,quantity:e.unitQuantity,resourceName:e.resourceName,resourceId:e.resourceId,qkdesc:g,qkadded:j,cardInfo:t,showTitle:(null===s||void 0===s?void 0:s.length)>1,shareVoucherPrompt:1===O||3===O?D:"",additionalVoucherPrompt:A})},String(n))}))}),R?(0,pn.jsx)(pt,{title:R,showIm:!1,resourceId:m}):null,P?(0,pn.jsx)(pt,{title:P,showIm:!0,resourceId:m}):null,Y.length>0?(0,pn.jsx)(_.View,{children:(Y||[]).map((function(e,n){var t=!0;return"\u5546\u5bb6\u63d0\u9192"===e.title&&(t=!1),(0,pn.jsxs)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:[(0,pn.jsx)(ji,{title:e.title}),e.valueArray?(0,pn.jsx)(_.View,{className:"order_detail_other_remark_desc",children:((null===e||void 0===e?void 0:e.valueArray)||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{children:e},String(n))}))}):(0,pn.jsx)(_.View,{children:t?(0,pn.jsx)(wi,{text:e.value}):(0,pn.jsx)(_.View,{className:"remark_list_item_text",children:null===e||void 0===e?void 0:e.value})})]},String(n))}))}):null,null!==k&&void 0!==k&&k.length?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(Ni,{travelInfos:k})}):null,(0,pn.jsx)(_.View,{className:"order_detail_package_refund_rule",children:(0,pn.jsxs)(_.View,{className:"package_refund_rule_inner",children:[Z?(0,pn.jsx)(Vt,{ref:n,rule:Z,showReserve:y,inChina:T}):null,E?(0,pn.jsx)(_.View,{className:"fold_btn_wrap",children:(0,pn.jsxs)(_.View,{className:"fold_expand_btn",onClick:function(){Q(!0)},children:[(0,pn.jsx)(_.Text,{children:"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:"icon-DropUp"})]})}):null]})})]})}var fi=function(e){var n,t,i=e.categoryInfo,r=e.optionInfo,o=i.useExisted,a=void 0!==o&&o,s=i.refundRule,c=i.resourceName,l=i.resourceId,d=i.quantity,m=i.useDateString,f=i.useGuideList,p=i.otherGuideList,x=i.voucherWraps,g=i.qkdesc,j=i.qkadded,w=i.udateTitle,N=i.realAddExt,y=i.secondsEnter,T=i.otherRemarkList,I=i.travelInfos,b=i.isFold,S=i.sendVoucherPrompt,V=i.voucherProviderPrompt,C=i.shareVoucherPrompt,k=i.additionalVoucherPrompt,E=i.secureTour,R=i.secureTourUrl,P="",D=T.filter((function(e){return"\u8865\u5145\u8bf4\u660e"!==(null===e||void 0===e?void 0:e.title)||(n=e,!1)}));n&&((null===(t=n)||void 0===t?void 0:t.valueArray)||[]).forEach((function(e,t){var i;P=P+e+((null===(i=n.valueArray)||void 0===i?void 0:i.length)===t+1?"":"\n")}));var O=(0,u.useState)(b),A=(0,h.Z)(O,2),L=A[0],U=A[1];return L?(0,pn.jsxs)(_.View,{className:"order_detail_activity_append_category order_detail_resource_ticket",children:[(0,pn.jsx)(vi,(0,v.Z)((0,v.Z)({},i),{},{optionInfo:r,refundRule:s,useExisted:a})),(0,pn.jsxs)(_.View,{onClick:function(){return U(!1)},className:"fold_expand_btn",children:["\u5c55\u5f00",(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})]}):(0,pn.jsxs)(_.View,{className:"order_detail_activity_append_category order_detail_resource_ticket",children:[(0,pn.jsx)(vi,(0,v.Z)((0,v.Z)({},i),{},{optionInfo:r,refundRule:s,useExisted:a})),E?(0,pn.jsx)(yi,{isShow:E,url:R}):null,(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.View,{className:"horizontal_line"})}),(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:w})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc use_time_red",children:m})}})}),P?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8865\u5145\u8bf4\u660e"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc render_html_desc",children:(0,fn.P6)({text:P})})}})}):null,(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:N.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.name})},renderRight:function(){return(0,pn.jsx)(_.View,{children:((null===e||void 0===e?void 0:e.items)||[]).map((function(e,n){return(0,pn.jsx)(_.View,{style:{wordBreak:"break-all"},className:"order_detail_right_desc",children:e.content},String(n))}))})}})},String(n))}))}),(p||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:(0,fn.P6)({text:e.value})})}})},String(n))})),(f||[]).map((function(e,n){return y?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderCenter:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_desc order_detail_use_guide_list_desc",children:[(0,pn.jsx)("img",{className:"use_guide_list_img",src:"https://pages.c-ctrip.com/ticket/app/reassurance/quick_entry_tag.png"}),e.value]})},renderRight:function(){return null}})},String(n)):(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderCenter:function(){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:e.value})},renderRight:function(){return null}})},String(n))})),(0,pn.jsx)(_.View,{className:"order_detail_padding_vertical_8",children:(0,pn.jsx)(ot,{voucherInfo:x,udate:m,quantity:d,resourceName:c,resourceId:l,qkdesc:g,qkadded:j,cardInfo:i,shareVoucherPrompt:C,additionalVoucherPrompt:k})}),S?(0,pn.jsx)(pt,{title:S,showIm:!1,resourceId:l}):null,V?(0,pn.jsx)(pt,{title:V,showIm:!0,resourceId:l}):null,(D||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 order_detail_padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:null===e||void 0===e?void 0:e.title})},renderRight:function(){var n=!0;return"\u5546\u5bb6\u63d0\u9192"===e.title&&(n=!1),null!==e&&void 0!==e&&e.valueArray?(0,pn.jsx)(_.View,{className:"order_detail_padding_bottom_5",children:null===e||void 0===e?void 0:e.valueArray.map((function(e,n){return(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:e},String(n))}))}):(0,pn.jsx)(_.View,{className:"order_detail_padding_bottom_5",children:n?(0,pn.jsx)(wi,{text:e.value}):(0,pn.jsx)(_.View,{className:"remark_list_item_text",children:null===e||void 0===e?void 0:e.value})})}},String(n))},String(n))})),null!==I&&void 0!==I&&I.length?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(Ni,{travelInfos:I})}):null,b?(0,pn.jsxs)(_.View,{className:"fold_expand_btn",onClick:function(){U(!0)},children:[(0,pn.jsx)(_.Text,{children:"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:"icon-DropUp"})]}):null]})},pi=function(e){var n=e.productName,t=e.productId,i=e.isSecureTour,r=e.forbidResourceEvent,o=(0,gn.f)(1e3);return(0,pn.jsxs)(_.View,{className:"resource_card_title",style:i?{paddingBottom:"8px"}:{},onClick:function(){o((function(){r||Bn.forwardActDetail(t)}))},"data-testid":Ie.ProducuTittle,children:[(0,pn.jsx)(_.View,{className:"resource_card_title_left",children:(0,pn.jsx)(_.Text,{children:n})}),r?null:(0,pn.jsx)(_.View,{className:"resource_card_title_right",children:(0,pn.jsx)(_.View,{className:"icon-Forward"})})]})},vi=function(e){var n=e.resourceName,t=e.resourceId,i=e.unitQuantity,r=e.optionInfo,o=e.refundRule,a=e.useExisted,s=function(){var e=(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(xi,{optionInfo:r,resourceId:t,resourceName:n,refundRule:o,useExisted:a})});(0,qn.U)({title:"\u4ea7\u54c1\u8be6\u60c5",children:e})};return(0,pn.jsxs)(_.View,{className:"order_detail_activity_append_category_title order_detail_padding_horizontal_16",children:[(0,pn.jsxs)(_.View,{className:"title_text",children:[n," x",i]}),(0,pn.jsx)(_.Text,{onClick:s,className:"order_detail_right_detail",children:"\u8be6\u60c5"})]})},xi=function(e){var n=e.resourceId,t=e.resourceName,i=e.optionInfo,r=e.useExisted,o=e.refundRule,a=(i||[]).find((function(e){return e.id===n})),s=null===a||void 0===a?void 0:a.rainfos;if(r&&o){var c,l,d=f._.filter(o.items,(function(e){return 1===e.type}));return(0,pn.jsxs)(_.View,{className:"order_detail_activity_append_category_detail_wrap",children:[(0,pn.jsx)(_.View,{className:"detail_title",children:t}),(0,pn.jsx)(_.View,{className:"detail_sub_title",children:"\u9000\u6539\u89c4\u5219"}),((null===(c=d[0])||void 0===c?void 0:c.structDetails)||[]).map((function(e,n){var t=0===Number(null===e||void 0===e?void 0:e.refundCost)?"\u4e0d\u6536\u53d6\u635f\u5931\u8d39;":"\u6536\u53d6".concat(null===e||void 0===e?void 0:e.refundCost,"\u635f\u5931\u8d39;");return(0,pn.jsxs)(_.View,{className:"detail_item_li",children:[null===e||void 0===e?void 0:e.refundTime,"\u7533\u8bf7\u53d6\u6d88\uff0c",t]},String(n))})),((null===(l=d[0])||void 0===l?void 0:l.backDescs)||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"detail_item_li",children:null===e||void 0===e?void 0:e.desc},String(n))}))]})}return s?(0,pn.jsxs)(_.View,{className:"order_detail_activity_append_category_detail_wrap",children:[(0,pn.jsx)(_.View,{className:"detail_title",children:t}),s.map((function(e,n){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{className:"detail_sub_title",children:null===e||void 0===e?void 0:e.subtitle}),((null===e||void 0===e?void 0:e.desclist)||[]).map((function(n,t){return"75"===(null===e||void 0===e?void 0:e.subtcode)?(0,pn.jsx)(_.View,{className:"detail_item_li",children:null===n||void 0===n?void 0:n.desc},String(t)):(0,pn.jsx)(_.View,{className:"detail_item",children:null===n||void 0===n?void 0:n.desc},String(t))}))]},String(n))}))]}):null},gi=function(e){var n=(0,u.useRef)(),t=(0,u.useState)(!1),i=(0,h.Z)(t,2),r=i[0],o=i[1],a=e.desc,s=e.title,c=a.replace(/[\r\n]/g,"");(0,u.useEffect)((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;o(t>21)}),[]);var l=(0,u.useCallback)((function(){var e=function(){return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.Text,{style:{whiteSpace:"break-spaces"},children:a})})};(0,qn.U)({title:s,children:e})}),[]);return(0,pn.jsxs)(_.View,{className:"order_detail_wrap",children:[(0,pn.jsx)(_.View,{ref:n,className:"".concat(r?"ellipsis1line":""," order_detail_right_desc"),children:c}),r?(0,pn.jsx)(_.Text,{style:{paddingLeft:2},onClick:l,children:"\u8be6\u60c5"}):null]})},ji=function(e){var n=e.title,t=e.renderRight;return(0,pn.jsxs)(_.View,{className:"address_info_title",children:[(0,pn.jsx)(_.View,{className:"address_info_title_left",children:(0,pn.jsx)(_.Text,{children:n})}),t?(0,pn.jsx)(_.View,{className:"address_info_title_right",children:t()}):null]})},wi=function(e){var n=e.text,t=(0,u.useState)(!1),i=(0,h.Z)(t,2),r=i[0],o=i[1],a=(0,u.useState)(!1),s=(0,h.Z)(a,2),c=s[0],l=s[1],d=(0,u.useRef)();return(0,u.useEffect)((function(){var e,n=null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.offsetHeight;o(n>42),l(n>42)}),[]),(0,pn.jsxs)(_.View,{className:"remark_list_item",children:[(0,pn.jsx)(_.View,{className:"".concat(c?"ellipsis2lines":""," remark_list_item_text"),ref:d,children:n}),r?(0,pn.jsxs)(_.View,{className:"flex_row remark_more_button",onClick:function(){l(!c)},children:[(0,pn.jsx)(_.Text,{children:c?"\u5c55\u5f00\u66f4\u591a":"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:c?"icon-DropDown":"icon-DropUp"})]}):null]})},Ni=function(e){var n;return null===e||void 0===e||null===(n=e.travelInfos)||void 0===n?void 0:n.map((function(e,n){return(0,pn.jsx)(_.View,{className:"padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.title})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.desc})}})},String(n))}))},yi=function(e){var n=e.isShow,t=e.url;if(!n)return null;var i=(0,gn.f)(1e3);return(0,pn.jsx)(_.View,{onClick:function(){i((function(){Bn.jumpH5({targetPageURI:t,title:"\u65e0\u5fe7\u884c"})}))},className:"order_detail_secure_retreat_icon_wrap",children:(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/secure-retreat.png"})})},Ti=function(e){var n=e.addExts,t=e.productId,i=(0,u.useState)(!1),r=(0,h.Z)(i,2),o=r[0],a=r[1];return(0,pn.jsx)(_.View,{children:(n||[]).map((function(e,n){return 1===e.extId?(0,pn.jsx)(_.View,{className:"padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u53d6\u4ef6\u70b9"})},renderRight:function(){return(0,pn.jsx)(_.View,{style:{wordBreak:"break-all"},children:((null===e||void 0===e?void 0:e.items)||[]).map((function(e,n){var t,i,r,s,c,l;return(0,pn.jsxs)(_.View,{children:[e.extraInfo.ShortName?(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:e.extraInfo.ShortName}):null,null!==e&&void 0!==e&&null!==(t=e.extraInfo)&&void 0!==t&&t.BusinessHours?(0,pn.jsxs)(_.View,{className:"order_detail_right_desc",children:["\u8425\u4e1a\u65f6\u95f4:",null===e||void 0===e||null===(i=e.extraInfo)||void 0===i?void 0:i.BusinessHours]}):null,null!==e&&void 0!==e&&null!==(r=e.extraInfo)&&void 0!==r&&r.Address?(0,pn.jsx)(_.View,{className:"order_detail_right_desc",children:null===e||void 0===e||null===(s=e.extraInfo)||void 0===s?void 0:s.Address}):null,null!==e&&void 0!==e&&null!==(c=e.extraInfo)&&void 0!==c&&c.Figure?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"order_detail_right_detail",onClick:function(){a(!0)},children:"\u67e5\u770b\u4f4d\u7f6e\u56fe"}),o?(0,pn.jsx)(Ht,{title:"",close:function(){a(!1)},imgs:[{imgUrl:null===e||void 0===e||null===(l=e.extraInfo)||void 0===l?void 0:l.Figure}]}):null]}):null]},String(n))}))})}})},String(n)):2===e.extId?(0,pn.jsx)(_.View,{className:"padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8fd8\u4ef6\u70b9"})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"order_detail_right_pickup",children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:"\u6240\u6709\u8fd8\u4ef6\u70b9\u901a\u8fd8"})}),(0,pn.jsx)(_.Text,{onClick:function(){Bn.forwardPickReturn(t)},className:"order_detail_right_detail",children:"\u8be6\u60c5"})]})}})},String(n)):(0,pn.jsx)(_.View,{className:"padding_vertical_4",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:e.name})},renderRight:function(){return(0,pn.jsx)(_.View,{children:((null===e||void 0===e?void 0:e.items)||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:e.content},"text_"+n)}))})}})},String(n))}))})};function Ii(){var e=_n(),n=e.basicInfo,t=n.orderType;return 2===t?(0,pn.jsx)(_i,{}):(0,pn.jsx)(ai,{})}var bi=(0,u.memo)(Ii);function Si(){var e=_n(),n=(0,gn.f)(1e3),t=e.basicInfo,i=void 0===t?{}:t,r=i.weeksHappyImageUrl,o=i.weeksHappyUrl;if(!r||!o)return null;var a=function(){n((function(){p().navigateTo({url:"/".concat(o)})}))};return(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsx)(_.View,{className:"weeklyJoy_container",onClick:a,children:(0,pn.jsx)(_.Image,{src:r,mode:"scaleToFill",className:"weeklyJoy_img"})})})}function Vi(){var e,n=_n(),t=n.basicInfo,i=n.orderInfo,r=null===i||void 0===i||null===(e=i.product)||void 0===e?void 0:e.resources,o=t.notShowSubUnit,a=void 0===o?[]:o,s=t.subOrderType,c=t.bizLineType,l=null===r||void 0===r?void 0:r.every((function(e){return 1===(null===e||void 0===e?void 0:e.bizLineType)&&1===(null===e||void 0===e?void 0:e.subBizLineType)})),d=null===r||void 0===r?void 0:r.every((function(e){return 2===(null===e||void 0===e?void 0:e.subBizLineType)})),u=a.length>0&&a.indexOf("bottomservices")>=0;if(d||u)return(0,pn.jsx)(_.View,{className:"order_detail_bottomservice_empty_contain"});if(1===s)return(0,pn.jsx)(Ci,{type:"activity",isAllDayTour:!0});switch(c){case 4:case 5:return(0,pn.jsx)(Ci,{type:"ticket"});case 1:case 3:return(0,pn.jsx)(Ci,{type:"activity",isAllDayTour:l});case 2:return(0,pn.jsx)(Ci,{type:"guide"});default:}return null}function Ci(e){var n=e.type,t=e.isAllDayTour,i={activity:"https://pages.c-ctrip.com/tourorder/ttd/app/bottomservice/activity.png",ticket:"https://pages.c-ctrip.com/tourorder/ttd/app/bottomservice/ticket.png",guide:"https://pages.c-ctrip.com/tourorder/ttd/app/bottomservice/guide.png",daytour:"https://pages.c-ctrip.com/tourorder/ttd/app/bottomservice/daytour.png"},r=i[n];t&&(r=i.daytour);var o=function(){var e=(null===f.__global||void 0===f.__global?void 0:f.__global.env)||"prd",i="";switch(e){case"fat":i="https://sp.fat46.qa.nt.ctripcorp.com/webapp/sp/serviceensure";break;default:i="https://m.ctrip.com/webapp/sp/serviceensure"}var r="tickets";switch(n){case"activity":r=t?"dayTrip":"activity";break;case"guide":r="dayTripAndWizard";break}(0,Zn.mi)({targetPageURI:"".concat(i,"?bu=travel&sub=").concat(r,"&showback=false")})};return(0,pn.jsxs)(_.View,{onClick:o,className:"order_detail_bottomservice_contain",children:[(0,pn.jsx)(_.View,{className:"order_detail_bottom_service_body",children:(0,pn.jsx)(_.Image,{style:{width:"100%",height:"100%"},src:r,mode:"aspectFit"})}),(0,pn.jsxs)(_.View,{className:"ticketServiceTextContainer",children:[(0,pn.jsx)(_.View,{className:"ticketServiceText",children:"\u672c\u4ea7\u54c1\u7531\u4e0a\u6d77\u643a\u7a0b\u56fd\u9645\u65c5\u884c\u793e\u6709\u9650\u516c\u53f8\u53ca\u5177\u6709\u5408"}),(0,pn.jsx)(_.View,{className:"ticketServiceText",children:"\u6cd5\u8d44\u8d28\u7684\u4f9b\u5e94\u5546\u63d0\u4f9b\u76f8\u5173\u670d\u52a1"})]})]})}function ki(e){var n,t,i=e.index,r=e.len,o=(e.type,e.resourceId),a=e.resourceName,s=e.marketPrice,c=e.price,l=e.tagInfos,d=(e.categoryName,e.bizLineType),u=(e.hasImage,e.imageUrlMap,e.userSelectionDesc),m=e.level1SaleUnitCategoryName,h=e.tipTitle,f=_n(),v=5,x=f.basicInfo,g=void 0===x?{}:x,j=f.orderInfo,w=null===g||void 0===g?void 0:g.orderId,N=null===g||void 0===g?void 0:g.orderStatus,y=null===j||void 0===j||null===(n=j.product)||void 0===n||null===(n=n.resources)||void 0===n?void 0:n[0].viewSpotId,T=null===j||void 0===j||null===(t=j.product)||void 0===t||null===(t=t.resources)||void 0===t?void 0:t[0].resourceId,I={ubtKeyName:"act_orderdetail_additional_resource_exp",data:{orderid:w,viewspotid:y,channelid:"weapp",resourceid:T,sub_resourceid:o,position:i+1}},b=function(e){p().sendUbtByPage.ubtTrace("act_orderdetail_additional_area_click",{orderid:w,viewspotid:y,channelid:"weapp"}),p().sendUbtByPage.ubtTrace("act_orderdetail_additional_resource_click",{orderid:w,viewspotid:y,channelid:"weapp",resourceid:T,sub_resourceid:o,position:i+1}),d!==v?Bn.forwardResDetail(o):Bn.forwardElectronicDetail(o)};return 1===r?(0,pn.jsx)(_.View,{className:"additional_sale_item autoExpose",id:"".concat(Te.SHOPCLICK).concat(w,"-").concat(N,"-").concat(o),onClick:b,"data-expose":I,children:(0,pn.jsxs)(_.View,{className:"additional_sale_item_bottom",children:[(0,pn.jsxs)(_.View,{className:"ttd-ellips-line2 additional_sale_item_title",children:[m?(0,pn.jsx)(_.View,{className:"additional_sale_item_category_contain",children:(0,pn.jsx)(_.View,{className:"additional_sale_item_category_contain_flex",children:(0,pn.jsx)(_.Text,{children:m})})}):null,(0,pn.jsx)(_.Text,{children:a})]}),(0,pn.jsxs)(_.View,{className:"additional_sale_item_info",children:[(0,pn.jsxs)(_.View,{className:"additional_sale_item_bottom_title_tag",children:[u?(0,pn.jsxs)(_.View,{className:"additional_sale_item_hot_icon",children:[(0,pn.jsx)(_.Image,{alt:"hot",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/Kirby-Yicon-hot.png"}),(0,pn.jsx)(_.Text,{children:u})]}):null,h?(0,pn.jsx)(_.View,{className:"additional_sale_item_desc",children:(0,pn.jsx)(_.Text,{children:h})}):null,null!==l&&void 0!==l&&l.length?(0,pn.jsx)(_.View,{className:"additional_sale_item_tag",children:null===l||void 0===l?void 0:l.map((function(e,n){return(0,pn.jsx)(_.Text,{className:"additional_sale_item_tag_text",children:e.name},n)}))}):null]}),(0,pn.jsxs)(_.View,{className:"additional_sale_item_buy_price",children:[(0,pn.jsxs)(_.View,{className:"additional_sale_item_price",children:[c>0?(0,pn.jsxs)(_.View,{className:"additional_sale_item_sale_price",children:[(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_icon",children:"\xa5"}),(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_number",children:c})]}):(0,pn.jsx)(_.View,{className:"additional_sale_item_sale_price",children:(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_number_free",children:"\u514d\u8d39"})}),s?(0,pn.jsx)(_.View,{className:"additional_sale_item_delete",children:(0,pn.jsxs)(_.Text,{className:"additional_sale_item_delete_price",children:["\xa5",s]})}):null]}),(0,pn.jsx)(_.View,{className:"additional_sale_item_buy_btn",children:(0,pn.jsx)(_.Text,{children:d===v?"\u8bd5\u542c":"\u8d2d\u4e70"})})]})]})]})}):(0,pn.jsxs)(_.View,{className:"additional_sale_item autoExpose",id:"".concat(Te.SHOPCLICK).concat(w,"-").concat(N,"-").concat(o),onClick:b,"data-expose":I,children:[(0,pn.jsx)(_.View,{className:"additional_sale_category_contain",children:m?(0,pn.jsx)(_.View,{className:"additional_sale_category",children:(0,pn.jsx)(_.Text,{children:m})}):null}),(0,pn.jsxs)(_.View,{className:"additional_sale_item_bottom",children:[(0,pn.jsxs)(_.View,{className:"additional_sale_item_bottom_title_tag",children:[(0,pn.jsx)(_.View,{className:"ttd-ellips-line2 additional_sale_item_title",children:(0,pn.jsx)(_.Text,{children:a})}),u?(0,pn.jsxs)(_.View,{className:"additional_sale_item_hot_icon",children:[(0,pn.jsx)(_.Image,{alt:"hot",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/Kirby-Yicon-hot.png"}),(0,pn.jsx)(_.Text,{children:u})]}):null,h?(0,pn.jsx)(_.View,{className:"additional_sale_item_desc",children:(0,pn.jsx)(_.Text,{children:h})}):null,null!==l&&void 0!==l&&l.length?(0,pn.jsx)(_.View,{className:"additional_sale_item_tag",children:null===l||void 0===l?void 0:l.map((function(e,n){return(0,pn.jsx)(_.Text,{className:"additional_sale_item_tag_text",children:e.name},n)}))}):null]}),(0,pn.jsxs)(_.View,{className:"additional_sale_item_buy_price",children:[(0,pn.jsxs)(_.View,{className:"additional_sale_item_price",children:[c>0?(0,pn.jsxs)(_.View,{className:"additional_sale_item_sale_price",children:[(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_icon",children:"\xa5"}),(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_number",children:c})]}):(0,pn.jsx)(_.View,{className:"additional_sale_item_sale_price",children:(0,pn.jsx)(_.Text,{className:"additional_sale_item_sale_price_number_free",children:"\u514d\u8d39"})}),s?(0,pn.jsx)(_.View,{className:"additional_sale_item_delete",children:(0,pn.jsxs)(_.Text,{className:"additional_sale_item_delete_price",children:["\xa5",s]})}):null]}),(0,pn.jsx)(_.View,{className:"additional_sale_item_buy_btn",children:(0,pn.jsx)(_.Text,{children:d===v?"\u8bd5\u542c":"\u8d2d\u4e70"})})]})]})]})}function Ei(){var e,n=_n(),t=n.additionalSale,i=n.basicInfo,r=void 0===i?{}:i,o=n.orderInfo,a=void 0===o?{}:o,s=t,c=(null===s||void 0===s?void 0:s.length)||0;if(console.log(t,"additionalSaleadditionalSale"),!c)return null;var l=null===r||void 0===r?void 0:r.orderId,d=null===a||void 0===a||null===(e=a.product)||void 0===e||null===(e=e.resources)||void 0===e?void 0:e[0].viewSpotId,u={ubtKeyName:"act_orderdetail_additional_area_exp",data:{orderid:l,viewspotid:d,channelid:"weapp"}},m="additional_sale_list_body";return 1===c?m="additional_sale_list_body_1":2===c&&(m="additional_sale_list_body_2"),(0,pn.jsx)(_.View,{id:"additional_sale_container_position",children:(0,pn.jsxs)(_.View,{className:"additional_sale_container autoExpose",id:"additional_sale_container","data-expose":u,children:[(0,pn.jsxs)(_.View,{className:"additional_sale_title_container",children:[(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/buy2.png",className:"additional_sale_title_icon"}),(0,pn.jsx)(_.Text,{children:"\u8d85\u591a\u6e38\u5ba2\u90fd\u5728\u8fd9\u6837\u73a9"})]}),(0,pn.jsx)(_.Image,{alt:"bg",className:"additional_sale_bg",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/addition_sale_bg1.png"}),(0,pn.jsxs)(_.View,{className:m,children:[c>2?(0,pn.jsx)(_.View,{className:"additional_sale_list_header"}):null,(s||[]).map((function(e,n){return(0,pn.jsx)(ki,(0,v.Z)((0,v.Z)({},e),{},{index:n,len:c}),"".concat(e.resourceId))})),c>2?(0,pn.jsxs)(_.View,{className:"additional_sale_list_footer",children:[(0,pn.jsx)(_.Text,{children:"\u6ca1"}),(0,pn.jsx)(_.Text,{children:"\u6709"}),(0,pn.jsx)(_.Text,{children:"\u66f4"}),(0,pn.jsx)(_.Text,{children:"\u591a"}),(0,pn.jsx)(_.Text,{children:"\u5566"})]}):null]})]})})}function Ri(e){var n,t=_n(),i=(0,u.useState)(!1),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=(0,u.useState)(!1),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=t.additionalSale,f=t.basicInfo,v=t.orderInfo,x=(null===m||void 0===m?void 0:m.length)||0,g=e.scrollView,j=null===f||void 0===f?void 0:f.orderId,w=null===v||void 0===v||null===(n=v.product)||void 0===n||null===(n=n.resources)||void 0===n?void 0:n[0].viewSpotId;(0,u.useEffect)((function(){x>0&&(N(),setTimeout((function(){y()}),3e3))}),[x,a]),(0,u.useEffect)((function(){g&&y()}),[g]);var N=function(){a(!0),setTimeout((function(){return d(!0)}),400),p().sendUbtExpose.refreshObserve()},y=function(){d(!1),setTimeout((function(){a(!1)}),300)},T=function(){p().sendUbtByPage.ubtTrace("act_orderdetail_additional_guide_click",{orderid:j,viewspotid:w,channelid:"weapp"}),null===e||void 0===e||e.setScrollPos("additional_sale_container_position")},I={ubtKeyName:"act_orderdetail_additional_guide_exp",data:{orderid:j,viewspotid:w,channelid:"weapp"}};if(!x)return null;var b=l?"additional_guide_container_show":"additional_guide_container_show additional_guide_container_hide";return o?(0,pn.jsx)(_.View,{onClick:T,className:"additional_guide_container autoExpose ".concat(b),id:"additional_guide_expose","data-expose":I,children:(0,pn.jsxs)(_.View,{className:"additional_guide_inner",children:[(0,pn.jsx)(_.Text,{className:"additional_guide_label",children:"\u67e5\u770b\u66f4\u591a\u666f\u533a\u5185\u642d\u914d"}),(0,pn.jsx)(_.View,{className:"icon-DropDown"})]})}):null}function Pi(){var e,n,t,i,r,o,a=_n(),s=a.orderInfo,c=null===a||void 0===a||null===(e=a.orderInfo)||void 0===e||null===(e=e.product)||void 0===e||null===(e=e.resources)||void 0===e?void 0:e[0],l=null===c||void 0===c?void 0:c.viewSpotId,d=s.basicInfo,u=d.notShowSubUnit,m=void 0===u?[]:u,h=m&&-1!==(null===m||void 0===m?void 0:m.indexOf("view")),f=function(){Bn.forwardSpotDetailMiniProgram(l)};if(!l)return null;var p=null===a||void 0===a||null===(n=a.basicInfo)||void 0===n?void 0:n.poiId,v=null===a||void 0===a||null===(t=a.orderInfo)||void 0===t||null===(t=t.raidersInfo)||void 0===t?void 0:t.levelOneCatalogId,x=(null===a||void 0===a||null===(i=a.orderInfo)||void 0===i||null===(i=i.raidersInfo)||void 0===i?void 0:i.levelTwoCatalogList)||[],g=x.length;return(0,pn.jsx)(pn.Fragment,{children:(null===(r=a.orderInfo)||void 0===r||null===(r=r.basicInfo)||void 0===r?void 0:r.orderType)===Zn.mr.Ticket&&!h&&(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{style:{paddingTop:16,paddingBottom:16,backgroundColor:"#FFFFFF"},children:[(0,pn.jsx)(_.View,{id:"ottd_scenic_spot_container",children:(0,pn.jsxs)(_.View,{className:"scenic_spot_title_container",onClick:f,"data-testid":Ie.ScenicDetailBtn,children:[(0,pn.jsx)(_.Text,{className:"scenic_spot_title",children:null===(o=a.orderInfo)||void 0===o||null===(o=o.product)||void 0===o||null===(o=o.resources)||void 0===o?void 0:o[0].viewSpotName}),(0,pn.jsxs)(_.View,{className:"scenic_spot_title_right",children:[(0,pn.jsx)(_.Text,{className:"scenic_spot_title_desc",children:"\u666f\u70b9\u8be6\u60c5"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]})}),g>0?(0,pn.jsx)(Di,{raiderList:x,raiderId:v,poiId:p}):null]})})})}var Di=function(e){var n=e.raiderList,t=e.isRecommendPage,i=void 0!==t&&t,r=n.length,o=r>6?n.slice(0,6):n,a="ottd_playGuideItem";1===r&&(a="ottd_playGuideItem ottd_playGuideItemSingle"),2===r&&(a="ottd_playGuideItem ottd_playGuideItemDouble");var s=function(){return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"ottd_playGuideItemBlock",style:i?{width:12}:{}}),(o||[]).map((function(e,n){var t,i=null===e||void 0===e||null===(t=e.backgroundImage)||void 0===t?void 0:t.originalUrl;return(0,pn.jsxs)(_.View,{className:a,onClick:function(){var n,t;null!==e&&void 0!==e&&null!==(n=e.jumpUrl)&&void 0!==n&&n.wxUrl&&(0,Zn.mi)({targetPageURI:null===e||void 0===e||null===(t=e.jumpUrl)||void 0===t?void 0:t.wxUrl})},children:[(0,pn.jsx)(_.Image,{style:{width:"100%",height:"100%"},src:i,mode:"aspectFill"}),(0,pn.jsx)(_.View,{className:"ottdPlayGuideItemMask"}),(0,pn.jsxs)(_.View,{className:"ottd_playGuideItemText",children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{children:null===e||void 0===e?void 0:e.catalogName})}),(0,pn.jsx)(_.Text,{children:"".concat((null===e||void 0===e?void 0:e.readCount)>=1e4?"".concat(Math.floor((null===e||void 0===e?void 0:e.readCount)/1e3)/10,"w"):null===e||void 0===e?void 0:e.readCount,"\u70ed\u5ea6")})]})]},n)})),(0,pn.jsx)(_.View,{className:"ottd_playGuideItemBlock",style:i?{width:12}:{}})]})};return r<=2?(0,pn.jsx)(_.View,{className:"ottd_playGuideWrap",style:i?{marginTop:13}:{},children:s()}):(0,pn.jsx)(_.ScrollView,{enableFlex:!0,className:"ottd_playGuideScrollWrap",style:i?{marginTop:13}:{},scrollX:!0,scrollY:!1,children:s()})},Oi=function(){var e=_n(),n=e.basicInfo,t=n.notShowSubUnit,i=void 0===t?[]:t,r=e.additionalSale,o=i.length>0&&i.indexOf("additionalsale")>=0;return(0,pn.jsx)(pn.Fragment,{children:null!==r&&void 0!==r&&r.length&&!o?(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:(0,pn.jsx)(Ei,{})}):null})},Ai=t(61501),Li=t.n(Ai),Ui=t(93212),Zi=1/0,Mi=9007199254740991,Fi=17976931348623157e292,Bi=NaN,Hi="[object Symbol]",Gi=/^\s+|\s+$/g,qi=/^[-+]0x[0-9a-f]+$/i,zi=/^0b[01]+$/i,Yi=/^0o[0-7]+$/i,$i="\\ud800-\\udfff",Ki="\\u0300-\\u036f\\ufe20-\\ufe23",Wi="\\u20d0-\\u20f0",Qi="\\ufe0e\\ufe0f",Ji="["+$i+"]",Xi="["+Ki+Wi+"]",er="\\ud83c[\\udffb-\\udfff]",nr="(?:"+Xi+"|"+er+")",tr="[^"+$i+"]",ir="(?:\\ud83c[\\udde6-\\uddff]){2}",rr="[\\ud800-\\udbff][\\udc00-\\udfff]",or="\\u200d",ar=nr+"?",sr="["+Qi+"]?",cr="(?:"+or+"(?:"+[tr,ir,rr].join("|")+")"+sr+ar+")*",lr=sr+ar+cr,dr="(?:"+[tr+Xi+"?",Xi,ir,rr,Ji].join("|")+")",ur=RegExp(er+"(?="+er+")|"+dr+lr,"g"),mr=RegExp("["+or+$i+Ki+Wi+Qi+"]"),_r=parseInt,hr="object"===("undefined"===typeof t.g?"undefined":(0,Ui.Z)(t.g))&&t.g&&t.g.Object===Object&&t.g,fr="object"===("undefined"===typeof self?"undefined":(0,Ui.Z)(self))&&self&&self.Object===Object&&self,pr=hr||fr||Function("return this")(),vr=gr("length");function xr(e){return e.split("")}function gr(e){return function(n){return null==n?void 0:n[e]}}function jr(e){return mr.test(e)}function wr(e){return jr(e)?yr(e):vr(e)}function Nr(e){return jr(e)?Tr(e):xr(e)}function yr(e){var n=ur.lastIndex=0;while(ur.test(e))n++;return n}function Tr(e){return e.match(ur)||[]}var Ir=Object.prototype,br=Ir.toString,Sr=pr.Symbol,Vr=Math.ceil,Cr=Math.floor,kr=Sr?Sr.prototype:void 0,Er=kr?kr.toString:void 0;function Rr(e,n){var t="";if(!e||n<1||n>Mi)return t;do{n%2&&(t+=e),n=Cr(n/2),n&&(e+=e)}while(n);return t}function Pr(e,n,t){var i=-1,r=e.length;n<0&&(n=-n>r?0:r+n),t=t>r?r:t,t<0&&(t+=r),r=n>t?0:t-n>>>0,n>>>=0;var o=Array(r);while(++i<r)o[i]=e[i+n];return o}function Dr(e){if("string"===typeof e)return e;if(Zr(e))return Er?Er.call(e):"";var n=String(e);return"0"==n&&1/e==-Zi?"-0":n}function Or(e,n,t){var i=e.length;return t=void 0===t?i:t,!n&&t>=i?e:Pr(e,n,t)}function Ar(e,n){n=void 0===n?" ":Dr(n);var t=n.length;if(t<2)return t?Rr(n,e):n;var i=Rr(n,Vr(e/wr(n)));return jr(n)?Or(Nr(i),0,e).join(""):i.slice(0,e)}function Lr(e){var n=(0,Ui.Z)(e);return!!e&&("object"==n||"function"==n)}function Ur(e){return!!e&&"object"===(0,Ui.Z)(e)}function Zr(e){return"symbol"===(0,Ui.Z)(e)||Ur(e)&&br.call(e)==Hi}function Mr(e){if(!e)return 0===e?e:0;if(e=Br(e),e===Zi||e===-Zi){var n=e<0?-1:1;return n*Fi}return e===e?e:0}function Fr(e){var n=Mr(e),t=n%1;return n===n?t?n-t:n:0}function Br(e){if("number"===typeof e)return e;if(Zr(e))return Bi;if(Lr(e)){var n="function"===typeof e.valueOf?e.valueOf():e;e=Lr(n)?String(n):n}if("string"!==typeof e)return 0===e?e:Number(e);e=e.replace(Gi,"");var t=zi.test(e);return t||Yi.test(e)?_r(e.slice(2),t?2:8):qi.test(e)?Bi:Number(e)}function Hr(e){return null==e?"":Dr(e)}function Gr(e,n,t){e=Hr(e),n=Fr(n);var i=n?wr(e):0;return n&&i<n?Ar(n-i,t)+e:e}var qr=Gr,zr=t(35051),Yr=t.n(zr),$r=60,Kr=24,Wr=1e3,Qr=Wr*$r,Jr=Qr*$r,Xr=Jr*Kr;function eo(e){var n=_n(),t=n.reserveInfo,i=to(t,e),r=i.endLocalTime,o=i.startLocalTime,a=i.status,s=i.localTimeCurrent;switch(a){case"beforeStart":var c=ro(s,o),l=c.countDown,d=c.remainingInfo,u=c.text;return l?io("\u8ddd\u5f00\u59cb\u4ec5\u5269",d):(0,pn.jsxs)(pn.Fragment,{children:[u,"\u5f00\u59cb\u9884\u7ea6"]});case"start":var m=ro(s,r),_=m.countDown,h=m.remainingInfo,f=m.text;return _?io("\u8ddd\u7ed3\u675f\u4ec5\u5269",h):(0,pn.jsxs)(pn.Fragment,{children:[f,"\u7ed3\u675f"]});case"end":return io("\u8ddd\u7ed3\u675f\u4ec5\u5269",{_hour:0,_minute:0,_second:0});default:return null}}function no(e){var n,t,i,r,o=_n(),a=(0,u.useRef)((0,gn.P)((function(e){e&&e()}),2e3)),s=mn.useActions(),c=(0,u.useState)(!0),l=(0,h.Z)(c,2),d=l[0],m=l[1],f=(0,u.useState)(0),v=(0,h.Z)(f,2),x=v[0],g=v[1],N=o.operationInfo,y=void 0===N?[]:N,T=o.orderInfo,I=o.basicInfo,b=o.reserveInfo,S=o.resource,V=T.reserve,C=e.title,k=e.button,E=C,R=k,P=s.refreshOrderByContinuePay,D=s.doSubmitReserveValidityOrderInfo,O=null===T||void 0===T||null===(n=T.product)||void 0===n||null===(n=n.resources)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.resourceId,A=null===T||void 0===T||null===(t=T.product)||void 0===t||null===(t=t.resources)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.reserveResourceId,L=null===T||void 0===T||null===(i=T.product)||void 0===i||null===(i=i.resources)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.viewSpotId,U=to(b,x),Z=U.status;et((function(){g(x+1e3)}),1e3);var M=V.reserveType,F=V.isSubmitReserveOrder,B=V.refundTip,H=V.secendReserveTip,G=V.reserveStartTime,q=V.reserveEndTime,z=y.find((function(e){return 48===e.operationType})),Y={localDate:null===I||void 0===I?void 0:I.localDate,reserveStartTime:G,reserveEndTime:q},$=null===(r=to(Y,x))||void 0===r?void 0:r.status,K=H&&(null===H||void 0===H?void 0:H.length)>0,W=!B,Q=function(e){return e.filter((function(e){return 0===e.descType})).map((function(e){return e.desc})).join("\n").split(/[\u3010\u3011]/).map((function(e,n){return(0,pn.jsx)(_.View,{style:n%2===1?{color:"#FF7D13",display:"inline-block"}:{display:"inline-block"},children:(0,fn.P6)({text:e})},String(n))}))},J="";J=0===M?"\u9884\u7ea6\u666f\u70b9\u51fa\u884c\u65e5\u671f":"\u8bf7\u786e\u8ba4\u8ba2\u5355";var X=function(){"beforeStart"===Z?p().showToast({title:"\u6682\u672a\u5f00\u59cb\u9884\u7ea6",icon:"none"}):"end"===Z?p().showToast({title:"\u5df2\u8d85\u8fc7\u6700\u665a\u9884\u7ea6\u65f6\u95f4",icon:"none"}):Bn.forwardReserveDate({targetPageURI:"reservation",path:"ticket",params:{orderid:null===I||void 0===I?void 0:I.orderId,resid:O,reserveresid:A,spotid:L},from:!0})},ee=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={orderId:null===I||void 0===I||null===(n=I.orderId)||void 0===n?void 0:n.toString()},e.prev=1,e.next=4,D(t);case 4:r=e.sent,o=null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.success,o?(p().showToast({title:"\u786e\u8ba4\u8ba2\u5355\u63d0\u4ea4\u6210\u529f",icon:"none"}),setTimeout((function(){P()}),2100)):fn.WZ.showDialog({title:"\u8ba2\u5355\u786e\u8ba4\u5931\u8d25",desc:"\u62b1\u6b49\uff0c\u5f53\u524d\u65e0\u6cd5\u786e\u8ba4\u8ba2\u5355\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",buttons:[{text:"\u6211\u77e5\u9053\u4e86",type:"primary",callback:function(){P()}}]}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),p().showToast({title:"\u7cfb\u7edf\u5f02\u5e38,\u7a0d\u540e\u91cd\u8bd5",icon:"none"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=null===B||void 0===B?void 0:B.replace(/(\u3010|\u3011)/g,"");_.View,_.View;fn.WZ.showDialog({title:"\u786e\u8ba4\u8ba2\u5355",desc:"".concat(e,"\uff0c\u662f\u5426\u786e\u8ba4\u63d0\u4ea4\u8ba2\u5355\uff1f"),buttons:[{text:"\u6211\u518d\u60f3\u60f3",type:"secondary"},{text:"\u786e\u8ba4\u63d0\u4ea4",type:"primary",callback:function(){ee()}}]})},te=function(){return F?(0,pn.jsxs)(_.Text,{className:"submit_reserve_tag",children:[(0,pn.jsx)(_.Text,{className:"icon-SelectedShape"}),(0,pn.jsx)(_.Text,{children:"\u5df2\u63d0\u4ea4"})]}):null},ie=function(){var e=eo(x);if(F)return null;var n="";return n=0===M?e:"beforeStart"===$?"".concat(G," \u5f00\u59cb\u786e\u8ba4"):"".concat(q," \u7ed3\u675f"),(0,pn.jsx)(_.View,{className:"up_coming_confirm_sub_desc",children:n})},re=function(){return 0===M?2:z?4:2},oe=function(){0===M?X():1===M&&("beforeStart"===$?p().showToast({title:"\u672a\u5230\u5f00\u59cb\u786e\u8ba4\u65f6\u95f4",icon:"none"}):"end"===$?p().showToast({title:"\u5df2\u8d85\u8fc7\u6700\u665a\u786e\u8ba4\u65f6\u95f4",icon:"none"}):W?ee():ne())};return(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_confirm_wrap",children:[(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common_confirm",children:[(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",style:{minHeight:24},children:[(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[K?(0,pn.jsx)(_.View,{className:"circle_sort",children:"1"}):null,(0,pn.jsxs)(_.View,{className:"up_coming_confirm_title_wrap",children:[(0,pn.jsx)(_.View,{style:{marginBottom:2},children:(0,pn.jsx)(E,{title:J,subTitle:te()})}),ie()]})]}),(0,pn.jsx)(_.View,{className:"up_coming_right_confirm_btn",children:F?null:(0,pn.jsx)(R,{text:0===M?"\u53bb\u9884\u7ea6":"\u53bb\u786e\u8ba4",type:re(),onClick:function(){return a.current(oe)}})})]}),W?null:(0,pn.jsx)(_.View,{className:"up_coming_confirm_sub_desc",style:K?{marginLeft:24}:{},children:Q([{desc:B,descType:0}])}),K?(0,pn.jsx)(_.View,{className:"vertical_dashed_line"}):null]}),K?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"horizon_separate_line"}),(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",style:{minHeight:24},children:[(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[(0,pn.jsx)(_.View,{className:"circle_sort",children:"2"}),(0,pn.jsx)(_.View,{style:{marginBottom:2},children:(0,pn.jsx)(E,{title:"\u5165\u56ed\u524d\u8bf7\u5148\u9884\u7ea6"})})]}),S.length>1?(0,pn.jsx)(_.View,{className:"up_coming_right",onClick:function(){return m((function(e){return!e}))},"data-testid":Ie.confirmReservation,children:(0,pn.jsx)(_.View,{className:"confirm_reservation_btn",children:(0,pn.jsx)(_.View,{className:d?"icon-DropDown":"icon-DropUp"})})}):null]}),1!==S.length&&d?null:(0,pn.jsx)(_.View,{className:"confirm_reservation_sub_desc",children:H.map((function(e,n){return(0,pn.jsx)(_.View,{children:(0,fn.P6)({text:e})},String(n))}))})]}):null]})})}function to(e,n){gt().extend(Yr());var t=e.localDate,i=e.reserveStartTime,r=e.reserveEndTime;i=i||0,r=r||0;var o,a=gt()(t).valueOf(),s=gt()(i).valueOf(),c=gt()(r).valueOf(),l=a+n,d=c-l,u=s-l,m=gt()(i).isSameOrBefore(l)&&gt()(l).isSameOrBefore(r),_=gt()(r).isBefore(l);return o=m||_?_?"end":"start":"beforeStart",{localTimeCurrent:l,startLocalTime:s,endLocalTime:c,remainingEndTime:d,remainingStartTime:u,status:o}}function io(e,n){var t=n._hour,i=n._minute,r=n._second,o=qr(t,2,"0")+":"+qr(i,2,"0")+":"+qr(r,2,"0");return(0,pn.jsxs)(pn.Fragment,{children:[e," ",(0,pn.jsx)(_.Text,{children:o})]})}function ro(e,n){var t,i,r,o=gt()(e,"x"),a=gt()(n,"x"),s=1e3*a.diff(o,"seconds");if(s<=Xr){t=!0;var c=Math.floor(s/Jr),l=Math.floor((s-c*Jr)/Qr),d=Math.floor((s-c*Jr-l*Qr)/Wr);r={_second:d,_minute:l,_hour:c}}else t=!1,i=gt()(e).year()===gt()(n).year()?gt()(n).format("MM-DD HH:mm"):gt()(n).format("YYYY-MM-DD HH:mm");return{countDown:t,remainingInfo:r,text:i}}function oo(e){return e=Number(e),!isNaN(e)&&Math.ceil(e)!==e}function ao(e){return oo(e)?so(e).split(".")[1].length:0}function so(e){if(!e)return"0";var n=String(e);if(-1===n.indexOf("e"))return n;e=Number(e);var t=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return e.toFixed(Math.max(0,(t[1]||"").length-Number(t[2])))}function co(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=Number(n[0]);return n.slice(1).forEach((function(e){if(e){if(!i)return i=e;var n=ao(i),t=ao(e),r=n+t;if(r){var o=Math.pow(10,Math.max(n,t));i=(Math.round(i*o)+Math.round(e*o))/o}else i+=e}})),i}function lo(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length?(n.forEach((function(e,t){t&&e&&(n[t]=-e)})),co.apply(void 0,n)):null}var uo={1:"\u5df2\u53d1\u8d27",2:"\u5df2\u63fd\u4ef6",3:"\u914d\u9001\u4e2d",4:"\u6d3e\u4ef6\u4e2d",5:"\u5df2\u7b7e\u6536",6:"\u9000\u56de\u4e2d",7:"\u5df2\u9000\u7b7e",8:"\u7269\u6d41\u5f02\u5e38",9:"\u5f85\u53d1\u8d27",200:"\u7269\u6d41\u5f02\u5e38"};function mo(){var e=_n(),n=e.reserveInfo,t=e.operationInfo,i=void 0===t?[]:t,r=e.orderInfo,o=n.showReserve,a=(n.showPay,n.showAddTraveler,n.addTravelerInfo,r.reserve),s=!1;if(a){var c=a.isSubmitReserveOrder,l=i.find((function(e){return 47===e.operationType||48===e.operationType}));s=!l&&!o&&!c}else s=!0;return(0,pn.jsxs)(_.View,{children:[s?null:(0,pn.jsx)(no,{title:wo,button:jo}),(0,pn.jsx)(fo,{}),(0,pn.jsx)(go,{}),(0,pn.jsx)(ho,{}),(0,pn.jsx)(xo,{}),(0,pn.jsx)(po,{}),(0,pn.jsx)(_o,{})]})}var _o=function(){var e,n=_n(),t=n.operationInfo,i=n.basicInfo,r=t.find((function(e){return 50===e.operationType}));if(!r)return null;var o={ubtKeyName:"act_orderdetail_tourphoto_exposure",data:{orderid:null===i||void 0===i||null===(e=i.orderId)||void 0===e?void 0:e.toString()}};return(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common autoExpose",id:"trip_photograph_expose","data-expose":o,children:[(0,pn.jsx)(_.View,{className:"up_coming_left",children:(0,pn.jsx)(wo,{title:"\u6211\u7684\u4e13\u5c5e\u5199\u771f"})}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsx)(jo,{text:"\u8fdb\u5165\u76f8\u518c",type:3,onClick:function(){var e;p().sendUbtByPage.ubtTrace("act_orderdetail_tourphoto_click",{orderid:null===i||void 0===i||null===(e=i.orderId)||void 0===e?void 0:e.toString()}),(0,Zn.mi)({targetPageURI:null===r||void 0===r?void 0:r.linkUrl})}})})]})})},ho=function(){var e,n=_n(),t=(n.basicInfo,n.operationInfo),i=n.orderInfo,r=t.find((function(e){return 24===e.operationType})),o=t.find((function(e){return 28===e.operationType})),a=i.product,s=a.resources,c=(s||[]).find((function(e){return"voice"===e.viewTemplateCode}))||{},l=c.resourceId,d=Gn().getSystemInfoSync(),u=d.windowWidth-24,m=u*(54/351)||66;return o&&(r=null),r||o?(0,pn.jsx)(_.View,{className:"up_coming_audio_box_wrap",style:{height:m,maxHeight:66,marginTop:12},children:(0,pn.jsxs)(_.View,{className:"up_coming_audio_box_inner",onClick:function(){r?Bn.forwardElectronicDetail(l):o&&(0,Zn.mi)({targetPageURI:o.linkUrl})},children:[(0,pn.jsxs)(_.View,{className:"up_coming_left audio_left",style:{display:"flex",alignItems:"center"},children:[(0,pn.jsx)(_.Image,{mode:"aspectFit",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/audioGuideText.png"}),(0,pn.jsx)(_.View,{}),(0,pn.jsx)(_.Text,{children:null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.viewSpotName})]}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsxs)(_.View,{className:"btn_wrap",children:[(0,pn.jsx)(_.View,{className:"icon-BroadcastShape"}),(0,pn.jsx)(_.Text,{children:"\u64ad\u653e"})]})})]})}):null},fo=function(){var e=_n(),n=(0,gn.f)(300),t=e.basicInfo,i=e.operationInfo,r=(t.orderType,t.remainPayTime),o=t.orderAmt,a=t.orderId,s=t.payMode,c=t.payDesc,l=t.notShowSubUnit,d=void 0===l?[]:l,m=d.length>0&&d.indexOf("continuepay")>=0,f=i.find((function(e){return 32===e.operationType})),v=(0,u.useState)(r),x=(0,h.Z)(v,2),g=x[0],j=x[1];et((function(){j(lo(g,1))}),1e3);var w=No(g),N=hn(),y=N.doContinuePay,T=function(){y({oid:a}).then((function(e){Bn.doPay(e)}))};return!f||m?null:(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",children:[(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[(0,pn.jsx)(wo,{title:"\u53bb\u652f\u4ed8",subTitle:"\xa5".concat(o)}),"H"===s?(0,pn.jsx)(_.View,{className:"up_coming_continue_sub_desc",children:c}):(0,pn.jsxs)(_.View,{className:"up_coming_continue_sub_desc",children:["\u5269\u4f59\u65f6\u95f4",(0,pn.jsx)(_.Text,{children:w})]})]}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsx)(jo,{text:"\u53bb\u652f\u4ed8",type:1,onClick:function(){return n((function(){g<=0&&"H"!==s?p().showToast({title:"\u5df2\u8d85\u8fc7\u6700\u665a\u652f\u4ed8\u65f6\u95f4",icon:"none"}):T()}))}})})]})})},po=function(){var e=_n(),n=e.operationInfo,t=n.find((function(e){return 22===e.operationType}));return t?(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",children:[(0,pn.jsx)(_.View,{className:"up_coming_left",children:(0,pn.jsx)(wo,{title:"\u6211\u7684\u4e50\u62cd\u901a\u7167\u7247"})}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsx)(jo,{text:"\u53bb\u67e5\u770b",type:3,onClick:function(){Bn.forwardMyPhoto(t)}})})]})}):null};function vo(e){var n="";return e.forEach((function(e){if(e.lastSendTime){var t=e.lastSendTime?gt()(e.lastSendTime,"YYYY-MM-DD HH:mm:ss"):"";n||(n=t),n&&t&&gt()(n).isBefore(t)&&(n=e.lastSendTime)}})),n?gt()(n).format("YYYY-MM-DD HH:mm:ss"):""}var xo=function(e){var n=_n(),t=n.deliveryInfo,i=n.basicInfo,r=(i.orderType,i.orderId),o=t.showDelivery,a=t.hasUniqueDelivery,s=t.notDelivery,c=(t.deliveryAddress,t.isAllProviderExpress,null!==s&&void 0!==s&&s.lastSendTimeList?gt()(vo(null===s||void 0===s?void 0:s.lastSendTimeList)).format("YYYY-M-D"):""),l={title:a.length?"\u5269\u4f59\u5305\u88f9\u5f85\u53d1\u8d27":"\u5f85\u53d1\u8d27",subDesc:c?"\u6700\u665a\u4e8e".concat(c,"\u524d\u53d1\u8d27"):"",desc:c?"\u5269\u4f59\u5305\u88f9\u6700\u665a\u4e8e".concat(c,"\u524d\u53d1\u8d27"):"\u5269\u4f59\u5305\u88f9\u5f85\u53d1\u8d27"};return o?!l||null!==a&&void 0!==a&&a.length?(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",children:[(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[(0,pn.jsx)(wo,{title:"\u7269\u6d41\u4fe1\u606f"}),a.map((function(e,n){var t=e.deliveryRemark,i=void 0===t?"":t,r=e.deliveryStatus,o=(e.latestDeliveryTime,e.deliveryMethod);return 1===o?(0,pn.jsxs)(_.View,{className:"up_coming_continue_sub_desc ellipsis",children:[(0,pn.jsxs)(_.View,{className:"up_coming_continue_sub_title",children:[a.length>1||s.show?"\u5305\u88f9"+(n+1)+": ":"",uo[r]]}),i]},String(n)):(0,pn.jsx)(_.View,{className:"up_coming_continue_sub_desc ellipsis",children:a.length>1||s.show?"\u5305\u88f9"+(n+1)+": \u4f9b\u5e94\u5546\u81ea\u884c\u914d\u9001":"\u4f9b\u5e94\u5546\u81ea\u884c\u914d\u9001"},String(n))})),s.show?(0,pn.jsx)(_.View,{className:"up_coming_continue_sub_desc ellipsis",children:l.desc}):null]}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsx)(jo,{text:"\u53bb\u67e5\u770b",type:1,onClick:function(){Bn.forwardExpress({orderId:r})}})})]})}):(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsx)(_.View,{className:"order_detail_up_coming_common",children:(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[(0,pn.jsx)(wo,{title:l.title}),(0,pn.jsx)(_.View,{className:"up_coming_continue_sub_desc",dangerouslySetInnerHTML:{__html:l.subDesc}})]})})}):null},go=function(){var e=_n(),n=(0,gn.f)(3e3),t=e.basicInfo,i=e.operationInfo,r=t.orderId,o=(t.orderType,t.notShowSubUnit),a=void 0===o?[]:o,s=i.find((function(e){return 16===e.operationType})),c=hn(),l=c.doContinuePay,d=function(){l({oid:r}).then((function(e){Bn.doPay(e)}))},u=a.length>0&&a.indexOf("continuepay")>=0;return s&&!u?(0,pn.jsx)(fn.zv,{customStyle:{marginTop:12},children:(0,pn.jsxs)(_.View,{className:"order_detail_up_coming_common",children:[(0,pn.jsxs)(_.View,{className:"up_coming_left",children:[(0,pn.jsx)(wo,{title:"\u53d1\u7968\u914d\u9001\u8d39\u5f85\u652f\u4ed8",subTitle:"\xa510"}),(0,pn.jsx)(_.View,{className:"up_coming_continue_sub_desc",children:"\u652f\u4ed8\u914d\u9001\u8d39\u540e\uff0c\u5c06\u4e3a\u4f60\u914d\u9001\u7eb8\u8d28\u53d1\u7968"})]}),(0,pn.jsx)(_.View,{className:"up_coming_right",children:(0,pn.jsx)(jo,{text:"\u53bb\u652f\u4ed8",type:1,onClick:function(){return n(d)}})})]})}):null},jo=function(e){var n=e.type,t=e.text,i="";return 1===n?i="up_coming_linear":2===n?i="up_coming_blue_button":3===n?i="up_coming_border_button border1px":4===n&&(i="up_coming_disable_button"),(0,pn.jsx)(_.View,(0,v.Z)((0,v.Z)({className:"order_detail_up_coming_button ".concat(i)},e),{},{"data-testid":Ie.toCheck,children:(0,pn.jsx)(_.Text,{children:t})}))},wo=function(e){var n=e.title,t=e.subTitle,i=e.className;return(0,pn.jsxs)(_.View,{className:"up_coming_title_view ".concat(i||""),children:[(0,pn.jsx)(_.Text,{className:"up_coming_title",children:n||"\u53bb\u652f\u4ed8"}),t?(0,pn.jsx)(_.Text,{className:"up_coming_sub_title",children:t}):null]})};function No(e){if(gt().extend(Li()),e<0)return"00:00:00";var n=gt().duration(1e3*e).hours(),t=gt().duration(1e3*e).minutes(),i=gt().duration(1e3*e).seconds();n<10&&(n="0"+n),t<10&&(t="0"+t),i<10&&(i="0"+i);var r=n+":"+t+":"+i;return r}function yo(){var e=_n(),n=e.basicInfo,t=n.refund,i=t||{},r=i.refundDesc;return r?(0,pn.jsxs)(_.View,{className:"ottd_order_detail_forbid",children:[(0,pn.jsx)(_.View,{className:"forbid_icon",children:(0,pn.jsx)(_.View,{className:"icon-time_alarm"})}),(0,pn.jsx)(_.Text,{children:r})]}):null}function To(e){var n=e.items;return(0,pn.jsx)(_.View,{className:"order_detail_wifisubscription_layer_wrap",style:{minHeight:"20%",maxHeight:"80%",width:"100%"},children:(0,pn.jsxs)(_.View,{className:"layer_view order_detail_padding_horizontal_16",children:[n.map((function(e,n){return(0,pn.jsx)(Io,{info:e},n+"")})),(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"remark",children:"*\u4e0a\u8ff0\u65f6\u95f4\u4e3a\u5317\u4eac\u65f6\u95f4"})})]})})}function Io(e){var n=e.info,t=n.renewAmt,i=n.userDate,r=n.endDate,o=n.renewStatus,a=n.renewStatusDesc,s=n.renewTime,c={3:"#F63B2E",1:"#00B87A",2:"#00B87A"},l=gt()(r),d=l.diff(gt()(i),"day")+1,u={color:c[o]};return(0,pn.jsxs)(_.View,{style:{marginBottom:16},children:[(0,pn.jsxs)(_.View,{className:"layer_item_title",children:[(0,pn.jsx)(_.Text,{className:"layer_item_title_text",children:"\u7eed\u8ba2"}),(0,pn.jsx)(_.Text,{style:u,className:"layer_item_title_desc",children:a})]}),(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7eed\u8ba2\u65e5\u671f"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:i+"\u81f3"+r+" ("+d+"\u5929)"})}}),(0,pn.jsx)(_.View,{className:"paddingBottom10"}),(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7eed\u8ba2\u91d1\u989d"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:"\xa5"+t})}}),(0,pn.jsx)(_.View,{className:"paddingBottom10"}),(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7533\u8bf7\u65e5\u671f"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:s})}}),(0,pn.jsx)(bo,{})]})}function bo(){return(0,pn.jsx)(_.View,{style:{borderBottom:"1px solid #eeeeee",height:0,width:"100%",marginTop:"12px"}})}var So=fn.gk.showPopup;function Vo(){var e=_n(),n=e.renewInfo,t=n||{},i=t.records;return i?i&&!i.length?null:(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12},children:i.map((function(e,n){return(0,pn.jsx)(Co,{info:e},e.resourceId+n+"")}))}):null}function Co(e){var n=e.info,t=n.resourceName,i=n.items,r=i&&i[0],o=r.renewStatus,a=r.renewStatusDesc,s={3:"#F63B2E",1:"#00B87A",2:"#00B87A"},c={color:s[o]},l=(0,pn.jsx)(To,{items:i}),d=function(){So({title:"\u7eed\u8ba2\u8bb0\u5f55",children:l})};return(0,pn.jsxs)(_.View,{className:"order_detail_wifisubscription_wrap order_detail_padding_horizontal_16",children:[(0,pn.jsxs)(_.View,{className:"title",children:[(0,pn.jsx)(_.Text,{className:"title_text",children:t}),(0,pn.jsx)(_.Text,{style:c,className:"title_desc",children:a})]}),(0,pn.jsx)(ko,{info:r}),i&&i.length>1?(0,pn.jsx)(Eo,{openAction:function(){return d()}}):null]})}function ko(e){var n=e.info,t=n.renewAmt,i=n.userDate,r=n.endDate,o=n.renewTime,a=gt()(r),s=a.diff(gt()(i),"day")+1;return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7eed\u8ba2\u65e5\u671f"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:i+"\u81f3"+r+" ("+s+"\u5929)"})}}),(0,pn.jsx)(_.View,{className:"paddingBottom5"}),(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7eed\u8ba2\u91d1\u989d"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:"\xa5"+t})}}),(0,pn.jsx)(_.View,{className:"paddingBottom5"}),(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u7533\u8bf7\u65e5\u671f"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"ottd_wifi_label_right_title",children:o})}}),(0,pn.jsx)(_.View,{className:"paddingBottom5"})]})}function Eo(e){var n=e.openAction;return(0,pn.jsxs)(_.View,{className:"btn",onClick:n,children:[(0,pn.jsx)(_.Text,{className:"btn_text",children:"\u5168\u90e8\u7eed\u8ba2\u8bb0\u5f55"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})}var Ro={1:"\u5411\u5bfc",2:"\u53f8\u673a",3:"\u5411\u5bfc\u517c\u53f8\u673a"},Po={male:"(\u7537)",female:"(\u5973)"},Do=function(e){var n={};switch(null===e||void 0===e?void 0:e.content){case"\u91d1\u724c":n.levelType="gold",n.imgUrl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/gold_guide.png";break;case"\u94f6\u724c":n.levelType="silver",n.imgUrl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/silver_guide.png";break;case"\u94dc\u724c":n.levelType="bronze",n.imgUrl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/copper_guide.png";break;default:}return n};function Oo(e){var n=_n(),t=(0,u.useState)((function(){var e,t,i,r=null===n||void 0===n||null===(e=n.basicInfo)||void 0===e?void 0:e.backOrderStatus,o=null===n||void 0===n||null===(t=n.basicInfo)||void 0===t?void 0:t.orderStatusNew,a=null===n||void 0===n||null===(i=n.basicInfo)||void 0===i?void 0:i.useDatePrompt,s=[6,10].indexOf(r)>=0;return s=s||[18,19,21].indexOf(o)>=0,s=s||20===o&&3===a,s})),i=(0,h.Z)(t,2),r=i[0],o=i[1],a=n.orderInfo,s=n.basicInfo,c=null===s||void 0===s?void 0:s.districtId,l=te(null===a||void 0===a?void 0:a.product),d=l.guideInfos,m=l.guideManager;return null!==d&&void 0!==d&&d.length?(0,pn.jsxs)(fn.Q4,{customStyle:{marginTop:12},children:[(0,pn.jsxs)(_.View,{className:"order_detail_guide_info_contain",style:r?{maxHeight:72}:{},children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"head",children:(0,pn.jsx)(_.Text,{className:"head_text",children:"\u53f8\u5bfc\u4fe1\u606f"})})}),(0,pn.jsx)(_.View,{className:"padding_bottom",children:d.map((function(n,t){return(0,u.createElement)(Ao,(0,v.Z)((0,v.Z)({},n),{},{key:String(t),hideBorder:(null===d||void 0===d?void 0:d.length)===t+1,districtId:c},e))}))}),(0,pn.jsx)(Uo,(0,v.Z)((0,v.Z)({guideManager:m},e),{},{isFold:r}))]}),(0,pn.jsxs)(_.View,{className:"order_detail_guide_info_fold_action_wrap",onClick:function(){return o((function(e){return!e}))},"data-testid":Ie.orderFolder,children:[(0,pn.jsx)(_.Text,{className:"fold_action_text",children:r?"\u5c55\u5f00":"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:r?"icon-DropDown":"icon-DropUp"})]})]}):null}function Ao(e){var n=mn.useActions(),t=n.doGetAdvisorShopMember,i=e.serviceDate,r=e.guideDetails,o=void 0===r?[]:r,a=e.vehicles,s=e.hideBorder,c=e.isNew,l=e.districtId,d=(0,u.useState)([]),m=(0,h.Z)(d,2),f=m[0],p=m[1],x=null===l||void 0===l?void 0:l.toString();return(0,u.useEffect)((function(){if(null!==o&&void 0!==o&&o.length){var e=[];x&&e.push({key:"topCityId",value:x});var n=[];o.forEach((function(e){return n.push({guideId:null===e||void 0===e?void 0:e.advisorId})}));var i={sceneCode:"guide_order_detail",headTagList:e,guideList:n,needTag:!0,needLeader:!0};t(i).then((function(e){var n=(null===e||void 0===e?void 0:e.memberDetailList)||[],t=[];n.forEach((function(e){var n,i,r={guideId:null===e||void 0===e?void 0:e.guideId,leaderGuideId:null===e||void 0===e||null===(n=e.leaderInfo)||void 0===n?void 0:n.guideId},o=null===e||void 0===e||null===(i=e.tagList)||void 0===i?void 0:i.find((function(e){return"member_level"===(null===e||void 0===e?void 0:e.group)}));if(o){var a=Do(o);r=(0,v.Z)((0,v.Z)({},r),a)}t.push(r)})),p(t)})).catch((function(e){console.log(e)}))}}),[o,p]),(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"guide_info_item_bold",style:c?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u670d\u52a1\u65f6\u95f4"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:i})}})}),(0,pn.jsx)(_.View,{children:o.map((function(e,n){var t=e.name,i=e.gender,r=e.phoneNum,a=e.serviceLanguage,s=e.guideType,l=e.advisorId,d=f.find((function(e){return String(e.guideId)===String(l)}));return(0,pn.jsxs)(_.View,{children:[(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:Ro[s]})},renderCenter:function(){return(0,pn.jsxs)(_.View,{className:"guide_service_wrap",children:[(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:t+Po[i]}),(0,pn.jsx)(Zo,{currentGuide:d})]})},renderRight:function(){return(0,pn.jsx)(Fo,{currentGuide:d,advisorId:l,cityId:x})}})}),r?(0,pn.jsx)(_.View,{style:c?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8054\u7cfb\u7535\u8bdd"})},renderCenter:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:r})},renderRight:function(){return(0,pn.jsx)(_.View,{onClick:function(){return Gn().makePhoneCall({phoneNumber:r})},className:"tel_icon",children:(0,pn.jsx)(_.View,{className:"icon-Phone"})})}})}):null,a?(0,pn.jsx)(_.View,{style:c?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u670d\u52a1\u8bed\u8a00"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:a})}})}):null]}),o.length===n+1?null:(0,pn.jsx)(_.View,{className:"border_bottom_wrap",children:(0,pn.jsx)(Lo,{})})]},String(n))}))}),null!==a&&void 0!==a&&a.length?(0,pn.jsx)(_.View,{style:c?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8f66\u8f86\u4fe1\u606f"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:a.join("\u3001")})}})}):null,s?null:(0,pn.jsx)(_.View,{className:"border_bottom_wrap",children:(0,pn.jsx)(Lo,{})})]})}function Lo(){return(0,pn.jsx)(_.View,{className:"border_bottom"})}function Uo(e){var n=e.guideManager,t=e.isNew,i=e.isFold,r=n.name,o=n.mobile,a=n.weChatId;return r?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Lo,{}),(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.View,{className:"leader_tips ".concat(i&&"over1line_ellipsis"),style:t?{paddingTop:8,paddingBottom:4}:{},children:(0,pn.jsx)(_.Text,{className:"leader_text",children:"\u5982\u8054\u7cfb\u4e0d\u5230\u670d\u52a1\u4eba\u5458\u6216\u56e0\u8bed\u8a00\u5dee\u5f02\u65e0\u6cd5\u4ea4\u6d41,\u53ef\u4e0e\u5411\u5bfc\u8d1f\u8d23\u4eba\u8054\u7cfb"})}),(0,pn.jsx)(_.View,{style:t?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u5411\u5bfc\u8d1f\u8d23\u4eba"})},renderRight:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:r})}})}),o?(0,pn.jsx)(_.View,{style:t?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u8054\u7cfb\u7535\u8bdd"})},renderCenter:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:o})},renderRight:function(){return(0,pn.jsx)(_.View,{onClick:function(){return Gn().makePhoneCall({phoneNumber:o})},className:"tel_icon",children:(0,pn.jsx)(_.View,{className:"icon-Phone"})})}})}):null,a?(0,pn.jsx)(_.View,{style:t?{paddingTop:4,paddingBottom:4}:{},children:(0,pn.jsx)(fn.AJ,{renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:"\u5fae\u4fe1\u53f7"})},renderCenter:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_right_desc",children:a})},renderRight:function(){return null}})}):null]})]}):null}var Zo=u.memo((function(e){var n=e.currentGuide;return null!==n&&void 0!==n&&n.imgUrl?(0,pn.jsx)(_.Image,{className:"guide_service_level",src:n.imgUrl,mode:"aspectFit"}):null})),Mo=function(e,n,t){var i=(null===f.__global||void 0===f.__global?void 0:f.__global.env)||"prd",r=t?"&cityId=".concat(t):"";switch(i){case"fat":return"https://m.fws.qa.nt.ctripcorp.com/webapp/taro/pages/tnt/detail/sub-guide-detail/index?guideId=".concat(e,"&subadvisorId=").concat(n).concat(r);default:return"https://m.ctrip.com/webapp/taro/pages/tnt/detail/sub-guide-detail/index?guideId=".concat(e,"&subadvisorId=").concat(n).concat(r)}},Fo=u.memo((function(e){var n=e.currentGuide,t=e.advisorId,i=e.cityId;return void 0===(null===n||void 0===n?void 0:n.leaderGuideId)?null:(0,pn.jsxs)(_.Text,{className:"guide_service_info_detail",onClick:function(){var e=Mo(null===n||void 0===n?void 0:n.leaderGuideId,t,i);(0,Zn.mi)({targetPageURI:e})},children:["\u53f8\u5bfc\u8be6\u60c5",(0,pn.jsx)(_.Text,{className:"icon-right"})]})})),Bo=[{einitial:"C",id:46,name:"\u4e2d\u56fd\u5927\u9646",scode:"CN"},{einitial:"H",id:92,name:"\u4e2d\u56fd\u9999\u6e2f",scode:"HK"},{einitial:"M",id:141,name:"\u4e2d\u56fd\u6fb3\u95e8",scode:"MO"},{einitial:"T",id:218,name:"\u4e2d\u56fd\u53f0\u6e7e",scode:"TW"},{einitial:"U",id:223,name:"\u7f8e\u56fd",scode:"US"},{einitial:"U",id:75,name:"\u82f1\u56fd",scode:"GB"},{einitial:"J",id:109,name:"\u65e5\u672c",scode:"JP"},{einitial:"C",id:36,name:"\u52a0\u62ff\u5927",scode:"CA"},{einitial:"F",id:73,name:"\u6cd5\u56fd",scode:"FR"},{einitial:"K",id:117,name:"\u97e9\u56fd",scode:"KR"},{einitial:"G",id:55,name:"\u5fb7\u56fd",scode:"DE"},{einitial:"D",id:56,name:"\u5409\u5e03\u63d0",scode:"DJ"},{einitial:"D",id:57,name:"\u4e39\u9ea6",scode:"DK"},{einitial:"D",id:58,name:"\u591a\u7c73\u5c3c\u514b",scode:"DM"},{einitial:"D",id:59,name:"\u591a\u7c73\u5c3c\u52a0",scode:"DO"},{einitial:"A",id:60,name:"\u963f\u5c14\u53ca\u5229\u4e9a",scode:"DZ"},{einitial:"E",id:61,name:"\u5384\u74dc\u591a\u5c14",scode:"EC"},{einitial:"E",id:62,name:"\u7231\u6c99\u5c3c\u4e9a",scode:"EE"},{einitial:"E",id:63,name:"\u57c3\u53ca",scode:"EG"},{einitial:"W",id:64,name:"\u897f\u6492\u54c8\u62c9",scode:"EH"},{einitial:"E",id:65,name:"\u5384\u7acb\u7279\u91cc\u4e9a",scode:"ER"},{einitial:"S",id:66,name:"\u897f\u73ed\u7259",scode:"ES"},{einitial:"E",id:67,name:"\u57c3\u585e\u4fc4\u6bd4\u4e9a",scode:"ET"},{einitial:"F",id:68,name:"\u82ac\u5170",scode:"FI"},{einitial:"F",id:69,name:"\u6590\u6d4e",scode:"FJ"},{einitial:"F",id:70,name:"\u798f\u514b\u5170\u7fa4\u5c9b\uff08\u9a6c\u5c14\u7ef4\u7eb3\u65af\uff09",scode:"FK"},{einitial:"M",id:71,name:"\u5bc6\u514b\u7f57\u5c3c\u897f\u4e9a",scode:"FM"},{einitial:"F",id:72,name:"\u6cd5\u7f57\u7fa4\u5c9b",scode:"FO"},{einitial:"C",id:37,name:"\u79d1\u79d1\u65af\uff08\u57fa\u6797\uff09\u7fa4\u5c9b",scode:"CC"},{einitial:"C",id:38,name:"\u521a\u679c\uff08\u91d1\uff09",scode:"CD"},{einitial:"C",id:39,name:"\u4e2d\u975e",scode:"CF"},{einitial:"C",id:40,name:"\u521a\u679c\uff08\u5e03\uff09",scode:"CG"},{einitial:"S",id:41,name:"\u745e\u58eb",scode:"CH"},{einitial:"C",id:42,name:"\u79d1\u7279\u8fea\u74e6",scode:"CI"},{einitial:"C",id:43,name:"\u5e93\u514b\u7fa4\u5c9b",scode:"CK"},{einitial:"C",id:44,name:"\u667a\u5229",scode:"CL"},{einitial:"C",id:45,name:"\u5580\u9ea6\u9686",scode:"CM"},{einitial:"C",id:47,name:"\u54e5\u4f26\u6bd4\u4e9a",scode:"CO"},{einitial:"C",id:48,name:"\u54e5\u65af\u8fbe\u9ece\u52a0",scode:"CR"},{einitial:"S",id:49,name:"\u585e\u5c14\u7ef4\u4e9a",scode:"CS"},{einitial:"C",id:50,name:"\u53e4\u5df4",scode:"CU"},{einitial:"C",id:51,name:"\u4f5b\u5f97\u89d2",scode:"CV"},{einitial:"C",id:52,name:"\u5723\u8bde\u5c9b",scode:"CX"},{einitial:"C",id:53,name:"\u585e\u6d66\u8def\u65af",scode:"CY"},{einitial:"C",id:54,name:"\u6377\u514b",scode:"CZ"},{einitial:"A",id:1,name:"\u5b89\u9053\u5c14",scode:"AD"},{einitial:"U",id:2,name:"\u963f\u8054\u914b",scode:"AE"},{einitial:"A",id:3,name:"\u963f\u5bcc\u6c57",scode:"AF"},{einitial:"A",id:4,name:"\u5b89\u63d0\u74dc\u548c\u5df4\u5e03\u8fbe",scode:"AG"},{einitial:"A",id:5,name:"\u5b89\u572d\u62c9",scode:"AI"},{einitial:"A",id:6,name:"\u963f\u5c14\u5df4\u5c3c\u4e9a",scode:"AL"},{einitial:"A",id:7,name:"\u4e9a\u7f8e\u5c3c\u4e9a",scode:"AM"},{einitial:"N",id:8,name:"\u8377\u5c5e\u5b89\u7684\u5217\u65af",scode:"AN"},{einitial:"A",id:9,name:"\u5b89\u54e5\u62c9",scode:"AO"},{einitial:"A",id:10,name:"\u5357\u6781\u6d32",scode:"AQ"},{einitial:"A",id:11,name:"\u963f\u6839\u5ef7",scode:"AR"},{einitial:"A",id:12,name:"\u7f8e\u5c5e\u8428\u6469\u4e9a",scode:"AS"},{einitial:"A",id:13,name:"\u5965\u5730\u5229",scode:"AT"},{einitial:"A",id:14,name:"\u6fb3\u5927\u5229\u4e9a",scode:"AU"},{einitial:"A",id:15,name:"\u963f\u9c81\u5df4",scode:"AW"},{einitial:"A",id:16,name:"\u963f\u585e\u62dc\u7586",scode:"AZ"},{einitial:"B",id:17,name:"\u6ce2\u9ed1",scode:"BA"},{einitial:"B",id:18,name:"\u5df4\u5df4\u591a\u65af",scode:"BB"},{einitial:"B",id:19,name:"\u5b5f\u52a0\u62c9\u56fd",scode:"BD"},{einitial:"B",id:20,name:"\u6bd4\u5229\u65f6",scode:"BE"},{einitial:"B",id:21,name:"\u5e03\u57fa\u7eb3\u6cd5\u7d22",scode:"BF"},{einitial:"B",id:22,name:"\u4fdd\u52a0\u5229\u4e9a",scode:"BG"},{einitial:"B",id:23,name:"\u5df4\u6797",scode:"BH"},{einitial:"B",id:24,name:"\u5e03\u9686\u8fea",scode:"BI"},{einitial:"B",id:25,name:"\u8d1d\u5b81",scode:"BJ"},{einitial:"B",id:26,name:"\u767e\u6155\u5927",scode:"BM"},{einitial:"B",id:27,name:"\u6587\u83b1",scode:"BN"},{einitial:"B",id:28,name:"\u73bb\u5229\u7ef4\u4e9a",scode:"BO"},{einitial:"B",id:29,name:"\u5df4\u897f",scode:"BR"},{einitial:"B",id:30,name:"\u5df4\u54c8\u9a6c",scode:"BS"},{einitial:"B",id:31,name:"\u4e0d\u4e39",scode:"BT"},{einitial:"B",id:32,name:"\u5e03\u7ef4\u5c9b",scode:"BV"},{einitial:"B",id:33,name:"\u535a\u8328\u74e6\u7eb3",scode:"BW"},{einitial:"B",id:34,name:"\u767d\u4fc4\u7f57\u65af",scode:"BY"},{einitial:"B",id:35,name:"\u4f2f\u5229\u5179",scode:"BZ"},{einitial:"N",id:142,name:"\u5317\u9a6c\u91cc\u4e9a\u7eb3",scode:"MP"},{einitial:"M",id:143,name:"\u9a6c\u63d0\u5c3c\u514b",scode:"MQ"},{einitial:"M",id:144,name:"\u6bdb\u91cc\u5854\u5c3c\u4e9a",scode:"MR"},{einitial:"M",id:145,name:"\u8499\u7279\u585e\u62c9\u7279",scode:"MS"},{einitial:"M",id:146,name:"\u9a6c\u8033\u4ed6",scode:"MT"},{einitial:"M",id:147,name:"\u6bdb\u91cc\u6c42\u65af",scode:"MU"},{einitial:"M",id:148,name:"\u9a6c\u5c14\u4ee3\u592b",scode:"MV"},{einitial:"M",id:149,name:"\u9a6c\u62c9\u7ef4",scode:"MW"},{einitial:"M",id:150,name:"\u58a8\u897f\u54e5",scode:"MX"},{einitial:"M",id:151,name:"\u9a6c\u6765\u897f\u4e9a",scode:"MY"},{einitial:"M",id:152,name:"\u83ab\u6851\u6bd4\u514b",scode:"MZ"},{einitial:"N",id:153,name:"\u7eb3\u7c73\u5c3c\u4e9a",scode:"NA"},{einitial:"N",id:154,name:"\u65b0\u5580\u91cc\u591a\u5c3c\u4e9a",scode:"NC"},{einitial:"N",id:155,name:"\u5c3c\u65e5\u5c14",scode:"NE"},{einitial:"N",id:156,name:"\u8bfa\u798f\u514b\u5c9b",scode:"NF"},{einitial:"N",id:157,name:"\u5c3c\u65e5\u5229\u4e9a",scode:"NG"},{einitial:"N",id:158,name:"\u5c3c\u52a0\u62c9\u74dc",scode:"NI"},{einitial:"N",id:159,name:"\u8377\u5170",scode:"NL"},{einitial:"N",id:160,name:"\u632a\u5a01",scode:"NO"},{einitial:"N",id:161,name:"\u5c3c\u6cca\u5c14",scode:"NP"},{einitial:"N",id:162,name:"\u7459\u9c81",scode:"NR"},{einitial:"N",id:163,name:"\u7ebd\u57c3",scode:"NU"},{einitial:"N",id:164,name:"\u65b0\u897f\u5170",scode:"NZ"},{einitial:"O",id:165,name:"\u963f\u66fc",scode:"OM"},{einitial:"P",id:166,name:"\u5df4\u62ff\u9a6c",scode:"PA"},{einitial:"P",id:167,name:"\u79d8\u9c81",scode:"PE"},{einitial:"F",id:168,name:"\u6cd5\u5c5e\u6ce2\u5229\u5c3c\u897f\u4e9a",scode:"PF"},{einitial:"P",id:169,name:"\u5df4\u5e03\u4e9a\u65b0\u51e0\u5185\u4e9a",scode:"PG"},{einitial:"P",id:170,name:"\u83f2\u5f8b\u5bbe",scode:"PH"},{einitial:"P",id:171,name:"\u5df4\u57fa\u65af\u5766",scode:"PK"},{einitial:"P",id:172,name:"\u6ce2\u5170",scode:"PL"},{einitial:"S",id:173,name:"\u5723\u76ae\u57c3\u5c14\u548c\u5bc6\u514b\u9686",scode:"PM"},{einitial:"P",id:174,name:"\u76ae\u7279\u51ef\u6069",scode:"PN"},{einitial:"P",id:175,name:"\u6ce2\u591a\u9ece\u5404",scode:"PR"},{einitial:"P",id:176,name:"\u5df4\u52d2\u65af\u5766",scode:"PS"},{einitial:"P",id:177,name:"\u8461\u8404\u7259",scode:"PT"},{einitial:"P",id:178,name:"\u5e15\u52b3",scode:"PW"},{einitial:"P",id:179,name:"\u5df4\u62c9\u572d",scode:"PY"},{einitial:"Q",id:180,name:"\u5361\u5854\u5c14",scode:"QA"},{einitial:"R",id:181,name:"\u7559\u5c3c\u6c6a",scode:"RE"},{einitial:"R",id:182,name:"\u7f57\u9a6c\u5c3c\u4e9a",scode:"RO"},{einitial:"R",id:183,name:"\u4fc4\u7f57\u65af",scode:"RU"},{einitial:"R",id:184,name:"\u5362\u65fa\u8fbe",scode:"RW"},{einitial:"S",id:185,name:"\u6c99\u7279\u963f\u62c9\u4f2f",scode:"SA"},{einitial:"S",id:186,name:"\u6240\u7f57\u95e8\u7fa4\u5c9b",scode:"SB"},{einitial:"S",id:187,name:"\u585e\u820c\u5c14",scode:"SC"},{einitial:"S",id:188,name:"\u82cf\u4e39",scode:"SD"},{einitial:"S",id:189,name:"\u745e\u5178",scode:"SE"},{einitial:"S",id:190,name:"\u65b0\u52a0\u5761",scode:"SG"},{einitial:"S",id:191,name:"\u5723\u8d6b\u52d2\u62ff",scode:"SH"},{einitial:"S",id:192,name:"\u65af\u6d1b\u6587\u5c3c\u4e9a",scode:"SI"},{einitial:"S",id:193,name:"\u65af\u74e6\u5c14\u5df4\u5c9b\u548c\u626c\u9a6c\u5ef6\u5c9b",scode:"SJ"},{einitial:"S",id:194,name:"\u65af\u6d1b\u4f10\u514b",scode:"SK"},{einitial:"S",id:195,name:"\u585e\u62c9\u5229\u6602",scode:"SL"},{einitial:"S",id:196,name:"\u5723\u9a6c\u529b\u8bfa",scode:"SM"},{einitial:"S",id:197,name:"\u585e\u5185\u52a0\u5c14",scode:"SN"},{einitial:"S",id:198,name:"\u7d22\u9a6c\u91cc",scode:"SO"},{einitial:"S",id:199,name:"\u82cf\u91cc\u5357",scode:"SR"},{einitial:"S",id:200,name:"\u5723\u591a\u7f8e\u548c\u666e\u6797\u897f\u6bd4",scode:"ST"},{einitial:"E",id:201,name:"\u8428\u5c14\u74e6\u591a",scode:"SV"},{einitial:"S",id:202,name:"\u53d9\u5229\u4e9a",scode:"SY"},{einitial:"S",id:203,name:"\u65af\u5a01\u58eb\u5170",scode:"SZ"},{einitial:"T",id:204,name:"\u7279\u514b\u65af\u548c\u51ef\u79d1\u65af\u7fa4\u5c9b",scode:"TC"},{einitial:"C",id:205,name:"\u4e4d\u5f97",scode:"TD"},{einitial:"F",id:206,name:"\u6cd5\u5c5e\u5357\u90e8\u9886\u571f",scode:"TF"},{einitial:"T",id:207,name:"\u591a\u54e5",scode:"TG"},{einitial:"T",id:208,name:"\u6cf0\u56fd",scode:"TH"},{einitial:"T",id:209,name:"\u5854\u5409\u514b\u65af\u5766",scode:"TJ"},{einitial:"T",id:210,name:"\u6258\u514b\u52b3",scode:"TK"},{einitial:"T",id:211,name:"\u571f\u5e93\u66fc\u65af\u5766",scode:"TM"},{einitial:"T",id:212,name:"\u7a81\u5c3c\u65af",scode:"TN"},{einitial:"T",id:213,name:"\u6c64\u52a0",scode:"TO"},{einitial:"E",id:214,name:"\u4e1c\u5e1d\u6c76",scode:"TP"},{einitial:"T",id:215,name:"\u571f\u8033\u5176",scode:"TR"},{einitial:"T",id:216,name:"\u7279\u7acb\u5c3c\u8fbe\u548c\u591a\u5df4\u54e5",scode:"TT"},{einitial:"T",id:217,name:"\u56fe\u74e6\u5362",scode:"TV"},{einitial:"K",id:118,name:"\u79d1\u5a01\u7279",scode:"KW"},{einitial:"C",id:119,name:"\u5f00\u66fc\u7fa4\u5c9b",scode:"KY"},{einitial:"K",id:120,name:"\u54c8\u8428\u514b\u65af\u5766",scode:"KZ"},{einitial:"L",id:121,name:"\u8001\u631d",scode:"LA"},{einitial:"L",id:122,name:"\u9ece\u5df4\u5ae9",scode:"LB"},{einitial:"S",id:123,name:"\u5723\u5362\u897f\u4e9a",scode:"LC"},{einitial:"L",id:124,name:"\u5217\u652f\u6566\u58eb\u767b",scode:"LI"},{einitial:"S",id:125,name:"\u65af\u91cc\u5170\u5361",scode:"LK"},{einitial:"L",id:126,name:"\u5229\u6bd4\u91cc\u4e9a",scode:"LR"},{einitial:"L",id:127,name:"\u83b1\u7d22\u6258",scode:"LS"},{einitial:"L",id:128,name:"\u7acb\u9676\u5b9b",scode:"LT"},{einitial:"L",id:129,name:"\u5362\u68ee\u5821",scode:"LU"},{einitial:"L",id:130,name:"\u62c9\u8131\u7ef4\u4e9a",scode:"LV"},{einitial:"L",id:131,name:"\u5229\u6bd4\u4e9a",scode:"LY"},{einitial:"M",id:132,name:"\u6469\u6d1b\u54e5",scode:"MA"},{einitial:"M",id:133,name:"\u6469\u7eb3\u54e5",scode:"MC"},{einitial:"M",id:134,name:"\u6469\u5c14\u591a\u74e6",scode:"MD"},{einitial:"M",id:135,name:"\u9a6c\u8fbe\u52a0\u65af\u52a0",scode:"MG"},{einitial:"M",id:136,name:"\u9a6c\u7ecd\u5c14\u7fa4\u5c9b",scode:"MH"},{einitial:"M",id:137,name:"\u524d\u5357\u9a6c\u5176\u987f",scode:"MK"},{einitial:"M",id:138,name:"\u9a6c\u91cc",scode:"ML"},{einitial:"M",id:139,name:"\u7f05\u7538",scode:"MM"},{einitial:"M",id:140,name:"\u8499\u53e4",scode:"MN"},{einitial:"U",id:224,name:"\u4e4c\u62c9\u572d",scode:"UY"},{einitial:"U",id:225,name:"\u4e4c\u5179\u522b\u514b\u65af\u5766",scode:"UZ"},{einitial:"V",id:226,name:"\u68b5\u8482\u5188",scode:"VA"},{einitial:"S",id:227,name:"\u5723\u6587\u68ee\u7279\u548c\u683c\u6797\u7eb3\u4e01\u65af",scode:"VC"},{einitial:"V",id:228,name:"\u59d4\u5185\u745e\u62c9",scode:"VE"},{einitial:"V",id:229,name:"\u82f1\u5c5e\u7ef4\u5c14\u4eac\u7fa4\u5c9b",scode:"VG"},{einitial:"V",id:230,name:"\u7f8e\u5c5e\u7ef4\u5c14\u4eac\u7fa4\u5c9b",scode:"VI"},{einitial:"V",id:231,name:"\u8d8a\u5357",scode:"VN"},{einitial:"V",id:232,name:"\u74e6\u52aa\u963f\u56fe",scode:"VU"},{einitial:"W",id:233,name:"\u74e6\u5229\u65af\u548c\u5bcc\u56fe\u7eb3",scode:"WF"},{einitial:"S",id:234,name:"\u8428\u6469\u4e9a",scode:"WS"},{einitial:"Y",id:235,name:"\u4e5f\u95e8",scode:"YE"},{einitial:"M",id:236,name:"\u9a6c\u7ea6\u7279",scode:"YT"},{einitial:"Y",id:237,name:"\u5357\u65af\u62c9\u592b",scode:"YU"},{einitial:"S",id:238,name:"\u5357\u975e",scode:"ZA"},{einitial:"Z",id:239,name:"\u8d5e\u6bd4\u4e9a",scode:"ZM"},{einitial:"Z",id:240,name:"\u6d25\u5df4\u5e03\u97e6",scode:"ZW"},{einitial:"G",id:76,name:"\u683c\u6797\u7eb3\u8fbe",scode:"GD"},{einitial:"G",id:77,name:"\u683c\u9c81\u5409\u4e9a",scode:"GE"},{einitial:"F",id:78,name:"\u6cd5\u5c5e\u572d\u4e9a\u90a3",scode:"GF"},{einitial:"G",id:79,name:"\u52a0\u7eb3",scode:"GH"},{einitial:"G",id:80,name:"\u76f4\u5e03\u7f57\u9640",scode:"GI"},{einitial:"G",id:81,name:"\u683c\u9675\u5170",scode:"GL"},{einitial:"G",id:82,name:"\u5188\u6bd4\u4e9a",scode:"GM"},{einitial:"G",id:83,name:"\u51e0\u5185\u4e9a",scode:"GN"},{einitial:"G",id:84,name:"\u74dc\u5fb7\u7f57\u666e",scode:"GP"},{einitial:"E",id:85,name:"\u8d64\u9053\u51e0\u5185\u4e9a",scode:"GQ"},{einitial:"G",id:86,name:"\u5e0c\u814a",scode:"GR"},{einitial:"S",id:87,name:"\u5357\u4e54\u6cbb\u4e9a\u5c9b\u548c\u5357\u6851\u5fb7\u97e6\u5947\u5c9b",scode:"GS"},{einitial:"G",id:88,name:"\u5371\u5730\u9a6c\u62c9",scode:"GT"},{einitial:"G",id:89,name:"\u5173\u5c9b",scode:"GU"},{einitial:"G",id:90,name:"\u51e0\u5185\u4e9a\u6bd4\u7ecd",scode:"GW"},{einitial:"G",id:91,name:"\u572d\u4e9a\u90a3",scode:"GY"},{einitial:"H",id:93,name:"\u8d6b\u5fb7\u5c9b\u548c\u9ea6\u514b\u5510\u7eb3\u5c9b",scode:"HM"},{einitial:"H",id:94,name:"\u6d2a\u90fd\u62c9\u65af",scode:"HN"},{einitial:"C",id:95,name:"\u514b\u7f57\u5730\u4e9a",scode:"HR"},{einitial:"H",id:96,name:"\u6d77\u5730",scode:"HT"},{einitial:"H",id:97,name:"\u5308\u7259\u5229",scode:"HU"},{einitial:"I",id:98,name:"\u5370\u5ea6\u5c3c\u897f\u4e9a",scode:"ID"},{einitial:"I",id:99,name:"\u7231\u5c14\u5170",scode:"IE"},{einitial:"I",id:100,name:"\u4ee5\u8272\u5217",scode:"IL"},{einitial:"I",id:101,name:"\u5370\u5ea6",scode:"IN"},{einitial:"B",id:102,name:"\u82f1\u5c5e\u5370\u5ea6\u6d0b\u9886\u5730",scode:"IO"},{einitial:"I",id:103,name:"\u4f0a\u62c9\u514b",scode:"IQ"},{einitial:"I",id:104,name:"\u4f0a\u6717",scode:"IR"},{einitial:"I",id:105,name:"\u51b0\u5c9b",scode:"IS"},{einitial:"I",id:106,name:"\u610f\u5927\u5229",scode:"IT"},{einitial:"J",id:107,name:"\u7259\u4e70\u52a0",scode:"JM"},{einitial:"J",id:108,name:"\u7ea6\u65e6",scode:"JO"},{einitial:"G",id:74,name:"\u52a0\u84ec",scode:"GA"},{einitial:"T",id:219,name:"\u5766\u6851\u5c3c\u4e9a",scode:"TZ"},{einitial:"U",id:220,name:"\u4e4c\u514b\u5170",scode:"UA"},{einitial:"U",id:221,name:"\u4e4c\u5e72\u8fbe",scode:"UG"},{einitial:"U",id:222,name:"\u7f8e\u56fd\u672c\u571f\u5916\u5c0f\u5c9b\u5c7f",scode:"UM"},{einitial:"K",id:110,name:"\u80af\u5c3c\u4e9a",scode:"KE"},{einitial:"K",id:111,name:"\u5409\u5c14\u5409\u65af\u65af\u5766",scode:"KG"},{einitial:"C",id:112,name:"\u67ec\u57d4\u5be8",scode:"KH"},{einitial:"K",id:113,name:"\u57fa\u91cc\u5df4\u65af",scode:"KI"},{einitial:"C",id:114,name:"\u79d1\u6469\u7f57",scode:"KM"},{einitial:"S",id:115,name:"\u5723\u57fa\u8328\u548c\u5c3c\u7ef4\u65af",scode:"KN"},{einitial:"K",id:116,name:"\u671d\u9c9c",scode:"KP"}];function Ho(e){var n=(Bo||[]).find((function(n){return n.scode===e}));return null===n||void 0===n?void 0:n.name}function Go(e){var n=e.isTicket;return n?(0,pn.jsx)(qo,(0,v.Z)({},e)):(0,pn.jsx)(zo,(0,v.Z)({},e))}var qo=function(e){var n,t=e.passengers,i=e.isNew,r=e.isRecommendPage,o=void 0!==r&&r,a=(t||[]).length,s="",c=[];(t||[]).forEach((function(e){((null===e||void 0===e?void 0:e.passList)||[]).forEach((function(e){var n=e.name||e.enName||"";null!==e&&void 0!==e&&e.isRefunded&&(n+="(\u5df2\u9000\u8ba2)"),c.push(n)}))})),s=c.join(" ");var l=_n(),d=l.basicInfo,m=l.orderInfo,f=(d.orderId,null===m||void 0===m||null===(n=m.modifyCetificateInfo)||void 0===n?void 0:n.modifyCertificatesDesc),p=(c||[]).length>1,v=(0,u.useState)(!p),x=(0,h.Z)(v,2),g=x[0],j=x[1],w=function(e){var n=(null===e||void 0===e?void 0:e.name)||"",t=(null===e||void 0===e?void 0:e.enName)||"";return null!==e&&void 0!==e&&e.isRefunded?"".concat(n," ").concat(t)+"(\u5df2\u9000\u8ba2)":"".concat(n," ").concat(t)};return c.length?g?(0,pn.jsxs)(_.View,{className:Yo(o),style:i?{paddingBottom:6}:{},children:[f?(0,pn.jsxs)(_.View,{className:"modify_tips",children:[(0,pn.jsx)(_.View,{style:{paddingLeft:10,paddingTop:2},children:(0,pn.jsx)(_.View,{className:"icon-Warn"})}),(0,pn.jsx)(_.View,{style:{flex:1,flexShrink:1,paddingLeft:5,paddingRight:5},children:(0,pn.jsx)(_.Text,{className:"modify_text",children:f})})]}):null,(0,pn.jsx)(fn.e2,{className:o?"recommend_page_label_center_right":"",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_traveler_title ".concat(o?"recommend_travel_title":""),children:"\u51fa\u884c\u4eba"})},renderRight:function(){return(0,pn.jsxs)(_.View,{style:{width:"100%"},children:[(0,pn.jsx)(_.View,{className:"passage_right_left",style:{width:"100%"},children:(t||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{className:"".concat(n>0?"margin_top16":""),children:[a>1?(0,pn.jsx)(_.View,{className:"order_detail_traveler_ticket_title ".concat(o?"recommend_travel_title":""),children:e.name}):null,(e.passList||[]).map((function(e,n){var t=e.modifyingName,i=e.modifyingEName,r=e.modifyingCardTypeDesc,s=e.modifyingCardNo,c=t||i||r||s;return(0,pn.jsx)(_.View,{className:"order_detail_travel_contain",style:n>0?{marginTop:12}:{},children:(0,pn.jsxs)(_.View,{className:"pass_contain_left",children:[(0,pn.jsxs)(_.View,{className:$o(o,a),style:c?{color:"#cccccc"}:{},children:[w(e),c?"\uff08\u539f\u51fa\u884c\u4eba\uff09":null]}),e.cardNo?(0,pn.jsxs)(_.View,{className:$o(o),style:c?{color:"#cccccc",marginTop:2}:{marginTop:2},children:[e.cardTypeDesc,e.cardTypeDesc?"\uff1a":"",e.cardNo]}):null,c?(0,pn.jsxs)(_.View,{className:"order_detail_traveler_modify_wrap",children:[(0,pn.jsxs)(_.View,{className:"right_label_text ".concat(a>1?"font_medium":""),children:[t," ",i,c?"\uff08\u6539\u8bc1\u4e2d\u51fa\u884c\u4eba\uff09":null]}),e.cardNo?(0,pn.jsxs)(_.View,{style:{marginTop:2},className:"right_label_text",children:[r,r?"\uff1a":"",s]}):null]}):null,e.phone?(0,pn.jsxs)(_.View,{className:$o(o),style:{marginTop:2},children:[e.phoneCode?e.phoneCode+" ":"",e.phone]}):null]})},n+"")}))]},n+"")}))}),c.length>1?(0,pn.jsxs)(_.View,{className:"order_detail_traveler_more_button",onClick:function(){j(!1)},"data-testid":Ie.travelDetailHide,children:[(0,pn.jsx)(_.Text,{children:"\u6536\u8d77\u8be6\u7ec6\u4fe1\u606f"}),(0,pn.jsx)(_.View,{className:"icon-DropUp"})]}):null]})}})]}):(0,pn.jsx)(_.View,{className:Yo(o),style:i?{paddingBottom:6}:{},children:(0,pn.jsx)(fn.e2,{className:o?"recommend_page_label_center_right":"",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_traveler_title ".concat(o?"recommend_travel_title":""),children:"\u51fa\u884c\u4eba"})},renderRight:function(){return(0,pn.jsxs)(_.View,{className:"label_right_view order_detail_booking_info_passage_right_ticket",children:[(0,pn.jsx)(_.View,{className:"passage_right_left ".concat(o?"recommend_travel_title":""),style:{fontSize:14},children:s.trim()}),(0,pn.jsx)(_.View,{className:"passage_right_right",onClick:function(){j(!0),(null===e||void 0===e?void 0:e.setFold)&&(null===e||void 0===e||e.setFold())},"data-testid":Ie.travelDetailShow,children:(0,pn.jsx)(_.Text,{className:"right_label_text",style:{color:"#006FF6",fontSize:13},children:"\u8be6\u60c5"})})]})}})}):null},zo=function(e){var n=e.passengers,t=e.showTitle,i=e.isNew,r=e.isRecommendPage,o=[];(n||[]).forEach((function(e){o=o.concat(e.value)}));var a=(o||[]).map((function(e){return null!==e&&void 0!==e&&e.isRefunded?((null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.enName)||"")+"(\u5df2\u9000\u8ba2)":(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.enName)})),s=function(e){var n=(null===e||void 0===e?void 0:e.name)||"",t=(null===e||void 0===e?void 0:e.enName)||"";return null!==e&&void 0!==e&&e.isRefunded?"".concat(n," ").concat(t)+"(\u5df2\u9000\u8ba2)":"".concat(n," ").concat(t)},c=a.join("\u3001"),l=(a||[]).length>1,d=(0,u.useState)(!l),m=(0,h.Z)(d,2),f=m[0],p=m[1],v=(n||[]).length>1||t;return o.length?f?(0,pn.jsx)(_.View,{style:i?{paddingBottom:6}:{},children:(0,pn.jsxs)(_.View,{className:Ko(r),children:[(0,pn.jsx)(_.View,{className:"left_label_view",children:(0,pn.jsx)(_.Text,{className:"left_label_text",children:"\u51fa\u884c\u4eba"})}),(0,pn.jsx)(_.View,{className:"label_right_view order_detail_booking_info_passage_right",children:(0,pn.jsx)(_.View,{className:"passage_right_left",children:(n||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{className:n+""==="0"?"":"passenger_view",children:[v?(0,pn.jsx)(_.Text,{className:"ticket_title",children:e.title}):null,(e.value||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{style:0===n?{}:{marginTop:12},children:[e.name||e.enName?(0,pn.jsx)(_.View,{style:f?{fontWeight:500}:{fontWeight:400},className:"".concat(Wo(r)," ").concat(r?"":"pass_name"),children:s(e)}):null,e.phone?(0,pn.jsxs)(_.View,{className:Wo(r),children:[e.phoneCode?e.phoneCode+" ":"",e.phone]}):null,e.cardNo?(0,pn.jsxs)(_.View,{className:Wo(r),children:[e.cardTypeDesc?e.cardTypeDesc+"\uff1a":"",e.cardNo]}):null,e.genderName?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u6027\u522b\uff1a",e.genderName]}):null,e.birthDate?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u751f\u65e5\uff1a",e.birthDate]}):null,Ho(e.nationality)?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u56fd\u7c4d\uff1a",Ho(e.nationality)]}):null,e.nationalityName?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u56fd\u7c4d\u4e2d\u6587\u540d\u79f0\uff1a",e.nationalityName]}):null,e.birthCity?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u51fa\u751f\u5730\uff1a",e.birthCity]}):null,e.idCardTimeLimit?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u8bc1\u4ef6\u6709\u6548\u671f\uff1a",e.idCardTimeLimit]}):null,e.hkMacauLaissezPasser?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u6e2f\u6fb3\u7b7e\u6ce8\u7c7b\u578b\uff1a",e.hkMacauLaissezPasser]}):null,e.weight?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u4f53\u91cd\uff1a",e.weight]}):null,e.height?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u8eab\u9ad8\uff1a",e.height]}):null,e.shoesSize?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u5c3a\u7801\uff1a",e.shoesSize]}):null,e.myopiaDegree?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u8fd1\u89c6\u5ea6\u6570\uff1a",e.myopiaDegree]}):null,e.cardCity?(0,pn.jsxs)(_.View,{className:Wo(r),children:["\u7b7e\u53d1\u5730\uff1a",e.cardCity]}):null]},n+"")}))]},n+"")}))})}),l?(0,pn.jsx)(_.View,{className:"passage_right_right",children:(0,pn.jsx)(_.View,{onClick:function(){p(!1)},style:{color:"#006FF6",fontSize:13},children:"\u6536\u8d77"})}):null]})}):(0,pn.jsxs)(_.View,{className:Ko(r),style:i?{paddingBottom:6}:{},children:[(0,pn.jsx)(_.View,{className:"left_label_view",children:(0,pn.jsx)(_.Text,{className:"left_label_text",children:"\u51fa\u884c\u4eba"})}),(0,pn.jsxs)(_.View,{className:"label_right_view order_detail_booking_info_passage_right",children:[(0,pn.jsx)(_.Text,{className:"passage_right_left ".concat(Wo(r)),children:c.trim()}),(0,pn.jsx)(_.View,{className:"passage_right_right",onClick:function(){p(!0),(null===e||void 0===e?void 0:e.setFold)&&(null===e||void 0===e||e.setFold())},children:(0,pn.jsx)(_.Text,{className:"right_label_text",style:{color:"#006FF6",fontSize:13},children:"\u8be6\u60c5"})})]})]}):null},Yo=function(e){var n="order_detail_booking_info_item order_detail_booking_info_item_spec";return e&&(n+=" recommend_travel_booking_wrap"),n},$o=function(e,n){return e?"order_detail_traveler_desc recommend_travel_title":"order_detail_traveler_desc ".concat(n&&n>1?"font_medium":"")},Ko=function(e){return e?"order_detail_booking_info_passage_wrap recommend_travel_booking_wrap":"order_detail_booking_info_passage_wrap"},Wo=function(e){return e?"right_label_text recommend_travel_title":"right_label_text"};function Qo(e){var n,t=_n(),i=e.isRecommendPage,r=void 0!==i&&i,o=t.contact,a=t.basicInfo,s=a.orderId,c=a.orderType,l=a.notShowSubUnit,d=void 0===l?[]:l,u=o||{},m=u.modifyType,h=u.maxAmendCount,f=u.applyAmendCount,v=!(null===o||void 0===o||!o.phone),x=(null!==o&&void 0!==o&&o.phoneCode?(null===o||void 0===o?void 0:o.phoneCode)+" ":"")+(null===o||void 0===o?void 0:o.phone),g=!!o.osPhone,j=(null!==o&&void 0!==o&&o.osPhoneCode?(null===o||void 0===o?void 0:o.osPhoneCode)+" ":"")+(null===o||void 0===o?void 0:o.osPhone),w=!(null===o||void 0===o||!o.email),N=null===t||void 0===t||null===(n=t.requestParam)||void 0===n?void 0:n.token,y=d.length>0&&d.indexOf("modifycontact")>=0,T=!!m&&!N&&!y;return o?(0,pn.jsx)(_.View,{className:"order_detail_contack_wrap",children:(0,pn.jsx)(fn.AJ,{className:r?"recommend_page_label_center_right":"",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_traveler_title ".concat(r?"recommend_travel_title":""),children:"\u8054\u7cfb\u4fe1\u606f"})},renderCenter:function(){return(0,pn.jsxs)(_.View,{className:r?"recommend_traveler_desc":"",children:[(0,pn.jsx)(_.View,{className:"order_detail_traveler_desc",children:null===o||void 0===o?void 0:o.name}),v?(0,pn.jsx)(_.View,{className:"order_detail_traveler_desc",children:x}):null,g?(0,pn.jsx)(_.View,{className:"order_detail_traveler_desc",children:j}):null,w?(0,pn.jsx)(_.View,{className:"order_detail_traveler_desc",children:null===o||void 0===o?void 0:o.email}):null]})},renderRight:function(){return T?(0,pn.jsx)(_.View,{className:"order_detail_traveler_edit",onClick:function(){h===f?p().showToast({title:null===o||void 0===o?void 0:o.modifyMsg,icon:"none"}):Bn.forwardEditPhone({orderid:s,orderType:c})},children:(0,pn.jsx)(_.Text,{style:0===(null===o||void 0===o?void 0:o.modifyType)?{color:"#aaa"}:{},children:"\u4fee\u6539"})}):null}})}):null}var Jo=function(e){var n=(0,u.useState)(0),t=(0,h.Z)(n,2),i=t[0],r=t[1],o=(0,u.useState)("\u83b7\u53d6\u9a8c\u8bc1\u7801"),a=(0,h.Z)(o,2),s=a[0],c=a[1],l=(0,u.useState)(!1),d=(0,h.Z)(l,2),m=(d[0],d[1],(0,u.useState)("")),f=(0,h.Z)(m,2),p=f[0],v=f[1],x=(0,u.useState)(""),g=(0,h.Z)(x,2),N=g[0],y=g[1],T=e.hideMask,I=e.phone,b=e.isAllQuick,S=e.orderid,V=e.actions,C=e.requestParams,k=V.UPDATE_REQUEST_PARAMS,E=V.UPDATE_PHONE_ENCRYPT,R=V.doCheckCodeSendMsgByPhone,P=V.doCheckCodeCheckPhoneCode,D=V.refreshOrderByContinuePay,O=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,o,a,s,l,d;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=60,e.prev=1,e.next=4,R({orderId:S});case 4:i=e.sent,0===(null===i||void 0===i||null===(t=i.head)||void 0===t?void 0:t.errcode)&&(s=null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.returnCode,l=null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message,0===s?d=setInterval((function(){n--,r(n),0===n&&(clearInterval(d),c("\u83b7\u53d6\u9a8c\u8bc1\u7801"))}),1e3):Tn().showToast({title:l,icon:"none"})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),Tn().showToast({title:"\u7cfb\u7edf\u5f02\u5e38,\u7a0d\u540e\u91cd\u8bd5",icon:"none"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(p.length<6)){e.next=3;break}return y("\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801"),e.abrupt("return");case 3:return n={orderId:S,code:p},e.prev=4,e.next=7,P(n);case 7:i=e.sent,0===(null===i||void 0===i||null===(t=i.head)||void 0===t?void 0:t.errcode)&&(o=null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.returnCode,0===o?(Tn().showToast({title:"\u9a8c\u8bc1\u6210\u529f",icon:"none"}),k(C),E(!0),T(),setTimeout((function(){D()}),2e3)):y("\u9a8c\u8bc1\u7801\u9519\u8bef")),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),Tn().showToast({title:"\u7cfb\u7edf\u5f02\u5e38,\u7a0d\u540e\u91cd\u8bd5",icon:"none"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return(0,pn.jsxs)(_.View,{className:"check_code_contain_wrap check_code_contain",children:[(0,pn.jsx)(_.View,{className:"tips_view",children:(0,pn.jsx)(_.Text,{className:"tips_text",children:"\u4e3a\u4e86\u60a8\u7684\u4fe1\u606f\u5b89\u5168\uff0c\u67e5\u770b\u5b8c\u6574\u4fe1\u606f\uff0c\u9700\u8981\u624b\u673a\u9a8c\u8bc1"})}),(0,pn.jsxs)(_.View,{className:"container",children:[(0,pn.jsxs)(_.View,{className:"phone_view",children:[(0,pn.jsxs)(_.Text,{className:"phone_text",children:[b?"\u8054\u7cfb":"\u53d6\u7968","\u4eba\u624b\u673a"]}),(0,pn.jsx)(_.Text,{className:"phone_text",style:{marginLeft:20},children:I})]}),(0,pn.jsxs)(_.View,{className:"row_view",children:[(0,pn.jsxs)(_.View,{className:"left_view",children:[(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"phone_text",children:"\u9a8c\u8bc1\u7801"})}),(0,pn.jsxs)(_.View,{className:"input_wrap",style:{position:"relative",height:75,justifyContent:"center",width:"50%"},children:[(0,pn.jsx)(_.Input,{className:"text_input",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onInput:function(e){var n;v(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},maxlength:6}),N?(0,pn.jsx)(_.View,{className:"error_text",children:N}):null]})]}),i?(0,pn.jsx)(_.View,{className:"btn",style:{backgroundColor:"#cccccc"},children:(0,pn.jsxs)(_.Text,{className:"btn_text",children:[i,"s"]})}):(0,pn.jsx)(_.View,{className:"btn",onClick:O,children:(0,pn.jsx)(_.Text,{className:"btn_text",children:s})})]})]}),(0,pn.jsx)(_.View,{className:"btn_view",children:p.toString()?(0,pn.jsx)(_.View,{className:"submit_btn",onClick:A,children:(0,pn.jsx)(_.Text,{className:"btn_text",children:"\u786e\u8ba4"})}):(0,pn.jsx)(_.View,{className:"submit_btn",style:{backgroundColor:"#cccccc"},children:(0,pn.jsx)(_.Text,{className:"btn_text",children:"\u786e\u8ba4"})})})]})},Xo=Jo,ea=fn.gk.showPopup,na=fn.gk.hidePopup,ta=function(e){var n,t,i=e.isRecommendPage,r=void 0!==i&&i,o=_n(),a=o.resource,s=o.basicInfo,c=o.packages,l=(null===a||void 0===a||null===(n=a.filter((function(e){return!e.isPackage3SubItem})))||void 0===n?void 0:n.filter((function(e){return null===e||void 0===e?void 0:e.snapshotUrl})))||[],d=(null===c||void 0===c?void 0:c.filter((function(e){return null===e||void 0===e?void 0:e.snapshotUrl})))||[],u=[].concat((0,y.Z)(d),(0,y.Z)(l)),m=u.length;if(0===m)return null;var h={orderId:String(null===s||void 0===s?void 0:s.orderId),usedate:String(null===(t=u[0])||void 0===t?void 0:t.useDate),service:"TicketsSnapshot",orderstatus:String(null===s||void 0===s?void 0:s.orderStatus),orderdate:String(null===s||void 0===s?void 0:s.orderDate)},f={ubtKeyName:"act_service_exposure",data:h},x=function(){var e;(p().sendUbtByPage.ubtTrace("act_service_trace",h),1===m)?(0,Zn.mi)({targetPageURI:null===(e=u[0])||void 0===e?void 0:e.snapshotUrl}):m>1&&g()},g=function(){var e={hideMask:function(){return na()},snapShotResourceList:u,buriedData:h},n=(0,pn.jsx)(ia,(0,v.Z)({},e));ea({title:"\u4ea4\u6613\u5feb\u7167\u9009\u62e9",children:n})};return(0,pn.jsxs)(_.View,{className:"autoExpose order_detail_booking_info_delivery_wrap ".concat(r?"recommend_booking_info_delivery_wrap":""),id:"ticket_snapshot_exposure_unique_id","data-expose":f,children:[(0,pn.jsx)(_.View,{className:"left_view",children:"\u4ea7\u54c1\u5feb\u7167"}),(0,pn.jsx)(_.View,{className:"right_view",children:(0,pn.jsxs)(_.View,{className:"row_label",onClick:x,children:["\u6838\u5bf9\u4ea4\u6613\u7ec6\u8282\u65f6\uff0c\u53ef\u4f5c\u4e3a\u5224\u65ad\u4f9d\u636e",(0,pn.jsx)(_.Text,{children:"\u8be6\u60c5"})]})})]})},ia=function(e){var n=e.hideMask,t=e.snapShotResourceList,i=e.buriedData,r=function(e){i["usedate"]=String(null===e||void 0===e?void 0:e.useDate),p().sendUbtByPage.ubtTrace("act_service_trace",i),null!==e&&void 0!==e&&e.snapshotUrl&&(n(),(0,Zn.mi)({targetPageURI:null===e||void 0===e?void 0:e.snapshotUrl}))};return(0,pn.jsxs)(_.View,{className:"snapshot_contain_wrap snapshot_contain",children:[(0,pn.jsx)(_.View,{className:"tips_view",children:(0,pn.jsx)(_.Text,{className:"tips_text",children:"\u4ea7\u54c1\u5feb\u7167\u5305\u542b\u8ba2\u5355\u521b\u5efa\u65f6\u7684\u5546\u54c1\u63cf\u8ff0\u548c\u4e0b\u5355\u4fe1\u606f\uff0c\u4e70\u5356\u53cc\u65b9\u548c\u5e73\u53f0\u53d1\u751f\u4ea4\u6613\u4e89\u8bae\u65f6\uff0c\u8be5\u9875\u9762\u4f5c\u4e3a\u5224\u65ad\u4f9d\u636e\u3002"})}),(0,pn.jsxs)(fn.Q4,{customStyle:{marginTop:12},customInnerClass:"snapshot_contain_wrap_inner",children:[(0,pn.jsx)(_.View,{className:"snapshot_contain_title",children:(0,pn.jsx)(_.Text,{children:"\u8ba2\u5355\u4e2d\u5305\u542b\u7684\u4ea7\u54c1"})}),(0,pn.jsx)(_.View,{className:"snapshot_contain_inner_wrap",children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,pn.jsxs)(_.View,{className:"snapshot_content_item",children:[(0,pn.jsx)(_.Text,{children:(null===e||void 0===e?void 0:e.resourceName)||(null===e||void 0===e?void 0:e.packageName)}),(0,pn.jsx)(_.View,{className:"snapshot_content_btn",onClick:function(){return r(e)},children:(0,pn.jsx)(_.Text,{className:"snapshot_content_btn_text",children:"\u4ea4\u6613\u5feb\u7167"})})]},String(n))}))})]})]})},ra=ta,oa={CNY:"\xa5",DEFAULT:""};function aa(e){var n=e.state,t=n.orderExpenses,i=void 0===t?{}:t,r=(n.requestParam,i.expenses),o=void 0===r?{}:r,a=i.totalOpt,s=void 0===a?{}:a,c=i.promotionOpt,l=void 0===c?{}:c,d=i.deliveryFeeList,u=i.productAddInfoList,m=i.currency,h=s.ressTotalMount,f=s.additionMount,p=s.depositMount,v=s.insurancesMount,x=s.promotionsMount,g=s.superVipMount,j=s.orderTotalAmount,w=o.basicItemList,N=o.additionalResourceList,y=o.deposit,T=o.resourceInsuranceList,I=o.superVip,b=o.payMode,S=o.billItemList,V=o.deliveryFee,C=o.rebate,k=null===C||void 0===C?void 0:C.cmtCredit,E=null===C||void 0===C?void 0:C.rebateAmt,R=15,P={CNY:"\xa5",DEFAULT:""},D=(null===u||void 0===u||u.length,[]);function O(e){if(null===e||void 0===e||!e.length)return"";var n=[];return(e||[]).forEach((function(e){n.push(e.name+" "+P[e.currency||"DEFAULT"]+e.amount)})),"(\u542b"+n.join(" + ")+")"}(S||[]).forEach((function(e){if(e.type!==R){var n=O(e.discountInfoList);D.push(e.name+" "+P[e.currency||"DEFAULT"]+e.amount+n)}}));var A=D.join(" + "),L=((S||[]).find((function(e){return"object"!==(0,Ui.Z)(e.loanTerm)})),{O:"\u73b0\u4ed8",P:"\u5728\u7ebf\u652f\u4ed8",H:"\u5728\u7ebf\u652f\u4ed8"}),U=L[null===b||void 0===b?void 0:b.toLocaleUpperCase()];return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"order_detail_expense_inner_wrapper","data-testid":Ie.orderExpense,children:[(0,pn.jsxs)(_.View,{className:"order_expense_layer_header",children:[(0,pn.jsx)(_.Text,{className:"order_expense_layer_header_text",children:U}),(0,pn.jsxs)(_.Text,{children:["\xa5",j]})]}),A?(0,pn.jsx)(_.View,{className:"order_expense_layer_header_desc",children:(0,pn.jsx)(_.Text,{children:A})}):null,(S||[]).map((function(e,n){return e.type===R?e.loanTerm?(0,pn.jsxs)(_.View,{className:"order_expense_layer_header_desc",children:[(0,pn.jsxs)(_.Text,{children:[e.name,e.installmentInfo]}),(0,pn.jsx)(fa,{discountInfoList:e.discountInfoList})]},String(n)):e.loanTerm?null:(0,pn.jsxs)(_.View,{className:"order_expense_layer_header_desc",children:[(0,pn.jsxs)(_.Text,{children:[e.name,oa[e.currency||"DEFAULT"],e.amount]}),(0,pn.jsx)(fa,{discountInfoList:e.discountInfoList})]},String(n)):null})),(0,pn.jsxs)(_.View,{className:"order_detail_expense_layer_contain",children:[(0,pn.jsx)(sa,{title:"\u57fa\u672c\u8d39\u7528",total:h,list:w}),(0,pn.jsx)(sa,{title:"\u7701\u5fc3\u642d\u914d",total:f,list:N}),(0,pn.jsx)(sa,{title:"\u4fdd\u9669",total:v,list:T}),(0,pn.jsx)(sa,{title:"\u8d85\u7ea7\u4f1a\u5458",total:g,list:[I]}),(0,pn.jsx)(ma,{title:"\u62bc\u91d1",total:p,deposit:y,currency:m}),(0,pn.jsx)(sa,{title:"\u914d\u9001\u8d39",total:V,list:d}),(0,pn.jsx)(da,{title:"\u4f18\u60e0",promotionOpt:l,total:x}),(0,pn.jsx)(ha,{rebate:C})]})]}),(0,pn.jsx)(_.View,{className:"order_detail_second_contain",children:(0,pn.jsx)(_a,{title:"\u5230\u5e97\u53e6\u4ed8",list:u})}),(0,pn.jsx)(_.View,{className:"order_detail_expense_tips",children:(0,pn.jsx)(_.Text,{children:"*\u672c\u660e\u7ec6\u4e0d\u542b\u8ba2\u5355\u9000\u6539\u4fe1\u606f"})})]})}function sa(e){var n=e.title,t=e.total,i=e.list;return i&&0!==(null===i||void 0===i?void 0:i.length)&&null!==i&&void 0!==i&&i[0]?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:n,total:t}),i.map((function(e,n){if(!e)return null;var t=e.days&&e.days>1?e.name+"x"+e.days+"(\u5929)":e.name,i=e.unitPrice;return(0,pn.jsx)(la,{name:t,quantity:e.quantity,unitPrice:i},String(n))}))]}):null}function ca(e){var n=e.title,t=e.total,i=e.customStyle,r=void 0===i?{}:i;return(0,pn.jsxs)(_.View,{className:"flex_row order_expense_header_title",children:[(0,pn.jsx)(_.Text,{className:"order_expense_header_title_left_text",children:n}),""!==t?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"split_line"}),(0,pn.jsxs)(_.Text,{className:"order_expense_header_title_right_text",style:r,children:["\xa5",t]})]}):null]})}function la(e){var n=e.name,t=e.quantity,i=e.unitPrice,r=e.style,o=void 0===r?{}:r;return(0,pn.jsxs)(_.View,{style:o,className:"flex_row order_detail_expense_item_label",children:[(0,pn.jsx)(_.View,{className:"order_detail_expense_item_label_left",children:(0,pn.jsx)(_.Text,{children:n})}),(0,pn.jsx)(_.View,{className:"order_detail_expense_item_label_right",children:i||t?(0,pn.jsxs)(_.Text,{children:[""!==i?"\xa5".concat(i," "):null,""!==i&&""!==t?"x":null,""!==t?" ".concat(t):null]}):null})]})}function da(e){var n=e.title,t=e.promotionOpt,i=e.total,r=t.flightPromotion,o=t.bankPromotion,a=t.bankGold,s=t.coupon,c=t.discountCoupon,l=t.showPromotion;return l?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:n,total:i,customStyle:{color:"#FF7700"}}),c.map((function(e,n){return(0,pn.jsx)(ua,{name:e.name,reductionAmount:e.reductionAmount},String(n))})),r.map((function(e,n){return(0,pn.jsx)(ua,{name:e.name,reductionAmount:e.reductionAmount},String(n))})),o.map((function(e,n){return(0,pn.jsx)(ua,{name:e.name,reductionAmount:e.reductionAmount},String(n))})),a.map((function(e,n){return(0,pn.jsx)(ua,{name:e.name,reductionAmount:e.reductionAmount},String(n))})),s.map((function(e,n){return(0,pn.jsx)(ua,{name:e.name,reductionAmount:e.reductionAmount},String(n))}))]}):null}function ua(e){var n=e.name,t=e.reductionAmount,i={};return t?(0,pn.jsxs)(_.View,{className:"flex_row order_detail_expense_item_label",children:[(0,pn.jsx)(_.View,{className:"order_detail_expense_item_label_left",children:(0,pn.jsx)(_.Text,{children:n})}),(0,pn.jsx)(_.View,{className:"order_detail_expense_item_label_right",style:i,children:(0,pn.jsxs)(_.Text,{children:["- \xa5",t]})})]}):null}function ma(e){var n=e.title,t=e.total,i=e.deposit,r=e.currency,o={0:"",1:"\u73b0\u573a\u652f\u4ed8\u62bc\u91d1",2:"\u9884\u4ed8",3:"\u514d\u62bc\u91d1"};if(!i)return null;var a=o[i.depositPayMode];return 3===(null===i||void 0===i?void 0:i.depositPayMode)?(0,pn.jsx)(_.View,{className:"item_contain",children:(0,pn.jsx)(ca,{title:"\u514d\u62bc\u91d1",total:""})}):2===(null===i||void 0===i?void 0:i.depositPayMode)?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:n,total:t}),(0,pn.jsx)(la,{unitPrice:i.unitPrice,quantity:i.quantity,name:"\u62bc\u91d1"}),null!==i&&void 0!==i&&i.depositReturnDays&&!Math.abs(null===i||void 0===i?void 0:i.refundDepositAmt)?(0,pn.jsx)(la,{unitPrice:"",quantity:"",name:"\u8fd8\u4ef6\u540e".concat(null===i||void 0===i?void 0:i.depositReturnDays,"\u4e2a\u5de5\u4f5c\u65e5\u5185\u539f\u8def\u8fd4\u56de\u60a8\u7684\u652f\u4ed8\u8d26\u6237")}):null,Math.abs(null===i||void 0===i?void 0:i.refundDepositAmt)?(0,pn.jsx)(la,{unitPrice:"",quantity:"",name:"".concat(oa[r]).concat(Math.abs(null===i||void 0===i?void 0:i.refundDepositAmt),"\u5df2\u539f\u8def\u8fd4\u56de\u60a8\u7684\u652f\u4ed8\u8d26\u6237")}):null]}):1===(null===i||void 0===i?void 0:i.depositPayMode)?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:"\u73b0\u573a\u652f\u4ed8\u62bc\u91d1",total:t}),a?(0,pn.jsx)(la,{name:"\u53d6\u4ef6\u65f6\u9700".concat(a,"\xa5").concat(i.unitPrice,"/").concat(i.depositChargeUnit),quantity:"",unitPrice:""}):null,(0,pn.jsx)(la,{name:"\u8fd8\u4ef6\u540e\u539f\u8def\u9000\u8fd8",quantity:"",unitPrice:""})]}):null}function _a(e){var n=e.title,t=e.list;return t&&null!==t&&void 0!==t&&t.length?(0,pn.jsxs)(_.View,{className:"store_to_pay_wrap",children:[(0,pn.jsx)(_.View,{className:"store_to_pay_title",children:n}),(0,pn.jsx)(_.View,{className:"store_to_pay_desc",children:"\u884c\u7a0b\u4e2d\u8fd8\u53ef\u80fd\u5b58\u5728\u5176\u4ed6\u6536\u8d39\uff0c\u4ee5\u5b9e\u9645\u60c5\u51b5\u4e3a\u51c6"}),t.map((function(e,n){var t;return null===(t=e.addDetailList)||void 0===t?void 0:t.map((function(e,n){return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.Text,{className:"store_to_pay_desc",children:e.desc},String(n))},String(n))}))}))]}):null}function ha(e){var n=e.rebate,t=void 0===n?{}:n,i=null===t||void 0===t?void 0:t.cmtCredit,r=null===t||void 0===t?void 0:t.rebateAmt;return i||r?(0,pn.jsxs)(pn.Fragment,{children:[i?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:"\u70b9\u8bc4\u540e\u6700\u9ad8\u53ef\u8fd4\u79ef\u5206",total:""}),(0,pn.jsx)(la,{unitPrice:"",quantity:i,name:"\u79ef\u5206"})]}):null,r?(0,pn.jsxs)(_.View,{className:"item_contain",children:[(0,pn.jsx)(ca,{title:"\u70b9\u8bc4\u540e\u53ef\u8fd4\u73b0\u91d1\u989d",total:""}),(0,pn.jsx)(la,{unitPrice:r,quantity:"",name:"\u91d1\u989d"})]}):null]}):null}function fa(e){var n=e.discountInfoList,t=[];(n||[]).forEach((function(e){var n=e.name+oa[e.currency||"DEFAULT"]+e.amount;t.push(n)}));var i=t.join("+");return null!==n&&void 0!==n&&n.length?(0,pn.jsxs)(_.Text,{children:["(\u542b",i,")"]}):null}var pa=fn.gk.showPopup,va={fat:"https://secure.fws.qa.nt.ctripcorp.com/webapp/payment6/refund",uat:"https://secure.uat.qa.nt.ctripcorp.com/webapp/payment6/refund",prd:"https://secure.ctrip.com/webapp/payment6/refund"},xa=u.memo((function(){var e=_n(),n=e.basicInfo,t=void 0===n?{}:n,i=(e.orderProcess,e.operationInfo),r=e.orderExpenses,o=void 0===r?{}:r,a=e.invoiceButton,s=e.orderInfo,c=e.requestParam,l=t.orderId,d=t.orderType,u=t.billNos,m=t.externalNo,h=t.depositAmt,v=t.refundDepositAmt,x=t.payDesc,g=t.payMode,j=t.totalRefundAmt,w=t.depositPayMode,N=t.bizLineType,y=t.notShowSubUnit,T=void 0===y?[]:y,I=t.subRefundNos,b=void 0===I?[]:I,S=t.merchantId,V=void 0===S?"":S,C=T.length>0&&T.indexOf("orderbasicinfo")>-1;if(C)return null;var k=null===c||void 0===c?void 0:c.token,E="";"H"===g?E="\u5148\u7528\u540e\u4ed8\u514d\u62bc\u91d1"+(x?"\uff0c".concat(x):""):v?E="\u5df2\u9000\u62bc\u91d1\uffe5".concat(Math.abs(v)):1===w&&h?E="\u73b0\u573a\u652f\u4ed8\u62bc\u91d1\xa5".concat(h):h&&(E="\u542b\u62bc\u91d1\xa5".concat(h));var R=(null===s||void 0===s?void 0:s.rebate)||{},P=R.realRebateAmt,D=7;2===d&&(D=71,2===N?D=10604:3===N&&(D=10605));var O={orderId:l,businessType:D};m?O.externalNO=m:u&&(O.billNo=u||[]),V&&(O.merchantID=V);var A=i.find((function(e){return 7===e.operationType})),L=a.invoiceInfo,U=void 0===L?{}:L,Z=U||{},M=(Z.deliveryFee,Z.deliveryFeeType,o.expenses),F=void 0===M?{}:M,B=F.billItemList,H=void 0===B?[]:B,G=(H||[]).find((function(e){return 15===e.type})),q=i.find((function(e){return 9===e.operationType})),z={O:"\u73b0\u4ed8",P:"\u5728\u7ebf\u652f\u4ed8",H:"\u5728\u7ebf\u652f\u4ed8"},Y=z[null===g||void 0===g?void 0:g.toLocaleUpperCase()],$=function(e){(0,Zn.mi)({targetPageURI:e})},K=(0,pn.jsx)(aa,{state:e,jump:$}),W=function(){pa({title:"\u8d39\u7528\u660e\u7ec6",children:K,className:"order_detail_expense_layer_wrapper"})};return(0,pn.jsxs)(_.View,{className:"ottd_order_detail_orderExpense",children:[(0,pn.jsx)(_.View,{className:"order_expense_header","data-testid":Ie.orderIDText,children:(0,pn.jsx)(fn.Uk,{text:l,copyByIcon:!0,children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{children:"\u8ba2\u5355\u53f7"})},renderRight:function(){return(0,pn.jsx)(_.Text,{children:l})}})})}),(0,pn.jsx)(fn.AJ,{className:"order_detail_orderamt",renderLeft:function(){return(0,pn.jsx)(_.Text,{className:"order_detail_left_title",children:Y})},renderCenter:function(){return(0,pn.jsxs)(_.Text,{className:"order_detail_right_desc order_expense_title_pay_no",children:["\xa5",t.orderAmt]})},renderRight:function(){return q?(0,pn.jsx)(_.View,{className:"order_expense_detail_btn",onClick:function(){return W()},"data-testid":Ie.orderExpenseBtn,children:"\u8d39\u7528\u660e\u7ec6"}):null}}),E||P||j||A||G?(0,pn.jsxs)(_.View,{className:"order_expense_bg",children:[E?(0,pn.jsx)(_.View,{className:"order_expense_title_desc",children:(0,pn.jsx)(_.Text,{className:"",children:E})}):null,P?(0,pn.jsx)(_.View,{className:"order_expense_title_desc",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{children:"\u8fd4\u73b0"})},renderRight:function(){return(0,pn.jsxs)(_.Text,{children:["\xa5",P]})}})}):null,j||A?(0,pn.jsxs)(_.View,{className:"flex_row order_expense_flex_row",children:[j?(0,pn.jsx)(_.View,{className:"order_expense_title_desc",children:(0,pn.jsx)(fn.e2,{renderLeft:function(){return(0,pn.jsx)(_.Text,{children:"\u9000\u6b3e"})},renderRight:function(){return(0,pn.jsxs)(_.Text,{children:["\xa5",j]})}})}):null,A?(0,pn.jsx)(_.View,{className:" order_expense_detail_btn",onClick:function(){if(b.length>0){var e,n=encodeURIComponent(JSON.stringify({subRefundNos:b})),t=(null===f.__global||void 0===f.__global||null===(e=f.__global.env)||void 0===e?void 0:e.toLowerCase())||"prd",i=null===va||void 0===va?void 0:va[t],r="".concat(i,"?cusparams=").concat(n);(0,Zn.mi)({targetPageURI:r})}else{var o=p().util.base64Encode(JSON.stringify(O));p().payment.getRefund({rdata:o})}},children:(0,pn.jsx)(_.Text,{style:{color:"#006FF6"},children:"\u67e5\u770b\u9000\u6b3e"})}):null]}):null,!k&&G?(0,pn.jsxs)(_.View,{className:"flex_row naquhua_wrap",children:[(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/ticket/app/orderdetail/naquhua.png",className:"order_expense_naquhua"}),(0,pn.jsx)(_.View,{className:"order_expense_title_desc",children:(0,pn.jsx)(_.Text,{children:"\u62ff\u53bb\u82b1"})})]}):null]}):null]})})),ga=xa,ja=fn.gk.showPopup,wa=fn.gk.hidePopup;function Na(){var e=(0,u.useState)(!0),n=(0,h.Z)(e,2),t=n[0],i=n[1];return(0,pn.jsxs)(fn.Q4,{customClass:"order_detail_expense_booking_info",customStyle:{marginTop:12},testID:Ie.OrderBookInfoTittle,children:[(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_title",children:[(0,pn.jsx)(_.Text,{children:"\u9884\u8ba2\u4fe1\u606f"}),t?null:(0,pn.jsx)(ba,{})]}),(0,pn.jsx)(ga,{}),(0,pn.jsx)(ya,{setFold:i,isFold:t})]})}function ya(e){var n=e.isFold,t=e.setFold,i=_n(),r=i.resource,o=i.basicInfo,a=i.category,s=i.contact,c=i.deliveryInfo,l=i.packages,d=c.deliveryAddress,u=void 0===d?{}:d,m=o.orderType,h=o.callReminder,f=void 0===h?"":h,p=o.notShowSubUnit,x=void 0===p?[]:p,g=(a.appendCategory,a.passenger),j=[],w=(null===o||void 0===o||o.dayTripContractType,x.length>0&&x.indexOf("bookinginfo")>=0),N=x.length>0&&x.indexOf("bookinginfocontract")>=0,y=r.every((function(e){return 2===(null===e||void 0===e?void 0:e.limitType)}));if(y){var T,I=r.every((function(e){return null===e||void 0===e?void 0:e.passengers.every((function(e){return!(null===e||void 0===e||!e.isRefunded)}))}));j.push({name:"",passList:[(0,v.Z)((0,v.Z)({},null===r||void 0===r||null===(T=r[0])||void 0===T||null===(T=T.passengers)||void 0===T?void 0:T[0]),{},{isRefunded:I})]})}else{(l||[]).forEach((function(e,n){var t=e.packageName,i=e.resourceShowType,r=e.subResList;1===i?r.forEach((function(e,n){var i;null!==e&&void 0!==e&&null!==(i=e.passengers)&&void 0!==i&&i.length&&"voice"!==e.viewTemplateCode&&j.push({name:t,passList:e.passengers})})):r.forEach((function(e,n){var t;null!==e&&void 0!==e&&null!==(t=e.passengers)&&void 0!==t&&t.length&&"voice"!==e.viewTemplateCode&&j.push({name:e.resourceName,passList:e.passengers})}))}));var b=r.filter((function(e){return!(null!==e&&void 0!==e&&e.isPackage3SubItem)}));b.forEach((function(e,n){var t;null!==e&&void 0!==e&&null!==(t=e.passengers)&&void 0!==t&&t.length&&"voice"!==e.viewTemplateCode&&j.push({name:e.resourceName,passList:e.passengers})}))}var S=(r||[]).find((function(e){return"voice"!==e.viewTemplateCode}));return 1!==m||null!==u&&void 0!==u&&u.address||s||S?w?null:(0,pn.jsxs)(pn.Fragment,{children:[n?null:(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_wrap",children:[1===m?(0,pn.jsx)(Go,{passengers:j,isTicket:!0,isNew:!0,setFold:function(){return t(!1)}}):(0,pn.jsx)(Go,{passengers:g,isTicket:!1,isNew:!0,setFold:function(){return t(!1)}}),(0,pn.jsx)(Qo,{customStyle:{marginTop:6}}),(0,pn.jsx)(Ta,{}),(0,pn.jsx)(Ia,{hideContract:N}),1===m?(0,pn.jsx)(ra,{}):null,(0,pn.jsx)(Sa,{callReminder:f})]}),(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_collapse",onClick:function(){return t((function(e){return!e}))},children:[(0,pn.jsx)(_.Text,{className:"fold_action_text","data-testid":Ie.orderSecondFolder,children:n?"\u5c55\u5f00":"\u6536\u8d77"}),(0,pn.jsx)(_.View,{className:n?"icon-DropDown":"icon-DropUp"})]})]}):null}function Ta(e){var n=e.isRecommendPage,t=void 0!==n&&n,i=_n(),r=i.deliveryInfo,o=i.imService,a=i.requestParam,s=i.basicInfo,c=r.deliveryAddress,l=r.isAllProviderExpress,d=s.notShowSubUnit,u=void 0===d?[]:d,m=u.length>0&&u.indexOf("imbtn")>=0;if(!c)return null;var h=c.address,f=c.postCode,p=c.contactTel,v=c.receiverName,x=c.provinceName,g=c.districtName,j=c.cityName;if(!h)return null;var w=null===a||void 0===a?void 0:a.token,N=!w&&!m&&((null===o||void 0===o?void 0:o.displayIm)||(null===o||void 0===o?void 0:o.hasPhone))&&l;return(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_delivery_wrap ".concat(t?"recommend_booking_info_delivery_wrap":""),children:[(0,pn.jsx)(_.View,{className:"left_view",children:"\u914d\u9001\u5730\u5740"}),(0,pn.jsxs)(_.View,{className:"right_view",children:[v||f||p?(0,pn.jsxs)(_.View,{className:"desc_text",children:[v," ",f," ",p]}):null,(0,pn.jsxs)(_.View,{className:"desc_text",children:[x,j,g,h]}),N?(0,pn.jsx)(_.View,{onClick:function(){var e=o.hasPhone;e?Xn():Bn.goIm(i)},children:(0,pn.jsx)(_.View,{className:"service_btn_text",children:"\u8054\u7cfb\u5ba2\u670d\u4e86\u89e3\u914d\u9001\u8fdb\u5ea6"})}):null]})]})}function Ia(e){var n,t,i,r,o,a,s,c,l,d,u=e.isRecommendPage,m=void 0!==u&&u,h=e.hideContract,f=_n(),v=hn(),x=v.getDayTripContractInfo,g=null===f||void 0===f||null===(n=f.basicInfo)||void 0===n?void 0:n.orderType,j=null===f||void 0===f||null===(t=f.requestParam)||void 0===t?void 0:t.token,w=null===f||void 0===f||null===(i=f.basicInfo)||void 0===i?void 0:i.dayTripContractType;if(j||h)return null;var N=null!==(r=null===(o=f.orderInfo)||void 0===o||null===(o=o.basicInfo)||void 0===o?void 0:o.orderId)&&void 0!==r?r:0,y=(null!==(a=f.orderInfo)&&void 0!==a&&null!==(a=a.basicInfo)&&void 0!==a&&a.inChina,s=null===(c=f.orderInfo)||void 0===c||null===(c=c.product)||void 0===c||null===(c=c.resources)||void 0===c||null===(c=c[0].passengers)||void 0===c||null===(c=c.map((function(e){return e.name&&e.enName?"".concat(e.name,"(").concat(e.enName,")"):e.name||e.enName?e.name||e.enName:""})))||void 0===c||null===(c=c.filter((function(e){return!!e})))||void 0===c?void 0:c.join("\u3001"),l=null===(d=f.orderInfo)||void 0===d||null===(d=d.product)||void 0===d||null===(d=d.resources)||void 0===d?void 0:d[0].categoryId,function(){var e={orderId:N,dayTripContractType:4};4!==w?3!==w?(0,Zn.mi)({targetPageURI:"electroniccontract",params:e,path:"order_ttd"}):(0,Zn.mi)({targetPageURI:"daytourcontract",params:{orderid:N},path:"order_ttd"}):x(e).then((function(e){var n=e.contractInfo,t=void 0===n?{}:n,i=t.viewUrl;i?p().setClipboardData({data:String(i),success:function(){p().showToast({title:"\u590d\u5236\u6210\u529f,\u8bf7\u81f3\u6d4f\u89c8\u5668\u6253\u5f00",icon:"none"})},fail:function(){p().showToast({title:"\u590d\u5236\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",icon:"none"})}}):p().showToast({title:"\u672a\u83b7\u53d6\u5230\u5408\u540c\u94fe\u63a5\uff0c\u8bf7\u91cd\u8bd5",icon:"none"})}))});return 2===g&&2===w||1===g&&3!==w?null:(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_delivery_wrap ".concat(m?"recommend_booking_info_delivery_wrap":""),children:[(0,pn.jsx)(_.View,{className:"left_view",children:"\u5408\u540c\u6761\u6b3e"}),(0,pn.jsx)(_.View,{className:"right_view",children:(0,pn.jsxs)(_.View,{className:"row_label",onClick:y,children:["\u7535\u5b50\u5408\u540c",(0,pn.jsx)(_.Text,{children:4===w?"\u590d\u5236\u67e5\u770b":"\u8be6\u60c5"})]})})]})}function ba(){(0,gn.f)(1e3);var e=_n(),n=mn.useActions(),t=n.UPDATE_PHONE_ENCRYPT,i=n.UPDATE_REQUEST_PARAMS,r=n.getRequestParamByStore,o=n.refreshOrderByContinuePay,a=e.contact,s=e.basicInfo,c=e.hasChecked,l=e.requestParam,d=null===l||void 0===l?void 0:l.token,u=s.notShowSubUnit,m=void 0===u?[]:u,h=s.orderId,f=s.showEx,p=m.length>0&&m.indexOf("encryptmsg")>=0;if(d||p)return null;var x=a||{},g=x.isAllQuick,j=(null!==a&&void 0!==a&&a.phoneCode?(null===a||void 0===a?void 0:a.phoneCode)+" ":"")+(null===a||void 0===a?void 0:a.phone),w=(null!==a&&void 0!==a&&a.osPhoneCode?(null===a||void 0===a?void 0:a.osPhoneCode)+" ":"")+(null===a||void 0===a?void 0:a.osPhone),N={phone:j||w,isAllQuick:g,orderid:h,actions:n,hideMask:function(){return wa()}},y=function(){var e=r(),n=(0,pn.jsx)(Xo,(0,v.Z)((0,v.Z)({},N),{},{requestParams:(0,v.Z)((0,v.Z)({},e),{},{showEx:1})}));ja({title:"\u67e5\u770b\u5b8c\u6574\u4fe1\u606f",children:n})},T=function(){var e=r();c?(e=(0,v.Z)((0,v.Z)({},e),{},{showEx:1}),i(e),t(!0),setTimeout((function(){o()}),300)):y()},I=function(){var e=r();e=(0,v.Z)((0,v.Z)({},e),{},{showEx:0}),i(e),setTimeout((function(){o()}),300)};return(0,pn.jsxs)(_.View,{className:"order_detail_traveler_detail",onClick:function(){0===f?T():I()},children:[(0,pn.jsx)(_.View,{className:f?"icon-hide_eye":"icon-close_eye","data-testid":Ie.ViewEye}),(0,pn.jsx)(_.Text,{children:f?"\u9690\u85cf\u52a0\u5bc6\u4fe1\u606f":"\u67e5\u770b\u52a0\u5bc6\u4fe1\u606f"})]})}function Sa(e){var n=e.callReminder;return n?(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_call_reminder",children:[(0,pn.jsx)(_.View,{className:"icon-Information"}),(0,pn.jsx)(_.Text,{children:n})]}):null}function Va(){var e=_n(),n=e.basicInfo,t=n.notShowSubUnit,i=void 0===t?[]:t,r=(i&&(null===i||void 0===i||i.indexOf("nps")),{default:"ttd",5:"ticket",6:"ttd",10:"guide",18:"vtm"});r[String(null===n||void 0===n?void 0:n.categoryGroup)]||r.default,null===f.__global||void 0===f.__global||f.__global.env;return null===n||void 0===n||n.surveyStatus,null}function Ca(){var e=_n(),n=e.basicInfo,t=void 0===n?{}:n,i=t.cityId,r=t.notShowSubUnit,o=void 0===r?[]:r,a=p().wxSystemInfo,s=a.screenWidth-24,c=+(307*s/1536).toFixed(a.pixelRatio),l=o.length>0&&o.indexOf("ads")>=0;if(l)return null;var d=function(){};return(0,pn.jsx)(fn.Q4,{customStyle:{marginTop:12,zIndex:1,borderRadius:5,position:"relative",overflow:"hidden"},children:(0,pn.jsx)("ad-sdk",{impId:"05DJDEEX0511DDCMRTWXQWEZ",width:{adWidth:s},height:{adHeight:c},bindgetAdData:d,site:{siteId:i,siteType:"HTLCITY"},lonAndLat:{isEnable:!1},slideVideo:{delayTime:3e3,dotShow:!1}})})}var ka=function(e){var n=e.onJumpServiceTrack,t=e.serviceTrackList,i=e.allComplete;if(1===i){if(1===t.length){var r=t[0],o=r.eventId,a=r.trackName,s=r.actionName,c=r.actionContent,l=void 0===c?[]:c;return(0,pn.jsx)(_.View,{children:(0,pn.jsxs)(_.View,{className:"nocomplete",children:[(0,pn.jsxs)(_.View,{className:"nocomplete_show",children:[(0,pn.jsxs)(_.View,{className:"nocomplete_show_track",children:[(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_trackName",children:a}),(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_actionName",numberOfLines:"2",style:{fontFamily:"PingFangSC-Medium",fontWeight:"bold"},children:s})]}),(null===l||void 0===l?void 0:l[0])&&(0,pn.jsxs)(_.View,{className:"nocomplete_show_track",children:[(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_ctionC",children:a}),(0,pn.jsx)(_.Text,{className:"nocomplete_show_actionContent",numberOfLines:"1",children:null===l||void 0===l?void 0:l[0]})]})]}),(0,pn.jsx)(_.View,{className:"nocomplete_btn",onClick:function(){return n(o)},children:(0,pn.jsx)(_.Text,{className:"nocomplete_btn_text",children:"\u53bb\u67e5\u770b"})})]})})}var d=new Map,u=t.filter((function(e){return!d.has(e["trackType"])&&d.set(e["trackType"],1)})),m="\u67e5\u770b".concat(u.map((function(e){return e.trackName})).slice(0,3).join("\u3001"),"\u7b49").concat(t.length,"\u4e2a\u670d\u52a1\u4fe1\u606f");return(0,pn.jsxs)(_.View,{children:[(0,pn.jsxs)(_.View,{className:"service_complete",onClick:function(){return n(0)},children:[(0,pn.jsx)(_.Text,{className:"service_complete_text",children:m}),(0,pn.jsx)(_.View,{className:"service_arrow1"})]}),(0,pn.jsx)(_.View,{className:"service_back1"}),(0,pn.jsx)(_.View,{className:"service_back2"})]})}var h=t.filter((function(e){return 0===e.isComplete})).slice(0,2),f=new Map,p=t.slice(h.length,t.length),v=p.filter((function(e){return!f.has(e["trackType"])&&f.set(e["trackType"],1)})),x="\u8fd8\u6709".concat(v.map((function(e){return e.trackName})).slice(0,3).join("\u3001"),"\u7b49").concat(p.length,"\u4e2a\u670d\u52a1\u4fe1\u606f");return(0,pn.jsxs)(_.View,{children:[h.map((function(e){var t=e||{},i=t.eventId,r=t.trackName,o=t.actionName,a=t.actionContent,s=void 0===a?[]:a;return(0,pn.jsxs)(_.View,{className:"nocomplete",children:[(0,pn.jsxs)(_.View,{className:"nocomplete_show",children:[(0,pn.jsxs)(_.View,{className:"nocomplete_show_track",children:[(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_trackName",children:r}),(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_actionName",numberOfLines:"2",style:{fontFamily:"PingFangSC-Medium",fontWeight:"bold"},children:o})]}),(null===s||void 0===s?void 0:s[0])&&(0,pn.jsxs)(_.View,{className:"nocomplete_show_track",children:[(0,pn.jsx)(_.Text,{className:"nocomplete_show_track_ctionC",children:r}),(0,pn.jsx)(_.Text,{className:"nocomplete_show_actionContent",numberOfLines:"1",children:null===s||void 0===s?void 0:s[0]})]})]}),(0,pn.jsx)(_.View,{className:"nocomplete_btn",onClick:function(){return n(i)},children:(0,pn.jsx)(_.Text,{className:"nocomplete_btn_text",children:"\u53bb\u67e5\u770b"})})]})})),0!==v.length&&(0,pn.jsxs)(_.View,{children:[(0,pn.jsxs)(_.View,{className:"service_complete",onClick:function(){return n(0)},children:[(0,pn.jsx)(_.Text,{className:"service_complete_text",children:x}),(0,pn.jsx)(_.View,{className:"service_arrow1"})]}),(0,pn.jsx)(_.View,{className:"service_back1"}),(0,pn.jsx)(_.View,{className:"service_back2"})]})]})},Ea=(0,u.memo)(ka),Ra=62,Pa=function(){var e,n=(0,gn.f)(3e3),t=_n(),i=t.operationInfo,r=t.orderInfo,o=t.basicInfo,a=t.resource,s=o||{},c=s.orderId,l=(i||[]).find((function(e){return(null===e||void 0===e?void 0:e.operationType)===Ra})),d=r||{},m=d.serviceTrackInfo,h=void 0===m?{}:m,f=h.allComplete,p=void 0!==f&&f,v=h.serviceTrackList,x=void 0===v?[]:v,g=function(e){n((function(){Bn.gotoServiceTrackPage(c,e)}))};if((0,u.useEffect)((function(){Tn().sendUbtExpose.refreshObserve()}),[]),!l||!x.length)return null;var j={orderId:String(null===o||void 0===o?void 0:o.orderId),usedate:String(null===(e=a[0])||void 0===e?void 0:e.useDate),service:"footprint",orderstatus:String(null===o||void 0===o?void 0:o.orderStatus),orderdate:String(null===o||void 0===o?void 0:o.orderDate)},w={ubtKeyName:"act_service_unsubscribeservicefootprint_expo",data:j};return(0,pn.jsx)(_.View,{id:"service_flow_body_success_expose_event","data-expose":w,children:(0,pn.jsx)(Ea,{onJumpServiceTrack:g,serviceTrackList:x,allComplete:p})})},Da=Pa,Oa={BookingInfo:Na,BottomServices:Vi,ForbidCancel:yo,NPS:Va,HeaderStatus:En,ResourceCard:bi,UpComing:mo,WIFISubscription:Vo,GuideInfo:Oo,HeaderNotice:xn,MarketingBanner:Ca,ScenicSpotDetail:Pi,ScenicSpotAdditionSale:Oi,WeeklyJoy:Si,ServiceFlow:Da};function Aa(){var e=_n(),n=e.sortComponent,t=e.requestParam,i=n.componentList,r=null===t||void 0===t?void 0:t.token,o=Ua(i,r),a=La(o),s=a.underCompList,c=a.belowCompList;return(0,pn.jsxs)(_.View,{className:"ottd_orderDetail_mainListWrap","data-testid":"orderDetail_mainListWrap",children:[(0,pn.jsx)(_.Image,{className:"order_detail_mail_list_bg",mode:"scaleToFill",src:"https://pages.c-ctrip.com/tourorder/ttd/app/membership/v_bg.webp"}),(0,pn.jsx)(_.View,{children:s.map((function(e,n){var t=Oa[e];return(0,pn.jsx)(t,{},String(n))}))}),(0,pn.jsx)(_.View,{className:"ottd_orderdetail_below_wrap",children:c.map((function(e,n){var t=Oa[e];return(0,pn.jsx)(t,{},String(n))}))})]})}var La=function(e){var n=e.indexOf("ResourceCard"),t=[],i=[];return t=e.slice(0,n),i=e.slice(n),{underCompList:t,belowCompList:i}},Ua=function(e,n){var t=["CrossRecommend"];return n&&t.push("WIFISubscription","NPS","WeeklyJoy"),e.filter((function(e){return t.indexOf(e)<0}))},Za=(0,u.memo)(Aa),Ma=fn.gk.hidePopup;function Fa(e){var n=e.textlist,t=e.isBan;return(0,pn.jsx)(_.View,{className:"order_detail_invoice_tips_view",children:(n||[]).map((function(e,n){return(0,pn.jsx)(_.Text,{className:t?"order_detail_invoice_tips_bold_text":"order_detail_invoice_tips_text",children:e},String(n))}))})}function Ba(e){var n=e.state,t=n.invoiceButton,i=t.invoiceInfo,r=t.superVipInvoiceInfo,o=t.downloadInvoice,a=t.viewLogistics,s=i&&r;return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(Ha,(0,v.Z)({invoiceInfo:i,classTitle:"\u95e8\u7968\u4ea7\u54c1\u53d1\u7968",isShowTitle:s,hasDownload:o,viewLogistics:a},e)),(0,pn.jsx)(Ha,(0,v.Z)({invoiceInfo:r,classTitle:"\u8d85\u7ea7\u4f1a\u5458\u53d1\u7968",isShowTitle:s,hasDownload:o,viewLogistics:a},e))]})}function Ha(e){var n=e.invoiceInfo,t=e.classTitle,i=e.isShowTitle,r=e.hasDownload,o=e.viewLogistics,a=e.state,s=e.doPay,c=e.doDownload,l=e.doExpress,d=a.basicInfo,m=a.requestParam,f=d.orderId,p=d.notShowSubUnit,v=void 0===p?[]:p;if(!n)return null;var x=null===m||void 0===m?void 0:m.token,g=n.amount,j=n.bankName,w=n.bankNo,N=n.companyAddress,y=n.companyPhoneNo,T=n.content,I=n.deliveryAddress,b=n.deliveryFee,S=n.deliveryPayStatus,V=n.deliveryStatus,C=n.deliveryStatusName,k=n.deliveryVal,E=n.email,R=n.invoiceId,P=n.invoiceType,D=n.mobile,O=n.receiver,A=n.taxPayerNum,L=n.title,U=n.invoiceDescriptionList,Z=v.length>0&&v.indexOf("continuepay")>=0,M=3===S,F=(0,u.useState)(M),B=(0,h.Z)(F,2),H=B[0],G=(B[1],(0,gn.f)(300));return R?(0,pn.jsxs)(_.View,{children:[i?(0,pn.jsx)(qa,{text:t}):null,(0,pn.jsx)(Ga,{title:"\u53d1\u7968\u5f62\u5f0f",value:1===P?"\u7eb8\u8d28\u53d1\u7968":"\u7535\u5b50\u53d1\u7968",renderRight:function(){return H&&1===P?(0,pn.jsx)(_.Text,{style:{color:"#FF7700"},children:"\u5f85\u4ed8\u6b3e"}):1===P&&C?(0,pn.jsx)(_.Text,{style:{color:"#999999",fontSize:14},children:C}):null}}),g?(0,pn.jsx)(Ga,{title:"\u53d1\u7968\u91d1\u989d",value:"\xa5"+g+(b?"(\u542b\u914d\u9001\u8d39)":"")}):null,(0,pn.jsx)(Ga,{title:"\u53d1\u7968\u62ac\u5934",value:L+(A?"\n"+A:"")}),(0,pn.jsx)(Ga,{title:"\u4f01\u4e1a\u5730\u5740",value:N}),(0,pn.jsx)(Ga,{title:"\u4f01\u4e1a\u7535\u8bdd",value:y}),(0,pn.jsx)(Ga,{title:"\u5f00\u6237\u94f6\u884c\u540d\u79f0",value:j}),(0,pn.jsx)(Ga,{title:"\u5f00\u6237\u94f6\u884c\u8d26\u6237",value:w}),(0,pn.jsx)(Ga,{title:"\u53d1\u7968\u660e\u7ec6",value:T}),E&&2===P?(0,pn.jsx)(Ga,{title:"E-mail",value:E}):null,k&&1===P?(0,pn.jsx)(Ga,{title:"\u914d\u9001\u65b9\u5f0f",value:k}):null,b&&1===P?(0,pn.jsx)(Ga,{title:"\u914d\u9001\u8d39\u7528",value:"\xa5"+b}):null,O||D||I||1===P?(0,pn.jsx)(Ga,{title:"\u914d\u9001\u5730\u5740",value:O+" "+D+"<br/>"+I}):null,U?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(Fa,{textlist:U})}):null,(0,pn.jsx)(_.View,{style:{height:20}}),r&&R?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(za,{text:"\u4e0b\u8f7d\u53d1\u7968",onClick:function(){return G((function(){Ma(),c({invoiceId:R,orderId:f})}))}})}):null,1===P&&o&&V>0&&V<9?(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(za,{text:"\u67e5\u770b\u7269\u6d41",onClick:function(){return G((function(){Ma(),l()}))}})}):null,x||1!==P||!H||Z?null:(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(Ya,{text:"\u91cd\u65b0\u652f\u4ed8\xa510",onClick:function(){return G((function(){Ma(),s()}))}})})]}):null}function Ga(e){var n=e.title,t=e.value,i=(e.tips,e.renderRight);return t?(0,pn.jsxs)(_.View,{className:"flex_row order_detail_padding_horizontal_16 invoice_item",children:[(0,pn.jsx)(_.View,{className:"invoice_detail_layer_item_left",children:(0,pn.jsx)(_.Text,{children:n})}),(0,pn.jsx)(_.View,{className:"invoice_detail_layer_item_center",children:(0,pn.jsx)(_.Text,{dangerouslySetInnerHTML:{__html:t}})}),i?(0,pn.jsx)(_.View,{className:"invoice_detail_layer_item_right",children:i()}):null]}):null}function qa(e){var n=e.text;return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16 invoice_detail_layer_item_center",children:(0,pn.jsx)(_.Text,{children:n})})}function za(e){var n=e.text;return(0,pn.jsx)(_.View,(0,v.Z)((0,v.Z)({className:"order_detail_invoice_button"},e),{},{children:(0,pn.jsx)(_.Text,{children:n})}))}function Ya(e){var n=e.text;return(0,pn.jsx)(_.View,(0,v.Z)((0,v.Z)({className:"order_detail_invoice_re_pay_button"},e),{},{children:(0,pn.jsx)(_.Text,{children:n})}))}function $a(e){var n=e.state,t=n.invoiceButton,i=t.cannotApplyInvoice,r=t.invoiceInfo,o=null===r||void 0===r?void 0:r.invoiceDescriptionList;if(!o||!o.length){var a=i&&((null===r||void 0===r?void 0:r.invoiceInfo)||i.operationName);return(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:(0,pn.jsx)(_.View,{className:"invoice_tips_view",children:(0,pn.jsx)(_.Text,{className:"invoice_tips_text",children:a})})})}return(0,pn.jsx)(_.View,{style:{backgroundColor:"#ffffff"},children:(0,pn.jsx)(_.View,{className:"order_detail_padding_horizontal_16",children:o?(0,pn.jsx)(Fa,{textlist:o,isBan:!0}):null})})}var Ka=fn.gk.showPopup;function Wa(){var e=_n(),n=e.invoiceButton,t=e.requestParam,i=null===t||void 0===t?void 0:t.token,r=n.applyInvoice,o=n.cannotApplyInvoice,a=n.checkInvoice,s=n.downloadInvoice,c=n.downloadVipInvoice,l=n.invoiceInfo,d=n.superVipInvoiceInfo,u=o,m=r&&!o,_=!!(a||s||c||l&&l.invoiceId||d)&&!o;return!i||o||r||a||s||d?(0,pn.jsxs)(pn.Fragment,{children:[u&&!_?(0,pn.jsx)(Qa,{}):null,m?(0,pn.jsx)(Xa,{}):null,_?(0,pn.jsx)(Ja,{}):null]}):null}function Qa(){var e=_n(),n="\u67e5\u770b\u53d1\u7968",t=(0,pn.jsx)($a,{state:e}),i=function(){Ka({title:"\u53d1\u7968\u4fe1\u606f",children:t,className:"invoice_tips_view_min_height"})};return(0,pn.jsx)(_.View,{className:"border1px buttonContainerHighlightNormal",onClick:function(){i()},children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlight",children:n})})}function Ja(){var e=_n(),n=e.invoiceButton,t=e.basicInfo,i=t.orderId,r=(n.hasPaperInvoice,"\u67e5\u770b\u53d1\u7968"),o=hn(),a=o.doContinuePay,s=function(){console.log(e),a({oid:i}).then((function(e){console.log(e),Bn.doPay(e)}))},c=function(e){Bn.downloadInvoice(e)},l=function(){Bn.forwardExpress({orderId:i})},d=(0,pn.jsx)(Ba,{state:e,doPay:s,doDownload:c,doExpress:l}),u=function(){Ka({title:"\u53d1\u7968\u4fe1\u606f",children:d})};return(0,pn.jsx)(_.View,{className:"border1px buttonContainerHighlightNormal",onClick:function(){u()},children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlight",children:r})})}function Xa(){var e=_n(),n=e.basicInfo,t=n.orderId;return(0,pn.jsx)(_.View,{className:"border1px buttonContainerHighlightNormal",onClick:function(){Bn.applyInvoice({orderId:t})},children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlight",children:"\u6211\u8981\u53d1\u7968"})})}function es(e){var n=_n(),t=n.orderInfo,i=(null===t||void 0===t?void 0:t.rebate)||{},r="",o=i.rebateAmt,a=i.realRebateAmt,s=(i.cmtRebateStatus,i.cmtStatus),c=i.cmtAuditStatus,l=i.rebateStatus,d=i.cashBackType;return 3===s&&3===l&&o>0&&4===d?r="\u5df2\u7533\u8bf7\u70b9\u8bc4\u5956\u52b1\uff0c\u9884\u8ba17\u4e2a\u5de5\u4f5c\u65e5\u5185\u5b8c\u6210\u70b9\u8bc4\u5ba1\u6838\uff0c\u901a\u8fc7\u5373\u53ef\u83b7\u5f97".concat(o,"\u5143\u73b0\u91d1\u5956\u52b1\u3002"):3===s&&4===l&&a>0&&4===d?r="":2===c&&4===d&&(r="\u62b1\u6b49\uff0c\u60a8\u7684\u70b9\u8bc4\u672a\u901a\u8fc7\u5ba1\u6838\uff0c\u65e0\u6cd5\u83b7\u5f97\u5956\u52b1\uff0c\u8be6\u60c5\u54a8\u8be2\u643a\u7a0b\u5728\u7ebf\u5ba2\u670d\u3002"),r?(0,pn.jsxs)(_.View,{className:"footerTips footerRebatetips",children:[(0,pn.jsx)(_.View,{className:"icon-Information"}),(0,pn.jsx)(_.View,{className:"footerContent",children:(0,pn.jsx)(_.Text,{className:"footertext",children:r})})]}):null}function ns(e){var n=_n(),t=null===n||void 0===n?void 0:n.cancelReason,i=(0,u.useState)(t),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=(0,u.useState)(""),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=mn.useActions();(0,u.useEffect)((function(){a(o)}),[t]);var f=m.cancelOrder,x=m.refreshOrderByContinuePay,g=function(e){var n=e.id,t=e.desc;d(t);var i=(o||[]).map((function(e){return e.id===n?(0,v.Z)((0,v.Z)({},e),{},{checked:!0}):(delete e.checked,e)}));a(i)},N=function(){var n=(0,w.Z)((0,j.Z)().mark((function n(){var t,i,r,o;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,f(l);case 2:r=n.sent,null===e||void 0===e||null===(t=e.closeFloating)||void 0===t||t.call(e),o=(null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.msg)||"\u53d6\u6d88\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",p().showToast({title:o,icon:"none"}),x();case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,pn.jsxs)(_.View,{className:"order_detail_cancel_reason_layer_wrap","data-testid":Ie.cancelReasonLayer,children:[(0,pn.jsxs)(_.View,{className:"order_detail_cancel_reason_layer_inner",children:[(0,pn.jsx)(_.View,{className:"cancel_reason_text",children:"\u8ba2\u5355\u672a\u652f\u4ed8\uff0c\u53ef\u514d\u8d39\u53d6\u6d88"}),(o||[]).map((function(e,n){return(0,pn.jsx)(is,(0,v.Z)((0,v.Z)({hasBorder:n+1!==t.length},e),{},{chooseReason:g}),String(n))}))]}),(0,pn.jsx)(rs,{submitCancel:function(){return N()}})]})}var ts,is=function(e){var n=e.hasBorder,t=e.desc,i=e.id,r=e.chooseReason,o=e.checked;return(0,pn.jsxs)(_.View,{className:"reasonItem ".concat(n?"bottomBorder":""),onClick:function(){r({desc:t,id:i})},children:[(0,pn.jsx)(_.View,{className:"reasonItemLeft",children:t}),(0,pn.jsx)(_.View,{className:"reasonItemRight",children:(0,pn.jsx)(_.View,{className:o?"icon-RadioButton":"icon-Unselected"})})]})},rs=function(e){var n=function(n){n.stopPropagation(),e.submitCancel()};return(0,pn.jsx)(_.View,{className:"bottom_view",children:(0,pn.jsx)(_.View,{onClick:function(e){return n(e)},children:"\u53d6\u6d88\u8ba2\u5355"})})},os=t(24183),as=t(31934),ss=t(88064);try{var cs=t(62652).ES;ts=cs&&"function"==typeof cs.getInstance?cs.getInstance():{}}catch(e){console.warn("can't resolve '../../utils/index'")}var ls=(0,d.Z)((0,d.Z)({},os.Yw.CTRIP,{dev:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",fat:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",uat:"gateway.m.uat.qa.nt.ctripcorp.com/restapi",prod:"m.ctrip.com/restapi"}),os.Yw.TRIP,{dev:"uk.fat1.qa.nt.tripqate.com/restapi",fat:"uk.fat1.qa.nt.tripqate.com/restapi",uat:"uk.fat1.qa.nt.tripqate.com/restapi",prod:"www.trip.com/restapi"}),ds={dev:"offline.fx.fws.qa.nt.ctripcorp.com",fat:"offline.fx.fws.qa.nt.ctripcorp.com",uat:"offline.fx.uat.qa.nt.ctripcorp.com",prod:"offline.fx.ctripcorp.com"};function us(e,n,t){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=r?ds[e]:ls[t][e],s=null===(i=ts)||void 0===i?void 0:i.inApp;"prod"!==e&&(n==os.AH.NATIVE||"function"==typeof s&&s())&&t==os.Yw.TRIP&&(a=ls[os.Yw.CTRIP][e]);var c=ms(n),l="".concat(c).concat(a,"/soa2/28181/json/").concat(o);return l}function ms(e){return e==os.AH.NATIVE||e==os.AH.MiniProgram?"https://":"//"}function _s(e){return hs.apply(this,arguments)}function hs(){return hs=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o,a,s,c,l,d,u,m,_,h,f,p,x,g,w,N,y,T,I;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.env,i=n.client,r=n.api,o=n.variables,a=n.fetch,s=n.isOffline,c=n.logUbtDevTrace,l=n.ctType,d=void 0===l?os.Yw.CTRIP:l,u=n.apiPost,m=void 0!==u&&u,_=n.componentInfo,h=void 0===_?{}:_,f=n.traceLogId,e.prev=1,g={cid:n.cid},w={"x-ctx-Locale":o.baseInfo.locale,"x-ctx-Currency":o.baseInfo.currency},N=us(t,i,d,s,r),i!=os.AH.MiniProgram){e.next=13;break}return y={url:N,data:(0,v.Z)((0,v.Z)({},o),{},{head:(0,v.Z)((0,v.Z)({},g),{},{miniAuth:"82E962A110D92E1B58E8FB03B15FC60D4720855F333886095B968C3977D945F4"})}),method:"POST",timeout:as.o.mE},e.next=9,a(y);case 9:T=e.sent,p=T.data||{},e.next=24;break;case 13:if(i!=os.AH.NATIVE){e.next=20;break}return x={body:(0,v.Z)((0,v.Z)({},o),{},{head:g}),headers:w},e.next=17,a(N,x);case 17:p=e.sent,e.next=24;break;case 20:return x=(0,v.Z)((0,v.Z)({},o),{},{head:g}),e.next=23,a(N,x,{headers:w,timeout:as.o.mE});case 23:p=e.sent;case 24:return I={response:p,api:r,apiPost:m,componentInfo:h,traceLogId:f,ctType:d,baseInfo:null===o||void 0===o?void 0:o.baseInfo},fs(c,I),e.abrupt("return",p);case 29:e.prev=29,e.t0=e["catch"](1),console.log(e.t0.stack),c&&c({key:ss.NG.POST_EXCEPTION,value:{error:e.t0,funName:"post",errStack:null===e.t0||void 0===e.t0?void 0:e.t0.stack,api:r,apiPost:m,componentInfo:h,traceLogId:f,ctType:d,baseInfo:null===o||void 0===o?void 0:o.baseInfo}});case 33:case"end":return e.stop()}}),e,null,[[1,29]])}))),hs.apply(this,arguments)}function fs(e,n){if(e){var t=n.response,i=n.api,r=n.apiPost,o=n.componentInfo,a=n.traceLogId,s=n.ctType,c=n.baseInfo;try{var l;e({key:ss.NG.BFF_EXTENSION,value:{api:i,extensions:null===t||void 0===t||null===(l=t.ResponseStatus)||void 0===l?void 0:l.Extension,apiPost:r,componentInfo:o,traceLogId:a,ctType:s,baseInfo:c}})}catch(n){var d;e({key:ss.NG.POST_EXCEPTION,value:{error:n,funName:"logTraceCatMsgId",errStack:null===n||void 0===n?void 0:n.stack,api:i,extensions:null===t||void 0===t||null===(d=t.ResponseStatus)||void 0===d?void 0:d.Extension,apiPost:r,componentInfo:o,traceLogId:a,ctType:s,baseInfo:c}})}}}function ps(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1}function vs(e,n,t,i){try{var r=[void 0,null,NaN];n=[].concat(r,(0,y.Z)(n||[])),t&&(n=n.filter((function(e){return!t.includes(e)})));var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&!n.includes(e[a])&&("function"===typeof i&&"number"===typeof e[a]?o[a]=i(e[a]):o[a]=e[a]);return o}catch(n){return console.error("filterObject error."),e}}function xs(e,n){var t,i;if(!ps(e)){var r=e.toString(),o=(null===r||void 0===r||null===(t=r.split(".")[0])||void 0===t?void 0:t.length)||0,a=(null===r||void 0===r||null===(i=r.split(".")[1])||void 0===i?void 0:i.length)||0,s=o+a;return n?s>=6?24:s>=4?28:32:s>=6?15:s>=4?20:32}}function gs(e,n,t,i,r){var o,a,s=n-e,c=3e3;return s<=0?(t(),null):(s>c?(s-=c,o=i,a="task2"):(o=t,a="task1"),"function"===typeof console.group&&console.group(r||"mainKey"),console.log("%cNext task execution function\uff1a","color:#8000FF",a),console.log("%cNext task execution time\uff08ms\uff09\uff1a","color:#8000FF",s),"function"===typeof console.groupEnd&&console.groupEnd(),setTimeout((function(){o()}),s))}function js(e){var n=new Date(e),t=n.getHours(),i=n.getMinutes(),r=n.getSeconds(),o=n.getMilliseconds();return 1e3*(60*(60*(24-t)-i)-r)-o}t(32180)["window"];function ws(e,n){var t=Math.abs(e),i=n-(t+"").length;return(e<0?"-":"")+"0".repeat(i<0?0:i)+t}function Ns(){var e=(new Date).getTimezoneOffset(),n=Math.abs(e/60),t=Math.abs(e%60),i="".concat(e>0?"-":"+").concat(ws(Math.floor(n),2),":").concat(ws(t,2));return{desc:i,offset:e}}var ys=function(e){return e&&"object"===(0,Ui.Z)(e)?Array.isArray(e)?!e.length:!Object.keys(e).length:"number"!==typeof e&&(!e||null==e||" "===e||""===e||void 0===e||"undefined"===typeof e)},Ts={Title:"key.couponcenter.receivedetailspage.title",Claim:"key.couponcenter.popup.claimall",Received:"key.couponcenter.common.receivestatus_received",Claimed:"key.couponcenter.popup.claimed",ToUse:"key.couponcenter.popup.touse",UseDesc:"key.couponcenter.common.termsandconditions",DetailDesc:"key.couponcenter.common.details",CurrencyAmount:"key.couponcenter.common.currencyamount_tiers",CurrencyAmount_two:"key.couponcenter.common.percentage_tiers",Robbed:"key.couponcenter.popup.outofstock",NowDisdount:"key.couponcenter.common.currencyamount_off",claimFailed:"key.couponcenter.popup.failurenotice",claimSuccess:"key.couponcenter.popup.successnotice",timeZoneDesc:"key.couponcenter.common.validitytimezone",promoCode:"key.couponcenter.common.promocode",validityDate:"key.couponcenter.common.validity",receive:"key.couponcenter.common.receive",noContent:"key.couponcenter.receivedetailspage.usablecodes_prompt",subTitle:"key.couponcenter.receivedetailspage.usablecodes_subtitle",claimTitle:"key.couponcenter.receivedetailspage.receivablecodes_title",useTitle:"key.couponcenter.receivedetailspage.usablecodes_title",nullError:"key.couponcenter.popup.failurenotice.nullerror",newuseronly:"key.couponcenter.common.receivestatus_newuseronly",errortoast:"key.couponcenter.common.errortoast.common",detailsrealnameconfirm:"key.couponcenter.receivedetailspage.realnameconfirm",detailsrealnameconfirmgiveup:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",detailsrealnameconfirmauth:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",detailsrealnameclaimfail:"key.couponcenter.receivedetailspage.claimfailure.realname",popuprealnameconfirm:"key.couponcenter.receivepopup.realnameconfirm",popuprealnameconfirmgiveup:"key.couponcenter.receivepopup.realnameconfirm.giveup"},Is=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n,t){var i,r,o,a;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(0,v.Z)((0,v.Z)({},t),{},{api:as.o.bl.SERVER_TIME,variables:{utcOffset:n}}),e.prev=1,e.next=4,_s(i);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return r=e.t0,o=r.serverTime,a=void 0===o?"":o,e.abrupt("return",a);case 13:e.prev=13,e.t1=e["catch"](1),t.logTrace&&t.logTrace("getServerTime Error",{utcOffset:n,bffCommonRequestBody:t,error:JSON.stringify(e.t1)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(n,t){return e.apply(this,arguments)}}();function bs(e){var n=e.data,t=e.compVersion,i=e.componentType,r=e.fetch,o=e.auth,a=e.env,s=void 0===a?os.vw.Prod:a,c=e.client,l=e.logTrace,d=e.logUbtDevTrace,m=e.ensureUbtHasAttached,_=e.showToast,f=e.userLogin,p=e.couponOnShow,x=e.couponOnHide,g=e.Storage,N=e.traceLogId,y=e.logMetric,T=e.onDialogVisiableChange,I=e.floatingIconSetting,b=e.onClaim,S=e.ABTestId,V=e.alertStatusCallBack,C=e.userRealNameAuth,k=e.getUserRealNameResult,E=e.needCleanStorage,R=n.saleChannel,P=n.clientId,D=n.pageId,O=n.sceneId,A=n.resSlotData,L=n.locale,U=n.filters,Z=void 0===U?[]:U,M=n.miniType,F=n.shownewuserpromo,B="zh-CN"==L?os.Yw.CTRIP:os.Yw.TRIP,H=(0,u.useState)(!1),G=(0,h.Z)(H,2),q=G[0],z=G[1],Y=(0,u.useState)(!1),$=(0,h.Z)(Y,2),K=$[0],W=$[1],Q=(0,u.useState)(!1),J=(0,h.Z)(Q,2),X=J[0],ee=J[1],ne=(0,u.useState)(!1),te=(0,h.Z)(ne,2),ie=te[0],re=te[1],oe=(0,u.useState)(0),ae=(0,h.Z)(oe,2),se=ae[0],ce=ae[1],le=(0,u.useState)("Cannot participate"),de=(0,h.Z)(le,2),ue=de[0],me=de[1],_e=(0,u.useState)([]),he=(0,h.Z)(_e,2),fe=he[0],pe=he[1],ve=(0,u.useState)([]),xe=(0,h.Z)(ve,2),ge=xe[0],je=xe[1],we=(0,u.useState)([]),Ne=(0,h.Z)(we,2),ye=Ne[0],Te=Ne[1],Ie=(0,u.useState)({}),be=(0,h.Z)(Ie,2),Se=be[0],Ve=be[1],Ce=(0,u.useState)({}),ke=(0,h.Z)(Ce,2),Ee=ke[0],Re=ke[1],Pe=(0,u.useMemo)((function(){return Ns()}),[]),De=(0,u.useRef)(null),Oe=(0,u.useRef)(null),Ae=(0,u.useRef)(null),Le=(0,u.useRef)({}),Ue=(0,u.useRef)(!1),Ze=(0,u.useRef)(null).current,Me=(0,u.useRef)({});(0,u.useEffect)((function(){"iconStyle"in e&&console.error("the argument iconStyle has been abandoned , please replace it with floatingIconSetting. ")}),[]),(0,u.useEffect)((function(){!ys(Ee)&&k&&k(null,qe)}),[Ee]);var Fe=(0,u.useMemo)((function(){return{env:s,client:c,fetch:r,auth:o,logTrace:l,logUbtDevTrace:d,logMetric:y,ctType:B,cid:P}}),[e,B]),Be=(0,u.useMemo)((function(){return{pageId:D,componentId:as.o.CE.POPCOUPON.id,componentName:as.o.CE.POPCOUPON.name,componentVersion:t,ubtSourceKey:"coupon"}}),[]);function He(){return function(){console.log("Login Success"),Tn(null,(function(e){var n=e.canReceiveCoupon,t=e.displayCoupons;if(cn(t,n,Me.current),0===t.length&&_&&_({className:"coupon_toast",content:Ee[Ts.nullError]||"Your account is not currently eligible to claim promo codes. Thanks for your interest in this promotion!",duration:1500,needMask:!1,type:"failed"}),n&&n.length>0){var i=n.map((function(e){return e.promotionSecretId}));Vn(i||[],!0)}}))}}(0,u.useEffect)((function(){return m&&m(D.toString(),c),dn(),gn(),function(){De.current&&clearTimeout(De.current),Oe.current&&clearTimeout(Oe.current),Ae.current&&clearTimeout(Ae.current),T&&T(!1)}}),[JSON.stringify(e.data)]),(0,u.useEffect)((function(){T&&T(K),K?(p&&p(),En(as.o.NG.POPUP_EXPOSURE)):x&&x()}),[K]);var Ge=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("RealName Success"),Tn(null,(function(e){var n=e.canReceiveCoupon,t=e.displayCoupons;if(cn(t,n,Me.current),n&&n.length>0){var i=n.map((function(e){return e.promotionSecretId}));Vn(i||[],!0)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Ee[Ts.detailsrealnameclaimfail];_({className:"coupon_toast",content:e,duration:1500,needMask:!1,type:"failed"})},ze=function(){1===se?En(as.o.NG.REALNAME_POPUPALL_VERIFY_CLICK):2===se&&En(as.o.NG.REALNAME_POPUPSOME_VERIFY_CLICK),re(!1),E&&(Ze=new g(D,Se.sceneCode),Ze.remove&&Ze.remove()),C(s,Ge,qe)},Ye=function(){if(re(!1),1===se)En(as.o.NG.REALNAME_POPUPALL_REFUSE_CLICK);else if(2===se&&(En(as.o.NG.REALNAME_POPUPSOME_REFUSE_CLICK),ye&&ye.length>0)){var e=ye.map((function(e){return e.promotionSecretId}));Vn(e||[],!0)}};function $e(e){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o,a,s,c;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=Ze)||void 0===t?void 0:t.get();case 2:i=e.sent,r=i||{},o=r.popCount,a=void 0===o?0:o,s=r.lastTime,c={storage:{interval:n.interval,maxNumber:n.maxNumber,prePopCount:a,lastTime:s}},En(as.o.NG.POPUP_LOAD,c);case 6:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function We(e){Ze=new g(D,"".concat(e.sceneCode,"_FloatIcon"));var n=(new Date).getTime(),t={lastTime:n};Ze.set(t),z(!1)}function Qe(e){return Je.apply(this,arguments)}function Je(){return Je=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o,a;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ze=new g(D,"".concat(n.sceneCode,"_FloatIcon")),e.next=3,Ze.get();case 3:if(t=e.sent,i=(new Date).getTime(),r=t.lastTime,!Object.keys(t)||Object.prototype.hasOwnProperty.call(t,"lastTime")){e.next=10;break}return e.abrupt("return",!0);case 10:return o=864e5,a=r+o,e.abrupt("return",a<=i);case 13:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function Xe(e,n,t){return en.apply(this,arguments)}function en(){return en=(0,w.Z)((0,j.Z)().mark((function e(n,t,i){var r,o,a,s,c,l,d,u,m,_,h,f,p,v;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ze=new g(D,i.sceneCode),e.next=3,Ze.get();case 3:if(r=e.sent,o=i.interval,a=i.maxNumber,s=void 0===a?1:a,c=(new Date).getTime(),l=r||{},d=l.popCount,u=void 0===d?0:d,m=l.lastTime,_=void 0===m?0:m,o=o/s||48,s=1,o<48&&(o=48),!(s<=0||n&&n.length<=0)){e.next=12;break}return e.abrupt("return",!1);case 12:if(!Object.keys(r)||Object.prototype.hasOwnProperty.call(r,"interval")){e.next=22;break}if(h={interval:o,maxNumber:s,lastTime:c,popCount:u+1},!(t.length>0)){e.next=19;break}return Ze.set(h),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 20:e.next=35;break;case 22:if(f=60*(o||0)*60*1e3,p=_+f,!(p<=c)){e.next=34;break}if(v={interval:o,maxNumber:s,lastTime:c,popCount:u+1},!(t.length>0)){e.next=31;break}return Ze.set(v),e.abrupt("return",!0);case 31:return e.abrupt("return",!1);case 32:e.next=35;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e)}))),en.apply(this,arguments)}function nn(){}function tn(){X&&null===De.current&&(Vn(null,!1),De.current=setTimeout((function(){De.current=null}),1e3))}function rn(){z(!1),W(!0)}function on(){W(!1),Me.current.shoudReshowIcon&&z(!0)}function an(e,n,t){return sn.apply(this,arguments)}function sn(){return sn=(0,w.Z)((0,j.Z)().mark((function n(t,i,r){var o,a,s,c;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=!1,a=!1,n.next=4,Xe(t,i,r);case 4:return o=n.sent,o&&S&&(c=(null===e||void 0===e||null===(s=e.getABTest)||void 0===s?void 0:s.call(e))||"A",["A","C","D"].includes(c)&&(o=!1)),V&&V(o),n.next=9,Qe(r);case 9:a=n.sent,W(o),o&&En(as.o.NG.POPUP_EXPOSURE),null!==r&&void 0!==r&&r.shoudReshowIcon&&t.length>0&&!o&&a?z(!0):z(!1);case 13:case"end":return n.stop()}}),n)}))),sn.apply(this,arguments)}function cn(e,n,t){e.length<=0?(K&&W(!1),q&&z(!1)):K||q||an(e,n,t)}function ln(e){var n=[],t=[],i=[],r=[],o=[],a=[],s=[],c=[],l=[],d=[];return(e||[]).forEach((function(e){1===e.promotionStatus?2!=e.activityStatus&&e.activityStatus?1==e.activityStatus?r.push(e):3==e.activityStatus&&o.push(e):(e.requireRealName?t.push(e):i.push(e),n.push(e)):2===e.promotionStatus?a.push(e):3===e.promotionStatus?s.push(e):4===e.promotionStatus?c.push(e):7===e.promotionStatus&&l.push(e)})),d=e.filter((function(e){return[1,2,3,4,7].includes(e.promotionStatus)}))||[],{canReceiveCoupon:n,displayCoupons:d,canReceiveNeedRealNameCoupon:t,canReceiveNoNeedRealNameCoupon:i}}function dn(){return un.apply(this,arguments)}function un(){return un=(0,w.Z)((0,j.Z)().mark((function n(){var t,i,r,o,a,s,c,l,d,u,m,_,h,f,p,x,g,w;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.hasError){n.next=2;break}return n.abrupt("return");case 2:if(t="",!O){n.next=14;break}return n.next=6,wn();case 6:if(n.t0=n.sent,n.t0){n.next=9;break}n.t0={};case 9:r=n.t0,t=r.sceneCode,i=r,n.next=15;break;case 14:A&&A.sceneCode&&(t=A.sceneCode,i=JSON.parse(JSON.stringify(A)));case 15:if(o=I||{},a=o.style,s=o.canDrag,c=void 0===s?!!i.draggable:s,i.draggable=c,i.iconStyle=(0,v.Z)((0,v.Z)({},i.initPosition?i.iconStyle:{}),a),"boolean"===typeof F&&(i.showNewCoupons=F?"1":"0"),Ve(i),Me.current=i,!t){n.next=34;break}return n.next=24,Tn(i);case 24:d=n.sent,u=d.receivePromotionData,m=d.serverTime,_=(null===(l=u.list[0])||void 0===l?void 0:l.promotionList)||[],h=u.nextAvailableTime||"",f=ln(_),p=f.canReceiveCoupon,x=void 0===p?[]:p,g=f.displayCoupons,w=void 0===g?[]:g,Ue.current?cn(w,x,i):(Ue.current=!0,an(w,x,i)),mn(h,m),vn(m),$e(i);case 34:case"end":return n.stop()}}),n)}))),un.apply(this,arguments)}function mn(e,n){return _n.apply(this,arguments)}function _n(){return _n=(0,w.Z)((0,j.Z)().mark((function e(n,t){return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:Oe.current=gs(t,n,hn,(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fn();case 2:n=e.sent,t=n.nextTime,i=n.currentTime,mn(t,i);case 6:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function hn(){me(Le.current[Ts.Claim]||"Claim"),ee(!0)}function fn(){return pn.apply(this,arguments)}function pn(){return pn=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Tn(Me.current,null,!0);case 2:return n=e.sent,t=n.receivePromotionData,i=n.serverTime,r=t.nextAvailableTime||"",e.abrupt("return",{nextTime:r,currentTime:i});case 7:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function vn(e){return xn.apply(this,arguments)}function xn(){return xn=(0,w.Z)((0,j.Z)().mark((function e(n){var t;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,Is(Pe.offset,Fe);case 4:e.t0=e.sent;case 5:n=e.t0,t=js(parseInt(n)),Ae.current=setTimeout(fn,t);case 8:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function gn(){return jn.apply(this,arguments)}function jn(){return jn=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={sharkLocale:L,baseInfo:yn()},t=(0,v.Z)((0,v.Z)({},Fe),{},{api:as.o.bl.SHARK,variables:n,componentInfo:Be,traceLogId:N}),e.prev=2,e.next=5,_s(t);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:i=e.t0,r=i.data,o=void 0===r?{}:r,Re(o),Le.current=o,e.next=18;break;case 15:e.prev=15,e.t1=e["catch"](2),kn(e.t1);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),jn.apply(this,arguments)}function wn(){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return",{});case 2:return n={parameters:{sceneId:O,saleChannel:R},baseInfo:yn()},t=(0,v.Z)((0,v.Z)({},Fe),{},{api:as.o.bl.SCENE_CONFIG,variables:n,componentInfo:Be,traceLogId:N}),e.prev=4,e.next=7,_s(t);case 7:if(i=e.sent,r=i.data,o=i.typename,!r||o==as.o.k5){e.next=12;break}return e.abrupt("return",r);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),kn(e.t0);case 17:return e.abrupt("return",{});case 18:case"end":return e.stop()}}),e,null,[[4,14]])}))),Nn.apply(this,arguments)}var yn=function(){return{channelId:n.saleChannel,clientId:n.clientId,allianceId:n.allianceId,siteId:n.siteId,source:n.source,utcOffset:Pe.offset,locale:n.locale,currency:n.currency,miniType:M,outOpenId:n.outOpenId,requestScene:os.NT.PopClaim,version:t,componentType:i}};function Tn(e,n,t){return In.apply(this,arguments)}function In(){return In=(0,w.Z)((0,j.Z)().mark((function e(n,t,i){var r,o,a,s,c,l,d,u,m,_,h,f,p,v;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bn(Me.current);case 2:return o=e.sent,a=o.receivePromotionData,s=(null===(r=a.list[0])||void 0===r?void 0:r.promotionList)||[],c=ln(s),l=c.canReceiveCoupon,d=void 0===l?[]:l,u=c.displayCoupons,m=void 0===u?[]:u,_=c.canReceiveNeedRealNameCoupon,h=void 0===_?[]:_,f=c.canReceiveNoNeedRealNameCoupon,p=void 0===f?[]:f,v=0,d.length===h.length&&0!==d.length?v=1:d.length>h.length&&h.length>0&&(v=2),ce(v),Te(p),me(a.claimAllButtonText),ee(!a.disableClaimAllButton),!i&&pe(m),je(d),t&&t({canReceiveCoupon:d,displayCoupons:m}),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),In.apply(this,arguments)}function bn(e){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o,a,s,c,l,d,u,m,_,h,f,p,x,g,w,y;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n||{},i=t.sceneCode,r=void 0===i?Me.current.sceneCode:i,o=t.showNewCoupons,a=void 0===o?"0":o,r){e.next=4;break}if(n.sceneCode){e.next=4;break}return e.abrupt("return");case 4:return s={baseInfo:yn(),sceneParams:[{sceneCode:r,filterList:Z,shownewuserpromo:"1"===a}],utcOffset:Pe.offset},c=(0,v.Z)((0,v.Z)({},Fe),{},{api:as.o.bl.POP_COUPON,variables:s,componentInfo:Be,traceLogId:N}),e.prev=6,e.next=9,_s(c);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return l=e.t0,d=l.list,u=void 0===d?[]:d,m=l.claimAllButtonText,_=void 0===m?"":m,h=l.disableClaimAllButton,f=void 0!==h&&h,p=l.nextAvailableTime,x=void 0===p?"":p,g=l.serverTime,w=void 0===g?"":g,y={list:u,claimAllButtonText:_,disableClaimAllButton:f,nextAvailableTime:x},e.abrupt("return",{receivePromotionData:y,serverTime:w});case 27:e.prev=27,e.t1=e["catch"](6),kn(e.t1);case 30:case"end":return e.stop()}}),e,null,[[6,27]])}))),Sn.apply(this,arguments)}function Vn(){return Cn.apply(this,arguments)}function Cn(){return Cn=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i,r,o,a,c,l,d,u,m=arguments;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=m.length>0&&void 0!==m[0]?m[0]:[],t=m.length>1?m[1]:void 0,i=[],i=!n||n.length<=0?ge.map((function(e){return e.promotionSecretId})):n,r={baseInfo:yn(),promotionSecretIds:i},o=(0,v.Z)((0,v.Z)({},Fe),{},{api:as.o.bl.CLAIM,variables:r,componentInfo:Be,traceLogId:N}),e.prev=6,e.next=9,_s(o);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:a=e.t0,c=a.claimResultList,l=a.typename,d=a.resultStatus,u=c&&c[0],l==as.o.k5?d&&d.code==as.o.rG.AUTH_FAILURE&&(t?_&&_({className:"coupon_toast",content:Ee[Ts.claimFailed]||"Failed to claim, please contact Trip.com customer support",duration:1500,needMask:!1,type:"failed"}):(E&&(Ze=new g(D,Se.sceneCode),Ze.remove&&Ze.remove()),f(s,He(),nn))):u&&u.code==as.o.rG.REALNAME_FAILURE?(re(!0),En(as.o.NG.REALNAME_DETAIL_EXPO)):(u.success&&Tn(),u.showToast&&u.message&&_({className:"coupon_toast",content:u.message,duration:1500,needMask:!1,type:u.toastType||"failed"}),b&&b({success:u.success,promotionId:u.promotionId,couponCode:u.couponCode,promotionSecretId:u.promotionSecretId,code:u.code,message:u.message})),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](6),kn(e.t1);case 23:case"end":return e.stop()}}),e,null,[[6,20]])}))),Cn.apply(this,arguments)}function kn(e){console.error(e),En(as.o.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var En=(0,u.useCallback)((function(n,t){var i;if(l){var r={compId:Be.componentName,ttdVer:Be.componentVersion,sceneCode:(null===Me||void 0===Me||null===(i=Me.current)||void 0===i?void 0:i.sceneCode)||"sceneCode is empty",state:{isShowFloat:q,isShowCouponDialog:K,isShowReceiveBtn:X,claimAllButtonText:ue,promotionList:(fe||[]).map((function(e){return e.promotionId})),slot:Me},props:(0,v.Z)({},e.data)};try{l({key:n,value:t?(0,v.Z)((0,v.Z)({},t),r):r})}catch(e){console.error(e)}}}),[e]),Rn=(0,u.useCallback)((function(e){En(as.o.NG.POP_CLICK,{module:e})}),[]);return{modelState:{isShowFloat:q,isShowCouponDialog:K,isShowReceiveBtn:X,promotionList:fe,slot:Se,sharkKey:Ee,claimAllButtonText:ue,realNameCase:se,canReceiveNoNeedRealNameCoupon:ye,showRealNameModal:ie},modelAction:{setShowFloat:z,setShowCouponDialog:W,setShowReceiveBtn:ee,setPromotionList:pe,setSlot:Ve},ctrl:{handleClickFloatIcon:rn,handleClickCloseFloatIcon:We,handleClose:on,claimAllCoupon:tn,loginSuccessCb:He(),handleTraceClick:Rn,handleRealNameClick:ze,handleRealNameClose:Ye}}}var Ss=t(62652),Vs="ttd_rn_popcoupon_",Cs="ttd_front_marketing",ks=function(){function e(n,t){(0,o.Z)(this,e),(0,d.Z)(this,"key",void 0),(0,d.Z)(this,"storage",void 0),(0,d.Z)(this,"domain",void 0),this.key=Vs+n+"_"+t,this.domain=Cs}return(0,a.Z)(e,[{key:"get",value:function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=Gn().getStorageSync(this.key),"string"===typeof n)try{n=JSON.parse(n)}catch(e){n={}}return e.abrupt("return",n);case 6:return e.prev=6,e.t0=e["catch"](0),console.log("%c getStorage failed err:",e.t0,"color:red"),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function n(){return e.apply(this,arguments)}return n}()},{key:"set",value:function(e){if("string"!==typeof e)try{e=JSON.stringify(e)}catch(e){}Gn().setStorage({key:this.key,data:e})}},{key:"remove",value:function(){this.set({})}}]),e}(),Es=ks,Rs=function(e){var n=e.style,t=e.children;return(0,pn.jsx)(_.View,{className:"tangram-mask",style:(0,v.Z)({position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1e4},n),children:t})},Ps=u.memo(Rs),Ds={modal:{width:"281px",paddingTop:"28px",paddingLeft:"16px",paddingRight:"16px",paddingBottom:"16px",borderRadius:"8px",backgroundColor:"white",boxSizing:"border-box"},content:{display:"inline-block",fontSize:"17px",lineHeight:"23px",fontFamily:"PingFangSC-Medium",textAlign:"center"},btns:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"26px"},cancel:{paddingLeft:"6.5px",paddingRight:"6.5px",minWidth:"118.5px",height:"36px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center"},ok:{flex:1,marginLeft:"8px",paddingLeft:"6.5px",paddingRight:"6.5px",maxWidth:"118.5px",height:"36px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center"},text:{flex:1,fontSize:"15px",fontFamily:"PingFangSC-Regular",textAlign:"center"}},Os=function(e){var n=e.visible,t=e.content,i=e.textColor,r=void 0===i?"#333333":i,o=e.cancelText,a=void 0===o?"\u53d6\u6d88":o,s=e.okText,c=void 0===s?"\u786e\u8ba4":s,l=e.cancelButtonStyle,d=void 0===l?{}:l,u=d.color,m=void 0===u?"#0086F6":u,h=d.backgroundColor,f=void 0===h?"white":h,p=d.borderColor,x=void 0===p?"#2698F7":p,g=e.okButtonStyle,j=void 0===g?{}:g,w=j.color,N=void 0===w?"white":w,y=j.backgroundColor,T=void 0===y?"#0086F6":y,I=j.borderColor,b=e.style,S=void 0===b?{}:b,V=e.maskStyle,C=e.handleCancel,k=e.handleOK;return n?(0,pn.jsx)(Ps,{style:V,children:(0,pn.jsxs)(_.View,{style:(0,v.Z)((0,v.Z)({},Ds.modal),S),children:[(0,pn.jsx)(_.Text,{style:(0,v.Z)((0,v.Z)({},Ds.content),{},{color:r}),children:t}),(0,pn.jsxs)(_.View,{style:Ds.btns,children:[(0,pn.jsx)(_.View,{style:(0,v.Z)((0,v.Z)({},Ds.cancel),{},{backgroundColor:f,borderColor:x}),onClick:C,children:(0,pn.jsx)(_.Text,{style:(0,v.Z)((0,v.Z)({},Ds.text),{},{color:m}),children:a})}),(0,pn.jsx)(_.View,{style:(0,v.Z)((0,v.Z)({},Ds.ok),{},{backgroundColor:T,borderColor:I}),onClick:k,children:(0,pn.jsx)(_.Text,{style:(0,v.Z)((0,v.Z)({},Ds.text),{},{color:N}),children:c})})]})]})}):null},As=u.memo(Os),Ls="#3264FF",Us="#fff",Zs="#999",Ms="#FFA50A",Fs="#eee",Bs=["sharkKey","toUseBtnShow","expanded","changeExpandedCode","handleTraceClick"],Hs=u.useCallback;u.useState,u.useRef,u.useEffect;function Gs(e){var n=e.sharkKey,t=e.toUseBtnShow,i=e.expanded,r=e.changeExpandedCode,o=e.handleTraceClick,a=(0,Un.Z)(e,Bs),s=a.promotionStatus,c=a.jumpUrl,l=a.promotionId,d=a.couponCode,u=a.deductionInfoShown,m=a.couponName,h=a.shortRemark,f=a.useDateShown,p=a.detailRemarkShown,v=a.couponType,x="".concat(2*xs(u.amount,!1),"rpx"),g=2==s||3==s?"https://dimg04.c-ctrip.com/images/0AS3q1200087hg3qwC682.png":"",j=Hs((function(e){o("ToUse"),(0,Ss.tv)(c)}),[c]);return(0,pn.jsxs)(_.View,{className:"couponItem ttd_mk_popcouponcard",children:[(0,pn.jsxs)(_.View,{className:"couponItem_body",children:[(0,pn.jsx)(_.View,{className:"couponItem_body_left",children:u.fullDeduction?(0,pn.jsx)(_.View,{className:"deduction_fullamount",children:u.desc}):(0,pn.jsxs)(_.View,{className:"info_deduction_view_flexBox",children:[(0,pn.jsx)(_.View,{className:"deduction_part1",children:u.desc}),4==u.type?(0,pn.jsx)(_.View,{className:"deduction_part2",children:u.desc}):(0,pn.jsxs)(_.View,{className:"deduction_part2",children:[(0,pn.jsx)(_.View,{className:"deduction_amount",style:{fontSize:x},children:u.amount}),(0,pn.jsx)(_.View,{className:"deduction_discountUnit",children:u.discountUnit})]})]})}),(0,pn.jsxs)(_.View,{className:"couponItem_body_right",children:[(0,pn.jsxs)(_.View,{className:"couponItem_body_right_top",children:[(0,pn.jsx)(_.View,{className:"couponName",children:m}),(0,pn.jsx)(_.View,{className:"couponDesc",children:h}),(0,pn.jsx)(_.View,{className:"couponUseDate",children:f})]}),(0,pn.jsxs)(_.View,{className:"couponItem_body_right_bottom",onClick:function(){r(l)},children:["".concat(n[Ts.DetailDesc]||"\u8be6\u60c5\u8bf4\u660e"),i?(0,pn.jsx)(_.View,{className:"arrow",children:"\ue946"}):(0,pn.jsx)(_.View,{className:"arrow",children:"\ue945"})]}),!!g&&(0,pn.jsx)(_.View,{className:"stamp_img",children:(0,pn.jsx)(_.Image,{src:g,className:"stamp_img_img",mode:"scaleToFill"})}),2==s&&t&&!!c&&(0,pn.jsx)(_.View,{className:"toUseBtn",onClick:j,children:"".concat(n[Ts.ToUse]||"\u53bb\u4f7f\u7528")}),7==s&&(0,pn.jsx)(_.View,{className:"toUseBtn",style:{backgroundColor:"#eeeeee",borderColor:"#eeeeee",color:"#999999"},children:"".concat(n[Ts.newuseronly]||"\u65b0\u5ba2\u4e13\u4eab")}),4==s&&(0,pn.jsx)(_.View,{className:"toUseBtn",style:{backgroundColor:"#eeeeee",borderColor:"#eeeeee",color:"#999999"},children:"".concat(n[Ts.Robbed]||"\u5df2\u62a2\u5149")})]})]}),(0,pn.jsxs)(_.View,{className:"cardDetail ".concat(i?"":"hidden"),children:[(0,Ss.yo)(u.deductionList||[],2).map((function(e,n){return(0,pn.jsx)(_.View,{className:"detail_deduction_list",children:(e||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"detail_deduction_item",children:e},"deduction_item"+n)}))},"deduction_list"+n)})),!!p&&p.length>0&&(0,pn.jsx)(_.View,{className:"detail_remark",children:(p||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{className:"detail_remark_list",children:[(0,pn.jsx)(_.View,{className:"circlePointer"}),e]},"remark_list"+n)}))}),1==v&&(0,pn.jsx)(_.View,{className:"detail_remark_code",children:"".concat(n[Ts.promoCode]||"\u4f18\u60e0\u5238\u7801","\uff1a").concat(d)})]})]})}var qs=Gs,zs=u.useMemo,Ys=u.useCallback,$s=u.useState,Ks=u.forwardRef((function(e,n){e.data.locale;var t=zs((function(){return Ns()}),[]),i=bs((0,v.Z)((0,v.Z)({},e),{},{env:(0,Ss.qL)(),client:os.AH.MiniProgram,compVersion:Ss.Ke,componentType:os.Lm.Taro,miniType:(0,Ss.H9)(),showToast:function(e){Gn().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:Ss.qn,logMetric:Ss.HR,logUbtDevTrace:Ss.q6,fetch:Ss.jJ,auth:Ss.Y8&&Ss.Y8.user.auth||(0,Ss.v0)(),userLogin:Ss.Sx,Storage:Es,onDialogVisiableChange:function(e){},userRealNameAuth:Ss.RO})),r=i.modelState,o=r.isShowFloat,a=r.isShowCouponDialog,s=r.isShowReceiveBtn,c=r.promotionList,l=r.slot,d=r.sharkKey,u=r.claimAllButtonText,m=r.realNameCase,f=r.showRealNameModal,p=(i.modelAction,i.ctrl),x=p.handleClickFloatIcon,g=p.handleClickCloseFloatIcon,j=p.handleClose,w=p.claimAllCoupon,N=(p.loginSuccessCb,p.handleTraceClick),y=p.handleRealNameClick,T=p.handleRealNameClose,I=$s(0),b=(0,h.Z)(I,2),S=b[0],V=b[1],C=l.toUseButton,k=zs((function(){var e=-480!==t.offset?115:105;switch(c.length){case 1:return e;case 2:return 215;default:return 267}}),[c,t]),E=Ys((function(e){V(S!=e?e:0)}),[S]),R=Ys((function(){var e=l.clickLink,n=void 0===e?[]:e,t=n.find((function(e){return"clickLinkNative"===e.key||"clickLinkHttp"===e.key||"clickLinkHybrid"===e.key})),i=t&&t.value||"";(0,Ss.tv)(i)}),[l]),P=zs((function(){var n;return(0,pn.jsxs)(_.View,{className:"float_icon ".concat(o?"":"hidden"),style:vs(null===(n=e.floatingIconSetting)||void 0===n?void 0:n.style),children:[!!l.hoverIconImage&&(0,pn.jsx)(_.Image,{onClick:function(e){g(l)},className:"closeIconImg",src:"https://dimg04.c-ctrip.com/images/0306m12000aq6hzuf7EA5.png",mode:"widthFix"}),!!l.hoverIconImage&&(0,pn.jsx)(_.Image,{onClick:function(e){x(),N("FloatingIcon")},className:"iconImg",src:l.hoverIconImage,mode:"widthFix"})]})}),[o,l]),D=(0,pn.jsxs)(_.View,{className:"mainBody ".concat(a?"":"hidden"),children:[(0,pn.jsx)(_.View,{className:"mainBody_mask",onClick:function(){j()}}),(0,pn.jsxs)(_.View,{className:"mainBody_couponLayer",children:[!!l.headImage&&(0,pn.jsx)(_.View,{className:"mainBody_couponLayer_headerImg",children:(0,pn.jsx)(_.Image,{className:"mainBody_couponLayer_headerImg",src:l.headImage})}),-480!==t.offset&&(0,pn.jsx)(_.View,{className:"timeZone",children:"".concat((d[Ts.timeZoneDesc]||"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT $(0)").replace(/\$\(\d+\)/gi,t.desc))}),(0,pn.jsxs)(_.ScrollView,{className:"mainBody_couponLayer_scrollBody",style:{backgroundColor:Ls,height:k},enableFlex:!0,scrollY:!0,scrollWithAnimation:!0,children:[!!l.couponBgImage&&(0,pn.jsx)(_.Image,{className:"mainBody_couponLayer_scrollBody_img",src:l.couponBgImage,mode:"scaleToFill"}),(0,pn.jsxs)(_.View,{className:"coupon_scrollView",children:[(0,pn.jsx)(_.View,{style:{width:"100%",height:-480!==t.offset?"16rpx":0}}),(c||[]).map((function(e){return(0,pn.jsx)(qs,(0,v.Z)((0,v.Z)({},e),{},{expanded:e.promotionId==S,changeExpandedCode:E,toUseBtnShow:C,sharkKey:d,handleTraceClick:N}),e.promotionId)}))]})]}),(0,pn.jsxs)(_.View,{className:"mainBody_couponLayer_scrollBody_receiveBtn",style:{backgroundColor:Ls},children:[!!l.collectionImage&&(0,pn.jsx)(_.Image,{className:"mainBody_couponLayer_scrollBody_receiveBtn_img",src:l.collectionImage,mode:"scaleToFill"}),(0,pn.jsx)(_.View,{className:"mainBody_couponLayer_scrollBody_receiveBtn_button",style:{color:s?l.collectionColor||Us:Zs,backgroundColor:s?l.collectionBackgroundColor||Ms:Fs},onClick:function(e){w(),N("OneKeyClaim")},children:"".concat(u)})]}),!!l.bannerImage&&(0,pn.jsx)(_.View,{className:"adBanner",onClick:function(e){R(),N("Banner")},children:(0,pn.jsx)(_.Image,{className:"adBanner_img",src:l.bannerImage,mode:"scaleToFill"})}),(0,pn.jsx)(_.View,{className:"close_icon_box",onClick:function(e){j(),N("CloseByX")},children:(0,pn.jsx)(_.View,{className:"close_icon"})})]}),f&&(0,pn.jsx)(As,{visible:f,content:1===m?d[Ts.detailsrealnameconfirm]:d[Ts.popuprealnameconfirm],okText:d[Ts.detailsrealnameconfirmauth],cancelText:1===m?d[Ts.detailsrealnameconfirmgiveup]:d[Ts.popuprealnameconfirmgiveup],handleOK:y,handleCancel:T})]});return(0,pn.jsxs)(_.View,{children:[P&&P,D&&D]})})),Ws=Ks;function Qs(e){var n=e.logTrace,t=e.data,i=e.logMetric,r=e.logUbtDevTrace,o=e.hasError,a=e.fetch,s=e.onClose,c=e.onLoad,l=e.traceLogId,d=e.visible,m=e.compVersion,_=e.componentType,f=e.miniType,p=e.firstDidAmount,x=e.onVisibleChange,g=e.expandPromotionId,N=e.clientEnv,y=(0,u.useState)(g),T=(0,h.Z)(y,2),I=T[0],b=T[1],S=(0,u.useState)(d),V=(0,h.Z)(S,2),C=V[0],k=V[1],E=(0,u.useState)([]),R=(0,h.Z)(E,2),P=R[0],D=R[1],O=(0,u.useState)({}),A=(0,h.Z)(O,2),L=A[0],U=A[1],Z=(0,u.useMemo)((function(){return Ns()}),[]);(0,u.useEffect)((function(){b(g)}),[g]);var M=(0,u.useMemo)((function(){return{pageId:t.pageId,componentId:ss.CE.CROSS_COUPON.id,componentName:ss.CE.CROSS_COUPON.name,componentVersion:m}}),[]),F=(0,u.useMemo)((function(){return{channelId:t.saleChannel,clientId:t.clientId,utcOffset:Z.offset,locale:t.locale,currency:t.currency,rmsToken:t.rmsToken,outOpenId:t.outOpenId,requestScene:os.NT.CrossCoupon,version:m,componentType:_,miniType:f}}),[e.data,Z]);(0,u.useEffect)((function(){k(d)}),[d]),(0,u.useEffect)((function(){x&&x(C)}),[C]),(0,u.useEffect)((function(){return p&&p(),function(){x&&x(!1)}}),[]),(0,u.useEffect)((function(){C&&Y(t.orderId?ss.NG.CROSS_AFTERBOOKING_EXPOSURE:ss.NG.CROSS_BEFOREBOOKING_EXPOSURE)}),[C]),(0,u.useEffect)((function(){H()}),[JSON.stringify(t),o]),(0,u.useEffect)((function(){q()}),[t.locale]);var B=(0,u.useMemo)((function(){return{env:(null===N||void 0===N?void 0:N.env)||t.env,client:null===N||void 0===N?void 0:N.clientType,ctType:null===N||void 0===N?void 0:N.ctType,fetch:a,logTrace:n,logMetric:i,logUbtDevTrace:r,cid:t.clientId}}),[e]);function H(){return G.apply(this,arguments)}function G(){return G=(0,w.Z)((0,j.Z)().mark((function e(){var n,i,r,a,s,d,u,m,_;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={baseInfo:F},t.orderId?n.businessId=t.orderId:t.sceneParam&&(n.sceneParam={sceneCode:null===(i=t.sceneParam)||void 0===i?void 0:i.sceneCode,filterList:null===(r=t.sceneParam)||void 0===r?void 0:r.filters,shownewuserpromo:null===(a=t.sceneParam)||void 0===a?void 0:a.shownewuserpromo}),s=(0,v.Z)((0,v.Z)({},B),{},{api:as.o.bl.CROSS_COUPON,variables:n,componentInfo:M,traceLogId:l}),e.next=8,_s(s);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:d=e.t0,u=d.list,m=u||[],D(m),_=m.map((function(e){var n={promotionId:e.promotionId,displayName:e.displayName,couponCode:e.couponCode,couponStartDate:e.couponStartDate,couponDisableDate:e.couponDisableDate,promotionLabel:e.promotionLabel,businessLineType:e.businessLineType,customerNewOrOldName:e.customerNewOrOldName,businessLineName:e.businessLineName,deductionAmountLabel:e.deductionAmountLabel,toUseLink:e.toUseLink};return n})),c&&c(_),Y(as.o.NG.CROSS_ONLOAD,_),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](2),z(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20]])}))),G.apply(this,arguments)}var q=(0,u.useCallback)((0,w.Z)((0,j.Z)().mark((function e(){var n,i,r,o,a;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={sharkLocale:t.locale,baseInfo:F},i=(0,v.Z)((0,v.Z)({},B),{},{api:as.o.bl.SHARK,variables:n,componentInfo:M,traceLogId:l}),e.prev=2,e.next=5,_s(i);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:r=e.t0,o=r.data,a=void 0===o?{}:o,U(a),e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](2),z(e.t1);case 17:case"end":return e.stop()}}),e,null,[[2,14]])}))),[t.locale,t.env]);function z(e){console.error(e),Y(ss.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var Y=function(i,r){var o;if(n){var a={compId:M.componentName,ttdVer:M.componentVersion,state:{visible:C,expandId:I},props:(0,v.Z)((0,v.Z)({},e.data),{},{visible:e.visible,title:e.title})};t.orderId?a.orderId=t.orderId:a.sceneCode=null===(o=t.sceneParam)||void 0===o?void 0:o.sceneCode;try{n({key:i,value:r?(0,v.Z)((0,v.Z)({},r),a):a})}catch(e){console.error(e)}}};function $(e,n){Y(t.orderId?ss.NG.CROSS_AFTERBOOKING_CLICK:ss.NG.CROSS_BEFOREBOOKING_CLICK,{module:e,strategyid:n})}function K(){console.log("invoke handleClose"),k(!1),$("CloseByX"),s&&s()}return{modelState:{visible:C,expandId:I,couponList:P,sharkData:L,componentInfo:M},modelAction:{setExpandId:b},ctrl:{handleClose:K,handleTraceClick:$}}}var Js=Qs,Xs=u.useEffect,ec=u.forwardRef,nc=u.useState,tc=(u.useCallback,ec((function(e,n){var t=nc(""),i=(0,h.Z)(t,2),r=i[0],o=i[1],a=nc(!1),s=(0,h.Z)(a,2),c=s[0],l=s[1],d=nc(!1),m=(0,h.Z)(d,2),f=m[0],p=m[1],x=e.data,g=e.title,N=e.style,y=e.popoverLevel,T=void 0===y?1:y,I=(0,v.Z)((0,v.Z)({},e),{},{compVersion:Ss.Ke,componentType:os.Lm.Taro,miniType:(0,Ss.H9)(),showToast:function(e){Gn().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:Ss.qn,logUbtDevTrace:Ss.q6,logMetric:Ss.HR,auth:Ss.Y8&&Ss.Y8.user.auth||(0,Ss.v0)(),fetch:Ss.jJ,ensureUbtHasAttached:null,ref:n,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec crossCoupon firstDidAmount","color:yellow"),e.next=3,(0,Ss.So)();case 3:n=e.sent,n&&n.safeArea&&n.safeArea.top&&n.safeArea.top>20&&(l(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}),b=Js(I),S=b.modelState,V=b.modelAction,C=b.ctrl,k=S.couponList,E=S.sharkData,R=S.visible,P=S.expandId,D=V.setExpandId,O=C.handleClose,A=C.handleTraceClick,L=function(e){(0,Ss.tv)(e)};Xs((function(){R?(console.log("show"),o(""),Gn().nextTick((function(){p(!0)}))):(console.log("hide"),p(!1),setTimeout((function(){o("displayNone")}),100))}),[R]),(0,Hn.useDidShow)((function(){})),(0,Hn.useDidHide)((function(){})),(0,Hn.usePullDownRefresh)((function(){}));var U=x.orderId?os.Qo.AfterBooking:os.Qo.BeforeBooking,Z=u.useCallback((function(){var e={};return T>1?e.top=0:k&&0!=k.length||(e.top=320),null!==N&&void 0!==N&&N.top?e.top=N.top:T>1&&(e.borderRadius=0),null!==N&&void 0!==N&&N.zIndex&&(e.zIndex=N.zIndex+1),e}),[N,k]),M=u.useMemo((function(){return Z()}),[Z]);return(0,pn.jsxs)(_.View,{className:"ttd_mkt_layout ".concat(f?"shown":"hidden"),children:[(0,pn.jsx)(_.View,{className:"ttdmkt_crs_cover ".concat(r),onClick:function(){O(),A("CloseByX")},catchMove:!0}),(0,pn.jsxs)(_.View,{className:"ttdmkt_crs_main ".concat(r),catchMove:!0,style:M,children:[(0,pn.jsxs)(_.View,{className:"crs_header",children:[(0,pn.jsx)(_.View,{className:"crs_header_close ".concat(T>1?"crs_back_icon":"crs_close_icon"),hoverClass:"crs_close_active",onClick:function(){O()}}),(0,pn.jsx)(_.View,{className:"crs_header_title",children:g||"".concat(E[as.m.CROSS_TITLE]||"\u8d60\u5238")}),(0,pn.jsx)(_.View,{className:"crs_header_right"})]}),(0,pn.jsxs)(_.ScrollView,{className:"crs_body",scrollY:!0,scrollWithAnimation:!0,style:c?{paddingBottom:20}:{},children:[(0,pn.jsx)(_.View,{className:"crs_tips_body",children:U==os.Qo.AfterBooking?(0,pn.jsx)(_.Text,{className:"crs_tips_text",children:"".concat(E[as.m.CROSS_AFTERBOOKING_SUBTITLE]||"\u4f18\u60e0\u5238\u5df2\u5230\u8d26\uff0c\u53ef\u5728\u201c\u6211\u7684\u201d>\u201c\u4f18\u60e0\u5238\u201d\u4e2d\u67e5\u770b")}):(0,pn.jsx)(_.Text,{className:"crs_tips_text",children:"".concat(E[as.m.CROSS_BEFOREBOOKING_SUBTITLE]||"*\u652f\u4ed8\u6210\u529f\u540e\uff0c\u4ee5\u4e0b\u4f18\u60e0\u5238\u5c06\u81ea\u52a8\u53d1\u653e\u81f3\u60a8\u7684\u8d26\u6237")})}),null===k||void 0===k?void 0:k.map((function(e,n){var t,i,r;if(!e.promotionLabel)return null;var o=U===os.Qo.AfterBooking&&e.toUseLink,a=e.promotionId==P;return(0,pn.jsxs)(_.View,{className:"crs_block",children:[(0,pn.jsxs)(_.View,{className:"crs_block_hd",children:[(0,pn.jsxs)(_.View,{className:"crs_block_hd_name",onClick:function(){D(a?null:e.promotionId),A("Detail",e.promotionId)},children:[(0,pn.jsx)(_.Image,{className:"crs_block_hd_img",src:e.iconImageUrl}),(0,pn.jsxs)(_.View,{className:"crs_block_hd_tag ".concat(o?"withTouse":""),children:[(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.Text,{className:"crs_block_hd_p1",children:"".concat(null!==(t=e.businessLineName)&&void 0!==t?t:"").concat(null!==(i=e.customerNewOrOldName)&&void 0!==i?i:"")}),(0,pn.jsx)(_.Text,{className:"crs_block_hd_p2",children:e.deductionAmountLabel})]}),o&&(0,pn.jsxs)(_.View,{className:"crs_op_detail withTouse",onClick:function(){D(a?null:e.promotionId),A("Detail",e.promotionId)},children:[(0,pn.jsx)(_.Text,{className:"crs_op_detail_txt",children:"".concat(E[as.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,pn.jsx)(_.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,pn.jsx)(_.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]})]}),o?(0,pn.jsx)(_.View,{className:"crs_op_touse",onClick:function(){L(e.toUseLink),A("ToUse",e.promotionId)},children:(0,pn.jsx)(_.Text,{className:"crs_op_touse_text",children:"".concat(E[as.m.POP_TOUSE]||"\u53bb\u4f7f\u7528")})}):(0,pn.jsxs)(_.View,{className:"crs_op_detail",onClick:function(){D(a?null:e.promotionId),A("Detail",e.promotionId)},children:[(0,pn.jsx)(_.Text,{className:"crs_op_detail_txt",children:"".concat(E[as.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,pn.jsx)(_.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,pn.jsx)(_.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]}),a&&(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"crs_cutting_line  ".concat(o?"with_touse":"")}),(0,pn.jsxs)(_.View,{className:"crs_block_bd",children:[U===os.Qo.AfterBooking&&(0,pn.jsxs)(_.View,{className:"crs_block_bd_item",children:[(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_title",children:"".concat(E[as.m.CROSS_VALIDPERIOD_TIITLE]||"\u4f7f\u7528\u6709\u6548\u671f")}),(0,pn.jsx)(_.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_content",children:e.useDateShown||""})})]}),(0,pn.jsxs)(_.View,{className:"crs_block_bd_item",children:[(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_title",children:e.displayName}),(0,pn.jsx)(_.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,pn.jsxs)(_.View,{className:"crs_block_bd_item_content_row",children:[(0,pn.jsx)(_.View,{className:"crs_block_bd_item_content_dot"}),(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_content",children:e.shortRemark})]})})]}),(0,pn.jsxs)(_.View,{className:"crs_block_bd_item",children:[(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_title",children:"".concat(E[as.m.CROSS_USEDETAIL]||"\u4f7f\u7528\u89c4\u5219")}),(0,pn.jsx)(_.View,{className:"crs_block_bd_item_content_row_wrap",children:null===(r=e.detailRemark)||void 0===r?void 0:r.map((function(e){return(0,pn.jsxs)(_.View,{className:"crs_block_bd_item_content_row",children:[(0,pn.jsx)(_.View,{className:"crs_block_bd_item_content_dot"}),(0,pn.jsx)(_.Text,{className:"crs_block_bd_item_content",children:e})]})}))})]})]})]})]})}))]})]})]})}))),ic=tc,rc=ic,oc=os.K1,ac=function(){var e=_n(),n=(e.additionalSale,e.basicInfo),t=void 0===n?{}:n,i=(e.orderInfo,t.orderId),r=t.orderType,o=(0,u.useState)(!1),a=(0,h.Z)(o,2),s=a[0],c=a[1],l=[],d=(0,u.useState)(l),m=(0,h.Z)(d,2),p=m[0],x=m[1],g=function(e){console.log("\u4f18\u60e0\u5238\u8fd4\u56de\u7684data",e),x(e)},j=function(){c(!1)},w=function(){var e;if(!(p.length<1)){var n=null===(e=p[0])||void 0===e?void 0:e.toUseLink;1===p.length&&n?(0,Zn.mi)({targetPageURI:n}):c(!0)}},N=(null===f.__global||void 0===f.__global?void 0:f.__global.env)||"prd";"prd"===N&&(N="prod");var y=10650062960,T={visible:s,data:{orderId:String(i),env:N,saleChannel:21,locale:"zh-CN",currency:"CNY",pageId:y},traceLogId:1===r?oc.TICKET:oc.THINGS_TODO,onLoad:g,onClose:j,clientEnv:{env:N,ctType:0,clientType:3}};return 1!==r?null:(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(cc,{data:p,action:w}),(0,pn.jsx)(rc,(0,v.Z)({},T))]})},sc=(0,u.memo)(ac),cc=function(e){var n,t=e.data,i=e.action,r=t.length;return r?(0,pn.jsxs)(_.View,{className:"footer-coupon-contain",children:[(0,pn.jsx)(_.View,{className:"footer-coupon-contain-image-body",children:(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/zeng.png",className:"footer-coupon-contain-image-icon"})}),(0,pn.jsxs)(_.View,{className:"footer-coupon-contain-info-body",children:[(0,pn.jsx)(_.View,{className:"footer-coupon-contain-tag-body",children:null===t||void 0===t||null===(n=t.slice(0,2))||void 0===n?void 0:n.map((function(e,n){return(0,pn.jsx)(lc,{info:e},e.promotionId)}))}),r>1?null:(0,pn.jsx)(_.View,{className:"footer-coupon-contain-coupon-tips",children:(0,pn.jsx)(_.Text,{children:"\u53ef\u4ee5\u5728\u3010\u6211\u7684\u3011-\u3010\u4f18\u60e0\u5238\u3011\u4e2d\u67e5\u770b"})})]}),(0,pn.jsxs)(_.View,{className:"footer-coupon-contain-button",onClick:i,children:[(0,pn.jsx)(_.Text,{className:"footer-coupon-contain-button-icon",children:r>1?"".concat(r,"\u5f20\u5238"):"\u53bb\u4f7f\u7528"}),(0,pn.jsx)(_.Text,{className:"icon-Forward footer-coupon-contain-button-icon"})]})]}):null},lc=function(e){var n=e.info;return(0,pn.jsx)(_.View,{className:"footer-coupon-contain-tag",children:(0,pn.jsx)(_.Text,{children:n.promotionLabel})})},dc=fn.WZ.showDialog,uc=fn.gk.showPopup,mc=fn.gk.hidePopup;function _c(e){var n=_n(),t=n.newFooterButton,i=n.basicInfo,r=i.notShowSubUnit,o=void 0===r?[]:r,a=o.length>0&&o.indexOf("footeraction")>=0;return(0,pn.jsxs)(_.View,{className:"ottd_orderDetail_footerWrap",children:[(0,pn.jsx)(es,{}),(0,pn.jsx)(pc,{}),(0,pn.jsx)(vc,{}),(0,pn.jsx)(sc,{}),a?null:(0,pn.jsx)(fc,(0,v.Z)({footerButton:t},e))]})}var hc=(0,u.memo)(_c),fc=function(e){var n=_n(),t=n.contact,i=n.basicInfo,r=(0,u.useState)(!1),o=(0,h.Z)(r,2),a=o[0],s=o[1],c=(0,u.useState)({visible:!1}),l=(0,h.Z)(c,2),d=l[0],m=l[1],f=mn.useActions(),x=f.deleteOrder,g=f.sendMessage,N=f.doReminderMessage,y=(0,Zn.B_)(i),T=e.footerButton,I=T.length,b=Math.abs(100/I).toFixed(2)+"%";1===I&&(b="33.33%");var S="";t&&(S=null===t||void 0===t?void 0:t.phone);var V="\u5df2\u53d1\u9001\u51fa\u6e38\u4fe1\u606f",C=S,k="\u51fa\u6e38\u4fe1\u606f\u5c06\u53d1\u9001\u81f3"+(C||"\u60a8\u7684\u624b\u673a")+"\uff0c\u786e\u5b9a\u53d1\u9001\u5417";return(0,pn.jsx)(_.View,{children:I>0&&(0,pn.jsx)(_.View,{className:"footerContainer",children:T.map((function(e,t){var i=e.type,r=void 0===i?"default":i,o=e.opt,c=void 0===o?{}:o,l=c.disable,u=void 0!==l&&l,h=c.highlight,f=void 0!==h&&h,T=c.tips,I=void 0===T?"":T,S=c.toast,C=void 0===S?"\u7a0d\u540e\u91cd\u8bd5":S,E={rebooking:Te.VOICECLICK,applyChangeDate:Te.APPLYCHANGEDATE,mycomment:Te.MYCOMMENT,addcomment:Te.ADDCOMMENT,bookingagain:Te.UPLOADCLICK,resendMessage:Te.RESENDMESSAGE,urge:Te.URGEMESSAGE,default:""},R="";return E[r]&&(R=E[r]+y),"cancel"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(xc,{})},String(t)):"resendMessage"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(t){(0,Zn.xb)(t,R),a?p().showToast({title:V,icon:"none"}):dc({title:"",desc:k,buttons:[{text:"\u53d6\u6d88",type:"secondary"},{text:"\u53d1\u9001",type:"primary",callback:function(){var t=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(n);case 3:r=e.sent,p().showToast({title:(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.customerErrorMessage)||"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),o=null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.success,s(o),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),p().showToast({title:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();Bn.topButtonForward(e,n,t)}}]})},className:a?"border1px buttonContainerReadonly":"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:a?"buttonTextReadonly":"buttonTextHighlightNormal",children:e.title})})},String(t)):"applyChangeOrder"===r?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(){m((function(n){return(0,v.Z)((0,v.Z)({},n),{},{visible:!0,data:e})}))},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlight",children:e.title})})},String(t)),(0,pn.jsx)(gc,{setFooterTooltip:m,state:n,footerTooltip:d})]}):f?(0,pn.jsxs)(_.View,{className:"buttonWrapper",style:{width:b},children:[(0,pn.jsx)(_.View,{onClick:function(t){(0,Zn.xb)(t,R),!u||!C||"applyChangeDate"!==r&&"applyChangeId"!==r?Bn.topButtonForward(e,n,(function(){})):dc({title:"",desc:C,buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){}}]})},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlight",children:e.title})}),I?(0,pn.jsx)(_.View,{className:"buttonTip",children:(0,pn.jsx)(_.Text,{className:"tipsText",children:I})}):null]},String(t)):u?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(e){(0,Zn.xb)(e,R),p().showToast({title:C,icon:"none"})},className:"border1px buttonContainerReadonly",children:(0,pn.jsx)(_.Text,{className:"buttonTextReadonly",children:e.title})})},String(t)):"urge"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(t){(0,Zn.xb)(t,R);var i=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(n);case 3:r=e.sent,o=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||(null===r||void 0===r||null===(i=r.head)||void 0===i?void 0:i.errmsg)||"\u8bf7\u7a0d\u540e\u518d\u8bd5",p().showToast({title:o,icon:"none"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),p().showToast({title:"\u50ac\u786e\u8ba4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();Bn.topButtonForward(e,n,i)},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:e.title})})},String(t)):"invoice"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(Wa,{})},String(t)):"deleteOrder"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(){dc({title:"",desc:"\u60a8\u8981\u6c38\u4e45\u5220\u9664\u6b64\u8ba2\u5355\u5417\uff1f",buttons:[{text:"\u70b9\u9519\u4e86",type:"secondary"},{text:"\u6c38\u4e45\u5220\u9664",type:"primary",callback:function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent,t=n.isSuccess,i=n.errorMessage,t?p().navigateBack({delta:1}).then((function(e){console.log(e)})):p().showToast({title:i,icon:"none"});case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}]})},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:e.title})})},String(t)):(0,pn.jsx)(_.View,{className:"buttonWrapper",style:{width:b},children:(0,pn.jsx)(_.View,{onClick:function(t){(0,Zn.xb)(t,R),Bn.topButtonForward(e,n,(function(){}))},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:e.title})})},String(t))}))})})},pc=function(){var e,n,t,i=_n(),r=null!==(e=null===(n=i.orderInfo)||void 0===n||null===(n=n.operation)||void 0===n?void 0:n.items)&&void 0!==e?e:[],o=r.find((function(e){return 10===e.operationType})),a=r.find((function(e){return 13===e.operationType})),s=r.find((function(e){return 12===e.operationType})),c=a||s;return o||!c?null:(0,pn.jsxs)(_.View,{className:"footerTips footerRefundinfo",children:[(0,pn.jsx)(_.View,{className:"icon-InformationShape"}),(0,pn.jsx)(_.View,{className:"footerContent",children:(0,pn.jsx)(_.Text,{className:"footertext",children:null!==(t=null===a||void 0===a?void 0:a.operationName)&&void 0!==t?t:"\u4e0e\u5546\u5bb6\u534f\u5546\u4e00\u81f4\u7684\u524d\u63d0\u4e0b\u7533\u8bf7"})})]})};function vc(){var e,n,t,i=_n(),r=null===(e=i.orderInfo)||void 0===e||null===(e=e.basicInfo)||void 0===e?void 0:e.versionTip,o=null===i||void 0===i||null===(n=i.requestParam)||void 0===n?void 0:n.token,a=(null===i||void 0===i||null===(t=i.basicInfo)||void 0===t?void 0:t.notShowSubUnit)||[],s=a.length>0&&a.indexOf("versiontip")>=0;return!r||o||s?null:(0,pn.jsxs)(_.View,{className:"footerTips footerRefundinfo",children:[(0,pn.jsx)(_.View,{className:"icon-InformationShape"}),(0,pn.jsx)(_.View,{className:"footerContent",children:(0,pn.jsx)(_.Text,{className:"footertext",children:r})})]})}function xc(){var e,n,t,i,r,o=_n(),a=null===o||void 0===o||null===(e=o.orderInfo)||void 0===e?void 0:e.basicInfo,s=o.resource,c=a.backOrderStatus,l=null!==(n=null===o||void 0===o||null===(t=o.orderInfo)||void 0===t||null===(t=t.operation)||void 0===t?void 0:t.items)&&void 0!==n?n:[],d=l.find((function(e){return 10===e.operationType})),u=l.find((function(e){return 11===e.operationType})),m=l.find((function(e){return 12===e.operationType})),h=l.find((function(e){return 13===e.operationType})),f=l.find((function(e){return 19===e.operationType})),x=d||u||f,g=m||h,j=Te.GRIDCLICK+(0,Zn.B_)(o.basicInfo),w=Te.DIYCLICK+(0,Zn.B_)(o.basicInfo),N=null===o||void 0===o||null===(i=o.basicInfo)||void 0===i||null===(i=i.refund)||void 0===i?void 0:i.switchPartRefund,y={basicInfo:a,canCancel:d,alreadyCancel:u,alreadyRefund:h,canRefund:m,canNotCancel:f,switchPartRefund:N,state:o},T={orderID:String(null===a||void 0===a?void 0:a.orderId),usedate:String(null===s||void 0===s||null===(r=s[0])||void 0===r?void 0:r.useDate),orderdate:String(null===a||void 0===a?void 0:a.orderDate)},I=function(e){return{ubtKeyName:e?"act_unsubscribe_entry_on_exposure":"act_unsubscribe_entry_off_exposure",data:T}};if(x&&g){var b=(0,pn.jsx)(jc,(0,v.Z)({closeFloating:function(){return mc()}},y)),S=function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_on_trace",T),uc({title:"\u9009\u62e9\u670d\u52a1\u7c7b\u578b",children:b})};return h?(0,pn.jsx)(_.View,{onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_off_trace",T),p().showToast({title:"\u60a8\u6709\u9000\u6b3e\u7533\u8bf7\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5904\u7406\u7ed3\u679c",icon:"none"})},className:"autoExpose border1px buttonContainerReadonly",id:"order_cancel_exposure_unique_id","data-expose":I(!1),children:(0,pn.jsx)(_.Text,{className:"buttonTextReadonly",children:"\u9000\u8ba2/\u9000\u6b3e"})}):(0,pn.jsx)(_.View,{onClick:function(){return S()},className:"autoExpose border1px buttonContainerHighlightNormal",id:"order_cancel_exposure_unique_id","data-expose":I(!0),children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:"\u9000\u8ba2/\u9000\u6b3e"})})}if(m)return(0,pn.jsx)(_.View,{onClick:function(e){(0,Zn.xb)(e,j);var n=(0,pn.jsx)(jc,(0,v.Z)({closeFloating:function(){return mc()}},y));uc({children:n,isShowTitle:!0})},className:"border1px buttonContainerHighlightNormal",children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:"\u7533\u8bf7\u9000\u6b3e"})});if(h)return(0,pn.jsx)(_.View,{onClick:function(){return p().showToast({title:"\u9000\u6b3e\u7533\u8bf7\u5904\u7406\u4e2d\uff0c\u8bf7\u7b49\u5f85\u7ed3\u679c",icon:"none"})},className:"border1px buttonContainerReadonly",children:(0,pn.jsx)(_.Text,{className:"buttonTextReadonly",children:"\u7533\u8bf7\u9000\u6b3e"})});if(f)return(0,pn.jsx)(_.View,{onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_off_trace",T),p().showToast({title:f.operationName||"\u7a0d\u540e\u91cd\u8bd5",icon:"none"})},className:"autoExpose border1px buttonContainerReadonly",id:"order_cancel_exposure_unique_id","data-expose":I(!1),children:(0,pn.jsx)(_.Text,{className:"buttonTextReadonly",children:"\u7533\u8bf7\u9000\u8ba2"})});if(d){var V=(0,pn.jsx)(ns,{closeFloating:function(){return mc()}}),C=function(){uc({title:"\u53d6\u6d88\u539f\u56e0\uff08\u9009\u586b\uff09",children:V})},k={};return 3!==c&&(k={className:"autoExpose border1px buttonContainerHighlightNormal",id:"order_cancel_exposure_unique_id","data-expose":I(!0)}),(0,pn.jsx)(_.View,(0,v.Z)((0,v.Z)({onClick:function(e){if((0,Zn.xb)(e,w),3!==c)return p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_on_trace",T),void Bn.goToOrderCancel(null===a||void 0===a?void 0:a.orderId,null===a||void 0===a?void 0:a.backOrderStatus,N);C()},className:"border1px buttonContainerHighlightNormal"},k),{},{children:(0,pn.jsx)(_.Text,{className:"buttonTextHighlightNormal",children:3===c?"\u53d6\u6d88\u8ba2\u5355":"\u7533\u8bf7\u9000\u8ba2"})}))}return u?(0,pn.jsx)(_.View,{onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_off_trace",T),p().showToast({title:u.operationName||"\u7a0d\u540e\u91cd\u8bd5",icon:"none"})},className:"autoExpose border1px buttonContainerReadonly",id:"order_cancel_exposure_unique_id","data-expose":I(!1),children:(0,pn.jsx)(_.Text,{className:"buttonTextReadonly",children:"\u7533\u8bf7\u9000\u8ba2"})}):null}var gc=function(e){var n=e.footerTooltip,t=e.state,i=e.setFooterTooltip,r=n.visible,o=void 0!==r&&r,a=n.data,s=t.orderInfo,c=s.basicInfo,l=void 0===c?{}:c,d=(0,Zn.B_)(l),u={applyChangeDate:Te.APPLYCHANGEDATE};return o?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(_.View,{className:"footer_tooltip_mask",onTouchStart:function(){i({visible:!1})}}),(0,pn.jsxs)(_.View,{className:"footer_tooltip_btn_wrap",children:[(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/footerTooltip.png",style:{width:"100%",height:"100%"},mode:"aspectFit"}),(0,pn.jsx)(_.View,{className:"footer_tooltip_btn_inner",children:null===a||void 0===a?void 0:a.buttons.map((function(e,n){var r=e.opt,o=e.type,a=r.disable,s=void 0!==a&&a,c=r.toast,l=void 0===c?"\u7a0d\u540e\u91cd\u8bd5":c,m="";return u[o]&&(m=u[o]+d),(0,pn.jsx)(_.View,{children:(0,pn.jsx)(_.View,{className:"footer_tooltip_btn_item",onClick:function(n){(0,Zn.xb)(n,m),n.stopPropagation(),i({visible:!1}),!s||!l||"applyChangeDate"!==o&&"applyChangeId"!==o?Bn.topButtonForward(e,t,(function(){})):dc({title:"",desc:l,buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){}}]})},children:(0,pn.jsx)(_.View,{className:"footer_tooltip_btn_text",style:s?{color:"#999999"}:{color:"#111111"},children:e.title})})},String(n))}))})]})]}):null},jc=function(e){var n,t=e.state,i=e.canCancel,r=e.basicInfo,o=e.alreadyCancel,a=e.alreadyRefund,s=e.canRefund,c=e.canNotCancel,l=e.closeFloating,d=e.switchPartRefund,u=t.resource,m={orderID:String(null===r||void 0===r?void 0:r.orderId),usedate:String(null===u||void 0===u||null===(n=u[0])||void 0===n?void 0:n.useDate),orderdate:String(null===r||void 0===r?void 0:r.orderDate)};return(0,pn.jsxs)(_.View,{className:"footerCancelLayer",children:[i?(0,pn.jsx)(_.View,{className:"order_detail_common_label flex_row",onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_on_trace",m),Bn.goToOrderCancel(null===r||void 0===r?void 0:r.orderId,null===r||void 0===r?void 0:r.backOrderStatus,d),null===l||void 0===l||l()},children:(0,pn.jsxs)(_.View,{className:"order_detail_common_label_right flex_row",children:[(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_left",children:[(0,pn.jsx)(_.View,{className:"cancelTitle",children:"\u7533\u8bf7\u9000\u8ba2"}),(0,pn.jsx)(_.View,{className:"cancelContent",children:"\u6309\u7167\u9000\u6539\u89c4\u5219\u8fdb\u884c\u9000\u8ba2"})]}),(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_right footer_cancel_layer_unsubscribe_wrap",children:[(0,pn.jsx)(_.View,{className:"step_right_text",children:"\u7533\u8bf7\u9000\u8ba2"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]})}):null,c?(0,pn.jsx)(_.View,{className:"order_detail_common_label flex_row",children:(0,pn.jsx)(_.View,{className:"order_detail_common_label_right flex_row",children:(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_left",children:[(0,pn.jsx)(_.View,{className:"cancelTitle",children:"\u7533\u8bf7\u9000\u8ba2"}),null!==c&&void 0!==c&&c.operationName?(0,pn.jsx)(_.View,{className:"cancelContent",children:null===c||void 0===c?void 0:c.operationName}):null]})})}):null,o?(0,pn.jsx)(_.View,{className:"order_detail_common_label flex_row",children:(0,pn.jsx)(_.View,{className:"order_detail_common_label_right flex_row",children:(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_left",children:[(0,pn.jsx)(_.View,{className:"cancelTitle",children:"\u5df2\u7533\u8bf7\u9000\u8ba2"}),null!==o&&void 0!==o&&o.operationName?(0,pn.jsx)(_.View,{className:"cancelContent",children:null===o||void 0===o?void 0:o.operationName}):null]})})}):null,(i||o||c)&&(s||a)?(0,pn.jsx)(_.View,{style:{height:1,backgroundColor:"#e0e0e0"}}):null,s?(0,pn.jsxs)(_.View,{className:"order_detail_common_label",style:i||o||c?{}:{paddingTop:0},children:[(0,pn.jsx)(_.View,{className:"order_detail_common_label_right flex_row",children:(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_left",children:[(0,pn.jsx)(_.View,{className:"cancelTitle",children:"\u534f\u5546\u9000\u6b3e"}),(0,pn.jsx)(_.View,{className:"cancelContent",children:"\u540c\u5546\u5bb6\u534f\u5546\u4e00\u81f4\uff0c\u7533\u8bf7\u9000\u8fd8\u90e8\u5206\u6b3e\u9879"})]})}),(0,pn.jsxs)(_.View,{className:"order_detail_refund_step_wrap",children:[(0,pn.jsxs)(_.View,{className:"order_detail_refund_step_item",onClick:function(){var e=t.imService,n=e.hasPhone;n?Xn():Bn.goIm(t)},children:[(0,pn.jsxs)(_.View,{className:"step_left",children:[(0,pn.jsx)(_.View,{className:"step_left_number",children:"1"}),(0,pn.jsx)(_.View,{className:"step_left_text",children:"\u4e0e\u5546\u5bb6\u534f\u5546\u9000\u6b3e\u91d1\u989d"})]}),(0,pn.jsxs)(_.View,{className:"step_right",children:[(0,pn.jsx)(_.View,{className:"step_right_text",children:"\u8054\u7cfb\u5546\u5bb6"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]}),(0,pn.jsxs)(_.View,{className:"order_detail_refund_step_item",onClick:function(){var n;null===e||void 0===e||null===(n=e.closeFloating)||void 0===n||n.call(e),Bn.goToOrderRefund(null===r||void 0===r?void 0:r.orderId)},children:[(0,pn.jsxs)(_.View,{className:"step_left",children:[(0,pn.jsx)(_.View,{className:"step_left_number",children:"2"}),(0,pn.jsx)(_.View,{className:"step_left_text",children:"\u534f\u5546\u4e00\u81f4\uff0c\u540c\u610f\u9000\u6b3e"})]}),(0,pn.jsxs)(_.View,{className:"step_right",children:[(0,pn.jsx)(_.View,{className:"step_right_text",children:"\u7533\u8bf7\u9000\u6b3e"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]}),(0,pn.jsx)(_.View,{className:"vertical_line"})]})]}):(0,pn.jsx)(_.View,{className:"order_detail_common_label flex_row",onClick:function(){p().showToast({title:"\u9000\u6b3e\u7533\u8bf7\u5904\u7406\u4e2d\uff0c\u8bf7\u7b49\u5f85\u7ed3\u679c",icon:"none"})},children:(0,pn.jsx)(_.View,{className:"order_detail_common_label_right flex_row",children:(0,pn.jsxs)(_.View,{className:"order_detail_common_label_inner_left",children:[(0,pn.jsx)(_.View,{className:"cancelTitle",children:"\u5df2\u534f\u5546\u9000\u6b3e"}),null!==a&&void 0!==a&&a.operationName?(0,pn.jsx)(_.View,{className:"cancelContent",children:null===a||void 0===a?void 0:a.operationName}):null]})})})]})},wc=Ws,Nc=(os.K1,function(e){return e[e["Ticket"]=1]="Ticket",e[e["Act"]=2]="Act",e}(Nc||{}));function yc(){var e,n,t,i=_n(),r=i.orderInfo,o=void 0===r?{}:r,a=i.packages,s=o.basicInfo,c=void 0===s?{}:s,l=c.orderType,d=c.orderStatus,u=void 0===d?0:d,m=(c.districtId,c.isDomestic),_=c.poiId,h=c.vendorIds,x=void 0===h?[]:h,g=c.cityId,j=c.consumeHotelDistrictId,w=[1,5,6,7,8,9,10,11,12,13,14].indexOf(u)>-1;if(!w)return p().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail",{message:"\u4e0d\u5c55\u793a\u4f18\u60e0\u5238\uff0c\u539f\u56e0\u662f\u8ba2\u5355\u72b6\u6001\u662f ".concat(u)}),null;var N=l===Nc.Ticket,y={localeHyphen:"zh-CN",currency:"CNY"},T=y.localeHyphen,I=y.currency,b=!0,S=null===f.__global||void 0===f.__global||null===(e=f.__global.env)||void 0===e?void 0:e.toLowerCase();"fat"===S&&(b=!1);var V,C,k=b?40000052:40000001,E=(null===o||void 0===o||null===(n=o.product)||void 0===n||null===(n=n.resources)||void 0===n||null===(n=n.map((function(e){return e.resourceId})))||void 0===n?void 0:n.map((function(e){return{type:3007,value:e.toString()}})))||[],R=(null===a||void 0===a||null===(t=a.map((function(e){return e.packageId})))||void 0===t?void 0:t.map((function(e){return{type:3007,value:e.toString()}})))||[],P=E.concat(R),D=[{filterSubId:2002,filterValueList:[{type:2006,value:m?"1":"2"}]},{filterSubId:3001,filterValueList:[{type:3001,value:""}]}];N?D.push({filterSubId:3005,filterValueList:P}):D.push({filterSubId:3002,filterValueList:[{type:3004,value:null!==(V=null===o||void 0===o||null===(C=o.product)||void 0===C||null===(C=C.productId)||void 0===C?void 0:C.toString())&&void 0!==V?V:""}]});var O=null===x||void 0===x?void 0:x.map((function(e){return{type:3010,value:e.toString()}}));(null===x||void 0===x?void 0:x.length)>0&&D.push({filterSubId:3007,filterValueList:O}),_&&D.push({filterSubId:3006,filterValueList:[{type:3008,value:_.toString()}]});var A=N?g:j;A&&D.push({filterSubId:2003,filterValueList:[{type:2007,value:A.toString()}]});var L={data:{saleChannel:21,sceneId:k,locale:T,pageId:ye,currency:I,filters:D},traceLogId:N?"TICKET":"THINGS_TODO"};return(0,pn.jsx)(wc,(0,v.Z)({},L))}function Tc(){var e,n=_n(),t=n.basicInfo,i=void 0===t?{}:t,r=i.cityId,o=i.notShowSubUnit,a=void 0===o?[]:o,s=a&&-1!==(null===a||void 0===a?void 0:a.indexOf("popupAds")),c=[{name:"activity_cityid",value:(r||2).toString()},{name:"activity_goods",value:((null===n||void 0===n||null===(e=n.product)||void 0===e||null===(e=e.resources)||void 0===e?void 0:e[0].viewSpotId)||763).toString()}],l=function(){};return s?null:(0,pn.jsx)("ad-sdk",{impId:"05DJDEEX0511DDCMRTXCCENH",bindgetAdData:l,extension:{extension:c},lonAndLat:{isEnable:!1}})}var Ic=[1,2,3,4];function bc(){return(0,pn.jsxs)(_.View,{className:"skeleton-contain","data-testid":"order-Info-Wtapper",children:[(0,pn.jsx)(Vc,{}),(0,pn.jsx)(Cc,{}),(0,pn.jsx)(kc,{}),(0,pn.jsx)(kc,{}),(0,pn.jsx)(Sc,{})]})}var Sc=function(){return(0,pn.jsx)(_.View,{className:"skeleton-footer",children:Ic.map((function(e,n){return(0,pn.jsx)(_.View,{className:"skeleton-footer-btn",children:(0,pn.jsx)(_.View,{className:"skeleton-footer-btn-inner"})},"".concat(n,"_key"))}))})},Vc=function(){return(0,pn.jsxs)(_.View,{className:"skeleton-header",children:[(0,pn.jsx)(_.View,{className:"skeleton-header-title skeleton-animate-blink"}),(0,pn.jsx)(_.View,{className:"skeleton-header-desc skeleton-animate-blink"})]})},Cc=function(){return(0,pn.jsx)(_.View,{className:"skeleton-custom skeleton-animate-blink"})},kc=function(){return(0,pn.jsxs)(_.View,{className:"skeleton-card skeleton-animate-gradient",children:[(0,pn.jsx)(_.View,{className:"skeleton-card-title skeleton-animate-blink"}),(0,pn.jsx)(_.View,{className:"skeleton-card-info skeleton-animate-blink"}),(0,pn.jsx)(_.View,{className:"skeleton-card-info skeleton-animate-blink"}),(0,pn.jsxs)(_.View,{className:"skeleton-card-voucher",children:[(0,pn.jsx)(_.View,{className:"skeleton-card-info skeleton-animate-blink"}),(0,pn.jsx)(_.View,{className:"skeleton-card-voucher-inner skeleton-animate-blink"})]}),(0,pn.jsx)(_.View,{className:"skeleton-card-address skeleton-animate-blink"})]})},Ec=(fn.gk.showPopup,{fat:"https://secure.fws.qa.nt.ctripcorp.com/webapp/payment6/refund",uat:"https://secure.uat.qa.nt.ctripcorp.com/webapp/payment6/refund",prd:"https://secure.ctrip.com/webapp/payment6/refund"});function Rc(e){var n=new RegExp("<a","g");return e.replace(n,'<a style="color: #fff"')}function Pc(){var e,n=_n(),t=mn.useActions(),i=((0,gn.f)(300),(0,gn.f)(1e3)),r=n.basicInfo,o=r.orderStatusDesc,a=r.orderStatusRemark,s=r.secondaryStatusList,c=r.orderStatusNew,l=r.orderId,d=r.notShowSubUnit,u=void 0===d?[]:d,m=t.refreshOrderInfo,h=t.UPDATE_MASK_LOADING,f=null===s||void 0===s?void 0:s.map((function(e){return e.statusName})),p=null===(e=f||[])||void 0===e?void 0:e.join(" | "),v=p+(p&&a?" - ":"")+(a||"");u.length>0&&u.indexOf("headerstatus");return(0,pn.jsxs)(_.View,{className:"ottd_recommend_orderdetail_header_status",children:[(0,pn.jsxs)(_.View,{className:"header_status_left",children:[(0,pn.jsxs)(_.View,{className:"header_status_title",children:[(0,pn.jsx)(_.Text,{dangerouslySetInnerHTML:{__html:o}}),1===c||3===c?(0,pn.jsx)(_.View,{className:"header_status_reload",onClick:function(){i((function(){h(!0),m(l,!1,Tn()).then((function(e){h(!1),0!==e.head.errcode?Tn().showToast({title:"\u5237\u65b0\u5931\u8d25\uff0c\u7a0d\u540e\u91cd\u8bd5",icon:"none"}):Tn().showToast({title:"\u5237\u65b0\u6210\u529f",icon:"none"})}))}))},children:"\u5237\u65b0"}):null]}),v?(0,pn.jsx)(_.View,{className:"header_status_desc",dangerouslySetInnerHTML:{__html:Rc(v)}}):null]}),(0,pn.jsx)(_.View,{className:"header_status_right",children:(0,pn.jsx)(Dc,{store:n})})]})}function Dc(e){var n=e.store,t=n.operationInfo,i=n.basicInfo,r=i.notShowSubUnit,o=void 0===r?[]:r,a=t.find((function(e){return 32===e.operationType})),s=o.length>0&&o.indexOf("continuepay")>=0;if(a&&!s)return(0,pn.jsx)(Ac,{store:n});var c=t.find((function(e){return 7===e.operationType}));return c?(0,pn.jsx)(Oc,{store:n}):null}function Oc(e){var n=e.store,t=(0,gn.f)(300),i=n.basicInfo,r=i.totalRefundAmt,o=i.orderType,a=i.bizLineType,s=i.orderId,c=i.externalNo,l=i.billNos,d=i.subRefundNos,u=void 0===d?[]:d,m=i.merchantId,h=void 0===m?"":m,f=7;2===o&&(f=71,2===a?f=10604:3===a&&(f=10605));var p={orderId:s,businessType:f};c?p.externalNO=c:l&&(p.billNo=l||[]),h&&(p.merchantId=h);var v=0===r||"0"===r?"\u67e5\u770b\u9000\u6b3e":"\u67e5\u770b\u9000\u6b3e \xa5".concat(r);return(0,pn.jsx)(_.View,{className:"header_status_action",onClick:function(){return t((function(){if(u.length>0){var e,n=encodeURIComponent(JSON.stringify({subRefundNos:u})),t=(null===yn.__global||void 0===yn.__global||null===(e=yn.__global.env)||void 0===e?void 0:e.toLowerCase())||"prd",i=null===Ec||void 0===Ec?void 0:Ec[t],r="".concat(i,"?cusparams=").concat(n);(0,Zn.mi)({targetPageURI:r})}else{var o=Tn().util.base64Encode(JSON.stringify(p));Tn().payment.getRefund({rdata:o})}}))},children:(0,pn.jsx)(_.Text,{className:"header_status_action_text",children:v})})}function Ac(e){var n=e.store,t=mn.useActions(),i=(0,gn.f)(300),r=t.doContinuePay,o=n.basicInfo,a=o.orderAmt,s=o.orderId,c=function(){r({oid:s}).then((function(e){Bn.doPay(e)}))};return(0,pn.jsx)(_.View,{className:"header_status_action dopay_action",onClick:function(){return i((function(){c()}))},children:(0,pn.jsx)(_.Text,{className:"header_status_action_text dopay_action_text",children:"\u53bb\u652f\u4ed8 \xa5".concat(a)})})}var Lc={1:"\u5df2\u53d1\u8d27",2:"\u5df2\u63fd\u4ef6",3:"\u914d\u9001\u4e2d",4:"\u6d3e\u4ef6\u4e2d",5:"\u5df2\u7b7e\u6536",6:"\u9000\u56de\u4e2d",7:"\u5df2\u9000\u7b7e",8:"\u7269\u6d41\u5f02\u5e38",9:"\u5f85\u53d1\u8d27",200:"\u7269\u6d41\u5f02\u5e38"};function Uc(e){var n="";return e.forEach((function(e){if(e.lastSendTime){var t=e.lastSendTime?gt()(e.lastSendTime,"YYYY-MM-DD HH:mm:ss"):"";n||(n=t),n&&t&&gt()(n).isBefore(t)&&(n=e.lastSendTime)}})),n?gt()(n).format("YYYY-MM-DD HH:mm:ss"):""}function Zc(){return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Bc,{}),(0,pn.jsx)(Fc,{})]})}var Mc=function(){var e,n=_n(),t=(n.basicInfo,n.operationInfo),i=n.orderInfo,r=t.find((function(e){return 24===e.operationType})),o=t.find((function(e){return 28===e.operationType})),a=i.product,s=a.resources,c=(s||[]).find((function(e){return"voice"===e.viewTemplateCode}))||{},l=c.resourceId;return o&&(r=null),r||o?(0,pn.jsx)(fn.Qi,{customStyle:{marginTop:8},children:(0,pn.jsxs)(_.View,{className:"order_detail_recommend_up_coming recommend_upcoming_audio_box",onClick:function(){r?Bn.forwardElectronicDetail(l):o&&(0,Zn.mi)({targetPageURI:o.linkUrl})},children:[(0,pn.jsxs)(_.View,{className:"recommend_up_coming_left recommend_audio_upcoming_left",style:{display:"flex",alignItems:"center"},children:[(0,pn.jsx)(_.View,{className:"recommend_audio_left_title",children:"\u8bed\u97f3\u5bfc\u89c8"}),(0,pn.jsx)(_.Text,{className:"recommend_audio_left_desc ellipsis",children:null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.viewSpotName})]}),(0,pn.jsx)(_.View,{className:"recommend_up_coming_right",children:(0,pn.jsx)(Gc,{text:"\u64ad\u653e",type:5,icon:"icon-BroadcastShape"})})]})}):null},Fc=function(e){var n=_n(),t=n.deliveryInfo,i=n.basicInfo,r=(i.orderType,i.orderId),o=t.showDelivery,a=t.hasUniqueDelivery,s=t.notDelivery,c=(t.deliveryAddress,t.isAllProviderExpress,null!==s&&void 0!==s&&s.lastSendTimeList?gt()(Uc(null===s||void 0===s?void 0:s.lastSendTimeList)).format("YYYY-M-D"):""),l={title:a.length?"\u5269\u4f59\u5305\u88f9\u5f85\u53d1\u8d27":"\u5f85\u53d1\u8d27",subDesc:c?"\u6700\u665a\u4e8e".concat(c,"\u524d\u53d1\u8d27"):"",desc:c?"\u5269\u4f59\u5305\u88f9\u6700\u665a\u4e8e".concat(c,"\u524d\u53d1\u8d27"):"\u5269\u4f59\u5305\u88f9\u5f85\u53d1\u8d27"};return o?!l||null!==a&&void 0!==a&&a.length?(0,pn.jsx)(fn.Qi,{customStyle:{marginTop:8},children:(0,pn.jsxs)(_.View,{className:"order_detail_recommend_up_coming",children:[(0,pn.jsxs)(_.View,{className:"recommend_up_coming_left",children:[(0,pn.jsx)(Hc,{title:"\u7269\u6d41\u4fe1\u606f"}),a.map((function(e,n){var t=e.deliveryRemark,i=void 0===t?"":t,r=e.deliveryStatus,o=(e.latestDeliveryTime,e.deliveryMethod);return 1===o?(0,pn.jsxs)(_.View,{className:"up_coming_continue_sub_desc ellipsis",children:[(0,pn.jsxs)(_.View,{className:"up_coming_continue_sub_title",children:[a.length>1||s.show?"\u5305\u88f9"+(n+1)+": ":"",Lc[r]]}),i?"  ".concat(i):null]},String(n)):(0,pn.jsx)(_.View,{className:"recommend_up_coming_desc ellipsis",children:a.length>1||s.show?"\u5305\u88f9"+(n+1)+": \u4f9b\u5e94\u5546\u81ea\u884c\u914d\u9001":"\u4f9b\u5e94\u5546\u81ea\u884c\u914d\u9001"},String(n))})),s.show?(0,pn.jsx)(_.View,{className:"recommend_up_coming_desc ellipsis",children:l.desc}):null]}),(0,pn.jsx)(_.View,{className:"recommend_up_coming_right",children:(0,pn.jsx)(Gc,{text:"\u53bb\u67e5\u770b",type:5,onClick:function(){Bn.forwardExpress({orderId:r})}})})]})}):(0,pn.jsx)(fn.Qi,{customStyle:{marginTop:8},children:(0,pn.jsx)(_.View,{className:"order_detail_recommend_up_coming",children:(0,pn.jsxs)(_.View,{className:"recommend_up_coming_left",children:[(0,pn.jsx)(Hc,{title:l.title}),(0,pn.jsx)(_.View,{className:"recommend_up_coming_desc",dangerouslySetInnerHTML:{__html:l.subDesc}})]})})}):null},Bc=function(){var e=_n(),n=(0,gn.f)(3e3),t=e.basicInfo,i=e.operationInfo,r=t.orderId,o=(t.orderType,t.notShowSubUnit),a=void 0===o?[]:o,s=i.find((function(e){return 16===e.operationType})),c=hn(),l=c.doContinuePay,d=function(){l({oid:r}).then((function(e){Bn.doPay(e)}))},u=a.length>0&&a.indexOf("continuepay")>=0;return s&&!u?(0,pn.jsx)(fn.Qi,{customStyle:{marginTop:8},children:(0,pn.jsxs)(_.View,{className:"order_detail_recommend_up_coming",children:[(0,pn.jsxs)(_.View,{className:"recommend_up_coming_left",children:[(0,pn.jsx)(Hc,{title:"\u53d1\u7968\u914d\u9001\u8d39\u5f85\u652f\u4ed8",subTitle:"\xa510"}),(0,pn.jsx)(_.View,{className:"recommend_up_coming_desc",children:"\u652f\u4ed8\u914d\u9001\u8d39\u540e\uff0c\u5c06\u4e3a\u4f60\u914d\u9001\u7eb8\u8d28\u53d1\u7968"})]}),(0,pn.jsx)(_.View,{className:"recommend_up_coming_right",children:(0,pn.jsx)(Gc,{text:"\u53bb\u652f\u4ed8",type:1,onClick:function(){return n(d)}})})]})}):null},Hc=function(e){var n=e.title,t=e.subTitle,i=e.className;return(0,pn.jsxs)(_.View,{className:"recommend_up_coming_title_view ".concat(i||""),children:[(0,pn.jsx)(_.Text,{className:"recommend_up_coming_title",children:n||"\u53bb\u652f\u4ed8"}),t?(0,pn.jsx)(_.Text,{className:"recommend_up_coming_sub_title",children:t}):null]})},Gc=function(e){var n=e.type,t=e.text,i=e.icon,r="";return 1===n?r="recommend_up_coming_linear":2===n?r="recommend_up_coming_blue_button":3===n?r="recommend_up_coming_border_button border1px":4===n?r="recommend_up_coming_disable_button":5===n&&(r="recommend_up_coming_normal_button"),(0,pn.jsxs)(_.View,(0,v.Z)((0,v.Z)({className:"recommend_up_coming_button ".concat(r)},e),{},{children:[i?(0,pn.jsx)(_.View,{className:"icon ".concat(i)}):null,(0,pn.jsx)(_.Text,{children:t})]}))};function qc(){var e,n,t,i,r,o,a=_n(),s=null===a||void 0===a||null===(e=a.orderInfo)||void 0===e||null===(e=e.product)||void 0===e||null===(e=e.resources)||void 0===e?void 0:e[0],c=null===s||void 0===s?void 0:s.viewSpotId,l=a.basicInfo,d=l.notShowSubUnit,u=void 0===d?[]:d,m=u&&-1!==(null===u||void 0===u?void 0:u.indexOf("view")),h=function(){Bn.forwardSpotDetailMiniProgram(c)};if(!c)return null;var f=null===a||void 0===a||null===(n=a.basicInfo)||void 0===n?void 0:n.poiId,p=null===a||void 0===a||null===(t=a.orderInfo)||void 0===t||null===(t=t.raidersInfo)||void 0===t?void 0:t.levelOneCatalogId,v=(null===a||void 0===a||null===(i=a.orderInfo)||void 0===i||null===(i=i.raidersInfo)||void 0===i?void 0:i.levelTwoCatalogList)||[],x=v.length;return(0,pn.jsx)(pn.Fragment,{children:(null===(r=a.orderInfo)||void 0===r||null===(r=r.basicInfo)||void 0===r?void 0:r.orderType)===Zn.mr.Ticket&&!m&&(0,pn.jsx)(fn.Gn,{customStyle:{marginTop:8},children:(0,pn.jsxs)(_.View,{style:{paddingTop:16,paddingBottom:16},children:[(0,pn.jsxs)(_.View,{className:"recommend_scenic_spot_title_container",onClick:h,children:[(0,pn.jsx)(_.Text,{className:"recommend_scenic_spot_title",children:null===(o=a.orderInfo)||void 0===o||null===(o=o.product)||void 0===o||null===(o=o.resources)||void 0===o?void 0:o[0].viewSpotName}),(0,pn.jsxs)(_.View,{className:"recommend_scenic_spot_title_right",children:[(0,pn.jsx)(_.Text,{className:"recommend_scenic_spot_title_desc",children:"\u666f\u70b9\u8be6\u60c5"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]}),x>0?(0,pn.jsx)(Di,{isRecommendPage:!0,raiderList:v,raiderId:p,poiId:f}):null]})})})}var zc=fn.gk.showPopup,Yc=fn.gk.hidePopup;function $c(){var e=_n(),n=e.resource,t=e.basicInfo,i=e.category,r=e.contact,o=e.deliveryInfo,a=e.packages,s=o.deliveryAddress,c=void 0===s?{}:s,l=t.orderType,d=t.orderId,u=t.notShowSubUnit,m=void 0===u?[]:u,h=i.passenger,f=[],p=m.length>0&&m.indexOf("bookinginfo")>=0,x=m.length>0&&m.indexOf("bookinginfocontract")>=0;if(p)return null;var g=n.every((function(e){return 2===(null===e||void 0===e?void 0:e.limitType)}));if(g){var j,w=n.every((function(e){return null===e||void 0===e?void 0:e.passengers.every((function(e){return!(null===e||void 0===e||!e.isRefunded)}))}));f.push({name:"",passList:[(0,v.Z)((0,v.Z)({},null===n||void 0===n||null===(j=n[0])||void 0===j||null===(j=j.passengers)||void 0===j?void 0:j[0]),{},{isRefunded:w})]})}else{(a||[]).forEach((function(e,n){var t=e.packageName,i=e.resourceShowType,r=e.subResList;1===i?r.forEach((function(e,n){var i;null!==e&&void 0!==e&&null!==(i=e.passengers)&&void 0!==i&&i.length&&"voice"!==e.viewTemplateCode&&f.push({name:t,passList:e.passengers})})):r.forEach((function(e,n){var t;null!==e&&void 0!==e&&null!==(t=e.passengers)&&void 0!==t&&t.length&&"voice"!==e.viewTemplateCode&&f.push({name:e.resourceName,passList:e.passengers})}))}));var N=n.filter((function(e){return!(null!==e&&void 0!==e&&e.isPackage3SubItem)}));N.forEach((function(e,n){var t;null!==e&&void 0!==e&&null!==(t=e.passengers)&&void 0!==t&&t.length&&"voice"!==e.viewTemplateCode&&f.push({name:e.resourceName,passList:e.passengers})}))}var y=!1,T=(n||[]).find((function(e){return"voice"!==e.viewTemplateCode}));1!==l||null!==c&&void 0!==c&&c.address||r||T||(y=!0);var I={isNew:!0,passengers:1===l?f:h,isTicket:1===l};return(0,pn.jsxs)(_.View,{className:"order_detail_recommend_booking_info",children:[(0,pn.jsxs)(_.View,{className:"recommend_booking_info_title",children:[(0,pn.jsx)(_.Text,{children:"\u9884\u8ba2\u4fe1\u606f"}),y?null:(0,pn.jsx)(Wc,{})]}),(0,pn.jsxs)(_.View,{children:[y?null:(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Go,(0,v.Z)((0,v.Z)({},I),{},{isRecommendPage:!0})),(0,pn.jsx)(Qo,{isRecommendPage:!0}),(0,pn.jsx)(Ta,{isRecommendPage:!0}),(0,pn.jsx)(Ia,{isRecommendPage:!0,hideContract:x})]}),(0,pn.jsx)(Kc,{orderId:d,isRecommendPage:!0})]})]})}function Kc(e){var n=e.orderId,t=e.isRecommendPage,i=function(){p().setClipboardData({data:String(n),success:function(){console.log("success")},fail:function(){console.log("fail")}})};return(0,pn.jsxs)(_.View,{className:"order_detail_booking_info_delivery_wrap ".concat(t?"recommend_booking_info_delivery_wrap":""),children:[(0,pn.jsx)(_.View,{className:"left_view",children:"\u8ba2\u5355\u53f7"}),(0,pn.jsx)(_.View,{className:"right_view",children:(0,pn.jsxs)(_.View,{className:"row_label",onClick:i,children:[n,(0,pn.jsx)(_.Text,{children:"\u590d\u5236"})]})})]})}function Wc(){(0,gn.f)(1e3);var e=_n(),n=mn.useActions(),t=n.UPDATE_PHONE_ENCRYPT,i=n.UPDATE_REQUEST_PARAMS,r=n.getRequestParamByStore,o=n.refreshOrderByContinuePay,a=e.contact,s=e.basicInfo,c=e.hasChecked,l=e.requestParam,d=null===l||void 0===l?void 0:l.token,u=s.notShowSubUnit,m=void 0===u?[]:u,h=s.orderId,f=s.showEx,p=m.length>0&&m.indexOf("encryptmsg")>=0;if(d||p)return null;var x=a||{},g=x.isAllQuick,j=(null!==a&&void 0!==a&&a.phoneCode?(null===a||void 0===a?void 0:a.phoneCode)+" ":"")+(null===a||void 0===a?void 0:a.phone),w=(null!==a&&void 0!==a&&a.osPhoneCode?(null===a||void 0===a?void 0:a.osPhoneCode)+" ":"")+(null===a||void 0===a?void 0:a.osPhone),N={phone:j||w,isAllQuick:g,orderid:h,actions:n,hideMask:function(){return Yc()}},y=function(){var e=r(),n=(0,pn.jsx)(Xo,(0,v.Z)((0,v.Z)({},N),{},{requestParams:(0,v.Z)((0,v.Z)({},e),{},{showEx:1})}));zc({title:"\u67e5\u770b\u5b8c\u6574\u4fe1\u606f",children:n})},T=function(){var e=r();c?(e=(0,v.Z)((0,v.Z)({},e),{},{showEx:1}),i(e),t(!0),setTimeout((function(){o()}),300)):y()},I=function(){var e=r();e=(0,v.Z)((0,v.Z)({},e),{},{showEx:0}),i(e),setTimeout((function(){o()}),300)};return(0,pn.jsxs)(_.View,{className:"recommend_secret_traveler_detail",onClick:function(){0===f?T():I()},children:[(0,pn.jsx)(_.View,{className:f?"icon-open":"icon-hide"}),(0,pn.jsx)(_.Text,{children:f?"\u9690\u85cf\u52a0\u5bc6\u4fe1\u606f":"\u67e5\u770b\u52a0\u5bc6\u4fe1\u606f"})]})}var Qc=fn.gk.showPopup;function Jc(){return(0,pn.jsxs)(fn.Qi,{customStyle:{marginTop:8},children:[(0,pn.jsx)(Xc,{}),(0,pn.jsx)($c,{})]})}function Xc(){var e=_n(),n=e.basicInfo,t=void 0===n?{}:n,i=e.operationInfo,r=e.orderExpenses,o=void 0===r?{}:r,a=e.orderInfo,s=e.requestParam,c=t.orderId,l=t.orderType,d=t.billNos,u=t.externalNo,m=t.depositAmt,h=t.refundDepositAmt,f=t.payDesc,p=t.payMode,v=t.depositPayMode,x=t.bizLineType,g=t.notShowSubUnit,j=void 0===g?[]:g,w=j.length>0&&j.indexOf("orderbasicinfo")>-1;if(w)return null;var N=null===s||void 0===s?void 0:s.token,y="";"H"===p?y="\u5148\u7528\u540e\u4ed8\u514d\u62bc\u91d1"+(f?"\uff0c".concat(f):""):h?y="\u5df2\u9000\u62bc\u91d1\uffe5".concat(Math.abs(h)):1===v&&m?y="\u73b0\u573a\u652f\u4ed8\u62bc\u91d1\xa5".concat(m):m&&(y="\u542b\u62bc\u91d1\xa5".concat(m));var T=(null===a||void 0===a?void 0:a.rebate)||{},I=T.realRebateAmt,b=7;2===l&&(b=71,2===x?b=10604:3===x&&(b=10605));var S={orderId:c,businessType:b};u?S.externalNO=u:d&&(S.billNo=d||[]);var V=o.expenses,C=void 0===V?{}:V,k=C.billItemList,E=void 0===k?[]:k,R=(E||[]).find((function(e){return 15===e.type})),P=i.find((function(e){return 9===e.operationType})),D={O:"\u73b0\u4ed8",P:"\u5728\u7ebf\u652f\u4ed8",H:"\u5728\u7ebf\u652f\u4ed8"},O=D[null===p||void 0===p?void 0:p.toLocaleUpperCase()],A=function(e){(0,Zn.mi)({targetPageURI:e})},L=(0,pn.jsx)(aa,{state:e,jump:A}),U=function(){Qc({title:"\u8d39\u7528\u660e\u7ec6",children:L})};return(0,pn.jsxs)(_.View,{className:"ottd_order_detail_recommend_orderExpense",children:[(0,pn.jsxs)(_.View,{className:"recommend_order_expense_wrap",children:[(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(_.Text,{className:"recommend_order_expense_title_pay_desc",children:O}),(0,pn.jsxs)(_.Text,{className:"recommend_order_expense_title_pay_no",children:["\xa5",t.orderAmt]})]}),P?(0,pn.jsx)(_.View,{className:"recommend_order_expense_detail_btn",onClick:function(){return U()},children:(0,pn.jsx)(_.View,{className:"icon-question"})}):null]}),y||I||R?(0,pn.jsxs)(pn.Fragment,{children:[y?(0,pn.jsx)(_.View,{className:"",children:(0,pn.jsx)(_.Text,{className:"recommend_order_expense_title_desc",children:y})}):null,I?(0,pn.jsx)(_.View,{children:(0,pn.jsxs)(_.Text,{className:"recommend_order_expense_title_desc",children:["\u8fd4\u73b0 \xa5",I]})}):null,!N&&R?(0,pn.jsxs)(_.View,{className:"flex_row recommend_naquhua_wrap",children:[(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/ticket/app/orderdetail/naquhua.png",className:"recommend_order_expense_naquhua"}),(0,pn.jsx)(_.View,{className:"recommend_naquhua_desc",children:(0,pn.jsx)(_.Text,{children:"\u62ff\u53bb\u82b1"})})]}):null]}):null]})}var el={viewSpot:"additional_viewSpot",resource:"additional_resource",hotel:"hotel_coupon"},nl="tkt_orderdetail_dt_",tl=5,il=ic,rl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/recommend_coupon.png",ol="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/recommend_icon_coin.png",al="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/recommend_icon_gift.png",sl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/recommend_icon_star.png",cl={1:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_hotel.png",2:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_car.png",3:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_pickup_car.png",4:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_chartered_car.png",5:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_car.png"},ll="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_global.png",dl="https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wx_crosscoupon_arrow.png",ul=u.memo((function(e){var n=e.setCrossCouponLen,t=_n(),i=t.basicInfo,r=void 0===i?{}:i,o=r.orderId,a=r.orderType,s=(0,u.useState)({visible:!1,promotionId:""}),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=[],p=(0,u.useState)(m),x=(0,h.Z)(p,2),g=x[0],N=x[1],y=(0,u.useState)(""),T=(0,h.Z)(y,2),I=T[0],b=T[1],S=(0,u.useState)(!1),V=(0,h.Z)(S,2),C=V[0],k=V[1],E=(0,u.useCallback)((0,w.Z)((0,j.Z)().mark((function e(){var n;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vl("#cross_coupon_wrapper_id",{});case 2:n=e.sent,n&&k(!0);case 4:case"end":return e.stop()}}),e)}))),[k]);(0,u.useEffect)((function(){E()}),[]),(0,u.useEffect)((function(){"recommend_coupon_cross_animation"===I&&setTimeout((function(){b("recommend_coupon_cross_hide")}),3200),(null===g||void 0===g?void 0:g.length)>0&&!I&&C&&(b("recommend_coupon_cross_show_rc_mask"),setTimeout((function(){b("recommend_coupon_cross_animation")}),500))}),[g,I,b,C,k]);var R=function(e){console.log("-------------------",e,"============================="),N(e),(null===e||void 0===e?void 0:e.length)>0&&n(null===e||void 0===e?void 0:e.length)},P=function(){d({visible:!1,promotionId:""})},D=function(e){var n;if(!(g.length<1)){var t=null===(n=g[0])||void 0===n?void 0:n.toUseLink;1===g.length&&t?(0,Zn.mi)({targetPageURI:t}):d({visible:!0,promotionId:null===e||void 0===e?void 0:e.promotionId})}},O=(null===f.__global||void 0===f.__global?void 0:f.__global.env)||"prd";"prd"===O&&(O="prod");var A=10650062960,L={visible:l.visible,expandPromotionId:l.promotionId,data:{orderId:String(o),env:O,saleChannel:21,locale:"zh-CN",currency:"CNY",pageId:String(A)},traceLogId:1===a?"TICKET":"THINGS_TODO",onLoad:R,onClose:P,clientEnv:{env:O,ctType:0,clientType:3}};return(0,pn.jsxs)(pn.Fragment,{children:[g.length>0?(0,pn.jsxs)(_.View,{className:I,id:"cross_coupon_wrapper_id",children:[(0,pn.jsx)(_l,{data:g,action:D,orderId:o}),(null===g||void 0===g?void 0:g.length)>0?(0,pn.jsx)(fl,{couponLen:null===g||void 0===g?void 0:g.length}):null]}):null,(0,pn.jsx)(il,(0,v.Z)({},L))]})})),ml=(0,u.memo)(ul),_l=u.memo((function(e){var n=e.data,t=e.action,i=e.orderId,r=n.length,o={ubtKeyName:"".concat(nl).concat(el.hotel,"_exp"),data:{orderid:i}};(0,u.useEffect)((function(){r&&p().sendUbtByPage.ubtTrace(o.ubtKeyName,o.data)}),[]);var a=function(){var e=null===n||void 0===n?void 0:n.length,i=(n||[]).map((function(n,i){return(0,pn.jsx)(hl,{index:i,item:n,dataLen:e,action:t},i)}));return e<=2?(0,pn.jsx)(_.View,{className:"recommend-page-coupon-contain-info-body",children:i}):(0,pn.jsxs)(_.ScrollView,{enableFlex:!0,className:"recommend-page-coupon-scroll_contain-info-body",style:{},scrollX:!0,scrollY:!1,enhanced:!0,showScrollbar:!1,children:[(0,pn.jsx)(_.View,{className:"rc_block_box"}),i,(0,pn.jsx)(_.View,{className:"rc_block_box"})]})};return r?(0,pn.jsx)(_.View,{className:"recommend-page-coupon-wrapper",children:(0,pn.jsxs)(_.View,{className:"recommend-page-coupon-contain",children:[(0,pn.jsxs)(_.View,{className:"recommend-page-coupon-contain-image-body",children:[(0,pn.jsx)(_.Image,{src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/recmond_coupon.png",className:"recommend-page-coupon-contain-image-icon"}),(0,pn.jsx)(_.Text,{children:"\u4e70\u95e8\u7968\u9001\u60a8".concat(r,"\u5f20\u4f18\u60e0\u5238")})]}),a(),(0,pn.jsx)(_.View,{className:"rc_wrapper_mask"})]})}):null})),hl=u.memo((function(e){var n=e.item,t=e.dataLen,i=e.index,r=e.action,o=null!==n&&void 0!==n&&n.businessLineType&&cl[null===n||void 0===n?void 0:n.businessLineType]?cl[null===n||void 0===n?void 0:n.businessLineType]:ll,a=null!==n&&void 0!==n&&n.businessLineName?"".concat(null===n||void 0===n?void 0:n.businessLineName):"",s="";return 1===t?s="recommend-page-coupon-contain-one-item":2===t&&(s="recommend-page-coupon-contain-two-item"),(0,pn.jsxs)(_.View,{onClick:function(){return r(n)},className:"recommend-page-coupon-contain-item-wrap ".concat(s),style:i===t-1?{marginRight:0}:{},children:[(0,pn.jsxs)(_.View,{className:"rc_item_left",children:[(0,pn.jsx)(_.Image,{src:o,className:"rc_item_image"}),(0,pn.jsxs)(_.View,{className:1===t?"rc_item_one_line_text":"rc_item_two_line_text",children:[(0,pn.jsx)(_.Text,{className:"rc_item_title",children:null===n||void 0===n?void 0:n.deductionAmountLabel}),(0,pn.jsx)(_.Text,{className:"rc_item_desc",style:1===t?{marginLeft:8}:{},children:"".concat(a).concat(null===n||void 0===n?void 0:n.customerNewOrOldName)})]})]}),(0,pn.jsx)(_.Image,{src:dl,className:"rc_item_right_icon"})]})})),fl=u.memo((function(e){var n=e.couponLen;return(0,pn.jsxs)(_.View,{className:"recommend_coupon_cross",children:[(0,pn.jsx)(_.View,{className:"coupon_cross_title",children:(0,pn.jsx)(_.Text,{className:"title_text",children:"\u60a8\u8fd8\u6709".concat(n,"\u5f20\u9152\u5e97\u4f18\u60e0\u5238\u672a\u4f7f\u7528\u54e6\uff5e")})}),(0,pn.jsx)(_.View,{className:"coupon_cross_container",children:(0,pn.jsxs)(_.View,{className:"inner_container",children:[(0,pn.jsx)(_.Image,{className:"icon_left",src:ol,mode:"aspectFit"}),(0,pn.jsx)(_.Image,{className:"icon_right_top",src:sl,mode:"aspectFit"}),(0,pn.jsx)(_.Image,{className:"icon_right_bottom",src:al,mode:"aspectFit"}),(0,pn.jsx)(_.Image,{className:"main_img",src:rl,mode:"aspectFit"})]})})]})})),pl=200;function vl(e,n){var t=n.retry,i=void 0===t?5:t,r=n.delayTime,o=void 0===r?pl:r,a=i,s=function n(t,i){try{Gn().createSelectorQuery().select(e).boundingClientRect().exec((function(e){var r=e[0];r?t(r):a>0?setTimeout((function(){a--,n(t,i)}),o):t(null)}))}catch(e){t(null)}};return new Promise(s)}var xl=u.memo((function(e){var n=e.setCrossCouponLen,t=e.hasRecommendList,i=_n(),r=i.additionalSale,o=void 0===r?[]:r,a=i.additionalScenicSpots,s=void 0===a?[]:a;return(0,pn.jsxs)(_.View,{className:t?"addtional-recommend-container":"",children:[t?(0,pn.jsx)(gl,{}):null,(0,pn.jsx)(ml,{setCrossCouponLen:n}),t?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(wl,{isNew:!1,type:"resource",data:o}),(0,pn.jsx)(wl,{isNew:!0,type:"viewSpot",data:s})]}):null]})})),gl=function(){return(0,pn.jsx)(_.View,{className:"addtional-recommend-title",children:(0,pn.jsx)(_.Image,{className:"title_img",mode:"aspectFill",src:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/welfare_title.png"})})},jl=u.memo((function(e){var n,t=e.item,i=e.itemIndex,r=e.type,o=e.isNew,a=(0,u.useState)(!1),s=(0,h.Z)(a,2),c=s[0],l=s[1],d=(0,u.useState)(0),m=(0,h.Z)(d,2),f=m[0],v=m[1],x=(0,u.useState)(!1),g=(0,h.Z)(x,2),j=g[0],w=g[1],N="https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/orderttd/image-default.jpg";(0,u.useEffect)((function(){var e=setTimeout((function(){var e=Gn().createSelectorQuery();e.select("#".concat(r,"-info-").concat(i)).boundingClientRect(),e.select("#".concat(r,"-price-").concat(i)).boundingClientRect(),e.exec((function(e){var n,t,i=null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.height,r=null===e||void 0===e||null===(t=e[1])||void 0===t?void 0:t.height,o=i>r?i:r;console.log("image height",i,r,o),o>0&&(v(o),w(!0))}))}),100);return function(){e&&clearTimeout(e)}}),[]);var y=t.id,T=t.name,I=void 0===T?"":T,b=t.level,S=void 0===b?"":b,V=t.desc,C=void 0===V?"":V,k=t.features,E=void 0===k?"":k,R=t.imageUrl,P=void 0===R?"":R,D=t.tags,O=void 0===D?[]:D,A=t.wechatUrl,L=void 0===A?"":A,U=t.displayPriceType,Z=void 0===U?1:U,M=t.displayPriceDesc,F=void 0===M?"\u6682\u65e0\u62a5\u4ef7":M,B=t.displayPriceTypeDesc,H=void 0===B?"\u95e8\u7968":B,G=t.displayBtnDesc,q=void 0===G?"\u9884\u8ba2":G,z=t.bizLineType,Y=t.priceInfo,$=Y.price,K=void 0===$?0:$,W=Y.preferentialPrice,Q=void 0===W?0:W,J=Y.marketPrice,X=void 0===J?0:J,ee=Y.hidePreferentialPrice,ne=Y.isFree,te=void 0!==ne&&ne,ie=_n(),re=ie.basicInfo.orderId,oe={ubtKeyName:"".concat(nl).concat(el[r],"_exp"),data:{orderid:re,resourceid:y}};return(0,u.useEffect)((function(){p().sendUbtByPage.ubtTrace(oe.ubtKeyName,oe.data)}),[]),(0,pn.jsxs)(_.View,{className:"'item-out-box'".concat(0===i?"":" top-line"),children:[(0,pn.jsxs)(_.View,{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"},children:[j&&(0,pn.jsx)(_.View,{className:"image-box",children:(0,pn.jsx)(_.Image,{className:"image",onerror:function(){return l(!0)},mode:"aspectFill",style:{width:"140rpx",height:f,backgroundSize:"cover"},src:c||!P?N:P})}),(0,pn.jsxs)(_.View,{id:"".concat(r,"-info-").concat(i),className:"info-box",children:[(0,pn.jsxs)(_.View,{className:"title_wrap",children:[!!S&&(0,pn.jsx)(_.Text,{className:"title-tag",style:{top:"-4rpx"},children:S}),I]}),!!C&&(0,pn.jsxs)(_.View,{className:"rank",children:[(0,pn.jsx)(_.View,{className:"icon".concat("resource"===r?" icon-hot":" icon-top_list")}),C]}),(0,pn.jsxs)(_.View,{className:"other",children:[!!E&&(0,pn.jsx)(_.View,{className:"features",children:E}),O.length>0&&(0,pn.jsx)(_.View,{className:"line",children:null===O||void 0===O||null===(n=O.slice(0,3))||void 0===n?void 0:n.map((function(e,n){var t=e.name;return(0,pn.jsxs)(u.Fragment,{children:[0!==n&&(0,pn.jsx)(_.Text,{className:"separate-line"}),(0,pn.jsx)(_.Text,{className:"tag",children:t},"tag-".concat(n))]},"tag-".concat(n))}))})]})]})]}),(0,pn.jsxs)(_.View,{id:"".concat(r,"-price-").concat(i),className:"price-box",children:[te?null:o?(0,pn.jsxs)(pn.Fragment,{children:[Q>0&&!ee&&(0,pn.jsx)(_.View,{className:"discount-wrapper",children:(0,pn.jsxs)(_.Text,{className:"discount-text",children:["\u5df2\u51cf\xa5",Q]})}),(2==Z||3==Z)&&(0,pn.jsx)(_.Text,{className:"currencyDesc",children:H}),(0,pn.jsxs)(_.View,{className:"current",children:[(2==Z||3==Z)&&(0,pn.jsx)(_.Text,{className:"currency",children:"\xa5"}),2==Z||3==Z?(0,pn.jsx)(_.Text,{className:"displayPriceDesc2",children:2===Z?K:X}):(0,pn.jsx)(_.Text,{className:6===Z?"currencyDesc":"displayPriceDesc",children:F}),2==Z||3==Z?(0,pn.jsx)(_.Text,{className:"currencyP",children:"\u8d77"}):null]})]}):(0,pn.jsxs)(pn.Fragment,{children:[Q>0&&!ee&&(0,pn.jsx)(_.View,{className:"discount-wrapper",children:(0,pn.jsxs)(_.Text,{className:"discount-text",children:["\u5df2\u51cf\xa5",Q]})}),Q>0&&(0,pn.jsxs)(_.View,{className:"origin",children:["\xa5",X]}),(0,pn.jsxs)(_.View,{className:"currentPre",children:[(0,pn.jsx)(_.Text,{className:"currency",children:"\xa5"}),K]})]}),(0,pn.jsx)(Nl,{displayPriceType:Z,type:r,orderid:re,id:y,name:z===tl?"\u8bd5\u542c":q,onClick:function(){if(o)L&&p().navigateTo({url:L+"&ext-scenceId=\u5730\u63a8\u8ba2\u8be6\u56ed\u5916\u666f\u70b9&ext-orderId=".concat(re)});else{var e={"ext-scenceId":"\u5730\u63a8\u8ba2\u8be6\u56ed\u5185\u8d44\u6e90","ext-orderId":re};if(z===tl)return void Bn.forwardElectronicDetail(y,e);Bn.forwardResDetail(y,e)}}})]})]},"".concat(r,"-item-").concat(i))})),wl=u.memo((function(e){var n,t=e.isNew,i=e.type,r=e.data,o=void 0===r?[]:r;return 0===o.length?null:(o.forEach((function(e,t){var i=e.priceInfo.preferentialPrice,r=void 0===i?0:i;n=0!==t?r>n?r:n:r})),(0,pn.jsxs)(_.View,{className:"addtional-recommend-list",children:[(0,pn.jsxs)(_.View,{className:"title-wrapper",children:[(0,pn.jsx)(_.Image,{className:"title-image",src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/orderttd/welfare-".concat(i,".png")}),n>0&&(0,pn.jsxs)(_.Text,{className:"discount",children:["\u6700\u9ad8\u53ef\u7701",n,"\u5143"]})]}),o.map((function(e,n){return(0,pn.jsx)(jl,{item:e,itemIndex:n,type:i,isNew:t},n)}))]}))})),Nl=function(e){var n=e.displayPriceType,t=e.id,i=e.type,r=e.orderid,o=e.name,a=e.onClick,s=function(){var e="".concat(nl).concat(el[i],"_click"),n={orderid:r};"hotel"!==i&&(n=(0,v.Z)((0,v.Z)({},n),{},{resourceid:t})),p().sendUbtByPage.ubtTrace(e,n),a()};return(0,pn.jsx)(_.View,{className:"addtional-recommend-button",style:{marginTop:[1,4,6,7].includes(Number(n))?6:4},onClick:s,children:(0,pn.jsx)(_.Text,{className:"text",children:o})})},yl=xl,Tl=fn.gk.showPopup;function Il(){var e=_n(),n=e.invoiceButton,t=e.requestParam,i=null===t||void 0===t?void 0:t.token,r=n.applyInvoice,o=n.cannotApplyInvoice,a=n.checkInvoice,s=n.downloadInvoice,c=n.downloadVipInvoice,l=n.invoiceInfo,d=n.superVipInvoiceInfo,u=o,m=r&&!o,_=!!(a||s||c||l&&l.invoiceId||d)&&!o;return!i||o||r||a||s||d?(0,pn.jsxs)(pn.Fragment,{children:[u&&!_?(0,pn.jsx)(bl,{}):null,m?(0,pn.jsx)(Vl,{}):null,_?(0,pn.jsx)(Sl,{}):null]}):null}function bl(){var e=_n(),n="\u67e5\u770b\u53d1\u7968",t=(0,pn.jsx)($a,{state:e}),i=function(){Tl({title:"\u53d1\u7968\u4fe1\u606f",children:t,className:"invoice_tips_view_min_height"})};return(0,pn.jsxs)(_.View,{className:"buttonInner",onClick:function(){i()},children:[(0,pn.jsx)(_.View,{className:"button_icon icon-invoice"}),(0,pn.jsx)(_.Text,{className:"buttonText",children:n})]})}function Sl(){var e=_n(),n=e.invoiceButton,t=e.basicInfo,i=t.orderId,r=(n.hasPaperInvoice,"\u67e5\u770b\u53d1\u7968"),o=hn(),a=o.doContinuePay,s=function(){console.log(e),a({oid:i}).then((function(e){console.log(e),Bn.doPay(e)}))},c=function(e){Bn.downloadInvoice(e)},l=function(){Bn.forwardExpress({orderId:i})},d=(0,pn.jsx)(Ba,{state:e,doPay:s,doDownload:c,doExpress:l}),u=function(){Tl({title:"\u53d1\u7968\u4fe1\u606f",children:d})};return(0,pn.jsxs)(_.View,{className:"buttonInner",onClick:function(){u()},children:[(0,pn.jsx)(_.View,{className:"button_icon icon-invoice"}),(0,pn.jsx)(_.Text,{className:"buttonText",children:r})]})}function Vl(){var e=_n(),n=e.basicInfo,t=n.orderId;return(0,pn.jsxs)(_.View,{className:"buttonInner",onClick:function(){Bn.applyInvoice({orderId:t})},children:[(0,pn.jsx)(_.View,{className:"button_icon icon-invoice"}),(0,pn.jsx)(_.Text,{className:"buttonText",children:"\u6211\u8981\u53d1\u7968"})]})}var Cl=fn.WZ.showDialog,kl=fn.gk.showPopup,El=fn.gk.hidePopup;function Rl(e){var n=_n(),t=n.newFooterButton,i=n.basicInfo,r=i.notShowSubUnit,o=void 0===r?[]:r,a=o.length>0&&o.indexOf("footeraction")>=0;return 0===(null===t||void 0===t?void 0:t.length)||a?null:(0,pn.jsx)(fn.Gn,{customStyle:{marginTop:8},children:(0,pn.jsx)(Dl,(0,v.Z)({footerButton:t},e))})}var Pl={deleteOrder:"icon-close",cancel:"icon-close",resendMessage:"icon-email",bookingagain:"icon-ticket",invoice:"icon-invoice",addcomment:"icon-like",mycomment:"icon-like"},Dl=function(e){var n=_n(),t=n.contact,i=(n.basicInfo,(0,u.useState)(!1)),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=mn.useActions(),c=s.deleteOrder,l=s.sendMessage,d=s.doReminderMessage,m=e.footerButton,f=m.length,v="";t&&(v=null===t||void 0===t?void 0:t.phone);var x="\u5df2\u53d1\u9001\u51fa\u6e38\u4fe1\u606f",g=v,N="\u51fa\u6e38\u4fe1\u606f\u5c06\u53d1\u9001\u81f3"+(g||"\u60a8\u7684\u624b\u673a")+"\uff0c\u786e\u5b9a\u53d1\u9001\u5417",y=function(e,t){o?p().showToast({title:x,icon:"none"}):Cl({title:"",desc:N,buttons:[{text:"\u53d6\u6d88",type:"secondary"},{text:"\u53d1\u9001",type:"primary",callback:function(){var e=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(n);case 3:r=e.sent,p().showToast({title:(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.customerErrorMessage)||"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),o=null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.success,a(o),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),p().showToast({title:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();Bn.topButtonForward(t,n,e)}}]})},T=function(e,t){var i=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(n){var t,i,r,o;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(n);case 3:r=e.sent,o=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||(null===r||void 0===r||null===(i=r.head)||void 0===i?void 0:i.errmsg)||"\u8bf7\u7a0d\u540e\u518d\u8bd5",p().showToast({title:o,icon:"none"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),p().showToast({title:"\u50ac\u786e\u8ba4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();Bn.topButtonForward(t,n,i)},I=function(){Cl({title:"",desc:"\u60a8\u8981\u6c38\u4e45\u5220\u9664\u6b64\u8ba2\u5355\u5417\uff1f",buttons:[{text:"\u70b9\u9519\u4e86",type:"secondary"},{text:"\u6c38\u4e45\u5220\u9664",type:"primary",callback:function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var n,t,i;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:n=e.sent,t=n.isSuccess,i=n.errorMessage,t?p().navigateBack({delta:1}).then((function(e){console.log(e)})):p().showToast({title:i,icon:"none"});case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}]})};return(0,pn.jsx)(_.View,{className:"recommend_footer_action_wrap",children:f>0&&(0,pn.jsx)(_.View,{className:"footerContainer",children:m.map((function(e,t){var i=e.type,r=void 0===i?"default":i,a=e.opt,s=void 0===a?{}:a,c=s.disable,l=void 0!==c&&c,d=s.highlight,u=void 0!==d&&d,m=s.tips,h=void 0===m?"":m,f=s.toast,v=void 0===f?"\u7a0d\u540e\u91cd\u8bd5":f;return"\u70b9\u8bc4\u8d5a\u79ef\u5206"===e.title&&(e.title="\u5199\u70b9\u8bc4"),"cancel"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsx)(Ol,{})},String(t)):"resendMessage"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsxs)(_.View,{onClick:function(n){return y(n,e)},className:o?"buttonInner buttonInnerReadonly":"buttonInner",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]})},String(t)):u?(0,pn.jsxs)(_.View,{className:"buttonWrapper",children:[(0,pn.jsxs)(_.View,{onClick:function(t){!l||!v||"applyChangeDate"!==r&&"applyChangeId"!==r?Bn.topButtonForward(e,n,(function(){})):Cl({title:"",desc:v,buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){}}]})},className:"buttonInner",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]}),h?(0,pn.jsx)(_.View,{className:"buttonTip",children:(0,pn.jsx)(_.Text,{className:"tipsText",children:h})}):null]},String(t)):l?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsxs)(_.View,{onClick:function(e){p().showToast({title:v,icon:"none"})},className:"buttonInner buttonInnerReadonly",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]})},String(t)):"urge"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsxs)(_.View,{onClick:function(n){return T(n,e)},className:"buttonInner",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]})},String(t)):"invoice"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsx)(Il,{})},String(t)):"deleteOrder"===r?(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsxs)(_.View,{onClick:I,className:"buttonInner",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]})},String(t)):(0,pn.jsx)(_.View,{className:"buttonWrapper",children:(0,pn.jsxs)(_.View,{onClick:function(t){Bn.topButtonForward(e,n,(function(){}))},className:"buttonInner",children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl[r])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:e.title})]})},String(t))}))})})};function Ol(){var e,n,t,i,r,o=_n(),a=null===o||void 0===o||null===(e=o.orderInfo)||void 0===e?void 0:e.basicInfo,s=a.backOrderStatus,c=o.resource,l=null!==(n=null===o||void 0===o||null===(t=o.orderInfo)||void 0===t||null===(t=t.operation)||void 0===t?void 0:t.items)&&void 0!==n?n:[],d=l.find((function(e){return 10===e.operationType})),u=l.find((function(e){return 11===e.operationType})),m=l.find((function(e){return 19===e.operationType})),h=null===o||void 0===o||null===(i=o.basicInfo)||void 0===i||null===(i=i.refund)||void 0===i?void 0:i.switchPartRefund,f={orderID:String(null===a||void 0===a?void 0:a.orderId),usedate:String(null===c||void 0===c||null===(r=c[0])||void 0===r?void 0:r.useDate),orderdate:String(null===a||void 0===a?void 0:a.orderDate)},x=function(e){return{ubtKeyName:e?"act_unsubscribe_entry_on_exposure":"act_unsubscribe_entry_off_exposure",data:f}};if(m)return(0,pn.jsxs)(_.View,{onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_off_trace",f),p().showToast({title:(null===m||void 0===m?void 0:m.operationName)||"\u7a0d\u540e\u91cd\u8bd5",icon:"none"})},className:"autoExpose buttonInner buttonInnerReadonly",id:"order_cancel_exposure_unique_id","data-expose":x(!1),children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl["cancel"])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:"\u7533\u8bf7\u9000\u8ba2"})]});if(d){var g=(0,pn.jsx)(ns,{closeFloating:function(){return El()}}),j=function(){kl({title:"\u53d6\u6d88\u539f\u56e0\uff08\u9009\u586b\uff09",children:g})},w={};return 3!==s&&(w={className:"autoExpose buttonInner",id:"order_cancel_exposure_unique_id","data-expose":x(!0)}),(0,pn.jsxs)(_.View,(0,v.Z)((0,v.Z)({onClick:function(e){if(3!==s)return p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_on_trace",f),void Bn.goToOrderCancel(null===a||void 0===a?void 0:a.orderId,null===a||void 0===a?void 0:a.backOrderStatus,h);j()},className:"buttonInner"},w),{},{children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl["cancel"])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:3===s?"\u53d6\u6d88\u8ba2\u5355":"\u7533\u8bf7\u9000\u8ba2"})]}))}return u?(0,pn.jsxs)(_.View,{onClick:function(){p().sendUbtByPage.ubtTrace("act_unsubscribe_entry_off_trace",f),p().showToast({title:(null===u||void 0===u?void 0:u.operationName)||"\u7a0d\u540e\u91cd\u8bd5",icon:"none"})},className:"autoExpose buttonInner buttonInnerReadonly",id:"order_cancel_exposure_unique_id","data-expose":x(!1),children:[(0,pn.jsx)(_.View,{className:"button_icon ".concat(Pl["cancel"])}),(0,pn.jsx)(_.Text,{className:"buttonText",children:"\u7533\u8bf7\u9000\u8ba2"})]}):null}var Al=fn.gk.showPopup,Ll=fn.gk.hidePopup,Ul=130;function Zl(e){var n=(0,Zn.uj)(e);return n?(0,pn.jsx)(_.View,{className:"recommend_page_voucher",children:(0,pn.jsx)(Bl,{})}):(0,pn.jsx)(_.View,{className:"recommend_page_voucher",children:(0,pn.jsx)(Fl,(0,v.Z)({},e))})}var Ml=(0,u.memo)(Zl),Fl=function(e){var n=e.voucherinfo,t=void 0===n?[]:n,i=e.voucherPhoneList,r=void 0===i?[]:i,o=e.idlist,a=void 0===o?[]:o,s=e.voucherOrderId,c=e.shareVoucherPrompt,l=a[0]||{},d=l.passengerName,u=l.passengerEName,m=(l.identificationType,l.identificationName),h=l.identificationNumber,f="".concat(d||""," ").concat(u||"","/").concat(m),p=r[0],v=t[0]||{},x=(v.voucherDesc,v.voucherExtMsg),g=v.vouchers,j=[];s&&j.push("voucherOrderId"),p&&j.push("phoneInfo"),h&&j.push("identificationNumber"),g&&j.push("vouchers"),x&&j.push("voucherExtMsg");var w=j.length>1;return(s||p||g)&&!1,(0,pn.jsxs)(_.View,{className:"voucher_current_page",children:[c?(0,pn.jsx)(ed,{text:c}):null,s?(0,pn.jsx)(Gl,{title:"\u643a\u7a0b\u8ba2\u5355\u53f7",text:s,showAutoHeight:w}):null,h?(0,pn.jsx)(Xl,{title:f,text:h,showAutoHeight:w}):null,p?(0,pn.jsx)(Gl,{title:"\u624b\u673a\u53f7",text:p,showAutoHeight:w}):null,(0,pn.jsx)(ql,{vouchers:g}),x?(0,pn.jsx)(id,{text:x,showAutoHeight:w}):null]})},Bl=function(e){var n=_n(),t=(n.resource,n.basicInfo),i=(n.contact,n.orderInfo,n.requestParam),r=t.orderId,o=(t.orderType,(null===i||void 0===i?void 0:i.token)||""),a="/pages/orderttd/voucher/index?orderid="+r+"&token="+o,s=function(){p().navigateTo({url:a,success:function(e){}})};return(0,pn.jsx)(Hl,{action:s})},Hl=function(e){var n=e.action;return(0,pn.jsx)(_.View,{className:"voucher_empty",onClick:n,children:(0,pn.jsxs)(_.View,{className:"voucher_empty_text",children:[(0,pn.jsx)(_.Text,{children:"\u70b9\u51fb\u67e5\u770b\u5168\u90e8"}),(0,pn.jsxs)(_.View,{className:"text_inner",children:[(0,pn.jsx)(_.Text,{children:"\u51ed\u8bc1\u4fe1\u606f"}),(0,pn.jsx)(_.View,{className:"icon-Forward"})]})]})})},Gl=function(e){var n=e.title,t=e.text,i=e.showAutoHeight,r=i?"voucher_string_auto":"voucher_string";return(0,pn.jsxs)(_.View,{className:"voucher_bg ".concat(r),children:[(0,pn.jsx)(_.Text,{children:n}),(0,pn.jsx)(_.Text,{children:t})]})},ql=function(e){var n=e.vouchers;return n?(0,pn.jsx)(pn.Fragment,{children:n.map((function(e,n){return(0,pn.jsx)($l,{info:e},n)}))}):null},zl=function(e){p().setClipboardData({data:String(e),success:function(){console.log("success")},fail:function(){console.log("fail")}})},Yl=function(e){(0,Zn.mi)({targetPageURI:e})},$l=function(e){var n=e.info,t=n.imgUrl,i=n.voucherFileUrl,r=(n.imgOriginalCode,n.voucherType,n.voucherNO),o=n.imgShortUrl,a=n.supplierShortUrl,s=n.supportOpenUrl,c=n.voucherForm,l=(n.expTime,n.voucherUseStatus,n.validStatus,n.isSuccess,0===c&&!t&&o),d=0===c&&!t&&r,u=1;t&&u++,l&&u++,d&&u++,i&&u++,a&&u++;var m=u>2;return(0,pn.jsx)(pn.Fragment,{children:m?(0,pn.jsx)(Kl,{info:n}):(0,pn.jsxs)(pn.Fragment,{children:[t?(0,pn.jsx)(Jl,{url:t,acode:r}):null,a?(0,pn.jsx)(Ql,{url:a,open:s}):null,i?(0,pn.jsx)(nd,{url:i||"jkiogji"}):null,d?(0,pn.jsx)(Gl,{title:"\u6570\u5b57\u7801",text:d}):null,l?(0,pn.jsx)(td,{url:l}):null]})})},Kl=function(e){var n=e.info,t=n.imgUrl,i=n.voucherFileUrl,r=(n.imgOriginalCode,n.voucherType,n.voucherNO),o=n.imgShortUrl,a=n.supplierShortUrl,s=n.supportOpenUrl,c=!t&&r,l=!t&&o,d=_n(),u=d.basicInfo,m=d.contact,h=u.orderId,f=hn(),v=f.resendMail,x=null===m||void 0===m?void 0:m.email,g=1===s,j=function(){v({orderId:h}).then((function(e){var n=null===e||void 0===e?void 0:e.errMsg;p().showToast({title:n,icon:"none"})})).catch((function(){p().showToast({title:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}))};return(0,pn.jsx)(_.View,{className:"mix_voucher_contain",children:(0,pn.jsxs)(_.View,{className:"mix_voucher_contain_inner",children:[t?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Jl,{url:t,acode:r}),(0,pn.jsx)(Wl,{})]}):null,c?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"mix_voucher_string_contain",children:[(0,pn.jsx)(_.Text,{children:"\u6570\u5b57\u9a8c\u8bc1\u7801"}),(0,pn.jsx)(_.Text,{children:c}),(0,pn.jsx)(_.Text,{className:"copy_button",onClick:function(){zl(c)},children:"\u590d\u5236\u51ed\u8bc1"})]}),(0,pn.jsx)(Wl,{})]}):null,l?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"mix_voucher_string_contain",children:[(0,pn.jsx)(_.Text,{children:"\u7535\u5b50\u51ed\u8bc1"}),(0,pn.jsx)(_.Text,{className:"url_color",children:l}),(0,pn.jsx)(_.Text,{className:"copy_button",onClick:function(){zl(l)},children:"\u590d\u5236\u94fe\u63a5"})]}),(0,pn.jsx)(Wl,{})]}):null,a?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"mix_voucher_string_contain",children:[(0,pn.jsx)(_.Text,{children:"\u7535\u5b50\u7968"}),g?(0,pn.jsx)(_.Text,{className:"copy_button",onClick:function(){Yl(a)},children:"\u70b9\u51fb\u67e5\u770b"}):(0,pn.jsxs)(_.Text,{onClick:function(){zl(a)},children:[(0,pn.jsx)(_.Text,{className:"url_color",children:a}),(0,pn.jsx)(_.Text,{className:"copy_button",children:"\u590d\u5236\u94fe\u63a5"})]})]}),(0,pn.jsx)(Wl,{})]}):null,i?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsxs)(_.View,{className:"mix_voucher_string_contain",children:[(0,pn.jsx)(_.Text,{children:"\u786e\u8ba4\u5355"}),(0,pn.jsx)(_.Text,{className:"url_color",children:i}),(0,pn.jsx)(_.Text,{className:"copy_button",onClick:function(){zl(i)},children:"\u590d\u5236\u94fe\u63a5"}),x?(0,pn.jsx)(_.Text,{className:"copy_button",onClick:j,children:"\u53d1\u9001\u81f3\u90ae\u7bb1"}):null]}),(0,pn.jsx)(Wl,{})]}):null]})})},Wl=function(){return(0,pn.jsx)(_.View,{className:"border_contain",children:(0,pn.jsx)(_.View,{className:"border_contain_inner"})})},Ql=function(e){var n=e.url,t=e.open,i=1===t;return i?(0,pn.jsx)(Hl,{action:function(){return Yl(n)}}):(0,pn.jsxs)(_.View,{className:"voucher_bg voucher_string",children:[(0,pn.jsx)(_.Text,{children:"\u7535\u5b50\u7968"}),(0,pn.jsxs)(_.Text,{onClick:function(){zl(n)},children:[(0,pn.jsx)(_.Text,{className:"url_color",children:n}),(0,pn.jsx)(_.Text,{className:"copy_button",children:"\u590d\u5236\u94fe\u63a5"})]})]})},Jl=function(e){var n=e.url,t=e.acode,i=(0,u.useState)(Ul),r=(0,h.Z)(i,2),o=r[0],a=r[1],s=(0,u.useState)(0),c=(0,h.Z)(s,2),l=c[0],d=c[1],m=(0,u.useState)({}),f=(0,h.Z)(m,2),v=f[0],x=f[1],g=function(){Al({children:(0,pn.jsx)(rd,{originInfo:v,imgUrl:n,close:Ll}),fullHeight:!0})},j=function(e){var n=(new Date).getTime();p().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_img_onload",{time:null===n||void 0===n?void 0:n.toString(),desc:"\u7535\u5b50\u7968\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210",detail:null===JSON||void 0===JSON?void 0:JSON.stringify(null===e||void 0===e?void 0:e.detail)});var t=null===e||void 0===e?void 0:e.detail,i=t.width,r=t.height,o=i/r,s=i,c=r;i>Ul&&(s=Ul,c=s/o),x({width:i,height:r}),a(s),d(c)};return(0,pn.jsxs)(_.View,{className:"image_voucher_contain",children:[(0,pn.jsx)(_.Image,{onLoad:j,src:n,className:"image_voucher",mode:"aspectFill",style:{width:2*o+"rpx",height:2*l+"rpx"},onClick:g}),t?(0,pn.jsx)(_.View,{className:"code_voucher",children:(0,pn.jsxs)(_.Text,{children:["\u8f85\u52a9\u7801\uff1a",t]})}):null]})},Xl=function(e){var n=e.showAutoHeight,t=n?"voucher_string_auto":"voucher_string",i=e.title,r=e.text;return(0,pn.jsxs)(_.View,{className:"voucher_bg ".concat(t),children:[(0,pn.jsx)(_.Text,{children:i}),(0,pn.jsx)(_.Text,{children:r})]})},ed=function(e){var n=e.text;return(0,pn.jsx)(_.View,{className:"voucher_info",children:(0,pn.jsx)(_.Text,{children:n})})},nd=function(e){var n=e.url,t=_n(),i=t.basicInfo,r=t.contact,o=i.orderId,a=hn(),s=a.resendMail,c=null===r||void 0===r?void 0:r.email,l=function(){s({orderId:o}).then((function(e){var n=null===e||void 0===e?void 0:e.errMsg;p().showToast({title:n,icon:"none"})})).catch((function(){p().showToast({title:"\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}))};return(0,pn.jsxs)(_.View,{className:"voucher_bg voucher_string",children:[(0,pn.jsx)(_.Text,{children:"\u786e\u8ba4\u5355"}),(0,pn.jsx)(_.Text,{className:"url_color",children:n}),(0,pn.jsx)(_.Text,{className:"copy_button",onClick:function(){zl(n)},children:"\u590d\u5236\u94fe\u63a5"}),c?(0,pn.jsx)(_.Text,{className:"copy_button",onClick:l,children:"\u53d1\u9001\u81f3\u90ae\u7bb1"}):null]})},td=function(e){var n=e.url;return(0,pn.jsxs)(_.View,{className:"voucher_bg voucher_string",children:[(0,pn.jsx)(_.Text,{className:"url_color",children:n}),(0,pn.jsx)(_.Text,{className:"copy_button",children:"\u590d\u5236\u94fe\u63a5"})]})},id=function(e){var n=e.text,t=e.showAutoHeight,i=t?"voucher_string_auto":"voucher_string";return(0,pn.jsx)(_.View,{className:"voucher_bg ".concat(i),children:(0,pn.jsx)(_.View,{className:"ext_voucher_contain",children:(0,fn.P6)({text:n})})})},rd=function(e){var n=e.close,t=e.imgUrl,i=(e.originInfo,190),r=190;return(0,pn.jsx)(_.View,{className:"voucher_full_image_screen_wrap",children:(0,pn.jsxs)(_.View,{className:"voucher_full_image_screen_wrap_inner",children:[(0,pn.jsx)(_.View,{className:"header",onClick:n,children:(0,pn.jsx)(_.View,{className:"icon-close_regular"})}),(0,pn.jsx)(_.View,{className:"voucher_full_image_screen_image_contain",onClick:n,children:(0,pn.jsx)(_.Image,{mode:"aspectFit",className:"image",src:t,style:{width:i,height:r}})})]})})},od=(0,u.memo)((function(e){var n=e.basicInfo,t=e.packages,i=e.notShowInsurance,r=e.forbidResourceEvent,o=e.showType,a=e.hideRefundRules,s=e.reserve;return null!==t&&void 0!==t&&t.length?t.map((function(e,c){return(0,pn.jsx)(ad,{basicInfo:n,packageItem:e,idx:c,forbidResourceEvent:r,showType:o,hideRefundRules:a,showInsurance:!i&&t.length===c+1,reserve:s},String(c))})):null})),ad=function(e){var n=(0,gn.f)(300),t=e.basicInfo,i=e.packageItem,r=e.showType,o=e.idx,a=e.forbidResourceEvent,s=e.hideRefundRules,c=e.showInsurance,l=e.reserve,d=i.packageVoucherName,u=i.packageId,m=i.quantity,h=i.refundQuantity,f=i.refundRule,p=i.unit,v=i.subResList,x=i.isActive,g=i.packageUsedPrompt,j=t.orderStatusNew,w=v[0],N=w.useGuideList,y=w.electronicVoucherPrompt,T=w.useDateString,I=w.udateTitle,b=w.useType,S=w.useDateDesc,V=w.showReserve,C=o>0?"marginTop16":"",k=[18].indexOf(j)>-1,E=function(){return n((function(){a||u&&x&&Bn.forwardResDetail(u)}))};if("notShow"===r&&o>0){var R=ld(N),P=R.instructionsTitle;return(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(C),children:(0,pn.jsx)(_.View,{className:"resource_card_contain",children:(0,pn.jsxs)(_.View,{className:"resource_card_contain_left",children:[(0,pn.jsx)(fd,{name:d,id:u,quantity:m,refundQuantity:h,unit:p,viewTemplateCode:"default",resourceType:0,isActive:x,forbidResourceEvent:a||!x,resourceUsedPrompt:g}),(0,pn.jsx)(Cd,{title:P,desc:y})]})})})}return k?(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(C),children:(0,pn.jsxs)(_.View,{className:"resource_insurance_card_contain ",children:[(0,pn.jsxs)(_.View,{className:"voice_resource_insurance_card_contain",onClick:E,children:[(0,pn.jsxs)(_.View,{className:"voice_resource_card_contain",children:[(0,pn.jsx)(fd,{name:d,id:u,quantity:m,refundQuantity:h,unit:p,viewTemplateCode:"default",resourceType:0,isActive:x,forbidResourceEvent:!0,resourceUsedPrompt:g}),(0,pn.jsx)(pd,{useType:b,useDateString:T,udateTitle:I,useDateDesc:S})]}),(0,pn.jsx)(_.View,{className:"resource_title_icon",children:x?(0,pn.jsx)(_.Text,{className:"icon-Forward"}):null})]}),c?(0,pn.jsx)(Vd,{}):null]})}):(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(C),children:(0,pn.jsxs)(_.View,{className:"resource_insurance_card_contain",children:[(0,pn.jsxs)(_.View,{className:"resource_card_contain",children:[(0,pn.jsxs)(_.View,{className:"resource_card_contain_left",children:[(0,pn.jsx)(fd,{name:d,id:u,quantity:m,refundQuantity:h,unit:p,viewTemplateCode:"default",resourceType:0,isActive:x,forbidResourceEvent:a||!x,resourceUsedPrompt:g}),(0,pn.jsx)(sd,{packageItem:i}),s?null:(0,pn.jsx)(vd,{rule:f,showReserve:V,reserveType:null===l||void 0===l?void 0:l.reserveType})]}),(0,pn.jsx)(gd,{}),(0,pn.jsx)(_.View,{className:"resource_card_contain_right",children:(0,pn.jsx)(_.View,{className:"resource_card_contain_voucher",children:(0,pn.jsx)(Bl,{})})})]}),c?(0,pn.jsx)(Vd,{}):null]})})},sd=(0,u.memo)((function(e){var n=e.packageItem,t=n.resourceShowType,i=n.subResList,r=1===t?[i[0]]:i;return null===r||void 0===r?void 0:r.map((function(e,n){var i=e.resourceVoucherName,r=e.quantity,o=e.unit,a=e.electronicVoucherPrompt,s=e.useDateString,c=e.udateTitle,l=e.useType,d=e.useGuideList,m=e.useDateDesc,h=e.resourceTitle,f=ld(d),p=f.instructionsTitle;if(1===t)return(0,pn.jsxs)(u.Fragment,{children:[(0,pn.jsx)(Cd,{title:p,desc:a}),(0,pn.jsx)(pd,{useType:l,useDateString:s,udateTitle:c,useDateDesc:m})]},String(n));var v=2===t?h:i;return(0,pn.jsxs)(_.View,{className:"package_sub_resource_wrap",children:[(0,pn.jsx)(cd,{resourceVoucherName:v,quantity:r,unit:o}),(0,pn.jsx)(Cd,{title:p,desc:a}),(0,pn.jsx)(pd,{useType:l,useDateString:s,udateTitle:c,useDateDesc:m})]},String(n))}))})),cd=(0,u.memo)((function(e){var n=e.resourceVoucherName,t=e.quantity,i=e.unit,r="".concat(n,"x").concat(t)+i;return(0,pn.jsx)(_.View,{className:"resource_card_contain_resource_name",children:(0,pn.jsx)(_.Text,{className:"resource_title",children:r})})})),ld=function(e){var n="";return(e||[]).forEach((function(e){n+=e.value})),{instructionsTitle:n}},dd=fn.gk.showPopup,ud=fn.gk.hidePopup;function md(e){var n=e.showType,t=_n(),i=t.resource,r=t.basicInfo,o=t.orderInfo,a=t.packages,s=(r.orderId,r.orderType,r.orderStatusNew),c=o.reserve,l=r.notShowSubUnit,d=void 0===l?[]:l,u=d.length>0&&-1!==d.indexOf("resourcejump"),m=d.length>0&&d.indexOf("cancelrules")>-1,h=(0,Zn.aj)(s),f=(i||[]).filter((function(e){return!(null!==e&&void 0!==e&&e.isPackage3SubItem)})),p=(f||[]).filter((function(e){return!(null!==e&&void 0!==e&&e.superVipFlag)&&"voice"!==e.viewTemplateCode})),v=(f||[]).filter((function(e){return"voice"===e.viewTemplateCode}));return(0,pn.jsxs)(_.View,{className:"resource_contain",children:[(0,pn.jsx)(od,{basicInfo:r,packages:a,forbidResourceEvent:u,showType:n,notShowInsurance:(null===f||void 0===f?void 0:f.length)>0,hideRefundRules:m,reserve:c}),p.map((function(e,t){return(0,pn.jsx)(_d,{cardInfo:e,resourceVoucherInfo:h,forbidResourceEvent:u,showType:n,idx:t+((null===a||void 0===a?void 0:a.length)||0),showInsurance:p.length===t+1,hideUnit:m,reserve:c},e.viewSpotId+"_"+t)})),v.map((function(e,t){return(0,pn.jsx)(hd,{cardInfo:e,resourceVoucherInfo:h,forbidResourceEvent:u,showType:n,idx:p.length,reserve:c},e.viewSpotId+"_"+t)}))]})}function _d(e){var n=e.cardInfo,t=e.reserve,i=(e.resourceVoucherInfo,e.showType),r=e.idx,o=e.showInsurance,a=e.forbidResourceEvent,s=e.hideUnit,c=n.resourceName,l=n.resourceId,d=n.boxId,u=n.viewSpotId,m=n.quantity,h=n.refundQuantity,f=n.unit,p=n.useDateString,v=n.useGuideList,x=(n.otherGuideList,n.reserveStrategyList,n.resourceUsage,n.voucherWraps),g=(n.qkdesc,n.qkadded,n.viewTemplateCode),j=n.resourceType,w=n.udateTitle,N=n.showReserve,y=(n.reserveInfo,n.inChina,n.realAddExt,n.otherRemarkList,n.boxInfo,n.modifyUseDateDesc,n.useType),T=(n.validTime,n.passengerIdentifications),I=n.identificationNessaryType,b=n.useDateDesc,S=(n.isFold,n.sendVoucherPrompt),V=n.voucherProviderPrompt,C=n.shareVoucherPrompt,k=(n.shareVoucherType,n.additionalVoucherPrompt,n.resourceUsedPrompt),E=n.isActive,R=(n.actAttributeList,n.disneyValidityList,n.voucherPhoneList),P=n.voucherOrderId,D=n.electronicVoucherPrompt,O=n.refundRule,A=_n(),L=A.orderInfo,U=void 0===L?{}:L,Z=A.basicInfo,M=void 0===Z?{}:Z,F=(M.orderId,M.orderStatusNew),B=U.epidemicHealthInfo,H=void 0===B?{}:B,G=(H.healthCode,H.itineraryCard,"");(v||[]).forEach((function(e){G+=e.value})),G=[18].indexOf(F)>-1?"":G;var q=r>0?"marginTop16":"",z=[18].indexOf(F)>-1,Y=(0,gn.f)(300);return"notShow"===i&&r>0?(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(q),children:(0,pn.jsx)(_.View,{className:"resource_card_contain",children:(0,pn.jsxs)(_.View,{className:"resource_card_contain_left",children:[(0,pn.jsx)(fd,{name:c,id:l,quantity:m,refundQuantity:h,unit:f,viewTemplateCode:g,boxId:d,viewSpotId:u,resourceType:j,resourceUsedPrompt:k,isActive:E,forbidResourceEvent:a}),(0,pn.jsx)(Cd,{title:G,desc:D})]})})}):z?(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(q),children:(0,pn.jsxs)(_.View,{className:"resource_insurance_card_contain ",children:[(0,pn.jsxs)(_.View,{className:"voice_resource_insurance_card_contain",onClick:function(){Y((function(){a||("voice"===g&&E?Bn.forwardElectronicDetail(l):3!==j?l&&E&&Bn.forwardResDetail(l):Bn.forwardSpotDetailMiniProgram(u))}))},children:[(0,pn.jsxs)(_.View,{className:"voice_resource_card_contain",children:[(0,pn.jsx)(fd,{name:c,id:l,quantity:m,refundQuantity:h,unit:f,viewTemplateCode:g,boxId:d,viewSpotId:u,resourceType:j,resourceUsedPrompt:k,isActive:E,forbidResourceEvent:!0,notShowArrow:!0}),(0,pn.jsx)(pd,{useType:y,useDateString:p,udateTitle:w,useDateDesc:b})]}),(0,pn.jsx)(_.View,{className:"resource_title_icon",children:E?(0,pn.jsx)(_.Text,{className:"icon-Forward"}):null})]}),o?(0,pn.jsx)(Vd,{}):null]})}):(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(q),children:(0,pn.jsxs)(_.View,{className:"resource_insurance_card_contain",children:[(0,pn.jsxs)(_.View,{className:"resource_card_contain",children:[(0,pn.jsxs)(_.View,{className:"resource_card_contain_left",children:[(0,pn.jsx)(fd,{name:c,id:l,quantity:m,refundQuantity:h,unit:f,viewTemplateCode:g,boxId:d,viewSpotId:u,resourceType:j,resourceUsedPrompt:k,isActive:E,forbidResourceEvent:a}),(0,pn.jsx)(Cd,{title:G,desc:D}),(0,pn.jsx)(pd,{useType:y,useDateString:p,udateTitle:w,useDateDesc:b}),s?null:(0,pn.jsx)(vd,{rule:O,showReserve:N,reserveType:null===t||void 0===t?void 0:t.reserveType})]}),(0,pn.jsx)(gd,{}),(0,pn.jsx)(_.View,{className:"resource_card_contain_right",children:(0,pn.jsxs)(_.View,{className:"resource_card_contain_voucher",children:[S?(0,pn.jsx)(Td,{title:S,showIm:!1}):null,V?(0,pn.jsx)(Td,{title:V,showIm:!0}):null,(0,pn.jsx)(Ml,{voucherinfo:x,voucherPhoneList:R,voucherOrderId:P,idtype:I,idlist:T,shareVoucherPrompt:C})]})})]}),o?(0,pn.jsx)(Vd,{}):null]})})}function hd(e){var n=e.cardInfo,t=(e.reserve,e.resourceVoucherInfo,e.showType,e.idx),i=(e.showInsurance,e.forbidResourceEvent),r=n.resourceName,o=n.resourceId,a=n.boxId,s=n.viewSpotId,c=n.quantity,l=n.refundQuantity,d=n.unit,u=n.useDateString,m=(n.useGuideList,n.otherGuideList,n.reserveStrategyList,n.resourceUsage,n.voucherWraps,n.qkdesc,n.qkadded,n.viewTemplateCode),h=n.resourceType,f=n.udateTitle,p=(n.showReserve,n.reserveInfo,n.inChina,n.realAddExt,n.otherRemarkList,n.boxInfo,n.modifyUseDateDesc,n.useType),v=(n.validTime,n.passengerIdentifications,n.identificationNessaryType,n.useDateDesc),x=(n.isFold,n.sendVoucherPrompt,n.voucherProviderPrompt,n.shareVoucherPrompt,n.shareVoucherType,n.additionalVoucherPrompt,n.resourceUsedPrompt),g=n.isActive,j=(n.actAttributeList,n.disneyValidityList,n.voucherPhoneList,n.voucherOrderId,t>0?"marginTop16":""),w=(0,gn.f)(300);return(0,pn.jsx)(_.View,{className:"resource_card_item ".concat(j),children:(0,pn.jsxs)(_.View,{className:"resource_insurance_card_contain voice_resource_insurance_card_contain",onClick:function(){w((function(){i||("voice"===m&&g?Bn.forwardElectronicDetail(o):3!==h?o&&g&&Bn.forwardResDetail(o):Bn.forwardSpotDetailMiniProgram(s))}))},children:[(0,pn.jsxs)(_.View,{className:"voice_resource_card_contain",children:[(0,pn.jsx)(fd,{name:r,id:o,quantity:c,refundQuantity:l,unit:d,viewTemplateCode:m,boxId:a,viewSpotId:s,resourceType:h,resourceUsedPrompt:x,isActive:g,forbidResourceEvent:i,notShowArrow:!0}),(0,pn.jsx)(pd,{useType:p,useDateString:u,udateTitle:f,useDateDesc:v})]}),(0,pn.jsx)(_.View,{className:"resource_title_icon",children:g?(0,pn.jsx)(_.Text,{className:"icon-Forward"}):null})]})})}var fd=function(e){var n=e.name,t=e.id,i=e.quantity,r=e.refundQuantity,o=e.unit,a=e.viewTemplateCode,s=e.viewSpotId,c=e.resourceType,l=e.resourceUsedPrompt,d=e.isActive,u=e.forbidResourceEvent,m=e.notShowArrow,h=(0,gn.f)(300),f="voice"===a,p=f||m?"voice_title":"";return(0,pn.jsxs)(_.View,{className:"resource_card_contain_resource_name",onClick:function(){h((function(){u||"voice"===a||(3!==c?t&&d&&Bn.forwardResDetail(t):Bn.forwardSpotDetailMiniProgram(s))}))},children:[(0,pn.jsxs)(_.Text,{className:"resource_title ".concat(p),children:[n,"x",i+(r||0),o,r?"(\u5df2\u9000x"+r+o+")":"",l?"("+l+")":""]}),f||!d||m?null:(0,pn.jsx)(_.View,{className:"resource_title_icon",children:(0,pn.jsx)(_.Text,{className:"icon-Forward"})})]})},pd=function(e){e.useType;var n=e.useDateString,t=e.udateTitle;e.useDateDesc;return(0,pn.jsx)(_.View,{className:"resource_card_contain_use_date",children:(0,pn.jsxs)(_.Text,{children:[t," ",n]})})},vd=function(e){var n=(0,u.useState)(!1),t=(0,h.Z)(n,2),i=(t[0],t[1],_n()),r=i.basicInfo,o=(r.orderType,r.inChina),a=e.rule,s=void 0===a?{}:a,c=e.showReserve,l=e.reserveType,d=s.refundTagCode,m=s.refundName,f=(s.refundDesc,s.overdueRefund),p=s.items,v=1===l?"\u672a\u786e\u8ba4\u968f\u65f6\u9000":"\u672a\u9884\u7ea6\u968f\u65f6\u9000";v=c?v:m;var x={0:"",1:"refund_name_00B87A",2:"refund_name_FF7700",3:"refund_name_FF7700",4:"refund_name_FF7700"},g={1:"refund_tag_00B87A",2:"refund_tag_FF7700",3:"refund_tag_FF7700",4:"refund_tag_FF7700"},j=x[d],w=g[d],N=(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(yd,{title:"\u9000\u6539\u89c4\u5219",onClose:function(){ud()}}),(0,pn.jsxs)(_.View,{className:"resource_card_refund_guide_layer_contain",children:[(0,pn.jsx)(_.View,{className:"resource_card_contain_refund_guide",children:f?(0,pn.jsx)(xd,{}):(0,pn.jsx)(_.View,{children:v?(0,pn.jsx)(_.Text,{className:"refund_tag border1px ".concat(w),children:v}):null})}),(0,pn.jsx)(Nd,{items:p,inChina:o,showReserve:c,refundName:m})]})]}),y=function(){dd({children:N})};return(0,pn.jsxs)(_.View,{className:"resource_card_contain_refund_guide",onClick:function(){y()},children:[f?(0,pn.jsx)(xd,{}):(0,pn.jsx)(_.View,{children:v?(0,pn.jsx)(_.Text,{className:"refund_tag border1px ".concat(w),children:v}):null}),(0,pn.jsx)(_.View,{className:"icon-Forward ".concat(j)})]})};function xd(e){return(0,pn.jsx)(_.View,{className:"refund_guide_icon_image flex_row",children:(0,pn.jsxs)(_.Text,{className:"refund_guide_icon_image_text",children:[(0,pn.jsx)(_.Text,{className:"refund_guide_overdueRefund_icon",children:"\u65e0\u5fe7\u9000"}),(0,pn.jsx)(_.Text,{className:"refund_guide_overdueRefund_desc",children:"\u968f\u65f6\u9000\xb7\u8fc7\u671f\u9000"})]})})}var gd=function(){return(0,pn.jsx)(_.View,{className:"resource_card_border"})};function jd(e){var n=e.list;return n?(0,pn.jsx)(_.View,{children:(n||[]).map((function(e,n){return(0,pn.jsx)(_.View,{className:"refund_guide_desc",children:(0,pn.jsx)(_.Text,{className:"refund_guide_desc_text",children:e.desc})},String(n))}))}):null}function wd(e){var n=e.data,t=e.inChina;return n?(0,pn.jsxs)(_.View,{className:"border1px order_detail_refund_table",children:[(0,pn.jsxs)(_.View,{className:"flex_row order_detail_refund_table_thead",children:[(0,pn.jsx)(_.View,{className:"refund_guide_left",children:(0,pn.jsxs)(_.Text,{children:["\u9000\u8ba2\u65f6\u95f4 ",t?"":"(\u5f53\u5730\u65f6\u95f4)"]})}),(0,pn.jsx)(_.View,{className:"refund_guide_right tkt_hairline_l",children:(0,pn.jsx)(_.Text,{children:"\u635f\u5931\u8d39\u7528"})})]}),(n||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{className:"flex_row order_detail_refund_table_tbody tkt_hairline_t ".concat(e.isOverNowTime?"over_time":""),children:[(0,pn.jsx)(_.View,{className:"refund_guide_left",children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"table_text_line":"",children:e.refundTime})}),(0,pn.jsx)(_.View,{className:"refund_guide_right tkt_hairline_l",children:(0,pn.jsx)(_.Text,{className:e.isOverNowTime?"table_text_line":"",children:e.refundCost})})]},String(n))}))]}):null}var Nd=function(e){var n=e.items,t=e.inChina,i=e.showReserve,r=e.refundName;return(0,pn.jsx)(pn.Fragment,{children:(n||[]).map((function(e,n){return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(jd,{list:e.frontDescs}),i?(0,pn.jsx)(_.Text,{children:r}):null,(0,pn.jsx)(wd,{data:e.structDetails,inChina:t}),(0,pn.jsx)(jd,{list:e.backDescs})]},String(n))}))})},yd=function(e){var n=e.title,t=e.onClose;return(0,pn.jsxs)(_.View,{className:"resource_card_refund_guide_title",children:[(0,pn.jsx)(_.Text,{children:n}),(0,pn.jsx)(_.View,{className:"back_icon icon-cancel_close",onClick:t})]})},Td=function(e){var n=e.title,t=e.showIm,i=_n(),r=i.imService,o=i.requestParam,a=i.basicInfo,s=a.notShowSubUnit,c=void 0===s?[]:s,l=c.length>0&&c.indexOf("urgecertificate")>=0,d=l||c.length>0&&c.indexOf("imbtn")>=0,u=null===o||void 0===o?void 0:o.token;return n?(0,pn.jsx)(_.View,{className:"voucher_tips_info_contain",children:(0,pn.jsxs)(_.View,{className:"voucher_tips_info",children:[(0,pn.jsx)(_.Text,{className:"icon-Information"}),(0,pn.jsx)(_.Text,{children:n}),!u&&!d&&(null!==r&&void 0!==r&&r.displayIm||null!==r&&void 0!==r&&r.hasPhone)&&t?(0,pn.jsx)(_.View,{className:"im_service_contain",onClick:function(){var e=r.hasPhone;e?Xn():Bn.goIm(i)},children:(0,pn.jsx)(_.Text,{children:"\u54a8\u8be2\u51ed\u8bc1\u4fe1\u606f"})}):null]})}):null},Id=function(){return(0,pn.jsx)(_.View,{className:"insurance_border",children:(0,pn.jsx)(_.View,{className:"insurance_border_item"})})},bd=function(e){var n;return null===e||void 0===e||null===(n=e.map((function(e){return e.quantity})))||void 0===n?void 0:n.reduce((function(e,n){return e+n}))},Sd=function(e){return e[e["Ticket"]=1]="Ticket",e[e["Act"]=2]="Act",e}(Sd||{}),Vd=function(){var e,n=_n(),t=n.requestParam,i=null===t||void 0===t?void 0:t.token,r=null===(e=n.orderInfo)||void 0===e||null===(e=e.insurance)||void 0===e?void 0:e.items,o=bd(r),a=function(){var e,t,o,a,s;if(!i)if(r[0].thirdOrderId)Bn.forwardThirdOrderInsurance(r[0].thirdOrderId);else switch(null===(e=n.orderInfo)||void 0===e||null===(e=e.basicInfo)||void 0===e?void 0:e.orderType){case Sd.Act:Bn.forwardInsuranceDetail({url:"orderdetailinsurance",path:"activity",params:(0,v.Z)({from:"",oid:null===(t=n.orderInfo)||void 0===t||null===(t=t.basicInfo)||void 0===t?void 0:t.orderId},/^baoche(you)?$/.test(null!==(o=null===(a=n.orderInfo)||void 0===a||null===(a=a.product)||void 0===a?void 0:a.templateCode)&&void 0!==o?o:"")?{target:"applicant"}:{})});break;case Sd.Ticket:Bn.forwardInsuranceDetail({url:"insurance",path:"ticket",params:{oid:null===(s=n.orderInfo)||void 0===s||null===(s=s.basicInfo)||void 0===s?void 0:s.orderId,rid:null===r||void 0===r?void 0:r[0].resourceId}});break}};return o?(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Id,{}),(0,pn.jsxs)(_.View,{className:"insurance_contain",onClick:a,children:[(0,pn.jsxs)(_.View,{className:"insurance_contain_title",children:[(0,pn.jsx)(_.View,{className:"insurance_contain_title_left",children:(0,pn.jsx)(_.Text,{children:null===r||void 0===r?void 0:r[0].insuranceName})}),(0,pn.jsx)(_.View,{className:"insurance_contain_title_right",children:(0,pn.jsxs)(_.Text,{children:["\xa0\xd7 ",o,"\u4efd"]})})]}),i?null:(0,pn.jsx)(_.View,{className:"icon_right",children:(0,pn.jsx)(_.View,{className:"icon-Forward"})})]})]}):null},Cd=function(e){var n=e.title,t=e.desc,i=(0,gn.f)(300),r=(0,pn.jsx)(_.View,{className:"voucher_desc_layer_contain",children:(0,pn.jsx)(_.Text,{children:t})}),o=function(){dd({title:"\u7535\u5b50\u51ed\u8bc1\u8bf4\u660e",children:r,className:"order_detail_expense_layer_wrapper"})};return n?(0,pn.jsx)(_.View,{style:{paddingBottom:4},onClick:function(){t&&i(o)},children:(0,pn.jsxs)(_.Text,{className:"resource_card_use_desc",children:[n," ",t?(0,pn.jsx)(_.Text,{className:"icon-Help"}):null]})}):null},kd=Ws,Ed=function(e){return e[e["Ticket"]=1]="Ticket",e[e["Act"]=2]="Act",e}(Ed||{});function Rd(){var e,n,t,i=_n(),r=i.orderInfo,o=void 0===r?{}:r,a=i.packages,s=o.basicInfo,c=void 0===s?{}:s,l=c.orderType,d=c.orderStatus,u=void 0===d?0:d,m=(c.districtId,c.isDomestic),_=c.poiId,h=c.vendorIds,x=void 0===h?[]:h,g=c.cityId,j=c.consumeHotelDistrictId,w=[1,5,6,7,8,9,10,11,12,13,14].indexOf(u)>-1;if(!w)return p().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail",{message:"\u4e0d\u5c55\u793a\u4f18\u60e0\u5238\uff0c\u539f\u56e0\u662f\u8ba2\u5355\u72b6\u6001\u662f ".concat(u)}),null;var N=l===Ed.Ticket,y={localeHyphen:"zh-CN",currency:"CNY"},T=y.localeHyphen,I=y.currency,b=!0,S=null===f.__global||void 0===f.__global||null===(e=f.__global.env)||void 0===e?void 0:e.toLowerCase();"fat"===S&&(b=!1);var V,C,k=b?40000052:40000001,E=(null===o||void 0===o||null===(n=o.product)||void 0===n||null===(n=n.resources)||void 0===n||null===(n=n.map((function(e){return e.resourceId})))||void 0===n?void 0:n.map((function(e){return{type:3007,value:e.toString()}})))||[],R=(null===a||void 0===a||null===(t=a.map((function(e){return e.packageId})))||void 0===t?void 0:t.map((function(e){return{type:3007,value:e.toString()}})))||[],P=E.concat(R),D=[{filterSubId:2002,filterValueList:[{type:2006,value:m?"1":"2"}]},{filterSubId:3001,filterValueList:[{type:3001,value:""}]}];N?D.push({filterSubId:3005,filterValueList:P}):D.push({filterSubId:3002,filterValueList:[{type:3004,value:null!==(V=null===o||void 0===o||null===(C=o.product)||void 0===C||null===(C=C.productId)||void 0===C?void 0:C.toString())&&void 0!==V?V:""}]});var O=x.map((function(e){return{type:3010,value:e.toString()}}));(null===x||void 0===x?void 0:x.length)>0&&D.push({filterSubId:3007,filterValueList:O}),_&&D.push({filterSubId:3006,filterValueList:[{type:3008,value:_.toString()}]});var A=N?g:j;A&&D.push({filterSubId:2003,filterValueList:[{type:2007,value:A.toString()}]});var L={data:{saleChannel:21,sceneId:k,locale:T,pageId:ye,currency:I,filters:D}};return(0,pn.jsx)(kd,(0,v.Z)({},L))}var Pd=fn.WZ.setupDialog,Dd=(fn.WZ.showDialog,fn.gk.setupPopup),Od=(fn.gk.showPopup,x.PopupWithStickyBottom),Ad={HeaderStatus:Pc,UpComing:Zc,ResourceCard:md,AudioGuide:Mc,FooterAction:Rl,ScenicSpotDetail:qc};function Ld(){var e=_n(),n=(0,u.useState)(!1),t=(0,h.Z)(n,2),i=t[0],r=t[1],o=(0,u.useState)(!0),a=(0,h.Z)(o,2),s=a[0],c=a[1],l=(0,u.useState)(0),d=(0,h.Z)(l,2),m=d[0],f=d[1],p=Gn().getSystemInfoSync(),v=p.screenHeight-64,x=null===e||void 0===e?void 0:e.maskLoading,g=(0,u.useState)(v),j=(0,h.Z)(g,2),w=j[0],N=j[1],y=hn(),T=(y.init,y.refreshOrderInfo),I=(y.refreshOrderByContinuePay,e.basicInfo),b=e.additionalSale,S=void 0===b?[]:b,V=e.additionalScenicSpots,C=void 0===V?[]:V;Tn().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_additionalSale",{additionalSale:S}),Tn().sendUbtByPage.ubtDevTrace("o_ttd_orderdetail_additionalScenicSpots",{additionalScenicSpots:C});var k=I.orderStatusNew,E=I.orderId;(0,Hn.usePullDownRefresh)((function(){console.log("onPullDownRefresh"),T(E,!1,Tn()).then((function(e){Gn().stopPullDownRefresh(),0!==e.head.errcode?Tn().showToast({title:"\u5237\u65b0\u5931\u8d25\uff0c\u7a0d\u540e\u91cd\u8bd5",icon:"none"}):Tn().showToast({title:"\u5237\u65b0\u6210\u529f",icon:"none"})}))})),(0,u.useEffect)((function(){s&&0===m&&0===S.length&&0===C.length&&c(!1),s||0===m&&0===S.length&&0===C.length||c(!0)}),[s,m,S,C]),(0,u.useEffect)((function(){Gn().nextTick((function(){Gn().createSelectorQuery().select(".component-height").boundingClientRect((function(e){console.log("createSelectorQuery",e);var n=((null===e||void 0===e?void 0:e.height)||0)+40+8;n<120&&(n=120);var t=~~(v/3);n>t&&(n=t),N(n)})).exec()}))}),[k]);var R=Pd(),P=Dd(r);return(0,pn.jsxs)(_.View,{className:"recommend_page_wrapper",children:[(0,pn.jsx)(yl,{hasRecommendList:s,setCrossCouponLen:f}),(0,pn.jsx)(Od,{topHeight:80,needScrollFromTop:!0,brotherDomClassName:s?"addtional-recommend-container":"",bottomHeight:w,animationDuration:200,children:(0,pn.jsx)(Ud,{})}),(0,pn.jsx)(R,{}),(0,pn.jsxs)(_.View,{className:"need_catch_move_wrap",catchMove:!0,style:{zIndex:i||x?1002:-1},children:[(0,pn.jsx)(P,{useScrollView:!0}),x?(0,pn.jsx)(fn.x4,{}):null]})]})}var Ud=u.memo((function(){var e,n,t=_n(),i=null===t||void 0===t||null===(e=t.basicInfo)||void 0===e?void 0:e.orderStatusNew,r=null===t||void 0===t||null===(n=t.requestParam)||void 0===n?void 0:n.token,o=(0,Zn.PS)(i),a=o.firstScreen,s=o.secondScreen;return(0,pn.jsxs)(_.View,{className:"recommend_container",children:[(0,pn.jsx)(_.View,{className:"component-height",children:a.map((function(e,n){var t=Ad[e];return"ResourceCard"===e?(0,pn.jsx)(t,{showType:"notShow"},String(n)):(0,pn.jsx)(t,{},String(n))}))}),s.map((function(e,n){var t=Ad[e];return(0,pn.jsx)(t,{},String(n))})),(0,pn.jsx)(Jc,{}),r?null:(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Wn,{isRecommendPage:!0}),(0,pn.jsx)(Rd,{})]})]})})),Zd=fn.WZ.setupDialog,Md=fn.WZ.showDialog,Fd=fn.gk.setupPopup;fn.gk.showPopup;function Bd(e,n){var t,i=e.entryClient,r=e.orderId,o=e.from,a=e.isBack,s=e.now,c=(0,u.useState)(!1),l=(0,h.Z)(c,2),d=l[0],m=l[1],f=(0,u.useState)(""),v=(0,h.Z)(f,2),x=v[0],g=v[1],j=(0,u.useState)(!1),w=(0,h.Z)(j,2),N=w[0],y=w[1],T=mn.useActions(),I=T.init,b=T.refreshOrderInfo,S=T.refreshOrderByContinuePay,V=_n();(0,u.useImperativeHandle)(n,(function(){return{getState:function(){return V},getAction:function(){return T}}}),[V]);var C=V.errorInfo,k=V.sortComponent,E=k||{},R=E.componentList,P=void 0===R?[]:R,D=(null===P||void 0===P?void 0:P.indexOf("ScenicSpotAdditionSale"))>-1,O=function(e){g(""),b(r,!1,p()).then((function(n){0!==n.head.errcode?p().showToast({title:"\u5237\u65b0\u5931\u8d25\uff0c\u7a0d\u540e\u91cd\u8bd5",icon:"none"}):p().showToast({title:"\u5237\u65b0\u6210\u529f",icon:"none"}),null===e||void 0===e||e()}))};(0,u.useEffect)((function(){I(r,i,p())}),[]),(0,u.useEffect)((function(){if(C){var e=C.type,n=H[e];n&&Md(n)}}),[C]),(0,u.useLayoutEffect)((function(){a&&(g(""),S(p()))}),[s]);var A=function(){y(!0)},L=Zd(),U=Fd(m),Z=null===V||void 0===V?void 0:V.isNewGroundPromotionOrders,M=se(V),F="";Z?F="v2":M&&(F="v1"),F&&p().sendUbtByPage.ubtTrace("tkt_orderdetail_dt_expose",{orderId:r,dtVersion:F});var B="/pages/orderttd/detail/index?orderid=".concat(r),H={LAST_PAGE:{desc:"\u672a\u67e5\u5230\u6b64\u8ba2\u5355\uff0c\u5c06\u8fd4\u56de\u4e0a\u4e00\u9875",buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){var e;null===(e=p().navigateBack({delta:1}))||void 0===e||e.then((function(e){console.log(e)}))}}]},HOME_PAGE:{desc:"\u672a\u67e5\u5230\u6b64\u8ba2\u5355\uff0c\u5c06\u8df3\u8f6c\u81f3\u9996\u9875",buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){p().switchTab({url:"/pages/home/homepage"})}}]},NEED_LOGIN:{desc:"\u8bf7\u767b\u5f55\u643a\u7a0b\u8d26\u53f7\u6216\u4f7f\u7528\u624b\u673a\u53f7\u67e5\u5355\u67e5\u770b\u8ba2\u5355\u8be6\u60c5",buttons:[{text:"\u767b\u5f55",type:"primary",callback:function(){var e;null===p()||void 0===p()||null===(e=p().user)||void 0===e||e.login({callback:function(e){e&&e.ReturnCode}})}},{text:"\u624b\u673a\u53f7\u67e5\u5355",type:"primary",callback:function(){p().navigateTo({url:"/pages/accounts/mplist/index?from=".concat(encodeURIComponent(B))}).then((function(e){console.log(e)}))}}]},SEARCH_ORDER:{desc:"\u8be5\u8ba2\u5355\u4e3a\u672a\u767b\u5f55\u4e0b\u5355\uff0c\u5f53\u524d\u4ec5\u652f\u6301\u901a\u8fc7\u624b\u673a\u53f7\u67e5\u770b\u8ba2\u5355\u8be6\u60c5",buttons:[{text:"\u53bb\u67e5\u5355",type:"primary",callback:function(){var e;null===(e=p().navigateTo({url:"/pages/accounts/mplist/index?from=".concat(encodeURIComponent(B))}))||void 0===e||e.then((function(e){console.log(e)}))}}]},DELETED_ORDER:{desc:"\u62b1\u6b49\uff01\u8be5\u8ba2\u5355\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u67e5\u770b",buttons:[{text:"\u77e5\u9053\u4e86",type:"primary",callback:function(){p().switchTab({url:"/pages/home/homepage"})}}]},MOBILE_ORDER:{desc:"\u672a\u67e5\u5230\u6b64\u8ba2\u5355\uff0c\u60a8\u53ef\u8bd5\u8bd5\u7528\u624b\u673a\u53f7\u67e5\u5355",buttons:[{text:"\u767b\u5f55",type:"primary",callback:function(){var e;null===p()||void 0===p()||null===(e=p().user)||void 0===e||e.login({callback:function(e){e&&e.ReturnCode}})}},{text:"\u624b\u673a\u53f7\u67e5\u5355",type:"primary",callback:function(){var e;null===(e=p().navigateTo({url:"/pages/accounts/mplist/index?from=".concat(encodeURIComponent(B))}))||void 0===e||e.then((function(e){console.log(e)}))}}]}};"didi"===o&&(H.NEED_LOGIN.buttons.splice(0,1),H.MOBILE_ORDER.buttons.splice(0,1));var G=null===V||void 0===V?void 0:V.globalLoading;if(G)return(0,pn.jsxs)(_.View,{children:[(0,pn.jsx)(bc,{}),(0,pn.jsx)(L,{})]});if(null===V||void 0===V||!V.basicInfo||null!==C&&void 0!==C&&C.type)return(0,pn.jsx)(_.View,{children:(0,pn.jsx)(L,{})});var q=null===V||void 0===V||null===(t=V.requestParam)||void 0===t?void 0:t.token,z=null===V||void 0===V?void 0:V.maskLoading;return Z?(0,pn.jsx)(Ld,{}):(0,pn.jsxs)(Sn,{className:"ottd_orderDetail_container",style:{height:"100vh"},enableScroll:!d&&!z,handleRefresh:function(e){return O(e)},scrollIntoView:x,scrollAction:A,children:[(0,pn.jsx)(Za,{}),(0,pn.jsx)(hc,{}),!x&&D?(0,pn.jsx)(Ri,{setScrollPos:g,scrollView:N}):null,q?null:(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(Wn,{}),(0,pn.jsx)(yc,{}),(0,pn.jsx)(Tc,{})]}),(0,pn.jsx)(L,{}),(0,pn.jsx)(U,{}),z?(0,pn.jsx)(fn.x4,{}):null]})}var Hd,Gd,qd=(0,u.forwardRef)(Bd),zd=x.PureModel,Yd=(Hd=zd({OrderDetailModel:mn}),Hd(Gd=function(e){(0,c.Z)(t,e);var n=(0,l.Z)(t);function t(e){var i,r,a;return(0,o.Z)(this,t),a=n.call(this,e),(0,d.Z)((0,s.Z)(a),"$instance",(0,Hn.getCurrentInstance)()),(0,d.Z)((0,s.Z)(a),"orderId",null===(i=(0,s.Z)(a))||void 0===i||null===(i=i.$instance)||void 0===i||null===(i=i.router)||void 0===i||null===(i=i.params)||void 0===i?void 0:i.orderid),(0,d.Z)((0,s.Z)(a),"from",(null===(r=(0,s.Z)(a))||void 0===r||null===(r=r.$instance)||void 0===r||null===(r=r.router)||void 0===r||null===(r=r.params)||void 0===r?void 0:r.from)||""),(0,d.Z)((0,s.Z)(a),"now",(new Date).getTime()),(0,d.Z)((0,s.Z)(a),"pageId",ye),(0,d.Z)((0,s.Z)(a),"containersRef",void 0),a.containersRef=u.createRef(),a.autoExpose=!0,a.checkPerformance=!0,a}return(0,a.Z)(t,[{key:"onShareAppMessage",value:function(){var e,n=null===(e=this.containersRef)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.getState(),t=(0,Zn.Oq)(n),i=t.title,r=t.entry_client;return{title:i,path:"pages/orderttd/detail/index?orderid=".concat(this.orderId,"&entry_client=").concat(r),imageUrl:"https://pages.c-ctrip.com/tourorder/ttd/app/orderdetail/wxshare.png"}}},{key:"clearIntervalAction",value:function(){var e,n=null===(e=this.containersRef)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.getAction(),t=n||{},i=t.clearRefreshOrderInterval;null===i||void 0===i||i()}},{key:"componentDidMount",value:function(){}},{key:"componentDidHide",value:function(){console.log("hide"),this.clearIntervalAction()}},{key:"componentWillUnmount",value:function(){console.log("unmount"),this.clearIntervalAction()}},{key:"componentDidShow",value:function(){null===this||void 0===this||this.clearIntervalAction(),this.__navigator_isBack&&(this.now=(new Date).getTime(),this.forceUpdate())}},{key:"render",value:function(){var e,n=this,t=this.orderId,i=this.from,r=null===this||void 0===this||null===(e=this.$instance)||void 0===e||null===(e=e.router)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.entry_client;return(0,pn.jsxs)(pn.Fragment,{children:[(0,pn.jsx)(qd,{ref:this.containersRef,entryClient:r,orderId:t,from:i,now:this.now,isBack:this.__navigator_isBack}),(0,pn.jsx)(_.View,{className:"view-check",onAnimationEnd:function(){return null===n||void 0===n?void 0:n.viewReadyHandle()}})]})}}]),t}(m.Z))||Gd),$d={navigationBarTitleText:"\u8ba2\u5355\u8be6\u60c5",navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",backgroundColor:"#eeeeee",enablePullDownRefresh:!0,backgroundTextStyle:"dark",usingComponents:{"nps-score":"./modules/nps/nps-score","ad-sdk":"/pages/market/advertiseNew/ad-sdk"}};Yd.enableShareAppMessage=!0;Page((0,r.createPageConfig)(Yd,"pages/orderttd/detail/index",{root:{cn:[]}},$d||{}))},86595:function(e,n,t){var i,r,o=t(66371)["default"];!function(a,s){"object"==o(n)?e.exports=s():(i=s,r="function"===typeof i?i.call(n,t,n,e):i,void 0===r||(e.exports=r))}(0,(function(){"use strict";var e=1e3,n=6e4,t=36e5,i="millisecond",r="second",a="minute",s="hour",c="day",l="week",d="month",u="quarter",m="year",_="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},x=function(e,n,t){var i=String(e);return!i||i.length>=n?e:""+Array(n+1-i.length).join(t)+e},g={s:x,z:function(e){var n=-e.utcOffset(),t=Math.abs(n),i=Math.floor(t/60),r=t%60;return(n<=0?"+":"-")+x(i,2,"0")+":"+x(r,2,"0")},m:function e(n,t){if(n.date()<t.date())return-e(t,n);var i=12*(t.year()-n.year())+(t.month()-n.month()),r=n.clone().add(i,d),o=t-r<0,a=n.clone().add(i+(o?-1:1),d);return+(-(i+(t-r)/(o?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:m,w:l,d:c,D:_,h:s,m:a,s:r,ms:i,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},j="en",w={};w[j]=v;var N=function(e){return e instanceof b},y=function(e,n,t){var i;if(!e)return j;if("string"==typeof e)w[e]&&(i=e),n&&(w[e]=n,i=e);else{var r=e.name;w[r]=e,i=r}return!t&&i&&(j=i),i||!t&&j},T=function(e,n){if(N(e))return e.clone();var t="object"==o(n)?n:{};return t.date=e,t.args=arguments,new b(t)},I=g;I.l=y,I.i=N,I.w=function(e,n){return T(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var b=function(){function o(e){this.$L=y(e.locale,null,!0),this.parse(e)}var v=o.prototype;return v.parse=function(e){this.$d=function(e){var n=e.date,t=e.utc;if(null===n)return new Date(NaN);if(I.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var i=n.match(f);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return t?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(n)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return I},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,n){var t=T(e);return this.startOf(n)<=t&&t<=this.endOf(n)},v.isAfter=function(e,n){return T(e)<this.startOf(n)},v.isBefore=function(e,n){return this.endOf(n)<T(e)},v.$g=function(e,n,t){return I.u(e)?this[n]:this.set(t,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,n){var t=this,i=!!I.u(n)||n,o=I.p(e),u=function(e,n){var r=I.w(t.$u?Date.UTC(t.$y,n,e):new Date(t.$y,n,e),t);return i?r:r.endOf(c)},h=function(e,n){return I.w(t.toDate()[e].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(n)),t)},f=this.$W,p=this.$M,v=this.$D,x="set"+(this.$u?"UTC":"");switch(o){case m:return i?u(1,0):u(31,11);case d:return i?u(1,p):u(0,p+1);case l:var g=this.$locale().weekStart||0,j=(f<g?f+7:f)-g;return u(i?v-j:v+(6-j),p);case c:case _:return h(x+"Hours",0);case s:return h(x+"Minutes",1);case a:return h(x+"Seconds",2);case r:return h(x+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,n){var t,o=I.p(e),l="set"+(this.$u?"UTC":""),u=(t={},t[c]=l+"Date",t[_]=l+"Date",t[d]=l+"Month",t[m]=l+"FullYear",t[s]=l+"Hours",t[a]=l+"Minutes",t[r]=l+"Seconds",t[i]=l+"Milliseconds",t)[o],h=o===c?this.$D+(n-this.$W):n;if(o===d||o===m){var f=this.clone().set(_,1);f.$d[u](h),f.init(),this.$d=f.set(_,Math.min(this.$D,f.daysInMonth())).$d}else u&&this.$d[u](h);return this.init(),this},v.set=function(e,n){return this.clone().$set(e,n)},v.get=function(e){return this[I.p(e)]()},v.add=function(i,o){var u,_=this;i=Number(i);var h=I.p(o),f=function(e){var n=T(_);return I.w(n.date(n.date()+Math.round(e*i)),_)};if(h===d)return this.set(d,this.$M+i);if(h===m)return this.set(m,this.$y+i);if(h===c)return f(1);if(h===l)return f(7);var p=(u={},u[a]=n,u[s]=t,u[r]=e,u)[h]||1,v=this.$d.getTime()+i*p;return I.w(v,this)},v.subtract=function(e,n){return this.add(-1*e,n)},v.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||h;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=I.z(this),o=this.$H,a=this.$m,s=this.$M,c=t.weekdays,l=t.months,d=function(e,t,r,o){return e&&(e[t]||e(n,i))||r[t].substr(0,o)},u=function(e){return I.s(o%12||12,e,"0")},m=t.meridiem||function(e,n,t){var i=e<12?"AM":"PM";return t?i.toLowerCase():i},_={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:I.s(s+1,2,"0"),MMM:d(t.monthsShort,s,l,3),MMMM:d(l,s),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:d(t.weekdaysMin,this.$W,c,2),ddd:d(t.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:I.s(o,2,"0"),h:u(1),hh:u(2),a:m(o,a,!0),A:m(o,a,!1),m:String(a),mm:I.s(a,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:r};return i.replace(p,(function(e,n){return n||_[e]||r.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,o,_){var h,f=I.p(o),p=T(i),v=(p.utcOffset()-this.utcOffset())*n,x=this-p,g=I.m(this,p);return g=(h={},h[m]=g/12,h[d]=g,h[u]=g/3,h[l]=(x-v)/6048e5,h[c]=(x-v)/864e5,h[s]=x/t,h[a]=x/n,h[r]=x/e,h)[f]||x,_?g:I.a(g)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return w[this.$L]},v.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),i=y(e,n,!0);return i&&(t.$L=i),t},v.clone=function(){return I.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},o}(),S=b.prototype;return T.prototype=S,[["$ms",i],["$s",r],["$m",a],["$H",s],["$W",c],["$M",d],["$y",m],["$D",_]].forEach((function(e){S[e[1]]=function(n){return this.$g(n,e[0],e[1])}})),T.extend=function(e,n){return e.$i||(e(n,b,T),e.$i=!0),T},T.locale=y,T.isDayjs=N,T.unix=function(e){return T(1e3*e)},T.en=w[j],T.Ls=w,T.p={},T}))},61501:function(e,n,t){var i,r,o=t(66371)["default"];!function(a,s){"object"==o(n)?e.exports=s():(i=s,r="function"===typeof i?i.call(n,t,n,e):i,void 0===r||(e.exports=r))}(0,(function(){"use strict";var e,n,t=1e3,i=6e4,r=36e5,a=864e5,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,l=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,u={years:c,months:l,days:a,hours:r,minutes:i,seconds:t,milliseconds:1,weeks:6048e5},m=function(e){return e instanceof g},_=function(e,n,t){return new g(e,t,n.$l)},h=function(e){return n.p(e)+"s"},f=function(e){return e<0},p=function(e){return f(e)?Math.ceil(e):Math.floor(e)},v=function(e){return Math.abs(e)},x=function(e,n){return e?f(e)?{negative:!0,format:""+v(e)+n}:{negative:!1,format:""+e+n}:{negative:!1,format:""}},g=function(){function f(e,n,t){var i=this;if(this.$d={},this.$l=t,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),n)return _(e*u[h(n)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==o(e))return Object.keys(e).forEach((function(n){i.$d[h(n)]=e[n]})),this.calMilliseconds(),this;if("string"==typeof e){var r=e.match(d);if(r){var a=r.slice(2).map((function(e){return Number(e)}));return this.$d.years=a[0],this.$d.months=a[1],this.$d.weeks=a[2],this.$d.days=a[3],this.$d.hours=a[4],this.$d.minutes=a[5],this.$d.seconds=a[6],this.calMilliseconds(),this}}return this}var v=f.prototype;return v.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(n,t){return n+(e.$d[t]||0)*u[t]}),0)},v.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=p(e/c),e%=c,this.$d.months=p(e/l),e%=l,this.$d.days=p(e/a),e%=a,this.$d.hours=p(e/r),e%=r,this.$d.minutes=p(e/i),e%=i,this.$d.seconds=p(e/t),e%=t,this.$d.milliseconds=e},v.toISOString=function(){var e=x(this.$d.years,"Y"),n=x(this.$d.months,"M"),t=+this.$d.days||0;this.$d.weeks&&(t+=7*this.$d.weeks);var i=x(t,"D"),r=x(this.$d.hours,"H"),o=x(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var s=x(a,"S"),c=e.negative||n.negative||i.negative||r.negative||o.negative||s.negative,l=r.format||o.format||s.format?"T":"",d=(c?"-":"")+"P"+e.format+n.format+i.format+l+r.format+o.format+s.format;return"P"===d||"-P"===d?"P0D":d},v.toJSON=function(){return this.toISOString()},v.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return t.replace(s,(function(e,n){return n||String(i[e])}))},v.as=function(e){return this.$ms/u[h(e)]},v.get=function(e){var n=this.$ms,t=h(e);return"milliseconds"===t?n%=1e3:n="weeks"===t?p(n/u[t]):this.$d[t],0===n?0:n},v.add=function(e,n,t){var i;return i=n?e*u[h(n)]:m(e)?e.$ms:_(e,this).$ms,_(this.$ms+i*(t?-1:1),this)},v.subtract=function(e,n){return this.add(e,n,!0)},v.locale=function(e){var n=this.clone();return n.$l=e,n},v.clone=function(){return _(this.$ms,this)},v.humanize=function(n){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!n)},v.milliseconds=function(){return this.get("milliseconds")},v.asMilliseconds=function(){return this.as("milliseconds")},v.seconds=function(){return this.get("seconds")},v.asSeconds=function(){return this.as("seconds")},v.minutes=function(){return this.get("minutes")},v.asMinutes=function(){return this.as("minutes")},v.hours=function(){return this.get("hours")},v.asHours=function(){return this.as("hours")},v.days=function(){return this.get("days")},v.asDays=function(){return this.as("days")},v.weeks=function(){return this.get("weeks")},v.asWeeks=function(){return this.as("weeks")},v.months=function(){return this.get("months")},v.asMonths=function(){return this.as("months")},v.years=function(){return this.get("years")},v.asYears=function(){return this.as("years")},f}();return function(t,i,r){e=r,n=r().$utils(),r.duration=function(e,n){var t=r.locale();return _(e,{$l:t},n)},r.isDuration=m;var o=i.prototype.add,a=i.prototype.subtract;i.prototype.add=function(e,n){return m(e)&&(e=e.asMilliseconds()),o.bind(this)(e,n)},i.prototype.subtract=function(e,n){return m(e)&&(e=e.asMilliseconds()),a.bind(this)(e,n)}}}))},35051:function(e,n,t){var i,r,o=t(66371)["default"];!function(a,s){"object"==o(n)?e.exports=s():(i=s,r="function"===typeof i?i.call(n,t,n,e):i,void 0===r||(e.exports=r))}(0,(function(){"use strict";return function(e,n){n.prototype.isSameOrBefore=function(e,n){return this.isSame(e,n)||this.isBefore(e,n)}}}))},79181:function(e){"use strict";e.exports=require("../../../cwx/cpage/initNavigator")},91783:function(e){"use strict";e.exports=require("../../../cwx/cpage/ubt_wx")},56884:function(e){"use strict";e.exports=require("../../../cwx/cwx")},65238:function(e){"use strict";e.exports=require("../../../cwx/ext/global")},33675:function(e){"use strict";e.exports=require("../../../cwx/cwx")},34725:function(e){"use strict";e.exports=JSON.parse('{"compVerison":"2.0.3"}')}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[9621,2107,1216,8592],(function(){return n(98455)}));e.O()}]);
//# sourceMappingURL=index.js.map