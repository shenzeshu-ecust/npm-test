"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[5003],{91377:function(e,t,i){var n=i(32180),s=i(298),a=i(57042),r=i(24460),l=i(81876),o=i(21867),c=i(86066),d=i(45023),u=i(65542),h=i(90129),p=i(90201),m=i(71515),x=i(43259),v=i(93860),f=i(95936),g=i(2269),w="https://pic.c-ctrip.com/pic/AssetCatalog/app/xproduct/lowprice/icon_line.png",y=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.flight,i=e.returnText,n=void 0===i?"":i;if((0,f.xb)(t))return null;var s=t||{},a=s.departTime,r=s.arriveTime,l=s.departCity,o=s.arriveCity,c=s.flightIcon,d=void 0===c?"":c,u=s.departInfo,h=s.flightInfo,p=void 0===h?"":h,x=s.transInfo,v=s.flightTransIcons;return(0,g.jsxs)(m.View,{className:"flight",children:[(0,g.jsxs)(m.View,{className:"time-city-container",children:[(0,g.jsxs)(m.View,{className:"time-city",children:[(0,g.jsx)(m.Text,{className:"time-text",children:a}),(0,g.jsx)(m.Text,{className:"city-text",children:l})]}),(0,g.jsxs)(m.View,{className:"time-city-trip",children:[(0,g.jsx)(m.Image,{className:"time-city-line",src:w}),!(null===x||void 0===x||!x.title)&&(0,g.jsxs)(m.View,{className:"trans-info",children:[(0,g.jsx)(m.View,{className:"trans-info-time",children:(0,g.jsx)(m.Text,{className:"trans-time-text",children:null===x||void 0===x?void 0:x.time})}),(0,g.jsx)(m.View,{className:"trans-info-title",children:(0,g.jsx)(m.Text,{className:"trans-title-text",children:null===x||void 0===x?void 0:x.title})}),(0,g.jsx)(m.View,{className:"trans-info-city",children:(0,g.jsx)(m.Text,{numberOfLines:1,className:"trans-city-text",children:null===x||void 0===x?void 0:x.detail})})]})]}),(0,g.jsxs)(m.View,{className:"time-city",children:[(0,g.jsx)(m.Text,{className:"time-text",children:r}),(0,g.jsx)(m.Text,{className:"city-text",children:o})]})]}),(0,g.jsxs)(m.View,{className:"flight-content",children:[!!n&&(0,g.jsx)(m.View,{className:"flight-trip-tag",children:(0,g.jsx)(m.Text,{className:"msg-i",children:n})}),(0,g.jsx)(m.Text,{className:"flight-content-text",children:u}),(0,g.jsx)(m.Text,{className:"flight-content-line"}),null!==v&&void 0!==v&&v.length?(0,g.jsxs)(g.Fragment,{children:[v[0]&&(0,g.jsx)(m.Image,{className:"flight-content-icon",src:v[0]}),v[1]&&(0,g.jsx)(m.Image,{className:"flight-content-icon",src:v[1]}),v[2]&&(0,g.jsx)(m.Text,{className:"flight-content-text",children:"\u7b49"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.Image,{className:"flight-content-icon",src:d}),(0,g.jsx)(m.Text,{className:"flight-content-text",children:p})]})]})]})}}]),i}(p.Component),j=function(e){var t=e.showTripText,i=void 0!==t&&t;return(0,g.jsxs)(m.View,{className:i?"flight flight-2":"flight",children:[(0,g.jsxs)(m.View,{className:"time-city-container",children:[(0,g.jsxs)(m.View,{className:"time-city",children:[(0,g.jsx)(m.View,{className:"time-text-empty"}),(0,g.jsx)(m.View,{className:"city-text-empty"})]}),(0,g.jsx)(m.View,{className:"line-empty"}),(0,g.jsxs)(m.View,{className:"time-city",children:[(0,g.jsx)(m.View,{className:"time-text-empty"}),(0,g.jsx)(m.View,{className:"city-text-empty"})]})]}),i&&(0,g.jsx)(m.View,{className:"flight-msg",children:(0,g.jsx)(m.Text,{className:"msg-empty"})}),(0,g.jsx)(m.View,{className:"flight-content-empty"})]})},N=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.price,i=e.ticketNote;return(0,g.jsxs)(m.View,{className:"box-price",children:[(0,g.jsxs)(m.Text,{className:"price-text",children:[(0,g.jsx)(m.Text,{className:"dollar",children:"\xa5"}),(0,g.jsx)(m.Text,{className:"price",children:t})]}),!!i&&(0,g.jsx)(m.View,{className:"ticket-note",children:(0,g.jsx)(m.Text,{className:"ticket-note-text",children:i})})]})}}]),i}(p.Component),T=function(){return(0,g.jsx)(m.Text,{className:"price-empty"})},V=function(e){var t=e.departFlight,i=e.arriveFlight,n=e.price,s=e.isLast,a=void 0!==s&&s,r=e.searchKey,l=e.isDomestic,o=e.airline,c=e.originSource,d=e.ticketNote,u=e.lowPricePoolFlag,h=function(){x.z.click("details","listflight",r),(0,v.vk)(c,r,o,l,n,"detail")};return(0,g.jsxs)(m.View,{onClick:h,children:[(0,g.jsxs)(m.View,{className:"flight-box",children:[!!u&&(0,g.jsxs)(m.View,{className:"flight-tag-area",children:[(0,g.jsx)(m.View,{className:"low-price-tag",children:(0,g.jsx)(m.Text,{className:"low-price-tag-text",children:u})}),(0,g.jsx)(m.View,{className:"low-price-tag-radius"})]}),(0,g.jsxs)(m.View,{className:"flight-box-trip",children:[(0,g.jsxs)(m.View,{className:"box-cards",children:[(0,g.jsx)(y,{flight:t,returnText:(0,f.xb)(i)?"":"\u53bb"}),(0,g.jsx)(y,{flight:i,returnText:"\u8fd4"})]}),(0,g.jsx)(N,{price:n,ticketNote:d})]})]}),a?null:(0,g.jsx)(m.View,{className:"split-line"})]},r)},k="https://pic.c-ctrip.com/pic/AssetCatalog/app/xproduct/lowprice/lowPriceIcon.png",I="https://pic.c-ctrip.com/pic/AssetCatalog/app/xproduct/lowprice/icon_arrow_01.png",b=function(e){var t=e.params,i=e.onFilterDate,n=e.showMore,a=e.isReturn,r=e.originSource,l=(0,p.useState)(),o=(0,h.Z)(l,2),c=o[0],d=o[1];if(!t)return(0,g.jsxs)(m.View,{className:"list",children:[(0,g.jsxs)(m.View,{className:"listNav",children:[(0,g.jsx)(m.Text,{className:"listTitleEmpty"}),(0,g.jsx)(m.View,{className:"dateViewEmpty"})]}),(0,g.jsx)(m.View,{className:"listView",children:[0,1,2,3].map((function(e){return(0,g.jsx)(j,{showTripText:!0})}))}),(0,g.jsx)(m.View,{className:"listBottom",children:(0,g.jsx)(m.View,{className:"bottomTextEmpty"})})]});var u=t.title,v=t.flightList,f=t.dataList,w=t.showMoreText,y=function(e){x.z.click("details","changedate"),d(e),i(e)},N={borderColor:"#0086f6",borderRadius:29},T={color:"#0086f6"};return(0,g.jsxs)(m.View,{className:"list",children:[(0,g.jsxs)(m.View,{className:"listNav",children:[(0,g.jsx)(m.Text,{className:"listTitle",children:u}),a||f.length<=1||v.length<=0&&!c?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(m.ScrollView,{scrollX:!0,scrollLeft:0,className:"dateScrollView",scrollWithAnimation:!0,showScrollbar:!1,children:(0,g.jsxs)(m.View,{className:"dateView",children:[(0,g.jsx)(m.View,{style:c?{}:N,className:"dateItem",onClick:function(){return y()},children:(0,g.jsx)(m.Text,{style:c?{}:T,className:"dateText",children:"\u5168\u90e8\u65e5\u671f"})}),f.map((function(e,t){return(0,g.jsx)(m.View,{style:e.timesign===c?N:{},className:"dateItem",onClick:function(){return y(e.timesign)},children:(0,g.jsx)(m.Text,{style:e.timesign===c?T:{},className:"dateText",children:e.title})},t)}))]})})]}),v.length<=0?(0,g.jsxs)(m.View,{className:"listViewNoFlight",children:[(0,g.jsx)(m.Image,{className:"listViewIcon",src:k}),(0,g.jsx)(m.Text,{className:"listViewIconText",children:"\u6682\u65e0\u822a\u73ed\u63a8\u8350"})]}):(0,g.jsxs)(m.View,{children:[(0,g.jsx)(m.View,{className:"listView",children:v.map((function(e,t){return(0,g.jsx)(V,(0,s.Z)((0,s.Z)({},e),{},{isLast:v.length-1===t,originSource:r}))}))}),(0,g.jsxs)(m.View,{className:"listBottom",onClick:n,children:[(0,g.jsx)(m.Text,{className:"bottomText",children:w}),(0,g.jsx)(m.Image,{className:"bottomIcon",src:I})]})]})]})},P=b,D=i(92954),S=i.n(D),C=i(32180)["requestAnimationFrame"],Z=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s)),(0,d.Z)((0,l.Z)(e),"state",{animation:0,previousTimeStamp:0}),e}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=this;this.props.config.isPlaying&&0===this.state.animation&&C((function(t){return e.translate(t,e.props)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.config.isPlaying&&0===this.state.animation&&C((function(e){return t.translate(e,t.props)}))}},{key:"translate",value:function(e,t){var i=this,n=t.config,s=n.size,a=void 0===s?[100,100,50]:s,r=n.loop,l=n.rate,o=void 0===l?50:l,c=n.isForwards,d=void 0!==c&&c;this.state.animation<a[2]-1?(0===this.state.previousTimeStamp?this.setState({previousTimeStamp:e}):e-this.state.previousTimeStamp>o&&this.setState({animation:Math.min(this.state.animation+Math.min(Math.round((e-this.state.previousTimeStamp)/o),3),a[2]-1),previousTimeStamp:e}),C((function(e){return i.translate(e,t)}))):r?C((function(e){return i.reverse(e,t)})):d||this.setState({animation:0})}},{key:"reverse",value:function(e,t){var i=this,n=t.config,s=n.size,a=void 0===s?[100,100,50]:s,r=n.rate,l=void 0===r?50:r,o=n.loopRange,c=void 0===o?[0,a[2]]:o;this.state.animation>c[0]&&this.state.animation>0?(e-this.state.previousTimeStamp>l&&this.setState({animation:Math.max(this.state.animation-Math.round((e-this.state.previousTimeStamp)/l),c[0]),previousTimeStamp:e}),C((function(e){return i.reverse(e,t)}))):C((function(e){return i.translate(e,t)}))}},{key:"render",value:function(){var e=this.state.animation,t=this.props,i=t.config,n=t.style,a=i.source,r=i.size,l=void 0===r?[100,100,50]:r,o=i.isSprite;return(0,g.jsx)(m.View,{style:(0,s.Z)({width:l[0],height:l[1],overflow:"hidden"},n),children:o?(0,g.jsx)(m.Image,{src:a,style:{width:l[0]*l[2],height:l[1],transform:"CRN"===S().getEnv()?[{translateX:-e*l[0]}]:"translateX(".concat(-e*l[0],"px)")}}):(0,g.jsx)(m.View,{style:{display:"flex",flexDirection:"row",width:l[0]*l[2],height:l[1],transform:"CRN"===S().getEnv()?[{translateX:-e*l[0]}]:"translateX(".concat(-e*l[0],"px)")},children:new Array(l[2]).fill("1").map((function(e,t){return(0,g.jsx)(m.Image,{src:a+(t+1)+".png",style:{width:l[0],height:l[1]}})}))})})}}]),i}(p.Component);(0,d.Z)(Z,"defaultProps",{config:{loop:!1,rate:50}});var L=Z,A=function(e){var t=e.params,i=e.triggerAlert;if(!t)return(0,g.jsxs)(m.View,{className:"priceReminder-con",children:[(0,g.jsxs)(m.View,{className:"priceReminder-left",children:[(0,g.jsx)(m.View,{className:"priceReminder-alert-empty"}),(0,g.jsxs)(m.View,{className:"priceReminder-copy",children:[(0,g.jsx)(m.View,{className:"priceReminder-name",children:(0,g.jsx)(m.Text,{className:"priceReminder-tit-empty"})}),(0,g.jsx)(m.Text,{className:"priceReminder-desc-empty"})]})]}),(0,g.jsx)(m.View,{className:"priceReminder-right"})]});var n=t.title,s=t.content,a=t.tag,r=t.titleOpen,l=t.isIntelligent,o=(0,p.useState)(l),c=(0,h.Z)(o,2),d=c[0],u=c[1],v=function(e){u(e.detail.value),i(e.detail.value);var t=d?"smartrecommend_open":"smartrecommend_close";x.z.click("details",t)};return(0,g.jsxs)(m.View,{className:"priceReminder-con",children:[(0,g.jsxs)(m.View,{className:"priceReminder-left",children:[(0,g.jsx)(m.View,{className:"priceReminder-alert",children:(0,g.jsx)(L,{config:{isPlaying:d,isSprite:!0,loop:!1,rate:60,size:[37,37,25],source:"https://pic.c-ctrip.com/pic/AssetCatalog/hybird/usergrowth/images/taroLowPrice/bellSprites.png?v1"}})}),(0,g.jsxs)(m.View,{className:"priceReminder-copy",children:[(0,g.jsxs)(m.View,{className:"priceReminder-name",children:[(0,g.jsx)(m.Text,{className:"priceReminder-tit",children:d?r:n}),d?null:(0,g.jsx)(m.View,{className:"priceReminder-tip-bubble",children:(0,g.jsx)(m.Text,{className:"priceReminder-tip-txt",children:a})})]}),(0,g.jsx)(m.Text,{className:"priceReminder-desc",children:s})]})]}),(0,g.jsx)(m.Switch,{color:"#0086F6",checked:d,onChange:v,className:"priceReminder-switch"})]})};function M(e){return(0,g.jsx)(m.View,{className:"lowest-container-bg"})}var R=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.params,i=e.book;if(!t)return(0,g.jsxs)(m.View,{className:"lowest-container",children:[(0,g.jsx)(M,{}),(0,g.jsxs)(m.View,{className:"header",children:[(0,g.jsx)(m.View,{className:"tab",children:(0,g.jsx)(m.View,{className:"tab-title-empty"})}),(0,g.jsx)(m.View,{className:"tab-corner"})]}),(0,g.jsxs)(m.View,{className:"card",children:[(0,g.jsxs)(m.View,{className:"flight-container",children:[(0,g.jsx)(j,{}),(0,g.jsx)(T,{})]}),(0,g.jsx)(m.View,{className:"book-empty"})]})]});var n=t.title,s=t.tips,a=t.departTime,r=t.arriveTime,l=t.departCity,o=t.arriveCity,c=t.departInfo,d=t.flightInfo,u=t.price,h=t.flightIcon,p=t.bookTitle,x=t.searchKey,v=t.arriveFlight,f=t.airline,w=t.transInfo,V=t.flightTransIcons,k=t.ticketNote,I={departTime:a,arriveTime:r,departCity:l,arriveCity:o,flightIcon:h,departInfo:c,flightInfo:d,transInfo:w,flightTransIcons:V};return(0,g.jsxs)(m.View,{className:"lowest-container",children:[(0,g.jsx)(M,{}),(0,g.jsxs)(m.View,{className:"header",children:[(0,g.jsx)(m.View,{className:"tab",children:(0,g.jsx)(m.Text,{className:"tab-title",children:n})}),(0,g.jsx)(m.Image,{className:"tab-corner",src:"https://pic.c-ctrip.com/pic/AssetCatalog/app/xproduct/lowprice/tab.png"}),!!s&&s.length>=1&&(0,g.jsx)(m.Text,{className:"title-tips",children:s[0]})]}),(0,g.jsxs)(m.View,{className:"card",children:[(0,g.jsxs)(m.View,{className:"flight-container",children:[(0,g.jsxs)(m.View,{className:"flight-container-trip",children:[(0,g.jsx)(y,{flight:I}),(0,g.jsx)(y,{flight:v})]}),(0,g.jsx)(N,{price:u,ticketNote:k})]}),(0,g.jsx)(m.View,{className:"book",onClick:function(){return i(x,f)},children:p})]})]})}}]),i}(p.Component),E=i(82357),F="https://pages.c-ctrip.com/flight/lowpriceSubscribe/detail/",_={ICON:"".concat(F,"no_result.png"),TITLE:"\u54ce\u5440\uff0c\u5931\u8d25\u4e86\u5462",TIPS:"\u8bf7\u518d\u8010\u5fc3\u8bd5\u4e00\u8bd5\u5427\uff5e",BUTTON_TEXT:"\u518d\u8bd5\u4e00\u6b21"},z={GO:"\u53bb\uff5c",BACK:"\u8fd4",TO:"\u81f3",DEPART:"\u51fa\u53d1",EDIT:"\u7f16\u8f91",DELETE:"\u5220\u9664",EDIT_ICON:"".concat(F,"edit.png"),DELETE_ICON:"".concat(F,"delete.png"),RETURN_ICON:"https://pic.c-ctrip.com/pic/AssetCatalog/app/xproduct/lowprice/icon_return.png"},B={TAG:"\u4f4e\u4ef7\u63d0\u9192APP\u4e13\u4eab"};function O(e){var t=e.params,i=e.remove,n=e.modify,s=e.back,a=e.isTransparent,r=t.departCity,l=t.arriveCity,o=t.dateInfo;return(0,g.jsxs)(m.View,{className:"navi",style:{paddingTop:(0,f.uj)()},children:[(0,g.jsx)(E.X,{}),(0,g.jsxs)(m.View,{className:"navi-con",children:[(0,g.jsxs)(m.View,{className:"navi-title",children:[(0,g.jsxs)(m.Text,{className:"navi-main-text",children:[r," - ",l]}),(0,g.jsx)(m.Text,{className:"navi-sub-text",children:o})]}),(0,g.jsx)(m.View,{className:"navi-back",onClick:s,children:(0,g.jsx)(m.Image,{className:"back-arrow",src:z.RETURN_ICON})}),S().getEnv()===D.ENV_TYPE.WEAPP?null:(0,g.jsxs)(m.View,{className:"navi-btns",children:[(0,g.jsxs)(m.View,{className:"navi-btn",onClick:i,children:[(0,g.jsx)(m.Image,{className:"navi-btn-svg",src:z.DELETE_ICON}),(0,g.jsx)(m.Text,{className:"navi-btn-text",children:z.DELETE})]}),(0,g.jsxs)(m.View,{className:"navi-btn",onClick:n,children:[(0,g.jsx)(m.Image,{className:"navi-btn-svg",src:z.EDIT_ICON}),(0,g.jsx)(m.Text,{className:"navi-btn-text",children:z.EDIT})]})]})]}),a?null:(0,g.jsx)(m.View,{className:"navi-background"})]})}var q=O,W=function(e){var t=e.text,i=e.height;return parseInt(t)*i*-1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e+"").split("")},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!isNaN(parseInt(e))},K=["1","2","3","4","5","6","7","8","9","0","1","2","3","4","5","6","7","8","9","0"],X=function(e){var t=e.children,i=e.style,n=e.height,a=e.textStyle;return(0,g.jsx)(m.View,{style:i,children:(0,g.jsx)(m.Text,{style:(0,s.Z)({height:n+"px"},a),children:t})})},U=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.height,i=e.text,n=e.children,a=e.textStyle,r=e.style,l=e.rotateTime,o=i||n;return(0,g.jsx)(m.View,{style:(0,s.Z)({display:"inline-flex",transform:"translateY(0px)",flexDirection:"row",overflow:"hidden"},r),children:H({height:t,children:o,textStyle:a,rotateTime:l,rotateItems:K})})}}]),i}(p.Component);(0,d.Z)(U,"defaultProps",{rotateTime:1e3,height:20});var H=function(e){var t=e.height,i=e.children,n=e.textStyle,s=e.rotateTime,a=e.rotateItems;return G(i).map((function(e,i){return Y(e)?(0,g.jsx)(Q,{duration:s,text:e,textStyle:n,height:t,rotateItems:a},i):(0,g.jsx)(X,{style:{height:t+"px"},textStyle:n,children:e},i)}))},Q=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s)),(0,d.Z)((0,l.Z)(e),"state",{animation:W({text:""+parseInt(e.props.text)+9,height:e.props.height})}),e}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.text),t=e+9,i=W({text:""+t,height:this.props.height});this.setState({animation:i})}},{key:"componentWillReceiveProps",value:function(e){var t=parseInt(e.text),i=t+9,n=W({text:""+i,height:this.props.height});this.setState({animation:n})}},{key:"render",value:function(){var e=this.state.animation,t=this.props,i=t.textStyle,n=t.height,a=t.rotateItems,r=t.duration;return(0,g.jsx)(m.View,{style:{height:n+"px",overflow:"hidden"},children:(0,g.jsx)(m.View,{style:{display:"flex",flexDirection:"column",transform:"translateY(".concat(e-0,"px)"),transition:"all ".concat(r/1e3,"s")},children:a.map((function(e,t){return(0,g.jsx)(m.Text,{style:(0,s.Z)((0,s.Z)({},i),{},{height:n+"px"}),children:e},t)}))})})}}]),i}(p.Component),J=U,$=i(32180)["window"],ee=function(e){var t=e.detailData,i=(0,p.useState)(0),n=(0,h.Z)(i,2),s=n[0],a=n[1],r=(0,p.useState)(0),l=(0,h.Z)(r,2),o=l[0],c=l[1];return(0,p.useEffect)((function(){var e=t&&t.attentionCreateTime||"",i=t&&t.serviceResponseTime||"";if(e&&i){var n=new $.Date(+e),r=new $.Date(+i),l=Math.ceil((r.getTime()-n.getTime())/1e3/60);a(6*l),c(l)}var o=setInterval((function(){s>9999?clearInterval(o):a((function(e){return e+1}))}),1e4),d=setInterval((function(){s>9999?clearInterval(d):c((function(e){return e+1}))}),6e4);return function(){clearInterval(o),clearInterval(d)}}),[]),(0,g.jsxs)(m.View,{className:"result-left",children:[(0,g.jsxs)(m.View,{className:"result-text-tip",children:["\u4ef7\u683c\u6ce2\u52a8",(0,g.jsx)(J,{textStyle:{fontSize:11,color:"#999"},height:11,children:o>9999?"9999+":o+""}),"\u6b21"]}),(0,g.jsxs)(m.View,{className:"result-text-count",children:["\u5df2\u76d1\u63a7",(0,g.jsx)(J,{textStyle:{fontSize:14,color:"#5678a8",fontWeight:"500"},height:14,children:s>9999?"9999+":s+""}),"\u6b21"]})]})},te=function(e){var t=e.detailData,i=e.subsInfo,n=function(){var e=t&&t.lowestPrice||"--",n=i&&i.referencePrice||"--",s=Number(e)||0,a=Number(n)||0;if(!(s>0&&a>0))return(0,g.jsx)(m.Text,{className:"result-text",children:"\u6682\u65e0"});var r=Math.abs(s-a);return s===a?(0,g.jsx)(m.Text,{className:"result-text-tend",children:"\u76f8\u7b49"}):s>a?(0,g.jsx)(m.Text,{className:"result-text",children:"\u9ad8\xa5"+r}):s<a?(0,g.jsx)(m.Text,{className:"result-text-tend",children:"\u4f4e\xa5"+r}):void 0};return(0,g.jsxs)(m.View,{className:"result-right",children:[(0,g.jsxs)(m.Text,{className:"result-text-tip",children:["\u6bd4\u9884\u671f\u4ef7 \xa5",null===i||void 0===i?void 0:i.referencePrice]}),n()]})},ie=function(e){var t=e.params;if(!t)return null;var i=t.detailData,n=t.subsInfo,s=t.isMonitorSuccess;return(0,g.jsxs)(m.View,{className:"result-container",children:[(0,g.jsx)(m.Image,{className:"result-background",src:"https://pic.c-ctrip.com/pic/AssetCatalog/hybird/usergrowth/images/taroLowPrice/background.webp"}),(0,g.jsxs)(m.View,{className:"result-copy",style:{marginTop:(0,f.uj)()+40},children:[(0,g.jsx)(m.View,{className:"result-cycle-img",children:(0,g.jsx)(L,{config:{isPlaying:!0,loop:!0,loopRange:[10,76],rate:80,size:[112,120,76],source:"https://pic.c-ctrip.com/pic/AssetCatalog/hybird/usergrowth/images/taroLowPrice/circle/"}})}),(0,g.jsx)(m.View,{className:"result-line-img",children:(0,g.jsx)(L,{config:{isPlaying:!0,loop:!1,isForwards:!0,rate:80,size:[300,106,16],source:"https://pic.c-ctrip.com/pic/AssetCatalog/hybird/usergrowth/images/taroLowPrice/guiden/"}})}),(0,g.jsx)(m.View,{className:"result-record",children:(0,g.jsx)(ee,{detailData:i})}),s?(0,g.jsx)(m.Text,{className:"result-text-res",children:"\u76d1\u63a7\u5b8c\u6210"}):(0,g.jsx)(m.Text,{className:"result-text-ing",children:"\u76d1\u63a7\u4e2d"}),(0,g.jsx)(m.View,{className:"result-price",children:(0,g.jsx)(te,{detailData:i,subsInfo:n})})]})]})},ne=function(){if(S().getEnv()!==D.ENV_TYPE.WEAPP)return null;var e="djdygzhgz",t="194798";return e&&t?(0,g.jsxs)(m.View,{className:"task-view",children:[(0,g.jsx)("taskAssist",{tempid:e,compid:t}),(0,g.jsx)("taskList",{tempid:e,compid:t})]}):void 0},se=i(1011),ae=i(22276),re=i(8271),le=i.n(re),oe=i(32180)["window"];function ce(e){for(var t=480,i=340,n=20,a=280,r=20,l=70,o=100,c=t-2*n-r,d=n+r,u=e[0].timesign,h=e[e.length-1].timesign-u,p=l+o,m=o,x=Math.max.apply(Math,(0,ae.Z)(e.map((function(e){return e.price})))),v=Math.min.apply(Math,(0,ae.Z)(e.map((function(e){return e.price})))),f=x-v,g=e.map((function(e,t){var i=d+(e.timesign-u)/h*c,n=p-(e.price-v)/f*m;return(0,s.Z)((0,s.Z)({},e),{},{x:i,y:n})})),w=1;w<g.length-1;w++){var y=g[w-1],j=g[w];j.x-y.x<100&&(j.x=y.x+100)}for(var N=g.length-2;N>=1;N--){var T=g[N+1],V=g[N];T.x-V.x<100&&(V.x=T.x-100)}for(var k=g[0],I=g[g.length-1],b=g.find((function(e){return e.price===v&&e!==k&&e!==I})),P=g.filter((function(e){return e.price!==v&&e!==k&&e!==I})),D="M ".concat(n/2," ").concat(a," L ").concat(t-n," ").concat(a),S="M ".concat(k.x," ").concat(k.y),C=1;C<g.length;C++){var Z=g[C-1],L=g[C],A=.3*(L.x-Z.x),M=" C ".concat(Z.x+A," ").concat(Z.y,", ").concat(L.x-A," ").concat(L.y,", ").concat(L.x," ").concat(L.y);S+=M}var R=b?"M ".concat(b.x," ").concat(b.y," L ").concat(b.x," ").concat(a):"",E="".concat(S," L ").concat(I.x," ").concat(a-10," L ").concat(k.x," ").concat(a-10," z"),F=le()(new oe.Date(I.timesign)).format("MM-DD"),_=b?le()(new oe.Date(b.timesign)).format("MM-DD"):"",z='\n      <svg width="'.concat(t,'" height="').concat(i,'" viewBox="0 0 ').concat(t," ").concat(i,'" xmlns="http://www.w3.org/2000/svg">\n          <defs>\n              <linearGradient id="blue_white" x1="0%" y1="0%" x2="0%" y2="100%">\n                  <stop offset="0%" style="stop-color:#0086f6; stop-opacity:0.3"/>\n                  <stop offset="100%" style="stop-color:#0086f6; stop-opacity:0"/>\n              </linearGradient>\n          </defs>\n\n          <path d="').concat(E,'" stroke="transparent" fill="url(#blue_white)" />\n          <path d="').concat(D,'" stroke="#999999" fill="transparent" />\n          <path d="').concat(S,'" stroke="#0086F6" stroke-width="3" fill="transparent" />\n          <path d="').concat(R,'" stroke="#2698f7" stroke-width="2" fill="transparent" />\n\n          ').concat(g.map((function(e,t){return'<circle cx="'.concat(e.x,'" cy="').concat(e.y,'" r="6" stroke="').concat(0===t?"rgba(0, 134, 246, 0.2)":"#2698f7",'" stroke-width="').concat(0===t?"6":"2",'" fill="').concat(0===t?"#0086f6":"#fff",'"/>')})).join("\n"),'\n\n          <text x="').concat(k.x-15,'" y="').concat(a+30,'" font-size="24" fill="#333333" style="text-anchor:middle">\n              \u4eca\u5929\n          </text>\n          <text x="').concat(k.x+30,'" y="').concat(a-n,'" font-size="24" fill="#0086f6" style="text-anchor:middle">\n              \u9884\u6d4b\n          </text>\n          <text x="').concat(k.x,'" y="').concat(k.y-n,'" font-size="24" fill="#2698f7" style="text-anchor:middle" font-weight="bold">\xa5').concat(k.price,"</text>\n\n          ").concat(P.map((function(e){return'\n                  <text x="'.concat(e.x-15,'" y="').concat(a+30,'" font-size="24" fill="#333333" style="text-anchor:middle">\n                      ').concat(le()(new oe.Date(e.timesign)).format("MM-DD"),'\n                  </text>\n                  <text x="').concat(e.x,'" y="').concat(e.y-n,'" font-size="24" fill="#2698f7" style="text-anchor:middle" font-weight="bold">\xa5').concat(e.price,"</text>\n              ")})).join("\n"),"\n\n          ").concat(b?'<text x="'.concat(b.x-n,'" y="').concat(a+30,'" font-size="24" fill="#2698f7" style="text-anchor:middle">\n                  ').concat(_,'\n              </text>\n              <text x="').concat(b.x,'" font-size="24" fill="#2698f7" style="text-anchor:middle" font-weight="bold">\n                  <tspan x="').concat(b.x,'" y="').concat(b.y-50,'">\u6700\u4f4e\u4ef7</tspan>\n                  <tspan x="').concat(b.x,'" y="').concat(b.y-n,'">\xa5').concat(b.price,"</tspan>\n              </text>"):"",'\n\n          <text x="').concat(I.x-50,'" y="').concat(a+30,'" font-size="24" fill="#333333" style="text-anchor:middle">\n              ').concat(F,'\n          </text>\n          <text x="').concat(I.x,'" font-size="24" fill="#2698f7" style="text-anchor:middle" font-weight="bold">\n              <tspan x="').concat(I.x-n,'" y="').concat(I.y-50,'">\u51fa\u53d1\u65e5</tspan>\n              <tspan x="').concat(I.x-n,'" y="').concat(I.y-n,'">\xa5').concat(I.price,"</tspan>\n          </text>\n      </svg>\n  ");return z}var de=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ue=String.fromCharCode.bind(String);function he(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?ue(192|t>>>6)+ue(128|63&t):ue(224|t>>>12&15)+ue(128|t>>>6&63)+ue(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return ue(240|t>>>18&7)+ue(128|t>>>12&63)+ue(128|t>>>6&63)+ue(128|63&t)}function pe(e){return e.replace(de,he)}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",xe=Array.prototype.slice.call(me);function ve(e){for(var t,i,n,s,a="",r=e.length%3,l=0;l<e.length;){if((i=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255||(s=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|s,a+=xe[t>>18&63]+xe[t>>12&63]+xe[t>>6&63]+xe[63&t]}return r?a.slice(0,r-3)+"===".substring(r):a}function fe(e){return ve(pe(e))}function ge(e){var t=e.pointList,i=ce(t),n="data:image/svg+xml;base64,".concat(fe(i));return(0,g.jsx)(m.Image,{className:"svg-container",src:n})}var we=function(e){var t=e.params,i=e.isOpen,n=e.onDeletePopupButtonPress;if(!t||!i)return null;var s=t||{},a=s.title,r=void 0===a?"":a,l=s.price,o=void 0===l?0:l,c=s.content,d=void 0===c?"":c,u=s.pointList,h=i?{display:"flex"}:{};return console.log("test pointList",u,"params",t),(0,g.jsx)(m.View,{className:"maskBox",style:h,catchMove:!1,children:(0,g.jsxs)(m.View,{className:"popContent",children:[u&&(0,g.jsx)(m.View,{className:"popChart",children:(0,g.jsx)(ge,{pointList:u})}),(0,g.jsxs)(m.View,{className:"popFont",children:[(0,g.jsxs)(m.View,{className:"popTitle",children:[(0,g.jsx)(m.Text,{className:"popTitleMain",children:r}),!!o&&(0,g.jsx)(m.Text,{className:"popTitleUnit",children:"\uffe5"}),!!o&&(0,g.jsx)(m.Text,{className:"popTitleNo",children:o})]}),(0,g.jsx)(m.Text,{className:"popText",children:d})]}),(0,g.jsxs)(m.View,{className:"popBtn",children:[(0,g.jsx)(m.View,{className:"popBtnDel",onClick:function(){n(!0),x.z.click("details","deleteshow_delete")},children:"\u786e\u8ba4\u5220\u9664"}),(0,g.jsx)(m.View,{className:"popBtnCancel",onClick:function(){n(!1),x.z.click("details","deleteshow_wait")},children:"\u518d\u7b49\u7b49"})]})]})})},ye=function(e){var t=e.refreshData;return(0,g.jsxs)(m.View,{className:"detail-no-result",children:[(0,g.jsx)(m.View,{className:"no-result-icon-box",children:(0,g.jsx)(m.Image,{className:"no-result-icon",src:_.ICON})}),(0,g.jsxs)(m.View,{className:"no-result-tips",children:[(0,g.jsx)(m.View,{className:"no-result-tips-title",children:(0,g.jsx)(m.Text,{className:"no-result-tips-title-text",children:_.TITLE})}),(0,g.jsx)(m.Text,{className:"no-result-tips-text",children:_.TIPS}),(0,g.jsx)(m.View,{className:"no-result-btn",onClick:t,children:(0,g.jsx)(m.Text,{className:"no-result-btn-text",children:_.BUTTON_TEXT})})]})]})},je=p.memo(ye),Ne=function(e){var t=e.remove;e.modify;return S().getEnv()!==D.ENV_TYPE.WEAPP?null:(0,g.jsx)(m.View,{className:"footer-body",children:(0,g.jsx)(m.View,{className:"footer-btn",onClick:t,children:(0,g.jsx)(m.Text,{className:"footer-btn-remove",children:"\u5220\u9664\u4efb\u52a1"})})})},Te=i(94262),Ve=function(e){return(0,Te.Z)(e),null},ke=i(32180)["window"];function Ie(e){var t,i=new ke.Date(e.replace(/-/g,"/")),n=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],s="\u5468".concat(n[i.getDay()]),a=null!==(t=null===e||void 0===e?void 0:e.slice(5,10))&&void 0!==t?t:"";return"".concat(a," ").concat(s,"\u51fa\u53d1")}function be(e){var t,i,n,s,a,r,l,o,c,d,u,h,p,m,x,v,g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=g?e.fltinfolist:e.rfltinfolist;if(w){var y,j=null!==(t=null===w||void 0===w?void 0:w.dtime)&&void 0!==t?t:"",N=null!==(i=null===w||void 0===w?void 0:w.atime)&&void 0!==i?i:"",T=null!==(n=null===w||void 0===w?void 0:w.daportname)&&void 0!==n?n:"",V=null!==(s=null===w||void 0===w?void 0:w.aaportname)&&void 0!==s?s:"",k=null===w||void 0===w||null===(a=w.fltInfonote)||void 0===a?void 0:a.find((function(e){return 1===e.ntype})),I=null!==(r=null===k||void 0===k?void 0:k.icon)&&void 0!==r?r:"",b=null!==(l=null===k||void 0===k?void 0:k.cnt)&&void 0!==l?l:"",P=null!==(o=null===(c=w.transferInfo)||void 0===c||null===(c=c.transferCities)||void 0===c?void 0:c.length)&&void 0!==o?o:0,D=null!==(d=null===(u=w.transferInfo)||void 0===u||null===(u=u.stopList)||void 0===u?void 0:u.length)&&void 0!==d?d:0,S=[];if(P>0)null===w||void 0===w||null===(y=w.transferInfo)||void 0===y||null===(y=y.airlines)||void 0===y||y.map((function(e){S.push((null===e||void 0===e?void 0:e.icon)||"")}));var C={departTime:j,arriveTime:N,departCity:(0,f.d0)(T,5),arriveCity:(0,f.d0)(V,5),departInfo:Ie(null!==(h=g?e.dDate:e.rdDate)&&void 0!==h?h:""),flightIcon:I,flightInfo:(0,f.d0)(b,12),flightTransIcons:S,transInfo:{time:null!==(p=null===w||void 0===w||null===(m=w.transferInfo)||void 0===m?void 0:m.duration)&&void 0!==p?p:"",title:P>1?"\u4e2d\u8f6c":1===P?"\u8f6c":D>0?"\u7ecf\u505c":"",detail:P>1||D>1?"".concat(P,"\u6b21"):1===P?((null===w||void 0===w||null===(x=w.transferInfo)||void 0===x?void 0:x.transferCities)||[])[0]:1===D?((null===w||void 0===w||null===(v=w.transferInfo)||void 0===v?void 0:v.stopList)||[])[0]:""}};return C}}function Pe(e,t,i,n){for(var s=e.filter((function(e){return!n||e.dDate.startsWith(n)})).slice(1,5).map((function(e){var t,i,n;return{departFlight:be(e,!0),arriveFlight:be(e,!1),price:null!==(t=e.price)&&void 0!==t?t:0,isLast:!1,searchKey:null!==(i=e.sk)&&void 0!==i?i:"",isDomestic:0===e.flag,airline:e,ticketNote:null!==(n=null===e||void 0===e?void 0:e.tnote)&&void 0!==n?n:"",lowPricePoolFlag:e.lppf?B.TAG:""}})),a=[],r=le()((0,f.N)(t)),l=le()(i).diff(r,"day"),o=0;o<=l;++o){var c=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],d=r.add(o,"day"),u={title:"".concat(d.format("MM-DD \u5468")).concat(c[d.day()]),timesign:d.format("YYYY-MM-DD")};a.push(u)}var h={title:"\u66f4\u591a\u4f4e\u4ef7\u822a\u73ed",flightList:s,dataList:a,showMoreText:"\u67e5\u770b\u6240\u6709\u822a\u73ed"};return h}function De(e,t){var i,n,s,a,r,l=null!==(i=e.price)&&void 0!==i?i:0,o=null!==(n=null===(s=e.fltinfolist)||void 0===s||null===(s=s.flightnoList)||void 0===s?void 0:s[0])&&void 0!==n?n:"",c=null!==(a=e.sk)&&void 0!==a?a:"",d=be(e,!0),u=be(e,!1),h=d,p=h.departTime,m=h.arriveTime,x=h.departCity,v=h.arriveCity,f=h.flightIcon,g=void 0===f?"":f,w=h.flightInfo,y=h.transInfo,j=h.departInfo,N=h.flightTransIcons,T={title:"\u5f53\u524d\u6700\u4f4e\u4ef7",tips:null!==t&&void 0!==t?t:[],departTime:p,arriveTime:m,departCity:x,arriveCity:v,departInfo:j,flightIcon:g,flightInfo:w,flightNo:o,price:l,bookTitle:"\u7acb\u5373\u9884\u8ba2",searchKey:c,arriveFlight:u,airline:e,transInfo:y,flightTransIcons:N,ticketNote:null!==(r=null===e||void 0===e?void 0:e.tnote)&&void 0!==r?r:""};return T}function Se(e,t,i){var n,s,a,r,l=null!==(n=e.price)&&void 0!==n?n:0,o=null!==(s=e.pctype)&&void 0!==s?s:0,c={detailData:{attentionCreateTime:null!==(a=t.actime)&&void 0!==a?a:0,serviceResponseTime:null!==(r=t.srtime)&&void 0!==r?r:0,lowestPrice:l},subsInfo:{referencePrice:null!==i&&void 0!==i?i:0},isMonitorSuccess:2===o||0===o};return c}function Ce(e){var t,i,n,s,a,r,l,o,c=[];if(e.today&&e.today.priceInfo&&e.today.dateTime){var d=le()(null!==(t=null===(i=e.today)||void 0===i?void 0:i.dateTime)&&void 0!==t?t:"").valueOf(),u=+(null!==(n=null===(s=e.today)||void 0===s?void 0:s.priceInfo)&&void 0!==n?n:"0");if(c.push({timesign:d,price:u}),e.peakDay&&e.peakDay.priceInfo&&e.peakDay.dateTime){var h,p,m,x,v=le()(null!==(h=null===(p=e.peakDay)||void 0===p?void 0:p.dateTime)&&void 0!==h?h:"").valueOf(),f=+(null!==(m=null===(x=e.peakDay)||void 0===x?void 0:x.priceInfo)&&void 0!==m?m:"0");c.push({timesign:v,price:f})}if(e.lowestDay&&e.lowestDay.priceInfo&&e.lowestDay.dateTime){var g,w,y,j,N=le()(null!==(g=null===(w=e.lowestDay)||void 0===w?void 0:w.dateTime)&&void 0!==g?g:"").valueOf(),T=+(null!==(y=null===(j=e.lowestDay)||void 0===j?void 0:j.priceInfo)&&void 0!==y?y:"0");c.push({timesign:N,price:T})}if(e.lastDay&&e.lastDay.priceInfo&&e.lastDay.dateTime){var V=le()(null!==(a=null===(r=e.lastDay)||void 0===r?void 0:r.dateTime)&&void 0!==a?a:"").valueOf(),k=+(null!==(l=null===(o=e.lastDay)||void 0===o?void 0:o.priceInfo)&&void 0!==l?l:"0");if(c.push({timesign:V,price:k}),!(c.length<=2))return c}}}function Ze(e){var t,i,n;if(e){var s=Ce(e),a=(null!==(t=e.title)&&void 0!==t?t:"").split("\uffe5"),r={title:null!==(i=a[0])&&void 0!==i?i:"",price:a[1]?+a[1]:0,content:null!==(n=e.subTitle)&&void 0!==n?n:"",pointList:s};return r}}function Le(e){var t={title:"\u5f00\u542f\u667a\u80fd\u63d0\u9192",titleOpen:"\u667a\u80fd\u63d0\u9192\u5df2\u5f00\u542f",content:"\u4e34\u8fd1\u9884\u671f\u4ef7\u683c\u3001\u53d1\u73b0\u7701\u94b1\u65b9\u6848\u65f6\u63d0\u9192\u60a8",tag:"\u6210\u529f\u7387\u52a0\u500d",icon:"",isIntelligent:e};return t}function Ae(e,t){var i,n;if(0===e.rlt&&e.FlightLowPriceItemList&&0!==e.FlightLowPriceItemList.length){var s=null!==(i=e.FlightLowPriceItemList)&&void 0!==i?i:[],a=1===(null===t||void 0===t?void 0:t.intelligent),r=Le(a),l=De(s[0],null===e||void 0===e?void 0:e.tips),o=Se(s[0],e,null===t||void 0===t?void 0:t.rfprice),c=Pe(s,t.bpushdate,t.epushdate),d=Ze(null===e||void 0===e?void 0:e.deleteInfo),u=0===s[0].flag,h=s[0].price||0,p=e&&e.nlst&&(null===(n=e.nlst.filter((function(e){return 9===e.ntype}))[0])||void 0===n?void 0:n.cnt)||"";return{reminderProps:r,lowestProps:l,flightListProps:c,popProps:d,monitorProps:o,validFlightList:s,isDomestic:u,lowestPrice:h,grabTicketTips:p}}}function Me(e){var t=e.slice(5,7)||"00",i=e.slice(8,10)||"00";return"".concat(t,"-").concat(i)}function Re(e){var t,i,n,s,a,r=1===(null===e||void 0===e?void 0:e.rtflag),l=Me(null!==(t=(0,f.p6)(null===e||void 0===e?void 0:e.bpushdate))&&void 0!==t?t:""),o=Me(null!==(i=(0,f.p6)(null===e||void 0===e?void 0:e.epushdate))&&void 0!==i?i:""),c=Me(null!==(n=(0,f.p6)(null===e||void 0===e?void 0:e.rbpushdate))&&void 0!==n?n:""),d=l===o?"".concat(l):"".concat(l).concat(z.TO).concat(o),u="".concat(l).concat(z.GO).concat(c).concat(z.BACK),h="".concat(d).concat(z.DEPART),p={departCity:null!==(s=null===e||void 0===e?void 0:e.depname)&&void 0!==s?s:"",arriveCity:null!==(a=null===e||void 0===e?void 0:e.arrname)&&void 0!==a?a:"",dateInfo:r?u:h};return p}function Ee(e,t){var i={pstr:e,taskId:t,src:"",sourceType:2},n={url:"/13378/flightSubscriptionResultSearch",request:i};return n}var Fe=i(20608),_e=i(4137),ze=i(89462),Be=i(50940),Oe=i(53928);function qe(e,t){if(e){var i=e.airlines||[],n=i.find((function(e){return e&&e.taskid===t}));if(n)return{pstr:n.pstr||""}}}var We=i(56884),Ge=i.n(We);function Ye(e){var t=Ge().ABTestingManager.valueForKeySync(e);return t||"A"}var Ke=function(e){(0,o.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n,s;(0,a.Z)(this,i),s=t.call(this,e),(0,d.Z)((0,l.Z)(s),"taskId",0),(0,d.Z)((0,l.Z)(s),"isReturn",!1),(0,d.Z)((0,l.Z)(s),"originSource",""),(0,d.Z)((0,l.Z)(s),"isNotStop",!1),(0,d.Z)((0,l.Z)(s),"grabABTVersion","A"),(0,d.Z)((0,l.Z)(s),"pageId",void 0),(0,d.Z)((0,l.Z)(s),"getDetailList",(function(e){var t=Ee(e,s.taskId);console.log("test 8001 request",t),(0,se.W)(t).then((function(e){if(console.log("test 8001 response",e),e){var t=Ae(e,s.state.queryParams);s.setState({viewModel:t,isLoading:!1})}else s.setState({isNoResult:!0})})).catch((function(e){s.setState({isFailed:!0}),(0,Be.w)("detailPage_getDetailList_13018001_error")}))})),(0,d.Z)((0,l.Z)(s),"getData",(function(){s.state.queryParams&&s.state.queryParams.pstr?s.getDetailList(s.state.queryParams.pstr):s.getListServer()})),(0,d.Z)((0,l.Z)(s),"onGrabTicket",(function(){x.z.click("details","grab_ticket"),(0,v.Ae)(s.state.queryParams,s.originSource)})),(0,d.Z)((0,l.Z)(s),"renderContent",(function(){var e=s.state.viewModel,t=e||{},i=t.lowestProps,n=t.flightListProps,a=t.reminderProps,r=t.monitorProps,o=t.grabTicketTips,c="B"===s.grabABTVersion&&s.isNotStop;return(0,g.jsxs)(m.ScrollView,{scrollY:!0,className:"detail-scrollview",onScroll:s.scrollHandle.bind((0,l.Z)(s)),children:[(0,g.jsx)(ie,{params:r}),c&&(0,g.jsx)(Ve,{data:o,onGrabTicket:s.onGrabTicket}),(0,g.jsx)(R,{params:i,book:s.book}),(0,g.jsx)(P,{params:n,showMore:s.showMore,onFilterDate:s.onFilterDate,isReturn:s.isReturn,originSource:s.originSource}),(0,g.jsx)(A,{params:a,triggerAlert:s.triggerAlert}),(0,g.jsx)(ne,{}),(0,g.jsx)(Ne,{remove:s.remove,modify:s.modify})]})}));var r=(0,_e.v)(e),o=r.airline,c=r.tripType,u=r.originSource,h=r.taskId,p=null!==(n=(0,_e.w)(o))&&void 0!==n?n:"",f=Re(p);return s.state={urlQueryParams:r,queryParams:p,naviProps:f,showRemoveAlert:!1,isNavTransparent:!0,devText:"",isNoResult:!1,isFailed:!1},s.taskId=h||(null===p||void 0===p?void 0:p.taskid)||0,s.isReturn=2===+c,s.originSource=null!==u&&void 0!==u?u:"",s.isNotStop=1===(null===p||void 0===p?void 0:p.ntrans),s.remove=s.remove.bind((0,l.Z)(s)),s.modify=s.modify.bind((0,l.Z)(s)),s.book=s.book.bind((0,l.Z)(s)),s.back=s.back.bind((0,l.Z)(s)),s.showMore=s.showMore.bind((0,l.Z)(s)),s.onFilterDate=s.onFilterDate.bind((0,l.Z)(s)),s.triggerAlert=s.triggerAlert.bind((0,l.Z)(s)),s.onDeletePopupButtonPress=s.onDeletePopupButtonPress.bind((0,l.Z)(s)),s.pageId="10650083844",s}return(0,r.Z)(i,[{key:"getPageId",value:function(){return"rn_flight_low_price_subscribe_result"}},{key:"componentDidMount",value:function(){this.getData(),this.setState({isNavTransparent:!0}),this.grabABTVersion=Ye("221116_FLT_djqp")}},{key:"componentWillUnmount",value:function(){var e=this.props.getListInfo;e&&"function"===typeof e&&e()}},{key:"componentDidShow",value:function(){this.getData()}},{key:"getListServer",value:function(){var e=this,t=(0,Fe.C)();(0,se.W)(t).then((function(t){if(t&&t.airlines){var i=qe(t,e.taskId);i&&i.pstr&&e.setState({pstr:i.pstr},(function(){return e.getDetailList(i.pstr)}))}else(0,Be.w)("detailPage_getListServer_no_result")})).catch((function(e){(0,Be.w)("detailPage_getListServer_13017801_error")}))}},{key:"remove",value:function(){x.z.click("details","delete");var e=this.state.viewModel,t=e||{},i=t.popProps;i?(x.z.exposure("details","deleteshow"),this.setState({showRemoveAlert:!0})):this.onDeletePopupButtonPress(!0)}},{key:"modify",value:function(){x.z.click("details","edit");var e=this.state.queryParams;(0,v.Kd)(e,this.originSource,!0)}},{key:"book",value:function(e,t){x.z.click("details","book");var i=this.state,n=i.queryParams,s=i.viewModel;(0,v.vk)(this.originSource,e,t,s.isDomestic,s.lowestPrice,"detail",n)}},{key:"back",value:function(){(0,ze.OR)(this)}},{key:"showMore",value:function(){x.z.click("details","allflight");var e=this.state,t=e.queryParams,i=e.viewModel;(0,v.Yn)(this.originSource,t,i.isDomestic,"detail")}},{key:"onFilterDate",value:function(e){var t=Pe(this.state.viewModel.validFlightList,this.state.queryParams.bpushdate,this.state.queryParams.epushdate,e);this.setState({viewModel:(0,s.Z)((0,s.Z)({},this.state.viewModel),{},{flightListProps:t})})}},{key:"triggerAlert",value:function(e){var t=(0,Oe.w)(this.state.queryParams,e,this.originSource);(0,se.W)(t).then((function(e){})).catch((function(e){}))}},{key:"onDeletePopupButtonPress",value:function(e){if(this.setState({showRemoveAlert:!1}),e){var t=(0,Oe.p)(this.state.queryParams);(0,se.W)(t).then((function(e){(0,v.C_)("delete")})).catch((function(e){})),(0,v.W4)(this.state.queryParams,this.originSource)}}},{key:"scrollHandle",value:function(e){var t=e.detail.scrollTop,i=30;t>i&&this.state.isNavTransparent?this.setState({isNavTransparent:!1}):t<i&&!this.state.isNavTransparent&&this.setState({isNavTransparent:!0})}},{key:"render",value:function(){var e=this.state,t=e.isNoResult,i=e.isFailed,n=e.naviProps,s=e.showRemoveAlert,a=e.viewModel,r=a||{},l=r.popProps;return(0,g.jsxs)(m.View,{className:"index",children:[(0,g.jsx)(q,{params:n,remove:this.remove,modify:this.modify,back:this.back,isTransparent:this.state.isNavTransparent}),t||i?(0,g.jsx)(je,{refreshData:this.getData}):this.renderContent(),(0,g.jsx)(we,{params:l,isOpen:s,onDeletePopupButtonPress:this.onDeletePopupButtonPress})]})}}]),i}(u.Z),Xe={navigationBarTitleText:"\u4f4e\u4ef7\u8be6\u60c5",navigationStyle:"custom",disableScroll:!0,navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff",enablePullDownRefresh:!1,usingComponents:{taskAssist:"@miniapp/pages/market/directory/taskAssist",taskList:"@miniapp/pages/market/directory/task/index"},componentPlaceholder:{taskAssist:"view",taskList:"view"}};Page((0,n.createPageConfig)(Ke,"pages/flightLowPrice/pages/detail/index",{root:{cn:[]}},Xe||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[1961,2107,1216,8592],(function(){return t(91377)}));e.O()}]);
//# sourceMappingURL=index.js.map