(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[2119],{81719:function(e,t,n){var r=n(32180)["window"],i=n(32180)["document"],a=n(66371)["default"];!function(){var t={786:function(e,t,n){e.exports=n(108)},108:function(e,t,n){e=n.nmd(e);var r=n(125).default,i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,s=Object.create(i.prototype),c=new V(r||[]);return a(s,"_invoke",{value:S(e,n,c)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var f="suspendedStart",h="suspendedYield",g="executing",m="completed",v={};function x(){}function y(){}function b(){}var w={};l(w,c,(function(){return this}));var T=Object.getPrototypeOf,k=T&&T(T(L([])));k&&k!==n&&i.call(k,c)&&(w=k);var j=b.prototype=x.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,s,c,o){var u=p(e[a],e,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"===r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,o)}),(function(e){n("throw",e,c,o)})):t.resolve(d).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,o)}))}o(u.arg)}var s;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(e,t,n){var r=f;return function(i,a){if(r===g)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=C(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var o=p(e,t,n);if("normal"===o.type){if(r=n.done?m:h,o.arg===v)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(r=m,n.method="throw",n.arg=o.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var s=a.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function Z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return y.prototype=b,a(j,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},N(P.prototype),l(P.prototype,o,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var s=new P(d(t,n,r,i),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},N(j),l(j,u,"Generator"),l(j,c,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(Z),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return c.type="throw",c.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],c=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(o&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),Z(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;Z(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}("object"===r(e)?e.exports:{});try{regeneratorRuntime=i}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},64:function(e,t,n){var i,a=n(125).default;!function(){"use strict";var s={}.hasOwnProperty;function c(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=a(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var i=c.apply(null,n);i&&e.push(i)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var o in n)s.call(n,o)&&n[o]&&e.push(o)}}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):"object"===a(n.amdO)&&n.amdO?void 0===(i=function(){return c}.apply(t,[]))||(e.exports=i):r.classNames=c}()},516:function(e,t,n){var r,i,a,s=n(125).default;a=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",i="minute",a="hour",c="day",o="week",u="month",l="quarter",d="year",p="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},x={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),a=n-i<0,s=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:o,d:c,D:p,h:a,m:i,s:r,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=m;var w="$isDayjsObject",T=function(e){return e instanceof P||!(!e||!e[w])},k=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var c=t.name;b[c]=t,i=c}return!r&&i&&(y=i),i||!r&&y},j=function(e,t){if(T(e))return e.clone();var n="object"==s(t)?t:{};return n.date=e,n.args=arguments,new P(n)},N=x;N.l=k,N.i=T,N.w=function(e,t){return j(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function s(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var m=s.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(N.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return N},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(e,t){var n=j(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return j(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<j(e)},m.$g=function(e,t,n){return N.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,s=!!N.u(t)||t,l=N.p(e),f=function(e,t){var r=N.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(c)},h=function(e,t){return N.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,v=this.$D,x="set"+(this.$u?"UTC":"");switch(l){case d:return s?f(1,0):f(31,11);case u:return s?f(1,m):f(0,m+1);case o:var y=this.$locale().weekStart||0,b=(g<y?g+7:g)-y;return f(s?v-b:v+(6-b),m);case c:case p:return h(x+"Hours",0);case a:return h(x+"Minutes",1);case i:return h(x+"Seconds",2);case r:return h(x+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var s,o=N.p(e),l="set"+(this.$u?"UTC":""),f=(s={},s[c]=l+"Date",s[p]=l+"Date",s[u]=l+"Month",s[d]=l+"FullYear",s[a]=l+"Hours",s[i]=l+"Minutes",s[r]=l+"Seconds",s[n]=l+"Milliseconds",s)[o],h=o===c?this.$D+(t-this.$W):t;if(o===u||o===d){var g=this.clone().set(p,1);g.$d[f](h),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[N.p(e)]()},m.add=function(n,s){var l,p=this;n=Number(n);var f=N.p(s),h=function(e){var t=j(p);return N.w(t.date(t.date()+Math.round(e*n)),p)};if(f===u)return this.set(u,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===c)return h(1);if(f===o)return h(7);var g=(l={},l[i]=e,l[a]=t,l[r]=1e3,l)[f]||1,m=this.$d.getTime()+n*g;return N.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=N.z(this),a=this.$H,s=this.$m,c=this.$M,o=n.weekdays,u=n.months,l=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},p=function(e){return N.s(a%12||12,e,"0")},h=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return N.s(t.$y,4,"0");case"M":return c+1;case"MM":return N.s(c+1,2,"0");case"MMM":return d(n.monthsShort,c,u,3);case"MMMM":return d(u,c);case"D":return t.$D;case"DD":return N.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,o,2);case"ddd":return d(n.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(a);case"HH":return N.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(a,s,!0);case"A":return h(a,s,!1);case"m":return String(s);case"mm":return N.s(s,2,"0");case"s":return String(t.$s);case"ss":return N.s(t.$s,2,"0");case"SSS":return N.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,s,p){var f,h=this,g=N.p(s),m=j(n),v=(m.utcOffset()-this.utcOffset())*e,x=this-m,y=function(){return N.m(h,m)};switch(g){case d:f=y()/12;break;case u:f=y();break;case l:f=y()/3;break;case o:f=(x-v)/6048e5;break;case c:f=(x-v)/864e5;break;case a:f=x/t;break;case i:f=x/e;break;case r:f=x/1e3;break;default:f=x}return p?f:N.a(f)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return N.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},s}(),S=P.prototype;return j.prototype=S,[["$ms",n],["$s",r],["$m",i],["$H",a],["$W",c],["$M",u],["$y",d],["$D",p]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),j.extend=function(e,t){return e.$i||(e(t,P,j),e.$i=!0),j},j.locale=k,j.isDayjs=T,j.unix=function(e){return j(1e3*e)},j.en=b[y],j.Ls=b,j.p={},j},"object"==s(t)?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},810:function(e,t,n){var r,i,a;a=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,a){var s=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},s.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},s.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),c.call(this,e)};var o=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else o.call(this)};var u=s.utcOffset;s.utcOffset=function(r,i){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],a=i[0],s=60*+i[1]+ +i[2];return 0===s?0:"+"===a?s:-s}(r),null===r))return this;var s=Math.abs(r)<=16?60*r:r,c=this;if(i)return c.$offset=s,c.$u=0===r,c;if(0!==r){var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(c=this.local().add(s+o,e)).$offset=s,c.$x.$localOffset=o}else c=this.utc();return c};var l=s.format;s.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var d=s.toDate;s.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var p=s.diff;s.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),i=a(e).local();return p.call(r,i,t,n)}}},"object"==(0,n(125).default)(t)?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},125:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},s={};function c(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.loaded=!0,r.exports}c.amdO={},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==("undefined"===typeof globalThis?"undefined":a(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"===typeof r?"undefined":a(r)))return r}}(),c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var o={};!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},e(t)}c.r(o),c.d(o,{URLSearchParams:function(){return u},classnames:function(){return d()},createReplayPage:function(){return ve},dayjs:function(){return f()},default:function(){return Pe},getToken:function(){return we},initCoffeebeanTaro:function(){return xe},trackFn:function(){return ye},trackInitData:function(){return ke},trackPage:function(){return Te},wrapLogin:function(){return je},wrapOpt:function(){return be},wrapRunOnlyUser:function(){return Ne}});var t={};try{!function(e,n){if(new e("q=%2B").get("q")!==n||new e({q:n}).get("q")!==n||new e([["q",n]]).get("q")!==n||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;t.URLSearchParams=e}(URLSearchParams,"+")}catch(e){!function(e,n,r){var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,o=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l={append:function(e,t){h(this._ungap,e,t)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,t){this._ungap[e]=[n(t)]},forEach:function(e,t){var r=this;for(var i in r._ungap)r._ungap[i].forEach(a,i);function a(a){e.call(t,a,n(i),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var t in this._ungap)for(var n=m(t),r=0,i=this._ungap[t];r<i.length;r++)e.push(n+"="+m(i[r]));return e.join("&")}};for(var d in l)a(p.prototype,d,{configurable:!0,writable:!0,value:l[d]});function p(e){var t=i(null);switch(a(this,"_ungap",{value:t}),!0){case!e:break;case"string"==typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var n=e.split("&"),s=0,c=n.length;s<c;s++){var o=(u=n[s]).indexOf("=");-1<o?h(t,g(u.slice(0,o)),g(u.slice(o+1))):u.length&&h(t,g(u),"")}break;case r(e):for(s=0,c=e.length;s<c;s++){var u;h(t,(u=e[s])[0],u[1])}break;case"forEach"in e:e.forEach(f,t);break;default:for(var l in e)h(t,l,e[l])}}function f(e,t){h(this,t,e)}function h(e,t,n){var i=r(n)?n.join(","):n;t in e?e[t].push(i):e[t]=[i]}function g(e){return decodeURIComponent(e.replace(c,"%25").replace(o," "))}function m(e){return encodeURIComponent(e).replace(s,v)}function v(e){return u[e]}t.URLSearchParams=p}(Object,String,Array.isArray)}!function(t){var n=!1;try{n=!!Symbol.iterator}catch(e){}function r(e,t){var r=[];return e.forEach(t,r),n?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in t||(t.forEach=function(e,t){var n=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(i){i.length&&!(i in r)&&(r[i]=n.getAll(i)).forEach((function(r){e.call(t,r,i,n)}))}))}),"keys"in t||(t.keys=function(){return r(this,(function(e,t){this.push(t)}))}),"values"in t||(t.values=function(){return r(this,(function(e,t){this.push(e)}))}),"entries"in t||(t.entries=function(){return r(this,(function(e,t){this.push([t,e])}))}),n&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var e,t,n,r=this.entries(),i=r.next(),a=i.done,s=[],c=Object.create(null);!a;)t=(n=i.value)[0],s.push(t),t in c||(c[t]=[]),c[t].push(n[1]),a=(i=r.next()).done;for(s.sort(),e=0;e<s.length;e++)this.delete(s[e]);for(e=0;e<s.length;e++)t=s[e],this.append(t,c[t].shift())}),function(n){var r=n.defineProperty,i=n.getOwnPropertyDescriptor,a=function(e){var n=e.append;e.append=t.append,URLSearchParams.call(e,e._usp.search.slice(1)),e.append=n},s=function(e,t){if(!(e instanceof t))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+t.name)},c=function(e){var c,o,u=e.prototype,l=i(u,"searchParams"),d=i(u,"href"),p=i(u,"search");!l&&p&&p.set&&(o=function(e){function n(n,r){t.append.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function i(n){t.delete.call(this,n),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function a(n,r){t.set.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}return function(e,t){return e.append=n,e.delete=i,e.set=a,r(e,"_usp",{configurable:!0,writable:!0,value:t})}}(p),c=function(e,t){return r(e,"_searchParams",{configurable:!0,writable:!0,value:o(t,e)}),t},n.defineProperties(u,{href:{get:function(){return d.get.call(this)},set:function(e){var t=this._searchParams;d.set.call(this,e),t&&a(t)}},search:{get:function(){return p.get.call(this)},set:function(e){var t=this._searchParams;p.set.call(this,e),t&&a(t)}},searchParams:{get:function(){return s(this,e),this._searchParams||c(this,new URLSearchParams(this.search.slice(1)))},set:function(t){s(this,e),c(this,t)}}}))};try{c(HTMLAnchorElement),/^function|object$/.test("undefined"==typeof URL?"undefined":e(URL))&&URL.prototype&&c(URL)}catch(e){}}(Object)}(t.URLSearchParams.prototype);var s,u=t.URLSearchParams,l=c(64),d=c.n(l),p=c(516),f=c.n(p),h=c(810),g=c.n(h),m=n(92954),v=c.n(m),x=function(){return"function"!=typeof v().getLaunchOptionsSync?{fakeDate:!1}:(null===(e=v().getLaunchOptionsSync())||void 0===e?void 0:e.query)||{fakeDate:!1};var e},y=function(){return x().playback},b=function(e,t,n){var r=e[t];e[t]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=r.apply(void 0,t);if(!n({args:t,res:a}))return a}},w={base64:{key:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",btoa:function(e,t){for(var n=(t=t||{}).key||w.base64.key,r="",i=0,a=t.charCodeArray?function(t){return e[t]}:function(t){return e.charCodeAt(t)};i<e.length;){var s=a(i++),c=a(i++),o=a(i++);r+=n[s>>2]+n[(3&s)<<4|c>>4]+n[isNaN(c)?64:(15&c)<<2|o>>6]+n[isNaN(o)?64:63&o]}return r},encode:function(e){return w.base64.btoa(unescape(encodeURIComponent(e)))}}},T=w.base64.encode,k=function(){return!!x().coffeebean};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(e){e.MINI_INIT="MINI_INIT",e.INIT_PAGE="INIT_PAGE",e.AJAX="AJAX",e.FN="FN",e.STORAGE_LOAD="STORAGE_LOAD",e.GET_AJAX_LIST="GET_AJAX_LIST",e.GET_STORAGE="GET_STORAGE",e.MINI_PAGE_SCROLL="MINI_PAGE_SCROLL",e.SCROLL_VIEW_SCROLL="SCROLL_VIEW_SCROLL",e.INIT_LOAD_DATA="INIT_LOAD_DATA"}(s||(s={}));var Z,V="%c[coffeebean]",L=k(),D=L?console.log.bind(console,V,"color:cyan"):function(){},_=L?console.error.bind(console,V,"color:cyan"):function(){},A="0.5.9",E="$COFFEEBEAN_INIT$",O=0,R=function(e){return e.replace(/.+(\d{4})(\d{2})(\d{2}).+/,"$1-$2-$3")},F=function(){function e(t){var n,r,i,a;S(this,e),j(this,"devData",[]),j(this,"data",[]),j(this,"routeMap",new Map),j(this,"lastIdx",-1),j(this,"idx",0),j(this,"prevScrollInfo",null),j(this,"prevScrollID",void 0),j(this,"reqBaseParam",{}),j(this,"sendLocker",!1),j(this,"token",(n=new Date,r=n.getFullYear(),i="0"+(n.getMonth()+1),a="0"+n.getDate(),O++,"".concat("PRD","-").concat(0,"-").concat("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),"-").concat(r).concat(i.slice(-2)).concat(a.slice(-2),"-").concat(O,"-").concat(A,"-MINI"))),j(this,"collectSwitch",!0),e.$instanceList.push(this),e.instance=this,t&&this.setSaveReqParam(t)}return I(e,[{key:"bindRoute",value:function(e){this.routeMap.set(e,!0)}},{key:"unBindRoute",value:function(e){return this.routeMap.delete(e),0===this.routeMap.size&&(this.save(!1),!0)}},{key:"hasRoute",value:function(){return this.routeMap.size>0}},{key:"setSaveReqParam",value:function(e){this.reqBaseParam=P({},e)}},{key:"createSaveReqParam",value:function(e){return P(P({},this.reqBaseParam),{},{token:this.token,replayContent:e})}},{key:"setCollectSwitch",value:function(e){this.collectSwitch=e}},{key:"getLastItem",value:function(){return this.data[this.data.length-1]}},{key:"isScrollItem",value:function(e){return[s.SCROLL_VIEW_SCROLL,s.MINI_PAGE_SCROLL].includes(e)}},{key:"add",value:function(e){if(this.collectSwitch){var t=P({ts:Date.now(),idx:this.idx},e);this.data.push(t),k()&&this.devData.push(t),this.idx++,this.isScrollItem(e.eventType)||(this.prevScrollInfo=null)}}},{key:"addPage",value:function(t,n){this.add({eventType:s.INIT_PAGE,eventParam:t,eventExtend:{params:n,miniInitData:e.miniInitData}})}},{key:"addInit",value:function(t){this.add(t),e.miniInitData=t}},{key:"checkScrollInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(e){case"+":return t>=n?"":"-";case"-":return t<=n?"":"+";default:return t>n?"+":t<n?"-":""}}},{key:"addScroll",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.SCROLL_VIEW_SCROLL,i=t.scrollTop,a=t.scrollLeft,c=t.route,o=this.getLastItem();this.prevScrollID&&clearTimeout(this.prevScrollID),this.prevScrollID=setTimeout((function(){n.prevScrollInfo=null}),1e3);var u=!0,l="",d="";o&&this.prevScrollInfo&&this.prevScrollInfo.eventType===r&&((l=this.checkScrollInfo(this.prevScrollInfo.scrollLeftType,a,this.prevScrollInfo.scrollLeft))||(o.ts=+new Date,o.eventExtend.scrollLeft=a,u=!1),(d=this.checkScrollInfo(this.prevScrollInfo.scrollTopType,i,this.prevScrollInfo.scrollTop))||(o.ts=+new Date,o.eventExtend.scrollTop=i,u=!1)),this.prevScrollInfo&&(this.prevScrollInfo.scrollLeftType=l,this.prevScrollInfo.scrollTopType=d),u&&(this.prevScrollInfo={eventType:r,scrollTop:i||0,scrollLeft:a||0,scrollLeftType:l,scrollTopType:d},this.add({eventType:r,eventParam:e,eventExtend:{scrollTop:i,scrollLeft:a,route:c}}))}},{key:"addGetStorage",value:function(e,t){this.add({eventType:s.STORAGE_LOAD,eventParam:e,eventExtend:{params:{value:t}}})}},{key:"addInitLoadData",value:function(e,t){this.add({eventType:s.INIT_LOAD_DATA,eventParam:e,eventExtend:{data:t}})}},{key:"addFn",value:function(e,t){this.add({eventType:s.FN,eventParam:e,eventExtend:t})}},{key:"getSendData",value:function(){return this.data}},{key:"getSendContentList",value:function(){return D("getSendContentList",this.data),this.data.length?(this.lastIdx=this.data[this.data.length-1].idx,function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5,n=[],r=Math.ceil(e.length/t),i=0;i<r;i++)n.push(e.slice(0,t)),e=e.slice(t);return n}(T(JSON.stringify(this.data)))):[]}},{key:"clearData",value:function(){var e=this;this.data=this.data.filter((function(t){return t.idx>e.lastIdx}))}},{key:"addRequest",value:function(e,t){this.add({eventType:s.AJAX,eventParam:e,eventExtend:t})}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return D("validate",JSON.stringify(this.reqBaseParam)),!(e&&this.sendLocker||!this.collectSwitch||!this.getSendData().length)}},{key:"send",value:function(t){var n=e.cwx;return new Promise((function(e,r){n.request({url:"/restapi/soa2/20589/SaveTraceInfo?_fxpcqlniredt",header:{"Content-Type":"application/json"},data:t,success:function(t){e(t)},fail:function(e){r(e)}})}))}},{key:"save",value:function(e){var t=this;if(this.validate(e)){this.sendLocker=!0;var n=+new Date,r=this.getSendContentList()||[],i=r.length;Promise.all(r.map((function(e,r){var a="{spID=".concat(r,",gID=").concat(n,",len=").concat(i,"}")+e,s=t.createSaveReqParam(a);return t.send(s)}))).then((function(e){t.sendLocker=!1,t.clearData(),D(t.token,"save success",e)})).catch((function(e){t.sendLocker=!1,_(t.token,"save error",e)}))}}},{key:"getToken",value:function(){return this.token}}],[{key:"onPageUnload",value:function(t){var n=e.instance.unBindRoute(t);if(D("onPageUnload",n),n){var r=e.$instanceList.pop();e.instance=e.$instanceList[e.$instanceList.length-1],r&&e.instance.setSaveReqParam(r.reqBaseParam)}}},{key:"useNewToken",value:function(t){return new e(P({},e.instance.reqBaseParam)),e.instance.bindRoute(t),e.instance.token}}]),e}();j(F,"cwx",void 0),j(F,"$instanceList",[]),j(F,"instance",void 0),j(F,"miniInitData",void 0),Object.defineProperty(F,"instance",{get:function(){return Z||(Z=new F)},set:function(e){Z=e}}),new Map;var M={},B=function(){function e(t,n){var i,a,o,u;S(this,e),j(this,"config",void 0),j(this,"tid",void 0),j(this,"sendLocker",void 0),j(this,"dep",void 0),this.dep=n,this.config=P({code:"",env:v().getEnv(),extendCommon:"",autoInterval:5e3,path:""},t),this.sendLocker=!1,this.initQConfig(),t.requestConfig&&(u=t.requestConfig,M=P(P({},M),u));var l=n.cwx,d=l.getSystemInfoSync(),p=d.windowWidth,f=d.windowHeight,h=d.pixelRatio,g=d.language,m=null===(i=function(){switch("weapp"){case"weapp":return wx;case"swan":return swan;case"alipay":return my;case"tt":return Page;case"qq":return qq;case"quickapp":default:return{};case"h5":return r}}())||void 0===i?void 0:i.buildId,x="function"==typeof(null===v()||void 0===v()?void 0:v().getAccountInfoSync)&&(null===(a=v().getAccountInfoSync())||void 0===a||null===(o=a.miniProgram)||void 0===o?void 0:o.envVersion);k()&&(c.g.ActionList=F.instance),F.cwx=l;var y,w,T,N,C,I={code:this.config.code||"",bizCode:this.config.bizCode||"",orderid:this.config.orderid||0,tsid:this.config.transactionid||"",replayType:"MINI-"+this.config.env,uid:this.config.uid||"",version:A,extend:this.config.extendCommon||""};F.instance.setSaveReqParam(I),F.instance.addInit({eventType:s.MINI_INIT,eventParam:m,eventExtend:{w:p,h:f,pr:h,locale:g,taroEnv:this.config.env,tzo:(new Date).getTimezoneOffset()}}),y=new Set,w=function(e){return e[0].key},T=function(e){var t=e.args,n=e.res;Promise.resolve(n).then((function(e){var n=w(t);!y.has(n)&&e&&(F.instance.addGetStorage(n,e),y.add(n))}))},N=function(e){var t=e.args,n=w(t);y.add(n)},C=function(e){var t=e.args,n=w(t);y.delete(n)},b(v(),"getStorageSync",T),b(v(),"getStorageInfo",T),b(v(),"getStorageInfoSync",T),b(v(),"getStorage",T),b(v(),"setStorageSync",N),b(v(),"setStorage",N),b(v(),"removeStorageSync",C),b(v(),"removeStorage",C),this.auto(),"release"===x&&m&&l.mcdAppId&&F.instance.send(P(P({},I),{},{extend:JSON.stringify({buildId:m,mcdAppId:l.mcdAppId}),token:F.instance.token,replayType:"MINI",replayContent:"START"})).catch(_)}return I(e,[{key:"auto",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.tid=setTimeout((function(){e.save(),e.auto(t)}),t)}},{key:"initQConfig",value:function(){var e=this;return D("initQConfig"),new Promise((function(t,n){e.dep.cwx.request({url:"/restapi/soa2/16163/GetConfigInfo?_fxpcqlniredt",header:{"Content-Type":"application/json"},data:{},success:t,fail:n})})).then((function(e){var t=JSON.parse(e.data.text);return x().coffeebean||t.switch&&Math.random()<=t.ratio?(D("initQConfig 1"),F.instance.setCollectSwitch(!0)):(D("initQConfig 2"),F.instance.setCollectSwitch(!1)),e})).catch((function(e){F.instance.setCollectSwitch(!1),_("initQConfig catch",e)}))}},{key:"save",value:function(){F.instance.save(this.dep.cwx)}},{key:"trackPage",value:function(){var e,t=this.config.path,n=v().getCurrentPages(),r=n[n.length-2],i=n[n.length-1],a=(null==r||null===(e=r.route)||void 0===e?void 0:e.indexOf(t))>-1;if(i&&(a||!F.instance.hasRoute()?F.instance.bindRoute(i.route):F.useNewToken(i.route),!i[E])){var s=i.onUnload;i.onUnload=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.apply(i,t),D("currentPage.route",i.route,t),F.onPageUnload(i.route)},i[E]=!0}}},{key:"getToken",value:function(){return F.instance.token}}]),e}();function U(e,t,n,r,i,a,s){try{var c=e[a](s),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){U(a,r,i,s,c,"next",e)}function c(e){U(a,r,i,s,c,"throw",e)}s(void 0)}))}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=c(786),q=c.n(Y),z=function(){function e(t,n){if(S(this,e),j(this,"token",void 0),j(this,"res",void 0),e.current=this,this.token=t,!n)throw Error("\u56de\u6eaf\u6570\u636e\u4e0d\u5b58\u5728 res:".concat(n," token:").concat(t));this.res=n}return I(e,[{key:"getActionList",value:function(){return this.res.actionList.filter((function(e){return![s.MINI_INIT].includes(e.eventType)}))}},{key:"getRequestItem",value:function(e){return this.res.requestList.filter((function(t){return!t.played&&t.eventParam.indexOf(e.replace(/.+\/platform-taro/,""))>-1}))[0]}},{key:"getInitItem",value:function(){return this.res.actionList.filter((function(e){return e.eventType===s.MINI_INIT}))[0]}},{key:"getJumpInfo",value:function(){var e=this.res.actionList.filter((function(e){return e.eventType===s.INIT_PAGE}))[0];if(!e)return null;var t=null==e?void 0:e.eventParam;return{url:t?"/"+t:"",data:e.eventExtend.params.data}}},{key:"getInitLoadData",value:function(e){var t,n=this.res.actionList.filter((function(t){return t.eventParam===e&&t.eventType===s.INIT_LOAD_DATA}))[0];return null==n||null===(t=n.eventExtend)||void 0===t?void 0:t.data}}]),e}();j(z,"current",void 0);var H,K={code:"",setConfig:function(e){K.code=e.code},fetch:(H=$(q().mark((function e(t,n,r){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){var a=R(n);D("tokenDate",a),r({url:t,header:{"Content-Type":"application/json"},data:{code:K.code,token:n,sTime:"".concat(a," 00:00:00"),eTime:"".concat(a," 23:59:59")},success:e,fail:i})}));case 2:return i=e.sent,D("data",i.data),e.abrupt("return",new z(n,i.data));case 5:case"end":return e.stop()}}),e)}))),function(e,t,n){return H.apply(this,arguments)})},J={},Q=function(){},X=function(e){D("mockFn",e.eventParam);var t=J[e.eventParam];if(!t)return!0;try{t&&t.apply(void 0,W(e.eventExtend.args.map((function(e){return"TaroEvent"===e.__type__&&(e.stopPropagation=Q),e}))))}catch(e){console.error(e)}},ee=function(e){D("fireScroll",e);var t=i.getElementById(e.eventParam);D("elem",t,null==t?void 0:t.scrollTo,v()),t?v().createSelectorQuery().select("#"+e.eventParam).node().exec((function(t){t[0].node.scrollTo({top:e.eventExtend.scrollTop,left:e.eventExtend.scrollLeft})})):v().pageScrollTo({scrollTop:e.eventExtend.scrollTop})},te=function(e){v().pageScrollTo({scrollTop:e.eventExtend.scrollTop})},ne=function(){var e=$(q().mark((function e(t,n){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z.current.getInitLoadData(t),e.abrupt("return",n(r));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=n(32180),ie=!0;function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function oe(e){return oe="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},oe(e)}var ue=n(90201),le=c.n(ue),de=n(71515);function pe(e,t,n){return pe=ce()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ae(i,n.prototype),i},pe.apply(null,arguments)}var fe,he=function(e){r.__RealDate=r.__RealDate||r.Date;var t=r.__RealDate,n=t.now(),i=new t(e).getTime(),a=function(){return+(t.now()-n+i)};r.Date=new Proxy(r.Date,{construct:function(e,t){return 0===t.length?new e(a()):pe(e,W(t))},get:function(e,t){return"now"===t?function(){return new e(a()).getTime()}:Reflect.get(e,t)}})},ge=function(){function e(t,n,r){var i=this;S(this,e),j(this,"handlerMap",void 0),j(this,"processList",void 0),j(this,"totalDelay",void 0),j(this,"tid",void 0),this.handlerMap=n,this.totalDelay=0,this.processList=t,function e(){i.tid=setTimeout((function(){i.run(),i.processList.length?e():r()}),300)}()}return I(e,[{key:"stop",value:function(){clearTimeout(this.tid)}},{key:"run",value:function(){var e=this;this.totalDelay+=300;var t=[];this.processList.forEach((function(n){if(n.delay>e.totalDelay)t.push(n);else{var r=(n.retryTimes||0)+1;D("fire action",n,"times:",r),e.handlerMap[n.eventType]&&e.handlerMap[n.eventType](n)&&(r<10?t.push(P(P({},n),{},{retryTimes:r})):(i="o_flight_coffeebean_mini_dev",a=n,(c=(s=v().getCurrentPages())[s.length-1])&&c.ubtDevTrace?(c.ubtDevTrace(i,a),D("[ubtDevTrace]",i,a)):D("[ubtDevTrace error]","page",!c,"ubtTrace",!c.ubtDevTrace,i,a),D("error action",n)))}var i,a,s,c})),this.processList=t}}]),e}();!function(e){e[e.START_RECORD=1]="START_RECORD",e[e.STOP_RECORD=2]="STOP_RECORD"}(fe||(fe={}));var me,ve=function(e,t){var n=function(){var e=$(q().mark((function e(n,r){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){k()?(D("changeUITaskStatus",e.url,e.data),setTimeout((function(){e.success({data:{success:!0}})}),1e3)):t.request(e)},e.abrupt("return",new Promise((function(e){i({url:decodeURIComponent(null==r?void 0:r.aUrl),header:{"Content-Type":"application/json"},data:{key:null==r?void 0:r.airTestToken,status:n},success:function(t){t.data.success?e(!0):(_(t.data),e(!1))},fail:function(t){_(t),e(!1)}})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(l,e);var r,i,a,o,u=(r=l,i=ce(),function(){var e,t=se(r);if(i){var n=se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return S(this,l),u.apply(this,arguments)}return I(l,[{key:"mockEnv",value:function(e){var t=e.getInitItem();null!=t&&t.ts&&new he(+t.ts)}},{key:"mockStorage",value:function(e){v().setStorageSync("flight_scrollView_enhanced",1),e.res.storageList.forEach((function(e){var t,n="string"==typeof e.eventExtend.params.value?e.eventExtend.params.value:null===(t=e.eventExtend.params.value)||void 0===t?void 0:t.data;v().setStorageSync(e.eventParam,n)}))}},{key:"jump",value:(o=$(q().mark((function e(t){var r,i,a,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getJumpInfo(),a=null===(r=(0,m.getCurrentInstance)().router)||void 0===r?void 0:r.params,D("navigateTo",i),o=Boolean((null==a?void 0:a.airTestToken)&&(null==a?void 0:a.aUrl)),!i){e.next=14;break}if(!o){e.next=11;break}return e.next=8,n(fe.START_RECORD,a);case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:this.navigateTo(P(P({},i),{},{complete:function(e){var t;D("navigateTo complete",e);var r=z.current.getActionList();D("actionList",r);var i=(j(t={},s.FN,X),j(t,s.SCROLL_VIEW_SCROLL,ee),j(t,s.MINI_PAGE_SCROLL,te),t);c.g.coffeebeanActionRunner=new ge(r,i,(function(){o&&n(fe.STOP_RECORD,a)}))}})),e.next=15;break;case 14:console.error("\u672a\u83b7\u53d6\u5230\u8df3\u8f6curl\uff0c\u65e0\u6cd5\u56de\u6eaf \uff08\u53ef\u80fd\u6570\u636e\u4e0d\u5168\uff09",t);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"autoCheckPage",value:function(e){setInterval((function(){var n=v().getCurrentPages(),r=n[n.length-1];null!=r&&r.route&&!e.res.pageList.includes(null==r?void 0:r.route)&&(D("autoCheckPage navigateBack"),t.navigateBack()),console.log("currentPage",r)}),5e3)}},{key:"onLoad",value:(a=$(q().mark((function e(){var n,r,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=(0,m.getCurrentInstance)().router)||void 0===n?void 0:n.params,D("before fetch"),null==r||!r.url||null==r||!r.token){e.next=6;break}return e.next=5,K.fetch(decodeURIComponent(r.url),r.token,t.request).catch((function(e){D("err",e)}));case 5:i=e.sent;case 6:if(!i){e.next=14;break}return this.mockEnv(i),this.mockStorage(i),this.autoCheckPage(i),e.next=12,this.jump(i);case 12:e.next=15;break;case 14:console.error("token",null==r?void 0:r.token,"replayData\u83b7\u53d6\u5931\u8d25\u65e0\u6cd5\u56de\u6eaf");case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){return le().createElement(de.View,null,le().createElement(de.Text,null,"loading...."))}}]),l}(e)},xe=function(e,t){var n=t.cwx;v().getEnv()!==m.ENV_TYPE.WEB&&(y()?(K.setConfig(e),D("isPlaybackModel")):me||(me=new B(e,{cwx:n})))},ye=function(e,t){return y()?function(e,t){return J[e]=function(){t.apply(void 0,arguments)},function(){t.apply(void 0,arguments)}}(e,t):function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];try{var a,s,c={args:r.map((function(e){return e instanceof re.TaroEvent?(s=e,{__type__:"TaroEvent",detail:e.detail,type:e.type}):e}))};if(1===c.args.length&&"scroll"===(null===(a=s)||void 0===a?void 0:a.type)){var o={scrollTop:s.detail.scrollTop,scrollLeft:s.detail.scrollLeft,route:(u=v().getCurrentPages(),u.length?u[u.length-1].route:"")};F.instance.addScroll(e,o)}else ie&&(D(e),F.instance.addFn(e,c),ie=!1)}catch(e){console.error(e)}var u;try{t&&t.apply(void 0,r)}catch(e){throw ie=!0,e}ie=!0}}(e,t)},be=function(e){return y()?function(e){var t=e||{},n=t.url,r=t.success,i=t.fail,a=z.current.getRequestItem(n);return a?(a.played=!0,D("inject",n),setTimeout((function(){"fail"===a.eventExtend.type?i(a.eventExtend.response):r(a.eventExtend.response)}),100),{url:"/",data:{ori:n}}):(D("pass",n),e)}(e):function(e){var t=e||{},n=t.url,r=t.success,i=t.fail;if(/\/20589\/SaveTraceInfo/.test(n))return e;var a=Date.now();return e.success=function(e){var t,i,s,c=M.getRootID?M.getRootID(n,e):M.useRootMessageId&&(null==e||null===(t=e.data)||void 0===t||null===(i=t.ResponseStatus)||void 0===i||null===(s=i.Extension)||void 0===s?void 0:s.filter((function(e){return"RootMessageId"===(null==e?void 0:e.Id)}))[0].Value)||0;F.instance.addRequest(n,{startTime:a,url:n,responseTime:Date.now(),response:c?"":e,rootID:c}),r&&r(e)},e.fail=function(e){F.instance.addRequest(n,{startTime:a,url:n,type:"fail",responseTime:Date.now(),response:e,rootID:""}),i&&i(e)},e}(e)},we=function(){return me?me.getToken():""},Te=function(){return v().getEnv()===m.ENV_TYPE.WEB||y()?void 0:(me.trackPage(),function(){var e=v().getCurrentPages();if(e.length){var t=e[e.length-1];F.instance.addPage(t.$taroPath,t.$taroParams),t.$cb$onPageScroll||(t.$cb$onPageScroll=t.onPageScroll||function(){},t.onPageScroll=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];try{var i;D("onPageScroll",n),n[0]&&null!==(i=n[0])&&void 0!==i&&i.scrollTop&&F.instance.addScroll(t.route,{scrollTop:n[0].scrollTop},s.MINI_PAGE_SCROLL)}catch(e){console.error(e)}t.$cb$onPageScroll.apply(t,n)})}}())},ke=function(e,t,n){return y()?ne(e,n):function(e,t){F.instance.addInitLoadData(e,t)}(e,t)},je=function(e){return y()?function(e){null==e||e.callback({ReturnCode:"0"})}:e},Ne=function(e){return y()?function(){}:e};f().extend(g());var Pe={URLSearchParams:u,classnames:d(),dayjs:f(),initCoffeebeanTaro:xe,wrapOpt:be,trackFn:ye,trackPage:Te,trackInitData:ke,getToken:we,wrapLogin:je,wrapRunOnlyUser:Ne,createReplayPage:ve}}(),e.exports=o}()},79062:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(56884),i=n.n(r),a="___20220616_19:26:42___",s=a.replace(/___/g,""),c="",o="",u="",l="weixin";switch(i().appId){case"11048657":c="Baidu",o="Train.Baidu",u="baidu",l="baidu";break;case"wxd18d0e7f7784a6c4":c="WX_Train",o="Train.Train",u="wexinTrain",l="train";break;case"2017081708237081":c="AliApp",o="Train.Aliapp",u="alipay",l="alipay";break;case"ttaf70d9cd305a16cb":u="tt";break;case"wx45de275447723a6d":u="quickApp",l="quickapp";break;case"wx0e6ed4f51db9d078":default:c="WX",o="Train.Ctrip",u="weixin",l="weixin";break}var d={WXVersion:s,maxOtherAmount:11,pasCntLimit:5,channel:c,requestChannel:o,miniProgramType:u,traceChannel:l,isTrainApp:"Train.Train"===o,isCtripApp:"Train.Ctrip"===o}},74760:function(e,t,n){"use strict";n.d(t,{SS:function(){return r},MJ:function(){return i},gq:function(){return a},h6:function(){return s},rH:function(){return c},kC:function(){return o},xE:function(){return u},Ou:function(){return l}});var r={CHILD:2,STUDENT:3,ADULT:1},i={1:"\u4e8c\u4ee3\u8eab\u4efd\u8bc1",2:"\u62a4\u7167",7:"\u56de\u4e61\u8bc1",8:"\u53f0\u80de\u8bc1",28:"\u5916\u56fd\u4eba\u6c38\u4e45\u5c45\u7559\u8eab\u4efd\u8bc1",32:"\u6e2f\u6fb3\u53f0\u5c45\u6c11\u5c45\u4f4f\u8bc1",C:"\u6e2f\u6fb3\u901a\u884c\u8bc1",G:"\u53f0\u6e7e\u901a\u884c\u8bc1",B:"\u62a4\u7167"},a={NORMAL:1,INVALIDTYPE:2,INCOMPLETE:3,LACK_MOBILE:4},s={CTRIP:1,NORMAL:2},c={REDUCTION:0,CASHBACK:1,PACKAGE:2},o={NORMAL:0,SPECIAL:1},u={OMNI:74},l={appendTitle:"\u65e0\u4fdd\u969c",appendRightTitle:"\u5df2\u653e\u5f03\u4fdd\u969c",appendIcon:"https://images3.c-ctrip.com/train/2021/app/V8.43/zhuliucheng/jiaotongyiwaixian/ic-wubao.png",extendList:[{key:"AppendMark",value:"\u653e\u5f03\u4fdd\u969c?"},{key:"AppendMarkColor",value:"#FF7700"},{key:"SelectedAppendIcon",value:"https://images3.c-ctrip.com/train/2021/app/V8.43/zhuliucheng/jiaotongyiwaixian/ic-wubao.png"},{key:"AppendTitle",value:"\u65e0\u4fdd\u969c"}]}},3979:function(e,t,n){"use strict";var r=n(79062),i={grabBooking:"10650069749",coupon:"10320672798",ordinaryBooking:"10650084622"};("baidu"===r.Z.miniProgramType||"wexinTrain"===r.Z.miniProgramType||"alipay"===r.Z.miniProgramType||"tt"===r.Z.miniProgramType||"quickApp"===r.Z.miniProgramType)&&Object.assign(i,{}),t["Z"]=i},35997:function(e,t,n){"use strict";n.d(t,{t:function(){return $},Iv:function(){return R},cG:function(){return M},f2:function(){return B},nd:function(){return D},AM:function(){return A},zC:function(){return x},hj:function(){return z},qI:function(){return U},qe:function(){return F},$k:function(){return y},X8:function(){return E},gt:function(){return O},De:function(){return P},uO:function(){return b},l:function(){return _},su:function(){return N},u8:function(){return I},Q_:function(){return Z},Fz:function(){return W},Gl:function(){return v},Z8:function(){return ee},Lb:function(){return Q},Mc:function(){return S},BT:function(){return C},W4:function(){return T},qs:function(){return V},Gu:function(){return w},mc:function(){return k},vA:function(){return G},dV:function(){return L},Or:function(){return X},fw:function(){return Y},MI:function(){return J},HF:function(){return H},Q9:function(){return K},BQ:function(){return ae},Kc:function(){return re}});var r=n(298),i=n(79301),a=n(95308),s=n(56884),c=n.n(s),o=n(91783),u=n.n(o),l=n(38717),d=n(79062),p=(n(71280),n(81719)),f=n.n(p),h=f().wrapOpt;function g(){return"baidu"===d.Z.miniProgramType?"Train.Baidu":"wexinTrain"===d.Z.miniProgramType?"Train.Train":"alipay"===d.Z.miniProgramType?"Train.Aliapp":"tt"===d.Z.miniProgramType?"Train.Toutiao":"quickApp"===d.Z.miniProgramType?"Train.Quickapp":"Train.Ctrip"}function m(e,t){if("string"!==typeof e)throw new Error("url \u5fc5\u987b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32");return e=e.replace(/^\//,""),function(){var n=(0,a.Z)((0,i.Z)().mark((function n(r){var a,s,o,p,f,m,v,x,y,b,w;return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=c().util.systemInfo||{},s=a.platform||"",o=a.model,p=(0,l.sx)()||"",f="".concat(s," | ").concat(o," | ").concat(p),m="canary"===c().getStorageSync("_globalEnvSetting"),v="1"===c().getStorageSync("_enableProxyMock"),x=c().locate.getCachedGeoPoint(),y={head:{extension:[{name:"xtrainwxplatform",value:s},{name:"xtrainwxversion",value:d.Z.WXVersion},{name:"xtrainminiappchannel",value:g()},{name:"xtrainclientInfo",value:f},{name:"xtrainwxcityname",value:p},{name:"xtrainwxlatitude",value:(null===x||void 0===x?void 0:x.latitude)||"0"},{name:"xtrainwxlongitude",value:(null===x||void 0===x?void 0:x.longitude)||"0"},{name:"clientInfo",value:f}]}},Object.assign(r,y),+new Date,b="/restapi/soa2/".concat(e),w=m?{"x-ctrip-canary-req":"1"}:{},n.next=15,new Promise((function(e,n){if(v){var i=u().getState();return w.sessionid="".concat(null===i||void 0===i?void 0:i.vid,"-").concat(null===i||void 0===i?void 0:i.sid),void c().request(h({url:b.replace("/restapi","/ztmockprod/restapi"),data:r,method:"POST",header:w,success:function(r){return r.statusCode>=400?n(r):t?e(r.data):void e((0,l.Zs)(r.data))},fail:n}))}c().request(h({url:b,data:r,method:"POST",header:w,success:function(r){return r.statusCode>=400?n(r):t?e(r.data):void e((0,l.Zs)(r.data))},fail:n}))}));case 15:return n.abrupt("return",n.sent);case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var v=m("19436/json/GetConfigInfo"),x=m("19436/json/GetQConfigContent"),y=m("18212/json/OrderCreateV4"),b=m("14681/json/TrainOrderCreatePollingResult"),w=m("14666/json/TrainTicketDetailSearchV4"),T=m("18213/json/GrabTicketBookingDetailV3"),k=m("14666/json/grabSuccessRate"),j=(m("13534/TrainGetPassengerList"),m("13534/TrainGetPassengerList",!0)),N=m("14681/json/TrainPreOrderCreateH5"),P=m("18212/json/TrainGetPaymentRequestIdAuth"),S=m("13534/json/GetCouponListByOut"),C=m("14666/json/GrabHBDetail"),I=m("14666/json/GetBindAccountInfo"),Z=m("14666/json/GetBookingByTrainNameV3"),V=m("13534/PushUserSharePassengerInfo"),L=m("23619/json/recordErrorLog"),D=m("14681/json/GetPreHoldSeatResult"),_=m("18212/json/TrainOrderDetailSearchV3Out"),A=m("14681/json/GetPrePayInfoV2"),E=m("13534/json/TrainApp123ForLogin"),O=m("14666/json/TrainFaceAuthenticationRisk"),R=m("17703/json/GetAccountMobilePhone"),F=m("13534/json/GetUserRealAuthenticationInfo"),M=(m("13534/json/PreCheckCouponValidation"),m("14674/json/GetAllSeatPriceInfo")),B=m("14666/json/GetDefaultCouponInfo"),U=m("14674/json/GetTrainServiceInfo"),$=m("14681/json/AddReScheduleOrderOut"),G=m("13534/json/NotifyStartUp"),W=m("23841/json/getConfigByKeys"),Y=m("13534/json/TrainApp123ForCheckLoginStatus"),q=m("13534/json/trainApp123ForGetPassengerList"),z=m("14681/json/GetStudentQualificationVerify"),H=m("13534/json/TrainApp123ForGetMemberDetailsInfo"),K=m("13534/json/TrainApp123ForGetMemberPointList"),J=m("13534/json/TrainApp123ForGetAssigneeList"),Q=m("15486/json/getCommonInfo"),X=m("11676/json/saveCommonContact");function ee(){return te.apply(this,arguments)}function te(){return te=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.prev=1,e.next=4,v({configKey:t});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.configInfo.content));case 8:return e.prev=8,e.t0=e["catch"](1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),te.apply(this,arguments)}var ne=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function re(e){return ie.apply(this,arguments)}function ie(){return ie=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,r.Z)({channel:"ctripwx"},t),e.next=4,j(n);case 4:return a=e.sent,e.abrupt("return",{userPassengerList:a.TrainPassengerList});case 8:throw e.prev=8,e.t0=e["catch"](0),console.log("\u83b7\u53d6\u5e38\u65c5\u4fe1\u606f\u5931\u8d25",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),ie.apply(this,arguments)}function ae(e){return se.apply(this,arguments)}function se(){return se=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("polling"),n={};case 2:if(3!==n.result){e.next=5;break}return e.next=5,ne(1e3*n.rate);case 5:return e.next=7,q((0,r.Z)((0,r.Z)({},t),{},{Pollingkey:n.pollingKey}));case 7:if(n=e.sent,1===n.retCode){e.next=10;break}return e.abrupt("return",n);case 10:return e.next=12,ne(n.rate);case 12:if(3===n.result){e.next=2;break}case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}},71280:function(e,t,n){"use strict";n.d(t,{WG:function(){return o},ZK:function(){return u}});var r=n(57042),i=n(24460),a=n(56884),s=n.n(a),c=function(){function e(t){(0,r.Z)(this,e),this.key=t}return(0,i.Z)(e,[{key:"set",value:function(e){if(void 0==e)return s().setStorageSync(this.key,"");s().setStorageSync(this.key,e)}},{key:"get",value:function(){return s().getStorageSync(this.key)||{}}},{key:"setAttr",value:function(e,t){var n=this.get()||{};t&&t.timeout?t.expiredTime=Date.now()+60*t.timeout*1e3:Array.isArray(t)&&t.forEach((function(e,n){"[object Object]"===Object.prototype.toString.call(t[n])&&(t[n].expiredTime=Date.now()+60*e.timeout*1e3)})),n[e]=t,this.set(n)}},{key:"getAttr",value:function(e){var t=this.get();return"[object Object]"===Object.prototype.toString.call(t[e])?Date.now()>parseInt(t[e].expiredTime)&&delete t[e]:"[object Array]"===Object.prototype.toString.call(t[e])&&t[e].map((function(n,r){Date.now()>parseInt(n.expiredTime)&&t[e].splice(r,1)})),t[e]}},{key:"removeAttr",value:function(e){var t=this.get();delete t[e],this.set(t)}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),o=(c.getInstance("TRAIN_STATION_STORE"),c.getInstance("TRAIN_QUERY_STORE"),c.getInstance("TRAIN_BOOK_STORE")),u=c.getInstance("TRAIN_ACTIVITY_STORE")},38717:function(e,t,n){"use strict";n.d(t,{$U:function(){return Z},Zs:function(){return V},aS:function(){return L},sx:function(){return D},aU:function(){return _},JV:function(){return A},Gm:function(){return E},Ox:function(){return R},mn:function(){return F},Og:function(){return U},BQ:function(){return $},ei:function(){return G},td:function(){return z},NL:function(){return K},rW:function(){return J},Ki:function(){return ne},GQ:function(){return re},Ab:function(){return ie},cI:function(){return oe},Wb:function(){return ue},MK:function(){return le},vJ:function(){return pe},nP:function(){return fe},lu:function(){return ye},ZT:function(){return be},c6:function(){return we},UH:function(){return Te},Ay:function(){return ke},_P:function(){return je},Xx:function(){return Se},fE:function(){return Ce},lX:function(){return Ze},zy:function(){return De},SQ:function(){return _e},zB:function(){return Ee},zY:function(){return Oe},i2:function(){return Fe},uy:function(){return Me},ip:function(){return Ue},Ru:function(){return Ge},DR:function(){return We}});var r=n(68277),i=n(94262),a=n(77610),s=n(22276),c=n(298),o=n(79301),u=n(95308),l=n(93212),d=n(90129),p=n(24460),f=n(57042),h=n(56884),g=n.n(h),m=n(90201),v=n(35997),x=n(79062),y=n(74760),b=n(81719),w=n.n(b),T=n(71280),k=["UserName","Password","displayName"],j=w().dayjs,N=w().wrapLogin,P=w().wrapRunOnlyUser,S=(0,p.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,f.Z)(this,e),this.errcode=t,this.errmsg=n,this.failCode=r,this.originData=i}));S.errcodes={login:1,checkTimeout:2,accountError:3,other:4};var C=!1,I={outparamsToString:function(e){var t=e.dStation,n=void 0===t?"":t,r=e.aStation,i=void 0===r?"":r,a=e.dDate,s=void 0===a?"":a,c=e.trainName,o=void 0===c?"":c,u=e.seat,l=void 0===u?"":u,d=e.isgd,p=void 0===d?"":d,f=e.stu,h=void 0===f?"":f;return"dstation=".concat(encodeURIComponent(n),"&astation=").concat(encodeURIComponent(i))+"&ddate=".concat(encodeURIComponent(s),"&trainname=").concat(o,"&seat=").concat(encodeURIComponent(l),"&isgd=").concat(p,"&stu=").concat(h)},showLoading:function(e){if(g().showLoading)return C=!0,g().showLoading({title:e||"\u6b63\u5728\u52a0\u8f7d",mask:!0});g().showToast({title:e||"\u6b63\u5728\u52a0\u8f7d",icon:"loading",duration:1e4,mask:!0})},hideLoading:function(){var e;C&&(C=!1,null===(e=g().hideLoading)||void 0===e||e.call(g()))},showToastPromise:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise((function(r){var i;C&&(C=!1,null===(i=g().hideLoading)||void 0===i||i.call(g()));g().showToast({title:e,icon:t||"success",mask:!0,duration:n||2e3}),setTimeout((function(){r()}),n||2e3)}))},showToast:function(e,t,n){var r;C&&(C=!1,null===(r=g().hideLoading)||void 0===r||r.call(g()));g().showToast({title:e,icon:t||"success",mask:!0,duration:n||1500})},hideToast:function(){g().hideToast()},showModalPromise:function(e){return new Promise((function(t){g().showModal({title:e.title||"\u63d0\u793a",content:e.m,showCancel:e.showCancel||!1,cancelText:e.cancelText||"\u53d6\u6d88",cancelColor:"#19a0f0",confirmText:e.confirmText||"\u786e\u5b9a",confirmColor:"#19a0f0",success:function(n){e.done&&e.done(n),t(n)}})}))},showModal:function(e){g().showModal({title:e.title||"\u63d0\u793a",content:e.m,showCancel:e.showCancel||!1,cancelText:e.cancelText||"\u53d6\u6d88",cancelColor:"#19a0f0",confirmText:e.confirmText||"\u786e\u5b9a",confirmColor:"#19a0f0",success:e.done})},costTimeString:function(e){var t,n,r,i=Math.floor(e/1440);return i?(t=Math.floor(e/60%24),n=Math.floor(e%60),r=i+"\u5929"+t+"\u65f6"+n+"\u5206"):(t=Math.floor(e/60%24),n=Math.floor(e%60),r=t?t+"\u65f6"+n+"\u5206":n+"\u5206"),r},unique:function(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t},getTrainTypes:function(e){var t=["G","D","C"],n=e.map((function(e){return null===e||void 0===e?void 0:e[0]})).map((function(e){return t.indexOf(e)>-1?e:"O"}));return I.unique(n)},handleTrains:function(e,t){var n,r=function(e){var n=t?t.replace(/\-/g,"/"):j().format("YYYY/MM/DD");return+new Date(n+" "+e+":00")},i=function(e){var t=parseInt(e/60),n=e%60;return"".concat(t>0?"".concat(t,"\u65f6"):"").concat(n,"\u5206")},a=function(e){return e>=c[0]&&e<=c[1]?2:e>=c[1]&&e<=c[2]?4:e>=c[2]&&e<=c[3]?8:16},s=function(e){return o.indexOf(e)>=0?2:u.indexOf(e)>=0?4:l.indexOf(e)>=0?8:16},c=[r("00:00"),r("06:00"),r("12:00"),r("18:00")],o=["G","C"],u=["D"],l=["Z","T","K"],d=[],p=function(e){var t=0;return e.forEach((function(e){t+=e.seatInventory})),t};return e.forEach((function(e){0==e.seatList.length||r(e.departTime)<=+new Date||(n=e.seatList[0],e.seatCount=p(e.seatList),e.extraEmptytSeat=new Array(e.seatList.length>3?0:4-e.seatList.length),e.price=n.seatPrice,e.seatName=n.seatName,e.isJianLou=!n.seatInventory,e.timesCost=i(e.runTime),e.departTimeStamp=r(e.departTime),e.timePeriod=a(e.departTimeStamp),e.trainType=s(e.trainNumber[0]),e.saleNote=(e.saleNote||"").replace(/(<br\/>)/g,""),e.canRobTag=h._.some(e.seatList,(function(e){return"\u4e8c\u7b49\u5ea7"===e.seatName&&!e.seatInventory})),d.push(e))})),d},getNextDayTimeOut:function(){var e=new Date;e.setDate((new Date).getDate()+1);var t=e.setHours(0,0,0)-Date.now();return Math.floor(t/1e3/60)},ubtTrace:function(e,t){var n=g().getCurrentPage();if(t.channel=x.Z.traceChannel,!t.PageId){var r=null===n||void 0===n?void 0:n.pageId;t.PageId=r}n&&n.ubtTrace&&e&&n.ubtTrace(e,t)},ubtDevTrace:function(e,t){var n=g().getCurrentPage();n&&n.ubtDevTrace&&e&&n.ubtDevTrace(e,t)},useSyncCallback:function(e){var t=(0,m.useState)({current:!1}),n=(0,d.Z)(t,2),r=n[0],i=n[1],a=(0,m.useCallback)((function(){i({current:!0})}),[r]);return(0,m.useEffect)((function(){!0===r.current&&i({current:!1})}),[r]),(0,m.useEffect)((function(){r.current&&e()})),a},dealPriceInt:function(e){var t=e-parseInt(e);return t>.5?parseInt(e)+1:.5==t?e:t<.5&&t>0?parseInt(e):e},getStuPrice:function(e){var t,n=e.price,r=e.seatName,i=null===(t=e.trainNumber)||void 0===t?void 0:t[0];if(["\u65e0\u5ea7","\u4e8c\u7b49\u5ea7"].includes(r)&&["G","C","D"].includes(i))n*=.75;else if(["\u65e0\u5ea7","\u786c\u5ea7"].includes(r)&&["Z","T","K"].includes(i))n*=.5;else if(["\u786c\u5367"].includes(r)){var a=0;e.seatList.forEach((function(e){["\u786c\u5367"].includes(e.seatName)&&(a=e.seatPrice)})),n-=.5*a}return n=I.dealPriceInt(n),n},getChildPrice:function(e){var t=e.price,n=e.seatName;return["\u8f6f\u5367","\u9ad8\u7ea7\u8f6f\u5367"].includes(n)?t:I.dealPriceInt(.5*t)},setBookStore:function(){var e=T.WG.get();g().user.isLogin()&&g().user.auth==e.auth||(T.WG.set(""),T.WG.setAttr("auth",g().user.auth))},convetFakePhone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/(\d{3})\d{4}(\d{4})/g;return t.test(e)?e.replace(t,"$1****$2"):e},isBussinessClassSeat:function(e){return"\u5546\u52a1\u5ea7"===e},isFirstClassSeat:function(e){return"\u4e00\u7b49\u5ea7"===e},isSecondClassSeat:function(e){return"\u4e8c\u7b49\u5ea7"===e},isIos:function(){var e=g().getSystemInfoSync();return e.system.includes("iOS")},isIphone13:function(){var e=g().getSystemInfoSync(),t=e.model.slice(e.model.indexOf("<")+1,e.model.indexOf(">")),n=["iPhone14,1","iPhone14,2"];return n.findIndex((function(e){return e===t}))>-1},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))}};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=decodeURIComponent(e.dstation||e.dStation||"\u4e0a\u6d77"),n=decodeURIComponent(e.astation||e.aStation||"\u5317\u4eac"),r=decodeURIComponent(e.ddate||e.dDate||e.ddata||e.dData||""),i=decodeURIComponent(e.trainname||e.trainName||"").toUpperCase(),a=decodeURIComponent(e.seat||""),s=e.isgd,c=e.stu,o=decodeURIComponent(e.autoFilterDStation||""),u=decodeURIComponent(e.autoFilterAStation||"");return{dStation:t,aStation:n,dDate:r,isgd:!(!s||"0"==s||"false"==s)&&s,seat:a,trainName:i,stu:!!c,hasOutParams:e.dstation||e.dStation||e.astation||e.aStation||e.dDate||e.ddate||c||s,autoFilterDStation:o,autoFilterAStation:u}}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"object"!==(0,l.Z)(e))return null;if("[object Array]"===Object.prototype.toString.call(e)){var n=[];return n=e.map((function(e){return"object"===(0,l.Z)(e)?V(e):e})),n}var r={};return Object.keys(e).forEach((function(n){var i="";"ResponseHead"!==n&&"ResponseStatus"!==n?(i=t?n[0].toLowerCase()+n.substring(1):n[0].toUpperCase()+n.substring(1),"object"===(0,l.Z)(e[n])?r[i]=V(e[n]):r[i]=e[n]):r[n]=e[n]})),r}function L(e){var t=e.train,n=e.trainTransferInfos,r=e.forecastPriceList,i=e.selectedPassengers,a=e.crossStationGrabTicketExtraAmount,s=void 0===a?0:a,c=e.priorityTicketRights,o=e.isTicketFirstSwitchSelected,u=e.selectedPackage,l=e.supermemberInfo,d=e.subscribeVip,p=e.vipProduct,f=e.selectedCoupon,h=e.isTransit,g=e.isReassuringGrabSelected,m=e.reassuringGrabInfo,v=e.grabSelectSeatServiceList,x=e.curSelCarrInfo,b=e.curSelSeatPosInfo,w=e.returnChangeInsSelectInfo,T=e.vendorIDType,k=e.specialGrabInfo,j=e.selectedInsInfo,N=e.omniGrabInfo,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=P.withoutCoupon,C=void 0!==S&&S,Z=P.withoutPackage,V=void 0!==Z&&Z,L=t.price,D=0,_=0,A=i.filter((function(e){return 2!=e.passengerType&&3!=e.passengerType})),E=i.filter((function(e){return 2==e.passengerType})),O=i.filter((function(e){return 3==e.passengerType})),R=!1,F=0,M=0,B=0,U=t&&t.isJianLou;h&&(L=n.map((function(e){return e.price})).reduce((function(e,t){return t+e}),0));var $=t.thenByTicketInfo,G=!1,W=0;if(1===(null===$||void 0===$?void 0:$.actionType)&&1==(null===$||void 0===$?void 0:$.solutionType)&&(G=!0,W=+$.leftTicketPrice),G||h||U||0!==s)_=i.length*(L+W);else{var Y;if(F=A.length*L,O.length)B=r.length?null===(Y=r.find((function(e){return 3===e.ticketType})))||void 0===Y?void 0:Y.forecastPrice:I.getStuPrice(t);E.length&&(M=r.length?r.find((function(e){return 2===e.ticketType})).forecastPrice:I.getChildPrice(t)),R=E.length>0||O.length>0,_=F+E.length*M+O.length*B}var q=0;try{var z=0,H=0,K=0,J=0,Q=0,X=0,ee=0,te=0,ne=0,re=0,ie=0;u&&(z=u.packagePrice||0),o&&c&&(K=c.appendPrice||0),g&&m&&(J=m.appendPrice||0),j&&j.appendPrice&&(ie=j.appendPrice||0),T===y.kC.SPECIAL&&k&&(Q=k.appendPrice||0),null!==N&&void 0!==N&&N.vendorPkg&&(Q=N.vendorPkg.discountPrice||0),h&&(z*=n.length,K*=n.length),V&&(z=0),l&&!l.isSupermember&&d&&p&&(X=p.price),(null===x||void 0===x?void 0:x.selCarrIdx)>=0&&(te=x.serviceFee*i.length),(null===b||void 0===b?void 0:b.selSeatIdx)>=0&&(ne=b.num*b.serviceFee),null!==w&&void 0!==w&&w.selectedReturnChangeIns&&(re=(w.selectedReturnChangeInsRight?0:w.appendPrice)*i.length);var ae=i.length*(z+K);null!==f&&void 0!==f&&f.couponCode&&(H=f.deductionAmount,2===f.couponType&&(H=!U||H<ae?H:ae),1===f.couponType&&(H=0),C&&(H=0)),null!==v&&void 0!==v&&v.length&&(ee=v.reduce((function(e,t){return e+t.passengerCount*t.servicePrice}),0)),q=i.length*(z+s+K+J+Q+ie)-H+X+ee+te+ne+re,D=_+q}catch(e){console.log("resetPriceErr",e)}return D<0&&(D=0),{trainPrice:L,grabTrainPrice:W,totalPrice:D,totalPricePas:_,adultList:A,childPrice:M,childList:E,stuPrice:B,stuList:O,hasDiscount:R,crossStationGrabTicketExtraAmount:s}}function D(){var e=g().locate.getCachedCtripCity(),t=function(e){try{var t=!!e.data&&e.data.ctripPOIInfo.cityIDList[0].cityName||"";return t}catch(e){console.log("getCurrentCity",e)}};return e?t(e):""}var _=function(e,t){var n=0;return n=e.map((function(e){return e.price?e.price:e.seatList&&e.seatList.filter((function(e){return t.includes(e.seatName)})).map((function(e){return e.seatPrice})).sort((function(e,t){return e-t})).reverse()[0]||0})).sort((function(e,t){return e-t})).reverse()[0]||0,n},A=function(e){var t=e.trainTransferInfos,n=e.selectedPassengers,r=e.train,i=e.convertStu,a=e.isCanPointsPay;if(!n.length)return[];var s=(null===t||void 0===t?void 0:t.length)>0?t:[r];return s.map((function(e){return n.map((function(t){var n="",r=[];return a?(r.push({key:"PassengerMobile",value:t.mobile}),r.push({key:"PassengerEmail",value:t.email}),2===t.idNoType&&r.push({key:"nationalitycode",value:t.mobileCode}),{passengerName:t.name.trim().toUpperCase(),passportName:t.name.trim().toUpperCase(),passportType:"C"==t.idNoType?10:"G"==t.idNoType?7:"B"==t.idNoType?2:1,passportNoDataType:0,passportNo:1==t.idNoType?t.idNo:t.idNo.toUpperCase(),ticketType:t.passengerType,routeSequence:e.routeSequence||0,seatNo:"",realTicketPrice:0,seatTypeName:e.seatName,longElectronicNumber:"",extendInfoList:r}):(n=t.isChild&&t.adultName?t.adultName.trim().toUpperCase():t.pasName.trim().toUpperCase(),r.push({key:"PassengerMobile",value:t.mobilePhone}),r.push({key:"PassengerEmail",value:t.email}),2===t.identityType&&(r.push({key:"nationalitycode",value:t.nationality}),r.push({key:"nationalityname",value:t.nationalityName})),{passengerName:t.pasName.trim().toUpperCase(),passportName:n,passportType:parseInt(t.idcard.type),passportNoDataType:t.noDataType||0,passportNo:1==t.noDataType?t.idcard.no:t.idcard.no.toUpperCase(),ticketType:3!=t.passengerType?t.isChild?2:1:i||t.convertStu?1:3,birthday:t.birth,identityLimitDate:t.identityLimitDate||"",routeSequence:e.routeSequence||0,seatNo:"",realTicketPrice:0,seatTypeName:e.seatName,longElectronicNumber:"",extendInfoList:r})}))})).reduce((function(e,t){return e.concat(t)}))},E=function(){return new Promise((function(e){g().mkt.getUnion((function(t){e(t)}))}))},O=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={configKey:"package_sold_aid_sid"},e.next=3,(0,v.Gl)(n);case 3:return r=e.sent,i=(null===(t=r.configInfo)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.split(";"))||[],i.length&&g().setStorageSync("packageConfig",i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=g().getStorageSync("packageConfig"),n){e.next=5;break}return e.next=4,O();case 4:n=e.sent;case 5:return r=t.allianceid,i=t.sid,a="",n&&n.forEach&&n.forEach((function(e){a||e!=="".concat(r,"&").concat(i)||(a=e)})),a||(a="263382&1464975"),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){e&&g().mkt.saveUserFormID&&g().mkt.saveUserFormID(e)};function M(e){var t=e.train,n=e.isTransit,r=e.otherSeatStr,i=e.isAcceptNoSeat,a=e.otherTrainStr,s=e.isChooseSeatOnlineButtonVisible,c=e.seatPositionInfo,o=e.firstPartSeatPositionInfo,u=e.secondPartSeatPostionInfo,l=e.jlAlternativeTripList,d=e.acceptSilent,p=e.isSelectArgent,f=e.isSectionTicket,h=e.curSelSeatPosInfo,g=void 0===h?{}:h,m=e.selSeatPosConfigList,v=void 0===m?[]:m,x=e.selCarriageConfig,y=void 0===x?{}:x,b=e.trainTransferInfos,w=void 0===b?[]:b,T=e.freeBedSelList,k=void 0===T?[]:T;if(n)return w.map((function(e,t){return 0==t?B({train:e,seatPositionInfo:o,isChooseSeatOnlineButtonVisible:s,isSectionTicket:f}):1==t?B({train:e,seatPositionInfo:u,isChooseSeatOnlineButtonVisible:s,isSectionTicket:f}):void 0}));var j=t.thenByTicketInfo;return j&&1===j.solutionType&&1===j.actionType?B({train:t,otherSeatStr:r,isAcceptNoSeat:i,otherTrainStr:a,isChooseSeatOnlineButtonVisible:s,seatPositionInfo:c,jlAlternativeTripList:l,acceptSilent:d,isSelectArgent:p,curSelSeatPosInfo:g,selSeatPosConfigList:v,selCarriageConfig:y,freeBedSelList:k}):[B({train:t,otherSeatStr:r,isAcceptNoSeat:i,otherTrainStr:a,isChooseSeatOnlineButtonVisible:s,seatPositionInfo:c,jlAlternativeTripList:l,acceptSilent:d,isSelectArgent:p,curSelSeatPosInfo:g,selSeatPosConfigList:v,selCarriageConfig:y,freeBedSelList:k})]}function B(e){var t=e.train,n=e.otherSeatStr,r=e.otherTrainStr,i=e.isChooseSeatOnlineButtonVisible,a=e.seatPositionInfo,s=e.jlAlternativeTripList,o=e.acceptSilent,u=e.isSelectArgent,l=e.isSectionTicket,d=e.curSelSeatPosInfo,p=void 0===d?{}:d,f=e.selCarriageConfig,h=void 0===f?{}:f,m=e.freeBedSelList,v=void 0===m?[]:m;if(!t.departStation)throw I.ubtDevTrace("train_tinyapp_dev_log",{bizKey:"ordinary_create_order_train_error",value:{train:t}}),I.showModal({m:"\u7cfb\u7edf\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",done:function(){g().navigateBack()}}),new Error("\u8f66\u6b21\u4fe1\u606f\u5f02\u5e38");var x=j(t.departTimeStamp).utcOffset(8),y=x.format("YYYY-MM-DD"),b=l?j(t.arriveTimeStamp).utcOffset(8).format("YYYY-MM-DD"):x.add(t.takeDays,"day").format("YYYY-MM-DD"),w=n,T={departureStationName:t.departStation,arrivalStationName:t.arriveStation,departureDateTime:y+" "+t.departTime+":00",arrivalDateTime:b+" "+t.arriveTime+":00",trainNumber:t.trainNumber,ticketPrice:t.price,seatName:t.seatName,seatNo:"",routeSequence:t.sequence?t.sequence:0,jLAlternativeTrain:r,jLAlternativeSeat:w,jlAlternativeTripList:s,isSelectedSilent:o||!1,isUrgent:u};if(t.seatList){var k=We(t.seatName,t.seatList);if(k){var N=0==k.seatInventory;T.needGrab=N}}if(p.selSeatIdx>=0&&p.num){var P=p;T.selectSeatList=[{serviceType:P.serviceType,selectPassageCount:p.num,isCanEleCToDZTicket:P.isCanEleCToDZTicket,isRefuseOtherSeat:!p.acceptOther,productId:P.productId,selectSeatCode:P.selectSeatCode}]}if(v.length>0&&(T.selectSeatList=v,T.is12306SelectSeatService=!0),h.selCarrIdx>=0){var S=h.carriageList[h.selCarrIdx]||{};T.selectCarriageList=[{carriageNo:S.carriageNo,isCanEleCToDZTicket:h.isCanEleCToDZTicket,productId:h.productId}]}if(console.log("isChooseSeatOnlineButtonVisible",i,a),i&&(T.selectedSeat=a.join(",")),t.thenByTicketInfo&&1===t.thenByTicketInfo.solutionType&&1===t.thenByTicketInfo.actionType){var C=t.thenByTicketInfo.ticketInfo,Z=(0,c.Z)((0,c.Z)((0,c.Z)({},T),C),{},{needGrab:!0,routeSequence:2,selectCarriageList:void 0});return T.routeSequence=1,[T,Z]}return T}var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pkg,n=void 0===t?{}:t,r=e.selectedCoupon,o=e.train,u=e.trainTransferInfos,l=e.isBupiao,d=e.mobile,p=e.areaCode,f=void 0===p?"":p,m=e.isTransit,v=e.login12306Name,b=e.selectedPassengers,w=e.freeChildrenPassengers,T=e.isCanPointsPay,k=void 0!==T&&T,j=e.isTicketFirstSwitchSelected,N=e.isNightGrabSelected,P=e.isReassuringGrabSelected,S=e.reassuringGrabInfo,C=void 0===S?{}:S,I=e.vendorIDType,Z=e.specialGrabInfo,L=void 0===Z?{}:Z,D=e.omniGrabInfo,_=e.priorityTicketRights,E=e.subscribeVip,O=e.vipProduct,R=e.grabWithVip,F=e.isOpenCrossStation,B=e.crossStationGrabTicketInfoList,U=e.unionData,$=e.jLExpireDateTime,G=e.jLExpiredTimeOffset,W=e.otherDates,Y=void 0===W?[]:W,q=e.jLRecommodNearTrainInfo,z=e.isNearTrainSwitchSelected,H=e.isAcceptHB,K=e.hBTunnelType,J=e.otherSeatStr,Q=e.isAcceptNoSeat,X=e.otherTrainStr,ee=e.isChooseSeatOnlineButtonVisible,te=e.seatPositionInfo,ne=e.secondSeatPositionInfo,re=e.convertStu,ie=e.isSelectedInsurance,ae=e.insuranceInfo,se=e.selectRightInReturnChangeIns,ce=e.selectReturnChangeIns,oe=e.returnChangeIns,ue=e.rightInReturnChangeIns,le=e.useFreePackage,de=void 0!==le&&le,pe=e.userPackageInfo,fe=void 0===pe?{}:pe,he=e.fromPage,ge=void 0===he?"DG":he,me=e.acceleratePackageID,ve=e.acceleratePackagePrice,xe=void 0===ve?2:ve,ye=e.grabBuyPackageFromType,be=void 0===ye?3:ye,we=e.deductionMemberPackage,Te=void 0===we?{}:we,ke=e.otherTrains,je=void 0===ke?[]:ke,Ne=e.isSectional,Pe=void 0!==Ne&&Ne,Se=e.isSectionTicket,Ce=void 0!==Se&&Se,Ie=e.isEleCounterTicket,Ze=void 0!==Ie&&Ie,Ve=e.acceptSilent,Le=void 0!==Ve&&Ve,De=e.isSelectRealName,_e=void 0!==De&&De,Ae=e.isSelectArgent,Ee=void 0!==Ae&&Ae,Oe=e.choosenEquity,Re=void 0===Oe?{}:Oe,Fe=e.skipLogin12306Package,Me=e.reBookLogin12306Package,Be=e.isSelectedSkip12306Package,Ue=void 0!==Be&&Be,$e=e.isSelectedLogin12306Package,Ge=void 0!==$e&&$e,We=e.selCarriageConfig,Ye=void 0===We?{}:We,qe=e.selSeatPosConfigList,ze=void 0===qe?[]:qe,He=e.curSelSeatPosInfo,Ke=void 0===He?{}:He,Je=e.orderSource,Qe=void 0===Je?"":Je,Xe=e.grabSelectSeatServiceList,et=void 0===Xe?[]:Xe,tt=e.selectedInsInfo,nt=void 0===tt?{}:tt,rt=e.insToken,it=void 0===rt?"":rt,at=e.fromH5,st=void 0===at?"":at,ct=e.extraCreateOrderParams,ot=void 0===ct?null:ct,ut=e.freeBedSelList,lt=e.vendorID,dt=[];if(o){var pt=V([].concat((0,s.Z)(je),[o]));dt=pt.map((function(e){return{departStation:e.departStation,arriveStation:e.arriveStation,trainNumber:e.trainNumber}}))}var ft=M({train:o,isTransit:m,otherSeatStr:J,isAcceptNoSeat:Q,otherTrainStr:X,isChooseSeatOnlineButtonVisible:ee,seatPositionInfo:te,firstPartSeatPositionInfo:te,secondPartSeatPostionInfo:ne,jlAlternativeTripList:dt,acceptSilent:Le,isSelectArgent:Ee,curSelSeatPosInfo:Ke,selSeatPosConfigList:ze,selCarriageConfig:Ye,trainTransferInfos:u,isSectionTicket:Ce,freeBedSelList:ut}),ht=A({trainTransferInfos:ft,train:o,selectedPassengers:b,convertStu:re,isCanPointsPay:k}),gt=A({trainTransferInfos:ft,train:o,selectedPassengers:w,convertStu:re,isCanPointsPay:k}),mt=g().util.systemInfo,vt={},xt=o&&o.isJianLou;vt.bookSourceID=1913,vt.client=mt.model,vt.clientId="",vt.channelName="WX",vt.orderSource=Qe||"".concat(x.Z.channel,"|").concat(g().scene),vt.isCanPointsPay=k,"schemequery"===st&&(vt.channel="wx",vt.orderSource=ot.orderSource),vt.language=mt.language,vt.orderType=xt?"JL":Ze||Ee||Ke.selSeatIdx>=0&&Ke.num>0||Ye.selCarrIdx>=0?"P":"E",vt.isEleCounterTicket=Ze||Ee||Ke.selSeatIdx>=0&&Ke.num>0||Ye.selCarrIdx>=0,vt.partnerName="Ctrip.Train",vt.orderID=0,vt.isOffsetTicket=!!l,vt.appVersion="",vt.extendInfoList=[],vt.trainOtherProductList=[],vt.grabSelectSeatServiceList=et.map((function(e){return h._.pick(e,["serviceType","passengerCount","isUseReservationFree"])})),vt.contact={countryCode:f,contactMobile:d,contactName:"",contactEmail:""},vt.orderTicketType=Pe?4:m?2:0,vt.isSectionTicket=Ce,vt.orderSign=0,vt.userName12306=v||"",vt.userPass12306="",vt.cookie12306="",vt.electronicNum="",vt.isSelectRealName=_e,vt.isGhostUser=0,vt.ticketList=ft,vt.passengerList=ht,vt.freePassengerList=gt;var yt=parseInt(n.packageID)||0;if(vt.couponCode=(null===r||void 0===r?void 0:r.couponCode)||"",vt.packageInfo={packageID:yt,packageCount:0===yt?0:b.length,appendList:[]},"ROB"==ge&&(vt.packageInfo.packageID=0,vt.packageInfo.packageCount=0),de){var bt=fe.count,wt=fe.packageList,Tt=40;if(Tt*b.length>=bt)wt=wt.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{useCount:e.count})})),vt.userAccountPackageList=wt;else{var kt=Tt*b.length,jt=[];wt.sort((function(e,t){return t.priority-e.priority})).map((function(e){kt>0&&(kt>=e.count?jt.push(e):jt.push((0,c.Z)((0,c.Z)({},e),{},{count:kt})),kt-=e.count)})),jt=jt.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{useCount:e.count})})),vt.userAccountPackageList=jt}}if("ROB"==ge&&!R&&n.packagePrice>0&&(vt.packageInfo.grabBuyPackageID=n.packageID,vt.packageInfo.grabBuyPackageFromType=+be,vt.packageInfo.appendList.push({appendID:me||9999,appendCount:Math.ceil(n.packagePrice*b.length/xe),appendContent:""})),o.isThenByTrainTicket){vt.extendInfoList.push({key:"OnTrainThenByTicketSolu",value:o.extendThenByValue});var Nt=o.thenByTicketInfo;Nt&&1===Nt.solutionType&&1===Nt.actionType&&(vt.extendInfoList.push({Key:"VendorId",Value:""+lt}),vt.extendInfoList.push({Key:"SmartTripSolutionSource",Value:'{"ubtOrderSource": "\xd7Vendor"}'}),vt.extendInfoList.push({Key:"GrabBuyType",Value:"2"}))}if(m){if(Ue&&Fe){var Pt={appendID:Fe.productId,appendCount:"P"===Fe.productBookingType?b.length:1,appendContent:""};vt.orderType="P",vt.isEleCounterTicket=!0,vt.packageInfo.appendList.push(Pt),vt.extendInfoList.push({key:"ETicketUser12306ProcessV3Type",value:Fe.type})}var St=!1;vt.ticketList.forEach((function(e){e.needGrab&&(St=!0)})),St=St&&vt.ticketList.length>1,St&&(vt.extendInfoList.push({Key:"VendorId",Value:"89"}),vt.extendInfoList.push({Key:"SmartTripSolutionSource",Value:'{"ubtOrderSource": "transferList"}'}),vt.extendInfoList.push({Key:"GrabBuyType",Value:"1"}))}if(Ge){if(Me){var Ct={appendID:Me.productId,appendCount:"P"===Me.productBookingType?b.length:1,appendContent:""};vt.packageInfo.appendList.push(Ct)}vt.extendInfoList.push({key:"ETicketUser12306ProcessV3Type",value:"1"})}if(j){var It={appendID:_.appendID,appendCount:b.length,appendContent:""};vt.packageInfo.appendList.push(It)}if(P&&C){var Zt={appendID:C.appendID,appendCount:b.length,appendContent:""};vt.packageInfo.appendList.push(Zt)}if(I===y.kC.SPECIAL&&L){var Vt={appendID:L.appendID,appendCount:b.length,appendContent:""};vt.packageInfo.appendList.push(Vt)}if(null!==D&&void 0!==D&&D.vendorPkg&&vt.packageInfo.appendList.push({appendID:null===D||void 0===D?void 0:D.vendorPkg.appendID,appendCount:b.length}),E){var Lt={appendID:O.productId,appendCount:1,appendContent:""};vt.packageInfo.appendList.push(Lt)}if("schemequery"===st&&ot&&(vt.waitlistSyncOrderInfo=ot.waitlistSyncOrderInfo),R&&Te&&(vt.deductionMemberPackageList=[Te]),Re&&Re.isChoosen&&!Re.isDisabled){var Dt=h._.pick(Re,["rightsLevel","rightsType","sourceType","rightsLevelRangeName","rightsName"]);vt.useRightsInfoList=[(0,c.Z)({},Dt)]}if(vt.isSelectArtificialNightGrab=!!N,ie){var _t={appendID:ae.appendID,appendCount:m?2*b.length:b.length,appendContent:"",tokenId:it};vt.packageInfo.appendList.push(_t)}if(ce&&oe&&!se){var At={appendID:oe.appendID,appendCount:b.length,appendContent:""};vt.packageInfo.appendList.push(At)}if(nt.appendID){var Et={appendID:nt.appendID,appendCount:b.length,appendContent:"",tokenId:it};vt.packageInfo.appendList.push(Et)}if(se&&ue){var Ot={appendID:ue.appendID,appendCount:b.length,appendContent:""};vt.trainOtherProductList.push(Ot)}return vt.isUserSuperMember=R,vt.invoiceInfo={isNeedInvoice:!1,receiverName:"",address:"",postCode:""},F&&B.length>0&&(vt.crossStationGrabTicketList=B.filter((function(e){return e.isCrossStationGrabCheckoutSelected})).map((function(e){var t=(0,a.Z)({},((0,i.Z)(e),e));return t})),vt.crossStationGrabTicketList&&vt.crossStationGrabTicketList.length>0&&(vt.jLAlternativeRoutePrice=Math.max.apply(Math,(0,s.Z)(vt.crossStationGrabTicketList.map((function(e){return e.extraAmount})))))),vt.unionInfo=U,vt.jLBeginDateTime="",vt.jLExpireDateTime=$,vt.jLExpiredTimeOffset=G,vt.jLAlternativeDate=Y.join(","),vt.lastPayTime="",vt.isJLRecommodNearTrain=q&&q.isShow&&z?0:1,0===vt.isJLRecommodNearTrain&&(vt.jLRecommodNearTrainInfo=q),vt.isAllDayJL=!1,vt.newPayCode=0,vt.trainsaid="",vt.isAcceptHB=H,vt.hBTunnelType=K,vt},$=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,s,u,l,d,p;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={CNName:t.cNName||""},r=t.mobile,i=t.areaCode,n="86"===t.areaCode?(0,c.Z)((0,c.Z)({},n),{},{MobilePhone:r,CountryCode:i}):(0,c.Z)((0,c.Z)({},n),{},{MobilePhoneForeign:r,OverseasCountryCode:i}),a={ParameterList:[{Key:"BizType",Value:"TRN"}],CommonContact:n},e.prev=4,e.next=7,(0,v.Or)(a);case 7:if(s=e.sent,u=s.result,l=u.resultCode,d=u.errMessage,p=u.showErrorMessage,0===l){e.next=11;break}throw{errMessage:d,showErrorMessage:p};case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),console.log("\u5b58\u5165\u9ed8\u8ba4\u8054\u7cfb\u4eba\u4fe1\u606f\u62a5\u9519",e.t0.errMessage);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();function G(e){return W.apply(this,arguments)}function W(){return W=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.isAuthPrePay,r=t.totalPrice,i=t.title,e.prev=1,e.next=4,(0,v.su)({});case 4:if(a=e.sent,a.result){e.next=18;break}return e.prev=6,n?q(2,"\u5df2\u5f00\u901a\u4fe1\u7528\u4ed8"+a.preOrderId):q(3,"\u672a\u5f00\u901a\u4fe1\u7528\u4ed8"+a.preOrderId),e.next=10,Y(a,r,i);case 10:return e.abrupt("return",{isAuthPrePay:!0,preOrderId:a.preOrderId});case 13:return e.prev=13,e.t0=e["catch"](6),e.abrupt("return",{isAuthPrePay:!1});case 16:e.next=19;break;case 18:throw a;case 19:e.next=25;break;case 21:throw e.prev=21,e.t1=e["catch"](1),I.showModal({m:e.t1.message||"\u7cfb\u7edf\u5f02\u5e38\uff0c\u63d0\u4ea4\u8ba2\u5355\u5931\u8d25\u3002\u6211\u4eec\u6b63\u5728\u52aa\u529b\u4fee\u590d\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\u3002"}),e.t1;case 25:case"end":return e.stop()}}),e,null,[[1,21],[6,13]])}))),W.apply(this,arguments)}function Y(e,t,n){var r={amount:t,auth:g().user.auth,oid:e.preOrderId,title:n,currency:"CNY",bustype:4,requestid:e.paymentRequestId,payee:1,paytype:17,notify:e.reCallUrl,recall:"http://webapi.soa.ctripcorp.com/api/14702/json/payment2ReCall"},i=encodeURIComponent(g().util.base64Encode(JSON.stringify(r)));return new Promise((function(e,t){g().payment.withholdPay({token:i,sbackCallback:e,ebackCallback:t,rbackCallback:t})}))}function q(e,t){g().getCurrentPage().ubtTrace(102275,{c:e,e:t})}function z(e,t){return H.apply(this,arguments)}function H(){return H=(0,u.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,c,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.token,i=void 0===r?{}:r,a=n.sbackCallback,s=n.ebackCallback,c=n.rbackCallback,i.oid&&(i.oid=parseInt(i.oid)),e.prev=3,e.next=6,(0,v.De)({orderNumber:i.oid,channel:"ctrip.wx"});case 6:if(u=e.sent,1!=u.retCode||1!=u.payType){e.next=11;break}P(g().payment.callPay2)({serverData:{orderId:i.oid,payToken:u.payToken,busType:4,requestId:u.paymentRequestId},sbackCallback:a,ebackCallback:s,rbackCallback:c}),e.next=12;break;case 11:throw new Error("\u652f\u4ed8token \u83b7\u53d6\u5931\u8d25");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log(e.t0),I.showModal({m:"\u652f\u4ed8\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"});case 18:case"end":return e.stop()}}),e,null,[[3,14]])}))),H.apply(this,arguments)}function K(e,t){var n=t.title,r=t.type,i=t.subscribeVip,a=t.grabWithVip;function s(e){re(e.orderID)}function c(e){var t;"grab"==r?i?t="subscribeVip-popup":a||(t="robsuccess-popup"):t="pay-success-popup",re(e.orderID,t)}var o={oid:e.orderId,title:n,amount:e.orderAmount};z({token:o},{sbackCallback:c,ebackCallback:s,rbackCallback:s})}function J(e){return Q.apply(this,arguments)}function Q(){return Q=(0,u.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isCanPrePay){e.next=10;break}return e.prev=1,e.next=4,X(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),te(t);case 9:return e.abrupt("return");case 10:te(t);case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),Q.apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return ee=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={channel:"WX",payType:"weixin",orderId:t.orderId,RescheduleOrderNumber:"",isAsyn:!0,pollingKey:(null===n||void 0===n?void 0:n.pollingKey)||""},e.next=3,(0,v.AM)(r);case 3:if(i=e.sent,1!==i.retCode){e.next=11;break}if(1!==i.prePayResult){e.next=9;break}return e.abrupt("return",i);case 9:if(3!=i.prePayResult){e.next=11;break}return e.abrupt("return",(0,c.Z)({pollingFlag:!0},i));case 11:throw console.log("\u83b7\u53d6\u652f\u4ed8\u8868\u5355\u5931\u8d25"),I.ubtDevTrace("train_tinyapp_dev_log",{bizKey:"ordinary_pre_pay_info_error",value:{res:i,params:r}}),"\u83b7\u53d6\u652f\u4ed8\u8868\u5355\u5931\u8d25";case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,fe(n,0,15);case 4:r=e.sent,i=g().getCurrentPage(),i.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:"https://m.ctrip.com/webapp/train/activity/ctrip-mini-scheme?wxurl=".concat(encodeURIComponent(r.prePayInfo)),needLogin:!0,bridgeIns:function(){re(t.orderId,"pay-isSuccess")}}}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),pe(e.t0),te(t);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),ee.apply(this,arguments)}function te(e){if(e.alertInfo&&[5,6].includes(e.alertInfo.alertType))return re(e.orderId);if(e.enablePayOrder&&!x.Z.isBaiduApp){var t=e.ticketInfos[0];return K(e,{title:t.departStation+"\u21c0"+t.arriveStation})}re(e.orderId)}var ne=function(e,t){var n=t.reduce((function(e,t){return!["\u4e8c\u7b49\u5ea7","\u4e00\u7b49\u5ea7","\u5546\u52a1\u5ea7","\u7279\u7b49\u5ea7","\u8f6f\u5ea7"].includes(t)||e.length&&!e.some((function(e){return e>2}))?!["\u786c\u5367"].includes(t)||e.length&&!e.some((function(e){return e>4}))?["\u8f6f\u5367","\u9ad8\u7ea7\u8f6f\u5367"].includes(t)&&!e.length?[3,5]:e:[3,4]:[1,2]}),[]),r=e.serviceList.filter((function(e){return n.includes(e.serviceType)}));return(0,c.Z)((0,c.Z)({},e),{},{serviceList:r,isShow:!!r.length})};function re(e,t,n,r){var i="/pages/train/orderdetail/orderdetail?oid="+e;t&&(i=i+"&showType="+t),n&&(i+="&isFastPay=1"),r&&(i+="&isNoSeat=1"),console.log(i),g().redirectTo({url:i})}function ie(){return ae.apply(this,arguments)}function ae(){return ae=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,s,c,u=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,(0,v.Q_)(t);case 3:for(n=e.sent,r=n.responseBody,r.seatList=r.seatItemInfoList,r.runTime=r.useTime,r.departStation=r.departureStationName,r.arriveStation=r.arrivalStationName,r.departTime=r.departureTime,r.arriveTime=r.arrivalTime,i=0,a=r.seatList.length;i<a;i++)s=r.seatList[i],s.seatInventory=s.inventory,s.seatBookable=s.bookable,s.seatName=s.seatTypeName,s.seatPrice=s.price;return c=I.handleTrains([r],t.departDate),e.abrupt("return",c[0]);case 14:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function se(e){if((null===e||void 0===e?void 0:e.length)<4)return e;var t=Math.floor(e.length/3),n=e.length-t-1;return e.slice(0,t)+new Array(n).join("*")+e.slice(-2)}function ce(e){return e?e.replace(/^(.{4})(?:\d+)(.{3})$/,"$1*********$2"):""}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};if(!e)return[];t&&t.tmpFailPsg&&t.tmpFailPsg.length&&(e=e.concat(t.tmpFailPsg)),e=e.filter((function(e){return e&&(e.CNName||e.ENFirstName||e.ENLastName)}));var n=e.map((function(e){var t={};t.Birthday=e.Birthday,t.CNName=e.CNName,t.ENFirstName=e.ENFirstName,t.ENLastName=e.ENLastName,t.IdentityNo=e.IdentityNo,t.IdentityType=e.IdentityType,t.IsENName=e.IsENName,t.IsSelf=e.IsSelf,t.PassengerID=e.PassengerID,t.PassengerType=e.PassengerType,t.CheckStatus=e.CheckStatus,t.CheckStatusName=e.CheckStatusName,t.Nationality=e.Nationality,t.NationalityName=e.NationalityName,t.CountryCode=e.CountryCode,t.ename=e.ENLastName+" "+e.ENFirstName,t.birth=e.Birthday&&e.Birthday.split(" ")[0]||"",t.IsBind=e.IsBind,t.IdentityLimitDate=e.IdentityLimitDate||"",t.noDataType=e.IdentityNoDataType||e.noDataType||0,t.noMaskData=e.IdentityNoMaskData||e.noMaskData||"",t.IdentityNoIsMatch=!!e.IdentityNoIsMatch,t.MobilePhone=e.MobilePhone,t.Email=e.Email,t.convertStu=e.convertStu;var n=y.MJ[e.IdentityType];return t.idcard=n?{type:e.IdentityType,no:e.IdentityNo,text:y.MJ[e.IdentityType],noDataType:e.IdentityNoDataType||e.noDataType||0,noMaskData:e.IdentityNoMaskData||e.noMaskData||"",IdentityNoIsMatch:e.IdentityNoIsMatch,noShow:1===e.IdentityType?ce(e.IdentityNo):se(e.IdentityNo)}:{},t.isChild=2==t.PassengerType,t.needMobile=!t.MobilePhone,t.needEmail=!t.Email,t.pasName=t.IsENName&&(t.ENFirstName||t.ENLastName)||!t.CNName?t.ename:t.CNName,t}));return n=n.filter((function(e){return e.isChild||e.idcard.text&&e.idcard.no})),n}function ue(){x.Z.isTrainApp?g().switchTab({url:"/pages/train/index/index"}):g().switchTab({url:"/pages/home/homepage"})}function le(){return de.apply(this,arguments)}function de(){return de=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,s,c=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:3,n=c.length>1&&void 0!==c[1]?c[1]:{},r={ShareType:t,TicketInfo:{DepartStation:n.departStation||"",ArriveStation:n.arriveStation||"",DepartDateTime:j(n.departTimeStamp).format("YYYYMMDDHHmmss"),ArriveDateTime:j((n.departTimeStamp||0)+60*n.runTime*1e3).format("YYYYMMDDHHmmss"),TrainNumber:n.trainNumber||"",SeatName:n.seatName||""}},e.next=5,(0,v.qs)(r);case 5:return i=e.sent,a=1===i.retCode&&i.shareInfoKey||"",s=JSON.stringify({url:encodeURIComponent("https://m.ctrip.com/webapp/train/activity/20200304-ctrip-passenger-mobile-check?shareInfoKey=".concat(a,"&allianceid=10613&sid=2909730")),needLogin:!0}),e.abrupt("return",{bu:"train",title:"\u5feb\u6765\u52a0\u5165\u884c\u7a0b\uff0c\u6211\u6765\u5e2e\u4f60\u4e70\u7968",path:"/pages/train/shareWebView/shareWebView?data=".concat(s),imageUrl:"https://images3.c-ctrip.com/train/app/8.21/bqckxx.png"});case 9:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function pe(e){var t=g().getCurrentPage();(0,v.dV)({message:e.toString().substring(0,1e3),url:t.route,source:t.route,channel:x.Z.channel})}function fe(e,t,n){return new Promise((function(r,i){var a;t&&setTimeout((function(){clearTimeout(a),i("polling timeout")}),t);var s=0,c=function(){var t=(0,u.Z)((0,o.Z)().mark((function t(u){var l;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(n>0&&s>n)){t.next=2;break}return t.abrupt("return",i("polling count exceeded"));case 2:return s++,t.next=5,e(u);case 5:if(l=t.sent,!l.pollingFlag){t.next=9;break}return a=setTimeout((function(){c(l)}),1e3*(l.requestRate||5)),t.abrupt("return");case 9:r(l);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();c()}))}function he(e){return ge.apply(this,arguments)}function ge(){return ge=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,s,c=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:5,r=c.length>2&&void 0!==c[2]?c[2]:10,i=c.length>3&&void 0!==c[3]?c[3]:null,a=c.length>4&&void 0!==c[4]?c[4]:0,e.prev=4,a++,e.next=8,t(i);case 8:if(s=e.sent,s.pollingFlag){e.next=11;break}return e.abrupt("return",s);case 11:if(a!==r){e.next=13;break}throw!1;case 13:return e.next=15,me(1e3*(s.requestRate||n));case 15:return e.abrupt("return",he(t,n,r,s,a));case 18:throw e.prev=18,e.t0=e["catch"](4),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),ge.apply(this,arguments)}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))};function ve(e){return xe.apply(this,arguments)}function xe(){return xe=(0,u.Z)((0,o.Z)().mark((function e(t){var n,i,a,s,l,d,p,f,h,g,m=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.UserName,i=t.Password,a=t.displayName,s=(0,r.Z)(t,k),l=m.length>1&&void 0!==m[1]?m[1]:{},d=l.registered,void 0!==d&&d,p=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,v.X8)((0,c.Z)((0,c.Z)({UserName:n,Password:De(i),ForceLogin:!0,Channel:"WX"},s),{},{pollingKey:null===t||void 0===t?void 0:t.pollingKey}));case 2:if(r=e.sent,1===r.retCode){e.next=5;break}throw new S(S.errcodes.login,r.failResultContent||"12306\u6545\u969c\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5(".concat(S.errcodes.login,")"),r.failResultCode,r);case 5:if(3!==r.result){e.next=7;break}return e.abrupt("return",(0,c.Z)((0,c.Z)({},r),{},{pollingFlag:!0,requestRate:r.rate}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,he(p,5,10);case 5:if(f=e.sent,1===f.result){e.next=8;break}throw new S(S.errcodes.login,f.failResultContent||"12306\u6545\u969c\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5(".concat(S.errcodes.login,")"),f.failResultCode,f);case 8:return f.memberStatus,f.iDCardNumber,f.realName,f.mobilePhone,h=f.userID12306,g={name:h||n,displayName:I.convetFakePhone(a||n)},T.WG.setAttr("bind12306",g),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),xe.apply(this,arguments)}var ye=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=V,e.next=3,(0,v.gt)(t);case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.retCode,i=n.isCanFaceAuthentication,1!=r||!i){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.qI)(t);case 3:if(r=e.sent,!(1==r.retCode&&(null===(n=r.trainDetailList)||void 0===n?void 0:n.length)>0)){e.next=8;break}return i="https://pages.c-ctrip.com/ztrip/market/service-push/trafficInfo.html?Channel=app&DepartDateTime=".concat(t.DepartDateTime,"&TrainNumber=").concat(t.TrainNumber,"&isHideNavBar=YES"),a=r.trainDetailList.find((function(e){return 1===e.type})),e.abrupt("return",(0,c.Z)((0,c.Z)({},a),{},{url:i}));case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0!==e.length&&e.every((function(e){return["\u786c\u5367","\u4e8c\u7b49\u5ea7","\u786c\u5ea7","\u65e0\u5ea7"].indexOf(e)>-1}))},Te=function(){},ke=function(e,t){var n=j(e),r=t?j(t):j(),i=r.diff(n,"year");return i},je=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.u8)({});case 3:if(n=e.sent,null===(t=n.userInfoList)||void 0===t||!t.length){e.next=8;break}return r=n.userInfoList[0].userName,(0,v.vA)({UserName:r,Channel:"WX"}),e.abrupt("return",r);case 8:return e.abrupt("return","");case 11:return e.prev=11,e.t0=e["catch"](0),e.abrupt("return","");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();function Ne(e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,u.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=(0,c.Z)((0,c.Z)({},t),{},{pollingkey:(null===n||void 0===n?void 0:n.pollingKey)||""}),e.next=3,(0,v.fw)(r);case 3:if(i=e.sent,1!==i.retCode){e.next=7;break}if(3!==i.result){e.next=7;break}return e.abrupt("return",(0,c.Z)({pollingFlag:!0,requestRate:i.rate},i));case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,he(n,0,15);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}var Se=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,s,c,u,l,d,p,f;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params,r=t.outerParams,i=t.succ,a=t.fail,s=t.from,e.prev=1,I.showLoading(),e.next=5,ve(n);case 5:if(c=e.sent,u=c.memberStatus,l=c.iDCardNumber,d=c.realName,p=c.mobilePhone,f=c.userID12306,I.hideLoading(),f||r.userName,i&&"function"==typeof i&&i({memberStatus:u,iDCardNumber:l,realName:d,mobilePhone:p,userID12306:f,userName:n.UserName,loginPW:n.Password}),"is12306AuthValid"!==s){e.next=16;break}return e.abrupt("return",!0);case 16:e.next=24;break;case 18:if(e.prev=18,e.t0=e["catch"](1),I.hideLoading(),a&&"function"==typeof a&&a(e.t0),"is12306AuthValid"!==s){e.next=24;break}return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();function Ce(e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,s,c,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={userName:t||""},e.next=4,Ne(n);case 4:if(r=e.sent,!r.isLogin){e.next=7;break}return e.abrupt("return",!0);case 7:if(i=T.WG.getAttr("12306Accounts"),a=null===i||void 0===i?void 0:i.find((function(e){return e.userName==t})),null!==a&&void 0!==a&&a.loginPW){e.next=11;break}return e.abrupt("return",!1);case 11:return s={UserName:t,Password:a.loginPW,normalLogin:!0},e.next=14,Se({params:s,outerParams:{userName:t},from:"is12306AuthValid"});case 14:return c=e.sent,c||(u=i.filter((function(e){return e.userName!==t})),T.WG.setAttr("12306Accounts",u)),e.abrupt("return",c);case 19:return e.prev=19,e.t0=e["catch"](0),pe(e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[0,19]])}))),Ie.apply(this,arguments)}var Ze=function(){return new Promise((function(e,t){g().user.isLogin()&&e(),N(g().user.login)({callback:function(n){0==n.ReturnCode?(T.WG.setAttr("auth",g().user.auth),e()):t()}})}))},Ve=g().aes.enc.Utf8.parse("-!@QWaszx#^GDFUN"),Le=g().aes.enc.Utf8.parse("09,.34ajoydfuEEi");function De(e){var t=g().aes.AES.encrypt(g().aes.enc.Utf8.parse(e),Ve,{mode:g().aes.mode.CBC,padding:g().aes.pad.Pkcs7,iv:Le});return t.toString()}function _e(e){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={keys:t},e.next=3,(0,v.Fz)(r);case 3:if(i=e.sent,1==i.resultCode){e.next=6;break}throw i.resultMessage;case 6:return e.abrupt("return",null===(n=i.configs[0])||void 0===n?void 0:n.data);case 7:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function Ee(e,t){var n=e.find((function(e){return e.stations.some((function(e){return t.some((function(t){return e.name===t}))}))}));return n||{}}function Oe(e){return Re.apply(this,arguments)}function Re(){return Re=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,v.HF)({UserName:t,Channel:"WX",PollingKey:null===n||void 0===n?void 0:n.pollingKey,SceneCode:0});case 2:if(r=e.sent,1!==r.retCode||3!==r.result){e.next=5;break}return e.abrupt("return",(0,c.Z)((0,c.Z)({},r),{},{pollingFlag:!0,requestRate:r.rate}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,he(n,5,15);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var Fe=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={},e.prev=1;case 2:if(3!==n.pollingResult){e.next=5;break}return e.next=5,I.sleep(1e3*n.pollingRate);case 5:return e.next=7,(0,v.hj)((0,c.Z)((0,c.Z)({},t),{},{Pollingkey:n.pollingKey}));case 7:if(n=e.sent,1===n.retCode&&2!==n.pollingResult){e.next=10;break}return e.abrupt("return",n);case 10:return e.next=12,I.sleep(n.pollingRate);case 12:if(3===n.pollingResult){e.next=2;break}case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](1),e.t0;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();function Me(e){return Be.apply(this,arguments)}function Be(){return Be=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Q9)({UserName:t,Channel:"WX",PollingKey:null===n||void 0===n?void 0:n.pollingKey,QueryType:2});case 2:if(r=e.sent,1!==r.retCode||3!==r.result){e.next=5;break}return e.abrupt("return",(0,c.Z)((0,c.Z)({},r),{},{pollingFlag:!0,requestRate:r.rate}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,he(n,5,15);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function Ue(e){return $e.apply(this,arguments)}function $e(){return $e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(n){var r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,v.MI)({UserName:t,Channel:"WX",PollingKey:null===n||void 0===n?void 0:n.pollingKey});case 2:if(r=e.sent,1!==r.retCode||3!==r.result){e.next=5;break}return e.abrupt("return",(0,c.Z)((0,c.Z)({},r),{},{pollingFlag:!0,requestRate:r.rate}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,he(n,5,15);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function Ge(){var e=h.__global.env,t="https://m.ctrip.com";return"fat"==e?t="https://m.fws.qa.nt.ctripcorp.com":"uat"==e&&(t="https://m.ctrip.uat.qa.nt.ctripcorp.com"),t}function We(e,t){if(t&&t.length>0)for(var n=0;n<t.length;n++){var r=t[n];if(r.seatName===e)return r}}t["ZP"]=I},6208:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(90129),i=n(90201),a=n(71515),s=n(56884),c=n.n(s),o=n(38717),u=n(74760),l=n(2269),d=function(e){var t=e.seatNames,n=void 0===t?[]:t,r=e.selectedPassengers,i=void 0===r?[]:r,s=e.usePointFlag,c=void 0!==s&&s,o=i.some((function(e){return(null===e||void 0===e?void 0:e.passengerType)===u.SS.STUDENT})),d=i.some((function(e){return(null===e||void 0===e?void 0:e.passengerType)===u.SS.CHILD})),p=n.some((function(e){return null===e||void 0===e?void 0:e.includes("\u5367")})),f=d&&o?"\u5b66\u751f\u7968\u3001\u513f\u7ae5\u7968":o?"\u5b66\u751f\u7968":d?"\u513f\u7ae5\u7968":"",h=function(){return c?(0,l.jsx)(a.View,{class:"page-botm-tips",children:"\u6e29\u99a8\u63d0\u793a\uff1a\u79ef\u5206\u5151\u6362\u7684\u8f66\u7968\u4e0d\u53ef\u9000\u7968"}):p&&f?(0,l.jsxs)(a.View,{class:"page-botm-tips",children:[f,"\u6682\u663e\u793a\u9884\u4f30\u4ef7\u683c\uff0c\u5367\u94fa\u7968\u6682\u6536\u4e0b\u94fa\u4ef7\u683c\uff0c\u8d2d\u7968\u6210\u529f\u540e\u6309\u5b9e\u9645\u8f66\u7968\u4ef7\u683c\u9000\u8fd8\u5dee\u4ef7"]}):p?(0,l.jsx)(a.View,{class:"page-botm-tips",children:"\u5367\u94fa\u968f\u673a\u51fa\u7968\uff0c\u6682\u6536\u4e0b\u94fa\u7968\u4ef7\uff0c\u4ee5\u5b9e\u9645\u51fa\u7968\u9000\u8fd8\u5dee\u4ef7\u3002"}):f?(0,l.jsxs)(a.View,{class:"page-botm-tips",children:[f,"\u6682\u663e\u793a\u9884\u4f30\u4ef7\u683c\uff0c\u5b9e\u9645\u4ee5\u5360\u5ea7\u6210\u529f\u540e\u7968\u4ef7\u4e3a\u51c6"]}):null};return h()},p=d,f=function(){},h=function(e){var t,n=e.from,s=void 0===n?"":n,u=e.vendorID,d=e.priceInfo,h=e.selectedPackage,g=e.defaultPackage,m=e.isTransit,v=e.trainTransferInfos,x=e.selectedPassengers,y=void 0===x?[]:x,b=e.seatNames,w=void 0===b?[]:b,T=e.normalPackage,k=e.packageList,j=void 0===k?[]:k,N=e.selectedCoupon,P=void 0===N?{}:N,S=e.curSelCarrInfo,C=void 0===S?{}:S,I=e.curSelSeatPosInfo,Z=void 0===I?{}:I,V=e.returnChangeInsSelectInfo,L=void 0===V?{}:V,D=e.trainSuccessRangeList,_=void 0===D?[]:D,A=e.userPackageInfo,E=void 0===A?{}:A,O=e.useFreePackage,R=void 0!==O&&O,F=e.choosenEquity,M=void 0===F?{}:F,B=e.grabWithVip,U=void 0!==B&&B,$=e.specialGrab,G=void 0!==$&&$,W=e.specialGrabInfo,Y=void 0===W?{}:W,q=e.jLSuccessRateText,z=void 0===q?"\u4f4e":q,H=e.defaultPkgRateText,K=void 0===H?"\u9ad8":H,J=e.isReassuringGrabSelected,Q=void 0!==J&&J,X=e.reassuringGrabInfo,ee=void 0===X?{}:X,te=e.grabSelectSeatServiceList,ne=void 0===te?[]:te,re=e.selectedInsInfo,ie=void 0===re?{}:re,ae=e.omniGrabInfo,se=e.usePointFlag,ce=void 0!==se&&se,oe=e.onClickDefaultBooking,ue=void 0===oe?f:oe,le=e.onClickNormalBooking,de=void 0===le?f:le,pe=(0,i.useState)(!1),fe=(0,r.Z)(pe,2),he=fe[0],ge=fe[1],me=d||{},ve=me.trainPrice,xe=void 0===ve?0:ve,ye=me.adultList,be=void 0===ye?[]:ye,we=me.stuPrice,Te=void 0===we?0:we,ke=me.stuList,je=void 0===ke?[]:ke,Ne=me.childPrice,Pe=me.childList,Se=void 0===Pe?[]:Pe,Ce=me.totalPrice,Ie=void 0===Ce?0:Ce,Ze=me.totalPricePas,Ve=void 0===Ze?0:Ze,Le=me.grabTrainPrice,De=function(){if(j.length>1){if(Q)return(0,l.jsxs)(a.Button,{class:"long-btn btn-green",onClick:ue,children:[(0,l.jsxs)(a.View,{className:"strong",children:["\u5f00\u542f",6==M.rightsLevel&&M.isChoosen&&!M.isDisabled||U?"VIP":"","\u5b89\u5fc3\u62a2\u7968"]}),(0,l.jsx)(a.View,{className:"txt",children:"\u4eab\u9ad8\u62a2\u7968\u6210\u529f\u7387"})]});if(M.isChoosen){var e="\u4e2d\u7b49";switch(+M.rightsLevel){case 1:case 2:case 4:break;case 3:e="\u8f83\u4f4e"===z?"\u4e2d\u7b49":z;break;case 5:case 6:e="\u8f83\u9ad8";break}return(0,l.jsxs)(a.Button,{className:6==M.rightsLevel?"btn-gold long-btn":"btn-linorage long-btn",onClick:ue,children:[(0,l.jsxs)(a.View,{className:"strong",children:[G?"\u4e13\u4eba":"",M.rightsLevelRangeName,"\u62a2\u7968"]}),(0,l.jsxs)(a.View,{className:"txt",children:["\u6210\u529f\u7387",G?"\u8f83\u9ad8":e]})]})}return U?(0,l.jsxs)(a.Button,{className:"btn-gold long-btn",onClick:ue,children:[(0,l.jsxs)(a.View,{className:"strong",children:[G?"\u4e13\u4eba":"","VIP\u62a2\u7968"]}),(0,l.jsx)(a.View,{className:"txt",children:G?"\u6210\u529f\u7387\u8f83\u9ad8":"\u9884\u4f30\u6210\u529f\u7387".concat(z)})]}):h.packagePrice?(0,l.jsxs)(a.Button,{className:"btn-linorage long-btn",onClick:ue,children:[(0,l.jsx)(a.View,{className:"strong",children:"".concat(G?"\u4e13\u4eba":"").concat(h.packageTitle,"\uffe5").concat(h.packagePrice).concat(y.length>1?"x"+y.length:"")}),(0,l.jsx)(a.View,{className:"txt",children:G?"\u6210\u529f\u7387\u8f83\u9ad8":"\u9884\u4f30\u6210\u529f\u7387".concat(z)})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.Button,{className:"btn-linblue short-btn",onClick:de,children:[(0,l.jsx)(a.View,{className:"strong",children:G?"\u4e13\u4eba\u62a2\u7968":T.packageTitle}),!G&&(0,l.jsx)(a.View,{className:"txt",children:_.length?"\u9700\u6392\u961f\u7b49\u5019":"\u9884\u4f30\u6210\u529f\u7387".concat(z)})]}),(0,l.jsx)(a.Button,{className:"btn-linorage short-btn",onClick:ue,children:G?(0,l.jsxs)(a.View,{children:[(0,l.jsx)(a.View,{className:"strong",children:"\u4e13\u4eba".concat(g.packageTitle)}),(0,l.jsxs)(a.View,{className:"txt",children:["\u6210\u529f\u7387\u8f83\u9ad8+","\uffe5".concat(g.packagePrice).concat(y.length>1?"x"+y.length:"")]})]}):(0,l.jsxs)(a.View,{children:[(0,l.jsx)(a.View,{className:"strong",children:"".concat(g.packageTitle,"\uffe5").concat(g.packagePrice).concat(y.length>1?"x"+y.length:"")}),(0,l.jsxs)(a.View,{className:"txt",children:["\u9884\u4f30\u6210\u529f\u7387",K]})]})})]})}return null!==ae&&void 0!==ae&&ae.vendorPkg?(0,l.jsx)(l.Fragment,{children:he?(0,l.jsx)(a.Button,{className:"btn-linorage short-btn",onClick:de,children:(0,l.jsx)(a.View,{className:"strong",children:"\u7acb\u5373\u9884\u8ba2"})}):(0,l.jsxs)(a.Button,{className:"btn-linorage long-btn",onClick:de,children:[(0,l.jsx)(a.View,{className:"strong",children:"\u5168\u80fd\u62a2\u7968"}),(0,l.jsx)(a.View,{className:"txt",children:"\u4eab\u8d85\u503c3\u5927\u6743\u76ca"})]})}):(0,l.jsxs)(a.Button,{className:"btn-linblue long-btn",onClick:de,children:[(0,l.jsx)(a.View,{className:"strong",children:"\u666e\u901a\u62a2\u7968"}),(0,l.jsxs)(a.View,{className:"txt",children:["\u6210\u529f\u7387",z]})]})},_e=function(){return u?(0,l.jsx)(a.Button,{className:"short-btn btn-linorage",onClick:de,children:(0,l.jsx)(a.View,{className:"strong",children:ce?"\u53bb\u5151\u6362":"\u7acb\u5373\u9884\u8ba2"})}):j.length>1?h.packagePrice?(0,l.jsxs)(a.Button,{className:"short-btn btn-linorage",onClick:ue,children:[(0,l.jsxs)(a.View,{className:"strong",children:[h.packageTitle,"+\xa5",h.packagePrice]}),(0,l.jsx)(a.View,{className:"txt",children:h.buttonNameDesc})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Button,{className:"short-btn btn-linblue",onClick:de,children:(0,l.jsx)(a.View,{className:"strong",children:h.packageTitle})}),m?(0,l.jsxs)(a.Button,{className:"middle-btn btn-linorage",onClick:ue,children:[(0,l.jsx)(a.View,{className:"strong",children:g.packageTitle}),(0,l.jsxs)(a.View,{className:"txt",children:[g.packagePrice,"\xd72/\u4eba"," ",g.buttonNameDesc]})]}):(0,l.jsxs)(a.Button,{className:"short-btn btn-linorage",onClick:ue,children:[(0,l.jsxs)(a.View,{className:"strong",children:[g.packageTitle,"+\xa5",g.packagePrice]}),(0,l.jsx)(a.View,{className:"txt",children:g.buttonNameDesc})]})]}):1==j.length?(0,l.jsx)(a.Button,{className:"short-btn  btn-linorage",onClick:ue,children:(0,l.jsx)(a.View,{className:"strong",children:0==h.packageID?"\u666e\u901a\u9884\u8ba2":g.packageTitle})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Button,{className:"short-btn btn-linorage",onClick:de,children:(0,l.jsx)(a.View,{className:"strong",children:"\u666e\u901a\u9884\u8ba2"})})})},Ae=function(){return(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u706b\u8f66\u7968"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",xe]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u5f20"]})]})},Ee=function(e){var t=e.psgList,n=void 0===t?[]:t,r=e.psgPrice,i=void 0===r?0:r,s=e.psgType,c=void 0===s?1:s,o=2===c?"\uff08\u513f\u7ae5\u7968\uff09":3===c?"\uff08\u5b66\u751f\u7968\uff09":"";return(0,l.jsx)(l.Fragment,{children:n.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsxs)(a.Text,{class:"label",children:["\u706b\u8f66\u7968",o]}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsx)(a.Text,{class:"item-price",children:"\uffe50"})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",n.length,"\u5f20"]})]}),(0,l.jsxs)(a.View,{class:"item point-ticket-price",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u7968\u4ef7"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",i]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",n.length,"\u5f20"]})]}),(0,l.jsxs)(a.View,{class:"item point-ticket-price",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u79ef\u5206\u5151\u6362"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["-\uffe5",i]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",n.length,"\u5f20"]})]})]}):null})},Oe=function(){return(0,l.jsxs)(a.View,{className:"point-detail-box",children:[(0,l.jsx)(a.View,{className:"point-split-stripe"}),(0,l.jsx)(a.View,{class:"item point-detail-hd",children:(0,l.jsx)(a.View,{class:"cont",children:(0,l.jsx)(a.Text,{class:"label",children:"12306\u6d88\u8d39\u79ef\u5206"})})}),(0,l.jsxs)(a.View,{class:"item point-ticket-price",children:[(0,l.jsx)(a.View,{class:"cont",children:(0,l.jsx)(a.Text,{class:"label",children:"\u5151\u6362\u8f66\u7968"})}),(0,l.jsxs)(a.View,{class:"num",children:["-",100*Ve,"\u5206"]})]})]})},Re=function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ee,{psgList:Se,psgPrice:Ne,psgType:2}),(0,l.jsx)(Ee,{psgList:je,psgPrice:Te,psgType:3}),(0,l.jsx)(Ee,{psgList:be,psgPrice:xe,psgType:1}),(0,l.jsx)(Oe,{})]})},Fe=function(){return m?(0,l.jsx)(l.Fragment,{children:v.map((function(e,t){return(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsxs)(a.Text,{class:"label",children:["\u7b2c",t+1,"\u7a0b\u7968\u4ef7"]}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",e.price]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u5f20"]})]},t)}))}):ce?(0,l.jsx)(Re,{}):Le>0?y.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u7b2c\u4e00\u7a0b\u706b\u8f66\u7968"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",xe]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u5f20"]})]}),(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u7b2c\u4e8c\u7a0b\u706b\u8f66\u7968"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",Le]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u5f20"]})]})]}):null:(0,l.jsxs)(l.Fragment,{children:[be.length>0?(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u706b\u8f66\u7968"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",xe]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",be.length,"\u5f20"]})]}):null,je.length>0?(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u706b\u8f66\u7968\uff08\u5b66\u751f\u7968\uff09"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",Te]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",je.length,"\u5f20"]})]}):null,Se.length>0?(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u706b\u8f66\u7968\uff08\u513f\u7ae5\u7968\uff09"}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",Ne]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",Se.length,"\u5f20"]})]}):null]})},Me=ce?0:Ie||"--",Be=ce&&(Se.length>0||je.length>0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.View,{className:"fixed-botm",children:[(0,l.jsxs)(a.View,{className:"price-box",children:[(0,l.jsx)(a.Text,{className:"about",children:Be?"\u7ea6":""}),(0,l.jsx)(a.View,{className:"price",children:Me})]}),u&&(null===P||void 0===P?void 0:P.couponCode)&&1!==P.couponType&&(0,l.jsxs)(a.View,{className:"coupon-tag",children:["\u5df2\u4f18\u60e0\uffe5",P.deductionAmount]}),he&&(null===ae||void 0===ae?void 0:ae.vendorPkg)&&(0,l.jsxs)(a.View,{className:"coupon-tag new",children:["\u5df2\u4f18\u60e0\uffe5",(ae.vendorPkg.appendPrice-ae.vendorPkg.discountPrice)*y.length]}),(0,l.jsxs)(a.View,{className:"rbox".concat(0===y.length?" hide":""),onClick:function(){!he&&Y.appendTitle&&o.ZP.ubtTrace("c_trn_c_10650069749",{bizKey:"bookButtonClick",clickType:2,speed:U?"VIP":M.isChoosen?M.rightsLevelRangeName:h.level,vendorId:u}),ge(!he)},children:["\u660e\u7ec6",(0,l.jsx)(a.Text,{className:"ifont-arr".concat(he?" open":"")})]}),"grab"===s&&De(),"ordinary"===s&&_e()]}),"ordinary"===s&&(0,l.jsx)(a.View,{class:"botm-tip-wrap",children:(0,l.jsx)(p,{usePointFlag:ce,seatNames:w,selectedPassengers:y})}),(0,l.jsx)(a.View,{class:"pay-backmask ".concat(he?" active":""),onClick:function(){return ge(!1)}}),(0,l.jsxs)(a.View,{class:"pay-detail-wrap".concat(he?" active":""),children:[(0,l.jsxs)(a.View,{className:"pop-botm-hd",children:[(0,l.jsx)(a.Text,{onClick:function(){return ge(!1)},className:"ifont-closed-line"}),(0,l.jsx)(a.View,{className:"tit",children:"\u91d1\u989d\u660e\u7ec6"})]}),(0,l.jsx)(a.View,{class:"pop-botm-bd",children:(0,l.jsxs)(a.View,{class:"detail-item-wrap",children:["grab"===s?Ae():"ordinary"===s?Fe():(0,l.jsx)(l.Fragment,{}),!!h.packagePrice&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:h.packageTitle}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",h.packagePrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}),ie.appendPrice&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsxs)(a.Text,{class:"label",onClick:function(){return ie.appendInfoUrl&&c().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent(ie.appendInfoUrl+"&titleType=2"))})},children:[ie.appendTitle,ie.appendInfoUrl&&(0,l.jsx)(a.Text,{className:"ifont-qus"})]}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",ie.appendPrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}),C.selCarrIdx>=0?(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:C.priceName}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price orange",children:["\uffe5",C.serviceFee]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}):null,Z.selSeatIdx>=0&&Z.num?(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:Z.priceName}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price orange",children:["\uffe5",Z.serviceFee]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",Z.num,"\u4efd"]})]}):null,(null===L||void 0===L?void 0:L.selectedReturnChangeIns)&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:L.appendTitle}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",L.selectedReturnChangeInsRight?0:L.appendPrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}),R&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:"\u514d\u8d39\u52a9\u529b\u5305"}),(0,l.jsx)(a.View,{class:"dashed"})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",(null===E||void 0===E?void 0:E.count)>40*y.length?40*y.length:null===E||void 0===E?void 0:E.count,"\u4efd"]})]}),Q&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:ee.appendTitle}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",ee.appendPrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}),!!ne.length&&ne.map((function(e){return e.isUseReservationFree?null:(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:e.serviceName}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",e.servicePrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",e.passengerCount,"\u4efd"]})]},e.serviceType)})),(null===P||void 0===P?void 0:P.couponCode)&&(0,l.jsx)(a.View,{class:"item",children:1===P.couponType?(0,l.jsxs)(a.View,{class:"label",children:[P.couponDisplayName,"(\u51fa\u884c\u540e\u8fd4\u73b0\u5230\u94b1\u5305)"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:P.couponDisplayName}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price orange",children:["-\uffe5",P.deductionAmount]})]}),(0,l.jsx)(a.View,{class:"num hide"})]})}),G&&Y.appendTitle&&(0,l.jsxs)(a.View,{class:"item",children:[(0,l.jsxs)(a.View,{class:"cont",children:[(0,l.jsx)(a.Text,{class:"label",children:Y.appendTitle}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",Y.appendPrice]})]}),(0,l.jsxs)(a.View,{class:"num",children:["\xd7",y.length,"\u4efd"]})]}),ae&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.View,{className:"item",children:[(0,l.jsxs)(a.View,{className:"cont",children:[(0,l.jsx)(a.Text,{className:"label",children:ae.vendorPkg.appendTitle}),(0,l.jsx)(a.View,{class:"dashed"}),(0,l.jsxs)(a.Text,{class:"item-price",children:["\uffe5",ae.vendorPkg.appendPrice]})]}),(0,l.jsxs)(a.View,{className:"num",children:["x",y.length,"\u4efd"]})]}),null===ae||void 0===ae||null===(t=ae.detailList)||void 0===t?void 0:t.map((function(e){return(0,l.jsxs)(a.View,{className:"item",children:[(0,l.jsxs)(a.View,{className:"cont",children:[!!e.icon&&(0,l.jsx)(a.Text,{className:"tag",children:e.icon}),(0,l.jsx)(a.Text,{className:"label",children:e.name}),(0,l.jsx)(a.View,{className:"dashed"}),(0,l.jsxs)(a.Text,{className:["item-price",e.price<0&&"orange"],children:["\uffe5",e.price<0?e.price*y.length:e.price]})]}),(0,l.jsx)(a.View,{className:"num",children:e.price>=0?"x".concat(y.length,"\u4efd"):""})]},e.name)}))]})]})})]})]})},g=h},43972:function(e,t,n){"use strict";var r=n(22276),i=n(79301),a=n(90129),s=n(95308),c=n(90201),o=n(71515),u=n(56884),l=n.n(u),d=n(35997),p=n(81719),f=n.n(p),h=n(74760),g=n(38717),m=n(2269),v=f().dayjs,x=function(){},y=function(e){var t=e.outerVisible,n=void 0!==t&&t,u=(e.login12306Name,e.goTo12306Login,e.selectedCoupon),p=void 0===u?{}:u,f=e.selectedPassengers,y=void 0===f?[]:f,b=e.selectedPackage,w=void 0===b?{}:b,T=e.ticketPrice,k=void 0===T?0:T,j=e.from,N=void 0===j?"":j,P=e.onSelectedCouponChange,S=void 0===P?x:P,C=e.loginFlag,I=void 0!==C&&C,Z=e.vendorID,V=e.packageVendorID,L=e.departStation,D=e.arriveStation;function _(){return A.apply(this,arguments)}function A(){return A=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,r,a,s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=y.map((function(e){var t;return{passengerName:e.pasName,passengerType:e.passengerType,passportNo:null===(t=e.idcard)||void 0===t?void 0:t.noMaskData}})),n=k*y.length,r={productLineID:13,channelName:"WX",orderType:"grab"===N?"JL":"E",orderPrice:n,passengerList:t,departStation:L,arriveStation:D,packageID:(null===w||void 0===w?void 0:w.packageID)||0},e.t0=g.Zs,e.next=7,(0,d.Mc)(r);case 7:if(e.t1=e.sent,a=(0,e.t0)(e.t1),a.couponList){e.next=11;break}return e.abrupt("return",[]);case 11:return s=a.couponList.map((function(e){var t,n;return e.couponStartDateStr=v(null===(t=e.couponStartDate)||void 0===t?void 0:t.replace(/\-/g,"/")).format("YYYY-MM-DD"),e.couponEndDateStr=v(null===(n=e.couponEndDate)||void 0===n?void 0:n.replace(/\-/g,"/")).format("YYYY-MM-DD"),e})),e.abrupt("return",s);case 15:return e.prev=15,e.t2=e["catch"](0),console.log("\u83b7\u53d6\u4f18\u60e0\u5238\u5931\u8d25",e.t2),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),A.apply(this,arguments)}function E(){var e=+(null===w||void 0===w?void 0:w.packagePrice)*y.length||0,t=k*y.length,n=e+t;if("ordinary"===N){if(Z){var r=M.map((function(e){if(e.couponType===h.rH.REDUCTION||e.couponType===h.rH.CASHBACK){var t=e.deductionAmount,r=void 0===t?0:t;e.disabled=!e.ifAvailable||r>n}return e}));return V===h.h6.CTRIP?r.map((function(t){if(t.couponType===h.rH.PACKAGE){var n=t.deductionAmount,r=void 0===n?0:n;t.disabled=r>e}return t})):V===h.h6.NORMAL?r.map((function(e){return e.couponType===h.rH.PACKAGE&&(e.disabled=!0),e})):r}return M.map((function(e){var t=e.deductionAmount,r=void 0===t?0:t;return e.disabled=r>n,e}))}var i=M.map((function(t){var r=t.deductionAmount,i=void 0===r?0:r;return 2===t.couponType?t.disabled=i>=e:t.disabled=i>n,t}));return i}function O(){g.ZP.ubtTrace("TCWGrabFill_couponModule_click",{});var e=l().getCurrentPage();e.navigateTo({url:"/pages/trainBooking/coupon/index",data:{couponList:G,selectCoupon:p,isSelectArgent:!1},callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e),S(e.selectCoupon)}})}var R=(0,c.useState)([]),F=(0,a.Z)(R,2),M=F[0],B=F[1],U=(0,c.useState)([]),$=(0,a.Z)(U,2),G=$[0],W=$[1],Y=(0,c.useState)(""),q=(0,a.Z)(Y,2),z=q[0],H=q[1];return(0,c.useEffect)((function(){(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!I){e.next=5;break}return e.next=3,_();case 3:t=e.sent,B(t);case 5:case"end":return e.stop()}}),e)})))()}),[I,w,y,k,L,D]),(0,c.useEffect)((function(){var e=E(M),t=e.filter((function(e){return!e.disabled})),n=t.length?"\u60a8\u6709".concat(t.length,"\u5f20\u4f18\u60e0\u5238\u53ef\u7528"):"\u6ca1\u6709\u53ef\u7528\u4f18\u60e0\u5238";W(e),H(n);var i=(0,r.Z)(t).sort((function(e,t){return t.deductionAmount-e.deductionAmount})),a=i[0]||null;S(a)}),[M]),(0,m.jsx)(m.Fragment,{children:n&&(0,m.jsxs)(m.Fragment,{children:[g.ZP.ubtTrace("TCWGrabFill_couponModule_exposure",{PageId:"10650069749"}),(0,m.jsx)(o.View,{class:"book-white add-box fadeIn",children:(0,m.jsxs)(o.View,{class:"item",onClick:function(){O()},children:[(0,m.jsx)(o.View,{class:"label short",children:"\u4f18\u60e0\u5238"}),null!==p&&void 0!==p&&p.couponDisplayName?(0,m.jsxs)(o.View,{class:"cont",children:[(0,m.jsxs)("text",{class:"orange",children:["\u8fd4\xa5",p.deductionAmount]}),(0,m.jsx)("text",{class:"txt",children:p.couponDisplayName}),(0,m.jsx)("text",{class:"tip orange",children:"(\u6700\u5927\u4f18\u60e0\u63a8\u8350)"})]}):(0,m.jsx)(o.View,{class:"cont tgrey",children:z}),(0,m.jsx)(o.View,{class:"coupon-detail"})]})})]})})};t["Z"]=y},19008:function(e,t,n){"use strict";var r=n(79301),i=n(95308),a=n(90129),s=n(90201),c=n(71515),o=n(56884),u=n.n(o),l=n(35997),d=n(38717),p=n(3979),f=n(72201),h=n(2269);function g(){}var m=(0,l.Z8)("train_wx_isopen12306login_v2"),v="frontPassengerLogin",x="frontPassengerClick",y=function(e){var t=e.isOrdinary,n=void 0!==t&&t,o=e.isCanHB,l=void 0!==o&&o,y=e.allPas,b=e.hbStatus,w=void 0===b?"":b,T=e.login12306Name,k=void 0===T?"":T,j=e.display12306Name,N=void 0===j?"":j,P=(e.login12306Pas,e.login12306Ref),S=void 0===P?{}:P,C=e.isNewGuest,I=void 0!==C&&C,Z=e.pkg,V=void 0===Z?{}:Z,L=e.onLogin12306Pkg,D=void 0===L?g:L,_=e.onLogin12306Cancel,A=void 0===_?g:_,E=e.onLogin12306Success,O=void 0===E?g:E,R=e.onPassengerLoginFinish,F=void 0===R?g:R,M=e.onPassengerClickFinish,B=void 0===M?g:M,U=p.Z.ordinaryBooking;n||(U=p.Z.grabBooking);var $=(0,s.useState)(!1),G=(0,a.Z)($,2),W=G[0],Y=G[1],q=(0,s.useState)(!1),z=(0,a.Z)(q,2),H=z[0],K=z[1],J=(0,s.useState)(0),Q=(0,a.Z)(J,2),X=Q[0],ee=Q[1],te=(0,s.useState)(""),ne=(0,a.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,s.useState)(""),se=(0,a.Z)(ae,2),ce=se[0],oe=se[1],ue=u().getCurrentPage();(0,s.useEffect)((function(){de(),le()}),[y]),(0,s.useImperativeHandle)(S,(function(){return{goToLogin:fe,frontRiskPassengerLogin:he,frontRiskPassengerClick:ge}}));var le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,f.g)(y);case 2:t=e.sent,ie(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:t=e.sent,Y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){ue.navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent("https://m.ctrip.com/webapp/train/activity/static/ctrip/ctrip-common-config-page.html?configId=XEIsK9Q_4O&autoawaken=close&popup=close&from=banner"))})};function fe(e){"10"!==w&&d.ZP.ubtTrace("c_trn_c_10650026053",{bizKey:"alternateChannelClick",subType:k?2:1}),ee(e),K(!0)}function he(){oe(v)}function ge(){oe(x)}var me=function(){A(),K(!1)},ve=function(){D(),K(!1)},xe=function(e){K(!1),O({displayName:e.displayName,userName:e.login12306Name,loginPW:e.login12306Pas,activateSuccess:e.activateSuccess})},ye=function(e){ce==v?F():ce==x&&B(),e&&O({displayName:e.userName,userName:e.userID12306,loginPW:e.loginPW,activateSuccess:!1})};if(!W)return(0,h.jsx)(h.Fragment,{});var be=function(){return k?n?(0,h.jsxs)(c.View,{className:"top-login",onClick:fe,children:[(0,h.jsxs)(c.View,{className:"cont",children:[(0,h.jsx)(c.View,{className:"tit",children:"\u5df2\u767b\u5f5512306\u8d26\u53f7"}),(0,h.jsx)(c.View,{className:"lst",children:(0,h.jsx)(c.View,{className:"item",children:N})})]}),(0,h.jsxs)(c.View,{className:"rbox",children:[(0,h.jsx)(c.Text,{className:"tstrong",children:"\u5207\u6362\u8d26\u53f7"}),(0,h.jsx)(c.Text,{className:"ifont-arr"})]})]}):(0,h.jsxs)(c.View,{class:"book-white login-12306",onClick:fe,children:[(0,h.jsx)(c.View,{class:"name",children:N||k}),(0,h.jsx)(c.View,{class:"rbox",children:"\u5207\u636212306\u8d26\u53f7"})]}):n?(0,h.jsxs)(c.View,{className:"top-login",onClick:fe,children:[(0,h.jsxs)(c.View,{className:"cont",children:[(0,h.jsx)(c.View,{className:"tit",children:"\u767b\u5f5512306\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1"}),(0,h.jsxs)(c.View,{className:"lst",children:[(0,h.jsxs)(c.View,{className:"item",children:[(0,h.jsx)(c.Text,{className:"ifont-gengkuai"}),"\u51fa\u7968\u66f4\u5feb"]}),(0,h.jsxs)(c.View,{className:"item",children:[(0,h.jsx)(c.Text,{className:"ifont-jifen"}),"\u79ef\u5206\u5151\u6362\u706b\u8f66\u7968"]})]})]}),(0,h.jsxs)(c.View,{className:"rbox tblue",children:[(0,h.jsx)(c.Text,{className:"tstrong",children:"\u53bb\u767b\u5f55"}),(0,h.jsx)(c.Text,{className:"ifont-arr"})]})]}):(0,h.jsxs)(c.View,{class:"book-white login-12306",onClick:fe,children:[(0,h.jsx)(c.View,{class:"name",children:"\u767b\u5f5512306\u8d26\u53f7"}),(0,h.jsx)(c.View,{class:"rbox",children:"\u53bb\u767b\u5f55"})]})};return(0,h.jsxs)(h.Fragment,{children:[l?"10"!==w?(0,h.jsxs)(c.View,{class:"book-white std-box",children:[(0,h.jsx)(c.Image,{src:"//pic.c-ctrip.com/train/wechat/icon-shuangtongdao-new.png"}),(0,h.jsxs)(c.View,{class:"cont",children:[(0,h.jsxs)(c.View,{class:"tit",children:["\u53cc\u901a\u9053\u62a2\u7968",(0,h.jsx)(c.Text,{class:"tag-orage",children:"\u6210\u529f\u7387\u66f4\u9ad8"}),(0,h.jsx)(c.Text,{class:"ifont-detail",onClick:pe})]}),(0,h.jsx)(c.View,{class:"txt",children:"\u767b\u5f55/\u6ce8\u518c12306\u8d26\u53f7\uff0c\u5373\u53ef\u514d\u8d39\u5f00\u901a"})]}),(0,h.jsxs)(c.Button,{class:"btn-open btn-hb",onClick:function(){return fe(3)},children:["\u53bb\u5f00\u542f",(0,h.jsx)(c.View,{class:"tag",children:"\u90013\u4e2a\u52a9\u529b\u5305"})]}),d.ZP.ubtTrace("s_trn_c_trace_10650026053",{exposureType:"normal",bizKey:"alternateChannel",type:0,subType:k?2:1})]}):(0,h.jsxs)(c.View,{class:"book-white std-box",children:[(0,h.jsx)(c.Image,{src:"//pic.c-ctrip.com/train/wechat/icon-shuangtongdao-new.png"}),(0,h.jsxs)(c.View,{class:"cont",children:[(0,h.jsxs)(c.View,{class:"tit",children:["\u53cc\u901a\u9053\u62a2\u7968",(0,h.jsx)(c.Text,{class:"tag-green",children:"\u6210\u529f\u7387\u5df2\u63d0\u5347"}),(0,h.jsx)(c.Text,{class:"ifont-detail",onClick:pe})]}),k&&(0,h.jsxs)(c.View,{class:"txt","data-ubt-key":"c_toggle_12306_account",onClick:fe,children:["\u60a8\u768412306\u8d26\u53f7",(0,h.jsx)(c.Text,{class:"els",children:N||k}),(0,h.jsx)(c.Text,{class:"ifont-arr iconfont"})]})]}),(0,h.jsxs)(c.Button,{class:"btn-suc",children:[(0,h.jsx)(c.Text,{class:"ifont-on",onClick:pe}),"\u5df2\u5f00\u542f"]}),d.ZP.ubtTrace("s_trn_c_trace_10650026053",{exposureType:"normal",bizKey:"alternateChannel",type:1})]}):be(),(0,h.jsx)(f.Z,{pageId:U,visible:H,loginName:re,action:ce,push:X,pkg:V,isNewGuest:I,isOrdinary:n,close:me,done:xe,finish:ye,freeDone:ve})]})};t["Z"]=y},72201:function(e,t,n){"use strict";n.d(t,{Z:function(){return U},g:function(){return $}});var r=n(22276),i=n(79301),a=n(95308),s=n(298),c=n(90129),o=n(90201),u=n(56884),l=n.n(u),d=n(71515),p=n(35997),f=n(38717),h=n(71280),g=n(68277),m=n(2269),v=["displayValue"],x=function(e){var t=e.displayValue,n=(0,g.Z)(e,v),r=(0,o.useState)(!1),i=(0,c.Z)(r,2),a=i[0],u=i[1],l=(0,o.useState)(""),p=(0,c.Z)(l,2),f=p[0],h=p[1],x=function(e){var t;u(!0),null===(t=n.onFocus)||void 0===t||t.call(n,e)},y=function(e){var t;u(!1),null===(t=n.onBlur)||void 0===t||t.call(n,e)},b=function(){var e;u(!0),null===(e=n.onFocus)||void 0===e||e.call(n)};return(0,o.useEffect)((function(){var e,r=n.password||"password"==n.type;h(r?(null===(e=n.value)||void 0===e?void 0:e.replace(/./g,"\u2022"))||"":t||n.value)}),[t,n.password,n.type,n.value]),(0,m.jsx)(m.Fragment,{children:a?(0,m.jsx)(d.Input,(0,s.Z)((0,s.Z)({},n),{},{focus:a,cursor:n.value.length,adjustPosition:!0,onFocus:x,onBlur:y})):(0,m.jsx)(d.View,{className:n.value?n.className:n.className+" "+n.placeholderClass,onClick:b,children:n.value?f:n.placeholder})})},y=x,b=n(48782),w=function(e){var t=e.visible,n=e.mobilePhone,r=e.smsVerify,i=e.close;return(0,m.jsx)(b.Z,{visible:t,direction:"middle",clickMaskClose:!0,close:i,children:(0,m.jsxs)(d.View,{className:"scan-pop",children:[(0,m.jsx)(d.Text,{className:"icon-face-scan"}),(0,m.jsx)(d.View,{className:"tit",children:"\u5efa\u8bae\u5b8c\u6210\u77ed\u4fe1\u6838\u9a8c"}),(0,m.jsx)(d.View,{className:"sub",children:"\u4e3a\u4fdd\u8bc1\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u5efa\u8bae\u60a8\u5b8c\u6210\u77ed\u4fe1\u6838\u9a8c\u4e4b\u540e\u518d\u6dfb\u52a0\u4e58\u5ba2"}),(0,m.jsxs)(d.View,{className:"grey-tips",children:["\u8bf7\u786e\u8ba4\u60a8\u662f",n?":".concat(n):"","\u673a\u4e3b"]}),(0,m.jsx)(d.View,{className:"btn-box",children:(0,m.jsx)(d.Button,{className:"btn-blue",onClick:r,children:"\u5f00\u59cb\u6838\u9a8c"})}),(0,m.jsx)(d.Text,{className:"ifont-closed",onClick:i})]})})},T=w,k={title:"\u9700\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c",subTitle:"\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u8bf7\u60a8\u8fdb\u884c\u4eba\u8bc1\u6838\u9a8c",tips:function(e){return"\u8bf7\u786e\u8ba4\u60a8\u662f\u8d26\u53f7\u672c\u4eba".concat(e?":".concat(e):"")}},j={title:"\u5efa\u8bae\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c",subTitle:"\u4e3a\u4fdd\u8bc1\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u5efa\u8bae\u60a8\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c\u4e4b\u540e\u518d\u6dfb\u52a0\u4e58\u5ba2",tips:function(e){return"\u8bf7\u786e\u8ba4\u60a8\u662f\u8d26\u53f7\u672c\u4eba".concat(e?":".concat(e):"")}},N=function(e){var t,n=e.visible,r=e.action,i=e.realName,a=e.jumpCheckPage,s=e.jumpServicePage,u=e.faceVerify,l=e.close,p=(0,o.useState)(!1),h=(0,c.Z)(p,2),g=h[0],v=h[1];t="frontAutoLogin"==r?j:k;var x=function(){v(!g)},y=function(){if(!g)return f.ZP.showToast("\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae","none");l(),u()};return(0,o.useEffect)((function(){v(!1)}),[n]),(0,m.jsx)(b.Z,{visible:n,direction:"middle",clickMaskClose:!0,close:l,children:(0,m.jsxs)(d.View,{className:"scan-pop",children:[(0,m.jsx)(d.Text,{className:"icon-face-scan"}),(0,m.jsx)(d.View,{className:"tit",children:t.title}),(0,m.jsx)(d.View,{className:"sub",children:t.subTitle}),(0,m.jsx)(d.View,{className:"grey-tips",children:t.tips(i)}),(0,m.jsx)(d.View,{className:"btn-box",children:(0,m.jsx)(d.Button,{className:"btn-blue",onClick:y,children:"\u540c\u610f\u534f\u8bae\u5e76\u5f00\u59cb\u6838\u9a8c"})}),(0,m.jsxs)(d.View,{className:"info",children:[(0,m.jsxs)(d.View,{className:"desc",children:[(0,m.jsx)(d.Text,{className:g?"ifont-checked blue":"ifont-checkbox",onClick:x}),"\u5df2\u9605\u8bfb\u540c\u610f\xa0",(0,m.jsx)(d.Text,{className:"blue",onClick:s,children:"\u670d\u52a1\u534f\u8bae"}),"\xa0",(0,m.jsx)(d.Text,{className:"blue",onClick:a,children:"\u8ba4\u8bc1\u534f\u8bae"})]}),!g&&(0,m.jsx)(d.View,{className:"tip",children:"\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae"})]}),(0,m.jsx)(d.Text,{className:"ifont-closed",onClick:l})]})})},P=N,S={title:"\u9700\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c",subTitle:"\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u8bf7\u60a8\u8fdb\u884c\u4eba\u8bc1\u6838\u9a8c",tips:function(e){return"\u8bf7\u786e\u8ba4\u60a8\u662f\u8d26\u53f7\u672c\u4eba".concat(e?":".concat(e):"")}},C={title:"\u5efa\u8bae\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c",subTitle:"\u4e3a\u4fdd\u8bc1\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u5efa\u8bae\u60a8\u5b8c\u6210\u4eba\u8bc1\u6838\u9a8c\u4e4b\u540e\u518d\u6dfb\u52a0\u4e58\u5ba2",tips:function(e){return"\u8bf7\u786e\u8ba4\u60a8\u662f\u8d26\u53f7\u672c\u4eba".concat(e?":".concat(e):"")}},I=function(e){var t,n=e.visible,r=e.action,i=e.realName,a=e.jumpCheckPage,s=e.jumpServicePage,u=e.faceVerify,l=e.smsVerify,p=e.close,h=(0,o.useState)(!1),g=(0,c.Z)(h,2),v=g[0],x=g[1];t="frontAutoLogin"==r?C:S;var y=function(){x(!v)},w=function(){if(!v)return f.ZP.showToast("\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae","none");p(),u()},T=function(){if(!v)return f.ZP.showToast("\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae","none");p(),l({mobileCheck:0})};return(0,o.useEffect)((function(){x(!1)}),[n]),(0,m.jsx)(b.Z,{visible:n,direction:"middle",clickMaskClose:!0,close:p,children:(0,m.jsxs)(d.View,{className:"more-scan-pop",children:[(0,m.jsx)(d.Text,{className:"icon-face-scan"}),(0,m.jsx)(d.View,{className:"tit",children:t.title}),(0,m.jsx)(d.View,{className:"sub",children:t.subTitle}),(0,m.jsx)(d.View,{className:"grey-tips",children:t.tips(i)}),(0,m.jsx)(d.View,{className:"btn-box",children:(0,m.jsx)(d.Button,{className:"btn-blue",onClick:w,children:"\u540c\u610f\u534f\u8bae\u5e76\u5237\u8138\u6838\u9a8c"})}),(0,m.jsx)(d.View,{className:"btn-box btn-sms",children:(0,m.jsx)(d.Button,{className:"btn-line",onClick:T,children:"\u77ed\u4fe1\u6838\u9a8c"})}),(0,m.jsxs)(d.View,{className:"info",children:[(0,m.jsxs)(d.View,{className:"desc",children:[(0,m.jsx)(d.Text,{className:v?"ifont-checked blue":"ifont-checkbox",onClick:y}),"\u5df2\u9605\u8bfb\u540c\u610f\xa0",(0,m.jsx)(d.Text,{className:"blue",onClick:s,children:"\u670d\u52a1\u534f\u8bae"}),"\xa0",(0,m.jsx)(d.Text,{className:"blue",onClick:a,children:"\u8ba4\u8bc1\u534f\u8bae"})]}),!v&&(0,m.jsx)(d.View,{className:"tip",children:"\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae"})]}),(0,m.jsx)(d.Text,{className:"ifont-closed",onClick:p})]})})},Z=I,V=u.__global.env,L="https://m.ctrip.com";"fat"==V?L="https://m.fws.qa.nt.ctripcorp.com":"uat"==V&&(L="https://m.ctrip.uat.qa.nt.ctripcorp.com");var D="bind12306",_="12306Accounts",A={title:"\u8bf7\u767b\u5f55\u60a8\u768412306\u8d26\u53f7",subTitle:"\u94c1\u8def\u5c40\u89c4\u5b9a\uff0c\u8d2d\u7968\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1",phonePlaceHolder:"12306\u7528\u6237\u540d/\u90ae\u7bb1/\u624b\u673a\u53f7",pwdPlaceHolder:"\u8bf7\u8f93\u516512306\u8d26\u53f7\u5bc6\u7801"},E={mobile:"",userName:"",loginPW:"",displayName:"",defaultUserName:""},O="frontPassengerLogin",R="frontPassengerClick",F=function(e){var t=new Map([[7,91],[8,94],[9,96]]);return t.get(e)},M=function(){},B=function(e){var t=e.pageId,n=e.loginName,u=void 0===n?"":n,p=e.visible,g=e.isOrdinary,v=e.push,x=e.pkg,w=void 0===x?{}:x,k=e.action,j=void 0===k?"":k,N=e.isNewGuest,S=void 0!==N&&N,C=e.done,I=void 0===C?M:C,V=e.close,B=void 0===V?M:V,U=e.finish,$=void 0===U?M:U,G=e.freeDone,W=void 0===G?M:G,Y=(0,o.useState)(E),q=(0,c.Z)(Y,2),z=q[0],H=q[1],K=(0,o.useState)({}),J=(0,c.Z)(K,2),Q=J[0],X=J[1],ee=(0,o.useState)(!1),te=(0,c.Z)(ee,2),ne=te[0],re=te[1],ie=(0,o.useState)(!1),ae=(0,c.Z)(ie,2),se=ae[0],ce=ae[1],oe=(0,o.useState)(!1),ue=(0,c.Z)(oe,2),le=ue[0],de=ue[1],pe=(0,o.useState)(!1),fe=(0,c.Z)(pe,2),he=fe[0],ge=fe[1],me=(0,o.useState)(!1),ve=(0,c.Z)(me,2),xe=ve[0],ye=ve[1],be=(0,o.useState)(!1),we=(0,c.Z)(be,2),Te=we[0],ke=we[1],je=(0,o.useState)(!1),Ne=(0,c.Z)(je,2),Pe=Ne[0],Se=Ne[1],Ce=(0,o.useState)(!0),Ie=(0,c.Z)(Ce,2),Ze=Ie[0],Ve=Ie[1],Le=(0,o.useState)(0),De=(0,c.Z)(Le,2),_e=De[0],Ae=De[1],Ee=(0,o.useState)({}),Oe=(0,c.Z)(Ee,2),Re=Oe[0],Fe=Oe[1],Me=(0,o.useRef)(null),Be=(0,o.useRef)(null),Ue=(0,o.useRef)(null),$e=l().getCurrentPage(),Ge=function(){var e=h.WG.getAttr(_)||[],t=h.WG.getAttr(D)||{};if(!Q.userNameInputFlag&&p&&e.length)if(z.userName){if(!z.loginPW){var n=f.ZP.convetFakePhone(u),r=e.find((function(e){return e.displayName==n||e.displayName==z.displayName||e.displayName==z.userName})),i=r.displayName,a=r.userName,s=r.loginPW;H({userName:a||u,defaultUserName:a,displayName:i,loginPW:s})}}else{var c=e.find((function(e){return e.displayName==t.displayName}))||e[0],o=c.displayName,l=c.userName,d=c.loginPW;H({userName:l||u,defaultUserName:l||u,displayName:o||u,loginPW:d})}else We()},We=function(){re(!1),ge(!1),ce(!1),de(!1),ke(!1),Se(!1)},Ye=function(){var e=z.userName;return!!e||(f.ZP.showToast("\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a\uff01","none"),!1)},qe=function(e){var t=e.detail.value;Ve(!0),H((0,s.Z)((0,s.Z)({},z),{},{userName:t,displayName:t})),X((0,s.Z)((0,s.Z)({},Q),{},{userNameInputFlag:!0}))},ze=function(e){var t=e.detail.value;Ve(!0),H((0,s.Z)((0,s.Z)({},z),{},{loginPW:t})),X((0,s.Z)((0,s.Z)({},Q),{},{loginPWInputFlag:!0}))},He=function(){H((0,s.Z)((0,s.Z)({},z),{},{userName:""}))},Ke=function(){re(!ne)},Je=function(){var e=z.userName,t=z.defaultUserName,n=Q.userNameInputFlag?e:t||e,r="".concat(L,"/webapp/train/activity/ctrip-train-12306/#/retrieve?userName=").concat(n,"&from=loginSheet");$e.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:r,needLogin:!0,bridgeIns:rt}})},Qe=function(){$e.navigateTo({url:"/pages/train/webview/webview",data:{url:"https://m.ctrip.com/webapp/train/activity/orderservice/InsuranceDetail.aspx?ProductID=1111&&disable_redirect_https=1&terminal=1"}})},Xe=function(){$e.navigateTo({url:"/pages/train/webview/webview",data:{url:"https://m.ctrip.com/webapp/train/activity/orderservice/InsuranceDetail.aspx?ProductID=2021&disable_redirect_https=1&terminal=1"}})},et=function(){Je(),f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:"loginSecondStepClick",clickType:4})},tt=function(){de(!le)},nt=function(){ce(!se)},rt=function(e){var t=e.detail.data;return gt(t[0])},it=function(e){var t=e.detail.data;return gt(t[0])},at=function(){var e=Ye();return he?(f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:"loginSecondStepClick",clickType:1}),z.loginPW?se?void gt():f.ZP.showToast("\u8bf7\u5148\u540c\u610f\u8d26\u53f7\u6388\u6743\u534f\u8bae","none"):f.ZP.showToast("\u8bf7\u5148\u8f93\u516512306\u5bc6\u7801","none")):(f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:"loginFirstStepClick",clickType:1}),f.ZP.ubtTrace("TCWBuyFill_LoginFloat_Button_click",{PageId:t,clickType:"1"}),e&&ge(!0))},st=function(){$e.navigateTo({url:"/pages/train/webview/webview",data:{url:"https://m.ctrip.com/webapp/train/activity/orderservice/InsuranceDetail.aspx?ProductID=1111&&disable_redirect_https=1&terminal=1"}})},ct=function(){f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:he?"loginSecondStepClick":"loginFirstStepClick",clickType:3}),f.ZP.ubtTrace("TCWBuyFill_LoginFloat_Button_click",{PageId:t,clickType:"2"});var e="".concat(L,"/webapp/train/activity/ctrip-train-12306/#/register?from=loginSheet");$e.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:e,needLogin:!0,bridgeIns:it}})},ot=function(){return ye(!0)},ut=function(){return ke(!0)},lt=function(){return Se(!0)},dt=function(){ye(!1),ke(!1),Se(!1),$(),j==R&&f.ZP.ubtTrace("c_trn_c_".concat(t),{exposureType:"popup",bizKey:"verificationPopupClick",errorCode:F(_e),clickType:3,result:2})},pt=function(){var e=z.userName,n=z.loginPW,r=z.defaultUserName,s=Q.userNameInputFlag?e:r,c="/pages/train/face/face?fromType=4&userName=".concat(s,"&loginPW=").concat(n);if(j==R){var o=h.WG.getAttr(_);c="/pages/train/face/face?fromType=4&userName=".concat(o[0].displayName,"&loginPW=").concat(o[0].loginPW)}ke(!1),Se(!1),$e.navigateTo({url:c,callback:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){if(!n.certificationResultCode||1!=n.certificationResultCode)return j==R&&($(),f.ZP.ubtTrace("c_trn_c_".concat(t),{exposureType:"popup",bizKey:"verificationPopupClick",errorCode:F(_e),clickType:1,result:2})),f.ZP.showModal({m:"\u6838\u9a8c\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"});j==R?(mt(),f.ZP.ubtTrace("c_trn_c_".concat(t),{exposureType:"popup",bizKey:"verificationPopupClick",errorCode:F(_e),clickType:1,result:1})):gt()}),500);case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})},ft=function(e){var t=e.account,n=e.accounts,i=e.realUserName,a=e.displayName,s=e.loginPW;return new Promise((function(e){f.ZP.showModal({m:t?"\u5bc6\u7801\u5df2\u4fee\u6539\uff0c\u4e0b\u6b21\u4e00\u952e\u767b\u5f55\u514d\u8f93\u5165\uff0c\u8981\u66f4\u65b0\u8bb0\u4f4f\u5bc6\u7801\u5417":"\u4e3a\u4e86\u60a8\u7684\u65b9\u4fbf\u8bb0\u4f4f12306\u8d26\u53f7\u5bc6\u7801\uff0c\u4e0b\u6b21\u4e00\u952e\u767b\u5f55\u514d\u8f93\u5165",showCancel:!0,cancelText:"\u6b8b\u5fcd\u62d2\u7edd",cancelColor:"#0086F6",confirmColor:"#0086F6",confirmText:t?"\u66f4\u65b0\u5bc6\u7801":"\u8bb0\u4f4f\u5bc6\u7801",done:function(c){var o=c.confirm;if(o){var u=t?n.filter((function(e){return e.userName!==t.userName})):n;h.WG.setAttr(_,[{userName:i,displayName:a,loginPW:s}].concat((0,r.Z)(u.slice(0,9))))}f.ZP.showToast("\u767b\u5f55\u6210\u529f"),e()}})}))},ht=function(){return new Promise((function(e){f.ZP.showModal({m:"\u5bc6\u7801\u592a\u4e45\u672a\u4fee\u6539\uff0c\u5efa\u8bae\u5c1d\u8bd5\u627e\u56de\u5bc6\u7801",showCancel:!0,cancelText:"\u8fd4\u56de\u4fee\u6539",cancelColor:"#0086F6",confirmColor:"#0086F6",confirmText:"\u627e\u56de\u5bc6\u7801",done:function(t){var n=t.confirm;n&&Je(),e()}})}))},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,n=e.userName,c=e.loginPW,o=e.defaultUserName,u=Q.userNameInputFlag?n:o||n,l={UserName:u,Password:c,normalLogin:!0,displayName:z.displayName};(0,f.Xx)({params:l,outerParams:{userName:n},succ:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(a){var s,o,u,l,d,p,m,x,y;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=a.memberStatus,o=a.mobilePhone,u=a.userID12306,l=o||n,d=u||n,p=h.WG.getAttr(_)||[],m=p.find((function(e){return e.userName==d})),m&&m.loginPW===c){e.next=16;break}if(!le){e.next=12;break}x=m?p.filter((function(e){return e.userName!==m.userName})):p,h.WG.setAttr(_,[{userName:d,displayName:l,loginPW:c}].concat((0,r.Z)(x.slice(0,9)))),f.ZP.showToast("\u767b\u5f55\u6210\u529f"),e.next=14;break;case 12:return e.next=14,ft({account:m,accounts:p,realUserName:d,displayName:l,loginPW:c});case 14:e.next=18;break;case 16:f.ZP.showToast("\u767b\u5f55\u6210\u529f"),f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:"loginResult",loginState:0,failReason:""});case 18:if(!v||"0"===s||g){e.next=23;break}return e.next=21,yt();case 21:return y=e.sent,e.abrupt("return",I({login12306Name:(null===y||void 0===y?void 0:y.userName)||d,displayName:(null===y||void 0===y?void 0:y.displayName)||l,login12306Pas:(null===y||void 0===y?void 0:y.loginPW)||c,activateSuccess:null===y||void 0===y?void 0:y.activateSuccess}));case 23:return e.abrupt("return",I({login12306Name:d,displayName:l,login12306Pas:c}));case 24:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}(),fail:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r,a,c,o;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.originData,a=void 0===r?{}:r,c=n.errmsg,o=n.failCode,Me.current=a.userID12306,Be.current=a.realName||"",Ue.current=a.mobilePhone||"",H((0,s.Z)({},z)),f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:"loginResult",loginState:1,failReason:c}),console.log("error",n),6!=o){e.next=9;break}return e.abrupt("return",f.ZP.showModal({title:"\u6e29\u99a8\u63d0\u793a",m:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8d85\u8fc74\u6b21\u60a8\u7684\u8d26\u53f7\u5c06\u88ab\u9501\u5b9a\uff0c\u82e5\u5fd8\u8bb0\u7528\u6237\u540d\u6216\u5bc6\u7801\uff0c\u8bf7\u5c1d\u8bd5\u627e\u56de\u5bc6\u7801\u3002",showCancel:!0,confirmText:"\u627e\u56de\u5bc6\u7801",cancelText:"\u77e5\u9053\u4e86",done:function(e){var t=e.confirm;if(t)return Je()}}));case 9:if(7!=o){e.next=11;break}return e.abrupt("return",xt({mobileCheck:0,accountInfo:z}));case 11:if(8!=o){e.next=16;break}return e.next=14,(0,f.lu)({});case 14:if(!e.sent){e.next=16;break}return e.abrupt("return",ut());case 16:if(9!=o){e.next=18;break}return e.abrupt("return",lt());case 18:if(13!=o){e.next=20;break}return e.abrupt("return",ht());case 20:if(!((null===c||void 0===c?void 0:c.length)>24)){e.next=22;break}return e.abrupt("return",f.ZP.showModal({m:c||"\u7f51\u7edc\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}));case 22:f.ZP.showToast(c||"\u7f51\u7edc\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5","none");case 23:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})},mt=function(){var e=h.WG.getAttr(_);if(null===e||void 0===e||!e.length)return $();(0,f.Xx)({params:{UserName:e[0].userName,Password:e[0].loginPW,normalLogin:!0},outerParams:{userName:e[0].userName},succ:function(t){return $((0,s.Z)((0,s.Z)({},t),{},{userName:e[0].displayName,succ:!0}))},fail:function(e){h.WG.removeAttr(D),Fe(e),$()}})},vt=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,r,a,s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Re.originData,r=void 0===n?{}:n,a=Re.failCode,s=void 0===a?0:a,Ue.current=r.mobilePhone||"",Be.current=r.realName||"",Ae(s),7!=s){e.next=7;break}return f.ZP.ubtTrace("s_trn_c_trace_".concat(t),{exposureType:"popup",bizKey:"verificationPopup",errorCode:"91"}),e.abrupt("return",ot());case 7:if(8!=s){e.next=13;break}return e.next=10,(0,f.lu)({});case 10:if(!e.sent){e.next=13;break}return f.ZP.ubtTrace("s_trn_c_trace_".concat(t),{exposureType:"popup",bizKey:"verificationPopup",errorCode:"94"}),e.abrupt("return",ut());case 13:if(9!=s){e.next=16;break}return f.ZP.ubtTrace("s_trn_c_trace_".concat(t),{exposureType:"popup",bizKey:"verificationPopup",errorCode:"96"}),e.abrupt("return",lt());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(e){var n=e.mobileCheck,r=e.accountInfo,i=r||z,a=i.loginPW,s="".concat(L,"/webapp/train/activity/ctrip-train-12306/#/verify?mobile=").concat(Ue.current||"\u60a8\u7684\u4e0b\u5355\u624b\u673a","&userName=").concat(encodeURIComponent(Be.current),"&password=").concat(encodeURIComponent(a),"&userID12306=").concat(Me.current,"&mobileCheck=").concat(n,"&source=login12306sheet");if(j==R){var o=h.WG.getAttr(_);s="".concat(L,"/webapp/train/activity/ctrip-train-12306/#/verify?mobile=").concat(o[0].displayName||"\u60a8\u7684\u4e0b\u5355\u624b\u673a","&userName=").concat(encodeURIComponent(o[0].displayName),"&password=").concat(encodeURIComponent(o[0].loginPW),"&userID12306=").concat(o[0].userName,"&mobileCheck=").concat(n,"&source=login12306sheet")}dt(),$e.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:s,needLogin:!0,bridgeIns:function(e){var n=e.detail.data,i=(0,c.Z)(n,1),a=i[0].unRisk,s=void 0!==a&&a;setTimeout((function(){s?j==R?(mt(),f.ZP.ubtTrace("c_trn_c_".concat(t),{exposureType:"popup",bizKey:"verificationPopupClick",errorCode:F(_e),clickType:96==F(_e)?2:1,result:1})):gt(r):(j==R&&f.ZP.ubtTrace("c_trn_c_".concat(t),{exposureType:"popup",bizKey:"verificationPopupClick",errorCode:F(_e),clickType:96==F(_e)?2:1,result:2}),$())}),500)}}})},yt=function(){return new Promise((function(e,t){var n="".concat(L,"/webapp/train/activity/ctrip-train-12306/#/login?userName=").concat(encodeURIComponent(z.userName),"&loginPW=").concat(encodeURIComponent(z.loginPW),"&source=login12306sheet&push=").concat(v,"&autoLogin=1&hasLogin12306=1");$e.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:n,bridgeIns:function(t){var n,r=null===t||void 0===t||null===(n=t.detail.data)||void 0===n?void 0:n[0];e(r)}}})}))},bt=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:j==O?mt():j==R&&vt();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e,n;return null!==w&&void 0!==w&&null!==(e=w.package)&&void 0!==e&&e.productTitle&&S&&f.ZP.ubtTrace("TCWBuyFill_LoginFloat_FreeLogin_exposure",{PageId:t}),null!==w&&void 0!==w&&null!==(n=w.package)&&void 0!==n&&n.productTitle?S&&7===w.package.type?(0,m.jsxs)(d.View,{className:"login12306-pop-bd pkg",children:[(0,m.jsxs)(d.View,{className:"cont",children:[(0,m.jsxs)(d.View,{className:"tit",children:[(0,m.jsx)(d.Text,{className:"t",children:w.package.productTitle}),(0,m.jsx)(d.Text,{className:"green",children:"\u65b0\u4eba\u7279\u6743\u514d\u8d39"}),(0,m.jsxs)(d.Text,{className:"discount",children:["\uffe5",w.package.originalPrice,"/\u4eba"]})]}),(0,m.jsx)(d.View,{className:"sub",children:"\u65e0\u970012306\u8d26\u53f7\uff0c\u4e00\u952e\u4e0b\u5355\uff0c\u9650\u4eab1\u6b21"})]}),(0,m.jsx)(d.Button,{className:"btn-pkg",onClick:function(){f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:he?"loginSecondStepClick":"loginFirstStepClick",clickType:2}),f.ZP.ubtTrace("TCWBuyFill_LoginFloat_Button_click",{PageId:t,clickType:"3"}),W()},children:"\u7acb\u5373\u51fa\u7968"})]}):(0,m.jsxs)(d.View,{className:"login12306-pop-bd pkg",children:[(0,m.jsx)(d.Image,{className:"img",src:"https://pic.c-ctrip.com/train/wechat/icon-youxian-new.png"}),(0,m.jsxs)(d.View,{className:"cont",children:[(0,m.jsxs)(d.View,{className:"tit",children:[w.package.productTitle," ",(0,m.jsxs)(d.Text,{className:"price",children:[w.package.productPrice,"\u5143/\u4eba"]})]}),(0,m.jsx)(d.View,{className:"sub",children:"\u6781\u901f\u8d2d\u7968\uff0c\u65e0\u9700\u6392\u961f"})]}),(0,m.jsx)(d.Button,{className:"btn-pkg",onClick:function(){f.ZP.ubtTrace("c_trn_c_".concat(t),{bizKey:he?"loginSecondStepClick":"loginFirstStepClick",clickType:2}),W()},children:"\u7acb\u5373\u51fa\u7968"})]}):null};return(0,o.useEffect)((function(){Ge(),p&&f.ZP.ubtTrace("TCWBuyFill_LoginFloat_exposure",{PageId:t})}),[p,u]),(0,o.useEffect)((function(){bt()}),[j]),(0,m.jsxs)(m.Fragment,{children:[p&&f.ZP.ubtTrace("s_trn_c_trace_".concat(t),{exposureType:"actionbar",bizKey:"loginFirstStep"}),(0,m.jsx)(b.Z,{visible:p,children:(0,m.jsxs)(d.View,{className:"login12306-pop",children:[(0,m.jsxs)(d.View,{className:"login12306-pop-hd",children:[(0,m.jsx)(d.View,{className:"tit",children:A.title}),(0,m.jsx)(d.View,{className:"sub",children:A.subTitle}),(0,m.jsx)(d.Text,{className:"ifont-closed-line",onClick:B})]}),(0,m.jsxs)(d.View,{className:"login12306-pop-bd",children:[(0,m.jsxs)(d.View,{className:"input-box ".concat(he?"active":""),children:[(0,m.jsxs)(d.View,{className:"input-item",children:[(0,m.jsx)(y,{className:"input-text",type:"text",displayValue:z.displayName,value:z.userName,placeholder:A.phonePlaceHolder,placeholderClass:"placeHolder",cursorSpacing:f.ZP.isIphone13()?30:20,onBlur:qe,onFocus:function(){return Ve(!1)}}),Ze&&0!==z.userName.length&&(0,m.jsx)(d.Text,{className:"ifont-clean",onClick:He})]}),he&&(0,m.jsxs)(m.Fragment,{children:[f.ZP.ubtTrace("s_trn_c_trace_".concat(t),{exposureType:"actionbar",bizKey:"loginSecondStep"}),(0,m.jsxs)(d.View,{className:"input-item",children:[(0,m.jsx)(y,{className:"input-pwd",password:!ne,value:z.loginPW,placeholder:A.pwdPlaceHolder,placeholderClass:"placeHolder",cursorSpacing:f.ZP.isIphone13()?40:ne?20:0,onBlur:ze,onFocus:function(){return Ve(!1)}}),(0,m.jsx)(d.Text,{className:"".concat(ne?"icon-eyeopen":"icon-eyecloed"),onClick:Ke}),(0,m.jsx)(d.View,{className:"btn-forget",onClick:et,children:"\u5fd8\u8bb0\u5bc6\u7801\uff1f"})]}),(0,m.jsxs)(d.View,{className:"detail-info ".concat(se?"no-tip":""),children:[(0,m.jsxs)(d.View,{className:"protocol",children:[(0,m.jsx)(d.Text,{className:"".concat(se?"ifont-checked blue":"ifont-checkbox"),onClick:nt}),"\u5df2\u9605\u8bfb\u5e76\u540c\u610f\xa0",(0,m.jsx)(d.View,{className:"blue",onClick:st,children:"\u8d26\u53f7\u6388\u6743\u534f\u8bae"}),!se&&(0,m.jsx)(d.View,{className:"tip",children:"\u8bf7\u5148\u52fe\u9009\u540c\u610f\u540e\u518d\u8fdb\u884c\u767b\u5f55"})]}),(0,m.jsxs)(d.View,{className:"remember",onClick:tt,children:[(0,m.jsx)(d.Text,{className:"".concat(le?"ifont-checked blue":"ifont-checkbox")}),(0,m.jsx)(d.View,{className:"txt",children:"\u8bb0\u4f4f\u5bc6\u7801"})]})]})]})]}),(0,m.jsxs)(d.View,{className:"btn-box",children:[(0,m.jsx)(d.Button,{className:"btn-submit",onClick:at,children:he?"\u767b\u5f5512306\u8d26\u53f7":"\u4e0b\u4e00\u6b65"}),(0,m.jsxs)(d.View,{className:"txt blue ".concat(f.ZP.isIos()?"":"noios"),onClick:ct,children:["\u6ca1\u6709\u8d26\u53f7\uff0c10S\u5b8c\u6210\u6781\u901f\u6ce8\u518c",(0,m.jsx)(d.Text,{className:"ifont-arr"})]})]})]}),wt()]})}),(0,m.jsx)(T,{visible:xe,mobilePhone:Ue.current,smsVerify:function(){return xt({mobileCheck:0})},close:dt}),(0,m.jsx)(P,{visible:Te,action:j,realName:Be.current,jumpCheckPage:Xe,jumpServicePage:Qe,faceVerify:pt,close:dt}),(0,m.jsx)(Z,{visible:Pe,action:j,realName:Be.current,jumpCheckPage:Xe,jumpServicePage:Qe,faceVerify:pt,smsVerify:function(){return xt({mobileCheck:0})},close:dt})]})},U=B,$=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,s,c,o,u,l,d,f,h=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:[],e.prev=1,e.next=4,(0,p.Iv)({});case 4:return n=e.sent,r=n.retCode,a=n.retMessage,s=n.bindMobilePhone,e.next=10,(0,p.qe)({});case 10:if(c=e.sent,o=c.retCode,u=c.retMessage,l=c.identityNo,1==r&&1==o&&s&&l){e.next=16;break}throw a||u;case 16:return d=function(e){return e&&e.replace(/^(.{3})(.*)(.{2})$/,(function(e,t,n,r){return t+r}))},f=t.find((function(e){var t;return e.mobilePhone==s||d(null===(t=e.idcard)||void 0===t?void 0:t.noMaskData)==d(l)||e.isSelf})),e.abrupt("return",f&&/^[1][0-9]{10}$/.test(f.mobilePhone)?f.mobilePhone:s);case 21:return e.prev=21,e.t0=e["catch"](1),e.abrupt("return","");case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}()},19908:function(e,t,n){"use strict";n.d(t,{n:function(){return Ce},z4:function(){return Pe},ZP:function(){return Ze},nT:function(){return Se}});var r=n(298),i=n(22276),a=n(90129),s=n(79301),c=n(95308),o=n(90201),u=n(71515),l=n(56884),d=n.n(l),p=n(92954),f=n.n(p),h=n(81719),g=n.n(h),m=g().dayjs;function v(e){if(!e)return!1;var t=e.replace(/^(\d{4})[-|\/](\d{2})[-|\/](\d{2}).*/,"$1/$2/$3");return m(t)>=m(m().format("YYYY-MM-DD"))}function x(e){if(!e)return!1;var t=e.replace(/^(\d{4})[-|\/](\d{2})[-|\/](\d{2}).*/,"$1/$2/$3");return m(t),m(m().format("YYYY-MM-DD")),m(t)<=m(m().format("YYYY-MM-DD"))}function y(e){return!!e&&/^[A-Za-z .\xb7]+$/.test(e.replace(/ /g,""))}function b(e){if(!e)return!1;var t=/^[a-zA-Z\xb7.\uff0e\u3400-\u9FFF]+$/,n=/^([\u3400-\u9FFF]{1,20}((?:\xb7|\.)[\u3400-\u9FFF]{1,20})|[\u3400-\u9FFF]{2,20}|([\u3400-\u9FFF]{1,20}[a-zA-z]{1,20}))/;return!!t.test(e)&&n.test(e)}function w(e,t,n){return!!(e&&t||n)&&!!(y(e)||y(t)||b(n))}function T(e){return e.nationality&&v(e.identityLimitDate)&&x(e.birthday)}function k(){}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent("https://pages.ctrip.com/ztrip/document/ydxzctrip.html?noticetype=".concat(e,"&__ares_maxage=3m&mpenv=wx")))})}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;d().component.areas({immediateCallback:e})}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return{};var t=e.find((function(e){return e.isSelf&&3!=e.passengerType}))||e.find((function(e){return!e.isChild&&3!=e.passengerType}));return t&&(2!==t.identityType||T(t))?(t.chosen=!0,t):{}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return e.idcard.text&&e.idcard.no})),n=e.filter((function(e){return!(e.idcard.text||e.idcard.no)})),r=t.concat(n);return r}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.find((function(e){return"Y"===e.isSelf&&"Y"===e.isEffect}));if(n)return Z(e,n,!0)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!0,a=[];return 0===e.length?i=!1:e.forEach((function(e){var s=Z(t,e,n);s?r&&(s.passengerType=e.passengerType,a.push(s)):i=!1})),{compareRes:i,sameList:a}}function Z(e,t,n){var r=e.find((function(e){var r="",i="",a="",s="";if(n?(r=t.idNo,i=e.noMaskData,a=e.identityType,s=t.idNoType):(r=t.noMaskData,i=e.idNo,a=e.idNoType,s=t.identityType),a==s)return 1==a?(r=V(r,!0,!0)+"",i=V(i,!0,!0)+""):(r=V(r,!0)+"",i=V(i,!0)+""),n?"Y"===t.isEffect&&r==i&&e.cNName===t.name:r==i&&t.cNName===e.name&&"Y"===e.isEffect}));return r}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length;if(t){if(e.indexOf("*")>-1)return e;if(r>=14&&n)return"".concat(e.substring(0,4)).concat(e.substring(4,6).replace(/\d/g,"*")," ").concat(e.substring(6,14).replace(/\d/g,"*")," ").concat(e.substring(14,15).replace(/\d/g,"*")).concat(e.substring(15));var i=Math.floor(r/3),a=r-2;return"".concat(e.substring(0,i)).concat(e.substring(i,a).replace(/./g,"*")).concat(e.substring(a))}return r>14?"".concat(e.substring(0,6)," ").concat(e.substring(6,14)," ").concat(e.substring(14)):r>6?"".concat(e.substring(0,6)," ").concat(e.substring(6)):e}var L=n(2269),D=function(){},_=function(e){var t=e.onBlur,n=void 0===t?D:t,i=e.focus,s=void 0!==i&&i,c=e.value,l=void 0===c?"":c,d=e.className,p=void 0===d?"":d,f=e["placeholder-class"],h=e.placeholder,g=(0,o.useState)(!1),m=(0,a.Z)(g,2),v=m[0],x=m[1],y=(0,o.useState)(!1),b=(0,a.Z)(y,2),w=b[0],T=b[1];function k(){x(!0),T(!0)}return(0,L.jsx)(L.Fragment,{children:v?(0,L.jsx)(u.Input,(0,r.Z)((0,r.Z)({},e),{},{focus:s||w,"always-embed":!0,onBlur:function(e){x(!1),n(e)}})):(0,L.jsx)(u.View,{className:"fake-input-wrapper ".concat(p," ").concat(l?"":f||"input-placeholder"),onClick:k,children:(0,L.jsx)(u.View,{style:{overflow:"hidden",position:"absolute",width:"100%"},children:l||h})})})},A=_,E=function(e){var t=e.areaCode,n=void 0===t?"86":t,r=e.mobile,i=void 0===r?"":r,s=e.onMobileChange,c=void 0===s?k:s,l=e.onAreaCodeChange,p=void 0===l?k:l,h=(0,o.useState)(!0),g=(0,a.Z)(h,2),m=g[0],v=g[1];function x(e){"86"==e.code&&i.replace(/\s+/g,"").length>=11&&c(i.replace(/\s+/g,"").substring(0,11)),p(e)}function y(){c("")}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("86"!=t)return e;switch(!0){case e.length>11:e=e.substring(0,3)+" "+e.substring(3,7)+" "+e.substring(7,11);break;case e.length>7:e=e.substring(0,3)+" "+e.substring(3,7)+" "+e.substring(7);break;case e.length>3:e=e.substring(0,3)+" "+e.substring(3);break;default:break}return e}function w(e){-1!==e.detail.value.indexOf("****")&&c(""),v(!1)}function T(e){"86"==n&&e.detail.value.replace(/\s+/g,"").length>=11&&f().hideKeyboard()}function j(e){var t=e.detail.value,r=void 0===t?"":t;"86"==n&&(r=r.replace(/\s+/g,"").substring(0,11)),c(r),v(!0)}function P(){d().chooseContact({complete:function(e){e.phoneNumber&&c(e.phoneNumber.replaceAll(" ",""))}})}return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(u.View,{className:"add-box add-phone",children:(0,L.jsxs)(u.View,{className:"item",children:[n&&"86"!=n?(0,L.jsxs)(u.View,{style:{display:"flex",alignItems:"center"},children:[(0,L.jsxs)(u.View,{className:"label strong",onClick:function(){N(x)},children:["\u5883\u5916\u624b\u673a",(0,L.jsx)(u.Text,{className:"ifont-triangle"})]}),(0,L.jsxs)(u.View,{className:"area-code",children:["+",n]})]}):(0,L.jsxs)(u.View,{className:"label strong",onClick:function(){N(x)},children:["\u5927\u9646\u624b\u673a",(0,L.jsx)(u.Text,{className:"ifont-triangle"})]}),(0,L.jsx)(u.View,{className:"cont",children:(0,L.jsx)(A,{id:"input-txt",type:"number",autoComplete:"off",placeholder:"\u7528\u4e8e\u63a5\u6536\u51fa\u7968\u4fe1\u606f",className:"input-txt",value:b(i,n),maxlength:n&&"86"!==n?100:13,onInput:T,onFocus:w,onBlur:j})}),i.length>0&&m&&(0,L.jsx)(u.View,{style:{padding:"20rpx"},onClick:function(){y()},children:(0,L.jsx)(u.Text,{class:"ifont-clean"})}),(0,L.jsx)(u.View,{className:"contact-icon",children:(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2021/xiaochengxu/V8.45/ic_txl@3x.png",className:"img",mode:"widthFix",onClick:function(e){e.stopPropagation(),P()}})})]})})})},O=E,R=function(e){var t=e.visible,n=void 0!==t&&t,r=e.canShowChildren,i=e.onHidePop,a=void 0===i?k:i;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.View,{class:n?"backmask active":"",onClick:function(){a()}}),(0,L.jsxs)(u.View,{class:"pop-botm ".concat(n?"active":""),style:"zIndex:1002",children:[(0,L.jsxs)(u.View,{className:"pop-botm-hd child-pop-botm",children:[(0,L.jsxs)(u.View,{class:"tit tleft",children:["\u513f\u7ae5\u7968\u8d2d\u7968\u8bf4\u660e",(0,L.jsx)(u.Text,{className:"tit mini",children:"(\u5e7f\u4e5d\u7968\u9664\u5916)"})]}),(0,L.jsx)(u.View,{class:"btn-closed",onClick:function(){a()}})]}),(0,L.jsx)(u.View,{class:"pop-botm-bd pop-child-select",children:r?(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2023-3/app-maipiao/4.20/zhonglaotielu/etongpiao_zhonglao3.png",class:"img",mode:"widthFix"}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2022/app/8.59/zhuliucheng/ertongpiao_guizegenggai/rule_new1.png",class:"img",mode:"widthFix"}),(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2022/app/8.59/zhuliucheng/ertongpiao_guizegenggai/rule_new2.png",class:"img",mode:"widthFix"}),(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2022/app/8.59/zhuliucheng/ertongpiao_guizegenggai/rule_new3.png",class:"img",mode:"widthFix"})]})})]})]})},F=R,M=n(48782),B=n(74760),U=n(38717),$=g().classnames,G=function(e){var t=e.train,n=e.pas,r=e.assPsgTypePopVisibleIdx,s=e.setAssPsgTypeVisibleIdx,c=e.selectedAssigneePassengers,l=e.setSelectedAssigneePassengers,d=e.pasIdx,p=(0,o.useState)(n.passengerType),f=(0,a.Z)(p,2),h=f[0],g=f[1],m=(0,o.useState)(!1),v=(0,a.Z)(m,2),x=v[0],y=v[1],b=(0,o.useState)([]),w=(0,a.Z)(b,2),T=w[0],k=w[1];function j(){var e=(0,i.Z)(c);e.find((function(e){e.encNo===n.encNo&&(e.passengerType=h)})),l(e)}function N(e){if(e!==B.SS.CHILD)return y(!1),g(e),void s(-1);y(!0)}function P(){g(B.SS.CHILD),s(-1)}return(0,o.useEffect)((function(){var e=(0,U.c6)([null===t||void 0===t?void 0:t.seatName]),n=[{typeName:"\u6210\u4eba\u7968",passengerType:B.SS.ADULT},{typeName:"\u5b66\u751f\u7968",passengerType:B.SS.STUDENT},{typeName:"\u513f\u7ae5\u7968",passengerType:B.SS.CHILD}];e||(n=[{typeName:"\u6210\u4eba\u7968",passengerType:B.SS.ADULT},{typeName:"\u513f\u7ae5\u7968",passengerType:B.SS.CHILD}]),k(n)}),[]),(0,o.useEffect)((function(){j()}),[h]),(0,L.jsx)(M.Z,{visible:r===d,clickMaskClose:!0,close:function(){return s(-1)},children:(0,L.jsxs)(u.View,{className:"pop-cert-list",children:[(0,L.jsx)(u.View,{className:"pop-cert-title",children:"\u9009\u62e9\u4e58\u5ba2\u7c7b\u578b"}),(0,L.jsxs)(u.View,{className:"pop-cert-content",children:[T.map((function(e,t){return(0,L.jsxs)(u.View,{className:$("pop-cert-item",{"last-item":2===t},{"child-last-item":x},{selected:h===e.passengerType}),onClick:function(){return N(e.passengerType)},children:[e.typeName,h===e.passengerType&&(0,L.jsx)(u.Image,{className:"checked-icon",src:"https://images3.c-ctrip.com/train/2023-3/app-maipiao/4.20/jifenbudengzhushou/img-gouxuan.png"})]},t)})),x&&(0,L.jsxs)(u.View,{className:"child-doc-tips psg-type-pop-child-tips ",onClick:P,children:[(0,L.jsx)(u.Text,{className:"ifont-checkbox2"}),(0,L.jsxs)(u.View,{class:"tips-box item",children:[(0,L.jsx)(u.View,{className:"tip",children:"\u8bf7\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae"}),"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u3002"]})]})]})]})})},W=G,Y=n(35997),q=n(79062),z=g().classnames,H=g().dayjs,K=function(e){var t=e.from,n=void 0===t?"":t,r=e.showInvite,a=void 0!==r&&r,s=e.commonPassengerList,c=void 0===s?[]:s,l=e.canUsePoint,h=void 0!==l&&l,g=e.assigneeList,m=void 0===g?[]:g,v=e.confirmAssPsgList,x=void 0===v?[]:v,y=e.setConfirmAssPsgList,b=e.maxPassengerLength,w=void 0===b?5:b,T=e.psgTab,k=void 0===T?1:T,j=e.login12306Name,N=void 0===j?"":j,P=e.onClickPas,S=void 0===P?U.UH:P,C=e.setPsgTab,I=void 0===C?U.UH:C,Z=e.pasIsSelected,V=void 0===Z?U.UH:Z,D=e.goEditPas,_=void 0===D?U.UH:D,A=e.onClickRefresh,E=void 0===A?U.UH:A,O=e.setLastSelectPsgTypeTab,R=void 0===O?U.UH:O,F=e.toSetAssigneeList,M=void 0===F?U.UH:F,$=(0,o.useRef)(!1),G=(0,U.Ru)();(0,p.useDidShow)((function(){$.current&&($.current=!1,M())}));var W=function(){U.ZP.ubtTrace("TCWBuyFill_Passenger_Button_click",{PageId:"10650084622",ExpoType:2,clickType:1}),$.current=!0;var e="".concat(G,"/webapp/train/activity/ctrip-train-point-registration-assist/passenger?userName=").concat((0,U.zy)(N),"&titleBgColor=C6DDFC");d().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent(e))})},Y=function(e){if("Y"===e.isSelf)return U.ZP.showModal({title:"\u6e29\u99a8\u63d0\u793a",m:"\u5f53\u524d\u7528\u6237\u4e0d\u53ef\u7f16\u8f91",confirmText:"\u77e5\u9053\u4e86"});$.current=!0;var t=encodeURIComponent(JSON.stringify(e)),n="".concat(G,"/webapp/train/activity/ctrip-train-point-registration-assist/addassignee?userName=").concat(N,"&title=\u7f16\u8f91\u53d7\u8ba9\u4eba&titleBgColor=C6DDFC&editPsg=").concat(t);d().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent(n))})},K=function(e){if("Y"!==e.isEffect)return U.ZP.showModal({title:"\u6e29\u99a8\u63d0\u793a",m:"\u5f53\u524d\u53d7\u8ba9\u4eba\u5c1a\u672a\u751f\u6548\uff0c\u8bf7\u5728".concat(H(e.effectDate).format("YYYY\u5e74M\u6708DD\u65e5"),"\u751f\u6548\u540e\u518d\u9009\u62e9"),confirmText:"\u77e5\u9053\u4e86"});if(R(1),V(e,!0)){var t=x.filter((function(t){return t.encNo!==e.encNo}));y(t)}else{if(x.length>=w)return f().showModal({content:"\u4e00\u4e2a\u8ba2\u5355\u6700\u591a\u53ea\u80fd\u6dfb\u52a0".concat(w,"\u540d\u4e58\u5ba2\uff0c\u8d85\u8fc7\u8bf7\u5206\u6279\u8d2d\u4e70")});y([].concat((0,i.Z)(x),[e]))}},J=function(){return(0,L.jsxs)(u.View,{className:"tab-box",children:[(0,L.jsx)(u.View,{className:z("tab",{cur:!k}),onClick:function(){return I(0)},children:(0,L.jsx)(u.View,{className:"tit",children:"\u4e58\u8f66\u4eba"})}),(0,L.jsx)(u.View,{className:z("tab",{cur:k}),onClick:function(){return I(1)},children:(0,L.jsxs)(u.View,{className:"tit",children:["\u53d7\u8ba9\u4eba",(0,L.jsx)(u.Text,{className:"tag",children:"\u79ef\u5206\u5151\u6362"})]})})]})},Q=function(){return(0,L.jsx)(L.Fragment,{children:c.map((function(e,t){var n,r;return(0,L.jsxs)(u.View,{className:z("psg-item",{disabled:e.infoStatus===B.gq.INCOMPLETE||e.infoStatus===B.gq.INVALIDTYPE}),onClick:function(){return S(e,t)},children:[(0,L.jsx)(u.Text,{className:"ifont-edit2",onClick:function(t){t.stopPropagation(),U.ZP.ubtTrace("TCWBuyFill_Passenger_Button_click",{PageId:"10650084622",ExpoType:1,clickType:2}),_(e)}}),(0,L.jsxs)(u.View,{className:"cont",children:[(0,L.jsxs)(u.View,{className:"hd",children:[(0,L.jsx)(u.View,{className:"name",children:e.pasName}),(0,L.jsx)(u.View,{className:"tag-grey",children:e.passengerType===B.SS.ADULT?"\u6210\u4eba\u7968":e.passengerType===B.SS.STUDENT?"\u5b66\u751f\u7968":"\u513f\u7ae5\u7968"}),e.isWeChat&&(0,L.jsx)(u.Text,{className:"tag-weixin",children:"\u5fae\u4fe1\u597d\u53cb"})]}),(0,L.jsx)(u.View,{className:"txt",children:e.infoStatus===B.gq.INCOMPLETE?"\u4fe1\u606f\u4e0d\u5168\uff0c\u70b9\u51fb\u8865\u5145":("\u8eab\u4efd\u8bc1"==(null===(n=e.idcard)||void 0===n?void 0:n.text)?"\u4e8c\u4ee3\u8eab\u4efd\u8bc1":null===(r=e.idcard)||void 0===r?void 0:r.text)+" "+(1==e.idcard.noDataType?e.idcard.noMaskData:e.idcard.noShow||"")}),e.infoStatus===B.gq.LACK_MOBILE&&(0,L.jsxs)(u.View,{className:"cert",children:["\u6839\u636e\u94c1\u8def\u5c40\u6700\u65b0\u89c4\u5b9a\uff0c\u8bf7\u8865\u5168\u4e58\u5ba2\u624b\u673a\u53f7"," "]})]}),e.infoStatus===B.gq.NORMAL&&(0,L.jsx)(u.Text,{className:z("ifont-checkbox2",{"ifont-checked2":V(e)})})]},t)}))})},X=function(){return(0,L.jsx)(L.Fragment,{children:m.map((function(e,t){return(0,L.jsxs)(u.View,{className:z("psg-item",{disabled:"Y"!==e.isEffect}),onClick:function(){return K(e,t)},children:[(0,L.jsx)(u.Text,{className:"ifont-edit2",onClick:function(t){t.stopPropagation(),U.ZP.ubtTrace("TCWBuyFill_Passenger_Button_click",{PageId:"10650084622",ExpoType:2,clickType:2}),Y(e)}}),(0,L.jsxs)(u.View,{className:"cont",children:[(0,L.jsxs)(u.View,{className:"hd",children:[(0,L.jsx)(u.View,{className:"name",children:e.name}),(0,L.jsx)(u.View,{className:"tag-grey",children:e.passengerType===B.SS.CHILD?"\u513f\u7ae5\u7968":e.passengerType===B.SS.STUDENT?"\u5b66\u751f\u7968":"\u6210\u4eba\u7968"})]}),(0,L.jsx)(u.View,{className:"txt",children:B.MJ[e.idNoType]+" "+e.idNo}),"Y"!==e.isEffect&&(0,L.jsx)(u.View,{className:"txt",children:(0,L.jsxs)(u.Text,{className:"tred",children:[H(e.effectDate).format("YYYY\u5e74M\u6708DD\u65e5"),"\u540e\u751f\u6548"]})})]}),"Y"!==e.isEffect&&(0,L.jsx)(u.View,{className:"status tred",children:"\u672a\u751f\u6548"}),"Y"===e.isEffect&&(0,L.jsx)(u.Text,{className:z("ifont-checkbox2",{"ifont-checked2":V(e,!0)})})]},t)}))})};return(0,L.jsxs)(L.Fragment,{children:[!q.Z.isTrainApp&&h&&(0,L.jsx)(J,{}),(0,L.jsxs)(u.View,{className:z("passenger-picker",{"picker-top":!h||q.Z.isTrainApp}),children:[k&&!q.Z.isTrainApp?(0,L.jsx)(u.View,{className:"pasgadd-btn",children:(0,L.jsxs)(u.Button,{className:"btn-submit",onClick:W,children:[(0,L.jsx)(u.Text,{className:"ifont-addpasg"}),(0,L.jsx)(u.Text,{children:"\u6dfb\u52a0\u53d7\u8ba9\u4eba"})]})}):(0,L.jsxs)(u.View,{className:"pasgadd-btn",children:[(0,L.jsxs)(u.Button,{className:"btn-submit",onClick:function(){"ordinary"===n&&U.ZP.ubtTrace("TCWBuyFill_Passenger_Button_click",{PageId:"10650084622",ExpoType:1,clickType:1}),_()},children:[(0,L.jsx)(u.Text,{className:"ifont-addpasg"}),(0,L.jsx)(u.Text,{className:"add-tit",children:"\u65b0\u589e\u4e58\u5ba2"})]}),a&&(0,L.jsxs)(u.Button,{className:"btn-submit","open-type":"share",id:"inviteAddFriend",children:[(0,L.jsx)(u.Text,{className:"ifont-wechat2"}),(0,L.jsx)(u.Text,{className:"add-tit",children:"\u6dfb\u52a0\u5fae\u4fe1\u597d\u53cb"})]})]}),(0,L.jsxs)(u.View,{className:"refresh",onClick:function(){return E(k)},children:[(0,L.jsx)(u.View,{className:"refresh-icon"}),"\u70b9\u51fb\u53ef\u5237\u65b0\u4e58\u5ba2\u5217\u8868"]}),(0,L.jsx)(u.View,{className:"pasglist-bd",children:k&&!q.Z.isTrainApp?(0,L.jsxs)(L.Fragment,{children:[U.ZP.ubtTrace("TCWBuyFill_Passenger_exposure",{PageId:"10650084622",ExpoType:2}),(0,L.jsx)(X,{})]}):(0,L.jsxs)(L.Fragment,{children:["ordinary"===n&&U.ZP.ubtTrace("TCWBuyFill_Passenger_exposure",{PageId:"10650084622",ExpoType:1}),(0,L.jsx)(Q,{})]})})]})]})},J=K,Q={},X=function(e){var t=e.passenger,n=void 0===t?{}:t,i=e.onClickStu,a=void 0===i?Q:i,s=e.onClickAdult,c=void 0===s?Q:s,o=e.visible,l=void 0!==o&&o;return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(M.Z,{visible:l,direction:"middle",clickMaskClose:!0,children:(0,L.jsxs)(u.View,{className:"stu-wrap ".concat(l?"active":""),children:[(0,L.jsxs)(u.View,{className:"stu-title",children:[(0,L.jsx)(u.View,{className:"main-title",children:"\u786e\u8ba4\u8d2d\u4e70\u5b66\u751f\u7968?"}),(0,L.jsxs)(u.View,{className:"sub-title",children:[n.cNName||n.eNfirstName&&n.eNlastName?(0,L.jsx)("text",{children:n.cNName||"".concat(n.eNfirstName," ").concat(n.eNlastName)}):null,"\u4e58\u5ba2\u7c7b\u578b\u4e3a\u5b66\u751f\u7968"]})]}),(0,L.jsx)(u.View,{className:"stu-des",children:["\u5b66\u751f\u4e00\u5e74\u4ec5\u80fd\u8d2d\u4e704\u6b21\u4f18\u60e0\u533a\u95f4\u5185\u7684\u5217\u8f66","\u82e5\u60a8\u8d2d\u4e70\u8d85\u8fc74\u6b21\u4f18\u60e0\u6216\u8d2d\u4e70\u4e0d\u5728\u4f18\u60e0\u533a\u95f4\u5185\u7684\u8f66\u7968\uff0c\u5c06\u65e0\u6cd5\u6b63\u5e38\u53d6\u7968\uff08\u53ef\u80fd\u9700\u8865\u5dee\u4ef7)"].map((function(e,t){return(0,L.jsx)(u.View,{className:"des-text",children:e},t)}))}),(0,L.jsxs)(u.View,{className:"stu-btns",children:[(0,L.jsx)(u.View,{className:"btn",onClick:function(){return a(n)},children:"\u8d2d\u4e70\u5b66\u751f\u7968"}),(0,L.jsx)(u.View,{className:"btn",onClick:function(){return c((0,r.Z)((0,r.Z)({},n),{},{passengerType:1}))},children:"\u8d2d\u4e70\u6210\u4eba\u7968"})]}),(0,L.jsx)(u.View,{className:"stu-top-bg"})]})})})},ee=X,te=function(e){var t=e.childDocCheck,n=void 0!==t&&t,r=e.onClickChildDocCheck,i=void 0===r?function(){}:r;return(0,L.jsxs)(u.View,{class:"child-doc-tips",onClick:i,children:[(0,L.jsx)(u.Text,{class:"ifont-radio ".concat(n?"cur":"")}),(0,L.jsx)(u.View,{class:"item",children:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u3002"})]})},ne=te,re=function(e){var t=e.visible,n=void 0===t||t,r=e.onClickAccept,i=void 0===r?function(){}:r,a=e.onClickReject,s=void 0===a?function(){}:a;return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(M.Z,{visible:n,clickMaskClose:!0,direction:"middle",children:(0,L.jsxs)(u.View,{className:"child-pop-model",children:[(0,L.jsx)(u.View,{className:"title",children:"\u513f\u7ae5\u76d1\u62a4\u4eba\u786e\u8ba4"}),(0,L.jsx)(u.View,{className:"txt",children:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u3002"}),(0,L.jsxs)(u.View,{className:"pop-botm-btn",children:[(0,L.jsx)(u.Button,{className:"btn-cancel",onClick:s,children:"\u4e0d\u540c\u610f"}),(0,L.jsx)(u.Button,{className:"btn-confirm",onClick:i,children:"\u5df2\u540c\u610f"})]})]})})})},ie=re,ae=n(74937),se=function(e){var t=e.onClickAddPag,n=void 0===t?function(){}:t;return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(u.View,{class:"pasg-blank",children:[(0,L.jsx)(u.Icon,{class:"icon-none"}),(0,L.jsx)(u.View,{class:"tit",children:"\u60a8\u5c1a\u672a\u6dfb\u52a0\u4e58\u5ba2"}),(0,L.jsx)(u.View,{class:"txt",children:"\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\u5373\u53ef\u6dfb\u52a0"}),(0,L.jsx)(u.Button,{class:"btn-add",onClick:n,children:"\u65b0\u589e\u4e58\u5ba2"}),(0,L.jsx)(u.View,{class:"login-ctrip"})]})})},ce=se,oe=function(e){var t=e.visible,n=void 0!==t&&t,r=e.onClose,i=void 0===r?function(){}:r;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(M.Z,{visible:n,clickMaskClose:!0}),(0,L.jsx)(u.View,{class:"pop-mid".concat(n?" active":""),children:(0,L.jsxs)(u.View,{class:"pop-white pop-invite",children:[(0,L.jsx)(u.Text,{class:"ifont-closed",onClick:i}),(0,L.jsx)(u.Icon,{class:"icon-edit"}),(0,L.jsx)(u.View,{class:"tit",children:"\u9080\u8bf7\u597d\u53cb\u586b\u5199\u4e2a\u4eba\u4fe1\u606f"}),(0,L.jsx)(u.View,{class:"txt",children:"\u597d\u53cb\u586b\u5199\u5b8c\u6bd5\u540e\uff0c\u5176\u4e58\u5ba2\u4fe1\u606f\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5fae\u4fe1\u597d\u53cb\u5217\u8868\u4e2d"}),(0,L.jsx)(u.View,{class:"btn-box",children:(0,L.jsx)(u.Button,{class:"btn-blue","hover-class":"btn-blue_hover","open-type":"share","data-ubt-key":"wx_passengerlist_invite_first",id:"inviteAddFriend",children:"\u6dfb\u52a0\u5fae\u4fe1\u597d\u53cb"})})]})})]})},ue=oe,le=function(e){var t=e.visible,n=void 0!==t&&t,r=e.onClose,i=void 0===r?function(){}:r;return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(M.Z,{visible:n,direction:"middle",children:(0,L.jsxs)(u.View,{class:"pop-mid pop-model active",children:[(0,L.jsx)(u.Icon,{class:"icon-suc"}),(0,L.jsx)(u.View,{class:"tit",children:"\u5206\u4eab\u6210\u529f"}),(0,L.jsx)(u.View,{class:"txt",children:"\u597d\u53cb\u52a0\u5165\u884c\u7a0b\u540e\uff0c\u5728\u4e58\u5ba2\u5217\u8868\u9875\u4e0b\u62c9\u5237\u65b0\uff0c\u5c31\u53ef\u4ee5\u770b\u5230TA\u5566"}),(0,L.jsx)(u.Button,{class:"btn-submit",onClick:i,children:"\u77e5\u9053\u4e86"})]})})})},de=le,pe=function(e){var t=e.psgTypePopVisible,n=e.setPsgTypePopVisible,r=e.submitNormalPsgs,i=e.submitAssPsgs,a=e.lastSelectPsgTypeTab,s=function(e){e?a?i():r():a?r():i()};return(0,L.jsx)(M.Z,{visible:t,clickMaskClose:!0,direction:"middle",close:function(){return n(!1)},children:(0,L.jsxs)(u.View,{className:"pop-mid active child-alert",children:[(0,L.jsx)(u.View,{className:"child-alert-title",children:"\u53d7\u8ba9\u4eba\u548c\u4e58\u8f66\u4eba\u4e0d\u652f\u6301\u6df7\u5408\u9009\u62e9"}),(0,L.jsx)(u.View,{className:"child-alert-cont",children:(0,L.jsx)(u.View,{children:"\u4e58\u8f66\u4eba\u8d2d\u7968\u5219\u4e0d\u53ef\u4f7f\u7528\u79ef\u5206\u5151\u6362~\u8bf7\u518d\u6b21\u786e\u8ba4\u60a8\u7684\u9009\u62e9"})}),(0,L.jsxs)(u.View,{class:"child-alert-btns",children:[(0,L.jsx)(u.View,{className:"btn cancel type-blue",onClick:function(){return s()},children:(0,L.jsx)(u.Text,{children:a?"\u4e58\u8f66\u4eba":"\u53d7\u8ba9\u4eba"})}),(0,L.jsx)(u.View,{className:"btn submit",onClick:function(){return s(!0)},children:(0,L.jsx)(u.Text,{children:a?"\u53d7\u8ba9\u4eba":"\u4e58\u8f66\u4eba"})})]})]})})},fe=pe,he=d().train,ge=g().dayjs,me=g().classnames,ve=function(){},xe=function(e){var t=e.pageId,n=void 0===t?"":t,l=e.loginFlag,p=void 0!==l&&l,h=e.canShowChildren,g=void 0===h||h,m=e.productLimitParams,y=void 0===m?{}:m,b=e.visible,k=void 0!==b&&b,j=e.maxPassengerLength,N=void 0===j?5:j,P=e.boxOriginPassenger,S=void 0===P?[]:P,C=e.notice,I=void 0===C?"":C,Z=e.validTypes,V=void 0===Z?[]:Z,D=e.defaultSelectedPasserger,_=void 0===D?[]:D,A=e.disableStudentNotice,E=void 0===A?"":A,O=e.from,R=void 0===O?"":O,$=e.isTransit,G=void 0!==$&&$,W=e.seatNames,z=void 0===W?[]:W,H=e.assigneeList,K=void 0===H?[]:H,Q=e.usePointFlag,X=void 0!==Q&&Q,te=e.canUsePoint,re=void 0!==te&&te,se=e.psgTab,oe=void 0===se?0:se,le=e.defaultAssSelectedPsg,pe=void 0===le?[]:le,xe=e.totalPoint,ye=void 0===xe?0:xe,be=e.login12306Name,we=void 0===be?"":be,Te=e.setPsgTab,ke=void 0===Te?ve:Te,je=e.onClose,Ne=void 0===je?ve:je,Pe=e.onConfirm,Se=void 0===Pe?ve:Pe,Ce=e.onSubmitPassenger,Ie=void 0===Ce?ve:Ce,Ze=e.onOriginPassenger,Ve=void 0===Ze?ve:Ze,Le=e.toSetAssigneeList,De=void 0===Le?ve:Le,_e=e.jumpToPointInfo,Ae=void 0===_e?ve:_e;return function(e,t){var l=(0,o.useState)([]),h=(0,a.Z)(l,2),m=h[0],b=h[1],j=(0,o.useState)([]),P=(0,a.Z)(j,2),C=P[0],Z=P[1],D=(0,o.useState)([]),A=(0,a.Z)(D,2),O=A[0],$=A[1],W=(0,o.useState)(!1),H=(0,a.Z)(W,2),Q=H[0],te=H[1],se=(0,o.useState)(!0),le=(0,a.Z)(se,2),ve=le[0],xe=le[1],be=(0,o.useState)(!1),Te=(0,a.Z)(be,2),je=Te[0],Pe=Te[1],Ce=(0,o.useState)(!1),Ie=(0,a.Z)(Ce,2),Ze=Ie[0],Le=Ie[1],_e=(0,o.useState)(!1),Ee=(0,a.Z)(_e,2),Oe=Ee[0],Re=Ee[1],Fe=(0,o.useState)(!1),Me=(0,a.Z)(Fe,2),Be=Me[0],Ue=Me[1],$e=(0,o.useState)(!1),Ge=(0,a.Z)($e,2),We=Ge[0],Ye=Ge[1],qe=(0,o.useState)([]),ze=(0,a.Z)(qe,2),He=ze[0],Ke=ze[1],Je=(0,o.useState)(!1),Qe=(0,a.Z)(Je,2),Xe=Qe[0],et=Qe[1],tt=(0,o.useState)(!1),nt=(0,a.Z)(tt,2),rt=nt[0],it=nt[1],at=(0,o.useState)(!1),st=(0,a.Z)(at,2),ct=st[0],ot=st[1],ut=(0,o.useState)(),lt=(0,a.Z)(ut,2),dt=lt[0],pt=lt[1],ft=(0,o.useState)(+!q.Z.isTrainApp),ht=(0,a.Z)(ft,2),gt=ht[0],mt=ht[1],vt=(0,o.useRef)({}),xt=(0,o.useRef)({}),yt=(0,o.useRef)({}),bt=(0,o.useRef)({}),wt=(0,o.useRef)({});function Tt(){return kt.apply(this,arguments)}function kt(){return kt=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,St();case 2:return t=e.sent,n=(0,U.Zs)(t),n.forEach((function(e){e.infoStatus=It(e)})),Zt(n),Ke(t),b(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}function jt(){return Nt.apply(this,arguments)}function Nt(){return Nt=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Tt();case 2:t=e.sent,X?(n=pe.filter((function(e){return K.some((function(t){return t.encNo===e.encNo}))})),Z(n),$([])):(r=_.filter((function(e){return!e.isBind&&t.find((function(t){return t.passengerID===e.passengerID}))})),$(r),Z([]));case 4:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function Pt(e,t){return t?C.find((function(t){return e.encNo===t.encNo})):O.find((function(t){return e.passengerID===t.passengerID}))}function St(){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(he.hasModifyPassenger){e.next=2;break}return e.abrupt("return",S);case 2:return U.ZP.showLoading(),e.next=5,(0,Y.Kc)();case 5:if(t=e.sent,U.ZP.hideLoading(),he.hasModifyPassenger=!1,t){e.next=10;break}return e.abrupt("return",U.ZP.showToast("\u83b7\u53d6\u4e58\u5ba2\u4fe1\u606f\u5f02\u5e38\uff0c\u7a0d\u540e\u518d\u8bd5~","none"));case 10:return e.abrupt("return",(0,U.cI)(t.userPassengerList));case 11:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}function It(e){return V.length&&V.every((function(t){return e.identityType!==t}))?B.gq.INVALIDTYPE:e.idcard.no&&(2!==e.identityType||T(e))&&(8!=e.identityType&&28!=e.identityType||v(e.identityLimitDate)&&x(e.birthday))&&(7!=e.identityType||x(e.birthday))&&w(e.eNFirstName,e.eNLastName,e.cNName)?e.needEmail&&e.needMobile?B.gq.LACK_MOBILE:B.gq.NORMAL:B.gq.INCOMPLETE}function Zt(e){e.sort((function(e,t){return e.infoStatus-t.infoStatus}))}function Vt(e){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,c,o;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,St();case 2:n=e.sent,r=(0,U.Zs)(n),i=O,r.forEach((function(e){e.infoStatus=It(e)})),a=t&&i.find((function(e){return e.passengerID===t.passengerID})),a&&(c=r.filter((function(e){return e.passengerID!==t.passengerID&&i.find((function(t){return t.passengerID===e.passengerID}))})),o=r.find((function(e){return e.passengerID===t.passengerID})),Ft(o,c,!0)),Ke(n),Ve(n),b(r);case 11:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Dt(e){e=e&&He.find((function(t){return t.PassengerID===e.passengerID})),he.pas=e,he.hasModifyPassenger=!1;var t=d().getCurrentPage();t.navigateTo({url:"/pages/train/passenger/passenger",callback:function(){var t=(0,c.Z)((0,s.Z)().mark((function t(){var n=arguments;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.length>0&&void 0!==n[0]?n[0]:{},he.pas=null,he.hasModifyPassenger){t.next=4;break}return t.abrupt("return");case 4:Vt((0,U.Zs)(e));case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()})}function _t(e){return At.apply(this,arguments)}function At(){return At=(0,c.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!E){e.next=6;break}return e.next=3,Et(t,E);case 3:n=e.sent,e.next=27;break;case 6:if(!y.isSelectArgent){e.next=12;break}return e.next=9,Et(t,"\u7d27\u6025\u8d2d\u7968\u4e0d\u652f\u6301\u5b66\u751f\u7968\uff0c\u5efa\u8bae\u524d\u5f80\u8f66\u7ad9\u8d2d\u4e70\u6216\u8005\u8d2d\u4e70\u6210\u4eba\u7968");case 9:n=e.sent,e.next=27;break;case 12:if(!["\u5b9a\u5236\u5ea7\u5e2d","\u5b9a\u5236\u94fa\u4f4d","\u6307\u5b9a\u8f66\u53a2"].includes(y.selectedOtherProduct)){e.next=18;break}return e.next=15,Et(t,"\u5b66\u751f\u7968\u6682\u4e0d\u652f\u6301".concat(y.selectedOtherProduct,"\u529f\u80fd\uff0c\u5efa\u8bae\u60a8\u8d2d\u4e70\u6210\u4eba\u7968\u6216\u8005\u6682\u4e0d\u6dfb\u52a0"));case 15:n=e.sent,e.next=27;break;case 18:if(z.every((function(e){return["\u786c\u5367","\u4e8c\u7b49\u5ea7","\u786c\u5ea7","\u65e0\u5ea7"].includes(e)}))){e.next=24;break}return e.next=21,Et(t,"\u5b66\u751f\u7968\u4ec5\u652f\u6301\u786c\u5ea7\u3001\u786c\u5367\u3001\u4e8c\u7b49\u5ea7\u3001\u65e0\u5ea7\u5ea7\u5e2d\u4f18\u60e0\uff0c\u60a8\u9009\u62e9\u7684\u5ea7\u5e2d\u4e0d\u5728\u4f18\u60e0\u8303\u56f4\u5185\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff0c\u6216\u8d2d\u4e70\u6210\u4eba\u7968");case 21:n=e.sent,e.next=27;break;case 24:return e.next=26,Ot(t);case 26:n=e.sent;case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e)}))),At.apply(this,arguments)}function Et(e,t){return new Promise((function(n,i){f().showModal({content:t,showCancel:!0,cancelText:"\u6682\u4e0d\u6dfb\u52a0",confirmText:"\u6210\u4eba\u7968",success:function(t){t.confirm?n((0,r.Z)((0,r.Z)({},e),{},{passengerType:B.SS.ADULT})):t.cancel&&n()}})}))}function Ot(e){return yt.current.promise=new Promise((function(t,n){wt.current=e,yt.current.resolve=t,yt.current.reject=n,te(!0)})),yt.current.promise.then((function(){te(!1)})),yt.current.promise}function Rt(){return bt.current.promise=new Promise((function(e,t){bt.current.resolve=e,bt.current.reject=t,Le(!0)})),bt.current.promise.then((function(){Le(!1)})),bt.current.promise}function Ft(e,t,n){return Mt.apply(this,arguments)}function Mt(){return Mt=(0,c.Z)((0,s.Z)().mark((function e(t,a,c){var o,u,l,d,p,h,m,v,x,y,b,w,T,k,j,P;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t,!(a.length>=N)){e.next=3;break}return e.abrupt("return",f().showModal({content:"\u4e00\u4e2a\u8ba2\u5355\u6700\u591a\u53ea\u80fd\u6dfb\u52a0".concat(N,"\u540d\u4e58\u5ba2\uff0c\u8d85\u8fc7\u8bf7\u5206\u6279\u8d2d\u4e70")}));case 3:if(t.infoStatus===B.gq.NORMAL){e.next=6;break}return U.ZP.showToast("\u8bf7\u5148\u8865\u5168\u4e58\u5ba2\u4fe1\u606f","none"),e.abrupt("return",Dt(t));case 6:if(mt(0),t.passengerType!==B.SS.STUDENT){e.next=11;break}return e.next=10,_t(t);case 10:o=e.sent;case 11:if(console.log(t,"pas"),u=vt.current,l=u.isLessThan14,d=u.isDeclareChild,p=u.isOverAdultNum,h=u.isOverAge14,m=u.heightSeatCheck,v=t.cNName||t.ename,ge(he.selectDate).isBefore(ge(he.childAgeLimit),"day")||g){e.next=42;break}if(console.log("enter"),x=(0,U.Ay)(t.birthday,he.selectDate),y=a.filter((function(e){return e.isFreeChild})).length,b=a.filter((function(e){return e.passengerType===B.SS.ADULT})).length,t.passengerType!==B.SS.ADULT){e.next=26;break}if(!(x<14)){e.next=26;break}return l.content.forEach((function(e,t){l.content[t]=e.replace(/psgName/g,v)})),w=(0,r.Z)((0,r.Z)({},l),{},{pasAge:x,name:v,newPas:o,isFromCheckedEdit:c}),et(!0),pt(w),e.abrupt("return");case 26:if(t.passengerType!==B.SS.CHILD){e.next=42;break}if(!(x<6)){e.next=35;break}return T={},k="ordinary"===R?"TCWBuyFill_6ChildPopup_exposure":"TCWGrabFill_6ChildPopup_exposure",U.ZP.ubtTrace(k,{PageId:n,ExpoType:y<b?0:1}),T=y<b?(0,r.Z)((0,r.Z)({},d),{},{name:v,newPas:o,isFromCheckedEdit:c}):(0,r.Z)((0,r.Z)({},p),{},{name:v,newPas:o,isFromCheckedEdit:c}),et(!0),pt(T),e.abrupt("return");case 35:if(!(x>=14)){e.next=42;break}return j="ordinary"===R?"TCWBuyFill_14ChildPopup_exposure":"TCWGrabFill_14ChildPopup_exposure",U.ZP.ubtTrace(j,{PageId:n}),P=(0,r.Z)((0,r.Z)({},h),{},{pasAge:x,name:v,newPas:o,isFromCheckedEdit:c}),et(!0),pt(P),e.abrupt("return");case 42:if(t.passengerType!==B.SS.CHILD||!g){e.next=46;break}return et(!0),pt((0,r.Z)((0,r.Z)({},m),{},{name:v,newPas:o,isFromCheckedEdit:c})),e.abrupt("return");case 46:o&&(c?Bt(o):$([].concat((0,i.Z)(a),[o])));case 47:case"end":return e.stop()}}),e)}))),Mt.apply(this,arguments)}function Bt(e){var t=O.filter((function(t){return t.passengerID!==e.passengerID}));$([].concat((0,i.Z)(t),[e]))}function Ut(e){return $t.apply(this,arguments)}function $t(){return $t=(0,c.Z)((0,s.Z)().mark((function e(t){var r,a,c,o,u,l,d,p,f,h,g,m,v;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=dt.newPas,a=dt.type,c=dt.isFromCheckedEdit,o=2,u=0,"done"===t&&(r&&!c&&$([].concat((0,i.Z)(O),[r])),"isDeclareChild"===a&&(o=0),"isOverAdultNum"===a&&(o=3),"heightSeatCheck"===a&&(o=4)),"toAdult"===t&&(r.passengerType=B.SS.ADULT,r.isChild=!1,l=O.filter((function(e){return e.passengerID!==r.passengerID})),l.push(r),$(l),"heightSeatCheck"===a&&(u=3)),"edit"===t&&(Dt(r),"isOverAge14"===a&&(u=1)),"declare"!==t){e.next=16;break}if(d=xt.current,p=d.originSwitchOpen,f=d.grabSwitchOpen,h=d.transitSwitchOpen,!r){e.next=15;break}if(!("ordinary"===R&&!p&&!G||"grab"===R&&!f||G&&!h)){e.next=11;break}return et(!1),e.abrupt("return",U.ZP.showToast("\u8d2d\u7968\u540e\u8bf7\u5728\u8ba2\u5355\u8be6\u60c5\u9875\u7533\u62a5\u6216\u53d1\u8f66\u524d\u5230\u7ad9\u53f0\u7a97\u53e3\u529e\u7406","none"));case 11:r.isFreeChild=!0,g=O.filter((function(e){return e.passengerID!==r.passengerID})),g.push(r),$(g);case 15:o=1;case 16:"isDeclareChild"!==a&&"isOverAdultNum"!==a||(m="ordinary"===R?"TCWBuyFill_6ChildPopup_click":"TCWGrabFill_6ChildPopup_click",U.ZP.ubtTrace(m,{PageId:n,ExpoType:"isDeclareChild"===a?0:1,clickType:o})),"isOverAge14"===a&&(v="ordinary"===R?"TCWBuyFill_14ChildPopup_click":"TCWGrabFill_14ChildPopup_click",U.ZP.ubtTrace(v,{PageId:n,clickType:u})),c&&"declare"!==t&&Bt(r),et(!1);case 20:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}function Gt(e){mt(0);var t=(0,i.Z)(O);if(e.passengerType===B.SS.ADULT){var n=O.filter((function(e){return e.passengerType===B.SS.ADULT})).length,r=O.filter((function(e){return e.isFreeChild}));r.length===n&&(r.pop(),t=O.filter((function(e){return!e.isFreeChild})).concat(r))}t=t.filter((function(t){return t.passengerID!==e.passengerID})),$(t)}function Wt(e){Pt(e)?Gt(e):Ft(e,O)}function e(){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(O.length>0&&C.length>0)){e.next=3;break}return ot(!0),e.abrupt("return");case 3:if(0!==oe){e.next=8;break}return e.next=6,qt();case 6:e.next=9;break;case 8:Ht();case 9:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function qt(){return zt.apply(this,arguments)}function zt(){return zt=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(ot(!1),0!==O.length){e.next=3;break}return e.abrupt("return",U.ZP.showModal({title:"\u6e29\u99a8\u63d0\u793a",m:"\u8bf7\u5148\u9009\u62e9\u6216\u65b0\u589e\u4e58\u5ba2",confirmText:"\u77e5\u9053\u4e86"}));case 3:if(t=O.filter((function(e){return e.passengerType===B.SS.ADULT})),n=O.filter((function(e){return e.passengerType===B.SS.CHILD})),!n.length||t.length){e.next=7;break}return e.abrupt("return",f().showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u513f\u7ae5\u4e0d\u80fd\u5355\u72ec\u4e58\u8f66\u3002\u4e3a\u786e\u4fdd\u51fa\u884c\u5b89\u5168\uff0c\u513f\u7ae5\u9700\u6709\u6210\u4eba\u540c\u884c\u3002"}));case 7:if(e.t0=n.length&&!je,!e.t0){e.next=12;break}return e.next=11,Rt();case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=14;break}return e.abrupt("return");case 14:Se({confirmPassengerList:O,isAssPsg:!1});case 15:case"end":return e.stop()}}),e)}))),zt.apply(this,arguments)}function Ht(){if(ot(!1),0===C.length)return U.ZP.showModal({title:"\u6e29\u99a8\u63d0\u793a",m:"\u8bf7\u81f3\u5c11\u6dfb\u52a0\u4e00\u4e2a\u53d7\u8ba9\u4eba",confirmText:"\u77e5\u9053\u4e86"});Se({confirmPassengerList:C,isAssPsg:!0})}function Kt(e){return Jt.apply(this,arguments)}function Jt(){return Jt=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:he.hasModifyPassenger=!0,U.ZP.showLoading("\u52a0\u8f7d\u4e2d..."),t?De(!0):Vt(),setTimeout((function(){U.ZP.showToast("\u5237\u65b0\u6210\u529f","none",1e3),U.ZP.hideLoading()}),500);case 4:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}return(0,o.useEffect)((function(){k&&jt()}),[k,p]),(0,o.useEffect)((function(){(q.Z.isCtripApp||q.Z.isTrainApp)&&Re(!0);var e=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,U.SQ)(["wechat_mini_children_declare"]);case 2:return t=e.sent,e.next=5,(0,U.SQ)(["wechat_mini_children_declare_alert_Info"]);case 5:n=e.sent,vt.current=n,xt.current=t;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.useEffect)((function(){var e=O.find((function(e){return e.passengerType===B.SS.CHILD}));xe(e)}),[O]),f().useShareAppMessage((function(e){"button"==e.from&&"inviteAddFriend"===e.target.id&&setTimeout((function(){Ye(!0)}),2e3)})),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(u.View,{className:"passenger-wrap ".concat(k?"active":""),children:[k&&U.ZP.ubtTrace("s_trn_c_trace_".concat(n),{exposureType:"normal",bizKey:"selectPassenger"}),(0,L.jsx)(ae.ZP,{title:"\u4e58\u5ba2\u5217\u8868",onClickLeftIcon:Ne,bgColor:"#F5F7FA",fontWeight:"500",titleFontSize:"17"}),(0,L.jsx)(u.View,{class:"scroll-box",children:m.length>0?(0,L.jsxs)(L.Fragment,{children:[I?(0,L.jsx)(u.View,{className:"chilren-tip-view",children:(0,L.jsx)(u.Text,{children:I})}):(0,L.jsx)(u.View,{className:"tips-box white-box",onClick:function(){return it(!0)},children:(0,L.jsx)(u.View,{className:"tips-list",children:(0,L.jsxs)(u.View,{className:"child-tip-box",children:[(0,L.jsx)(u.View,{className:"cont",children:(0,L.jsxs)(u.View,{className:"child-tip",children:[(0,L.jsx)(u.Text,{class:"torage",children:"\u94c1\u8def\u5c40\u65b0\u89c4\uff1a"}),"\u5982\u9700\u8d2d\u4e70\u513f\u7ae5\u7968\uff0c\u8bf7\u624b\u52a8\u6dfb\u52a0\u513f\u7ae5\u4fe1\u606f"]})}),(0,L.jsx)(u.Text,{className:"ifont-arr2"})]})})}),!q.Z.isTrainApp&&re&&(0,L.jsx)(u.View,{className:"tips-box white-box",onClick:Ae,children:(0,L.jsx)(u.View,{className:"tips-list",children:(0,L.jsxs)(u.View,{className:"child-tip-box",children:[(0,L.jsx)(u.View,{className:"cont",children:(0,L.jsxs)(u.Text,{className:"child-tip orange",children:["\u79ef\u5206\u4f59\u989d",ye,"\uff0c\u6700\u9ad8\u53ef\u5151\u6362",ye/100,"\u5143\u8f66\u7968"]})}),(0,L.jsx)(u.Text,{className:"ifont-arr2 orange"})]})})}),(0,L.jsx)(u.View,{className:"psg-picker-box white-box",children:(0,L.jsx)(J,{from:R,pasIsSelected:Pt,goEditPas:Dt,onClickRefresh:Kt,showInvite:Oe,commonPassengerList:m,onClickPas:Wt,assigneeList:K,confirmAssPsgList:C,setLastSelectPsgTypeTab:mt,setConfirmAssPsgList:Z,maxPassengerLength:N,psgTab:oe,setPsgTab:ke,canUsePoint:re,login12306Name:we,toSetAssigneeList:De})}),(0,L.jsx)(F,{visible:rt,onHidePop:function(){return it(!1)}})]}):(0,L.jsx)(ce,{onClickAddPag:function(){return Dt()}})}),(0,L.jsxs)(u.View,{class:"botm-pay-picker",children:[ve&&(0,L.jsx)(ne,{childDocCheck:je,onClickChildDocCheck:function(){return Pe(!je)}}),(0,L.jsx)(u.Button,{class:"btn-blue btn-submit",onClick:e,children:"\u786e\u8ba4\u6dfb\u52a0"})]})]}),(0,L.jsx)(ee,{visible:Q,passenger:wt.current,onClickStu:function(e){yt.current.resolve(e)},onClickAdult:function(e){yt.current.resolve(e)}}),(0,L.jsx)(ie,{visible:Ze,onClickAccept:function(){Pe(!0),bt.current.resolve(!0)},onClickReject:function(){bt.current.resolve(!1)}}),(0,L.jsx)(ue,{visible:Be,onClose:function(){return Ue(!1)}}),(0,L.jsx)(de,{visible:We,onClose:function(){return Ye(!1)}}),dt&&(0,L.jsx)(M.Z,{visible:Xe,clickMaskClose:!0,direction:"middle",close:function(){return et(!1)},children:(0,L.jsxs)(u.View,{className:"pop-mid active child-alert",children:[(0,L.jsx)(u.View,{className:"child-alert-title",children:dt.title}),"isDeclareChild"===dt.type?(0,L.jsxs)(u.View,{className:"child-alert-seat",children:[(0,L.jsxs)(u.View,{className:"child-seat-view",children:[(0,L.jsx)(u.View,{className:"child-dot"}),(0,L.jsxs)(u.View,{className:"child-seat-right",children:[(0,L.jsxs)(u.Text,{children:["\u4e58\u5ba2\u300c",dt.name,"\u300d\u672a\u6ee16\u5468\u5c81"]}),(0,L.jsxs)(u.Text,{children:["\u60a8\u53ef",(0,L.jsx)(u.Text,{className:"free-color",children:"\u514d\u8d39\u643a\u5e26"}),"\u6b64\u513f\u7ae5\u4e0a\u8f66\uff0c\u65e0\u5ea7\u4f4d"]})]})]}),(0,L.jsxs)(u.View,{className:"child-seat-view",children:[(0,L.jsx)(u.View,{className:"child-dot"}),(0,L.jsx)(u.View,{className:"child-seat-right child-seat-btm",children:(0,L.jsx)(u.Text,{children:"\u5982\u9700\u5ea7\u4f4d\uff0c\u8bf7\u8d2d\u4e70\u513f\u7ae5\u7968"})})]})]}):"isOverAdultNum"===dt.type?(0,L.jsxs)(u.View,{className:"child-alert-order",children:[(0,L.jsx)(u.View,{className:"child-subtitle",children:"\u5f53\u524d\u5df2\u8d85\u51fa\u53ef\u514d\u8d39\u643a\u5e26\u7684\u513f\u7ae5\u6570\u91cf"}),(0,L.jsx)(u.View,{className:"child-order-view",children:dt.content.map((function(e,t){return(0,L.jsxs)(u.View,{className:me("child-order",{"child-order-top":t}),children:[(0,L.jsx)(u.View,{className:"child-dot-order"}),(0,L.jsx)(u.View,{className:"child-seat-right",children:e})]},t)}))})]}):(0,L.jsxs)(u.View,{className:"child-alert-cont",children:[(0,L.jsxs)(u.View,{className:"alert-cont-title",children:[dt.name,"\u4e58\u5ba2\u7c7b\u578b\u4e3a",dt.passengerType]}),(0,L.jsx)(u.View,{children:null===dt||void 0===dt||null===(t=dt.content)||void 0===t?void 0:t.map((function(e,t){return(0,L.jsx)(u.View,{className:"cont",children:e},t)}))})]}),(0,L.jsx)(u.View,{class:"child-alert-btns",children:dt.btnList.map((function(e,t){return(0,L.jsxs)(u.View,{className:me("btn",{cancel:!t,submit:t}),onClick:function(){return Ut(e.type)},children:[(0,L.jsx)(u.Text,{children:e.name}),(0,L.jsx)(u.Text,{className:"subName",children:(null===e||void 0===e?void 0:e.subName)||""})]},t)}))})]})}),(0,L.jsx)(fe,{setPsgTypePopVisible:ot,psgTypePopVisible:ct,submitNormalPsgs:qt,submitAssPsgs:Ht,lastSelectPsgTypeTab:gt})]})}(Ie)},ye=xe,be=g().classnames,we=function(e){var t=e.totalPoint,n=e.selectedPassengers,r=e.usePointFlag,i=e.memberStatus,l=e.selectedAssigneePassengers,p=e.assigneeList,f=e.priceInfo,h=e.train,g=e.originPassenger,m=e.login12306Name,v=e.canUsePoint,x=e.isTransit,y=e.setUsePointFlag,b=void 0===y?k:y,w=e.setReloadPointFlag,T=void 0===w?k:w,j=e.onSelectedPassengersChange,N=void 0===j?k:j,P=e.jumpToPointInfo,S=void 0===P?k:P,Z=e.setSelectedAssigneePassengers,V=void 0===Z?k:Z,D=(0,o.useState)(),_=(0,a.Z)(D,2),A=_[0],E=_[1],O=t/100,R=Math.ceil(5*h.price),F=0===n.length&&0===l.length,M=O<f.totalPricePas&&!r&&!A,B=(0,U.Zs)(g),$=d().getCurrentPage();(0,o.useEffect)((function(){if(p.length>0&&n.length>0){var e=C(n,p);E(e)}}),[p,n]),(0,o.useEffect)((function(){if(r){var e=I(l,B,!0,!0),t=e.compareRes,n=e.sameList;t&&N(n)}}),[l,g]),(0,o.useEffect)((function(){if(!r){var e=n.some((function(e){return e.isFreeChild}));if(!e){var t=I(n,p,!1,!0),i=t.compareRes,a=t.sameList;i&&V(a)}}}),[n,p]);var G=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.ZP.ubtTrace("TCWBuyFill_Points_click",{PageId:"10650084622",PageStatus:1}),e.next=3,W();case 3:t=e.sent,t.activateSuccess&&T(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,U.Ru)();return new Promise((function(t,n){var r="".concat(e,"/webapp/train/activity/ctrip-train-12306/#/login?userName=").concat(encodeURIComponent(m),"&memberStatus=").concat(i,"&from=wechatactivate");$.navigateTo({url:"/pages/trainActivity/twebview/index",data:{url:r,bridgeIns:function(e){var n,r=null===e||void 0===e||null===(n=e.detail.data)||void 0===n?void 0:n[0];t(r)}}})}))},Y=function(e){U.ZP.ubtTrace("TCWBuyFill_Points_exposure",{PageId:"10650084622",PageStatus:e})},q=function(){return(0,L.jsxs)(u.View,{className:be("point-box",{"open-point-bac":r}),children:[(0,L.jsx)(u.View,{children:(0,L.jsxs)(u.Text,{children:["\u6fc0\u6d3b12306\u4f1a\u5458\uff0c\u5750\u706b\u8f66\u6512\u79ef\u5206\uff0c",(0,L.jsx)(u.Text,{className:"point-active-color",children:"\u514d\u8d39\u5151\u8f66\u7968"})]})}),(0,L.jsx)(u.View,{className:"active-btn-box",children:(0,L.jsx)(u.View,{className:"active-btn",onClick:G,children:"\u6fc0\u6d3b"})})]})},z=function(){if(O<f.totalPricePas){if(!r&&A)return(0,L.jsxs)(L.Fragment,{children:[Y(3),(0,L.jsxs)(u.View,{className:"point-box open-point-bac",onClick:S,children:[(0,L.jsx)(u.Image,{className:"self-point-img",src:"https://images3.c-ctrip.com/train/2023-3/app-maipiao/3.23/jifenduihuan/img.-yjh-news.png"}),(0,L.jsxs)(u.Text,{children:["\u300c",A.cNName,"\u300d\u51fa\u884c\u540e\u5f97",(0,L.jsxs)(u.Text,{className:"point-active-color",children:[R,"\u79ef\u5206\uff0c\u4ef7\u503c",R/100,"\u5143"]})]})]})]});if(r)return(0,L.jsxs)(L.Fragment,{children:[Y(3),(0,L.jsx)(H,{tip:"\u79ef\u5206\u53ef\u80fd\u4e0d\u8db3\uff0c\u4f59\u989d".concat(t,"\uff0c\u6700\u9ad8\u53ef\u5151\u6362").concat(O,"\u5143\u8f66\u7968")})]})}if(F)return(0,L.jsxs)(L.Fragment,{children:[Y(4),(0,L.jsx)(H,{tip:"\u79ef\u5206\u4f59\u989d".concat(t,",\u6700\u9ad8\u53ef\u5151\u6362").concat(O,"\u5143\u8f66\u7968")})]});if(r){var e=I(l,B,!0),i=e.compareRes;return i?(0,L.jsx)(K,{}):(0,L.jsxs)(L.Fragment,{children:[Y(2),(0,L.jsx)(H,{tip:"\u4f7f\u7528\u79ef\u5206\u5151\u6362\u8f66\u7968\uff0c\u672c\u5355\u53ef\u4e3a\u60a8\u8282\u7701".concat(f.totalPricePas,"\u5143")})]})}var a=n.some((function(e){return e.isFreeChild})),s=I(n,p),c=s.compareRes;return!a&&c?(0,L.jsx)(K,{}):(0,L.jsxs)(L.Fragment,{children:[Y(4),(0,L.jsx)(H,{tip:"\u79ef\u5206\u4f59\u989d".concat(t,",\u5207\u6362\u53d7\u8ba9\u4eba\u53ef\u514d\u8d39\u5151\u6362\u6b64\u6b21\u8f66\u7968")})]})},H=function(e){var t=e.tip,n=void 0===t?"":t;return(0,L.jsxs)(u.View,{className:"point-box point-tip-box",onClick:S,children:[(0,L.jsx)(u.Text,{className:"point-active-color point-tip-left",children:n}),(0,L.jsx)(u.Text,{className:"ifont-arr point-active-color"})]})},K=function(){return(0,L.jsxs)(L.Fragment,{children:[Y(2),(0,L.jsxs)(u.View,{className:be("point-box",{"open-point-bac":r}),children:[(0,L.jsx)(u.View,{children:(0,L.jsxs)(u.Text,{children:[r?"\u5df2":"","\u4f7f\u7528\u79ef\u5206\u5151\u6362\u514d\u8d39\u8f66\u7968\uff0c\u672c\u5355",r?(0,L.jsxs)(u.Text,{className:"point-save-color",children:["\u5df2\u7701",f.totalPricePas,"\u5143"]}):(0,L.jsxs)(u.Text,{className:"point-cansave-color",children:["\u53ef\u7701",f.totalPricePas,"\u5143"]})]})}),(0,L.jsx)(u.View,{className:"active-btn-box",children:(0,L.jsx)(u.View,{className:be("close-btn",{"open-btn":r}),onClick:function(){return b(!r)},children:(0,L.jsx)(u.View,{className:be("close-circle",{"open-circle":r})})})})]})]})};return 0==i||void 0===i||x?!v||F&&h.price>O||M||0===p.length?null:(0,L.jsx)(z,{}):(0,L.jsxs)(L.Fragment,{children:[Y(1),(0,L.jsx)(q,{})]})},Te=we,ke=n(71280),je=d().train,Ne=g().dayjs,Pe=function(e,t){return!(86===+e&&!/(^1[3|4|5|6|7|8|9]\d{9}$)|(^09\d{8}$)/.test(t)||!t)||(U.ZP.showToast("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7","none"),!1)},Se=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,i;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.Gl)({configKey:"train_passenger_count_limit"});case 2:if(n=e.sent,null===n||void 0===n||null===(t=n.configInfo)||void 0===t||!t.content){e.next=7;break}return i=Number(null===n||void 0===n||null===(r=n.configInfo)||void 0===r?void 0:r.content),je.pasCntLimit=i,e.abrupt("return",i);case 7:return e.abrupt("return",5);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(e){return e.some((function(e){return 3===e.passengerType}))},Ie=function(e){var t=e.pageId,n=void 0===t?"":t,l=e.selectedPassengers,p=void 0===l?[]:l,f=e.mobile,h=void 0===f?{}:f,g=e.convertStu,m=void 0!==g&&g,v=e.maxPassengerLength,x=void 0===v?5:v,y=e.areaCode,b=void 0===y?"86":y,w=e.loginFlag,N=void 0!==w&&w,C=e.internationalConfig,I=C.disableDefaultPassenger,Z=C.showAddChild,V=C.psgFilterIdTypes,D=C.psgSelectorNotice,_=C.disableStudentNotice,A=e.needDefaultPassenger,E=void 0!==A&&A,R=e.transitDateFlag,$=void 0===R||R,G=e.from,z=void 0===G?"":G,H=e.isTransit,K=void 0!==H&&H,J=e.seatNames,Q=void 0===J?[]:J,X=e.passengerRef,ee=e.productLimitParams,te=void 0===ee?{}:ee,ne=e.selectedDateList,re=void 0===ne?[]:ne,ie=e.canUsePoint,ae=void 0!==ie&&ie,se=e.login12306Name,ce=void 0===se?"":se,oe=e.memberStatus,ue=e.usePointFlag,le=void 0!==ue&&ue,de=e.selectedAssigneePassengers,pe=void 0===de?[]:de,fe=e.totalPoint,he=void 0===fe?0:fe,ge=e.train,me=void 0===ge?{}:ge,ve=e.priceInfo,xe=void 0===ve?{}:ve,be=e.setSelectedAssigneePassengers,we=void 0===be?k:be,Pe=e.setUsePointFlag,Se=void 0===Pe?k:Pe,Ce=e.changePageTopBar,Ie=void 0===Ce?k:Ce,Ze=e.setPasgChanged,Ve=void 0===Ze?k:Ze,Le=e.onSelectedPassengersChange,De=void 0===Le?k:Le,_e=e.onMobileChange,Ae=void 0===_e?k:_e,Ee=e.onAreaCodeChange,Oe=void 0===Ee?k:Ee,Re=e.frontRiskPassengerClick,Fe=void 0===Re?k:Re,Me=e.setReloadPointFlag,Be=void 0===Me?k:Me,Ue=ke.WG.get(),$e=(0,o.useState)(!0),Ge=(0,a.Z)($e,2),We=Ge[0],Ye=Ge[1],qe=(0,o.useState)(!1),ze=(0,a.Z)(qe,2),He=ze[0],Ke=ze[1],Je=(0,o.useState)(!1),Qe=(0,a.Z)(Je,2),Xe=Qe[0],et=Qe[1],tt=(0,o.useState)(!1),nt=(0,a.Z)(tt,2),rt=nt[0],it=nt[1],at=(0,o.useState)(!1),st=(0,a.Z)(at,2),ct=st[0],ot=st[1],ut=(0,o.useState)(!1),lt=(0,a.Z)(ut,2),dt=lt[0],pt=lt[1],ft=(0,o.useState)([]),ht=(0,a.Z)(ft,2),gt=ht[0],mt=ht[1],vt=(0,o.useState)([]),xt=(0,a.Z)(vt,2),yt=xt[0],bt=xt[1],wt=(0,o.useState)(-1),Tt=(0,a.Z)(wt,2),kt=Tt[0],jt=Tt[1],Nt=(0,o.useState)(0),Pt=(0,a.Z)(Nt,2),St=Pt[0],Ct=Pt[1],It=(0,o.useRef)({}),Zt=(0,o.useRef)(!1),Vt=(0,o.useRef)(!1),Lt=(0,i.Z)(p).sort((function(e,t){return t.isFreeChild?-1:1}));function Dt(){return _t.apply(this,arguments)}function _t(){return _t=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Y.Lb)({ParameterList:[{Key:"BizType",Value:"TRN"}]});case 3:if(t=e.sent,n=t.result,r=t.commonContacts,0===n.resultCode||!n.errMessage){e.next=7;break}throw n.errMessage;case 7:if(0!==n.resultCode){e.next=9;break}return e.abrupt("return",r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("\u83b7\u53d6\u9ed8\u8ba4\u8054\u7cfb\u4eba\u5931\u8d25",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),_t.apply(this,arguments)}function At(e){return Et.apply(this,arguments)}function Et(){return Et=(0,c.Z)((0,s.Z)().mark((function e(t){var n,a,c;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,(0,U.ip)(ce);case 3:if(a=e.sent,1!==a.retCode||!a.assigneeList){e.next=8;break}n=a.assigneeList,e.next=9;break;case 8:return e.abrupt("return",U.ZP.showToast("\u83b7\u53d6\u4e58\u5ba2\u4fe1\u606f\u5f02\u5e38\uff0c\u7a0d\u540e\u518d\u8bd5~","none"));case 9:t||(n=n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{passengerType:B.SS.ADULT})}))),c=(0,i.Z)(n).sort((function(e,t){return"Y"!==t.isEffect?-1:1})),Vt.current=!0,bt(c);case 13:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ot(e){if(e&&e.length){var t=gt.filter((function(t){return e.find((function(e){return e.passengerID===t.PassengerID}))})).filter((function(e){return e.PassengerType===B.SS.ADULT}));ke.WG.setAttr("allPas",t)}}function Rt(e){return+e.passengerType===B.SS.ADULT||+e.passengerType===B.SS.STUDENT&&(e.convertStu||m)}function Ft(){var e=(0,i.Z)(p);e=e.filter((function(e){return!e.isBind})),e=e.filter((function(e){if(e.isChild){var t=(0,U.Ay)(e.birthday,je.selectDate);return t<14}return!0})),De(e),Ve(!0)}function Mt(e,t){if(t){var r=pe.filter((function(t){return pe[e].encNo!==t.encNo})),a=pe.filter((function(e){return Rt(e)}));return Rt(pe[e])&&1===a.length&&(r=r.filter((function(e){return e.passengerType!==B.SS.CHILD}))),we(r),void(0===r.length&&(De([]),Se(!1)))}var s=Lt[e],c=(0,i.Z)(p),o=p.filter((function(e){return Rt(e)}));if(Rt(s)){var u=p.filter((function(e){return e.isFreeChild}));o.length===u.length&&(u.pop(),c=p.filter((function(e){return!e.isFreeChild})).concat(u))}if(s.isFreeChild){var l="ordinary"===z?"TCWBuyFill_FreeChild_click":"TCWGrabFill_FreeChild_click";U.ZP.ubtTrace(l,{PageId:n})}Rt(s)&&1===o.length?(c.splice(e,1),c=c.filter((function(e){return!e.isChild}))):c.splice(e,1),et(c.some((function(e){return!e.isChild&&1!=e.identityType}))),Ot(c.filter((function(e){return e.passengerType===B.SS.ADULT}))),De(c),0===c.length&&we([]),Ve(!0)}function Bt(){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.Kc)();case 2:return t=e.sent,n=t.userPassengerList,n=S((0,U.cI)(n)),Zt.current=!0,mt(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}function $t(){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,c,o,u,l;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=ke.WG.getAttr("bind12306")||{},e.t0=i.name,e.t0){e.next=6;break}return e.next=5,(0,U._P)();case 5:e.t0=e.sent;case 6:if(a=e.t0,a){e.next=10;break}return je.self12306Pas=null,e.abrupt("return",null);case 10:return e.next=12,(0,Y.BQ)({UserName:a,Channel:"WX"});case 12:return c=e.sent,e.next=15,(0,U.i2)({Username:a});case 15:o=e.sent,u=null===(t=c.passengerList)||void 0===t?void 0:t.find((function(e){return e.isSelf})),l=null===(n=o.stuQualificationCallBackInfo&&JSON.parse(o.stuQualificationCallBackInfo))||void 0===n?void 0:n.studentInfoDTO,l&&"1"===l.status&&l.name===(null===(r=u)||void 0===r?void 0:r.passengerName)&&(u=null),je.self12306Pas=u;case 20:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Wt(e){var t;if(null!==Ue&&void 0!==Ue&&null!==(t=Ue.allPas)&&void 0!==t&&t.length&&d().user.isLogin()&&d().user.auth===Ue.auth){var n=(0,U.Zs)(e.filter((function(e){return Ue.allPas.find((function(t){return t.PassengerID===e.PassengerID&&t.PassengerType===B.SS.ADULT}))})));De(n.filter((function(e){return 2!==e.identityType||T(e)}))),et(n.some((function(e){return!e.isChild&&1!=e.identityType})))}else{var r=P((0,U.Zs)(e));r.passengerID&&De([r])&&et([r].some((function(e){return!e.isChild&&1!=e.identityType})))}}function Yt(){return qt.apply(this,arguments)}function qt(){return qt=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"ordinary"==z||E||!We?Qt():Fe();case 1:case"end":return e.stop()}}),e)}))),qt.apply(this,arguments)}function zt(){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Zt.current&&(!ae||Vt.current)){e.next=2;break}return e.abrupt("return",U.ZP.showToast("\u4e58\u5ba2\u4fe1\u606f\u52a0\u8f7d\u4e2d...","none"));case 2:return Ct(0),e.next=5,Kt();case 5:case"end":return e.stop()}}),e)}))),Ht.apply(this,arguments)}function Kt(){return Jt.apply(this,arguments)}function Jt(){return Jt=(0,c.Z)((0,s.Z)().mark((function e(){var t,r,i,a;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.ZP.ubtTrace("c_trn_c_".concat(n),{bizKey:"addPassenger"}),$t(),Ie(!1),e.next=5,en();case 5:if(t=e.sent,Ie(!0),t){e.next=9;break}return e.abrupt("return");case 9:r=t.confirmPassengerList,i=t.isAssPsg,q.Z.isTrainApp?Se(!1):Se(i),i?we(r):(a=r.filter((function(e){return e.mobilePhone||e.email})),et(a.some((function(e){return!e.isChild&&1!=e.identityType}))),Ot(a.filter((function(e){return e.passengerType===B.SS.ADULT}))),ke.WG.setAttr("auth",d().user.auth),De(a)),Ve(!0);case 13:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Qt(){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Zt.current&&(!ae||Vt.current)){e.next=2;break}return e.abrupt("return",U.ZP.showToast("\u4e58\u5ba2\u4fe1\u606f\u52a0\u8f7d\u4e2d...","none"));case 2:return ae&&!q.Z.isTrainApp&&(me.price>he/100&&(0===pe.length&&p.length||!le)?Ct(0):Ct(1)),e.next=5,Kt();case 5:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function en(){return tn.apply(this,arguments)}function tn(){return tn=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return je.selectedPsgers="",It.current.promise=new Promise((function(e,t){It.current.resolve=e,It.current.reject=t,it(!0)})),Ye(!1),It.current.promise.then((function(){it(!1)}),(function(e){console.log("\u4e58\u5ba2\u9009\u62e9\u5f39\u7a97\u5f02\u5e38",e)})),e.abrupt("return",It.current.promise);case 5:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function nn(){Ke(!1)}(0,o.useImperativeHandle)(X,(function(){return{initDefaultPassengers:Bt,onClickAddPasg:Qt,openNormalPsgTab:zt}})),(0,o.useEffect)((function(){var e=!(null!==re&&void 0!==re&&re.find((function(e){return Ne(e).isAfter(Ne(je.childAgeLimit),"day")||Ne(e).isSame(Ne(je.childAgeLimit),"day")}))),t=Ne(je.selectDate).isBefore(Ne(je.childAgeLimit),"day"),n=Z||(0===re.length?t:t&&e)&&$;if(ot(n),0!==re.length&&!e){var r=!!p.find((function(e){return e.isBind||e.isChild&&(0,U.Ay)(e.birthday,je.selectDate)>14}));r&&(pt(!0),Ft())}je.canShowChildren=n}),[re,Z]),(0,o.useEffect)((function(){(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!N){e.next=11;break}if(!E){e.next=11;break}if(!gt.length){e.next=6;break}e.t0=gt,e.next=9;break;case 6:return e.next=8,Bt();case 8:e.t0=e.sent;case 9:t=e.t0,I||Wt(t);case 11:case"end":return e.stop()}}),e)})))()}),[N,E,I]),(0,o.useEffect)((function(){(0,c.Z)((0,s.Z)().mark((function e(){var t,n,i,a,c,o,u,l;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(null===Ue||void 0===Ue?void 0:Ue.contactInfo)||{},!(null!==Ue&&void 0!==Ue&&Ue.mobile&&d().user.isLogin()&&d().user.auth===Ue.auth&&null!==t&&void 0!==t&&t.timestamp&&+Ne()<=t.timestamp)){e.next=7;break}Ae(Ue.mobile),Ue.areaCode&&Oe(Ue.areaCode),console.log("\u6839\u636e\u7f13\u5b58\u8bf7\u6c42",Ue.mobile,Ue.areaCode),e.next=12;break;case 7:return e.next=9,Dt();case 9:n=e.sent,console.log("\u6839\u636e\u63a5\u53e3\u8bf7\u6c42",n),(null===n||void 0===n?void 0:n.length)>0?(i=n[0],a=i.countryCode,c=i.mobilePhone,o=i.countryCodeForeign,u=i.mobilePhoneForeign,l=i.cNName,Oe((a&&c?a:o&&u&&o)||"86"),Ae((a&&c?c:o&&u&&u)||""),ke.WG.setAttr("contactInfo",(0,r.Z)({cNName:l},t))):Ae("");case 12:case"end":return e.stop()}}),e)})))()}),[N]),(0,o.useEffect)((function(){ce&&(Ct(0),Se(!1),ae&&At())}),[ce,ae]);var rn=function(){var e="https://m.ctrip.com/webapp/train/activity/static/ctrip/ctrip-common-config-page.html?configId=yDmz7sseYv&isHideNavBar=YES&titleBgColor=C6DDFC&title=\u79ef\u5206\u5151\u6362\u653b\u7565";d().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent(e))})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(u.View,{className:"pas-box",children:[!q.Z.isTrainApp&&(0,L.jsx)(Te,{selectedPassengers:p,usePointFlag:le,setUsePointFlag:Se,memberStatus:oe,selectedAssigneePassengers:pe,assigneeList:yt,totalPoint:he,train:me,priceInfo:xe,setReloadPointFlag:Be,originPassenger:gt,login12306Name:ce,onSelectedPassengersChange:De,setSelectedAssigneePassengers:we,jumpToPointInfo:rn,canUsePoint:ae,isTransit:K}),!le&&p.length>0&&(0,L.jsxs)(L.Fragment,{children:[p.length>1&&"grab"===z&&(0,L.jsx)(u.View,{className:"book-tips",children:"\u591a\u4f4d\u4e58\u5ba2\u4e00\u8d77\u62a2\u7968\u5c06\u4e25\u91cd\u5f71\u54cd\u62a2\u7968\u6210\u529f\u7387\uff0c\u5efa\u8bae\u60a8\u5206\u5f00\u4e0b\u5355\uff0c\u6210\u529f\u7387\u66f4\u9ad8"}),Xe&&(0,L.jsx)(u.View,{className:"book-tips",children:"\u975e\u8eab\u4efd\u8bc1\u4e58\u5ba2\u8bf7\u6309\u8bc1\u4ef6\u4e0a\u7684\u59d3\u540d\u8d2d\u7968\uff08\u5982\u62a4\u7167\u4e0a\u6709\u4e2d\u6587\uff0c\u8bf7\u4f7f\u7528\u4e2d\u6587\u540d\u8d2d\u7968\uff09"}),Lt.map((function(e,t){var r;return(0,L.jsxs)(u.View,{className:"pas-info",children:[e.isFreeChild&&U.ZP.ubtTrace("ordinary"===z?"TCWBuyFill_FreeChild_exposure":"TCWGrabFill_FreeChild_exposure",{PageId:n}),(0,L.jsx)(u.View,{className:"del",onClick:function(){Mt(t)},children:(0,L.jsx)(u.Text,{className:"ifont-del"})}),(0,L.jsxs)(u.View,{className:"cont",bindtap:"editPassenger",children:[(0,L.jsxs)(u.View,{className:"name",children:[e.pasName,(0,L.jsx)(u.Text,{class:"type ".concat(e.isFreeChild?"free-children-type":""),children:e.isFreeChild?"\u514d\u8d39\u4e58\u8f66\u513f\u7ae5":e.passengerType===B.SS.ADULT?"\u6210\u4eba\u7968":e.passengerType===B.SS.STUDENT?"\u5b66\u751f\u7968":e.passengerType===B.SS.CHILD?"\u513f\u7ae5\u7968":""})]}),(0,L.jsxs)(u.View,{className:"cert",children:[e.idcard&&("\u8eab\u4efd\u8bc1"==e.idcard.text?"\u4e8c\u4ee3\u8eab\u4efd\u8bc1":e.idcard.text)+" "+(1==(null===(r=e.idcard)||void 0===r?void 0:r.noDataType)?e.idcard.noMaskData:e.idcard.noShow),e.passengerType==B.SS.STUDENT&&(0,L.jsx)(u.View,{className:"fr",onClick:function(){j(6)},children:"\u5b66\u751f\u7968\u8bf4\u660e"}),(e.isChild||e.passengerType==B.SS.CHILD)&&(0,L.jsx)(u.View,{className:"fr",onClick:function(){Ke(!0)},children:"\u513f\u7ae5\u7968\u8bf4\u660e"})]})]})]},t+e.passengerID)})),(0,L.jsx)(u.View,{className:"btn-box need-margin",children:(0,L.jsx)(u.Button,{className:"btn-add",onClick:Qt,children:"\u6dfb\u52a0/\u7f16\u8f91\u4e58\u5ba2"})})]}),le&&pe.length>0&&(0,L.jsxs)(u.View,{children:[pe.map((function(e,t){var n=e.passengerType==B.SS.CHILD,r=e.passengerType==B.SS.STUDENT;return(0,L.jsxs)(u.View,{className:"pas-info",children:[(0,L.jsx)(u.View,{className:"del",onClick:function(){return Mt(t,!0)},children:(0,L.jsx)(u.Text,{className:"ifont-del"})}),(0,L.jsxs)(u.View,{className:"cont",children:[(0,L.jsxs)(u.View,{className:"name",children:[e.name,(0,L.jsx)(u.Text,{className:"type",children:"\u53d7\u8ba9\u4eba"}),(0,L.jsx)(u.View,{className:"type-right",onClick:function(){return jt(t)},children:(0,L.jsxs)(u.View,{children:[n?"\u513f\u7ae5\u7968":r?"\u5b66\u751f\u7968":"\u6210\u4eba\u7968",(0,L.jsx)(u.Image,{src:"https://images3.c-ctrip.com/train/2023-3/app-maipiao/5.18/jifenluodiye/img-zk.png",className:"triangle"})]})})]}),(0,L.jsxs)(u.View,{className:"cert",children:[B.MJ[e.idNoType]+" "+e.idNo,r&&(0,L.jsx)(u.View,{className:"fr",onClick:function(){j(6)},children:"\u5b66\u751f\u7968\u8bf4\u660e"}),n&&(0,L.jsx)(u.View,{className:"fr",onClick:function(){Ke(!0)},children:"\u513f\u7ae5\u7968\u8bf4\u660e"})]})]}),(0,L.jsx)(W,{train:me,pas:e,pasIdx:t,selectedAssigneePassengers:pe,setSelectedAssigneePassengers:we,assPsgTypePopVisibleIdx:kt,setAssPsgTypeVisibleIdx:jt})]},t+e.encNo)})),(0,L.jsx)(u.View,{className:"btn-box need-margin",children:(0,L.jsx)(u.Button,{className:"btn-add",onClick:Qt,children:"\u6dfb\u52a0\u53d7\u8ba9\u4eba"})})]}),!le&&0===p.length&&(0,L.jsx)(u.View,{className:"btn-box",children:(0,L.jsxs)(u.Button,{className:"btn-add long-btn",onClick:Yt,children:[(0,L.jsx)(u.Text,{className:"ifont-add"}),"\u6dfb\u52a0\u4e58\u5ba2\uff08\u6210\u4eba\u3001\u513f\u7ae5\u3001\u5b66\u751f\uff09"]})}),le&&0===pe.length&&(0,L.jsx)(u.View,{className:"btn-box",children:(0,L.jsxs)(u.Button,{className:"btn-add long-btn",onClick:Yt,children:[(0,L.jsx)(u.Text,{className:"ifont-add"}),"\u6dfb\u52a0\u53d7\u8ba9\u4eba"]})}),(0,L.jsx)(O,{areaCode:b,onAreaCodeChange:function(e){return Oe(e.code)},mobile:h,onMobileChange:function(e){return Ae(e)}}),(0,L.jsx)(F,{visible:He,canShowChildren:ct,onHidePop:nn}),(0,L.jsx)(ye,{pageId:n,loginFlag:N,defaultSelectedPasserger:p,defaultAssSelectedPsg:pe,visible:rt,maxPassengerLength:x,from:z,isTransit:K,seatNames:Q,notice:D,validTypes:V,disableStudentNotice:_,canShowChildren:ct,productLimitParams:te,boxOriginPassenger:gt,onOriginPassenger:mt,onClose:function(){var e,t;return null===(e=(t=It.current).resolve)||void 0===e?void 0:e.call(t)},onConfirm:function(e){var t,n;return null===(t=(n=It.current).resolve)||void 0===t?void 0:t.call(n,e)},usePointFlag:le,setUsePointFlag:Se,assigneeList:yt,toSetAssigneeList:At,canUsePoint:ae,psgTab:St,setPsgTab:Ct,totalPoint:he,jumpToPointInfo:rn,login12306Name:ce})]}),(0,L.jsx)(M.Z,{visible:dt,clickMaskClose:!0,direction:"middle",close:function(){return pt(!1)},children:(0,L.jsxs)(u.View,{className:"pop-mid active order-alert",children:[(0,L.jsx)(u.View,{class:"order-alert-title",children:"\u6e29\u99a8\u63d0\u793a"}),(0,L.jsxs)(u.View,{class:"order-alert-cont",children:[Ne(je.childAgeLimit).format("YYYY\u5e74MM\u6708DD\u65e5"),"\u8d77\u513f\u7ae5\u8d2d\u7968\u4e3a\u5b9e\u540d\u5236\uff0c\u8bf7\u8fd4\u56de\u5207\u6362\u65e5\u671f\uff0c\u6216\u6dfb\u52a0\u5b9e\u540d\u513f\u7ae5\u4e58\u5ba2"]}),(0,L.jsx)(u.View,{class:"order-alert-btns",children:(0,L.jsx)(u.View,{class:"btn submit",onClick:function(){return pt(!1)},children:"\u77e5\u9053\u4e86"})})]})})]})},Ze=Ie},27653:function(e,t,n){"use strict";n(90201);var r=n(71515),i=n(56884),a=n.n(i),s=n(2269),c=function(e){var t=e.type,n=void 0===t?0:t,i=e.from,c=void 0===i?"":i,o=e.internationalConfig,u=void 0===o?{}:o,l=function(e){a().navigateTo({url:"/pages/trainActivity/twebview/index?url=".concat(encodeURIComponent(e))})},d=function(){return l("https://m.ctrip.com/webapp/train/activity/orderservice/InsuranceDetail.aspx?ProductID=2007&terminal=1")},p=function(){return l("https://pages.ctrip.com/ztrip/document/ydxzctrip.html?noticetype=".concat(n,"&__ares_maxage=3m&mpenv=wx"))},f=function(){return l(u.ydxzUrl)},h=function(){return l("https://pages.ctrip.com/ztrip/mp/licence/index.html")};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.View,{className:"clause-box",children:[(0,s.jsxs)(r.View,{className:"txt",style:"font-size: ".concat("grab"===c?"11px":"12px"),children:["\u8bf7\u60a8\u5728\u63d0\u4ea4\u8ba2\u5355\u524d\u4ed4\u7ec6\u9605\u8bfb ",(0,s.jsx)(r.Text,{class:"link",onClick:d,children:"\u706b\u8f66\u7968\u4fe1\u606f\u670d\u52a1\u534f\u8bae"}),"\u3001",(0,s.jsx)(r.Text,{class:"link",onClick:p,children:"\u9884\u8ba2\u987b\u77e5"}),u.ydxzText?"\u3001":"",u.ydxzText?(0,s.jsx)(r.Text,{class:"link",onClick:f,children:u.ydxzText}):null]}),(0,s.jsxs)(r.View,{className:"txt",style:"font-size: ".concat("grab"===c?"11px":"12px"),children:["\u7531\u4e0a\u6d77\u987a\u9014\u79d1\u6280\u6709\u9650\u516c\u53f8\u63d0\u4f9b\u670d\u52a1\uff0c\u67e5\u770b ",(0,s.jsx)(r.Text,{class:"link",onClick:h,children:"\u8425\u4e1a\u6267\u7167"})]})]})})};t["Z"]=c},66728:function(e,t,n){"use strict";var r=n(298),i=n(90129),a=n(90201),s=n(71515),c=n(56884),o=n(81719),u=n.n(o),l=n(38717),d=n(2269),p=u().classnames,f=function(e){var t,n,o=e.freeBedList,u=void 0===o?[]:o,f=e.setGrabSelectSeatServiceList,h=void 0===f?l.UH:f,g=e.setFreeBedSelList,m=void 0===g?l.UH:g,v=e.selectedPassengers,x=void 0===v?[]:v,y=e.from,b=void 0===y?"ordinary":y,w=(0,a.useState)([]),T=(0,i.Z)(w,2),k=T[0],j=T[1];(0,a.useEffect)((function(){N()}),[u,x]);var N=function(){var e=[];e=u.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:!1,count:0,canAdd:x.length>0,canReduce:!1})})),"grab"===b&&(e=e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{productName:e.serviceName})}))),j(e),I(e)},P=function(e){var t=k[e];if(!t.canAdd)return l.ZP.showToast("\u4eba\u6570\u4e0d\u80fd\u518d\u589e\u52a0","none");var n=k.map((function(t,n){return n!=e?(0,r.Z)((0,r.Z)({},t),{},{canAdd:x.length>C()+1}):(0,r.Z)((0,r.Z)({},t),{},{selected:!0,canAdd:x.length>C()+1,canReduce:!0,count:t.count+1})}));j(n),I(n)},S=function(e){var t=k[e];if(t.canReduce){var n=k.map((function(t,n){return n!=e?(0,r.Z)((0,r.Z)({},t),{},{canAdd:C()-1<x.length||t.canAdd}):(0,r.Z)((0,r.Z)({},t),{},{selected:t.count-1>0,canReduce:t.count-1>0,count:t.count-1,canAdd:!0})}));j(n),I(n)}},C=function(){return null===k||void 0===k?void 0:k.reduce((function(e,t){return e+t.count}),0)},I=function(e){var t=[];"ordinary"===b?(t=e.map((function(e,t){var n=c._.pick(u[t],["serviceFee","productName","serviceType","isCanEleCToDZTicket","productId","selectSeatCode","isRefuseOtherSeat","specialType","showName","titleDescUrl"]);return(0,r.Z)((0,r.Z)({},n),{},{selectPassageCount:e.count})})),m(t)):(t=e.map((function(e,t){var n=c._.pick(u[t],["serviceType","servicePrice"]);return(0,r.Z)((0,r.Z)({},n),{},{passengerCount:e.count,isUseReservationFree:e.isCanReservationFree})})),t=t.filter((function(e){return e.passengerCount})),h(t))};return(0,d.jsxs)(s.View,{className:p("free-bed-list",{"list-box":"ordinary"===b}),children:[(0,d.jsx)(s.View,{className:"list",children:k.map((function(e,t){return(0,d.jsxs)(s.View,{className:"item",children:[(0,d.jsx)(s.View,{className:"cont",children:(0,d.jsx)(s.View,{className:"tit",children:e.productName})}),(0,d.jsxs)(s.View,{className:"btns",children:[(0,d.jsx)(s.View,{className:p("reduce",{disable:!e.canReduce}),onClick:function(){return S(t)}}),(0,d.jsx)(s.View,{className:p("count",{grey:!e.count}),children:e.count}),(0,d.jsx)(s.View,{className:p("add",{disable:!e.canAdd}),onClick:function(){return P(t)}})]})]},t)}))}),"ordinary"===b?(0,d.jsx)(s.View,{className:p("tips-orage-box",{"active tip-btm":C()>0}),children:null===(t=k[0])||void 0===t?void 0:t.acceptRules.map((function(e,t){return(0,d.jsx)(s.View,{className:"item",children:(0,d.jsx)(s.RichText,{nodes:e})},t)}))}):(0,d.jsx)(s.View,{className:p("tips-orage-box",{active:C()>0}),children:null===(n=k[0])||void 0===n?void 0:n.bottomTips})]})};t["Z"]=f},74937:function(e,t,n){"use strict";n.d(t,{uj:function(){return u},KX:function(){return l}});var r=n(90129),i=n(90201),a=n(92954),s=n.n(a),c=n(71515),o=n(2269),u=function(){return s().getSystemInfoSync().statusBarHeight},l=function(){var e=s().getMenuButtonBoundingClientRect(),t=s().getSystemInfoSync().statusBarHeight,n=2*(e.top-t)+e.height;return n},d=function(e){var t=e.title,n=void 0===t?"":t,a=e.leftType,d=void 0===a?"close":a,p=e.titleFontSize,f=void 0===p?16:p,h=e.bgColor,g=void 0===h?"#fff":h,m=e.tfColor,v=void 0===m?"#000":m,x=e.fontWeight,y=void 0===x?400:x,b=e.children,w=e.onClickLeftIcon,T=void 0===w?function(){}:w,k=(0,i.useState)(!1),j=(0,r.Z)(k,2),N=j[0],P=j[1],S=(0,i.useState)(0),C=(0,r.Z)(S,2),I=C[0],Z=C[1],V=(0,i.useState)(0),L=(0,r.Z)(V,2),D=L[0],_=L[1];(0,i.useEffect)((function(){P(s().getCurrentPages().length<=1),Z(u()),_(l())}),[]);var A="left-icon "+("close"===d?"ifont-closed-line":"")+("back"===d?N?"ifont-home":"ifont-arr":"");return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(c.View,{class:"inner-top-bar",style:"padding-top: ".concat(I,"px;height: ").concat(D,"px;line-height: ").concat(D,"px;text-align: center};font-size: ").concat(f,"px;background-color: ").concat(g,";font-weight: ").concat(y),children:[b||n,(0,o.jsx)(c.Text,{class:A,style:"top: ".concat(I+D/2,"px; color: ").concat(v),onClick:T})]})})};t["ZP"]=d},48782:function(e,t,n){"use strict";var r=n(90129),i=n(90201),a=n(92954),s=n.n(a),c=n(71515),o=n(81719),u=n.n(o),l=n(2269),d=u().classnames,p={bottom:"botm",middle:"mid"},f=function(e){var t=e.children,n=e.direction,a=void 0===n?"bottom":n,o=e.className,u=void 0===o?"":o,f=e.visible,h=void 0!==f&&f,g=e.mask,m=void 0===g||g,v=e.clickMaskClose,x=void 0!==v&&v,y=e.lock,b=void 0===y||y,w=e.close,T=e.defaultZindex,k=void 0===T?960:T,j=p[a],N=(0,i.useState)(!1),P=(0,r.Z)(N,2),S=P[0],C=P[1],I=(0,i.useState)(k),Z=(0,r.Z)(I,2),V=Z[0],L=Z[1],D="popup ".concat(j," ").concat(h?"active":""," ").concat(u),_=h?{zIndex:V}:{};(0,i.useEffect)((function(){setTimeout((function(){C(h)}),400),s().nextTick(E)}),[h]);var A=function(){x&&(null===w||void 0===w||w())},E=function(){var e=s().createSelectorQuery();e.selectAll(".page .popup.active").fields({computedStyle:["zIndex"],node:!0},(function(e){L(h?e.length+V:k)})).exec((function(){}))};return(0,l.jsxs)(l.Fragment,{children:[m&&(0,l.jsx)(c.View,{style:_,className:d("popup-mask",{active:h}),onClick:A,catchMove:!0}),(0,l.jsx)(c.View,{className:D,catchMove:b,style:_,children:(h||S)&&t})]})};t["Z"]=f},79496:function(e,t,n){"use strict";n.d(t,{c:function(){return i},_:function(){return a}});var r=n(90201),i=r.createContext(null),a=r.createContext(null)}}]);
//# sourceMappingURL=taroCommon.js.map