!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JSSDK",[],t):"object"==typeof exports?exports.JSSDK=t():e.JSSDK=t()}(this,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{alipayTradePay:()=>_,appendQuery:()=>W,fetchWalletToken:()=>Q,formatDate:()=>K,getOrderInfo:()=>j,getPageTraceId:()=>R,getThirdsList:()=>E,handleCheckBeforePay:()=>U,handlePaymentCallback:()=>B,handleSubmitCallback:()=>J,initPwdAuth:()=>F,isOldBuApi:()=>L,pageQueryStr:()=>$,payResModel:()=>O,paywayModel:()=>S,paywaySubmitModel:()=>q,pwdAuth:()=>G,pwdAuthSendSms:()=>V,queryHoldpayDetailModel:()=>M,queryMiddlegroundRouteInfo:()=>P,queryOrderExtend:()=>I,queryPayResult:()=>x,queryThirdPayStatus:()=>k,recordUserOrder:()=>z,sendUbt:()=>T,sendWatcher:()=>A,setPageTraceId:()=>N,setUbtOrder:()=>H,thirdsUtilCollect:()=>l,ttPay:()=>D,writeLogModel:()=>v});const s={warning:{logkey:"231675",type:1},info:{logkey:"231671",type:2},api:{logkey:"231672",type:3},click:{logkey:"231673",type:4},error:{logkey:"231674",type:5},chain:{logkey:"237590",type:6}};function r(e,t){try{const d=t&&t.cwx,f=d.getCurrentPage();if(f&&f.ubtDevTrace){var r=p(new Date)+"."+(new Date).getMilliseconds().toString().padStart(3,"0"),i=(e=e||{},Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),d.util.systemInfo||{});if(e.devicemode=i.model||"",e.devicesystem=i.system||"",e.wxversion=i.version||"",e.sdkv=i.SDKVersion||"",e.isPayNew=!0,e.logTime=r,f.pageId&&(e.pageId=f.pageId),e.pageTraceId=e.pageTraceId||a,e.extend&&"string"!=typeof e.extend)try{e.extend=JSON.stringify(e.extend)}catch(t){}if(e.result&&"string"!=typeof e.result)try{e.result=JSON.stringify(e.result)}catch(t){}var o={...e,order:++n,type:s[e.type].type},c=s[e.type].logkey;if(f.ubtDevTrace(c||"231671",o),e.isPrdTrace){var[u,l={}]=[o,t];try{const e=(l&&l.cwx).getCurrentPage();if(!e||!e.ubtDevTrace)return;e.ubtTrace(l.ubtKey||"250642",u)}catch(t){console.log(t)}}}}catch(t){}}let a="",n=1;function i(e,t){return(e+"&"+t||"").replace(/[&?]{1,2}/,"?")}const o=function({sign:e}={}){if(e)try{if(JSON.parse(e))return!1}catch(e){return!0}return e=swan.getSystemInfoSync().host,-1=="heytapbrowser|vivobrowser|mibrowser|bdlite|iqiyi|tomas|bdnetdisk|bdmap|duershow|xhsdiscover|bdminivideo|baiduhaokan|tieba|iovauto|zhidao|hex|bdappsearch|superapp|askmybaby|baiduinput|gamenow|baiduwenkuapp|fcapp|reliao|youjia|fortunecat|lemon|iqiyipps|baikeapp|baiduboxvision|baidudict|baijiahaoapp|baiduyunapp|bjjiguanfuwuapp|bdwkstapp|yymobile|fangtetourism|digitalcityapp|wywdazhu|meiguangong|ysdqapp|sousouapp|aifanfan|kktvapp|ysdqkkapp".indexOf(e)},c=(e,t)=>{e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i");const s=t.split("?");return 1<s.length&&null!=(t=s[1].match(e))?decodeURIComponent(t[2]):null};let u={};const l=e=>{const{loading:t,traceLog:s}=e;u.loading=t,u.traceLog=function(e,t={}){s(e,t)}},d={y:function(e,t){return(e=e.getFullYear())<0?"BC"+-e:t<3&&e<2e3?e%100:e},M:function(e){return e.getMonth()+1},d:function(e){return e.getDate()},H:function(e){return e.getHours()},m:function(e){return e.getMinutes()},s:function(e){return e.getSeconds()},e:function(e,t){return(1===t?"":2===t?"周":"星期")+[2===t?"日":"天","一","二","三","四","五","六"][e.getDay()]}};function p(e,t){return e instanceof Date||(e=function(e,t){return e=!e||e instanceof Date?e||new Date:"string"==typeof e&&/^(\d{4})[-/]?(\d{1,2})[-/]?(\d{1,2})( +(\d+):(\d+)(?::(\d+))?)?$/.test(e)?new Date(RegExp.$1>>0,(RegExp.$2>>0)-1,RegExp.$3>>0,(RegExp.$5||0)>>0,(RegExp.$6||0)>>0,(RegExp.$7||0)>>0):new Date(e)}(e)),(t||"yyyy-MM-dd HH:mm:ss").replace(/(\w)\1*/g,(function(t,s){if(s in d){for(s=""+d[s](e,t.length);s.length<t.length;)s="0"+s;t=s}return t}))}function f(e,t){let s="",r="5125";return y=t.nonce||function(){for(var e=[],t="0123456789abcdef",s=0;s<36;s++)e[s]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}(),e&&(s=e.clientID,r="99999999"),e={locale:"zh-CN",sysCode:t.sysCode||"09",version:"999001",payVersion:"999.001",applicationId:"B000001",appId:r,platform:t.platform||"mini",nonce:y,deviceInfo:{userAgent:"",clientId:s,sourceId:"8888",userIp:"",rmsToken:""}},Object.assign(e,t)}let y;function g(e){this.settings=Object.assign({url:"",method:"POST",data:{},requestHead:{},success:function(){},fail:function(){},serviceCode:"",context:{cwx:null}},e||{})}Object.assign(g.prototype,{constructor:g,isCtrip:function(){return!(!this.settings.context||!this.settings.context.cwx)},buildUrlAndSubEnv:function(){var e=this,t=e.isCtrip();let s="prd";var r=(s=e.settings.context.env?e.settings.context.env:s).toLowerCase();let a="https://gateway.secure.ctrip.com",n="fat5068",o="";return e.settings.context.subEnv&&(n=e.settings.context.subEnv),"prd"!==r&&(a="http://gateway.secure.fws.qa.nt.ctripcorp.com"),o=i(a+this.settings.url,"paytimestamp="+ +new Date),n&&(o+="&subEnv="+n),t||(t=(e=>({submit:e?"/mobile/member/cqtouchprepaidsubmit/dispatcher.htm":"/mobile/member/cqprepaidsubmit/dispatcher.htm",route:e?"/mobile/member/cqtouchprepaidroute/dispatcher.htm":"/mobile/member/cqprepaidroute/dispatcher.htm"}))(r=e.settings.context.isOldQunarOrder||!1),["31100102","31102301","31104404","31104406"].includes(e.settings.serviceCode)?o=t.route:["31100303","31102101","31002397"].includes(e.settings.serviceCode)&&(o=t.submit)),{requestUrl:o,subEnv:n}},excute:function(){const e=this;var t=e.isCtrip();const s=e.settings.context.cwx,a=new Date,n=e.settings.serviceCode;var i=e.buildUrlAndSubEnv();if(r({type:"api",devOriKey:"send_"+n,serviceCode:n,desc:`请求服务${n}开始`,apiMode:"send"},{cwx:s}),t)s.request({url:i.requestUrl,data:e.getData(),method:"POST",timeout:e.settings.timeout||6e4,header:{"Content-Type":"application/json"},success:function(t){var i=null;t.statusCode,t.data.ResponseStatus,t&&t.statusCode&&200==t.statusCode&&t.data&&t.data.ResponseStatus&&t.data.ResponseStatus.Ack&&"Success"===t.data.ResponseStatus.Ack?((i=t.data||{}).ResponseStatus=i.ResponseStatus||{},i.retCode=0,i.retMsg="SOA2执行成功",r({type:"api",devOriKey:"recieve_"+n,serviceCode:n,apiMode:"receive",cost:(new Date).getTime()-a.getTime(),desc:`请求服务${n}结束`,rc:i.head&&i.head.code},{cwx:s}),e.settings.success(i)):(!(t=(i=t.data||{}).ResponseStatus&&i.ResponseStatus.Errors&&i.ResponseStatus.Errors.length&&i.ResponseStatus.Errors[0].Message||"")||/No auth/gim.test(t)||/authentication/gim.test(t)||/deserialize/gim.test(t)||/RuntimeException/gim.test(t),e.settings.fail({retCode:1,retMsg:"SOA2执行失败"}))},fail:function(t){r({type:"error",devOriKey:`recieve_${n}_fail`,serviceCode:n,apiMode:"receive",cost:(new Date).getTime()-a.getTime(),desc:`请求服务${n}失败`,extend:t},{cwx:s}),e.settings.fail({retCode:2,retMsg:"SOA2执行失败",e:JSON.stringify(t)})},complete:function(t){e.settings.complete&&e.settings.complete(t)}});else{const s=this.settings.context.util,r=this.settings.context.request;t=s.getGlobalInfo();var o={subEnv:i.subEnv,serviceCode:e.settings.serviceCode,isnochecklogin:1};o=Object.assign(o,e.settings.urlParams||{}),r({service:i.requestUrl,method:"POST",returnAll:!0,header:{"Content-Type":"application/json"},param:o,data:e.getData(),success:function(t={}){var s;if(200!==(s=t.statusCode))e.settings.fail(t);else{var{ResponseStatus:s,payload:r}=t.data,{Ack:s,Errors:a}=s;if("Success"==s&&r)s=JSON.parse(r),e.settings.success(s);else{let s={};Array.isArray(a)?s=a[0]:"[object object]"!=Object.prototype.toString.call(a).toLowerCase()||a.length?s.Message=a:s=a,s.Message,e.settings.fail(t)}}},fail:function(t){e.settings.fail(t)}},t)}},getData:function(){var e=this,t=e.isCtrip(),s=e.settings.requestHead||{},r=function(e,t){let s="",r="";return e&&(r=e.clientID,s=e.user.auth),{cid:r,ctok:"",cver:"1.0",lang:"01",sid:"8888",syscode:t.sysCode||"09",auth:s,extension:[{name:"locale",value:"zh-CN"}]}}(this.settings.context.cwx,s),a=(s=f(this.settings.context.cwx,s),JSON.stringify({alg:"RS256",key:"200565",serviceCode:e.settings.serviceCode,auth:"",loginType:"QUNAR",clientIp:""}));e.settings.data=e.settings.data||{};let n=[];var i=e.settings.h5plat||29;return i+="",n.push(i),i=Object.assign({head:r,markInfo:{userFrom:n,supportPayInfos:["7"]},requestHead:s},e.settings.data),t?i:{payload:JSON.stringify(i),head:r,requestHead:a}}});var m=function(e){return(e=e||{}).url="/restful/soa2/22888/queryPayResult",e.serviceCode="31102101",new g(e)};function h(e,t){return e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),null!=(t=t.match(e))?unescape(t[2]):null}const C=(e,t)=>(e=new RegExp(`<${e}>(.*?)</${e}>`,"g").exec(t))?e[1]:"";let b=function(e,t){try{const r=e.reactApi,a=e.thirdPartyInfo||{};let n=a.sig,i=C("PrepayId",n),o=(C("AppId",n),C("PartnerId",n),C("NonceStr",n),C("TimeStamp",n),C("Sign",n),C("PackageValue",n)),c="";if(!i)try{var s;/^https?:/.test(a.sig)?(n=a.sig&&a.sig.split("?")[1]||"",i=h("prepay_id",n),o=h("package",n),c=a.sig):(i=(s=JSON.parse(e.thirdPartyInfo.sig)).prepayid,c=s.extra&&s.extra.mweb_url,o=s.package_value)}catch(s){return void t({resultCode:5010,resultMessage:"_quickWechatPay api fail: sig parse fail",res:e})}let u={},l=()=>{},d=null;l="undefined"==typeof qa?(d=r.wxpayGetType(),r.wxpay):(d=qa.getWxPaymentType(),qa.requestWxPayment.bind(qa)),d&&"none"!==d?("MWEB"==d&&(u={mweb_url:c,prepay_id:i,package:o},"undefined"!=typeof qa&&(u.mweb_url="https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmweb")),l({prepayid:i,extra:u,success:function(e){e.wxType=d,t({resultCode:0,resultMessage:"_quickWechatPay success",res:e})},fail:function(e){t({resultCode:5010,resultMessage:"_quickWechatPay api fail",res:e})},cancel:function(e){t({resultCode:4002,resultMessage:"wechatpayRequestPayment cancel",res:e})}})):t({resultCode:5010,resultMessage:"_quickWechatPay api fail: wx no install",res:e})}catch(s){t({resultCode:5011,resultMessage:s.message,res:e})}},w=function(e,t){function s(e){var s=e.resultStatus;t("9000"==s||"8000"==s?{resultCode:0,resultMessage:"_quickWechatPay success",res:e}:"4000"==s?{resultCode:4e3,resultMessage:"_quickAliPay api fail",res:e}:"6001"==s?{resultCode:1001,resultMessage:"alipayRequestPayment cancel",res:e}:"6002"==s||"6004"==s?{resultCode:s,resultMessage:"_quickAliPay api fail",res:e}:{resultCode:s,resultMessage:"_quickAliPay api fail"+JSON.stringify(e),res:e})}var r=(e.thirdPartyInfo||{}).sig||JSON.parse(e.extend||"{}").url;let a=()=>{};a="undefined"==typeof qa?e.reactApi.alipay:qa.requestAliPayment;try{a({orderInfo:r,payCallback:s,callback:s})}catch(e){t({resultCode:5010,resultMessage:"_quickAliPay api fail"+e.toString(),res:e})}},v=function(e){return(e=e||{}).url="/restful/soa2/22882/WriteLog",e.serviceCode="31104404",new g(e)},P=function(e){return(e=e||{}).url="/restful/soa2/22882/queryMiddlegroundRouteInfo",e.serviceCode="31101119",new g(e)},x=m,S=function(e){return(e=e||{}).url="/restful/soa2/22882/paymentListSearch",e.serviceCode="31100102",new g(e)},q=function(e){return(e=e||{}).url="/restful/soa2/22888/submitPayment",e.serviceCode="31100303",new g(e)},M=function(e){return(e=e||{}).url="/restful/soa2/22888/queryThirdPayDetail",e.serviceCode="31002397",new g(e)},I=function(e){return(e=e||{}).url="/restful/soa2/22882/queryOrderExtend",e.serviceCode="31100103",new g(e)},O=m,k=function(e){return(e=e||{}).url="/restful/soa2/22882/queryThirdPayStatus",e.serviceCode="31102301",new g(e)},T=r,R=()=>a,N=function(e){a=e},A=function(e,t){const s=t&&t.watcher;(new Date).toString(),(e=e||{}).actionType=e.actionType||"qunar_smallprogram_watcher";const r={};r.scene=e.scene||"",r.page=e.pageName||"holdpay",r.messageStr=Util.Object2String(e),r._exclude=!1,s.click(r)},_=function(e){my&&my.tradePay&&my.tradePay(e)},D=function(e){tt&&tt.pay&&tt.pay(e)},E=function(e){try{const{thirdPartyList:s=[]}=e.payCatalogInfo,{thirdPartyDisplayInfoList:r=[]}=e.displayInfo;var t=r.map((e=>{let t=e.brandId;var r=s.find((e=>e.brandId===t));return{...e,...r||{},status:e.status}}));return t}catch(e){}return[]},j=function(e){if(e)try{let s=(e=e||{}).orderInfo;if(!s)return{};let r={};"string"==typeof s.payOrderInfo&&(s.payOrderInfo=JSON.parse(s.payOrderInfo));var t=s.payOrderInfo&&s.payOrderInfo.merchant;return Object.assign(r,t||{}),r.title=s.orderTitle,r.currency=s.orderCurrency,r.amount=s.orderAmount,r.orderInfo=s,r.payType=s.payType,r}catch(e){}return{}},J=function(e){let t=(e=Object.assign({h5plat:29,submitRes:{},extend:{confirmModalFn:()=>{}},success:function(){},fail:function(){}},e||{})).submitRes;var s;if(t.rc=t.head.code,t.rmsg=t.head.message,t.reactApi=e.reactApi||{},t.thirdPartyInfo&&t.thirdPartyInfo.sig)if(1e5==t.head.code?t.rc=0:100001<=t.head.code&&(t.rc=1),1==t.rc)e.fail({resultCode:t.rc,resultMessage:t.rmsg});else if(0==t.rc)if(29===e.h5plat||55===e.h5plat)t.isNeedPushOrder=e.isNeedPushOrder,function(e,t){var s=e.isNeedPushOrder,r=e.thirdPartyInfo&&e.thirdPartyInfo.sig||"{}";try{var a={timeStamp:(e="string"==typeof r?JSON.parse(r):e).timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(e){t({resultCode:0,resultMessage:"wxRequestPayment success",res:e})},fail:function(e={}){let s=e.errCode?"3001_"+e.errCode:3001;try{(/cancel/.test(e.errMsg)||"requestPayment:fail user close qrcode"==e.payStatus||/cancel/.test(e.payStatus))&&(s=1001)}catch(e){}t({resultCode:s,resultMessage:"支付失败",res:e})},complete:function(e){}};s?wx.requestOrderPayment(a):wx.requestPayment(a)}catch(e){t({resultCode:3002,resultMessage:s?"视频号支付失败":"微信支付失败",res:e})}}(t,(function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)}));else if(30===e.h5plat||56===e.h5plat){var r=t,a=function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)};r=r.thirdPartyInfo&&r.thirdPartyInfo.sig||"";try{abridge.tradePay({orderStr:r,success:function(e){var t=e.resultCode;a("9000"==t||"8000"==t?{resultCode:0,resultMessage:"alipayRequestPayment success",res:e}:"4000"==t?{resultCode:4e3,resultMessage:"alipayRequestPayment fail",res:e}:"6001"==t?{resultCode:1001,resultMessage:"alipayRequestPayment cancel",res:e}:"6002"==t?{resultCode:6002,resultMessage:"alipayRequestPayments fail",res:e}:{resultCode:t,resultMessage:"alipayRequestPayments fail",res:e})}})}catch(t){a({resultCode:4004,resultMessage:"alipayRequestPayment api fail",res:t})}}else if(35===e.h5plat){var n=function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)};let s,a;r=(r=t).thirdPartyInfo&&r.thirdPartyInfo.sig||"";try{var i=JSON.parse(r);tt.pay({orderInfo:i,service:5,success:function(e){s="500"+e.code,0==e.code?n({resultCode:0,resultMessage:"ttRequestPayment success",res:e}):2==e.code||3==e.code||4==e.code?(2==e.code?a="支付失败":3==e.code?a="支付关闭":4==e.code&&(a="支付取消",s=1001),n({resultCode:parseInt(s),resultMessage:a,res:e})):9==e.code?n({resultCode:0,sendBuCode:"9",resultMessage:"ttRequestPayment notstatus",res:e}):1==e.code&&n({resultCode:0,resultMessage:"ttRequestPayment complete",res:e})},fail:function(e){n({resultCode:5010,resultMessage:"ttRequestPayment api fail",res:e})}})}catch(t){n({resultCode:5011,resultMessage:t.message,res:{}})}}else if(44===e.h5plat)!function(e,t,s){var r=e.thirdPartyInfo&&e.thirdPartyInfo.sig||"";const{confirmModalFn:a,request:n=null,cwx:i=null,util:u=null,env:l,subEnv:d,h5plat:p,loading:f}=t;t=o({sign:r});var y=e.buPayType.toLowerCase();const g=/ali/g.test(y);function h(e){s({resultCode:0,resultMessage:"支付成功",res:{}})}function C(e,t,r={}){s({resultCode:parseInt(e),resultMessage:t||"buRequestPayment api fail",res:r})}y=!!i;const b=(e,t="show")=>{f&&("show"===t?f.show(e):f.hide())},w=()=>{const{payNo:t,payToken:s}=e;"function"==typeof a&&a((()=>{let e=0;b("查询中","show"),function r(){m({data:{payToken:s,payNo:t},h5plat:p,context:{request:n,cwx:i,util:u,env:l,subEnv:d},success:t=>{var{head:t={}}=t;1e5===(t=t.code)?(b("","hide"),h()):5<=++e?(b("","hide"),C("6102","支付未成功",{msg:"轮询结束，未成功"})):setTimeout((function(){r()}),400)},fail:e=>{b("","hide"),C("6103","支付结果查询失败",e)}}).excute()}()}))};if(t)if(g)swan.requestAliPayment({orderInfo:r,success:e=>{"9000"===(e=e.resultStatus)||"8000"===e?h():"4000"==e?C("6003","支付宝支付失败"):"6001"==e?C(1001,"取消支付"):"6002"==e&&C("6005","网络不给力")},fail:e=>{let t="6007_"+(e&&e.errCode||0);e&&(2==e.errCode||/取消|cancel/.test(e.errMsg))&&(t=1001),C(t,"支付失败",{e,fn:"swan.requestAliPayment"})}});else{t=c("prepay_id",r);var v=c("package",r);let e={};y={prepayId:t,url:y?"https://secure.ctrip.com/webapp/payment2/resulttransit/wxrdforxiaomi.html":"https://tp.qunar.com/touch/wechatTransition",extraData:e=y?{mweb_url:"https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmweb",package:v,prepay_id:t}:{mweb_url:r}},swan.requestWeChatPayment({...y,fail:(e,t)=>{C("6101_"+(e.errCode||t||0),"支付失败",{err:e,code:t})},success:e=>{w()}})}else{let e={};try{e=JSON.parse(r)}catch(e){return s({resultCode:5020,resultMessage:"bupayment-signparse-error",res:e})}swan.requestThirdPayment({orderInfo:e,success:e=>{(g?h:w)()},fail:(e,t)=>{C("6021_"+(e.errCode||t||0),"支付失败",{err:e,code:t})}})}}(t,i=e.extend,(function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)}));else if(6===e.h5plat){var u=t,l=function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)},d=u.quickPayType;try{(/alipay/i.test(d)?w:b)(u,l)}catch(t){l({resultCode:5011,resultMessage:t.message,res:{}})}}else if(50===e.h5plat){var p=function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)};let s;d=(d=t).thirdPartyInfo&&d.thirdPartyInfo.sig||"{}",d=JSON.parse(d),ks.pay({serviceId:"1",orderInfo:d,success:function(e){s="500"+e.code,p({resultCode:0,resultMessage:"_ksRequestPayment success",res:e})},fail:function(e){p({resultCode:5010,resultMessage:"快手支付失败",res:e})}})}else 33===e.h5plat?(s=function(t){let s=e.success;(s=0!==t.resultCode?e.fail:s)(t)},u={url:u=(u=t).thirdPartyInfo&&u.thirdPartyInfo.sig||"",referer:"http://qunar.com/",success:function(e){s({resultCode:0,resultMessage:"_qqRequestWxPayment success",res:e})},fail:function(e){s({resultCode:5010,resultMessage:"QQ调用微信支付失败",res:e})}},qq.requestWxPayment(u)):e.fail&&e.fail({resultMessage:"lib未支持此支付方式",resultCode:1233});else t.rc<100?4==t.rc||8==t.rc||24==t.rc?e.success({resultCode:0,resultMessage:t.rmsg||"订单已提交支付，请勿重复提交支付！"}):12==t.rc?e.success({resultCode:0,resultMessage:t.rmsg}):66==t.rc?e.fail({resultCode:t.rc,resultMessage:"中风控"}):e.fail({resultCode:t.rc,resultMessage:t.rmsg}):201===t.rc?e.success({resultCode:201,resultMessage:"",extend:t.jsonExtend||""}):e.fail({resultCode:t.rc,resultMessage:t.rmsg});else l=t.head||{},e.fail({resultCode:"30009",resultMessage:t.rmsg||l.message||"没有下发签名"})},U=async function({res303:e,wx:t,isDirect:s=!0,payOptions:r={}}){try{const n=e.head&&e.head.code;if(![201,202,203].includes(n))return{doNext:!0};t.hideLoading();var a=JSON.parse(e.jsonExtend||"{}");const{newTradeInfo:i="{}",title:o="",content:c="",buttonInfo:u=[],qtouchExtend:l=""}=a,d=JSON.parse(i),p=l&&JSON.parse(l);return new Promise(((e,a)=>{if(201==n){const a={title:o,confirmText:f("continuePay")||"继续支付",cancelText:f("cancel")||"取消",content:c,success(t){let s="init";t.confirm||(s="initCancel"),e({doNext:!1,type:s,payToken:d.payToken,qtouchExtendObj:p})}};s||(a.showCancel=!0,a.cancelText=f("cancel")||"取消"),r.beforeShowPriceChangeModal&&r.beforeShowPriceChangeModal(),t.showModal(a)}else 202==n?t.showModal({title:o,confirmText:f("confirm")||f("cancel"),showCancel:!1,content:c,success(){e({doNext:!1,type:"back",...y("confirm")||y("cancel")})}}):203==n&&t.showModal({title:o,confirmText:f("continuePay")||"继续支付",cancelText:f("cancel")||"取消",content:c,success(t){t.confirm?e({...y("continuePay"),type:"notifyContinue",doNext:!1}):e({...y("cancel"),doNext:!1})}})}));function f(e="confirm"){return((u.find((t=>t.buttonAction===e))||{}).buttonContent||"").substring(0,4)}function y(e="continuePay"){return u.find((t=>t.buttonAction===e))}}catch(e){return(new Promise).then((()=>({doNext:!1})))}},W=i,$=function(e){return Object.keys(e).map((function(t){let s=encodeURIComponent(e[t]);return"undefined"===s&&(s=""),encodeURIComponent(t)+"="+s})).join("&")},L=o,H=function(e){n=e||0},K=p,B=function(e={}){return new Promise(((t,s)=>{var{head:r={}}=e,{code:r,message:a}=r;let n;1e5===r?t():s({status:n=101101===r?1:101102===r?2:-1,requestCode:r,message:a})}))},Q=function(e){return(e=e||{}).url="/restful/soa2/22882/applyWalletBindCard",e.serviceCode="31101302",new g(e)},z=function(e){return(e=e||{}).url="/restful/soa2/22882/recordUserOrder",e.serviceCode="31104406",new g(e)},F=function(e){return(e=e||{}).url="/restful/soa2/22882/initPwdAuth",e.serviceCode="31001503",new g(e)},V=function(e){return(e=e||{}).url="/restful/soa2/22882/pwdAuthSendSms",e.serviceCode="31001703",new g(e)},G=function(e){return(e=e||{}).url="/restful/soa2/22882/pwdAuth",e.serviceCode="31001702",new g(e)};return t})()));