(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[5690],{73484:function(e,t,n){"use strict";n.d(t,{Zu:function(){return ae.APITraceClass},fV:function(){return r.CustomWrapper},Sx:function(){return re},P0:function(){return ae.RenderTraceClass},pf:function(){return r.ScrollView},tq:function(){return r.Swiper},t3:function(){return r.SwiperItem},xv:function(){return r.Text},G7:function(){return r.View},AF:function(){return i.AF},c0:function(){return i.c0},GI:function(){return i.GI},x:function(){return i.x},vQ:function(){return i.vQ},t_:function(){return i.t_},rD:function(){return i.rD},Y:function(){return i.Y},cn:function(){return i.cn},H5:function(){return i.H5},Px:function(){return i.Px},X_:function(){return i.X_},hj:function(){return i.hj},hS:function(){return i.hS},g:function(){return i.g},En:function(){return i.En},Y8:function(){return i.Y8},ZP:function(){return se},SY:function(){return a.dynamicImageUrl},FN:function(){return o.getCurrentInstance},s_:function(){return o.getCurrentPages},xI:function(){return o.getSystemInfoSync},CF:function(){return o.showToast}});var i=n(85187),o=n(79756),r=n(71515),a=n(35907),s=(n(5838),n(57042)),l=n(24460),c=n(81876),u=n(21867),d=n(86066),p=n(45023),f=n(298),h=n(90201),m=n(27503),_=n(21342),v=n(54294),g=n(70245),y=n(2279),x={ui:(0,p.Z)((0,p.Z)({},y.rb.poi,(0,i.vw)((function(){return Promise.resolve().then((function(){return(0,g.Z)(n(5827))}))}))),y.rb.ticket,(0,i.vw)((function(){return Promise.resolve().then((function(){return(0,g.Z)(n(5827))}))}))),special:{},fetch:{applicationConfig:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(13999))}))},scenicSpotInfo:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(64581))}))},shelfInfo:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(14641))}))},couponData:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(97538))}))}},format:{tabsInfo:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(10722))}))},shelfs:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(56290))}))},poiList:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(71106))}))},scenicSpot:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(82611))}))},promotion:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(82945))}))},newCustomerCoupon:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(30389))}))}},state:{refreshShelf:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(52972))}))},changeHotelFilter:function(){return Promise.resolve().then((function(){return(0,g.Z)(n(87216))}))}},initFetchToolList:[{fetchList:["scenicSpotInfo","applicationConfig","shelfInfo","couponData"],formatList:["poiList","scenicSpot","newCustomerCoupon","promotion"]}]},b=x,k=n(79975),w=n(2269),I=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,s.Z)(this,n),t.call(this,e,b,k.DV.OFFLINE)}return(0,l.Z)(n,[{key:"render",value:function(){var e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,(0,f.Z)((0,f.Z)({},this.props),{},{scrollTo:this.props.scrollTo,config:this.config,state:this.state,InitRenderNum:2,ref:this.scrollContainerRef,changeFilter:this.changeFilter.bind(this),frontSecKillRefresh:this.frontSecKillRefresh.bind(this),changeHotelDate:this.changeHotelDate.bind(this),FooterComponent:this.props.renderScrollViewBottomHint,showFooter:!1,breatheNum:6,needSideBar:1!=(null===(e=this.state.tabsInfo)||void 0===e?void 0:e.length)||!this.state.hideShelfTypes,needSafe:!1,request:this.request,poplayerRef:this.poplayerRef,isHalf:this.props.isHalf})),(0,w.jsx)(_.Z,{ref:this.poplayerRef})]})}}]),n}(v.Z),Z=(0,h.memo)(I),T=n(86007),S=n(90129),C={header:"index-module_shSZb",header_back:"index-module_QOiQv",back:"index-module_iceeP",scenic_area:"index-module_BJ683",scenic_area_margin:"index-module_I6NxA",scenic_area_margin_top:"index-module_HNs07",scenic_info:"index-module_DakDD",scenic_name:"index-module_Eyybb",scenic_blank:"index-module_CpWSB",scenic_level:"index-module_b37Q6",tips_box:"index-module_TaoBW",tips_txt:"index-module_OejRA",notice_area:"index-module_YGQlw",notice_area_1:"index-module_sNoPF",scenic_notice:"index-module_i9tb1",scenic_notice_icon:"index-module_wSuIL",scenic_notice_forward:"index-module_DntvJ",background_img:"index-module_vu7Ny",path_img:"index-module_n4ytj",half_circle:"index-module_pyZlw",half_circle1:"index-module_eL8aC"},P={breathe:"index-module_sUHUb",image:"index-module_Xu9ml"},N=function(){return(0,w.jsx)(r.View,{className:P.breathe,children:(0,w.jsx)(r.Image,{className:P.image,src:"https://dimg04.c-ctrip.com/images/1o50z12000aui5o4t7380.png"})})},D=N,j=n(92954),R=n.n(j),L={scroll_view_wrap:"index-module_EMLbH",html:"index-module_XYRXI"},E=i.ua.isIPhoneX()?24:0,V=(0,h.memo)((function(e){var t=e.html,n=e.htmlClassName,o=e.testID;return t?(0,w.jsx)(r.ScrollView,{scrollY:!0,className:L.scroll_view_wrap,children:(0,w.jsx)(i.En,{className:L.html,testID:o||void 0,children:(0,w.jsx)(i.ur,{html:t,tagsStyles:O,className:"html_message_".concat(n),unitTransform:!0,imageProps:{imageStyle:{width:"100%"}},linkProps:{isCopy:!0}})})}):null}));V.displayName="PoplayerContentHTML";var A={style:{maxHeight:.8*R().getSystemInfoSync().windowHeight-E},contentStyle:{display:"flex",flex:1,minHeight:252}},O={a:{textDecorationLine:"none",lineHeight:18,fontSize:14},ol:{marginBottom:20,paddingLeft:0,color:"#666",lineHeight:18,fontSize:14},ul:{marginBottom:20,paddingLeft:0,color:"#666",lineHeight:18,fontSize:14},p:{marginTop:0,marginBottom:20,color:"#666",lineHeight:18,fontSize:14},h2:{fontSize:17,marginBottom:8,color:"#333"},li:{fontSize:14,color:"#666"},strong:{color:"#333",marginBottom:8,fontWeight:"bold"}},F=n(52231),M=n(49671),B=n(13878),U=F.R[i.GI.getPlatform()],G=function(e){var t=e?"tkt_onsite_basic_myorder_click":"tkt_onsite_basic_myorder_expo",n=e?"237018":"237017",i=(0,M.ji)()||{},o=i.viewspotid,r=void 0===o?"":o,a={ubtKey:t,data:{actioncode:t,key:n,actiontype:e?"click":"view",viewspotid:r,channelid:U},pageId:(0,B.dD)()};return e&&(a.type="click",a.key=a.ubtKey,a.params=a.data,delete a.ubtKey,delete a.data),a},H=function(e){var t=(0,M.ji)()||{},n=t.viewspotid,i=void 0===n?"":n,o=e?"tkt_onsite_basic_bookinginfo_click":"tkt_onsite_basic_bookinginfo_expo",r=e?"237016":"237015",a={ubtKey:o,data:{actioncode:o,key:r,actiontype:e?"click":"view",viewspotid:i,channelid:U},pageId:(0,B.dD)()};return e&&(a.type="click",a.key=a.ubtKey,a.params=a.data,delete a.ubtKey,delete a.data),a},z=function(e){var t=(0,M.ji)()||{},n=t.viewspotid,i=void 0===n?"":n,o=e?"tkt_onsite_basic_noticewindow_click":"tkt_onsite_basic_noticewindow_expo",r=e?"237020":"237019",a={ubtKey:o,data:{actioncode:o,key:r,actiontype:e?"click":"view",viewspotid:i,channelid:U},pageId:(0,B.dD)()};return e&&(a.type="click",a.key=a.ubtKey,a.params=a.data,delete a.ubtKey,delete a.data),a},q=n(45710),K=(0,h.forwardRef)((function(e,t){var n=(0,h.useState)({}),a=(0,S.Z)(n,2),s=a[0],l=a[1],c=s||{},u=c.scenicSpotPopupNotice,d=(0,h.useRef)(null);(0,h.useImperativeHandle)(t,(function(){return{setScenicSpot:l}})),(0,h.useEffect)((function(){null!==s&&void 0!==s&&s.pageTitle&&o["default"].setNavigationBarTitle({title:s.pageTitle})}),[s]),(0,h.useEffect)((function(){var e;u&&(null===(e=d.current)||void 0===e||e.show({component:(0,w.jsx)(V,{html:u,testID:z(!1)}),onCloseCallback:function(){(0,q.Zz)(z(!0),"click")},props:(0,f.Z)({title:"\u8d2d\u7968\u987b\u77e5"},A)}))}),[u]);var p=(0,h.useCallback)((function(t){setTimeout((function(){i.c0.getBoundingClientRect({node:t}).then((function(t){t&&t.height&&(null===e||void 0===e||e.setTopDistance(t.height))}))}),0)}),[]),m=s||{},v=m.type,g=m.scenicSpotName,y=m.scenicSpotStarLevel,x=m.scenicSpotNotice,b=m.desc,k=m.backGroundImgUrl,I=m.updateShelfHeight,Z=1==v?i.cn:h.Fragment,T=1==v?i.hQ:h.Fragment,P={start:{x:0,y:0},end:{x:0,y:1},colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0,0.6)"],direction:180,locations:[0,1]};if(!g)return(0,w.jsx)(D,{});var N=H(!1);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(r.View,{className:(0,i.AK)(C.header,1==v?C.header_back:null),ref:function(e){p(e)},children:[(0,w.jsxs)(Z,(0,f.Z)((0,f.Z)({},P),{},{className:C.back,children:[(0,w.jsxs)(r.View,{className:(0,i.AK)(C.scenic_area,2==v?C.scenic_area_margin:null),children:[(0,w.jsxs)(r.View,{className:C.scenic_info,children:[(0,w.jsx)(r.Text,{className:C.scenic_name,children:g}),(0,w.jsx)(r.Text,{className:C.scenic_blank}),y?(0,w.jsx)(r.Text,{className:C.scenic_level,children:y}):null]}),b?(0,w.jsx)(i.En,{testID:N,log:H(!0),onClick:function(){var e;null===(e=d.current)||void 0===e||e.show({component:(0,w.jsx)(V,{html:b}),props:(0,f.Z)({title:"\u8d2d\u7968\u8bf4\u660e"},A)})},className:(0,i.AK)(C.tips_box),children:(0,w.jsx)(r.Text,{className:(0,i.AK)(C.tips_txt,"border_round"),children:"\u8d2d\u7968\u8bf4\u660e"})}):null]}),x?(0,w.jsxs)(r.View,{className:(0,i.AK)(C.notice_area,2==v?C.notice_area_1:null),onClick:function(){var e;null===(e=d.current)||void 0===e||e.show({component:(0,w.jsx)(V,{html:x}),props:(0,f.Z)({title:"\u666f\u533a\u516c\u544a"},A)})},children:[(0,w.jsx)(i.t_,{className:C.scenic_notice,html:"".concat(x)}),(0,w.jsx)(r.View,{className:C.scenic_notice_icon,children:(0,w.jsx)(i.mO,{fontFamily:"crn_font_ttd_mini",className:C.scenic_notice_forward,children:"\ue944"})})]}):null,2==v&&k?(0,w.jsx)(i.Y,{onLoad:I,src:k,mode:"widthFix",style:{width:"100%"}}):null,(0,w.jsx)(r.View,{className:(0,i.AK)(C.half_circle,2==v?C.half_circle1:null)})]})),(0,w.jsx)(T,{src:k,className:C.background_img,children:(0,w.jsx)(w.Fragment,{})})]}),(0,w.jsx)(_.Z,{ref:d})]})}));K.displayName="Header";var W=(0,h.memo)(K),X=n(7560),Y={order:"index-module_erX3Z",order_icon:"index-module_GWAYr",order_text:"index-module_ll4RL"},Q=n(36280),J=function(){var e=function(){X.ZP.navigateTo({url:'/pages/myctrip/list/list?data={"id":"piao"}'})},t=G(!1);return(0,w.jsxs)(i.En,{className:Y.order,style:(0,Q.Z)({xShadow:0,yShadow:4,blur:12,opacity:.24,color:"rgb(0, 0, 0, 0.24)",aColor:"rgba(0, 0, 0, 0.8)",aElevation:12,spread:1}),onClick:e,log:G(!0),testID:t,children:[(0,w.jsx)(i.mO,{fontFamily:"crn_font_ttd_mini",className:Y.order_icon,children:"\ue94b"}),(0,w.jsx)(r.Text,{className:Y.order_text,children:"\u6211\u7684\u8ba2\u5355"})]})},$=h.memo(J),ee={menu_safearea:"index-module_IDLic"},te=n(65542),ne=te.Z,ie=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var o;return(0,s.Z)(this,n),o=t.call(this,e),(0,p.Z)((0,c.Z)(o),"state",void 0),(0,p.Z)((0,c.Z)(o),"mainRef",void 0),(0,p.Z)((0,c.Z)(o),"scrollViewRef",void 0),(0,p.Z)((0,c.Z)(o),"inSideRef",void 0),(0,p.Z)((0,c.Z)(o),"scenicSpotHeaderRef",void 0),(0,p.Z)((0,c.Z)(o),"urlParams",void 0),(0,p.Z)((0,c.Z)(o),"setShlefAndSideRef",(function(){var e,t,n,i,r,a;null===(e=o.mainRef)||void 0===e||null===(t=e.getInSideRef)||void 0===t||t.call(e,o.inSideRef),null===(n=o.mainRef)||void 0===n||null===(i=n.getScenicSpotHeaderRef)||void 0===i||i.call(n,o.scenicSpotHeaderRef),null===(r=o.inSideRef)||void 0===r||null===(a=r.getMainRef)||void 0===a||a.call(r,o.mainRef)})),(0,p.Z)((0,c.Z)(o),"scrollTo",(function(e){var t=e.y,n=void 0===t?0:t,r=e.anchor;r&&i.hj.isMini()?o.setState({buriedPoint:r}):o.setState({scrollTop:n})})),o.state={scrollTop:0,buriedPoint:"",topDistance:143},o.urlParams=o.getParamsFromUrl(),o.handleScenicSpotHeaderRef=o.handleScenicSpotHeaderRef.bind((0,c.Z)(o)),o.setTopDistance=o.setTopDistance.bind((0,c.Z)(o)),o}return(0,l.Z)(n,[{key:"getParamsFromUrl",value:function(){var e,t=(0,o.getCurrentInstance)(),n=(null===t||void 0===t||null===(e=t.router)||void 0===e?void 0:e.params)||{};return n}},{key:"setTopDistance",value:function(e){this.setState({topDistance:e})}},{key:"handleScenicSpotHeaderRef",value:function(e){this.scenicSpotHeaderRef=e,this.setShlefAndSideRef()}},{key:"render",value:function(){var e,t,n,i,o,a,s,l,c,u,d,p,f,h,m,_=this,v=q.bw.getRef(),g=[{key:"scene",value:(null===(e=this.urlParams)||void 0===e?void 0:e.scene)||""},{key:"anchorCategory",value:(null===(t=this.urlParams)||void 0===t?void 0:t.ticketCategory)||""}];for(var y in this.urlParams||{}){var x;if(y.endsWith("AutoPayload"))g.push({key:y,value:(null===(x=this.urlParams)||void 0===x?void 0:x[y])||""})}return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(r.ScrollView,{onScroll:function(e){_.mainRef.onScroll(e)},scrollY:!0,scrollTop:this.state.scrollTop,style:{height:"100vh",display:"flex",flexDirection:"column"},ref:function(e){_.scrollViewRef=e},className:"xtaro-poi-shelf",scrollIntoView:this.state.buriedPoint,children:[(0,w.jsx)(W,{ref:this.handleScenicSpotHeaderRef,setTopDistance:this.setTopDistance}),(0,w.jsxs)(r.View,{style:{display:"flex",position:"relative",top:-1,backgroundColor:"#f5f8fa"},children:[(0,w.jsx)(T.Z,{sidebarHeight:400,inner:!0,ref:function(e){_.inSideRef=e,_.setShlefAndSideRef()},targetPageRef:v,style:{position:"sticky",top:0},stickySideBar:!0,showSubTitle:!0,OtherComponent:function(){return(0,w.jsx)(r.View,{className:ee.menu_safearea,children:(0,w.jsx)(r.View,{className:ee.menu_safearea})})}}),(0,w.jsx)(Z,{ref:function(e){_.mainRef=e,_.setShlefAndSideRef()},isscan:"T",isHalf:!1,topDistance:this.state.topDistance,scrollTo:this.scrollTo.bind(this),spotId:null===(n=this.urlParams)||void 0===n?void 0:n.spotId,poiId:null===(i=this.urlParams)||void 0===i?void 0:i.poiId,passThroughParameters:g,scene:(null===(o=this.urlParams)||void 0===o?void 0:o.scene)||"",status:1,isInit:!0,defaultFilters:(null===(a=this.urlParams)||void 0===a?void 0:a.shelfFilters)||[],menuId:(null===(s=this.urlParams)||void 0===s?void 0:s.menuId)||"",businessIdTop:(null===(l=this.urlParams)||void 0===l?void 0:l.businessIdTop)||"",ticketGroupId:(null===(c=this.urlParams)||void 0===c?void 0:c.ticketGroupId)||"",anchorCategory:(null===(u=this.urlParams)||void 0===u?void 0:u.ticketCategory)||"",isTicketHome:!0,urlParams:{ctm_ref:(null===(d=this.urlParams)||void 0===d?void 0:d.ctm)||"",ext:(null===(p=this.urlParams)||void 0===p?void 0:p.ext)||"",traceid:null===(f=this.urlParams)||void 0===f?void 0:f.traceId,isscan:(null===(h=this.urlParams)||void 0===h?void 0:h.isscan)||"T",subEnv:(null===(m=this.urlParams)||void 0===m?void 0:m.subEnv)||""},targetPageRef:v,stickySideBar:!0})]})]}),(0,w.jsx)($,{})]})}}]),n}(ne),oe=ie,re=oe,ae=n(24221),se=o["default"]},35779:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_OTHER_RES=t.ERROR1_RES=t.ERROR_RES=t.SUCCESS_RES=t.RENDER_TRACE_NAME=void 0;var n="o_pgc_api_trace_";t.RENDER_TRACE_NAME="o_pgc_render_trace",t.SUCCESS_RES="".concat(n,"success"),t.ERROR_RES="".concat(n,"error"),t.ERROR1_RES="".concat(n,"error1"),t.ERROR_OTHER_RES="".concat(n,"error_other")},24221:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderTraceClass=t.APITraceClass=void 0;var o=i(n(56243));t.APITraceClass=o.default;var r=i(n(46160));t.RenderTraceClass=r.default},56243:function(e,t,n){"use strict";var i=n(77108)["default"],o=n(93430)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(35779),a=n(81599),s=function(){function e(t){var n=t.constructorTime,o=t.apiName,r=t.logFunc,s=t.pageId;i(this,e),this.startTime=0,this.constructorTime=0,this.apiName="",this.pageId="",this.startTime=(0,a.getCurrentTime)(),this.constructorTime=n,this.apiName=o,this.pageId=s,this.logFunc=r}return o(e,[{key:"getDuration",value:function(e){return(0,a.getCurrentTime)()-e}},{key:"errorRes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructorTime&&this.logFunc(r.ERROR_RES,Object.assign(Object.assign({},this.getTraceParam()),e))}},{key:"error1Res",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructorTime&&this.logFunc(r.ERROR1_RES,Object.assign(Object.assign({},this.getTraceParam()),e))}},{key:"successRes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructorTime&&this.logFunc(r.SUCCESS_RES,Object.assign(Object.assign({},this.getTraceParam()),e))}},{key:"errorOtherRes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructorTime&&this.logFunc(r.ERROR_OTHER_RES,Object.assign(Object.assign({},this.getTraceParam()),e))}},{key:"getTraceParam",value:function(){return{duration:this.getDuration(this.startTime),apiName:this.apiName,pageId:this.pageId,requestTimeFromConstructor:this.startTime-this.constructorTime}}}]),e}();t["default"]=s},46160:function(e,t,n){"use strict";var i=n(77108)["default"],o=n(93430)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(35779),a=n(81599),s=function(){function e(t){var n=t.constructorTime,o=t.pageId,r=t.logFunc;i(this,e),this.constructorTime=0,this.phaseName="",this.pageId="",this.constructorTime=n,this.logFunc=r,this.pageId=o}return o(e,[{key:"getDuration",value:function(e){return(0,a.getCurrentTime)()-e}},{key:"getTraceParam",value:function(e){return{phaseName:e,pageId:this.pageId,timeFromConstructor:this.getDuration(this.constructorTime)}}},{key:"trace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logFunc(r.RENDER_TRACE_NAME,Object.assign(Object.assign({},this.getTraceParam(e)),t))}}]),e}();t["default"]=s},81599:function(e,t){"use strict";function n(){return Date.now()}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=void 0,t.getCurrentTime=n},17513:function(e,t,n){"use strict";var i=n(79301),o=n(298),r=n(95308),a=n(69297),s=n(79932),l=n(89465),c=n(2883),u=null;t["Z"]={show:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,d,p,f,h,m;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(!t.delayTime){e.next=4;break}return e.next=4,(0,c._v)(t.delayTime);case 4:n="",r="",d=!(!t.btnOK||2!=t.btnOK.length),p=function(){},f=function(){},t.btnOK&&t.btnOK.length>0&&(h=t.btnOK,1===h.length?r=h[0]:(n=h[0],r=h[1])),t.btnCallBack&&t.btnCallBack.length>0&&(m=t.btnCallBack,1===m.length?f=m[0]:(p=m[0],f=m[1])),u&&(0,l.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:"".concat(t.title?"[".concat(t.title,"]:"):"").concat(t.content?t.content:"")})),a.Z.showModal({title:t.title||"",content:t.content||"",cancelText:d?n||"\u53d6\u6d88":"",confirmText:r||"\u786e\u8ba4",showCancel:d,success:function(e){(0,s.ZP)().taroEnv!==s.fO.alipay?e.confirm?(u&&(0,l.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:r||"\u786e\u8ba4"})),f()):e.cancel&&(u&&(0,l.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:n||"\u53d6\u6d88"})),p()):e.confirm?(f(),u&&(0,l.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:r||"\u786e\u8ba4"}))):(u&&(0,l.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:n||"\u53d6\u6d88"})),p())}});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},29339:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(49214),c=n(89465),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),o.onClick=o.onClick.bind((0,s.Z)(o)),o.sendLog=o.sendLog.bind((0,s.Z)(o)),o}return(0,o.Z)(n,[{key:"sendLog",value:function(){var e=this.props.log;if("function"==typeof e&&(e=e()),e){var t=e,n=t.params,i=t.type;(0,c.Zz)(n,i)}}},{key:"onClick",value:function(e){var t=this.props.onClick;this.sendLog(),this.sendDevTrace(),t&&t(e)}},{key:"sendDevTrace",value:function(){var e=this.props.devTraceData;null!==e&&void 0!==e&&e.attrs&&(0,c.Vg)(e)}}]),n}(l.Z),d=n(95401),p=n(2269),f=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,i=e.activeOpacity,o=void 0===i?.8:i,r=e.testID,a=e.onLayout,s=e.onPressIn,l=e.id;return(0,p.jsx)(d.Z,{id:l,onClick:this.onClick,className:t,style:n,testID:r,activeOpacity:o,onLayout:a,onPressIn:s,children:this.props.children})}}]),n}(u)},49787:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d},sg:function(){return c}});var i=n(1826),o=function(){},r=function(){},a=function(){},s=function(){},l=function(){},c=function(e){return!!i.Z.get(e||"")&&i.Z.get(e||"").assistComponent.props.isOpened},u=function(){return Object.keys(i.K).some((function(e){return!!c(e)}))},d={show:function(e){o(),a();var t=e.props,n=t.name,r=void 0===n?"":n,s=t.isOpened;if(void 0!==s)return i.Z.change(r,e);c(r)?e.props.isOpened=!1:e.props.isOpened=!0,i.Z.change(r,e),l("none")},hide:function(e){l(""),s(),e?(i.Z.get(e||"").assistComponent.props.isOpened=!1,i.Z.change(e||"")):(Object.keys(i.K).forEach((function(e){var t,n=null===(t=i.K[e])||void 0===t?void 0:t.assistComponent;n&&n.props&&n.props.isOpened&&(n.props.isOpened=!1)})),i.Z.destory(i.K)),u()||r()}}},20731:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(45023),o=n(298),r=n(57042),a=n(24460),s=n(21867),l=n(86066),c=n(90201),u=n(81876),d=n(49214),p=n(2883),f=n(49787),h=n(80692),m=n(77942),_=(n(32180)["window"],new Map),v=function(e){return _.get(e)},g=n(79932),y=n(21731),x=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,i.Z)((0,u.Z)(o),"modelEl",void 0),(0,i.Z)((0,u.Z)(o),"startObj",void 0),(0,i.Z)((0,u.Z)(o),"timer",void 0),(0,i.Z)((0,u.Z)(o),"state",void 0),(0,i.Z)((0,u.Z)(o),"initAnimation",void 0),(0,i.Z)((0,u.Z)(o),"fadeAnimation",void 0),(0,i.Z)((0,u.Z)(o),"slideFromBottomAnimation",void 0),(0,i.Z)((0,u.Z)(o),"slideFromRightAnimation",void 0),o.fadeAnimation=new h.fS.Value(0),o.slideFromBottomAnimation=new h.fS.Value(0),o.slideFromRightAnimation=new h.fS.Value(0),o.state={isShow:e.isOpened,isAnimation:!1,opened:!1},o.startObj={x:0,y:0},o.setAnimation(e.isOpened),o.setOpen(e.isOpened),!e.isOpened&&null!==e&&void 0!==e&&e.onClosed&&v("isComponent")&&e.onClosed(),o.onOpen=(0,p.Ds)(o.onOpen.bind((0,u.Z)(o)),20),o.modelEl=c.createRef(),o}return(0,a.Z)(n,[{key:"componentWillReceiveProps",value:function(e){if(e.isOpened!==this.props.isOpened||e.needSave!=this.props.needSave){var t=e.isOpened;t?this.onOpen():(this.onClose(!0),!e.needSave&&this.setState({opened:!1}))}}},{key:"setOpen",value:function(e){var t=this;setTimeout((function(){!t.state.opened&&e&&t.setState({opened:!0})}),500)}},{key:"onClose",value:function(e){var t=this;this.setState({isAnimation:!1},(function(){t.timer=setTimeout((function(){t.state.isShow&&(0,g.ZP)().platform==y.NX.Mini&&(t.setState({isShow:!1}),t.props.name&&f.ZP.hide(t.props.name),t.props.onClosed&&t.props.onClosed())}),350)})),this.state.isShow&&(0,g.ZP)().platform==y.NX.H5&&(e||this.props.isCloseAnimation)&&(this.setState({isShow:!1}),this.props.name&&f.ZP.hide(this.props.name),this.props.onClosed&&this.props.onClosed()),this.setRnAnimation(!1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"onOpen",value:function(){this.setState({isShow:!0}),this.setAnimation(!0)}},{key:"onTransitionEnd",value:function(){var e=this.state,t=e.isShow,n=e.isAnimation;t&&!n?(this.setState({isShow:!1,opened:!!this.props.needSave}),this.props.name&&f.ZP.hide(this.props.name),this.props.onClosed&&this.props.onClosed()):this.setState({opened:!0})}},{key:"setSyncAnimation",value:function(e){this.setState({isAnimation:e}),this.setRnAnimation(e)}},{key:"setAnimation",value:function(e){var t=this;if(e)var n=setTimeout((function(){t.setSyncAnimation(e),clearTimeout(n)}),20)}},{key:"setRnAnimation",value:function(e){var t=this,n=this.props.direction,i=void 0===n?"bottom":n;h.fS.parallel(["fadeAnimation","".concat("bottom"==i?"slideFromBottomAnimation":"slideFromRightAnimation")].map((function(n){return h.fS.timing(t[n],{toValue:e?1:0,duration:300,easing:h.oY.ease,useNativeDriver:!0})}))).start((function(){e?t.setState({opened:!0}):(t.props.name&&f.ZP.hide(t.props.name),t.setState({isShow:!1,opened:!!t.props.needSave}),t.props.onClosed&&t.props.onClosed())}))}},{key:"touchMoveStart",value:function(e){if(null!==e&&void 0!==e&&e.touches){var t=e.touches[0],n=t.pageX,i=t.pageY;this.startObj={x:n,y:i}}}},{key:"touchMove",value:function(e){var t,n=null===(t=this.modelEl)||void 0===t?void 0:t.current;if(n&&null!==e&&void 0!==e&&e.touches){var i=n.clientHeight,o=n.scrollHeight,r=n.scrollTop,a=this.startObj,s=(a.x,a.y),l=e.touches[0],c=(l.pageX,l.pageY),u=c-s;(0===r&&u>0||r+i+1>=o&&u<0)&&e.preventDefault()}}}]),n}(d.Z),b=n(3902),k=n(77395),w=n(23347),I={m_poplayer_content:{},m_poplayer:{},m_poplayer_mask_touch:{},m_poplayer_content_padding:{paddingBottom:(0,k.Vh)(24)}},Z=(0,g.ZP)().taroEnv===g.fO.alipay?"fixed":"absolute",T={m_poplayer:(0,o.Z)({position:Z,bottom:0,right:0,left:0,width:"100%",height:"100%",zIndex:200,overflow:"hidden",elevation:20},I.m_poplayer),m_poplayer_mask_touch:(0,o.Z)({display:"flex",height:"100%",width:"100%",position:Z,top:0,left:0,right:0},I.m_poplayer_mask_touch),m_poplayer_mask:{flex:1,backgroundColor:"rgba(0, 0, 0, .6)",opacity:0},m_poplayer_content:(0,o.Z)({overflow:"hidden",width:"100%",minHeight:300,maxHeight:"100%",borderTopLeftRadius:8,borderTopRightRadius:8,backgroundColor:"#fff",position:Z,right:0,left:0},I.m_poplayer_content),m_poplayer_transition:(0,k.eR)("all .2s"),m_poplayer_transition_body:(0,k.eR)("all 0.2s"),m_poplayer_content_bottom:(0,k.vs)("translate3d(0, 100%, 0)"),m_poplayer_content_right:(0,k.vs)("translate3d(100%, 0, 0)"),m_poplayer_content_top:(0,o.Z)((0,o.Z)({},(0,k.vs)("translate3d(0, -100%, 0)")),{},{borderTopLeftRadius:0,borderTopRightRadius:0}),m_poplayer_content_in:(0,k.vs)("translate3d(0, 0, 0)"),m_poplayer_header:{width:"100%",height:44,flexShrink:0,borderTopLeftRadius:8,borderTopRightRadius:8,borderColor:"#999",textAlign:"center",position:"relative"},m_poplayer_title:{textAlign:"center",lineHeight:(0,k.Nv)(44),fontWeight:"700",fontSize:18,color:"#333"},m_poplayer_close_btn:{width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",position:Z,top:0,right:4}},S=(0,w.Z)(T),C=n(20159),P=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,a.Z)(n)}(d.Z),N=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return null}}]),n}(P),D=n(2269),j=200,R=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e,t=this.state,n=t.isShow,r=t.isAnimation,a=t.opened,s=this.props,l=s.name,c=s.title,u=s.children,d=s.scrollHeight,p=s.bottomHeight,f=s.zIndex,_=s.header,v=void 0===_?null:_,y=s.popHeight,x=s.direction,w=void 0===x?"bottom":x,Z=s.style,T=void 0===Z?{}:Z,P=s.headerProps,R=s.isShowHeader,L=void 0===R||R,E=s.isScrollView,V=void 0===E||E,A=s.renderOnshow,O=void 0!==A&&A,F=s.needSave,M=void 0!==F&&F,B=s.Breath,U=void 0===B?null:B,G=s.maxHeight,H=s.contentMaxHeight,z=s.conentStyles,q=void 0===z?{}:z,K=s.minHeight,W=s.bounces,X=s.isHasImg,Y=s.animationTop,Q=s.fullHeader,J=s.animation,$=void 0===J||J,ee=s.isFullScreen,te=(s.isModal,s.contentClassName),ne=s.headerStyles,ie=void 0===ne?{}:ne,oe=s.containerIsFull,re=s.isTransparent,ae=void 0!==re&&re,se=!1;X&&(0,g.ZP)().isSwan&&(se=!0);var le=v,ce=(0,k.wh)([y?(0,C.kg)({height:y}):{},G||K?(0,C.kg)({maxHeight:G||"100%",minHeight:K||300}):{},ee?{height:"100%",maxHeight:"100%"}:{}]),ue=(0,C.kg)((0,o.Z)({position:"relative",height:d||"100%",maxHeight:H||"100%",boxSizing:"border-box",paddingBottom:(0,m.cY)()&&!p&&"top"!=w?null===I||void 0===I||null===(e=I.m_poplayer_content_padding)||void 0===e?void 0:e.paddingBottom:0},q)),de="bottom"==w?"slideFromBottomAnimation":"slideFromRightAnimation",pe=this[de].interpolate({inputRange:[0,1],outputRange:"top"==w?[-(Y||400),0]:[900,0]}),fe="bottom"==w||"top"==w?(0,C.kg)({translateY:pe}):(0,C.kg)({translateX:pe});r&&(n=!0);var he=M?{zIndex:n?f||j:-j,elevation:n?f||j:-j,opacity:n?1:0}:{};M&&(n=!0);var me=h.G7;return n?(0,D.jsxs)(me,(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({className:"m_poplayer_mask_touch_fix",style:(0,C.kg)((0,k.wh)([S.m_poplayer,(0,o.Z)({bottom:p||0,zIndex:f||100},he),T])),catchMove:!0},"className","ottd-detail-poplayer"),"visible",n),"animationType","none"),"transparent",!0),"statusBarTranslucent",!0),"children",[(0,D.jsx)(h.Au,{onClick:this.onClose.bind(this),style:(0,k.wh)([S.m_poplayer_mask_touch]),activeOpacity:1,testID:"".concat(l,"_mask"),disableScroll:!0,children:(0,D.jsx)(h.fS.View,{style:(0,k.wh)([S.m_poplayer_mask,S.m_poplayer_transition,{opacity:this.fadeAnimation.interpolate({inputRange:[0,1],outputRange:[0,1]})},(0,k.Nm)([{key:"opacity",value:r?(0,k.Oh)(1):(0,k.Oh)(0)}])]),onTransitionEnd:this.onTransitionEnd.bind(this)})}),(0,D.jsxs)(h.fS.View,{className:te,style:(0,C.kg)((0,k.wh)([S.m_poplayer_content,S.m_poplayer_transition_body,"top"==w||Q?{top:0,borderTopLeftRadius:0,borderTopRightRadius:0}:{bottom:0},{transform:[fe]},ce,"right"===w?S.m_poplayer_content_right:S.m_poplayer_content_bottom,r?S.m_poplayer_content_in:"right"===w?S.m_poplayer_content_right:"bottom"===w?S.m_poplayer_content_bottom:S.m_poplayer_content_top,$?{}:S.m_poplayer_content_in,ee?{borderTopLeftRadius:0,borderTopRightRadius:0}:{},ae?{backgroundColor:"transparent"}:{}])),children:[v?(0,D.jsx)(le,(0,o.Z)({},P)):L?ee?(0,D.jsx)(N,{translucent:!0,statusBarBg:"transparent",barStyle:"light-content",backgroundColor:"#fff",title:c,titleColor:"#333",leftIconColor:"#666",leftClick:this.onClose.bind(this)}):(0,D.jsxs)(h.G7,{style:S.m_poplayer_header,disableScroll:!0,children:[(0,D.jsx)(h.xv,{style:(0,k.wh)([S.m_poplayer_title,ie.m_poplayer_title]),children:c}),(0,D.jsx)(h.Au,{style:S.m_poplayer_close_btn,onClick:this.onClose.bind(this),testID:"".concat(l,"_close_btn"),children:(0,D.jsx)(b.Z,{type:ie.closeIcon?ie.closeIcon:"iconCancel",size:44,color:ie.closeColor?ie.closeColor:"#333"})})]}):null,V?(0,D.jsx)(h.pf,{style:ue,scrollY:!0,bounces:W,ref:this.modelEl,contentContainerStyle:oe?{flexGrow:1}:{},onTouchStart:this.touchMoveStart.bind(this),onTouchMove:this.touchMove.bind(this),children:se?u:O&&!a?U&&(0,D.jsx)(U,{}):u}):(0,D.jsx)(h.G7,{style:ue,children:se?u:O&&!a?U&&(0,D.jsx)(U,{}):u})]})])):null}}]),n}(x)},33231:function(e,t,n){"use strict";n.d(t,{ol:function(){return c}});var i=n(298),o=n(69297),r=n(17513),a=n(89465),s=1500,l=null,c=function(e){l=e},u=function(e){if(""===e||null===e||void 0===e)return!1;var t=(e.match(/[\x00-\xff]/g)||[]).length,n=e.length,i=t+2*(n-t);return i>40&&(r.Z.show({content:e,btnOK:["\u77e5\u9053\u4e86"]}),!0)};t["ZP"]={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;u(e)||(l&&(0,a.Vg)((0,i.Z)((0,i.Z)({},l),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),o.Z.showToast({title:e||"",duration:t,icon:"none"}))},hide:function(e){o.Z.hideToast(e)}}},87038:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(298),o=n(71515),r=n(77395),a=n(23347),s=(0,a.Z)({backgroundPosition:"50%",backgroundSize:"cover",position:"absolute",left:0,top:0,right:0,bottom:0}),l=s,c=(n(90201),n(79932)),u=n(2269),d=(0,c.ZP)().supportWebp,p=function(e){var t,n=e.url,a=e.style,s=void 0===a?{}:a;return d||(n=null===(t=n)||void 0===t?void 0:t.replace(/(jpg|png)_\.webp/,"$1")),(0,u.jsx)(o.View,(0,i.Z)((0,i.Z)({},e),{},{url:"",style:(0,r.wh)([{backgroundImage:"url(".concat(n,")")},l,s])}))},f=p},80692:function(e,t,n){"use strict";n.d(t,{fS:function(){return z},oY:function(){return K},JO:function(){return Z},Ee:function(){return R},Zy:function(){return te.Z},II:function(){return ie},N1:function(){return re},o:function(){return X},k0:function(){return le},pf:function(){return E},Xn:function(){return M},aA:function(){return se},xv:function(){return v},Au:function(){return B.Z},G7:function(){return r}});var i=n(71515),o=i.View,r=o,a=n(298),s=n(68277),l=n(23347),c=n(77395),u=n(36556),d=n(90201),p=n(2269),f=["numberOfLines","style","children","testID","className","onPress","onClick"],h=function(e){var t=e.numberOfLines,n=void 0===t?0:t,o=e.style,r=e.children,l=e.testID,d=e.className,h=e.onPress,m=e.onClick,v=(0,s.Z)(e,f),g=o;(0,u.HP)(l,v);var y=(0,u.a7)(l);switch(n){case 0:break;case 1:g=(0,c.wh)([_.one_line,g]);break;default:g=(0,c.wh)([(0,c.Sf)(n),g])}return h&&!m&&(v.onClick=h),(0,p.jsx)(i.Text,(0,a.Z)((0,a.Z)({},v),{},{style:(0,c.wh)([_.default_style,g||{}]),className:"".concat(y," ").concat(d),children:r}))};h.displayName="Text";var m=h,_=(0,l.Z)({one_line:{display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all"},default_style:{whiteSpace:"pre-wrap"}}),v=m,g=n(93212),y=n(14081),x=n(20159),b=n(77942),k={},w=function(){var e,t;if(k.hasOwnProperty("isTaroTnt"))return k["isTaroTnt"];if((0,b.rI)())return k["isTaroTnt"]="object"==("undefined"===typeof n.g?"undefined":(0,g.Z)(n.g))&&!(null===(t=n.g)||void 0===t||!t.__isTNT),k["isTaroTnt"];var i=(0,x.FN)(),o=null===(e=i.router)||void 0===e?void 0:e.path;return!!o&&(k["isTaroTnt"]=/.*webapp\/tnt/.test(o)||/.*pages\/tnt/.test(o),k["isTaroTnt"])},I=function(e){var t=e.type,n=e.size,o=e.color,r=e.style,a=void 0===r?{}:r,s=e.usePx,u=(0,y.ly)(n),d=w()?"ottdpage":"ottd";return(0,p.jsx)(i.Text,{className:"".concat(d," ottd-").concat(t),style:(0,c.wh)([a,(0,l.Z)({color:o||a["color"],fontSize:s?a["fontSize"]:u?"".concat(Number(n.replace("rem",""))/2,"rem"):"".concat(n,"rpx")})])})},Z=I,T=n(57042),S=n(24460),C=n(21867),P=n(86066),N=n(79932),D=(0,N.ZP)().supportWebp,j=function(e){(0,C.Z)(n,e);var t=(0,P.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,S.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.style,o=void 0===n?{}:n,r=t.url,a=t.mode,s=t.onError,l=void 0===s?function(){}:s,c=t.useSwan,u=t.onLoad,d=void 0===u?function(){}:u;return D||(r=null===(e=r)||void 0===e?void 0:e.replace(/(jpg|png)_\.webp/,"$1")),(0,p.jsx)(i.Image,{className:(0,N.ZP)().isSwan&&c?"image_swan":"",src:r,style:o,mode:a,webp:!0,onError:l,onLoad:d})}}]),n}(d.Component),R=j,L=i.ScrollView,E=L,V=n(59438),A=function(e){(0,C.Z)(n,e);var t=(0,P.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,S.Z)(n)}(V.ZP),O=function(e){(0,C.Z)(n,e);var t=(0,P.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,S.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.forwardedRef,o=e.stickySectionHeadersEnabled,r=e.renderItem,a=e.renderSectionHeader,s=e.ListFooterComponent,l=e.style,c=e.scrollTop,u=e.sections,d=e.showLength;return(0,p.jsx)(i.ScrollView,{className:t,style:l,scrollY:!0,ref:n,scrollTop:c,children:(0,p.jsxs)(i.View,{children:[u&&u.length&&u.slice(0,d||u.length).map((function(e){return(0,p.jsxs)(i.View,{className:"m_comp_section",children:[(0,p.jsx)(i.View,{className:"m_comp_section_header ".concat(o?"m_comp_section_header_sticky":""),children:a({section:e})}),(0,p.jsx)(i.View,{className:"m_comp_section_content",children:e.data&&e.data.length&&e.data.map((function(t,n){return r({item:t,index:n,section:e})}))})]})})),s]})})}}]),n}(A),F=d.forwardRef((function(e,t){return(0,p.jsx)(O,(0,a.Z)((0,a.Z)({},e),{},{forwardedRef:t}))})),M=F,B=n(95401),U=n(45023),G=function(){function e(t){(0,T.Z)(this,e),(0,U.Z)(this,"interpolate",(function(e){return"0"}))}return(0,S.Z)(e,[{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dom,i=void 0===n?{}:n,o=t.H5Animation,r=void 0===o?{}:o;null!==i&&void 0!==i&&i.style&&Object.assign(i.style,r)}}]),e}(),H={View:i.View,Value:G,ScrollView:i.ScrollView,Image:R,Text:i.Text,parallel:function(e){return{start:function(e){}}},timing:function(e,t){return{start:function(e){var n=t||{},i=n.dom,o=n.H5Animation;null!==i&&void 0!==i&&i.style&&Object.assign(i.style,o),e&&e()}}},sequence:function(e){return{start:function(e){}}},createAnimatedComponent:function(e){},event:function(){var e;return(null===(e=arguments.length<=1?void 0:arguments[1])||void 0===e?void 0:e.listener)||function(){}}},z=H,q={ease:"",linear:function(e){return e}},K=q,W=function(e){var t=e.direction,n=e.colors,o=e.style,r=e.children,s=e.className;return(0,p.jsx)(i.View,{style:(0,x.kg)((0,a.Z)({backgroundImage:t||0===t?"linear-gradient(".concat(t,"deg, ").concat(n[0],", ").concat(n[1],")"):"linear-gradient(".concat(n[0],", ").concat(n[1],")")},o)),className:s,children:r})},X=W,Y=n(90129),Q=b.Db.get("window"),J=Q.width;J=Math.min(J,540);var $=(0,N.ZP)().isInServer,ee=function(e){var t=e.data,n=void 0===t?[]:t,i=e.current,o=void 0===i?0:i,s=e.scrollEnabled,l=void 0!==s&&s,u=e.renderItem,f=e.onSwiperChange,h=void 0===f?function(){}:f,m=e.duration,_=void 0===m?300:m,v=e.level,g=void 0===v?10:v,y=(0,d.useRef)(null),x=n.length,b=(0,d.useRef)(0),k=(0,d.useRef)(0),w=(0,d.useState)(-1),I=(0,Y.Z)(w,2),Z=I[0],T=I[1],S=(0,d.useState)(!1),C=(0,Y.Z)(S,2),P=C[0],N=C[1],D=(0,d.useState)(J),j=(0,Y.Z)(D,2),R=j[0],L=j[1],E=(0,d.useState)($?{transform:"translate3d(".concat(-(o>=x?x-1:o)*(0,c.Vh)(R).split("rem")[0],"rem, 0px, 0)"),transitionDuration:"0ms"}:{}),V=(0,Y.Z)(E,2),A=V[0],O=V[1],F=function(e){var t=Z+e,n=-t*R;B(n,t,0!==e)},M=function(e,t){var n=-e*R;N(!0),B(n,e,!0,t)},B=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;O((0,a.Z)((0,a.Z)({},A),{transform:"translate3d(".concat(e,"px, 0px, 0)"),transitionDuration:i+"ms"})),setTimeout((function(){P&&N(!1),n&&(h(t),T(t))}),i)},U=function(e){if(l){var t=e.targetTouches[0];b.current=t.pageX,k.current=t.pageY,N(!0)}},G=function(e){if(l&&P){var t=e.targetTouches[0],n=t.pageX-b.current,i=t.pageY-k.current;if(Math.abs(n)>Math.abs(i)){var o=t.pageX-b.current-Z*R;O((0,a.Z)((0,a.Z)({},A),{transform:"translate3d(".concat(o,"px, 0px, 0)"),transitionDuration:_+"ms"}))}}},H=function(e){if(l){var t=e.changedTouches[0],n=t.pageX-b.current,i=t.pageY-k.current;if(Math.abs(n)>Math.abs(i)){var o=n>0&&Z>0||n<0&&Z<x-1,r=Math.abs(n*g)>R&&o;F(n<0&&r?1:n>0&&r?-1:0)}}};return(0,d.useEffect)((function(){var e=o>=x?x-1:o;M(e,-1===Z||Math.abs(e-Z)>1?0:_)}),[o]),(0,d.useEffect)((function(){L(y.current.offsetWidth)}),[]),(0,p.jsx)(r,{ref:y,onTouchStart:U,onTouchMove:G,onTouchEnd:H,style:(0,a.Z)({position:"relative",display:"flex",flexDirection:"row",height:"100%",transitionDuration:"0ms",transitionTimingFunction:"ease",transform:"translate3d(".concat(o*R,"px, 0px, 0)")},A),children:n.map((function(e,t){return(0,p.jsx)(r,{style:{overflow:"hidden",flexShrink:0,width:"100%",height:"100%",cursor:"default"},children:u({item:e,index:t})},e.id||t)}))})},te=(d.Component,n(87038)),ne=i.Input,ie=ne,oe={},re={dismiss:function(){x.ZP.hideKeyboard(),(oe["keyboardDidHide"]||[]).forEach((function(e){return e()}))},addListener:function(e,t){"function"===typeof t&&(oe[e]?oe[e].push(t):oe[e]=[t])},removeListener:function(e,t){var n=oe[e]||[];oe[e]=n.filter((function(e){return e!==t}))},removeAllListeners:function(e){oe[e]=[]}},ae=(n(94262),(0,N.ZP)().isSwan?function(e){return(0,p.jsx)(r,{style:(0,a.Z)({display:"inline"},e.style),children:e.children})}:v),se=ae,le=r;i.CustomWrapper,(0,l.Z)({container:{backgroundColor:"#DFDFDF",alignSelf:"center"},horizontal:{height:c.WI,width:"100%",marginVertical:8},vertical:{width:c.WI,height:12,marginHorizontal:5}})},95401:function(e,t,n){"use strict";var i=n(298),o=(n(90201),n(71515)),r=n(2269),a=function(e){return(0,r.jsx)(o.View,(0,i.Z)((0,i.Z)({},e),{},{onClick:function(t){e.onPressIn&&e.onPressIn(t),e.onClick&&e.onClick(t),e.onPressOut&&e.onPressOut(t)}}))};t["Z"]=a},49214:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(57042),o=n(24460),r=n(81876),a=n(21867),s=n(86066),l=n(45023),c=n(90201),u=function(e,t,n){var i=!0;try{i=!0,i="props"===n?!(JSON.stringify(e,(function(e,t){return t&&"function"===typeof t?"":t}))==JSON.stringify(t,(function(e,t){return t&&"function"===typeof t?"":t}))):!(JSON.stringify(e)==JSON.stringify(t))}catch(e){i=!0}return i},d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,r.Z)(o),"openCompare",!1),o}return(0,o.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){if(!this.openCompare)return!0;var n=!0;return n=u(e,this.props,"props"),n||(n=u(t,this.state)),n}}]),n}(c.Component)},1826:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(98374),o={},r=null,a={isSetBodyFixed:!0},s=o;t["Z"]={add:function(e,t,n){Array.isArray(e)?e.forEach((function(e){o[e]={component:t,assistComponent:(0,i.I8)(n)}})):o[e]={component:t,assistComponent:n}},get:function(e){return e?o[e]:o},change:function(e,t){o[e]&&(t&&(t.uniqueKey=(new Date).getTime(),Object.assign(o[e].assistComponent,t)),r&&r.setState({assistComponent:o}))},register:function(e){r=e},destory:function(e){r&&r.setState({assistComponent:e})},getTarget:function(){return r},getPoplayerGlobal:function(){return a},setPoplayerGlobal:function(e,t){e&&(a[e]=t)}}},23347:function(e,t){"use strict";var n=function(e){return e};t["Z"]=n},20159:function(e,t,n){"use strict";n.d(t,{kg:function(){return l.Z},ZP:function(){return h},pW:function(){return f},FN:function(){return u},Yy:function(){return p}});var i,o=n(56884),r=n.n(o),a=n(65238),s=n.n(a),l=n(23347),c=(n(65542),n(92954)),u=c.getCurrentInstance,d=function(e){},p=function(){var e,t=s().env;switch("undefined"!==typeof process&&"development"===(null===(e=process)||void 0===e||null===(e=e.env)||void 0===e?void 0:"production")&&(t="dev"),t){case"dev":return"dev";case"fat":return"FAT";case"prd":return"PROD";default:return"PROD"}},f=function(){return""};r().mkt.getWakeUnion=null===r()||void 0===r()||null===(i=r().mkt)||void 0===i?void 0:i.getUnion,r().cancelRequest=d,r().preloadCRNInstanceForBusiness=function(){},null!==r()&&void 0!==r()&&r().hideKeyboard||(r().hideKeyboard=function(){});var h=r()},1675:function(e,t,n){"use strict";n.d(t,{L6:function(){return a},pX:function(){return s}});var i=n(92954),o=n.n(i),r=(n(20159),n(79932)),a=((0,r.ZP)().taroEnv,r.fO.swan,function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";void 0!==e&&setTimeout((function(){if("string"!==typeof e){var n,a,s,l,c,u=(e.className||(null===(n=e.props)||void 0===n?void 0:n.className)||(null===(a=e.props)||void 0===a?void 0:a.class)||"").split(" ").map((function(e,t){return 0==t?"".concat(e):0==e.indexOf(".")?" ".concat(e):".".concat(e)})).join(""),d=(null===(s=e)||void 0===s?void 0:s.uid)||(null===(l=e)||void 0===l||null===(l=l.props)||void 0===l?void 0:l.id)||(null===(c=e)||void 0===c?void 0:c.id);e=d?"#".concat(d):u?".".concat(u):""}var p=[r.fO.swan,r.fO.alipay,r.fO.h5],f=(0,r.ZP)().taroEnv;i&&!p.includes(f)&&(e="".concat(i," >>> ").concat(e)),o().createSelectorQuery().select(e).boundingClientRect().exec((function(e){e&&e.length?t&&t(e[0]):t&&t(e)}))}),n?0:600)}),s=function(e){return 8*e}},21731:function(e,t,n){"use strict";n.d(t,{NX:function(){return i},fO:function(){return o},iI:function(){return r},yB:function(){return a},RN:function(){return s}});var i=function(e){return e["RN"]="RN",e["Mini"]="mini",e["H5"]="H5",e}({}),o=function(e){return e["weapp"]="weapp",e["swan"]="swan",e["alipay"]="alipay",e["tt"]="tt",e["rn"]="rn",e["h5"]="h5",e}({}),r={weapp:"wx0e6ed4f51db9d078",alipay:"2017081708237081",tt:"ttaf70d9cd305a16cb",swan:"11048657",kwai:"ks650488671226027404",quick:"100252857"},a={weapp:"WAP/WECHATAPP",alipay:"WAP/ALIPAYAPP",tt:"WAP/TOUTIAOAPP",swan:"WAP/BAIDUAPP",kwai:"WAP/KUAISHOUAPP",quick:"WAP/QUICKAPP"},s={weapp:"WECHATAPP",alipay:"ALIPAYAPP",tt:"TOUTIAO",swan:"BAIDUAPP"}},79932:function(e,t,n){"use strict";n.d(t,{Z0:function(){return s},fO:function(){return r.fO},yB:function(){return l},wU:function(){return d}});var i,o=n(20159),r=n(21731),a="weapp",s=function(){return!1},l=r.yB,c={},u=null===o.ZP||void 0===o.ZP||null===(i=o.ZP.mkt)||void 0===i?void 0:i.getUnion();t["ZP"]=function(e,t,n,i){var s,d,p;u||(u=null===o.ZP||void 0===o.ZP||null===(p=o.ZP.mkt)||void 0===p?void 0:p.getUnion());var f="".concat(e,"_").concat(t,"_").concat(n,"_").concat(null===(s=u)||void 0===s?void 0:s.allianceid,"_").concat(null===(d=u)||void 0===d?void 0:d.sid,"_header");if(!c[f]){var h=o.ZP.clientID||"";c[f]={cid:e||h,url:t,language:"zh-CN",currency:"CNY",isMiniProgram:!0,isInMini:!0,platform:r.NX.Mini,enviroment:(0,o.Yy)(),channel:"ctrip",log_version:"2021-07-1 00:00:00",syscode:"30",pageId:n,channelId:"",netState:"",taroEnv:a,extensions:[{name:"MiniType",value:l[a]},{name:"AppId",value:r.iI[a]}],version:"8.2.2",serverfrom:r.RN[a],supportWebp:a!==r.fO.tt,isSwan:a===r.fO.swan,allianceId:u.allianceid,siteId:u.sid,isInApp:!1,isInServer:!1}}return c[f]};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.Yy)();switch(t){case"dev":case"FAT":return e?"https://".concat(e):"https://m.fws.qa.nt.ctripcorp.com";case"PROD":return"https://m.ctrip.com";default:return"https://m.ctrip.com"}}},77384:function(e,t,n){"use strict";n.d(t,{d:function(){return V}});var i=n(79301),o=n(95308),r=n(93212),a=n(22276),s=n(57042),l=n(24460),c=n(45023),u=n(298),d=n(20159),p=d.ZP,f=n(72112),h=n(89465),m=n(79932),_=n(17513),v=n(69297),g={show:function(){v.Z.showLoading({title:"\u5373\u5c06\u5448\u73b0",mask:!0})},hide:function(){d.ZP.hideLoading()}},y=n(33231),x=n(77942),b=n(76978),k=n(2883),w=n(8482),I=3,Z=(0,m.Z0)(),T=(0,m.ZP)(),S=(0,k.Ds)((function(e){_.Z.show((0,u.Z)({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5"},e&&!(0,x.rI)()?{btnOK:["\u786e\u5b9a"],btnCallBack:[function(){(0,w.Sw)()}]}:{}))}),2e3),C=((0,x.rI)(),function(){function e(){(0,s.Z)(this,e),(0,c.Z)(this,"lockMap",{}),(0,c.Z)(this,"timer",void 0),(0,c.Z)(this,"retryTime",0),(0,c.Z)(this,"useLastMap",{}),(0,c.Z)(this,"__logErrorMap",{})}return(0,l.Z)(e,[{key:"next",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var r,a,s,l,c,u,d,m=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="".concat(Math.random(),"_").concat(Date.now()),!t.lock||o){e.next=5;break}if(!this.lockMap[t.lock]){e.next=4;break}return e.abrupt("return");case 4:this.lockMap[t.lock]=!0;case 5:return a=[],t.list.forEach((function(e){e.useLast&&!o&&(m.useLastMap[e.actionUrl]?m.useLastMap[e.actionUrl]++:m.useLastMap[e.actionUrl]=1,e.__lastKey=m.useLastMap[e.actionUrl]),e.sequenceId=Math.random(),a.push(m.send(e,t,r))})),t.isShowLoad&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){g.show(!0,(function(){return t.list.forEach((function(e){p.cancelRequest(e)})),null}))}),100)),s=a.length,e.next=11,Promise.all(a);case 11:l=e.sent,t.isShowLoad&&g.hide(),this.timer&&clearTimeout(this.timer),c=!1,u=0;case 16:if(!(u<l.length)){e.next=23;break}if(!(!l[u]||l[u].errMsg||null!==(d=l[u])&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.message)){e.next=20;break}return c=!0,e.abrupt("break",23);case 20:u++,e.next=16;break;case 23:if(!c){e.next=40;break}if(!t.needRetry){e.next=37;break}if(!(this.retryTime<I)){e.next=34;break}return e.next=28,this.sendAgain();case 28:return this.retryTime++,e.next=31,this.next(t,n);case 31:l=e.sent,e.next=35;break;case 34:y.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5");case 35:e.next=38;break;case 37:t.needToast&&y.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5");case 38:e.next=41;break;case 40:this.retryTime=0;case 41:if(t.lock&&(t.delayUnlockTime&&t.delayUnlockTime>0?setTimeout((function(){delete m.lockMap[t.lock]}),t.delayUnlockTime):t.getDelayUnlockTime?setTimeout((function(){var e=0,n=t.getDelayUnlockTime();n&&n>0&&(e=n),setTimeout((function(){delete m.lockMap[t.lock]}),e)}),0):delete this.lockMap[t.lock]),this.sendDevTrace(t,l),(0,h.ZP)(t,l),this.sendCollectLogError(r),n&&n(l),!(0,f.eE)(l,s)||t.isHideErrorConfirm){e.next=50;break}throw S(t.isPopWhenNetworkError),(0,b.fU)({key:"ttd_network_error",id:231304,response:l},"devtrace"),new Error("\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5");case 50:return e.abrupt("return",l);case 51:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"sendAgain",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){_.Z.show({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5",btnCallBack:[(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)})))]})})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var s,l,c,d,h,m,_,v,g,y,b,k,w,I,S,C,P,N,D=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=n.timeout,c=n.cachePolicy,d=n.cid,h=n.req,m=n.isFirstScreenRequest,_=n.ssrTimeRecorder,v=n.isFromPrefetch,l=t.timeout||l,!t.proxy||"function"!=typeof t.proxy){e.next=4;break}return e.abrupt("return",t.proxy());case 4:if(g=this,!g.isNeedDiscardElement(t)){e.next=7;break}return e.abrupt("return",{__isDiscard:!0});case 7:if(!(0,f.FN)(t.actionUrl)){e.next=16;break}return y=p.__crawlerStartTime=(new Date).getTime(),e.next=11,(0,f.Gx)(t.request.head);case 11:b=e.sent,k=(new Date).getTime(),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u53cd\u722c\u603b\u4f53\u8017\u65f6:".concat(k-y,"ms"),"color:yellow"),w=(null===b||void 0===b?void 0:b.extensions)||[],t.request.head=(0,u.Z)((0,u.Z)({},t.request.head),{},{extension:t.request.head&&t.request.head.extension?t.request.head.extension.concat(w):w});case 16:return t.request.head&&(C=null===(I=t)||void 0===I||null===(I=I.request)||void 0===I||null===(I=I.head)||void 0===I?void 0:I.extension,C||(t.request.head.extension=[]),(S=t.request.head.extension).push.apply(S,(0,a.Z)(T.extensions))),P=(null===(s=t.request)||void 0===s?void 0:s.head)||{},(T.isSwan||(0,x.CX)()||Z)&&P&&!P.syscode&&(t.request.head=Object.assign({},P,{syscode:T.syscode})),N=function(e,t,n){v||D.collectLogError(o,e,t,n)},e.abrupt("return",new Promise((function(e){var n=(new Date).getTime();t=D.ssrAddOptions(t,{cid:d});var i={};(0,x.rI)()&&(i.req=h),m&&(null===_||void 0===_||_.record(t.actionUrl)),p.request((0,u.Z)({url:t.actionUrl,method:t.method||"POST",data:t.request,cachePolicy:c,success:function(i){var o,a;t.timeLine=(new Date).getTime(),t.time=t.timeLine-n,m&&(null===_||void 0===_||_.recordEnd(t.actionUrl));var s=i.data;if(g.isNeedDiscardElement(t))e({__isDiscard:!0});else{var l="Success"!==(null===s||void 0===s||null===(o=s.ResponseStatus)||void 0===o?void 0:o.Ack)&&"Success"!==(null===s||void 0===s||null===(a=s.responseStatus)||void 0===a?void 0:a.Ack);l&&s&&"object"===(0,r.Z)(s)&&(s.__hasSendLogError=!0),e(s),l&&N(t.actionUrl,s,"tnt_SOA_Ack_Fail_detail")}},fail:function(n){var i=n;if(m&&(null===_||void 0===_||_.recordEnd(t.actionUrl)),g.isNeedDiscardElement(t))e({__isDiscard:!0});else{var o=!i||"string"===typeof i;!l&&i&&"object"===(0,r.Z)(i)&&(i.__hasSendLogError=!0),o&&(i={__invalidResponse:i,__hasSendLogError:!0}),e(i),l||N(t.actionUrl,i,"tnt_SOA_Network_Fail_detail")}},timeout:l||15e3,sequenceId:t.sequenceId},i))})));case 21:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"isNeedDiscardElement",value:function(e){return!(!e.useLast||e.__lastKey===this.useLastMap[e.actionUrl])}},{key:"sendDevTrace",value:function(e,t){try{e.needDevTrace&&t.map((function(t,n){var i,o,r,a=null===t||void 0===t||null===(i=t.ResponseStatus)||void 0===i||null===(i=i.Extension)||void 0===i?void 0:i.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));a&&(0,h.Vg)((0,u.Z)((0,u.Z)({rootMessageId:a.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},e.devTraceData),{},{scene:"".concat((null===(o=e.devTraceData)||void 0===o?void 0:o.scene)||""," ").concat(null===(r=e.list)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.actionUrl)}))}))}catch(e){}}},{key:"ssrAddOptions",value:function(e,t){var n=t.cid;return n&&(e.request.cid=n),e}},{key:"collectLogError",value:function(e,t,n,i){this.__logErrorMap[e]||(this.__logErrorMap[e]=[]),this.__logErrorMap[e].push({url:t,data:n,type:i})}},{key:"clearLogError",value:function(e){this.__logErrorMap[e]&&delete this.__logErrorMap[e]}},{key:"sendCollectLogError",value:function(e){var t,n=this.__logErrorMap[e]||[];if(!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],l=[];n.forEach((function(e){s.push({url:e.url,type:e.type,stack:e.data.stack}),l.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(l)}catch(e){console.log("get response tostring stack msg error",e)}var c={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,h.Vg)(c)}catch(e){}this.clearLogError(e)}}}],[{key:"next",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,o){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.instance||(e.instance=new e),t.next=3,e.instance.next(n,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}());(0,c.Z)(C,"instance",void 0);var P=n(90129),N=(0,m.Z0)(),D="H5"==(0,m.ZP)().platform,j=(0,m.ZP)(),R=(0,k.Ds)((function(e){_.Z.show((0,u.Z)({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5"},e&&!(0,x.rI)()?{btnOK:["\u786e\u5b9a"],btnCallBack:[function(){(0,w.Sw)()}]}:{}))}),2e3),L=((0,x.rI)(),function(){function e(){(0,s.Z)(this,e),(0,c.Z)(this,"lockMap",{}),(0,c.Z)(this,"timer",void 0),(0,c.Z)(this,"retryTime",0),(0,c.Z)(this,"useLastMap",{}),(0,c.Z)(this,"__logErrorMap",{})}return(0,l.Z)(e,[{key:"next",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var r,s,l,c,d,p,m,_,v,g,x,k,w,I,Z,T,S,C,N,j,L,E,V,A,O,F,M,B,U,G=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="".concat(Math.random(),"_").concat(Date.now()),[],s=t||{},l=s.beforeWaitPromList,c=void 0===l?[]:l,d=s.afterWaitPromList,p=void 0===d?[]:d,m=[],_={},v={},g=0,x=t.list.every((function(e){return!!e.__isNotCoreApi})),k=!!t.__OPEN_API_DOWN_LEVEL__,w=!D&&k&&!x,t.list.forEach((function(e){e.sequenceId=Math.random();var n="".concat(e.actionUrl,"__").concat(Math.random(),"__").concat(Date.now());if(w&&e.__isNotCoreApi){m.push(new Promise((function(e){_[n]=function(t){console.log("notCoreRequestResolveMap",n,t),e(t)}})));var i=null;i=e.__delay__>0?new Promise((function(i,o){setTimeout((function(){G.send(e,t,r).then((function(e){return _[n]&&_[n](e),delete _[n],delete v[n],i(e),e})).catch((function(e){return _[n]&&_[n](null),delete _[n],delete v[n],o(e),e}))}),e.__delay__)})):G.send(e,t,r).then((function(e){return _[n]&&_[n](e),delete _[n],delete v[n],e})).catch((function(e){return _[n]&&_[n](null),delete _[n],delete v[n],e})),v[n]=i}else g++,m.push(e.__delay__>0?new Promise((function(n){setTimeout((function(){G.send(e,t,r).then((function(e){return n(e),e})).finally((function(){g--,0===g&&Object.keys(v).forEach((function(e){var t=v[e];_[e]&&_[e]((function(){return t})),delete _[e],delete v[e]}))}))}),e.__delay__)})):G.send(e,t,r).then((function(e){return e})).finally((function(){g--,0===g&&Object.keys(v).forEach((function(e){var t=v[e];_[e]&&_[e]((function(){return t})),delete _[e],delete v[e]}))})))})),I=Promise.all(c),Z=Promise.all(p),T=Promise.all(m),e.next=16,Promise.all([I,T,Z]);case 16:S=e.sent,C=(0,P.Z)(S,3),N=C[0],j=C[1],L=C[2],E=[].concat((0,a.Z)(N),(0,a.Z)(j),(0,a.Z)(L)),V=null===N||void 0===N?void 0:N.map((function(e){return null===e||void 0===e?void 0:e.__ORIGIN_REQUEST_PARAMS__})),A=null===L||void 0===L?void 0:L.map((function(e){return null===e||void 0===e?void 0:e.__ORIGIN_REQUEST_PARAMS__})),O=(0,u.Z)((0,u.Z)({},t),{},{list:[].concat((0,a.Z)(V),(0,a.Z)(t.list),(0,a.Z)(A))}),F=O.length,M=!1,B=0;case 28:if(!(B<E.length)){e.next=37;break}if("function"!==typeof E[B]){e.next=31;break}return e.abrupt("continue",34);case 31:if(!(!E[B]||E[B].errMsg||null!==(U=E[B])&&void 0!==U&&null!==(U=U.data)&&void 0!==U&&U.message)){e.next=34;break}return M=!0,e.abrupt("break",37);case 34:B++,e.next=28;break;case 37:if(M&&y.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5"),this.sendDevTrace(E),(0,h.ZP)(O,E),this.sendCollectLogError(E),n&&n(E),!(0,f.eE)(E,F)||O.isHideErrorConfirm){e.next=46;break}throw R(O.isPopWhenNetworkError),(0,b.fU)({key:"ttd_network_error",id:231304,response:E},"devtrace"),new Error("\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5");case 46:return e.abrupt("return",E);case 47:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var s,l,c,d,h,m,_,v,g,y,b,k,w,I,Z,T,S,C,P,D=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=n.timeout,c=n.cachePolicy,d=n.cid,h=n.req,m=n.isFirstScreenRequest,_=n.ssrTimeRecorder,v=n.isFromPrefetch,g=n.needDevTrace,y=n.devTraceData,l=t.timeout||l,!t.proxy||"function"!=typeof t.proxy){e.next=4;break}return e.abrupt("return",Promise.resolve(t.proxy()));case 4:if(!(0,f.FN)(t.actionUrl)){e.next=13;break}return b=p.__crawlerStartTime=(new Date).getTime(),e.next=8,(0,f.Gx)(t.request.head);case 8:k=e.sent,w=(new Date).getTime(),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u53cd\u722c\u603b\u4f53\u8017\u65f6:".concat(w-b,"ms"),"color:yellow"),I=(null===k||void 0===k?void 0:k.extensions)||[],t.request.head=(0,u.Z)((0,u.Z)({},t.request.head),{},{extension:t.request.head&&t.request.head.extension?t.request.head.extension.concat(I):I});case 13:return t.request.head&&(S=null===(Z=t)||void 0===Z||null===(Z=Z.request)||void 0===Z||null===(Z=Z.head)||void 0===Z?void 0:Z.extension,S||(t.request.head.extension=[]),(T=t.request.head.extension).push.apply(T,(0,a.Z)(j.extensions))),C=(null===(s=t.request)||void 0===s?void 0:s.head)||{},(j.isSwan||(0,x.CX)()||N)&&C&&!C.syscode&&(t.request.head=Object.assign({},C,{syscode:j.syscode})),P=function(e,t,n){if(!v)return{url:e,data:t,type:n}},e.abrupt("return",new Promise((function(e){var n=(new Date).getTime();t=D.ssrAddOptions(t,{cid:d});var i={};(0,x.rI)()&&(i.req=h),m&&(null===_||void 0===_||_.record(t.actionUrl)),p.request((0,u.Z)({url:t.actionUrl,method:t.method||"POST",data:t.request,cachePolicy:c,success:function(i){var o,a;t.timeLine=(new Date).getTime(),t.time=t.timeLine-n,m&&(null===_||void 0===_||_.recordEnd(t.actionUrl));var s=i.data,l="Success"!==(null===(o=s)||void 0===o||null===(o=o.ResponseStatus)||void 0===o?void 0:o.Ack)&&"Success"!==(null===(a=s)||void 0===a||null===(a=a.responseStatus)||void 0===a?void 0:a.Ack);l&&s&&"object"===(0,r.Z)(s)&&(s.__hasSendLogError=!0);var c=!s||"string"===typeof s;c&&(s={__invalidResponse:s,__hasSendLogError:!0}),s.__API_NAME__=t.__API_NAME__||t.actionUrl,s.__ORIGIN_REQUEST_PARAMS__=t,s.__ORIGIN_REQUEST_ENV__={needDevTrace:g,devTraceData:y},l&&(s.__SEND_LOG_ERROR__=P(t.actionUrl,s,"tnt_SOA_Ack_Fail_detail")),e(s)},fail:function(n){var i=n;m&&(null===_||void 0===_||_.recordEnd(t.actionUrl));var o=!i||"string"===typeof i;!l&&i&&"object"===(0,r.Z)(i)&&(i.__hasSendLogError=!0),o&&(i={__invalidResponse:i,__hasSendLogError:!0}),i.__API_NAME__=t.__API_NAME__||t.actionUrl,i.__ORIGIN_REQUEST_PARAMS__=t,i.__ORIGIN_REQUEST_ENV__={needDevTrace:g,devTraceData:y},l||(i.__SEND_LOG_ERROR__=P(t.actionUrl,i,"tnt_SOA_Network_Fail_detail")),e(i)},timeout:l||15e3,sequenceId:t.sequenceId},i))})));case 18:case"end":return e.stop()}}),e)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"sendDevTrace",value:function(e){try{e.map((function(e,t){var n,i,o;if("function"!==typeof e){var r=null===e||void 0===e||null===(n=e.__ORIGIN_REQUEST_ENV__)||void 0===n?void 0:n.needDevTrace,a=null===e||void 0===e||null===(i=e.__ORIGIN_REQUEST_ENV__)||void 0===i?void 0:i.devTraceData,s=null===e||void 0===e||null===(o=e.__ORIGIN_REQUEST_PARAMS__)||void 0===o?void 0:o.actionUrl;if(r&&a){var l,c=null===e||void 0===e||null===(l=e.ResponseStatus)||void 0===l||null===(l=l.Extension)||void 0===l?void 0:l.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));c&&(0,h.Vg)((0,u.Z)((0,u.Z)({rootMessageId:c.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},a),{},{scene:"".concat((null===a||void 0===a?void 0:a.scene)||""," ").concat(s)}))}}}))}catch(e){}}},{key:"ssrAddOptions",value:function(e,t){var n=t.cid;return n&&(e.request.cid=n),e}},{key:"sendCollectLogError",value:function(e){var t,n=[];if(e.forEach((function(e){"function"!==typeof e&&null!==e&&void 0!==e&&e.__SEND_LOG_ERROR__&&n.push(null===e||void 0===e?void 0:e.__SEND_LOG_ERROR__)})),!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],l=[];n.forEach((function(e){s.push({url:e.url,type:e.type,stack:e.data.stack}),l.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(l)}catch(e){console.log("get response tostring stack msg error",e)}var c={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,h.Vg)(c)}catch(e){}}}}],[{key:"next",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,o){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.instance||(e.instance=new e),t.next=3,e.instance.next(n,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}());function E(e,t){return e}(0,c.Z)(L,"instance",void 0);var V=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=E(t,o),!t.__USE_NEW_REQUEST__){e.next=5;break}return e.next=4,L.next(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,C.next(t,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()},72112:function(e,t,n){"use strict";n.d(t,{eV:function(){return c},FN:function(){return u},Gx:function(){return d},eE:function(){return p}});var i=n(20159),o=n(79932),r=n(77942),a=[],s=(0,o.ZP)().syscode,l=(0,o.Z0)(),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a=e},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/");return t=t.pop(),t=t.split("?"),t=t.pop(),a.indexOf(t)>-1},d=function(e){var t={appid:"wx0e6ed4f51db9d078"};return((0,o.ZP)().isSwan||(0,r.CX)()||l)&&(t.head={syscode:s}),new Promise((function(n,r){var a={PROD:"https://sec-m.ctrip.com",FAT:"http://gateway.m.fws.qa.nt.ctripcorp.com"}[(0,i.Yy)()],s={url:"".concat(a,"/restapi/soa2/12530/json/crawlerScripting"),fixedParams:t,getScriptFromRsp:function(e){return e&&e.data&&e.data.data&&e.data.data.script},head:e,callback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.fingerprintKeys,r=t.crawlerKey;"string"!==typeof e&&(e=""),n({extensions:i&&r?[{name:"fingerprintKeys",value:i},{name:"crawlerKey",value:r}]:[{name:"crawlerKey",value:e},{name:"MiniType",value:(0,o.ZP)().isSwan?o.yB[o.fO.swan]:"WAP/WECHATAPP"}]})}};i.ZP&&i.ZP.createAntiSpiderRequest?i.ZP.createAntiSpiderRequest(s):r(null)})).catch((function(e){return null}))},p=function(e,t){return!1}},89465:function(e,t,n){"use strict";n.d(t,{ZP:function(){return h},Vg:function(){return x},dD:function(){return g},gp:function(){return _},v5:function(){return b},Zz:function(){return y},PX:function(){return v}});var i=n(298),o=n(20159),r=n(2883),a=n(76978),s=n(79932),l=n(24896),c="",u="",d="",p="",f=function(){return(0,s.ZP)(u,p,d)},h=function(e,t){try{if(!1===e.log)return;if(!p){var n=(0,o.FN)();p="".concat(n.router.path,"?").concat((0,r.RF)(n.router.params))}var a={body:[]},l=e.list||[];l.map((function(e,n){var o,r,l;u||(u=(null===e||void 0===e||null===(l=e.request)||void 0===l||null===(l=l.head)||void 0===l?void 0:l.cid)||(0,s.ZP)().cid);if("function"!==typeof t[n]){var p=(null===(o=t[n])||void 0===o||null===(o=o.ResponseStatus)||void 0===o?void 0:o.Extension)||[],h=null===(r=p.filter((function(e){return"RootMessageId"===e.Id}))[0])||void 0===r?void 0:r.Value;e.actionUrl.indexOf("CreateTicketOrder")>0&&m((0,i.Z)((0,i.Z)({},e),{},{rootMessageId:h}),t[n]),a.body.push((0,i.Z)({title:"\u7f51\u7edc\u8bf7\u6c42",actionUrl:-1==e.actionUrl.indexOf("https:")?"https://m.ctrip.com".concat(e.actionUrl):e.actionUrl,apiUrl:function(){var t=e.actionUrl.split("/");return t[t.length-1]+"/"+t[t.length-2]}(),pageId:d,request:e.request,rootMessageId:h,time:e.time,timeLine:e.timeLine,type:"info",traceId:c},f()))}})),_((0,i.Z)((0,i.Z)({},a),{},{type:"common_req_res"}))}catch(e){console.log(e,"ex")}},m=function(e,t){var n;if(0!=(null===t||void 0===t||null===(n=t.head)||void 0===n?void 0:n.errcode)){var o={};o.body=(0,i.Z)({title:"\u521b\u5355\u62a5\u9519",errorcode:t.head.errcode,request:e.request,rootMessageId:e.rootMessageId},f()),_((0,i.Z)((0,i.Z)({},o),{},{type:"booking_creatorder_fail"}))}},_=function(e){e.body instanceof Array==0&&(e.body=(0,i.Z)((0,i.Z)({},e.body),{},{traceId:c,isTaroTnt:!0},f())),e.type=e.type?e.type:"common_other";var t=0==e.type.indexOf("ttd_dev_")?e.type:"ttd_dev_".concat(e.type);e.body.length?e.body.forEach((function(e){(0,a.fU)((0,i.Z)((0,i.Z)({},e),{},{key:t}),"devTrace")})):(0,a.fU)((0,i.Z)((0,i.Z)({},e.body),{},{key:t}),"devTrace")},v=function(e){var t=e.pageId;d=t,c=String(Math.ceil(1e8*Math.random()))},g=function(){return d},y=function(e,t){console.log("sendUbtLog",e,t),e&&t&&(e.method&&"function"===typeof e.method&&(e=e.method()),(0,a.fU)(e,t))},x=l.Z,b=function(){_({type:"ttd_dev_pagenext_click",body:{pageId:g()}})}},24896:function(e,t,n){"use strict";var i=n(298),o=n(89465),r=n(2883),a=n(76978),s=(0,r.P2)((function(){a.fU.apply(void 0,arguments)}),1e3);t["Z"]=function(e){try{var t,n,r=(0,i.Z)({devKey:"km_ticket_trace_log"},e);if(!r.key||null!==(t=r.jsonData)&&void 0!==t&&t.value?r.jsonData=(0,i.Z)((0,i.Z)({},r.jsonData),{pageId:String((0,o.dD)()||"")}):(r.key="tkt_5200001",r.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38",pageId:String((0,o.dD)()||"")}),0===(null===(n=r.key)||void 0===n?void 0:n.indexOf("tkt_"))||"logError"==r.devType)return s(r,"devtrace");(0,a.fU)(r,"devtrace")}catch(e){console.log(e,"devTrace error")}}},36556:function(e,t,n){"use strict";n.d(t,{kI:function(){return i},ap:function(){return o},HP:function(){return r},a7:function(){return a}});var i=function(e,t){},o=function(e){},r=function(e,t){},a=function(e){}},76978:function(e,t,n){"use strict";n.d(t,{fU:function(){return r}});var i=n(33675),o=n.n(i),r=function(e,t){t=t&&t.toLocaleLowerCase();try{"devtrace"==t?o().sendUbtByPage.ubtDevTrace(e.devKey||e.key,{data:JSON.stringify(e)}):"pv"==t?o().sendUbtByPage.ubtSendPV(e):o().sendUbtByPage.ubtTrace(e.key,e)}catch(e){console.log(e)}}},8482:function(e,t,n){"use strict";n.d(t,{VF:function(){return a},Sw:function(){return s}});var i=n(298),o=n(20159),r=n(89465),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>4?arguments[4]:void 0,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6?arguments[6]:void 0,l="switchTab"===t?t:t?"redirectTo":"navigateTo";if(e&&e.startsWith("/pages/"))return(0,r.v5)(),void o.ZP[l]({url:e,success:function(){n&&n()}});if(e&&e.indexOf("//")>-1){(0,r.v5)();var c="/cwx/component/cwebview/cwebview";o.ZP[l]({url:"".concat(c,"?data=").concat(JSON.stringify((0,i.Z)({url:encodeURIComponent(e),needLogin:a,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},s||{}))),success:function(){n&&n()}})}else console.log("\u8f93\u5165\u7684url\u6709\u8bef",e)},s=function(e){o.ZP.navigateBack()}},77395:function(e,t,n){"use strict";n.d(t,{oQ:function(){return h},pm:function(){return m},Cg:function(){return s},Wn:function(){return d},ix:function(){return D},Ec:function(){return R},P_:function(){return S},_7:function(){return w},i3:function(){return k},H7:function(){return Z},xI:function(){return b},_:function(){return I},i4:function(){return T},Ue:function(){return O},WI:function(){return E},Sf:function(){return y},Nv:function(){return p},oM:function(){return i.oM},dX:function(){return i.dX},wh:function(){return N},Oh:function(){return v},o3:function(){return a},WB:function(){return o},yp:function(){return r},Vh:function(){return C.ZP},Nm:function(){return g},vs:function(){return _},eR:function(){return f}});var i=n(25215),o=function(e){return{paddingLeft:e,paddingRight:e}},r=function(e){return{paddingTop:e,paddingBottom:e}},a=function(e,t,n,i){var o={paddingTop:e,paddingRight:e,paddingBottom:e,paddingLeft:e};return"undefined"===typeof t?o:(o.paddingLeft=o.paddingRight=t,"undefined"===typeof n?o:(o.paddingBottom=n,"undefined"===typeof i||(o.paddingLeft=i),o))},s=function(e){var t=e.direction,n=void 0===t?"":t,i=e.width,o=e.style,r=void 0===o?"solid":o,a=e.color,s={},c="border".concat(l(n));return(i||0===i)&&(s["".concat(c,"Width")]=i),r&&(s["".concat(c,"Style")]=r),a&&(s["".concat(c,"Color")]=a),s},l=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},c=n(14081),u=function(e){var t=e.hShadow,n=e.vShadow,i=e.blur,o=e.spread,r=e.color,a=(e.rnColor,[]);return a.push((0,c.ly)(t)?t:"".concat(t,"px")),a.push((0,c.ly)(n)?n:"".concat(n,"px")),(i||0==i)&&i>=0&&a.push((0,c.ly)(i)?i:"".concat(i,"px")),(o||0==o)&&a.push((0,c.ly)(o)?o:"".concat(o,"px")),r&&a.push("".concat(r)),{boxShadow:a.join(" ")}},d=u,p=function(e){return(0,c.ly)(e)?e:"".concat(e,"px")},f=function(e){return{transition:"".concat(e)}},h=function(e){return{animation:"".concat(e)}},m=function(e){var t=Object.keys(e).map((function(t){return"number"===typeof e[t]?"".concat(t,"(").concat((0,c.ly)(e[t])?e[t]:"".concat(e[t],"px"),")"):"".concat(t,"(").concat(e[t],")")})).join(" ");return{transform:t}},_=function(e){return{transform:"".concat(e)}},v=function(e){return"".concat(e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){t[e.key]=e.value})),t},y=function(e){return 1===e?{display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"".concat(e),textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all"}},x=n(298),b={display:"flex",flexDirection:"row"},k={display:"flex",flexDirection:"column"},w={display:"flex",alignItems:"center",justifyContent:"center"},I=(0,x.Z)((0,x.Z)({},b),{},{alignItems:"center"}),Z=function(e){return String(e)},T=function(e){return String(e)},S=function(e){return(0,c.ly)(e)?e:"".concat(e,"px")},C=n(18787),P=function e(t){var n={};return t.forEach((function(t){t&&(Array.isArray(t)&&(t=e(t)),n=(0,x.Z)((0,x.Z)({},n),t))})),n},N=P,D=function(e){return{boxSizing:e}},j=function(e,t){if(!t)return e;var n=(0,x.Z)({},e);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=n[i];n[i]=r?Object.assign({},r,o):o}return n},R=j,L=1,E=L,V=n(77942),A=(0,V.gn)(),O=function(e){return Number(e)<500||A?e:"bold"}},25215:function(e,t,n){"use strict";n.d(t,{oM:function(){return i},dX:function(){return o}});var i=function(e){return{marginLeft:e,marginRight:e}},o=function(e){return{marginTop:e,marginBottom:e}}},18787:function(e,t,n){"use strict";n.d(t,{HT:function(){return a}});var i=n(89465),o=n(77942),r=o.Db.get("window").width,a=o.Db.get("window").height;t["ZP"]=function(e,t){var n=(0,i.dD)(),o=500,a=t||{},s=a.ignorePage;"10650051850"!==String(n)||s||(o=400);var l=r;return r>o&&(l=o),e*(l/375)}},69297:function(e,t,n){"use strict";var i=n(92954),o=n.n(i);t["Z"]=o()},51067:function(e,t,n){"use strict";n.d(t,{fh:function(){return r},XV:function(){return s},q7:function(){return l},gw:function(){return c},FD:function(){return d},Ht:function(){return p},qu:function(){return f}});var i=n(41712),o=function(e){return e<10?"0".concat(e):"".concat(e)},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=a(e),i=n.year,r=n.month,s=n.day;return i+t+o(r)+t+o(s)},a=function(e){var t=new Date(u(e));return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},s=function(e){var t=new Date(e.replace(/-/g,"/")),n=new Date(r(new Date,"/")),i=(t.valueOf()-n.valueOf())/864e5;return i},l=function(e){var t=(0,i.l)(e),n=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];return n[t.day()]},c=function(e,t){return Math.round(new Date(u(t)).getTime()-new Date(u(e)).getTime())/864e5+1},u=function(e){return e&&"string"===typeof e?e.replace(/-/g,"/"):e},d=function(e,t,n){e=u(e),t=u(t);var i=new Date(e).getTime(),o=t?new Date(t).getTime():(new Date).getTime();if(n?o>i:o>=i)return n?-1:0;var r=i-o;return Math.ceil(r/864e5)},p=function(e,t){var n=a(e),i=n.year,o=n.month,r=a(t),s=r.year,l=r.month;return 12*(s-i)+l-o+1},f=function(e,t){if(!e||!t)return 0;var n=new Date(u(e)).getTime(),i=new Date(u(t)).getTime();return n==i?2:n>i?1:0}},41712:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var i=n(94737),o=n.n(i),r=n(69822),a=n.n(r);o().extend(a()),o().tz.setDefault("PRC");var s=o()},14081:function(e,t,n){"use strict";n.d(t,{ly:function(){return i}});Object.prototype.toString;function i(e){return String(e).includes("rem")}},98374:function(e,t,n){"use strict";n.d(t,{I8:function(){return o}});var i=n(93212),o=function(e){return r(e)?JSON.parse(JSON.stringify(e)):e};function r(e){return null!=e&&"object"===(0,i.Z)(e)}},77942:function(e,t,n){"use strict";n.d(t,{cY:function(){return a},iO:function(){return s},gn:function(){return l},Db:function(){return c},md:function(){return u},t4:function(){return d},Z6:function(){return p},CX:function(){return f},rI:function(){return h},yF:function(){return m},o6:function(){return _}});var i=n(69297),o=n(79932),r=i.Z.getSystemInfoSync(),a=function(){var e=r.model,t="alipay"==(0,o.ZP)().taroEnv,n=t?/iPhone(\d{0,3}),(\d{0,3})/i:/iPhone (X|\d{0,3})/,i=e.match(n)||[],a=t?Number(i[1])>10||10==Number(i[1])&&(3==Number(i[2])||6==Number(i[2])):"X"==i[1]||Number(i[1])>10;return a},s=a()?24:0,l=function(){return"ios"==r.platform},c={get:function(e){var t={};switch(e){case"window":t={width:r.windowWidth,height:r.windowHeight};break;case"screen":t={width:r.screenWidth,height:r.screenHeight};break}return t}},u=function(){return r.pixelRatio},d={select:function(e){return{}},OS:""};function p(e){return!1}var f=function(){return!1},h=function(){return!1},m=function(){return!1},_=function(){return!1}},2883:function(e,t,n){"use strict";n.d(t,{Ds:function(){return a},_v:function(){return s},RF:function(){return l},vn:function(){return c},uE:function(){return u},P2:function(){return d},Xh:function(){return p}});var i=n(93212),o=n(79301),r=n(95308);function a(e,t){var n;return(0,r.Z)((0,o.Z)().mark((function i(){var r,a,s,l,c=arguments;return(0,o.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(r=c.length,a=new Array(r),s=0;s<r;s++)a[s]=c[s];l=this,clearTimeout(n),n=setTimeout((function(){e.apply(l,a)}),t);case 4:case"end":return i.stop()}}),i,this)})))}var s=function(e){return new Promise((function(t){setTimeout((function(){t()}),e||0)}))},l=function(e,t){var n=[];if(e)for(var o in e)t&&"object"===(0,i.Z)(e[o])||n.push("".concat(o,"=").concat(e[o]));return n.join("&")},c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?decodeURIComponent(e).split("?"):e.split("?"),i={};if(2==n.length){var o=n[1],r=o.split("&");r.forEach((function(e){var t=e.search("=");t>0&&(i[e.slice(0,t)]=e.slice(t+1))}))}return i},u=function(e,t){return JSON.stringify(e)==JSON.stringify(t)};function d(e,t,n){var i,o,r,a=0;n||(n={});var s=function(){a=!1===n.leading?0:(new Date).getTime(),i=null,e.apply(o,r),i||(o=r=null)},l=function(){var l=(new Date).getTime();a||!1!==n.leading||(a=l);var c=t-(l-a);o=this,r=arguments,c<=0||c>t?(i&&(clearTimeout(i),i=null),a=l,e.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(s,c))};return l.cancel=function(){clearTimeout(i),a=0,i=null},l}var p=function(e){return e=e||{},Object.keys(e).reduce((function(t,n){return"undefined"==typeof e[n]&&null!==e[n]||(t+="object"===(0,i.Z)(e[n])?"".concat(n,"=").concat(JSON.stringify(e[n]),"&"):"".concat(n,"=").concat(e[n],"&")),t}),"").slice(0,-1)}},3902:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(80692)),c=n(49214),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n)}(c.Z),d=n(2269),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,d.jsx)(l.JO,(0,i.Z)({},this.props))}}]),n}(u)},41763:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),l=n(81876),c=n(45023),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,l.Z)(o),"getFromTranslate",(function(){return"\u8d77"})),(0,c.Z)((0,l.Z)(o),"priceFormat",(function(e,t,n){return t})),o.state={},o}return(0,o.Z)(n)}(s.Component);(0,c.Z)(u,"defaultProps",{});var d=n(80692),p=n(298),f=n(23347),h={v_color_font:"#333333",v_color_gray:"#666666",v_color_gray_weak:"#999999",v_color_white:"#ffffff",v_color_border_gray_weak:"#eeeeee",v_color_transparent:"transparent",v_color_tag_border_warn:"#ffb278",v_color_border_default:"#E2E2E2",v_color_font_bg_GrayBlue:"#b5c7df",v_color_origin_dark:"#ff6f00",v_color_blue_dark:"#0F294D",v_color_indecator_bg:"#0086F6",v_color_holiday_red:"#F5190A",v_color_tag_blue_weak:"#06AEBD",v_color_score_bg_blue:"#4978CE",v_color_tag_color_warn:"#ff6d00",v_color_filter_text_active:"#0086F6"},m=n(77395),_=n(77942),v={u_price_wrapper:{},u_price_icon_linethrough:{height:(0,m.Nv)(18)}},g=(0,f.Z)({u_price_icon:{color:h.v_color_origin_dark,fontSize:11},u_price_icon_linethrough:{color:"#666666",fontSize:12},u_price_currency:{color:h.v_color_origin_dark,fontSize:18},u_price_currency_linethrough:{color:h.v_color_gray_weak,fontSize:12},u_price_price:(0,p.Z)({color:h.v_color_origin_dark,fontSize:18,lineHeight:(0,m.Nv)(22)},"android"==_.t4.OS?{fontFamily:"Roboto",lineHeight:(0,m.Nv)(22),fontWeight:"bold"}:{}),u_price_price_linethrough:(0,p.Z)({color:h.v_color_gray_weak,fontSize:12},"android"==_.t4.OS?{fontFamily:"Roboto"}:{})}),y=(0,f.Z)({u_price_currency_linethrough:{color:"#77879B",fontSize:13},u_price_price_linethrough:{color:"#77879B",fontSize:13}}),x=(0,f.Z)({u_price_symbol:{fontFamily:"20TH_bold",fontSize:11,fontWeight:"bold"},u_price_symbol_hj:{fontFamily:"20TH_bold",fontSize:14,fontWeight:"bold"},price_classes:(0,p.Z)((0,p.Z)({fontWeight:"bold"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{fontSize:16,lineHeight:(0,m.Nv)(20),color:"#f60"}),price_classes_hj:(0,p.Z)((0,p.Z)({fontWeight:"bold"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{fontSize:22,lineHeight:(0,m.Nv)(24),color:"#f60"}),u_price_free:{fontSize:13,fontWeight:"bold",color:"#f60"},price_classes_del:(0,p.Z)({color:"#999",fontSize:11},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),u_price_symbol_del:(0,p.Z)({color:"#999",fontSize:11,fontWeight:"normal"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),u_price_start_text:(0,p.Z)({},"android"==_.t4.OS?{top:-1}:{})}),b=(0,m.Ec)(g,y),k=(0,f.Z)({u_price_start_text:{top:-1},u_price:{display:"flex",flexDirection:"row",alignItems:"baseline",justifyContent:"flex-end"},u_price_wrapper:(0,p.Z)({color:h.v_color_origin_dark},v.u_price_wrapper),u_price_symbol:(0,p.Z)({position:"relative"},null===v||void 0===v?void 0:v.u_price_icon_linethrough),u_price_linethrough:{textDecorationLine:"line-through",color:h.v_color_gray_weak},u_price_from:{marginRight:5,color:h.v_color_gray_weak},u_price_from_reverse:{marginRight:0,marginLeft:5,fontFamily:"PingFangSC-Light"},u_price_pre:{marginRight:2,marginBottom:1,fontFamily:"PingFangSC-Light",fontSize:11,color:"#666"},u_price_free:{fontFamily:"PingFangSC-Light",fontSize:11,color:"#666"},u_price_box:{display:"flex",alignItems:"baseline",flexDirection:"row"},u_price_icon_box:(0,p.Z)({display:"flex",marginLeft:2,height:12,alignItems:"center"},"android"==_.t4.OS?{marginBottom:1}:{})}),w=(0,p.Z)({},k),I=n(2269),Z=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.currency,e.value),n=e.from,i=e.reverse,o=void 0===i||i,r=e.lineThrough,a=e.fstyle,s=void 0===a?{}:a,l=e.free,c=e.preText,u=e.isShowMinus,p=e.isShowStart,f=e.prefixStyle,h=e.suffixStyle,_=e.style,v=e.isTicketHome,g=e.hasIcon,y=void 0!==g&&g,k=e.isZero,Z=void 0!==k&&k,T=e.isHJCard,S=e.isShowCurrency,C=void 0===S||S,P=(0,m.Ec)(w,s),N=(0,m.Ec)(b,s),D=r?N["u_price_icon_linethrough"]:N["u_price_icon"],j=r?N["u_price_currency_linethrough"]:N["u_price_currency"],R=r?N["u_price_price_linethrough"]:N["u_price_price"],L=[];return y&&L.push((0,I.jsx)(d.G7,{style:P["u_price_icon_box"],children:(0,I.jsx)(d.JO,{type:"help",size:T?22:20,color:T?"#666":"#999",className:"iconText"})})),n&&!l&&L.push((0,I.jsx)(d.xv,{className:"u_price_from_reverse_fix",style:(0,m.wh)([P["u_price_from"],o?P["u_price_from_reverse"]:null,h]),children:"boolean"===typeof n?this.getFromTranslate():n},0)),p&&L.push((0,I.jsx)(d.xv,{style:(0,m.wh)([P["u_price_start_text"],v&&x.u_price_start_text]),children:"\u8d77"},"startText")),L.push((0,I.jsxs)(d.aA,{style:(0,m.wh)([P["u_price_wrapper"],r?P["u_price_linethrough"]:null,l?P["u_price_free_wrapper"]:null,v&&{top:0}]),children:[!l&&u&&(0,I.jsx)(d.xv,{style:(0,m.wh)([j]),children:"- "}),!l&&!Z&&C&&(0,I.jsx)(d.xv,{style:(0,m.wh)([P["u_price_symbol"],D,v?T?x.u_price_symbol_hj:x.u_price_symbol:null,v&&r&&x.u_price_symbol_del]),children:"\xa5"}),l?(0,I.jsx)(d.xv,{style:(0,m.wh)([P["u_price_free"],v&&x.u_price_free]),children:"\u514d\u8d39"}):(0,I.jsx)(d.xv,{style:(0,m.wh)([R,v&&r&&x.price_classes_del,v&&!r?T?x.price_classes_hj:x.price_classes:null,Z?{fontSize:15}:{}]),children:t||0})]},2)),c&&!l&&L.push((0,I.jsx)(d.xv,{style:(0,m.wh)([P["u_price_pre"],f]),children:c},3)),o&&L.reverse(),(0,I.jsx)(d.G7,{style:(0,m.wh)([P["u_price"],_]),children:(0,I.jsx)(d.G7,{style:(0,m.wh)([P["u_price_box"]]),children:L})})}}]),n}(u)},70367:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(59438)),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.ZP),c=n(80692),u=n(23347),d=n(77395),p={saleout:{height:"100%"},saleout_wrap:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},saleout_text:{fontSize:(0,d.Vh)(15),color:"#666"},saleout_img:{width:180,height:180}},f=(0,u.Z)(p),h=n(2269),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(c.G7,{className:"saleout",style:f.saleout,children:(0,h.jsxs)(c.G7,{className:"saleout_wrap",style:f.saleout_wrap,children:[(0,h.jsx)(c.Ee,{url:"https://dimg04.c-ctrip.com/images/0AS6j120008r0zil35026.png_.webp",style:f.saleout_img}),(0,h.jsx)(c.xv,{className:"saleout_text",style:f.saleout_text,children:"\u5df2\u552e\u7f44"})]})})}}]),n}(l)},2823:function(e,t,n){"use strict";n.d(t,{pL:function(){return i},zh:function(){return o},kQ:function(){return r}});var i=function(e){return e["skuPeople"]="skuPeople",e["skuResource"]="skuResource",e["skuProduct"]="skuProduct",e["resource"]="resource",e["commonSku"]="commonSku",e}({}),o=function(e){return e["book"]="book",e["sku"]="sku",e["detail"]="detail",e["dayplay"]="dayplay",e["actSku"]="actSku",e["actSkuInline"]="actSkuInline",e}({}),r={10650062146:o.sku,10650054085:o.book}},64670:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(80692),l=n(81876),c=n(45023),u=n(59438),d=n(1675),p=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,l.Z)(o),"state",void 0),(0,c.Z)((0,l.Z)(o),"selfRef",void 0),(0,c.Z)((0,l.Z)(o),"random","RN"==o.platform?"":String(Math.random()).slice(2,7)),(0,c.Z)((0,l.Z)(o),"opacity",new s.fS.Value(0)),(0,c.Z)((0,l.Z)(o),"aniHeight",new s.fS.Value(0)),(0,c.Z)((0,l.Z)(o),"noFirstAni",void 0),(0,c.Z)((0,l.Z)(o),"defaultHeight",void 0),(0,c.Z)((0,l.Z)(o),"slideDirection",void 0),(0,c.Z)((0,l.Z)(o),"isRN","RN"==o.platform),o.state={isShow:e.show,selfHeight:0,isAnimation:!1,animationEnd:!0},o.noFirstAni=!!e.noFirstAni,o.defaultHeight=e.defaultHeight||0,o.slideDirection=o.props.slideDirection||"bottom",o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.props.show&&(this.props.onOpen&&this.props.onOpen(),this.getHeight())}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.selfHeight,n=e.isShow;!t&&n&&this.getHeight()}},{key:"onOpen",value:function(){this.setState({isShow:!0}),this.state.selfHeight?this.setAnimation(!0):this.getHeight()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.delay,i=e.collectAniFun,o=void 0===i?function(){}:i,r=e.changeData;e.show!==this.props.show&&(e.show?n?o((function(){return t.onOpen()})):this.onOpen():(this.noFirstAni=!1,n?o((function(){return t.setAnimation(!1)})):this.setAnimation(!1))),r!=this.props.changeData&&this.getHeight()}},{key:"onTransitionEnd",value:function(){var e=this.state,t=e.isShow,n=e.isAnimation;t&&!n?(this.setState({isShow:!1}),this.props.onClose&&this.props.onClose()):this.props.onOpen&&this.props.onOpen(),this.setState({animationEnd:!0})}},{key:"getHeight",value:function(){var e=this,t=this.props,n=t.prefix,i=t.defaultHeight,o=t.delay,r=function(t){t&&t.height&&e.setState({selfHeight:t.height},(function(){t&&t.height&&e.props.show&&e.setAnimation(!0)}))};this.selfRef&&(i?o?r({height:i}):setTimeout((function(){return r({height:i})})):(0,d.L6)(this.selfRef,r,"RN"==this.platform,n))}},{key:"setAnimation",value:function(e){var t=this,n=setTimeout((function(){clearTimeout(n),t.setState({isAnimation:e}),t.isRN&&t.setRnAnimation(e)}),50)}},{key:"setRnAnimation",value:function(e){var t=this,n=this.state.selfHeight;this.setState({animationEnd:!1});var i=this.props.transformDuration||(0,d.pX)(n),o=this.props.opacityDuration||(0,d.pX)(n/2),r="top"==this.slideDirection?-1:1;s.fS.parallel([s.fS.timing(this.aniHeight,{toValue:e?r*n:0,duration:i,easing:s.oY.ease,useNativeDriver:!0}),s.fS.timing(this.opacity,{toValue:e?1:0,duration:o,easing:s.oY.ease,useNativeDriver:!0})]).start((function(){t.setState({animationEnd:!0}),e?t.props.onOpen&&t.props.onOpen():(t.setState({isShow:!1}),t.props.onClose&&t.props.onClose())}))}}]),n}(u.ZP),f=(n(90201),n(23347)),h=n(77395),m={wraper:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},m_wrapper:{top:(0,h.Vh)(0),left:(0,h.Vh)(-99999),width:"100%",position:"absolute",overflow:"hidden",opacity:0},m_sibling_wrapper:{},m_wrapper_ani:function(e){return(0,h.eR)("opacity ".concat(e,"s ease"))},m_wrapper_transition:function(e){return(0,h.eR)("transform ".concat(e,"s ease"))}},_=(0,f.Z)(m),v=n(2269),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.noFirstAni,n=this.defaultHeight,i=this.state,o=i.selfHeight,r=i.isAnimation,a=i.animationEnd,l=this.props,c=l.Siblings,u=l.AniComp,p=l.style,m=l.siblingStyle,g=l.aniStyle,y=l.show,x=(this.props.opacityDuration||0)/1e3||(0,d.pX)(o/2)/1e3,b=(this.props.transformDuration||0)/1e3||(0,d.pX)(o)/1e3;"function"==typeof g&&(g=g(o));var k="top"==this.slideDirection?-1:1,w=(0,h.vs)("translate3d(0, ".concat(t&&y?k*(o||n):r?k*o:0,"px, 0)")),I={transform:[{translateY:t&&y?k*(o||n):this.aniHeight}]};return(0,v.jsxs)(s.G7,{style:(0,h.wh)([_.wraper,p]),children:[(0,v.jsx)(s.fS.View,{className:"m_animate_expand_wrapper_".concat(this.random),style:(0,f.Z)((0,h.wh)([_.m_wrapper,t?o||n?{}:{position:"relative"}:_.m_wrapper_ani(x),{opacity:t?1:this.opacity,left:r||t?0:-9999},"top"==this.slideDirection?I:{},"top"==this.slideDirection?w:{},"top"==this.slideDirection?_.m_wrapper_transition(b):{},(0,h.Nm)([{key:"opacity",value:t||r?(0,h.Oh)(1):(0,h.Oh)(0)}]),g])),ref:function(t){e.selfRef=t},onTransitionEnd:this.onTransitionEnd.bind(this),children:u}),(0,v.jsx)(s.fS.View,{style:(0,f.Z)((0,h.wh)([_.m_sibling_wrapper,t?o||n?{}:{position:"relative"}:_.m_wrapper_transition(b),{paddingBottom:r&&a||t?o:0},"bottom"==this.slideDirection?I:{},"bottom"==this.slideDirection?w:{},m])),children:c})]})}}]),n}(p)},26904:function(e,t,n){"use strict";n.d(t,{R:function(){return r},n:function(){return a}});var i=n(2883),o=n(8482),r=function(e){},a=function(e){var t,n=e.buttonInfo,r=void 0===n?"":n,a=e.buyNoteShareClickLog,s=void 0===a?"":a,l=e.spotId,c=void 0===l?"":l,u=e.resourceId,d=void 0===u?"":u,p=e.bottomHeight,f=void 0===p?"":p,h=e.hideBottom,m=void 0===h?"":h,_=e.isBox,v=void 0===_?"":_,g=e.productId,y=void 0===g?"":g,x=e.seckillid,b=void 0===x?"":x,k=e.filters,w=void 0===k?[]:k,I=e.poiId,Z=e.isFromShelf,T=void 0!==Z&&Z,S=(e.priceInfo,""),C=null===w||void 0===w||null===(t=w[0])||void 0===t||null===(t=t.filterItems)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value;try{if(r){var P,N=r.type,D=r.text,j=r.canJump,R=r.url,L=r.toast,E=null===(P=r.clickLog)||void 0===P||null===(P=P.params)||void 0===P?void 0:P.stocktype;S={type:N,text:D,canJump:j,url:R,toast:L,clickLog:{params:{stocktype:E}}},S=encodeURIComponent(JSON.stringify(S))}s&&(s=encodeURIComponent(JSON.stringify(s)))}catch(e){}var V=(0,i.RF)({spotId:c,resourceId:d,bottomHeight:f,hideBottom:m,isBox:v,productId:y,seckillid:b,buttonthininfo:S,buyNoteShareClickLog:s,poiId:I,isFromShelf:T,date:C},!0),A="/pages/xtnt/business/detail/resource-detail/buy-notes/index?".concat(V);(0,o.VF)(A,!1,{isNewWebview:!0})}},94737:function(e,t,n){var i,o,r=n(66371)["default"];!function(a,s){"object"==r(t)?e.exports=s():(i=s,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))}(0,(function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",o="second",a="minute",s="hour",l="day",c="week",u="month",d="quarter",p="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+g(i,2,"0")+":"+g(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(i,u),r=n-o<0,a=t.clone().add(i+(r?-1:1),u);return+(-(i+(n-o)/(r?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:p,w:c,d:l,D:f,h:s,m:a,s:o,ms:i,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},x="en",b={};b[x]=v;var k="$isDayjsObject",w=function(e){return e instanceof S||!(!e||!e[k])},I=function e(t,n,i){var o;if(!t)return x;if("string"==typeof t){var r=t.toLowerCase();b[r]&&(o=r),n&&(b[r]=n,o=r);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var s=t.name;b[s]=t,o=s}return!i&&o&&(x=o),o||!i&&x},Z=function(e,t){if(w(e))return e.clone();var n="object"==r(t)?t:{};return n.date=e,n.args=arguments,new S(n)},T=y;T.l=I,T.i=w,T.w=function(e,t){return Z(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function r(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[k]=!0}var v=r.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(m);if(i){var o=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return T},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var n=Z(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return Z(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<Z(e)},v.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,i=!!T.u(t)||t,r=T.p(e),d=function(e,t){var o=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?o:o.endOf(l)},h=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,_=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(r){case p:return i?d(1,0):d(31,11);case u:return i?d(1,_):d(0,_+1);case c:var y=this.$locale().weekStart||0,x=(m<y?m+7:m)-y;return d(i?v-x:v+(6-x),_);case l:case f:return h(g+"Hours",0);case s:return h(g+"Minutes",1);case a:return h(g+"Seconds",2);case o:return h(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,r=T.p(e),c="set"+(this.$u?"UTC":""),d=(n={},n[l]=c+"Date",n[f]=c+"Date",n[u]=c+"Month",n[p]=c+"FullYear",n[s]=c+"Hours",n[a]=c+"Minutes",n[o]=c+"Seconds",n[i]=c+"Milliseconds",n)[r],h=r===l?this.$D+(t-this.$W):t;if(r===u||r===p){var m=this.clone().set(f,1);m.$d[d](h),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[T.p(e)]()},v.add=function(i,r){var d,f=this;i=Number(i);var h=T.p(r),m=function(e){var t=Z(f);return T.w(t.date(t.date()+Math.round(e*i)),f)};if(h===u)return this.set(u,this.$M+i);if(h===p)return this.set(p,this.$y+i);if(h===l)return m(1);if(h===c)return m(7);var _=(d={},d[a]=t,d[s]=n,d[o]=e,d)[h]||1,v=this.$d.getTime()+i*_;return T.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=T.z(this),r=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,o,r){return e&&(e[n]||e(t,i))||o[n].slice(0,r)},p=function(e){return T.s(r%12||12,e,"0")},f=u||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(_,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return s+1;case"MM":return T.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return T.s(r,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return f(r,a,!0);case"A":return f(r,a,!1);case"m":return String(a);case"mm":return T.s(a,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,r,f){var h,m=this,_=T.p(r),v=Z(i),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,x=function(){return T.m(m,v)};switch(_){case p:h=x()/12;break;case u:h=x();break;case d:h=x()/3;break;case c:h=(y-g)/6048e5;break;case l:h=(y-g)/864e5;break;case s:h=y/n;break;case a:h=y/t;break;case o:h=y/e;break;default:h=y}return f?h:T.a(h)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=I(e,t,!0);return i&&(n.$L=i),n},v.clone=function(){return T.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},r}(),C=S.prototype;return Z.prototype=C,[["$ms",i],["$s",o],["$m",a],["$H",s],["$W",l],["$M",u],["$y",p],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),Z.extend=function(e,t){return e.$i||(e(t,S,Z),e.$i=!0),Z},Z.locale=I,Z.isDayjs=w,Z.unix=function(e){return Z(1e3*e)},Z.en=b[x],Z.Ls=b,Z.p={},Z}))},69822:function(e,t,n){var i,o,r=n(66371)["default"];!function(a,s){"object"==r(t)?e.exports=s():(i=s,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))}(0,(function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(n,i,o){var r,a=function(e,n,i){void 0===i&&(i={});var o=new Date(e),r=function(e,n){void 0===n&&(n={});var i=n.timeZoneName||"short",o=e+"|"+i,r=t[o];return r||(r=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),t[o]=r),r}(n,i);return r.formatToParts(o)},s=function(t,n){for(var i=a(t,n),r=[],s=0;s<i.length;s+=1){var l=i[s],c=l.type,u=l.value,d=e[c];d>=0&&(r[d]=parseInt(u,10))}var p=r[3],f=24===p?0:p,h=r[0]+"-"+r[1]+"-"+r[2]+" "+f+":"+r[4]+":"+r[5]+":000",m=+t;return(o.utc(h).valueOf()-(m-=m%1e3))/6e4},l=i.prototype;l.tz=function(e,t){void 0===e&&(e=r);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString("en-US",{timeZone:e}),s=Math.round((i-new Date(a))/1e3/60),l=o(a,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-s,!0);if(t){var c=l.utcOffset();l=l.add(n-c,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return n&&n.value};var c=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var n=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(n,e,t).tz(this.$x.$timezone,!0)},o.tz=function(e,t,n){var i=n&&t,a=n||t||r,l=s(+o(),a);if("string"!=typeof e)return o(e).tz(a);var c=function(e,t,n){var i=e-60*t*1e3,o=s(i,n);if(t===o)return[i,t];var r=s(i-=60*(o-t)*1e3,n);return o===r?[i,o]:[e-60*Math.min(o,r)*1e3,Math.max(o,r)]}(o.utc(e,i).valueOf(),l,a),u=c[0],d=c[1],p=o(u).utcOffset(d);return p.$x.$timezone=a,p},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(e){r=e}}}))},91964:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(29339),c=n(81876),u=n(45023),d=n(59438),p=n(77942),f=n(49787),h=n(20731),m=n(1826),_=n(77395),v=n(21731),g=function(e){(0,r.Z)(s,e);var t=(0,a.Z)(s);function s(e){var n;return(0,i.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,c.Z)(n),"state",void 0),(0,u.Z)((0,c.Z)(n),"toCamping",(function(){n.push(n.props.poiUrl)})),n.state={isIPhoneX:!n.props.ignoreIphoneX&&(0,p.cY)(),isOpen:!1},n}return(0,o.Z)(s,[{key:"componentDidMount",value:function(){var e=this;if(m.Z.add("paymentPopLayer",h.Z,{props:{isOpened:!1}}),(0,p.yF)()&&!(0,p.rI)()){var t=this.state.isIPhoneX;this.setState({isIPhoneX:!t},(function(){return e.setState({isIPhoneX:t})}))}}},{key:"triggleOpen",value:function(){var e=this,t=this.props,i=t.footPop,o=void 0===i?{}:i,r=t.notHigh,a=o.title,s=o.content,l=o.totleContent,c=o.bottom,u=o.priceTipList,d=void 0===u?"":u,h=o.minHeightRatio,m=n(56754).Z,g=[v.NX.RN,v.NX.Mini].includes(this.platform),y=(0,_.Vh)(!this.state.isIPhoneX||r&&!g?61:86),x=p.Db.get("window").height,b=.8*x-y-p.iO,k=h?x*h-y-p.iO:void 0;(0,f.sg)("paymentPopLayer")||this.setState({isOpen:!0}),f.ZP.show({props:{name:"paymentPopLayer",title:a,maxHeight:b,contentMaxHeight:b-44,bottomHeight:y,zIndex:1200,style:{height:x},onClosed:function(){e.setState({isOpen:!1})},headerStyles:{m_poplayer_title:{color:"#111"},closeColor:"#555",closeIcon:"xclosed"},minHeight:k},child:m,childProps:{content:s,totleContent:l,bottom:c,priceTipList:d}})}},{key:"goVendorShop",value:function(e){this.push(e)}},{key:"booking",value:function(){this.props.booking(),(0,f.sg)("paymentPopLayer")&&f.ZP.hide("paymentPopLayer")}}]),s}(d.ZP),y=n(3902),x=n(298),b=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(d.ZP),k=n(23347),w={m_part_loading:{display:"flex",flexDirection:"row",width:(0,_.Vh)(13),height:(0,_.Vh)(13),marginRight:(0,_.Vh)(8)},m_image_background:{width:"100%",height:"100%",backgroundSize:"100% 100%"}},I=(0,k.Z)(w),Z=n(2269),T=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e="https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png_.webp";return(0,Z.jsx)(s.G7,{className:"m_part_loading",style:I.m_part_loading,children:(0,Z.jsx)(s.G7,{style:(0,x.Z)({backgroundImage:"url(".concat(e,")")},I.m_image_background)})})}}]),n}(b),S=n(36665),C={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},linearGradientColor:["rgba(255, 165, 10, 1)","rgba(255, 119, 0,1)"]},P={linearGradientColor:["rgba(221,221,221, 1)","rgba(221,221,221, 1)"]},N=90,D={m_footer:{width:"100%",height:(0,_.Vh)(64),zIndex:202,backgroundColor:"#ffffff",display:"flex",flexDirection:"row",flexShrink:(0,_.i4)(0),bottom:(0,_.Vh)(0),left:(0,_.Vh)(0),alignItems:"center",justifyContent:"space-between"},m_footer_shadow:(0,x.Z)((0,x.Z)({},(0,_.Wn)({hShadow:-16,vShadow:-16,blur:16,spread:2,color:"rgba(0, 0, 0, 0.05)",rnColor:"rgba(0,0,0)",opacity:.05})),{},{elevation:16}),m_footer_long:(0,x.Z)({height:(0,_.Vh)(88)},(0,_.ix)("border-box")),m_footer_left:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingTop:(0,_.Vh)(4),paddingRight:(0,_.Vh)(4),paddingBottom:(0,_.Vh)(4),paddingLeft:(0,_.Vh)(16),flexGrow:(0,_.H7)(0),flexShrink:(0,_.i4)(1)},m_footer_left_box:{display:"flex",flexDirection:"row"},m_footer_left_total:{display:"flex",flexDirection:"row",alignItems:"flex-end"},m_footer_left_title:{color:"#333",fontSize:(0,_.Vh)(14),fontWeight:"bold",lineHeight:(0,_.Nv)((0,_.Vh)(22)),marginRight:(0,_.Vh)(4)},m_footer_left_price:{display:"flex",flexDirection:"row",fontFamily:"20TH_bold",alignItems:"center"},m_footer_currency:(0,x.Z)({fontSize:(0,_.Vh)(15),color:"#FF5500",lineHeight:(0,_.Nv)((0,_.Vh)(24)),marginRight:(0,_.Vh)(2)},"android"==p.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_footer_left_price_text:(0,x.Z)({fontWeight:"500",color:"#FF5500",fontSize:(0,_.Vh)(22),lineHeight:(0,_.Nv)((0,_.Vh)(27))},"android"==p.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_footer_price_from:{fontSize:(0,_.Vh)(12),color:"#666",fontWeight:"300",marginLeft:(0,_.Vh)(2),lineHeight:(0,_.Nv)((0,_.Vh)(24))},m_footer_left_desc:{color:"#f70",fontSize:(0,_.Vh)(13),lineHeight:(0,_.Nv)((0,_.Vh)(17)),marginTop:(0,_.Vh)(2)},m_footer_right:(0,x.Z)((0,x.Z)({},_._),{},{justifyContent:"space-between"},S.Mv.m_footer_right),m_footer_left_detail:(0,x.Z)((0,x.Z)({height:(0,_.Vh)(24),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},S.Mv.m_footer_left_detail),{},{width:(0,_.Vh)(42)}),detail_text:{color:"#111",fontSize:(0,_.Vh)(13)},detail_icon:{display:"flex",marginLeft:(0,_.Vh)(2)},m_footer_btn:{width:(0,_.Vh)(90),height:(0,_.Vh)(44),borderRadius:(0,_.Vh)(6),textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginRight:(0,_.Vh)(16)},onlyBtnStyle:{marginLeft:"auto",marginRight:"auto",width:"90%"},m_footer_btn_gray:{backgroundColor:"#ddd",color:"#999"},mFooterBtnText:{fontSize:(0,_.Vh)(17),color:"#fff",fontWeight:"bold"},mFooterBtnGray:{color:"#999"},mFooterBtnTextGray:{color:"#999"},mFooterPriceFrom:{fontSize:(0,_.Vh)(12),color:"#666",fontWeight:"300",marginLeft:(0,_.Vh)(3)},mFooterPosition:{width:"100%",height:(0,_.Vh)(64),backgroundColor:"transparent"},mFooterLong:{height:(0,_.Vh)(88)},m_icons:{flexDirection:"row",display:"flex"},m_vendor:{width:(0,_.Vh)(54),alignItems:"center",marginTop:8},m_vendor_h5:{display:"flex",flexDirection:"column"},m_vendor_text:{marginTop:(0,_.Vh)(7),color:"#111",fontSize:(0,_.Vh)(12)},m_next_desc:{fontSize:(0,_.Vh)(10),color:"#fff"},m_footer_tip_view:{display:"flex",flexDirection:"row",backgroundColor:"#fff8f2",alignItems:"center",justifyContent:"flex-start",height:(0,_.Vh)(34),paddingTop:(0,_.Vh)(0),paddingRight:(0,_.Vh)(8),paddingBottom:(0,_.Vh)(0),paddingLeft:(0,_.Vh)(8)},m_footer_tip_view_icon:{marginLeft:(0,_.Vh)(6),fontWeight:"400"},m_footer_tip_view_item:{paddingTop:(0,_.Vh)(8),paddingRight:(0,_.Vh)(0),paddingBottom:(0,_.Vh)(8),paddingLeft:(0,_.Vh)(5)},m_footer_tip_view_text:{fontSize:(0,_.Vh)(12),color:"#f70"},m_footer_btn_box:{display:"flex",justifyContent:"center",alignItems:"center"},m_footer_btn_title_box:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},m_footer_btn_price_box:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_footer_btn_price:{color:"#fff",fontWeight:"bold",fontSize:(0,_.Vh)(12)},m_footer_btn_discount:{color:"#fff",fontSize:(0,_.Vh)(12),fontWeight:"bold"},m_footer_price_linethrough:{textDecorationLine:"line-through",fontSize:(0,_.Vh)(13),color:"#555",lineHeight:(0,_.Nv)((0,_.Vh)(17))},m_footer_total_wraper:(0,x.Z)((0,x.Z)({},_.xI),{},{alignItems:"flex-end",marginRight:(0,_.Vh)(3)}),arrow:{display:"flex",marginLeft:(0,_.Vh)(3)},m_footer_left_deduct_esc_container:{backgroundColor:"#FFF4EB",display:"flex",borderRadius:(0,_.Vh)(2)},m_footer_left_deduct_esc:(0,x.Z)((0,x.Z)({},(0,_.o3)((0,_.Vh)(1),(0,_.Vh)(3))),{},{lineHeight:(0,_.Nv)((0,_.Vh)(17)),color:"#FF5500",fontSize:(0,_.Vh)(13)}),m_footer_btn_wrap:{marginLeft:(0,_.Vh)(6)},m_vendor_icon:{width:(0,_.Vh)(24),height:(0,_.Vh)(24)}},j=(0,k.Z)(D),R=n(79932),L=n(36556),E="H5"===(0,R.ZP)().platform,V=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"shopIconRender",value:function(e,t,n){var i=e.vendorShopInfo,o=(e.isCtripSale,e.vendorLog),r=n||{},a=r.customName,c=r.icon;return i&&i.url&&!i.isCtripSale?(0,Z.jsx)(l.Z,{onClick:this.goVendorShop.bind(this,i.url),log:o,children:(0,Z.jsxs)(s.G7,{style:t.m_vendor,children:[c?(0,Z.jsx)(s.Ee,{url:c,style:E?{width:26,height:26}:{width:24,height:24}}):(0,Z.jsx)(y.Z,{type:"shop",color:"#333",size:t.m_vendor_icon&&t.m_vendor_icon.size||48}),(0,Z.jsx)(s.xv,{style:t.m_vendor_text,children:a||"\u5e97\u94fa"})]})}):null}},{key:"renderOther",value:function(e,t){var n,i,o=e||{},r=o.customName,a=o.icon,c=this.props.campIconPoiId,u=this.props.footerCampingIconLog;return c&&u&&(n=null===u||void 0===u?void 0:u.expo({poiid:c}),i=null===u||void 0===u?void 0:u.click({poiid:c})),(0,Z.jsx)(l.Z,{onClick:this.toCamping,testID:n,log:i,children:(0,Z.jsxs)(s.G7,{style:t.m_vendor,children:[(0,Z.jsx)(s.Ee,{url:a,style:E?{width:26,height:26}:{width:24,height:24}}),(0,Z.jsx)(s.xv,{style:t.m_vendor_text,children:r||"\u9732\u8425\u5730"})]})})}},{key:"footerIconRender",value:function(e,t){var n=this,i=e.footerConfig,o=e.orderList,r=void 0===o?["im","vendor","fav"]:o,a=e.renderIM,l=e.renderFav,c=e.renderOther;return i&&i.length?(0,Z.jsx)(s.G7,{style:t.m_icons,children:null===i||void 0===i?void 0:i.map((function(i){if(!i.selected)return null;switch(i.category){case"service":return a?a("custom",void 0,i):null;case"shop":return n.shopIconRender(e,t,i);case"favorite":return l?l(i):null;case"poi":return n.renderOther(i,t)}}))}):r.length>0?(0,Z.jsx)(s.G7,{style:t.m_icons,children:null===r||void 0===r?void 0:r.map((function(i){switch(i){case"im":return a?a(i):null;case"vendor":return n.shopIconRender(e,t);case"fav":return l?l(i):null;case"poi":return c?c(i):null}}))}):null}},{key:"render",value:function(){var e=this.state,t=e.isIPhoneX,n=e.isOpen,i=this.props,o=i.total,r=i.otherDesc,a=i.deductDesc,c=i.nextTitle,u=i.footPop,d=void 0===u?{}:u,p=i.currency,f=i.isGrayBtn,h=i.subPriceDes,m=i.btnClickLog,v=i.detailClickLog,g=i.btnExposureLog,x=i.detailExposureLog,b=i.showPriceAres,k=void 0===b||b,w=i.vendorShopInfo,I=void 0===w?{}:w,S=i.otherDescColor,D=i.notHigh,R=(i.clearTextbtn,i.onlyBtn),E=i.nextDesc,V=i.fstyle,A=void 0===V?{}:V,O=i.linearGradientStyles,F=void 0===O?{}:O,M=i.tipText,B=i.hideTipIcon,U=i.renderTips,G=(i.vendorLog,i.renderIM,i.renderLeftButton),H=(i.renderFav,i.imStyle),z=i.comingStyle,q=void 0===z?{}:z,K=i.price,W=i.discount,X=i.marketPrice,Y=i.hideShadow,Q=i.ConfigPriceComp,J=i.ConfigTipComp,$=i.btnTraceData,ee=i.className,te=void 0===ee?"":ee,ne=i.renderGuideFooter,ie=i.renderGuidePackageTab,oe=i.showPriceByBtn,re=i.detailTraceLog,ae=i.onLayout,se=i.renderPayBtn,le=i.moduleExpoLog,ce=(I.isCtripSale,(0,_.Ec)(j,A));return(0,Z.jsxs)(s.G7,{style:ce.m_wrapper,className:"ottd-footer ".concat(te),children:[ie?ie():null,U?U():M?(0,Z.jsxs)(s.G7,{style:ce.m_footer_tip_view,children:[!B&&(0,Z.jsx)(y.Z,{type:"info",size:26,color:"#f70",style:ce.m_footer_tip_view_icon}),(0,Z.jsx)(s.G7,{style:ce.m_footer_tip_view_item,children:(0,Z.jsx)(s.xv,{style:ce.m_footer_tip_view_text,children:M})})]}):J?(0,Z.jsx)(J,{}):null,ne?(0,Z.jsx)(s.G7,{className:"m_footer_shadow_fix",style:(0,_.wh)([ce.m_footer,t&&!D?ce.m_footer_long:null,Y?null:ce.m_footer_shadow]),catchMove:!0,disableScroll:!0,onLayout:ae,children:ne?ne():null}):(0,Z.jsxs)(s.G7,{style:(0,_.wh)([ce.m_footer,t&&!D?ce.m_footer_long:null,Y?null:ce.m_footer_shadow]),catchMove:!0,disableScroll:!0,className:"m-footer-shadow",testID:(null===le||void 0===le?void 0:le.key)&&(0,L.kI)(le.key,le.params)||"",children:[!!Q&&(0,Z.jsx)(Q,{}),Q||!k&&!r?null:(0,Z.jsxs)(s.G7,{style:ce.m_footer_left,children:[k?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(s.G7,{style:ce.m_footer_left_box,children:(0,Z.jsx)(s.G7,{style:ce.m_footer_left_total,children:o?(0,Z.jsxs)(s.G7,{style:ce.m_footer_left_price,children:[(0,Z.jsxs)(s.G7,{style:ce.m_footer_total_wraper,children:[p?(0,Z.jsx)(s.xv,{style:ce.m_footer_currency,children:p}):null,(0,Z.jsx)(s.xv,{style:ce.m_footer_left_price_text,children:o}),h?(0,Z.jsx)(s.xv,{style:ce.m_footer_price_from,children:h}):null]}),!!a&&(0,Z.jsx)(s.G7,{style:ce.m_footer_left_deduct_esc_container,children:(0,Z.jsx)(s.xv,{style:ce.m_footer_left_deduct_esc,children:a})})]}):(0,Z.jsx)(T,{})})})}):null,r?(0,Z.jsx)(s.xv,{style:Object.assign({},ce.m_footer_left_desc,S?{color:S}:null),children:r}):X?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(s.xv,{style:(0,_.wh)([ce.m_footer_price_linethrough]),children:[p,X]})}):null]}),(0,Z.jsxs)(s.G7,{style:(0,_.wh)([{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",alignItems:"center"},,H]),children:[!Q&&!!d.content&&(0,Z.jsxs)(l.Z,{style:ce.m_footer_left_detail,onClick:this.triggleOpen.bind(this),log:v,testID:"footer_detail",devTraceData:re,children:[(0,Z.jsx)(s.G7,{testID:x,children:(0,Z.jsx)(s.xv,{style:ce.detail_text,children:"\u660e\u7ec6"})}),(0,Z.jsx)(s.G7,{style:(0,_.wh)([ce.arrow]),children:(0,Z.jsx)(y.Z,{type:n?"arrowdown":"arrowup",size:20,color:"#111",className:"detail_icon"})})]}),this.footerIconRender(this.props,ce),G?G():null,se?se():(0,Z.jsx)(l.Z,{onClick:this.booking.bind(this),log:!f&&m,style:(0,_.wh)([R?{width:"100%"}:ce.m_footer_btn_wrap]),activeOpacity:f?1:.8,testID:"footer_btn",onPressIn:function(){s.N1.dismiss()},devTraceData:$,children:(0,Z.jsx)(s.o,{start:F.start||C.linearGradientStart,end:F.end||C.linearGradientEnd,direction:N,colors:F.colors||(f?P.linearGradientColor:C.linearGradientColor),style:(0,_.wh)([ce.m_footer_btn,R?ce.onlyBtnStyle:null]),"hover-class":"none",plain:!0,children:(0,Z.jsxs)(s.G7,{style:ce.m_footer_btn_box,children:[(0,Z.jsxs)(s.G7,{style:(0,_.wh)([ce.m_footer_btn_title_box,q.m_footer_btn_title_box]),children:[(0,Z.jsx)(s.xv,{testID:g,style:(0,_.wh)([ce.mFooterBtnText,q.mFooterBtnText,f?ce.mFooterBtnTextGray:null]),children:c}),!!E&&(0,Z.jsx)(s.xv,{style:ce.m_next_desc,children:E})]}),void 0!==K&&"0"!==oe?(0,Z.jsxs)(s.G7,{style:ce.m_footer_btn_price_box,children:[(0,Z.jsx)(s.xv,{style:ce.m_footer_btn_price,children:"\xa5".concat(K)}),W?(0,Z.jsx)(s.xv,{style:ce.m_footer_btn_discount,children:"(\u5df2\u51cf\xa5".concat(W,")")}):null]}):null]})})})]})]})]})}}]),n}(g)},27015:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(298),o=n(90201),r=n(80692),a=n(77395),s=n(90129),l=n(1675),c=n(79932),u=n(21731),d=(0,c.ZP)(),p=function(e){var t=(0,o.useState)(!1),n=(0,s.Z)(t,2),i=n[0],a=n[1],c=(0,o.useRef)(!1),p=d.platform!=u.NX.RN?0:(0,o.useRef)(new r.fS.Value(0)).current,f=d.platform!=u.NX.RN?0:(0,o.useRef)(new r.fS.Value(0)).current,h=(0,o.useRef)(null);return(0,o.useEffect)((function(){(0,l.L6)(h.current,(function(t){if(t&&t.height){var n=t.height;if(!c.current){var i=e.duration,o=e.delay;a(!0),c.current=!0,setTimeout((function(){r.fS.timing(f,{toValue:1,duration:i||200,dom:h.current,H5Animation:{opacity:1}}).start(),r.fS.timing(p,{toValue:n,duration:i||200,easing:r.oY.linear,dom:h.current,H5Animation:{height:n+"px"}}).start()}),"number"==typeof o?o:100)}}}),!1)})),{heightAnim:p,opacity:f,isServiceTagLayout:i,wrapRef:h}},f=p,h=n(2269),m=function(e){var t=e.children,n=e.duration,o=f(e),s=o.heightAnim,l=o.opacity,c=o.isServiceTagLayout,u=o.wrapRef;return(0,h.jsx)(r.fS.View,{style:(0,a.wh)([{position:c?"static":"absolute",opacity:l,height:c?s:"auto"},c?(0,i.Z)({},(0,a.eR)("all ".concat(n?n/1e3:"0.2","s linear"))):{}]),ref:u,children:t})},_=m},85309:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(29339),c=n(81876),u=n(45023),d=n(59438),p=n(92954),f=n.n(p),h={setString:function(e){f().setClipboardData({data:e})}},m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,u.Z)((0,c.Z)(o),"imPoplayer",void 0),(0,u.Z)((0,c.Z)(o),"bridge",void 0),o}return(0,o.Z)(n,[{key:"goIM",value:function(e){this.push(e)}},{key:"mackCall",value:function(e,t){if(!t&&this.bridge){var n=this.props.clickPhoneCallBack;n&&n(),this.bridge.callNative("Call","makeCall",{phoneNumber:e})}}},{key:"copyPhoneNum",value:function(e){h.setString(e),this.toast.show("\u590d\u5236\u6210\u529f")}}]),n}(d.ZP),_={callNative:function(e,t,n){}},v=n(298),g=n(77942),y=n(23347),x=n(77395),b=n(36665),k={v_color_white:"rgba(255,255,255,0.99)",v_color_bg:"rgba(243,243,243,0.99)",v_color_border_graylight:"#ECECEC",v_color_font_weight:"#222222",v_color_gray:"#666666",v_color_gray_weakerb:"#bbbbbb",v_color_gray_weak:"#999999",v_color_font:"#333333",v_color_tag_blue_weak:"#06AEBD",v_color_indecator_bg:"#0086F6",v_color_recommend:"rgba(237,126,46,1)"},w=(0,y.Z)({m_im_wrapper:{position:"relative",width:g.Db.get("window").width},m_im_header:{height:(0,x.Vh)(44),flexDirection:"row",position:"absolute",width:"100%",top:(0,x.Vh)(0),left:(0,x.Vh)(0),backgroundColor:k.v_color_white,borderTopLeftRadius:(0,x.Vh)(8),borderTopRightRadius:(0,x.Vh)(8)},m_im_header_left:{width:(0,x.Vh)(44),height:(0,x.Vh)(44)},m_im_header_right:{width:(0,x.Vh)(44),height:(0,x.Vh)(44),justifyContent:"center",alignItems:"center"},m_im_header_center:{flex:1},m_im_header_title:{textAlign:"center",fontSize:(0,x.Vh)(17),lineHeight:(0,x.Vh)(44),height:(0,x.Vh)(44),fontWeight:"500"},m_im_body_wrapper:{paddingBottom:(0,x.Vh)(50),backgroundColor:k.v_color_bg},m_im_onlineservice:{marginBottom:(0,x.Vh)(10),paddingBottom:(0,x.Vh)(30),backgroundColor:k.v_color_white,padding:(0,x.Vh)(20),position:"relative"},m_im_onlineservice_title:{display:"flex",flexDirection:"row",alignItems:"center"},m_im_onlineservice_title_text:{fontSize:(0,x.Vh)(16),color:k.v_color_font_weight,fontWeight:"bold"},m_im_onlineservice_title_icon:{fontSize:(0,x.Vh)(10),lineHeight:(0,x.Nv)((0,x.Vh)(13)),color:k.v_color_white,backgroundColor:"#FF7700",marginLeft:(0,x.Vh)(10),paddingLeft:(0,x.Vh)(4),paddingRight:(0,x.Vh)(4),paddingTop:(0,x.Vh)(1),paddingBottom:(0,x.Vh)(1)},m_im_onlineservice_content:{flexDirection:"row",alignItems:"center"},m_im_onlineservice_left:(0,v.Z)({flex:1},b.im.m_im_onlineservice_left),m_im_onlineservice_left_text:{textAlign:"left",fontSize:(0,x.Vh)(12),color:k.v_color_gray_weakerb,marginTop:15,width:g.Db.get("window").width-75},m_im_onlineservice_right:{position:"absolute",width:(0,x.Vh)(24),height:(0,x.Vh)(24),bottom:"50%",marginBottom:0,right:0},m_im_telConsult:{marginBottom:(0,x.Vh)(18),paddingLeft:(0,x.Vh)(20),paddingRight:(0,x.Vh)(20),paddingTop:(0,x.Vh)(0),backgroundColor:k.v_color_white},m_im_telConsult_header:{paddingTop:(0,x.Vh)(16),borderBottomColor:k.v_color_border_graylight},m_im_telConsult_title:{fontSize:(0,x.Vh)(16),color:k.v_color_font_weight,marginBottom:(0,x.Vh)(18),fontWeight:"bold"},m_im_telConsult_servicetimer:{fontSize:(0,x.Vh)(12),color:k.v_color_gray,marginBottom:(0,x.Vh)(8)},m_im_telConsult_note:{display:"flex",fontSize:(0,x.Vh)(12),color:k.v_color_gray_weakerb,marginTop:(0,x.Vh)(10)},m_im_telConsult_proid:{color:"#222222"},m_im_telConsult_body:(0,v.Z)({},b.im.m_im_telConsult_body),m_im_telConsult_item:(0,v.Z)({flexDirection:"row",marginBottom:(0,x.Vh)(12),borderBottomColor:k.v_color_border_graylight},b.im.m_im_telConsult_item),m_im_telConsult_item_left:{flex:1},m_im_telConsult_item_copy:{color:k.v_color_indecator_bg},m_im_telConsult_item_right:{width:(0,x.Vh)(20),marginTop:(0,x.Vh)(20),justifyContent:"center",alignItems:"center"},m_im_telConsult_item_title:{display:"flex",fontSize:(0,x.Vh)(14),color:"#333333",marginBottom:(0,x.Vh)(8),fontWeight:"500"},m_im_telConsult_item_phonecode:{fontSize:(0,x.Vh)(12),color:k.v_color_gray_weakerb},m_im_telConsult_item_disable:{color:k.v_color_gray_weakerb},m_im_footer_text:(0,v.Z)({marginLeft:(0,x.Vh)(18),paddingTop:(0,x.Vh)(10),paddingBottom:(0,x.Vh)(10),fontSize:(0,x.Vh)(14),color:k.v_color_gray_weak},b.im.m_im_footer_text),m_im_footer_text_hidden:{height:10,display:"flex"}}),I={m_icondel_color_gray:k.v_color_font,m_message_color_blue:k.v_color_tag_blue_weak,m_phone_color_blue:k.v_color_indecator_bg,m_telConsult_disable:k.v_color_gray_weakerb},Z=(0,v.Z)((0,v.Z)({},w),I),T=n(36556),S=n(2269),C=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),o.bridge=_,o}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.onlineIM,o=void 0===i?{}:i,r=t.telIM,a=void 0===r?{}:r,c=n.isShowOnlineService,u=n.onlineService,d=n.phoneService,p=n.isShowTelConsult,f=n.fixedVerbal,h=p&&d?d.title:"",m=p&&d?d.serverTimeDeclare:"",_=p&&d?d.phoneInfoLists:[],v=a.click,g=a.expo,y=void 0===g?{}:g;return(0,S.jsxs)(s.G7,{style:[Z.m_im_wrapper,Z.m_im_body_wrapper],children:[(0,S.jsx)(s.xv,{style:f?Z.m_im_footer_text:Z.m_im_footer_text_hidden,children:f}),c?(0,S.jsx)(l.Z,{onClick:this.goIM.bind(this,u.url),log:o.click,children:(0,S.jsxs)(s.G7,{style:Z.m_im_onlineservice,children:[(0,S.jsxs)(s.G7,{style:Z.m_im_onlineservice_title,children:[(0,S.jsx)(s.xv,{style:Z.m_im_onlineservice_title_text,children:u.text}),(0,S.jsx)(s.xv,{style:Z.m_im_onlineservice_title_icon,children:"\u63a8\u8350"})]}),(0,S.jsxs)(s.G7,{style:Z.m_im_onlineservice_content,children:[(0,S.jsx)(s.G7,{style:Z.m_im_onlineservice_left,children:(0,S.jsx)(s.xv,{style:Z.m_im_onlineservice_left_text,children:u.tips})}),(0,S.jsx)(s.G7,{style:Z.m_im_onlineservice_right,children:(0,S.jsx)(s.JO,{type:"message",size:50,color:Z.m_phone_color_blue,isSvg:!0})})]})]})}):null,p?(0,S.jsxs)(s.G7,{style:Z.m_im_telConsult,children:[(0,S.jsxs)(s.G7,{style:Z.m_im_telConsult_header,children:[(0,S.jsx)(s.xv,{style:Z.m_im_telConsult_title,children:h}),!!m&&(0,S.jsx)(s.xv,{style:Z.m_im_telConsult_servicetimer,children:m})]}),(0,S.jsx)(s.G7,{style:Z.m_im_telConsult_body,children:_.map((function(t,n){return(0,S.jsxs)(s.G7,{style:Z.m_im_telConsult_item,children:[(0,S.jsxs)(s.G7,{style:Z.m_im_telConsult_item_left,children:[(0,S.jsx)(s.xv,{style:[Z.m_im_telConsult_item_title,t.disabled&&Z.m_im_telConsult_item_disable],children:t.label}),(0,S.jsx)(l.Z,{onClick:e.copyPhoneNum.bind(e,t.phoneNumber),children:(0,S.jsxs)(s.xv,{style:[Z.m_im_telConsult_item_phonecode,t.disabled&&Z.m_im_telConsult_item_disable],children:[t.phoneNumber,(0,S.jsx)(s.xv,{style:Z.m_im_telConsult_item_copy,children:"\xa0\xa0\u590d\u5236"})]})}),(0,S.jsx)(s.xv,{style:Z.m_im_telConsult_note,children:t.serverTimeDeclare}),(0,S.jsx)(s.xv,{style:Z.m_im_telConsult_note,children:t.tips})]}),(0,S.jsx)(l.Z,{onClick:e.mackCall.bind(e,t.phoneNumber,t.disabled),log:v,testID:(0,T.kI)(y.key,y.params),children:(0,S.jsx)(s.G7,{style:Z.m_im_telConsult_item_right,children:(0,S.jsx)(s.JO,{type:"phone",size:50,color:t.disabled?Z.m_telConsult_disable:Z.m_phone_color_blue,isSvg:!0})})})]},n)}))})]}):null]})}}]),n}(m)},86285:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(80692)),c=n(81876),u=n(45023),d=n(59438),p=n(49787),f=n(20731),h=n(1826),m=n(79301),_=n(95308),v=function(e,t){t.type;var n,i,o=t.productId,r=t.beijingTime,a=t.agreementType,s=t.saleService,l=t.serviceTimeDesc,c=t.isdomestic,u=t.onlyShowOnline,d=t.guideInfo,p=void 0===d?{}:d,f=t.bizLineType,h=t.isSkipPoplayer,m=null===e||void 0===e?void 0:e[0],_=m.imList,v=void 0===_?[]:_,y=m.phoneList,b=void 0===y?[]:y,k=2===s,w=!(null===v||void 0===v||!v.length),I=!h&&(!(null===b||void 0===b||!b.length)&&(k||!c)),Z=u?w:!(!w&&!I),T=2===s&&9===a,S=!u&&(I&&(T||1==s&&!c)),C={},P=[],N=2==f,D=3==f,j=w&&I&&S?"\u54a8\u8be2":I&&T?"\u7535\u8bdd\u54a8\u8be2":w?"\u5728\u7ebf\u54a8\u8be2":"\u5ba2\u670d";if(!Z)return C;if(w){var R=null===v||void 0===v?void 0:v[0],L=R.url,E=N?"\u5728\u7ebf\u54a8\u8be2\u5411\u5bfc":"\u5728\u7ebf\u5ba2\u670d";i={text:E,url:L,tips:"\u6e29\u99a8\u63d0\u793a\uff1a\u4e3a\u4e86\u8282\u7ea6\u60a8\u7684\u65f6\u95f4\uff0c\u5efa\u8bae\u60a8\u4f18\u5148\u9009\u62e9".concat(E)}}if(I){var V=g({beijingtime:r,servicetime:l});null===b||void 0===b||b.forEach((function(e){P.push({label:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?"\u5883\u5185\u62e8\u6253":"\u5168\u7403\u62e8\u6253",index:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?1:2,phoneNumber:e.displayNumber,disabled:!V,serverTimeDeclare:e.description.substring(0,16),tips:"\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5".concat(N?"\u5411\u5bfc":"\u5ba2\u670d","\u4ea7\u54c1\u7f16\u53f7\uff1a").concat(o)}),P.sort((function(e,t){return e.index-t.index})),c&&(P=P.slice(0,1)),n={title:N?"\u62e8\u6253\u5411\u5bfc\u7535\u8bdd":"\u7535\u8bdd\u5ba2\u670d",phoneInfoLists:P}}))}var A=2!==s||9!==a||N?"":"*\u672c\u4ea7\u54c1\u7531\u96f6\u552e\u5546\u76f4\u8425\uff0c\u5e76\u63d0\u4f9b\u54a8\u8be2/\u9884\u8ba2/\u552e\u540e\u670d\u52a1";return C={productId:o,isRetail:k,fixedVerbal:A,isShowTelConsult:I,isShowOnlineService:w,onlineService:i,phoneService:n,isShowIM:Z,ticketShowPoplayer:S,imText:j,isGuide:N,isTeamLeader:D,guideStatus:x(p.status)},C},g=function(e){var t=/(?:19|20|21)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1]))/g,n=/(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]/g,i=e.beijingtime,o=e.servicetime,r=null===i||void 0===i?void 0:i.match(t),a=null===i||void 0===i?void 0:i.match(n),s=null===o||void 0===o?void 0:o.match(n);if(!r||!a||!s)return!0;var l=y(r[0],a[0]),c=y(r[0],s[0]),u=y(r[0],s[1]);return l>c&&l<u},y=function(e,t){var n="".concat(e," ").concat(t);return new Date(n).getTime()},x=function(e){var t="";switch(e){case 0:t="\u79bb\u7ebf";break;case 2:t="\u5fd9\u788c";break;default:t="";break}return t},b=n(20159),k=n(77384),w=null,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.locateLevel,e.timeout),n=void 0===t?10:t,i=e.isForceLocate,o=void 0!==i&&i,r=e.isAccurate,a=void 0===r||r;return new Promise((function(e,t){var i;if(w){var r=w,s=r.CityId,l=r.CityName,c=r.IsOverSea;e({isOverSea:c,initCityId:s,initCityName:l})}var u={isAccurate:a,isForceLocate:o,interval:1e3*n,channel:"TTD_T",success:function(){var t=(0,_.Z)((0,m.Z)().mark((function t(n,i){var o,r,a,s,l,c,u;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=n.longitude,r=n.latitude,t.next=3,(0,k.d)({list:[{request:{head:{language:"zh-CN"},body:{lat:r,lng:o,IsGsLocation:!0}},actionUrl:"/restapi/soa2/17073/json/lbs/getcurrentcity"}]});case 3:a=t.sent,w=a[0],s=a[0],l=s.CityId,c=s.CityName,u=s.IsOverSea,e({isOverSea:u,initCityId:l,initCityName:c});case 7:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),fail:function(e){t({})}};null===(i=b.ZP.locate)||void 0===i||i.startGetGeoPoint(u)}))},Z=function(){return null},T=function(e){},S={locate:I,locateIM:I,cachedLocation:T,Business:Z},C=n(79932),P={platformId:1},N=function(e){return"https://m.ctrip.com/webapp/taro/pages/tnt/detail/product-detail/index/?productId=".concat(e)},D=n(77942),j=function(e){var t,n=e.type,i=e.productId,o=e.iqCode,r=e.pageId,a=e.resourceId,s=e.guideInfo,l=e.productName,c=e.spotid,u=e.destId,d=[];d.push({resourceId:String(i),idType:"PRODUCT",resourceType:"2"}),"ticket"===n&&(d.push({resourceId:String(a),idType:"RESOURCE",resourceType:"2"}),t={Type:1,spotid:c});var p=0-(new Date).getTimezoneOffset()/60;"guide"===n&&(d.push({resourceId:null===s||void 0===s?void 0:s.uid,idType:"GuideUID",resourceType:"2"}),t={textTitle:l||"",productName:l||"",toJumpUrl:"https://m.ctrip.com/webapp/things-to-do/detail/".concat(i,"?isHideNavBar=YES"),fromJumpUrl:N(i)},(null===s||void 0===s?void 0:s.id)&&(t.guideId=s.id),u&&(t.destId=u),i&&(t.productId=i),t.userTimezonesFromPage="GMT".concat(p>=0?"+":"-").concat(p));var f={isPreSale:1,iqCode:o,pageId:r,timeZone:p,version:(0,C.ZP)().version?(0,C.ZP)().version.split(".").join("")+"00":"830000",platformId:P.platformId,resourceList:d};return t&&(f.ext=JSON.stringify(t)),f},R=function(){var e=(0,_.Z)((0,m.Z)().mark((function e(t){var n,o,r,a,s,l,c,u,d=arguments;return(0,m.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},o=t.http,r=t.header,a=t.ctx,e.next=4,L(a);case 4:return s=e.sent,l=(0,i.Z)((0,i.Z)({},j(n)),{},{position:s}),e.next=8,o({list:[{request:Object.assign({},r,l),actionUrl:"/restapi/soa2/15529/json/getInQueryInfo"}]});case 8:c=e.sent,Object.assign(n,{isdomestic:"domestic"===s}),u=v(c,n),t.afterFetch(u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t="domestic";return(0,D.Z6)(null===e||void 0===e?void 0:e.userAgent)||(t=S.locateIM({locateLevel:0,isForceLocate:!1}).then((function(e){var n=e.isOverSea;return t=n?"oversea":"domestic"})).catch((function(e){return t="unknow"}))),t},E=function(e){var t=e.isShowOnlineService,n=e.isShowTelConsult,i=e.phoneService,o=e.fixedVerbal,r=i&&i.phoneInfoLists?i.phoneInfoLists:[],a=0;return a+=44,a+=o?44:0,a+=t?100:0,n&&(a+=1===r.length?190:0,a+=2===r.length?310:0),a},V=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,o.Z)(this,i),n=t.call(this,e),(0,u.Z)((0,c.Z)(n),"state",void 0),n.state={imInfoData:{},isShowIM:n.props.isShowIM,isShowTelConsult:!1,ticketShowPoplayer:!1,imText:"\u5ba2\u670d",isGuide:!1,showGuideToolTip:!1},n.init(n.props.imInfo),n.openUrl=n.openUrl.bind((0,c.Z)(n)),n.rotateValue=new l.fS.Value(0),n}return(0,r.Z)(i,[{key:"componentWillReceiveProps",value:function(e){var t,n;(null===e||void 0===e||null===(t=e.imInfo)||void 0===t?void 0:t.resourceId)!=(null===(n=this.props)||void 0===n||null===(n=n.imInfo)||void 0===n?void 0:n.resourceId)&&this.init(e.imInfo)}},{key:"handleRotate",value:function(){l.fS.sequence([l.fS.timing(this.rotateValue,{toValue:.6,duration:360,useNativeDriver:!0}),l.fS.timing(this.rotateValue,{toValue:-.5,duration:280,useNativeDriver:!0}),l.fS.timing(this.rotateValue,{toValue:.4,duration:240,useNativeDriver:!0}),l.fS.timing(this.rotateValue,{toValue:0,duration:120,useNativeDriver:!0})]).start((function(){}))}},{key:"init",value:function(e){R(this,e)}},{key:"afterFetch",value:function(e){var t=e.isShowIM,n=e.isShowTelConsult,i=e.ticketShowPoplayer,o=e.imText,r=e.isGuide;this.setState({imInfoData:e,isShowIM:t,isShowTelConsult:n,ticketShowPoplayer:i,imText:o,isGuide:r})}},{key:"componentDidMount",value:function(){var e=this;h.Z.add("IMPoplayer",f.Z,{props:{isOpened:!1}});var t=this.props,n=t.type,i=t.imInfo,o=this.state.imInfoData,r=void 0===o?{}:o;"guideBookModule"===n&&r&&!r.guideStatus&&setTimeout((function(){e.handleRotate()}),6e3);var a=i||{},s=a.guideInfo,l=void 0===s?{}:s;"guideBookModule"===n&&(0==(null===l||void 0===l?void 0:l.status)?this.setState({showGuideToolTip:!0},(function(){setTimeout((function(){e.setState({showGuideToolTip:!1})}),3e3)})):setTimeout((function(){e.setState({showGuideToolTip:!0},(function(){setTimeout((function(){e.setState({showGuideToolTip:!1})}),3e3)}))}),6e3))}},{key:"toggleImCb",value:function(e){if("0"===(null===e||void 0===e?void 0:e.ReturnCode)){var t=this.state,n=t.isShowTelConsult,i=t.ticketShowPoplayer,o=this.props.imInfo.type,r=this.state.imInfoData,a=void 0===r?{}:r,s=a.onlineService,l=void 0===s?{}:s,c=l.url;"act"===o||"guide"===o?n?this.showPoplayer(a):c&&this.push(c):"ticket"===o&&(i?this.showPoplayer(a):c&&this.push(c))}}},{key:"onClick",value:function(){var e=this,t=this.props.isSkipLogin,n=b.ZP.user.isLogin();n||t?this.toggleImCb({ReturnCode:"0"}):b.ZP.user.login({callback:function(t){e.toggleImCb(t)}})}},{key:"showPoplayer",value:function(e){var t=n(85309).Z,i=this.props,o=i.onlineIM,r=void 0===o?{}:o,a=i.telIM,s=void 0===a?{}:a,l=E(e);p.ZP.show({props:{name:"IMPoplayer",title:"\u8054\u7cfb\u5ba2\u670d",zIndex:1300,popHeight:l,isScrollView:!1},child:t,childProps:{data:e,onlineIM:r,telIM:s}})}},{key:"openUrl",value:function(e,t){var n;null===t||void 0===t||null===(n=t.stopPropagation)||void 0===n||n.call(t),e&&this.push(e)}},{key:"onCloseToolTip",value:function(){this.setState({showGuideToolTip:!1})}}]),i}(d.ZP),A=n(23347),O=n(77395),F=n(36665),M={m_im:{width:(0,O.Vh)(50),display:"flex",flexDirection:"column",alignItems:"center",marginTop:6},m_im_text:{marginTop:(0,O.Vh)(1),color:"#111",fontSize:(0,O.Vh)(12)},m_im_btn:(0,i.Z)({margin:(0,O.Vh)(10),marginTop:(0,O.Vh)(30),padding:(0,O.Vh)(10),borderWidth:(0,O.Vh)(1),borderRadius:(0,O.Vh)(6),borderColor:"#2698f7",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},F.im.m_im_btn),m_im_btn_text:{marginLeft:(0,O.Vh)(4),color:"#2698f7"},m_im_guide:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f2f8fe",width:(0,O.Vh)(60),height:(0,O.Vh)(60),borderRadius:8},m_im_guide_text:{color:"#2698f7",fontSize:(0,O.Vh)(10)},m_im_guide_formwork:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:(0,O.Vh)(28),backgroundColor:"#EBF4FF",borderRadius:(0,O.Vh)(14),marginLeft:(0,O.Vh)(30),flex:1,borderColor:"#fff",borderWidth:(0,O.Vh)(1),borderStyle:"solid"},m_im_guide_formwork_text:{color:"#3263a6",fontSize:(0,O.Vh)(12),fontFamily:"PingFangSC-Medium",fontWeight:"500",lineHeight:(0,O.Nv)((0,O.Vh)(16))},m_footer_btn_wrap:{flex:1,paddingRight:16,flexDirection:"row",alignItems:"space-around"},m_footer_btn_wrap_guide:{},m_footer_btn_box_guide:{backgroundColor:"#0086f6"},m_footer_btn_box_guide_text:{color:"#fff",fontSize:(0,O.Vh)(17),fontWeight:"400",paddingTop:(0,O.Vh)(2)},m_footer_btn:{width:(0,O.Vh)(90),height:(0,O.Vh)(44),borderRadius:(0,O.Vh)(6),textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginRight:(0,O.Vh)(12)},m_footer_guide_btn:(0,i.Z)((0,i.Z)({display:"flex",flexDirection:"row",alignItems:"center",width:(0,O.Vh)(134),height:(0,O.Vh)(44),backgroundColor:"#fff1e6",borderRadius:6},(0,O.yp)((0,O.Vh)(5))),{},{paddingLeft:(0,O.Vh)(5),paddingRight:(0,O.Vh)(5)}),m_footer_guide_img:{width:(0,O.Vh)(34),height:(0,O.Vh)(34),marginRight:(0,O.Vh)(8),borderRadius:4},m_footer_guide_tip:{width:(0,O.Vh)(74.5),color:"#ff7700",fontSize:(0,O.Vh)(11),fontWeight:"500"},m_im_teamanddriver:{width:"100%",backgroundColor:"rgb(0, 111, 246)",borderRadius:(0,O.Vh)(8),display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_im_teamanddriver_icon:{width:(0,O.Vh)(17),height:(0,O.Vh)(17),marginRight:(0,O.Vh)(3)},m_im_teamanddriver_text:{color:"#fff",fontSize:(0,O.Vh)(13),lineHeight:(0,O.Vh)(15),fontWeight:(0,O.Ue)("500"),marginTop:(0,O.Vh)(12),marginBottom:(0,O.Vh)(12)},m_footer_btn_guide_book_module:(0,i.Z)((0,i.Z)({borderRadius:6},(0,O.yp)((0,O.Vh)(11.5))),(0,O.WB)((0,O.Vh)(20))),m_footer_btn_text_guide_book_module:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:(0,O.Vh)(93.5),height:(0,O.Vh)(21),color:"#fff",fontSize:(0,O.Vh)(17),fontFamily:"PingFangSC-Medium",fontWeight:(0,O.Ue)("500"),letterSpacing:0,lineHeight:(0,O.Nv)((0,O.Vh)(22)),textAlign:"center"}},B={backgroundColor:"rgba(0,0,0,0.8)",borderRadius:(0,O.Vh)(6),height:(0,O.Vh)(19),top:-(0,O.Vh)(26)},U=(0,A.Z)(M),G=n(3902),H=n(29339),z=n(36556),q=n(52307),K=n(1675),W=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,c.Z)(i),"textRef",void 0),i.state={width:0,left:0},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.dynamicCalcWidth()}},{key:"dynamicCalcWidth",value:function(){var e=this;(0,K.L6)(this.textRef,(function(t){if(t&&t.width){var n=(t.width+4)/2-67;e.setState({width:t.width+4,left:n})}}))}}]),n}(d.ZP),X={m_tooltip_container:(0,i.Z)({backgroundColor:"rgba(34,34,34,0.7)",borderRadius:(0,O.Vh)(4),height:(0,O.Vh)(32),top:(0,O.Vh)(-40),position:"absolute"},O._7),m_tooltip_text_wrapper:(0,i.Z)({},O._7),m_tooltip_text:{color:"#fff",fontSize:(0,O.Vh)(13),position:"absolute",paddingRight:(0,O.Vh)(36),paddingLeft:(0,O.Vh)(38)},m_tooltip_text_offline:{paddingRight:(0,O.Vh)(12),paddingLeft:(0,O.Vh)(12)},m_tooltip_triangle_wrapper:(0,i.Z)((0,i.Z)({height:(0,O.Vh)(8),width:"100%",position:"absolute",left:0,bottom:(0,O.Vh)(-8)},O._7),{},{overflow:"hidden"}),m_tooltip_triangle:(0,i.Z)({width:(0,O.Vh)(10),height:(0,O.Vh)(10),backgroundColor:"rgba(34,34,34,0.7)"},(0,O.pm)({translateY:(0,O.Vh)(-6),rotate:"45deg"})),m_tooltip_close:{position:"absolute",right:(0,O.Vh)(10),height:(0,O.Vh)(15),paddingRight:(0,O.Vh)(3.5),paddingLeft:(0,O.Vh)(3.5),display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},m_tooltip_image_wrap:{position:"absolute",left:(0,O.Vh)(8),backgroundColor:"#fff",width:(0,O.Vh)(24),height:(0,O.Vh)(24),borderRadius:(0,O.Vh)(12),display:"flex",alignItems:"center",justifyContent:"center"},m_tooltip_image:{width:(0,O.Vh)(24)-2,height:(0,O.Vh)(24)-2,borderRadius:(0,O.Vh)(12)}},Y=(0,A.Z)(X),Q=n(2269),J=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=this.props,o=i.text,r=i.style,a=void 0===r?{}:r,s=i.imgSrc,c=void 0===s?"":s,u=i.onClick,d=i.offline,p=i.bubbleLog,f=this.state,h=f.width,m=f.left;return o?(0,Q.jsxs)(H.Z,{style:(0,O.wh)([Y.m_tooltip_container,{width:h,left:-(0,O.Vh)(m)},a]),activeOpacity:1,testID:(null===p||void 0===p?void 0:p.expo)&&(0,z.kI)(null===p||void 0===p||null===(e=p.expo)||void 0===e?void 0:e.key,null===p||void 0===p||null===(t=p.expo)||void 0===t?void 0:t.params),children:[(0,Q.jsx)(l.G7,{style:(0,O.wh)([Y.m_tooltip_triangle_wrapper]),children:(0,Q.jsx)(l.G7,{style:(0,O.wh)([Y.m_tooltip_triangle])})}),!d&&h&&c?(0,Q.jsx)(l.G7,{style:Y.m_tooltip_image_wrap,children:(0,Q.jsx)(l.Ee,{url:c,style:Y.m_tooltip_image})}):null,(0,Q.jsx)(l.G7,{style:(0,O.wh)([Y.m_tooltip_text_wrapper,h?{opacity:1}:{opacity:0}]),children:(0,Q.jsx)(l.xv,{className:"tooptip",ref:function(e){return n.textRef=e},style:(0,O.wh)([Y.m_tooltip_text,d?Y.m_tooltip_text_offline:{}]),children:o})}),!d&&h?(0,Q.jsx)(H.Z,{style:(0,O.wh)([Y.m_tooltip_close]),onClick:u,log:null===p||void 0===p?void 0:p.closeClick,children:(0,Q.jsx)(G.Z,{type:"xclosed",color:"#fff",size:24})}):null]}):null}}]),n}(W),$=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.isShowIM,n=e.imText,o=(e.isGuide,e.imInfoData),r=void 0===o?{}:o,a=e.showGuideToolTip,s=r.onlineService,c=void 0===s?{}:s,u=(r.isTeamLeader,r.isShowOnlineService),d=c.url,p=void 0===d?"":d,f=this.props,h=f.log,m=f.expo,_=f.fstyle,v=f.exposure,g=f.showImText,y=f.type,x=f.iconType,b=f.customImText,k=f.imButtonText,w=void 0===k?"":k,I=f.guideCardText,Z=f.iconSize,T=(f.iconColor,f.imTraceLog),S=f.customData,C=void 0===S?{}:S,P=f.logoImgUrl,N=f.guideDisplayName,D=f.imInfo,j=f.extraLog,R=void 0===j?{}:j,L=D||{},E=L.guideInfo,V=void 0===E?{}:E,A=0==V.status,F=(0,O.Ec)(U,_),M=R.bubble,K=void 0===M?{}:M;switch(y){case"guideBookModule":return u?(0,Q.jsxs)(H.Z,{onClick:this.openUrl.bind(this,p),log:h,style:(0,O.wh)([F.m_footer_btn_wrap_guide_book_module||{}]),children:[(0,Q.jsx)(l.o,{colors:["rgb(0, 136, 246)","rgb(0, 111, 246)"],start:{x:0,y:0},end:{x:1,y:0},style:F.m_footer_btn_guide_book_module,children:(0,Q.jsx)(l.xv,{style:F.m_footer_btn_text_guide_book_module,children:"\u54a8\u8be2\u5411\u5bfc"})}),N&&a?(0,Q.jsx)(J,{text:A?"\u79bb\u7ebf":N,imgSrc:P,onClick:this.onCloseToolTip.bind(this),offline:A,bubbleLog:K}):null]}):null;default:return"guideFooterBtn"===y?u?(0,Q.jsxs)(H.Z,{onClick:this.openUrl.bind(this,p),log:h,style:(0,O.wh)([F.m_footer_btn_wrap,F.m_footer_btn_wrap_guide||{}]),children:[(0,Q.jsx)(l.G7,{style:(0,O.Ec)(F.m_footer_btn_box_guide,F.m_footer_btn),children:(0,Q.jsx)(l.xv,{style:F.m_footer_btn_box_guide_text,children:w})}),r&&r.guideStatus?(0,Q.jsx)(q.Z,{text:r.guideStatus,placement:"right",style:B}):null]}):null:"guideCardIM"===y?(0,Q.jsxs)(H.Z,{onClick:this.openUrl.bind(this,p),style:F.m_im_btn,log:h,testID:(0,z.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[!I&&(0,Q.jsx)(G.Z,{type:"im",color:"#2698f7",size:36}),(0,Q.jsx)(l.xv,{style:F.m_im_btn_text,children:I||"\u54a8\u8be2\u5411\u5bfc\u6e38\u73a9\u7ebf\u8def\u3001\u8d39\u7528\u660e\u7ec6\u53ca\u4f18\u60e0\u4fe1\u606f"})]}):"guideCardNew"===y?(0,Q.jsxs)(H.Z,{onClick:this.openUrl.bind(this,p),style:F.m_im_guide,log:h,testID:(0,z.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[!I&&(0,Q.jsx)(G.Z,{type:"im",color:"#2698f7",size:48}),(0,Q.jsx)(l.xv,{style:F.m_im_guide_text,children:"\u54a8\u8be2\u5411\u5bfc"})]}):"guideFormwork"===y?(0,Q.jsx)(H.Z,{onClick:this.openUrl.bind(this,p),style:F.m_im_guide_formwork,log:h,testID:(0,z.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:(0,Q.jsx)(l.xv,{style:F.m_im_guide_formwork_text,children:"\u514d\u8d39\u54a8\u8be2/\u5b9a\u5236"})}):"teamanddriver"===y?(0,Q.jsxs)(H.Z,{onClick:this.openUrl.bind(this,p),style:F.m_im_teamanddriver,log:h,testID:(0,z.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[(0,Q.jsx)(l.Ee,{url:"https://dimg04.c-ctrip.com/images/1o53c12000bqcxwleE73F.png",style:F.m_im_teamanddriver_icon}),(0,Q.jsx)(l.xv,{style:F.m_im_teamanddriver_text,children:"\u9884\u7ea6\u5fc3\u4eea\u5411\u5bfc"})]}):t?(0,Q.jsx)(H.Z,{onClick:this.onClick.bind(this),log:h,testID:"im",devTraceData:T,children:(0,Q.jsxs)(l.G7,{testID:v,style:F.m_im,children:["custom"===y?(0,Q.jsx)(l.Ee,{url:C.icon,style:{width:26,height:26}}):(0,Q.jsx)(G.Z,{type:x||"im",color:"#111",size:Z||52}),(0,Q.jsx)(l.xv,{style:F.m_im_text,children:b||(g?n:"\u5ba2\u670d")})]})}):null}}}]),n}(V)},56754:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),l=n(80692),c=n(59438),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(c.ZP),d=n(298),p=n(23347),f=n(77395),h={m_payment_item:(0,d.Z)({},f.i3),m_item_left:{paddingRight:(0,f.Vh)(8)},m_item_right:{color:"#555"},m_margin_bottom:{marginTop:(0,f.Vh)(12)},m_item_total:{fontSize:(0,f.Vh)(15),color:"#111111",textAlign:"justify",backgroundColor:"#fff",position:"relative",zIndex:1},m_item_text:{lineHeight:(0,f.Nv)((0,f.Vh)(19))},m_item_detail:{color:"#888",fontSize:(0,f.Vh)(13),lineHeight:(0,f.Nv)((0,f.Vh)(17))},m_item_detail_light:{color:"#FF5500"},m_item_text_linethrough:{textDecorationLine:"line-through"},m_payment_item_desc:{color:"#aaa",fontSize:(0,f.Vh)(11),lineHeight:(0,f.Nv)(18)},m_payment_item_desc_1:{fontSize:(0,f.Vh)(13),lineHeight:(0,f.Nv)(19)},m_payment_item_descs:(0,d.Z)((0,d.Z)({},f.i3),{},{marginTop:(0,f.Vh)(4),maxWidth:(0,f.Vh)(276)}),m_payment_item_descs_top:{},m_payment_row_left:(0,d.Z)((0,d.Z)({},f._),{},{position:"relative",flex:1,paddingRight:(0,f.Vh)(32)}),m_discount_text_wrapper:(0,d.Z)((0,d.Z)({},f._7),{},{width:(0,f.Vh)(16),height:(0,f.Vh)(16),borderRadius:(0,f.Vh)(2),backgroundColor:"#FF7700",marginRight:(0,f.Vh)(4)}),m_discount_text:{fontSize:(0,f.Vh)(11),color:"#fff",lineHeight:(0,f.Nv)((0,f.Vh)(16))},m_payment_row_right:(0,d.Z)({},f.xI),m_payment_row_between:(0,d.Z)((0,d.Z)({},f._),{},{justifyContent:"space-between"}),m_payment_row_end:(0,d.Z)((0,d.Z)({},f._),{},{justifyContent:"flex-end",marginTop:(0,f.Vh)(2)}),m_item_linedot:{position:"absolute",zIndex:0,overflow:"hidden",left:0,right:0,top:"50%",height:f.WI,paddingRight:(0,f.Vh)(11)},m_item_border_dashed:(0,d.Z)({height:(0,f.Vh)(2),flex:1,width:"100%",borderRadius:1},(0,f.Cg)({width:(0,f.Vh)(2),style:"dashed",color:"#ddd"})),m_item_extra_price:{color:"#333",fontSize:14}},m=(0,p.Z)(h),_=n(2269),v=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.price,i=e.type,o=void 0===i?2:i,r=e.marketPrice,a=e.descs,s=void 0===a?[]:a,c=e.discountText,u=e.isDiscount,d=e.isNoDash,p=e.extraPrice,h=e.isReturnCash;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.G7,{style:(0,f.wh)([m.m_payment_item,2===o?m.m_margin_bottom:{}]),children:(0,_.jsxs)(l.G7,{style:m.m_payment_row_between,children:[(0,_.jsxs)(l.G7,{style:m.m_payment_row_left,children:[!!c&&(0,_.jsx)(l.G7,{style:m.m_discount_text_wrapper,children:(0,_.jsx)(l.xv,{style:m.m_discount_text,children:c})}),(0,_.jsx)(l.xv,{style:(0,f.wh)([m.m_item_text,m.m_item_left,1===o?m.m_item_total:m.m_item_detail,h?{backgroundColor:"transparent"}:{},1===o&&u?{fontSize:(0,f.Vh)(13),color:"#888"}:{}]),children:t}),1==o&&!d&&(0,_.jsx)(l.G7,{style:m.m_item_linedot,children:(0,_.jsx)(l.G7,{style:m.m_item_border_dashed})})]}),(0,_.jsx)(l.G7,{style:m.m_payment_row_right,children:r?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.xv,{space:"nbsp",style:(0,f.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail]),children:"\u95e8\u5e02\u4ef7 "}),(0,_.jsx)(l.xv,{space:"nbsp",style:(0,f.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail]),children:r}),p&&p.currency?(0,_.jsx)(l.G7,{children:(0,_.jsx)(l.xv,{style:m.m_item_extra_price,children:"(\u2248".concat(p.currency).concat(p.price,")")})}):null]}):(0,_.jsx)(l.xv,{space:"nbsp",style:(0,f.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail,h?{backgroundColor:"transparent"}:{},u?m.m_item_detail_light:{}]),children:n})})]})}),s.length?(0,_.jsx)(l.G7,{style:(0,f.wh)([m.m_payment_item_descs]),children:s.map((function(e){return(0,_.jsx)(l.xv,{style:(0,f.wh)([m.m_payment_item_desc]),children:e})}))}):null]})}}]),n}(s.Component),g=n(77942),y=n(18787),x=.75*y.HT-(0,f.Vh)(64),b={outermost:{display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},m_payment_popLayer:{paddingTop:(0,f.Vh)(16),paddingRight:(0,f.Vh)(16),paddingBottom:(0,f.Vh)(16),paddingLeft:(0,f.Vh)(16),backgroundColor:"#fff"},scroll_view_style:{width:"auto",maxHeight:x,boxSizing:"border-box",height:"auto"},m_payment_cont:{display:"flex",flexDirection:"column",fontSize:(0,f.Vh)(14),color:"#666",lineHeight:(0,f.Nv)((0,f.Vh)(30)),fontWeight:"400",paddingBottom:(0,f.Vh)(12),width:"100%"},m_payment_cont_no_padding_bottom:{paddingBottom:0},m_payment_bottom:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:(0,f.Vh)(16)},m_payment_bottom_text:{color:"#333",fontWeight:(0,f.Ue)("500"),lineHeight:(0,f.Nv)((0,f.Vh)(40)),fontSize:(0,f.Vh)(16),textAlign:"justify"},m_payment_total:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",marginTop:(0,f.Vh)(8)},m_payment_total_text:(0,d.Z)({color:"#FF6600",fontSize:(0,f.Vh)(22),fontWeight:(0,f.Ue)("bold")},"android"==g.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_payment_bottom_placeholder:{width:(0,f.Vh)(1),height:20},m_payment_return_crash_info:{paddingTop:(0,f.Vh)(8)},m_payment_extra_corner:{height:(0,f.Vh)(7)},m_payment_extra_corner_view:{position:"absolute",right:(0,f.Vh)(16),width:0,height:0,borderLeftWidth:(0,f.Vh)(7),borderLeftColor:"transparent",borderRightWidth:(0,f.Vh)(7),borderRightColor:"transparent",borderBottomWidth:(0,f.Vh)(13),borderBottomColor:"#F8FAFD"},m_payment_extra_content:{backgroundColor:"#f8fafd",borderRadius:(0,f.Vh)(6),paddingTop:(0,f.Vh)(4),paddingRight:(0,f.Vh)(12),paddingBottom:(0,f.Vh)(4),paddingLeft:(0,f.Vh)(12)},m_payment_tips_content:{color:"#999",fontSize:(0,f.Vh)(12),fontWeight:"normal",fontFamily:"PingFangSC-Regular"},line:{height:.5,backgroundColor:"#F0F0F0",marginTop:(0,f.Vh)(16),marginBottom:(0,f.Vh)(4)},m_payment_descTips:{paddingTop:(0,f.Vh)(12),display:"flex",flexDirection:"column"}},k=(0,p.Z)({m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0}}),w=(0,p.Z)({m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0,marginBottom:20}}),I=(0,p.Z)(b),Z=n(20159),T=n(81876),S=n(45023),C=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,S.Z)((0,T.Z)(o),"state",void 0),(0,S.Z)((0,T.Z)(o),"onLayoutFinish",(function(){o.setState({layoutFinish:!0})})),o.state={layoutFinish:!1},o}return(0,o.Z)(n)}(c.ZP),P=(0,p.Z)({m_payment_tips:{paddingLeft:16,paddingRight:16,marginTop:20},title:{color:"#111",fontSize:15,fontWeight:"normal",fontFamily:"PingFangSC-Regular"},priceTipItem:{color:"#aaaaaa",fontSize:12,fontFamily:"PingFangSC-Regular",lineHeight:(0,f.Nv)(16)},priceTip:{overflow:"hidden"}}),N=(0,p.Z)({m_textcollapse_content_text:{color:"#aaa",fontSize:12},m_button_text:{color:"#111111",fontSize:12},m_button:{width:"100%",height:32,bottom:-16},m_button_up:{bottom:0,height:16},m_button_linear:{width:"100%",height:32,display:"flex",flexDirection:"row",alignItems:"flex-end"},m_button_linear_up:{height:16},m_arrow_icon:{lineHeight:(0,f.Nv)((0,f.Vh)(16)),marginLeft:(0,f.Vh)(4)}}),D=n(88578),j=n(79932),R=(0,j.ZP)(),L=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.priceTipList,n=e.prefix,i=e.fstyle,o=void 0===i?{}:i,r=(0,f.Ec)(P,o),a="mini"==R.platform;return(0,_.jsxs)(l.G7,{style:r.m_payment_tips,children:[(0,_.jsx)(l.xv,{style:r.title,children:"\u4ef7\u683c\u8bf4\u660e"}),(0,_.jsx)(l.G7,{style:this.state.layoutFinish||"RN"===R.platform?{}:{height:4*(a?(0,f.Vh)(16):16),overflow:"scroll"},children:(0,_.jsx)(D.Z,{message:t,lineHeight:(0,f.Vh)(16,{needPx:!0}),lineNum:4,prefix:n,fstyle:N,showMoreIcon:!0,needShrinkHeight:a,linearStyle:{linearGradientStart:{x:0,y:0},linearGradientEnd:{x:0,y:1},linearGradientColor:["rgba(255, 255, 255, 0)","rgba(255, 255, 255,1) 100%"],direction:180},showMoreText:{arrowdown:"\u67e5\u770b\u66f4\u591a"},onLayoutFinish:this.onLayoutFinish})})]})}}]),n}(C),E=n(91964),V=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.totleContent,i=e.bottom,o=e.priceTipList,r=void 0===o?"":o,a=e.from,c=e.extraList,u=e.descTips,d=e.buttonInfo,p=e.callback,h=d?l.G7:s.Fragment,m=d?l.pf:l.G7;(0,j.ZP)().platform;return(0,_.jsxs)(h,{style:d?(0,f.wh)([I.outermost]):null,children:[(0,_.jsxs)(m,{style:(0,f.wh)([I.m_payment_popLayer,d?I.scroll_view_style:null]),scrollY:!0,className:"m_payment",children:[(0,_.jsx)(l.G7,{children:!!t.length&&t.map((function(e,o){var s=e.total||null;return(0,_.jsxs)(l.G7,{style:(0,f.wh)([I.m_payment_cont,o!=t.length-1||(null!==n&&void 0!==n&&n.price||null!==i&&void 0!==i&&i.name||!r)&&(null===n||void 0===n||!n.price||"ticket"!=a)?{}:I.m_payment_cont_no_padding_bottom]),children:[!!s&&(0,_.jsx)(v,{name:s.name,price:s.price,marketPrice:s.marketPrice,type:1,descs:s.descs,isDiscount:s.isDiscount||!!s.discountText,discountText:s.discountText,isNoDash:s.isNoDash,extraPrice:s.extraPrice}),e.items&&!!e.items.length&&e.items.map((function(e,t){return(0,_.jsx)(l.G7,{children:(0,_.jsx)(v,{name:e.name,descs:e.descs,price:e.price,marketPrice:e.marketPrice,isDiscount:e.isDiscount||!!e.discountText,discountText:e.discountText})},"content_item_".concat(t))}))]},"content".concat(o))}))}),u&&u.length?(0,_.jsxs)(l.G7,{style:I.m_payment_descTips,children:[(0,_.jsx)(l.xv,{style:I.m_payment_tips_content,children:"\u6e29\u99a8\u63d0\u793a"}),u.map((function(e){return(0,_.jsx)(l.xv,{style:I.m_payment_tips_content,children:e},e)}))]}):null,(null===n||void 0===n?void 0:n.price)&&"ticket"==a&&(0,_.jsx)(l.G7,{style:I.line}),(null===n||void 0===n?void 0:n.price)&&(0,_.jsxs)(l.G7,{style:I.m_payment_total,children:[(0,_.jsx)(l.xv,{style:I.m_payment_total_text,children:n.price}),null!==n&&void 0!==n&&n.info?(0,_.jsx)(l.xv,{style:I.m_payment_return_crash_info,children:n.info}):null]}),c&&c.length?(0,_.jsxs)(l.G7,{children:[(0,_.jsx)(l.G7,{style:I.m_payment_extra_corner,children:(0,_.jsx)(l.G7,{style:I.m_payment_extra_corner_view})}),(0,_.jsx)(l.G7,{style:I.m_payment_extra_content,children:c.map((function(e,t){return(0,_.jsx)(l.G7,{children:(0,_.jsx)(v,{name:e.name,descs:e.descs,price:e.price,isDiscount:!0,type:1,isNoDash:!0,isReturnCash:!0})},"extra".concat(t))}))})]}):null,!(null===i||void 0===i||!i.name)&&(0,_.jsx)(l.G7,{style:I.m_payment_bottom,children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.xv,{style:(0,Z.kg)((0,f.wh)([I.m_payment_bottom_text,{paddingRight:8}])),children:i.name}),(0,_.jsx)(l.xv,{style:I.m_payment_bottom_text,children:i.price})]})}),r?(0,_.jsx)(L,{priceTipList:r,prefix:".m_payment",fstyle:d?w:k}):null,(0,_.jsx)(l.G7,{style:(0,f.wh)([I.m_payment_bottom_placeholder])})]}),!!d&&(0,_.jsx)(E.Z,{nextTitle:d?d.layerText:"",showPriceAres:!1,onlyBtn:!0,booking:p,linearGradientStyles:d.buttonLinear,fstyle:{m_icons:{marginLeft:0},m_wrapper:{zIndex:1}},notHigh:!0})]})}}]),n}(u)},88578:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var i=n(90201),o=n(80692),r=n(29339),a=n(90129),s=n(1675),l=n(77942),c=function(e){var t=e.lineHeight*e.lineNum;(0,l.gn)()&&e.needShrinkHeight&&(t=Math.floor(t));var n=(0,i.useState)(!1),r=(0,a.Z)(n,2),c=r[0],u=r[1],d=(0,i.useState)("hide"),p=(0,a.Z)(d,2),f=p[0],h=p[1],m=(0,i.useState)(!1),_=(0,a.Z)(m,2),v=_[0],g=_[1],y=(0,i.useRef)(new o.fS.Value(t)).current,x=(0,i.useRef)(null),b=(0,i.useRef)(null),k=(0,i.useState)(t),w=(0,a.Z)(k,2),I=w[0],Z=w[1],T=function(){if("hide"===f){var n;o.fS.timing(y,{toValue:I,duration:200,useNativeDriver:!1,dom:b.current,H5Animation:{maxHeight:I+"px"}}).start((function(){})),h("open"),null===(n=e.openCallBack)||void 0===n||n.call(e)}else{if(e.isForbiddenHide)return;o.fS.timing(y,{toValue:t,duration:200,useNativeDriver:!1,dom:b.current,H5Animation:{maxHeight:t+"px"}}).start((function(){})),h("hide")}},S=function(n){g(!0),e.onLayoutFinish&&e.onLayoutFinish(),n&&(Z(n.height),Math.floor(n.height)<=t+5?(u(!1),o.fS.timing(y,{toValue:n.height,duration:200,useNativeDriver:!1,dom:b.current,H5Animation:{maxHeight:n.height+"px"}}).start((function(){}))):(u(!0),o.fS.timing(y,{toValue:t,duration:200,useNativeDriver:!1,dom:b.current,H5Animation:{maxHeight:t+"px"}}).start((function(){}))))};return(0,i.useEffect)((function(){(0,s.L6)(x.current,S,!1,e.prefix)}),[]),{textViewRef:x,wrapRef:b,heightAnim:y,defaultHeight:I,showMore:c,status:f,layOutFinish:v,setRnAnimation:T}},u=c,d=n(298),p=n(77395),f=n(23347),h={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:.5,y:0},linearGradientColor:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"]},m={m_textcollapse:{position:"relative",fontSize:(0,p.Vh)(12),marginTop:(0,p.Vh)(6)},m_textcollapse_wrap:(0,d.Z)({},(0,p.eR)("max-height 0.1s")),m_textcollapse_content_text:{fontSize:(0,p.Vh)(12),color:"#333"},m_button:{position:"absolute",right:(0,p.Vh)(0),bottom:(0,p.Vh)(0),width:(0,p.Vh)(60),paddingLeft:(0,p.Vh)(0)},m_button_up:{position:"relative",width:"100%"},m_button_text:{color:"#0086f6",display:"flex",textAlign:"right",fontSize:(0,p.Vh)(12)},m_button_linear:(0,d.Z)((0,d.Z)({},p.xI),{},{justifyContent:"flex-end"})},_=(0,f.Z)(m),v=n(79932),g=n(21731),y=n(2269),x=(0,v.ZP)(),b=(0,l.gn)()&&x.platform===g.NX.RN,k=(x.platform,g.NX.Mini,function(e){var t=u(e),n=t.heightAnim,i=t.textViewRef,a=t.wrapRef,s=t.showMore,l=t.status,c=t.layOutFinish,d=t.setRnAnimation,f=t.defaultHeight,m=e.message,v=e.ishtml,k=e.fstyle,w=e.renderMoreButton,I=e.lineHeight,Z=e.logs,T=e.lineNum,S=e.keyValue,C=e.linearStyle,P=e.showMoreIcon,N=e.showMoreText,D=void 0===N?{}:N,j=e.opacityAnimated,R=void 0!==j&&j,L=e.isForbiddenHide,E=h;C&&(E=C);var V=Z||{},A=V.devtraceLog,O=V.textExposureLog,F=V.prefixTest,M=V.clickDownLog,B=V.clickUpLog,U=V.clickDownExposureLog,G=V.clickUpExposureLog,H="hide"===l,z=H?M:B,q=H?U:G,K=(0,p.Ec)(_,k),W=!(L&&!H)&&(s&&c);return(0,y.jsxs)(r.Z,{onClick:d,activeOpacity:1,log:z,testID:F?"".concat(F,"_").concat(H?"down":"up"):"",devTraceData:A&&A(H?"\u5c55\u5f00":"\u6536\u8d77"),style:(0,p.wh)([K.m_textcollapse]),children:[(0,y.jsx)(o.fS.View,{style:(0,p.wh)([K.m_textcollapse_wrap,{overflow:c?"hidden":"scroll"},R?{opacity:c?1:0}:{},x.platform===g.NX.RN?{maxHeight:n}:{}]),ref:a,children:(0,y.jsx)(o.G7,{className:S||"",ref:i,testID:O,style:(0,p.wh)([K.m_textcollapse_content,{height:c?f:"auto",lineHeight:(0,p.Nv)(I)}]),children:v?m:(0,y.jsx)(o.xv,{style:(0,p.wh)([K.m_textcollapse_content_text,{lineHeight:(0,p.Nv)(I)}]),children:m})})}),W?(0,y.jsx)(o.G7,{style:(0,p.wh)([K.m_button,H?{}:K.m_button_up]),children:w?w(H):(0,y.jsxs)(o.o,{direction:E.direction||90,colors:E.linearGradientColor,start:E.linearGradientStart,end:E.linearGradientEnd,style:(0,p.wh)([K.m_button_linear,H?{}:K.m_button_linear_up]),children:[(0,y.jsx)(o.xv,{style:(0,p.wh)([K.m_button_text,{lineHeight:(0,p.Nv)(I-(4==T&&b?4:0))}]),testID:s?q:null,children:H?(null===D||void 0===D?void 0:D.arrowdown)||"\u5c55\u5f00":(null===D||void 0===D?void 0:D.arrowup)||"\u6536\u8d77"}),P?(0,y.jsx)(o.JO,{style:(0,p.wh)([K.m_arrow_icon,{lineHeight:(0,p.Nv)(I-(4==T&&b&&H?3:0))}]),type:H?"arrowdown":"arrowup",size:20,color:"#666666"}):null]})}):null]})}),w=k},59438:function(e,t,n){"use strict";n.d(t,{Pg:function(){return I},ZP:function(){return Z}});var i=n(79301),o=n(298),r=n(68277),a=n(95308),s=n(57042),l=n(24460),c=n(81876),u=n(21867),d=n(86066),p=n(45023),f=(n(90201),n(77384)),h=n(49214),m=n(79932),_=n(8482),v=n(33231),g=n(17513),y=n(77942),x=n(89465),b=n(72112),k=n(32180)["window"],w=["target"];!(0,y.rI)()&&(0,b.eV)(["getProductPriceCalendar","CreateTicketOrder","SearchBookingReducetools","searchBookingSalesPromotionRestful","getProductShelf","searchAdditionalResource","getActPreferenceInfo","resourceDetails","getShelfResourceList","getShopScenes","getTicketGroupInfo"]);var I=function(){var e=(0,m.ZP)();return{clientInfo:{currency:"CNY",locale:"zh-CN",pageId:(0,x.dD)().toString(),channelId:e.channelId,version:e.version,appPlatform:y.t4.OS,extension:[],syscode:e.syscode,oriSyscode:e.oriSyscode},enviroment:e.enviroment}},Z=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"http",void 0),(0,p.Z)((0,c.Z)(i),"header",void 0),(0,p.Z)((0,c.Z)(i),"cName",void 0),(0,p.Z)((0,c.Z)(i),"timer",void 0),(0,p.Z)((0,c.Z)(i),"platform",void 0),(0,p.Z)((0,c.Z)(i),"fetchStatus",0),(0,p.Z)((0,c.Z)(i),"ctx",void 0),(0,p.Z)((0,c.Z)(i),"isSSR",!1),(0,p.Z)((0,c.Z)(i),"isCSR",!1),(0,p.Z)((0,c.Z)(i),"toast",v.ZP),(0,p.Z)((0,c.Z)(i),"confirm",g.Z),(0,p.Z)((0,c.Z)(i),"push",_.VF),(0,p.Z)((0,c.Z)(i),"pop",_.Sw),i.cName="",i.timer=(new Date).getTime(),i.http=f.d,i.header=I(),i.platform=(0,m.ZP)().platform,i.isSSR=n.isSSR,i.isCSR=n.isCSR,i.ctx=n.ctx,i}return(0,l.Z)(n,[{key:"setFetchStatus",value:function(e){this.fetchStatus=e?1:2}},{key:"componentDidMount",value:function(){this.cName&&console.log("%c\u6027\u80fd\u68c0\u6d4b-".concat(this.cName,"\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u8017\u65f6:").concat((new Date).getTime()-this.timer,"ms"),"color:red")}}],[{key:"setContext",value:function(e){var t,i,o,r,a,s,l,c,u;n.isSSR=(0,y.yF)(),n.isCSR=(0,y.o6)(),n.ctx={url:null===e||void 0===e||null===(t=e.req)||void 0===t?void 0:t.url,query:null===e||void 0===e||null===(i=e.req)||void 0===i?void 0:i.query,cid:null===e||void 0===e||null===(o=e.req)||void 0===o?void 0:o.clientId,middleware:null===e||void 0===e||null===(r=e.req)||void 0===r?void 0:r.__middleware,isLogin:null===e||void 0===e||null===(a=e.req)||void 0===a?void 0:a.isLogin,isLoginWithoutType:null===e||void 0===e||null===(s=e.req)||void 0===s?void 0:s.isLoginWithoutType,userAgent:null===e||void 0===e||null===(l=e.req)||void 0===l?void 0:l.headers["user-agent"],cookies:null===e||void 0===e||null===(c=e.req)||void 0===c?void 0:c.cookies,isUseSkuModel:null===e||void 0===e||null===(u=e.req)||void 0===u?void 0:u.isUseSkuModel},n.__req__=null===e||void 0===e?void 0:e.req,(0,y.rI)()?n.http=function(e,t){return(0,f.d)(e,t,n.__req__)}:n.ctx.middleware=k["__middleware"],(0,y.rI)()||(k.__SSR__NFES__CONTEXT=n.ctx,k.isSSR=n.isSSR,k.isCSR=n.isCSR)}},{key:"getBaseInitialState",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a,s,l,c,u,d,p,f,h,m,_=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=_.length>2&&void 0!==_[2]?_[2]:{},l=new Promise((function(e){s=e})),c=t.getBaseState?t.getBaseState():{},c||(c={}),u=a||{},d=u.target,p=void 0===d?{}:d,f=(0,r.Z)(u,w),h=(0,o.Z)({state:c,header:t.header(),http:t.http,ctx:t.ctx,platform:t.platform,isCSR:t.isCSR,isSSR:t.isSSR,afterFetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ds,i=t.cb;s&&s({state:Object.assign(c,e),ds:n}),i&&i()}},p),n.init((0,o.Z)((0,o.Z)((0,o.Z)({second:function(){}},p),f),{},{target:h})),e.next=9,l;case 9:return m=e.sent,e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(h.Z);(0,p.Z)(Z,"http",f.d),(0,p.Z)(Z,"header",I),(0,p.Z)(Z,"platform",(0,m.ZP)().platform),(0,p.Z)(Z,"ctx",(0,y.rI)()?void 0:k.__SSR__NFES__CONTEXT),(0,p.Z)(Z,"__req__",void 0),(0,p.Z)(Z,"isSSR",!!(0,y.rI)()||!!k.isSSR),(0,p.Z)(Z,"isCSR",!(0,y.rI)()&&!!k.isCSR)},36665:function(e,t,n){"use strict";n.d(t,{im:function(){return o},Mv:function(){return r}});var i=n(77395),o={m_im_btn:{borderStyle:"solid"},m_im_footer_text:{display:"block"},m_im_telConsult_item:{display:"flex",marginBottom:0,marginTop:12},m_im_telConsult_body:{paddingBottom:12},m_im_onlineservice_left:{paddingRight:(0,i.Vh)(25)}},r={m_footer_left_detail:{lineHeight:(0,i.Nv)(12)},arrow:{marginTop:2},m_footer_btn:{width:"100%"}}},17707:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(59438),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"props",void 0),(0,l.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(c.ZP),d=n(298),p=n(23347),f=n(77395),h=(0,p.Z)({m_calendar_extra_valid:{display:"flex",flexDirection:"row",alignItems:"flex-start",fontSize:(0,f.Vh)(14),paddingBottom:(0,f.Vh)(8),paddingRight:(0,f.Vh)(12),paddingLeft:(0,f.Vh)(12)},m_calendar_extra_valid_book:(0,d.Z)((0,d.Z)({paddingBottom:(0,f.Vh)(20),paddingRight:(0,f.Vh)(16),paddingLeft:(0,f.Vh)(16),marginTop:(0,f.Vh)(-12)},(0,f.Cg)({width:f.WI,style:"solid",color:"rgb(235,239,245)",direction:"bottom"})),{},{backgroundColor:"#fff",position:"relative"}),m_icon_style:{marginTop:(0,f.Vh)(8),marginRight:(0,f.Vh)(4)},m_textcollapse:{marginTop:(0,f.Vh)(0),flex:1},m_textcollapse_content_text:{color:"rgb(17,17,17)",fontSize:(0,f.Vh)(13)},m_more_btn:(0,d.Z)((0,d.Z)({},f._),{},{paddingRight:(0,f.Vh)(4),paddingLeft:(0,f.Vh)(12),height:(0,f.Vh)(16),justifyContent:"flex-end"})}),m=h,_=n(80692),v=n(88578),g=n(3902),y=n(2269),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.desc,n=e.logs,i=void 0===n?{}:n,o=e.hideIcon,r=i.validUnfoldExposureLog,a=i.validUnfoldClickLog,s=i.validCollapseExposureLog,l=i.validCollapseClickLog;return t?(0,y.jsxs)(_.G7,{style:(0,f.wh)([m.m_calendar_extra_valid,o?m.m_calendar_extra_valid_book:{}]),children:[(0,y.jsx)(_.G7,{children:!o&&(0,y.jsx)(g.Z,{type:"info",color:"#333",size:28,style:m.m_icon_style})}),(0,y.jsx)(v.Z,{message:t,lineHeight:o?21:18,lineNum:2,prefix:".m_sku",logs:{clickUpExposureLog:s,clickDownExposureLog:r,clickUpLog:l,clickDownLog:a},fstyle:o?m:{m_textcollapse:{flex:1}}})]}):null}}]),n}(u)},41614:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=n(90201),c=n(80692),u=n(77942),d=n(81876),p=n(79038),f=n(59772),h=n(45023),m=n(59438),_=n(51067),v=n(2823),g=n(41712),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,e),(0,h.Z)((0,d.Z)(r),"state",void 0),(0,h.Z)((0,d.Z)(r),"monthIndex",0),(0,h.Z)((0,d.Z)(r),"dateRef",void 0),(0,h.Z)((0,d.Z)(r),"isInit",!0),(0,h.Z)((0,d.Z)(r),"dateIndex",0),(0,h.Z)((0,d.Z)(r),"titleHeight",36),(0,h.Z)((0,d.Z)(r),"itemSize",53),(0,h.Z)((0,d.Z)(r),"monthPadBot",20),(0,h.Z)((0,d.Z)(r),"isTile",!0),r.props.isFromAct&&(r.isTile=!1);var a=r.initMonth();return r.state=(0,i.Z)({anchor:"",calendar:a,showLength:12},r.setScrollDistance(a)),r.cName="calendar",[v.zh.book,v.zh.detail,v.zh.sku].includes(e.usePage)&&(r.itemSize=64),r}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.initMonth(e);if(this.setState({calendar:n}),e.defaultDate&&!this.props.defaultDate&&!e.isInPopLayer&&this.dateRef||e.isOpened&&(this.props.defaultDate!==e.defaultDate||this.props.firstLevelId!==e.firstLevelId)){var i=this.setScrollDistance(n),o=i.scrollDistance;this.setState({scrollDistance:o},(function(){(t.dateIndex>0||t.monthIndex>0)&&setTimeout((function(){t.dateRef.scrollToLocation&&t.dateRef.scrollToLocation({animated:!0,itemIndex:0,sectionIndex:t.monthIndex,viewOffset:0,viewPosition:0})}),100)}))}}},{key:"componentDidMount",value:function(){(0,p.Z)((0,f.Z)(n.prototype),"componentDidMount",this).call(this)}},{key:"setScrollDistance",value:function(e){var t=this,n=e.monthCalendar.map((function(e){return e.calendar.length*t.itemSize+t.titleHeight+t.monthPadBot})),i=n.slice(0,this.monthIndex).reduce((function(e,t){return e+t}),0);return{scrollDistance:i,sectionHeights:n}}},{key:"initMonth",value:function(e){var t=this,n=e||this.props,o=n.calendar,r=n.holiday,a=n.titleText,s=n.defaultDate,l=n.endDate,c=n.minBookingDays,u=n.maxBookingDays,d=n.isMulti,p=n.tooltipText,f=n.isWIFI,h={titleText:a,monthCalendar:[]},m={},v=function(e){return["\u65e5","\u516d"].includes((0,_.q7)(e))},g=s||o[0].date;return o.forEach((function(e,n){var o=e.date.slice(0,7),a=r[e.date]||{},h=s&&d&&!l?(0,_.gw)(s,e.date):-1,g=(0,i.Z)((0,i.Z)({},e),{},{day:Number(e.date.slice(-2)),holidayText:a.name||"",work:void 0==a.work?!v(e.date):a.work,isSelect:e.date==s||e.date==l,isInSelect:d&&1==(0,_.qu)(e.date,s)&&1==(0,_.qu)(l,e.date),disableToast:t.getDisableToast(c,u,h),tooltipText:d&&s&&!l&&e.date==s?p:"",tipText:d?"".concat(s&&e.date==s?f?"\u53d6\u4ef6":"\u5f00\u59cb":"").concat(l&&e.date==l?"".concat(l==s?" ":"").concat(f?"\u8fd8\u4ef6":"\u7ed3\u675f"):""):"",isFirst:0==n});m[o]?m[o].push(g):m[o]=[g]})),Object.keys(m).map((function(e,n){(s&&e==s.slice(0,7)||!s&&e==g.slice(0,7))&&(t.monthIndex=n),h.monthCalendar.push({year:e.slice(0,4),month:e.slice(5,7),calendar:t.getDate("".concat(e,"-01"),m[e],g,o[0].date)})})),h}},{key:"getDate",value:function(e,t,n,o){for(var r=(0,g.l)(e),a=[],s=r.month(),l=r.day(),c={disableText:"",price:"",day:"",holidayText:"",work:!0},u=[],d=0;d<l;d++)u.push(c);var p=(0,g.l)(t[0].date),f=(0,g.l)(t[t.length-1].date),h=0;while(r.month()===s){var m=r.date()<10?"0".concat(r.date()):r.date();n&&m==n.slice(-2)&&(this.dateIndex=a.length),r<p||r>f?u.push((0,i.Z)((0,i.Z)({},c),{},{day:r.date(),date:r.format("YYYY-MM-DD")})):t[h]&&t[h].date.slice(-2)==m?(u.push(t[h]),h++):u.push(Object.assign({},c,{day:r.date()})),7==u.length&&(0==(0,_.qu)(r.format("YYYY-MM-DD"),o)&&this.isTile||a.push(u),u=[]),r=r.add(1,"day")}while(u.length>0)u.push(c),7==u.length&&(a.push(u),u=[]);return a}},{key:"onChooseDate",value:function(e){var t=this.props,n=t.onChooseDate,o=t.onClickCallback,r=t.isInPopLayer,a=t.defaultDate;if(r&&a!==e.date){var s=this.initMonth((0,i.Z)((0,i.Z)({},this.props),{},{defaultDate:e.date}));this.setState({calendar:s})}o&&o(),n&&n(e)}},{key:"getOffset",value:function(e,t){for(var n=0,i=0;i<Math.floor(t/3);i++){var o=e[i].data[0].calendar;n+=o.length}return 60*n+36*Math.floor(t/3)+36*(t%3-1)}},{key:"getDisableToast",value:function(e,t,n){if(n>0){if(n<e)return"\u8be5\u4ea7\u54c1\u6700\u5c11\u9700\u8981\u9884\u8ba2".concat(e,"\u5929");if(n>t)return"\u8be5\u4ea7\u54c1\u6700\u591a\u9884\u8ba2".concat(t,"\u5929")}return""}}]),n}(m.ZP),x=n(88344),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,h.Z)((0,d.Z)(i),"openCompare","RN"==i.platform),i}return(0,r.Z)(n,[{key:"onClick",value:function(e,t,n){var i=this.props,o=i.usePage,r=i.defaultDate,a=i.calendar;if(e.day&&(o!=v.zh.book||e.date!=r)){var s=this.props.onChooseDate,l=e.disableText,c=e.disableToast;if(t)this.toast.show(c||"\u5f53\u524d\u65e5\u671f"+(l||"\u4e0d\u53ef\u8ba2"));else{var u=a[n].find((function(t){return t.date==e.date}));s&&s(u)}}}},{key:"shouldComponentUpdate",value:function(e,t){var i=e.isInSwiper,o=e.index,r=e.currentTabIndex;return i?[o-1,o,o+1].includes(r):(0,p.Z)((0,f.Z)(n.prototype),"shouldComponentUpdate",this).call(this,e,t)}}]),n}(m.ZP),k=n(25215),w=n(23347),I=n(77395),Z=(0,w.Z)({m_month:{position:"relative",paddingLeft:(0,I.Vh)(5),paddingRight:(0,I.Vh)(5)},m_ceil_item:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},m_ceil_prop:{display:"flex",alignItems:"center",justifyContent:"flex-start"},m_month_body:{backgroundColor:"#ffffff",width:"100%"},m_date_line:(0,i.Z)({textAlign:"center",display:"flex",flexDirection:"row"},(0,k.dX)((0,I.Vh)(4))),m_select_ceil_item:{zIndex:1}}),T=Z,S=n(29339),C=n(20159),P=n(2269),N=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.calendar,o=t.monthPadBot;return(0,P.jsx)(c.G7,{style:T.m_month,className:"m_month",children:(0,P.jsx)(c.G7,{style:(0,I.wh)([T.m_month_body,{paddingBottom:o}]),children:n.map((function(t,n){return(0,P.jsx)(c.G7,{style:T.m_date_line,children:t.map((function(t,o){var r=t.disableText,a=t.price,s=t.date,l=t.disableToast,c=r||"number"!=typeof a||!s||l;return(0,P.jsx)(j,(0,i.Z)((0,i.Z)({},e.props),{},{isDisable:c,dateItem:t,index:o,onClick:function(t,i){return e.onClick(t,i,n)}}))}))},n)}))})})}}]),n}(b);function D(e){var t=e.dateItem,n=e.index,o=e.isDisable,r=e.dateClickLog,a=e.itemSize,s=e.traceData,c=e.defaultDate,u=e.isDateShowPrice,d=e.usePage,p=e.isTile,f=e.onClick,h=e.showLocalTime,m=e.isNewGuideSku;return(0,P.jsx)(S.Z,{className:"calendar_item",log:r&&r({cdate:t.date}),onClick:function(){return f(t,o)},style:(0,I.wh)([T.m_ceil_item,t.isSelect?(0,i.Z)({},T.m_select_ceil_item):{},t.hasReservation?{height:(0,I.Vh)(a+6)}:{}]),testID:"calendar_item_".concat(t.date),devTraceData:s&&!t.isSelect&&s(c||"",t.date),children:(0,l.createElement)(x.Z,(0,i.Z)((0,i.Z)({id:t.date,lineIndex:n,date:t.date},t),{},{isShowInvenText:[v.zh.book,v.zh.detail,v.zh.sku].includes(d),key:t.date||n,isSelect:t.isSelect,style:(0,C.kg)((0,I.wh)([T.m_ceil_prop,{width:"100%",height:t.isSelect?t.hasReservation?(0,I.Vh)(a+6):(0,I.Vh)(a+4):(0,I.Vh)(a)}])),isAct:[v.zh.actSku,v.zh.dayplay,v.zh.actSkuInline].includes(d),isMoreDate:!0,isDateShowPrice:u,showFrom:!t.hideFrom,isDisable:o,isTile:p,showReservationText:t.hasReservation,showLocalTime:h,isNewGuideSku:m}))},t.date||n)}var j=(0,l.memo)(D,(function(e,t){var n=t.dateItem,i=t.isDateShowPrice,o=n.hideFrom,r=n.disableText,a=n.invenText,s=n.price,l=n.isSelect,c=n.disableToast,u=n.tooltipText,d=n.tipText,p=n.isInSelect,f=n.isError,h=n.hasReservation,m=n.date,_=e.dateItem,v=e.isDateShowPrice,g=_.hideFrom,y=_.disableText,x=_.invenText,b=_.price,k=_.isSelect,w=_.disableToast,I=_.tooltipText,Z=_.tipText,T=_.isInSelect,S=_.isError,C=_.hasReservation,P=_.date;return l===k&&o===g&&r===y&&a===x&&s===b&&c===w&&u===I&&d===Z&&p===T&&f===S&&v===i&&C===h&&m===P})),R=n(44895),L=(0,w.Z)({m_calendar_wrapper:{flex:1,height:"100%",marginTop:(0,I.Vh)(0),position:"relative",display:"flex",flexDirection:"column",paddingLeft:(0,I.Vh)(1),paddingRight:(0,I.Vh)(1)},m_calendar_header:{position:"relative",width:"100%",zIndex:3},m_calendar_header_hold:{height:(0,I.Vh)(25)},m_weekdays:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",height:(0,I.Vh)(25),alignItems:"center",backgroundColor:"#ffffff",top:(0,I.Vh)(0),left:(0,I.Vh)(0),zIndex:5,fontSize:(0,I.Vh)(18)},m_weekdays_text:{fontSize:(0,I.Vh)(13)},m_weekend:{color:"#f5190a"},m_weekdays_inpoplayer:{position:"absolute"},m_calendar_title:{backgroundColor:"#ffffff",paddingLeft:(0,I.Vh)(16),display:"flex",flexDirection:"row",alignItems:"center",height:(0,I.Vh)(52)},m_calendar_title_tips:(0,i.Z)((0,i.Z)({paddingLeft:(0,I.Vh)(10),display:"flex",flexDirection:"row",backgroundColor:"#FFF8F2",fontSize:(0,I.Vh)(12)},(0,I.yp)((0,I.Vh)(10))),{},{paddingRight:(0,I.Vh)(12)}),m_calendar_title_tips_icon:{fontSize:(0,I.Vh)(12),color:"#FF7700",paddingRight:(0,I.Vh)(4),flex:0,marginTop:(0,I.Vh)(2)},m_calendar_title_tips_text:{fontSize:(0,I.Vh)(12),color:"#FF7700",fontWeight:"normal",flex:1,lineHeight:(0,I.Nv)((0,I.Vh)(16))},m_calendar_title_text:{fontSize:(0,I.Vh)(18),color:"#333333",fontWeight:"bold"},m_month_title:function(e){return{backgroundColor:"#f6f8fa",paddingLeft:(0,I.Vh)(20),height:e,zIndex:2}},m_month_title_text:function(e){return(0,i.Z)({fontSize:(0,I.Vh)(20),lineHeight:(0,I.Nv)((0,I.Vh)(e)),color:"#333333"},R.ZP.m_month_title_text)},m_calendar_footer:{backgroundColor:"#f4f4f4",height:(0,I.Vh)(35),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},m_calendar_footer_text:{color:"#666",fontSize:(0,I.Vh)(12)},m_calendar:{flex:1,overflow:"scroll"},m_swiper_calendar:{},m_calendar_tab_wrapper:{backgroundColor:"#f8f8f8",height:(0,I.Vh)(44),marginLeft:(0,I.Vh)(-10)},m_month_tab_item:(0,i.Z)((0,i.Z)({},I._7),{},{height:(0,I.Vh)(44),width:(0,I.Vh)(50),position:"relative"},(0,I.oM)((0,I.Vh)(15))),m_month_tab_item_text:{color:"#333",fontFamily:"PingFang SC",fontSize:(0,I.Vh)(15),fontWeight:"bold"},m_month_active_tab_item_text:{color:"#0086F6"},m_active_border:{height:(0,I.Vh)(2),backgroundColor:"#0086f6",width:(0,I.Vh)(50),position:"absolute",bottom:0,left:0},m_month_wrapper:{width:u.Db.get("window").width},m_reservtion_tip_container:(0,i.Z)((0,i.Z)((0,i.Z)({position:"relative",backgroundColor:"#fff8f2"},(0,I.yp)((0,I.Vh)(12))),(0,I.WB)((0,I.Vh)(16))),{},{lineHeight:1}),m_reservtion_tip_tag:(0,i.Z)((0,i.Z)({backgroundColor:"#ff7700",borderRadius:(0,I.Vh)(3)},(0,I.WB)((0,I.Vh)(3))),{},{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:(0,I.Vh)(12),left:(0,I.Vh)(16)}),m_reservtion_tip_tag_placeholder:{color:"transparent",fontSize:(0,I.Vh)(11),fontWeight:(0,I.Ue)("500"),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_reservtion_tip_tag_text:{color:"#fff",fontSize:(0,I.Vh)(11),fontWeight:(0,I.Ue)("500"),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_reservtion_tip_text:{color:"#ff7700",fontSize:(0,I.Vh)(12),fontWeight:"normal",lineHeight:(0,I.Nv)((0,I.Vh)(17)),whiteSpace:"normal"},m_calendar_guide_title_tips:(0,i.Z)((0,i.Z)({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"#fff8f2"},(0,I.yp)((0,I.Vh)(6))),(0,I.WB)((0,I.Vh)(16))),m_calendar_guide_title_tips_icon:{fontSize:(0,I.Vh)(14),color:"#ff7700",paddingRight:(0,I.Vh)(4),flex:0},m_calendar_guide_title_tips_text:{color:"#ff5500",fontSize:(0,I.Vh)(12),fontFamily:"PingFangSC-Regular",lineHeight:(0,I.Vh)(16),flex:1}}),E=((0,w.Z)({m_wrap:{height:(0,I.Vh)(44),maxHeight:(0,I.Vh)(44)},m_inner:{position:"relative",justifyContent:"flex-start"}}),L),V=n(20731),A=n(49787),O=n(1826),F=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,o.Z)(this,i),n=t.call(this,e),(0,h.Z)((0,d.Z)(n),"props",void 0),n.showPriceInfo=n.showPriceInfo.bind((0,d.Z)(n)),n}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){O.Z.add("priceInfoPopLayer",V.Z,{props:{isOpened:!1}})}},{key:"showPriceInfo",value:function(){var e=this.props.priceNotesList,t=void 0===e?[]:e,i=n(1703).Z;A.ZP.show({props:{isScrollView:!0,popHeight:"90%",minHeight:"50%",maxHeight:"90%",name:"priceInfoPopLayer",title:"\u4ef7\u683c\u8bf4\u660e",zIndex:2001},child:i,childProps:{list:t}})}}]),i}(m.ZP),M={m_price_tip:(0,i.Z)({display:"flex",paddingRight:(0,I.Vh)(16),paddingLeft:(0,I.Vh)(16),paddingTop:(0,I.Vh)(12),paddingBottom:(0,I.Vh)(12),flexDirection:"row",alignItems:"center",backgroundColor:"#FFFAF5"},(0,I.ix)("border-box")),m_price_tip_text:{color:"#FF7700",fontSize:(0,I.Vh)(12),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_show_price_info:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},m_price_info_text:{color:"#FF7700",fontSize:(0,I.Vh)(12),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_forward:{},m_price_tip_padding_top:{paddingTop:0},m_price_tip_padding_bottom:{paddingBottom:(0,I.Vh)(8)}},B=(0,w.Z)(M),U=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.priceTipText,i=void 0===n?"":n,o=t.showPriceInfoText,r=void 0===o?"":o,a=t.warnTip,s=void 0===a?"":a,l=t.hasReservation;return(0,P.jsxs)(c.G7,{style:(0,I.wh)([B.m_price_tip,s?B.m_price_tip_padding_top:{},l?B.m_price_tip_padding_bottom:{}]),children:[(0,P.jsx)(c.xv,{style:B.m_price_tip_text,children:i}),(0,P.jsxs)(S.Z,{style:B.m_show_price_info,onClick:function(){e.showPriceInfo()},children:[(0,P.jsx)(c.xv,{style:B.m_price_info_text,children:r}),(0,P.jsx)(c.JO,{type:"forward",color:"#FF7700",size:28,style:B.m_forward})]})]})}}]),n}(F),G=n(21731),H=n(36556),z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.showLength,o=t.calendar,r=this.props,a=r.titleText,s=r.footerText,l=r.isInPopLayer,d=r.dateClickLog,p=r.isDateShowPrice,f=r.titleTips,h=r.traceData,m=r.defaultDate,_=r.usePage,v=r.marginBottom,g=r.priceInfo,y=r.hasPromotion,x=r.warnTip,b=r.hasReservation,k=r.showLocalTime,w=r.isNewGuideSku,Z=r.newCalendarExpoLog,T=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"].map((function(e,t){return 0==t||6==t?(0,P.jsx)(c.xv,{style:(0,I.wh)([E.m_weekdays_text,{color:"#f5190a"}]),children:e}):(0,P.jsx)(c.xv,{style:E.m_weekdays_text,children:e})})),S=o.monthCalendar.map((function(e,t){return{data:[{calendar:e.calendar,year:e.year,month:e.month}],index:t,title:e.year+"\u5e74"+e.month+"\u6708"}})),C=!!g&&y&&p;return(0,P.jsxs)(c.G7,{style:E.m_calendar_wrapper,testID:w?Z&&(0,H.kI)(Z.key,Z.params):void 0,children:[C&&(0,P.jsx)(U,(0,i.Z)((0,i.Z)({},g),{},{warnTip:x,hasReservation:b})),b?(0,P.jsxs)(c.G7,{style:(0,I.wh)([E.m_reservtion_tip_container,x||C?{paddingTop:0}:null]),children:[(0,P.jsx)(c.G7,{style:(0,I.wh)([E.m_reservtion_tip_tag,x||C?{top:0}:null]),children:(0,P.jsx)(c.xv,{style:E.m_reservtion_tip_tag_text,children:"\u9884\u7ea6\u62a2"})}),(0,P.jsxs)(c.aA,{style:E.m_reservtion_tip_text,children:[(0,P.jsx)(c.xv,{style:E.m_reservtion_tip_tag_placeholder,children:this.platform===G.NX.RN&&"android"===u.t4.OS?"\u9884\u7ea6\u62a2\u5360.":"\u9884\u7ea6\u62a2\u5360"}),"\u6807\u6ce8\u65e5\u671f\u666f\u533a\u5c1a\u672a\u5f00\u653e\u552e\u5356\uff0c\u9700\u8981\u9884\u7ea6\u62a2\u7968\uff0c\u5f00\u653e\u552e\u5356\u540e\u5e73\u53f0\u5c06\u4f1a\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u62a2\u7968\u3002\u62a2\u7968\u5931\u8d25\u81ea\u52a8\u9000\u6b3e\uff0c\u62a2\u7968\u7ed3\u679c\u8bf7\u4ee5\u8ba2\u5355\u8be6\u60c5\u9875\u4e3a\u51c6\u3002"]})]}):null,!!f&&(0,P.jsxs)(c.G7,{style:E.m_calendar_title_tips,children:[(0,P.jsx)(c.JO,{type:"info",style:E.m_calendar_title_tips_icon}),(0,P.jsx)(c.xv,{style:E.m_calendar_title_tips_text,children:f})]}),!!w&&(0,P.jsxs)(c.G7,{style:E.m_calendar_guide_title_tips,children:[(0,P.jsx)(c.JO,{type:"info",style:E.m_calendar_guide_title_tips_icon}),(0,P.jsx)(c.xv,{style:E.m_calendar_guide_title_tips_text,children:"\u4ee5\u4e0b\u4ef7\u683c\u4e3a\u5355\u4efd\u4ea7\u54c1\u7684\u8d77\u59cb\u552e\u4ef7"})]}),!!a&&(0,P.jsx)(c.G7,{style:E.m_calendar_title,children:(0,P.jsx)(c.xv,{style:E.m_calendar_title_text,children:a})}),(0,P.jsxs)(c.G7,{style:E.m_calendar_header,children:[(0,P.jsx)(c.G7,{style:l?E.m_calendar_header_hold:null}),(0,P.jsx)(c.G7,{style:(0,I.wh)([E.m_weekdays,l?E.m_weekdays_inpoplayer:null]),children:T})]}),(0,P.jsx)(c.Xn,{style:(0,I.wh)([E.m_calendar]),showLength:n,scrollTop:this.state.scrollDistance,sectionHeights:this.state.sectionHeights,locatePos:this.monthIndex,initialNumToRender:this.monthIndex<2?9:3*(this.monthIndex+2),ref:function(t){return e.dateRef=t},sections:S,stickySectionHeadersEnabled:!0,renderItem:function(t){var n=t.item,o=t.section.index;return(0,P.jsx)(N,(0,i.Z)((0,i.Z)({},n),{},{dateClickLog:d,isNewGuideSku:w,isDateShowPrice:p,itemSize:e.itemSize,monthPadBot:e.monthPadBot,onChooseDate:e.onChooseDate.bind(e),isTile:!0,traceData:h,defaultDate:m,usePage:_,showLocalTime:k}),o)},renderSectionHeader:function(t){var n=t.section.title;return(0,P.jsx)(c.G7,{style:E.m_month_title(e.titleHeight),children:(0,P.jsx)(c.xv,{style:E.m_month_title_text(e.titleHeight),className:"m_month_title_text_normal",children:n})})},keyExtractor:function(e,t){return t},onLayout:function(){(l||e.isInit)&&(e.dateIndex>0||e.monthIndex>0)&&setTimeout((function(){e.dateRef.scrollToLocation&&e.dateRef.scrollToLocation({animated:!0,itemIndex:0,sectionIndex:e.monthIndex,viewOffset:0,viewPosition:0})}),100),e.isInit=!1},getItemLayout:function(t,n){return{index:n,offset:e.getOffset(t,n),length:n%3==1?36:60*t[Math.floor(n/3)].data[0].calendar.length}},ListFooterComponent:s?(0,P.jsx)(c.G7,{style:(0,I.wh)([E.m_calendar_footer,{marginBottom:v}]),children:(0,P.jsx)(c.xv,{style:E.m_calendar_footer_text,children:s})}):(0,P.jsx)(c.G7,{style:{marginBottom:v}})})]})}}]),n}(y)},86897:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(77395),c=n(59438),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(c.ZP),d=n(298),p=n(23347),f=(0,p.Z)({m_loading:{display:"flex",flexDirection:"column",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},m_image_background:{with:"100%"},m_loading_text:{marginTop:(0,l.Vh)(12),fontSize:(0,l.Vh)(12),color:"#666"},rotate:(0,d.Z)({},(0,l.oQ)("rotate 0.7s linear infinite"))}),h=f,m=n(20159),_=n(2269),v=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e="https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png_.webp";return(0,_.jsxs)(s.G7,{style:h.m_loading,children:[(0,_.jsx)(s.G7,{style:(0,l.wh)([h.m_image_background,{backgroundImage:"url(".concat(e,")")}])}),(0,_.jsx)(s.Ee,{url:e,style:(0,m.kg)((0,l.wh)([{width:35,height:35},h.rotate])),mode:"aspectFit"}),(0,_.jsx)(s.xv,{style:h.m_loading_text,children:"\u5373\u5c06\u5448\u73b0"})]})}}]),n}(u)},73658:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(59438),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(l.ZP),u=n(77395),d=n(23347),p={m_ceil:{backgroundColor:"#ffffff",position:"relative"},m_ceil_border:{borderRadius:(0,u.Vh)(4),borderWidth:(0,u.Vh)(1),borderStyle:"solid",borderColor:"#dddddd"},m_ceil_tabCalendar:{marginRight:(0,u.Vh)(8)},m_icon_container:{position:"absolute",bottom:(0,u.Vh)(-.5),right:(0,u.Vh)(-.5),backgroundColor:"#0086f6",borderTopLeftRadius:(0,u.Vh)(4),borderTopRightRadius:0,borderBottomRightRadius:(0,u.Vh)(4),borderBottomLeftRadius:0,height:(0,u.Vh)(12),fontSize:(0,u.Vh)(12),display:"flex",justifyContent:"center",alignItems:"center",width:(0,u.Vh)(18)},active:{borderColor:"#007fe9",backgroundColor:"#e6f3fe"},moreCalendarActive:{borderColor:"#0086F6",backgroundColor:"#0086F6",borderRadius:(0,u.Vh)(2)},gray:{backgroundColor:"#f7f7f7",color:"#ccc"}},f=(0,d.Z)(p),h=n(2269),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isGray,i=e.style,o=e.isMoreDate,r=e.isSelect,a=e.id,l=e.fstyle,c=(0,u.Ec)(f,l);return(0,h.jsx)(s.G7,{id:a,className:"m_ceil ".concat(o?null:"m_ceil_border"," ").concat(!o&&r?"active":n?"gray":null," ").concat(o&&r?"moreCalendarActive":null),style:(0,u.wh)([c.m_ceil,o?null:c.m_ceil_border,!o&&r?c.active:n?c.gray:null,o&&r?c.moreCalendarActive:null,i]),children:t})}}]),n}(c)},52295:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(80692)),c=n(81876),u=n(45023),d=n(59438),p=n(1826),f=n(20731),h=n(26904),m=n(77942),_=n(79301),v=n(95308),g=function(){var e=(0,v.Z)((0,_.Z)().mark((function e(t,n,i){return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),y=n(77395),x=n(79932),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,c.Z)(i),"state",void 0),(0,u.Z)((0,c.Z)(i),"buyNoteContent",void 0),i.state={keepSpace:!1,imInfo:null===e||void 0===e?void 0:e.imInfo},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){p.Z.add("buyNotes",f.Z,{props:{isOpened:!1}})}},{key:"onOpen",value:function(){this.setState({keepSpace:!0})}},{key:"onClose",value:function(){this.setState({keepSpace:!1})}},{key:"showBuyNotesLayer",value:function(e){if(e){var t=this.props,n=t.spotid,i=t.showBuyNotes,o=t.chioceDateData,r=t.isScanShelf,a=t.booking,s=t.isUseInBooking,l=t.isFromShelfSku,c="mini"==(0,x.ZP)().platform;g(e,n,this);var u=null!==o&&void 0!==o&&o.date?[{type:"DateFilter",filterItems:[{key:"Date",value:o.date}]}]:[];if(c){var d="undefined";s||(d=a(!0)),(0,h.n)({spotId:n,resourceId:e,buttonInfo:{type:"booking",text:"\u4e0b\u4e00\u6b65",canJump:!0,url:d},filters:u,noRenderOnshow:r})}else(0,h.R)({spotId:n,resourceId:e,bottomHeight:!i&&(0,m.cY)()?(0,y.Vh)(87):(0,y.Vh)(63),hideBottom:!0,filters:u,noRenderOnshow:r,isFromShelfSku:l})}}},{key:"onBtnClick",value:function(){var e=this.props,t=e.booking,n=e.isGrayBtn;n||t&&t()}}]),n}(d.ZP),k=n(91964),w=n(3902),I=n(23347),Z={m_footer_detail:{width:"100%",display:"flex",flexDirection:"column"},m_view_detail:{display:"flex",flexDirection:"row",alignItems:"center",zIndex:99,backgroundColor:"rgb(255,250,245)",height:(0,y.Vh)(39),paddingLeft:(0,y.Vh)(16),paddingRight:(0,y.Vh)(12)},m_flex_start:{justifyContent:"flex-start"},m_disnone:{display:"none"},m_view_item:(0,i.Z)((0,i.Z)({},y._),{},{flexShrink:(0,y.i4)(0),overflow:"hidden"}),m_line_clamp1:(0,i.Z)((0,i.Z)({},(0,y.Sf)(1)),{},{color:"#FF7700"}),m_view_left:(0,i.Z)((0,i.Z)({flex:1},y._),{},{overflow:"hidden"}),m_view_detail_text:{color:"#ff7700",fontSize:(0,y.Vh)(13),verticalAlign:"middle"},m_transparent:{color:"transparent",fontSize:(0,y.Vh)(6),verticalAlign:"middle"},m_line:{color:"#FFC899",fontSize:(0,y.Vh)(10),verticalAlign:"middle"},m_view_detail_position:{height:(0,y.Vh)(34)},m_footer_wrapper_hold:{height:(0,y.Vh)(64)},m_footer_wrapper:{width:"100%",alignSelf:"flex-end"},m_footer_clear:{marginRight:(0,y.Vh)(-2),minWidth:(0,y.Vh)(60),flex:1,flexDirection:"row",justifyContent:"flex-end",display:"flex"},m_footer_clear_disable:{color:"#666666"},m_footer_clear_text:{fontSize:(0,y.Vh)(14),color:"#0086f6"},m_select_detail:{display:"flex",flexDirection:"row",justifyContent:"center",backgroundColor:"#fff",paddingTop:(0,y.Vh)(12),height:(0,y.Vh)(31)},m_select_detail_text:{color:"#999999",fontSize:(0,y.Vh)(12)}},T={m_im:{marginRight:5,marginTop:0},m_im_text:{marginTop:(0,y.Vh)(2),color:"#222"}},S={m_im:{marginRight:(0,y.Vh)(6),marginLeft:(0,y.Vh)(8)}},C=(0,I.Z)(Z),P=n(29339),N=n(36556),D=n(64670),j=n(49787),R=n(2269),L=n(86285).Z,E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.optid,n=e.total,o=e.subPriceDes,r=e.isGrayBtn,a=e.buyNoteClickLog,s=e.buyNoteExposureLog,c=e.btnClickLog,u=e.notHigh,d=(e.haveClear,e.clearAll,e.deductDesc),p=e.otherDesc,f=e.footPop,h=e.marketPrice,_=e.prefix,v=e.collectAniFun,g=(e.hideReset,e.showIm),x=e.otherDescColor,b=e.isLoading,I=e.imText,Z=e.hideBuynote,E=e.showTags,V=void 0===E?[]:E,A=e.isManualSelect,O=e.vendorName,F=e.btnTraceData,M=e.buyNoteTraceData,B=e.reservation,U=e.priceDetailTraceData,G=(e.cleanTraceData,e.fstyle),H=e.notKeepSpace,z=e.renderPayBtn,q=e.footerConfig,K=e.imLog,W=e.isNewGuideSku,X=this.state,Y=X.imInfo,Q=X.keepSpace,J=!(!t||1!=t.length||"number"!=typeof n)&&!Z||A,$=u?64:(0,m.cY)()?88:64,ee=(0,j.sg)("buyNotes")||g,te=$,ne=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(l.xv,{style:C.m_transparent,children:"\u7a7a"}),(0,R.jsx)(l.xv,{style:C.m_line,children:"|"}),(0,R.jsx)(l.xv,{style:C.m_transparent,children:"\u7a7a"})]}),ie=(0,y.Vh)(A?31:39,{needPx:!0}),oe=!1;oe=!q||!!q.find((function(e){return"service"===e.category&&!!e.selected}));var re=oe&&ee&&Y&&!A;return(0,R.jsx)(l.G7,{style:(0,y.wh)([C.m_footer_detail,Q&&J&&!H?{marginTop:ie}:null]),children:(0,R.jsx)(D.Z,{prefix:_,name:"sku-footer",show:J,delay:!0,collectAniFun:v,onOpen:this.onOpen.bind(this),onClose:this.onClose.bind(this),slideDirection:"top",opacityDuration:1,style:(0,i.Z)({flexBasis:(0,y.Vh)(te),overflow:"visible",justifyContent:"flex-end"},J&&(0,m.gn)()?(0,y.Wn)({hShadow:-16,vShadow:-16,blur:16,spread:2,color:"rgba(0, 0, 0, 0.08)",rnColor:"rgba(0,0,0)",opacity:.05}):{}),siblingStyle:(0,i.Z)((0,i.Z)({},(0,y.vs)("none")),{},{justifyContent:"flex-end",transform:[{translateY:0}],paddingBottom:0,position:"relative",zIndex:1}),aniStyle:{zIndex:0},defaultHeight:ie,noFirstAni:!!A,AniComp:(0,R.jsx)(l.G7,{children:A?(0,R.jsx)(l.G7,{style:C.m_select_detail,children:(0,R.jsx)(l.xv,{style:C.m_select_detail_text,children:'\u70b9\u51fb"\u53bb\u9009\u5ea7"\u8fdb\u5165'.concat(O||"","\u9009\u5ea7\u9875\u9762")})}):(0,R.jsxs)(P.Z,{style:(0,y.wh)([C.m_view_detail,V.length?{}:C.m_flex_start]),onClick:this.showBuyNotesLayer.bind(this,null===t||void 0===t?void 0:t[0]),log:a&&a({resourceid:null===t||void 0===t?void 0:t[0]}),activeOpacity:1,devTraceData:M,children:[(0,R.jsx)(l.G7,{style:(0,y.wh)([C.m_view_left,V.length?{}:C.m_disnone]),children:(0,R.jsx)(l.k0,{style:(0,y.wh)([C.m_view_item,C.m_line_clamp1]),numberOfLines:1,children:V.map((function(e,t){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(l.xv,{style:C.m_view_detail_text,children:e}),t+1!==V.length?ne:null]})}))})}),(0,R.jsxs)(l.G7,{style:(0,y.wh)([C.m_view_item,V.length?{paddingLeft:(0,y.Vh)(4)}:{}]),children:[(0,R.jsx)(l.xv,{testID:s&&(0,N.kI)(s.key,s.params),style:C.m_view_detail_text,children:"".concat(V.length?"":"\u70b9\u51fb\u67e5\u770b").concat(B?"\u9884\u7ea6\u987b\u77e5":"\u8d2d\u4e70\u987b\u77e5")}),(0,R.jsx)(w.Z,{type:"forward",size:28,color:"#ff7700"})]})]})}),Siblings:(0,R.jsx)(l.G7,{style:C.m_footer_wrapper,children:(0,R.jsx)(k.Z,{notHigh:u,currency:"\xa5",nextTitle:A?"\u53bb\u9009\u5ea7":"\u4e0b\u4e00\u6b65",total:b?"":"number"==typeof n?String(n):"--",renderPayBtn:z,marketPrice:h,isGrayBtn:r,subPriceDes:o,booking:this.onBtnClick.bind(this),btnClickLog:!r&&c&&c({resourceid:t?t.join(","):""}),deductDesc:d,otherDesc:p,footPop:f,imStyle:{justifyContent:"flex-end"},ignoreIphoneX:this.props.isInpop,hideShadow:J,isPopLayer:!0,fstyle:G,renderIM:function(){return re?(0,R.jsx)(L,{showImText:!0,imInfo:Y,fstyle:(0,y.Ec)(T,W?S:null),customImText:I,log:K}):null},otherDescColor:x,ConfigPriceComp:A?function(){return null}:null,onlyBtn:!!A,btnTraceData:F,detailTraceLog:U})})})})}}]),n}(b)},65114:function(e,t,n){"use strict";n.d(t,{Y4:function(){return d},jo:function(){return p}});var i=n(298),o=n(23347),r=n(77395),a=n(79932),s=n(44895),l=n(77942),c=(0,a.ZP)().taroEnv,u={m_height_0:{height:0},m_container:{backgroundColor:"#ffffff",position:"relative"},m_sku_height:{height:"100%"},m_container_radius:{borderTopLeftRadius:(0,r.Vh)(8),borderTopRightRadius:(0,r.Vh)(8)},m_sku_warn_wrapper:{},m_sku:{display:"flex",flexDirection:"column"},m_sku_index:{flex:1,overflow:c===a.fO.rn?"hidden":"scroll",height:"100%"},pagePadding:function(e){return console.log("platform >>>",e),(0,i.Z)((0,i.Z)({height:c===a.fO.alipay?"100vh":"100%"},(0,r.Cg)({direction:"top",style:"solid",color:"#eee",width:(0,r.Vh)(1)})),{},{display:"flex",flexDirection:"column"})},m_sku_wrapper:{flex:1,height:c===a.fO.h5?"calc(100% - 44px)":"100%"},m_scroll_view:(0,i.Z)({},s.ZU.m_scroll_view),m_title_wrap:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_title_text:{color:"#333",fontFamily:"PingFang SC",fontSize:(0,r.Vh)(17),fontWeight:"bold",height:(0,r.Vh)(21)},m_section_seperator:{height:1/(0,l.md)(),backgroundColor:"#E1E7F0",marginLeft:(0,r.Vh)(16),marginRight:(0,r.Vh)(16)}};t["ZP"]=(0,o.Z)(u);(0,r.Vh)(16),(0,r.Vh)(8),(0,r.Vh)(12),(0,r.Nv)((0,r.Vh)(18)),(0,r.Vh)(14);var d={m_ceil_border:{borderColor:"#ebeff5",backgroundColor:"rgb(245,247,250)"},active:{borderColor:"rgb(0,102,246)",backgroundColor:"rgb(235,243,255)"}},p=(0,o.Z)({m_valid_component_head:{fontWeight:(0,r.Ue)("500"),lineHeight:(0,r.Nv)((0,r.Vh)(21))}})},88344:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),l=n(80692),c=n(298),u=n(23347),d=n(77395),p=n(44895),f=n(77942),h=(0,u.Z)({m_tips_container:(0,c.Z)((0,c.Z)((0,c.Z)((0,c.Z)({borderTopLeftRadius:(0,d.Vh)(8),borderBottomRightRadius:(0,d.Vh)(8),borderTopRightRadius:(0,d.Vh)(8),borderBottomLeftRadius:(0,d.Vh)(0),position:"absolute",left:(0,d.Vh)(-1),top:(0,d.Vh)(-10),backgroundColor:"rgb(255,85,0)",height:(0,d.Vh)(16),display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",lineHeight:(0,d.Nv)((0,d.Vh)(16))},(0,d.WB)((0,d.Vh)(6))),(0,d.yp)((0,d.Vh)(1))),(0,d.ix)("border-box")),{},{zIndex:2}),m_tips_container_text:{color:"#ffffff",fontSize:(0,d.Vh)(11)},m_reservation_tag_container:(0,c.Z)((0,c.Z)((0,c.Z)({borderTopLeftRadius:(0,d.Vh)(8),borderBottomRightRadius:(0,d.Vh)(8),borderTopRightRadius:(0,d.Vh)(8),borderBottomLeftRadius:(0,d.Vh)(0),position:"absolute",left:(0,d.Vh)(-1),top:(0,d.Vh)(-10),backgroundColor:"#ff7700",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},(0,d.WB)((0,d.Vh)(6))),(0,d.yp)((0,d.Vh)(2))),{},{zIndex:2}),m_reservation_tag_text:{fontWeight:(0,d.Ue)("500"),color:"#fff",fontSize:(0,d.Vh)(11),lineHeight:(0,d.Nv)((0,d.Vh)(12))},m_date_item:(0,c.Z)({height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingVertical:(0,d.Vh)(8),width:"100%"},(0,d.ix)("border-box")),m_date_item_inven:{height:(0,d.Vh)(76)},m_date_item_moreDate:{height:"auto",paddingVertical:0},m_date_container:{},m_inselect_date_item:{backgroundColor:"#e6f3fe"},m_invenText:{fontSize:(0,d.Vh)(12),lineHeight:(0,d.Nv)(14),color:"#F5190A",letterSpacing:(0,d.Vh)(-.16)},m_invenText_more:(0,c.Z)((0,c.Z)({lineHeight:(0,d.Nv)(12),fontSize:(0,d.Vh)(10)},(0,d.vs)("scale(0.83)")),{},{marginTop:(0,d.Vh)(1)}),m_reservation_text:{color:"#ff7700",fontSize:(0,d.Vh)(11),fontWeight:(0,d.Ue)("500"),lineHeight:(0,d.Nv)((0,d.Vh)(12)),paddingTop:(0,d.Vh)(3)},m_reservation_text_selected:{color:"#fff"}}),m=(0,u.Z)({row_item_other:(0,c.Z)((0,c.Z)((0,c.Z)({color:"#333333",fontSize:(0,d.Vh)(10),lineHeight:(0,d.Nv)((0,d.Vh)(14))},(0,d.o3)(0)),(0,d.yp)((0,d.Vh)(1))),(0,d.ix)("border-box")),otherHasTextView:{backgroundColor:"rgba(0,134,246,0.23)",borderRadius:(0,d.Vh)(8),borderBottomLeftRadius:0,paddingLeft:(0,d.Vh)(4),paddingRight:(0,d.Vh)(6)},otherHasTextViewCommon:(0,c.Z)((0,c.Z)({},p.ZP.otherHasTextViewCommon),{},{height:(0,d.Vh)(16),display:"flex"}),otherHasTextViewRed:{backgroundColor:"rgba(246,59,46,0.2)"},otherHasTextViewDisable:{backgroundColor:"#F4F4F4"},otherHasTextText:{color:"#0086F6",fontSize:(0,d.Vh)(11),fontWeight:"bold"},otherRed:{color:"#ff0000"},otherActive:{color:"#ffffff"},disable:{color:"#dddddd"}}),_=(0,u.Z)({row_item_date:{color:"rgb(17,17,17)",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)((0,d.Vh)(17)),letterSpacing:-.18},row_item_date_font:(0,c.Z)({},"android"==f.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),row_item_date_moreDate:{fontWeight:(0,d.Ue)("500"),color:"#333333",fontSize:(0,d.Vh)(17),textAlign:"center",lineHeight:(0,d.Nv)((0,d.Vh)(21))},dateRed:{color:"#ff0000"},dateActive:{color:"#ffffff"},disable:{color:"#ccc"},flexLayout:p.NG.flexLayout}),v=(0,u.Z)({row_item_price:{color:"#FF5500"},row_item_price_text:{fontWeight:"500",fontSize:(0,d.Vh)(13)},row_item_price_moreDate:(0,c.Z)({textAlign:"center",marginTop:0,color:"#333333",fontSize:(0,d.Vh)(10),lineHeight:(0,d.Nv)((0,d.Vh)(11))},"android"==f.t4.OS?{fontFamily:"Roboto"}:{}),priceActive:{color:"#fff"},moreDate_disable:{color:"#bbb"},disable:{color:"#ccc"}}),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.PureComponent),y=n(51067),x=n(73658),b=n(20159),k=n(52307),w=n(65114),I=n(41763),Z=n(2269),T=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.price,i=e.disableText,o=e.index,r=e.lineIndex,a=e.showLocalTime,s=e.firstDay,c=e.showFrom,u=e.holidayText,p=e.isMoreDate,f=e.day,g=e.style,T=e.work,S=e.id,C=e.isSelect,P=e.isInSelect,N=e.isDateShowPrice,D=void 0===N||N,j=e.tooltipText,R=void 0===j?"":j,L=e.tipText,E=void 0===L?"":L,V=e.isDisable,A=e.isTile,O=e.isFirst,F=e.isShowInvenText,M=void 0!==F&&F,B=e.invenText,U=e.isError,G=e.isAct,H=e.isPromotionPrice,z=e.showReservationTag,q=void 0!==z&&z,K=e.showReservationText,W=void 0!==K&&K,X=e.isNewGuideSku,Y=void 0!==X&&X,Q=t?t.substr(t.indexOf("-")+1):"",J=["\u4eca","\u660e","\u540e"],$=t?(0,y.XV)(t):-1,ee=!a&&0==o&&$>0,te=$>0,ne=0==r?"left":6==r?"right":"center",ie=A&&!!(J[$]&&O&&!a||u&&u.length>1),oe=!0,re=" ",ae=!1,se=!1,le=function(){return V&&i?"".concat(i," "):"number"==typeof n&&D?((c||0!==n)&&(oe=!1),c&&(ae=!0),se=!0,n+""):re}(),ce=Object.assign.apply(Object,[{}].concat([{top:0},_.row_item_date,v.row_item_price,!p&&_.row_item_date_font,le.length>5?{fontSize:(0,d.Vh)(le.length>7?12:13)}:null,Y&&!oe&&le.length>5?{fontSize:(0,d.Vh)(10),lineHeight:(0,d.Vh)(12)}:null,p&&v.row_item_price_moreDate,p&&Y&&!oe&&le.length>5?{fontSize:(0,d.Vh)(8)}:null,C&&p&&v.priceActive,V&&v.disable,V&&p&&v.moreDate_disable,_.flexLayout,oe&&!p&&v.row_item_price_text]));return(0,Z.jsxs)(x.Z,{id:S,style:(0,b.kg)((0,d.wh)([h.m_date_item,p&&h.m_date_item_moreDate,P&&te?h.m_inselect_date_item:{},g])),isSelect:C,isMoreDate:p,fstyle:U?Object.assign({},w.Y4,{m_ceil_border:{borderColor:"#fff",backgroundColor:"#fff"}}):w.Y4,children:[ee&&(0,Z.jsx)(l.G7,{style:h.m_tips_container,children:(0,Z.jsx)(l.xv,{style:h.m_tips_container_text,children:$>2?"".concat($,"\u5929\u540e"):"".concat(J[$],"\u5929")})}),q&&(0,Z.jsx)(l.G7,{style:h.m_reservation_tag_container,children:(0,Z.jsx)(l.xv,{style:h.m_reservation_tag_text,children:"\u9884\u7ea6\u62a2"})}),p&&!E&&(0,Z.jsx)(l.G7,{style:(0,d.wh)([ie&&m.otherHasTextView,!T&&ie&&!C&&m.otherHasTextViewRed,ie&&V&&m.otherHasTextViewDisable,m.otherHasTextViewCommon,_.flexLayout]),children:ie?(0,Z.jsx)(l.xv,{style:(0,d.wh)([m.row_item_other,m.otherHasTextText,C&&m.otherActive,!T&&m.otherRed,V&&m.disable]),space:"ensp",children:J[$]&&O&&(null===u||void 0===u?void 0:u.length)<2?"".concat(J[$],"\u5929"):u||" "}):null}),C&&!!R&&(0,Z.jsx)(k.Z,{text:R,placement:ne}),!!E&&(0,Z.jsx)(l.xv,{style:(0,d.wh)([m.row_item_other,C&&m.otherActive,V&&m.disable]),space:"ensp",children:E}),!p&&(0,Z.jsx)(l.xv,{style:(0,d.wh)([_.row_item_date,V&&_.disable,_.flexLayout]),space:"ensp",children:!a&&0==s&&$<3?"".concat(J[$],"\u5929"):"\u5468".concat((0,y.q7)(t))}),(0,Z.jsx)(l.xv,{style:(0,d.wh)([_.row_item_date,!p&&_.row_item_date_font,p&&_.row_item_date_moreDate,p&&!T&&_.dateRed,C&&p&&_.dateActive,V&&_.disable,_.flexLayout]),space:"ensp",children:p?f||" ":"".concat(Q)}),(!!i||D)&&(le!==re?(0,Z.jsx)(I.Z,{fstyle:{u_price_price:ce,u_price_icon:ce,u_price_start_text:ce,u_price_free:ce},value:le,free:"0"===le&&!H&&!G,isShowStart:ae,isShowCurrency:se}):null),!!B&&!i&&M&&(0,Z.jsx)(l.xv,{style:(0,d.wh)([h.m_invenText,p&&h.m_invenText_more,p&&C&&m.otherActive]),children:B}),W&&(0,Z.jsx)(l.xv,{style:(0,d.wh)([h.m_reservation_text,C&&h.m_reservation_text_selected]),children:"\u9884\u7ea6\u62a2"})]})}}]),n}(g)},58519:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var i,o=n(298),r=n(57042),a=n(24460),s=n(21867),l=n(86066),c=n(90201),u=n(80692),d=n(81876),p=n(45023),f=n(59438),h=n(2823),m=n(77942),_=n(77395),v=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,d.Z)(i),"state",void 0),(0,p.Z)((0,d.Z)(i),"width",void 0),(0,p.Z)((0,d.Z)(i),"tipInfo",void 0),i.width=(0,_.Vh)((m.Db.get("window").width-(e.usePage==h.zh.book?48:24))/5),i.state={isInit:!1},i.tipInfo={showDefault:{text:"\u5df2\u9009\u62e9\u60a8\u7b5b\u9009\u7684\u65e5\u671f"},error:{text:e.calendarTip||"\u8bf7\u9009\u62e9\u4f7f\u7528\u65e5\u671f",type:"error"},default:{text:e.calendarTip||"\u8bf7\u5148\u9009\u62e9\u65e5\u671f",type:"default"}},i}return(0,a.Z)(n,[{key:"onClick",value:function(e){var t=this.props,n=t.onChooseDate,i=t.usePage,o=t.defaultDate,r=e.disableText,a=e.price,s=r||"number"!=typeof a;s?this.toast.show("\u5f53\u524d\u65e5\u671f"+(r||"\u4e0d\u53ef\u8ba2")):i==h.zh.book&&e.date==o||n&&n(e)}},{key:"onTipshow",value:function(){var e=this;this.setState({isTipShow:!0}),i&&clearTimeout(i),i=setTimeout((function(){e.setState({isTipShow:!1})}),2e3)}},{key:"componentDidMount",value:function(){this.state.isInit||this.setState({isInit:!0})}}]),n}(f.ZP),g=n(3902),y=n(23347),x={m_tab_calendar:{paddingRight:(0,_.Vh)(8),paddingLeft:(0,_.Vh)(16),paddingBottom:(0,_.Vh)(12),position:"relative"},m_tab_calendar_book:(0,o.Z)({paddingBottom:(0,_.Vh)(20)},(0,_.Cg)({width:_.WI,style:"solid",color:"rgb(235,239,245)",direction:"bottom"})),m_back_red:{backgroundColor:"#fee8e6"},m_tab_padding_bottom:{paddingBottom:(0,_.Vh)(10)},m_tab_wrapper:{position:"relative"},m_tab_calendar_header:{display:"flex",flexDirection:"row",paddingTop:(0,_.Vh)(16),paddingBottom:(0,_.Vh)(12),alignItems:"center",flexWrap:"wrap"},m_tab_calendar_small_header:{paddingTop:(0,_.Vh)(20)},m_tab_calendar_header_text:{color:"rgb(17,17,17)",fontSize:(0,_.Vh)(17),fontWeight:(0,_.Ue)("500"),lineHeight:(0,_.Nv)((0,_.Vh)(21)),display:"flex"},m_tab_calendar_header_text_book:(0,o.Z)({letterSpacing:(0,_.Vh)(-.5)},(0,_.yp)((0,_.Vh)(2))),m_tab_calendar_header_select:(0,o.Z)((0,o.Z)((0,o.Z)({height:(0,_.Vh)(21)},(0,_.yp)((0,_.Vh)(2))),(0,_.WB)((0,_.Vh)(8))),{},{display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"rgb(245,247,250)",borderTopLeftRadius:(0,_.Vh)(10.5),borderBottomRightRadius:(0,_.Vh)(10.5),borderTopRightRadius:(0,_.Vh)(10.5),borderBottomLeftRadius:0},(0,_.ix)("border-box")),error:{backgroundColor:"rgb(255,246,245)"},texterror:{color:"rgb(242,21,0)"},m_tab_calendar_header_select_text:{fontSize:(0,_.Vh)(13),color:"rgb(16,73,153)",lineHeight:(0,_.Nv)((0,_.Vh)(17)),fontWeight:"bold",fontFamily:"PingFangSC-Medium"},m_tab_calendar_localTime:{color:"#111111",fontSize:(0,_.Vh)(15),fontWeight:"normal",display:"flex",lineHeight:(0,_.Nv)((0,_.Vh)(19))},m_ceil_wrapper:(0,o.Z)((0,o.Z)({backgroundColor:"#fff",height:(0,_.Vh)(75),width:(0,_.Vh)(60),position:"absolute",bottom:(0,_.Vh)(-2),right:(0,_.Vh)(-3),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",paddingLeft:(0,_.Vh)(12)},(0,_.ix)("border-box")),{},{zIndex:98,borderRadius:(0,_.Vh)(2)}),m_moreDate_text:{color:"#006FF6",fontSize:(0,_.Vh)(13),lineHeight:(0,_.Nv)((0,_.Vh)(19)),letterSpacing:(0,_.Vh)(-.18),fontFamily:"PingFangSC-Regular"},m_moreDate_text_wrapper:{display:"flex",flexDirection:"column"},m_tooltip_wrapper:{position:"absolute",right:(0,_.Vh)(6),bottom:(0,_.Vh)(50),flexDirection:"column",zIndex:99},m_tooltip_content:{position:"relative",height:(0,_.Vh)(24),display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:(0,_.Vh)(8),paddingRight:(0,_.Vh)(8),borderRadius:(0,_.Vh)(12)},m_tooltip_text:{color:"#ffffff",fontSize:(0,_.Vh)(10),fontWeight:"500",lineHeight:(0,_.Nv)((0,_.Vh)(24))},commonArrow_top:{position:"relative",width:(0,_.Vh)(0),height:(0,_.Vh)(0),borderStyle:"solid",borderWidth:(0,_.Vh)(5),borderLeftColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderTopColor:"#F78E0A",left:(0,_.Vh)(24)},m_tab_calendar_shadow_android:{position:"absolute",left:"auto",top:"auto",right:(0,_.Vh)(-3),bottom:(0,_.Vh)(-3),width:(0,_.Vh)(68),height:(0,_.Vh)(75)},m_shadow_higher:{height:(0,_.Vh)(88)},translateX:(0,o.Z)({},(0,_.oQ)("translateX 0.6s linear 0.2s 3")),error_translateX:(0,o.Z)({},(0,_.oQ)("error-translate 0.6s linear 0.2s 3")),translateExcitationTips:{},m_text_thin:{fontSize:(0,_.Vh)(15)},m_text_small:{fontSize:(0,_.Vh)(15),fontWeight:(0,_.Ue)("500"),lineHeight:(0,_.Nv)((0,_.Vh)(19))},m_text_excitationTips:{fontSize:(0,_.Vh)(13),lineHeight:(0,_.Nv)((0,_.Vh)(17)),letterSpacing:-(0,_.Vh)(.16),fontWeight:"normal"},m_tab_excitationTips:{height:(0,_.Vh)(25),borderRadius:(0,_.Vh)(13),display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:(0,_.Vh)(6)},m_image_excitationTipsOrange:{height:(0,_.Vh)(17),width:(0,_.Vh)(17),marginRight:(0,_.Vh)(2),position:"relative"},m_image_excitationTipsGreen:{height:(0,_.Vh)(17),width:(0,_.Vh)(17),marginRight:(0,_.Vh)(2),marginLeft:(0,_.Vh)(2),position:"relative"},m_tab_calendar_pack3:{paddingBottom:(0,_.Vh)(20)},m_reservation_tip_container:{paddingTop:(0,_.Vh)(8),paddingRight:(0,_.Vh)(8),display:"flex",flexDirection:"row",alignItems:"flex-start"},m_reservation_tip_icon:{paddingRight:(0,_.Vh)(6),height:(0,_.Vh)(19),display:"flex",alignItems:"center",justifyContent:"center"},m_reservation_tip_text:{color:"#111",fontSize:(0,_.Vh)(13),fontWeight:"normal",lineHeight:(0,_.Nv)((0,_.Vh)(19)),flex:1},m_tab_calendar_guide:{paddingBottom:0}},b={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},orange:["#FFF4EB","#FFFFFF"],green:["#F2FCF9","#FFFFFF"]},k=(0,y.Z)(x),w=n(29339),I=n(90129),Z=function(){return function(){}},T=n(27015),S=n(2269),C=function(e){var t,n=e.text,i=e.type,r=e.isInit,a=e.excitationTips,s=e.excitationTipsExposureLog,l=(0,c.useState)(new u.fS.Value(0)),d=(0,I.Z)(l,1),p=d[0],f=(0,c.useState)(new u.fS.Value(1)),h=(0,I.Z)(f,1),m=h[0],v=(0,c.useState)(new u.fS.Value(0)),g=(0,I.Z)(v,1),y=g[0],x=Z((0,o.Z)((0,o.Z)({},e),{},{x:p,fadeAnim:m,fadeTips:y})),w=x.showTip,C=x.fadeIn,P=x.fadeOut,N=x.fadeInTips;return C&&(0,c.useEffect)(C,[r,i]),P&&(0,c.useEffect)(P,[n]),N&&(0,c.useEffect)(N,[null===a||void 0===a?void 0:a.contents]),n||w||null!==a&&void 0!==a&&a.contents?(0,S.jsxs)(S.Fragment,{children:[(n||w)&&(0,S.jsx)(u.fS.View,{style:(0,_.wh)([k.m_tab_calendar_header_select,i?k[i]:"",{transform:[{translateX:p}],opacity:m},"default"==i?k.translateX:{},"error"==i?k.error_translateX:{}]),children:(0,S.jsx)(u.xv,{style:(0,_.wh)([k.m_tab_calendar_header_select_text,i?k["text".concat(i)]:""]),children:n||w})}),(null===a||void 0===a?void 0:a.contents)&&(null===a||void 0===a||null===(t=a.contents[0])||void 0===t?void 0:t.value)&&!w&&(0,S.jsx)(T.Z,{children:(0,S.jsx)(u.G7,{style:k.translateExcitationTips,children:(0,S.jsx)(u.G7,{testID:s({content:a.contents.map((function(e){return e.value})).join("")}),children:(0,S.jsxs)(u.o,{start:b.linearGradientStart,end:b.linearGradientEnd,direction:"orange"==a.color?85.36306432618633:90,colors:"orange"==a.color?b.orange:b.green,style:k.m_tab_excitationTips,children:[(0,S.jsx)(u.Ee,{url:a.icon,style:"orange"==a.color?k.m_image_excitationTipsOrange:k.m_image_excitationTipsGreen}),a.contents.map((function(e){return(0,S.jsx)(u.xv,{style:(0,_.wh)([k.m_text_excitationTips,"orange"==e.key?{color:"#FF5500"}:{color:"#09A76F"}]),children:e.value})}))]})})})})]}):null},P=n(1675),N=n(79932),D=n(21731),j=n(89465),R=n(2883),L=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,d.Z)(i),"openCompare","RN"==i.platform),(0,p.Z)((0,d.Z)(i),"state",void 0),(0,p.Z)((0,d.Z)(i),"tabScroll",void 0),(0,p.Z)((0,d.Z)(i),"ceil",void 0),(0,p.Z)((0,d.Z)(i),"containerWidth",0),(0,p.Z)((0,d.Z)(i),"loaded",!1),(0,p.Z)((0,d.Z)(i),"isAlipay",!1),i.state={wrapperWidth:m.Db.get("window").width-40,itemWidth:e.isNewGuideSku?(0,_.Vh)(55,{needPx:!0}):(0,_.Vh)(60,{needPx:!0}),scrollDistance:0,showLength:(0,N.ZP)().taroEnv===N.fO.h5?e.maxLength||60:5,startIndex:0,marginRight:(0,_.Vh)(6,{needPx:!0}),marginRightLast:(0,_.Vh)(65,{needPx:!0}),defaultDate:e.defaultDate},i.isAlipay=(0,N.ZP)().taroEnv===N.fO.alipay,i.sendDateSlideClickLog=(0,R.Ds)(i.sendDateSlideClickLog,500),i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillReceiveProps",value:function(e){var t,n;this.state.defaultDate!=e.defaultDate&&(this.setCalendarStart(e),this.setState({defaultDate:e.defaultDate})),(null===(t=e.calendar)||void 0===t?void 0:t.length)!=(null===(n=this.props.calendar)||void 0===n?void 0:n.length)&&this.updateShowLen(e)}},{key:"updateShowLen",value:function(e){var t=this,n=e.maxLength,i=void 0===n?60:n,o=e.calendar;this.setState({showLength:Math.min(i,o.length)},(function(){t.loaded=!0,t.getContainerWidth(),t.setCalendarStart(e,!0)}))}},{key:"init",value:function(){var e=this;(0,P.L6)(this.tabScroll,(function(t){t&&t.width&&e.setState({wrapperWidth:t.width})}),!1,"",{interval:50}),(0,P.L6)(this.ceil,(function(t){t&&t.width&&e.setState({itemWidth:t.width},(function(){e.getContainerWidth()}))})),setTimeout((function(){e.updateShowLen(e.props)}),600)}},{key:"getContainerWidth",value:function(){var e=this.state,t=e.itemWidth,n=e.marginRightLast,i=e.showLength,o=e.marginRight;this.containerWidth=(t+o)*i+n}},{key:"setCalendarStart",value:function(e,t){var n=this.props,i=n.calendar,o=n.defaultDate,r=n.maxLength,a=void 0===r?60:r,s=e.defaultDate,l=this.state,c=l.startIndex,u=l.showLength;if(s&&(o!=s||t)){var d=i.findIndex((function(e){return e.date==s}));(d<c||d>=c+u)&&(c=d>a/2?d-a/2:0,c+a>i.length&&(c=i.length-a>0?i.length-a:0),this.setState({startIndex:c})),this.changeScrollDistance(d-c)}}},{key:"onClick",value:function(e,t){var n=this.props,i=n.onChooseDate,o=n.usePage,r=n.defaultDate,a=n.calendar,s=n.disableInvertSelection,l=e.disableText,c=e.price,u=l||"number"!=typeof c;if(u)this.toast.show("\u5f53\u524d\u65e5\u671f"+(l||"\u4e0d\u53ef\u8ba2"));else if(o!=h.zh.book&&!s||e.date!=r){var d=r==e.date?null:e.date;this.setState({defaultDate:d});var p=a.find((function(t){return t.date==e.date}));i&&i(p),this.changeScrollDistance(t)}}},{key:"componentDidUpdate",value:function(){}},{key:"changeScrollDistance",value:function(e){var t=this,n=this.state,i=n.wrapperWidth,o=n.itemWidth,r=n.marginRight,a=(o+r)*e,s=(i-o)/2,l=a-s;l!==this.state.scrollDistance&&this.loaded&&setTimeout((function(){if(t.platform==D.NX.Mini)t.setState({scrollDistance:l});else if(t.platform==D.NX.H5){var e;(null===(e=t.tabScroll)||void 0===e?void 0:e.scrollTo)&&t.tabScroll.scrollTo({left:l,top:0,behavior:"smooth"})}else{var n;(null===(n=t.tabScroll)||void 0===n?void 0:n.scrollTo)&&t.tabScroll.scrollTo({x:l,y:0})}}))}},{key:"onScrollToSide",value:function(e){var t=this.props.calendar,n=this.state,i=n.startIndex,o=n.showLength;(0!==i&&"left"==e||t.length>i+o&&"right"==e)&&this.props.onTipshow&&this.props.onTipshow()}},{key:"onScroll",value:function(e){try{var t=this.state,n=t.wrapperWidth,i=t.startIndex,o=t.showLength,r=this.props,a=r.calendar,s=r.isNewGuideSku,l=r.newDateSlideClickLog,c=e.nativeEvent.contentOffset.x,u=10;(c+n>=this.containerWidth-u&&a.length>i+o||c<=0&&0!==i)&&this.props.onTipshow&&this.props.onTipshow(),s&&l&&this.sendDateSlideClickLog(l)}catch(e){}}},{key:"sendDateSlideClickLog",value:function(e){var t=e.params,n=e.type;(0,j.Zz)(t,n)}}]),n}(f.ZP),E=n(88344),V=n(51067),A={m_tab_scroll:{width:"100%",position:"relative",marginTop:(0,_.Vh)(-10)},m_tab:{paddingTop:(0,_.Vh)(10),display:"flex",flexDirection:"row",position:"relative"},last_item_hold:function(e){return{width:e,flexBasis:(0,_.P_)(e),flexGrow:(0,_.H7)(0),flexShrink:(0,_.i4)(0)}},m_tab_more_date:{},addMarginRight:function(e,t){return{height:(0,_.Vh)(67),width:t,marginRight:e,flexGrow:(0,_.H7)(0),flexShrink:(0,_.i4)(0),flexBasis:(0,_.P_)(t)}},m_tab_alipay:{position:"relative"},m_tab_date_ceil_height:{height:(0,_.Vh)(72)}},O=(0,y.Z)(A),F=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.calendar,n=this.state,i=n.showLength,r=n.marginRightLast,a=n.scrollDistance,s=n.startIndex,l=n.defaultDate,c=(0,V.XV)(t[0].date),d=function(t){e.ceil||(e.ceil=t)},p=t.slice(s,s+i).map((function(t,n){var i=!!l&&t.date===l;return(0,S.jsx)(B,(0,o.Z)((0,o.Z)((0,o.Z)({},e.props),e.state),{},{item:t,isSelect:i,index:n,firstDay:c,startIndex:s,setRef:d,onClick:function(){return e.onClick(t,n)}}))})),f={};return this.platform==D.NX.Mini&&(f.scrollLeft=a,f.enhanced=!0,f.showScrollbar=!1),(0,S.jsx)(u.pf,(0,o.Z)((0,o.Z)({id:"m_tab_scroll",className:"m_tab_scroll",style:O.m_tab_scroll,scrollX:!0,horizontal:!0,showsHorizontalScrollIndicator:!1,scrollWithAnimation:!0,enableFlex:!0},f),{},{scrollEventThrottle:16,ref:function(t){return e.tabScroll=t},onScroll:this.onScroll.bind(this),onScrollToLower:this.onScrollToSide.bind(this,"right"),onScrollToUpper:this.onScrollToSide.bind(this,"left"),children:(0,S.jsxs)(u.G7,{className:"m_tab ".concat(t.length>3?"m_tab_more_date":null),style:(0,_.wh)([O.m_tab,t.length>3?O.m_tab_more_date:null,this.isAlipay?O.m_tab_alipay:null]),children:[p,t.length>3&&(0,S.jsx)(u.G7,{style:O.last_item_hold(r)})]})}))}}]),n}(L),M=function(e){var t=e.dateClickLog,n=e.item,i=e.index,o=e.showLength,r=e.marginRight,a=e.itemWidth,s=e.usePage,l=e.isSelect,c=e.traceData,u=e.defaultDate,d=e.isDateShowPrice,p=e.showLocalTime,f=e.firstDay,m=e.isServerData,v=e.onClick,g=e.setRef,y=e.calendar,x=e.isNewGuideSku,b=e.newDateClickLog,k=y.findIndex((function(e){return e.date==n.date}))+1;return(0,S.jsx)(w.Z,{log:x?b&&b(k):t&&t({cdate:n.date}),onClick:function(){return v()},style:(0,_.wh)([O.addMarginRight(i==o-1?0:r,a),[h.zh.detail,h.zh.sku].includes(s)?O.m_tab_date_ceil_height:{}]),testID:"dateceil".concat(n.date),devTraceData:c&&!l&&c(u||"",n.date),activeOpacity:1,children:(0,S.jsx)(E.Z,{ref:function(e){return g(e)},isShowInvenText:[h.zh.detail,h.zh.sku].includes(s),id:"id".concat(n.date),className:"m_tab .m_ceil",date:n.date,price:n.price,isDateShowPrice:d,disableText:n.disableText,invenText:n.invenText,index:i,isSelect:l,showLocalTime:p,firstDay:f,marginRight:r,showFrom:!n.hideFrom,isDisable:n.disableText||"number"!==typeof n.price&&!m,isPromotionPrice:n.isPromotionPrice,showReservationTag:n.hasReservation,isNewGuideSku:x},n.date)})},B=(0,c.memo)(M,(function(e,t){var n=t.showLength,i=t.itemWidth,o=t.isSelect,r=t.item,a=t.isServerData,s=t.isDateShowPrice,l=t.startIndex,c=r.hideFrom,u=r.disableText,d=r.invenText,p=r.price,f=r.hasReservation,h=r.date,m=e.showLength,_=e.itemWidth,v=e.isSelect,g=e.item,y=e.isServerData,x=e.isDateShowPrice,b=e.startIndex,k=g.hideFrom,w=g.disableText,I=g.invenText,Z=g.price,T=g.hasReservation,S=g.date;return n===m&&i===_&&o===v&&c===k&&u===w&&d===I&&p===Z&&a===y&&x===s&&b===l&&T===f&&h===S})),U=n(36556),G=(0,N.ZP)(),H=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.showLocalTime,i=t.calendar,r=t.dateTitle,a=t.moreDateClickLog,s=t.moreButtonExposureLog,l=t.tabExposureLog,c=t.showDefault,d=t.usePage,p=t.setRef,f=t.anchor,m=t.clickMoreTraceData,v=t.defaultDate,y=t.thinTitle,x=t.smallTitle,b=t.excitationTips,I=t.excitationTipsExposureLog,Z=t.isPack3MultiSale,T=t.hasReservation,P=t.showReservationTip,N=t.isNewGuideSku,R=t.newMoreDateExpoLog,L=t.newMoreDateClickLog;return(0,S.jsxs)(u.G7,{id:"tab_calendar",ref:function(e){return p&&p("tab_calendar",e)},style:(0,_.wh)([k.m_tab_calendar,f?(0,o.Z)((0,o.Z)({},k.m_back_red),k.m_tab_padding_bottom):null,d==h.zh.book?k.m_tab_calendar_book:{},Z?k.m_tab_calendar_pack3:null,N?k.m_tab_calendar_guide:null]),testID:l,children:[(0,S.jsxs)(u.G7,{style:(0,_.wh)([k.m_tab_calendar_header,x?k.m_tab_calendar_small_header:{}]),children:[(0,S.jsx)(u.xv,{style:(0,_.wh)([k.m_tab_calendar_header_text,d==h.zh.book?k.m_tab_calendar_header_text_book:{},y?k.m_text_thin:{},x?k.m_text_small:{},{marginRight:n?0:(0,_.Vh)(6)},d==h.zh.book&&T&&G.platform==D.NX.RN?{marginTop:(0,_.Vh)(10)}:null]),children:r}),n?(0,S.jsx)(u.xv,{style:(0,_.wh)([k.m_tab_calendar_localTime,N?k.m_tab_calendar_header_text:{}]),children:"\uff08\u5f53\u5730\u65f6\u95f4\uff09"}):null,d==h.zh.book?(0,S.jsx)(C,(0,o.Z)((0,o.Z)({},c?this.tipInfo["showDefault"]:f?this.tipInfo["error"]:v?{}:this.tipInfo["default"]),{},{isInit:this.state.isInit,excitationTips:b,showLocalTime:n,excitationTipsExposureLog:I})):null]}),(0,S.jsxs)(u.G7,{style:k.m_tab_wrapper,children:[(0,S.jsx)(F,(0,o.Z)((0,o.Z)({},this.props),{},{onTipshow:function(){try{e.onTipshow()}catch(e){(0,j.gp)({type:"ttd_dev_crn_bind_error",body:{title:"this.onTipshow error",content:"error === ".concat(JSON.stringify(e))}})}}})),i.length>5?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(w.Z,{style:(0,_.wh)([k.m_ceil_wrapper,T?{height:(0,_.Vh)(85),paddingTop:(0,_.Vh)(10)}:null,d==h.zh.book?T?{height:(0,_.Vh)(83),paddingTop:(0,_.Vh)(10)}:{height:(0,_.Vh)(73)}:null,f?{backgroundColor:"#fff",borderColor:"#fff"}:{}]),log:N?L:a,testID:N?R&&(0,U.kI)(R.key,R.params):s,onClick:this.props.onShowMore,activeOpacity:1,devTraceData:m,children:[(0,S.jsxs)(u.G7,{style:k.m_moreDate_text_wrapper,children:[(0,S.jsx)(u.xv,{style:(0,_.wh)([k.m_moreDate_text,{marginLeft:(0,_.Vh)(1)}]),children:"\u66f4\u591a"}),(0,S.jsx)(u.xv,{style:k.m_moreDate_text,children:"\u65e5\u671f"})]}),(0,S.jsx)(g.Z,{type:"arrow-right",color:"#006FF6",className:"icon",size:40})]})}):null]}),P?(0,S.jsxs)(u.G7,{style:k.m_reservation_tip_container,children:[(0,S.jsx)(u.G7,{style:k.m_reservation_tip_icon,children:(0,S.jsx)(g.Z,{type:"info",size:28})}),(0,S.jsx)(u.xv,{style:k.m_reservation_tip_text,children:"\u5f53\u524d\u65e5\u671f\u666f\u533a\u5c1a\u672a\u5f00\u653e\u552e\u5356\uff0c\u9700\u8981\u9884\u7ea6\u62a2\u7968\uff0c\u5f00\u653e\u552e\u5356\u540e\u5e73\u53f0\u5c06\u4f1a\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u62a2\u7968\u3002\u62a2\u7968\u5931\u8d25\u81ea\u52a8\u9000\u6b3e\uff0c\u62a2\u7968\u7ed3\u679c\u8bf7\u4ee5\u8ba2\u5355\u8be6\u60c5\u9875\u4e3a\u51c6\u3002"})]}):null]})}}]),n}(v)},90165:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(73658),c=n(3902),u=n(298),d=n(77395),p=n(23347),f=n(22751),h=(0,u.Z)((0,u.Z)((0,u.Z)({},f.aO),{},{m_tab_title_desc:{color:"rgb(17,17,17)",fontSize:(0,d.Vh)(14),marginLeft:(0,d.Vh)(10)}},f.BH),{},{m_text_thin:{fontSize:(0,d.Vh)(15)}}),m=(0,p.Z)(h),_=n(29339),v=n(81876),g=n(45023),y=n(59438),x=n(77942),b=n(20835),k=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,g.Z)((0,v.Z)(o),"state",void 0),(0,g.Z)((0,v.Z)(o),"poplayerHeight",.8*x.Db.get("window").height-x.iO),o.state={choicePeopleId:e.choicePeopleId},o.handleClickHelpInfo=o.handleClickHelpInfo.bind((0,v.Z)(o)),o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.choicePeopleId;t!==this.state.choicePeopleId&&this.setState({choicePeopleId:t})}},{key:"selectCeil",value:function(e){var t=this.props,n=t.dataList,i=t.peopleGrayProperty,o=e.peopleId,r=this.state.choicePeopleId;if(i[o])return this.toast.show("\u8be5\u4eba\u7fa4\u65e0\u6cd5\u4e0e\u5176\u4ed6\u5df2\u9009\u9879\u6216\u65e5\u671f\u7ec4\u5408\u3002");if(n.length>1){var a=o==r?"":o;this.setState({choicePeopleId:a});var s=this.props.onClick;s&&s(a)}}},{key:"handleClickHelpInfo",value:function(){var e=this.props,t=e.dataList,n=e.peoplePropertiesUnable;(0,b.Z)({dataList:t,peoplePropertiesUnable:n})}}]),n}(y.ZP),w=n(65114),I=n(2269),Z=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.titleText,i=t.dataList,o=t.choicePeopleId,r=t.peopleGrayProperty,a=t.peoplePropertiesUnable,u=t.propertyClickLog,p=t.peopleExposureLog,f=t.popClickLog,h=t.thinTitle;return(0,I.jsxs)(s.G7,{style:m.m_tab_ceil,testID:p,children:[(0,I.jsxs)(_.Z,{style:m.m_tab_title,onClick:this.handleClickHelpInfo,log:f,children:[(0,I.jsx)(s.xv,{style:(0,d.wh)([m.m_tab_title_text,h?m.m_text_thin:{}]),children:n}),!(!a||!a.tip)&&(0,I.jsx)(s.xv,{style:m.m_tab_title_desc,children:a.tip}),(0,I.jsx)(c.Z,{type:"help",color:"rgb(17,17,17)",className:"m_title_icon",size:32,style:m.m_icon_center})]}),(0,I.jsx)(s.G7,{style:m.m_tab,children:i&&i.length?i.map((function(t,n){var i=t.peopleId,a=t.peopleName,c=r[i],p=o==i;return(0,I.jsx)(l.Z,{id:i,isGray:c,isSelect:p,style:m.m_ceil_props,fstyle:w.Y4,children:(0,I.jsx)(_.Z,{style:m.m_ceil_child,onClick:e.selectCeil.bind(e,t),log:u&&u({isSelect:o==i,pos:n+1}),children:(0,I.jsx)(s.xv,{style:(0,d.wh)([m.m_ceil_child_text,c?m.gray:{color:"rgb(17,17,17)"},p?m.active:{}]),children:a})})},i)})):null})]})}}]),n}(k)},20835:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var i=n(49787),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(77395)),c=n(80692),u=n(59438),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"onClose",value:function(){i.ZP.hide("peopleHelpInfoPopLayer")}}]),n}(u.ZP),p=n(298),f=n(23347),h={m_help_info:{paddingLeft:(0,l.Vh)(16),paddingRight:(0,l.Vh)(16),paddingBottom:(0,l.Vh)(9)},m_help_info_border:(0,p.Z)((0,p.Z)({},(0,l.Cg)({direction:"top",width:1,style:"solid",color:"#ededed"})),{},{paddingTop:20,marginTop:20}),m_help_info_name:{color:"#333",fontWeight:"bold",fontSize:(0,l.Vh)(15),flex:1,lineHeight:(0,l.Nv)(21)},m_help_info_desc:{display:"flex",flexDirection:"row",marginTop:(0,l.Vh)(8)},m_help_info_item:{marginTop:(0,l.Vh)(20)},m_help_info_text:{fontSize:(0,l.Vh)(14),lineHeight:(0,l.Nv)((0,l.Vh)(22)),color:"#333",wordBreak:"break-all"},m_help_info_wrapper:{flexDirection:"row",justifyContent:"space-between"},m_help_info_title:{color:"#333",fontWeight:"bold",fontSize:(0,l.Vh)(16)},m_help_header:{width:"100%",height:61,borderTopLeftRadius:8,borderTopRightRadius:8,borderColor:"#999",textAlign:"center",overflow:"hidden",position:"relative"},m_help_back_btn:{width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:8.5,left:4},m_help_header_title:{textAlign:"center",lineHeight:(0,l.Nv)(61),fontWeight:"700",fontSize:18,color:"#333"}},m=(0,f.Z)(h),_=n(2269),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"renderItem",value:function(e){var t=e.peopleId,n=e.peopleName,i=e.peopleDescStr,o=e.priceDesc;return(0,_.jsxs)(c.G7,{style:m.m_help_info_item,children:[(0,_.jsxs)(c.G7,{style:m.m_help_info_wrapper,children:[(0,_.jsx)(c.xv,{style:m.m_help_info_name,children:n}),!!o&&(0,_.jsx)(c.xv,{style:(0,l.wh)([m.m_help_info_name,{flex:0,marginLeft:(0,l.Vh)(16)}]),children:o})]}),(0,_.jsx)(c.G7,{style:m.m_help_info_desc,children:(0,_.jsx)(c.xv,{style:m.m_help_info_text,children:i})})]},t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataList,i=t.otherDataList,o=t.maxHeight;return n&&n.length>0?(0,_.jsxs)(c.G7,{style:(0,l.wh)([m.m_help_info,o?{maxHeight:o}:{}]),children:[n.map((function(t){return e.renderItem(t)})),!!i&&i.length>0&&(0,_.jsxs)(c.G7,{style:m.m_help_info_border,children:[(0,_.jsx)(c.xv,{style:m.m_help_info_title,children:"\u4ee5\u4e0b\u7968\u8bf7\u81f3\u666f\u533a\u5b98\u65b9\u6e20\u9053\u8d2d\u4e70\u6216\u9884\u7ea6"}),i.map((function(t){return e.renderItem(t)}))]})]}):null}}]),n}(d),g=n(77942),y=n(79932),x=n(21731),b=(0,y.ZP)();function k(e){var t=e.dataList,n=e.peoplePropertiesUnable,o=void 0===n?{}:n,r=e.title,a=void 0===r?"":r,s=.8*g.Db.get("window").height-g.iO;i.ZP.show({props:{name:"peopleHelpInfoPopLayer",title:a||"\u4f7f\u7528\u4eba\u7fa4\u8bf4\u660e",isOpened:!0,needSave:!0,isShowHeader:!0,maxHeight:s,minHeight:.5*s,contentMaxHeight:b.platform==x.NX.Mini?s-((0,g.cY)()?(0,l.Vh)(24):0)-44:0},child:v,childProps:{dataList:t,otherDataList:o.info,maxHeight:b.isInMini?s-80:0}})}},30706:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(80692)),c=n(81876),u=n(45023),d=n(59438),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,c.Z)(i),"state",void 0),i.state={packageIntroduction:e.packageIntroduction},i}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.packageIntroduction!=this.state.packageIntroduction&&this.setState({packageIntroduction:""},(function(){t.setState({packageIntroduction:e.packageIntroduction})}))}},{key:"onClick",value:function(e,t){var n=this.props.onChooseSaleProperty;n&&n(t,e)}}]),n}(d.ZP),f=n(92954),h=n.n(f),m={show:function(e){e&&e.urls&&e.urls.length>0&&h().previewImage({urls:e.urls})},showNewGalleryBrowser:function(e){},renderPhotoBrowser:function(e){return null}},_=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,c.Z)(i),"state",void 0),(0,u.Z)((0,c.Z)(i),"isNewCarItems",void 0),(0,u.Z)((0,c.Z)(i),"selectCeil",(function(e,t){var n=i.props,o=n.dataList,r=n.grayPropertys,a=n.grayClickToast,s=i.state.selectPropertyId,l=e.salesPropertyValueId;if(r[l])return a&&i.toast.show("\u8be5\u9879\u65e0\u6cd5\u4e0e\u5176\u4ed6\u5df2\u9009\u9879\u6216\u65e5\u671f\u7ec4\u5408\u3002");if(o.length>1){i.setState({selectPropertyId:l==s?"":l});var c=i.props.onClick;c&&c(l,t)}}));var r=e.parentId,a=e.isNewGuideSku;return i.state={selectPropertyId:e.selectPropertyId,showPhoto:!1,configs:{}},i.isNewCarItems=297==r&&a,i}return(0,r.Z)(n,[{key:"handleClickPhoto",value:function(e){var t=this;if(e&&0!=e.length){var n=e.map((function(e){return{imageUrl:e,imageThumbnailUrl:"",imageTitle:"",imageDescription:"",name:"",url:e}})),i={buChanel:"activity",showPhotoIndex:0,items:n,urls:(n||[]).map((function(e){return e.url})),setShowPhoto:function(){t.setState({configs:{items:n,onBigPhotoHide:function(){setTimeout((function(){t.setState({showPhoto:!1})}),300)},showPhotoIndex:0,isThumbnailModel:!1},showPhoto:!0})}};m.show(i)}}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectPropertyId;t!==this.state.selectPropertyId&&this.setState({selectPropertyId:t})}}]),n}(d.ZP),v=n(73658),g=n(3902),y=n(22751),x=n(29339),b=n(77395),k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n)}(d.ZP),w=n(23347),I=(0,w.Z)({m_car_info_card:(0,i.Z)((0,i.Z)((0,i.Z)({backgroundColor:"#fff"},b.xI),(0,b.WB)((0,b.Vh)(16))),(0,b.yp)((0,b.Vh)(12))),m_small_car_info_card:{backgroundColor:"#f7f7f7"},m_selected_car_info_card:{backgroundColor:"#FFF8F2",borderRadius:(0,b.Vh)(4)},m_car_img_wrapper:{width:(0,b.Vh)(120),height:(0,b.Vh)(64),marginRight:(0,b.Vh)(8)},m_car_img:{width:(0,b.Vh)(120),height:(0,b.Vh)(64)},m_car_info_wrapper:(0,i.Z)((0,i.Z)({flex:1},b.i3),{},{width:0}),m_car_name:{fontFamily:"PingFangSC-Medium",fontSize:(0,b.Vh)(17),color:"#333"},m_car_same_level:(0,i.Z)({fontSize:(0,b.Vh)(12),color:"#333"},(0,b.dX)((0,b.Vh)(4))),m_car_extra_info:(0,i.Z)({},b._),m_prefix_text:{fontSize:(0,b.Vh)(12),color:"#333",marginRight:(0,b.Vh)(2)},m_count_text:{fontSize:(0,b.Vh)(12),color:"#333",fontWeight:"bold"},m_add_text:(0,i.Z)({fontSize:(0,b.Vh)(12),color:"#333"},(0,b.oM)((0,b.Vh)(4))),m_split_line:(0,i.Z)({fontSize:(0,b.Vh)(12),color:"#DADFE6"},(0,b.oM)((0,b.Vh)(8))),m_car_tip:{marginTop:(0,b.Vh)(4),fontSize:(0,b.Vh)(12),color:"#aaa"}}),Z=I,T=n(49214),S=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"onError",value:function(){this.setState({ready:!1})}}]),n}(T.Z),C=n(20159),P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALwAAADOBAMAAAB2jXVSAAAAHlBMVEVHcEzR0dHR0dHR0dHKysrQ0NDPz8/Q0NDQ0NDR0dFmmqz0AAAACXRSTlMA472XEXEpVkAcWA5eAAAIx0lEQVR42rVcz1/aSBSPEALHCuo2N1zbtbkh1q65EbW1R6yLLTddW5Ubtdtabmz1o8sx8BHMf7sE8mOSzLx5Mwlz6edT4OvLm/e+79dMFEVyqVff1x3H3vj5Wcl+XR5PsefL3viRNfiWE1kvTzMEf1934mv4T1bg6q3uJJf9Jht07cihLvt1FuiHhsNYdjM9+lvdYa5h6v09B9Ad5/lC0R2nmwp9n4PuPC5K7+nFLxpcdOdJ3t4R6I4tazzqkYNZVUn4axS6M5E0Ghy6Yzdk0Es6Et6RYQbVxKI7KxLwf6PRZZRf0PHww4xVU2m1IpHxNFPV7LrfuE3BC0VINa/m3/kV/k9NEL4NoI8aSqnVuiP19yxDh6q5NGpPFZSXtEyQyYbux8O++73ga2Mh+DNI+DX349fR742zY4OaajgjpVjuEtoRgu/B7F5wdd1x9a3pEgGxwPFQy93dzkxiX/n2dqvVuk9vlK6g04frK3uzIBL9aoWVc767+t5qfbxv8IWf0pfpErx600iq0f6LRi+X9eX5x+WdO57w08BthvFjwM/ZImm7vfGNmxcYIYUNklYbE/2DAPH60gcUNuBQc2nLEVyzra0yrSDCnSVDFH3qUZ0wPJlgUqKZwujTbc0HmZOaVCzpv0eOxGq6vvobywEnUsE6kha41r75+eDO9V92vlzUpeBH8x8uL3cpqifg247c6irn7j9vqP49wTEXXC98qW+c0Jl1nFZ4P5bQI2Y1rfA+cx3qUKnSc1Lg/3l/9U2H8jVNdxaxfErLLQTd7megG34NrS5EN0E0KWQCZ7D6F9mo/scWo7vTyUbV6nWoZPskkSmVf19Phd9VDuu6lwWQUXymtcqPBqOLhWbPacrw7uHm5udFtPZ0H2Zz/l/nacRfpZe0ujM8Sc9trgaoZdUtoap8Olvf5TRk07rYKqfmN1Ohc5uxafinfMLNuAcpiL+RshoB9XKXvl5IoxclUj8K6WUT2STSpMz9BFuq5TNzVuqSIGesYqS8yt4VaSAIy/6HSA0urHqx1paw6sVa3sJOJdT3E6djIenFMx4h+Nxi4cXZWEj35kLhJQKtyDCjKE4440X6rFjT0hKHFxmVSMTZ2kINR2SUIZOhCTTrSxIxfKGM44wWyjhCXsW3y+FOXd4uuYQ2Oo1MMQRnYLxQNRsDRMxLaILHyf+8QtiUpWMdlXIMJFWv4eJSh5wOZEbHQfukI6mbAi4b68jZDcz2w0bSfEVcluO0Lyjm+0II3kIJH5rvUGxs3UEJX5IUHuIEQtCcpPBQKFyjMIfoYZ82MFwLfU+XMhsw0k6S+293s4MP0wHVkKl5YMIkNtF3vVUlO/i1xBNWGhnCN+O0VDlVsoMfxjzPfilzyoSZRBFJ8P7y8mxSyV6Xx9ufGkLBiqRd9QAW8QNTdyzpRcL1EWBXeuribB/Im1nS4wuEwOeojKGzOs8S8aiJNUwB1bfBkstIqXpyfjTEwuNVH0kF+kjGJIygIRCra0h4ojleFYh2K7hoRShxUBOIF084eGJnjT4entLZHMBcX+SZqAF3Njtw1b00QhM6dUZgwXTZm2Dh6Qd6l2DDMcZYp22iU1ibKC54DtYj0xb16r/P/AR8RIRZXqXTITjw7XoiaBZBu1ziFgtW+BPvyO8qr7YaE7J1cXxcJY6yveDEkxVi405RlObmo/9S2dyAzN7gEn/B3y2CmaswK9TCR+P2Vgq+Oi16tBgAXlXit9KLvrwmvfK1APgCP6Eveb/QGEkSxa/64b4h4ftR/1kB6+Z++KcfUfBTA1hi8L4GUI6FhY8x7yOY6QTwZ/wGQsmLbj1Ws81kJzkdPnzRg+uxRjdJyyQ6CWj4NgveYkvf48MXaPA22HI5DT2aC5/3trLHgi9B8FzLydF0b4N5oAi85UnPVE6S1PrhJ1yv7dDgh2Cy0A3huZTW8+BNJnyeSWkIeJMLrzH5vs2tI+bBbhLbwBGYJVeJJz/FEOY4FlNHYJ75jPigiQm1KzENPIKp1JgwixomD6nF8pkncL7xFDIm79h+zzO1PDQ2MxhplMUdsBkeSeWg0mzAKE5yvBqx6O9kBxpP5BmUmedN3XO+MnvQ2ExjsEKR105v+8IaYE1v0v1K4zS8PWvvxuRLiGQxDF+HZw15f6vy8DGGIsMyTXhI1fO/bXFaBga9fuiBe+tdwKjFOT0p0RnddCxqoyCqUvcigc4ZmxXojJ+DBj1eo2iS+DW3r1Ml9oQZzfcCMzvjzlvPqKThPjWL8j3h3WawwT3/UqTvrckeXf8d8EsRcYrBpD7fgDk/9U6/uy50hhiI7lH9NsdqrPlXrdbIXiBQn0cPVY9JndHEuQ79P49q89FzXIPeoDwnBgZt1AGSAtXye9TH9S/RuSdhC8gzEiYt4OQoJKJ9IIe5bVaOBzVHRpE4TNqm+iU4WvyGkmCP+N1gUgjTV4Ki3V9cXD2E7wyYXwc02UMRuqNEtWMFWxi7vjM/WbeHP+ARsc1hxJ1nEyuNxJ/f3EpcioNi8xlNDDOwEUW99TRjb8yHGcl7oCvIfnNgvxY5XFAvj7e3dz76La2v7JKb1xH25+R+DreZ/PovwdZ55HLkWqx6iR/BVK+FDwbtUfKJgFMqkemStgVOAum2b1LEN8NDx0EgUm8NcD6t8JnHF3+PPO3y8+Lg4N3V8brkTIQ0hue0QGwvL+vc4To7eSGw/PEv8ogQapC+T7Ez3Okv3CkA8v7ba2bLSvrIFGn8vm99RZz3auLgI+9/eGwk/Y2+XqGHUb+Sv+K+m2AkPiMNQhKVX6KqwU8Zo87rXZmF3wsh+K6ViPXP8cH7mqInGMgXcHgXkYDbpq8UJQW+x8XMu7K7ipIOf87F9LfcSL5DJyLsnItpt5uk3wAUFdbece9tl+qxPzDsKtIrdlOxvLFz8xC9Ci11tCNYh/BdMtSdGdDBvgGHBisZvHjpPetiePlTQ8livadEVruSEfjMhh7q68Qz2OWdeyXbpV48HM8crbyDeBvY/4UjXDmIhvMrAAAAAElFTkSuQmCC",N=n(2269),D=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,c.Z)(i),"state",void 0),i.state={ready:!0},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.width,o=e.height,r=e.classWrap,a=e.radius,s=e.style,c=e.fstyle,u=void 0===c?{}:c,d=e.isDynamicHeight,p=e.mode,f=e.showDefaultImg,h=void 0!==f&&f,m=e.resizeMode,_=e.headerImg,v=void 0!==_&&_,g=e.defaultImgStyle,y=e.showHeaderDefaultImg,x=void 0===y||y,b=e.onLoad,k=void 0===b?function(){}:b,w=e.hideOnError,I=void 0!==w&&w,Z=this.state.ready||!h?t:P;return(0,N.jsx)(l.G7,{className:r,style:s,children:v?x?(0,N.jsx)(l.Zy,{url:Z!==P?P:"",imageStyle:{top:"50%",left:"50%",transform:[{translateX:-n/10},{translateY:-n/5/188*103}],backgroundPosition:"center",width:n/5,height:n/5/188*206},style:(0,i.Z)({width:n,height:o,backgroundRepeat:"no-repeat",backgroundSize:"".concat(n/5).concat("number"==typeof n?"px":""," ").concat(n/5/188*206).concat("number"==typeof o?"px":"")},g||{}),children:(0,N.jsx)(l.Ee,{url:Z,style:(0,C.kg)((0,i.Z)({width:n,height:o,borderRadius:a},u)),webp:!0,isDynamicHeight:d,showDefaultImg:h,onError:this.onError.bind(this),resizeMode:m})}):(0,N.jsx)(l.Ee,{url:t,style:(0,C.kg)((0,i.Z)({width:n,height:o,borderRadius:a},u)),webp:!0,isDynamicHeight:d,showDefaultImg:!1,onError:this.onError.bind(this),resizeMode:m}):(0,N.jsx)(l.Ee,{url:Z,style:(0,C.kg)((0,i.Z)({width:I&&!this.state.ready?10:n,height:I&&!this.state.ready?10:o,borderRadius:a},u)),mode:p||"aspectFit",webp:!0,isDynamicHeight:d,showDefaultImg:h,onError:this.onError.bind(this),resizeMode:m,onLoad:k})})}}]),n}(S),j=function(e){return e[e["small"]=0]="small",e[e["normal"]=1]="normal",e[e["selected"]=2]="selected",e}(j||{}),R=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.type,i=e.carInfo,o=n===j.small,r=n===j.selected,a=i||{},s=a.carImg,c=void 0===s?"":s,u=a.carName,d=void 0===u?"":u,p=a.canChangeLuggage,f=a.luggageNum,h=void 0===f?0:f,m=a.passengerNum,_=void 0===m?0:m,v=a.sameLevelCars,y=void 0===v?[]:v;return(0,N.jsxs)(l.G7,{style:(0,b.wh)([Z.m_car_info_card,o?Z.m_small_car_info_card:{},r?Z.m_selected_car_info_card:{},t||{}]),children:[(0,N.jsx)(l.G7,{style:(0,b.wh)([Z.m_car_img_wrapper]),children:(0,N.jsx)(D,{url:c,width:Z.m_car_img.width,height:Z.m_car_img.height})}),(0,N.jsxs)(l.G7,{style:Z.m_car_info_wrapper,children:[(0,N.jsx)(l.xv,{style:Z.m_car_name,children:d}),y.length>0&&(0,N.jsx)(l.xv,{style:(0,b.wh)([Z.m_car_same_level]),numberOfLines:1,children:"".concat(y[0],"\u7b49\u540c\u7ea7\u8f66")}),(0,N.jsxs)(l.G7,{style:(0,b.wh)([Z.m_car_extra_info]),children:[!o&&(0,N.jsx)(l.xv,{style:Z.m_prefix_text,children:"\u6700\u591a\u53ef\u4e58\u5750"}),(0,N.jsx)(g.Z,{type:"pepoplenum",size:24,color:"#333"}),(0,N.jsx)(l.xv,{style:(0,b.wh)([Z.m_count_text]),children:"x".concat(_)}),(0,N.jsx)(l.xv,{style:Z.m_add_text,children:"+"}),(0,N.jsx)(g.Z,{type:"luggage",size:24,color:"#333"}),(0,N.jsx)(l.xv,{style:(0,b.wh)([Z.m_count_text]),children:"x".concat(h)})]}),!o&&(!h||p)&&(0,N.jsx)(l.xv,{style:Z.m_car_tip,children:"".concat(h?"":"\u4e0d\u53ef\u643a\u5e2624\u5bf8\u53ca\u4ee5\u4e0a\u884c\u674e").concat(!h&&p?"\u3002":"").concat(p?"\u6bcf\u51cf\u5c111\u4f4d\u4e58\u5ba2\uff0c\u53ef\u589e\u52a01\u4e2a24\u5bf8\u884c\u674e":"")})]})]})}}]),n}(k),L=n(36556),E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.titleText,o=t.dataList,r=t.url,a=t.selectPropertyId,s=t.grayPropertys,c=t.propertyClickLog,u=t.grayClickToast,d=t.selectStyle,p=t.isAct,f=t.traceData,h=t.fstyle,_=void 0===h?{}:h,k=t.ceilfstyle,w=void 0===k?{}:k,I=t.parentId,Z=t.thinTitle,T=t.smallTitle,S=t.isPack3MultiSale,C=t.isPack3SingleSale,P=t.isPack3DiffDate,D=t.isPack3SameDateValid,E=t.ticketName,V=t.notFirst,A=t.isNewGuideSku,O=t.carModeExpoLog,F=t.CarItems,M=this.state,B=M.showPhoto,U=M.configs,G=(0,b.Ec)(y.ZP,_),H=o&&o.length?o.map((function(t,i){var o=s[t.salesPropertyValueId],r=a==t.salesPropertyValueId;return t.hide?null:(0,N.jsx)(v.Z,{id:t.salesPropertyValueId,isSelect:r,isGray:o,style:(0,b.wh)([G.m_ceil_props,p?{marginRight:(0,b.Vh)(12)}:{},A?{marginRight:(0,b.Vh)(8),marginBottom:(0,b.Vh)(8)}:{}]),hideSelectIcon:!u,isAct:p,fstyle:w,children:(0,N.jsx)(x.Z,{style:G.m_ceil_child,onClick:e.selectCeil.bind(e,t,i),log:c&&c({selectPropertyId:a,optionid:t.salesPropertyValueId,pos:i+1,parentId:I}),devTraceData:f&&f(t.salesPropertyValueName,n),children:(0,N.jsx)(l.xv,{style:(0,b.wh)([G.m_ceil_child_text,o?G.gray:{color:"rgb(17,17,17)"},r?d||G.active:{}]),children:t.salesPropertyValueName})})},t.salesPropertyValueId)})):null,z=o.find((function(e){return a==e.salesPropertyValueId}));return(0,N.jsxs)(l.G7,{style:(0,b.wh)([G.m_tab_ceil,S?G.m_tab_ceil_pack3:null,P?G.m_tab_ceil_pack3_diff_date:null,D?G.m_tab_ceil_pack3_same_date_valid:null,A?G.m_tab_ceil_guide:null]),children:[!!n&&(0,N.jsxs)(l.G7,{style:(0,b.wh)([G.m_tab_title,S?G.m_tab_title_pack3_multi:{},C?G.m_tab_title_pack3_single:{},P?G.m_tab_title_pack3_diff_date:{},D?G.m_tab_title_pack3_same_date_valid:{},V?G.m_tab_title_pack3_not_first:{},A?G.m_tab_title_guide:{}]),children:[(0,N.jsx)(l.xv,{style:(0,b.wh)([G.m_tab_title_text,Z?G.m_text_thin:{},T?G.m_text_small:{}]),children:E?"".concat(E,"\xb7").concat(n):n}),r&&r.length>0?(0,N.jsx)(x.Z,{style:G.m_icon_center,onClick:this.handleClickPhoto.bind(this,r),children:(0,N.jsx)(g.Z,{type:"help",color:"#333333",className:"m_title_icon",size:32})}):null]}),(0,N.jsx)(l.G7,{style:G.m_tab,testID:this.isNewCarItems?O&&(0,L.kI)(O.key,O.params):void 0,children:this.isNewCarItems?!!F&&(0,N.jsx)(F,(0,i.Z)((0,i.Z)({},this.props),{},{selectCeil:this.selectCeil.bind(this)})):H}),!(null===z||void 0===z||!z.carInfo)&&!A&&(0,N.jsxs)(l.G7,{style:G.m_option_part_car,children:[(0,N.jsx)(l.G7,{children:(0,N.jsx)(l.xv,{style:G.m_car_card_select,children:"\u5df2\u9009\u8f66\u578b"})}),(0,N.jsx)(R,{carInfo:z.carInfo,type:j.selected})]}),B?m.renderPhotoBrowser(U):null]})}}]),n}(_),V={m_tab_sale:{paddingBottom:(0,b.Vh)(40)},m_tab_sale_pack3_multi:{paddingBottom:(0,b.Vh)(20)},m_tab_sale_pack3_single:{paddingBottom:0},m_tab_sale_pack3_diff_date:{paddingBottom:(0,b.Vh)(20)},m_tab_sale_pack3_same_date_valid:{paddingBottom:(0,b.Vh)(20)}},A=(0,w.Z)(V),O=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e,t,n,o=this,r=this.props,a=r.saleProperties,s=r.grayPropertys,c=r.selectPropertyIds,u=r.propertyClickLog,d=r.grayClickToast,p=void 0===d||d,f=r.selectStyle,h=r.setRef,m=r.style,_=r.isAct,v=r.promotionInfo,g=r.promotionClickLog,y=r.traceData,x=r.ceilfstyle,k=r.thinTitle,w=r.smallTitle,I=r.isPack3MultiSale,Z=r.isPack3SingleSale,T=r.isPack3DiffDate,S=r.isPack3SameDateValid,C=r.saleExposureLog,P=r.ticketName,D=r.PackageDescription,j=r.PromotionTip,R=r.isNewGuideSku,L=r.isCarExpanded,V=r.showAllCarItems,O=r.carModeExpoLog,F=r.moreCarExpoLog,M=r.moreCarClickLog,B=r.carModeCarCardSlideClickLog,U=r.CarItems,G=this.state.packageIntroduction,H=a.map((function(e,t){return e.hide?null:(0,N.jsx)(l.G7,{activeOpacity:1,ref:function(e){return h&&h("sale_property_".concat(t),e)},collapsable:!1,children:(0,N.jsx)(E,{thinTitle:k,smallTitle:w,isPack3MultiSale:I,isPack3SingleSale:Z,isPack3DiffDate:T,isPack3SameDateValid:S,parentId:e.salesPropertyId,titleText:e.salesPropertyName,dataList:e.salesPropertyValues,grayPropertys:s,grayClickToast:p,selectStyle:f,url:e.salesPropertyImgUrls,selectPropertyId:c[t],propertyClickLog:u,onClick:o.onClick.bind(o,t),isAct:_,traceData:y,ceilfstyle:x,ticketName:P,notFirst:t>0&&(T||S),isNewGuideSku:R,isCarExpanded:L,showAllCarItems:V,carModeExpoLog:O,moreCarExpoLog:F,moreCarClickLog:M,carModeCarCardSlideClickLog:B,CarItems:U},e.salesPropertyName)})})),z=null!==v&&void 0!==v&&null!==(e=v.labels)&&void 0!==e&&e[0]?"\u53ef\u4eab".concat(null===v||void 0===v||null===(t=v.labels)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.text,"\u7b49\u4f18\u60e0\u4fc3\u9500\uff08\u5171").concat(null===v||void 0===v||null===(n=v.labels)||void 0===n?void 0:n.length,"\u4e2a\uff09"):"";return(0,N.jsxs)(l.G7,{testID:C,children:[!!z&&j&&(0,N.jsx)(j,(0,i.Z)((0,i.Z)({tip:z},(null===v||void 0===v?void 0:v.layerData)||{}),{},{clickLog:g})),(0,N.jsx)(l.G7,{style:(0,b.wh)([A.m_tab_sale,m,I?A.m_tab_sale_pack3_multi:null,Z?A.m_tab_sale_pack3_single:null,T?A.m_tab_sale_pack3_diff_date:null,S?A.m_tab_sale_pack3_same_date_valid:null]),children:H}),!!G&&D&&(0,N.jsx)(D,{description:G})]})}}]),n}(p)},22751:function(e,t,n){"use strict";n.d(t,{BH:function(){return a},aO:function(){return s}});var i=n(298),o=n(77395),r=n(23347),a={m_ceil_props:{fontSize:(0,o.Vh)(14),marginRight:(0,o.Vh)(8),marginBottom:(0,o.Vh)(10)},m_ceil_child:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",padding:(0,o.Vh)(10.5),paddingLeft:(0,o.Vh)(12),paddingRight:(0,o.Vh)(12)},gray:{color:"rgb(197,197,197)"},m_ceil_child_text:{fontSize:(0,o.Vh)(13),lineHeight:(0,o.Nv)((0,o.Vh)(17))},active:{color:"#111"}},s={m_tab_ceil:{paddingLeft:(0,o.Vh)(16),paddingRight:(0,o.Vh)(16),paddingBottom:(0,o.Vh)(12)},m_tab_ceil_pack3:{paddingBottom:0},m_tab_ceil_pack3_diff_date:{paddingBottom:0},m_tab_ceil_pack3_same_date_valid:{paddingBottom:0},m_tab_ceil_guide:{paddingBottom:0},m_tab_title:(0,i.Z)({display:"flex",flexDirection:"row",justifyContent:"flex-start",paddingTop:(0,o.Vh)(16),paddingBottom:(0,o.Vh)(16),alignItems:"center"},(0,o.ix)("border-box")),m_tab_title_pack3_multi:{paddingTop:(0,o.Vh)(20),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_single:{paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_diff_date:{paddingTop:(0,o.Vh)(8),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_same_date_valid:{paddingTop:(0,o.Vh)(8),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_not_first:{paddingTop:(0,o.Vh)(20)},m_tab_title_guide:{paddingBottom:(0,o.Vh)(12)},m_icon_center:{marginLeft:(0,o.Vh)(5),display:"flex",alignItems:"center",justifyContent:"center"},m_tab_title_text:{color:"#111",fontSize:(0,o.Vh)(17),fontWeight:(0,o.Ue)("500"),lineHeight:(0,o.Nv)((0,o.Vh)(21))},m_title_icon:{marginLeft:(0,o.Vh)(5)},m_tab:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginBottom:(0,o.Vh)(-10)},m_saleproperty_item:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:(0,o.Vh)(15),paddingRight:(0,o.Vh)(15)}},l=(0,i.Z)((0,i.Z)((0,i.Z)({},s),{},{m_option_part_car:{marginTop:16},m_car_card_select:{color:"#999",fontSize:14,lineHeight:(0,o.Nv)(18),marginBottom:8}},a),{},{m_text_thin:{fontSize:(0,o.Vh)(15)},m_text_small:{fontSize:(0,o.Vh)(15),fontWeight:(0,o.Ue)("500"),lineHeight:(0,o.Nv)((0,o.Vh)(19))}});t["ZP"]=(0,r.Z)(l)},14792:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(59438),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(l.ZP),u=n(298),d=n(23347),p=n(77395),f=n(77942),h={m_sku_header:{paddingLeft:(0,p.Vh)(16),paddingRight:(0,p.Vh)(16),paddingTop:(0,p.Vh)(18),paddingBottom:(0,p.Vh)(12)},m_header_title:{display:"flex",flexDirection:"row",justifyContent:"space-between"},m_sku_header_hide:{paddingTop:(0,p.Vh)(0),paddingBottom:(0,p.Vh)(0)},m_sku_header_text:(0,u.Z)({flex:1,color:"#111",fontFamily:"PingFangSC-Medium",fontSize:(0,p.Vh)(17),letterSpacing:(0,p.Vh)(-.28),fontWeight:"bold",lineHeight:(0,p.Nv)((0,p.Vh)(21))},(0,p.Sf)(2)),m_sku_header_text_book:{color:"rgb(17,17,17)",fontFamily:"PingFangSC-Medium",fontSize:(0,p.Vh)(17),letterSpacing:(0,p.Vh)(-.24),fontWeight:"bold",lineHeight:(0,p.Nv)((0,p.Vh)(21))},m_sku_header_icon:{width:(0,p.Vh)(22),height:(0,p.Vh)(22),marginTop:(0,p.Vh)(-8),marginLeft:(0,p.Vh)(16),alignItems:"center",justifyContent:"center"},m_sku_header_border:(0,u.Z)((0,u.Z)({},(0,p.Cg)({direction:"bottom",width:1/(0,f.md)(),style:"solid",color:"rgb(235,239,245)"})),{},{paddingBottom:(0,p.Vh)(12),paddingTop:(0,p.Vh)(16)}),m_header_people_desc:{display:"flex",flexDirection:"row",paddingTop:(0,p.Vh)(4)},m_sku_header_people_desc_text:{flex:1,fontSize:(0,p.Vh)(13),color:"#555",fontWeight:"normal",lineHeight:(0,p.Nv)((0,p.Vh)(17))}},m=(0,d.Z)(h),_=n(2823),v=n(29339),g=n(2269),y=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.ticketTitle,n=e.testID,i=e.usePage,o=e.closeClickLog,r=e.onPoplayerHide;return[_.zh.sku,_.zh.detail].includes(i)||i==_.zh.book&&t?(0,g.jsx)(s.G7,{style:(0,p.wh)([m.m_sku_header,_.zh.sku!=i||t?null:m.m_sku_header_hide,_.zh.book==i?m.m_sku_header_border:null]),children:(0,g.jsxs)(s.G7,{style:m.m_header_title,children:[t?_.zh.book!=i?(0,g.jsx)(s.xv,{style:m.m_sku_header_text,testID:n,numberOfLines:2,children:t}):(0,g.jsx)(s.xv,{style:m.m_sku_header_text_book,children:t}):(0,g.jsx)(s.xv,{style:m.m_sku_header_text}),_.zh.detail==i&&(0,g.jsx)(v.Z,{log:!!t&&o,onClick:r,style:m.m_sku_header_icon,children:(0,g.jsx)(s.JO,{type:"xclosed",color:"#111111",size:42})})]})}):null}}]),n}(c)},44895:function(e,t,n){"use strict";n.d(t,{ZU:function(){return o},NG:function(){return r}});var i={m_not_selected_text:{},otherHasTextViewCommon:{},m_month_title_text:{fontWeight:"500"}},o={m_scroll_view:{},m_selected:{},m_scrollview_wrapper:{},m_more_shadow_android:{},m_more_btn:{},m_tooltip_text:{}},r={flexLayout:{}};t["ZP"]=i},52307:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(1675),u=n(59438),d=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"textRef",void 0),o.state={width:0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.dynamicCalcWidth()}},{key:"dynamicCalcWidth",value:function(){var e=this;(0,c.L6)(this.textRef,(function(t){t&&t.width&&e.setState({width:t.width+4})}))}}]),n}(u.ZP),p=n(80692),f=n(298),h=n(23347),m=n(77395),_=n(44895),v={m_tooltip_container:(0,f.Z)({backgroundColor:"rgba(34,34,34,0.85)",borderRadius:(0,m.Vh)(4),height:(0,m.Vh)(30),top:(0,m.Vh)(-40),position:"absolute"},m._7),m_tooltip_left:{left:(0,m.Vh)(0)},m_tooltip_right:{right:(0,m.Vh)(0)},m_tooltip_text_wrapper:(0,f.Z)({},m._7),m_tooltip_text:(0,f.Z)((0,f.Z)({color:"#fff",fontSize:(0,m.Vh)(12),position:"absolute"},(0,m.WB)((0,m.Vh)(8))),_.ZU.m_tooltip_text),m_tooltip_triangle_wrapper:(0,f.Z)((0,f.Z)({height:(0,m.Vh)(8),width:"100%",position:"absolute",left:0,bottom:(0,m.Vh)(-8)},m._7),{},{overflow:"hidden"}),m_tooltip_triangle:(0,f.Z)({width:(0,m.Vh)(10),height:(0,m.Vh)(10),backgroundColor:"rgba(34,34,34,0.85)"},(0,m.pm)({translateY:(0,m.Vh)(-6),rotate:"45deg"})),m_tooltip_left_triangle_wrapper:{alignItems:"flex-start"},m_tooltip_right_triangle_wrapper:{alignItems:"flex-end"},m_tooltip_left_triangle:{alignItems:"flex-start",marginLeft:(0,m.Vh)(14)},m_tooltip_right_triangle:{alignItems:"flex-end",marginRight:(0,m.Vh)(14)}},g=(0,h.Z)(v),y=n(2269),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.text,i=t.style,o=void 0===i?{}:i,r=t.placement,a=void 0===r?"center":r,s=this.state.width,l="left"===a,c="right"===a;return(0,y.jsxs)(p.G7,{style:(0,m.wh)([g.m_tooltip_container,l?g.m_tooltip_left:{},c?g.m_tooltip_right:{},{width:s},o]),children:[(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_triangle_wrapper,l?g.m_tooltip_left_triangle_wrapper:{},c?g.m_tooltip_right_triangle_wrapper:{}]),children:(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_triangle,l?g.m_tooltip_left_triangle:{},c?g.m_tooltip_right_triangle:{}])})}),(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_text_wrapper,s?{opacity:1}:{opacity:0}]),children:(0,y.jsx)(p.xv,{className:"tooptip",ref:function(t){return e.textRef=t},style:(0,m.wh)([g.m_tooltip_text]),children:n})})]})}}]),n}(d)},83561:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(59438),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"props",void 0),(0,l.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(c.ZP),d=n(298),p=n(23347),f=n(77395),h={m_valid_component:{paddingTop:(0,f.Vh)(16),paddingRight:(0,f.Vh)(16),paddingLeft:(0,f.Vh)(16),paddingBottom:(0,f.Vh)(12)},m_valid_component_small:{paddingTop:(0,f.Vh)(20),paddingRight:(0,f.Vh)(16),paddingLeft:(0,f.Vh)(16),paddingBottom:(0,f.Vh)(12)},m_valid_component_head:{display:"flex",fontSize:(0,f.Vh)(17),fontWeight:"bold",fontFamily:"PingFangSC-Medium",lineHeight:(0,f.Nv)((0,f.Vh)(24)),color:"rgb(17,17,17)"},m_valid_component_small_head:{display:"flex",fontSize:(0,f.Vh)(15),fontWeight:(0,f.Ue)("500"),lineHeight:(0,f.Nv)((0,f.Vh)(19)),fontFamily:"PingFangSC-Medium",color:"rgb(17,17,17)"},m_valid_component_info:{display:"flex",marginTop:(0,f.Vh)(8),lineHeight:(0,f.Nv)((0,f.Vh)(19)),color:"rgb(17,17,17)",fontSize:(0,f.Vh)(15),fontWeight:"normal",fontFamily:"PingFangSC-Regular"},m_textcollapse:{marginTop:(0,f.Vh)(4)},m_textcollapse_content_text:{color:"rgb(17,17,17)",fontSize:(0,f.Vh)(15)},m_more_btn:(0,d.Z)((0,d.Z)({},f._),{},{paddingRight:(0,f.Vh)(4),paddingLeft:(0,f.Vh)(12),height:(0,f.Vh)(16),justifyContent:"flex-end"})},m=(0,p.Z)(h),_=n(80692),v=n(88578),g=n(2269),y=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.validDesc,n=e.disabledDateDesc,i=e.logs,o=void 0===i?{}:i,r=e.fstyle,a=(e.textHeight,e.ticketName),s=e.smallTitle,l=o.validUnfoldExposureLog,c=o.validUnfoldClickLog,u=o.validCollapseExposureLog,d=o.validCollapseClickLog,p=(0,f.Ec)(m,r);return(0,g.jsxs)(_.G7,{style:s?p.m_valid_component_small:p.m_valid_component,children:[(0,g.jsx)(_.G7,{children:(0,g.jsx)(_.xv,{style:s?p.m_valid_component_small_head:p.m_valid_component_head,children:a?"".concat(a,"\xb7\u4f7f\u7528\u6709\u6548\u671f"):"\u4f7f\u7528\u6709\u6548\u671f"})}),(0,g.jsx)(_.G7,{children:(0,g.jsx)(_.xv,{style:p.m_valid_component_info,children:t})}),!!n&&(0,g.jsx)(v.Z,{message:n,lineHeight:19,lineNum:2,prefix:".m_sku",logs:{prefixTest:"m_valid_component",clickUpExposureLog:u,clickDownExposureLog:l,clickUpLog:d,clickDownLog:c},fstyle:p,renderMoreButton:function(e){return(0,g.jsx)(_.o,{direction:90,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},style:m.m_more_btn,children:(0,g.jsx)(_.JO,{type:e?"arrowdown":"arrowup",size:(0,f.Vh)(24),color:"#111"})})}})]})}}]),n}(u)},21923:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(59438),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"props",void 0),(0,l.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(c.ZP),d=n(80692),p=n(298),f=n(23347),h=n(77395),m={m_sku_warn:(0,p.Z)({display:"flex",backgroundColor:"rgb(255,250,245)",paddingRight:(0,h.Vh)(16),paddingLeft:(0,h.Vh)(16),paddingTop:(0,h.Vh)(12),paddingBottom:(0,h.Vh)(12),flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},(0,h.ix)("border-box")),m_sku_warn_text:{color:"rgb(255,119,0)",fontSize:(0,h.Vh)(12),lineHeight:(0,h.Nv)((0,h.Vh)(17))},m_sku_warn_padding:{paddingBottom:(0,h.Vh)(8)}},_=(0,f.Z)(m),v=n(2269),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.priceInfo,i=e.hasPromotion,o=e.isDateShowPrice,r=e.showCalendar,a=e.priceMode,s=e.hasReservation,l=!!n&&i&&o,c="S"===a&&r&&(l||s);return(0,v.jsx)(v.Fragment,{children:t?(0,v.jsx)(d.G7,{style:(0,h.wh)([_.m_sku_warn,c?_.m_sku_warn_padding:{}]),children:(0,v.jsx)(d.xv,{style:_.m_sku_warn_text,children:t})}):null})}}]),n}(u)},1703:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(80692)),l=n(59438),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(l.ZP),u=n(23347),d=n(77942),p=n(77395),f={m_note_wrapper:{paddingTop:9,paddingRight:16,paddingLeft:16,backgroundColor:"#FFFFFF"},m_note_content:{marginBottom:11,display:"flex",flexDirection:"row"},m_note_dot_content:{backgroundColor:"#666666",borderRadius:4,width:4,height:4,marginRight:8,marginTop:7},m_note_text:{fontSize:14,color:"#333333",lineHeight:(0,p.Nv)(18)},m_note_text_isdot:{maxWidth:d.Db.get("window").width-44}},h=(0,u.Z)(f),m=n(2269),_=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return(0,m.jsx)(s.G7,{style:h.m_note_wrapper,children:!!t.length&&t.map((function(e,t){return(0,m.jsxs)(s.G7,{style:h.m_note_content,children:["dotted"===e.type&&(0,m.jsx)(s.G7,{style:h.m_note_dot_content}),(0,m.jsx)(s.xv,{style:(0,p.wh)([h.m_note_text,"dotted"===e.type?h.m_note_text_isdot:{}]),children:e.text})]},"note".concat(t))}))})}}]),n}(c)},64980:function(e,t,n){"use strict";n.d(t,{o:function(){return i},m:function(){return o}});var i=n(55316),o={TITLE:"key.couponcenter.receivedetailspage.title",USECODELIST_TITLE:"key.couponcenter.usecodelist.title",PROMOTIONCODE_PLACEHOLDER:"key.couponcenter.usecodelist.promocode_placeholder",USECODELIST_USE:"key.couponcenter.usecodelist.use",VALIDATY_TIMEZONE:"key.couponcenter.common.validitytimezone",AVAILABLECODES_TITLE:"key.couponcenter.usecodelist.availablecodes_title",DONOTUSECODE:"key.couponcenter.usecodelist.donotusecode",AVAILABLE_CURRENCY_AMOUNT:"key.couponcenter.usecodelist.availablecurrencyamount",UNAVAILABLE_REASON:"key.couponcenter.usecodelist.unavailablereason",USECODELIST_NOCODE:"key.couponcenter.usecodelist.nocode",POPUP_CLAIM:"key.couponcenter.popup.claimall",RECEIVESTATUS_RECEIVED:"key.couponcenter.common.receivestatus_received",POPUP_CLAIMED:"key.couponcenter.popup.claimed",POP_TOUSE:"key.couponcenter.popup.touse",TERMS_CONDITIONS:"key.couponcenter.common.termsandconditions",COMMON_DETAILS:"key.couponcenter.common.details",CURRENCYAMOUNT_TIERS:"key.couponcenter.common.currencyamount_tiers",PERCENTAGE_TIERS:"key.couponcenter.common.percentage_tiers",POPUP_OUTOFSTOCK:"key.couponcenter.popup.outofstock",NEWUSER_ONLY:"key.couponcenter.common.receivestatus_newuseronly",CURRENCYAMOUNT_OFF:"key.couponcenter.common.currencyamount_off",FAILURE_NOTICE:"key.couponcenter.popup.failurenotice",SUCCESS_NOTICE:"key.couponcenter.popup.successnotice",PROMOTIONCODE:"key.couponcenter.common.promocode",VALIDITY:"key.couponcenter.common.validity",RECEIVE:"key.couponcenter.common.receive",USECODES_PROMPT:"key.couponcenter.receivedetailspage.usablecodes_prompt",RECEIVABLECODES_TITLE:"key.couponcenter.receivedetailspage.receivablecodes_title",USEABLECODES_TITLE:"key.couponcenter.receivedetailspage.usablecodes_title",USEABLECODES_SUBTITLES:"key.couponcenter.receivedetailspage.usablecodes_subtitle",CANNOT_RECEIVE:"key.couponcenter.common.receivestatus_cannotreceive",NULL_ERROR:"key.couponcenter.popup.failurenotice.nullerror",CROSS_TITLE:"key.couponcenter.crosscouponlist.title",CROSS_BEFOREBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.beforebooking.subtitle",CROSS_AFTERBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.afterbooking.subtitle",CROSS_DETAIL:"key.couponcenter.crosscouponlist.promodetail",CROSS_VALIDPERIOD_TIITLE:"key.couponcenter.crosscouponlist.promovalidperiod.titile",CROSS_USEDETAIL:"key.couponcenter.crosscouponlist.promousedetail",CROSS_BULINE_USER_PROMO:"key.couponcenter.crosscouponlist.businesslineuserpromo",CROSS_BULINE_USER:"key.couponcenter.crosscouponlist.businesslineuser",DETAILS_REALNAME_CONFIRM:"key.couponcenter.receivedetailspage.realnameconfirm",DETAILS_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",DETAILS_REALNAME_CONFIRM_AUTH:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",DETAILS_REALNAME_CLAIM_FAIL:"key.couponcenter.receivedetailspage.claimfailure.realname",POPUP_REALNAME_CONFIRM:"key.couponcenter.receivepopup.realnameconfirm",POPUP_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivepopup.realnameconfirm.giveup"}},55316:function(e,t,n){"use strict";n.d(t,{o7:function(){return r},mE:function(){return a},MY:function(){return s},sH:function(){return l},CE:function(){return c},rG:function(){return u},NG:function(){return d},k5:function(){return p},bl:function(){return f},dW:function(){return h},Rr:function(){return m}});var i=n(45023),o=n(32629),r=1,a=1e4,s=5e3,l=(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},o.m5.TICKET,"tkt"),o.m5.THINGS_TODO,"act"),o.m5.TOUR,"grp"),o.m5.CRUISE,"cru"),c={ORDER_USE_COUPON:{id:1,name:"order_usecodelist"},RECEIVEDETAIL:{id:2,name:"detail_claimcoupon"},POPCOUPON:{id:3,name:"popup"},SHOP_COUPON:{id:4,name:"storedetailreceive"},CROSS_COUPON:{id:5,name:"crocsscouponlist"}},u={AUTH_FAILURE:4001,REALNAME_FAILURE:7027},d={EXPOSURE:"vac_couponlist_exposure",CLICK:"vac_couponlist_click",POPUP_EXPOSURE:"vac_couponpopup_exposure",POP_CLICK:"vac_couponpopup_click",CROSS_BEFOREBOOKING_EXPOSURE:"vac_crocsscouponlist_beforebooking_exposure",CROSS_BEFOREBOOKING_CLICK:"vac_crocsscouponlist_beforebooking_click",CROSS_AFTERBOOKING_EXPOSURE:"vac_crocsscouponlist_afterbooking_exposure",CROSS_AFTERBOOKING_CLICK:"vac_crocsscouponlist_afterbooking_click",CROSS_ONLOAD:"ttd_marketing_crosscoupon_onload",CLAIMCOUPON_INVOKE_SHOW:"ttd_marketing_claimcoupon_invokeshow",CLAIMCOUPON_INVOKE_HIDE:"ttd_marketing_claimcoupon_invokehide",CLAIMCOUPON_CLOSE:"ttd_marketing_claimcoupon_close",USECOUPON_LOAD:"ttd_marketing_usecoupon_load",USECOUPON_CLOSE:"ttd_marketing_usecoupon_close",USECOUPON_INVOKE_SHOW:"ttd_marketing_usecoupon_invokeshow",USECOUPON_INVOKE_HIDE:"ttd_marketing_usecoupon_invokehide",USECOUPON_ONSELECT:"ttd_marketing_usecoupon_onselect",USECOUPN_BESTSELECT_VALIDATEFAIL:"ttd_marketing_usecoupon_bestselect_validate_fail",POPUP_LOAD:"ttd_marketing_popcoupon_load",JSERROR:"ttd_marketing_jserror",POST_EXCEPTION:"ttdmkt_post_expection",BFF_EXTENSION:"ttd_marketing_bffextensions",DHT_KEY:"o_tour_marketing_coupon",REALNAME_DETAIL_EXPO:"ctrip_realname_detailpage_expo",REALNAME_DETAIL_REFUSE_CLICK:"ctrip_realname_detailpagerefuse_click",REALNAME_DETAIL_VERIFY_CLICK:"ctrip_realname_detailpageverify_click",REALNAME_POPUPALL_EXPO:"ctrip_realname_popupall_expo",REALNAME_POPUPALL_REFUSE_CLICK:"ctrip_realname_popupallrefuse_click",REALNAME_POPUPALL_VERIFY_CLICK:"ctrip_realname_popupallverify_click",REALNAME_POPUPSOME_EXPO:"ctrip_realname_popupsome_expo",REALNAME_POPUPSOME_REFUSE_CLICK:"ctrip_realname_popupsomerefuse_click",REALNAME_POPUPSOME_VERIFY_CLICK:"ctrip_realname_popupsomeverify_click",O_TICKET_RENAME_AUTH_START:"ttd_marketing_rename_auth_start",O_TICKET_RENAME_AUTH_CALLBACK:"ttd_marketing_rename_auth_callback"},p="Error",f={RECEIVE_PROMOTION:"getByRelationId",PROMOTION_TAG:"getPromotionTag",SHARK:"getShark",CLAIM:"claimCoupon",CROSS_COUPON:"getCrossCouponList",SCENE_CONFIG:"getSceneConfig",POP_COUPON:"getByScenesCode",SHOP_COUPON:"getShopCouponList",USE_COUPON:"getUseCouponList",VALIDATE:"validateCoupon",SERVER_TIME:"getServeTime"},h={fat:"https://secure.fat18.qa.nt.ctripcorp.com",prod:"https://secure.ctrip.com"},m="/webapp/paywallet/realname"},32629:function(e,t,n){"use strict";n.d(t,{Lm:function(){return o},AH:function(){return r},vw:function(){return a},Yw:function(){return s},_1:function(){return l},Gi:function(){return c},m5:function(){return u},Y8:function(){return d},zr:function(){return p},Dc:function(){return f},nS:function(){return h},NT:function(){return i.NT},Qo:function(){return i.Qo},De:function(){return i.De},K7:function(){return i.K7},so:function(){return i.so},GD:function(){return i.GD}});var i=n(93398),o=function(e){return e[e["H5"]=1]="H5",e[e["PC"]=2]="PC",e[e["RN"]=3]="RN",e[e["MiniProgram"]=4]="MiniProgram",e[e["Taro"]=5]="Taro",e}({}),r=function(e){return e[e["PC"]=0]="PC",e[e["NATIVE"]=1]="NATIVE",e[e["H5"]=2]="H5",e[e["MiniProgram"]=3]="MiniProgram",e}({}),a=function(e){return e["Fat"]="fat",e["Uat"]="uat",e["Prod"]="prod",e}({}),s=function(e){return e[e["CTRIP"]=0]="CTRIP",e[e["TRIP"]=1]="TRIP",e}({}),l=function(e){return e[e["Ctrip_Online"]=2]="Ctrip_Online",e[e["Ctrip_App"]=5]="Ctrip_App",e[e["Ctrip_H5"]=7]="Ctrip_H5",e[e["Ctrip_Mina"]=21]="Ctrip_Mina",e[e["Trip_Online"]=24]="Trip_Online",e[e["Trip_App"]=25]="Trip_App",e[e["Trip_H5"]=26]="Trip_H5",e[e["Offline"]=3]="Offline",e[e["CompanyShop"]=110]="CompanyShop",e[e["BestonShop"]=111]="BestonShop",e[e["QunarShop"]=112]="QunarShop",e[e["LvJing"]=113]="LvJing",e}({}),c=function(e){return e[e["Ctrip_Online"]=114]="Ctrip_Online",e[e["Ctrip_App"]=115]="Ctrip_App",e[e["Ctrip_H5"]=116]="Ctrip_H5",e[e["Ctrip_Mina"]=117]="Ctrip_Mina",e[e["Trip_Online"]=118]="Trip_Online",e[e["Trip_App"]=119]="Trip_App",e[e["Trip_H5"]=120]="Trip_H5",e[e["Offline"]=121]="Offline",e[e["CompanyShop"]=502]="CompanyShop",e[e["BestonShop"]=503]="BestonShop",e[e["QunarShop"]=504]="QunarShop",e[e["LvJing"]=505]="LvJing",e[e["TencentTravel"]=23173]="TencentTravel",e}({}),u=function(e){return e["TICKET"]="TICKET",e["THINGS_TODO"]="THINGS_TODO",e["TOUR"]="TOUR",e["CRUISE"]="CRUISE",e["CUS"]="CUS",e["VISA"]="VISA",e}({}),d=function(e){return e["MINI_WECHAT"]="MINI_WECHAT",e["ALI_PAY"]="ALI_PAY",e["BYTE_DANCE"]="BYTE_DANCE",e["BAIDU"]="BAIDU",e["QQ"]="QQ",e}({}),p=function(e){return e[e["MINI"]=0]="MINI",e[e["APP"]=1]="APP",e[e["H5"]=2]="H5",e}({}),f=function(e){return e["WECHAT_PAGE_SOURCE"]="ctripwechatmini_ticketpromotion_realname",e["OTHER_PAGE_SOURCE"]="ctrip_ticketpromotion_realname",e}({}),h="/pages/wallet/setrealname/index"},93398:function(e,t,n){"use strict";n.d(t,{NT:function(){return s},Qo:function(){return i},De:function(){return l},K7:function(){return a},so:function(){return r},GD:function(){return o}});var i=function(e){return e[e["BeforeBooking"]=0]="BeforeBooking",e[e["AfterBooking"]=1]="AfterBooking",e}({}),o=function(e){return e[e["Use"]=1]="Use",e[e["NotUse"]=2]="NotUse",e[e["NotAvailable"]=3]="NotAvailable",e}({}),r=function(e){return e[e["Default"]=1]="Default",e[e["UserSelect"]=2]="UserSelect",e[e["UserInput"]=3]="UserInput",e}({}),a=function(e){return e["PRODUCTID"]="PRODUCTID",e["VENDORID"]="VENDORID",e["SCENICSPOTID"]="SCENICSPOTID",e["POIID"]="POIID",e}({}),s=function(e){return e[e["OrderUse"]=1]="OrderUse",e[e["DetailClaim"]=2]="DetailClaim",e[e["PopClaim"]=3]="PopClaim",e[e["ShopClaim"]=4]="ShopClaim",e[e["DetailClaim_Useable"]=5]="DetailClaim_Useable",e[e["Tangram"]=6]="Tangram",e[e["CrossCoupon"]=7]="CrossCoupon",e}({}),l=function(e){return e["TIMEOUT"]="TIMEOUT",e["JSERROR"]="JSERROR",e}({})},18239:function(e,t,n){"use strict";n.d(t,{AH:function(){return i.AH},Lm:function(){return i.Lm},Y8:function(){return i.Y8},zr:function(){return i.zr},Dc:function(){return i.Dc},nS:function(){return i.nS}});var i=n(32629)},42347:function(e,t,n){"use strict";n.d(t,{Ke:function(){return Z},ES:function(){return m},yo:function(){return C},Y8:function(){return g},v0:function(){return T},qL:function(){return P},So:function(){return A},tv:function(){return j},HR:function(){return E},qn:function(){return R},q6:function(){return L},H9:function(){return S},jJ:function(){return b},Sx:function(){return N},RO:function(){return V}});var i=n(79301),o=n(95308),r=n(92954),a=n.n(r),s=n(32629),l=n(18239),c=n(64980),u=n(57042),d=n(24460),p=n(45023),f=function(){function e(){(0,u.Z)(this,e)}return(0,d.Z)(e,null,[{key:"getInstance",value:function(){return null==this.singleInstance?new e:this.singleInstance}}]),e}();(0,p.Z)(f,"singleInstance",null);var h,m=f,_=n(298);try{var v=n(33675);h=v&&v.cwx}catch(e){console.log("%c ".concat(e),"color:red;")}var g,y,x=r.request,b=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t.data.head.auth=h&&h.user.auth||r.getStorageSync("auth")}catch(e){}if(h){e.next=5;break}return e.next=4,x(t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",new Promise((function(e,n){h&&h.request((0,_.Z)((0,_.Z)({},t),{success:function(t){e(t)},fail:function(e){n(e)}}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();try{var k=n(33675);g=k&&k.cwx,y=k&&k.__global}catch(e){console.log("%c ".concat(e),"color:red;")}var w=null;try{var I=n(47493);w=I.compVerison}catch(e){console.error("\u8bfb\u53d6\u7248\u672c\u53f7\u5f02\u5e38!")}var Z=w;function T(){var e="";try{e=a().getStorageSync("auth")}catch(e){}return e}function S(){var e=a().getEnv();switch(e){case r.ENV_TYPE.WEAPP:return l.Y8.MINI_WECHAT;case r.ENV_TYPE.SWAN:return l.Y8.BAIDU;case r.ENV_TYPE.TT:return l.Y8.BYTE_DANCE;case r.ENV_TYPE.ALIPAY:return l.Y8.ALI_PAY;case r.ENV_TYPE.QQ:return l.Y8.QQ;default:return l.Y8.MINI_WECHAT}}function C(e,t){if(e.length<=0||t<=0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}function P(){var e=a().getCurrentInstance(),t=s.vw.Prod;if(y){var n=y.env;n!==s.vw.Fat&&n!==s.vw.Uat||(t=n)}try{t=e.page.$taroParams.testenv||t}catch(e){}return t}function N(e,t,n){g&&g.user.login({param:{},callback:function(e){e&&"0"===e.ReturnCode?t&&t():n&&n()}})}function D(e){var t=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==t}function j(e){if(e)if(D(e)){var t={url:encodeURIComponent(e),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0,loginErrorUrl:e};g&&g.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(t)})}else g&&g.navigateTo({url:e})}function R(e){try{g&&g.sendUbtByPage.ubtTrace(e.key,e.value)}catch(e){}}function L(e){try{g&&g.sendUbtByPage.ubtDevTrace(e.key,e.value)}catch(e){}}function E(e){try{g&&g.sendUbtByPage.ubtMetric(e)}catch(e){}}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(L({key:c.o.NG.O_TICKET_RENAME_AUTH_START,value:{desc:"start_rename"}}),S()===l.Y8.MINI_WECHAT){var i={pageSource:l.Dc.WECHAT_PAGE_SOURCE,clientType:l.zr.MINI,isNavBack:!0},o=g.getCurrentPage();o&&o.navigateTo({url:l.nS,data:i,callback:function(e){L({key:c.o.NG.O_TICKET_RENAME_AUTH_CALLBACK,value:e}),null!==e&&void 0!==e&&e.realNamed?null===t||void 0===t||t():null===n||void 0===n||n()}})}else{var r="".concat(c.o.dW[e]).concat(c.o.Rr,"?sceneid=").concat(l.Dc.OTHER_PAGE_SOURCE,"&clientType=").concat(l.zr.H5),a={url:encodeURIComponent(r),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0};g&&g.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(a)})}}function A(){return O.apply(this,arguments)}function O(){return O=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a().getSystemInfo());case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}},95511:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={imageHostRegExp:null,testImageHostRegExp:null,config:[{width:640,height:0,quality:"90",limit:500},{width:640,height:0,quality:"80",limit:350},{width:460,height:0,quality:"80",limit:250},{width:320,height:0,quality:"80",limit:0}]};t["default"]=n},62462:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(95511),r="((_M)([a-zA-Z0-9]+)(_[1-9])?)?((_[RCZWDYX]_)([0-9]+)_([0-9]+))?((_R)([0-9]+))?((_Q)([0-9]+))?((_M)([a-zA-Z0-9]+)(_[1-9])?)?((_P)([a-zA-Z0-9]+))?(_D)?((\\.)(jpg|jpeg|gif|png|Jpg|JPG|webp))(_\\.webp)?(_D)?(\\?.*)?$",a=new RegExp("https?://(.+?)"+r),s=new RegExp("https?://(.+?[^/]{30})"+r),l=new RegExp("https?://((images4|youimg1|(dimg\\d{2,})).c-ctrip|(youimg1|ak-d).tripcdn|nephele.(trip|ctrip)).com"),c=new RegExp("https?://(dimg\\d{0,}).(uat|fws).qa.nt.(ctripcorp|tripqate).com"),u=function(e){var t,n,r,u=e.imageUrl,d=e.height,p=e.width,f=e.resetPng,h=e.dynamicImageType,m=void 0===h?"W":h,_=e.waterOpacity,v=void 0===_?null:_,g=e.config,y=e.imageSuffix,x=void 0===y?null:y,b=e.moreParams,k=void 0===b?null:b,w={imageUrl:u,height:d,width:p,dynamicUrl:u};if((null===u||void 0===u?void 0:u.length)<0||!d||!p)return i({success:!1,message:"imageUrl or height or width is empty"},w);var I,Z=null!==g&&void 0!==g?g:o.default;if(Z.imageHostRegExp&&(l=new RegExp(Z.imageHostRegExp)),Z.testImageHostRegExp&&(c=new RegExp(Z.testImageHostRegExp)),!l.test(u)&&!c.test(u))return i({success:!1,message:"imageUrl can not dynamic url"},w);if(I=-1!=u.indexOf("/fd/")?u.match(s):u.match(a),(null!==(t=null===I||void 0===I?void 0:I.length)&&void 0!==t?t:0)<=0)return i({success:!1,message:"imageUrl can not dynamic url"},w);var T=Z.config,S=Math.max(p,d),C=null===T||void 0===T?void 0:T.find((function(e){return e.limit<S})),P=I[1],N=v?"_"+v:null!==(n=I[10])&&void 0!==n?n:"",D=I[13],j=C.quality?"_Q"+C.quality:D||"",R=I[24],L=null!==(r=I[29])&&void 0!==r?r:"";R=f?R.replace("png","jpg"):x?"."+x:R,k&&(L=-1==(null===L||void 0===L?void 0:L.indexOf("?"))?L+"?"+k:L+"&"+k);var E="https://"+P+"_"+m+"_"+C.width+"_"+C.height+N+j+R+L;return w.success=!0,w.dynamicUrl=E,w};t["default"]=u},66865:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(62462),r=function(e,t){var n=o.default(e),r=(null===n||void 0===n?void 0:n.success)?"gs_ugc_dynamic_image_url_success":"gs_ugc_dynamic_image_url_failed";return"function"===typeof t&&t(r,i(i({},n),{ext:JSON.stringify(null===e||void 0===e?void 0:e.ext)})),n},a=function(e,t){return r(e,t)},s=function(e,t){return a(e,t)};e.exports={dyImageUrl:a,dyRNImageUrl:s}},35907:function(e,t,n){e.exports={get dynamicImageUrl(){var e=n(66865);return e&&e.__esModule?e.default:e.dyImageUrl},get dynamicRNImageUrl(){var e=n(66865);return e&&e.__esModule?e.default:e.dyRNImageUrl}}},79756:function(e,t,n){"use strict";var i=n(77986);n.o(i,"eventCenter")&&n.d(t,{eventCenter:function(){return i.eventCenter}}),n.o(i,"getCurrentInstance")&&n.d(t,{getCurrentInstance:function(){return i.getCurrentInstance}}),n.o(i,"getCurrentPages")&&n.d(t,{getCurrentPages:function(){return i.getCurrentPages}}),n.o(i,"getSystemInfoSync")&&n.d(t,{getSystemInfoSync:function(){return i.getSystemInfoSync}}),n.o(i,"showToast")&&n.d(t,{showToast:function(){return i.showToast}}),t["default"]=i},77986:function(e,t,n){var i=n(72216)["default"],o=n(92954)["default"],r=n(56884)["default"],a=i(i({},o),r);e.exports=a,e.exports["default"]=a},85187:function(e,t,n){"use strict";n.d(t,{ur:function(){return V},mO:function(){return ce},Zy:function(){return Yn},AF:function(){return yt},fG:function(){return wt},c0:function(){return o},vw:function(){return Jn},GI:function(){return r},x:function(){return Cn},vQ:function(){return ae},t_:function(){return V},rD:function(){return ce},Y:function(){return be},hQ:function(){return Yn},cn:function(){return he},OK:function(){return zn},H5:function(){return Dt},Px:function(){return s},N9:function(){return on},UJ:function(){return dt},X_:function(){return Ie},hj:function(){return i},hS:function(){return a},g:function(){return hi},En:function(){return $},iY:function(){return ge},AK:function(){return R},Y8:function(){return Pn},y0:function(){return L},Nd:function(){return s},ua:function(){return i},uM:function(){return a}});var i={};n.r(i),n.d(i,{isAlipay:function(){return Le},isAndroid:function(){return Se},isApp:function(){return Pe},isBaidu:function(){return je},isH5:function(){return Ne},isIOS:function(){return Te},isIPhoneX:function(){return Ce},isInAlipay:function(){return Ue},isInApp:function(){return Ge},isInBaidu:function(){return Me},isInKuaiShou:function(){return Fe},isInMini:function(){return ze},isInQQ:function(){return qe},isInQuick:function(){return Oe},isInServer:function(){return Ae},isInTouTiao:function(){return Be},isInWechat:function(){return He},isLowIOS:function(){return Ke},isMini:function(){return De},isQQ:function(){return Ve},isTouTiao:function(){return Re},isWechat:function(){return Ee}});var o={};n.r(o),n.d(o,{getBoundingClientRect:function(){return it}});var r={};n.r(r),n.d(r,{APP_TYPE:function(){return Lt},DEV_ENV_TYPE:function(){return Rt},PLATFORM_TYPE:function(){return jt},getAppId:function(){return Bt},getAppType:function(){return Ft},getClientID:function(){return Mt},getDevEnv:function(){return At},getPlatform:function(){return Ot}});var a={};n.r(a),n.d(a,{logDevTrace:function(){return O},logExposure:function(){return M},logMetric:function(){return F},logSendPV:function(){return B},logTrace:function(){return A}});var s={};n.r(s),n.d(s,{navigateBack:function(){return Fn},navigateTo:function(){return An},redirectTo:function(){return On}});var l=n(90201),c=n(2269),u=n(93212),d=n(298),p=n(57042),f=n(24460),h=n(21867),m=n(86066),_=n(71515),v=n(81876),g=n(45023),y=n(92954),x=n.n(y),b=function(e){return 2*e+"rpx"},k=b,w=function(e,t){var n=function(e){return"number"===typeof e?t?k(e):e+"px":e},i={width:n,height:n,fontSize:n,lineHeight:function(e){return"number"===typeof e&&e>11?e+"px":e},left:n,top:n,right:n,bottom:n,paddingLeft:n,paddingRight:n,paddingTop:n,paddingBottom:n,marginLeft:n,marginRight:n,marginTop:n,marginBottom:n,borderWidth:n,borderTopLeftRadius:n,borderBottomRightRadius:n,borderTopRightRadius:n,borderBottomLeftRadius:n,borderRadius:n,minHeight:n,minWidth:n,maxHeight:n,maxWidth:n,shadowRadius:n,shadowOffset:function(e){if("object"===(0,u.Z)(e))for(var t in e)e[t]="number"===typeof e[t]?e[t]+"px":e[t]},flexBasis:function(e){return"number"===typeof e||"string"===typeof e&&-1==e.indexOf("px")?e+"px":e},flexGrow:function(e){return"string"===typeof e?+e:e},flexShrink:function(e){return"string"===typeof e?+e:e}},o=function(){if("function"===typeof e[r]){var t=e[r];e[r]=function(){var e=t.apply(void 0,arguments);for(var n in e)i[n]&&(e[n]=i[n](e[n]));return e}}else if("object"!==(0,u.Z)(e[r]))i[r]&&(e[r]=i[r](e[r]));else for(var n in e[r])i[n]&&(e[r][n]=i[n](e[r][n]))};for(var r in e)o();var a="";for(var s in e)a+=s.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))+": "+e[s]+";\n";return a},I=w,Z=function(e){x().setClipboardData({data:e})},T=Z,S=n(32180)["document"],C=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),(0,g.Z)((0,v.Z)(i),"linkArr",void 0),(0,g.Z)((0,v.Z)(i),"htmlViewUUID",void 0),(0,g.Z)((0,v.Z)(i),"el",void 0),(0,g.Z)((0,v.Z)(i),"htmlOperation",(function(){var e=i.props,t=e.imageProps,n=e.linkProps,o=e.tagsStyles,r=e.unitTransform,a=t||{},s=a.onImageClick,l=a.imageCallback,c=a.imageStyle,u=(a.mode,a.width),d=a.height,p=n||{},f=p.onLinkClick,h=p.linkCallback,m=(p.isCopy,0);x().options.html.transformElement=function(e){var a;if(t&&"image"===e.nodeName){var p;if(l&&l(null===e||void 0===e||null===(p=e.props)||void 0===p?void 0:p.src,m),e.setAttribute("mode","widthFix"),c){var _=e.getAttribute("style")+";";_+=I(c),u&&(_+="width:".concat(u,";")),d&&(_+="height:".concat(d,";")),e.setAttribute("style",_)}s&&function(t){e.addEventListener("tap",(function(){var n;return s(null===e||void 0===e||null===(n=e.props)||void 0===n?void 0:n.src,t)}))}(m),m++}if(n&&"text"===(null===e||void 0===e?void 0:e.nodeName)&&null!==(a=e.getAttribute("class"))&&void 0!==a&&a.includes("h5-a")&&e.getAttribute("href")){var v,g;i.el.push(e);var y=null===e||void 0===e||null===(v=e.childNodes)||void 0===v||null===(v=v[0])||void 0===v?void 0:v._value;h&&h(null===e||void 0===e||null===(g=e.props)||void 0===g?void 0:g.href,y),f&&e.addEventListener("tap",(function(){var t;return f(null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.href,y)}))}if(o){var x,b=Object.keys(o),k=null===e||void 0===e||null===(x=e.props)||void 0===x||null===(x=x.class)||void 0===x?void 0:x.replace("h5-","");if(k&&b.includes(k)){var w=e.getAttribute("style")+";";w+=I(o[k],r),e.setAttribute("style",w)}}return e}})),i.htmlOperation(),i.linkArr=[],i.el=[],i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.linkProps,t=e||{},n=t.isCopy;n&&this.el.forEach((function(e){var t=null===e||void 0===e?void 0:e.props.href,n=S.createElement("image");n.setAttribute("src","https://dimg04.c-ctrip.com/images/0AS5a12000alzjrmf176C.png"),n.style.width="18px",n.style.height="18px",n.style.position="relative",n.style.top="5px",n.style.display="inline-block",n.addEventListener("tap",(function(){return T(t)})),e.parentNode.insertBefore(n,e.nextSibling)}))}}]),n}(l.Component),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#006FF6",n=e.replace(/<img.*?>|\/>/g,""),i=n.match(/<a.*?>.*?<\/a>/g)||[],o="";return i.forEach((function(n){var i=e.indexOf(n);if(-1!==i){var r=e.slice(0,i);r&&(o+=N(r,t)),e=e.slice(i+n.length,e.length),n=n.slice(0,2)+' style="color:'.concat(t,'"')+n.slice(2,n.length),o+=n}})),e&&(o+=N(e,t)),o},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#006FF6",n=e.replace(/<img.*?>|\/>/g,""),i=/((http|https):\/\/(\w+)+(\.(\w+)+)+(\.(\w+)+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g,o=n.match(i)||[],r=e.replace(i,(function(e){return o.indexOf(e)>-1?"<a href='".concat(e,"' style='color:").concat(t,"'>").concat(e,"</a>"):e}));return r},D=P,j=n(22276),R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat((0,j.Z)(t.filter(Boolean))))},E=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){return(0,p.Z)(this,n),t.call(this,e)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.html,n=e.className,i=e.baseFontStyle,o=e.linkProps,r=e.style,a=o?D(t):t;return(0,c.jsx)(_.View,{style:(0,d.Z)((0,d.Z)({wordBreak:"break-word"},"object"==(0,u.Z)(i)?i:{}),"object"==(0,u.Z)(r)?r:{}),className:R("xt-htmlview",n,this.htmlViewUUID),dangerouslySetInnerHTML:{__html:a}})}}]),n}(C),V=E;function A(e,t){var n,i;null===(n=y.Current.page)||void 0===n||null===(i=n["ubtTrace"])||void 0===i||i.call(n,e,t)}function O(e,t){var n,i;null===(n=y.Current.page)||void 0===n||null===(i=n["ubtDevTrace"])||void 0===i||i.call(n,e,t)}function F(e,t,n){var i,o;null===(i=y.Current.page)||void 0===i||null===(o=i["ubtMetric"])||void 0===o||o.call(i,{name:e,value:t,tag:n||{}})}function M(e,t,n){var i,o;null===(i=y.Current.page)||void 0===i||null===(o=i["ubtExposure"])||void 0===o||o.call(i,e,t,n)}function B(e,t){var n,i;null===(n=y.Current.page)||void 0===n||null===(i=n["ubtSendPV"])||void 0===i||i.call(n,(0,d.Z)({pageId:e},t||{}))}var U=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),i.state={isActive:!1},i.handleClick=i.handleClick.bind((0,v.Z)(i)),i.handleTouchEnd=i.handleTouchEnd.bind((0,v.Z)(i)),i.handleTouchStart=i.handleTouchStart.bind((0,v.Z)(i)),i.handleOnLongPress=i.handleOnLongPress.bind((0,v.Z)(i)),i}return(0,f.Z)(n,[{key:"handleClick",value:function(e){var t=this,i=this.props.onClick,o=n._Tasks;o.forEach((function(n){n&&n(e,t)})),this.sendLog(),i&&i(e)}},{key:"handleTouchStart",value:function(e){var t=this.props,n=t.withFeedback,i=t.onTouchStart,o=this.state.isActive;n&&!o&&this.setState({isActive:!0}),i&&i(e)}},{key:"handleTouchEnd",value:function(e){var t=this.props,n=t.withFeedback,i=t.onTouchEnd;n&&this.setState({isActive:!1}),i&&i(e)}},{key:"handleOnLongPress",value:function(e){var t=this.props,n=t.withFeedback,i=t.onLongPress;n&&this.setState({isActive:!1}),i&&i(e)}},{key:"sendLog",value:function(){var e=this.props.log;if(e){var t=Array.isArray(e)?e:[e];t.length<=0||t.forEach((function(e){e.key&&A(e.key,e.params||{})}))}}},{key:"isNeedRegisterClick",value:function(){var e=this.props,t=e.onClick,i=e.log,o=n._Tasks.length>0,r=Array.isArray(i)?i.length>0:!!i;return o||r||!!t}},{key:"isNeedRegisterTouchStart",value:function(){var e=this.props,t=e.onTouchStart,n=e.withFeedback;return!!t||!!n}},{key:"isNeedRegisterTouchEnd",value:function(){var e=this.props,t=e.onTouchEnd,n=e.withFeedback;return!!t||!!n}},{key:"isNeedRegisterLongPress",value:function(){var e=this.props,t=e.onLongPress,n=e.withFeedback;return!!t||!!n}}]),n}(l.Component);(0,g.Z)(U,"_Tasks",[]);var G,H=n(68277),z=n(56884),q=n.n(z),K=["id","className","testID"],W=["id","className"],X=function(e){var t=e||{},n=t.ubtKey,i=t.data;return n?{"data-expose":{ubtKeyName:n,data:i},id:"".concat(Date.now(),"_").concat(Math.random().toString().slice(2,6)),className:"autoExpose"}:{}},Y=function(e){return l.forwardRef((function(t,n){var i=t||{},o=i.id,r=i.className,a=i.testID,s=(0,H.Z)(i,K),u=(0,l.useMemo)((function(){return X(a)}),[a]),p=u.id,f=u.className,h=(0,H.Z)(u,W);return(0,c.jsx)(e,(0,d.Z)((0,d.Z)((0,d.Z)({},h),s),{},{id:R(o,p),className:R(r,f),ref:n}))}))},Q=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=void 0===t?"":t,i=e.style,o=void 0===i?{}:i,r=e.activeOpacity,a=void 0===r?.2:r,s=e.activeStyle,l=void 0===s?{}:s,u=e.withFeedback,p=void 0!==u&&u,f=e.children,h=this.state.isActive,m=p?L({opacity:a},l):{},v=h?L(o,m):o,g=this.isNeedRegisterClick(),y=this.isNeedRegisterTouchStart(),x=this.isNeedRegisterTouchEnd(),b=this.isNeedRegisterLongPress();return(0,c.jsx)(_.View,(0,d.Z)((0,d.Z)({},this.props),{},{className:R("xt-xview",n),style:v,hoverStyle:p?m:void 0,onClick:g?this.handleClick:void 0,onTouchStart:y?this.handleTouchStart:void 0,onTouchEnd:x?this.handleTouchEnd:void 0,onLongPress:b?this.handleOnLongPress:void 0,children:f}))}}]),n}(U);G=Q,(0,g.Z)(Q,"register",(function(e){var t;Array.isArray(e)?(t=G._Tasks).push.apply(t,(0,j.Z)(e)):G._Tasks.push(e)}));var J=Y(Q);J.register=Q.register;var $=J,ee=function(e){var t=e.renderBottom,n=e.renderTop,i=e.layout,o=e.children,r=n||l.Fragment,a=t||l.Fragment;return ie(i)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_.View,{style:{display:"inline-flex"},children:(0,c.jsx)(r,{})}),o,(0,c.jsx)(_.View,{style:{display:"inline-flex"},children:(0,c.jsx)(a,{})})]}):(0,c.jsxs)(_.View,{children:[(0,c.jsx)(r,{}),o,(0,c.jsx)(a,{})]})},te=n(32180)["document"],ne=["layout","onTouchMove","className","renderBottom","renderTop"],ie=function(e){return"horizontal"===e},oe="nearest",re=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),(0,g.Z)((0,v.Z)(i),"$ref",void 0),(0,g.Z)((0,v.Z)(i),"reWriteScrollTo",(function(){var e=i.props.layout;i.$ref.current.oldScrollTo=i.$ref.current.scrollTo,i.$ref.current.scrollTo=function(t){var n=t.offset,o=t.animated,r=te.getElementsByClassName("xt-flatlist_warp")[0];if(r&&null!==r&&void 0!==r&&r.scrollTo)return r.scrollTo({top:ie(e)?0:n,left:ie(e)?n:0,behavior:o?"smooth":"instant"});if(i.$ref.current.oldScrollTo)return i.$ref.current.oldScrollTo({top:ie(e)?0:n,left:ie(e)?n:0,behavior:o?"smooth":"instant"});i.setState({scrollWithAnimation:o});var a=n+.1*Math.random();x().nextTick((function(){ie(e)?i.setState({scrollLeft:a,scrollTop:0}):i.setState({scrollTop:a,scrollLeft:0})}))}})),(0,g.Z)((0,v.Z)(i),"scrollToIndex",(function(e){var t=e.index,n=e.align,o=void 0===n?"start":n,r=e.animated,a=void 0===r||r,s=e.alignToTop,l=void 0===s||s,c=i.props.layout,u=te.getElementById("xt-flatlist_".concat(t)),d={start:"start",center:"center",end:"end",auto:"nearest"},p=d[o];if(u&&u.scrollIntoView){var f=oe,h=oe;ie(c)?h=p:f=p,u.scrollIntoView({alignToTop:l,behavior:a?"smooth":"instant",block:f,inline:h})}else i.setState({scrollWithAnimation:a}),x().nextTick((function(){i.setState({scrollIntoView:"xt-flatlist_".concat(t),scrollIntoViewAlignment:p||oe})}))})),i.state={isScrolled:!1,scrollTop:0,scrollLeft:0,scrollIntoView:null,scrollIntoViewAlignment:null,scrollWithAnimation:!0},i.$ref=i.props.forwardedRef||l.createRef(),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.reWriteScrollTo(),this.$ref.current.scrollToIndex=this.scrollToIndex}},{key:"renderChildren",value:function(){var e,t=this.props,n=t.itemData,i=t.item,o=t.layout,r=t.initialNumToRender,a=void 0===r?10:r;return e=this.state.isScrolled?n:n.slice(0,a),(0,c.jsx)(c.Fragment,{children:e.map((function(e,t){var n,r=null!==(n=(0,c.jsx)(_.View,{className:ie(o)?"xt-flatlist_item":"",id:"xt-flatlist_".concat(t),children:i({item:e,index:t})},"xt-flatlist_".concat(t)))&&void 0!==n?n:(0,c.jsx)(c.Fragment,{});return r}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.layout,i=t.onTouchMove,o=t.className,r=t.renderBottom,a=t.renderTop,s=(0,H.Z)(t,ne),l=this.state,u=l.scrollTop,p=l.scrollLeft;return delete s.forwardedRef,(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(_.ScrollView,(0,d.Z)((0,d.Z)({},s),{},{ref:this.$ref,scrollX:ie(n),scrollY:!ie(n),scrollTop:u,scrollLeft:p,enhanced:!0,scrollIntoView:this.state.scrollIntoView,scrollWithAnimation:this.state.scrollWithAnimation,scrollIntoViewAlignment:this.state.scrollIntoViewAlignment,onScroll:function(){var t;e.setState({scrollIntoView:null,scrollIntoViewAlignment:null}),e.props.onScroll&&(t=e.props).onScroll.apply(t,arguments)},onTouchMove:function(){e.state.isScrolled||e.setState({isScrolled:!0}),i&&i.apply(void 0,arguments)},className:R("xt-flatlist_scroll",o),children:(0,c.jsx)(ee,{renderBottom:r,renderTop:a,layout:n,children:this.renderChildren()})}))})}}]),n}(l.Component);(0,g.Z)(re,"defaultProps",{layout:"vertical"});var ae=l.forwardRef((function(e,t){return(0,c.jsx)(re,(0,d.Z)({forwardedRef:t},e))})),se=["children","fontFamily","style"],le=function(e){var t=e.children,n=e.fontFamily,i=e.style,o=void 0===i?{}:i,r=(0,H.Z)(e,se);return(0,c.jsx)(_.Text,(0,d.Z)((0,d.Z)({style:(0,d.Z)({fontFamily:n},o)},r),{},{children:t}))},ce=l.memo(le),ue=["start","end","colors","locations","useAngle","angleCenter","angle","style","children"],de=[["top left","top","top right"],["left",null,"right"],["bottom left","bottom","bottom right"]];function pe(e,t){var n,i=null===(n=de[t.y-e.y+1])||void 0===n?void 0:n[t.x-e.x+1];return i?"to ".concat(i):null}var fe=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){var e;(0,p.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),(0,g.Z)((0,v.Z)(e),"state",{width:1,height:1}),(0,g.Z)((0,v.Z)(e),"getAngle",(function(){var t=e.props,n=t.start,i=t.end;if(e.props.useAngle)return e.props.angle+"deg";var o=pe(n,i);if(o)return o;var r=Math.atan2(e.state.width*(e.props.end.y-e.props.start.y),e.state.height*(e.props.end.x-e.props.start.x))+Math.PI/2;return r+"rad"})),(0,g.Z)((0,v.Z)(e),"getColors",(function(){return e.props.colors.map((function(t,n){var i=e.props.locations[n],o="";return i&&(o=" "+100*i+"%"),t+o})).join(",")})),e}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.start,e.end,e.colors,e.locations,e.useAngle,e.angleCenter,e.angle,e.style),n=void 0===t?{}:t,i=e.children,o=(0,H.Z)(e,ue);return(0,c.jsx)(_.View,(0,d.Z)((0,d.Z)({},o),{},{style:(0,d.Z)((0,d.Z)({},n),{},{backgroundImage:"linear-gradient(".concat(this.getAngle(),",").concat(this.getColors(),")")}),children:i}))}}]),n}(l.PureComponent);(0,g.Z)(fe,"defaultProps",{start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0});var he=fe,me=function(e){var t=e.className,n=e.style;return(0,c.jsx)(_.View,{className:R("xt-iphonex-adapter__top",t),style:n})},_e=function(e){var t=e.className,n=e.style;return(0,c.jsx)(_.View,{className:R("xt-iphonex-adapter__bottom",t),style:n})},ve={Top:me,Bottom:_e},ge=ve,ye=function(e){return(0,c.jsx)(_.Image,(0,d.Z)({},e))},xe=Y(ye),be=xe,ke=n(90129),we=l.forwardRef((function(e,t){var n=e.numberOfLines,i=e.style,o=e.className,r=(0,l.useMemo)((function(){var e=Number(n);return!e||e<=0?["",{}]:1===e?["xt-text_single_line",{}]:["xt-text_multy_line",{"-webkit-line-clamp":"".concat(e)}]}),[n]),a=(0,ke.Z)(r,2),s=a[0],u=a[1];return(0,c.jsx)(_.Text,(0,d.Z)((0,d.Z)({},e),{},{className:R(o,s),style:L(i,u),numberOfLines:n?"".concat(n):"",ref:t}))})),Ie=Y(we),Ze=x().getSystemInfoSync(),Te=function(e){return"ios"===Ze.platform},Se=function(e){return"android"===Ze.platform},Ce=function(e){var t=Ze.model,n=Le(),i=n?/iPhone(\d{0,3}),(\d{0,3})/i:/iPhone (X|\d{0,3})/,o=t.match(i)||[],r=n?Number(o[1])>10||10==Number(o[1])&&(3==Number(o[2])||6==Number(o[2])):"X"==o[1]||Number(o[1])>10;return r},Pe=function(){return!1},Ne=function(){return!1},De=function(){return!0},je=function(){var e="weapp".toUpperCase();return e==y.ENV_TYPE.SWAN},Re=function(){var e="weapp".toUpperCase();return e==y.ENV_TYPE.TT},Le=function(){var e="weapp".toUpperCase();return e==y.ENV_TYPE.ALIPAY},Ee=function(){var e="weapp".toUpperCase();return e==y.ENV_TYPE.WEAPP},Ve=function(){var e="weapp".toUpperCase();return e==y.ENV_TYPE.QQ},Ae=function(e){return!1},Oe=function(e){return!1},Fe=function(e){return!1},Me=function(e){return!1},Be=function(e){return!1},Ue=function(e){return!1},Ge=function(e){return!1},He=function(e){return!1},ze=function(e){return!1},qe=function(e){return!1},Ke=function(e){var t=Ze.system,n=t.indexOf("iOS")>-1;if(n){var i=parseInt(t.split(" ")[1].split(".")[0]);if(i<=13)return!0}return!1},We=n(32180)["window"],Xe=function(e){Ae()||We["CtripBar"]&&We["CtripBar"]["app_set_navbar_hidden"]&&We["CtripBar"]["app_set_navbar_hidden"](e)},Ye=function(e){Ae()||We["CtripBar"]&&We["CtripBar"]["appSetStatusBarStyle"]&&We["CtripBar"]["appSetStatusBarStyle"](e)},Qe=function(){Ae()||We["CtripBar"]&&We["CtripBar"]["appSetTransparentForWindow"]&&We["CtripBar"]["appSetTransparentForWindow"]()},Je=function(){return new Promise((function(e,t){try{if(!Ge())return e(0);if(Te()){var n=20;return Ce()&&(n+=24),void e(n)}We["CtripBar"]&&We["CtripBar"]["appGetStatusBarHeight"]&&We["CtripBar"]["appGetStatusBarHeight"]((function(t){e(t/We.devicePixelRatio)}))}catch(e){t(e)}}))},$e=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),i.updateStatusBarHeight(),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.handleH5InApp()}},{key:"componentDidUpdate",value:function(e,t,n){this.handleH5InApp()}},{key:"handleH5InApp",value:function(){Ge()&&(this.updateStatusBarHeight(),this.updateFromProps())}},{key:"updateStatusBarHeight",value:function(){Je().then((function(e){n.currentHeight=e}))}},{key:"updateFromProps",value:function(){var e=this.props,t=e.barStyle,i=e.translucent,o=e.hidden;t&&n.setBarStyle(t),"boolean"===typeof i&&n.setTranslucent(i),"boolean"===typeof o&&n.setHidden(o)}}]),n}(l.Component);(0,g.Z)($e,"currentHeight",void 0),(0,g.Z)($e,"setHidden",(function(e,t){Xe(e)})),(0,g.Z)($e,"setBarStyle",(function(e,t){Ye(e)})),(0,g.Z)($e,"setNetworkActivityIndicatorVisible",(function(e){})),(0,g.Z)($e,"setBackgroundColor",(function(e,t){})),(0,g.Z)($e,"setTranslucent",(function(e){e&&Qe()}));var et=n(79301),tt=n(95308),nt=function(e,t,n){var i=e,o=!Le()&&!je();if(o){var r=t||"__xtaro__root__";i=".".concat(r," >>> ").concat(e)}x().createSelectorQuery().select(i).boundingClientRect().exec((function(t){var i=t;if(t&&t.length&&(i=t[0]),i||!o)return n(i);x().createSelectorQuery().select(e).boundingClientRect().exec((function(e){var t=e;return e&&e.length&&(t=e[0]),n(t)}))}))},it=function(e){return new Promise((function(t,n){var i,o=e.node,r=e.prefixCls;if(!o)return n({errMsg:"getBoundingClientRect:fail node is not exist"});var a,s,l="",c=(null===o||void 0===o?void 0:o.uid)||(null===o||void 0===o||null===(i=o.props)||void 0===i?void 0:i.id)||(null===o||void 0===o?void 0:o.id),u="";c||(u=(o.className||(null===(a=o.props)||void 0===a?void 0:a.className)||(null===(s=o.props)||void 0===s?void 0:s.class)||"").split(" ").filter(Boolean).map((function(e,t){return 0==t?"".concat(e):0==e.indexOf(".")?" ".concat(e):".".concat(e)})).join(""));if(l=c?"#".concat(c):u?".".concat(u):"",!l)return n({errMsg:"getBoundingClientRect:fail node requires a class name or unique id"});try{nt(l,r,(function(e){t(e)}))}catch(e){return n({errMsg:"getBoundingClientRect:fail ".concat(e)})}}))},ot=function(e){var t,n=e.data,i=void 0===n?[]:n,o=e.current,r=void 0===o?0:o,a=e.scrollAble,s=void 0===a||a,c=e.initialNumToRender,u=e.onTabChange,d=e.onTabClick,p=e.prefixCls,f=void 0===p?"":p,h=e.indicatorAnimate,m=void 0===h||h,v=(0,l.useRef)(Math.random().toString(36).substr(6)),g=(0,l.useState)(r),y=(0,ke.Z)(g,2),b=y[0],k=y[1],w=(0,l.useState)(0),I=(0,ke.Z)(w,2),Z=I[0],T=I[1],S=(0,l.useState)([]),C=(0,ke.Z)(S,2),P=C[0],N=C[1],D=(0,l.useState)(0),j=(0,ke.Z)(D,2),R=j[0],L=j[1],E=(0,l.useState)(),V=(0,ke.Z)(E,2),A=V[0],O=V[1],F=(0,l.useState)(i.slice(0,r<=0?c:i.length)),M=(0,ke.Z)(F,2),B=M[0],U=M[1],G=(0,l.useRef)(0),H=(0,l.useRef)(0),z=s?{}:{overflow:"hidden"},q=(0,l.useRef)(null),K=(0,l.useRef)([]),W=(0,l.useRef)({left:0,width:0}),X=(0,l.useRef)([]),Y=function(e){var t;null===(t=e.stopPropagation)||void 0===t||t.call(e)},Q=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t,n){return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(B.length===i.length){e.next=4;break}setTimeout((0,tt.Z)((0,et.Z)().mark((function e(){return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J(t,!0);case 2:case"end":return e.stop()}}),e)}))),0),e.next=6;break;case 4:return e.next=6,J(t,!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t){var n,i=arguments;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],e.next=3,$(t,!1);case 3:n&&d&&d(b,t),u&&u(b,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(n,o){var r,a,s,l,c,u,d,p,h,_,v,g,y,b,w,I,Z,S,C,P,D,j,R,E,V,A;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n<0||n>i.length-1)){e.next=3;break}return k(n),e.abrupt("return");case 3:return g=n<0||n>=B.length?0:n,e.next=6,it({node:q.current,prefixCls:f});case 6:W.current=e.sent,y=X[g]||{},b=y.left,w=void 0===b?0:b,I=y.width,Z=void 0===I?0:I,S=null!==(r=null===(a=W.current)||void 0===a?void 0:a.left)&&void 0!==r?r:0,C=Pe()?w:null!==(s=w-S)&&void 0!==s?s:0,P=null!==(l=null===(c=W.current)||void 0===c?void 0:c.width)&&void 0!==l?l:0,D=(P-Z)/2,j=g<0?0:C-D,R=null===(u=X[g])||void 0===u?void 0:u.width,m?(t=t||x().createAnimation({duration:100,timingFunction:"linear"}),t.translateX(C),t.opacity(1),isNaN(R)||t.width(null!==R&&void 0!==R?R:0),t.step({duration:De()?220:150}),V=function(){O(t.export())},V()):(T(R),E=Pe()?[{translateX:C}]:"translateX(".concat(C,"px)"),N(E)),L(j),A={x:j,y:0,left:j,behavior:"smooth",distance:0},null!==(d=null===(p=q.current)||void 0===p||null===(h=p.scrollTo)||void 0===h?void 0:h.call(p,A))&&void 0!==d||null===(_=q.current)||void 0===_||null===(_=_.$scrollView)||void 0===_||null===(_=_.current)||void 0===_||null===(v=_.scrollTo)||void 0===v||v.call(_,A),k(n);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=s?_.ScrollView:_.View,te=_.View,ne=function(e,t){var n,i,o=null!==(n=null===t||void 0===t||null===(i=t.nativeEvent)||void 0===i?void 0:i.layout)&&void 0!==n?n:{},r=o.width,a=void 0===r?0:r,s=o.x,l=void 0===s?0:s;X[e]={width:a,left:l},e===b&&T(a),ie()};(0,l.useEffect)((function(){var e=setTimeout((function(){r!==b&&(B.length!==i.length?U(i):J(r))}),100);return function(){clearTimeout(e)}}),[r]);var ie=function(){(G.current<B.length||B.length===i.length)&&G.current++,G.current==B.length-1&&$(r,!0)};(0,l.useEffect)((function(){var e=De()?500:0,t=function(){G.current=0,oe()};De()?setTimeout((function(){t()}),e):t()}),[B]);var oe=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(){return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Pe()){e.next=2;break}return e.abrupt("return");case 2:if(!B||!B.length){e.next=5;break}return e.next=5,(B||[]).forEach(function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t,n){var i;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=K.current[n],!i){e.next=6;break}return e.next=4,it({node:i,prefixCls:f});case 4:X[n]=e.sent,ie();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){H.current?U(i):H.current=1}),[i]),{Com:ee,active:b,animationIndicator:A,comRef:q,distance:R,itemRefs:K,lineWidth:Z,renderData:B,setRenderData:U,onScroll:Y,clickTab:Q,onNodeLayout:ne,Wrapper:te,IDKey:v,unScrollStyles:z,lineTransform:P}},rt=ot,at=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),(0,g.Z)((0,v.Z)(i),"loopTimer",void 0),(0,g.Z)((0,v.Z)(i),"isInAnimating",!1),(0,g.Z)((0,v.Z)(i),"el",void 0),i.state={animationData:null},i.onTransitionEnd=i.onTransitionEnd.bind((0,v.Z)(i)),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.startAnimation()}},{key:"componentDidUpdate",value:function(e,t){e.animation!==this.props.animation&&this.startAnimation()}},{key:"componentWillUnmount",value:function(){this.isInAnimating=!1,this.clearLoopTimer()}},{key:"clearLoopTimer",value:function(){this.loopTimer&&clearTimeout(this.loopTimer)}},{key:"startAnimation",value:function(){var e,t,n=this.props,i=n.animation,o=n.loop;o&&this.isInAnimating||(null===i||void 0===i||null===(e=i.actions)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.animates)||void 0===e?void 0:e.length)>0&&(this.isInAnimating=!0,0===(null===i||void 0===i||null===(t=i.option)||void 0===t||null===(t=t.transition)||void 0===t?void 0:t.duration)&&(this.isInAnimating=!1),this.setState({animationData:this.props.animation}))}},{key:"clearAnimation",value:function(e){this.setState({animationData:{actions:[{animates:[{type:"style",args:[]}]}],option:{transformOrigin:"50% 50% 0",transition:{delay:0,duration:0,timingFunction:"linear"}}}},e)}},{key:"onTransitionEnd",value:function(e){var t=this,n=this.props,i=n.loop,o=n.onTransitionEnd;if(i){var r=this.props.animation;r&&this.isInAnimating&&this.clearAnimation((function(){t.clearLoopTimer(),t.loopTimer=setTimeout((function(){t.setState({animationData:r})}),15)}))}else this.isInAnimating=!1,o&&o(e)}}]),n}(l.Component),st=at,lt=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,c.jsx)(_.View,(0,d.Z)((0,d.Z)({},this.props),{},{onTransitionEnd:this.onTransitionEnd,ref:function(t){return e.el=t}}))}}]),n}(st),ct=lt,ut=function(e){var t=e.data,n=void 0===t?[]:t,i=e.renderItem,o=e.tabsActiveTextColor,r=void 0===o?"#0086f6":o,a=e.tabsInactiveTextColor,s=void 0===a?"#666":a,l=e.tabsBackgroundColor,u=void 0===l?"#fff":l,p=e.scrollAble,f=void 0===p||p,h=e.showBgIndicator,m=void 0!==h&&h,v=e.renderIndicator,g=e.indictorColor,y=void 0===g?"#0086f6":g,x=e.indictorWidth,b=e.comClassName,k=void 0===b?"":b,w=e.comStyle,I=void 0===w?{}:w,Z=e.bgIndicatorStyles,T=void 0===Z?{}:Z,S=e.indicatorAnimate,C=void 0===S||S,P=rt(e),N=P.Com,D=P.active,j=P.animationIndicator,L=P.comRef,E=P.distance,V=P.itemRefs,A=P.lineWidth,O=P.renderData,F=P.setRenderData,M=P.onScroll,B=P.clickTab,U=P.onNodeLayout,G=P.Wrapper,H=P.IDKey,z=P.unScrollStyles,q=P.lineTransform;return O&&O.length?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(N,{ref:function(e){return L.current=e},scrollX:!0,scrollLeft:E,showScrollbar:!1,bounces:!1,enhanced:!1,onTouchStart:function(){O.length!==n.length&&F(n)},onScroll:M,scrollWithAnimation:f,showsHorizontalScrollIndicator:!1,automaticallyAdjustContentInsets:!1,style:{backgroundColor:u},className:R("xt-tabs__scroll_wrapper"),id:"contain_".concat(H.current),children:(0,c.jsxs)(G,{style:(0,d.Z)((0,d.Z)({backgroundColor:u},z),I),className:R("xt-tabs__com",k),children:[O.map((function(e,t){return(0,c.jsx)(_.View,{id:"tabs_com_i_".concat(H.current,"_").concat(t),onClick:function(e){return B(t,e)},ref:function(e){V.current[t]=e},onLayout:function(e){return U(t,e)},className:"xt-tabs__item",children:(null===i||void 0===i?void 0:i(e,t,D))||(0,c.jsx)(_.Text,{style:{textAlign:"center",color:D===t?r:s,padding:16,fontWeight:"500"},children:e.text})},t)})),m&&(D||0===D)?(0,c.jsx)(ct,{animation:j,className:"xt-tabs__line",style:{backgroundColor:u,opacity:C?0:1,width:A||"auto",display:"flex",position:"absolute",bottom:0,left:0,transform:q},children:(0,c.jsx)(_.View,{className:"xt-tabs__line",style:(0,d.Z)({height:4,width:null!==x&&void 0!==x?x:"100%",backgroundColor:y},T),children:v&&v()})}):(0,c.jsx)(c.Fragment,{})]})})}):null},dt=l.memo(ut),pt=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,c.jsx)(_.Text,(0,d.Z)((0,d.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(st),ft=pt,ht=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,c.jsx)(_.Image,(0,d.Z)((0,d.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(st),mt=ht,_t=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,p.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,c.jsx)(_.ScrollView,(0,d.Z)((0,d.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(st),vt=_t,gt={View:ct,Text:ft,Image:mt,ScrollView:vt},yt=gt,xt=(l.Component,function(e){var t=e.collapseHeight||80,n=!!e.defaultExpand,i=e.offset||0,o=function(e){var t=Date.now().toString(36);return t+=Math.random().toString(36).substr(2,e),t},r=(0,l.useState)(n?"open":"hide"),a=(0,ke.Z)(r,2),s=a[0],c=a[1],u=(0,l.useState)(t),d=(0,ke.Z)(u,2),p=d[0],f=d[1],h=(0,l.useState)(null),m=(0,ke.Z)(h,2),_=m[0],v=m[1],g=(0,l.useState)(!1),y=(0,ke.Z)(g,2),b=y[0],k=y[1],w=(0,l.useState)(!1),I=(0,ke.Z)(w,2),Z=I[0],T=I[1],S=(0,l.useState)(t),C=(0,ke.Z)(S,2),P=C[0],N=C[1],D=(0,l.useRef)(null),j=(0,l.useRef)(o(5)),R=function(){var e=x().createAnimation({duration:200,delay:0,timingFunction:"linear"});"hide"===s?(e.height(p).step(),c("open")):(e.height(t).step(),c("hide")),v(e.export())},L=(0,l.useCallback)((function(e){f(e+i),Math.floor(e)<=t+5?(k(!1),N(e)):(k(!0),N("open"===s?e:t))}),[s]),E=(0,l.useCallback)((function(){setTimeout((function(){it({node:D.current,prefixCls:e.prefixCls}).then((function(e){e&&(L(e.height),T(!0))}))}),0)}),[L]);return(0,l.useEffect)((function(){setTimeout((function(){E()}),De()?600:0)}),[]),{status:s,setAnimation:R,animationData:_,showMore:b,refreshCollapseHeight:E,textViewRef:D,classname:j,height:t,layOutFinish:Z,initHeight:P}}),bt=xt,kt=l.forwardRef((function(e,t){var n=bt(e),i=n.status,o=n.setAnimation,r=n.animationData,a=n.showMore,s=n.refreshCollapseHeight,u=n.textViewRef,d=n.classname,p=n.height,f=n.layOutFinish,h=n.initHeight,m=e.renderContent,v=e.renderMoreButton,g=e.showMoreText,y=void 0===g?{}:g,x=e.onClick,b=e.onlyEnableMoreButton,k=void 0!==b&&b,w="hide"===i,I=function(e){a&&(o(),x&&x(e))};return(0,l.useImperativeHandle)(t,(function(){return{refreshCollapseHeight:s}})),(0,c.jsxs)(_.View,{style:{position:"relative"},children:[(0,c.jsx)(ct,{animation:r,className:"xt-collapse__wrap",onClick:function(){k||I(!w)},style:f?{overflow:Pe()?"scroll":"hidden",height:h}:{overflow:Pe()?"scroll":"hidden",maxHeight:p},children:(0,c.jsx)(_.View,{ref:u,className:d.current,collapsable:!1,children:m&&m()})}),!!a&&(0,c.jsx)(_.View,{onClick:function(){return I(!w)},className:v?"":"xt-collapse__button ".concat(w?"":"xt-collapse__button__up"),children:v?v(w):(0,c.jsx)(he,{direction:0,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255, 1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},className:"xt-collapse__button__linear ".concat(w?"":"xt-collapse__button__linear__up"),children:(0,c.jsx)(_.Text,{className:"xt-collapse__button__text",children:w?(null===y||void 0===y?void 0:y.arrowdown)||"\u5c55\u5f00":(null===y||void 0===y?void 0:y.arrowup)||"\u6536\u8d77"})})})]})})),wt=kt,It=_.View,Zt=function(e,t){clearTimeout(t.current),t.current=setTimeout(e,20)},Tt=_.CustomWrapper,St=function(e){return e["bottom"]="bottom",e["top"]="top",e["left"]="left",e["right"]="right",e}({}),Ct=function(e){var t=e.visible,n=void 0!==t&&t,i=e.closeOnMaskClick,o=void 0===i||i,r=e.onClose,a=e.onMaskClick,s=e.position,c=void 0===s?St.bottom:s,u=e.closeTransitionEnd,d=e.duration,p=void 0===d?300:d,f=(0,l.useState)(n),h=(0,ke.Z)(f,2),m=h[0],_=h[1],v=(0,l.useRef)(0),g=(0,l.useRef)(0),y=(0,l.useRef)(x().getSystemInfoSync().windowWidth),b=(0,l.useRef)(x().getSystemInfoSync().windowHeight),k=(0,l.useRef)(null),w=(0,l.useRef)(null);(0,l.useEffect)((function(){switch(c){case St.left:v.current=-y.current,g.current=0;break;case St.right:v.current=y.current,g.current=0;break;case St.top:v.current=0,g.current=-b.current;break;default:v.current=0,g.current=b.current;break}}),[c]),(0,l.useEffect)((function(){n&&!m&&_(!0),(n&&!m||!n&&m)&&L(n)}),[n,m]),(0,l.useEffect)((function(){return function(){clearTimeout(k.current),clearTimeout(w.current)}}),[]);var I=(0,l.useCallback)((function(){null===a||void 0===a||a(),o&&(null===r||void 0===r||r())}),[a,r]),Z=(0,l.useCallback)((function(){n||(_(!1),null===u||void 0===u||u())}),[n,m]),T=(0,l.useState)(null),S=(0,ke.Z)(T,2),C=S[0],P=S[1],N=(0,l.useState)(null),D=(0,ke.Z)(N,2),j=D[0],R=D[1],L=(0,l.useCallback)((function(e){var t=x().createAnimation({duration:p,delay:0,timingFunction:"ease"}),i=x().createAnimation({duration:p,delay:0,timingFunction:"ease"}),o=function(){t.translateX(0).translateY(0).opacity(1).step(),i.opacity(1).step(),P(t.export()),R(i.export())};e?(clearTimeout(w.current),Zt(o,k)):(t.translateX(v.current).translateY(g.current).opacity(0).step(),i.opacity(0).step(),P(t.export()),R(i.export()),w.current=setTimeout((function(){n||(_(!1),null===u||void 0===u||u())}),400))}),[]);return{animationData:C,animationMask:j,handleMaskClick:I,handleTransitionEnd:Z,isShow:m}},Pt=Ct,Nt=function(e){var t=e.visible,n=e.children,i=e.position,o=void 0===i?St.bottom:i,r=e.zIndex,a=void 0===r?0:r,s=e.showCloseButton,u=void 0!==s&&s,p=e.closeButtonPosition,f=void 0===p?"right":p,h=e.className,m=void 0===h?"":h,v=e.style,g=void 0===v?{}:v,y=e.titleStyle,x=void 0===y?{}:y,b=e.contentClassName,k=void 0===b?"":b,w=e.contentStyle,I=void 0===w?{}:w,Z=e.mask,T=void 0===Z||Z,S=e.maskClassName,C=void 0===S?"":S,P=e.maskStyle,N=void 0===P?{}:P,D=e.title,j=void 0===D?"":D,R=e.crnModalProps,E=void 0===R?{}:R,V=e.hideIphoneXAdapter,A=void 0!==V&&V,O=e.isCrnModal,F=void 0===O||O,M=e.onClose,B=F?It:_.View,U=Pt(e),G=U.isShow,H=U.animationData,z=U.animationMask,q=U.handleMaskClick,K=U.handleTransitionEnd,W=(0,l.useState)(!1),X=(0,ke.Z)(W,2),Y=X[0],Q=X[1];return(0,l.useEffect)((function(){t&&!Y&&Q(!0)}),[t,Y]),(0,c.jsx)(Tt,{children:(0,c.jsx)(B,(0,d.Z)((0,d.Z)({catchMove:!0,className:"xt-poplayer xt-poplayer-fixed",style:{zIndex:a,display:G?void 0:"none"},visible:G,transparent:!0},E),{},{children:(0,c.jsxs)(_.View,{className:"xt-poplayer__container",children:[T?(0,c.jsx)(ct,{disableScroll:"disableScroll",className:"xt-poplayer__container__mask ".concat(C),style:N,animation:z,onClick:q}):null,(0,c.jsxs)(ct,{style:(0,d.Z)({opacity:0},g),className:"xt-poplayer__container__content xt-poplayer__container__content__".concat(o," ").concat(m," ").concat(F?"xt-poplayer__container__content_crn_model":"xt-poplayer__container__content_view"),animation:H,onTransitionEnd:K,children:[j?(0,c.jsxs)(_.View,{className:"xt-poplayer__container__content__header",style:x,children:[(0,c.jsx)(_.Text,{className:"xt-poplayer__container__content__header__title",children:j}),u?(0,c.jsx)(_.View,{className:"xt-poplayer__container__content__header__close xt-poplayer__container__content__header__close__".concat(f),onClick:M,children:(0,c.jsx)(_.Image,{className:"xt-poplayer__container__content__header__close__icon",src:"https://dimg04.c-ctrip.com/images/1o52m12000aswrc8dB020.png"})}):null]}):null,(0,c.jsx)(_.View,{style:L({flex:1},Pe()?{}:{overflow:"auto"},I),className:k,children:Y?n:null}),A?null:(0,c.jsx)(ge.Bottom,{})]})]})}))})},Dt=Nt,jt=function(e){return e["CRN"]="CRN",e["Mini"]="mini",e["H5"]="H5",e["Online"]="online",e}({}),Rt=function(e){return e["FAT"]="FAT",e["UAT"]="UAT",e["PROD"]="PROD",e["DEV"]="DEV",e}({}),Lt=function(e){return e["TRIP"]="TRIP",e["CTRIP"]="CTRIP",e}({}),Et=n(65238),Vt=n.n(Et),At=function(e){var t,n=Vt().env||"";switch("undefined"!==typeof process&&"development"===(null===(t=process)||void 0===t||null===(t=t.env)||void 0===t?void 0:"production")&&(n=Rt.DEV),n=n.toLowerCase(),n){case"dev":return Rt.DEV;case"fat":return Rt.FAT;case"uat":return Rt.UAT;case"prd":return Rt.PROD;default:return Rt.PROD}},Ot=function(){return jt.Mini},Ft=function(){return Lt.CTRIP},Mt=function(){return q().clientID},Bt=function(){return q().appId},Ut=(q().util.base64Encode,q().util.base64Decode,"__xtaro-storage-time__"),Gt=function(e,t){var n=e.data,i=e.expires,o=e.key,r=e.domain;if(i){var a=Object.prototype.toString.call(i);if("[object Date]"===a||"[object Number]"===a){var s="[object Date]"===a?i.getTime():(new Date).getTime()+i;return x().setStorage({key:Ut+o,data:s,domain:r}),t?x().setStorageSync(o,n,r):x().setStorage(e)}console.error("type error: expires is not Date or number")}return t?x().setStorageSync(o,n,r):x().setStorage(e)},Ht=function(e){return Gt(e)},zt=function(e,t,n,i){return Gt({data:t,key:e,expires:n,domain:i},!0)},qt=function(e,t){return new Promise((function(n,i){var o=x().getStorageSync(e,t);n(o)}))},Kt=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t){var n,i,o,r,a,s;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.key,i=t.complete,o=t.fail,r=t.domain,e.next=3,qt(Ut+n,r);case 3:if(a=e.sent,!(a&&a<(new Date).getTime())){e.next=11;break}return s={errMsg:"getStorage:fail data not found"},o&&o(s),i&&i(s),x().removeStorage({key:n}),x().removeStorage({key:Ut+n}),e.abrupt("return");case 11:return e.abrupt("return",x().getStorage(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(e,t){var n=x().getStorageSync(Ut+e,t);return n?n>(new Date).getTime()?x().getStorageSync(e,t):(x().removeStorage({key:e}),x().removeStorage({key:Ut+e}),""):x().getStorageSync(e,t)},Xt=x().removeStorage,Yt=x().removeStorageSync,Qt=x().clearStorage,Jt=x().clearStorageSync,$t=x().getStorageInfo,en=x().getStorageInfoSync,tn={set:Ht,setSync:zt,get:Kt,getSync:Wt,remove:Xt,removeSync:Yt,clear:Qt,clearSync:Jt,getInfoSync:en,getInfo:$t},nn=tn,on=nn,rn=function(){var e,t=(0,y.getCurrentPages)();return null===(e=t[t.length-1])||void 0===e?void 0:e.route},an=(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({},Rt.DEV,"https://m.ctrip.com"),Rt.PROD,"https://m.ctrip.com"),Rt.FAT,"https://gateway.m.fws.qa.nt.ctripcorp.com"),Rt.UAT,"https://gateway.m.uat.qa.nt.ctripcorp.com"),sn=function(e){},ln=sn,cn=n(32180)["document"],un=n(32180)["window"];function dn(e,t){var n=cn.createElement("script");return n.async=!0,n.src=e,t&&(n.onerror=t),cn.getElementsByTagName("head")[0].appendChild(n),n}function pn(e){var t="";for(var n in e){var i=void 0!==e[n]?e[n]:"";t+="&".concat(n,"=").concat(encodeURIComponent(i))}return t}function fn(e,t,n){e.parentNode&&(e.parentNode.removeChild(e),delete un[t],n&&clearTimeout(n))}function hn(){var e=0;return function(t,n){if("undefined"===typeof un){var i=n.fail;return i(null)}var o,r,a=n.prefix,s=void 0===a?"__jp":a,l=n.cbName,c=void 0===l?"callback":l,u=n.timeout,d=void 0===u?15e3:u,p=n.data,f=void 0===p?{}:p,h=n.success,m=n.fail,_=s+e++;un[_]=function(e){return un[_]&&fn(o,_,r),h(e)},t="".concat(t).concat(t.indexOf("?")>0?"":"?").concat(pn(f).substr(1),"&").concat(c,"=").concat(_),o=dn(t,(function(e){return m(e),fn(o,_,r)})),d&&(r=setTimeout((function(){return fn(o,_,r),m("timeout")}),d))}}var mn=hn(),_n=mn,vn=n(32180)["window"],gn=["url","head","data","method","retryTimes","req","timeout","cachePolicy","isSOAAgent","useAutoParseSoaParams","needLock","jsonp","cbName","isFullRes","debounceTime","beforeHandleData","afterHandleData"],yn={},xn={},bn="",kn=function(e){return e.replace("https://","http://")},wn=function(e){var t=an[At(e)]||an[Rt.PROD];return Ae()?kn(t):t},In=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t,n,i,o){var r,a,s,l,c;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=o||{},a=r.isFullRes,s=a?i:i.data||i,l={data:s,isSuccess:t},!n){e.next=12;break}if(c=n(l),!(c instanceof Promise)){e.next=11;break}return e.next=8,c;case 8:l=e.sent,e.next=12;break;case 11:l=c;case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}();function Zn(e,t,n){var i=t.afterHandleData,o=e.cbName,r=e.url,a=e.jsonp,s=e.data,l=e.timeout,c=e.isFullRes;return new Promise((function(u){var p,f={success:function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t){var n;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,In(!0,i,t,{isFullRes:c});case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fail:function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(o){var r;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n&&n(t,o),e.next=3,In(!1,i,o,{isFullRes:c});case 3:r=e.sent,u(r);case 5:case"end":return e.stop()}}),e)})));function o(t){return e.apply(this,arguments)}return o}()};if(!Pe()&&(null!==e&&void 0!==e&&null!==(p=e.others)&&void 0!==p&&p.extension)){var h,m=(null===e||void 0===e||null===(h=e.data)||void 0===h?void 0:h.head)||{};m.extension=e.others.extension,e.data.head=m}if(a)return _n(r,(0,d.Z)({data:s,cbName:o,timeout:l},f));q().request((0,d.Z)((0,d.Z)({},e),f))}))}var Tn=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t,n,i,o){var r,a,s,l,c,u;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=wn(o),a=[],Array.isArray(t)||(t=[t]),s="";try{s=rn()}catch(e){console.log("curPageContextId => getPageContextId  error:",e)}bn!==s&&(yn={},xn={},bn=s),l=(0,et.Z)().mark((function e(){var n,s,l,c,p,f,h,m,_,v,g,y,x,b,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V,A,O,F;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t[u],s=n.url,l=n.head,c=n.data,p=n.method,f=void 0===p?"POST":p,h=n.retryTimes,m=void 0===h?0:h,_=n.req,v=n.timeout,g=void 0===v?15e3:v,y=n.cachePolicy,x=n.isSOAAgent,b=n.useAutoParseSoaParams,k=void 0!==b&&b,w=n.needLock,I=n.jsonp,Z=n.cbName,T=n.isFullRes,S=n.debounceTime,C=void 0===S?200:S,P=n.beforeHandleData,n.afterHandleData,N=(0,H.Z)(n,gn),D=_||o,j={},s=-1==s.indexOf("http")?"".concat(r).concat(s):s,l&&(c.head=Object.assign(c.head||{},l)),!P){e.next=15;break}if(R=P(c),!(R instanceof Promise)){e.next=14;break}return e.next=11,R;case 11:c=e.sent,e.next=15;break;case 14:c=R;case 15:if("undefined"===typeof vn&&x&&(k&&(L=ln(s)||{},E=L.serviceCode,V=L.serviceOperation,j.serviceCode=E,j.serviceOperation=V),D.clientId||(j.ignoreCID=!0),j.body=c),A=(0,d.Z)((0,d.Z)({url:s,method:f,data:c,jsonp:I,isFullRes:T,cbName:Z,retryTimes:m,timeout:g,cachePolicy:y,req:D,isSOAAgent:x},N),j),1!==w){e.next=24;break}return yn[s]&&yn[s](null),O=new Promise((function(e){yn[s]=e,setTimeout((0,tt.Z)((0,et.Z)().mark((function t(){var o;return(0,et.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e===yn[s]){t.next=3;break}return t.abrupt("return",e(null));case 3:return t.next=5,Zn(A,n,i);case 5:o=t.sent,e(o),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("request error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),C)})),a.push(O),e.abrupt("return",0);case 24:if(2!==w){e.next=29;break}if(!xn[s]){e.next=28;break}return a.push(null),e.abrupt("return",0);case 28:xn[s]=!0;case 29:F=Zn(A,n,i).finally((function(){delete xn[s]})),a.push(F);case 31:case"end":return e.stop()}}),e)})),u=0;case 8:if(!(u<t.length)){e.next=16;break}return e.delegateYield(l(),"t0",10);case 10:if(c=e.t0,0!==c){e.next=13;break}return e.abrupt("continue",13);case 13:u++,e.next=8;break;case 16:return Ae()||n&&(0,y.showLoading)({title:n.text||""}),e.abrupt("return",Promise.all(a).finally((function(){Ae()||n&&(0,y.hideLoading)()})));case 18:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),Sn=Tn,Cn={request:Tn},Pn=q(),Nn=function(e,t){var n=[];if("object"===(0,u.Z)(t)&&t instanceof Array===!1){for(var i in t){var o=t[i];"string"!==typeof o&&"number"!==typeof o&&"boolean"!==typeof o||n.push("".concat(i,"=").concat(o))}return n.length<=0?e:e+(-1===e.indexOf("?")?"?":"&")+n.join("&")}return e},Dn=["complete","success","fail","url","data","beforeRouteChange"],jn=["url","data","beforeRouteChange","fail","complete","success"],Rn=["beforeRouteChange"],Ln=Pn.navigateTo,En=Pn.redirectTo,Vn=Pn.navigateBack,An=function(e){var t=e.complete,n=e.success,i=e.fail,o=e.url,r=e.data,a=e.beforeRouteChange,s=(0,H.Z)(e,Dn);if(!o||"string"!=typeof o)return console.error("\u5f53\u524dURL\u53c2\u6570\u975e\u6cd5"),i&&i(),void(t&&t());if(o=Nn(o,r),o.indexOf("http://")>-1||o.indexOf("https://")>-1){var l="/cwx/component/cwebview/cwebview";a&&a(),Ln((0,d.Z)((0,d.Z)({},s),{},{url:"".concat(l,"?data=").concat(JSON.stringify((0,d.Z)({url:encodeURIComponent(o),needLogin:e.needLogin||!1,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},e.other||{}))),success:n,complete:t,fail:i}))}else a&&a(),Ln((0,d.Z)((0,d.Z)({},s),{},{url:o,success:n,complete:t,fail:i}))},On=function(e){var t=e.url,n=e.data,i=e.beforeRouteChange,o=e.fail,r=e.complete,a=e.success,s=(0,H.Z)(e,jn);if(!t||"string"!=typeof t)return console.error("\u5f53\u524dURL\u53c2\u6570\u975e\u6cd5"),o&&o(),void(r&&r());if(t=Nn(t,n),i&&i(),t.indexOf("http://")>-1||t.indexOf("https://")>-1){var l="/cwx/component/cwebview/cwebview";i&&i(),En((0,d.Z)((0,d.Z)({},s),{},{url:"".concat(l,"?data=").concat(JSON.stringify((0,d.Z)({url:encodeURIComponent(t),needLogin:e.needLogin||!1,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},e.other||{}))),success:a,complete:r,fail:o}))}else En((0,d.Z)({url:t,fail:o,complete:r},s))},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeRouteChange,n=(0,H.Z)(e,Rn);t&&t(),Vn(n)},Mn=n(32180)["document"];function Bn(e){if(!Mn)return null;for(var t=Mn.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(e==i[0].trim())return decodeURIComponent(i[1])}return null}var Un=n(32180)["navigator"],Gn=function(){function e(){(0,p.Z)(this,e),(0,g.Z)(this,"appId","h5"),(0,g.Z)(this,"env",At())}return(0,f.Z)(e,[{key:"getApplicationInfo",value:function(){return{locale:Bn("ibu_h5_local"),userAgent:Un.userAgent}}}]),e}(),Hn=(new Gn,function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,p.Z)(this,n),i=t.call(this,e),i.state={},i}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?24:t,i=e.text,o=void 0===i?"\u5373\u5c06\u5448\u73b0":i,r=e.fontStyle,a=void 0===r?{}:r,s=e.style,l=e.url,u=void 0===l?"https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png":l,d=e.className,p=e.fontClassName;return(0,c.jsxs)(_.View,{className:R("xt-loading",d),style:s,children:[(0,c.jsx)(_.Image,{src:u,style:{width:n,height:n,animation:"xtaroloadingrotate 0.7s linear infinite"},mode:"aspectFit"}),(0,c.jsx)(_.Text,{className:R("xt-loading__text",p),style:a,children:o})]})}}]),n}(l.Component)),zn=Hn,qn=function(e){var t=e.resizeMode,n=void 0===t?"cover":t,i=e.source,o={center:"center",contain:"aspectFit",cover:"aspectFill",repeat:void 0,stretch:"scaleToFill"},r=function(e){return o[e]},a=function(e){var t,n=!Re();return n||(e=null===(t=e)||void 0===t?void 0:t.replace(/(jpg|png)_\.webp/,"$1")),e},s=(0,l.useState)(r(n)),c=(0,ke.Z)(s,2),u=c[0],d=c[1],p=(0,l.useState)(a(i?i.uri:"")),f=(0,ke.Z)(p,2),h=f[0],m=f[1];return(0,l.useEffect)((function(){d(r(n))}),[n]),(0,l.useEffect)((function(){m(a(i?i.uri:""))}),[i]),{mode:u,src:h}},Kn=qn,Wn=["children","imageRef","style","imageStyle","className","imageClassName"],Xn=l.forwardRef((function(e,t){var n=e.children,i=e.imageRef,o=e.style,r=void 0===o?{}:o,a=e.imageStyle,s=void 0===a?{}:a,l=e.className,u=e.imageClassName,p=(0,H.Z)(e,Wn),f=Kn(e),h=f.mode,m=f.src,v=r.width,g=r.height;return(0,c.jsxs)(_.View,{ref:t,className:R("xt-imagebackground",l),style:r,children:[(0,c.jsx)(_.Image,(0,d.Z)({ref:i,src:m,className:R("xt-imagebackground__image",u),style:(0,d.Z)({width:v||"100%",height:g||"100%"},s),mode:h,webp:!0},p)),n]})})),Yn=Xn;function Qn(e,t){var n=l.lazy(e),i=t||{},o=i.loading;return function(e){return(0,c.jsx)(l.Suspense,{fallback:o?(0,c.jsx)(o,{}):null,children:(0,c.jsx)(n,(0,d.Z)({},e))})}}var Jn=Qn,$n=["url","className","style","numberOfLines","onClick"],ei=l.forwardRef((function(e,t){var n=e||{},i=n.url,o=n.className,r=n.style,a=n.numberOfLines,s=n.onClick,u=(0,H.Z)(n,$n),p=(0,l.useCallback)((function(e){i&&An({url:i}),s&&s(e)}),[i]),f=(0,l.useMemo)((function(){var e=Number(a);return!e||e<=0?["",{}]:1===e?["xt-link_single_line",{}]:["xt-link_multy_line",{"-webkit-line-clamp":"".concat(e)}]}),[a]),h=(0,ke.Z)(f,2),m=h[0],v=h[1];return(0,c.jsx)(_.Text,(0,d.Z)((0,d.Z)({},u),{},{className:R("xt-link",o,m),style:L(r,v),numberOfLines:"".concat(a),onClick:p,ref:t}))})),ti=(Y(ei),function(e){return e["ctrip"]="ctrip",e["trip"]="trip",e}(ti||{})),ni=function(){function e(){(0,p.Z)(this,e)}return(0,f.Z)(e,null,[{key:"getEmojiMap",value:function(e,t,n){var i="trip"===e,o=t?i?this.CACHE_TRIP_KEY_GIF:this.CACHE_KEY_GIF:i?this.CACHE_TRIP_KEY:this.CACHE_KEY,r=on.getSync(o)||{};return r&&0!==Object.keys(r).length||("function"===typeof n&&this.callbackQueue.push(n),this.fetchEmojiMap(e,t)),r}},{key:"clearCallbackQueue",value:function(){var e=null;while(e=this.callbackQueue.shift())e&&"function"===typeof e&&e()}},{key:"parseStyleName",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"parseStringStyle",value:function(e){for(var t=(e||"").replace(/[\s|\n]/g,"").split(";"),n={},i=0;i<t.length;i++){var o=t[i].split(":"),r=this.parseStyleName(o[0]),a=o[1];r&&a&&(n[r]=a)}return n}},{key:"fetchEmojiMap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti.ctrip,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isFetching[t]||(this.isFetching[t]=!0,Sn([{url:"https://m.".concat(t,".com/restapi/soa2/19530/getEmojiImageMap"),method:"POST",data:{site:t,type:n?"gif":"image"}}]).then((function(i){var o=i[0]||{},r=o.data;try{var a=r.data&&(n?r.data.gifMap:r.data.map);if(a&&Object.keys(a).length>0){var s=n?"trip"===t?e.CACHE_TRIP_KEY_GIF:e.CACHE_KEY_GIF:"trip"===t?e.CACHE_TRIP_KEY:e.CACHE_KEY;return on.setSync(s,a),e.clearCallbackQueue(),a}}catch(e){console.log(e)}e.isFetching[t]=!1})).catch((function(e){console.log(e)})))}},{key:"parseEmojiText",value:function(t,n){if(!t)return"";var i=n.site,o=void 0===i?ti.ctrip:i,r=n.showGif,a=void 0===r||r,s=n.callback,l=e.getEmojiMap(o,a,s)||{};return e.getResult(t,l,n)}},{key:"parseEmojiContentArray",value:function(t,n){if(!t)return[{content:t,type:"text"}];var i=n.site,o=void 0===i?ti.ctrip:i,r=n.showGif,a=void 0===r||r,s=n.callback,l=e.getEmojiMap(o,a,s)||{};return this.getEmojiContentArray(t,l,n)}},{key:"getEmojiContentArray",value:function(e,t,n){var i=[],o=0;while(o<e.length){if("["===e[o]){var r=e.indexOf("]",o+1);if(-1!==r){var a=e.substring(o+1,r);t[a]?i.push({content:this.getEmojiByKey(a,t,n),type:"emoji"}):i.push({content:"[".concat(a,"]"),type:"text"}),o=r}else{var s=e.substring(o,e.length);i.push({content:s,type:"text"}),o=e.length}}else{var l=e.indexOf("[",o+1);if(-1!==l){var c=e.substring(o,l);i.push({content:c,type:"text"}),o=l-1}else{var u=e.substring(o,e.length);i.push({content:u,type:"text"}),o=e.length}}o++}return i}},{key:"getResult",value:function(t,n,i){var o=Object.keys(n),r=/\[[^(\[|\])]+\]/g,a=t.match(r);if(!a)return t;for(var s=e.handleUniqueArray(a),l=i.emojiClassName,c=void 0===l?"":l,u=i.emojiStyles,d=void 0===u?"":u,p=t,f=0;f<s.length;f++){var h=s[f],m=h.substring(1,h.length-1);if(-1!==o.indexOf(m)){var _=this.getEmojiByKey(m,n,i),v='<img class="'.concat(c,'" style="').concat(d,'" src="').concat(_,'" alt="').concat(h,'" />'),g=e.replaceAll(p,h,v);p=g}}return p}},{key:"getEmojiByKey",value:function(e,t,n){var i="",o="",r=null===n||void 0===n?void 0:n.showGif;return r&&"object"===(0,u.Z)(t[e])?(i=t[e].gif||"",o=t[e].image):o="object"===(0,u.Z)(t[e])?t[e].image:t[e],r&&i||o}},{key:"replaceAll",value:function(e,t,n){var i="",o=e,r=t.length;while(o.indexOf(t)>-1){var a=o.indexOf(t);i+=o.substring(0,a),i+=n;var s=o.substring(a+r);o=s}return i+=o,i}},{key:"handleUniqueArray",value:function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}}]),e}();(0,g.Z)(ni,"CACHE_KEY","XTARO_EMOJI_MAP"),(0,g.Z)(ni,"CACHE_KEY_GIF","XTARO_EMOJI_MAP_GIF"),(0,g.Z)(ni,"CACHE_TRIP_KEY","XTARO_EMOJI_MAP_TRIP"),(0,g.Z)(ni,"CACHE_TRIP_KEY_GIF","XTARO_EMOJI_MAP_TRIP_GIF"),(0,g.Z)(ni,"isFetching",{ctrip:!1,trip:!1}),(0,g.Z)(ni,"callbackQueue",[]);var ii=["children","columnData"],oi=function(e){e.children,e.columnData,(0,H.Z)(e,ii);return(0,c.jsx)(_.PickerViewColumn,(0,d.Z)({className:"column-style"},e))};oi.displayName="_XPickerViewColumn";q().component.ocr;var ri={CTRIP:"https://dimg04.c-ctrip.com/images",TRIP:"https://ak-d.tripcdn.com/images"},ai=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(){var t,n,i,o,r,a,s,l,c,u,d,p;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Cn.request([{url:"/restapi/soa2/11838/json/getUserInfo",data:{bizType:"BASE"},queryConditionList:[{key:"NeedBindInfo",value:"1"}]}]);case 2:if(i=e.sent,"Success"===(null===i||void 0===i||null===(t=i[0])||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.ResponseStatus)||void 0===t?void 0:t.Ack)){e.next=5;break}return e.abrupt("return",{});case 5:return o=(null===i||void 0===i||null===(n=i[0])||void 0===n?void 0:n.data)||{},r=o.uID,a=o.thisUserInfo,s=a||{},l=s.username,c=s.email,u=s.bindMobilePhone,d=s.currentAvatar,p={email:c,mobile:u,userName:l,userId:r,headIcon:d?ri[Ft()]+d:void 0},e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),si=ai,li=function(e,t){"0"===e.ReturnCode||0===e.ReturnCode?t&&t({result:!0}):t&&t({result:!1})},ci=function(){return q().user.isLogin()},ui=function(e){var t=e.callback;q().user.login((0,d.Z)((0,d.Z)({},e),{},{callback:function(e){return li(e,t)}}))},di=q().user.logout,pi=function(e){var t=e.callback,n=e.opts;q().user.nonmemberLogin((function(e){return li(e,t)}),n)},fi=function(){var e=(0,tt.Z)((0,et.Z)().mark((function e(t){var n;return(0,et.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,si();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hi={isLogin:ci,login:ui,logout:di,nonMemberLogin:pi,getUserInfo:fi},mi=function(){function e(t){(0,p.Z)(this,e),(0,g.Z)(this,"_number",0),(0,g.Z)(this,"symbol",void 0),(0,g.Z)(this,"value",0),(0,g.Z)(this,"maximumFractionDigits",0),(0,g.Z)(this,"_functionMap",{"Kilometer-Mile":function(e){return 0},"Mile-Kilometer":function(e){return 0},"Kilometer-Feet":function(e){return 0},"Feet-Kilometer":function(e){return 0},"Kilometer-Meter":function(e){return 0},"Meter-Kilometer":function(e){return 0},"Meter-Mile":function(e){return 0},"Mile-Meter":function(e){return 0},"Meter-Feet":function(e){return 0},"Feet-Meter":function(e){return 0},"Feet-Mile":function(e){return 0},"Mile-Feet":function(e){return 0},"Inch-centimeter":function(e){return 0},"centimeter-Inch":function(e){return 0},"SquareMeter-SquareFeet":function(e){return 0},"SquareFeet-SquareMeter":function(e){return 0},"Celsius-Fahrenheit":function(e){return 0},"Fahrenheit-Celsius":function(e){return 0},"Kilogram-Pound":function(e){return 0},"Pound-Kilogram":function(e){return 0}})}return(0,f.Z)(e,[{key:"convert",value:function(e,t){return 0}},{key:"convertToPreferences",value:function(e){return 0}}],[{key:"preferfenceToType",value:function(e){return""}}]),e}();(0,g.Z)(mi,"KilometerType",""),(0,g.Z)(mi,"MileType",""),(0,g.Z)(mi,"SquareMeterType",""),(0,g.Z)(mi,"SquareFeetType",""),(0,g.Z)(mi,"CelsiusType",""),(0,g.Z)(mi,"FahrenheitType",""),(0,g.Z)(mi,"MeterType",""),(0,g.Z)(mi,"FeetType",""),(0,g.Z)(mi,"KilogramType",""),(0,g.Z)(mi,"PoundType",""),(0,g.Z)(mi,"PercentType",""),(0,g.Z)(mi,"centimeterType",""),(0,g.Z)(mi,"InchType",""),(0,g.Z)(mi,"symbolMap",{Mile:"",Kilometer:"",SquareFeet:"",SquareMeter:"",Celsius:"",Fahrenheit:"",Meter:"",Feet:"",Kilogram:"",Pound:"",Percent:"",centimeter:"",Inch:""})},14062:function(e,t,n){"use strict";var i=function(){};t["Z"]={isBaiduMap:function(){return!1},getThis:function(){return i},getBaseData:function(){return i},setNaScrollTop:function(){return i},register:function(){return i},gotoTab:function(){return i},changeDetailPageMode:function(){return i},on:function(){return i},setNaScrollable:function(){return i}}},44047:function(e,t){"use strict";var n={isEventExistPromise:function(e){return Promise.resolve(1)},addEventPromise:function(e){return Promise.resolve(1)}};t["Z"]=n},71190:function(e,t,n){"use strict";var i=n(85187),o=n(79756),r={show:function(e){if(e){var t="",n="",r=!(!e.btnOK||2!=e.btnOK.length),a=function(){},s=function(){};if(e.btnOK&&e.btnOK.length>0){var l=e.btnOK;1===l.length?n=l[0]:(t=l[0],n=l[1])}if(e.btnCallBack&&e.btnCallBack.length>0){var c=e.btnCallBack;1===c.length?s=c[0]:(a=c[0],s=c[1])}o["default"].showModal({title:e.title||"",content:e.content||"",cancelText:r||i.hj.isMini()?t||"\u53d6\u6d88":null,confirmText:n||"\u786e\u8ba4",showCancel:r,success:function(e){i.hj.isAlipay()?e.confirm?s():a():e.confirm?s():e.cancel&&a()}})}}};t["Z"]=r},44142:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var i=n(85187),o=n(32180)["window"],r={register:function(e,t,n){var r,a;n&&(null===i.Y8||void 0===i.Y8||null===(r=i.Y8.Observer)||void 0===r||r.addObserverForKey(e,(function(e){var n;if(console.log(e,"addObserverForKey============"),null!==e&&void 0!==e&&null!==(n=e.options)&&void 0!==n&&null!==(n=n.detail)&&void 0!==n&&n.data){var i,o=null===e||void 0===e||null===(i=e.options)||void 0===i||null===(i=i.detail)||void 0===i?void 0:i.data;t&&t(Array.isArray(o)?null===o||void 0===o?void 0:o[0]:o)}else t&&t(e)})),"undefined"!==typeof o&&(null===(a=o)||void 0===a||null===(a=a["CtripEvent"])||void 0===a||a.addEventListener(e,t)))},destroy:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"resize",n=arguments.length>1?arguments[1]:void 0;console.log("destroy============="),null===i.Y8||void 0===i.Y8||null===(e=i.Y8.Observer)||void 0===e||e.removeObserverForKey(t,n)},send:function(e,t){var n;null===i.Y8||void 0===i.Y8||null===(n=i.Y8.Observer)||void 0===n||n.noti(e,t)}}},73954:function(e,t,n){"use strict";var i=n(85187),o=n(13878),r=function(){return{clientInfo:{currency:"CNY",locale:"zh-CN",pageId:(0,o.dD)().toString(),channelId:"",version:"8.2.2",appPlatform:"",extension:[],syscode:"30",cid:""},enviroment:i.GI.getDevEnv()}};t["Z"]=r},13878:function(e,t,n){"use strict";n.d(t,{LV:function(){return h},ku:function(){return f},b6:function(){return p},dD:function(){return l},FD:function(){return d},PX:function(){return a},bw:function(){return u}});var i=function(){return""},o=(n(85187),n(32180)["window"],new Map),r="",a=function(e){var t=e.pageId,n=String(Math.ceil(1e8*Math.random()));s(t),c(n)},s=function(e){return r=e},l=function(){return r},c=function(e){return e},u={targetRef:"",setRef:function(e){e=void 0===e?null===i||void 0===i?void 0:i():e,this.targetRef=e},getRef:function(){return this.targetRef}},d=function(e,t){o.set(e,t)},p=function(e){return o.get(e)},f=function(e){o.delete(e)},h=function(){o.clear()}},65167:function(e,t,n){"use strict";n.d(t,{Gx:function(){return x},Zw:function(){return y},FN:function(){return g},eV:function(){return v}});var i=n(79301),o=n(95308),r=n(73954),a=n(85187),s=n(78894),l=(n(13878),n(32180)["window"],n(32180)["document"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a.hj.isInMini(e)){var t,n=a.hj.isInServer()?{}:(0,s.vn)((null===(t=location)||void 0===t?void 0:t.href)||"");return"H5"!==n.isNotCtripMini}return!1});var c=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u={weapp:"WAP/WECHATAPP",alipay:"WAP/ALIPAYAPP",tt:"WAP/TOUTIAOAPP",swan:"WAP/BAIDUAPP",kwai:"WAP/KUAISHOUAPP",quick:"WAP/QUICKAPP"},d=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var i={PROD:"https://sec-m.ctrip.com",FAT:"http://gateway.m.fws.qa.nt.ctripcorp.com"}[a.GI.getDevEnv()],o={url:"".concat(i,"/restapi/soa2/12530/json/crawlerScripting"),fixedParams:t,getScriptFromRsp:function(e){return e&&e.data&&e.data.data&&e.data.data.script},head:(0,r.Z)(),callback:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fingerprintKeys,o=n.crawlerKey;"string"!==typeof t&&(t="");var r={crawlerKey:t,MiniType:a.hj.isBaidu()?u.swan:"WAP/WECHATAPP"};i&&o&&(r={fingerprintKeys:i,crawlerKey:o}),e(r)}};a.Y8&&a.Y8.createAntiSpiderRequest?a.Y8.createAntiSpiderRequest(o):n(null)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=a.hj.isBaidu,f=a.hj.isInApp,h=(0,r.Z)(),m={appid:"wx0e6ed4f51db9d078"};(p()||l()||f())&&(m.head={syscode:h.clientInfo.syscode});var _=[],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_=e},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/");return t=t.pop(),t=t.split("?"),t=t.pop(),_.indexOf(t)>-1},y=function(){c(m)},x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(m);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},16911:function(e,t,n){"use strict";var i=n(22276),o=n(90129),r=n(93212),a=n(79301),s=n(298),l=n(95308),c=n(85187),u=n(45710),d=n(65167),p=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,n,p,h,m,_){var v,g,y,x,b,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v=_||{},g=v.beforeWaitPromList,y=void 0===g?[]:g,x=v.afterWaitPromList,b=void 0===x?[]:x,k=function(e){var t,n=[];if(e.forEach((function(e){"function"!==typeof e&&null!==e&&void 0!==e&&e.__SEND_LOG_ERROR__&&n.push(null===e||void 0===e?void 0:e.__SEND_LOG_ERROR__)})),!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],l=[];n.forEach((function(e){var t;s.push({url:e.url,type:e.type,stack:null===(t=e.data)||void 0===t?void 0:t.stack}),l.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(l)}catch(e){console.log("get response tostring stack msg error",e)}var c={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,u.Vg)(c)}catch(e){}}},w=[],I={},Z={},T=0,S=t.every((function(e){return!!e.__isNotCoreApi})),t.forEach((function(e){if(c.hj.isInServer()&&c.hj.isH5())if("dev"===process.env.CURRENT_DEV_ENV){var t=c.GI.getDevEnv(h);t===c.GI.DEV_ENV_TYPE.FAT?void 0===e.isSOAAgent&&(e.isSOAAgent=!0,e.useAutoParseSoaParams=!0):(e.isSOAAgent=!1,e.useAutoParseSoaParams=!1)}else void 0===e.isSOAAgent&&(e.isSOAAgent=!0,e.useAutoParseSoaParams=!0);c.hj.isApp()&&e.data.head&&e.data.head.extension&&(e.others={extension:e.data.head.extension},delete e.data.head),e.beforeHandleData=function(){var t=(0,l.Z)((0,a.Z)().mark((function t(n){var i,o;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(0,d.FN)(e.url)){t.next=14;break}return t.prev=1,t.next=4,(0,d.Gx)();case 4:i=t.sent,o=[],i&&i.crawlerKey&&(o=[{name:"crawlerKey",value:i.crawlerKey}],i.fingerprintKeys&&o.push({name:"fingerprintKeys",value:i.fingerprintKeys}),i.MiniType&&o.push({name:"MiniType",value:i.MiniType})),n.head=(0,s.Z)((0,s.Z)({},n.head),{},{extension:n.head&&n.head.extension?n.head.extension.concat(o):o}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0,"\u53cd\u722c\u62a5\u9519");case 13:return t.abrupt("return",n);case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();var i=e.isFromPrefetch,o=function(e,t,n){if(!i)return{url:e,data:t,type:n}};e.afterHandleData&&"function"===typeof e.afterHandleData||(e.afterHandleData=function(t){var n,i,a=null===t||void 0===t?void 0:t.data,s=!t.isSuccess||"Success"!==(null===(n=a)||void 0===n||null===(n=n.ResponseStatus)||void 0===n?void 0:n.Ack)&&"Success"!==(null===(i=a)||void 0===i||null===(i=i.responseStatus)||void 0===i?void 0:i.Ack),l=e.timeout,c=!a||"string"===typeof a;return s&&!e.isFromPrefetch&&a&&!l&&"object"===(0,r.Z)(a)&&(a.__hasSendLogError=!0),c&&(a={__invalidResponse:a,__hasSendLogError:!0}),!s||e.isFromPrefetch||l||(a.__SEND_LOG_ERROR__=o(e.url,t,t.isSuccess?"tnt_SOA_Ack_Fail_detail":"tnt_SOA_Network_Fail_detail")),a.__API_NAME__=e.__API_NAME__||e.url,a});var u="".concat(e.url,"__").concat(Math.random(),"__").concat(Date.now());if(S||c.hj.isH5()||!e.__isNotCoreApi)T++,w.push(e.__delay__>0?new Promise((function(t){setTimeout((function(){c.x.request(e,n,p,h).then((function(e){return t(null===e||void 0===e?void 0:e[0]),null===e||void 0===e?void 0:e[0]})).finally((function(){T--,0===T&&Object.keys(Z).forEach((function(e){var t=Z[e];I[e]&&I[e]((function(){return t})),delete I[e],delete Z[e]}))}))}),e.__delay__)})):c.x.request(e,n,p,h).then((function(e){return null===e||void 0===e?void 0:e[0]})).finally((function(){T--,0===T&&Object.keys(Z).forEach((function(e){var t=Z[e];I[e]&&I[e]((function(){return t})),delete I[e],delete Z[e]}))})));else{w.push(new Promise((function(e){I[u]=function(t){console.log("notCoreRequestResolveMap",u,t),e(t)}})));var f=null;f=e.__delay__>0?new Promise((function(t,i){setTimeout((function(){c.x.request(e,n,p,h).then((function(e){return I[u]&&I[u](null===e||void 0===e?void 0:e[0]),delete I[u],delete Z[u],t(null===e||void 0===e?void 0:e[0]),null===e||void 0===e?void 0:e[0]})).catch((function(e){return I[u]&&I[u](null),delete I[u],delete Z[u],i(e),e}))}),e.__delay__)})):c.x.request(e,n,p,h).then((function(e){return I[u]&&I[u](null===e||void 0===e?void 0:e[0]),delete I[u],delete Z[u],null===e||void 0===e?void 0:e[0]})).catch((function(e){return I[u]&&I[u](null),delete I[u],delete Z[u],e})),Z[u]=f}})),C=Promise.all(y),P=Promise.all(b),N=Promise.all(w),e.next=13,Promise.all([C,N,P]);case 13:return D=e.sent,j=(0,o.Z)(D,3),R=j[0],L=j[1],E=j[2],V=[].concat((0,i.Z)(R),(0,i.Z)(L),(0,i.Z)(E)),m&&f(t,V,m),k(V),e.abrupt("return",V);case 22:case"end":return e.stop()}}),e)})));return function(t,n,i,o,r,a){return e.apply(this,arguments)}}(),f=function(e,t,n){try{n.needDevTrace&&t.map((function(t,i){var o,r,a;if("function"!==typeof t){var l=null===t||void 0===t||null===(o=t.ResponseStatus)||void 0===o||null===(o=o.Extension)||void 0===o?void 0:o.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));l&&(0,u.Vg)((0,s.Z)((0,s.Z)({rootMessageId:l.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},null===n||void 0===n?void 0:n.devTraceData),{},{scene:"".concat((null===(r=n.devTraceData)||void 0===r?void 0:r.scene)||""," ").concat(null===e||void 0===e||null===(a=e[i])||void 0===a?void 0:a.url)}))}}))}catch(e){}};t["ZP"]=p},45710:function(e,t,n){"use strict";n.d(t,{Vg:function(){return p},gp:function(){return u},Zz:function(){return d},bw:function(){return s}});var i=n(298),o=(n(79756),n(42826)),r=n(13878),a=function(e){try{var t,n=(0,i.Z)({devKey:"km_ticket_trace_log"},e);!n.key||null!==(t=n.jsonData)&&void 0!==t&&t.value?n.jsonData=(0,i.Z)((0,i.Z)({},n.jsonData),{pageId:String((0,r.dD)()||"")}):(n.key="tkt_5200001",n.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38",pageId:String((0,r.dD)()||"")}),(0,o.f)(n,"devtrace")}catch(e){console.log(e,"devTrace error")}},s={targetRef:"",setRef:function(e){e=void 0===e?"":e,this.targetRef=e},getRef:function(){return this.targetRef}},l="",c=function(){return{}},u=function(e){e.body instanceof Array==0&&(e.body=(0,i.Z)((0,i.Z)({},e.body),{},{traceId:l,isTaroTnt:!0},c())),e.type=e.type?e.type:"common_other";var t=0==e.type.indexOf("ttd_dev_")?e.type:"ttd_dev_".concat(e.type);e.body.length?e.body.forEach((function(e){(0,o.f)((0,i.Z)((0,i.Z)({},e),{},{key:t}),"devTrace")})):(0,o.f)((0,i.Z)((0,i.Z)({},e.body),{},{key:t}),"devTrace")},d=function(e,t){console.log("sendUbtLog",e,t),e&&t&&(e.method&&"function"===typeof e.method&&(e=e.method()),(0,o.f)(e,t))},p=a},42826:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var i=n(85187),o=function(e,t){t=t&&t.toLocaleLowerCase();try{"devtrace"==t?i.hS.logDevTrace(e.devKey||e.key,{data:JSON.stringify(e)}):"pv"==t?i.hS.logSendPV(e):i.hS.logTrace(e.key,e)}catch(e){console.log(e)}}},7560:function(e,t,n){"use strict";n.d(t,{T8:function(){return l}});var i=n(298),o=n(85187),r=n(45710),a=n(13878),s=function(){(0,r.gp)({type:"ttd_dev_pagenext_click",body:{pageId:(0,a.dD)()}})},l=function(e){o.Px.navigateTo((0,i.Z)((0,i.Z)({},e),{},{beforeRouteChange:s}))};t["ZP"]={navigateTo:l,redirectTo:o.Px.redirectTo,navigateBack:o.Px.navigateBack}},92361:function(e,t,n){"use strict";n.d(t,{ZP:function(){return p}});var i=n(298),o=n(79756),r=n(71190),a=n(85187),s=function(e){try{var t,n=(0,i.Z)({devKey:"km_ticket_trace_log"},e);!n.key||null!==(t=n.jsonData)&&void 0!==t&&t.value||(n.key="tkt_5200001",n.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38"}),a.hS.logDevTrace(n.devKey||n.key,{data:JSON.stringify(n)})}catch(e){console.log(e,"devTrace error")}},l=1500,c=null,u=function(e){if(""===e||null===e||void 0===e)return!1;var t=(e.match(/[\x00-\xff]/g)||[]).length,n=e.length,o=t+2*(n-t);return o>40&&(c&&s((0,i.Z)((0,i.Z)({},c),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),r.Z.show({content:e,btnOK:["\u77e5\u9053\u4e86"]}),!0)},d={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;u(e)||(c&&s((0,i.Z)((0,i.Z)({},c),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),o["default"].showToast({title:e||"",duration:t,icon:"none"}))},hide:function(e){}},p=d},38233:function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"W",n="",i=parseInt(e);if(!i||i<0?n="":i<100&&(n=String(i)),"K"===t)n=0===i?"":i<=100&&i?String(i):i<=1e3&&i?"".concat(100*Math.floor(i/100),"+"):i<1e7&&i?"".concat(Math.floor(i/1e3),"K+"):"9999K+";else if(i>=100&&i<1e4){var o=Math.pow(10,i.toString().length-1),r=!/^\d{1}0{2,3}$/g.test(i.toString());n=Math.floor(i/o)*o+"".concat(r?"+":"")}else i>=1e4&&(n=1e4===i?"1\u4e07":Math.floor(i/1e3)/10+"\u4e07+");return n||""}n.d(t,{Z:function(){return i}})},79992:function(e,t,n){"use strict";n.d(t,{m:function(){return l}});var i=n(298),o=n(85187),r=n(2269),a={forward:"&#xe944;",arrowdown:"&#xe32c;",arrowup:"&#xe32b;",xclosed:"&#xe004;",liked:"&#xeb91;",coupon:"&#xf42f;",clock:"&#xf108b;",help:"&#xe931;",time:"&#xe930;",download:"&#xe058;",back:"&#xe943;"},s=function(e){if("string"!=typeof e)return e;var t=e.replace(/&#x([0-9a-fA-F]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))}));return t},l=function(e){return(0,r.jsx)(o.mO,(0,i.Z)((0,i.Z)({fontFamily:"crn_font_poi_shelf"},e),{},{children:s(a[e.type])}))}},86007:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var i=n(298),o=n(79301),r=n(95308),a=n(90129),s=n(85187),l=n(71515),c=n(90201),u={breathe:"index-module_zRaFh",breathe_item:"index-module_a48ch",breathe_item_white:"index-module_MJlrt",breathe_item_block:"index-module_qYPvH"},d=n(61070),p=n(77163),f=n(2269),h=Array(10).fill(1),m=function(){var e=(0,d.TC)();return(0,f.jsx)(l.View,{className:u.breathe,children:h.map((function(t,n){return(0,f.jsx)(l.View,{className:(0,s.AK)(u.breathe_item,0===n&&u.breathe_item_white),style:(0,s.y0)((0,p.N)(e,{key:"backgroundColor",value:"gray_bg"}),0===n?(0,p.N)(e,{key:"backgroundColor",value:"white_breathe_1"}):{}),children:(0,f.jsx)(l.View,{className:u.breathe_item_block,style:(0,p.N)(e,{key:"backgroundColor",value:"white_breathe_2"})})},n)}))})},_=m,v={menu_list:"index-module_VGV8z",menu_item_before:"index-module_V7FcP",menu_item_next:"index-module__Ad_1",menu_item:"index-module_tqUqD",menu_label:"index-module_ZNVf6",menu_label_text:"index-module_khuUJ",menu_sub_title_sticky:"index-module_exfrz",menu_sub_title_text:"index-module_Zl9lD",menu_sub_title_shadow:"index-module_bpY_x",menu_label_view:"index-module_eRFmd",separator_item:"index-module_ExSTa",separator_line:"index-module_x7WKT",separator_text:"index-module_khq0C",menu_item_wrapper:"index-module_FCFyu",menu_item_white_active:"index-module_CD6Bv",menu_item_active:"index-module_uQzC8",menu_text:"index-module_Vmd17",menu_item_active_text:"index-module_xDj7k",menu_image:"index-module_QAuB5",menu_list_sticky:"index-module_nSFZB",menu_sub_title:"index-module_CXyAK"},g=n(49671),y=n(16567),x=n(67891),b=n(14062),k=n(24414),w=n(59217),I=n(32180)["document"],Z=s.GI.getPlatform()==s.GI.PLATFORM_TYPE.CRN,T=s.GI.getPlatform()==s.GI.PLATFORM_TYPE.H5,S=s.GI.getPlatform()==s.GI.PLATFORM_TYPE.Mini,C=(0,c.forwardRef)((function(e,t){var n,i,l,u=e.tabsInfoList,p=e.OtherComponent,h=e.inner,m=e.targetPageRef,_=e.stickySideBar,v=(0,c.useState)(null===u||void 0===u||null===(n=u[0])||void 0===n?void 0:n.code),k=(0,a.Z)(v,2),w=k[0],C=k[1],N=(0,c.useState)(null===u||void 0===u||null===(i=u[0])||void 0===i?void 0:i.categoryName),D=(0,a.Z)(N,2),j=D[0],R=D[1],L=(0,c.useState)(""),E=(0,a.Z)(L,2),V=E[0],A=E[1],O=(0,c.useState)(u),F=(0,a.Z)(O,2),M=F[0],B=F[1],U=(0,c.useState)(!1),G=(0,a.Z)(U,2),H=G[0],z=G[1],q=(0,c.useState)(!1),K=(0,a.Z)(q,2),W=K[0],X=K[1],Y=(0,c.useState)(!0),Q=(0,a.Z)(Y,2),J=Q[0],$=Q[1],ee=(0,c.useRef)(0),te=(0,c.useRef)(0),ne=(0,c.useState)(ee.current),ie=(0,a.Z)(ne,2),oe=ie[0],re=ie[1],ae=(0,c.useRef)(null),se=(0,c.useRef)(null),le=(0,c.useState)(!0),ce=(0,a.Z)(le,2),ue=ce[0],de=ce[1],pe=(0,c.useRef)(null),fe=(0,c.useRef)(null),he=(0,c.useState)(!0),me=(0,a.Z)(he,2),_e=me[0],ve=me[1],ge=(0,c.useState)(0),ye=(0,a.Z)(ge,2),xe=ye[0],be=ye[1];(0,g._1)({targetPageRef:m});var ke=(0,c.useRef)(null),we=(0,c.useCallback)((function(e){var t,n,i,o=(null===(t=e.detail)||void 0===t?void 0:t.scrollTop)||(null===(n=e.nativeEvent)||void 0===n?void 0:n.contentOffset.y);ee.current=o,o>0&&(te.current=o),!h&&(null===(i=pe.current)||void 0===i||i.scrollTo({y:ee.current,animated:!1}))}),[]);(0,c.useImperativeHandle)(t,(function(){return{setActiveTab:function(e){e!=w&&C(e)},setLoadingTab:function(e){A(e)},setList:function(e){B((0,y.I8)(e))},getMainRef:function(e){ae.current=e},getInSideRef:function(e){pe.current=e},getOutSideRef:function(e){se.current=e},scrollTo:function(e){var t;Z?null===(t=fe.current)||void 0===t||t.$scrollView.current.scrollTo(e):re(e.y)},setCanRender:function(e){ve(e)},getSideBarWidth:function(){return xe},setFixedTitle:function(e){z(e)},setShowSubTitle:function(){!W&&X(!0)},setShowSideBar:function(){$(!1)},setScrollHeight:function(){var e;!h&&(null===(e=fe.current)||void 0===e||e.$scrollView.current.scrollTo({y:te.current,animated:!1}))},changeScrollEnabled:function(e){de(e)}}}));var Ie=(0,c.useCallback)((function(e,t,n){var i;s.hS.logTrace(null===n||void 0===n?void 0:n.key,null===n||void 0===n?void 0:n.params),b.Z.changeDetailPageMode({mode:"full"},(function(){}));var o=t||{},r=o.noData,a=o.noDataTraceClick;C(e),null===(i=ae.current)||void 0===i||i.onTabclick(e,h),r&&s.hS.logTrace(null===a||void 0===a?void 0:a.key,null===a||void 0===a?void 0:a.params)}),[]),Ze=(0,c.useRef)([]).current,Te=(0,c.useCallback)((function(e,t){var n,i=null===e||void 0===e||null===(n=e.nativeEvent)||void 0===n?void 0:n.layout,o=i.height,r=i.width;be(r),Ze[t]=o}),[]),Se=null===x.r||void 0===x.r||null===(l=(0,x.r)())||void 0===l?void 0:l.tabHeight,Ce=(0,c.useRef)(250),Pe=(0,c.useCallback)((function(e){var t,n=null===M||void 0===M?void 0:M.findIndex((function(t){return t.code==e})),i=Ze.slice(0,n).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+t}),0),o=i+50-Ce.current/2;Z&&o<0||(Z?null===(t=fe.current)||void 0===t||t.$scrollView.current.scrollTo({y:o,animated:!1}):re(o))}),[]);(0,c.useEffect)((function(){var t,n=null===(t=fe.current)||void 0===t||null===(t=t._scrollMetrics)||void 0===t?void 0:t.visibleLength;if(Z&&n&&(Ce.current=n),T&&Se&&(Ce.current=Se),T&&!Se){var i,o=null===(i=ke.current)||void 0===i?void 0:i.clientHeight;o&&(Ce.current=o)}e.sidebarHeight&&"number"==typeof e.sidebarHeight&&(Ce.current=e.sidebarHeight),setTimeout((function(){Pe(w)}),0)}),[w]),(0,c.useEffect)((function(){T&&setTimeout((function(){for(var e=I.querySelectorAll("#layout_sidebar_item"),t=0;t<(null===e||void 0===e?void 0:e.length);t++){var n=e[t].clientHeight;Ze[t]=n}}),300)}),[]);var Ne=(0,c.useCallback)(function(){var t=(0,r.Z)((0,o.Z)().mark((function t(n,i){var r;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(S&&!Ze[i]){t.next=2;break}return t.abrupt("return");case 2:if(t.t0=n,!t.t0){t.next=7;break}return t.next=6,s.c0.getBoundingClientRect({node:n,prefixCls:e.prefixCls});case 6:t.t0=t.sent;case 7:r=t.t0,r&&(Ze[i]=r.height);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[]);(0,c.useEffect)((function(){var e=null===M||void 0===M?void 0:M.find((function(e){return e.code==w}));(null===e||void 0===e?void 0:e.categoryName)&&R(e.categoryName)}),[w]);var De=(0,d.TC)();return(0,c.useMemo)((function(){return(0,f.jsx)(P,{showSidebar:J,scrollTop:oe,SidScroll:we,scrollRef:fe,sideTabsInfoList:M,activeTab:w,inner:h,onClick:Ie,onLayout:Te,loadingTab:V,OtherComponent:p,showSubTitle:W,subTitleFix:H,activeItemName:j,sidebarRef:ke,scrollEnabled:ue,getSideHs:Ne,theme:De,canRender:_e,style:e.style,stickySideBar:_})}),[J,j,M,w,V,oe,J,W,H,De,ue,h,_e,_,Ie,Te,ke,Ne,we,fe])})),P=function(e){var t,n,o=(0,g.ji)(),r=o.metricFnObj,a=S&&e.prefixCls?l.CustomWrapper:e.stickySideBar?c.Fragment:l.View,u=e.showSidebar,d=e.scrollTop,h=e.SidScroll,m=e.scrollRef,y=e.sideTabsInfoList,b=e.activeTab,I=e.inner,T=e.onClick,C=e.onLayout,P=e.loadingTab,N=e.OtherComponent,D=e.showSubTitle,j=e.subTitleFix,R=e.activeItemName,L=e.sidebarRef,E=e.scrollEnabled,V=e.getSideHs,A=e.theme,O=e.canRender;return O?y?Z&&!y.length?null:u?(0,f.jsxs)(a,{className:"xtaro_border_box",style:(0,i.Z)((0,i.Z)({},e.style),{},{display:u?"flex":"none"}),ref:L,children:[(0,f.jsxs)(l.ScrollView,{className:(0,s.AK)(v.menu_list,v.menu_list_sticky),style:e.sidebarHeight>0?{maxHeight:e.sidebarHeight}:null,scrollY:E,showsVerticalScrollIndicator:!1,showScrollbar:!1,scrollTop:d,enhanced:!0,scrollEnabled:!I,onScroll:h,ref:function(e){return m.current=e},contentContainerStyle:{paddingBottom:44},children:[null===y||void 0===y?void 0:y.map((function(e,t){var n,o,a,c,u,d,h,m,_=e.code==b,g=(null===(n=y[t+1])||void 0===n?void 0:n.code)==b,w=0!=t&&(null===(o=y[t-1])||void 0===o?void 0:o.code)==b,S=null===r||void 0===r?void 0:r.tabInfoClickFn({anchorId:null===e||void 0===e||null===(a=e.anchorIdArray)||void 0===a?void 0:a[0]}),N=null===r||void 0===r?void 0:r.tabInfoExposureFn({anchorId:null===e||void 0===e||null===(c=e.anchorIdArray)||void 0===c?void 0:c[0]}),D=(null===e||void 0===e?void 0:e.noDataMetric)||{},j=null===r||void 0===r?void 0:r.tabInfoNoDataExposureFn({anchorId:null===e||void 0===e||null===(u=e.anchorIdArray)||void 0===u?void 0:u[0],eventresult:null===e||void 0===e?void 0:e.eventresult,noDataInfo:{filterbutton:null!==(d=null===D||void 0===D?void 0:D.filterbutton)&&void 0!==d?d:"",filtervalue:null!==(h=null===D||void 0===D?void 0:D.filtervalue)&&void 0!==h?h:""}}),R=null===r||void 0===r?void 0:r.tabInfoNoDataClickFn({anchorId:null===e||void 0===e||null===(m=e.anchorIdArray)||void 0===m?void 0:m[0],eventresult:null===e||void 0===e?void 0:e.eventresult}),L=1==(null===e||void 0===e?void 0:e.eventresult),E={noData:L,noDataTraceClick:R},O=(0,x.r)();return(0,f.jsxs)(s.En,{testID:I&&N?N:void 0,onClick:function(){var t;3!==e.type&&(T(e.code,E,S),null===O||void 0===O||null===(t=O.forceUpdatePoiShelf)||void 0===t||t.call(O),setTimeout((function(){var e;null===O||void 0===O||null===(e=O.forceUpdatePoiShelf)||void 0===e||e.call(O)}),0))},className:(0,s.AK)(v.menu_item_wrapper),onLayout:function(e){return C(e,t)},id:"layout_sidebar_item",style:(0,p.N)(A,{key:"backgroundColor",value:"white"}),ref:function(e){return V(e,t)},children:[3!==e.type?(0,f.jsxs)(f.Fragment,{children:[e.label?(0,f.jsx)(l.View,{className:v.menu_label_view,style:(0,i.Z)((0,i.Z)({},(0,p.N)(A,{key:"borderColor",value:"white"})),{},{borderWidth:k.Z}),children:(0,f.jsx)(s.cn,{start:{x:0,y:0},end:{x:1,y:0},colors:"\u4e0d\u53ef\u8ba2"!=e.label?["rgb(255, 119, 0) -48.22%","rgb(255, 51, 0) 100%"]:["rgb(187,187,187)","rgb(187,187,187)"],className:v.menu_label,angle:-90,children:(0,f.jsx)(s.X_,{className:v.menu_label_text,numberOfLines:"1",testID:I&&L&&j?j:void 0,children:e.label})})}):null,"\u8d85\u503c\u7cbe\u9009"==e.categoryName||"\u70ed\u95e8\u62a2\u7968"==e.categoryName?(0,f.jsx)(l.Image,{src:_?"https://dimg04.c-ctrip.com/images/0AS5412000a7od55q6F0B.png":"https://dimg04.c-ctrip.com/images/0AS1v12000a7od1sdFDB9.png",className:v.menu_image}):null,_?(0,f.jsx)(l.View,{className:v.menu_item_white_active,style:(0,p.N)(A,{key:"backgroundColor",value:"white"})}):null,(0,f.jsxs)(l.View,{className:(0,s.AK)(g&&!Z&&v.menu_item_before,w&&!Z&&v.menu_item_next,v.menu_item,_&&v.menu_item_active),style:_?{backgroundColor:"#0066f6"}:(0,p.N)(A,{key:"backgroundColor",value:"gray_bg"}),children:[P==b&&b==e.code&&(0,f.jsx)(l.View,{style:{position:"absolute"},children:(0,f.jsx)(s.OK,{url:"https://dimg04.c-ctrip.com/images/1o51q12000bbwo2ihA976.png",fontStyle:{display:"none"},style:{backgroundColor:"transparent"}})}),(0,f.jsx)(l.Text,{className:(0,s.AK)(v.menu_text,_&&v.menu_item_active_text),numberOfLines:"3",style:(0,i.Z)((0,i.Z)({opacity:P===b&&b==e.code?0:1},5===e.categoryName.length?{maxWidth:Z?45:"3.3em"}:null),_?{color:"white"}:(0,p.N)(A,{key:"color",value:"black"})),children:e.categoryName})]})]}):(0,f.jsxs)(l.View,{className:(0,s.AK)(v.separator_item),children:[(0,f.jsx)(l.View,{className:(0,s.AK)(v.separator_line)}),(0,f.jsx)(l.Text,{className:(0,s.AK)(v.separator_text),children:e.categoryName}),(0,f.jsx)(l.View,{className:(0,s.AK)(v.separator_line)})]}),_?(0,f.jsx)(l.View,{className:v.menu_item_white_active,style:(0,p.N)(A,{key:"backgroundColor",value:"white"})}):null]},t)})),N?(0,f.jsx)(N,{}):null]}),D&&j&&!(0,w.jJ)()&&!(("\u8d85\u503c\u7cbe\u9009"==R||"\u70ed\u95e8\u62a2\u7968"==R)&&("\u8d85\u503c\u7cbe\u9009"==(null===(t=y[0])||void 0===t?void 0:t.categoryName)||"\u70ed\u95e8\u62a2\u7968"==(null===(n=y[0])||void 0===n?void 0:n.categoryName)))&&(0,f.jsxs)(l.View,{className:(0,s.AK)(v.menu_sub_title,e.stickySideBar?v.menu_sub_title_sticky:null),style:(0,p.N)(A,{key:"backgroundColor",value:"white"}),children:[(0,f.jsx)(l.Text,{className:v.menu_sub_title_text,style:(0,p.N)(A,{key:"color",value:"black"}),children:R}),(0,f.jsx)(s.cn,{start:{x:0,y:0},end:{x:0,y:1},locations:[.2,1],colors:["rgba(0, 0, 0, 0.05)","transparent"],className:v.menu_sub_title_shadow})]})]}):null:(0,f.jsx)(_,{}):null},N=(0,c.memo)(C,(function(e,t){var n,i;return(null===(n=e.tabsInfoList)||void 0===n?void 0:n.length)==(null===(i=t.tabsInfoList)||void 0===i?void 0:i.length)&&e.sidebarHeight==t.sidebarHeight}))},98130:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(71515),o=n(85187),r=n(79992),a={save:"index-module_bg59G",save_icon:"index-module_zXhl0",save_image:"index-module_smXOO",save_button:"index-module_q6YYr",save_button_text:"index-module_GhElO",save_text:"index-module_F8iDr",save_tips:"index-module_SgvY0",save_tips_width:"index-module_UR2nI"},s=function(e){},l=n(3795),c=function(e){var t=e.detailUrl,n=e.metricData,i=e.qrLoadSuccess,r=void 0===i||i,a=t,c=r,u=function(e){var t=l.X4.appointPopSaveQrcodeClickFn(n);o.hS.logTrace(t.key,t.params),s(e)};return{saveImage:u,imageUrl:a,showButton:c}},u=n(90201),d=n(2269),p=function(e){var t=c(e),n=t.saveImage,s=t.imageUrl,l=t.showButton;return(0,d.jsxs)(i.View,{className:a.save,children:[(0,d.jsx)(o.Y,{src:l?s:"https://dimg04.c-ctrip.com/images/1o56b12000cl5xy7vBCA0.png",className:a.save_image}),(0,d.jsxs)(i.View,{className:a.save_tips,children:[l?(0,d.jsx)(r.m,{type:"download",className:a.save_icon}):null,(0,d.jsx)(i.Text,{className:(0,o.AK)(a.save_text,l?"":a.save_tips_width),children:l?"\u4fdd\u5b58\u56fe\u7247\uff0c\u5fae\u4fe1\u626b\u4e00\u626b\u8fdb\u5165":"\u62b1\u6b49\uff0c\u4e8c\u7ef4\u7801\u6709\u95ee\u9898\u8bf7\u8fd4\u56de\u67e5\u770b\u5176\u4ed6\u4fe1\u606f"})]}),l?(0,d.jsx)(o.En,{className:a.save_button,onClick:function(){n(s)},children:(0,d.jsx)(i.Text,{className:a.save_button_text,children:"\u4fdd\u5b58\u4e8c\u7ef4\u7801"})}):null]})},f=(0,u.memo)(p)},82410:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ti}});var i=n(90201),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=n(298),c=n(81876),u=n(79038),d=n(59772),p=n(45023),f=n(2823),h=n(22276),m=function(e,t){var n,i,o;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),Number(((e*o+t*o)/o).toFixed(Math.max(n,i)))},_=function(e,t){var n,i,o,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),r=n>=i?n:i,Number(((e*o-t*o)/o).toFixed(r))},v=function(e,t){var n=0,i=e.toString(),o=t.toString();try{n+=i.split(".")[1].length}catch(e){}try{n+=o.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)},g=n(33231),y=function(e,t){var n,i,o=e||{},r=o.promotions,a=o.priceInfo,s=o.marketPriceInfo,c=o.flags,u=o.tags,d=o.preposeInstallmentInfo,p=a||{},f=p.price;f||0===f||(f=(null===(i=t.state)||void 0===i||null===(i=i.footer)||void 0===i?void 0:i.total)||0);var h=Number(f),v="";null!==s&&void 0!==s&&s.price&&(null===s||void 0===s?void 0:s.price)>(null===a||void 0===a?void 0:a.price)&&(v=null===s||void 0===s?void 0:s.price);var y=[];u&&u.length&&u.forEach((function(e){var t=e.tagType,n=e.tagItems;"Reservation"==t?n.forEach((function(e){["BookingSuccessCanUse","ReadyToUse"].includes(e.tagCode)&&y.push(e.tagName)})):["Refund","Apply","ticketsresourcetag"].includes(t)&&n.forEach((function(e){y.push(e.tagName)}))}));var x=t.state,b=x.ticketInfo,k=x.choicePeopleId,w=x.peopleProperties,I="";if(k){var Z=w.find((function(e){return e.peopleId==k}));I=null===Z||void 0===Z?void 0:Z.peopleName}else I=(null===b||void 0===b?void 0:b.ticketResourceName)||"";var T=[{total:{name:I,marketPrice:v?"\xa5".concat(v):"",price:"\xa5"+f}}],S=[],C=0,P=v?Number(v):0,N=_(P,h),D=N>0?N:0;D&&S.push({total:{name:"\u643a\u7a0b\u9884\u8ba2\u4f18\u60e0",price:"-\xa5".concat(D),discountText:"\u60e0",isNoDash:!0}}),r&&r.length&&r.map((function(e){if(0==e.promotionstatus){var t,n,i=2==e.reductionMode&&3==e.type?e.startAmount:e.amount;S.push({total:{name:null===(t=e.descriptions)||void 0===t?void 0:t[0],price:"-\xa5".concat(i),descs:(null===(n=e.descriptions)||void 0===n?void 0:n.slice(1))||[],discountText:3==e.type?"\u60e0":"\u51cf",isNoDash:!0}}),C=m(C,i)}})),S.length&&T.push.apply(T,S);var j,R=_(f,C)>0?_(f,C):0;if(null!==d&&void 0!==d&&d.discountAmount){var L=d.discountAmount;C=m(C,L),R=_(R,L)>0?_(R,L):0,T.push({total:{name:"\u4f7f\u7528\u62ff\u53bb\u82b1\u4ed8\u6b3e\uff08\u65b0\u5ba2\u518d\u51cf\xa5".concat(L,"\uff09"),price:"-\xa5"+L}}),j=!0}else if(null!==d&&void 0!==d&&d.descInfoList){var E,V=null===(E=d.descInfoList)||void 0===E?void 0:E.find((function(e){return 1==e.type}));null!==V&&void 0!==V&&V.desc&&g.ZP.show(null===V||void 0===V?void 0:V.desc)}var A=0;P&&P>h&&h>R?A=_(P,R):P&&P>h&&h==R?A=D:(!P||P<=h)&&h>R&&(A=_(h,R));var O=null===(n=t.state)||void 0===n||null===(n=n.priceInfo)||void 0===n?void 0:n.priceTipList,F={title:"\u4f18\u60e0\u8bf4\u660e",content:T,priceTipList:O};return(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},t.state.footer),{deductDesc:A>0?"\u5df2\u4f18\u60e0".concat(A):"",marketPrice:v,subPriceDes:(c||[]).indexOf("minPriceFlag")<0?"":"\u8d77",total:R,isLoading:!1,showTags:y}),C||v?{footPop:F}:{}),{},{hasNaquhua:j})},x=function(e,t,n,i,o){var r=i.request,a=r.aggregation,s=r.usePage,l=i.countArr,c=void 0===l?[]:l,u=i.resources,d=void 0===u?[]:u,p=i.multiCalendar,h=i.footer,_=i.isNewGuideSku,g=i.selectedGuideId,y=i.additionalSale;!o&&(o=i.actMinPrice);var x=null===y||void 0===y?void 0:y.additionalResources.find((function(e){return e.salePropertyValueId==g&&e.available})),b=(null===x||void 0===x?void 0:x.price)||0,k={showTags:null===h||void 0===h?void 0:h.showTags};if(e){if(s==f.zh.actSku){var w=0,I=!1;(p||[t]).map((function(e){c.map((function(t,i){var o,r=n.find((function(e){var t;return null===(t=d[i])||void 0===t?void 0:t.mixedIds.includes(e)})),a=null===(o=e.resources)||void 0===o?void 0:o.find((function(e){return e.resourceId==r}));a&&!a.unAvailableReason&&t&&(I=!0,w=m(v((null===a||void 0===a?void 0:a.salePrice)||0,t),w))}))})),k.total=I?m(w,b):""}else k.total=t.price;k.isGrayBtn=!!a,k.subPriceDes=s==f.zh.actSku||t.hideFrom?"":"\u8d77"}else k.total=_&&(t&&m(t.price,b)||m(o,b))||"",k.isGrayBtn=!0,k.subPriceDes=_&&(t&&m(t.price,b)||m(o,b))?"\u8d77":"";return k.isLoading=!1,k},b=function(e,t,n){var i=n.request.aggregation,o=n.footer,r={showTags:null===o||void 0===o?void 0:o.showTags};return e?(r.total=t.price,r.isGrayBtn=!!i,r.subPriceDes=t.hideFrom?"":"\u8d77"):(r.total="",r.isGrayBtn=!0,r.subPriceDes=""),r.isLoading=!1,r},k=function(e,t){var n=t.request.aggregation,i=t.footer,o={showTags:null===i||void 0===i?void 0:i.showTags};return o.isGrayBtn=!e||!!n,o.total="",o.subPriceDes="",o.isLoading=!1,o},w={},I={save:function(e){Object.assign(w,e)},load:function(e){return w[e]},clear:function(){w={}}},Z=n(98374),T=function(e,t){var n=t.state,i=n.chioceDateData,o=n.request,r=n.saleProperties,a=n.selectPropertyIds,s=n.priceMode,c=(0,Z.I8)(o),u=P(e,t),d=at(a,t),p=S(d,u),f=st(a,t,u,e),m=f.newCalendar,_=f.hasPromotion,v=f.hasReservation;i=lt(m,i);var g=Ye(p,i,t),y=Qe("U"===s?p:g,a,i,t,e),b=y.grayPropertys,k=it(t,a,i,r,e),w=k.salePropertyFinish,I=k.dateFinish,T=k.peopleFinish,C=x(w&&I&&T,i,g,t.state);return{footer:C,request:(0,l.Z)((0,l.Z)({},c),{},{optid:(0,h.Z)(g)}),chioceDateData:i,calendar:m,grayPropertys:b,selectPropertyIds:a,choicePeopleId:e,salePropertyFinish:w,dateFinish:I,peopleFinish:T,hasPromotion:_,hasReservation:v}},S=function(e,t){return Array.from(new Set(t.filter((function(t){return e.includes(t)}))))},C=function(e,t,n){var i={};return t?(n.forEach((function(t){var n=t.peopleId,o=t.resourceIds,r=o.some((function(t){return(e||[]).includes(t)}));i[n]=!r})),i):i},P=function(e,t){var n=t.state,i=n.isPeopleAggregations,o=n.peopleProperties;if(i&&e){var r=o.find((function(t){return t.peopleId==e})),a=null===r||void 0===r?void 0:r.resourceIds;return a}return I.load("allResourceId")||nt(t.state)},N=n(51067),D=function(e,t){var n=t.state,i=n.calendar,o=n.chioceDateData,r=n.request;if(!o||!o.date||null===r||void 0===r||!r.date)return!1;var a=r.date,s=r.endDate;if(!a||a&&s)return!1;var c=(0,N.FD)(e.date,a,!0);if(c<0)return!1;for(var u,d=i.findIndex((function(e){return e.date==o.date})),p=i[d].resources,f=function(){var e,n=i[h];if(!n.price&&0!=n.price||n.disableText||0==(null===(e=n.resources)||void 0===e?void 0:e.length))return t.toast.show("\u60a8\u9009\u62e9\u7684\u65e5\u671f\u4e2d\u6709\u552e\u7a7a\u65e5\u671f\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),{v:null};var o=[];p.map((function(e){n.resources.map((function(t){t.resourceId==e.resourceId&&o.push(t)}))})),p=o},h=d;h<c+d;h++)if(u=f(),u)return u.v;return(0,l.Z)((0,l.Z)({},o),{},{endDate:e.date,resources:p})},j=function(e,t){var n=t.state.request;n.date=e.date,n.endDate="";var i=x(!1,null,null,t.state);return{chioceDateData:e,request:n,dateFinish:!1,footer:i}},R=function(e){var t=e.state,n=t.request,i=t.priceMode,o=t.isWIFI;return!("M"!=i||!n.date||n.endDate)&&(e.toast.show(o?"\u8bf7\u9009\u62e9\u8fd8\u4ef6\u65e5\u671f":"\u8bf7\u9009\u62e9\u7ed3\u675f\u65e5\u671f"),!0)},L=function(e,t,n){if(t&&n){var i=(e||[]).findIndex((function(e){return e.date==t})),o=(0,N.gw)(t,n),r=(e||[]).slice(i,i+o);return r}return null},E=n(89465),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=[];if(null===t||void 0===t||t.map((function(t){var n,o=null===e||void 0===e?void 0:e.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.salesProperty)||void 0===n?void 0:n.salesPropertyId)==t.code}));o>-1&&(i.push((0,l.Z)((0,l.Z)({},A(e[o])),{},{showMoreLimit:t.showMoreLimit,name:t.name||e[o].salesPropertyName,iconUrl:null===t||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.url})),e.splice(o,1))})),n.length>0)return n.map((function(t){var n=null===e||void 0===e?void 0:e.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.salesProperty)||void 0===n?void 0:n.salesPropertyId)==t.code}));if(n>-1){var o=t.name,r=t.content,a=t.type,s=t.icon,c=A(e[n]),u=c.salesPropertyName,d=c.salesPropertyValues,p=r;2==a&&(p=p.replace(/{{number}}/g,d.length)),i.push((0,l.Z)((0,l.Z)({},c),{},{name:o||u,content:p,icon:s||""}))}})),i;var o=e.map(A);return i.concat(o)},A=function(e){return{hide:e.salesProperty.hide,salesPropertyName:e.salesProperty.salesPropertyName,salesPropertyId:String(e.salesProperty.salesPropertyId),salesPropertyImgUrls:e.salesPropertyImgUrls,salesPropertyValues:e.salesPropertyValues.map((function(e){return{salesPropertyValueId:e.salesPropertyId,salesPropertyValueName:e.salesPropertyName,carInfo:e.carInfo,hide:!1}}))}},O=function(e){var t=e.packageInfos,n=void 0===t?[]:t,i={};return n.forEach((function(e){var t=e.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).join("-");i[t]?i[t]=[].concat((0,h.Z)(i[t]),(0,h.Z)(e.resourceInfos.map((function(e){return e.resourceId})))):i[t]=(0,h.Z)(e.resourceInfos.map((function(e){return e.resourceId})))})),i},F=function(e,t){var n=Array.from(Array(e.length||0)).map((function(){return""}));return e?(e.forEach((function(e,t){1!=e.salesPropertyValues.length||e.hide||(n[t]=e.salesPropertyValues[0].salesPropertyValueId)})),n):n},M=function(e,t){var n=e.peopleProperties,i=e.packageInfos,o=e.boxProductInfos,r=void 0===o?[]:o,a=[],s=G(i),l="",c="\u7684";return Array.isArray(n)&&n.map((function(e){var n=e.id,i=e.name,o=e.subName,u=e.peopleDescs,d=e.productIds,p=e.price,f=e.priceType,h="";if(d&&d.length>0){var m=d.filter((function(e){return!!r.find((function(t){return t.productId==e}))})),_=H(m,s),v=H(d,s),g=v.filter((function(e){return!_.includes(e)}));a.push({peopleId:n,peopleName:"".concat(i).concat(o?"("+o+")":""),peopleDescStr:"\u9002\u7528\u6761\u4ef6:".concat(u.join(";")),resourceIds:v,boxIds:_,commonResIds:g})}else{switch(l?c="\u7b49":l="".concat(i).concat(o?"\uff08"+o+"\uff09":""),f){case 1:h="\u514d\u8d39";break;case 0:h="\u6682\u65e0\u62a5\u4ef7";break;case 2:h="\u53c2\u8003\u4ef7".concat(p,"\u5143");break;case 3:h="\u53c2\u8003\u4ef7".concat(p,"\u5143\u8d77");break;default:h="\u6682\u65e0\u62a5\u4ef7"}t.info.push({peopleName:"".concat(i).concat(o?"("+o+")":""),peopleDescStr:"\u9002\u7528\u6761\u4ef6:".concat(u.join(";")),priceDesc:h})}})),t.tip=l?"".concat(l.length>10?l.slice(0,10)+"...":l).concat(c,"\u8d2d\u7968\u4fe1\u606f"):"",a},B=function(e){var t={};return e&&0!==e.length?(e.forEach((function(e){var n=e.peopleId,i=e.resourceIds;t[n]=0===i.length})),t):t},U=function(e){if(e&&0!==e.length){var t,n=e.filter((function(e){var t=e.resourceIds;return t.length>0}));return 1===n.length&&(t=n[0].peopleId),t}},G=function(e){var t={};return Array.isArray(e)&&e.forEach((function(e){var n=e.productId;t[n]?t[n].push(e.resourceInfos[0].resourceId):t[n]=[e.resourceInfos[0].resourceId]})),t},H=function(e,t){var n=[];return Array.isArray(e)&&(n=e.reduce((function(e,n){return[].concat((0,h.Z)(e),(0,h.Z)(t[n]||[]))}),[])),n},z=function(e){var t=!0,n=!0,i={},o={},r=[],a=[];return e.forEach((function(e){var s=e.inChina,l=e.packingUseDateSame,c=e.pack3ResourceInfos;t=t&&!!l,n=n&&s,c.forEach((function(e){var t=e.resourceId,n=e.subResourceInfos;0===l?r.push(t):a.push(t),i[t]=n.map((function(e){return e.subResourceId})),n.forEach((function(e){var n=e.subResourceId;o[n]?o[n]=Array.from(new Set([].concat((0,h.Z)(o[n]),[t]))):o[n]=[t]}))}))})),{isUseDateSame:t,isInChina:n,boxResIdMapSubResId:i,subResIdMapBoxResId:o,diffDateBoxResIds:r,sameDateBoxResIds:a}},q=function(e,t,n){var i=[],o=n&&1===e.length&&1===e[0].peopleGroupInfos.length;return e.forEach((function(e){var n=e.id,r=e.name,a=e.peopleGroupInfos,s={firstLevelId:String(n),firstLevelName:r,peopleGroupInfos:[],priceMode:0};o?a.forEach((function(e){var n=e.productIds,i=e.peopleGroupId,o=e.peopleGroupName,r=e.subName;n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),a=n.priceMode,l={peopleGroupId:String(i),peopleGroupName:o,subName:r,productIds:[e],priceMode:a};s.priceMode=s.priceMode||a,s.peopleGroupInfos.push(l)}))})):a.forEach((function(e){var n=e.productIds,i=e.peopleGroupId,o=e.peopleGroupName,r=e.subName,a={peopleGroupId:String(i),peopleGroupName:o,subName:r,productIds:n,priceMode:0};n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),i=n.priceMode;s.priceMode=s.priceMode||i,a.priceMode=a.priceMode||i})),s.peopleGroupInfos.push(a)})),i.push(s)})),i},K=function(e){var t={};return e.forEach((function(e){var n=e.id,i=e.saleProperties;t[n]=i.map(W)})),t},W=function(e){var t=[207],n=[1917],i=e.salesPropertyValues.every((function(e){return e.hide})),o=t.includes(e.salesProperty.salesPropertyId)&&1===e.salesPropertyValues.length&&n.includes(e.salesPropertyValues[0].salesPropertyId)||i;return{salesPropertyId:e.salesProperty.salesPropertyId,salesPropertyName:e.salesProperty.salesPropertyName,hide:!!o||e.salesProperty.hide,salesPropertyImgUrls:e.salesPropertyImgUrls,salesPropertyValues:e.salesPropertyValues.map((function(e){return{salesPropertyValueId:e.salesPropertyId,salesPropertyValueName:e.salesPropertyName,hide:e.hide}}))}},X=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n],o=Array.from(Array(i.length||0)).map((function(){return""}));i.forEach((function(e,t){var n=e.salesPropertyValues.filter((function(e){return!e.hide}));1!=n.length||e.hide||(o[t]=n[0].salesPropertyValueId)})),t[n]=o})),t},Y=function(e,t,n,i){var o="";if(!i)return o;var r=[];if(1===e.length&&!n){var a=e[0].peopleGroupInfos;a.length>1&&a.forEach((function(e){var n=e.productIds,i=e.peopleGroupName,o=0;n.forEach((function(e){t.forEach((function(t){var n=t.pack3ResourceInfos;n.forEach((function(t){var n=t.subResourceInfos,i=n.find((function(t){return t.subProductId===e})),r=i||{},a=r.unitQuantity,s=void 0===a?0:a;0===o&&(o=s)}))}))})),o>0&&r.push("".concat(o,"\u5f20").concat(i))}))}return r.length&&(o="\u5305\u542b".concat(r.join("\u3001"))),o},Q=function(e){var t=!1,n=1===e.length;return e&&e.length&&e.forEach((function(e){var i=e.priceMode,o=e.peopleGroupInfos;t=n?o.some((function(e){return 0===e.priceMode})):t||0===i})),t},J=function(e){var t=!1;return e&&e.length&&e.length>1&&(t=e.every((function(e){return!e.saleProperties||e.saleProperties&&e.saleProperties.length<=1}))),t},$=function(e){var t=!1;if(e&&e.length)if(1===e.length){var n=e[0].peopleGroupInfos,i=void 0===n?[]:n;i.forEach((function(e){var n=e.priceMode;t=t||1===n}))}else e.forEach((function(e){var n=e.priceMode;t=t||1===n}));return t},ee=function(e,t){var n=!1;return e&&e.length&&(n=e.every((function(e){var n=e.firstLevelId,i=t[n],o=i.filter((function(e){return!e.hide}));return 0===o.length}))),n},te=function(e,t,n){var i={};return e.forEach((function(e){var n=e.pack3ResourceInfos;n.forEach((function(e){var n=e.subResourceInfos;n.forEach((function(e){var n=e.subProductId,o=e.subResourceId,r=t.find((function(e){return e.productId===n}))||{},a=r.firstLevelId;i[a]?i[a].push(o):i[a]=[o]}))}))})),n.forEach((function(e){var t=e.id;i[t]?i[t]=Array.from(new Set(i[t])):i[t]=[]})),i},ne=function(e,t){var n={};return e.forEach((function(e){var i=e.id,o=e.peopleGroupInfos,r=[];o.forEach((function(e){var n=e.productIds;n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),i=n||{},o=i.packageIds;r.push.apply(r,(0,h.Z)(o))}))})),n[i]=Array.from(new Set(r))})),n},ie=function(e,t){var n=e[0].id,i=t[n],o=i.filter((function(e){return!e.hide})).map((function(e){return e.salesPropertyId})),r=Array.from(new Set(o));return o.length!==r.length},oe=function(e){var t=e.firstLevelInfos,n=void 0===t?[]:t,i=e.boxProductInfos,o=void 0===i?[]:i,r=e.peopleProperties,a=void 0===r?[]:r,s=[];o.forEach((function(e){var t=e.productId;s.push(t)}));var l=[];a.forEach((function(e){var t=e.productIds;l.push.apply(l,(0,h.Z)(t))}));var c=!l.every((function(e){return s.includes(e)}));return!!c&&1!==n.length},re=n(79932),ae=n(21731),se=n(20159),le=(0,re.wU)(),ce=function(e){var t=(0,se.Yy)(),n="".concat(le,"/webapp/taro/pages/tnt/booking/index?");return["FAT","dev"].includes(t)&&(n+="env=fat&"),(0,p.Z)((0,p.Z)((0,p.Z)({},ae.NX.Mini,"/pages/tnt/booking/index?"),ae.NX.RN,"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=booking&isNew=true&"),ae.NX.H5,n)[e||(0,re.ZP)().platform]},ue=function(e){var t=(0,se.Yy)(),n="".concat(le,"/webapp/taro/pages/tnt/detail/resource/index?");return["FAT","dev"].includes(t)&&(n+="env=fat&"),(0,p.Z)((0,p.Z)((0,p.Z)({},ae.NX.Mini,"/pages/gs/detail/resource/index?"),ae.NX.RN,"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=resource&"),ae.NX.H5,n)[e||(0,re.ZP)().platform]},de=(n(8482),function(e,t){var n=t.state.isUseDateSame,i=n?pe(e,t):fe(e,t);return i}),pe=function(e,t){var n=t.state,i=n.firstLevelInfos,o=n.chioceDateData,r=n.firstLevelMapSaleProperties,a=n.firstLevelMapSelectedPropertyIds,s=n.request,c=n.calendar,u=n.firstLevelMapCalendar,d=n.isSalePropertyIdDiff,p=void 0!==d&&d,f=(0,Z.I8)(s),m=[],_=[],v=P(e,t),g=_e(v,t),y={},x={},k={},w={};i.forEach((function(e){var n=e.firstLevelId,i=r[n];m.push.apply(m,(0,h.Z)(i));var s=a[n];_.push.apply(_,(0,h.Z)(s));var l=at(s,t,n),d=p?v:g[n];y[n]=S(l,d);var f=S(l,d),b=p?c:u[n],k=lt(b,o);w[n]=k;var I=Ye(f,k,t);x[n]=I}));var I=p?Object.values(x)[0]:he(x,t,e),T=me(x,I,t,e),C=T.firstLevelMapCommonResIds,N=T.filteredFirstLevelMapSubResId,D=T.commonResIds;i.forEach((function(n){if(!p){var i=n.firstLevelId,o=[].concat((0,h.Z)(N[i]),(0,h.Z)(C[i])),s=a[i],l=r[i],c=g[i],u=w[i],d=Qe(o,s,u,t,e,l,c,i,x),f=d.grayPropertys;k[i]=f}}));var j=p?Object.values(y)[0]:he(y,t,e),R=me(y,j,t,e),L=R.commonResIds,E=[].concat((0,h.Z)(j),(0,h.Z)(L)),V=st(_,t,v,e,m,c,E),A=V.newCalendar,O=V.hasPromotion,F=lt(A,o),M=be(t,a,F,r,e),B=M.salePropertyFinish,U=M.dateFinish,G=M.peopleFinish,H=b(B&&U&&G,F,t.state);return{footer:H,request:(0,l.Z)((0,l.Z)({},f),{},{optid:[].concat((0,h.Z)(I),(0,h.Z)(D))}),chioceDateData:F,calendar:A,firstLevelMapGrayPropertys:k,firstLevelMapSelectedPropertyIds:a,choicePeopleId:e,salePropertyFinish:B,dateFinish:U,peopleFinish:G,hasPromotion:O}},fe=function(e,t){var n=t.state,i=n.firstLevelInfos,o=n.firstLevelMapCalendar,r=n.firstLevelMapChoiceDateData,a=void 0===r?{}:r,s=n.firstLevelMapSaleProperties,c=n.firstLevelMapSelectedPropertyIds,u=n.request,d=(0,Z.I8)(u),p=P(e,t),f=_e(p,t),m={},_={},v={},g={},y={},x=!1;i.forEach((function(n){var i=n.firstLevelId,r=c[i],l=at(r,t,i),u=f[i];v[i]=S(l,u);var d=S(l,u),p=s[i],h=o[i],y=st(r,t,u,e,p,h),b=y.newCalendar,k=y.hasPromotion;m[i]=b,x=x||k;var w=a[i],I=lt(b,w);_[i]=I,g[i]=Ye(d,I,t)}));var b=he(g,t,e),w=me(g,b,t,e),I=w.firstLevelMapCommonResIds,T=w.filteredFirstLevelMapSubResId,C=w.commonResIds;i.forEach((function(n){var i=n.firstLevelId,o=[].concat((0,h.Z)(T[i]),(0,h.Z)(I[i])),r=c[i],a=s[i],l=m[i],u=f[i],d=Ze(g,v,i,t,e),p=st(r,t,u,e,a,l,d),b=p.newCalendar,k=p.hasPromotion;m[i]=b,x=x||k;var w=_[i],Z=lt(b,w);_[i]=Z;var S=Qe(o,r,Z,t,e,a,u,i,g),C=S.grayPropertys;y[i]=C}));var N=ke(t,c,_,s,e),D=N.salePropertyFinish,j=N.dateFinish,R=N.peopleFinish,L=k(D&&j&&R,t.state);return{footer:L,request:(0,l.Z)((0,l.Z)({},d),{},{optid:[].concat((0,h.Z)(b),(0,h.Z)(C))}),firstLevelMapChoiceDateData:_,firstLevelMapCalendar:m,firstLevelMapGrayPropertys:y,firstLevelMapSelectedPropertyIds:c,choicePeopleId:e,salePropertyFinish:D,dateFinish:j,peopleFinish:R,hasPromotion:x,firstLevelMapCommonResIds:I,filteredFirstLevelMapSubResId:T}},he=function(e,t,n){var i=t.state,o=i.subResIdMapBoxResId,r=i.peopleProperties,a=[];return Object.keys(e).forEach((function(t){var i=e[t];n&&r.map((function(e){e.peopleId==n&&(i=i.filter((function(t){return!e.commonResIds.includes(t)})))}));var s=[];i.forEach((function(e){s=[].concat((0,h.Z)(s),(0,h.Z)(o[e]||[]))})),s=Array.from(new Set(s)),s.length&&(a=a.length?S(a,s):s)})),n&&r.map((function(e){e.peopleId==n&&(a=a.filter((function(t){return e.boxIds.includes(t)})))})),a},me=function(e,t,n,i){var o=n.state,r=o.boxResIdMapSubResId,a=o.subResIdMapBoxResId,s=o.peopleProperties,l=[];i&&s.map((function(e){e.peopleId==i&&(t=S(t,e.boxIds),l=e.commonResIds)}));var c={},u=[],d={},p=[],f=[];return t.forEach((function(e){var t;(t=f).push.apply(t,(0,h.Z)(r[e]))})),f=Array.from(new Set(f)),Object.keys(e).forEach((function(t){var n,i=e[t];d[t]=[],c[t]=[],i.forEach((function(e){f.includes(e)?d[t].push(e):!l.includes(e)&&a[e]||c[t].push(e)})),(n=u).push.apply(n,(0,h.Z)(c[t])),p.push.apply(p,(0,h.Z)(d[t]))})),u=Array.from(new Set(u)),{firstLevelMapCommonResIds:c,filteredFirstLevelMapSubResId:d,commonResIds:u,subResIds:p}},_e=function(e,t){var n=t.state,i=n.firstLevelInfos,o=n.boxResIdMapSubResId,r=n.subResIdMapBoxResId,a=n.firstLevelMapSubResId,s={},l=[],c=[];return e.forEach((function(e){if(o[e]){var t,n=o[e];(t=l).push.apply(t,(0,h.Z)(n))}else r[e]?l.push(e):c.push(e)})),l=Array.from(new Set(l)),i.forEach((function(e){var t=e.firstLevelId,n=a[t],i=l.filter((function(e){return n.includes(e)}));s[t]=[].concat((0,h.Z)(i),c)})),s},ve=function(e,t,n,i){var o=he(e,i),r=me(e,o,i),a=r.commonResIds,s=r.subResIds,l=[].concat((0,h.Z)(o),(0,h.Z)(a),(0,h.Z)(s)),c=C(l,t,n);return c},ge=function(e,t,n){var i=t.state.isUseDateSame,o=i?ye(e,t):xe(e,t,n);return o},ye=function(e,t){var n,i=t.state,o=i.chioceDateData,r=i.request,a=i.firstLevelInfos,s=i.firstLevelMapSaleProperties,c=i.firstLevelMapSelectedPropertyIds,u=i.isPeopleAggregations,d=i.choicePeopleId,p=i.peopleProperties,m=i.firstLevelMapCalendar,_=i.calendar,v=i.isSalePropertyIdDiff,g=void 0!==v&&v,y=(0,Z.I8)(r);if(y.usePage==f.zh.book)return{chioceDateData:e};o&&o.date==e.date||(n=e),n&&(n=(0,l.Z)((0,l.Z)({},n),{},{resources:n.resources.filter((function(e){return!e.unAvailableReason}))}));var x=P(d,t),k=_e(x,t),w=[],T=[],C={},N={},D={},j={};a.forEach((function(e){var i=e.firstLevelId,o=s[i];w.push.apply(w,(0,h.Z)(o));var r=c[i];T.push.apply(T,(0,h.Z)(r));var a=g?_:m[i],l=lt(a,n);j[i]=l;var u=Ye(g?I.load("allResourceId")||nt(t.state):I.load("allResourceId-SameDate")||Ie(t.state),l,t),d=at(r,t,i),p=S(u,d);C[i]=p;var f=g?x:k[i],v=S(p,f);N[i]=v}));var R=g?Object.values(N)[0]:he(N,t,d),L=me(N,R,t,d),E=L.firstLevelMapCommonResIds,V=L.filteredFirstLevelMapSubResId,A=L.commonResIds;a.forEach((function(e){if(!g){var n=e.firstLevelId,i=[].concat((0,h.Z)(V[n]),(0,h.Z)(E[n])),o=c[n],r=s[n],a=k[n],l=j[n],u=Qe(i,o,l,t,d,r,a,n,N),p=u.grayPropertys;D[n]=p}}));var O=ve(C,u,p,t),F=be(t,c,n,s,d),M=F.salePropertyFinish,B=F.dateFinish,U=F.peopleFinish;y.date=n?n.date:"";var G=b(M&&B&&U,n,(0,l.Z)((0,l.Z)({},t.state),{},{request:y}));return{footer:G,request:(0,l.Z)((0,l.Z)({},y),{},{optid:[].concat((0,h.Z)(R),(0,h.Z)(A))}),chioceDateData:n,firstLevelMapGrayPropertys:D,firstLevelMapSelectedPropertyIds:c,salePropertyFinish:M,dateFinish:B,peopleFinish:U,peopleGrayProperty:O,choicePeopleId:d}},xe=function(e,t,n){var i,o=t.state,r=o.firstLevelMapChoiceDateData,a=void 0===r?{}:r,s=o.request,c=o.firstLevelInfos,u=o.firstLevelMapSaleProperties,d=o.firstLevelMapSelectedPropertyIds,p=o.isPeopleAggregations,m=o.choicePeopleId,_=o.peopleProperties,v=o.firstLevelMapCalendar,g=(0,Z.I8)(s),y=(0,Z.I8)(a);if(g.usePage==f.zh.book)return y[n]=e,{firstLevelMapChoiceDateData:y};if(Array.isArray(n))n.forEach((function(t){if(e[t]){var n=(0,l.Z)((0,l.Z)({},e[t]),{},{resources:e[t].resources.filter((function(e){return!e.unAvailableReason}))});y[t]=n}else y[t]=e[t]}));else{var x=a[n];x&&x.date==e.date||(i=e),i&&(i=(0,l.Z)((0,l.Z)({},i),{},{resources:i.resources.filter((function(e){return!e.unAvailableReason}))})),y[n]=i}var b=P(m,t),w=_e(b,t),T={},C={},N={},D={};c.forEach((function(e){var n=e.firstLevelId,i=y[n],o=Ye(I.load("allResourceId")||nt(t.state),i,t),r=d[n],a=at(r,t,n),s=S(o,a);C[n]=s;var l=w[n];T[n]=S(a,l),N[n]=S(s,l)}));var j=he(N,t,m),R=me(N,j,t,m),L=R.firstLevelMapCommonResIds,E=R.filteredFirstLevelMapSubResId,V=R.commonResIds,A={},O=!1;c.forEach((function(e){var n=e.firstLevelId,i=[].concat((0,h.Z)(E[n]),(0,h.Z)(L[n])),o=d[n],r=u[n],a=v[n],s=w[n],l=Ze(N,T,n,t,m),c=st(o,t,s,m,r,a,l),p=c.newCalendar,f=c.hasPromotion;A[n]=p,O=O||f;var _=y[n],g=lt(p,_);y[n]=g;var x=Qe(i,o,g,t,m,r,s,n,N),b=x.grayPropertys;D[n]=b}));var F=ve(C,p,_,t),M=ke(t,d,y,u,m),B=M.salePropertyFinish,U=M.dateFinish,G=M.peopleFinish;Array.isArray(n)||(g.date=we(n,i,s,c));var H=k(B&&U&&G,(0,l.Z)((0,l.Z)({},t.state),{},{request:g}));return{footer:H,request:(0,l.Z)((0,l.Z)({},g),{},{optid:[].concat((0,h.Z)(j),(0,h.Z)(V))}),firstLevelMapChoiceDateData:y,firstLevelMapCalendar:A,hasPromotion:O,firstLevelMapGrayPropertys:D,firstLevelMapSelectedPropertyIds:d,salePropertyFinish:B,dateFinish:U,peopleFinish:G,peopleGrayProperty:F,choicePeopleId:m,firstLevelMapCommonResIds:L,filteredFirstLevelMapSubResId:E}},be=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=!0;return Object.keys(t).forEach((function(e){var n=t[e],o=i[e],r=o.map((function(e,t){if(e.hide)return t})),s=n.every((function(e,t){return!!e||r.includes(t)}));a=a&&s})),{salePropertyFinish:a,dateFinish:!!n,peopleFinish:!r||!!o}},ke=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=!0,s=!0;return Object.keys(t).forEach((function(e){var o=t[e],r=i[e],l=r.map((function(e,t){if(e.hide)return t})),c=o.every((function(e,t){return!!e||l.includes(t)}));a=a&&c;var u=n[e];s=s&&!!u})),{salePropertyFinish:a,dateFinish:s,peopleFinish:!r||!!o}},we=function(e,t,n,i){var o=n.date,r=o?o.split("|"):[],a=i.map((function(e){return e.firstLevelId})),s=r.length!==a.length?new Array(a.length).map((function(){return""})):r,l=a.indexOf(e);return l>-1&&(s[l]=t&&t.date||""),s.join("|")},Ie=function(e){var t=e.packageResources,n=e.boxResIdMapSubResId,i=[];if(!t)return i;Object.keys(t).forEach((function(e){i=[].concat((0,h.Z)(i),(0,h.Z)(t[e]))})),i=Array.from(new Set(i));var o=[];return i.forEach((function(e){var t,i=n[e];i?(t=o).push.apply(t,(0,h.Z)(i)):o.push(e)})),o=Array.from(new Set(o)),I.save((0,p.Z)({},"allResourceId-SameDate",o)),o},Ze=function(e,t,n,i,o){var r=(0,Z.I8)(e);r[n]=t[n];var a=he(r,i,o),s=me(r,a,i,o),l=s.firstLevelMapCommonResIds,c=s.filteredFirstLevelMapSubResId,u=[].concat((0,h.Z)(c[n]),(0,h.Z)(l[n]));return u},Te=function(e,t,n,i){var o=n.state.isUseDateSame,r=o?Se(e,t,n,i):Ce(e,t,n,i);return r},Se=function(e,t,n,i){var o=n.state,r=o.chioceDateData,a=o.request,s=o.firstLevelMapSaleProperties,c=o.firstLevelMapSelectedPropertyIds,u=o.isPeopleAggregations,d=o.choicePeopleId,p=o.peopleProperties,m=o.firstLevelInfos,_=o.calendar,v=o.firstLevelMapCalendar,g=o.hasSingleDateCalendar,y=o.isSalePropertyIdDiff,x=void 0!==y&&y,k=(0,Z.I8)(a),w=(0,Z.I8)(c);Array.isArray(i)?w=e:w[i][t]==e?w[i][t]="":w[i][t]=e;var I=[],T=[],C=P(d,n),N=_e(C,n),D={},j={},R={},L={},E={};m.forEach((function(e){var t=e.firstLevelId,i=s[t],o=w[t];I.push.apply(I,(0,h.Z)(i)),T.push.apply(T,(0,h.Z)(o));var a=at(o,n,t),l=x?q:v[t],c=lt(l,r);E[t]=c;var u=Ye(a,c,n);j[t]=u;var d=x?C:N[t];D[t]=S(a,d);var p=S(u,d);R[t]=p}));var V=x?Object.values(R)[0]:he(R,n,d),A=me(R,V,n,d),O=A.firstLevelMapCommonResIds,F=A.filteredFirstLevelMapSubResId,M=A.commonResIds;m.forEach((function(e){if(!x){var t=e.firstLevelId,i=[].concat((0,h.Z)(F[t]),(0,h.Z)(O[t])),o=w[t],r=s[t],a=N[t],l=E[t],c=Qe(i,o,l,n,d,r,a,t,R),u=c.grayPropertys;L[t]=u}}));var B=x?Object.values(D)[0]:he(D,n,d),U=me(D,B,n,d),G=U.commonResIds,H=[].concat((0,h.Z)(B),(0,h.Z)(G)),z=st(T,n,C,d,I,_,H),q=z.newCalendar,K=z.hasPromotion,W=r&&(0,Z.I8)(r);if(!g&&[f.zh.detail,f.zh.sku].includes(k.usePage)){var X=Pe(I,T);X&&!W?(W=q.find((function(e){return!!e.price}))||{},k.date=W.date||""):X||(W=null,k.date="")}W=lt(q,W);var Y=ve(j,u,p,n),Q=be(n,w,W,s,d),J=Q.salePropertyFinish,$=Q.dateFinish,ee=Q.peopleFinish,te=b(J&&$&&ee,W,n.state);return{footer:te,request:(0,l.Z)((0,l.Z)({},k),{},{optid:[].concat((0,h.Z)(V),(0,h.Z)(M))}),chioceDateData:W,calendar:q,firstLevelMapGrayPropertys:L,firstLevelMapSelectedPropertyIds:w,salePropertyFinish:J,dateFinish:$,peopleFinish:ee,peopleGrayProperty:Y,choicePeopleId:d,hasPromotion:K}},Ce=function(e,t,n,i){var o=n.state,r=o.firstLevelMapChoiceDateData,a=void 0===r?{}:r,s=o.request,c=o.firstLevelMapSaleProperties,u=o.firstLevelMapSelectedPropertyIds,d=o.isPeopleAggregations,p=o.choicePeopleId,m=o.peopleProperties,_=o.firstLevelInfos,v=o.firstLevelMapCalendar,g=(0,Z.I8)(s),y=(0,Z.I8)(u);Array.isArray(i)?y=e:y[i][t]==e?y[i][t]="":y[i][t]=e;var x=P(p,n),b=_e(x,n),w={},I={},T={},C={},N={},D=!1;_.forEach((function(e){var t=e.firstLevelId,i=e.priceMode,o=y[t],r=at(o,n,t),l=c[t],u=v[t],d=b[t];I[t]=S(r,d);var h=st(o,n,d,p,l,u),m=h.newCalendar,x=h.hasPromotion;w[t]=m,D=D||x;var k=a[t];if(1==i&&[f.zh.detail,f.zh.sku].includes(g.usePage)){var Z=Pe(l,o);Z&&!k?k=m.find((function(e){return!!e.price}))||{}:Z||(k=null),s.date=we(t,k,s,_)}k=lt(m,k),a[t]=k;var P=Ye(r,k,n);T[t]=P,C[t]=S(P,d)}));var j=he(C,n,p),R=me(C,j,n,p),L=R.firstLevelMapCommonResIds,E=R.filteredFirstLevelMapSubResId,V=R.commonResIds;_.forEach((function(e){var t=e.firstLevelId,i=e.priceMode,o=[].concat((0,h.Z)(E[t]),(0,h.Z)(L[t])),r=y[t],l=c[t],u=w[t],d=b[t],m=Ze(C,I,t,n,p),v=st(r,n,d,p,l,u,m),x=v.newCalendar,k=v.hasPromotion;w[t]=x,D=D||k;var Z=a[t];if(1==i&&[f.zh.detail,f.zh.sku].includes(g.usePage)){var T=Pe(l,r);T&&!Z?Z=x.find((function(e){return!!e.price}))||{}:T||(Z=null),g.date=we(t,Z,s,_)}Z=lt(x,Z),a[t]=Z;var S=Qe(o,r,Z,n,p,l,d,t,C),P=S.grayPropertys;N[t]=P}));var A=ve(T,d,m,n),O=ke(n,y,a,c,p),F=O.salePropertyFinish,M=O.dateFinish,B=O.peopleFinish,U=k(F&&M&&B,n.state);return{footer:U,request:(0,l.Z)((0,l.Z)({},g),{},{optid:[].concat((0,h.Z)(j),(0,h.Z)(V))}),firstLevelMapChoiceDateData:a,firstLevelMapGrayPropertys:N,firstLevelMapSelectedPropertyIds:y,salePropertyFinish:F,dateFinish:M,peopleFinish:B,peopleGrayProperty:A,choicePeopleId:p,firstLevelMapCalendar:w,hasPromotion:D,firstLevelMapCommonResIds:L,filteredFirstLevelMapSubResId:E}},Pe=function(e,t){var n=e.map((function(e,t){if(e.hide)return t})),i=t.every((function(e,t){return!!e||n.includes(t)}));return i},Ne=function(e,t){return e&&e.effectiveDateDesc?1!==e.useType&&"S"==t.priceMode?"":e.effectiveDateDesc:""},De=function(e){if(!e)return"";var t="",n=e.invalidDateDesc,i=e.countLimit;return n&&(t="\u4e0d\u53ef\u4f7f\u7528\u65e5\u671f\uff1a".concat(n)),i&&i>1&&(t+="".concat(t?"\uff0c":"","\u53ef\u4f7f\u7528").concat(i,"\u6b21")),t},je=function(e,t){var n=t.calendar,i=t.priceMode,o=t.productId,r=t.isPack3,a=t.hasSingleDateCalendar,s=function(t){return!!t.resources.find((function(t){return t.resourceId==(e.optid&&e.optid[0])}))},l=function(e){return!!e.resources.find((function(e){return e.productId==o}))};if(e.date){var c=n.find((function(t){return t.date==e.date}));t.isSaleOut=!c||!!c.disableText;var u=e.date;if(!c||s(c)||e.usePage!=f.zh.book&&e.aggregation)c||(e.date="");else if(e.isscan){var d=n.find((function(e){return s(e)}));e.date=d&&d.date||""}else{if(e.date="",l(c))return t.mainResourceChanged=!0,u;t.isSaleOut=!0}if(r&&!a&&e.usePage==f.zh.book){var p,h=e.boxMap,m=e.optid;null===(p=h[m[0]])||void 0===p||p.map((function(t){return t.date=e.date}))}return e.date}if(e&&(e.isscan||(r?!a:"U"===i))&&n.length>0){var _=n[0],v=n.find((function(e){return s(e)}));if(l(_)&&(v&&v.date)!==_.date&&e.isscan)return t.mainResourceChanged=!0,e.date=_.date;if(r&&e.usePage==f.zh.book){var g,y=e.boxMap,x=e.optid;null===(g=y[x[0]])||void 0===g||g.map((function(e){return e.date=v&&v.date||""}))}return e.date=v&&v.date||""}return""},Re=function(e,t,n,i){var o,r,a,s,l=t.calendar,c=t.diffDateBoxResIds,u=t.firstLevelInfos,d=t.firstLevelMapSubResId,p=c[0],f=e.boxMap||{},h=[],m=null===(o=f[p])||void 0===o?void 0:o.every((function(e){return!!e.date}));m?t.defaultDate=null===(s=f[p][0])||void 0===s?void 0:s.date:(u.forEach((function(e){var t=e.firstLevelId,o=d[t][0],r=l.find((function(e){return e.resources.some((function(e){return e.resourceId===o}))})),a={};n.find((function(e){return e.pack3ResourceInfos.find((function(e){return e.resourceId==p&&(a=e.subResourceInfos.find((function(e){return e.subResourceId==o}))),e.resourceId==p}))}));var s=r||{},c=s.date,u=void 0===c?"":c,f=i.find((function(e){return e.productId==a.subProductId}));h.push({resourceId:o,date:u,unitQuantity:a.unitQuantity,priceMode:(null===f||void 0===f?void 0:f.priceMode)||0})})),f[p]=h,t.defaultDate=null===(r=h[0])||void 0===r?void 0:r.date,Object.assign(e,{boxMap:f,isCrossDate:!0,date:(null===(a=h[0])||void 0===a?void 0:a.date)||""}))},Le=function(e,t){var n,i=t.firstLevelInfos,o=t.calendar,r=t.firstLevelMapSaleProperties,a=t.firstLevelMapSelectedPropertyIds,s=[],l=[];i.forEach((function(e){var t=e.firstLevelId,n=r[t],i=a[t];s.push.apply(s,(0,h.Z)(n)),l.push.apply(l,(0,h.Z)(i))}));var c=Pe(s,l),u=null;c&&(u=o.find((function(e){return!!e.price}))||{}),e.date=(null===(n=u)||void 0===n?void 0:n.date)||""},Ee=function(e,t){var n=t.firstLevelInfos,i=t.firstLevelMapCalendar,o=t.firstLevelMapSaleProperties,r=t.firstLevelMapSelectedPropertyIds,a=[];n.forEach((function(t){var s=t.firstLevelId,l=t.priceMode,c=o[s],u=r[s],d=i[s],p=null;if(1===l){var f=Pe(c,u);f&&(p=d.find((function(e){return!!e.price}))||{},e.date=we(s,p,e,n))}a.push(s)})),e.firstLevelIds=a},Ve=function(e,t,n){var i=e.resourceInfos,o=e.packageInfos,r=[];return i&&o&&i.map((function(e){var a=o.find((function(t){return t.resourceInfos.length>0&&e.mixedIds&&e.mixedIds.includes(t.resourceInfos[0].resourceId)})),s=[f.zh.actSku,f.zh.dayplay,f.zh.actSkuInline].includes(t.usePage);if(a||s||t.aggregation&&t.usePage==f.zh.book){var l=(null===a||void 0===a?void 0:a.resourceInfos[0])||{},c={maxQuantity:s?99:l.maxQuantity||1,minQuantity:s?0:l.minQuantity||1,resourceName:e.resourceName,subName:l.subName,resourceDesc:e.peopleApplicableInfo.resourceDesc,shortResourceDesc:e.peopleApplicableInfo.shortResourceDesc,tags:l.tags||[],limitSaleDesc:l.limitSaleDesc,mixedIds:e.mixedIds,peoplePropertyId:e.peoplePropertyId};r.push(c),t&&t.count&&0==t.count.length&&t.count.push(l.minQuantity||c.minQuantity),"Stand"==e.templateSettingItemCode&&(null===i||void 0===i?void 0:i.length)>1&&n&&(n.isStandAndPeople=!0)}})),r},Ae=function(e,t){var n={},i={},o=null;return t&&t.length&&(o=t[0].subProductInfos),e.forEach((function(e){var t=e.productId,r=e.priceMode,a=(o||[]).find((function(e){return e.productId===t}));if(a){var s=a.usageTimeLimit;if(s){var l="",c=s.invalidDateDesc,u=s.countLimit,d=s.effectiveDateDesc,p=s.useType;d&&(n[t]=1!==p&&0===r?"":d),c&&(l="\u4e0d\u53ef\u4f7f\u7528\u65e5\u671f\uff1a".concat(c)),u&&u>1&&(l+="".concat(l?"\uff0c":"","\u53ef\u4f7f\u7528").concat(u,"\u6b21")),i[t]=l}else n[t]="",i[t]=""}})),{prodMapValidDesc:n,prodMapDisabledDateDesc:i}},Oe=function(e){return e&&e.effectiveDateDesc?1!==e.useType?"":e.effectiveDateDesc:""},Fe=function(e,t){t.subResFullInfo||(t.subResFullInfo={});var n=e||{},i=n.firstLevelInfos,o=void 0===i?[]:i,r=n.packageInfos,a=void 0===r?[]:r,s=n.boxProductInfos,c=void 0===s?[]:s,u=n.productInfos,d=void 0===u?[]:u;return c.map((function(e){e.pack3ResourceInfos.map((function(e){e.subResourceInfos.map((function(n){var i,r=n.subResourceId,s=n.subProductId,c=n.unitQuantity,u="";a.find((function(e){return e.resourceInfos.find((function(e){return e.resourceId==r&&(u=e.resourceName,!0)}))}));var f="",h="";o.find((function(e){return e.peopleGroupInfos.find((function(t){return!!t.productIds.includes(s)&&(f=e.name,h=e.id,!0)}))}));var m=d.find((function(e){return e.productId==n.subProductId}));t.subResFullInfo[r]={subResourceId:r,subProductId:s,unitQuantity:(0,l.Z)((0,l.Z)({},null===(i=t.subResFullInfo[r])||void 0===i?void 0:i.unitQuantity),{},(0,p.Z)({},e.resourceId,c)),resourceName:u,firstLevelName:f,firstLevelId:h,priceMode:(null===m||void 0===m?void 0:m.priceMode)||0}}))}))})),t.subResFullInfo},Me=n(41712),Be=n(77942),Ue=function(e){if(1!==e.length)return"";var t=e[0]||{},n=t.inventoryDesc,i=void 0===n?"":n,o=t.unAvailableReason,r=void 0===o?"":o;return r?"":i},Ge=function(e,t){if(null===e||void 0===e||!e.length)return t?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2";var n=e.every((function(e){return!!e.unAvailableReason}));if(!n)return"";for(var i,o=["poiClosed","soldOut","other"],r=function(t){var n=e.find((function(e){return e.unAvailableReason.key==o[t]}));if(n)return{v:n.unAvailableReason.value}},a=0;a<o.length;a++)if(i=r(a),i)return i.v;return""},He=function(e,t,n){return!!n||e==t},ze=function(e,t){return t<e},qe=function(e,t){var n,i=e.priceAndStockInfos,o=e.unavailableSaleDates,r=e.packageInfos,a=e.basicInfo,s=e.saleProperties,c=e.aggregations,u=e.cashBackInfos,d=e.resourceType,p=[],h=!1,m=!1,_=[f.zh.sku,f.zh.detail,f.zh.book].includes(null===t||void 0===t?void 0:t.usePage),v=t&&t.optid&&t.optid[0],g=[2,3].includes(t.bizLineType)&&"2"==t.tooltipStyle;if(i&&i.length>0&&r){var y=[];s.forEach((function(e){e.salesProperty.hide&&e.salesPropertyValues.forEach((function(e){return y.push(e.salesPropertyId)}))}));var x=[];if(t.usePage==f.zh.book&&v)try{var b;x=r.find((function(e){return!!e.resourceInfos.find((function(e){return e.resourceId==v}))})).salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).filter((function(e){return!y.includes(e)}));var k=s.filter((function(e){return!e.salesProperty.hide}));1==(null===k||void 0===k?void 0:k.length)&&1==(null===k||void 0===k||null===(b=k[0])||void 0===b?void 0:b.salesPropertyValues.length)&&(x=[])}catch(e){console.log(e)}for(var w=i[0].date,I=i[i.length-1].date,Z=(0,N.gw)(w,I),T=0,S=function(){var e,s,y,b=null===(e=i[T])||void 0===e?void 0:e.unAvailableReason,k=function(e){var t={date:w,inventoryNum:0,price:void 0,disableText:e,resources:[]};p.push(t)};if((null===(s=i[T])||void 0===s?void 0:s.date)!=w||b)if((null===(y=i[T])||void 0===y?void 0:y.date)==w&&b)k(b.value),T++;else if(o){var I=o.find((function(e){return e.date==w}));I&&k(I.unavailableSaleDesc)}else k(a.reservation?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2");else{var Z=i[T],S={date:w,price:(0,Be.rI)()?" ":(Z.hasOwnProperty("price")?Z.price:Z.minPrice)||0,hideFrom:![f.zh.actSku,f.zh.dayplay,f.zh.actSkuInline].includes(t.usePage)||g,disableText:"",resources:[],packages:[],hasReservation:!1};n=Math.min("number"===typeof n?n:1/0,"number"===typeof S.price?S.price:1/0);for(var C=[],P=function(){var e,n=Z.packagePriceAndStockInfos[N],i=n.packageId,o=n.resourcePriceAndStockInfos,s=(r||[]).find((function(e){return e.packageId==i}));null!==s&&void 0!==s&&s.resourceInfos&&(null===(e=S.packages)||void 0===e||e.push({packageId:s.packageId,maxQuantity:s.maxPackageSaleCount,minQuantity:s.minPackageSaleCount}),s.resourceInfos.forEach((function(e){var n=o.find((function(n){return n.resourceId==e.resourceId&&(t.usePage!=f.zh.book||!!n.inventoryNum)})),i=u&&u.find((function(e){return e.resourceId==(null===n||void 0===n?void 0:n.resourceId)})),r=s.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId}));if(e&&n&&(f.zh.book!=t.usePage||x.every((function(e){return r.includes(e)})))){var l=n.hasOwnProperty("price")?n.price:n.salePrice,c=n.salePrice,d=n.hasOwnProperty("marketPrice")?n.marketPrice:0;!h&&_&&(h=ze(c,l)),S.resources.push({productId:s.productId||a.productId,inventoryNum:n.inventoryNum,maxQuantity:n.maxQuantity,minQuantity:n.minQuantity,resourceName:e.resourceName,subName:e.subName,resourceId:n.resourceId,salePrice:(0,Be.rI)()?" ":"dayplay"===(null===t||void 0===t?void 0:t.usePage)?l:c,marketPrice:(0,Be.rI)()?" ":d,promotionPrice:(0,Be.rI)()?" ":l,feeFree:e.feeFree,tags:e.tags||[],cashBackAmount:n.cashBackAmount,cashBackInfo:i,templateSettingItemCode:e.templateSettingItemCode,canBuyAlone:e.canBuyAlone,unAvailableReason:!1===n.available?n.unAvailableReason:null,unitSaleCount:e.unitSaleCount,inventoryDesc:n.inventoryDesc||"",canReserve:1===n.priceDateType}),r.forEach((function(e){s.productId||C.includes(e)||C.push(e)}))}})))},N=0;N<Z.packagePriceAndStockInfos.length;N++)P();var D=S.resources;if(c||(D=D.filter((function(e){return e.productId==a.productId}))),(6==d||!c||c&&p.length<30)&&(S.invenText=Ue(D)),S.disableText=Ge(D,!!a.reservation),[f.zh.sku,f.zh.detail].includes(t.usePage)){var j,R,L=!0;S.resources.map((function(e){!e.unAvailableReason&&He(e.productId,a.productId,c)&&(j&&e.promotionPrice==j||(L=!j,j=(0,Be.rI)()?" ":Math.min(e.promotionPrice,"number"==typeof j?j:1/0),R=(0,Be.rI)()?" ":Math.min(e.salePrice,"number"==typeof R?R:1/0)),e.canReserve&&(S.hasReservation=!0,m=!0))})),S=(0,l.Z)((0,l.Z)({},S),{},{price:j,hideFrom:L,isPromotionPrice:R!=j})}else if(t.usePage==f.zh.book)if(c)S.resources.map((function(e){e.unAvailableReason||e.canReserve&&(S.hasReservation=!0,m=!0)}));else{var E=S.resources.find((function(e){return e.resourceId==v}));E?(S.price=(0,Be.rI)()?" ":E.promotionPrice,S.isPromotionPrice=E.salePrice!=E.promotionPrice,E.canReserve&&(S.hasReservation=!0,m=!0)):x.some((function(e){return!C.includes(e)}))&&(S.price=null)}p.push(S),T++}var V=(0,Me.l)(w);V=V.add(1,"day"),w=V.format("YYYY-MM-DD")},C=0;C<Z;C++)S()}return{calendar:p,hasPromotion:h,hasReservation:m,actMinPrice:n}},Ke=function(e,t,n,i){var o=e.priceAndStockInfos,r=e.unavailableSaleDates,a=e.packageInfos,s=e.basicInfo,c=e.saleProperties,u=e.aggregations,d=e.cashBackInfos,p=i.isUseDateSame,h=i.firstLevelMapSubResId,m=i.firstLevelInfos,_=i.boxResIdMapSubResId,v=[],g={},y=!1,x=t&&t.optid&&t.optid[0],b=t.usePage==f.zh.book&&u,k=a;if(n.length>0&&(k=a.filter((function(e){return n.includes(e.packageId)}))),o&&o.length>0&&a){var w=[];c.forEach((function(e){e.salesProperty.hide&&e.salesPropertyValues.forEach((function(e){return w.push(e.salesPropertyId)}))}));var I=[];if(t.usePage==f.zh.book&&x)try{var Z;I=a.find((function(e){return!!e.resourceInfos.find((function(e){return e.resourceId==x}))})).salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).filter((function(e){return!w.includes(e)}));var T=c.filter((function(e){return!e.salesProperty.hide}));1==(null===T||void 0===T?void 0:T.length)&&1==(null===T||void 0===T||null===(Z=T[0])||void 0===Z?void 0:Z.salesPropertyValues.length)&&(I=[])}catch(e){console.log(e)}for(var S=o[0].date,C=o[o.length-1].date,P=(0,N.gw)(S,C),D=0,j=function(){var e,n,i,a=null===(e=o[D])||void 0===e?void 0:e.unAvailableReason,c=function(e){var t={date:S,inventoryNum:0,price:void 0,disableText:e,resources:[]};v.push(t)};if((null===(n=o[D])||void 0===n?void 0:n.date)!=S||a)if((null===(i=o[D])||void 0===i?void 0:i.date)==S&&a)c(a.value),D++;else if(r){var w=r.find((function(e){return e.date==S}));w&&c(w.unavailableSaleDesc)}else v.length&&c(s.reservation?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2");else{for(var Z=o[D],T={date:S,price:(0,Be.rI)()?" ":Z.minPrice||0,hideFrom:!0,disableText:"",resources:[]},C=[],P=function(){var e=Z.packagePriceAndStockInfos[N],t=e.packageId,n=e.resourcePriceAndStockInfos,i=(k||[]).find((function(e){var n=e.packageId;return n==t}));null!==i&&void 0!==i&&i.resourceInfos&&i.resourceInfos.forEach((function(e){var t=n.find((function(t){return t.resourceId==e.resourceId&&!!t.inventoryNum})),o=d&&d.find((function(e){return e.resourceId==(null===t||void 0===t?void 0:t.resourceId)})),r=i.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId}));if(e&&t){var a=t.hasOwnProperty("price")?t.price:t.salePrice,l=t.salePrice,c=t.hasOwnProperty("marketPrice")?t.marketPrice:0;y||(y=ze(l,a)),T.resources.push({productId:i.productId||s.productId,inventoryNum:t.inventoryNum,maxQuantity:t.maxQuantity,minQuantity:t.minQuantity,resourceName:e.resourceName,subName:e.subName,resourceId:t.resourceId,salePrice:(0,Be.rI)()?" ":l,marketPrice:(0,Be.rI)()?" ":c,promotionPrice:(0,Be.rI)()?" ":a,feeFree:e.feeFree,tags:e.tags||[],cashBackAmount:t.cashBackAmount,cashBackInfo:o,templateSettingItemCode:e.templateSettingItemCode,canBuyAlone:e.canBuyAlone,unAvailableReason:!1===t.available?t.unAvailableReason:null,unitSaleCount:e.unitSaleCount,inventoryDesc:t.inventoryDesc||""}),r.forEach((function(e){i.productId||C.includes(e)||C.push(e)}))}}))},N=0;N<Z.packagePriceAndStockInfos.length;N++)P();p&&m.forEach((function(e){var t={date:S,resources:[],disableText:""},n=e.firstLevelId,i=h[n],o=T.resources.map((function(e){return e.resourceId})),r=[];o.forEach((function(e){var t=_[e];t?t.forEach((function(e){i&&i.includes(e)&&r.push(e)})):r.push(e)})),r=Array.from(new Set(r)),t.resources=r.map((function(e){return{resourceId:e,productId:s.productId}})),g[n]?g[n].push(t):g[n]=[t]}));var j=T.resources;if(u||(j=j.filter((function(e){return e.productId==s.productId}))),(!u||u&&v.length<30)&&(T.invenText=Ue(j)),T.disableText=Ge(j,!!s.reservation),[f.zh.sku,f.zh.detail].includes(t.usePage)){var R,L,E=!0;T.resources.map((function(e){e.unAvailableReason||!He(e.productId,s.productId,u)||R&&e.promotionPrice==R||(E=!R,R=(0,Be.rI)()?" ":Math.min(e.promotionPrice,"number"==typeof R?R:1/0),L=(0,Be.rI)()?" ":Math.min(e.salePrice,"number"==typeof L?L:1/0))})),T=(0,l.Z)((0,l.Z)({},T),{},{price:R,hideFrom:E,isPromotionPrice:L!=R})}else if(t.usePage==f.zh.book&&!b){var V=T.resources.find((function(e){return e.resourceId==x}));V?(T.price=(0,Be.rI)()?" ":V.promotionPrice,T.isPromotionPrice=V.salePrice!=V.promotionPrice):I.some((function(e){return!C.includes(e)}))&&(T.price=null)}(T.resources.length||v.length)&&v.push(T),D++}var A=(0,Me.l)(S);A=A.add(1,"day"),S=A.format("YYYY-MM-DD")},R=0;R<P;R++)j()}return{calendar:v,hasPromotion:y,firstLevelMapCalendar:g}},We=function(e,t,n){var i={},o=!1,r=n.firstLevelInfos,a=n.firstLevelMapPackageId;return r.forEach((function(r){var s=r.firstLevelId,l=a[s],c=Ke(e,t,l,n),u=c.calendar,d=c.hasPromotion;i[s]=u,o=o||d})),{firstLevelMapCalendar:i,hasPromotion:o}},Xe=function(e,t){var n=t.getProductPriceCalendar,i=t.getProductInfo,o=t.getScenicSpotInfo,r=null;i&&i.length>0&&(r=i[0].usageTimeLimit);var a={};if(n){var s=n.basicInfo,l=n.priceAndStockInfos,c=n.aggregations,u=n.saleProperties,d=n.peopleProperties,h=n.resourceInfos,m=(n.extendInfos,n.resourceType),_=n.boxProductInfos,v=n.productInfos,g=n.firstLevelInfos;if(s&&(!_||!_.length)&&l){var y,x;a.isServerData=(0,Be.rI)(),a.productId=s.productId,a.priceMode=s.priceMode,a.reservation=!!s.reservation,a.showLocalTime=!s.inChina,a.aggregation=e.aggregation=!!c,a.validDesc=Ne(r,s),a.disabledDateDesc=De(r),a.hasRecommend=(null===h||void 0===h?void 0:h.length)>1||e.aggregation&&e.usePage==f.zh.book,a.dateRecord=e.date?(0,p.Z)({},e.date,!0):{},a.isPeopleAggregations=c&&!!d,a.peoplePropertiesUnable={tip:"",info:[]},o&&(e.spotid=o[0].id),a.peopleProperties=M(n,a.peoplePropertiesUnable),a.peopleGrayProperty=B(a.peopleProperties),a.choicePeopleId=U(a.peopleProperties);var b=qe(n,e),k=b.calendar,w=b.hasPromotion,I=b.hasReservation,Z=b.actMinPrice;a.calendar=k,a.hasPromotion=w,a.hasReservation=I,a.actMinPrice=Z;var T=u.some((function(e){return e.salesPropertyValues.length>0&&!e.salesProperty.hide}));e.usePage==f.zh.book||e.isscan&&"U"!=a.priceMode||e.usePage==f.zh.sku&&"U"==a.priceMode&&!T?(a.defaultDate=je(e,a),a.showDefault=!!a.defaultDate):a.showDefault=!e.isscan&&e.date&&e.usePage!=f.zh.book,a.isHideProperties=a.aggregation&&!T,a.expandCalendar=!a.isPeopleAggregations&&a.isHideProperties,a.saleProperties=V(u,null===i||void 0===i||null===(y=i[0])||void 0===y?void 0:y.packageConfigList,null===i||void 0===i||null===(x=i[0])||void 0===x?void 0:x.guideTitleHeaderList),a.selectPropertyIds=a.expandCalendar?[]:F(a.saleProperties,c),a.packageResources=O(n),a.resources=Ve(n,e,a),a.refundPolicys={},a.maxBookingDays=s.maxBookingDays,a.minBookingDays=s.minBookingDays,a.isWIFI="wifi"==(null===s||void 0===s?void 0:s.categoryTemplateCode),a.resourcetype=m}if(s&&_&&_.length&&l){a.isPack3=!0,a.isServerData=(0,Be.rI)(),a.productId=s.productId,a.priceMode=s.priceMode;var S=z(_),C=S.isUseDateSame,P=S.isInChina,N=S.boxResIdMapSubResId,D=S.subResIdMapBoxResId,j=S.diffDateBoxResIds,R=S.sameDateBoxResIds;a.isUseDateSame=C,a.showLocalTime=!P,a.boxResIdMapSubResId=N,a.subResIdMapBoxResId=D,a.diffDateBoxResIds=j,a.sameDateBoxResIds=R;var L=Ae(v,i),A=L.prodMapValidDesc,G=L.prodMapDisabledDateDesc;if(a.prodMapValidDesc=A,a.prodMapDisabledDateDesc=G,a.aggregation=e.aggregation=!!c,a.hasRecommend=(null===h||void 0===h?void 0:h.length)>1||e.aggregation&&e.usePage==f.zh.book,a.dateRecord=e.date?(0,p.Z)({},e.date,!0):{},a.isPeopleAggregations=c&&!!d,a.peoplePropertiesUnable={tip:"",info:[]},o&&(e.spotid=o[0].id),a.peopleProperties=M(n,a.peoplePropertiesUnable),a.peopleGrayProperty=B(a.peopleProperties),a.choicePeopleId=U(a.peopleProperties),a.isPeopleAggregations&&oe(n)&&(0,E.gp)({type:"ttd_dev_sku_firstLevelInfos_err",body:{title:"\u4eba\u7fa4\u5408\u96c6\u5305\u542b\u666e\u901a\u4ea7\u54c1\uff0c\u4e00\u7ea7\u7968\u79cd\u4e0d\u552f\u4e00",data:{request:e}}}),a.firstLevelInfos=q(g,v,C),a.firstLevelMapSubResId=te(_,v,g),a.firstLevelMapSaleProperties=K(g),a.firstLevelMapSelectedPropertyIds=X(a.firstLevelMapSaleProperties),1===g.length&&(a.isSalePropertyIdDiff=ie(g,a.firstLevelMapSaleProperties)),a.firstLevelMapPackageId=ne(g,v),a.subResFullInfo=Fe(n,a),a.isUseDateSame||e.usePage==f.zh.book){var H=Ke(n,e,[],a),W=H.calendar,re=H.hasPromotion,ae=H.firstLevelMapCalendar;a.calendar=W,a.firstLevelMapCalendar=ae,a.hasPromotion=re}else{var se=We(n,e,a),le=se.firstLevelMapCalendar,ce=se.hasPromotion;a.firstLevelMapCalendar=le,a.hasPromotion=ce}a.packageResources=O(n),a.resources=Ve(n,e,a),a.refundPolicys={},a.hasSingleDateCalendar=Q(a.firstLevelInfos),C?(a.isConcatSalePropertyName=J(g),a.isConcatUseDateTitle=$(a.firstLevelInfos),a.peoplePackageDesc=Y(g,_,a.isPeopleAggregations,a.isConcatUseDateTitle),e.usePage===f.zh.book&&(a.validDesc=Oe(r),a.disabledDateDesc=De(r)),e.usePage==f.zh.book||e.isscan&&a.hasSingleDateCalendar?(a.defaultDate=je(e,a),a.showDefault=!!a.defaultDate):[f.zh.detail,f.zh.sku].includes(e.usePage)&&(a.hasSingleDateCalendar||Le(e,a),a.showDefault=!e.isscan&&e.date)):(a.isConcatUseDateTitle=ee(a.firstLevelInfos,a.firstLevelMapSaleProperties),e.usePage===f.zh.book?a.hasSingleDateCalendar?a.defaultDate=e.date:Re(e,a,_,v):[f.zh.detail,f.zh.sku].includes(e.usePage)&&Ee(e,a)),a.resourcetype=m}}return a},Ye=function(e,t,n){if(!t)return e;var i=t.resources||[],o=n.state,r=o.productId,a=o.aggregation;return i.filter((function(t){return e.includes(t.resourceId)&&He(t.productId,r,a)})).map((function(e){return e.resourceId}))},Qe=function(e,t,n,i,o,r,a,s,l){!r&&(r=i.state.saleProperties);var c=i.state.request,u={},d=tt(e,i);return!a&&(a=P(o,i)),r.forEach((function(e,c){t[c]?$e((0,h.Z)(t),n,c,u,a,i,r,s,l,o):e.salesPropertyValues.forEach((function(e){d.includes(e.salesPropertyValueId)||(u[e.salesPropertyValueId]=!0)}))})),Je(u,r,c),{grayPropertys:u,filterProperty:d}},Je=function(e,t,n){var i=t.find((function(t){return t.salesPropertyValues.every((function(t){return e[t.salesPropertyValueId]}))}));i&&null!==n&&void 0!==n&&n.spotid&&(0,E.gp)({type:"sku_resource_none",body:{title:"\u4e00\u7ec4\u9500\u552e\u5c5e\u6027\u5168\u90e8\u88ab\u7f6e\u7070",content:JSON.stringify(n)}})},$e=function(e,t,n,i,o,r,a,s,l,c){var u=r.state,d=u.isPack3,p=u.priceMode;e[n]="";var f=(s?I.load("allPropertyArray-".concat(s)):I.load("allPropertyArray"))||et(a,s),m=f[n]||[],_=at(e,r,s);if((d||"U"!==p)&&(_=Ye(_,t,r)),_=S(o,_),d){var v=(0,Z.I8)(l);v[s]=_;var g=he(v,r,c),y=me(v,g,r,c),x=y.firstLevelMapCommonResIds,b=y.filteredFirstLevelMapSubResId;_=[].concat((0,h.Z)(x[s]),(0,h.Z)(b[s]))}var k=tt(_,r);m.forEach((function(e){k.includes(e)||(i[e]=!0)}))},et=function(e,t){if(!e||!e.length)return[];var n=e.map((function(e){return e.salesPropertyValues.map((function(e){return e.salesPropertyValueId}))}));return t?I.save((0,p.Z)({},"allPropertyArray-".concat(t),n)):I.save({allPropertyArray:n}),n},tt=function(e,t){var n=t.state.packageResources,i=void 0===n?{}:n,o=Object.keys(i),r=[];return o.map((function(t){var n=i[t];n.some((function(t){return e.includes(t)}))&&(r=[].concat((0,h.Z)(r),(0,h.Z)(t.split("-").map((function(e){return Number(e)})))))})),r=Array.from(new Set(r)),r},nt=function(e){var t=e.packageResources,n=[];return t?(Object.keys(t).forEach((function(e){n=[].concat((0,h.Z)(n),(0,h.Z)(t[e]))})),I.save({allResourceId:n}),n):n},it=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=i.map((function(e,t){if(e.hide)return t}));return{salePropertyFinish:t.every((function(e,t){return!!e||a.indexOf(t)>-1})),dateFinish:!!n,peopleFinish:!r||!!o}},ot=function(e,t){var n=t.state,i=n.chioceDateData,o=n.request,r=n.saleProperties,a=n.expandCalendar,s=n.isPeopleAggregations,c=n.choicePeopleId,u=n.peopleGrayProperty,d=n.peopleProperties,p=n.priceMode,m=n.calendar,_=(0,Z.I8)(o);if(_.usePage==f.zh.book)return{chioceDateData:e};var v=null;if("M"==p){var g=D(e,t);if(0==g)return j(e,t);g&&(v=g)}else i&&i.date==e.date||(v=e);v&&(v=(0,l.Z)((0,l.Z)({},v),{},{resources:v.resources.filter((function(e){return!e.unAvailableReason}))}));var y,b,k,w,T,N=Ye(I.load("allResourceId")||nt(t.state),v,t);if(a)b={},k=N,w=[],y={salePropertyFinish:!0,dateFinish:!!v,peopleFinish:!0};else{w=t.state.selectPropertyIds;var R=at(w,t),E=S(N,R);u=C(E,s,d);var V=P(c,t);k=S(E,V),b=Qe(k,w,v,t,c).grayPropertys,y=it(t,w,v,r,c)}"M"==p?(_.endDate=v?v.endDate:"",T=L(m,_.date,_.endDate)):_.date=v?v.date:"";var A=x(y.salePropertyFinish&&y.dateFinish&&y.peopleFinish,v,k,(0,l.Z)((0,l.Z)({},t.state),{},{request:_,multiCalendar:T}));return{footer:A,request:(0,l.Z)((0,l.Z)({},_),{},{optid:(0,h.Z)(k)}),chioceDateData:v,grayPropertys:b,selectPropertyIds:w,salePropertyFinish:y.salePropertyFinish,dateFinish:y.dateFinish,peopleFinish:y.peopleFinish,peopleGrayProperty:u,choicePeopleId:c,multiCalendar:T}},rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1,o=[];e=e.filter((function(e){return!e.unAvailableReason}));for(var r=0;r<(null===(a=e)||void 0===a?void 0:a.length);r++){var a,s=e[r];if(t&&(null===s||void 0===s?void 0:s.templateSettingItemCode)==t){if(i=i>-1?Math.min(i,s.minPrice||s.salePrice):s.minPrice||s.salePrice,!n)break}else s.canBuyAlone&&o.push(s.minPrice||s.salePrice)}return i=-1==i?o.length?Math.min.apply(Math,o):void 0:i,i},at=function(e,t,n){var i=[],o=t.state.packageResources,r=void 0===o?{}:o;if(!r)return i;var a=Object.keys(r),s="-".concat(e.join("-"),"-");return n&&(s="".concat(s).concat(n,"-")),I.load(s)?i=(0,h.Z)(I.load(s)):(a.map((function(t){e.every((function(e){return"-".concat(t,"-").indexOf("-".concat(e,"-"))>-1||!e}))&&(i=[].concat((0,h.Z)(i),(0,h.Z)(r[t])))})),I.save((0,p.Z)({},s,(0,h.Z)(i)))),i},st=function(e,t,n,i,o,r,a){!o&&(o=t.state.saleProperties),!r&&(r=t.state.calendar);var s=(0,h.Z)(e),c=t.state,u=c.request,d=c.minPricePerson,m=c.resourcetype,_=c.reservation,v=c.isPack3,g=c.isUseDateSame;o&&o.length&&o.map((function(e,t){e.hide&&(s[t]="")}));var y="|".concat(s.join("|"),"|").concat(i,"|");if(I.load(y)&&(!v||g))return I.load(y);!a&&(a=at(s,t)),a=S(a,n);var x,b=[f.zh.actSku,f.zh.dayplay,f.zh.actSkuInline].includes(u.usePage),k=0,w=!1,Z=!1,T=r.map((function(e,n){var i,o,r=!0,s="",c=e.disableText,u=!1;if(b){var p,f=e.resources.filter((function(e){return a.includes(e.resourceId)})),h=t.state.isNewGuideSku;i=rt(f,d,!0),r=!!h,x=Math.min("number"===typeof x?x:1/0,"number"===typeof i?i:1/0),h&&null!==(p=e.resources)&&void 0!==p&&p.length&&(c=Ge(f,_))}else{var v,g=t.state,y=g.productId,I=g.aggregation;e.resources.map((function(e){var t=He(e.productId,y,I);if(!e.unAvailableReason&&a.includes(e.resourceId)&&t){var n=e.promotionPrice,s=e.salePrice;w||(w=ze(s,n)),i&&e.promotionPrice==i||(r=!i,i=Math.min(n,"number"==typeof i?i:1/0),o=Math.min(s,"number"==typeof o?o:1/0)),u||(u=e.canReserve),Z||(Z=e.canReserve)}}));var T=e.resources;I||(T=T.filter((function(e){return e.productId==y})));var S=T.filter((function(e){return a.includes(e.resourceId)}));(6==m||!I||I&&n<30)&&(s=Ue(S)),null!==(v=e.resources)&&void 0!==v&&v.length&&(c=Ge(S,_))}return i||0===i||k++,(0,l.Z)((0,l.Z)({},e),{},{price:i,hideFrom:r,invenText:s,disableText:c,isPromotionPrice:!b&&o!=i,hasReservation:u})}));return k&&k==T.length&&!b&&(0,E.gp)({type:"sku_resource_none",body:{title:"\u6240\u6709\u65e5\u671f\u88ab\u7f6e\u7070",content:JSON.stringify(u)}}),I.save((0,p.Z)({},y,{newCalendar:T,hasPromotion:w,hasReservation:Z,actMinPrice:x})),{newCalendar:T,hasPromotion:w,hasReservation:Z,actMinPrice:x}},lt=function(e,t){if(!t||!e)return t;var n=e.find((function(e){return e.date==t.date}));return n&&(n=(0,l.Z)((0,l.Z)({},n),{},{resources:n.resources.filter((function(e){return!e.unAvailableReason}))})),n},ct=function(e,t,n){var i,o=+new Date,r=n.state,a=r.chioceDateData,s=r.request,c=r.saleProperties,u=r.isPeopleAggregations,d=r.choicePeopleId,p=r.peopleGrayProperty,m=r.peopleProperties,_=r.priceMode,v=(0,Z.I8)(s);if(R(n))return{};Array.isArray(e)?i=e:(i=(0,h.Z)(n.state.selectPropertyIds),i[t]==e?i[t]="":i[t]=e);var g=at(i,n),y=P(d,n),b=st(i,n,y,d),k=b.newCalendar,w=b.hasPromotion,I=b.hasReservation,T=b.actMinPrice;if("U"==_&&(v.usePage==f.zh.actSku||v.usePage==f.zh.detail||v.usePage==f.zh.sku)){var N,D=c.map((function(e,t){if(e.hide)return t})),j=i.every((function(e,t){return!!e||D.indexOf(t)>-1}));if(j)a=k.find((function(e){return!!e.price})),v.date=null===(N=a)||void 0===N?void 0:N.date;else a=null,v.date=""}a=lt(k,a);var L=S(y,g),E=Ye(g,a,n);p=C("U"===_?g:E,u,m);var V=S(E,y),A=Qe("U"===_?L:V,i,a,n,d),O=A.grayPropertys,F=it(n,i,a,c,d),M=F.salePropertyFinish,B=F.dateFinish,U=F.peopleFinish,G=x(M&&B&&U,a,V,n.state,i.some((function(e){return!!e}))?T:"");return console.log("\u9500\u552e\u5c5e\u6027\u9009\u4e2d\u8fd0\u7b97\u8ba1\u65f6",+new Date-o),{footer:G,request:(0,l.Z)((0,l.Z)({},v),{},{optid:(0,h.Z)(V)}),chioceDateData:a,calendar:k,grayPropertys:O,selectPropertyIds:i,salePropertyFinish:M,dateFinish:B,peopleFinish:U,peopleGrayProperty:p,choicePeopleId:d,hasPromotion:w,hasReservation:I,actMinPrice:T}},ut=n(79301),dt=n(95308),pt=function(){var e=(0,dt.Z)((0,ut.Z)().mark((function e(t,n,i){var o,r,a,s,l,c,u,d,p,m,_,v,g,y,x,b,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V,A,O,F,M,B,U,G,H,z,q,K,W,X,Y,Q,J,$,ee,te,ne,ie,oe,re,ae,se;return(0,ut.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,o=n||{},r=o.ticketInfo,a=void 0===r?{}:r,s=a.ticketTitle,l=void 0===s?"":s,c=o.selectPropertyIds,u=o.saleProperties,d=o.chioceDateData,p=void 0===d?{}:d,m=o.isSaleOut,_=o.hasSendLogError,v=void 0!==_&&_,g=o.firstLevelMapSelectedPropertyIds,y=o.firstLevelMapSaleProperties,x=o.firstLevelMapChoiceDateData,b=void 0===x?{}:x,k=t.state,w=k.firstLevelInfos,I=k.isPack3,Z=k.isUseDateSame,T="",T=(p||{}).date||"",I&&!Z&&(S=[],w.forEach((function(e){var t=e.firstLevelId,n=b[t];S.push((n||{}).date||"")})),T=S.join("|")),C=t.state.request,P=void 0===C?{}:C,N=P.usePage,D=P.isUseInBooking,N!=f.zh.detail){e.next=32;break}j=!1,R=u,L=c,e.t0=t.devTraceType,e.next="afterFetch"===e.t0?14:"defaultSelect"===e.t0||"changeDate"===e.t0||"changeSaleProperty"===e.t0?23:"changePeople"===e.t0?28:30;break;case 14:if(!D){e.next=16;break}return e.abrupt("break",31);case 16:return E="",I&&(V=[],A=[],w.forEach((function(e){var t=e.firstLevelId;V.push.apply(V,(0,h.Z)(y[t])),A.push.apply(A,(0,h.Z)(g[t]))})),R=V,L=A),R.forEach((function(e,t){e.hide&&(E+="".concat(t?",":"").concat(e.salesPropertyName).concat(e.salesPropertyId,":"),e.salesPropertyValues.forEach((function(e){E+="".concat(e.salesPropertyValueName).concat(e.salesPropertyValueId," ")})))})),O=[{key:"PageId",value:t.header.clientInfo.pageId||""},{key:"\u7968\u79cd\u540d\u79f0",value:l||""},{key:"\u6e20\u9053\u5e73\u53f0",value:"app"},{key:"\u7248\u672c",value:t.header.clientInfo.version},{key:"\u662f\u5426\u5730\u63a8",value:"\u5426"},{key:"\u9500\u552e\u5c5e\u6027\u767d\u540d\u5355",value:E},{key:"\u975e\u767d\u540d\u5355\u552f\u4e00\u9500\u552e\u5c5e\u6027",value:L.join(",")}],ht({contents:O},t,"sys_pageinfo"),m&&!v&&ht({attrs:t.devTraceAttrs,module:"\u53ef\u8ba2\u963b\u65ad",value:"\u4ea7\u54c1\u5df2\u552e\u7f44",scene:"\u521d\u59cb\u5316"},t,"sys_show"),e.abrupt("break",31);case 23:return F=t.state,M=F.chioceDateData,B=void 0===M?{}:M,U=B.date,G=void 0===U?"":U,H=F.selectPropertyIds,z=void 0===H?[]:H,q=F.firstLevelMapChoiceDateData,K=void 0===q?{}:q,W=F.firstLevelMapSelectedPropertyIds,I&&!Z&&(X=[],w.forEach((function(e){var t=e.firstLevelId,n=K[t];X.push((n||{}).date||"")})),G=X.join("|")),T!=G&&(Y="defaultSelect"==t.devTraceType?"\u521d\u59cb\u5316":"",ht({attrs:t.devTraceAttrs,module:"\u4ef7\u683c\u65e5\u5386",before:G||"\u65e0",value:T||"\u65e0",scene:G?"\u5207\u6362\u65e5\u671f":"".concat(Y,"\u9009\u62e9\u65e5\u671f")},t,"changeDate"==t.devTraceType?"usr_change":"sys_change"),j=!0),"defaultSelect"!=t.devTraceType&&"changeSaleProperty"!=t.devTraceType||(Q=t.state.saleProperties,R=Q,J=z,I&&($=[],ee=[],te=[],w.forEach((function(e){var t=e.firstLevelId;$.push.apply($,(0,h.Z)(y[t])),ee.push.apply(ee,(0,h.Z)(g[t])),te.push.apply(te,(0,h.Z)(W[t]))})),R=$,L=ee,J=te),ne=[],ie=[],J.forEach((function(e,t){var n=ft(R,e,t);n&&ne.push(n)})),L.forEach((function(e,t){var n=ft(R,e,t);n&&ie.push(n)})),JSON.stringify(ne)!=JSON.stringify(ie)&&(ht({attrs:t.devTraceAttrs,module:"\u9500\u552e\u5c5e\u6027",scene:("defaultSelect"==t.devTraceType?"\u521d\u59cb\u5316":"")+"\u6539\u53d8\u9500\u552e\u9009\u4e2d\u503c",jsonData:{"\u7f16\u8f91\u524d":ne,"\u7f16\u8f91\u540e":ie},value:"\u6539\u53d8\u9500\u552e\u9009\u4e2d\u503c"},t,"changeSaleProperty"==t.devTraceType?"usr_change":"sys_change"),j=!0)),e.abrupt("break",31);case 28:return n.choicePeopleId!==t.state.choicePeopleId&&(ae=null===(oe=t.state.peopleProperties)||void 0===oe?void 0:oe.find((function(e){return e.peopleId===n.choicePeopleId})),se=null===(re=t.state.peopleProperties)||void 0===re?void 0:re.find((function(e){return e.peopleId===t.state.choicePeopleId})),ht({attrs:t.devTraceAttrs,module:"\u4f7f\u7528\u4eba\u7fa4",before:(null===se||void 0===se?void 0:se.peopleName)||"\u65e0",value:(null===ae||void 0===ae?void 0:ae.peopleName)||"\u65e0",scene:se?"\u5207\u6362\u4eba\u7fa4":"\u9009\u62e9\u4eba\u7fa4"},t,"usr_change"),j=!0),e.abrupt("break",31);case 30:return e.abrupt("break",31);case 31:j&&"defaultSelect"!=t.devTraceType&&(t.devTraceType="");case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](0),console.log("devtrace",e.t1);case 37:t.setState&&t.setState(n,i);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,n,i){return e.apply(this,arguments)}}(),ft=function(e,t,n){if(t){var i=e[n];if(i){var o,r=null===(o=i.salesPropertyValues)||void 0===o?void 0:o.find((function(e){return e.salesPropertyValueId==t}));return{"\u9500\u552e\u5c5e\u6027\u540d\u79f0":i.salesPropertyName,"\u9500\u552e\u5c5e\u6027\u9009\u4e2d\u503c":r.salesPropertyValueName}}}},ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sys_change";(0,E.Vg)((0,l.Z)((0,l.Z)({},e),{},{attrs:t.devTraceAttrs,action:n}))},mt=n(36556),_t=function(e,t,n){if(!e||!t)return{};var i=t.request,o=i.spotid,r=i.traceid,a=t.ticketInfo,s=void 0===a?{}:a,c=t.resourcetype,u=e.otherParams,d=void 0===u?{}:u,p={viewspotid:o,level1saleunitid:s.ticketGroupId,level2saleunitid:s.subTicketGroupId,resourcetype:d.resourcetype||c,channelid:5};return{tkt_sightdetail_browse_package:function(e){return{key:"tkt_sightdetail_browse_package",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_browse_package",loadtime:e-d.showPoplayerTime||+new Date},p),{},{keyid:196137,actiontype:"browse",actioncode:"tkt_sightdetail_browse_package"})}},dateClickLog:function(e){return function(t){return{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_date"},p),{},{date:t.cdate,applytype:e===t.cdate?"uncheck":"click",keyid:196141,actiontype:"click",actioncode:"tkt_sightdetail_click_package_date"})}}},tkt_sightdetail_click_package_option:function(e){return{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_option"},p),{},{applytype:e.selectPropertyId==e.optionid?"uncheck":"click",keyid:196142,actiontype:"click",actioncode:"tkt_sightdetail_click_package_option",optionid:e.optionid,pos:e.pos})}},moreButtonClickLog:{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_more"},p),{},{keyid:196143,actiontype:"click",actioncode:"tkt_sightdetail_click_package_more"})},tkt_sightdetail_view_package_notice:{key:"tkt_sightdetail_view_package_notice",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_view_package_notice"},p),{},{keyid:196366,actiontype:"browse",actioncode:"tkt_sightdetail_view_package_notice"})},tkt_sightdetail_click_package_notice:function(e){return{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_notice"},p),{},{keyid:196367,actiontype:"click",actioncode:"tkt_sightdetail_click_package_notice",resourceid:e.resourceid})}},tkt_sightdetail_click_package_next:function(e){return{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_next"},p),{},{keyid:196368,actiontype:"click",actioncode:"tkt_sightdetail_click_package_next",resourceid:e.resourceid,traceid:r})}},tkt_sightdetail_click_package_close:{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_close"},p),{},{keyid:196369,actiontype:"click",actioncode:"tkt_sightdetail_click_package_close"})},tkt_sightdetail_click_package_property:function(e){return{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_property"},p),{},{applytype:e.isSelect?"uncheck":"click",keyid:198676,actiontype:"click",actioncode:"tkt_sightdetail_click_package_property",pos:e.pos})}},tkt_sightdetail_click_package_propertypolicy:{type:"click",params:(0,l.Z)((0,l.Z)({key:"tkt_sightdetail_click_package_propertypolicy"},p),{},{keyid:198677,actioncode:"tkt_sightdetail_click_package_propertypolicy"})},tkt_pzxqysku_exposure:(0,mt.ap)({key:"tkt_pzxqysku_exposure",params:(0,l.Z)((0,l.Z)({},p),{},{key:"tkt_pzxqysku_exposure",keyid:""})}),tkt_pzxqypeople_exposure:(0,mt.ap)({key:"tkt_pzxqypeople_exposure",params:(0,l.Z)((0,l.Z)({},p),{},{key:"tkt_pzxqypeople_exposure",keyid:""})}),salepropertiesTraceData:function(e,t){return{action:"usr_click",attrs:n,module:"\u9500\u552e\u5c5e\u6027",value:e,scene:"\u70b9\u51fb".concat(t,"\u4e0b\u5c5e\u6027")}},btnTraceData:{module:"\u4e0b\u4e00\u6b65\u6309\u94ae",scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65\u6309\u94ae",action:"usr_click",attrs:n,value:"\u4e0b\u4e00\u6b65"},buyNoteTraceData:{action:"usr_click",module:"\u8d2d\u4e70\u987b\u77e5",attrs:n,scene:"\u70b9\u51fb\u8d2d\u4e70\u987b\u77e5",value:"\u8d2d\u4e70\u987b\u77e5"},priceDetailTraceData:{action:"usr_click",module:"\u660e\u7ec6\u6309\u94ae",attrs:n,scene:"\u70b9\u51fb\u660e\u7ec6\u6309\u94ae",value:"\u660e\u7ec6"},cleanTraceData:{action:"usr_click",module:"\u6e05\u7a7a\u9009\u62e9\u6309\u94ae",attrs:n,scene:"\u70b9\u51fb\u6e05\u7a7a\u9009\u62e9\u6309\u94ae",value:"\u6e05\u7a7a\u9009\u62e9"},clickMoreTraceData:{action:"usr_click",module:"\u66f4\u591a\u65e5\u671f",attrs:n,scene:"\u70b9\u51fb\u66f4\u591a\u65e5\u671f\u6309\u94ae",value:"\u66f4\u591a\u65e5\u671f"}}},vt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.getHoliday,o={};if(i)try{t=JSON.parse(JSON.parse(i.rspJsonStr).configList[0].configContent).Holiday}catch(e){}if(!t)return o;var r=n.start,a=n.end,s=n.isHideWork,l=r||(new Date).getTime(),c=new Date;c.setFullYear(c.getFullYear()+2);var u=a||c.getTime();if(t.forEach((function(e){var t=e.HolidayList,n=e.Year;t.forEach((function(e){var t=e.StartDay,i=e.HolidayCount,r=e.WorkDay,s=e.HolidayName,c=e.HolidayDay,d=Number(i||0),p=Number(t.slice(0,2)),f=Number(t.slice(2,4)),h=new Date(Number(n),p-1,f);if(!(h.getTime()<l||a&&h.getTime()>u)){for(var m=new Date(Number(n),Number(c.slice(0,2))-1,Number(c.slice(2,4))),_=0;_<d;_++)o[(0,N.fh)(h)]?o[(0,N.fh)(h)].work=!1:o[(0,N.fh)(h)]={name:"\u4f11",work:!1},h.setDate(h.getDate()+1);if(r){var v=r.split(",");v.map((function(e){var t=Number(e.slice(0,2)),i=Number(e.slice(2,4)),r=new Date(Number(n),t-1,i);o[(0,N.fh)(r)]={name:"\u73ed",work:!0}}))}if(o[(0,N.fh)(m)])o[(0,N.fh)(m)].name=s,o[(0,N.fh)(m)].count=d||1;else{var g=[0,6].includes(m.getDay());o[(0,N.fh)(m)]={name:s,work:!d&&!g,count:d||1}}}}))})),s)for(var d in o){var p=o[d];"\u4f11"!==p.name&&"\u73ed"!==p.name||delete o[d]}return o},gt=function(e){var t=e.getProductPriceCalendar,n=t.aggregations,i=t.peopleProperties,o={},r=e.getScenicSpotInfo&&e.getScenicSpotInfo[0].saleUnitInfo;if(r&&r[0]){var a=r[0],s=a.ticketGroupId,l=a.subTicketGroupName,c=a.subTicketGroupSubName,u=a.ticketGroupName,d=a.subTicketGroupId,p=a.ticketGroupAlias;n&&i?o.ticketTitle="".concat(p||u):(o.ticketTitle="".concat(p||u).concat(l).concat(c||""),o.ticketResourceName="".concat(l).concat(c||"")),Object.assign(o,{ticketGroupId:s,subTicketGroupId:d})}return o},yt=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object.keys(e||{}).filter((function(e){return-1!==e.indexOf("ext-")})),i={};return n.forEach((function(n){var o=n;t||(o=n.replace(/^ext-(.*)$/,"$1")),e[n]&&(i[o]=e[n])})),i},xt=function(e){return{isNewNaquhua:"newNaquhua"==e.label,naquhuaLabel:e.label}},bt=function(e){var t=e||{},n=t.getPriceInfo;if(n){var i=JSON.parse((null===n||void 0===n?void 0:n.value)||"{}"),o=i.desc,r=(o||[]).map((function(e){return{type:"text",text:e}})),a=r.map((function(e){return e.text})).join("\n"),s="\u4ee5\u4e0b\u4ef7\u683c\u4e3a\u9884\u4f30\u5230\u624b\u4ef7,\u6700\u7ec8\u4ef7\u683c\u4ee5\u652f\u4ed8\u9875\u4e3a\u51c6\u3002",l="\u67e5\u770b\u4ef7\u683c\u8bf4\u660e";return{priceNotesList:r,priceTipList:a,priceTipText:s,showPriceInfoText:l}}},kt={getParamsFromUrl:function(){var e,t=(0,se.FN)(),n=(null===t||void 0===t||null===(e=t.router)||void 0===e?void 0:e.params)||{},i=yt(n),o=(0,E.dD)();return(0,l.Z)((0,l.Z)({date:n.defaultDate||"",productId:n.productId,spotid:n.scenicSpotId||n.spotid,poiid:n.poiid,optid:[Number(n.resourceId||n.optid)],token:n.token?decodeURIComponent(n.token):"",isscan:"T"==n.isscan,useNative:"T"==n.usenative,aggregation:!(!n.token&&!n.productId),usePage:n.usePage||f.kQ[o]||f.zh.sku,ctm_ref:n.ctm_ref,traceid:n.traceid,isScanShelf:"true"==n.isScanShelf},xt(n)),{},{sourcePageType:n.sourcePageType,extParams:i})},getFormatByModules:function(e,t,n,i){var o={};return n.forEach((function(n){switch(n){case"holiday":o.holiday=vt(t);break;case"sku":o=(0,l.Z)((0,l.Z)({},o),Xe(e,t));break;case"ticketInfo":o.ticketInfo=gt(t);break;case"priceInfo":o.priceInfo=bt(t);break;case"itinerary":case"promotion":case"packages":case"imInfo":if(i){var r=i[n],a="";if("imInfo"==n){var s,c=(null===(s=t.getProductInfo)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.basicInfo)||{},u=c.flags,d=void 0===u?[]:u,p=d.includes("domestic");a=2==(null===e||void 0===e?void 0:e.bizLineType)||3==(null===e||void 0===e?void 0:e.bizLineType)?"ftsi44cv98erf":p?"5q5hp3977c6eb":"d1l1caksmnu0r"}r&&(o=(0,l.Z)((0,l.Z)({},o),r(e,t,a,o)))}break}})),o}},wt=n(2883),It=(0,re.ZP)(),Zt={default:["needBasicInfo","needSaleProperties","needUnavailableSaleDates"]},Tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.extension,o=n.tags,r=void 0===o?[]:o,a=e.needParams,s=e.type,c=void 0===s?"default":s,u=e.isFromSku,d=e.date,p=e.optid,f=(e.usePage,e.isCrossDate),h=e.boxMap,m={};(a||Zt[c]||[]).map((function(e){m[e]=!0}));var _=It.platform==ae.NX.Mini;r.push({key:"relatedResource",value:"newLogic"}),(e.poiid||e.spotid)&&(r.push({key:"needReturnUnavailableDate",value:"true"}),r.push({key:"needPackingVersion3",value:"true"}),r.push({key:"needCalcTicketPriceCalendar",value:"true"}),r.push({key:"needReservationMark",value:"true"}));var v=[];if(f){d="";var g=h[p[0]]||[];v=g.map((function(e){return{useDate:e.date,subResourceId:e.resourceId}}))}return _||(r=r.concat([{key:"seckill",value:"newSeckill"}])),u||r.push({key:"needResourceMinPriceInfo",value:"true"}),{request:Object.assign({},(0,l.Z)((0,l.Z)({},t),{},{head:{extension:i||[]}}),{scenicSpotId:e.spotid,poiId:e.poiid,bizLineType:e.bizLineType||4,id:e.productId||"",filter:{recommendScan:e.isscan,beginDate:(u||"recommend"==c)&&d?d:"",endDate:(u||"recommend"==c)&&d?d:"",resourceIds:"recommend"==c?[p[0]]:void 0},token:e.token||"",needAggregations:!!e.aggregation&&!(!e.token&&!e.productId),tags:r,seckillId:null===e||void 0===e?void 0:e.skid},v.length?{subResourceInfos:v}:{},p&&p[0]?{mainResourceIds:[p[0]]}:{},d?{useDate:d}:{},(0,l.Z)({},m)),actionUrl:"/restapi/soa2/14580/getProductPriceCalendar"}},St={default:["needBasicInfo"],booking:["needBasicInfo","needCityInfo","needUsageTimeLimit","needPackageInfos","needResourceInfos","needSaleProperties","needVendorInfo","needTagInfos","needRelatedPackageLimitSaleInfos","needSubUsageTimeLimit","needSubBasicInfo","needSubResourceBasicInfo"],sku:["needBasicInfo","needVendorInfo"],skuU:["needUsageTimeLimit","needSubUsageTimeLimit"]},Ct=function(e,t){var n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"booking",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",a=e.productId,s=e.needParams,c=(e.pshowcode,[]),u={resourceIds:[]},d={},p=[],f={};if("booking"!=o&&"sku"!=o&&"resource"!=o||e.optid&&e.optid.forEach((function(e){c.push({id:e,idType:3}),u.resourceIds.push(e)})),"booking"==o&&(d={useDate:e.date,needRefundPolicy:!0},f={seckillId:null===e||void 0===e?void 0:e.skid}),"resource"==o&&(d={useDate:"",needRefundPolicy:!0}),"detail"==o){var h=t.clientInfo,m=void 0===h?{}:h,_={extension:[],cid:se.ZP.clientID||"",syscode:m.syscode};m.extension;e.snapshotId&&(f.snapshotId=e.snapshotId);var v=e.previewTestEdition,g=e.previewTime,y=e.configId,x=e.cityId,b=e.location,k=e.tangMapping;v&&_.extension.push({name:"previewTestEdition",value:v.toString()}),g&&_.extension.push({name:"previewTime",value:g.toString()}),y&&_.extension.push({name:"configId",value:y.toString()}),b&&_.extension.push({name:"userDepartureId",value:x?String(x):"2"}),_.extension.push({name:"newRefundAdditionInfo",value:"true"}),k&&_.extension.push({name:"tangMapping",value:k}),Object.assign(t,{head:_,tags:[{key:"itineraryClause",value:""},{key:"performance",value:"automaticSelected"},{key:"performance",value:"manualSelected"},{key:"needTrafficInfoDesc",value:(0,re.ZP)().platform===ae.NX.RN?"true":"false"},{key:"filterAllViewTags",value:"true"}]}),c=[{id:a,idType:1}],d={needRefundPolicy:!0},p=[{type:0},{type:2},{type:99},{type:3},{type:4}]}var w={};(s||St[r]).map((function(e){w[e]=!0}));var I=(0,l.Z)((0,l.Z)({searchParams:c,filterParam:u,refundParam:d,imgSizes:p},w),f);return Object.assign((null===t||void 0===t?void 0:t.head)||{},{syscode:(null===t||void 0===t||null===(n=t.clientInfo)||void 0===n?void 0:n.oriSyscode)||(null===t||void 0===t||null===(i=t.clientInfo)||void 0===i?void 0:i.syscode)}),{request:Object.assign({},t,I),actionUrl:"/restapi/soa2/21052/getProductInfo"}},Pt=function(e,t){return{request:Object.assign({},e,t),actionUrl:"/restapi/soa2/21052/json/getScenicSpotInfo"}},Nt=n(59438),Dt=function(){return{request:{key:"Holiday"},actionUrl:"/restapi/soa2/12378/json/getGeneralConfigData?key=Holiday"}},jt=function(e,t,n){var i=e||{},o=i.resourceId,r=i.snapshotId,a={key:n||"PRICE_DESCRIBE",resourceIds:[o]};return r&&(a.snapshotId=r),{request:Object.assign({},t,a),actionUrl:"/restapi/soa2/12530/json/applicationConfig?v=PRICE_DESCRIBE"}},Rt=function(){var e=(0,dt.Z)((0,ut.Z)().mark((function e(t){var n,i,o,r,a,s,c,u,d,p,m,_,v;return(0,ut.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params,i=t.http,o=t.pageId,r=t.getProductInfo,a=t.devTraceAttrs,s=t.isFromPrefetch,e.prev=1,c=(0,Nt.Pg)(),o&&(c.clientInfo.pageId=o),u=[],1==n.bizLineType?u.push({key:"needAdditionalPrice",value:!0}):u.push({key:"noNeedTicketRelationResources",value:"true"}),n.aggregation&&u.push({key:"callRecallPK",value:"pkOneOrMore"}),d=[].concat((0,h.Z)(n.aggregation?[{name:"defaultHideWhitelistSaleProp",value:"true"}]:[]),(0,h.Z)(n.sourcePageType&&"searchList"==n.sourcePageType?[{name:"sourcePageType",value:"searchList"}]:[])),p=[Tt((0,l.Z)({},n),c,{extension:d,tags:u}),Dt()],n.usePage!=f.zh.actSku&&n.usePage!=f.zh.dayplay&&n.usePage!=f.zh.actSkuInline&&p.push(jt((0,l.Z)({},n),c),Pt(c,{scenicSpotIds:n.spotid||n.poiid?[n.spotid]:[0],poiIds:n.poiid?[n.poiid]:[],saleUnitParam:{resourceIds:n.optid},needBasicInfo:!0,needBargainInfo:!1})),r||n.usePage!=f.zh.detail&&n.usePage!=f.zh.actSku&&n.usePage!=f.zh.actSkuInline&&n.usePage!=f.zh.sku||p.push(Ct(n,c,"sku","skuU")),m=(0,Be.gn)()&&"ticket-detail"!==n.subPage?null:{enableCache:!0,cacheExpireTime:15,cacheLocation:"MEM"},_={list:p,cachePolicy:m,isFromPrefetch:s},a&&(_.needDevTrace=!0,_.devTraceData={attrs:a,scene:n.isUseInBooking?"Action":"\u9996\u5c4f"}),e.next=16,i(_);case 16:return v=e.sent,e.abrupt("return",{response:v});case 20:return e.prev=20,e.t0=e["catch"](1),console.log("\u9519\u8bef\u4e86",e.t0),e.abrupt("return",{});case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),Lt=null,Et=function(){function e(t,n){(0,o.Z)(this,e),(0,p.Z)(this,"target",void 0),(0,p.Z)(this,"timer",void 0),(0,p.Z)(this,"method",void 0),this.target=t,this.method=n,this.init(),this.timer=(new Date).getTime()}return(0,r.Z)(e,[{key:"init",value:function(){var e=(0,dt.Z)((0,ut.Z)().mark((function e(){var t,n,i,o,r,a,s,l,c,u,d,p,h,m,_,v,g,y,x=this;return(0,ut.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.target.state.request,this.timer=(new Date).getTime(),l=(null===(t=Lt)||void 0===t?void 0:t.state)||{},Lt=this.target,c=l.request,u=void 0===c?{}:c,d=l.priceMode,u.productId!=s.productId||!(d&&"M"!=d||u.endDate)||s.usePage!=f.zh.actSku||l.isNewGuideSku!=this.target.state.isNewGuideSku){e.next=10;break}return this.target.state=l,this.target.props.hideBreath&&this.target.props.hideBreath(),this.target.setLogData(l),e.abrupt("return");case 10:return e.next=12,Rt({http:this.target.http,params:s,getProductInfo:this.target.props.getProductInfo,devTraceAttrs:this.target.devTraceAttrs,isFromPrefetch:!1});case 12:if(p=e.sent,h=p.response,h){e.next=16;break}return e.abrupt("return");case 16:if(console.log("%c\u6027\u80fd\u68c0\u6d4b-\u9996\u5c4f\u8bf7\u6c42\u8017\u65f6:".concat((new Date).getTime()-this.timer,"ms"),"color:yellow"),m=!1,h[0].data&&h[0].data.priceAndStockInfos&&h[0].data.priceAndStockInfos.length&&h[0].data.packageInfos&&h[0].data.packageInfos.length&&!h[0].data.packageInfos.some((function(e){return!e.salesProperties}))){e.next=23;break}return m=!(null===(_=h[0])||void 0===_||!_.__hasSendLogError),this.target.afterFetch({isSaleOut:!0,hasSendErrorLog:m}),this.target.confirm.show({delayTime:500,content:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",btnCallBack:[function(){if(x.target.props.onClose)x.target.props.onClose();else{var e=s.spotid,t=s.optid,n=void 0===t?[]:t,i=n[0];62722===Number(e)&&[46403856,46404071].includes(i)&&(0,E.v5)(),x.target.pop()}}]}),e.abrupt("return");case 23:if(!h[0].data.boxProductInfos||!h[0].data.boxProductInfos.length){e.next=29;break}if(h[0].data.firstLevelInfos&&h[0].data.firstLevelInfos.length){e.next=29;break}return(0,E.gp)({type:"ttd_dev_sku_pack3calendar_response_err",body:{getProductPriceCalendar:h[0].data}}),this.target.afterFetch({isSaleOut:!0}),this.target.confirm.show({delayTime:500,content:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",btnCallBack:[function(){x.target.props.onClose?x.target.props.onClose():x.target.pop()}]}),e.abrupt("return");case 29:if(!h[0].data.entendInfos||!h[0].data.entendInfos.length){e.next=34;break}if(v=h[0].data.entendInfos.find((function(e){return!("needUpdateAppVersion"!==e.key||!e.value)})),!v){e.next=34;break}return this.target.props.changeNeedUpdate&&this.target.props.changeNeedUpdate(),e.abrupt("return");case 34:g={getProductPriceCalendar:h[0].data,getHoliday:h[1],getPriceInfo:null===h||void 0===h||null===(n=h[2])||void 0===n?void 0:n.data,getScenicSpotInfo:null===h||void 0===h||null===(i=h[3])||void 0===i?void 0:i.scenicSpotInfos,getProductInfo:null!==(o=this.target)&&void 0!==o&&null!==(o=o.props)&&void 0!==o&&o.getProductInfo?[this.target.props.getProductInfo]:(null===h||void 0===h||null===(r=h[4])||void 0===r?void 0:r.productInfos)||null,getActPreferenceInfo:null===(a=this.target)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.getActPreferenceInfo},this.timer=(new Date).getTime(),y=kt.getFormatByModules(s,g,["sku","holiday","ticketInfo","itinerary","promotion","packages","imInfo","priceInfo"],this.method),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u9996\u5c4f\u6570\u636e\u8f6c\u6362\u8017\u65f6:".concat((new Date).getTime()-this.timer,"ms"),"color:yellow"),this.target.afterFetch(y,!0);case 39:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Vt=function(e){var t=e.countArr,n=e.chioceDateData,i=e.resources,o=e.aggregation,r=e.resourceList,a=[],s=[],l="";return i.forEach((function(e,i){var l=null===n||void 0===n?void 0:n.resources.find((function(t){var n;return null===(n=e.mixedIds)||void 0===n?void 0:n.includes(t.resourceId)}));if(t[i])if(l){var c=l.inventoryNum,u=l.resourceName,d=l.minQuantity;c>0&&c<t[i]?(a.push(u),c>=d&&(t[i]=c,At(r,l.resourceId,c))):d>t[i]&&(t[i]=d,At(r,l.resourceId,d))}else if(o){var p=e.resourceName;s.push(p)}})),a.length&&(l="".concat(a.join("\u3001"),"\u5e93\u5b58\u4e0d\u8db3")),s.length&&(l+="".concat(l?"\uff0c":"").concat(s.join("\u3001"),"\u5df2\u8ba2\u5b8c")),l?"\u5df2\u9009\u65e5\u671f\u4e0b\uff0c".concat(l):""},At=function(e,t,n){var i=null===e||void 0===e?void 0:e.find((function(e){return e.id==t}));i&&(i.count=n)},Ot=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"state",void 0),(0,p.Z)((0,c.Z)(i),"logData",{}),(0,p.Z)((0,c.Z)(i),"changeFlag",!1),(0,p.Z)((0,c.Z)(i),"changeKey",""),e.request&&e.request.usePage==f.zh.book&&(i.state={chioceDateData:e.calendar.find((function(t){return t.date==e.defaultDate})),calendar:(0,h.Z)(e.calendar),resources:(0,h.Z)(e.resources),countArr:i.initCounts(e.request.optid,e.request.count,e.resources),request:(0,l.Z)({},e.request),priceMode:e.priceMode,reservation:e.reservation,ticketInfo:e.ticketInfo,holiday:e.holiday,calendarTip:e.calendarTip,showLocalTime:e.showLocalTime,isUseDateSame:e.isUseDateSame,isPack3:e.isPack3,hasSingleDateCalendar:e.hasSingleDateCalendar,firstLevelInfos:e.firstLevelInfos,hasReservation:e.hasReservation},i.logData=e.logs||{}),i}return(0,r.Z)(n,[{key:"changeDate",value:function(e,t){}},{key:"changeDatePack3",value:function(e,t,n){}},{key:"initCounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Array.from(Array(n.length)).map((function(){return 0}));return this.state&&this.state.countArr&&(i=(0,h.Z)(this.state.countArr)),n.forEach((function(n,o){if(e.length)for(var r=0;r<e.length;r++)n.mixedIds.includes(Number(e[r]))&&void 0!==t[r]&&(i[o]=t[r]);else 0==o&&(i[0]=t[0])})),i}},{key:"componentWillReceiveProps",value:function(e){var t,n=this,i=e.request,o=void 0===i?{}:i,r=e.defaultDate,a=e.fetchStatus,s=e.mainResourceChanged,c=e.resources,u=e.holiday;if(o.usePage&&![f.zh.sku,f.zh.detail].includes(o.usePage)){o.usePage==f.zh.book&&(this.logData=e.logs||{},this.setState({holiday:u})),(o.usePage==f.zh.book&&((null===c||void 0===c?void 0:c.length)!=(null===(t=this.props.resources)||void 0===t?void 0:t.length)||c.some((function(e,t){return n.props.resources[t].resourceName!=e.resourceName})))||o.isShowChangeButton&&!(0,wt.uE)(c,this.props.resources)||e.refreshSku!=this.props.refreshSku)&&(this.state.countArr=Array.from(Array(c.length)).map((function(){return 0})),this.setState({countArr:this.initCounts(o.optid,o.count,(0,h.Z)(c)),request:(0,l.Z)({},o)}));var d=!(0,wt.uE)(o.count,this.props.request.count)||!(0,wt.uE)(o.optid,this.props.request.optid);if(d&&(o.isShowChangeButton&&(this.state.countArr=Array.from(Array(c.length)).map((function(){return 0}))),this.setState({countArr:this.initCounts(o.optid,o.count,c),request:(0,l.Z)({},o)})),r!==this.props.defaultDate||!(0,wt.uE)(e.calendar,this.props.calendar)||!(0,wt.uE)(e.dateRecord,this.props.dateRecord)){var p=e.calendar.find((function(e){return e.date==o.date}));this.setState({chioceDateData:p,calendar:(0,h.Z)(e.calendar),resources:(0,h.Z)(e.resources)})}s&&!this.changeFlag&&o.usePage==f.zh.book&&2==a&&(this.changeFlag=!0,this.state.isPack3?this.changeDatePack3(this.state.chioceDateData):this.changeDate(this.state.chioceDateData))}}},{key:"formatValidText",value:function(e,t,n){var i;if(!e||!this.state.chioceDateData&&"U"!=n||"M"==n)return"";var o=null===(i=this.state.chioceDateData)||void 0===i?void 0:i.date,r="U"!=n?e.replace("{0}",o):e;return t&&(r+="\uff0c"+t),r}},{key:"onDateOrResourceChange",value:function(e){var t,n=this.state,i=n.resources,o=n.countArr,r=n.chioceDateData,a=n.request,s=this.props,c=s.changeCalender,u=s.changeCount,d=s.changeRecom,p=s.dateRecord,f=s.hasRecommend;if(c&&u&&d){var h=function(e){(0,E.gp)({body:(0,l.Z)({title:"changeCalender\u56de\u8c03\u7a7a\u6570\u7ec4"},e)})},m=[],_=a.optid[0];if(r)if(null!==i&&void 0!==i&&null!==(t=i[0])&&void 0!==t&&null!==(t=t.mixedIds)&&void 0!==t&&t.length)i.forEach((function(e,t){var n,i,s,l=r.resources.filter((function(t){return e.mixedIds.includes(t.resourceId)}));s=l.find((function(e){return a.optid.includes(e.resourceId)}))||l[0],s&&o[t]?m.push({id:s.resourceId,count:o[t],productId:s.productId}):s||h({matchDateResources:l,request:a,countArr:o}),0==t&&(_=(null===(n=s)||void 0===n?void 0:n.resourceId)||(null===(i=r.resources)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.resourceId))}));else{var v;_=null===(v=r.resources)||void 0===v||null===(v=v[0])||void 0===v?void 0:v.resourceId,f||h({resources:i})}else m=[{id:a.optid[0],count:o[0]}];if(e){if(null===r||void 0===r||!r.date)return;var g=f&&!p[r.date];if(g)d(r.date,o,_);else{var y="";f&&(y=Vt({countArr:o,chioceDateData:r,resources:i,aggregation:a.aggregation,resourceList:m})),c(r.date,m,y)}}else u(m)}}},{key:"onChangePerson",value:function(e,t){var n=this,i=this.state.countArr;i[e]=t,this.setState({countArr:i},(function(){return n.onDateOrResourceChange(!1)}))}}]),n}(Nt.ZP),Ft=function(e,t){return{request:Object.assign({},t,(0,l.Z)((0,l.Z)({},e),{},{needResourceFilter:!0})),actionUrl:"/restapi/soa2/21052/getShelfResourceList"}},Mt=function(){var e=(0,dt.Z)((0,ut.Z)().mark((function e(t,n,i,o){var r,a,s,c,u,d,p,f,h,m,_,v,g,x,b,k,w,I;return(0,ut.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.itemIdList,a=t.date,s=t.token,c=t.choicePeopleId,u=t.optid,d=t.spotid,p=t.isNewNaquhua,f=t.isScanShelf,u&&0===u.length&&ht({attrs:n.devTraceAttrs,module:"SKU",value:u,scene:"\u8d44\u6e90\u7b5b\u9009\u7ed3\u679c\u4e3a\u7a7a"},n,"usr_change"),h=n.header,m=n.state,_=n.changeKey,v=m.isUseDateSame,g=m.isPack3,x=[{key:"callRecallPK",value:o?"pkOne":"pkOneOrMore"}],p&&x.push({key:"preposeInstallment",value:"true"}),f&&x.push({key:"isScanShelf",value:"onlyScanShelf"}),b=g?v?{idList:u,date:a,spotid:d,tags:x,token:s}:{options:Bt(t,m),spotid:d,tags:x,token:s}:s?{itemIdList:r,date:a,token:s,tags:x}:{idList:u,spotid:d,date:a,tags:x},c&&(b.peoplePropertyId=Number(c)),e.next=11,n.http({list:[Ft(b,h)],needDevTrace:!0,devTraceData:{attrs:n.devTraceAttrs,scene:"\u53ec\u56de\u63a5\u53e3"}});case 11:if(k=e.sent,_===n.changeKey){e.next=14;break}return e.abrupt("return");case 14:if(!o){e.next=16;break}return e.abrupt("return",null===k||void 0===k?void 0:k[0].resourceIds);case 16:if(!g||v){e.next=21;break}if(k&&k.length&&k[0].resourceIds&&k[0].resourceIds.length&&k[0].priceInfo){e.next=21;break}return null!==k&&void 0!==k&&null!==(w=k[0])&&void 0!==w&&w.__hasSendLogError||ht({attrs:n.devTraceAttrs,module:"SKU",scene:"pk\u63a5\u53e3\u5931\u8d25"},n,"usr_change"),i&&i(),e.abrupt("return");case 21:if(k&&k.length&&k[0].resourceIds){e.next=24;break}return n.setState({footer:(0,l.Z)((0,l.Z)({},n.state.footer),{isGrayBtn:!1})},(function(){return i&&i()})),e.abrupt("return");case 24:if(k[0].resourceIds.length){e.next=27;break}return i&&i(),e.abrupt("return");case 27:I=y(k[0],n),n.setState({request:(0,l.Z)((0,l.Z)({},n.state.request),{optid:k[0].resourceIds}),footer:(0,l.Z)((0,l.Z)({},I),{isGrayBtn:!1})},(function(){return i&&i()}));case 29:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),Bt=function(e,t){var n=e.optid,i=e.date,o=t.diffDateBoxResIds,r=t.sameDateBoxResIds,a=t.boxResIdMapSubResId,s=t.firstLevelMapCommonResIds,l=void 0===s?{}:s,c=t.filteredFirstLevelMapSubResId,u=void 0===c?{}:c,d=t.firstLevelInfos,p=[],f={},m={},_=i.split("|"),v=1===Array.from(new Set(_)).length,g=[];return d.forEach((function(e,t){var n=e.firstLevelId;m[n]=_[t],g.push.apply(g,(0,h.Z)(l[n]))})),n.forEach((function(e){var t,n="";if(o.includes(e)){var i=a[e];i.forEach((function(i){var o=Object.keys(u).find((function(e){return u[e].includes(i)}))||"";n=m[o],t={resourceId:e,subResourceId:i},f[n]?f[n].push(t):f[n]=[t]}))}else if(r.includes(e))v&&(n=_[0],t={resourceId:e},f[n]?f[n].push(t):f[n]=[t]);else if(g.includes(e)){var s=Object.keys(l).find((function(t){return l[t].includes(e)}))||"";n=m[s],t={resourceId:e},f[n]?f[n].push(t):f[n]=[t]}})),Object.keys(f).forEach((function(e){var t=f[e],n={date:e,optionResources:t};p.push(n)})),p},Ut=function(e){return{salePropertyFinish:!1,dateFinish:!1,peopleFinish:!1,selectPropertyIds:[],grayPropertys:{},request:(0,l.Z)((0,l.Z)({},e),xt(e)),footer:{total:"",subPriceDes:"",isGrayBtn:!0},beforeOptidLen:e.optid?e.optid.length:0}},Gt=function(){var e=(0,dt.Z)((0,ut.Z)().mark((function e(t){return(0,ut.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,o.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"fetch",void 0),(0,p.Z)((0,c.Z)(i),"request",void 0),(0,p.Z)((0,c.Z)(i),"clickedMore",!1),(0,p.Z)((0,c.Z)(i),"aniFuns",{}),(0,p.Z)((0,c.Z)(i),"devTraceType",""),(0,p.Z)((0,c.Z)(i),"devTraceAttrs",void 0),(0,p.Z)((0,c.Z)(i),"onFinishChioce",(function(e,t){var n=e.selectPropertyIds,o=e.firstLevelMapSelectedPropertyIds,r=n;if(o){var a=i.state.firstLevelInfos,s=[];a.forEach((function(e){var t=e.firstLevelId;s.push.apply(s,(0,h.Z)(o[t]))})),r=s}var u=r?r.filter((function(e){return!!e})):[];Mt((0,l.Z)({itemIdList:u},e),(0,c.Z)(i),(function(){var e=i.state.request.subPage;"ticket-detail"!=e&&i.runFuns();var n=i.state.footer.isGrayBtn;n?i.confirm.show({content:"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u6216\u7a0d\u540e\u518d\u8bd5",btnOK:["\u77e5\u9053\u4e86"],btnCallBack:[function(){i.props.onClose?i.props.onClose():i.pop()}]}):t&&t()}))}));var r=e.request||kt.getParamsFromUrl();f.zh.actSku!=r.usePage&&I.clear(),i.devTraceAttrs=[{key:"token",value:r.token}],g.ol&&(0,g.ol)({attrs:i.devTraceAttrs});var a=e||{},s=a.pageId;return s&&((0,E.PX)({pageId:s}),i.header=(0,l.Z)((0,l.Z)({},i.header),{},{clientInfo:(0,l.Z)((0,l.Z)({},i.header.clientInfo),{},{pageId:s})})),[f.zh.sku,f.zh.detail].includes(r.usePage)&&(i.state=(0,l.Z)((0,l.Z)({},i.state),Ut(r)),i.fetch=new Et((0,c.Z)(i))),i}return(0,r.Z)(n,[{key:"addFun",value:function(e,t){this.aniFuns[e]?this.aniFuns[e].push(t):this.aniFuns[e]=[t]}},{key:"runFuns",value:function(){var e=this;Object.keys(this.aniFuns).map((function(t){var n=e.aniFuns[t].pop();"function"==typeof n&&n(),e.aniFuns[t]=[]}))}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.footer,n=e.request;"number"==typeof(null===t||void 0===t?void 0:t.total)&&null!==n&&void 0!==n&&n.aggregation||this.runFuns()}},{key:"getChoiceDateData",value:function(e){var t=e.calendar,n=void 0===t?[]:t,i=e.request;return n.find((function(e){return e.date==i.date}))}},{key:"getChoiceDateDataDiffDate",value:function(e){var t={},n=e.firstLevelMapCalendar,i=void 0===n?{}:n,o=e.request,r=o.date,a=void 0===r?"":r,s=o.firstLevelIds,l=void 0===s?[]:s,c=a.split("|");return c.length===l.length&&l.forEach((function(e,n){var o=i[e],r=c[n];t[e]=o.find((function(e){return e.date===r}))})),t}},{key:"afterFetch",value:function(e,t){var n=this,i=this.state.request,o=i||{},r=o.usePage,a=this.props.onSkuLoad;this.logData=_t(this.props,(0,l.Z)((0,l.Z)({},this.state),e),this.devTraceAttrs),this.devTraceType="afterFetch",pt(this,(0,l.Z)({},e),(function(){if(a&&a(null===e||void 0===e?void 0:e.isSaleOut,e),!e.isSaleOut){var i=n.state,o=i.isPack3,s=i.isUseDateSame,c=n.getChoiceDateData(n.state),u={};o&&!s&&(u=n.getChoiceDateDataDiffDate(n.state));var d=(0,l.Z)((0,l.Z)({},n.state.request),n.props.request),p=d.peopleId,h=void 0===p?"":p,m=d.firstLevelIds,_=void 0===m?[]:m,v=n.state.choicePeopleId,g=function(e){n.devTraceType="",t&&[f.zh.sku,f.zh.detail].includes(r)&&I.save({sku_init_state:e})},y=function(){if(o&&!s){if(r===f.zh.book)return;var e=_.some((function(e){return!!u[e]}));e?n.changeDatePack3(u,(function(){n.setPropsSalesPropertyPack3(g)}),_):n.setPropsSalesPropertyPack3(g)}else c?o?n.changeDatePack3(c,(function(){n.setPropsSalesPropertyPack3(g)})):n.changeDate(c,(function(){n.setPropsSalesProperty(g)})):o?n.setPropsSalesPropertyPack3(g):n.setPropsSalesProperty(g)};if(n.devTraceType="defaultSelect",h){var x=h||v;o?n.changePeoplePack3(x,(function(){return y()})):n.changePeople(x,(function(){return y()}))}else y()}}))}},{key:"setPropsSalesProperty",value:function(e){var t=this.props.otherParams,n=void 0===t?{}:t,i=n.salesPropertyIds,o=void 0===i?[]:i;o&&o.length>0?this.changeSaleProperty(o,-1,e):e(this.state)}},{key:"setPropsSalesPropertyPack3",value:function(e){var t=this.props,n=t.otherParams,i=void 0===n?{}:n,o=t.request,r=void 0===o?{}:o,a=i.salesPropertyIds,s=void 0===a?[]:a;if(s&&s.length>0){var l=r.firstLevelIds,c=void 0===l?[]:l,u={};c.forEach((function(e,t){var n=s[t],i=n.split("-").map((function(e){return e?Number(e):""}));u[e]=i})),this.changeSalePropertyPack3(u,-1,e,c)}else e(this.state)}},{key:"renderCalendar",value:function(e){}},{key:"clickChangePeople",value:function(e){this.devTraceType="changePeople",this.changePeople(e),this.setState({haveClearBtn:!0})}},{key:"changePeople",value:function(e,t){var n=this,i=T(e,this);pt(this,i,(function(){n.checkFinishChioce(i,t)}))}},{key:"clickChangePeoplePack3",value:function(e){this.devTraceType="changePeople",this.changePeoplePack3(e),this.setState({haveClearBtn:!0})}},{key:"changePeoplePack3",value:function(e,t){var n=this,i=de(e,this);pt(this,i,(function(){n.checkFinishChioce(i,t)}))}},{key:"clearAll",value:function(){var e=(0,Z.I8)(I.load("sku_init_state")||{});e&&delete e.assistComponent,this.setState((0,l.Z)((0,l.Z)({chioceDateData:null,choicePeopleId:"",selectPropertyIds:[],salePropertyFinish:!1,dateFinish:!1,footer:{total:"",subPriceDes:"",isGrayBtn:!0},grayPropertys:[]},e),{},{haveClearBtn:!1}))}},{key:"getSkutype",value:function(){var e=this.state,t=e.request.aggregation,n=e.choicePeopleId,i=e.expandCalendar,o=f.pL.skuResource;return i||(o=f.pL.skuProduct),n&&(o=f.pL.skuPeople),t||(o=f.pL.commonSku),o}},{key:"booking",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.platform&&"RN"==this.platform;!t&&this.renderCalendar(!1,!1),this.clickedMore=!1;var n=this.state,i=n.request,o=i.optid,r=void 0===o?[]:o,a=i.date,s=i.spotid,l=i.isscan,c=i.ctm_ref,u=i.usenative,d=i.token,p=i.extParams,f=i.traceid,m=i.isScanShelf,_=n.selectPropertyIds,v=void 0===_?[]:_,g=n.isPack3,y=n.diffDateBoxResIds,x=void 0===y?[]:y,b=n.sameDateBoxResIds,k=void 0===b?[]:b,w=n.firstLevelInfos,I=void 0===w?[]:w,Z=n.firstLevelMapSubResId,T=void 0===Z?{}:Z,C=n.firstLevelMapSelectedPropertyIds,P=void 0===C?{}:C,N=n.boxResIdMapSubResId,D=void 0===N?{}:N,j=n.beforeOptidLen,R=n.choicePeopleId,L=n.footer.hasNaquhua,E=n.resourcetype,V=this.props.otherParams,A=void 0===V?{}:V,O=A.resourcetype,F="spotid=".concat(s,"&date=").concat(a);F="".concat(F,"&resourcetype=").concat(O||E),l&&(F="".concat(F,"&isscan=T")),m&&(F="".concat(F,"&isScanShelf=true")),c&&(F="".concat(F,"&ctm_ref=").concat(c)),u&&(F="".concat(F,"&usenative=").concat(u)),f&&(F="".concat(F,"&traceid=").concat(f)),L&&(F="".concat(F,"&label=newNaquhua"));var M=ce(this.platform),B=ue(this.platform==ae.NX.RN?ae.NX.RN:ae.NX.H5),U=v.join("|");F="".concat(F,"&token=").concat(encodeURIComponent(d));var G={date:a,optid:r.join("|"),spotid:s,isscan:l,ctm_ref:c,usenative:u,salesPropertyIds:U,token:d,isNewNaquhua:!!L},H=this.getSkutype();if(R&&(G.peopleId=R),g){var z=[],q=[];I.forEach((function(e){var t=e.firstLevelId;z.push(t);var n=P[t];q.push(n.join("-"))})),U=q.join("|"),F="".concat(F,"&firstLevelIds=").concat(z.join("|")),G.firstLevelIds=z}if(F="".concat(F,"&salesPropertyIds=").concat(U),G.salesPropertyIds=U,r&&1==r.length){var K=r[0];if(F="".concat(F,"&optid=").concat(K),g){var W=[].concat((0,h.Z)(x),(0,h.Z)(k)).includes(K);if(W){var X=[],Y=D[K];I.forEach((function(e){var t=e.firstLevelId,n=T[t];X.push.apply(X,(0,h.Z)(S(Y,n)))})),F="".concat(F,"&subResourceId=").concat(X.join("-")),G.subResourceId=X.join("-")}}if(1==j&&this.props.onNextCallBack)this.props.onNextCallBack(Object.assign(G,{fromSkuType:H}));else{F="".concat(F,"&fromSkuType=").concat(H);var Q="".concat(M).concat(F,"&").concat((0,wt.Xh)(p));if("RN"==this.platform){var J=(0,se.FN)(),$=J.router.url;if(/.*CRNModuleName=rn_ttd_taro&CRNType=1/.test($)){var ee=(0,wt.vn)(Q);this.push(null===ee||void 0===ee?void 0:ee.initialPage,!1,ee)}else{if(e)return Q;this.push(Q)}}else{if(e)return Q;this.push(Q)}Gt({url:Q,http:this.http})}}else{if(g){var te=[],ne=[],ie=[];if(r.forEach((function(e){x.includes(e)?(ne.push(e),ie.push(0)):k.includes(e)?(ne.push(e),ie.push(1)):te.push(e)})),F="".concat(F,"&optid=").concat(te.join("|"),"&boxid=").concat(ne.join("|"),"&boxType=").concat(ie.join("|")),G.optid=te.join("|"),G.boxid=ne.join("|"),G.boxType=ie.join("|"),ne.length){var oe=[];ne.forEach((function(e){var t=[],n=D[e];I.forEach((function(e){var i=e.firstLevelId,o=T[i];t.push.apply(t,(0,h.Z)(S(n,o)))})),oe.push(t.join("-"))})),F="".concat(F,"&subResourceId=").concat(oe.join("|")),G.subResourceId=oe.join("|")}}else F="".concat(F,"&optid=").concat(r.join("|"));if(j>1&&this.props.onNextCallBack)this.props.onNextCallBack(G);else{var re="".concat(B).concat(F,"&fromSkuType=").concat(H,"&").concat((0,wt.Xh)(p));if(e)return re;this.push(re,!1,null,void 0,void 0,!1)}}this.onPoplayerHide()}},{key:"onPoplayerHide",value:function(){}},{key:"getWarningTip",value:function(){var e="",t=this.state,n=t.chioceDateData,i=t.choicePeopleId,o=t.selectPropertyIds,r=void 0===o?[]:o,a=t.saleProperties,s=void 0===a?[]:a,l=t.expandCalendar,c=t.isPeopleAggregations,u=t.priceMode,d=t.request,p=[];return!c||l||i||p.push("\u4f7f\u7528\u4eba\u7fa4"),n||"U"==u||p.push("\u4f7f\u7528\u65e5\u671f"),l||s.forEach((function(e,t){if(!e.hide&&!r[t]){var n=e.salesPropertyName;p.push(n)}})),e=p.reduce((function(e,t,n,i){return 0===n?e="\u8bf7\u5148\u9009\u62e9".concat(t):n<i.length-1?e+="\u3001".concat(t):e+="\u548c".concat(t),e}),""),e&&d.isNewNaquhua&&(e+="\uff0c\u9009\u4e2d\u540e\u5c55\u793a\u62ff\u53bb\u82b1\u4f18\u60e0"),e}},{key:"getPack3WarningTip",value:function(){var e="",t=this.state,n=t.chioceDateData,i=t.firstLevelMapChoiceDateData,o=void 0===i?{}:i,r=t.choicePeopleId,a=t.firstLevelInfos,s=void 0===a?[]:a,l=t.firstLevelMapSelectedPropertyIds,c=void 0===l?{}:l,u=t.firstLevelMapSaleProperties,d=void 0===u?{}:u,p=t.isUseDateSame,f=t.request,m=p?be(this,c,n,d,r):ke(this,c,o,d,r),_=[];m.peopleFinish||_.push("\u4f7f\u7528\u4eba\u7fa4"),m.dateFinish||_.push("\u4f7f\u7528\u65e5\u671f");var v=[];if(s.length>1)m.salePropertyFinish||v.push("\u5957\u9910");else{var g=s[0].firstLevelId,y=d[g],x=c[g];(y||[]).forEach((function(e,t){if(!e.hide&&!x[t]){var n=e.salesPropertyName;v.push(n)}}))}return v.length&&_.push.apply(_,(0,h.Z)(Array.from(new Set(v)))),e=_.reduce((function(e,t,n,i){return 0===n?e="\u8bf7\u5148\u9009\u62e9".concat(t):n<i.length-1?e+="\u3001".concat(t):e+="\u548c".concat(t),e}),""),e&&f.isNewNaquhua&&(e+="\uff0c\u9009\u4e2d\u540e\u5c55\u793a\u62ff\u53bb\u82b1\u4f18\u60e0"),e}},{key:"clickChangeSaleProperty",value:function(e,t,n){this.devTraceType="changeSaleProperty";var i=this.changeSaleProperty(e,t);this.setState({haveClearBtn:!0}),n&&n(i)}},{key:"changeSaleProperty",value:function(e,t,n){var i=this,o=ct(e,t,this);return pt(this,o,(function(){i.checkFinishChioce(o,(function(){n&&n(i.state)}))})),o}},{key:"clickChangeSalePropertyPack3",value:function(e,t,n){this.devTraceType="changeSaleProperty",this.changeSalePropertyPack3(e,t,void 0,n),this.setState({haveClearBtn:!0})}},{key:"changeSalePropertyPack3",value:function(e,t,n,i){var o=this,r=Te(e,t,this,i);return pt(this,r,(function(){o.checkFinishChioce(r,(function(){n&&n(o.state)}))})),r}},{key:"checkFinishChioce",value:function(e,t){var n=this,i=e.salePropertyFinish,o=e.dateFinish,r=e.peopleFinish,a=e.chioceDateData,s=void 0===a?{}:a,c=e.firstLevelMapChoiceDateData,u=void 0===c?{}:c,d=e.request,p=void 0===d?{}:d,h=e.selectPropertyIds,m=e.firstLevelMapSelectedPropertyIds,_=e.choicePeopleId,v=e.footer,g=this.state,y=g.expandCalendar,x=g.reservation,b=g.isUseDateSame,k=g.isPack3,w=g.firstLevelInfos,I=g.diffDateBoxResIds,Z=g.sameDateBoxResIds,T=g.firstLevelMapSubResId,S=g.boxResIdMapSubResId,C=p.token,P=p.spotid,N=p.optid,D=p.isNewNaquhua,j=p.isScanShelf,R=this.props.onSkuChange,L=(null===s||void 0===s?void 0:s.date)||"";if(this.changeKey="".concat((new Date).getTime(),"-").concat(Math.random()),k&&!b){var E=[];w.forEach((function(e){var t=e.firstLevelId,n=u[t];E.push((n||{}).date||"")})),L=E.join("|")}var V={date:L,selectPropertyIds:h,firstLevelMapSelectedPropertyIds:m,peopleId:_,optid:N,footer:v,isNewNaquhua:D,spotid:P,reservation:x,isPack3:k,diffDateBoxResIds:I,sameDateBoxResIds:Z,firstLevelInfos:w,firstLevelMapSubResId:T,boxResIdMapSubResId:S};if(i&&o&&r&&[f.zh.detail,f.zh.sku].includes(this.state.request.usePage)){var A=function(){t&&t();var e=n.getSkutype(),i=n.state,o=i.request,r=i.footer,a=i.resourcetype;V=(0,l.Z)((0,l.Z)({},V),{},{optid:o.optid,footer:r,skutype:e,resourcetype:a}),R&&R(V)};this.onFinishChioce({date:L,selectPropertyIds:y?[]:h,firstLevelMapSelectedPropertyIds:m,token:C,choicePeopleId:_,spotid:P,optid:N,isNewNaquhua:D,isScanShelf:j},A)}else{var O=this.getSkutype();V.skutype=O,R&&R(V),t&&t()}}}]),n}(Ot),zt=n(49787),qt=n(1826),Kt=n(20731),Wt=n(77395),Xt=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n,r;(0,o.Z)(this,i),r=t.call(this,e),(0,p.Z)((0,c.Z)(r),"cName",void 0),(0,p.Z)((0,c.Z)(r),"calendar",void 0),(0,p.Z)((0,c.Z)(r),"calendarLoading",void 0),(0,p.Z)((0,c.Z)(r),"poplayerHeight",.8*Be.Db.get("window").height-Be.iO),(0,p.Z)((0,c.Z)(r),"showDefault",void 0),(0,p.Z)((0,c.Z)(r),"hasSendExpo",void 0),r.cName="product-sku";var a=(null===(n=r.state)||void 0===n?void 0:n.request)||{};return r.state=(0,l.Z)((0,l.Z)({},r.state),{},{assistComponent:qt.K},a.usePage==f.zh.actSku||a.usePage==f.zh.dayplay||a.usePage==f.zh.actSkuInline?Ut(a):{}),r.showDefault=!a.isscan&&(a.date&&a.usePage!=f.zh.book||r.props.showDefault),a&&a.usePage==f.zh.detail&&!r.props.hasAssistCompRender&&qt.Z.register((0,c.Z)(r)),r.hasSendExpo=!1,r}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){(0,u.Z)((0,d.Z)(i.prototype),"componentDidMount",this).call(this),this.props.initCallBack&&this.props.initCallBack(this.onBackAndroid.bind(this)),qt.Z.add("calendarPopLayer",Kt.Z,{props:{isOpened:!1}}),qt.Z.add("peopleHelpInfoPopLayer",Kt.Z,{props:{isOpened:!1}})}},{key:"componentWillUnmount",value:function(){var e=I.load("sku_init_state");I.clear(),I.save({sku_init_state:e}),this.hidePop()}},{key:"hidePop",value:function(){(0,zt.sg)("calendarPopLayer")?zt.ZP.hide("calendarPopLayer"):(0,zt.sg)("buyNotes")?zt.ZP.hide("buyNotes"):(0,zt.sg)("peopleHelpInfoPopLayer")?zt.ZP.hide("peopleHelpInfoPopLayer"):(0,zt.sg)("paymentPopLayer")?zt.ZP.hide("paymentPopLayer"):this.props.onClose&&this.props.onClose()}},{key:"clickChangeDate",value:function(e){this.showDefault=!1,this.devTraceType="changeDate";var t=this.changeDate(e);return this.setState({haveClearBtn:!0}),t}},{key:"changeDate",value:function(e,t){var n=this,i=ot(e,this);return pt(this,i,(function(){n.checkFinishChioce(i,t),n.onDateOrResourceChange(!0)})),i}},{key:"clickChangeDatePack3",value:function(e,t){this.showDefault=!1,this.devTraceType="changeDate";var n=this.changeDatePack3(e,void 0,t);return this.setState({haveClearBtn:!0}),n}},{key:"changeDatePack3",value:function(e,t,n){var i=this,o=ge(e,this,n);return pt(this,o,(function(){i.checkFinishChioce(o,t),i.onDateOrResourceChange(!0)})),o}},{key:"renderCalendar",value:function(e){var t,i,o=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0,c=this.state,u=c.holiday,d=void 0===u?{}:u,p=c.peopleProperties,f=c.choicePeopleId,h=c.request,m=c.selectedPackage,_=c.priceInfo,v=c.hasPromotion,g=c.hasReservation,y=c.firstLevelMapCalendar,x=c.firstLevelMapChoiceDateData,b=void 0===x?{}:x,k=c.isPack3,w=c.isUseDateSame,I=c.showLocalTime,Z=c.isNewGuideSku;t=l?y[l]:this.state.calendar,i=l?b[l]:this.state.chioceDateData;var T=n(41614).Z,S=n(86897).Z,C=this.logData,P=C.dateClickLog,D=C.act_guidebook_2023new_calendar_expo,j=C.act_guidebook_2023new_calendardate_click;t&&(0,N.Ht)(t[0].date,t[t.length-1].date)<=3&&(a=!1),this.platform==ae.NX.Mini&&(a=!1);var R=!(p&&p.length>0)||!!f;zt.ZP.show({props:{name:"calendarPopLayer",title:"\u9009\u62e9\u65e5\u671f",popHeight:Z?.8*Be.Db.get("window").height:this.poplayerHeight,isScrollView:!1,scrollHeight:(Z?.8*Be.Db.get("window").height:this.poplayerHeight)-44,renderOnshow:a,isOpened:e,needSave:r,Breath:S,zIndex:2e3,conentStyles:{paddingBottom:0},direction:Z?"right":"bottom"},child:T,childProps:{calendar:t,holiday:d,onChooseDate:function(e){k?l?o.clickChangeDatePack3(e,l):o.clickChangeDatePack3(e):o.clickChangeDate(e),o.showDefault=!1},defaultDate:i&&i.date,firstLevelId:l,onClickCallback:function(){zt.ZP.hide("calendarPopLayer")},dateClickLog:Z?j:P&&P(i&&i.date),isInPopLayer:!0,isOpened:e,footerText:"\u540e\u7eed\u65e5\u671f\u6682\u4e0d\u53ef\u8ba2",isDateShowPrice:k?!!w&&R:R,isFromAct:s,titleTips:null===m||void 0===m?void 0:m.inMinPriceDesc,traceData:this.logData.calendarTraceData,usePage:h.usePage,marginBottom:(0,Be.cY)()?(0,Wt.Vh)(24):0,priceInfo:_,hasPromotion:v,hasReservation:g,showLocalTime:I,isNewGuideSku:Z,newCalendarExpoLog:D}})}},{key:"onShowMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;this.renderCalendar(!0,!0,!this.clickedMore,!0===e,t),!this.clickedMore&&(this.clickedMore=!0)}},{key:"onPoplayerHide",value:function(){this.hidePop()}},{key:"onBackAndroid",value:function(){this.hidePop()}}]),i}(Ht),Yt=n(80692),Qt=n(26904),Jt=n(24896),$t=n(20835),en=(0,re.ZP)(),tn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,o.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"state",void 0),(0,p.Z)((0,c.Z)(i),"colorCodes",void 0),(0,p.Z)((0,c.Z)(i),"moreTitle",void 0),(0,p.Z)((0,c.Z)(i),"moreTitleText",void 0),(0,p.Z)((0,c.Z)(i),"mainResourceId",void 0),(0,p.Z)((0,c.Z)(i),"operated",!1),(0,p.Z)((0,c.Z)(i),"isRN",en.platform==ae.NX.RN),i.cName="select-quantity";var r=e.countArr&&e.countArr.filter((function(e){return!!e}));return i.state={isCollapse:!e.isscan&&!(r&&r.length>1)&&!e.isAct,hasClickIndexs:[],hasChange:!1},i.colorCodes=["BookingEffectiveTime","limitedcancellation","nocancellation","lossycancellation","NeedTicket","AirPort","Delivery","Printing","NotScenicSpot","AggregateIn","AggregateUse","EnterNecessary"],i.mainResourceId=i.getMainResourceId(e),i.moreTitle=i.getHideItemName(),i.moreTitleText=i.getMoreTitleText(),i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){qt.Z.add("buyNotes",Kt.Z,{props:{isOpened:!1}})}},{key:"onChange",value:function(e,t){var n=this.props,i=n.onChangePerson,o=n.countArr;o[t]!=e&&i&&i(t,e)}},{key:"onChoiceDisabled",value:function(e,t,n,i,o){if(this.props.handleErrorToast)this.props.handleErrorToast();else if(n){var r=n.inventoryNum,a=t.max,s=t.count,l=t.start,c=this.getLimitMsg(n,"",!0),u=this.props,d=u.salePropertyFinish,p=void 0===d||d,f=u.logs,h=f||{},m=h.skuShowTraceData;if(i&&s+e<l&&s+e>0)return m&&(0,Jt.Z)(m("sub","tkt_3100008","\u6700\u5c11\u9009\u62e9".concat(l,"\u4efd"))),this.toast.show("\u6700\u5c11\u9009\u62e9".concat(l,"\u4efd"));if(p){if(e>0){var _=this.getPkgLimitMsg(!0,e);return _||(_=s>=r?"\u4ec5\u5269".concat(r,"\u4efd"):c||"\u6700\u591a".concat(a,"\u4efd"),m&&(0,Jt.Z)(m("add","tkt_3100009",_))),this.toast.show(_)}return e<0&&s<=l&&l>1&&0==o?(m&&(0,Jt.Z)(m("sub","tkt_3100008","".concat(l,"\u4efd\u8d77\u8ba2"))),this.toast.show("".concat(l,"\u4efd\u8d77\u8ba2"))):void 0}}}},{key:"getTarPackage",value:function(e){var t=this.props,n=t.chioceDateData,i=t.selectedPackage,o=null===n||void 0===n?void 0:n.packages.find((function(e){return e.packageId==(null===i||void 0===i?void 0:i.packageId)}));return e?o:o||i}},{key:"getPkgLimitMsg",value:function(e,t){var n=this.props,i=n.isAct,o=n.countArr,r=n.isNewGuideSku,a=i?this.getTarPackage():null;if(i&&a){var s=a.minQuantity,l=a.maxQuantity,c=o.reduce((function(e,t){return e+t}),0);if(t&&(c+=t),!e)return this.getLimitMsg(a,r?"":"\u9884\u8ba2\u603b\u6570\uff1a");if(c>l||c<s)return this.getLimitMsg(a,"\u9884\u8ba2\u603b\u6570\uff1a",e)}return""}},{key:"getLimitMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=this.props.isAct;if(!e||!i)return"";var o=e.maxQuantity,r=e.minQuantity,a=t;return r==o?a+="\u4ec5\u9650\u9884\u8ba2".concat(r,"\u4efd"):1==r&&o<=10?a+="\u6700\u591a\u9884\u8ba2".concat(o,"\u4efd"):r>1&&o<=10?a+="".concat(r,"\u4efd\u8d77\u8ba2\uff0c\u6700\u591a").concat(o,"\u4efd"):r>1&&o>10?a+="".concat(r,"\u4efd\u8d77\u8ba2"):n&&o>10&&(a+="\u6700\u591a\u9884\u8ba2".concat(o,"\u4efd")),a==t?"":a}},{key:"isLimitError",value:function(e,t){var n=this.props.isAct;if(!e||!n||!t)return!1;var i=e.maxQuantity,o=e.minQuantity;return t<o||t>i}},{key:"componentWillReceiveProps",value:function(e){var t=this.getMainResourceId(e);this.mainResourceId&&t!==this.mainResourceId&&this.setState({hasChange:!0,hasClickIndexs:[]}),this.moreTitle=this.getHideItemName(),this.moreTitleText=this.getMoreTitleText(),this.mainResourceId=t}},{key:"getMainResourceId",value:function(e){var t=null,n=e.chioceDateData,i=e.resources;if(n&&n.resources.length){var o=i[0],r=n.resources.find((function(e){var t;return null===(t=o.mixedIds)||void 0===t?void 0:t.includes(e.resourceId)}));t=(r||{}).resourceId}return t}},{key:"initChioceOptions",value:function(e,t){var n={min:0,max:0,count:0,start:1},i=this.props,o=i.countArr,r=i.selectedPackage,a=void 0===r?null:r,s=i.isAct,l=i.isStandAndPeople;if(!e)return n;n.count=o[t]||0;var c=e,u=c.maxQuantity,d=c.inventoryNum,p=c.minQuantity,f=c.templateSettingItemCode;if(n.max=Math.min(u,d||1/0),n.min=0==t?p:0,s){var h=999;if(a){var m=this.getTarPackage(!0);m&&(h=m.maxQuantity)}var _=h-o.reduce((function(e,t){return e+t}),0)+n.count;n.max=Math.min(_,u,d||1/0),n.min=o.length>1&&(!l||"Stand"!=f)?0:p,!this.operated&&o[t]<p&&p>0&&(0==t||l&&1==t)&&(n.count=p,this.onChange(p,t))}return n.start=p,n}},{key:"initCountText",value:function(e,t){var n=this.props.isAct;return e&&t?n?t>e.inventoryNum||e.inventoryNum<10?"\u4ec5\u5269".concat(e.inventoryNum,"\u4efd"):null:e.inventoryDesc?e.inventoryDesc:null:null}},{key:"initMaxCountText",value:function(e){return e&&en.platform==ae.NX.RN&&e.maxQuantity<e.inventoryNum&&e.maxQuantity<=5?"\u6bcf\u5355\u6700\u591a\u53ef\u8ba2".concat(e.maxQuantity,"\u4efd"):null}},{key:"initSaleOutText",value:function(e,t){if(!e||0==e.inventoryNum){var n=this.props.isAct;return n?"\u5982\u9700\u8d2d\u4e70\u8bf7\u5207\u6362\u5957\u9910":"\u5f53\u65e5\u5df2\u8ba2\u5b8c"}return null}},{key:"initRefundInfo",value:function(e,t){var n=this.props.chioceDateData;if(!e||!t||!n)return null;var i=t["".concat(n.date,"|").concat(e.productId)];return i?{text:i.refundShowText,type:0===i.costType?"info":"warn"}:null}},{key:"getHideItemName",value:function(){var e=[];if(this.props.isAct)return e;var t=this.props,n=t.resources,i=t.chioceDateData,o=t.countArr,r=Array.isArray(o)&&!!o.find((function(e,t){return 0!=t&&0!=e}));return n.forEach((function(t,n){if(n>0)if(null!==i&&void 0!==i&&i.resources){var a,s=null===i||void 0===i||null===(a=i.resources)||void 0===a?void 0:a.find((function(e){var n;return null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e.resourceId)}));s?r?o[n]&&e.push("".concat(s.resourceName,"x".concat(o[n]))):e.push("".concat(s.resourceName,"\xa5".concat(s.salePrice))):e.push(t.resourceName)}else e.push(t.resourceName)})),r&&(e[0]="\u5df2\u9009\uff1a".concat(e[0])),e}},{key:"getMoreTitleText",value:function(){var e="";if(this.props.isAct)return e;var t=this.props.resources;return t.forEach((function(t,n){n>0&&(e+=(e?"\u3001":"")+t.resourceName)})),e?"\u540c\u65f6\u8d2d\u4e70".concat(e):""}},{key:"getToday",value:function(){return(0,N.fh)(new Date)}},{key:"initOutRangeText",value:function(e,t){var n=this.state.hasChange,i=this.props,o=i.countArr,r=i.isAct,a=o[t];if(!n||!e||r)return"";var s=e.maxQuantity,l=e.inventoryNum,c=e.minQuantity;return a&&(a<c||a>Math.min(s,l))?"\u5546\u54c1\u4fe1\u606f\u5df2\u53d8\u66f4\uff0c\u8bf7\u6ce8\u610f\u8d2d\u4e70\u987b\u77e5\u53d8\u5316\u5e76\u91cd\u65b0\u9009\u62e9\u4efd\u6570":""}},{key:"filterTags",value:function(e,t,n){var i=this.props.chioceDateData,o=[];o=e?e.tags.concat([]):t.concat([]);var r=!!i&&i.date==this.getToday();if(!r){var a=o.findIndex((function(e){return"BookingEffectiveTime"==e.code}));a>-1&&o.splice(a,1)}if(n&&i){var s=o.findIndex((function(e){return"limitedcancellation"==e.code||"lossycancellation"==e.code}));s>-1&&o.splice(s,1)}return o}},{key:"onExpand",value:function(){if(this.props.chioceDateData){var e=this.state.isCollapse;this.setState({isCollapse:!e})}else this.toast.show("\u8bf7\u5148\u9009\u62e9\u4f7f\u7528\u65e5\u671f")}},{key:"showBuyNotesLayer",value:function(e,t){var n;if(t&&(t.resourceId||1===(null===(n=t.mixedIds)||void 0===n?void 0:n.length))){var i=this.state.hasClickIndexs;i.includes(e)||this.setState({hasClickIndexs:i.concat(e)});var o=this.props,r=o.spotId,a=o.chioceDateData,s=t.resourceId,l=(t.productId,null!==a&&void 0!==a&&a.date?[{type:"DateFilter",filterItems:[{key:"Date",value:a.date}]}]:[]);(0,Qt.n)({spotId:r,resourceId:s||t.mixedIds[0],hideBottom:!0,filters:l})}else this.props.handleErrorToast&&this.props.handleErrorToast()}},{key:"getMultiPrice",value:function(e){var t,n=this.props.calendar;return e&&(null===n||void 0===n||n.forEach((function(n){var i=n.resources.find((function(t){return t.resourceId==e}));t=m((null===i||void 0===i?void 0:i.salePrice)||0,t||0)}))),t}},{key:"handleClickHelpInfo",value:function(e){(0,$t.Z)({title:"\u9002\u7528\u4eba\u7fa4\u8bf4\u660e",dataList:[{peopleDescStr:e.resourceDesc,peopleName:e.resourceName,peopleId:0}]})}}]),n}(Nt.ZP),nn=n(23347),on=(0,re.ZP)().taroEnv==re.fO.rn,rn={letterSpacing:-.65},an={m_select_quantity:{overflow:"hidden",fontFamily:"PingFang SC"},m_select_quantity_container:(0,l.Z)((0,l.Z)({paddingRight:(0,Wt.Vh)(16)},(0,Wt.yp)((0,Wt.Vh)(16))),{},{paddingLeft:(0,Wt.Vh)(16),position:"relative"}),m_select_quantity_container_border:(0,l.Z)({},(0,Wt.Cg)({width:Wt.WI,style:"solid",color:"rgb(235,239,245)",direction:"top"})),m_select_quantity_container_active:{paddingTop:(0,Wt.Vh)(54)},top_before:{zIndex:0,width:"110%",height:(0,Wt.Vh)(40),position:"absolute",left:(0,Wt.Vh)(0),top:(0,Wt.Vh)(0)},m_select_quantity_container_top:{paddingTop:(0,Wt.Vh)(16)},gray:{color:"rgb(197,197,197)"},m_select_quantity_content:{position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between"},m_select_quantity_content_left:{flex:1,marginRight:(0,Wt.Vh)(8),width:0},m_select_quantity_content_left_top:(0,l.Z)({},Wt._),m_select_quantity_source:{color:"rgb(17,17,17)",flexWrap:"wrap",fontSize:(0,Wt.Vh)(17),fontWeight:(0,Wt.Ue)("500"),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(21)),marginRight:(0,Wt.Vh)(8),letterSpacing:(0,Wt.Vh)(-.5)},m_select_limit_text:{color:"#555",fontSize:(0,Wt.Vh)(13),fontFamily:"PingFangSC-Regular",lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),flex:1},m_select_resource_desc_space:{marginTop:(0,Wt.Vh)(10)},m_select_limit_space:{marginTop:(0,Wt.Vh)(2)},medium:{fontSize:(0,Wt.Vh)(17)},m_select_quantity_price:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,Wt.Sf)(1)),{},{color:"rgb(255,85,0)",fontSize:(0,Wt.Vh)(19),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(23)),fontWeight:"bold"},"android"==Be.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{marginRight:(0,Wt.Vh)(7)}),m_select_quantity_price_free:{fontSize:(0,Wt.Vh)(17),fontFamily:"PingFangSC-Medium",fontWeight:(0,Wt.Ue)("500")},m_select_quantity_price_act:{marginRight:(0,Wt.Vh)(9),fontSize:(0,Wt.Vh)(17),marginBottom:0},m_select_chioceOption_wraper:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",flex:0},m_select_chioceOption_content:{display:"flex",flexDirection:"row",alignItems:"center"},m_select_chioceOption_content_row:{display:"flex",flexDirection:"row",alignItems:"center"},m_selectquantity_count_tip:{color:"rgb(242,21,0)",fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),marginTop:(0,Wt.Vh)(8)},m_error_color:{color:"#f5190a"},m_select_resource_tags:{marginTop:(0,Wt.Vh)(5),display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap"},m_select_resource_tags_text:(0,l.Z)({fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),color:"rgb(15,73,153)"},rn),m_select_resource_tags_single:{display:"flex",flexDirection:"row"},m_select_quantity_tag_warning:{color:"rgb(255,119,0)"},m_select_quantity_tag_border:{fontSize:(0,Wt.Vh)(12),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),paddingRight:(0,Wt.Vh)(6),paddingLeft:(0,Wt.Vh)(6),color:"rgb(197,197,197)",fontFamily:"PingFangSC-Light",fontWeight:"200"},m_select_quantity_tag_buy:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},m_select_quantity_tag_buy_text:(0,l.Z)({fontSize:(0,Wt.Vh)(13),color:"rgb(85,85,85)",lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17))},rn),m_select_quantity_tag_dot:{background:"#f5190a",borderRadius:(0,Wt.Vh)(3),height:(0,Wt.Vh)(6),width:(0,Wt.Vh)(6),position:"absolute",top:(0,Wt.Vh)(-2),right:(0,Wt.Vh)(11)},m_select_quantity_info:{marginTop:(0,Wt.Vh)(5)},m_select_quantity_info_text:(0,l.Z)({display:"flex",fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),color:"rgb(85,85,85)"},rn),warn:{color:"rgb(255,119,0)"},info:{color:"rgb(15,73,153)"},m_select_quantity_change_text:{fontSize:(0,Wt.Vh)(13),color:"rgb(242,21,0)",lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17))},m_select_quantity_more_wrapper:{marginLeft:(0,Wt.Vh)(16),marginRight:(0,Wt.Vh)(16)},m_select_quantity_more:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:(0,Wt.Vh)(5),paddingBottom:(0,Wt.Vh)(12)},m_select_quantity_more_old:(0,l.Z)({paddingTop:(0,Wt.Vh)(12),paddingBottom:(0,Wt.Vh)(12),marginLeft:(0,Wt.Vh)(16),marginRight:(0,Wt.Vh)(16)},(0,Wt.Cg)({direction:"top",width:1/(0,Be.md)(),style:"solid",color:"#eee"})),m_select_quantity_more_left:{flex:1,alignItems:"center",paddingRight:(0,Wt.Vh)(12)},m_select_quantity_more_left_line1:(0,l.Z)({},(0,Wt.Sf)(1)),m_select_quantity_more_left_inner:{display:"flex",flexDirection:"row",alignItems:"center"},m_select_quantity_more_Right:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:(0,Wt.Vh)(2)},m_select_quantity_more_image:{display:"flex",flexDirection:"row",postion:"absolute",left:(0,Wt.Vh)(0),marginRight:(0,Wt.Vh)(4),flex:0},m_select_quantity_more_text:{display:"flex"},m_select_quantity_more_text_more:(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({display:"flex",borderRadius:15},(0,Wt.Cg)({width:1.5,style:"solid",color:"rgb(0,102,246)"})),(0,Wt.WB)((0,Wt.Vh)(10))),(0,Wt.yp)((0,Wt.Vh)(5))),{},{fontSize:0}),m_select_quantity_more_text_left:(0,l.Z)((0,l.Z)({fontSize:0},(0,Wt.Sf)(1)),{},{flex:1}),m_select_quantity_more_text_wrapper:{display:"flex",flexDirection:"row"},m_select_quantity_more_text_title:(0,l.Z)({fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(23)),color:"rgb(85,85,85)"},"android"==Be.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_select_quantity_more_text_title_click:{fontSize:(0,Wt.Vh)(12),lineHeight:(0,Wt.Nv)(15),color:"rgb(0,102,246)",fontWeight:(0,Wt.Ue)("500")},m_select_quantity_more_text_title_collapse:{fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)(19)},m_select_limit_title:(0,l.Z)((0,l.Z)((0,l.Z)({},Wt._),(0,Wt.WB)((0,Wt.Vh)(12))),(0,Wt.yp)((0,Wt.Vh)(8))),m_select_limit_title_guide:{paddingTop:0},m_select_limit_label_text:{fontSize:(0,Wt.Vh)(18),fontWeight:"bold",lineHeight:(0,Wt.Nv)((0,Wt.Vh)(24)),marginRight:(0,Wt.Vh)(8),color:"#333"},m_act_select_quantity_container:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,Wt.WB)((0,Wt.Vh)(12))),(0,Wt.yp)((0,Wt.Vh)(4))),{},{marginLeft:0,marginRight:0}),m_act_select_quantity_source:{fontSize:(0,Wt.Vh)(15),fontWeight:"400",color:"#333"},m_font0:{fontSize:0,display:on?"flex":"contents"},m_select_quantity_desc:{display:"flex",flexDirection:"row",flexWrap:"nowrap",marginTop:(0,Wt.Vh)(8),alignItems:"center"},m_select_quantity_desc_text:(0,l.Z)({fontSize:(0,Wt.Vh)(13),color:"rgb(85,85,85)",lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),height:(0,Wt.Vh)(17),flexShrink:1},rn),m_select_quantity_desc_icon:{flexShrink:0,marginLeft:(0,Wt.Vh)(3)},m_select_quantity_more_head_wrap:(0,l.Z)((0,l.Z)({marginLeft:(0,Wt.Vh)(16),marginRight:(0,Wt.Vh)(16),paddingTop:(0,Wt.Vh)(16)},(0,Wt.Cg)({direction:"top",width:1/(0,Be.md)(),color:"#EBEFF5"})),{},{lineHeight:(0,Wt.Nv)((0,Wt.Vh)(23))}),m_select_quantity_more_head:{fontSize:(0,Wt.Vh)(17),fontWeight:(0,Wt.Ue)("500"),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(21)),color:"rgb(17,17,17)",letterSpacing:(0,Wt.Vh)(-.5)},m_select_quantity_more_head_thin:{fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),color:"#555",fontWeight:(0,Wt.Ue)("500")},m_flex:{display:"flex",flexShrink:0,marginLeft:(0,Wt.Vh)(2)},click:{color:"#006FF6"},m_dark_111:{color:"#111"},m_image_excitationTips:{height:(0,Wt.Vh)(17),width:(0,Wt.Vh)(17),marginRight:(0,Wt.Vh)(2),position:"relative"},m_text_excitationTips:{fontSize:(0,Wt.Vh)(13),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),letterSpacing:-(0,Wt.Vh)(.16),fontWeight:"normal"},m_tab_excitationTips:{height:(0,Wt.Vh)(25),marginBottom:(0,Wt.Vh)(12),borderRadius:(0,Wt.Vh)(13),display:"flex",flexDirection:"row",alignItems:"center",marginLeft:-(0,Wt.Vh)(5),paddingLeft:(0,Wt.Vh)(8)},m_select_card_tips:(0,l.Z)((0,l.Z)({},Wt.xI),{},{lineHeight:(0,Wt.Nv)((0,Wt.Vh)(17)),marginTop:(0,Wt.Vh)(16),marginLeft:(0,Wt.Vh)(12)}),m_select_card_tips_icon:{marginRight:(0,Wt.Vh)(4),marginTop:(0,Wt.Vh)(1)},m_select_card_tips_text:{fontSize:(0,Wt.Vh)(13),color:"#555"}},sn={linearGradientStart:{x:0,y:1},linearGradientEnd:{x:0,y:0},linearGradientColor:["#fff","#f6f8fa"]},ln={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},orange:["#FFF4EB","#FFFFFF"],green:["#F2FCF9","#FFFFFF"]},cn=(0,nn.Z)(an),un=n(49214),dn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"state",void 0),(0,p.Z)((0,c.Z)(i),"inputRef",void 0),(0,p.Z)((0,c.Z)(i),"timer",void 0),(0,p.Z)((0,c.Z)(i),"isFouse",!1),(0,p.Z)((0,c.Z)(i),"isAlipay",void 0),(0,p.Z)((0,c.Z)(i),"isNumberDisable",(function(){return!(!i.disabledCompute(-1)||!i.disabledCompute(1))})),(0,p.Z)((0,c.Z)(i),"onBlur",(function(e){i.isFouse=!1;var t=i.state.count,n=i.props,o=n.getFocusCount,r=n.type;if(o&&o(r,!1),e=String(e).replace(/ /g,""),e!==String(t)){var a=Math.floor(e)-t;0==a||isNaN(a)?i.setVal(t):a<0?i.onMinus(a,!0):i.onPlus(a,!0)}})),(0,p.Z)((0,c.Z)(i),"onFocus",(function(){i.isFouse=!0})),i.state={count:e.count||0},i.disabledCompute=i.disabledCompute.bind((0,c.Z)(i)),i.onPlus=i.onPlus.bind((0,c.Z)(i)),i.onMinus=i.onMinus.bind((0,c.Z)(i)),i.keyboardDidHide=i.keyboardDidHide.bind((0,c.Z)(i)),i.isAlipay=(0,re.ZP)().taroEnv===re.fO.alipay,i}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){this.state.count!==e.count&&this.setState({count:e.count})}},{key:"componentDidMount",value:function(){Yt.N1.addListener("keyboardDidHide",this.keyboardDidHide)}},{key:"componentWillUnmount",value:function(){Yt.N1.removeListener("keyboardDidHide",this.keyboardDidHide),clearTimeout(this.timer)}},{key:"keyboardDidHide",value:function(){var e,t=null===(e=this.inputRef)||void 0===e?void 0:e.getRef();null===t||void 0===t||t.blur()}},{key:"disabledCompute",value:function(e){var t=this.props,n=t.count,i=t.min,o=t.max,r=t.start;return e<0&&n+e<i||e>0&&(o<n+e||0===n&&n+r>o)}},{key:"onMinus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,i=n.max,o=n.start,r=n.count;if(!this.isDisable(e,t)&&!this.isFouse){var a=o&&r+e<o?0:i<r+e?i:r+e;this.showInputToast(e,t),this.onChange(a)}}},{key:"onPlus",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.props,o=i.start,r=i.count;this.isDisable(t,n)||this.isFouse||(e=r+t<o?o:r+t,this.showInputToast(t,n),this.onChange(e))}},{key:"showInputToast",value:function(e,t){var n=this.props,i=n.start,o=n.count,r=n.onChoiceDisabled;t&&o+e<i&&r&&r(e,t)}},{key:"isDisable",value:function(e,t){var n=this.props,i=n.onChoiceDisabled,o=n.min,r=n.max,a=n.beforeChoice;if(a&&a())return!0;if(this.disabledCompute(e)){if(i&&i(e,t),t){var s=e<0?o:r;this.onChange(s)}return!0}return!1}},{key:"onChange",value:function(e){this.setVal(e);var t=this.props.onChange;t&&t(e)}},{key:"setVal",value:function(e){var t=this,n=this.state.count;n==e?this.setState({count:""},(function(){t.timer=setTimeout((function(){return t.setState({count:e})}))})):this.setState({count:e})}}]),n}(un.Z),pn=function(e){return(0,Be.gn)()?{}:{position:e}},fn={zIndex:100,display:(0,Be.gn)()?"none":"block",position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"transparent"},hn={m_choice_options:{display:"flex",flexDirection:"row",alignItems:"center"},m_choice_options_content:{display:"flex",flexDirection:"row",justifyContent:"center",width:(0,Wt.Vh)(30),overflow:"hidden"},m_choice_options_content_text:{fontSize:(0,Wt.Vh)(14),color:"#333",textAlign:"center"},option_icon:{marginTop:5},option:(0,l.Z)({display:"flex",flexDirection:"row"},pn("relative")),m_input_view_alipay:{width:10,margin:"auto"},m_hold_left:(0,l.Z)((0,l.Z)({},fn),{},{right:-5}),m_hold_right:(0,l.Z)((0,l.Z)({},fn),{},{left:-5})},mn=(0,nn.Z)({m_choice_options_content_text:(0,l.Z)((0,l.Z)({},Wt._),{},{fontSize:(0,Wt.Vh)(19),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(23)),height:(0,Wt.Vh)(23),color:"#111",textAlign:"center"})}),_n=(0,nn.Z)(hn),vn=n(29339),gn=n(3902),yn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"state",void 0),(0,p.Z)((0,c.Z)(i),"inputRefs",void 0),(0,p.Z)((0,c.Z)(i),"isAlipay",void 0),(0,p.Z)((0,c.Z)(i),"getRef",(function(){return i.inputRefs})),i.state={showClearIcon:!1,currentValue:i.props.value,focus:!1},i.onFocus=i.onFocus.bind((0,c.Z)(i)),i.onBlur=i.onBlur.bind((0,c.Z)(i)),i.onClear=i.onClear.bind((0,c.Z)(i)),e.noChangeDebounce?i.onChange=i.onChange.bind((0,c.Z)(i)):i.onChange=(0,wt.Ds)(i.onChange.bind((0,c.Z)(i)),200),i.isAlipay=(0,re.ZP)().taroEnv===re.fO.alipay,i}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({currentValue:e.value})}},{key:"cutOffPhoneNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^(\d{0,3})(\d{0,4})(\d*)$/;return this.clearSpace(e).replace(t,"$1 $2 $3").trim()}},{key:"clearSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="".concat(e);return t.replace(/\s+/g,"")}},{key:"onFocus",value:function(e,t){this.setState({showClearIcon:!0}),this.props.onFocus&&this.props.onFocus(e,t)}},{key:"onBlur",value:function(e){var t,n=this,i=this.props,o=i.onClear,r=i.iconDelayTime,a=void 0===r?0:r;o&&setTimeout((function(){n.setState({showClearIcon:!1})}),a);var s=null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.value;this.props.isMobile&&(s=this.clearSpace(s)),this.sendDevTrace(s),this.props.onBlur&&this.props.onBlur(s)}},{key:"onClear",value:function(e){var t=this;e&&e.stopPropagation&&e.stopPropagation(),setTimeout((function(){var e;(t.setState({currentValue:""}),t.props.onChange&&t.props.onChange(""),(0,re.ZP)().platform==ae.NX.RN)?null===(e=t.inputRefs)||void 0===e||e.focus():t.props.onBlur&&t.props.onBlur("")}),(0,re.ZP)().platform==ae.NX.Mini?50:0)}},{key:"onChange",value:function(e,t,n){var i,o=null===e||void 0===e||null===(i=e.detail)||void 0===i?void 0:i.value;this.props.isMobile&&(o=this.clearSpace(o)),this.setState({currentValue:o}),this.props.onChange&&this.props.onChange(o,t,n)}},{key:"sendDevTrace",value:function(e){var t=this.props,n=t.devTraceData,i=t.value;null!==n&&void 0!==n&&n.attrs&&(0,E.Vg)((0,l.Z)((0,l.Z)({},n),{},{before:i,value:e}))}}]),n}(un.Z),xn=(0,re.ZP)().platform,bn={m_input:{position:"relative",flex:1,display:"flex",flexDirection:"row",alignItems:"center"},m_input_view:{fontSize:(0,Wt.Vh)(16),width:"100%",height:22,color:"#333",flex:1,backgroundColor:"transparent"},m_input_close:{marginRight:10,padding:"RN"==xn?3:5,display:"flex"},m_input_view_alipay:{width:10,margin:"auto"}},kn=(0,nn.Z)(bn),wn=n(2269),In=(0,re.ZP)().platform,Zn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,i=t.placeholder,o=t.style,r=t.maxLength,a=t.returnKeyType,s=t.readOnly,l=t.placeholderTextColor,c=t.prefixContent,u=t.wrapperStyle,d=t.autoFocus,p=t.onClear,f=t.onSubmitEditing,h=t.cleanDevtrace,m=t.isMobile,_=this.state,v=_.showClearIcon,g=_.currentValue,y=(_.focus,m?"RN"==In?this.cutOffPhoneNumber(g):this.clearSpace(g):g);return(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([kn.m_input,u]),children:[!!c&&c,(0,wn.jsx)(Yt.II,{ref:function(t){return e.inputRefs=t},type:n,placeholder:i,value:y,onInput:this.onChange,placeholderStyle:"color: #ccc",onBlur:this.onBlur,onFocus:this.onFocus,style:(0,Wt.wh)([kn.m_input_view,o,this.isAlipay?kn.m_input_view_alipay:null]),confirmType:"done",maxlength:m?void 0:r,cursorSpacing:20,disabled:s,returnKeyType:a,placeholderTextColor:l||"#ccc",onSubmitEditing:f,autoFocus:d,onConfirm:f,cursor:y?y.length:0,className:"m_input_view_normal"}),v&&p&&g?(0,wn.jsx)(vn.Z,{style:kn.m_input_close,onClick:function(t){e.onClear(t)},devTraceData:h,children:(0,wn.jsx)(gn.Z,{type:"closecircle",size:28,color:"#cccccc"})}):null]})}}]),n}(yn),Tn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.state.count,n=this.props,i=n.minusLog,o=n.plusLog,r=n.onlyPlusWhenZero,a=n.useInput,s=void 0===a||a,l=n.size,c=n.prefixTest,u=void 0===c?"":c,d=n.traceData,p=n.resourceName,f=n.useNewStyle,h=n.activeColor,m=void 0===h?"#0086F6":h,_=_n,v=l||44;f&&(v=l||48,m="#0066F6",_=(0,Wt.Ec)(_n,mn));var g=this.isNumberDisable(),y=(0,Wt.wh)([_.m_choice_options_content_text,this.isAlipay?_.m_input_view_alipay:null]),x=this.disabledCompute(-1),b=this.disabledCompute(1);return(0,wn.jsxs)(Yt.G7,{style:_.m_choice_options,children:[0==t&&r?null:(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsxs)(vn.Z,{onClick:function(){return e.onMinus(-1)},style:_.option,log:i,testID:"".concat(u,"minus"),devTraceData:d&&!x&&d(t,t-1,p),children:[(0,wn.jsx)(gn.Z,{type:"minus",color:x?"#D5D5D5":m,size:v}),(0,wn.jsx)(Yt.G7,{style:_.m_hold_left})]}),(0,wn.jsx)(Yt.G7,{style:(0,Wt.wh)([_.m_choice_options_content]),children:g||!s?(0,wn.jsx)(Yt.xv,{style:_.m_choice_options_content_text,children:t}):(0,wn.jsx)(Zn,{ref:function(t){return e.inputRef=t},style:y,returnKeyType:"done",type:"number",placeholder:"",maxLength:4,value:t.toString(),onBlur:this.onBlur,onFocus:this.onFocus})})]}),(0,wn.jsxs)(vn.Z,{onClick:function(){return e.onPlus(1)},style:_.option,log:o,testID:"".concat(u,"plus"),devTraceData:d&&!b&&d(t,t+1,p),children:[(0,wn.jsx)(gn.Z,{type:"plus",color:b?"#D5D5D5":m,size:v}),(0,wn.jsx)(Yt.G7,{style:_.m_hold_right})]})]})}}]),n}(dn),Sn=n(87038),Cn=n(41763),Pn=n(27015),Nn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.resources,i=t.refundPolicys,o=t.chioceDateData,r=t.countArr,a=t.optidArr,s=t.isFromSku,c=t.setRef,u=t.logs,d=void 0===u?{}:u,p=t.isAct,h=t.beforeChoice,m=t.selectedPackage,_=void 0===m?null:m,v=t.salePropertyFinish,g=void 0===v||v,y=t.isMulti,x=void 0!==y&&y,b=t.isStandAndPeople,k=t.dateRecord,w=void 0===k?{}:k,I=t.aggregation,Z=t.usePage,T=t.traceData,S=t.reservation,C=t.excitationTips,P=t.excitationTipsExposureLog,N=t.priceMode,D=t.title,j=void 0===D?"\u9884\u8ba2\u9009\u62e9":D,R=t.isNewGuideSku,L=this.state,E=L.isCollapse,V=L.hasChange,A=L.hasClickIndexs,O=d.addCountLog,F=d.reduceCountLog,M=d.buyMoreExposureLog,B=d.buyMoreClickLog,U=d.productNoticeExposureLog,G=d.noticeClickLog,H=d.unfoldExposure,z=d.unfoldLog,q=(d.collapseLog,d.buyNoteTraceData),K=(d.resourceDescTraceData,d.buyMoreDevtraceLog),W=this.getPkgLimitMsg(),X=this.isLimitError(p?this.getTarPackage():null,r.reduce((function(e,t){return e+t}),0)),Y=r.filter((function(e){return!!e})).length>1,Q={fontSize:p?cn.m_select_quantity_price_act.fontSize:cn.m_select_quantity_price.fontSize,fontFamily:cn.m_select_quantity_price.fontFamily,fontWeight:cn.m_select_quantity_price.fontWeight},J="H5"==this.platform?Yt.xv:Yt.G7;return(0,wn.jsxs)(Yt.G7,{style:cn.m_select_quantity,id:"select_quantity",ref:function(e){return c&&c("select_quantity",e)},collapsable:!1,children:[!!p&&(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([cn.m_select_limit_title,R?cn.m_select_limit_title_guide:{}]),children:[(0,wn.jsx)(Yt.xv,{style:cn.m_select_limit_label_text,children:j}),!!W&&(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_limit_text,X?cn.m_error_color:{}]),children:W})]}),n.map((function(t,c){var u,d,m,v,y,k;if(E&&c>0)return null;var D=(null===o||void 0===o||null===(u=o.resources)||void 0===u?void 0:u.filter((function(e){var n;return null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e.resourceId)})))||[],j=D.filter((function(e){return a.includes(e.resourceId)})),L=t;if(o&&!j.length?p?x&&!o.endDate||(L=null):L=D[0]:1==(null===j||void 0===j?void 0:j.length)&&g&&(L=j[0]),_&&(!o||x&&!o.endDate)){var M=_.resourceInfo.find((function(e){return t.mixedIds.includes(e.resourceId)}));L=(0,l.Z)((0,l.Z)({},L),M)}I&&Z==f.zh.book&&!w[null===o||void 0===o?void 0:o.date]&&(L=t);var B=e.initChioceOptions(L,c),K=e.initCountText(L,r[c]),W=e.initMaxCountText(L),X=e.initSaleOutText(L,c),Y=e.initRefundInfo(L,i),$=e.initOutRangeText(L,c),ee=e.filterTags(L,t.tags,Y),te=e.getLimitMsg(L),ne=e.isLimitError(L,r[c]),ie=L&&(L.resourceId||L.mixedIds&&1==L.mixedIds.length)||0==c,oe=0==(null===(d=L)||void 0===d?void 0:d.salePrice),re=x?e.getMultiPrice(null===(m=L)||void 0===m?void 0:m.resourceId):null===(v=L)||void 0===v?void 0:v.salePrice;if(X&&b)return null;var ae=!(!t.shortResourceDesc&&t.resourceDesc&&t.resourceDesc.length<13&&t.resourceDesc.indexOf("/n")<0);return(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([cn.m_select_quantity_container,p?cn.m_act_select_quantity_container:c>1?cn.m_select_quantity_container_border:{},1!=c||p?{}:cn.m_select_quantity_container_active]),children:[1!=c||p?null:(0,wn.jsx)(Yt.o,{start:sn.linearGradientStart,end:sn.linearGradientEnd,direction:0,colors:["#fff","#f6f8fa"],style:cn.top_before,children:(0,wn.jsxs)(Yt.G7,{style:cn.m_select_card_tips,children:[(0,wn.jsx)(Yt.G7,{style:cn.m_select_card_tips_icon,children:(0,wn.jsx)(gn.Z,{type:"roundCheck",size:30,color:"#555"})}),(0,wn.jsx)(Yt.xv,{style:cn.m_select_card_tips_text,children:"\u4e3a\u4fdd\u8bc1\u51fa\u7968\uff0c\u4e3a\u60a8\u63a8\u8350\u540c\u5546\u5bb6\u6700\u4f18\u4ea7\u54c1"})]})}),(s||"S"!==N)&&0==c&&(null===C||void 0===C?void 0:C.contents)&&(null===C||void 0===C||null===(y=C.contents[0])||void 0===y?void 0:y.value)&&(0,wn.jsx)(Pn.Z,{delay:0,children:(0,wn.jsx)(Yt.G7,{testID:P({content:C.contents.map((function(e){return e.value})).join("")}),children:(0,wn.jsxs)(Yt.o,{start:ln.linearGradientStart,end:ln.linearGradientEnd,direction:"orange"==C.color?85.36306432618633:90,colors:"orange"==C.color?ln.orange:ln.green,style:cn.m_tab_excitationTips,children:[(0,wn.jsx)(Sn.Z,{url:C.icon,style:cn.m_image_excitationTips}),C.contents.map((function(e){return(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_text_excitationTips,"orange"==e.key?{color:"#FF5500"}:{color:"#09A76F"}]),children:e.value})}))]})})}),(0,wn.jsxs)(Yt.G7,{style:cn.m_select_quantity_content,children:[(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([cn.m_select_quantity_content_left,p?{marginRight:0}:{}]),children:[(0,wn.jsx)(Yt.G7,{style:cn.m_select_quantity_content_left_top,children:(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_quantity_source,p?cn.m_act_select_quantity_source:{},X?cn.gray:{},(t.resourceName+t.subName).length>18?cn.medium:{}]),children:"".concat(t.resourceName).concat(t.subName?"".concat(t.subName):"")})}),!!p&&!!t.resourceDesc&&(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_limit_text,cn.m_select_resource_desc_space,X?cn.gray:{}]),children:t.resourceDesc}),!!p&&!!te&&(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_limit_text,cn.m_select_limit_space,X?cn.gray:{},ne?cn.m_error_color:{}]),children:te}),t.resourceDesc&&!p?(0,wn.jsxs)(vn.Z,{style:cn.m_select_quantity_desc,onClick:ae?e.handleClickHelpInfo.bind(e,t):void 0,log:z,activeOpacity:1,children:[(0,wn.jsx)(Yt.xv,{style:cn.m_select_quantity_desc_text,numberOfLines:1,children:t.shortResourceDesc||t.resourceDesc}),ae&&(0,wn.jsx)(Yt.xv,{testID:H,style:cn.m_flex,children:(0,wn.jsx)(gn.Z,{type:"help",color:"rgb(51,51,51)",className:"m_title_icon",size:30})})]}):null]}),(0,wn.jsxs)(Yt.G7,{style:cn.m_select_chioceOption_wraper,children:[(0,wn.jsxs)(Yt.G7,{style:p?cn.m_select_chioceOption_content_row:cn.m_select_chioceOption_content,children:[L&&"number"==typeof re&&(0,wn.jsx)(Yt.G7,{style:cn.m_font0,children:(0,wn.jsx)(Cn.Z,{value:re,fstyle:{u_price_wrapper:(0,l.Z)((0,l.Z)({},cn.m_select_quantity_price),p?cn.m_select_quantity_price_act:{}),u_price_price:Q,u_price_free:(0,l.Z)((0,l.Z)((0,l.Z)({},cn.m_select_quantity_price),cn.m_select_quantity_price_free),{},{display:"flex"}),u_price_icon:Q},free:oe})}),(0,wn.jsx)(Yt.G7,{children:(0,wn.jsx)(Tn,(0,l.Z)((0,l.Z)({},B),{},{useNewStyle:!p,prefixTest:"skuresource_".concat(c,"_"),onChange:function(t){e.operated=!0,e.onChange(t,c)},onChoiceDisabled:function(t,n){return e.onChoiceDisabled(t,B,L,n,c)},minusLog:function(){var e;return F&&F(null===(e=L)||void 0===e?void 0:e.resourceId)},plusLog:function(){var e;return O&&O(null===(e=L)||void 0===e?void 0:e.resourceId)},beforeChoice:h,traceData:T,resourceName:"".concat(t.resourceName).concat(null!==(k=L)&&void 0!==k&&k.resourceId?"\uff08".concat(L.resourceId,"\uff09"):""),activeColor:R?"#0066F6":void 0}))})]}),K&&(0,wn.jsx)(Yt.xv,{style:cn.m_selectquantity_count_tip,children:K}),X&&(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_selectquantity_count_tip,{marginTop:(0,Wt.Vh)(10)}]),children:X})]})]}),(0,wn.jsxs)(vn.Z,{onClick:e.showBuyNotesLayer.bind(e,c,L),style:cn.m_select_resource_tags,log:ie&&G,devTraceData:ie&&q&&q("".concat(t.resourceName,"\uff08").concat(t.mixedIds,"\uff09")),testID:"sku_showbuynote_".concat(c),children:[!!B.count&&ee.map((function(t){return(0,wn.jsxs)(Yt.G7,{style:cn.m_select_resource_tags_single,children:[(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_resource_tags_text,e.colorCodes.indexOf(t.code)>-1?cn.m_select_quantity_tag_warning:{}]),children:t.text}),(0,wn.jsx)(Yt.xv,{style:cn.m_select_quantity_tag_border,children:"|"})]})})),ie&&!p&&(0,wn.jsxs)(J,{style:cn.m_select_quantity_tag_buy,testID:U,children:[(0,wn.jsx)(Yt.xv,{style:cn.m_select_quantity_tag_buy_text,children:S?"\u9884\u7ea6\u987b\u77e5":"\u8d2d\u4e70\u987b\u77e5"}),(0,wn.jsx)(gn.Z,{type:"arrow-right",color:"rgb(85,85,85)",size:34}),V&&!A.includes(c)&&(0,wn.jsx)(Yt.G7,{style:cn.m_select_quantity_tag_dot})]})]}),B.count&&null!==Y&&void 0!==Y&&Y.text?(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_quantity_info_text,cn[Y.type],cn.m_select_quantity_info]),children:Y.text}):null,$?(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_quantity_change_text,cn.m_select_quantity_info]),children:$}):null,t&&t.limitSaleDesc&&B.count||W?(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_quantity_info_text,cn.m_select_quantity_info]),children:t&&t.limitSaleDesc&&B.count?t.limitSaleDesc:W}):null]}),0==c&&n.length>1&&!p&&E&&(0,wn.jsx)(Yt.G7,{style:cn.m_select_quantity_more_head_wrap,children:(0,wn.jsx)(Yt.xv,{style:E?cn.m_select_quantity_more_head:cn.m_select_quantity_more_head_thin,children:"\u5bb6\u4eba\u670b\u53cb\u4e00\u8d77\u8ba2"})})]})})),this.moreTitle.length&&!p?(0,wn.jsx)(Yt.G7,{style:(0,Wt.wh)([cn.m_select_quantity_more_wrapper]),children:(0,wn.jsxs)(vn.Z,{style:(0,Wt.wh)([cn.m_select_quantity_more,E?{}:{justifyContent:"center"}]),onClick:this.onExpand.bind(this),log:B,testID:M,devTraceData:K&&K(E?"\u5c55\u5f00":"\u6536\u8d77"),activeOpacity:1,children:[E&&(0,wn.jsx)(Yt.aA,{style:(0,Wt.wh)([cn.m_select_quantity_more_left,cn.m_select_quantity_more_text_title,Y?{}:cn.m_select_quantity_more_left_line1]),numberOfLines:Y?void 0:1,children:this.isRN?this.moreTitle.map((function(t,n){return(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsx)(Yt.xv,{style:cn.m_select_quantity_more_text_title,children:t}),n!=e.moreTitle.length-1&&(0,wn.jsx)(Yt.xv,{style:cn.m_select_quantity_tag_border,children:"  |  "})]})})):this.moreTitle.join("  |  ")}),(0,wn.jsxs)(Yt.G7,{style:cn.m_select_quantity_more_Right,children:[(0,wn.jsx)(Yt.G7,{style:E?cn.m_select_quantity_more_text_more:cn.m_select_quantity_more_text,children:(0,wn.jsx)(Yt.xv,{style:(0,Wt.wh)([cn.m_select_quantity_more_text_title_click,E?{}:cn.m_select_quantity_more_text_title_collapse]),children:E?Y?"\u5c55\u5f00\u67e5\u770b":"\u5c55\u5f00\u8d2d\u4e70":"\u6536\u8d77"})}),!E&&(0,wn.jsx)(gn.Z,{type:"arrowup",color:"rgb(0,102,246)",size:24,style:(0,se.kg)({marginLeft:4})})]})]})}):null]})}}]),n}(tn),Dn=n(65114),jn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props.assistComponent;return(0,wn.jsx)(wn.Fragment,{children:Object.keys(e).map((function(t,n){var i=e[t].component,o=e[t].assistComponent.props,r=e[t].assistComponent.child,a=e[t].assistComponent.childProps;return(0,wn.jsx)(i,(0,l.Z)((0,l.Z)({},o),{},{children:r&&(0,wn.jsx)(r,(0,l.Z)({},a))}),n)}))})}}]),n}(Nt.ZP),Rn=n(64670),Ln=function(e){return(0,wn.jsx)(wn.Fragment,{})},En=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n)}(Nt.ZP),Vn={m_sku_section_title:{display:"flex",flexDirection:"row",position:"relative",paddingLeft:(0,Wt.Vh)(16),paddingRight:(0,Wt.Vh)(16),paddingTop:(0,Wt.Vh)(20)},m_sku_section_title_text:{flex:1,color:"#111",fontFamily:"PingFangSC-Medium",fontSize:(0,Wt.Vh)(17),letterSpacing:(0,Wt.Vh)(-.28),fontWeight:(0,Wt.Ue)("500"),lineHeight:(0,Wt.Nv)((0,Wt.Vh)(21))},m_sku_section_title_shadow:{position:"absolute",left:(0,Wt.Vh)(16),top:(0,Wt.Vh)(36),height:(0,Wt.Vh)(5),width:(0,Wt.Vh)(64)}},An=(0,nn.Z)(Vn),On=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.ticketTitle,n=e.isShowShadow;return(0,wn.jsx)(Yt.G7,{style:An.m_sku_section_title,children:!!t&&(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsx)(Yt.xv,{style:An.m_sku_section_title_text,children:t}),!!n&&(0,wn.jsx)(Yt.o,{style:An.m_sku_section_title_shadow,start:{x:1,y:0},end:{x:0,y:0},direction:-90,colors:["rgba(255, 255, 255, 0.04)","rgba(16, 73, 153, 0.28)"]})]})})}}]),n}(En),Fn=function(e){return(0,wn.jsx)(Ln,(0,l.Z)({},e))},Mn=Fn,Bn=Fn,Un=Fn,Gn=Fn,Hn=Fn,zn=Fn,qn=Fn,Kn=Fn,Wn=Fn,Xn=Fn,Yn=Fn,Qn=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){return(0,o.Z)(this,i),t.call(this,e)}return(0,r.Z)(i,[{key:"render",value:function(){var e=this,t=this.props,i=t.refundPolicys,o=t.validDesc,r=t.disabledDateDesc,a=t.prodMapValidDesc,s=t.prodMapDisabledDateDesc,c=t.hasAssistCompRender,u=t.setRef,d=t.anchor,p=t.prefix,h=t.dateRecord,m=t.isServerData,_=t.otherParams,v=void 0===_?{}:_,g=t.excitationTips,y=t.waitCalendar,x=this.state,b=x.request,k=x.priceMode,w=x.chioceDateData,I=x.firstLevelMapChoiceDateData,Z=void 0===I?{}:I,T=x.resources,S=x.countArr,C=x.calendar,P=x.firstLevelMapCalendar,N=x.expandCalendar,D=x.grayPropertys,j=void 0===D?{}:D,R=x.saleProperties,L=x.holiday,E=x.salePropertyFinish,V=x.selectPropertyIds,A=x.footer,O=x.isSaleOut,F=x.ticketInfo,M=void 0===F?{}:F,B=M.ticketTitle,U=void 0===B?"":B,G=x.assistComponent,H=x.peopleProperties,z=x.choicePeopleId,q=x.peopleGrayProperty,K=x.isHideProperties,W=x.haveClearBtn,X=x.peoplePropertiesUnable,Y=x.reservation,Q=x.calendarTip,J=x.showLocalTime,$=x.priceInfo,ee=x.hasPromotion,te=x.isPack3,ne=x.isUseDateSame,ie=x.firstLevelInfos,oe=x.hasSingleDateCalendar,re=x.isConcatSalePropertyName,ae=x.isConcatUseDateTitle,se=x.firstLevelMapSaleProperties,le=x.firstLevelMapSelectedPropertyIds,ce=x.firstLevelMapGrayPropertys,ue=void 0===ce?{}:ce,de=x.peoplePackageDesc,pe=void 0===de?"":de,fe=x.hasReservation,he=function(){return e.toast.show("\u65e5\u671f\u5207\u6362\u4e2d\uff0c\u8bf7\u7a0d\u540e\u5207\u6362\u4efd\u6570"),!0},me=function(){return!0},_e=function(){!r&&(r=e.state.disabledDateDesc),!o&&(o=e.state.validDesc);var t=b.usePage,a=(b.date,b.subPage),s=b.isUseInBooking,_=void 0!==s&&s,x=e.getWarningTip(),I=e.logData.tkt_sightdetail_browse_package,Z={};U&&!e.hasSendExpo&&(Z=I&&I(+new Date,"T")||{},e.hasSendExpo=!0);var P=!(H&&H.length>0)||!!z,D=N||![f.zh.sku,f.zh.detail].includes(t)||"ticket-detail"==a?Yt.G7:Yt.pf,F="ticket-detail"==a,M=N&&"ticket-detail"!=a;t!==f.zh.book&&(!F&&(Mn=n(52295).Z),Bn=n(86897).Z,Un=n(30706).Z,Gn=n(90165).Z,Hn=n(70367).Z,zn=n(21923).Z,M&&(Kn=n(41614).Z));var B="ticket-detail"!=a&&U;return B&&(qn=n(14792).Z),b.isFromSku||("S"==k?((!N||"ticket-detail"==a)&&(Yn=n(58519).Z),Wn=n(17707).Z):"U"==k&&t!==f.zh.book&&(Xn=n(83561).Z)),(0,wn.jsxs)(Yt.G7,{className:"m_sku",style:(0,Wt.wh)([Dn.ZP.m_container,t==f.zh.detail?Dn.ZP.m_container_radius:null,[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_height:null]),children:[[f.zh.sku,f.zh.book].includes(t)||C&&C.length?null:(0,wn.jsx)(Yt.G7,{style:(0,Wt.wh)([v.skuMinHeight?{height:v.skuMinHeight}:{height:"100%"}]),children:(0,wn.jsx)(Bn,{})}),!!O&&(0,wn.jsx)(Hn,{}),null!==V&&void 0!==V&&V.length?(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_height_0}):(0,wn.jsx)(Yt.xv,{style:Dn.ZP.m_height_0}),!O&&(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([Dn.ZP.m_sku,[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_height:null]),children:[B&&(0,wn.jsx)(qn,{ticketTitle:U,testID:(0,mt.kI)(Z.key,Z.params),usePage:t,closeClickLog:e.logData.tkt_sightdetail_click_package_close,onPoplayerHide:e.props.onClosePage||e.onPoplayerHide.bind(e)}),(0,wn.jsx)(Rn.Z,{show:!!x&&[f.zh.sku,f.zh.detail].includes(t),noFirstAni:!0,changeData:x,delay:!0,collectAniFun:e.addFun.bind(e,"sku"),style:[f.zh.sku,f.zh.detail].includes(t)?{height:"100%",flex:1,overflow:"hidden"}:null,AniComp:(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_sku_warn_wrapper,children:!(![f.zh.sku,f.zh.detail].includes(t)||!C)&&(0,wn.jsx)(zn,{text:x,priceInfo:$,hasPromotion:ee,isDateShowPrice:P,priceMode:k,showCalendar:M,hasReservation:fe})}),Siblings:(0,wn.jsxs)(D,{style:[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_index:null,scrollY:!0,enableFlex:!0,id:"sku",children:[!b.isFromSku&&(0,wn.jsxs)(wn.Fragment,{children:[!!H&&!!H.length&&!N&&(0,wn.jsx)(Gn,{thinTitle:F,titleText:"\u4f7f\u7528\u4eba\u7fa4",dataList:H,peoplePropertiesUnable:X,peopleGrayProperty:q,choicePeopleId:z,onClick:e.clickChangePeople.bind(e),peopleExposureLog:e.logData.tkt_pzxqypeople_exposure,propertyClickLog:e.logData.tkt_sightdetail_click_package_property,popClickLog:e.logData.tkt_sightdetail_click_package_propertypolicy}),"S"==k&&(!N||"ticket-detail"==a)&&(0,wn.jsx)(Yn,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:C,isDateShowPrice:P,onChooseDate:function(t){e.clickChangeDate(t)},onShowMore:e.onShowMore.bind(e),defaultDate:w&&w.date,showLocalTime:J,thinTitle:F,dateTitle:t==f.zh.book?"\u9009\u62e9\u65e5\u671f":"\u4f7f\u7528\u65e5\u671f",usePage:t,showDefault:e.showDefault,showFrom:!E,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(w&&w.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,hasReservation:fe,showReservationTip:w&&w.hasReservation}),"S"==k&&M&&[f.zh.sku,f.zh.detail].includes(t)&&(0,wn.jsx)(Kn,{titleText:"\u4f7f\u7528\u65e5\u671f",calendar:C,holiday:L,onChooseDate:function(t){e.clickChangeDate(t)},defaultDate:w&&w.date,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(w&&w.date),usePage:t,footerText:"\u540e\u7eed\u65e5\u671f\u6682\u4e0d\u53ef\u8ba2",traceData:e.logData.calendarTraceData,priceInfo:$,hasPromotion:ee,isDateShowPrice:P,warnTip:x,hasReservation:fe,showLocalTime:J}),"U"==k&&f.zh.book!=t&&(0,wn.jsx)(Xn,{validDesc:o,disabledDateDesc:r,logs:e.logData}),[f.zh.sku,f.zh.detail].includes(t)&&!K&&R&&R.length&&(0,wn.jsx)(Un,{thinTitle:F,saleProperties:R,onChooseSaleProperty:e.clickChangeSaleProperty.bind(e),selectPropertyIds:V,grayPropertys:j,propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Dn.Y4}),[f.zh.book].includes(t)&&"S"==k&&(0,wn.jsx)(Wn,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0})]}),t==f.zh.book&&T&&T.length?(0,wn.jsx)(Nn,{setRef:u,logs:e.logData,isscan:b.isscan,isFromSku:b.isFromSku,optidArr:b.optid,spotId:b.spotid,reservation:Y,aggregation:b.aggregation,dateRecord:h,countArr:S,usePage:t,resources:T,refundPolicys:i,chioceDateData:w,onChangePerson:e.onChangePerson.bind(e),handleErrorToast:e.props.handleErrorToast,traceData:e.logData.countTraceData,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,priceMode:k,beforeChoice:y?he:m?me:null,isServerData:m}):null]}),siblingStyle:[f.zh.sku,f.zh.detail].includes(t)?{display:"flex",flex:1,overflow:"hidden"}:null,prefix:p}),[f.zh.sku,f.zh.detail].includes(t)&&"ticket-detail"!=a&&(0,wn.jsx)(Mn,(0,l.Z)((0,l.Z)({},A),{},{notHigh:t==f.zh.detail&&"RN"==e.platform,spotid:b.spotid,optid:b.optid,isScanShelf:b.isScanShelf,isFromShelfSku:!!e.props.isFromShelfSku,booking:e.booking.bind(e),collectAniFun:e.addFun.bind(e,"skufooter"),showBuyNotes:e.props.showBuyNotes,buyNoteClickLog:e.logData.tkt_sightdetail_click_package_notice,buyNoteExposureLog:e.logData.tkt_sightdetail_view_package_notice,btnClickLog:e.logData.tkt_sightdetail_click_package_next,haveClear:W,clearAll:e.clearAll.bind(e),prefix:p,isInpop:!!e.props.initCallBack,hideBuynoteCallBack:e.props.hideBuynoteCallBack,btnTraceData:e.logData.btnTraceData,buyNoteTraceData:e.logData.buyNoteTraceData,priceDetailTraceData:e.logData.priceDetailTraceData,cleanTraceData:e.logData.cleanTraceData,reservation:Y,chioceDateData:w,isUseInBooking:_}))]}),f.zh.detail==t&&!c&&(0,wn.jsx)(jn,{assistComponent:G})]})},ve=function(){!r&&(r=e.state.disabledDateDesc),!o&&(o=e.state.validDesc),!a&&(a=e.state.prodMapValidDesc),!s&&(s=e.state.prodMapDisabledDateDesc);var t=b.usePage,_=b.subPage,x=b.isUseInBooking,I=void 0!==x&&x,N=e.getPack3WarningTip(),D=e.logData.tkt_sightdetail_browse_package,j={};U&&!e.hasSendExpo&&(j=D&&D(+new Date,"T")||{},e.hasSendExpo=!0);var R=!!ne&&(!(H&&H.length>0)||!!z),L=[f.zh.sku,f.zh.detail].includes(t)&&"ticket-detail"!=_?Yt.pf:Yt.G7,V="ticket-detail"==_;t!==f.zh.book&&(!V&&(Mn=n(52295).Z),Bn=n(86897).Z,Un=n(30706).Z,Gn=n(90165).Z,Hn=n(70367).Z,zn=n(21923).Z);var F="ticket-detail"!=_&&U;F&&(qn=n(14792).Z),b.isFromSku||(Yn=n(58519).Z,t!==f.zh.book&&(Xn=n(83561).Z));var M=function(){return(0,wn.jsxs)(wn.Fragment,{children:[!!oe&&C&&C.length&&Y(),t!==f.zh.book&&fe(),t!==f.zh.book&&ce()]})},B=function(){return(0,wn.jsxs)(wn.Fragment,{children:[!!oe&&C&&C.length&&te(),t!==f.zh.book&&de()]})},K=function(){return(0,wn.jsxs)(wn.Fragment,{children:[ae&&B(),t!==f.zh.book&&_e()]})},Y=function(){var n="\u4f7f\u7528\u65e5\u671f";if(ae){var i=[],a=ie[0].peopleGroupInfos,s=void 0===a?[]:a;s.forEach((function(e){var t=e.priceMode,n=e.peopleGroupName;0===t&&i.push(n)})),n=i.length?"".concat(i.join("+"),"\xb7").concat(n):n}return(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsx)(Yn,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:C,isDateShowPrice:R,onChooseDate:function(t){e.clickChangeDatePack3(t)},onShowMore:e.onShowMore.bind(e),defaultDate:w&&w.date,showLocalTime:J,thinTitle:V,dateTitle:t==f.zh.book?"\u9009\u62e9\u65e5\u671f":n,usePage:t,showDefault:e.showDefault,showFrom:!E,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(w&&w.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog}),t===f.zh.book&&oe?(0,wn.jsx)(Wn,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0}):null]})},te=function(){var n="\u4f7f\u7528\u65e5\u671f";if(ae){var i=[];ie.forEach((function(e){var t=e.priceMode,n=e.firstLevelName,o=e.peopleGroupInfos;if(0===t){var r=o.length&&o[0],a=r.peopleGroupName,s=r.subName,l=H&&H.length?n:"".concat(n).concat(a).concat(s);i.push(l)}})),n=i.length?"".concat(i.join("+"),"\xb7").concat(n):n}return(0,wn.jsxs)(wn.Fragment,{children:[(0,wn.jsx)(Yn,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:C,isDateShowPrice:R,onChooseDate:function(t){e.clickChangeDatePack3(t)},onShowMore:e.onShowMore.bind(e),defaultDate:w&&w.date,showLocalTime:J,thinTitle:V,dateTitle:t==f.zh.book?"\u9009\u62e9\u65e5\u671f":n,usePage:t,showDefault:e.showDefault,showFrom:!E,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(w&&w.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,isPack3MultiSale:!re}),t===f.zh.book&&oe?(0,wn.jsx)(Wn,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0}):null]})},ce=function(){var t=ie[0].firstLevelId,n=se[t],i=le[t],o=ue[t];return n.length?(0,wn.jsx)(Un,{thinTitle:V,saleProperties:n,onChooseSaleProperty:function(n,i){e.clickChangeSalePropertyPack3(n,i,t)},selectPropertyIds:i,grayPropertys:o||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Dn.Y4}):null},de=function(){var t=ie.filter((function(e){var t=e.priceMode;return 0===t}));return t.map((function(n){var i=n.firstLevelName,o=n.firstLevelId,r=n.peopleGroupInfos,a=void 0===r?[]:r,s=se[o],l=le[o],c=ue[o],u=a.length&&a[0],d=u.peopleGroupName,p=u.subName,f=H&&H.length?i:"".concat(i).concat(d).concat(p),h=s.filter((function(e){return!e.hide}));return s.length?(0,wn.jsxs)(wn.Fragment,{children:[!re&&h.length?(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_section_seperator}):null,!re&&h.length&&t.length>1?(0,wn.jsx)(On,{ticketTitle:f,isShowShadow:!0}):null,(0,wn.jsx)(Un,{thinTitle:V,smallTitle:!re,isPack3MultiSale:!re,isPack3SingleSale:re,saleProperties:s,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,o)},selectPropertyIds:l,grayPropertys:c||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Dn.Y4,ticketName:re?f:""})]}):null}))},fe=function(){var t=ie[0].peopleGroupInfos,n=void 0===t?[]:t;return n.map((function(t){var n=t.peopleGroupName,i=t.subName,o=t.priceMode,r=t.productIds;if(1!==o)return null;var l=r[0],c="".concat(n).concat(i),u=a[l],d=s[l];return(0,wn.jsx)(Xn,{validDesc:u,disabledDateDesc:d,logs:e.logData,ticketName:c,fstyle:Dn.jo})}))},_e=function(){var t=ie.filter((function(e){var t=e.priceMode;return 1===t}));return t.map((function(t,n){var i=t.firstLevelId,o=t.firstLevelName,r=t.peopleGroupInfos,l=void 0===r?[]:r,c=se[i],u=le[i],d=ue[i],p=l.length&&l[0],f=p.peopleGroupName,h=p.subName,m=p.productIds,_=m[0],v=c.filter((function(e){return!e.hide})),g=v.length>0,y=H&&H.length?o:"".concat(o).concat(f).concat(h),x=a[_],b=s[_];return(0,wn.jsxs)(wn.Fragment,{children:[ae&&(!oe&&n>0||oe)?(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_section_seperator}):null,g?(0,wn.jsx)(On,{ticketTitle:y,isShowShadow:!0}):null,(0,wn.jsx)(Xn,{validDesc:x,disabledDateDesc:b,logs:e.logData,ticketName:g?"":y,fstyle:Dn.jo,smallTitle:g}),g?(0,wn.jsx)(Un,{thinTitle:V,smallTitle:!0,saleProperties:c,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,i)},selectPropertyIds:u,grayPropertys:d||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Dn.Y4,isPack3SameDateValid:g}):null]})}))},ve=function(){return ie.map((function(n,i){var o=n.priceMode,r=n.firstLevelId,l=n.firstLevelName,c=n.peopleGroupInfos,p=void 0===c?[]:c,f=se[r],h=le[r],_=Z[r],v=ue[r],y=P[r],x=p.length&&p[0],b=x.peopleGroupName,k=x.subName,w=x.productIds,I=w[0],T=H&&H.length?l:"".concat(l).concat(b).concat(k),S=a[I],C=s[I],N=f.filter((function(e){return!e.hide})),D=N.length>0,j="\u4f7f\u7528\u65e5\u671f";return ae&&(j="".concat(T,"\xb7").concat(j)),(0,wn.jsxs)(wn.Fragment,{children:[!ae&&i>0?(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_section_seperator}):null,ae?null:(0,wn.jsx)(On,{ticketTitle:T,isShowShadow:!0}),0===o&&(0,wn.jsx)(Yn,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:y,isDateShowPrice:R,onChooseDate:function(t){e.clickChangeDatePack3(t,r)},onShowMore:e.onShowMore.bind(e,!1,r),defaultDate:_&&_.date,showLocalTime:J,thinTitle:V,smallTitle:!ae,dateTitle:j,usePage:t,showDefault:e.showDefault,showFrom:!E,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(_&&_.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog}),1===o&&(0,wn.jsx)(Xn,{validDesc:S,disabledDateDesc:C,logs:e.logData,ticketName:ae?T:"",fstyle:Dn.jo,smallTitle:!0}),D?(0,wn.jsx)(Un,{thinTitle:V,smallTitle:!0,saleProperties:f,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,r)},selectPropertyIds:h,grayPropertys:v||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Dn.Y4,isPack3DiffDate:D}):null]})}))};return(0,wn.jsxs)(Yt.G7,{className:"m_sku",style:(0,Wt.wh)([Dn.ZP.m_container,t==f.zh.detail?Dn.ZP.m_container_radius:null,[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_height:null]),children:[t!==f.zh.detail||ne&&C&&C.length||!ne&&P?null:(0,wn.jsx)(Yt.G7,{style:(0,Wt.wh)([v.skuMinHeight?{height:v.skuMinHeight}:{height:"100%"}]),children:(0,wn.jsx)(Bn,{})}),!!O&&(0,wn.jsx)(Hn,{}),!O&&(0,wn.jsxs)(Yt.G7,{style:(0,Wt.wh)([Dn.ZP.m_sku,[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_height:null]),children:[F&&(0,wn.jsx)(qn,{ticketTitle:U,testID:(0,mt.kI)(j.key,j.params),usePage:t,closeClickLog:e.logData.tkt_sightdetail_click_package_close,onPoplayerHide:e.props.onClosePage||e.onPoplayerHide.bind(e),peoplePackageDesc:pe}),(0,wn.jsx)(Rn.Z,{show:!!N&&[f.zh.sku,f.zh.detail].includes(t),noFirstAni:!0,changeData:N,delay:!0,collectAniFun:e.addFun.bind(e,"sku"),style:[f.zh.sku,f.zh.detail].includes(t)?{height:"100%",flex:1,overflow:"hidden"}:null,AniComp:(0,wn.jsx)(Yt.G7,{style:Dn.ZP.m_sku_warn_wrapper,children:[f.zh.sku,f.zh.detail].includes(t)&&(ne&&C&&C.length||!ne&&!!P)&&(0,wn.jsx)(zn,{text:N,priceInfo:$,hasPromotion:ee,isDateShowPrice:R,priceMode:k,showCalendar:!1})}),Siblings:(0,wn.jsxs)(L,{style:[f.zh.sku,f.zh.detail].includes(t)?Dn.ZP.m_sku_index:null,scrollY:!0,enableFlex:!0,id:"sku",children:[!b.isFromSku&&(0,wn.jsxs)(wn.Fragment,{children:[!!H&&!!H.length&&(0,wn.jsx)(Gn,{thinTitle:V,titleText:"\u4f7f\u7528\u4eba\u7fa4",dataList:H,peoplePropertiesUnable:X,peopleGrayProperty:q,choicePeopleId:z,onClick:e.clickChangePeoplePack3.bind(e),peopleExposureLog:e.logData.tkt_pzxqypeople_exposure,propertyClickLog:e.logData.tkt_sightdetail_click_package_property,popClickLog:e.logData.tkt_sightdetail_click_package_propertypolicy}),ne?1===ie.length?(0,wn.jsx)(wn.Fragment,{children:M()}):ae?(0,wn.jsx)(wn.Fragment,{children:K()}):(0,wn.jsx)(wn.Fragment,{children:B()}):(0,wn.jsx)(wn.Fragment,{children:ie&&t!==f.zh.book&&ve()})]}),t==f.zh.book&&T&&T.length?(0,wn.jsx)(Nn,{setRef:u,logs:e.logData,isscan:b.isscan,isFromSku:b.isFromSku,optidArr:b.optid,spotId:b.spotid,reservation:!1,aggregation:b.aggregation,dateRecord:h,countArr:S,usePage:t,resources:T,refundPolicys:i,chioceDateData:w,onChangePerson:e.onChangePerson.bind(e),handleErrorToast:e.props.handleErrorToast,traceData:e.logData.countTraceData,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,priceMode:k,beforeChoice:y?he:m?me:null,isServerData:m}):null]}),siblingStyle:[f.zh.sku,f.zh.detail].includes(t)?{display:"flex",flex:1,overflow:"hidden"}:null,prefix:p}),[f.zh.sku,f.zh.detail].includes(t)&&"ticket-detail"!=_&&(0,wn.jsx)(Mn,(0,l.Z)((0,l.Z)({},A),{},{notHigh:t==f.zh.detail&&"RN"==e.platform,spotid:b.spotid,optid:b.optid,isScanShelf:b.isScanShelf,isFromShelfSku:!!e.props.isFromShelfSku,booking:e.booking.bind(e),collectAniFun:e.addFun.bind(e,"skufooter"),showBuyNotes:e.props.showBuyNotes,buyNoteClickLog:e.logData.tkt_sightdetail_click_package_notice,buyNoteExposureLog:e.logData.tkt_sightdetail_view_package_notice,btnClickLog:e.logData.tkt_sightdetail_click_package_next,haveClear:W,clearAll:e.clearAll.bind(e),prefix:p,isInpop:!!e.props.initCallBack,hideBuynoteCallBack:e.props.hideBuynoteCallBack,btnTraceData:e.logData.btnTraceData,buyNoteTraceData:e.logData.buyNoteTraceData,priceDetailTraceData:e.logData.priceDetailTraceData,cleanTraceData:e.logData.cleanTraceData,reservation:!1,chioceDateData:w,isUseInBooking:I}))]}),f.zh.detail!=t||c?null:(0,wn.jsx)(jn,{assistComponent:G})]})};return te?ve():_e()}}]),i}(Xt),Jn=Qn,$n=n(13878),ei=(0,i.memo)((function(e){var t=e.onClose,n=e.request,i=e.otherParams,o=(0,$n.dD)();return(0,wn.jsx)(Jn,{pageId:o,request:n,onClosePage:t,otherParams:i,usePage:"detail"},Math.random())})),ti=ei},21342:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(68277),o=n(90129),r=n(298),a=n(90201),s=n(85187),l=n(71515),c={poplayer_custom_title:"index-module_o0N7o",poplayer_custom_title_text:"index-module_SKVM1",poplayer_custom_title_icon:"index-module_qS552",poplayer_custom_content:"index-module_L7CUG"},u=n(61070),d=n(79992),p=n(14062),f=n(77163),h=n(2269),m=["title","titleStyle"],_=function(e){var t=e.title,n=e.onClose,i=e.titleStyle,o=(0,u.TC)(),a=i||{},s=a.wrapperStyle,p=a.textStyle,m=a.iconStyle;return(0,h.jsxs)(l.View,{className:c.poplayer_custom_title,style:(0,r.Z)((0,r.Z)({},(0,f.N)(o,{key:"backgroundColor",value:"white"})||{}),s||{}),children:[(0,h.jsx)(l.Text,{className:c.poplayer_custom_title_text,style:(0,r.Z)((0,r.Z)({},(0,f.N)(o,{key:"color",value:"black"})||{}),p||{}),children:t}),(0,h.jsx)(d.m,{type:"xclosed",className:c.poplayer_custom_title_icon,style:(0,r.Z)((0,r.Z)({},(0,f.N)(o,{key:"color",value:"black"})||{}),m||{}),onClick:n})]})},v=(0,a.memo)((0,a.forwardRef)((function(e,t){var n,d=e.setIsFixed,v=(0,a.useState)({visible:!1,component:null}),g=(0,o.Z)(v,2),y=g[0],x=g[1],b=(0,a.useRef)(),k=(0,u.TC)(),w=function(e){var t=e.component,n=e.props,i=e.onCloseCallback;p.Z.setNaScrollable(!1),x((function(e){return(0,r.Z)((0,r.Z)({},e),{},{visible:!0,component:t,props:n})})),b.current=function(){null===i||void 0===i||i(),p.Z.setNaScrollable(!0)}},I=function(){var e=b.current;x((function(e){return(0,r.Z)((0,r.Z)({},e),{},{visible:!1})})),e&&e(),p.Z.setNaScrollable(!0)};(0,a.useImperativeHandle)(t,(function(){return{show:function(e){w(e)},hide:function(){I()}}})),(0,a.useEffect)((function(){null===d||void 0===d||d(y.visible)}),[y]);var Z=y.props||{},T=Z.title,S=Z.titleStyle,C=(0,i.Z)(Z,m),P=(0,r.Z)((0,r.Z)({},C),{},{contentStyle:(0,r.Z)({minHeight:252},null===(n=y.props)||void 0===n?void 0:n.contentStyle),crnModalProps:{statusBarTranslucent:!0}}),N=y.component;return(0,h.jsx)(s.H5,(0,r.Z)((0,r.Z)({visible:y.visible,onClose:I,zIndex:100,showCloseButton:!0},P||{}),{},{style:(0,r.Z)((0,r.Z)({},(0,f.N)(k,{key:"backgroundColor",value:"white"})||{}),(null===P||void 0===P?void 0:P.style)||{}),children:(0,h.jsxs)(l.View,{className:c.poplayer_custom_content,children:[T?(0,h.jsx)(_,{title:T,onClose:I,titleStyle:S}):null,"function"===typeof y.component?(0,h.jsx)(N,{visible:y.visible}):y.component]})}))}))),g=v},27503:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var i=n(298),o=n(90201),r=n(71515),a=n(85187),s={container:"index-module_pIfQC",image:"index-module_cZ1S4",description:"index-module_sRLUC"},l=n(2269),c=(0,o.memo)((function(e){return(0,l.jsxs)(r.View,{className:s.container,children:[(0,l.jsx)(r.Image,{src:(null===e||void 0===e?void 0:e.url)||"https://dimg04.c-ctrip.com/images/1o53712000b9q7b97F272.png",className:s.image}),(0,l.jsx)(r.Text,{className:s.description,children:"\u5546\u54c1\u5df2\u552e\u7f44\uff0c\u6b63\u5728\u52aa\u529b\u8865\u8d27\u4e2d"})]})})),u={breathe:"index-module_gt3Vx",breathe_item:"index-module_CTSVM",breathe_left:"index-module_xdR2J",breathe_right:"index-module_M3zK7",breathe_block:"index-module_FyPbX",breathe_block_short:"index-module_psTxP",breathe_block_double:"index-module_x8JS5"},d=n(61070),p=n(77163),f=function(e){var t=e.num,n=void 0===t?3:t,i=Array(n).fill(1),o=(0,d.TC)();return(0,l.jsx)(r.View,{className:u.breathe,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_1"}),children:i.map((function(e,t){return(0,l.jsxs)(r.View,{className:u.breathe_item,children:[(0,l.jsxs)(r.View,{className:u.breathe_left,children:[(0,l.jsx)(r.View,{className:u.breathe_block,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_2"})}),(0,l.jsx)(r.View,{className:u.breathe_block_short,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_2"})}),(0,l.jsx)(r.View,{className:u.breathe_block_short,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_2"})})]}),(0,l.jsxs)(r.View,{className:u.breathe_right,children:[(0,l.jsx)(r.View,{className:u.breathe_block,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_2"})}),(0,l.jsx)(r.View,{className:u.breathe_block_double,style:(0,p.N)(o,{key:"backgroundColor",value:"white_breathe_2"})})]})]},t)}))})},h=o.memo(f),m={left_container:"index-module_nl4UA",left_container_full:"index-module_bxKfI",main_container:"index-module_nwU7v",side_bar:"index-module_XF5h2",loading_breath:"index-module_o5RzM",container_header:"index-module_xmQnQ",container_footer:"index-module_tNNm4",container_footer_text:"index-module_bfuZC",container_wrapper:"index-module_mbkn5"},_=n(79301),v=n(95308),g=n(90129),y=n(73564),x=n(4557),b=function(e,t){var n=(0,o.useRef)({}).current,i=(0,o.useRef)({}).current,r=(0,o.useRef)({}).current,a=(0,o.useRef)([]).current,s=(0,o.useRef)({}).current,l=(0,o.useRef)({}).current;(0,o.useEffect)((function(){var t=0;null===e||void 0===e||e.map((function(e){e.anchorIdArray.map((function(e){t++,l[t]=e,s[e]=t}))}))}),[null===e||void 0===e?void 0:e.length]);var c=function(e){return l[e]},u=function(e){return s[e]},d=function(t,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n[t]=Number(o),i[t]=r;var s=0;a[0]=0,e.map((function(e,t){var i=0;e.anchorIdArray.map((function(e){i+=n[e]})),s+=i,a[t+1]=Number(s)}))},p=function(e){return{height:n[e],isIndependent:i[e]}},f=function(n){var i=t;return e.find((function(e,t){if(e.code==n)return i+=a[t],!0})),i},h=function(i){var o=0;return e.find((function(e,t){return e.anchorIdArray.find((function(e){if(o+=n[e],e==i)return!0}))})),o+t},m=function(t){var o=!0,a=0;return e.find((function(e){return e.anchorIdArray.find((function(e){a++;var s=void 0!=n[e]&&(!i[e]||i[e]&&r[e]);return o=o&&s,!o||a==t}))})),o},_=function(n){var i=n-t>0?n-t:0,o=e.find((function(e,t){return i>=a[t]&&i<a[t+1]}));return null===o||void 0===o?void 0:o.code};return{setModuleHeight:d,getModule:p,getModuleToTop:f,checkAllLayoutFinish:m,getActiveTabCode:_,serverCallBacks:r,getAnchorToTop:h,getCount2anchorId:c,getAnchorId2count:u}},k=b,w=n(16567),I=n(79756),Z=n(18589),T=n(32180)["requestAnimationFrame"],S=I["default"].getSystemInfoSync().windowHeight,C=a.GI.getPlatform()==a.GI.PLATFORM_TYPE.CRN,P=0,N=function(e,t){var n,r=e.state,s=void 0===r?{}:r,l=e.InitRenderNum,c=void 0===l?1:l,u=e.isShop,d=void 0===u||u,p=e.topDistance,f=e.scrollTo,h=(e.filterStatus,e.disableRecord),m=void 0!==h&&h,b=(0,o.useRef)(!1),N=(0,o.useRef)(null),D=(0,o.useRef)(null),j=(0,o.useRef)(null),R=(0,o.useRef)(null),L=(0,o.useRef)(null),E=(0,o.useState)(!1),V=(0,g.Z)(E,2),A=V[0],O=V[1],F=(0,o.useRef)(0),M=s||{},B=M.tabsInfo,U=void 0===B?[]:B,G=M.filters,H=void 0===G?{}:G,z=M.shelfs,q=M.scenicSpot,K=(0,o.useRef)(null===U||void 0===U||null===(n=U[0])||void 0===n?void 0:n.code),W=function(e){K.current=e,fe(e)},X=(0,o.useRef)(0),Y=(0,o.useState)(d),Q=(0,g.Z)(Y,2),J=Q[0],$=Q[1],ee=(0,o.useState)(!0),te=(0,g.Z)(ee,2),ne=te[0],ie=te[1];(0,o.useEffect)((function(){d&&(!J&&$(!0),X.current&&!m&&setTimeout((function(){ye(X.current)}),20))}),[d]),(0,o.useEffect)((function(){[N.current,D.current].map((function(e){e&&e.setCanRender(J)}))}),[J]),(0,o.useImperativeHandle)(t,(function(){return{onScroll:function(e){ne&&Ne(e)},getOutSideRef:function(e){var t;null!==e&&void 0!==e&&e.setActiveTab&&!D.current&&(null===e||void 0===e||e.setActiveTab(K.current)),e&&!D.current&&(D.current=e),null!==e&&void 0!==e&&e.getInSideRef&&e.getInSideRef(N.current),null!==N&&void 0!==N&&null!==(t=N.current)&&void 0!==t&&t.getOutSideRef&&N.current.getOutSideRef(e)},getInSideRef:function(e){var t;e&&(N.current=e),null!==(t=D.current)&&void 0!==t&&t.getInSideRef&&D.current.getInSideRef(e)},getInnerTabRef:function(e){j.current=e},getOutTabRef:function(e){R.current=e},getScenicSpotHeaderRef:function(e){e&&(L.current=e)},onTabclick:function(e,t){re(e,t)},onScrollBeginDrag:function(e){ge.current&&(ge.current=!1,b.current=!0)},changeTitleTab:function(e,t){e!=ne&&ie(e),D.current},setCurrentTab:function(e){W(e)}}}));var oe=function(e){var t=0;return(U||[]).find((function(n){return t+=n.anchorIdArray.length,n.code==e})),t},re=function(e,t){var n=oe(e);if(n>Te&&Se(n),ce(n)){var i=le(e);ye(i,(function(){W(e)}))}else O(!0),W(e)};(0,o.useEffect)((function(){var e=0;if(clearTimeout(e),A){var t=a.hj.isMini()?1500:1e4;he(K.current),e=setTimeout((function(){O(!1)}),t)}else he("");return function(){return clearTimeout(e)}}),[A]);var ae=k(U||[],p),se=ae.setModuleHeight,le=ae.getModuleToTop,ce=ae.checkAllLayoutFinish,ue=ae.getActiveTabCode,de=ae.serverCallBacks,pe=ae.getAnchorToTop,fe=(ae.getCount2anchorId,function(e){var t,n;null===(t=D.current)||void 0===t||t.setActiveTab(e),null===(n=N.current)||void 0===n||n.setActiveTab(e)}),he=function(e){var t,n;null===(t=D.current)||void 0===t||t.setLoadingTab(e),null===(n=N.current)||void 0===n||n.setLoadingTab(e)},me=function(e,t,n){var i,o=null===t||void 0===t||null===(i=t.nativeEvent)||void 0===i?void 0:i.layout,r=o.height;r&&(se(e,Math.round(r),n),_e(),Ce())},_e=function(){var e=oe(K.current),t=le(K.current);Te>=e&&ce(e)&&A?ye(t,(function(){O(!1)})):!b.current&&ge.current&&ye(t)},ve=(0,y.Z)((function(e,t){t?setTimeout((function(){var e=pe(t);ye(e-.4*S)}),500):X.current+e>0&&ye(X.current+e,(function(){}),!1,!0)})),ge=(0,o.useRef)(!1),ye=(0,x.D)((function(e,t,n,i,o){if(isNaN(e))return t&&t();C&&!i&&(ge.current=!0),a.hj.isMini()?(f({y:X.current}),T((function(){f({y:e+1,animated:!!n,anchor:o},(function(){t&&t()}))}))):f({y:e,animated:!!n,anchor:o},(function(){t&&t()}))}),16),xe=(0,o.useState)((new Date).getTime()),be=(0,g.Z)(xe,2),ke=be[0],we=be[1],Ie=(0,o.useState)(c),Ze=(0,g.Z)(Ie,2),Te=Ze[0],Se=Ze[1];(0,o.useEffect)((function(){var e,t,n;null===(e=D.current)||void 0===e||e.setList(U),null===(t=N.current)||void 0===t||t.setList(U),K.current||W(null===U||void 0===U||null===(n=U[0])||void 0===n?void 0:n.code)}),[JSON.stringify(U)]),(0,o.useEffect)((function(){var e;null===(e=L.current)||void 0===e||e.setScenicSpot(q)}),[q]),(0,o.useEffect)((function(){R.current&&R.current.getProps((0,i.Z)({},H)),j.current&&j.current.getProps((0,i.Z)({},H))}),[(0,w.I8)(H)]),(0,o.useEffect)((function(){var e=(new Date).getTime();console.log("renderTime-update",e-ke,Te),we(e)}),[Te]);var Ce=(0,x.D)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(Te!=1/0){var t=Te+e,n=oe(K.current);t=Math.max(t,n),Se(t>=z.length?1/0:t)}}),16),Pe=(0,o.useRef)({}).current,Ne=function(e){var t,n,i,o,r,a;(P=(null===(t=e.detail)||void 0===t?void 0:t.scrollTop)||(null===(n=e.nativeEvent)||void 0===n?void 0:n.contentOffset.y)||0,P>p)?(null===D||void 0===D||null===(i=D.current)||void 0===i||i.setFixedTitle(!0),null===N||void 0===N||null===(o=N.current)||void 0===o||o.setFixedTitle(!0)):(null===D||void 0===D||null===(r=D.current)||void 0===r||r.setFixedTitle(!1),null===N||void 0===N||null===(a=N.current)||void 0===a||a.setFixedTitle(!1));if(d&&(X.current=P,!ge.current)){var s=ue(P);s&&s!=K.current&&W(s)}},De=(0,y.Z)((function(){U.length&&(console.log("scroll-container-onshow"),Ce(),je())})),je=function(){U.map((function(e){return e.anchorIdArray.map(function(){var e=(0,v.Z)((0,_.Z)().mark((function e(t){return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},Re=function(){var e=(0,v.Z)((0,_.Z)().mark((function e(t){var n,i;return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Pe[t],!n){e.next=6;break}return e.next=4,a.c0.getBoundingClientRect({node:n});case 4:i=e.sent,i&&i.height&&se(t,Math.round(i.height));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){if((0,Z.M8)()){var e=I["default"].getCurrentInstance(),t=e.router.onShow;return I.eventCenter.on(t,De),function(){I.eventCenter.off(t,De)}}}),[]);var Le=(0,y.Z)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(de[e]=t),C||setTimeout((0,v.Z)((0,_.Z)().mark((function t(){return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re(e);case 2:_e(),Ce();case 4:case"end":return t.stop()}}),t)}))),100)})),Ee=(0,y.Z)((function(){j.current&&j.current.onClear?j.current.onClear():R.current&&R.current.onClear&&R.current.onClear()}));return{canRender:J,renderCount:Te,onLayout:me,listRefs:Pe,updateLayout:Le,handleOpenAndClose:ve,firstAnchorId:F,clearFilter:Ee}},D=N,j=n(10722),R={side_bar:"index-module_Pphgo"},L=function(){return(0,l.jsx)(r.View,{className:R.side_bar})},E=L,V=n(59217),A=function(){return null},O=function(e,t){var n=e.config,o=void 0===n?{}:n,s=e.state,u=void 0===s?{}:s,f=e.needSideBar,_=void 0===f||f,v=e.showFooter,g=void 0===v||v,y=e.stickySideBar,x=void 0!==y&&y,b=e.footerContent,k=void 0===b?"\u5df2\u7ecf\u5230\u6700\u5e95\u90e8\u4e86\u54e6\uff01":b,w=e.FooterComponent,I=e.changeFilter,Z=e.changeHotelDate,T=e.poplayerRef,S=e.HeaderComponent,C=e.breatheNum,P=e.needSafe,N=void 0===P||P,R=e.frontSecKillRefresh,L=e.isHalf,O=e.request,F=o.ui,M=void 0===F?{}:F,B=u||{},U=B.tabsInfo,G=B.shelfs,H=void 0===G?[]:G,z=B.filters,q=void 0===z?{}:z,K=B.promotion,W=void 0===K?{}:K,X=B.hotelFilter,Y=q.fdefault,Q=void 0===Y?-1:Y,J=D(e,t),$=J.canRender,ee=J.renderCount,te=J.onLayout,ne=J.listRefs,ie=J.updateLayout,oe=J.clearFilter,re=J.handleOpenAndClose,ae=J.firstAnchorId,se=0;if(!$)return null;if(U&&!U.length)return(0,l.jsx)(c,{});var le=null===U||void 0===U?void 0:U.length,ce=(0,d.TC)();return(0,l.jsxs)(r.View,{className:(0,a.AK)("xtaro_border_box",m.container_wrapper),children:[(0,l.jsxs)(a.En,{className:m.main_container,children:[_&&!x&&(0,l.jsx)(E,{}),(0,l.jsxs)(a.En,{className:_?m.left_container:m.left_container_full,children:[!!S&&(0,l.jsx)(r.View,{className:m.container_header,children:(0,l.jsx)(S,{})}),null===U||void 0===U?void 0:U.map((function(t,n){return t.anchorIdArray.map((function(a,s){var c;if(se++,se>ee)return null;var u=null===(c=t.anchorIdArray)||void 0===c?void 0:c.length,d=H.find((function(e){return e.anchorId==a}));if(null!==d&&void 0!==d&&d.groupList){var f=(0,j.decodeAnchorId)(a)||{},m=f.business,_=f.isIndependent;return A=M["".concat(m)]?M["".concat(m)]:h,(0,l.jsx)(r.View,{onLayout:function(e){n||s||(ae.current=a),te(a,e,_)},ref:function(e){return ne[a]=e},className:"container_".concat(a),style:(0,i.Z)({position:"relative"},(0,p.N)(ce,{key:"backgroundColor",value:"gray_bg"})||{}),children:(0,l.jsx)(A,(0,i.Z)((0,i.Z)({updateLayout:ie},d),{},{tabIndex:n,subTabIndex:s,changeFilter:I,frontSecKillRefresh:R,clearFilter:oe,showFoot:le-1==n&&u-1==s&&-1!=Q,poplayerRef:T,promotion:W,handleOpenAndClose:re,shelfLength:u,targetPageRef:e.targetPageRef,hotelFilter:X,changeHotelDate:Z,isHalf:L,config:o,shelfIndex:se,request:O,element:t}))},a)}return(0,l.jsx)(h,(0,i.Z)({},d),a)}))})),!U&&(0,l.jsx)(h,{num:C})]})]}),(!!U&&g||!!w||!!N)&&(0,l.jsxs)(r.View,{className:m.container_footer,style:(0,p.N)(ce,{key:"backgroundColor",value:"gray_bg"}),children:[!!U&&g&&(0,l.jsx)(r.Text,{className:m.container_footer_text,style:(0,p.N)(ce,{key:"color",value:"black"}),children:k}),!!w&&w(),!!N&&(0,l.jsx)(a.iY.Bottom,{})]}),(0,V.jJ)()&&(0,l.jsx)(r.View,{style:"height:34px"})]})},F=(0,o.forwardRef)(O)},5827:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return po}});var i=n(70245),o=n(298),r=n(90129),a=n(71515),s=n(90201),l=n(79756),c={shelf_main_title:"index-module_qevx1",shelf_main_title_bottom:"index-module_qpbQz",shelf_main_title_left:"index-module_yjqCo",show_long_text:"index-module_M03OY",shelf_main_title_top:"index-module_m88jn",shelf_ticket_tips:"index-module_m0ajv",sales_split_line:"index-module_YWMpn",sales_info_contain:"index-module_i2L3y",shelf_ticket_tips_desc_text:"index-module_p_mfh",shelf_ticket_tips_desc_view:"index-module_ItY1g",shelf_sub_title:"index-module_kkX8T",shelf_sub_title_view:"index-module_ncary",shelf_middle_gray:"index-module_tXO4b",shelf_main_container_bottom:"index-module_IYLil",show_main_title_long:"index-module_wgYBa",shelf_main_category_name:"index-module_JuuTs",shelf_main_title_text:"index-module_oU8l6",font_weight_bold:"index-module_hTB5E",shelf_main_container_is_x:"index-module_wCfIl",shelf_ticket_tips_text:"index-module_eRVyX",shelf_ticket_tips_icon:"index-module_S9DgQ",sales_info_text:"index-module_UqG6w",shelf_main_container_top:"index-module_SInKM",shelf_main_container_bottom_is_x:"index-module_xyuPU",shelf_middle_white:"index-module_yC8Xy",shelf_main_container:"index-module_kn1Dl",sales_info_text_abtest:"index-module_ugryn",shelf_ticket_tips_text_abtest:"index-module__GD8B"},u=n(68277),d=n(85187),p={card_row:"index-module_va0XW"},f=n(2269),h=["children","className","style"],m=function(e){var t=e.children,n=e.className,i=e.style,r=(0,u.Z)(e,h);return(0,f.jsx)(d.En,(0,o.Z)((0,o.Z)({className:(0,d.AK)(p.card_row,n),style:i},r),{},{children:t}))},_=m,v={card_column:"index-module_R0ncQ"},g=["children","className","style"],y=function(e){var t=e.children,n=e.className,i=e.style,r=(0,u.Z)(e,g);return(0,f.jsx)(d.En,(0,o.Z)((0,o.Z)({className:(0,d.AK)(v.card_column,n),style:i},r),{},{children:t}))},x=y,b=n(93212),k={card_title_wrapper:"index-module_Kiho5",card_title:"index-module_vE_Hx"},w=["children","className","prefix","suffix","prefixWidth","style","wrapperStyle","wrapperClassName","numberOfLines"],I=function(e){var t=e.children,n=e.className,i=e.prefix,r=e.suffix,s=e.prefixWidth,l=void 0===s?0:s,c=e.style,p=e.wrapperStyle,h=e.wrapperClassName,m=e.numberOfLines,_=(0,u.Z)(e,w),v=(0,d.y0)("object"==(0,b.Z)(c)?c:{},l&&d.ua.isMini()?{textIndent:4*l}:{},Number(m)>1&&d.ua.isH5()?{"-webkit-box-orient":"vertical"}:{});return(0,f.jsxs)(a.View,{className:(0,d.AK)(k.card_title_wrapper,h),style:p,children:[i,(0,f.jsxs)(d.X_,(0,o.Z)((0,o.Z)({className:(0,d.AK)(k.card_title,n),numberOfLines:m,style:v},_),{},{children:[!!l&&Z(l),t]})),r]})},Z=function(e){return d.ua.isH5()?new Array(e).fill(" ").map((function(){return(0,f.jsx)(a.Text,{children:"\xa0"})})):new Array(e).fill(" ").join("")},T=I,S={card_tag:"index-module_wYJww",card_tag_frameless:"index-module_eueg6",card_tag_hollow_blue:"index-module_sH3QD",card_tag_hollow_orange:"index-module_ZlaoO",card_tag_hollow_gray:"index-module_hTDle",card_tag_hollow_gold:"index-module_gOnC_",card_tag_hollow_gold_background:"index-module_Y01e4",card_tag_hollow_brown:"index-module_kRvjA",card_tag_hollow_red:"index-module_EOXTb",card_tag_solid_blue:"index-module_If31G",card_tag_solid_gold:"index-module_kPaSH",card_tag_white_black:"index-module_JM_VY",card_tag_border:"index-module_VUHCm",card_tag_text:"index-module_Zd0gQ",card_tag_text_frameless:"index-module_GXYhA",card_tag_text_hollow_blue:"index-module_kkYPQ",card_tag_text_hollow_orange:"index-module_WSz6r",card_tag_text_hollow_gold:"index-module_DWTii",card_tag_text_hollow_gold_background:"index-module_yOdWp",card_tag_text_hollow_gray:"index-module_XgWhb",card_tag_text_hollow_brown:"index-module_lR9uS",card_tag_text_hollow_red:"index-module_httkx",card_tag_text_solid_blue:"index-module_LDJOU",card_tag_text_solid_gold:"index-module_NvyAZ",card_tag_text_white_black:"index-module_EsYW0"},C=["className","prefix","suffix","text","style","textStyle","textClassName","type","numberOfLines"],P=function(e){var t=e.className,n=e.prefix,i=e.suffix,r=e.text,s=e.style,l=e.textStyle,c=e.textClassName,p=e.type,h=e.numberOfLines,m=(0,u.Z)(e,C),_=p?"card_tag_".concat(p):"",v=p&&(p.includes("hollow")||p.includes("solid"))?"card_tag_border":"",g=p?"card_tag_text_".concat(p):"";return(0,f.jsxs)(a.View,(0,o.Z)((0,o.Z)({className:(0,d.AK)(S.card_tag,S[_],S[v],t),style:s},m),{},{children:[n,(0,f.jsx)(a.Text,{style:l,numberOfLines:h,className:(0,d.AK)(S.card_tag_text,S[g],c),children:r}),i]}))},N=P,D={card_tag_text:"index-module_zcg0f"},j=["prefix","suffix","text","style","textStyle","textClassName","numberOfLines"],R=function(e){var t=e.prefix,n=e.suffix,i=e.text,r=e.style,s=e.textStyle,l=e.textClassName,c=e.numberOfLines,p=(0,u.Z)(e,j);return(0,f.jsxs)(d.cn,(0,o.Z)((0,o.Z)({style:r},p),{},{children:[t,(0,f.jsx)(a.Text,{style:s,numberOfLines:c,className:(0,d.AK)(D.card_tag_text,l),children:i}),n]}))},L=R,E={card_text:"index-module_IZtLf",card_text_black:"index-module_q_myE",card_text_gray:"index-module_lFUgj",card_text_gray_light:"index-module_aGMYY",card_text_blue:"index-module_BcKcq",card_text_blue_dark:"index-module_LPGL0",card_text_red:"index-module_kmRQC",card_text_orange:"index-module_F00Eo",card_text_orange_light:"index-module_yh9lk"},V=["children","className","style","type","numberOfLines"],A=function(e){var t=e.children,n=e.className,i=e.style,r=void 0===i?{}:i,a=e.type,s=void 0===a?"gray":a,l=e.numberOfLines,c=(0,u.Z)(e,V),p=(0,d.y0)("object"==(0,b.Z)(r)?r:{},Number(l)>1&&d.ua.isH5()?{"-webkit-box-orient":"vertical"}:{},d.hj.isAlipay()&&1===l?{whiteSpace:"normal"}:{});return(0,f.jsx)(d.X_,(0,o.Z)((0,o.Z)({className:(0,d.AK)(E.card_text,E["card_text_".concat(s)],n),style:p,numberOfLines:l},c),{},{children:t}))},O=A,F=function(e){var t=375,n=l["default"].getSystemInfoSync().windowWidth;return e*n/t},M={card_image_wrapper:"index-module_lRJp6",card_image:"index-module_GSnLX",card_image_wrapper_default:"index-module_UQ3AT",card_image_default:"index-module_rdAYZ"},B=["className","style","children","src","width","wrapperClassName","wrapperStyle","testID"],U="https://dimg04.c-ctrip.com/images/1o50r12000bbl2q11B208.png",G=function(e){var t=e.className,n=e.style,i=e.children,l=e.src,c=e.width,p=e.wrapperClassName,h=e.wrapperStyle,m=e.testID,_=(0,u.Z)(e,B),v=(0,s.useState)(!1),g=(0,r.Z)(v,2),y=g[0],x=g[1],k="object"===(0,b.Z)(n)?n:{};return!y&&l?(0,f.jsxs)(d.En,{className:(0,d.AK)(M.card_image_wrapper,p),style:h,testID:m,children:[(0,f.jsx)(a.Image,(0,o.Z)({className:(0,d.AK)(M.card_image,t),style:(0,o.Z)((0,o.Z)({},k),{},{width:F(c)}),src:l,onError:function(){return x(!0)}},_)),i]}):(0,f.jsxs)(d.En,{className:M.card_image_wrapper_default,style:(0,o.Z)((0,o.Z)({},h),{},{width:F(c)}),children:[(0,f.jsx)(a.Image,{className:M.card_image_default,src:U}),i]})},H=G,z=n(14062),q={card_button_text:"index-module_uhkjb",card_button_linear_gradient:"index-module_kXG8m"},K=["children","className","style","colors","linearGradientProps","linearGradientClassName"],W=z.Z.isBaiduMap()?["rgb(255, 92, 77)","rgb(255, 115, 102)"]:["#FF8800","#FF6600"],X=function(e){var t=e.children,n=e.className,i=e.style,r=e.colors,s=e.linearGradientProps,l=e.linearGradientClassName,c=(0,u.Z)(e,K);return(0,f.jsx)(d.cn,(0,o.Z)((0,o.Z)({start:{x:0,y:0},end:{x:1,y:0},colors:null!==r&&void 0!==r?r:W},s),{},{className:(0,d.AK)(q.card_button_linear_gradient,l),children:(0,f.jsx)(a.View,(0,o.Z)((0,o.Z)({className:(0,d.AK)(q.card_button_text,n),style:i},c),{},{children:t}))}))},Y=X,Q={card_price_wrapper:"index-module_DiU0T",card_price:"index-module_AMVk3",card_price_zero_android:"index-module_y2CgC",card_price_prefix:"index-module_JpLg_",card_price_currency:"index-module_gUFtW",card_price_value:"index-module_jgfiM",card_price_zero:"index-module_CHeYI",card_price_suffix:"index-module_cFkba",card_price_delete:"index-module_KLgSt",card_price_font_ios:"index-module_a3Ggn"},J=["price","deletePrice","currency","prefix","suffix","zero","priceStyle","deletePriceStyle","currencyStyle","prefixStyle","suffixStyle","zeroStyle","priceClassName","deletePriceClassName","currencyClassName","prefixClassName","suffixClassName","zeroClassName","className","style"],$=d.hj.isIOS(),ee=d.hj.isApp(),te=d.hj.isAndroid(),ne=function(e){var t=e.price,n=e.deletePrice,i=e.currency,r=void 0===i?"\xa5":i,s=e.prefix,l=e.suffix,c=void 0===l?"\u8d77":l,p=e.zero,h=e.priceStyle,m=e.deletePriceStyle,_=e.currencyStyle,v=e.prefixStyle,g=e.suffixStyle,y=e.zeroStyle,x=e.priceClassName,b=(e.deletePriceClassName,e.currencyClassName),k=e.prefixClassName,w=e.suffixClassName,I=e.zeroClassName,Z=e.className,T=e.style,S=(0,u.Z)(e,J);return(0,f.jsxs)(a.View,(0,o.Z)((0,o.Z)({className:(0,d.AK)(Q.card_price_wrapper,Z),style:T},S),{},{children:[n&&!p?(0,f.jsx)(a.View,(0,o.Z)((0,o.Z)({className:Q.card_price_delete,style:m},S),{},{children:"".concat(r).concat(n)})):null,(0,f.jsxs)(a.View,{className:Q.card_price,children:[s&&!p?(0,f.jsx)(a.Text,{className:(0,d.AK)(Q.card_price_prefix,k),style:v,children:s}):null,t&&r&&!p?(0,f.jsx)(a.Text,{className:(0,d.AK)(Q.card_price_currency,ee&&$?Q.card_price_font_ios:"",b),style:_,children:r}):null,p?(0,f.jsx)(a.Text,{className:(0,d.AK)(Q.card_price_zero,$?Q.card_price_zero_ios:Q.card_price_zero_android,I),style:y,children:p}):(0,f.jsx)(a.Text,{className:(0,d.AK)(Q.card_price_value,ee&&$?Q.card_price_font_ios:"",ee&&te?Q.card_price_value_android:"",x),style:h,children:t}),t&&c&&!p?(0,f.jsx)(a.Text,{className:(0,d.AK)(Q.card_price_suffix,w),style:g,children:c}):null]})]}))},ie=ne,oe={card_divider:"index-module_Eaxkb"},re=["children","className","style"],ae=function(e){e.children;var t=e.className,n=e.style,i=(0,u.Z)(e,re);return(0,f.jsx)(a.View,(0,o.Z)({className:(0,d.AK)(oe.card_divider,t),style:n},i))},se=ae,le=["type"],ce={arrow:"&#xe4b9;",show:"&#xf701;",share:"&#xf0167;",collected:"&#xe019;",message:"&#xec78;",order:"&#xef2f;",broadcast:"&#xef69;",diamond:"&#xf8d2;",photo:"&#xf0963;",play:"&#xf8ef;",arrow_round:"&#xf0df6;"},ue=function(e){var t=e.type,n=void 0===t?"":t,i=(0,u.Z)(e,le);return(0,f.jsx)(d.rD,(0,o.Z)((0,o.Z)({fontFamily:"crn_font_ttd_card"},i),{},{children:de(ce[n])}))},de=function(e){if("string"!=typeof e)return e;var t=e.replace(/&#x([0-9a-fA-F]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))}));return t},pe=ue,fe={card_layout:"index-module_tfRHO",card_row:"index-module_POa8k",card_title_container:"index-module_D7tpR",card_title_ios:"index-module_1CyQ0",card_title_android:"index-module_QpzpS",card_title_wrapper:"index-module_IF0wO",card_title_icon:"index-module_xKNUs",card_title_suffix:"index-module_g9Rrq",card_subtitle_text_atest:"index-module_XrbfU",card_subtitle_prefix:"index-module_QL9KW",card_price_wrapper:"index-module_vtu0e",card_line_first:"index-module_qKtKO",card_bottom_left:"index-module_atIIl",card_bottom_right:"index-module_g0Tk5",card_button:"index-module_CHXCw",card_button_small:"index-module_ATX1M",card_button_guide:"index-module_hJm7u",card_image:"index-module_x9m1d",card_image_refundFree1:"index-module_yjZQY",card_title_image_prefix:"index-module_BkSW5",card_title_image_prefix_android:"index-module_j4Nmv",card_title_image_prefix_ios:"index-module_rYeKS",card_title_image_prefix_h5:"index-module_aNrtF",card_text_icon:"index-module_JSsKH",card_text_icon_black:"index-module_wO6cK",card_text_icon_gray:"index-module_l99ib",card_text_icon_gray_light:"index-module_Vcl2_",card_text_icon_blue:"index-module_QHe59",card_text_icon_blue_dark:"index-module_Y6LNR",card_text_icon_red:"index-module_rmwJq",card_text_icon_orange:"index-module_UP80p",card_text_icon_atest:"index-module_BtsTf",card_tag_bottom:"index-module_gLxhi",card_image_topleft:"index-module_Bz8rM",card_content:"index-module_hHxai",card_row_between:"index-module_hPkUx",card_bottom_has_image:"index-module_xy6DL",card_divider:"index-module_g1GQk",card_divider_view:"index-module_O0H2O",card_discount_tag:"index-module_h0LkQ",card_discount_tag_atest:"index-module_gCLOw",card_discount_tag_text:"index-module_nN2sL",card_discount_tag_text_atest:"index-module_DbIS4",card_discount_tag_icon:"index-module_bU1SP",card_discount_tag_icon_andorid:"index-module_g50XV",card_discount_tag_icon_atest:"index-module_aucKK",card_bottom_tip_wrap:"index-module_CBRIy",card_bottom_tip:"index-module_HjRbc",card_button_red_border:"index-module_Y2K4p",card_shrink:"index-module_WgZAo",card_image_bottom:"index-module_nxvh0",card_image_bottom_text:"index-module_Zlbzx",card_image_lefttop:"index-module_vmoXq",card_image_lefttop_tag:"index-module_pBztp",card_line:"index-module_cKi73",card_title_image_suffix:"index-module_WhQ98",card_title_image_suffix_ios:"index-module_q1KkY",card_title_image_suffix_android:"index-module_pgpdl",card_image_video_warpper:"index-module_R_G1c",card_image_video:"index-module_f4rXw",card_bottom_left_margin:"index-module_bNsZV",card_bottom:"index-module_ZG8fD",card_divider_tag_wrap:"index-module_I_kPM",card_line_wrap_hidden:"index-module_LjlXc",card_line_wrap_hidden_atest:"index-module_DdTkf",card_line_nowrap:"index-module_KMAvW",card_subtitle_wrapper:"index-module_jobee",card_leftbottom_desc:"index-module_i05oP",card_leftbottom_desc_atest:"index-module_lRcLA",card_line_wrap_show:"index-module_p6sMt",card_price_value:"index-module_OuEi2",card_left_area:"index-module_MlMGI",card_title:"index-module_s2cMM",card_subtitle_text:"index-module_nxSib",card_content_hasimage:"index-module_dixhr"},he=n(5243),me=n(13878),_e=n(90927);function ve(e){var t=e.countdownInfo,n=(e.callback,e.timeOverCallBack);if(!t)return"";var i=t||{},o=i.needCountDown,a=i.setTimerToOpen,l=i.prefix,c=i.time,u=i.key,d=(0,me.b6)("card-countdown-".concat(u)),p=(0,s.useRef)(d||c||0),f=(0,s.useRef)(null),h=(0,s.useState)(l),m=(0,r.Z)(h,2),_=m[0],v=m[1],g=function e(){if((o||a)&&p.current<=0)f.current&&clearTimeout(f.current),t.isPresell||null===n||void 0===n||n(),(0,me.ku)("card-countdown-".concat(u));else if((o||a)&&p.current>0){var i=(0,me.b6)("card-countdown-".concat(u));i&&(p.current=i);var r=l.replace("{0}",(0,he.$q)(p.current)||"");v(r),t.endTime&&t.startTime?p.current=3===t.stockstatus?t.startTime-(0,_e.b)():t.endTime-(0,_e.b)():p.current-=1e3,f.current&&clearTimeout(f.current),f.current=setTimeout((function(){e()}),1e3)}};return(0,s.useEffect)((function(){var e=(0,me.b6)("card-countdown-".concat(u));p.current=e||c||0}),[t]),(0,s.useEffect)((function(){return(o||a)&&g(),function(){f.current&&clearTimeout(f.current)}}),[t]),_}var ge=n(79992),ye={countdown_tag:"index-module_OQIjZ",countdown_tag_icon:"index-module_W62F_",countdown_tag_icon_atest:"index-module_W4pTc",countdown_tag_text:"index-module_bUgmH",countdown_tag_text_atest:"index-module_rI7_c"},xe=n(18589);function be(e){var t=e.countdown,n=e.refreshShelf,i=e.timeOverCallBack,o=!0,r=ve({countdownInfo:t,callback:n,timeOverCallBack:i});return r?(0,f.jsxs)(a.View,{className:ye.countdown_tag,children:[(0,f.jsx)(ge.m,{className:(0,d.AK)(ye.countdown_tag_icon,o?ye.countdown_tag_icon_atest:""),style:(0,xe.j4)()?{position:"relative",top:0}:{},type:"clock"}),(0,f.jsxs)(a.Text,{className:(0,d.AK)(ye.countdown_tag_text,o?ye.countdown_tag_text_atest:""),children:[ke(5),r]})]}):null}var ke=function(e){return new Array(e).fill(" ").map((function(){return(0,f.jsx)(a.Text,{children:"\xa0"})}))},we=be,Ie={edit:"&#xe93b;",info:"&#xe010;",tick:"&#xf00ca;",help:"&#xe931;","arrow-right":"&#xf0a8;","warn-shape":"&#xef39;",iconCancel:"&#xe93f;",confirm:"&#xef83;",arrowupsink:"&#xeaec;",selectedShape:"&#xed1e;",addcirclefill3:"&#xec6b;",forward:"&#xe944;",editWord:"&#xe93b;",cancel:"&#xe93f;",addcirclefill:"&#xed0d;",camera:"&#xef87;",back:"&#xe371;",girl:"&#xf22c;",boy:"&#xf22b;",arrowdown:"&#xe32c;",arrowup:"&#xe32b;",arrowupcircle:"&#xe7bc;",arrowdowncircle:"&#xe7bd;",arrowrighttriangle:"&#xe4b9;",information:"&#xe010;",unselected:"&#xee35;",radiocheck:"&#xf00ca;",calendar:"&#xe94c;",group:"&#xe9dc;",hook:"&#xe93d;",sback:"&#xe943;",im:"&#xf00d6;",shop:"&#xf001b;",addFav:"&#xeeb7;",fav:"&#xe958;",toTop:"&#xf00b;",plus:"&#xec6b;",minus:"&#xed0b;",share:"&#xe939;",message:"&#xe0c3;",phone:"&#xe952;",vendor:"&#xebba;",video:"&#xf0a4;","video-player":"&#xf8ef;",bookmap:"&#xe06c;",contacts:"&#xe950;",diamond:"&#xf030;",time:"&#xe930;",collected:"&#xe958;",people:"&#xe94f;",pepoplenum:"&#xf6fe;",luggage:"&#xf6fd;",hot:"&#xeb86;",check:"&#xf1c8;",emptyhot:"&#xf095b;",smalltips:"&#xf095c;",route:"&#xf0864;",date:"&#xf0863;",emptylocate:"&#xe933;",member:"&#xe105;",spcright:"&#xf09b;",coupon:"&#xecb5;",search:"&#xead0;",location:"&#xe257;",close:"&#xe235;",xclosed:"&#xe004;",unchecked:"&#xe178;",checked:"&#xe179;",imgs:"&#xf0963;",history:"&#xe8d1;",dropup:"&#xe948;",dropdown:"&#xe949;",zan:"&#xf053d;",closecircle:"&#xe235;",nearbyRec:"&#xf0a1b;",hotPro:"&#xe96e;",guidedEscorts:"&#xf70a;",customCharter:"&#xf632;",guidedTour:"&#xf70b;",bookingService:"&#xf640;",down:"&#xeaee;",dArrowDown:"&#xf37e;",dArrowUp:"&#xf37d;",up:"&#xeb7c;",attractions:"&#xed65;",male:"&#xe3d5;",female:"&#xe3d4;",flight:"&#xe9c2;",zan2:"&#xeabc;",clock:"&#xeeb3;",svip:"&#xf073f;",hotel:"&#xf0968;",discount:"&#xf312;",discount2:"&#xefd9;",diamond2:"&#xf8d2;",consult:"&#xe0fe;",copyLine:"&#xf15b;",star:"&#xf418;",promotion:"&#xf0ba0;",arrowleft:"&#xf0ba5;",serverTel:"&#xe01f;",diamond3:"&#xf0bfe;",carrental:"&#xf097f;",sendgift:"&#xf2e7;",driver:"&#xe1e1;",boldhelp:"&#xf825;",notice:"&#xef8d;",add:"&#xe93e;",contacts2:"&#xf0e4d;",camera2:"&#xf02f5;",editWord2:"&#xe007;",user:"&#xf014;",forwardfill:"&#xef8c;",saygood:"&#xe956;",liked:"&#xeb91;",clock2:"&#xf108b;",coupon2:"&#xf42f;",show:"&#xf701;",share2:"&#xf0167;",collected2:"&#xe019;",message2:"&#xec78;",order:"&#xef2f;",broadcast:"&#xef69;",roundCheck:"&#xecf5;"},Ze=function(e){if("string"!=typeof e)return e;var t=e.replace(/&#x([0-9a-fA-F]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))}));return t},Te=function(e){return(0,f.jsx)(d.rD,(0,o.Z)((0,o.Z)({fontFamily:"crn_font_ttd_mini"},e),{},{children:Ze(Ie[e.type])}))},Se={card_banner:"index-module_owRbu",card_banner_image:"index-module_bZo_M",card_banner_title:"index-module_J4JYk",card_banner_title_text:"index-module_BDmrG",card_banner_title_icon:"index-module_Vj2mF",card_banner_subtitle:"index-module_ORGYW",card_banner_button:"index-module_woNaM",card_banner_button_text:"index-module_UahaC",card_banner_button_icon:"index-module_gKrM6"},Ce=function(e){var t=e.title,n=e.subtitle,i=e.button,o=e.layerInfo,r=e.onLayerClick,s=e.onButtonClick;return(0,f.jsxs)(_,{className:Se.card_banner,children:[(0,f.jsx)(a.Image,{className:Se.card_banner_image,src:"https://dimg04.c-ctrip.com/images/0AS6512000a0hdyf42626.png"}),(0,f.jsxs)(x,{children:[(0,f.jsxs)(_,{className:Se.card_banner_title,onClick:function(){r&&r(o)},children:[(0,f.jsx)(a.Text,{className:Se.card_banner_title_text,children:t}),(0,f.jsx)(Te,{className:Se.card_banner_title_icon,type:"help"})]}),(0,f.jsx)(a.Text,{className:Se.card_banner_subtitle,children:n})]}),(0,f.jsxs)(a.View,{className:Se.card_banner_button,onClick:function(){return s&&s()},children:[(0,f.jsx)(a.Text,{className:Se.card_banner_button_text,children:null===i||void 0===i?void 0:i.text}),(0,f.jsx)(Te,{className:Se.card_banner_button_icon,type:"forward"})]})]})},Pe=n(77163),Ne=!0,De={card_text_icon:"index-module_c8z9j",card_subtitle_text_atest:"index-module_m27J9",card_subtitle_wrapper:"index-module_RliwY",card_subtitle_text_gray:"index-module_k96fb",card_subtitle_prefix:"index-module_MIEvV"},je=function(e){var t,n=e.subtitle,i=e.theme,r=e.peopleLayerParams,s=e.metricExposure,l=e.tipsPropsData,c=e.isCustomCard,u=void 0!==c&&c;return null!==n&&void 0!==n&&n.text?(0,f.jsxs)(_,{className:u?"":De.card_subtitle_wrapper,children:[n.prefix?(0,f.jsx)(a.Image,{className:De.card_subtitle_prefix,src:n.prefix}):null,(0,f.jsx)(O,{numberOfLines:n.numberOfLines||1,className:(0,d.AK)(De.card_subtitle_text,Ne?De.card_subtitle_text_atest:"",u?De.card_subtitle_text_gray:""),type:n.textType,style:(0,o.Z)((0,o.Z)({},n.textType&&"gray"!=n.textType?{}:(0,Pe.N)(i,{key:"color",value:"gray"})),(0,xe.wT)()?{maxWidth:"calc(100vw - 130px)"}:{}),testID:(r?null===s||void 0===s?void 0:s.people:null!==l&&void 0!==l&&null!==(t=l.details)&&void 0!==t&&t.length?null===s||void 0===s?void 0:s.buyTips:"")||void 0,children:n.text}),n.isShowArrow?(0,f.jsx)(ge.m,{className:(0,d.AK)(De.card_text_icon,De["card_text_icon_".concat(n.textType)]),style:(0,Pe.N)(i,{key:"color",value:"gray"}),type:"forward"}):null]}):null},Re=je,Le=n(16281),Ee=n(61070),Ve={card_lightspot:"index-module_X8AvV",card_image_lightspot:"index-module_juU08",card_image_lightspot_atest:"index-module_L_gyh",card_image_lowerlightspot:"index-module_xFNac",card_image_lowerlightspot_atest:"index-module_ATxgs",card_lightspot_text:"index-module_LVscq",card_lightspot_text_atest:"index-module_VRhIr"},Ae={lightspot:"https://dimg04.c-ctrip.com/images/1o51512000axmduju00B7.png.webp",lowerlightspot:"https://dimg04.c-ctrip.com/images/1o52k12000ax8wkmv1A5A.png.webp"},Oe=function(e){var t=e.type,n=void 0===t?"lightspot":t,i=e.imageUrl,o=e.text,r=e.textStyle,s=(0,Ee.TC)();return(0,f.jsxs)(_,{className:Ve.card_lightspot,children:[(0,f.jsx)(a.Image,{className:(0,d.AK)(Ve["card_image_".concat(n)],Ne?Ve["card_image_".concat(n,"_atest")]:""),src:i||Ae[n]}),o?(0,f.jsx)(O,{className:(0,d.AK)(Ve.card_lightspot_text,Ne?Ve.card_lightspot_text_atest:""),numberOfLines:1,type:r,style:r&&"gray"!=r?{}:(0,Pe.N)(s,{key:"color",value:"gray"}),children:o}):null]})},Fe={card_desc_item:"index-module_FSsT6",card_desc_item_image:"index-module_wqNhr",card_desc_item_image_atest:"index-module_x43yc",card_desc_item_image_24X76:"index-module_Jeayw",card_desc_text_wrapper:"index-module_D095Y",card_desc_divider:"index-module_sF0Kj",card_desc_item_text_atest:"index-module_J2PcY",card_desc_item_text_blue:"index-module_rRtEW",card_desc_text:"index-module_ZX74s",card_desc_text_atest:"index-module_ePZwr",card_desc_icon:"index-module_THYTO",card_desc_icon_atest:"index-module_nA5un",card_desc_total:"index-module_zEkvL",card_desc_spot:"index-module_bFp8j"},Me=d.hj.isApp(),Be=function(e){var t=e.descList,n=e.isOffline,i=void 0!==n&&n,r=(0,Ee.TC)();return(0,f.jsx)(x,{className:Fe.card_desc_list,children:t.map((function(e,t){var n,s,l=e.imageUrl,c=e.imageStyle,u=e.textList,p=e.textStyle,h=e.totalDesc,m=e.hasSpot;return(0,f.jsxs)(_,{className:Fe.card_desc_item,children:[l?(0,f.jsx)(a.Image,{className:(0,d.AK)(Fe.card_desc_item_image,Ne?Fe.card_desc_item_image_atest:"",Fe["card_desc_item_image_".concat(c)]),src:l}):null,m?(0,f.jsx)(a.View,{className:Fe.card_desc_spot}):null,(0,f.jsx)(O,{className:(0,d.AK)(Fe.card_desc_text_wrapper,Ne?Fe.card_desc_item_text_atest:"",i?Fe.card_desc_item_text_blue:""),numberOfLines:(null===u||void 0===u||null===(n=u[0])||void 0===n?void 0:n.numberOfLines)||1,type:p,style:(0,o.Z)((0,o.Z)({},p&&"gray"!=p?{}:(0,Pe.N)(r,{key:"color",value:"gray"})),!Me&&((null===u||void 0===u||null===(s=u[0])||void 0===s?void 0:s.numberOfLines)||1)>1?{display:"-webkit-box","-webkit-box-orient":"vertical","white-space":"normal"}:{}),children:null!==u&&void 0!==u&&u.length?u.map((function(e,t){var n=e.text;return(0,f.jsxs)(f.Fragment,{children:[0!==t?(0,f.jsx)(d.X_,{className:(0,d.AK)(Fe.card_desc_divider,Ne?Fe.card_desc_item_text_atest:"",i?Fe.card_desc_item_text_blue:""),children:"\u4e28"}):null,n]})})):null}),h?(0,f.jsxs)(_,{className:Fe.card_desc_total,children:[(0,f.jsx)(se,{className:Fe.card_desc_divider}),(0,f.jsx)(O,{className:(0,d.AK)(Fe.card_desc_text,Ne?Fe.card_desc_text_atest:""),type:p,style:p&&"gray"!=p?{}:(0,Pe.N)(r,{key:"color",value:"gray"}),children:h}),(0,f.jsx)(ge.m,{className:(0,d.AK)(Fe.card_desc_icon,Ne?Fe.card_desc_icon_atest:""),type:"forward"})]}):null]},t)}))})},Ue={card_text_list:"index-module_ldXBu",card_text_list_icon_wrapper:"index-module_Ne36Z",card_text_list_icon:"index-module_WL_hW",card_text_list_icon_atest:"index-module__GSM_",card_text_list_item:"index-module_j7r7n",card_text_list_item_atest:"index-module_G3J6Z"},Ge=function(e){var t=e.prefix,n=e.textList,i=(0,Ee.TC)();return(0,f.jsxs)(a.View,{className:Ue.card_text_list,children:[!!t&&(0,f.jsx)(a.View,{className:Ue.card_text_list_icon_wrapper,children:(0,f.jsx)(ge.m,{className:(0,d.AK)(Ue.card_text_list_icon,Ne?Ue.card_text_list_icon_atest:""),type:t,style:(0,Pe.N)(i,{key:"color",value:"gray"})})}),null===n||void 0===n?void 0:n.map((function(e){return(0,f.jsx)(O,{type:e.type,className:(0,d.AK)(Ue.card_text_list_item,Ne?Ue.card_text_list_item_atest:""),style:(0,Pe.N)(i,{key:"color",value:e.type?"text_".concat(e.type):"gray"}),children:e.text})}))]})},He={card_row_discount:"index-module_Ct4sH",card_tag_marketing_first:"index-module_gotdb",card_tag_marketing_last:"index-module_hrU3q",card_tag_marketing:"index-module_PrqcM",card_tag_discount:"index-module_pzBUa",card_tag_discount_first:"index-module_wWgR4",card_discount_divider:"index-module_DpalD",card_hotel_price_text:"index-module_otfUy",card_hotel_price_text_atest:"index-module_FbeT1",card_hotel_price_text_discount_atest:"index-module_vL8zF",card_hotel_price_text_discount:"index-module_vPkxu",card_tag_marketing_atest:"index-module_DS4ez"},ze=function(e){var t=e.hotelPriceTags;return(0,f.jsx)(_,{className:He.card_row_discount,children:t.map((function(e,n){var i=0===n,o=n===t.length-1;return"marketing"===e.tagType?i?(0,f.jsx)(N,{text:e.text,className:(0,d.AK)(He.card_tag_marketing_first,o?He.card_tag_marketing_last:"",Ne?He.card_tag_marketing_atest:""),textClassName:(0,d.AK)(He.card_hotel_price_text,Ne?He.card_hotel_price_text_atest:"")}):(0,f.jsx)(N,{prefix:(0,f.jsx)(se,{className:He.card_discount_divider}),text:e.text,className:(0,d.AK)(He.card_tag_marketing,o?He.card_tag_marketing_last:"",Ne?He.card_tag_marketing_atest:""),textClassName:(0,d.AK)(He.card_hotel_price_text,Ne?He.card_hotel_price_text_atest:"")}):"discount"===e.tagType?(0,f.jsx)(L,{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 127, 81)","rgb(246, 59, 46)"],text:e.text,textClassName:(0,d.AK)(He.card_hotel_price_text_discount,Ne?He.card_hotel_price_text_discount_atest:""),className:(0,d.AK)(He.card_tag_discount,i?He.card_tag_discount_first:"")}):void 0}))})},qe={card_layout:"index-module_QNQ9t"},Ke=["children","isGradientBackground","className","style"],We={light:["rgb(255, 245, 243)","rgba(255, 252, 251, 0)"],dark:["#3f3f3f","#3f3f3f00"]},Xe=function(e){var t=e.children,n=e.isGradientBackground,i=e.className,r=e.style,a=(0,u.Z)(e,Ke),s=(0,Ee.TC)();return n?(0,f.jsx)(d.cn,{start:{x:0,y:0},end:{x:1,y:0},colors:We[s],style:r,className:i,children:(0,f.jsx)(x,(0,o.Z)((0,o.Z)({},a),{},{children:t}))}):(0,f.jsx)(x,(0,o.Z)((0,o.Z)({className:(0,d.AK)(i,qe.card_layout),style:(0,o.Z)((0,o.Z)({},r||{}),(0,Pe.N)(s,{key:"backgroundColor",value:"white"}))},a),{},{children:t}))},Ye={card_divider_tag_text:"index-module_mqgTB",card_divider_tag_divider:"index-module_qSaTk",card_divider_tag_divider_before:"index-module_g8RV5",card_divider_tag:"index-module_pWttR",card_divider_tag_wrap_android:"index-module_m_TaC",card_divider_tag_text_atest:"index-module_QRpqg",card_divider_tag_text_divider_blue:"index-module_t3REw",card_divider_tag_text_divider_red:"index-module_RbDFF",card_divider_tag_text_divider_green:"index-module_Qw_4M",card_divider_tag_wrap:"index-module_Klyef"},Qe=d.hj.isAndroid(),Je=function(e){var t,n=e.element,i=e.line,o=e.index,r=e.metricExposure,s=(0,Ee.TC)();return(0,f.jsxs)(d.En,{className:(0,d.AK)(Ye.card_divider_tag,"wrap_show"===i.type?Ye.card_divider_tag_wrap:"","wrap_hidden"===i.type&&Qe?Ye.card_divider_tag_wrap_android:""),testID:n.eventType?r[n.eventType]:"",children:[0!==o&&"before"==n.dividerPlace?(0,f.jsx)(se,{className:"before"==n.dividerPlace?Ye.card_divider_tag_divider_before:Ye.card_divider_tag_divider,style:(0,Pe.N)(s,{key:"backgroundColor",value:"gray"})}):null,(0,f.jsx)(a.Text,{className:(0,d.AK)(Ye.card_divider_tag_text,Ye["card_divider_tag_text_".concat(n.tagType)],Ye["card_text_".concat(n.styleType)],Ne?Ye.card_divider_tag_text_atest:""),style:(0,Pe.N)(s,{key:"color",value:null!==(t=n.tagType)&&void 0!==t?t:"gray"}),children:n.text}),n.isShowArrow?(0,f.jsx)(ge.m,{className:(0,d.AK)(Ye.card_divider_tag_text,Ye["card_divider_tag_text_".concat(n.tagType)]),style:(0,Pe.N)(s,{key:"color",value:"gray"}),type:"forward"}):null,o!==i.items.length-1&&"before"!=n.dividerPlace?(0,f.jsx)(se,{className:(0,d.AK)(Ye.card_divider_tag_divider),style:(0,Pe.N)(s,{key:"backgroundColor",value:"gray"})||{}}):null]})},$e={card_tag:"index-module_krSPf",card_tag_frameless:"index-module_wyHbk",card_tag_hollow_blue:"index-module_jIavM",card_tag_hollow_orange:"index-module_H5zIQ",card_tag_hollow_gray:"index-module_AIbqj",card_tag_hollow_gold:"index-module_QMR80",card_tag_hollow_gold_background:"index-module_W3jr9",card_tag_hollow_brown:"index-module_SpjGN",card_tag_hollow_red:"index-module_lysNm",card_tag_solid_blue:"index-module_NpT9j",card_tag_solid_gold:"index-module_JaQM9",card_tag_white_black:"index-module_vNHLJ",card_tag_text:"index-module_Vrck_",card_tag_text_frameless:"index-module_VGJ45",card_tag_text_hollow_blue:"index-module_eU8vr",card_tag_text_hollow_orange:"index-module_VlX_c",card_tag_text_hollow_gold:"index-module_x6drx",card_tag_text_hollow_gold_background:"index-module_cbHhB",card_tag_text_hollow_gray:"index-module_Uz4kY",card_tag_text_hollow_brown:"index-module_cG8f4",card_tag_text_hollow_red:"index-module_jWRbv",card_tag_text_solid_blue:"index-module_AemIx",card_tag_text_solid_gold:"index-module_OV6iS",card_tag_text_white_black:"index-module_esxR4",card_tag_text_divider_red:"index-module_onWDs",card_tag_atest:"index-module_l9Dpp",card_tag_border:"index-module_VWyH1",card_tag_text_atest:"index-module_yKsIW",card_tag_text_ios:"index-module_iO1nm"},et=["className","text","style","textStyle","textClassName","type","countdown","callback"],tt=d.hj.isAndroid(),nt=d.hj.isIOS(),it=function(e){var t=e.className,n=(e.text,e.style),i=e.textStyle,r=(e.textClassName,e.type),s=e.countdown,l=e.callback,c=(0,u.Z)(e,et),p=r?"card_tag_".concat(r):"",h=r&&(r.includes("hollow")||r.includes("solid"))?"card_tag_border":"",m=r?"card_tag_text_".concat(r):"",_=ve({countdownInfo:s,callback:l});return _?(0,f.jsx)(a.View,(0,o.Z)((0,o.Z)({className:(0,d.AK)($e.card_tag,$e[p],$e[h],Ne&&m?$e.card_tag_atest:"",t),style:n},c),{},{children:(0,f.jsx)(a.Text,{style:i,numberOfLines:1,className:(0,d.AK)($e.card_tag_text,$e[m],Ne&&null!==r&&void 0!==r&&r.includes("hollow")?$e.card_tag_atest:"",Ne&&null!==r&&void 0!==r&&r.includes("hollow")?$e.card_tag_text_atest:"",tt?$e.card_tag_text_android:"",nt?$e.card_tag_text_ios:""),children:_})})):null},ot=it,rt={card_tag_gradient_text:"index-module_lgGnt",card_tag_gradient_text_atest:"index-module_AebwF",card_tag:"index-module_xbS1U",card_tag_atest:"index-module_nQkVK",card_tag_fix:"index-module_Dvb7z",card_tag_wrap:"index-module_buOrN",card_tag_prefix:"index-module_His9Y",card_tag_prefix_frameless:"index-module_O1abk",card_tag_suffix:"index-module_CZcxY",card_text:"index-module_Y4wlA",card_text_flexgrow:"index-module_lcegS",card_text_wrap:"index-module_gEZ_Z",card_text_atest:"index-module_jAWeW",card_text_icon_atest:"index-module_H9Uj2",card_text_bottom:"index-module_JZA7G","card_text_flex-shrink":"index-module_mz4Bs",card_text_max_width:"index-module_ZDD98",card_text_max_width_end:"index-module__S0a1",card_text_max_width_short:"index-module_tWTqI",underline_linear:"index-module_WfoeX",card_image_element:"index-module_ZePK_",card_image_refundFree1:"index-module_fFASa",card_image_single_text:"index-module_xd9bu",card_image_single_text_small:"index-module__lNFt",card_icon_red:"index-module_AWfQJ",card_image_list:"index-module_G6DWE",card_image_item:"index-module_JWhgJ",card_divider_tag_divider:"index-module_gVUW6",card_text_icon:"index-module_SbNMf",card_text_icon_black:"index-module_pdDPg",card_text_icon_gray:"index-module_X3asY",card_text_icon_gray_light:"index-module_zFU4U",card_text_icon_blue:"index-module_J98b4",card_text_icon_blue_dark:"index-module_UyDxw",card_text_icon_red:"index-module_HjqsY",card_text_icon_orange:"index-module_YvILg",card_tag_text_atest:"index-module_KKJOE",card_tag_text_ios:"index-module_loOR2",card_tag_margin_right_8:"index-module_zY7yO"},at=d.hj.isAndroid(),st=d.hj.isIOS(),lt={linear_blue:["rgba(2,107,255,0.25)","rgba(255, 255, 255,0.24)"],linear_gold:["rgba(245,206,141,1)","rgba(244,216,167,1)","rgba(255,249,240,1) "],linear_sliver:["rgba(182,180,209,1)","rgba(201,204,216,1)","rgba(244,244,244,1)"]},ct={gradient_ziying:["#0086f6","#2698f7"],gradient_orange:["rgb(255, 165, 10)","rgb(255, 119, 0)"]},ut=function(e){var t,n,i,r,s,l,c,u,p=e.element,h=e.line,m=e.index,v=e.metricExposure,g=e.refreshShelf,y=(0,Ee.TC)();return"tag"===p.type?null!==(t=p.tagType)&&void 0!==t&&t.includes("divider")?(0,f.jsx)(Je,{element:p,line:h,index:m,metricExposure:v,refreshShelf:g}):null!==(n=p.tagType)&&void 0!==n&&n.includes("gradient")?p.text?(0,f.jsx)(L,{style:{marginRight:4,marginBottom:1,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"wrap_show"===h.type?F(4):0},textClassName:(0,d.AK)(rt.card_tag_gradient_text,Ne?rt.card_tag_gradient_text_atest:""),text:p.text,start:{x:0,y:0},end:{x:1,y:0},colors:null!==(i=ct[p.tagType])&&void 0!==i?i:["rgb(255, 165, 10)","rgb(255, 119, 0)"]}):null:p.text?(0,f.jsx)(N,{className:(0,d.AK)(p.prefix?rt.card_tag_fix:rt.card_tag,"wrap_show"===h.type?rt.card_tag_wrap:"",Ne?rt.card_tag_atest:"","margin_right_8"===p.styleType?rt.card_tag_margin_right_8:""),text:p.text,type:null!==(r=p.tagType)&&void 0!==r?r:"hollow_blue",textClassName:(0,d.AK)(Ne?rt.card_tag_text_atest:"",at?rt.card_tag_text_android:"",st?rt.card_tag_text_ios:""),prefix:p.prefix?(0,f.jsx)(a.Image,{src:p.prefix,className:rt.card_tag_prefix}):null,suffix:p.suffix?(0,f.jsx)(pe,{className:rt.card_tag_suffix,type:p.suffix}):null,style:"hollow_blue"===p.tagType?(0,Pe.N)(y,{key:"borderColor",value:"blue_tag_border"}):{},textStyle:"hollow_blue"===p.tagType?(0,Pe.N)(y,{key:"color",value:"blue_dark"}):{}}):null:"text"===p.type?p.text?(0,f.jsxs)(_,{className:(0,d.AK)(rt["card_text_".concat(p.styleType)],rt.card_text_baidumap),children:[p.underline?(0,f.jsx)(d.cn,{start:{x:0,y:0},end:{x:1,y:1},colors:lt[p.underline],className:rt.underline_linear}):null,(0,f.jsx)(O,{className:(0,d.AK)(rt.card_text,"wrap_show"===h.type?rt.card_text_wrap:"",Ne?rt.card_text_atest:"","middle"===p.ellipsizeMode?rt.card_text_flexgrow:""),type:p.textType,style:(0,o.Z)((0,o.Z)({},(0,Pe.N)(y,{key:"color",value:p.textType?"text_".concat(p.textType):"gray"})||{}),{},{width:"auto"}),numberOfLines:"max_width_end"==p.styleType?1:3,ellipsizeMode:null!==(s=p.ellipsizeMode)&&void 0!==s?s:"tail",testID:p.eventType&&v[null!==(l=p.eventType)&&void 0!==l?l:""]||void 0,children:p.text}),p.isShowArrow?(0,f.jsx)(ge.m,{className:(0,d.AK)(rt.card_text_icon,rt["card_text_icon_".concat(p.textType)],rt["card_text_".concat(p.styleType)],Ne?rt.card_text_icon_atest:""),type:"forward",style:(0,Pe.N)(y,{key:"color",value:"gray"})}):null]}):null:"image"===p.type?p.imageUrl?(0,f.jsx)(a.Image,{src:p.imageUrl||"",mode:"aspectFill",className:(0,d.AK)(rt.card_image_element,rt["card_image_".concat(p.imageType)])}):null:"icon"===p.type?p.iconType?(0,f.jsx)(ge.m,{type:p.iconType,className:rt["card_icon_".concat(p.styleType)]}):null:"image_list"===p.type?(0,f.jsx)(a.View,{className:rt.card_image_list,children:null===(c=p.imageList)||void 0===c?void 0:c.map((function(e,t){return(0,f.jsx)(a.Image,{style:{zIndex:3-t},className:rt.card_image_item,src:e.url||""})}))}):"countdown"===p.type&&p.countdown?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ot,{className:(0,d.AK)(rt.card_tag,"wrap_show"===h.type?rt.card_tag_wrap:"",Ne?rt.card_tag_atest:""),text:p.text,type:p.tagType,countdown:p.countdown,callback:g}),null!==(u=p.tagType)&&void 0!==u&&u.includes("divider")&&m!==h.items.length-1&&"before"!=p.dividerPlace?(0,f.jsx)(se,{className:(0,d.AK)(rt.card_divider_tag_divider)}):null]}):null},dt={card_free_layout:"index-module_EYYmB",card_free_title_wrapper:"index-module_b8IEQ",card_title:"index-module_UQ8Q9",card_title_ios:"index-module_NtMQ5",card_title_android:"index-module_pX1GT",card_free_icon:"index-module_QMuQa",card_price_value:"index-module_Bt2Vi"},pt=d.hj.isAndroid(),ft=function(e){var t=e.title,n=e.priceInfo,i=e.style,r=e.className,a=e.metricExposure,s=e.onTopAreaClick,l=(0,Ee.TC)();return(0,f.jsxs)(_,{className:(0,d.AK)(dt.card_free_layout,r),style:(0,o.Z)((0,o.Z)({},i),(0,Pe.N)(l,{key:"backgroundColor",value:"white"})),onClick:s,testID:a.card||void 0,children:[null!==t&&void 0!==t&&t.text?(0,f.jsxs)(_,{className:dt.card_free_title_wrapper,children:[(0,f.jsx)(T,{className:(0,d.AK)(dt.card_title,pt?dt.card_title_android:dt.card_title_ios),numberOfLines:2,prefixWidth:0,style:(0,Pe.N)(l,{key:"color",value:"black"}),children:t.text}),(0,f.jsx)(ge.m,{className:dt.card_free_icon,type:"help"})]}):null,n?(0,f.jsx)(ie,{priceClassName:dt.card_price_value,price:n.price,deletePrice:n.deletePrice,prefix:n.prefix,suffix:n.suffix,currency:n.currency,zero:n.zero,deletePriceStyle:(0,Pe.N)(l,{key:"color",value:"gray"})}):null]})},ht=n(3795),mt=n(92361),_t=n(7560),vt=function(e){d.N9.setSync("OTTD_TICKET_TICKETTIPS_DATA",e);var t=d.hj.isIOS(),n="/rn_ttd_xtaro/_crn_config?CRNModuleName=rn_ttd_xtaro&initialPage=ticketTipsPage&CRNType=1&isTransparentBg=YES&isTransparentBgWithNav=YES&reuseinstance=0&ignorecached=1&hideDefaultLoading=true";n+=t?"&showType=present":"&disableAnimation=YES&topholderbgcolor=#FFFFFF",_t.ZP.navigateTo({url:n})},gt=vt,yt=n(18946),xt=n(65896),bt=function(e){var t,n=e.buttonInfo,i=void 0===n?"":n,o=e.buyNoteShareClickLog,r=void 0===o?"":o,a=e.spotId,s=void 0===a?"":a,l=e.resourceId,c=void 0===l?"":l,u=e.bottomHeight,p=void 0===u?"":u,f=e.hideBottom,h=void 0===f?"":f,m=e.isBox,_=void 0===m?"":m,v=e.productId,g=void 0===v?"":v,y=e.seckillid,x=void 0===y?"":y,b=e.filters,k=void 0===b?[]:b,w=e.stocktype,I=e.poiId,Z=e.isFromShelf,T=void 0!==Z&&Z,S="",C=null===k||void 0===k||null===(t=k[0])||void 0===t||null===(t=t.filterItems)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value;try{if(i){var P=i.type,N=i.text,D=i.url,j=i.toastText;S={type:NewBtnTypeToOld[P],text:N,canJump:!!D,url:D,toast:j,clickLog:{params:{stocktype:w}}},S=encodeURIComponent(JSON.stringify(S))}r&&(r=encodeURIComponent(JSON.stringify(r)))}catch(e){}var R=(0,xt.R)({spotId:s,resourceId:c,bottomHeight:p,hideBottom:h,isBox:_,productId:g,seckillid:x,buttonthininfo:S,buyNoteShareClickLog:r,poiId:I,isFromShelf:T,date:C},!0),L="/pages/xtnt/business/detail/resource-detail/buy-notes/index?".concat(R);d.Nd.navigateTo({url:L})},kt=n(45710),wt=n(55853),It=n(49671),Zt=function(e){},Tt=function(e){},St=function(e){},Ct=n(44047),Pt=n(42826),Nt=function(e){var t=e||{},n=t.title,i=t.seckillbegtime,o=t.seckillid,r=t.callback,a=(0,he.XU)(i),s={title:n,start:a+"",end:a+1e3+"",hasAlarm:!0,remindMinutes:"10"};Ct.Z.isEventExistPromise(s).then((function(e){var t,n;e&&0==(null===(t=e.status)||void 0===t?void 0:t.status)?null!==(n=e.result)&&void 0!==n&&n.isExist?mt.ZP.show("\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",3e3):Ct.Z.addEventPromise(s).then((function(e){var t,n,i,a;0==(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.status)?(mt.ZP.show("\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",3e3),d.N9.setSync("shelf-seckillid-".concat(o),s,void 0,"ottd"),r&&r(),(0,Pt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u6210\u529f",code:"success",seckillid:o},"devtrace")):(-1==(null===e||void 0===e||null===(n=e.result)||void 0===n||null===(n=n.errorCode)||void 0===n?void 0:n.indexOf("201"))&&-1==(null===e||void 0===e||null===(i=e.result)||void 0===i||null===(i=i.errorCode)||void 0===i?void 0:i.indexOf("202"))&&mt.ZP.show("\u7cfb\u7edf\u6709\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5",3e3),(0,Pt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u5931\u8d25",code:null===e||void 0===e||null===(a=e.result)||void 0===a?void 0:a.errorCode,seckillid:o},"devtrace"))})):(0,Pt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u5931\u8d25",code:e,seckillid:o},"devtrace")}))},Dt={linear_orange:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 165, 10)","rgb(255, 119, 0)"],locations:[0,1]},linear_lightred:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"],locations:[0,1]},grey:{start:{x:0,y:0},end:{x:1,y:0},colors:["#d5d5d5","#d5d5d5"],locations:[0,1]},linear_red:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgb(255,110,56)","rgb(255,68,32)"],locations:[0,1]},red_border_add:{start:{x:0,y:0},end:{x:1,y:0},colors:["#rgba(255, 238, 236,0.5)","#rgba(255, 243, 241,0.5)"],locations:[0,1]}},jt=n(59217),Rt=z.Z.isBaiduMap(),Lt=d.hj.isH5(),Et=d.hj.isIOS(),Vt=d.hj.isAndroid(),At={grey:["#e0e0e0","#e0e0e0"],linear_red:Rt?["rgb(255, 92, 77)","rgb(255, 115, 102)"]:["rgb(251, 91, 71)","rgb(255, 53, 39)"],linear_lightred:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"],linear_orange:Rt?["rgb(255, 92, 77)","rgb(255, 115, 102)"]:["#FF8800","#FF6600"],red_border_add:["#fff","#fff"]},Ot=function(e){var t,n=e.metricData,i=e.url,a=e.buyNoteUrlParams,l=e.title,c=e.imageInfo,u=e.isGradientBackground,p=e.tipsPropsData,f=e.peopleLayerParams,h=e.bottomBanner,m=e.priceLayerParams,_=e.index,v=e.productType,g=e.groupType,y=e.showTicketDetailPage,x=e.imUrl,b=e.onPriceClick,k=e.onPeopleClick,w=e.onTipClick,I=e.onSkuClick,Z=e.onBuyNoteClick,T=e.anchorId,S=e.sideBarChoosedIndex,C=e.innerTabChoosedIndex,P=e.shelfMetricData,N=e.tipDevTraceData,D=e.targetPageRef,j=e.refreshShelf,R=e.frontSecKillRefresh,L=(e.countdown,(0,s.useState)(e.button)),E=(0,r.Z)(L,2),V=E[0],A=E[1],O=(0,It.ji)()||{},F=O.tabsMetricInfo,M=void 0===F?"":F,B=(null===M||void 0===M?void 0:M[null!==T&&void 0!==T?T:0])||{},U=B.extGsId,G=B.tabname,H="ext-gsId=".concat(U,"&ext-gsName=").concat(G),z=function(){if(i){var e="",t=(null===V||void 0===V?void 0:V.bookingUrl)||i||"";return null!==V&&void 0!==V&&V.isShowSku&&(e+="".concat("&"===t[t.length-1]?"":"&")+"anchor=sku"),t+=e,t+="".concat("&"===t[t.length-1]?"":"&")+H,t}},q=z(),K=null!==(t=At[null===V||void 0===V?void 0:V.type])&&void 0!==t?t:At["linear_orange"],W={discount:(0,wt.tw)("\u4f18\u60e0\u8bf4\u660e"),suitPeople:(0,wt.MR)("\u4eba\u7fa4\u8bf4\u660e-".concat(null===l||void 0===l?void 0:l.text,"(").concat(null!==n&&void 0!==n&&n.resourceid?null===n||void 0===n?void 0:n.resourceid:"",")")),buyNoteDevtrace:(0,wt.cL)("\u8d2d\u4e70\u987b\u77e5-".concat(null===l||void 0===l?void 0:l.text,"(").concat(null!==n&&void 0!==n&&n.resourceid?null===n||void 0===n?void 0:n.resourceid:"",")")),orderBtnDevtrace:(0,wt.xn)("".concat(null===V||void 0===V?void 0:V.text,"-").concat(null===l||void 0===l?void 0:l.text,"(").concat(null!==n&&void 0!==n&&n.resourceid?null===n||void 0===n?void 0:n.resourceid:"",")"))},X=(0,o.Z)((0,o.Z)({},n),{},{index:_,pos:S,innerseq:"".concat(C,"-").concat(_),producttype:v,groupid:null===P||void 0===P?void 0:P.groupid,anchorId:T,supertabname:u?null===P||void 0===P?void 0:P.supertabname:"",poiactivityname:u?null===P||void 0===P?void 0:P.poiactivityname:""}),Y=a?(0,o.Z)((0,o.Z)({},a),{},{buttonInfo:(0,o.Z)((0,o.Z)({},a.buttonInfo),{},{url:q}),buyNoteShareClickLog:(0,yt.xw)((0,o.Z)((0,o.Z)({},X),{},{groupid:a.groupId}))}):void 0,Q={card:ht.ZP.cardExposureFn(X),buyTips:ht.cw.CardTipExposureFn(X),buyNote:ht.cw.CardBuyNoticeContentExposureFn(X),promotion:ht.cw.CardPromotionIconExposureFn(X),people:ht.cw.CardPeopleExposureFn(X),video:ht.cw.VideoCoverExposureFn(X)},J=function(){var e=ht.cw.CardTipClickFn(X);d.hS.logTrace(e.key,e.params||{}),N&&(0,kt.Vg)(N);var t={nextTitle:V?V.layerText:"",linearType:{start:{x:0,y:0},end:{x:1,y:0},colors:"red_border_add"==(null===V||void 0===V?void 0:V.type)?Dt[V.type].colors:K,locations:[0,1]},tipsButtonInfo:{jumpUrl:q,toast:null===V||void 0===V?void 0:V.toastText,type:null===V||void 0===V?void 0:V.type,clockType:null===V||void 0===V?void 0:V.clockType,seckillbegtime:null===V||void 0===V?void 0:V.seckillbegtime,seckillid:null===V||void 0===V?void 0:V.seckillid,name:null===l||void 0===l?void 0:l.text}},n=(0,o.Z)((0,o.Z)({},p||{}),t);d.hj.isApp()?null===gt||void 0===gt||gt(n):null===w||void 0===w||w((0,o.Z)((0,o.Z)({},n),{},{onClickButton:function(){return ie("fromButton")}}))},$=function(){var e=ht.cw.CardPeopleClickFn(X);d.hS.logTrace(e.key,e.params||{}),ne(),(0,kt.Vg)(W.suitPeople),f&&k&&k(f)},ee=function(){var e=ht.cw.CardBuyNoticeContentClickFn(X);if(d.hS.logTrace(e.key,e.params||{}),(0,kt.Vg)(W.buyNoteDevtrace),ne(),d.hj.isH5()&&!Rt){var t,n={isResource:!0,spotId:null===Y||void 0===Y?void 0:Y.spotId,resourceId:null===Y||void 0===Y?void 0:Y.resourceId,productId:null===Y||void 0===Y?void 0:Y.productId,seckillid:null===Y||void 0===Y?void 0:Y.seckillid,isBox:null===Y||void 0===Y?void 0:Y.isBox,traceid:null===Y||void 0===Y?void 0:Y.traceid,devTraceKeyData:null===Y||void 0===Y?void 0:Y.devTraceKeyData,filters:null===Y||void 0===Y?void 0:Y.filters,poiId:null===Y||void 0===Y||null===(t=Y.poiId)||void 0===t?void 0:t.toString(),isFromShelf:null===Y||void 0===Y?void 0:Y.isFromShelf};Z&&Z(n)}else Y&&bt(Y)},te=function(){var e=ht.cw.VideocoverClickFn(X);d.hS.logTrace(null===e||void 0===e?void 0:e.key,(null===e||void 0===e?void 0:e.params)||{})},ne=function(){var e=ht.ZP.cardClickFn(X);d.hS.logTrace(e.key,(0,o.Z)((0,o.Z)({},e.params),{},{targetPageRef:D})||{})},ie=function(e,t){var n;if(null===t||void 0===t||null===(n=t.stopPropagation)||void 0===n||n.call(t),ne(),"fromButton"==e){var o=ht.cw.CardBtnClickFn(X);d.hS.logTrace(o.key,o.params||{}),(0,kt.Vg)(W.orderBtnDevtrace)}else if("showTicketDetail"==e){var r=ht.cw.TicketCardContentClickFn(X);d.hS.logTrace(r.key,r.params||{})}else if(null!==c&&void 0!==c&&c.isVideo)te();else if("fromBuyNote"==e){var a=ht.cw.CardBuyNoticeContentClickFn(X);d.hS.logTrace(a.key,a.params||{})}else{var s=ht.cw.CardOtherAreaClickFn(X);d.hS.logTrace(s.key,s.params||{})}V&&"frontSecKill"===V.clickType?null===R||void 0===R||R(V.seckillid||0,(function(e){return oe("fromButton",e)})):"addClock"==(null===V||void 0===V?void 0:V.clockType)&&null!==V&&void 0!==V&&V.seckillbegtime&&null!==V&&void 0!==V&&V.seckillid?Nt({title:null===l||void 0===l?void 0:l.text,seckillbegtime:V.seckillbegtime,seckillid:V.seckillid,callback:j}):"hasClock"==(null===V||void 0===V?void 0:V.clockType)&&"fromButton"===e?mt.ZP.show("\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",3e3):null!==V&&void 0!==V&&V.toastText?mt.ZP.show(null===V||void 0===V?void 0:V.toastText,3e3):x&&"fromButton"===e?_t.ZP.navigateTo({url:x}):i&&oe(e)},oe=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=i;if(("fromButton"==e?o=n||q:o+="".concat("&"===o[o.length-1]?"":"&")+H,"fromNaquhua"==e)&&(null!==h&&void 0!==h&&null!==(t=h.button)&&void 0!==t&&t.url))return void _t.ZP.navigateTo({url:h.button.url});if("fromButton"===e&&null!==V&&void 0!==V&&V.bookingUrl)Zt(o),o&&_t.ZP.navigateTo({url:o});else{if((d.hj.isH5()&&!Rt||d.hj.isMini())&&null!==V&&void 0!==V&&V.isShowSku&&!V.showTicketDetailPage){var r=V.skuParams||{},a=r.date,s=r.token,l=r.resourceId,c=r.spotid,u=r.type,p=r.ctm_ref,f=r.traceid,m=r.label,_=void 0===m?"":m,v=r.hasDiscountInfo,g=r.extParams,y={date:a,token:decodeURIComponent(s),optid:[l],usePage:"detail",aggregation:!0,spotid:c,traceid:f,label:_,hasDiscountInfo:v,extParams:g};(0,jt.lz)()&&(y["isscan"]=!0,y["isScanShelf"]=!0),p&&(y["ctm_ref"]=p);var x={resourcetype:u,showPoplayerTime:Date.now()};return void(null===I||void 0===I||I({request:y,otherParams:x}))}null!==V&&void 0!==V&&V.isShowSku?Tt(o):St(o),o&&_t.ZP.navigateTo({url:o})}},re=function(e){var t,n;null===e||void 0===e||null===(t=e.stopPropagation)||void 0===t||t.call(e);var i=!(null===p||void 0===p||null===(n=p.details)||void 0===n||!n.length);null!==c&&void 0!==c&&c.isVideo&&te(),y?ie("showTicketDetail"):i?J():Y?ee():ie()},ae=function(e){var t,n;null===e||void 0===e||null===(t=e.stopPropagation)||void 0===t||t.call(e);var i=!(null===p||void 0===p||null===(n=p.details)||void 0===n||!n.length);y?ie("showTicketDetail"):f?$():i?J():ie()},se=function(e){var t;null===e||void 0===e||null===(t=e.stopPropagation)||void 0===t||t.call(e),y?ie("showTicketDetail"):Y?ee():1===g?ie("fromBuyNote"):ie()},le=function(e){var t;if(null===e||void 0===e||null===(t=e.stopPropagation)||void 0===t||t.call(e),(0,Le.iX)(g))ie();else if(m){var n=ht.cw.CardPromotionIconClickFn(X);d.hS.logTrace(n.key,n.params||{}),m&&b&&b((0,o.Z)((0,o.Z)({},m),{},{buttonInfo:(0,o.Z)((0,o.Z)({},m.buttonInfo),{},{url:q}),onButtonClick:function(){return ie("fromButton")}}))}else ie()},ce=function(){var e=V||{},t=e.isZeroPrice;A((function(e){return(0,o.Z)((0,o.Z)({},e),{},{layerText:t?"\u53bb\u9884\u7ea6":"\u53bb\u62a2\u8d2d",text:t?"\u9884\u7ea6":"\u62a2\u8d2d",type:t?"linear_orange":"linear_red",clickType:"frontSecKill"})}))};(0,s.useEffect)((function(){A(e.button)}),[e.button]);var ue=(0,Ee.TC)(),de=9;return Lt&&(de=8),Rt&&Et&&(de=8),Rt&&Vt&&(de=7),{button:V,theme:ue,titlePrefixWidth:de,buttonColors:K,cardDevtraceData:W,metricExposure:Q,onCardClick:ie,onImageClick:re,onTopAreaClick:ae,onMatrixClick:se,onPriceAraeClick:le,timeOverCallBack:ce}},Ft=["style","title","imageInfo","subtitle","matrix","priceInfo","leftBottomMatrix","inventoryTip","priceBottomTag","isGradientBackground","className","countdown","tipsPropsData","peopleLayerParams","bottomBanner","isLeftBottomMatrixMarginTop","isNoSale","groupType","lightspot","descList","timeDesc","onNaquhuaClick","refreshShelf","hotelPriceTags","leftBottomDescList","topLine","shelfIndex","index"],Mt=d.hj.isIOS(),Bt=d.hj.isAndroid(),Ut=z.Z.isBaiduMap(),Gt=d.hj.isApp(),Ht=function(e){var t,n,i,r,s=e.style,l=e.title,c=e.imageInfo,p=e.subtitle,h=e.matrix,m=e.priceInfo,v=e.leftBottomMatrix,g=e.inventoryTip,y=e.priceBottomTag,b=e.isGradientBackground,k=e.className,w=e.countdown,I=e.tipsPropsData,Z=e.peopleLayerParams,S=e.bottomBanner,C=e.isLeftBottomMatrixMarginTop,P=void 0===C||C,D=e.isNoSale,j=e.groupType,R=e.lightspot,E=e.descList,V=e.timeDesc,A=e.onNaquhuaClick,F=e.refreshShelf,M=e.hotelPriceTags,B=e.leftBottomDescList,U=e.topLine,G=e.shelfIndex,z=e.index,q=(0,u.Z)(e,Ft),K=Ot(e),W=K.button,X=K.metricExposure,Q=K.buttonColors,J=K.cardDevtraceData,$=K.theme,ee=K.titlePrefixWidth,te=K.onCardClick,ne=K.onImageClick,oe=K.onTopAreaClick,re=K.onMatrixClick,ae=K.onPriceAraeClick,se=K.timeOverCallBack;if(D)return(0,f.jsx)(ft,{title:l,priceInfo:m,style:s,className:k,metricExposure:X,onTopAreaClick:oe});var le=function(){var e=(0,jt.jJ)()?3:2;return null!==l&&void 0!==l&&l.text?(0,f.jsxs)(_,{className:fe.card_title_container,children:[(0,f.jsx)(T,{className:(0,d.AK)(fe.card_title,Bt?fe.card_title_android:fe.card_title_ios),wrapperClassName:fe.card_title_wrapper,numberOfLines:(0,Le.ce)(j)?void 0:e,prefixWidth:l.prefix?ee:0,prefix:l.prefix?(0,f.jsx)(a.Image,{className:(0,d.AK)(fe.card_title_image_prefix,Mt&&fe.card_title_image_prefix_ios,Bt&&fe.card_title_image_prefix_android),src:l.prefix,mode:"aspectFit"}):null,suffix:(0,f.jsx)(f.Fragment,{children:Array.isArray(l.suffixList)&&l.suffixList.map((function(e){return(0,f.jsx)(a.Image,{className:(0,d.AK)(fe.card_title_image_suffix,Bt?fe.card_title_image_suffix_android:fe.card_title_image_suffix_ios),style:e.width?{width:e.width}:{},src:e.url,mode:"heightFix"})}))}),style:(0,Pe.N)($,{key:"color",value:"black"}),children:l.text}),l.isShowArrow?(0,f.jsx)(ge.m,{className:fe.card_title_icon,type:"forward"}):null]}):null},ce=(0,jt.fi)(),ue=!ce||ce&&(null===c||void 0===c?void 0:c.imageUrl);return(0,f.jsxs)(Xe,(0,o.Z)((0,o.Z)({className:k,style:s,testID:X.card||void 0,isGradientBackground:b},q),{},{id:"sight_detail_card_".concat(G,"_").concat(z),children:[(0,f.jsxs)(_,{onClick:function(){return te()},children:[null!==c&&void 0!==c&&c.imageUrl?(0,f.jsxs)(H,{className:fe.card_image,testID:null!==c&&void 0!==c&&c.isVideo?X.video:void 0,src:c.imageUrl||"",mode:"aspectFill",width:80,onClick:ne,children:[null!==c&&void 0!==c&&null!==(t=c.bottom)&&void 0!==t&&t.text?"gradient"===c.bottom.styleType&&Gt?(0,f.jsx)(L,{start:{x:0,y:0},end:{x:0,y:1},colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.9)"],text:c.bottom.text,className:fe.card_image_bottom_gradient,textClassName:fe.card_image_bottom_text_gradient,numberOfLines:1}):(0,f.jsx)(N,{text:c.bottom.text,className:fe.card_image_bottom,textClassName:fe.card_image_bottom_text,type:"white_black",numberOfLines:1}):null,null!==c&&void 0!==c&&c.leftTopImageUrl?(0,f.jsx)(a.Image,{src:c.leftTopImageUrl,className:fe.card_image_lefttop}):null,null!==c&&void 0!==c&&c.leftTopText?(0,f.jsx)(N,{text:c.leftTopText,type:"white_black",className:fe.card_image_lefttop_tag}):null,c.isVideo?(0,f.jsx)(a.View,{className:fe.card_image_video_warpper,children:(0,f.jsx)(pe,{className:fe.card_image_video,type:"broadcast"})}):null]}):null,(0,f.jsxs)(x,{style:{minWidth:0},className:c?fe.card_content_hasimage:fe.card_content,children:[(0,f.jsxs)(x,{onClick:oe,children:[ue?le():null,U?(0,f.jsx)(_,{className:(0,d.AK)(fe.card_line,fe["card_line_".concat(U.type)],Ne?fe["card_line_".concat(U.type,"_atest")]:""),children:null===(n=U.items)||void 0===n?void 0:n.map((function(e,t){return(0,f.jsx)(ut,{element:e,line:U,index:t,metricExposure:X,refreshShelf:F})}))}):null,ce?null:(0,f.jsx)(Re,{subtitle:p,peopleLayerParams:Z,theme:$,metricExposure:X,tipsPropsData:I})]}),null!==R&&void 0!==R&&R.text&&ue?(0,f.jsx)(Oe,(0,o.Z)({},R)):null,null!==E&&void 0!==E&&E.descList.length&&ue?(0,f.jsx)(Be,(0,o.Z)({},E)):null,V?(0,f.jsx)(Ge,(0,o.Z)({},V)):null,ce&&null!==c&&void 0!==c&&c.imageUrl?(0,f.jsx)(x,{style:{marginTop:4},onClick:oe,children:(0,f.jsx)(Re,{subtitle:p,peopleLayerParams:Z,theme:$,metricExposure:X,tipsPropsData:I})}):null,(0,f.jsx)(x,{onClick:re,children:null===h||void 0===h?void 0:h.map((function(e){var t,n=e.type,i=void 0===n?"nowrap":n;return(0,f.jsx)(_,{className:(0,d.AK)(fe.card_line,fe["card_line_".concat(i)],Ne?fe["card_line_".concat(i,"_atest")]:""),children:null===(t=e.items)||void 0===t?void 0:t.map((function(t,n){var i,o;return 0===n&&null!==(i=e.items)&&void 0!==i&&null!==(i=i[0])&&void 0!==i&&null!==(i=i.tagType)&&void 0!==i&&i.includes("hollow")&&null!==(o=e.items)&&void 0!==o&&null!==(o=o[1])&&void 0!==o&&null!==(o=o.tagType)&&void 0!==o&&o.includes("divider")&&(t.styleType="margin_right_8"),(0,f.jsx)(ut,{element:t,line:e,index:n,metricExposure:X,refreshShelf:F})}))})}))}),(0,f.jsxs)(_,{className:c?fe.card_bottom_has_image:fe.card_bottom,style:ce?{alignItems:"center"}:{},children:[!ce||null!==c&&void 0!==c&&c.imageUrl?null:(0,f.jsxs)(x,{className:fe.card_left_area,onClick:oe,children:[le(),null!==R&&void 0!==R&&R.text?(0,f.jsx)(Oe,(0,o.Z)({},R)):null,null!==E&&void 0!==E&&E.descList.length?(0,f.jsx)(Be,(0,o.Z)({},E)):null,(0,f.jsx)(Re,{subtitle:p,peopleLayerParams:Z,theme:$,metricExposure:X,tipsPropsData:I})]}),null!==v&&void 0!==v&&v.length||null!==B&&void 0!==B&&B.length?(0,f.jsxs)(_,{onClick:re,className:(0,d.AK)(fe.card_bottom_left,P?fe.card_bottom_left_margin:""),children:[w?(0,f.jsx)(_,{children:(0,f.jsx)(we,{countdown:w,refreshShelf:F,timeOverCallBack:se})}):null,null===v||void 0===v?void 0:v.map((function(e){var t;return(0,f.jsx)(_,{className:(0,d.AK)(fe.card_line,fe["card_line_".concat(e.type)],Ne?fe["card_line_".concat(e.type,"_atest")]:""),children:null===(t=e.items)||void 0===t?void 0:t.map((function(t,n){var i,o;return 0===n&&null!==(i=e.items)&&void 0!==i&&null!==(i=i[0])&&void 0!==i&&null!==(i=i.tagType)&&void 0!==i&&i.includes("hollow")&&null!==(o=e.items)&&void 0!==o&&null!==(o=o[1])&&void 0!==o&&null!==(o=o.tagType)&&void 0!==o&&o.includes("divider")&&(t.styleType="margin_right_8"),(0,f.jsx)(ut,{element:t,line:e,index:n,metricExposure:X})}))})})),null!==B&&void 0!==B&&B.length?B.map((function(e){return(0,f.jsx)(O,{className:(0,d.AK)(fe.card_leftbottom_desc,Ne?fe.card_leftbottom_desc_atest:""),children:e})})):null]}):(0,f.jsx)(a.View,{}),(0,f.jsx)(_,{className:fe.card_bottom_right,children:(0,f.jsxs)(x,{children:[(0,f.jsxs)(_,{className:fe.card_bottom_right,children:[m?(0,f.jsxs)(x,{className:fe.card_price_wrapper,onClick:ae,children:[(0,f.jsx)(ie,{priceClassName:fe.card_price_value,price:m.price,deletePrice:m.deletePrice,prefix:m.prefix,suffix:m.suffix,currency:m.currency,zero:m.zero,priceStyle:b?{color:Ut?"#FF5C4D":"#F63B2E"}:{},currencyStyle:b?{color:Ut?"#FF5C4D":"#F63B2E"}:{},suffixStyle:b?{color:Ut?"#FF5C4D":"#F63B2E"}:{},deletePriceStyle:(0,Pe.N)($,[{key:"color",value:"gray"},{key:"textDecorationColor",value:"gray"}])}),null!==y&&void 0!==y&&y.text?(0,f.jsx)(d.En,{testID:null!==(i=X.promotion)&&void 0!==i?i:"",devTraceData:J.discount,children:(0,f.jsxs)(d.cn,{className:(0,d.AK)(fe.card_discount_tag,Ne?fe.card_discount_tag_atest:""),start:{x:0,y:0},end:{x:1,y:0},colors:Ut?["rgb(255, 92, 77)","rgb(255, 115, 102)"]:["rgb(255, 127, 81)","rgb(246, 59, 46)"],children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(fe.card_discount_tag_text,Ne?fe.card_discount_tag_text_atest:""),children:y.text}),(0,Le.iX)(j)?null:(0,f.jsx)(ge.m,{className:(0,d.AK)(fe.card_discount_tag_icon,Ne?fe.card_discount_tag_icon_atest:"",Bt?fe.card_discount_tag_icon_andorid:""),type:"help"})]})}):null,M?(0,f.jsx)(ze,{hotelPriceTags:M}):null]}):null,null!==W&&void 0!==W&&W.text?(0,f.jsx)(Y,{colors:Q,onClick:function(e){te("fromButton",e)},className:(0,d.AK)(fe.card_button,W.text.length>=3?fe.card_button_small:null,fe["card_button_".concat(W.type)],null!==(r=W.type)&&void 0!==r&&r.includes("red_border")?fe.card_button_red_border:null),children:W.text}):null]}),g?(0,f.jsx)(_,{className:fe.card_bottom_tip_wrap,children:(0,f.jsx)(a.Text,{className:fe.card_bottom_tip,children:g})}):null]})})]})]})]}),S?(0,f.jsx)(Ce,(0,o.Z)((0,o.Z)({},S),{},{onLayerClick:A,onButtonClick:function(e){te("fromNaquhua",e)}})):null]}))},zt=Ht,qt={view_more_box:"index-module_vB2Sw",view_more:"index-module_cgG6I",view_more_text:"index-module_iFeQk",view_more_bgc:"index-module_sqzMC"},Kt=n(88967),Wt=n(32180)["document"],Xt=n(32180)["window"],Yt=function(e){var t;if(e){try{if("function"===typeof e.getBoundingClientRect)t=e.getBoundingClientRect();else if("string"===typeof e){var n=Wt.querySelector(e);t=n.getBoundingClientRect()}else if(e._reactInternals){var i=Kt["default"].findDOMNode(e);t=i.getBoundingClientRect()}}catch(e){(0,kt.Zz)({key:"ubt_boundingClientRect_error",error:e.toString()},"tracelog")}return t}},Qt=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>4?arguments[4]:void 0,o=i||{},r=o.interval,a=void 0===r?0:r,s=function(){var n=Yt(e);t&&t(n)},l=a||(n?0:600);l?setTimeout((function(){s()}),l):s()},Jt=function(e,t){Qt(t,(function(t){if(t){var n=t.top,i=Xt.innerHeight,o=n-i;e(o)}}),!0)},$t=n(67891),en=(0,s.memo)((function(e){var t=e.viewMore,n=e.metricData,i=e.handleClick,r=e.isShowMore,l=void 0===r||r,c=e.isXToOne,u=e.anchorId,p=e.handleOpenAndClose,h=e.updateLayout,m=(e.shelfIndex,(0,$t.r)()),_=t||{},v=_.text,g=(_.url,null===ht.ZP||void 0===ht.ZP?void 0:ht.ZP.viewMoreClickFn({moreInfo:n,anchorId:u})),y=null===ht.ZP||void 0===ht.ZP?void 0:ht.ZP.viewMoreExposureFn({moreInfo:n,anchorId:u}),x=(0,s.useRef)(null),b=function(){!l&&x.current&&p&&(d.hj.isMini()||d.hj.isH5()||z.Z.isBaiduMap()?p(0,u):Jt&&Jt(p,x.current))},k=(0,Ee.TC)();return(0,f.jsx)(d.En,{className:(0,d.AK)(qt.view_more,c?qt.view_more_bgc:""),style:c&&"light"===k?{backgroundColor:"#fef5f3"}:(0,Pe.N)(k,{key:"backgroundColor",value:"gray_btn"}),onClick:function(){var e;i&&i(!l),l&&d.hS.logTrace(null===g||void 0===g?void 0:g.key,null===g||void 0===g?void 0:g.params),(0,kt.Vg)((0,wt.pP)(!l,"".concat((null===n||void 0===n?void 0:n.groupname)||"","-").concat((null===n||void 0===n?void 0:n.groupid)||""))),null===h||void 0===h||h(u),null===m||void 0===m||null===(e=m.forceUpdatePoiShelf)||void 0===e||e.call(m),setTimeout((function(){var e;null===m||void 0===m||null===(e=m.forceUpdatePoiShelf)||void 0===e||e.call(m)}),0),b()},testID:l&&y||void 0,ref:x,children:(0,f.jsxs)(a.View,{className:qt.view_more_box,children:[(0,f.jsx)(a.Text,{className:qt.view_more_text,style:(0,Pe.N)(k,{key:"color",value:"black"}),children:l?v:"\u6536\u8d77"}),(0,f.jsx)(ge.m,{type:l?"arrowdown":"arrowup",style:(0,o.Z)({fontSize:10,top:.5,textAlign:"center",marginLeft:4},(0,Pe.N)(k,{key:"color",value:"black"})||{})})]})})})),tn={card_contain_none:"index-module_w6e51",message:"index-module_uLE0c",messageItem:"index-module_N9osG",messageItem_abtest:"index-module_IxWPm",card_contain_margin:"index-module_Fr0Bb",line:"index-module_IKdie",image_title_background:"index-module_xLTjf",image_title_main:"index-module_CB9T1",image_title_image:"index-module_S8y1C",image_title_gradient:"index-module_bKVSb",image_title_title:"index-module_Gac0P",image_title_title_text:"index-module_g3fbz",image_title_title_text_android:"index-module_eRtk8",image_title_title_sub_text:"index-module_NXAwN",card_contain_padding:"index-module__7Ajy",card_layout:"index-module_e5jDi",card_layout_margin:"index-module_h4hQk"},nn=!0,on=nn,rn=n(3300),an={custom:"index-module_e16TS",custom_content:"index-module_XIjX_",custom_content_width:"index-module_ADv6x",custom_lightspot:"index-module_xg7Ko",custom_lightspot_icon:"index-module_DXmQ8",custom_lightspot_txt:"index-module_ukD9T",card_title_image_prefix:"index-module_AMhWg",card_title_image_prefix_android:"index-module_Y63kT",card_title_image_prefix_ios:"index-module_vNm2B"},sn=function(e,t){if("object"===(0,b.Z)(e)){var n={ubtKeyName:e.key,data:e.params};t["data-expose"]=n}},ln=function(e){return"object"===(0,b.Z)(e)?"autoExpose":""},cn=["testID","style","children","className"],un=s.forwardRef((function(e,t){var n=e.testID,i=e.style,a=e.children,l=e.className,c=(0,u.Z)(e,cn),p=ln(n);sn(n,c);var h=(0,s.useState)("".concat(Date.now(),"_").concat(Math.random().toString().substr(2,6))),m=(0,r.Z)(h,1),_=m[0];return(0,f.jsx)(d.En,(0,o.Z)((0,o.Z)({className:"".concat(p," ").concat(l),ref:t,style:i,id:_},c),{},{children:a}))})),dn=un,pn={custom:"index-module_uFs68",custom_box:"index-module_vM_PY",custom_left:"index-module_RVqal",custom_left_box:"index-module_Ym7ko",custom_left_padding:"index-module_QJRRB",custom_left_text:"index-module_la47a",custom_left_des:"index-module_VgUxY",custom_left_del:"index-module_xTJ2t",custom_left_img:"index-module_Z6ecf",custom_left_icon:"index-module_OCk6d",custom_left_reduce:"index-module_jZA3S",custom_right:"index-module_F9f_n",custom_right_price:"index-module_vAIv3",custom_right_btn:"index-module_AZpn_",custom_right_btn_text:"index-module_cIyCl",custom_bold:"index-module_UrPmd"};function fn(e){var t=e.priceInfo,n=void 0===t?{}:t,i=e.priceBottomTag,r=void 0===i?{}:i,s=e.onButtonClick,l=e.button,c=void 0===l?{}:l,u=n.deletePrice,p=n.price,h=void 0===p?{}:p,m=n.zero,_=n.suffix,v=!(null===r||void 0===r||!r.text),g={color:"#ffffff",fontSize:14,lineHeight:"21px",fontFamily:"20TH_bold"};return(0,f.jsx)(a.View,{className:pn.custom,children:(0,f.jsxs)(a.View,{className:pn.custom_box,children:[v?(0,f.jsxs)(a.View,{className:pn.custom_left,children:[(0,f.jsxs)(a.View,{className:pn.custom_left_box,children:[(0,f.jsx)(a.Text,{className:pn.custom_left_des,children:"\u5355\u4e70\u4ef7"}),(0,f.jsx)(a.View,{className:pn.custom_left_del,children:(0,f.jsx)(ie,{deletePrice:u,deletePriceStyle:{color:"#afcbff",fontSize:11,textDecorationLine:"line-through",textDecorationColor:"#afcbff"}})})]}),(0,f.jsx)(a.View,{className:pn.custom_left_img,children:(0,f.jsx)(a.Image,{className:pn.custom_left_icon,src:"https://dimg04.c-ctrip.com/images/1o52q12000b0317rpAC4B.png.webp"})}),(0,f.jsx)(a.Text,{className:pn.custom_left_reduce,children:"\u7701"}),(0,f.jsx)(a.Text,{className:(0,d.AK)(pn.custom_left_reduce,pn.custom_bold),children:null===r||void 0===r?void 0:r.value}),(0,f.jsx)(a.Text,{className:pn.custom_left_reduce,children:"\u5143"})]}):(0,f.jsx)(a.View,{className:pn.custom_left_padding,children:(0,f.jsx)(a.Text,{className:pn.custom_left_text,children:"\u201c\u5957\u9910\u6bd4\u5355\u4e70\u66f4\u5212\u7b97\u54e6\uff5e\u201d"})}),(0,f.jsxs)(a.View,{className:pn.custom_right,children:[(0,f.jsx)(a.Text,{className:pn.custom_right_price,children:"\u5957\u9910\u4ef7"}),(0,f.jsx)(ie,{price:h,suffix:_,zero:m,priceStyle:g,currencyStyle:(0,o.Z)((0,o.Z)({},g),{},{lineHeight:"17px"}),zeroStyle:{color:"#ffffff",fontSize:14,fontWeight:"bold"},suffixStyle:{color:"#ffffff",fontSize:13,fontWeight:"bold"}}),(0,f.jsx)(dn,{className:pn.custom_right_btn,onClick:function(e){e.stopPropagation(),s()},activeOpacity:1,children:(0,f.jsx)(a.Text,{className:pn.custom_right_btn_text,children:"\u9884\u8ba2"==(null===c||void 0===c?void 0:c.text)&&d.ua.isMini()?"\u8d2d\u7968":null===c||void 0===c?void 0:c.text})})]})]})})}var hn=function(e){var t=e.metricData,n=e.url,i=e.title,r=e.isGradientBackground,a=e.peopleLayerParams,s=e.index,l=e.productType,c=e.imUrl,u=e.onPeopleClick,p=e.onSkuClick,f=e.anchorId,h=e.sideBarChoosedIndex,m=e.innerTabChoosedIndex,_=e.shelfMetricData,v=e.targetPageRef,g=e.button,y=(0,It.ji)()||{},x=y.tabsMetricInfo,b=void 0===x?"":x,k=(null===b||void 0===b?void 0:b[null!==f&&void 0!==f?f:0])||{},w=k.extGsId,I=k.tabname,Z="ext-gsId=".concat(w,"&ext-gsName=").concat(I),T=function(){if(n){var e="",t=(null===g||void 0===g?void 0:g.bookingUrl)||n||"";return null!==g&&void 0!==g&&g.isShowSku&&(e+="".concat("&"===t[t.length-1]?"":"&")+"anchor=sku"),t+=e,t+="".concat("&"===t[t.length-1]?"":"&")+Z,t}},S=T(),C={suitPeople:(0,wt.MR)("\u4eba\u7fa4\u8bf4\u660e-".concat(null===i||void 0===i?void 0:i.text,"(").concat(null!==t&&void 0!==t&&t.resourceid?null===t||void 0===t?void 0:t.resourceid:"",")")),orderBtnDevtrace:(0,wt.xn)("".concat(null===g||void 0===g?void 0:g.text,"-").concat(null===i||void 0===i?void 0:i.text,"(").concat(null!==t&&void 0!==t&&t.resourceid?null===t||void 0===t?void 0:t.resourceid:"",")"))},P=(0,o.Z)((0,o.Z)({},t),{},{index:s,pos:h,innerseq:"".concat(m,"-").concat(s),producttype:l,groupid:null===_||void 0===_?void 0:_.groupid,anchorId:f,supertabname:r?null===_||void 0===_?void 0:_.supertabname:"",poiactivityname:r?null===_||void 0===_?void 0:_.poiactivityname:""}),N={card:ht.ZP.cardExposureFn(P),buyTips:ht.cw.CardTipExposureFn(P),buyNote:ht.cw.CardBuyNoticeContentExposureFn(P),promotion:ht.cw.CardPromotionIconExposureFn(P),people:ht.cw.CardPeopleExposureFn(P),video:ht.cw.VideoCoverExposureFn(P)},D=function(e){e.stopPropagation();var t=ht.cw.CardPeopleClickFn(P);d.uM.logTrace(t.key,t.params||{}),j(),(0,kt.Vg)(C.suitPeople),a&&u&&u(a)},j=function(){var e=ht.ZP.cardClickFn(P);d.uM.logTrace(e.key,(0,o.Z)((0,o.Z)({},e.params),{},{targetPageRef:v})||{})},R=function(e,t){var i;if(null===t||void 0===t||null===(i=t.stopPropagation)||void 0===i||i.call(t),j(),"fromButton"==e){var o=ht.cw.CardBtnClickFn(P);d.uM.logTrace(o.key,o.params||{}),(0,kt.Vg)(C.orderBtnDevtrace)}else if("showTicketDetail"==e){var r=ht.cw.TicketCardContentClickFn(P);d.uM.logTrace(r.key,r.params||{})}else if("fromBuyNote"==e){var a=ht.cw.CardBuyNoticeContentClickFn(P);d.uM.logTrace(a.key,a.params||{})}else{var s=ht.cw.CardOtherAreaClickFn(P);d.uM.logTrace(s.key,s.params||{})}null!==g&&void 0!==g&&g.toastText?mt.ZP.show(null===g||void 0===g?void 0:g.toastText,3e3):c&&"fromButton"===e?d.Nd.navigateTo({url:c}):n&&L(e)},L=function(e){var t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=n;"fromButton"==e?r=o||S:r+="".concat("&"===(null===(t=r)||void 0===t?void 0:t[(null===(i=r)||void 0===i?void 0:i.length)-1])?"":"&")+Z;if("fromButton"===e&&null!==g&&void 0!==g&&g.bookingUrl)Zt(r),r&&d.Nd.navigateTo({url:r});else{if((d.ua.isH5()||d.ua.isMini())&&null!==g&&void 0!==g&&g.isShowSku&&!g.showTicketDetailPage){var a=g.skuParams||{},s=a.date,l=a.token,c=a.resourceId,u=a.spotid,f=a.type,h=a.ctm_ref,m=a.traceid,_=a.label,v=void 0===_?"":_,y=a.hasDiscountInfo,x=a.extParams,b={date:s,token:decodeURIComponent(l),optid:[c],usePage:"detail",aggregation:!0,spotid:u,traceid:m,label:v,hasDiscountInfo:y,extParams:x};(0,jt.lz)()&&(b["isscan"]=!0,b["isScanShelf"]=!0),h&&(b["ctm_ref"]=h);var k={resourcetype:f,showPoplayerTime:Date.now()};return void(null===p||void 0===p||p({request:b,otherParams:k}))}null!==g&&void 0!==g&&g.isShowSku?Tt(r):St(r),r&&d.Nd.navigateTo({url:r})}};return{metricExposure:N,onCardClick:R,handlePeopleClick:D}},mn=d.ua.isIOS(),_n=d.ua.isAndroid(),vn=9,gn=(0,s.memo)((function(e){var t=e.lightspot,n=e.button,i=void 0===n?{}:n,r=e.ressClicklog,s=e.priceInfo,l=void 0===s?{}:s,c=e.priceBottomTag,u=e.title,p=e.backgroundImageUrl,h=e.descList,m=e.subtitle,_=e.peopleLayerParams,v=e.shelfIndex,g=e.index,y=hn(e),x=y.metricExposure,b=y.onCardClick,k=y.handlePeopleClick;return(0,f.jsx)(d.En,{className:an.custom,onClick:function(){return b()},log:r,testID:x.card,id:"sight_detail_card_".concat(v,"_").concat(g),children:(0,f.jsxs)(d.Zy,{mode:"scaleToFill",className:an.custom_content,src:p,children:[(0,f.jsxs)(a.View,{className:an.custom_content_width,children:[null!==t&&void 0!==t&&t.text?(0,f.jsxs)(a.View,{className:an.custom_lightspot,children:[(0,f.jsx)(d.mO,{fontFamily:"crn_font_ttd_mini",className:an.custom_lightspot_icon,children:"\ue037"}),(0,f.jsx)(a.Text,{className:an.custom_lightspot_txt,children:t.text})]}):null,(0,f.jsx)(T,{style:{color:"#fff"},wrapperClassName:an.card_title_wrapper,numberOfLines:3,prefixWidth:u.prefix?vn:0,prefix:u.prefix?(0,f.jsx)(a.Image,{className:(0,d.AK)(an.card_title_image_prefix,mn&&an.card_title_image_prefix_ios,_n&&an.card_title_image_prefix_android),src:u.prefix,mode:"aspectFit"}):null,children:u.text}),null!==h&&void 0!==h&&h.descList.length?(0,f.jsx)(Be,(0,o.Z)((0,o.Z)({},h),{},{isOffline:!0})):null]}),(0,f.jsx)(fn,{priceInfo:l,priceBottomTag:c,onButtonClick:function(){return b("fromButton")},button:i}),(0,f.jsx)(a.View,{onClick:k,children:(0,f.jsx)(Re,{subtitle:m,peopleLayerParams:_,metricExposure:x,isCustomCard:!0})})]})})}));gn.displayName="CardCustom";var yn=gn,xn={card_layout:"index-module_tCcFj",card_title:"index-module_N2peu",card_row:"index-module_g8Jmm",card_row_2:"index-module_cEQB6",card_text_free:"index-module_FKeOf",card_text_free_2:"index-module_cSKkm",card_text_subTitle:"index-module_x9Z7I",card_text_detail:"index-module_zZ5e7",card_order_way:"index-module_Uf2Ky",card_book_button:"index-module_RJtra",card_book_button_text:"index-module_bOfVY",card_text_subTitle_2:"index-module_RWFFT",card_buy_info:"index-module_lboSs",card_right_area:"index-module_SympC",flexGrow:"index-module_gsKZW"},bn=function(e){var t=e.title,n=e.subTitle,i=e.feeText,o=e.styleType,r=e.buttonText,a=e.appointPopInfos,s=e.metricData,l=e.poplayerRef,c=e.showPop,u=a.details,p=a.recommendInfo,f=a.popTitle,h=function(){var e;null===l||void 0===l||null===(e=l.current)||void 0===e||e.hide()},m=function(){var e=ht.X4.appointCardClickFn(s);d.hS.logTrace(e.key,e.params),c&&c(l,u,p,h,f)};return{showDetail:m,closeDetail:h,title:t,subTitle:n,feeText:i,styleType:o,buttonText:r,details:u,recommendInfo:p,popTitle:f,metricData:s}},kn=n(45023),wn=n(2434),In={appointment_info_wrapper:"index-module_JMFxE",appointment_info_card:"index-module_I9o1L",appointment_info_card_title:"index-module_QODE1",appointment_info_card_title_text:"index-module_ToKEa",appointment_info_card_content:"index-module_c11EK",appointment_info_card_content_empty:"index-module_qRKNw",appointment_info_card_desc:"index-module_hdCRQ",appointment_info_card_desc_text:"index-module_nXs2Z",appointment_info_card_button:"index-module_zuQlB",appointment_info_card_button_wrapper:"index-module_k9I_E",appointment_info_card_button_text:"index-module_ncsGe",appointment_info_tag:"index-module_JWG5z",appointment_info_tag_wrapper:"index-module_Z3yj6",appointment_info_tag_text:"index-module_u1xvS",appointment_info_separator:"index-module_zSEoF",appointment_info_separator_line:"index-module_QYwWm",appointment_info_separator_text:"index-module_ziEoO",appointment_info_recommend_wrapper:"index-module_DIlV7",appointment_info_recommend_background_image:"index-module_gJf5q",appointment_info_recommend_image:"index-module_yD9aq",appointment_info_recommend_image_wrapper:"index-module_uv95Q",appointment_info_recommend_content:"index-module_hEzgt",appointment_info_recommend_desc:"index-module_MQElN",appointment_info_recommend_desc_text:"index-module_GrtD0",appointment_info_recommend_desc_placeholder:"index-module_T7i8k",appointment_info_recommend_detail_text:"index-module_lr5Vo",appointment_info_recommend_button:"index-module_EKtQj",appointment_info_recommend_button_wrapper:"index-module_i3zDo",appointment_info_recommend_button_text:"index-module_KKXX7",appointment_info_bottom:"index-module_AQSma",appointment_info_info_pre_load_image:"index-module__fogg",qrcode_poplayer:"index-module_J5Ook",qrcode_poplayer_title:"index-module_Ux41h",qrcode_poplayer_title_text:"index-module_idUEO",qrcode_poplayer_icon:"index-module_ILSL4",qrcode_poplayer_icon_wrapper:"index-module_R1rf9"},Zn=n(21342),Tn=(0,kn.Z)((0,kn.Z)({},wn.T.jumpUrl,"\u8df3\u8f6c\u94fe\u63a5"),wn.T.qrcode,"\u67e5\u770b\u4e8c\u7ef4\u7801"),Sn="https://dimg04.c-ctrip.com/images/1o52h12000cksa66y3E8D.png",Cn="https://dimg04.c-ctrip.com/images/1o55k12000cks9yvh3B28.png",Pn=d.hj.isIPhoneX()?24:0,Nn=function(e){return(0,f.jsx)(d.cn,{colors:["rgb(216, 216, 216)","rgb(240, 243, 247)"],start:{x:Number("left"===e),y:0},end:{x:Number("right"===e),y:0},className:(0,d.AK)(In.appointment_info_separator_line)})},Dn=function(){return(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_recommend_desc_placeholder),children:"\u7a7a"})},jn=function(e){return(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_recommend_desc_text),children:e})},Rn=function(e){var t=e.popTitle,o=e.details,r=void 0===o?[]:o,c=e.recommendInfo,u=e.goToRecommendation,p=e.style,h=void 0===p?{}:p,m=c||{},_=m.desc,v=void 0===_?"":_,g=m.details,y=void 0===g?[]:g,x=m.metricData,b=v.split("{0}"),k=(0,s.useRef)(null),w=function(e,t){var o,r=ht.X4.appointPopCardClickFn(e.metricData);switch(d.hS.logTrace(r.key,r.params),e.detailType){case 1:e.detail&&(0,_t.T8)({url:e.detail});break;case 2:var s=(0,d.vw)((function(){return Promise.resolve().then((function(){return(0,i.Z)(n(98130))}))}));null===k||void 0===k||null===(o=k.current)||void 0===o||o.show({component:(0,f.jsxs)(a.View,{className:(0,d.AK)(In.qrcode_poplayer),children:[(0,f.jsxs)(a.View,{className:(0,d.AK)(In.qrcode_poplayer_title),children:[(0,f.jsx)(d.En,{className:(0,d.AK)(In.qrcode_poplayer_icon_wrapper),onClick:function(){var e;null===(e=k.current)||void 0===e||e.hide()},children:(0,f.jsx)(ge.m,{type:"back",className:(0,d.AK)(In.qrcode_poplayer_icon)})}),(0,f.jsx)(a.Text,{className:(0,d.AK)(In.qrcode_poplayer_title_text),children:"\u67e5\u770b\u4e8c\u7ef4\u7801"})]}),(0,f.jsx)(s,{detailUrl:e.detail,metricData:e.metricData,qrLoadSuccess:t})]}),props:{style:{height:.8*l["default"].getSystemInfoSync().windowHeight-Pn}}});break}},I=function(){var e=ht.X4.appointPopRecomClickFn(x);d.hS.logTrace(e.key,e.params),u&&u()};return(0,f.jsxs)(d.En,{testID:ht.X4.appointPopExposureFn(x),children:[(0,f.jsxs)(a.ScrollView,{className:(0,d.AK)(In.appointment_info_wrapper),style:h,children:[r.map((function(e,n){var i=!0,o=e.detailType===wn.T.text||!!e.supplement;return(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_card),children:[(0,f.jsx)(a.View,{className:(0,d.AK)(In.appointment_info_tag_wrapper),children:(0,f.jsx)(a.View,{className:(0,d.AK)(In.appointment_info_tag),children:(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_tag_text),children:"".concat(t).concat(r.length>1?n+1:"")})})}),(0,f.jsx)(a.View,{className:(0,d.AK)(In.appointment_info_card_title),children:(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_card_title_text),numberOfLines:1,children:e.channel})}),(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_card_content,o?"":In.appointment_info_card_content_empty),children:[(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_card_desc),children:[e.detailType===wn.T.text?(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_card_desc_text),onLongPress:function(){l["default"].setClipboardData({data:e.detail})},children:e.detail}):null,e.supplement?(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_card_desc_text),onLongPress:function(){l["default"].setClipboardData({data:e.supplement})},children:e.supplement}):null]}),[wn.T.jumpUrl,wn.T.qrcode].includes(e.detailType)?(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_card_button_wrapper),children:[(0,f.jsx)(d.En,{className:(0,d.AK)(In.appointment_info_card_button),onClick:function(){w(e,i)},testID:ht.X4.appointPopCardExposureFn(e.metricData),children:(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_card_button_text),children:Tn[e.detailType]})}),wn.T.qrcode==e.detailType?(0,f.jsx)(a.View,{className:In.appointment_info_pre_load_image,children:(0,f.jsx)(d.Y,{src:e.detail,style:{height:1,width:1},onError:function(){i=!1}})}):null]}):null]})]})})),y.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_separator),children:[Nn("left"),(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_separator_text),children:"\u66f4\u591a\u63a8\u8350"}),Nn("right")]}),(0,f.jsxs)(d.En,{className:(0,d.AK)(In.appointment_info_recommend_wrapper),testID:ht.X4.appointPopRecomExposureFn(x),children:[(0,f.jsx)(a.Image,{className:(0,d.AK)(In.appointment_info_recommend_background_image),src:Cn,mode:"scaleToFill"}),(0,f.jsx)(a.View,{className:(0,d.AK)(In.appointment_info_recommend_image_wrapper),children:(0,f.jsx)(a.Image,{className:(0,d.AK)(In.appointment_info_recommend_image),src:Sn,mode:"scaleToFill"})}),(0,f.jsxs)(a.View,{className:(0,d.AK)(In.appointment_info_recommend_content),children:[(0,f.jsxs)(a.Text,{className:(0,d.AK)(In.appointment_info_recommend_desc),children:[jn(b[0]),Dn(),(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_recommend_detail_text),children:y.join("\u3001")}),Dn(),jn(b[1])]}),(0,f.jsx)(a.View,{className:(0,d.AK)(In.appointment_info_recommend_button_wrapper),children:(0,f.jsx)(d.En,{className:(0,d.AK)(In.appointment_info_recommend_button),onClick:function(){I()},children:(0,f.jsx)(a.Text,{className:(0,d.AK)(In.appointment_info_recommend_button_text),children:"\u53bb\u770b\u770b"})})})]})]})]}):null]}),(0,f.jsx)(d.iY.Bottom,{className:(0,d.AK)(In.appointment_info_bottom)}),(0,f.jsx)(Zn.Z,{ref:k})]})},Ln=(0,s.memo)(Rn),En=d.hj.isIPhoneX()?24:0,Vn=function(e,t,n,i,o){var r;null===e||void 0===e||null===(r=e.current)||void 0===r||r.show({component:(0,f.jsx)(Ln,{style:{maxHeight:.8*l["default"].getSystemInfoSync().windowHeight-En,minHeight:.6*l["default"].getSystemInfoSync().windowHeight-En},details:t,recommendInfo:n,goToRecommendation:i,popTitle:o}),props:{style:{maxHeight:.8*l["default"].getSystemInfoSync().windowHeight-En,minHeight:.6*l["default"].getSystemInfoSync().windowHeight-En},titleStyle:{wrapperStyle:{backgroundColor:"#F0F3F7"}},title:o}})},An=function(e){var t=bn((0,o.Z)((0,o.Z)({},e),{},{showPop:Vn})),n=t.showDetail,i=t.title,r=t.subTitle,a=t.feeText,s=t.styleType,l=t.buttonText,c=t.metricData;return(0,f.jsx)(d.En,{testID:ht.X4.appointCardExposureFn(c),children:1==s?(0,f.jsxs)(Xe,{className:xn.card_layout,children:[(0,f.jsx)(O,{size:"medium",type:"black",className:xn.card_title,children:i}),(0,f.jsxs)(_,{className:xn.card_row,children:[(0,f.jsxs)(x,{className:xn.flexGrow,children:[(0,f.jsx)(O,{size:"medium",type:"black",className:xn.card_text_subTitle,children:r}),l?(0,f.jsxs)(_,{className:xn.card_order_way,onClick:function(){n()},children:[(0,f.jsx)(O,{size:"medium",type:"orange_light",className:xn.card_text_detail,children:"\u67e5\u770b".concat(l,"\u65b9\u5f0f")}),(0,f.jsx)(ge.m,{type:"forward",style:{fontSize:12,textAlign:"center",color:"#FF7700"}})]}):null]}),(0,f.jsx)(_,{className:xn.card_right_area,children:(0,f.jsx)(O,{size:"medium",type:"orange",className:xn.card_text_free,children:a})})]})]}):(0,f.jsx)(Xe,{className:xn.card_layout,children:(0,f.jsxs)(_,{className:(0,d.AK)(xn.card_row,xn.card_row_2),children:[(0,f.jsxs)(x,{className:xn.flexGrow,children:[(0,f.jsx)(O,{size:"medium",type:"black",className:xn.card_title,children:i}),(0,f.jsx)(O,{size:"medium",type:"black",className:xn.card_text_subTitle_2,children:r})]}),(0,f.jsxs)(_,{className:xn.card_buy_info,children:[(0,f.jsx)(O,{size:"medium",type:"orange",className:(0,d.AK)(xn.card_text_free,xn.card_text_free_2),children:a}),l?(0,f.jsx)(Y,{colors:["rgb(255,153,0)","rgb(255,102,0)"],linearGradientClassName:xn.card_book_button,className:xn.card_book_button_text,onClick:function(){n()},children:l}):null]})]})})})},On=(0,s.memo)((function(e){var t,n=(0,s.useState)(!0),i=(0,r.Z)(n,2),l=i[0],c=i[1],u=(0,Ee.TC)(),p=e.visibleNumber,h=e.viewMore,m=void 0===h?{}:h,_=e.cardList,v=void 0===_?[]:_,g=e.onPriceClick,y=e.onNaquhuaClick,x=e.onPeopleClick,b=e.onTipClick,k=e.onSkuClick,w=e.onBuyNoteClick,I=(e.isPoiRecommed,e.message),Z=e.anchorId,T=e.shelfMetricData,S=e.isXToOne,C=e.handleOpenAndClose,P=e.activityDetail,N=e.changeFilter,D=e.devtraceTabInfo,j=e.sideBarChoosedIndex,R=e.innerTabChoosedIndex,L=e.targetPageRef,E=e.frontSecKillRefresh,V=e.updateLayout,A=e.shelfIndex,O=e.cardsType,F=e.hasAppointment,M=e.poplayerRef,B=m.text,U=P||{},G=U.backgroundImageUrl,H=(U.activityName,U.salePoint),q=U.startTime,K=U.endTime,W=(U.activityId,null===v||void 0===v?void 0:v.findIndex((function(e){return!!e.isNoSale}))),X=null===(t=v.find((function(e){return!!e.backgroundImageUrl})))||void 0===t?void 0:t.backgroundImageUrl;X&&S&&(G=X);var Y=function(e){return 1===e?{color:z.Z.isBaiduMap()?"#FF8000":"#FF7701"}:(0,Pe.N)(u,{key:"color",value:"black"})},Q=O===rn.cM.custom?yn:F?An:zt;return(0,f.jsxs)(a.View,{style:{display:"flex",flexDirection:"column",position:"relative"},children:[G?(0,f.jsx)(Fn,{url:G,startTime:q,endTime:K,salePoint:H,hasBorder:!!X}):null,v.length?v.map((function(e,t){var n,i,r,s,c,h=!(null===(n=e.imageInfo)||void 0===n||!n.imageUrl);return t<p||!l||null!==(i=v[p])&&void 0!==i&&i.isNoSale?(0,f.jsxs)(a.View,{className:(0,d.AK)(t<p||!l||null!==(r=v[p])&&void 0!==r&&r.isNoSale?"":tn.card_contain_none,S?tn.card_contain_margin:h||0!=t?"":tn.card_contain_padding),children:[(0,f.jsx)(Q,(0,o.Z)((0,o.Z)({},e),{},{className:(0,d.AK)(tn.card_layout,S?tn.card_layout_margin:""),onPriceClick:g,onNaquhuaClick:y,onPeopleClick:x,onTipClick:b,productType:null!==(s=null!==(c=e.productType)&&void 0!==c?c:null===T||void 0===T?void 0:T.productType)&&void 0!==s?s:"",onSkuClick:k,onBuyNoteClick:w,refreshShelf:function(){N&&N({isBreathe:!1,isCoupon:!0})},frontSecKillRefresh:E,isGradientBackground:S&&!G,anchorId:Z,tipDevTraceData:(0,wt.jM)("".concat((null===D||void 0===D?void 0:D.value)||"","(").concat((null===D||void 0===D?void 0:D.key)||"",")")),sideBarChoosedIndex:j,innerTabChoosedIndex:R,index:t+1,shelfMetricData:T,targetPageRef:L,shelfIndex:A,poplayerRef:M})),!S&&(-1!=W&&p>=W&&t<v.length-1||l&&t<p-1||!l&&t<v.length-1)?(0,f.jsx)(a.View,{className:(0,d.AK)(tn.line),style:(0,Pe.N)(u,{key:"backgroundColor",value:"gray_line"})}):null]},t):null})):(0,f.jsx)(a.View,{className:tn.message,children:null===I||void 0===I?void 0:I.split("\uff0c").map((function(e,t){return(0,f.jsxs)(a.Text,{className:(0,d.AK)(tn.messageItem,on?tn.messageItem_abtest:""),style:Y(t),children:[e,t<2?"\uff0c":""]})}))}),!!B&&v.length>p&&!v[p].isNoSale&&(0,f.jsx)(en,{viewMore:m,updateLayout:V,isShowMore:l,handleClick:function(e){c(e)},metricData:T,anchorId:Z,isXToOne:S&&!G,handleOpenAndClose:C,shelfIndex:A})]})}));On.displayName="ShelfCardList";var Fn=function(e){var t=e.url,n=e.salePoint,i=e.startTime,o=e.endTime,r=e.hasBorder;return(0,f.jsx)(a.View,{className:(0,d.AK)(tn.image_title_background,r?tn.image_title_background_short:""),children:(0,f.jsxs)(a.View,{className:tn.image_title_main,children:[(0,f.jsx)(a.Image,{className:(0,d.AK)(tn.image_title_image,r?tn.image_title_image_border:""),src:t,mode:r?"widthFix":"aspectFill"}),(0,f.jsx)(d.cn,{start:{x:0,y:0},end:{x:0,y:1},colors:["rgba(255,255,255,0)","rgba(255,255,255,1)"],className:(0,d.AK)(tn.image_title_gradient,r?tn.image_title_gradient_long:"")}),n&&i&&o?(0,f.jsxs)(a.View,{className:tn.image_title_title,children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(tn.image_title_title_text,d.hj.isAndroid()?tn.image_title_title_text_android:""),numberOfLines:1,children:n}),(0,f.jsx)(a.View,{style:{display:"flex"},children:(0,f.jsxs)(a.Text,{className:tn.image_title_title_sub_text,children:["\u6d3b\u52a8\u65f6\u95f4\uff1a",(0,he.ie)(new Date(i.split(" ")[0]).getTime(),"yy\u5e74MM\u6708dd\u65e5"),"-",(0,he.ie)(new Date(o.split(" ")[0]).getTime(),"yy\u5e74MM\u6708dd\u65e5")]})})]}):null]})})},Mn={shelf_sub_tab_info:"index-module_UpZee",shelf_sub_tab_info_x:"index-module_ucQxd",shelf_sub_item_info:"index-module_SJ9is",shelf_sub_item_info_active:"index-module_CW0sM",shelf_sub_item_info_text:"index-module_fqN3l",shelf_sub_item_info_text_active:"index-module_tpxeR"},Bn=n(96417),Un=(0,s.memo)((function(e){var t,n=e.keys,i=e.changeActiveTab,l=e.activeTab,c=e.shelfTabInfo,u=e.metricData,p=(0,s.useState)(l),h=(0,r.Z)(p,2),m=h[0],_=h[1],v=u.isXToOne,g=void 0!==v&&v,y=u.superTabNameArr,x=void 0===y?[]:y,b=u.moduleNameArr,k=void 0===b?[]:b,w=u.poiactivitynameArr,I=void 0===w?[]:w,Z={key:Object.keys(c||{})[l],value:Object.values(c||{})[l]},T=(0,wt.IX)("".concat(null!==(t=null===u||void 0===u?void 0:u.groupname)&&void 0!==t?t:"\u672a\u77e5","-").concat((null===Z||void 0===Z?void 0:Z.value)||"","(").concat((null===Z||void 0===Z?void 0:Z.key)||"",")")),S=(0,Ee.TC)(),C=function(e,t,n){var i,r=ht.cw.mergeShelfExposureFn((0,o.Z)((0,o.Z)({},u),{},{tabseq:t+1,module_name:(null===k||void 0===k?void 0:k.length)>0&&k[t]||"",supertabname:(null===x||void 0===x?void 0:x.length)>0&&x[t]||"",poiactivityname:(null===I||void 0===I?void 0:I.length)>0&&I[t]||""})),a=ht.cw.GroupTabExposureFn((0,o.Z)((0,o.Z)({},u),{},{level1saleunitid:null===u||void 0===u||null===(i=u.level1saleunitidArr)||void 0===i?void 0:i[null!==t&&void 0!==t?t:0],pos:t+1}));return(0,f.jsx)(d.En,{className:(0,d.AK)(Mn.shelf_sub_item_info,t==m?Mn.shelf_sub_item_info_active:""),style:(0,Pe.N)(S,{key:"backgroundColor",value:t==n?"blue_light":"gray_btn"}),testID:g?r:a,children:(0,f.jsx)(d.X_,{className:(0,d.AK)(Mn.shelf_sub_item_info_text,t==m?Mn.shelf_sub_item_info_text_active:""),numberOfLines:"2",style:t===m?{color:"#0066f6"}:(0,Pe.N)(S,{key:"color",value:"black"}),children:c[e]})},t)};return(0,f.jsx)(a.View,{className:g?Mn.shelf_sub_tab_info_x:Mn.shelf_sub_tab_info,style:(0,xe.j4)()?{height:"132px"}:{},children:(0,f.jsx)(Bn.U,{prefixCls:"xtaro-poi-shelf",current:l,data:n,renderItem:C,comStyle:(0,Pe.N)(S,{key:"backgroundColor",value:"white"}),onTabChange:function(e,t){if(_(t),i(t),g){var n=ht.cw.mergeShelfClickFn((0,o.Z)((0,o.Z)({},u),{},{tabseq:t+1,module_name:(null===k||void 0===k?void 0:k.length)>0&&k[t]||"",supertabname:(null===x||void 0===x?void 0:x.length)>0&&x[t]||"",poiactivityname:(null===I||void 0===I?void 0:I.length)>0&&I[t]||""}));d.hS.logTrace(n.key,n.params||{})}else{var r=ht.cw.GroupTabClickFn((0,o.Z)((0,o.Z)({},u),{},{pos:t+1}));d.hS.logTrace(r.key,r.params||{}),(0,kt.Vg)(T)}}})})})),Gn={m_shelf_filtertip:"index-module_U4F_v",m_shelf_filtertip_text:"index-module_brFhJ",m_shelf_filter_clear_text:"index-module_euhDw",m_shelf_filtertip_tickethome:"index-module__iPi2",fitlertip_texts:"index-module_yqF3v",fitlertip_text:"index-module_ari7N",filtertip_btn:"index-module_d48l9",m_shelf_filter_cleartxt:"index-module_R_qn5"},Hn=function(e){var t=e.onClear,n=(0,Ee.TC)();return(0,f.jsxs)(a.View,{className:(0,d.AK)(Gn.m_shelf_filtertip,Gn.m_shelf_filtertip_tickethome),style:(0,Pe.N)(n,{key:"backgroundColor",value:"white"}),children:[(0,f.jsxs)(a.View,{className:(0,d.AK)(Gn.fitlertip_texts),children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(Gn.fitlertip_text),style:(0,Pe.N)(n,{key:"color",value:"black"}),children:"\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u5546\u54c1\u5df2\u88ab\u9690\u85cf"}),(0,f.jsx)(a.Text,{className:(0,d.AK)(Gn.fitlertip_text),style:(0,Pe.N)(n,{key:"color",value:"black"}),children:"\u6e05\u7a7a\u7b5b\u9009\u53ef\u67e5\u770b\u5168\u90e8"})]}),(0,f.jsx)(d.En,{className:(0,d.AK)(Gn.filtertip_btn),onClick:t,children:(0,f.jsx)(a.Text,{className:(0,d.AK)(Gn.m_shelf_filter_cleartxt),style:(0,Pe.N)(n,{key:"color",value:"black"}),children:"\u6e05\u7a7a\u7b5b\u9009"})})]})},zn=n(73564),qn=["price","deletePrice","currency","prefix","suffix","className","style","zero"],Kn=d.hj.isIOS(),Wn=function(e){var t=e.price,n=e.deletePrice,i=e.currency,r=void 0===i?"\xa5":i,s=e.prefix,l=e.suffix,c=void 0===l?"\u8d77":l,p=e.className,h=e.style,m=e.zero,_=(0,u.Z)(e,qn);return(0,f.jsxs)(a.View,(0,o.Z)((0,o.Z)({className:(0,d.AK)("poi_card_price",p),style:h},_),{},{children:[n&&!m?(0,f.jsx)(a.View,(0,o.Z)((0,o.Z)({className:"poi_card_price_delete",style:h},_),{},{children:"".concat(r).concat(n)})):null,(0,f.jsxs)(a.View,(0,o.Z)((0,o.Z)({className:"poi_card_price_current",style:h},_),{},{children:[s&&!m?(0,f.jsx)(a.Text,{className:"poi_card_price_current_prefix",children:s}):null,r&&!m?(0,f.jsx)(a.Text,{className:"poi_card_price_current_currency",children:r}):null,m?(0,f.jsx)(a.Text,{className:(0,d.AK)("poi_card_price_current_zero",Kn?"poi_card_price_current_zero_ios":"poi_card_price_current_zero_android"),children:m}):(0,f.jsx)(a.Text,{className:(0,d.AK)("poi_card_price_current_value",Kn?"poi_card_price_current_value_ios":"poi_card_price_current_value_android"),children:t}),c&&!m?(0,f.jsx)(a.Text,{className:"poi_card_price_current_suffix",children:c}):null]}))]}))},Xn=Wn,Yn=n(63778),Qn=n(78248);function Jn(e){if(null!==e&&void 0!==e&&e.poiId){var t=(0,Yn.Q)(e),n=e||{},i=n.pageId,r=d.GI.getPlatform(),a=d.GI.getDevEnv();return{data:(0,o.Z)((0,o.Z)({},t),{},{pageId:i,currency:"CNY",sceneId:r==d.GI.PLATFORM_TYPE.CRN?a===d.GI.DEV_ENV_TYPE.PROD?40000088:40000084:r==d.GI.PLATFORM_TYPE.Mini?a===d.GI.DEV_ENV_TYPE.PROD?40000093:40000089:0,filters:[{filterSubId:6001,filterValueList:[{type:6001,value:"TICKET"}]},{filterSubId:100001,filterValueList:[{type:100001,value:"100002"}]},{filterSubId:3006,filterValueList:[{type:3008,value:String(e.poiId)||""}]}]})}}}var $n=function(e){var t=e||{},n=t.clientEnv,i=t.layerInfo,o=void 0===i?{}:i,a=t.changeFilter,l=t.request,c=o.layerType,u=o.bannerInfo,d=o.text,p=o.jumpUrl,f=(0,s.useState)(!1),h=(0,r.Z)(f,2),m=h[0],_=h[1],v=(0,s.useState)(!1),g=(0,r.Z)(v,2),y=g[0],x=g[1],b=(0,s.useState)(!1),k=(0,r.Z)(b,2),w=k[0],I=k[1],Z=(0,Yn.H)(l),T=(0,Qn.R)(l),S=Jn(l),C=(0,s.useState)(d),P=(0,r.Z)(C,2),N=P[0],D=P[1],j=(0,s.useCallback)((function(e,t,n){switch(e){case"reduct":_(!0);break;case"cross":I(!0);break;case"air":x(!0),n&&D(n);break;default:t&&_t.ZP.navigateTo({url:t});break}}),[_,x,p,c]);return{bannerClick:j,couponParams:Z,crossParams:T,popCouponParams:S,clientEnv:n,visible:m,setVisible:_,crossVisible:w,setCrossVisible:I,showAirPoplayer:y,setShowAirPoplayer:x,layerType:c,jumpUrl:p,bannerInfo:u,airText:N,changeFilter:a}},ei={hollow_blue:"hollow_blue",hollow_orange:"hollow_orange",hollow_purple:"hollow_purple",hollow_gold:"hollow_gold",hollow_red:"hollow_red",linear_red:"entity_red",orange:"orange_text",black:"black_text",image_tag:"image_tag",image:"image_tag"},ti={common_box:"index-module_MEkbS",common_text:"index-module_pI9DQ",common_text_abtest:"index-module_Ffcyn",hollow_orange_box:"index-module_Do8aA",hollow_orange_box_box_abtest:"index-module_Ymmb9",hollow_orange_text:"index-module_d34bj",hollow_orange_text_abtest:"index-module_shEo7",orange_text:"index-module_ZoTnJ",orange_text_abtest:"index-module_Qt82e",black_text:"index-module_OPuaq",black_text_abtest:"index-module_bx67r",view_container:"index-module_gDPXM",image:"index-module_H7qav",image_abtest:"index-module_LSAMB",extend_box:"index-module_q7MIK",common_text_font:"index-module_vEO7K",common_text_font_abtest:"index-module_RNmR7"},ni=function(e){var t=e.content,n=e.textName,i=void 0===n?"":n,o=e.textStyle,r=void 0===o?{}:o,s=e.tabBoxName,l=void 0===s?"":s,c=e.tabBoxStyle,u=void 0===c?{}:c,p=e.bigFont;return(0,f.jsx)(a.View,{className:(0,d.AK)(ti.common_box,ti["".concat(l,"_box")]),style:u,children:(0,f.jsx)(d.X_,{className:(0,d.AK)(ti.common_text,ti[i],p?ti.common_text_font:""),style:r,numberOfLines:1,children:t})})},ii={hollow_orange_box:"index-module_mbirP",hollow_orange_text:"index-module_H8q3f",orange_text:"index-module_Wd8La",view_container:"index-module_BpTNN",image:"index-module_PuLi1",entity_red_text:"index-module_uqacc",entity_red_box:"index-module_qQs1k",image_abtest:"index-module_EslMS",ft22_lg_box_abtest:"index-module_cdWoT",ft20_abtest:"index-module_WCw95"},oi=function(e){var t=e.labelList,n=void 0===t?[]:t,i=e.bigFont,o=void 0!==i&&i;return n.length?(0,f.jsx)(a.View,{className:ii.view_container,children:n.map((function(e,t){var n=ei[e.type]||"text";return n.includes("hollow")?(0,f.jsx)(ni,{content:e.content,tabBoxName:n,textName:"".concat(n,"_text")}):n.includes("image")?(0,f.jsx)(a.Image,{src:e.content,className:(0,d.AK)(ii.image)}):n.includes("text")?(0,f.jsx)(ni,{content:e.content,textName:n,tabBoxName:"extend",bigFont:o}):n.includes("entity")?(0,f.jsx)(d.cn,{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 119, 0)","rgb(255, 51, 0)"],className:(0,d.AK)(ii["".concat(n,"_box")]),children:(0,f.jsx)(a.Text,{className:(0,d.AK)(ii["".concat(n,"_text")]),children:e.content})}):void 0}))}):null},ri={icon_view:"index-module_i2NWv",coupon_wrapper:"index-module_Eu88O",coupon_center:"index-module_YfgO3",coupon_right:"index-module_tftwV",coupon_right_text:"index-module_ijYil",coupon_right_text_abtest:"index-module_l3TaT",coupon_right_text_goto:"index-module_JkxNd",coupon_right_icon:"index-module_LOvP5",coupon_right_icon_abtest:"index-module_R1kik",coupon_right_goto:"index-module_YhWoA",image_promotion:"index-module_wFmHg",image_promotion_abtest:"index-module_YGuQc",ft22_h32:"index-module_TuqhV",coupon_title:"index-module_JeW4r",coupon_title_text:"index-module_IpL4m",coupon_title_text_abtest:"index-module_hHeCH"},ai=function(e){var t=e.buttonType,n=e.tags,i=e.buttonText,o=e.imgUrl,r=e.title,s=e.layerInfo,l=void 0===s?{}:s,c="cross"!=l.layerType;return(0,f.jsxs)(d.cn,{start:{x:0,y:0},end:{x:1,y:0},locations:[0,1],colors:["rgb(255, 244, 235)","rgba(255, 248, 242, 0)"],className:ri.coupon_wrapper,children:[!!o&&c&&(0,f.jsx)(a.Image,{src:o,className:(0,d.AK)(ri.image_promotion)}),c&&r&&(0,f.jsx)(a.View,{className:ri.coupon_title,children:(0,f.jsx)(a.Text,{className:(0,d.AK)(ri.coupon_title_text),children:r})}),(0,f.jsx)(a.View,{className:ri.coupon_center,children:(0,f.jsx)(oi,{labelList:n})}),"go"!=t?(0,f.jsxs)(a.View,{className:ri.coupon_right,children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(ri.coupon_right_text,Ne?ri.coupon_right_text_abtest:""),children:i}),(0,f.jsx)(ge.m,{type:"forward",size:26,className:(0,d.AK)(ri.coupon_right_icon)})]}):(0,f.jsx)(a.View,{className:(0,d.AK)(ri.coupon_right,ri.coupon_right_goto),children:(0,f.jsx)(a.Text,{className:(0,d.AK)(ri.coupon_right_text_goto),children:i})})]})},si={sec_poplayer_header:"index-module_YO7Bg",sec_poplayer_close_btn:"index-module_te0I7",sec_poplayer_title:"index-module_i5_Dj",air_poplayer:"index-module_ugXbv",air_poplayer_desc:"index-module_rrCIa"},li=function(e){var t=e.text;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(a.View,{className:si.air_poplayer,children:(0,f.jsx)(a.Text,{className:si.air_poplayer_desc,children:t})})})},ci={coupon_wrapper:"index-module_hWq7n",coupon_right:"index-module_gBnzL",coupon_right_icon:"index-module_yRBc3",image_promotion:"index-module_zTmBV",image_promotion_abtest:"index-module_bUcnF",coupon_center:"index-module_Wnd2M",coupon_center_text:"index-module_RQMbc",title:"index-module_r3jxn",coupon_title_text:"index-module_ycH6m",coupon_title_text_abtest:"index-module_NqFGU"},ui=function(e){var t=e.imgUrl,n=e.tags,i=void 0===n?[]:n,o=e.title,r=e.layerInfo,s=e.itemClick,l=r.layerType,c=r.jumpUrl,u=r.text;return(0,f.jsxs)(d.En,{onClick:function(){s(l,c,u)},className:ci.coupon_wrapper,children:[!!t&&(0,f.jsx)(a.Image,{src:t,className:(0,d.AK)(ci.image_promotion)}),(0,f.jsx)(a.View,{className:ci.coupon_center_text,children:(0,f.jsx)(a.Text,{className:(0,d.AK)(ci.coupon_title_text),children:o})}),(0,f.jsx)(a.View,{className:ci.coupon_center,children:!!i.length&&(0,f.jsx)(oi,{labelList:i,bigFont:!0})}),(0,f.jsx)(a.View,{className:ci.coupon_right,children:(0,f.jsx)(ge.m,{type:"forward",size:28,className:ci.coupon_right_icon})})]})},di={shelf_promotion_container:"index-module_M6QE6"},pi=n(86552),fi=function(e){var t=$n(e),n=t.bannerClick,i=t.visible,l=t.couponParams,c=t.setVisible,u=t.showAirPoplayer,p=t.setShowAirPoplayer,h=t.layerType,m=t.bannerInfo,_=void 0===m?[]:m,v=t.changeFilter,g=t.jumpUrl,y=t.crossParams,x=t.popCouponParams,b=t.crossVisible,k=t.airText,w=t.setCrossVisible,I=e.metricInfo,Z=ht.cw.PromotionClickFn({type:null===I||void 0===I?void 0:I.type}),T=ht.cw.PromotionExposureFn({type:null===I||void 0===I?void 0:I.type}),S=(0,s.useState)(!1),C=(0,r.Z)(S,2),P=C[0],N=C[1];return h?(0,f.jsxs)(f.Fragment,{children:[(0,jt.Xd)()&&(0,f.jsx)(d.En,{onClick:function(){d.hS.logTrace(null===Z||void 0===Z?void 0:Z.key,null===Z||void 0===Z?void 0:Z.params),n(h,g),(0,kt.Vg)((0,wt.XL)("\u4f18\u60e0\u5238"))},testID:T&&T||void 0,children:(0,f.jsx)(a.View,{className:di.shelf_promotion_container,children:(0,f.jsx)(ai,(0,o.Z)({},e))})}),l&&(0,jt.hB)()?(0,f.jsx)(pi.BM,(0,o.Z)((0,o.Z)({},l),{},{title:"\u4f18\u60e0",popoverLevel:1,visible:i,onClose:function(){P&&v&&v({isBreathe:!1,isCoupon:!0}),c(!1)},onClaim:function(){N(!0)},Header:(0,f.jsx)(a.View,{children:_.map((function(e){return(0,f.jsx)(ui,(0,o.Z)((0,o.Z)({},e),{},{itemClick:function(e,t,i){n(e,t,i)}}))}))})})):null,y&&(0,jt.Mk)()?(0,f.jsx)(pi.EB,(0,o.Z)((0,o.Z)({},y),{},{title:"\u8d60\u5238",popoverLevel:1,visible:b,onClose:function(){w(!1)}})):null,x&&(0,jt.tW)()?(0,f.jsx)(pi.e,(0,o.Z)((0,o.Z)({},x),{},{onClaim:function(){v&&v({isBreathe:!1,isCoupon:!0})}})):null,(0,f.jsx)(a.View,{children:(0,f.jsx)(d.H5,{visible:u,position:"bottom",title:"\u6d3b\u52a8\u8be6\u60c5",onClose:function(){p(!1)},showCloseButton:!0,zIndex:3001,style:{minHeight:300},children:(0,f.jsx)(li,{text:k})})})]}):null},hi=fi,mi=hi,_i=function(){return null},vi=n(57042),gi=n(24460),yi=n(81876),xi=n(21867),bi=n(86066),ki={m_shelf_group_detail_diff:"index-module_Grx0B",m_shelf_group_detail_diff_xtaroShelf:"index-module_cbGVY",m_shelf_group_detail_content_height:"index-module_N0Dlw",m_shelf_group_detail_content_height_xtaroShelf:"index-module_Uscef",tips_footer_shadow:"index-module_Detg9",m_shelf_group_detail:"index-module_B1o5z",m_shelf_group_detail_item:"index-module_qGXBh",m_shelf_group_detail_first:"index-module_WjGl8",m_shelf_group_detail_detial:"index-module_VEoWe",m_shelf_group_detail_name:"index-module_LgCUB",m_shelf_group_detail_desc:"index-module_VgX2h",m_shelf_group_detail_seperator:"index-module_FDS0v",m_shelf_group_detail_content:"index-module_GUA3n",m_shelf_group_detail_content_maxheight:"index-module_hx25j",tips_footer:"index-module_nT6Jy",tips_footer_btn:"index-module__NIcz",tips_footer_btn_red_border:"index-module_cK9wq",tips_footer_btn_txt:"index-module_V368A",tips_footer_btn_txt_red:"index-module_MRQgL","xt-htmlview":"index-module_wm0ZN"},wi={a:{textDecorationLine:"none",lineHeight:18,fontSize:14},ol:{marginBottom:20,paddingLeft:0,color:"#666",lineHeight:18,fontSize:14},ul:{marginBottom:20,paddingLeft:0,color:"#666",lineHeight:18,fontSize:14},p:{marginTop:0,marginBottom:20,color:"#666",lineHeight:18,fontSize:14},h2:{fontSize:17,marginBottom:8,color:"#333"},li:{fontSize:14,color:"#666"},strong:{color:"#333",marginBottom:8,fontWeight:"bold"},span:{}},Ii=n(51028),Zi={white:"#ffffff",white_breathe_1:"#ffffff",white_breathe_2:"#eff1f6",black:"#11141a",blue:"#2a64ed",blue_light:"#ecf3fe",blue_dark:"#0f4999",blue_tag_border:"#b8c6d9",gray:"#5c6473",gray_text:"#333333",gray_bg:"#f5f8fa",gray_btn:"#f5f8fa",gray_line:"#efefef",divider:"#5c6473",divider_gray:"#5c6473",divider_blue:"#0F4999",divider_red:"#F21500",text_blue_dark:"#0f4999",text_gray:"#5c6473"},Ti={white:"#242424",white_breathe_1:"#181818",white_breathe_2:"#242424",black:"#ffffff",blue:"#4c87ff",blue_light:"#333946",blue_dark:"#abc7de",blue_tag_border:"#abc7ed",gray:"#ffffff99",gray_text:"#ffffff99",gray_bg:"#181818",gray_btn:"#3f3f3f",gray_line:"#393939",divider:"#ffffff99",divider_gray:"#ffffff99",divider_blue:"#4C87FF",divider_red:"#F21500",text_blue_dark:"#4C87FF",text_gray:"#ffffff99"},Si={light:Zi,dark:Ti},Ci=function(e){return(0,f.jsx)(f.Fragment,{children:e.children})},Pi=function(e){return null},Ni=n(36280),Di=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(e){var i;return(0,vi.Z)(this,n),i=t.call(this,e),(0,kn.Z)((0,yi.Z)(i),"isBaiduMap",z.Z.isBaiduMap()),i}return(0,gi.Z)(n,[{key:"handlePreImage",value:function(e){if(e){var t=e.match(/Z_[0-9]+_0_Q[0-9]+/g);if(null!==t&&void 0!==t&&t.length){var n=t[0].split("_");Number(n[1])<1e3&&(n[1]="1000",n[3]="Q100");var i=e.replace(t[0],n.join("_"));return i}return e}return e}},{key:"render",value:function(){var e=this,t=this.props,n=t.details,i=t.onClickButton,r=t.isHasImg,s=t.ifNeedFooter,c=void 0===s||s,u=t.nextTitle,p=t.linearType,h=void 0===p?{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 165, 10)","rgb(255, 119, 0)"],locations:[0,1]}:p,m=t.videoInfos,_=void 0===m?[]:m,v=t.lowPricePerception,g=void 0===v?{}:v,y=t.desc,x=t.videoHide,b=t.tipsButtonInfo,k=t.from,w=b||{},I=w.type,Z=wi,T=(0,Ni.Z)({xShadow:-8,yShadow:-8,blur:8,opacity:.05,color:"rgb(0, 0, 0, 0.05)",aColor:"rgba(0, 0, 0, 0.8)",aElevation:10,spread:1}),S=this.context||"light",C=Si[S];wi.p.color=C.gray_text,wi.strong.color=C.black,wi.span.color=C.black;var P=this.isBaiduMap?.6:.7;return n&&n.length?(0,f.jsxs)(a.View,{className:(0,d.AK)(ki.m_shelf_group_detail,r?ki["m_shelf_group_detail_diff".concat(k?"_".concat(k):"")]:""),children:[(0,f.jsx)(a.ScrollView,{scrollY:!this.isBaiduMap,showsVerticalScrollIndicator:!1,className:(0,d.AK)(ki.m_shelf_group_detail_content,r?ki["m_shelf_group_detail_content_height".concat(k?"_".concat(k):"")]:ki.m_shelf_group_detail_content_maxheight),style:{maxHeight:l["default"].getSystemInfoSync().windowHeight*P-84},children:(0,f.jsxs)(Ci,{visible:this.props.visible,extraScrollHeight:20,contentHeight:l["default"].getSystemInfoSync().windowHeight*P-84,children:[(0,f.jsx)(Pi,{videoInfos:_,lowPricePerception:g,desc:y,videoHide:x}),n.map((function(t,i){return(0,f.jsxs)(a.View,{className:(0,d.AK)(ki.m_shelf_group_detail_item,0==i?ki.m_shelf_group_detail_item_first:""),children:[t&&t.name?(0,f.jsx)(a.Text,{className:ki.m_shelf_group_detail_name,children:t.name}):null,t.desc?(0,f.jsx)(a.Text,{className:ki.m_shelf_group_detail_desc,children:t.desc}):null,t&&t.detail?(0,f.jsx)(d.ur,{html:t.detail,tagsStyles:Z,className:"shelf_detail_tips",unitTransform:!0,imageProps:{onImageClick:function(t){t=e.handlePreImage(t),l["default"].previewImage({current:"",urls:[t]})},imageStyle:{width:"100%"}},linkProps:{isCopy:!0}},Math.random()):null,i!=n.length-1?(0,f.jsx)(a.View,{className:ki.m_shelf_group_detail_seperator}):null]},i)}))]})},Math.random()),c?(0,f.jsx)(d.En,{onClick:i,className:(0,d.AK)(ki.tips_footer,ki.tips_footer_shadow),style:(0,o.Z)((0,o.Z)({},T),{},{backgroundColor:C.white}),activeOpacity:.8,withFeedback:!0,children:(0,f.jsx)(d.cn,(0,o.Z)((0,o.Z)({},h),{},{className:(0,d.AK)(ki.tips_footer_btn,"red_border_add"==I?ki.tips_footer_btn_red_border:null),hover_class:"none",plain:!0,children:(0,f.jsx)(a.Text,{className:(0,d.AK)(ki.tips_footer_btn_txt,"red_border_add"==I?ki.tips_footer_btn_txt_red:null),children:u||"\u53bb\u8d2d\u7968"})}))}):null]}):null}}]),n}(Ii.ZP);(0,kn.Z)(Di,"contextType",Ee.Ni);var ji=n(44142),Ri=n(96483),Li=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(e){var i;return(0,vi.Z)(this,n),i=t.call(this,e),i.state={buttonInfo:i.props.buttonInfo},i}return(0,gi.Z)(n,[{key:"componentDidMount",value:function(){var e=this;ji.B.register("ottd_shelf_price_secclock_timeup",(function(t){var n;if((null===t||void 0===t?void 0:t.seckillid)==(null===(n=e.props.buttonInfo)||void 0===n?void 0:n.seckillid)){var i=null!==t&&void 0!==t&&t.layerText?t:{layerText:null!==t&&void 0!==t&&t.isZeroPrice?Ri.qn.freeComing:Ri.qn.panicComing,type:Ri.Os.comming,buttonLinear:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"],locations:[0,1]}};e.setState({buttonInfo:(0,o.Z)((0,o.Z)((0,o.Z)({},e.props.buttonInfo),t),{},{buttonLinear:Dt[i.type]})})}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,xe.Al)()?t:e}}]),n}(Ii.ZP),Ei={m_payment_item:"index-module_DSWLK",m_item_left:"index-module_OY6IL",m_item_right:"index-module_Gp8Xy",m_margin_bottom:"index-module_tea1q",m_item_total:"index-module_totfY",m_item_transparent:"index-module_nirct",m_item_discount:"index-module_yQtfz",m_item_text:"index-module_xomaF",m_item_detail:"index-module_NB6cF",m_item_detail_light:"index-module_L_iAo",m_payment_item_desc:"index-module_Vx2En",m_payment_item_desc_1:"index-module_oLzSW",m_payment_item_descs:"index-module_XKYjL",m_payment_row_left:"index-module_aQNT1",m_discount_text_wrapper:"index-module_GNv5t",m_discount_text:"index-module_J_YqS",m_payment_row_right:"index-module_xH8R_",m_payment_row_between:"index-module_J0r7I",m_item_linedot:"index-module_sDTL3",m_item_border_dashed:"index-module_TyshZ",m_item_extra_price:"index-module_cDY5t"},Vi=n(24414),Ai=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(){return(0,vi.Z)(this,n),t.apply(this,arguments)}return(0,gi.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.price,i=e.type,o=void 0===i?2:i,r=e.marketPrice,s=e.descs,l=void 0===s?[]:s,c=e.discountText,u=e.isDiscount,p=e.isNoDash,h=e.extraPrice,m=e.isReturnCash,_=e.theme,v=void 0===_?"light":_;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.View,{className:(0,d.AK)(Ei.m_payment_item,2===o?Ei.m_margin_bottom:""),children:(0,f.jsxs)(a.View,{className:Ei.m_payment_row_between,children:[(0,f.jsxs)(a.View,{className:Ei.m_payment_row_left,children:[!!c&&(0,f.jsx)(a.View,{className:Ei.m_discount_text_wrapper,children:(0,f.jsx)(a.Text,{className:Ei.m_discount_text,children:c})}),(0,f.jsx)(a.Text,{className:(0,d.AK)(Ei.m_item_text,Ei.m_item_left,1===o?Ei.m_item_total:Ei.m_item_detail,m?Ei.m_item_transparent:"",1===o&&u?Ei.m_item_discount:""),style:(0,Pe.N)(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:t}),1==o&&!p&&(0,f.jsx)(a.View,{className:Ei.m_item_linedot,style:{height:Vi.Z},children:(0,f.jsx)(a.View,{className:Ei.m_item_border_dashed})})]}),(0,f.jsx)(a.View,{className:Ei.m_payment_row_right,children:r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Text,{space:"nbsp",className:(0,d.AK)(Ei.m_item_text,Ei.m_item_right,1===o?Ei.m_item_total:Ei.m_item_detail),style:(0,Pe.N)(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:"\u95e8\u5e02\u4ef7 "}),(0,f.jsx)(a.Text,{space:"nbsp",className:(0,d.AK)(Ei.m_item_text,Ei.m_item_right,1===o?Ei.m_item_total:Ei.m_item_detail),style:(0,Pe.N)(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:r}),h&&h.currency?(0,f.jsx)(a.View,{children:(0,f.jsx)(a.Text,{className:Ei.m_item_extra_price,style:(0,Pe.N)(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:"(\u2248".concat(h.currency).concat(h.price,")")})}):null]}):(0,f.jsx)(a.Text,{space:"nbsp",className:(0,d.AK)(Ei.m_item_text,Ei.m_item_right,1===o?Ei.m_item_total:Ei.m_item_detail,m?Ei.m_item_transparent:"",u?Ei.m_item_detail_light:{}),style:(0,Pe.N)(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:n})})]})}),l.length?(0,f.jsx)(a.View,{className:(0,d.AK)(Ei.m_payment_item_descs),children:l.map((function(e){return(0,f.jsx)(a.Text,{className:(0,d.AK)(Ei.m_payment_item_desc),children:e})}))}):null]})}}]),n}(s.Component),Oi={m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0},title:{marginBottom:6}},Fi={m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0,marginBottom:20}},Mi={outermost:"index-module_pAbYp",m_payment_poplayer:"index-module_YuRGD",scroll_view_style:"index-module_FMKHC",m_payment_cont:"index-module_WUeu9",m_payment_cont_no_padding_bottom:"index-module_U3uXu",m_payment_bottom:"index-module_Q1QrK",m_payment_bottom_text:"index-module_QJJ2B",m_payment_total:"index-module_QEQQq",m_payment_total_text:"index-module__77sp",m_payment_total_text_ios:"index-module_dcWRb",m_payment_bottom_placeholder:"index-module_H4OsX",m_payment_return_crash_info:"index-module_ieiKj",m_payment_extra_corner:"index-module_vGXzQ",m_payment_extra_corner_view:"index-module_sagzQ",m_payment_extra_content:"index-module_XncKs",m_payment_tips_content:"index-module_Ohinf",line:"index-module_DSqd0",m_payment_desctips:"index-module_riMNK",tips_footer:"index-module_ppfNo",tips_footer_btn:"index-module_Py7Lf",tips_footer_btn_red_border:"index-module_cGRBc",tips_footer_btn_txt:"index-module_k3Q8H",tips_footer_btn_txt_red:"index-module_l0qjE"},Bi=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(e){var i;return(0,vi.Z)(this,n),i=t.call(this,e),(0,kn.Z)((0,yi.Z)(i),"state",void 0),(0,kn.Z)((0,yi.Z)(i),"collapseRef",void 0),(0,kn.Z)((0,yi.Z)(i),"onLayoutFinish",(function(){i.setState({layoutFinish:!0})})),i.state={layoutFinish:!1},i.collapseRef=s.createRef(),i}return(0,gi.Z)(n,[{key:"componentDidMount",value:function(){this.refreshCollapse()}},{key:"componentDidUpdate",value:function(){this.refreshCollapse()}},{key:"refreshCollapse",value:function(){var e=this;this.props.priceTipList&&d.GI.getPlatform()!==d.GI.PLATFORM_TYPE.CRN&&setTimeout((function(){e.collapseRef.current&&e.collapseRef.current.refreshCollapseHeight()}),600)}}]),n}(Ii.ZP),Ui={collapse_button:"index-module_jrdv2",collapse_button_up:"index-module_jsaFp",button_linear:"index-module_Uy_qI",button_linear_up:"index-module_QEVf2",button_text:"index-module_tQBjq",m_arrow_icon:"index-module_Ee4kV",m_payment_tips:"index-module_Sq7DD",title:"index-module_vCv9b",m_collapse_text:"index-module_dCu1B"},Gi=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(){return(0,vi.Z)(this,n),t.apply(this,arguments)}return(0,gi.Z)(n,[{key:"renderMoreButton",value:function(e){var t=this.props.theme,n=void 0===t?"light":t;return(0,f.jsx)(a.View,{className:e?Ui.collapse_button:Ui.collapse_button_up,children:(0,f.jsxs)(d.cn,{direction:0,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},className:(0,d.AK)(Ui.button_linear,e?"":Ui.button_linear_up),children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(Ui.button_text),style:(0,Pe.N)(n,{key:"color",value:"black"}),children:e?"\u67e5\u770b\u66f4\u591a":"\u6536\u8d77"}),(0,f.jsx)(Te,{type:e?"arrowdown":"arrowup",className:Ui.m_arrow_icon})]})})}},{key:"render",value:function(){var e=this.props,t=e.priceTipList,n=e.fstyle,i=void 0===n?{}:n,r=e.theme,s=void 0===r?"light":r,l=e.prefixCls;return(0,f.jsxs)(a.View,{className:Ui.m_payment_tips,style:i.m_payment_tips||{},children:[(0,f.jsx)(a.Text,{className:Ui.title,style:(0,o.Z)((0,o.Z)({},i.title||{}),(0,Pe.N)(s,{key:"color",value:"black"})||{}),children:"\u4ef7\u683c\u8bf4\u660e"}),(0,f.jsx)(a.View,{children:(0,f.jsx)(d.fG,{ref:this.collapseRef,renderContent:function(){return(0,f.jsx)(a.View,{children:(0,f.jsx)(d.t_,{html:t,baseFontStyle:{color:"#aaa",fontSize:12,lineHeight:d.GI.getPlatform()!==d.GI.PLATFORM_TYPE.CRN?"16px":16}})})},collapseHeight:64,renderMoreButton:this.renderMoreButton.bind(this),prefixCls:l})})]})}}]),n}(Bi),Hi=252,zi=.75*l["default"].getSystemInfoSync().screenHeight-64,qi=d.GI.getPlatform()===d.GI.PLATFORM_TYPE.CRN,Ki=function(e){(0,xi.Z)(n,e);var t=(0,bi.Z)(n);function n(){return(0,vi.Z)(this,n),t.apply(this,arguments)}return(0,gi.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.totleContent,i=e.bottom,r=e.priceTipList,l=void 0===r?"":r,c=e.from,u=e.extraList,p=e.descTips,h=e.callback,m=e.hasMargin,_=void 0===m||m,v=e.prefixCls,g=e.renderCollapseIcon,y=this.state.buttonInfo,x=this.context||"light",b=y?a.View:s.Fragment,k=y?a.ScrollView:a.View;return(0,f.jsxs)(b,{className:y?(0,d.AK)(Mi.outermost):"",children:[(0,f.jsxs)(k,{className:(0,d.AK)(Mi.m_payment_poplayer,y?Mi.scroll_view_style:null,"m_payment"),scrollY:!0,style:(0,o.Z)({minHeight:Hi,maxHeight:zi,marginBottom:qi&&d.hj.isIOS()&&!_?-44:0},(0,Pe.N)(x,{key:"backgroundColor",value:"white"})||{}),children:[(0,f.jsx)(a.View,{children:!(null===t||void 0===t||!t.length)&&t.map((function(e,o){var r=e.total||null;return(0,f.jsxs)(a.View,{className:(0,d.AK)(Mi.m_payment_cont,o!=t.length-1||(null!==n&&void 0!==n&&n.price||null!==i&&void 0!==i&&i.name||!l)&&(null===n||void 0===n||!n.price||"ticket"!=c)?{}:Mi.m_payment_cont_no_padding_bottom),children:[!!r&&(0,f.jsx)(Ai,{name:r.name,price:r.price,marketPrice:r.marketPrice,type:1,descs:r.descs,isDiscount:r.isDiscount||!!r.discountText,discountText:r.discountText,isNoDash:r.isNoDash,extraPrice:r.extraPrice,theme:x}),e.items&&!!e.items.length&&e.items.map((function(e,t){return(0,f.jsx)(a.View,{children:(0,f.jsx)(Ai,{name:e.name,descs:e.descs,price:e.price,marketPrice:e.marketPrice,isDiscount:e.isDiscount||!!e.discountText,discountText:e.discountText,theme:x})},"content_item_".concat(t))}))]},"content".concat(o))}))}),p&&p.length?(0,f.jsxs)(a.View,{className:Mi.m_payment_desctips,children:[(0,f.jsx)(a.Text,{className:Mi.m_payment_tips_content,children:"\u6e29\u99a8\u63d0\u793a"}),p.map((function(e){return(0,f.jsx)(a.Text,{className:Mi.m_payment_tips_content,children:e},e)}))]}):null,(null===n||void 0===n?void 0:n.price)&&"ticket"==c&&(0,f.jsx)(a.View,{className:Mi.line,style:{backgroundColor:"dark"===x?"#666666":"#f0f0f0"}}),(null===n||void 0===n?void 0:n.price)&&(0,f.jsxs)(a.View,{className:Mi.m_payment_total,children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(Mi.m_payment_total_text,d.hj.isIOS()?Mi.m_payment_total_text_ios:""),children:n.price}),null!==n&&void 0!==n&&n.info?(0,f.jsx)(a.Text,{className:Mi.m_payment_return_crash_info,children:n.info}):null]}),u&&u.length?(0,f.jsxs)(a.View,{children:[(0,f.jsx)(a.View,{className:Mi.m_payment_extra_corner,children:(0,f.jsx)(a.View,{className:Mi.m_payment_extra_corner_view})}),(0,f.jsx)(a.View,{className:Mi.m_payment_extra_content,children:u.map((function(e,t){return(0,f.jsx)(a.View,{children:(0,f.jsx)(Ai,{name:e.name,descs:e.descs,price:e.price,isDiscount:!0,type:1,isNoDash:!0,isReturnCash:!0,theme:x})},"extra".concat(t))}))})]}):null,!(null===i||void 0===i||!i.name)&&(0,f.jsx)(a.View,{className:Mi.m_payment_bottom,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Text,{className:Mi.m_payment_bottom_text,children:i.name}),(0,f.jsx)(a.Text,{className:Mi.m_payment_bottom_text,children:i.price})]})}),l?(0,f.jsx)(Gi,{priceTipList:l,prefix:".m_payment",renderCollapseIcon:g,fstyle:y?Fi:Oi,prefixCls:v}):null,(0,f.jsx)(a.View,{className:(0,d.AK)(Mi.m_payment_bottom_placeholder)})]}),!!y&&(0,f.jsx)(d.En,{onClick:h,className:(0,d.AK)(Mi.tips_footer,Mi.tips_footer_shadow),style:(0,o.Z)({shadowOffset:{height:-16,width:-16},shadowOpacity:.05,shadowRadius:16,shadowColor:"rgba(0,0,0)"},(0,Pe.N)(x,{key:"backgroundColor",value:"white"})||{}),activeOpacity:.8,children:(0,f.jsx)(d.cn,(0,o.Z)((0,o.Z)({},y.buttonLinear),{},{className:(0,d.AK)(Mi.tips_footer_btn,"red_border_add"==y.type?Mi.tips_footer_btn_red_border:null),hover_class:"none",children:(0,f.jsx)(a.Text,{className:(0,d.AK)(Mi.tips_footer_btn_txt,"red_border_add"==y.type?Mi.tips_footer_btn_txt_red:null),children:y?y.layerText:""})}))})]})}}]),n}(Li);(0,kn.Z)(Ki,"contextType",Ee.Ni);var Wi={m_arrow_icon:"index-module_CK1oa"},Xi=(0,s.memo)((function(e){return(0,f.jsx)(Ki,(0,o.Z)((0,o.Z)({},e),{},{renderCollapseIcon:function(e){return(0,f.jsx)(Te,{type:e?"arrowdown":"arrowup",className:Wi.m_arrow_icon})}}))})),Yi=Xi,Qi={container:"index-module_REtro",header:"index-module_htNgR",header_title:"index-module_f1nWr",close_btn:"index-module_SLGBF",scroll_pop:"index-module_VnAiB",pop:"index-module_ing66",desc_text:"index-module_OKU69"},Ji=(0,s.memo)((function(e){var t=l["default"].getSystemInfoSync().windowWidth,n=l["default"].getSystemInfoSync().windowHeight,i=e.data,o=e.onClose,r=e.maxHeight,s=void 0===r?680:r,c=i||{},u=c.title,p=c.backgroundImgUrl,h=c.desc;return(0,f.jsxs)(d.hQ,{className:(0,d.AK)(Qi.container,{maxHeight:.8*n}),source:{uri:p},imageStyle:{resizeMode:"contain",height:t/3.124},children:[(0,f.jsxs)(a.View,{className:Qi.header,disableScroll:!0,children:[(0,f.jsx)(d.En,{className:Qi.close_btn,onClick:o,children:(0,f.jsx)(ge.m,{type:"xclosed",style:{fontSize:16,color:"#fff"}})}),(0,f.jsx)(a.Text,{className:Qi.header_title,children:u})]}),(0,f.jsx)(a.ScrollView,{className:Qi.scroll_pop,style:{maxHeight:Math.floor(s)-51},scrollY:!0,showsVerticalScrollIndicator:!1,children:(0,f.jsx)(a.View,{className:Qi.pop,style:{paddingBottom:30},children:!!h&&(0,f.jsx)(a.Text,{className:Qi.desc_text,children:h})})})]})}));Ji.displayName="PicPopLayer";var $i=Ji,eo={m_help_info:"index-module_cCjiA",m_help_info_border:"index-module_wOHiX",m_help_info_name:"index-module_JF1NC",m_help_info_name_price:"index-module_MUc4E",m_help_info_desc:"index-module_AqOms",m_help_info_item:"index-module_qFtEI",m_help_info_text:"index-module_D7Yjv",m_help_info_wrapper:"index-module_Cg1hi",m_help_info_title:"index-module_OrENV",m_help_header:"index-module_uAlPN",m_help_back_btn:"index-module_B4bSd",m_help_header_title:"index-module_LynF_"},to=(0,s.memo)((function(e){var t=(0,Ee.TC)(),n=s.useCallback((function(e){var n=e.index,i=(e.peopleId,e.peopleName),o=e.peopleDescStr,r=e.priceDesc;return(0,f.jsxs)(a.View,{className:eo.m_help_info_item,children:[(0,f.jsxs)(a.View,{className:eo.m_help_info_wrapper,children:[(0,f.jsx)(a.Text,{className:eo.m_help_info_name,style:(0,Pe.N)(t,{key:"color",value:"black"}),children:i}),!!r&&(0,f.jsx)(a.Text,{className:(0,d.AK)(eo.m_help_info_name,eo.m_help_info_name_price),style:(0,Pe.N)(t,{key:"color",value:"gray_text"}),children:r})]}),(0,f.jsx)(a.View,{className:eo.m_help_info_desc,children:(0,f.jsx)(a.Text,{className:eo.m_help_info_text,style:(0,Pe.N)(t,{key:"color",value:"gray_text"}),children:o})})]},n+i)}),[t]),i=e.dataList,o=e.otherDataList,r=e.maxHeight,l=void 0===r?680:r;return i&&i.length>0?(0,f.jsxs)(a.View,{className:eo.m_help_info,style:l?{maxHeight:l}:{},children:[i.map((function(e,t){return n(e,t)})),!!o&&o.length>0&&(0,f.jsxs)(a.View,{className:eo.m_help_info_border,children:[(0,f.jsx)(a.Text,{className:eo.m_help_info_title,style:(0,Pe.N)(t,{key:"color",value:"gray_text"}),children:"\u4ee5\u4e0b\u7968\u8bf7\u81f3\u666f\u533a\u5b98\u65b9\u6e20\u9053\u8d2d\u4e70\u6216\u9884\u7ea6"}),o.map((function(e){return n(e)}))]})]}):null})),no=to,io=function(){return null},oo=io,ro=d.hj.isAndroid(),ao=(0,s.memo)((function(){return(0,f.jsx)(a.View,{className:c.sales_split_line})})),so=d.hj.isIPhoneX()?24:0,lo=.8*l["default"].getSystemInfoSync().windowHeight-so,co=(0,s.memo)((function(e){var t=e.salesInfo,n=void 0===t?[]:t,i=n.length-1,o=(0,Ee.TC)();return n.length?(0,f.jsx)(a.View,{className:c.sales_info_contain,children:n.map((function(e,t){return(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(a.Text,{className:(0,d.AK)(c.sales_info_text,on?c.sales_info_text_abtest:""),style:(0,Pe.N)(o,{key:"color",value:"gray"}),children:e},t),i>t?(0,f.jsx)(ao,{}):null]},t)}))}):null})),uo=function(e){var t,u,p,h,m=e.id,_=e.categoryName,v=e.groupList,g=e.groupName,y=e.subTabIndex,x=e.shelfTabInfo,b=void 0===x?{}:x,k=e.shelfTabInfoInitKey,w=e.tabIndex,I=e.promotion,Z=e.changeFilter,T=e.updateLayout,S=e.anchorId,C=e.showFoot,P=e.poplayerRef,N=e.tailFoldInfo,D=e.isXToOne,j=e.productType,R=void 0===j?"":j,L=e.handleOpenAndClose,E=e.tabSubTitle,V=e.shelfLength,A=e.targetPageRef,O=e.hotelFilter,F=e.tabId,M=e.changeHotelDate,B=e.clearFilter,U=e.frontSecKillRefresh,G=e.isHalf,H=e.shelfIndex,q=e.request,K=e.cardsType,W=e.element,X=void 0===W?{}:W,Y=e.hasAppointment,Q=105===F,J=(0,zn.Z)((function(){if(!D)return 0;var e=0;if(k){var t=(Object.keys(b||{})||[]).findIndex((function(e){return e==k}));e=t>-1?t:e}return null!==b&&void 0!==b&&b.length&&e>b.length-1&&(e=0),e})),$=y<V-1,ee=(0,s.useState)(J()),te=(0,r.Z)(ee,2),ne=te[0],ie=te[1],oe=Object.keys(v),re=v[oe[ne]]||{},ae=re.visibleNumber,se=re.salesInfo,le=re.cardList,ce=re.tips,ue=void 0===ce?{}:ce,de=re.viewMore,pe=void 0===de?{}:de,fe=re.isPoiRecommed,he=re.message,me=void 0===he?"":he,_e=re.module_name,ve=re.cardCount,ye=re.shelfMetricData,xe=void 0===ye?{}:ye,be=re.activityDetail,ke=void 0===be?{}:be,we=re.poiactivityname,Ie=void 0===we?"":we,Ze=ue.name,Te=ue.showDetail,Se=ue.tipsMetricInfo,Ce=void 0===Se?{}:Se,Ne=ue.propsData,De=N||{},je=De.price,Re=void 0===je?{}:je,Le=De.fold,Ve=void 0!==Le&&Le,Ae=Re.minPrice,Oe=(0,s.useState)(!Ve),Fe=(0,r.Z)(Oe,2),Me=Fe[0],Be=Fe[1],Ue={key:Object.keys(b||{})[ne],value:Object.values(b||{})[ne]},Ge=(0,wt.jM)("".concat((null===Ue||void 0===Ue?void 0:Ue.value)||"","(").concat((null===Ue||void 0===Ue?void 0:Ue.key)||"",")")),He=function(){d.hS.logTrace(null===_t||void 0===_t?void 0:_t.key,null===_t||void 0===_t?void 0:_t.params),Te&&gt(Ne),d.hj.isH5()||d.hj.isMini()?Ye(Ne):Te&&gt(Ne),(0,kt.Vg)(Ge)},ze=(0,zn.Z)((function(e){T&&T(S,e)}));(0,s.useEffect)((function(){ze()}),[S,ae]);var qe=(0,Ee.TC)(),Ke=(0,s.useCallback)((function(e){var t,n,i,r=e.promotionLayerContent,a=e.buttonInfo,s=e.onButtonClick,l=Dt.linear_orange;null===(t=P.current)||void 0===t||t.show({component:(0,f.jsx)(Yi,(0,o.Z)((0,o.Z)({},r),{},{from:"ticket",buttonInfo:(0,o.Z)((0,o.Z)({},a),{},{buttonLinear:null!==(n=Dt[null!==(i=null===a||void 0===a?void 0:a.type)&&void 0!==i?i:"booking"])&&void 0!==n?n:l}),callback:s,theme:qe,prefixCls:"xtaro-poi-shelf"})),props:{title:"\u4f18\u60e0\u8bf4\u660e"}})}),[]),We=(0,s.useCallback)((function(e){var t;null===P||void 0===P||null===(t=P.current)||void 0===t||t.show({component:(0,f.jsx)($i,{data:e,onClose:function(){var e;null===P||void 0===P||null===(e=P.current)||void 0===e||e.hide()},maxHeight:lo})})}),[]),Xe=(0,s.useCallback)((function(e){var t;null===P||void 0===P||null===(t=P.current)||void 0===t||t.show({component:(0,f.jsx)(no,(0,o.Z)({},e)),props:{title:"\u9002\u7528\u4eba\u7fa4"}})}),[]),Ye=(0,s.useCallback)((function(t){var n,i=t.details,r=t.onClickButton,a=t.isHasImg,s=function(e){return(0,f.jsx)(Di,(0,o.Z)({details:i,theme:qe,onClickButton:function(){var e;r?r():null===(e=P.current)||void 0===e||e.hide()},isHasImg:a,onClose:function(){var e;null===(e=P.current)||void 0===e||e.hide()}},e))};null===P||void 0===P||null===(n=P.current)||void 0===n||n.show({component:z.Z.isBaiduMap()?s:s(e),props:{title:"\u8d2d\u7968\u8d34\u58eb",style:{maxHeight:.8*l["default"].getSystemInfoSync().windowHeight-so},contentStyle:{display:"flex",flex:1,minHeight:252}}})}),[qe]),Qe=(0,s.useCallback)((function(e){var t,r=(0,d.vw)((function(){return Promise.resolve().then((function(){return(0,i.Z)(n(82410))}))}));null===P||void 0===P||null===(t=P.current)||void 0===t||t.hide(),setTimeout((function(){var t;null===P||void 0===P||null===(t=P.current)||void 0===t||t.show({component:(0,f.jsx)(r,(0,o.Z)((0,o.Z)({},e),{},{onClose:function(){var e;null===(e=P.current)||void 0===e||e.hide()}})),props:{style:{height:"80vh"},contentStyle:{display:"flex"}}})}),300)}),[]),Je=(0,s.useCallback)((function(e){var t;null===P||void 0===P||null===(t=P.current)||void 0===t||t.show({component:(0,f.jsx)(a.View,{style:{height:"100vh",paddingTop:z.Z.isBaiduMap()?"30vh":"20vh"},onClick:function(){var e;return null===(e=P.current)||void 0===e?void 0:e.hide()},children:(0,f.jsx)(oo,(0,o.Z)((0,o.Z)({},e),{},{isComponent:!0,onClose:function(){var e;null===(e=P.current)||void 0===e||e.hide()}}))}),props:{style:{backgroundColor:"transparent"}}})}),[]),$e=[],et=[],tt=[],nt=[];for(var it in v){var ot,rt=v[it],at=rt.module_name,st=rt.shelfMetricData,lt=rt.poiactivityname;_e&&et.push(null!==at&&void 0!==at?at:""),b[it]&&$e.push(b[it]),st&&tt.push(null!==(ot=null===st||void 0===st?void 0:st.level1saleunitid)&&void 0!==ot?ot:""),lt&&nt.push(null!==lt&&void 0!==lt?lt:"")}var ct={isXToOne:D,module_name:_e,moduleNameArr:et,supertabname:D?b[oe[null!==ne&&void 0!==ne?ne:0]]:"",superTabNameArr:D?$e:"",tabseq:D?ne+1:"",groupid:D?"":null===xe||void 0===xe?void 0:xe.groupId,groupname:D?"":g,level1saleunitid:null===xe||void 0===xe?void 0:xe.level1saleunitid,level1saleunitidArr:tt,count:ve,productType:R,poiactivityname:Ie,poiactivitynameArr:nt,pos:null!==(t=null===xe||void 0===xe?void 0:xe.ticketGroupIndex)&&void 0!==t?t:1,subtktpos:null!==(u=null===xe||void 0===xe?void 0:xe.ticketGroupIndex)&&void 0!==u?u:1},ut="ticket"==_e,dt=0==(null===xe||void 0===xe?void 0:xe.groupId),pt=ht.cw.GroupExposureFn((0,o.Z)({},ct)),ft=ht.cw.GroupFloorClickFn((0,o.Z)({},ct)),mt=ht.cw.CardTipExposureFn((0,o.Z)((0,o.Z)({},Ce),{},{groupid:null===ct||void 0===ct?void 0:ct.groupid,level1saleunitid:"\u5206\u7ec4"==(null===Ce||void 0===Ce?void 0:Ce.tipType)?"":null===ct||void 0===ct?void 0:ct.level1saleunitid})),_t=ht.cw.CardTipClickFn((0,o.Z)((0,o.Z)({},Ce),{},{groupid:null===ct||void 0===ct?void 0:ct.groupid,level1saleunitid:"\u5206\u7ec4"==(null===Ce||void 0===Ce?void 0:Ce.tipType)?"":null===ct||void 0===ct?void 0:ct.level1saleunitid})),vt=ht.cw.mergeShelfExposureFn((0,o.Z)((0,o.Z)({},ct),{},{tabseq:1,module_name:_e,supertabname:g,poiactivityname:Ie})),yt=ht.cw.LongDetailClickFn((0,o.Z)((0,o.Z)({},ct),{},{tabid:m,tabname:_,tabindex:w,source:null===X||void 0===X?void 0:X.source,label:null===X||void 0===X?void 0:X.label})),xt=ht.cw.LongDetailExposureFn((0,o.Z)((0,o.Z)({},ct),{},{tabid:m,tabname:_,tabindex:w,source:null===X||void 0===X?void 0:X.source,label:null===X||void 0===X?void 0:X.label})),bt=0==y&&0==w&&!G;return oe.length?(0,f.jsxs)(a.View,{style:(0,Pe.N)(qe,{key:"backgroundColor",value:"gray_bg"}),children:[bt?(0,f.jsx)(a.View,{className:c.shelf_promotion_wrapper,style:(0,Pe.N)(qe,{key:"backgroundColor",value:"white"}),children:(0,f.jsx)(mi,(0,o.Z)((0,o.Z)({},I),{},{request:q,changeFilter:Z,poplayerRef:P}),S)}):null,0===y&&!(D&&0==w)&&(0,f.jsx)(a.Text,{className:c.shelf_main_category_name,style:(0,o.Z)((0,o.Z)({},(0,Pe.N)(qe,{key:"color",value:"black"})),(0,jt.jJ)()?{position:"sticky",top:"-1px",zIndex:9,backgroundColor:"#f5f8fa"}:{}),children:_}),(0,f.jsxs)(a.View,{className:(0,d.AK)(D&&0==w||0!=y?"":c.shelf_main_container_top,y==V-1?D?c.shelf_main_container_bottom_is_x:c.shelf_main_container_bottom:"",D&&0==w?c.shelf_main_container_is_x:c.shelf_main_container,K===rn.cM.custom?c.shelf_main_container_custom:""),style:(0,Pe.N)(qe,{key:"backgroundColor",value:"white"}),children:[!!g&&(0,f.jsxs)(d.En,{className:(0,d.AK)(c.shelf_main_title,Ve&&!Me?c.shelf_main_title_bottom:"",D?c.shelf_main_title_top:""),testID:D?vt:ut?dt?ft:pt:void 0,children:[(0,f.jsx)(d.X_,{className:(0,d.AK)(c.shelf_main_title_text,ro?c.font_weight_bold:""),numberOfLines:Ve&&!Me?"1":"2",style:(0,o.Z)((0,o.Z)({},(0,Pe.N)(qe,{key:"color",value:"black"})||{}),d.ua.isH5()?{"-webkit-box-orient":"vertical"}:{}),children:g}),Ve?(0,f.jsxs)(d.En,{onClick:function(){Be(!Me),d.hS.logTrace(null===yt||void 0===yt?void 0:yt.key,null===yt||void 0===yt?void 0:yt.params),Me&&(0,kt.Vg)((0,wt._Q)("".concat(g).concat(Me?"\u6536\u8d77":"\u5c55\u5f00")))},testID:xt&&{ubtKey:null===xt||void 0===xt?void 0:xt.ubtKey,data:null===xt||void 0===xt?void 0:xt.data,pageId:null===xt||void 0===xt?void 0:xt.pageId,exposureEngine:"v2"},className:c.shelf_main_title_left,children:[!Me&&Ae?(0,f.jsx)(Xn,{price:Ae}):null,(0,f.jsxs)(a.View,{className:c.show_main_title_long,children:[(0,f.jsx)(a.Text,{className:c.show_long_text,style:(0,Pe.N)(qe,{key:"color",value:"black"}),children:Me?"\u6536\u8d77":"\u5c55\u5f00"}),(0,f.jsx)(ge.m,{type:Me?"arrowup":"arrowdown",style:(0,o.Z)({color:"#111",fontSize:10,textAlign:"center"},(0,Pe.N)(qe,{key:"color",value:"black"}))})]})]}):null,Q?(0,f.jsx)(_i,(0,o.Z)((0,o.Z)({},O),{},{changeHotelDate:M})):null]}),E?(0,f.jsx)(a.View,{className:c.shelf_sub_title_view,children:(0,f.jsx)(a.Text,{className:c.shelf_sub_title,style:(0,Pe.N)(qe,{key:"color",value:"gray"}),children:E})}):null,Me&&oe.length>1?(0,f.jsx)(Un,{keys:oe,changeActiveTab:ie,shelfTabInfo:b,activeTab:ne,metricData:ct}):null,Ze&&Me?Te&&null!==Ne&&void 0!==Ne&&null!==(p=Ne.details)&&void 0!==p&&p.length?(0,f.jsxs)(d.En,{className:c.shelf_ticket_tips,onClick:He,testID:mt,children:[(0,f.jsx)(d.X_,{className:(0,d.AK)(c.shelf_ticket_tips_text,on?c.shelf_ticket_tips_text_abtest:""),numberOfLines:1,children:Ze}),(0,f.jsx)(ge.m,{type:"forward",className:c.shelf_ticket_tips_icon})]}):(0,f.jsx)(a.View,{className:c.shelf_ticket_tips_desc_view,children:(0,f.jsx)(a.Text,{className:c.shelf_ticket_tips_desc_text,style:(0,Pe.N)(qe,{key:"color",value:"gray"}),children:Ze})}):null,se&&Me?(0,f.jsx)(co,{salesInfo:se}):null,Me?(0,f.jsx)(On,{viewMore:pe,visibleNumber:ae,cardList:le,anchorId:S,shelfMetricData:ct,updateLayout:ze,onPriceClick:Ke,onNaquhuaClick:We,onPeopleClick:Xe,onTipClick:Ye,onSkuClick:Qe,onBuyNoteClick:Je,isPoiRecommed:fe,message:me,producttype:R,handleOpenAndClose:L,innerTabChoosedIndex:null!==(h=ne+1)&&void 0!==h?h:1,isXToOne:D,activityDetail:ke,changeFilter:Z,frontSecKillRefresh:U,devtraceTabInfo:Ue,sideBarChoosedIndex:w+1,targetPageRef:A,shelfIndex:H,cardsType:K,hasAppointment:Y,poplayerRef:P},ne):null]}),$?(0,f.jsx)(a.View,{className:c.shelf_middle_white,style:(0,Pe.N)(qe,{key:"backgroundColor",value:"white"}),children:(0,f.jsx)(a.View,{className:c.shelf_middle_gray,style:(0,Pe.N)(qe,{key:"backgroundColor",value:"gray_bg"})})}):null,C?(0,f.jsx)(Hn,{onClear:B}):null]}):null},po=(0,s.memo)(uo)},96417:function(e,t,n){"use strict";n.d(t,{U:function(){return i.UJ}});var i=n(85187)},96483:function(e,t,n){"use strict";n.d(t,{Os:function(){return i},mG:function(){return o},qn:function(){return r}});var i=function(e){return e["booking"]="linear_orange",e["panicBuy"]="linear_red",e["comming"]="linear_lightred",e["disabled"]="grey",e["hasClock"]="linear_lightred",e["addClock"]="red_border_add",e}({}),o=function(e){return e["coming"]="\u672a\u5f00\u552e",e["freeComing"]="\u672a\u5f00\u59cb",e["panicComing"]="\u672a\u5f00\u62a2",e["booking"]="\u9884\u8ba2",e["customBooking"]="\u8d2d\u7968",e["freeBooking"]="\u9884\u7ea6",e["panicBuy"]="\u62a2\u8d2d",e["select"]="\u9009\u8d2d",e["inPlacePay"]="\u5230\u573a\u4ed8",e["disable"]="\u8ba2\u5b8c",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["snappedUp"]="\u62a2\u5149",e["hasClock"]="\u5df2\u6dfb\u52a0\u63d0\u9192",e["addClock"]="\u6dfb\u52a0\u63d0\u9192",e}({}),r=function(e){return e["coming"]="\u672a\u5f00\u552e",e["freeComing"]="\u672a\u5f00\u59cb",e["panicComing"]="\u672a\u5f00\u62a2",e["booking"]="\u53bb\u9884\u8ba2",e["freeBookig"]="\u53bb\u9884\u7ea6",e["panicBuy"]="\u53bb\u62a2\u8d2d",e["select"]="\u53bb\u9009\u8d2d",e["disable"]="\u8ba2\u5b8c",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["snappedUp"]="\u62a2\u5149",e["hasClock"]="\u5df2\u6dfb\u52a0\u63d0\u9192",e["addClock"]="\u6dfb\u52a0\u63d0\u9192",e}({})},34685:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var i=function(e){return e["visa"]="\u7b7e\u8bc1",e["cars"]="\u79df\u8f66",e["currency"]="\u5916\u5e01",e["insurance"]="\u4fdd\u9669",e["wifi"]="WiFi",e["localtransport"]="\u5f53\u5730\u4ea4\u901a",e["ticket"]="\u666f\u70b9\u95e8\u7968",e["onedaytrip"]="\u4e00\u65e5\u6e38",e["play"]="\u73a9\u4e50",e["groupTour"]="\u8ddf\u56e2",e["hotel"]="\u9152\u5e97",e}({})},52231:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var i={CRN:5,H5:7,mini:21}},79975:function(e,t,n){"use strict";n.d(t,{Jq:function(){return i},kW:function(){return o},aC:function(){return r},BF:function(){return a},DV:function(){return s},Hq:function(){return l}});var i=function(e){return e["AIR_TICKET_PROMOTION_DAY"]="airTicketPromotionDay",e["VAC_WLJHJ"]="210329_VAC_wljhj",e["HIDE_SHELF_TYPES"]="hideShelfTypes",e["TATE_LIMIT_MESSAGE"]="rateLimitMessage",e}({}),o=function(e){return e["reduct"]="\u9886\u5238",e["cross"]="\u9886\u5238",e["air"]="\u673a\u7968",e["naquhua"]="\u62ff\u53bb\u82b1",e["bargin"]="\u780d\u4ef7",e}({}),r={1:"ticket",2:"ticket",4:"activity",6:"sales",7:"destination_rec",8:"recommend",9:"seckill",10:"poiactivity",11:"scan"},a={1:"ticket",2:"ticket",4:"activity",6:"sales",7:"destination_rec",8:"recommend",9:"seckill",10:"poiactivity"},s=function(e){return e["H5"]="214070",e["CRN"]="sight_detail",e["mini"]="10650014615",e["OFFLINE"]="10650095450",e}({}),l={214070:"214070",sight_detail:"10650044531",10650014615:"10650014615",10650095450:"10650095450"}},49671:function(e,t,n){"use strict";n.d(t,{_1:function(){return a},ji:function(){return s},E7:function(){return l},S9:function(){return c}});var i=n(298),o=n(13878),r={},a=function(e){r=(0,i.Z)((0,i.Z)({},r),e)},s=function(){return r},l=function(e,t,n){var o={key:e,type:"click",params:(0,i.Z)({actiontype:"click",key:t,actioncode:e},n)},r=s().targetPageRef;return r&&(o.params.targetPageRef=r),o},c=function(e,t,n){var r={ubtKey:e,data:(0,i.Z)({actiontype:"browse",actioncode:e,key:t,pageid:"sight_detail"},n),pageId:(0,o.dD)()},a=s().targetPageRef;return a&&(r.targetPageRef=a),r}},67891:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(90201),o=(0,i.createContext)({}),r=(o.Provider,function(){return(0,i.useContext)(o)})},37995:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n(79301),o=n(95308),r=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=r,s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return t=e.sent,e.abrupt("return",{baseTicketDetailUrl:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=s},97538:function(e,t,n){"use strict";n.r(t);var i=n(79301),o=n(95308),r=n(86552),a=n(63778),s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.request,o=(0,a.Q)(n),e.next=4,(0,r.Lf)(o);case 4:return s=e.sent,e.abrupt("return",{couponData:s});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["default"]=s},44771:function(e,t,n){"use strict";n.r(t);var i=n(79301),o=n(95308),r=n(86552),a=n(78248),s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.request,o=(0,a.U)(n),e.next=4,(0,r.YE)(o);case 4:return s=e.sent,e.abrupt("return",{crossCouponInfo:s});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["default"]=s},10622:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n(79301),o=n(95308),r=n(9562),a={},s=function(e){return a[e]||(a[e]={_tmpTimeMap:{},_recordTimeMap:{},_recordTimeStamp:{},set:function(e,t){this._tmpTimeMap[e]=t},setRecord:function(e,t,n){this._recordTimeMap[e]=n-t,this._recordTimeStamp[e]={startTime:t,endTime:n}},record:function(e){this._tmpTimeMap[e]=(new Date).getTime(),this._recordTimeStamp[e]={startTime:this._tmpTimeMap[e]}},recordEnd:function(e){var t=0,n=(new Date).getTime();return this._tmpTimeMap[e]&&(t=n-this._tmpTimeMap[e]),this._recordTimeMap[e]=t,this._recordTimeStamp[e]={startTime:this._tmpTimeMap[e],endTime:n},t},viewRecords:function(e){var t=this,n={};return e.forEach((function(e){n[e]=t._recordTimeMap[e]||0})),n},viewAllRecords:function(){var e=this,t={},n=Object.keys(this._recordTimeMap)||[];return n.length&&n.forEach((function(n){t[n]=e._recordTimeMap[n]||0})),t},getRecordStamps:function(){return this._recordTimeStamp},clearRecord:function(){a[e]=null}}),a[e]},l=n(16911),c=n(39726),u=s("sight-detail"),d=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,a,s,d,p,f,h,m,_,v,g;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.request,o=n||{},a=o.hotelPosInfo,s=o.filters,d=a||{},p=d.hasHotel,p){e.next=5;break}return e.abrupt("return",{});case 5:return e.next=7,(0,l.ZP)([(0,r.Z)(n,{needHotels:!0})]);case 7:return f=e.sent,h=f&&f[0],m="",s&&s.length>0&&(_=s[0].filterItems,_&&(m=c.Z&&(0,c.Z)(_[0]))),u.recordEnd("Hotelreq"),v=(null===h||void 0===h?void 0:h.hotelProducts)||[],g={data:v.slice(0,10),fetched:!0,message:v.length?"":"\u62b1\u6b49\uff0c".concat(m?"\u201c"+m+"\u201d":"","\u6682\u65e0\u666f\u9152\u5957\u9910\uff0c\u60a8\u53ef\u4ee5\u770b\u770b\u5176\u5b83\u65e5\u671f")},e.abrupt("return",{hotelList:g});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=d},64558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _},getPoiModuleList:function(){return h}});var i=n(79301),o=n(95308),r=n(298),a=n(16911),s=n(18589),l=n(73954),c=n(85187),u=n(79975),d=n(13878),p=function(e,t){var n,i,o=(0,l.Z)();o.clientInfo=(0,r.Z)((0,r.Z)({},o.clientInfo),{},{pageId:u.Hq[(0,d.dD)()]});var a={locale:(null===o||void 0===o||null===(n=o.clientInfo)||void 0===n?void 0:n.locale)||"zh-CN",currency:(null===o||void 0===o||null===(i=o.clientInfo)||void 0===i?void 0:i.currency)||"CNY",location:(0,r.Z)({cityType:3},null!==e&&void 0!==e&&e.cityId?{cityId:null===e||void 0===e?void 0:e.cityId}:{}),mobileType:c.hj.isIOS()?1:c.hj.isAndroid()?2:-1,pageId:u.Hq[(0,d.dD)()],extension:[{name:"230315_VAC_poi",value:"B"}],crnVersion:"2021-05-27 12:30:08"},s={head:o.clientInfo,sourcePageType:11,sceneId:null===e||void 0===e?void 0:e.poiId,isImperial:!1,clientInfo:a,tabInfos:null===e||void 0===e?void 0:e.tabInfos,needTabOnly:!1,filtered:null===e||void 0===e?void 0:e.filtered};return{data:s,url:"/restapi/soa2/14580/json/getCrossRecommendProduct",cachePolicy:t}},f={2:105,3:100,4:101,5:102,110:110,111:111,112:112,666:666},h=function(e){var t=e.shelfTypes,n=[],i=[];return null===t||void 0===t||t.forEach((function(e){var t=e.shelfItems;null===t||void 0===t||t.forEach((function(t,o){if(2==t.idType&&2!=t.type){var a=f[t.shelfGroupId],l={tabId:a,pageIndex:1,pageSize:10,imageSize:"C_300_540"};(0,s.IG)()&&(l.productIdList=t.productIdList||[]),n.push(l),i.push((0,r.Z)((0,r.Z)({},l),{},{shelfGroupId:t.shelfGroupId,shelfType:e}))}else 2==t.type&&t.combineShelfItems&&t.combineShelfItems.forEach((function(t){if(2==t.idType){var o=f[t.shelfGroupId],a={tabId:o,pageIndex:1,pageSize:10,imageSize:"C_300_540"};(0,s.IG)()&&(a.productIdList=t.productIdList||[]),n.push(a),i.push((0,r.Z)((0,r.Z)({},a),{},{shelfGroupId:t.shelfGroupId,shelfType:e}))}}))}))})),{tabInfos:n,poiShelfTypes:i}},m=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s,l,c,u,d,f,m,_;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.request,l=t.response,c=h(l),u=c.tabInfos,d=c.poiShelfTypes,f=null!==(n=null===(o=s.filters)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.filterItems)&&void 0!==n?n:[],f.length?(f=f.map((function(e){return{type:e.key||"Date",value:e.value}})),s.filtered={items:f}):s.filtered=null,e.next=6,(0,a.ZP)([p((0,r.Z)((0,r.Z)({},s),{},{tabInfos:u}))]);case 6:return m=e.sent,_=m&&m[0]||{},e.abrupt("return",{poiRecommendInfo:{data:_.data,poiShelfTypes:d}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=m},13999:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(79301),o=n(298),r=n(95308),a=n(16911),s=function(e,t,n){var i=e||{},o=i.resourceId,r=i.snapshotId,a={key:n||"PRICE_DESCRIBE",resourceIds:[o]};return r&&(a.snapshotId=r),{data:Object.assign({},t,a),url:"/restapi/soa2/12530/json/applicationConfig?v=PRICE_DESCRIBE"}},l=n(73954),c=n(37617),u=n(79975),d=n(13878),p=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,p,f;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.request,r=(0,l.Z)(),r.clientInfo=(0,o.Z)((0,o.Z)({},r.clientInfo),{},{pageId:u.Hq[(0,d.dD)()]}),e.next=5,(0,a.ZP)([s(n,r)]);case 5:if(p=e.sent,f=p&&p[0],n.isAckError={isShopSceneAckError:(0,c.qc)(f)},!f||!f.data){e.next=11;break}return n.applicationConfig=f.data,e.abrupt("return",{applicationConfig:f.data});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=p},88070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(79301),o=n(298),r=n(95308),a=n(16911),s=n(85187),l=n(80630);function c(e){var t=e||{},n=t.spotId,i=t.poiId,o=t.aid,r=t.sid,a={ProductId:Number(n||i||0),BusinessSystemId:"1",Version:825e3,ChannelCode:0,PlatformId:l.PE[s.GI.getPlatform()],ChannelId:l.bq[s.GI.getPlatform()]};return o&&r&&(a["HeadTagList"]=[{Key:"AllianceId",Value:o},{Key:"SID",Value:r}]),a}var u=n(73954);function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.productId,r=e.minPrice,a=(0,o.Z)({ProductId:i,BusinessSystemId:2,PlatformId:2,ChannelCode:0,MinPrice:r},e),s=n.showDiscount,l=(0,u.Z)().clientInfo.version;if(s){var c=l?l.split(".").join("")+"00":"841000";Object.assign(a,{Version:c})}return{data:Object.assign({},t,a),url:"/restapi/soa2/12447/QueryPromotionDisplayInfo"}}var p=n(79975),f=n(13878),h=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,s,l,h;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.request,s=c(r),l=(0,u.Z)(),l.clientInfo=(0,o.Z)((0,o.Z)({},l.clientInfo),{},{pageId:p.Hq[(0,f.dD)()]}),e.next=6,(0,a.ZP)([d(s,l)]);case 6:return h=e.sent,e.abrupt("return",{naquhuaData:(null===h||void 0===h||null===(n=h[0])||void 0===n||null===(n=n.Data)||void 0===n?void 0:n.PromotionInfo)||{}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=h},64581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(79301),o=n(298),r=n(95308),a=n(16911),s=function(e,t){var n,i=Object.assign({},e,t);t.imgSize&&null!==(n=i.head)&&void 0!==n&&n.extension&&(i.head.extension=[{name:"imgSize",value:t.imgSize}]);var o="/restapi/soa2/21052/json/getScenicSpotInfo";return i.subEnv&&(o+="?subEnv=".concat(i.subEnv)),{data:i,url:o}},l=n(73954),c=n(79975),u=n(59217),d=n(13878),p=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,p,f,h,m,_,v,g,y,x,b;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.request,p=r.spotId,f=r.poiId,h=r.subEnv,m=(0,l.Z)(),m.clientInfo=(0,o.Z)((0,o.Z)({},m.clientInfo),{},{pageId:c.Hq[(0,d.dD)()]}),v=[],(0,u.jJ)()&&(v.push({key:"isScanShelf",value:"onlyScanShelf"}),_=JSON.stringify([{code:"shelf_scan_head_short",size:"C_750_286_Q80"},{code:"shelf_scan_head_long",size:"C_750_694_Q80"}])),g=(null===(n=(null===r||void 0===r?void 0:r.passThroughParameters)||[])||void 0===n?void 0:n.filter((function(e){var t;return null===e||void 0===e||null===(t=e.key)||void 0===t?void 0:t.endsWith("AutoPayload")})))||[],e.next=9,(0,a.ZP)([s(m,{scenicSpotIds:p?[p]:[],poiIds:f?[f]:[],needBasicInfo:!0,needTicketCoupon:!0,imgSize:_,tags:v,extInfo:g,subEnv:h})]);case 9:if(y=e.sent,x=y&&y[0]||{},!x){e.next=14;break}return r.poiId||(r.poiId=(null===(b=x.scenicSpotInfos)||void 0===b||null===(b=b[0])||void 0===b||null===(b=b.basicInfo)||void 0===b?void 0:b.poiId)||0),e.abrupt("return",{scenicSpotInfo:x});case 14:return e.abrupt("return",{});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=p},14641:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n(79301),o=n(95308),r=n(85187),a=n(16911),s=n(9562),l=n(13878),c=n(3300),u=n(42826),d=n(37617),p=n(59217),f=n(298),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,i){setTimeout((function(){i(Object.assign({reason:"timeout"},m("invoke ".concat(t," timeout"),3)))}),e)}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,f.Z)({errorCode:t,errorMsg:e},n)},_=void 0,v=!0,g=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,f,m,g,y,x,b,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return g=t.onSeverCallBack,y=t.request,x=t.config,b=t.clearCacheDataShelfs,k=t.blockShelfRenderPromise,w=x.format,I=y.poiId||y.spotId,Z=null!==(n=null===y||void 0===y?void 0:y.cacheKey)&&void 0!==n?n:"",null===y||void 0===y||delete y.cacheKey,T=(new Date).getTime(),e.next=8,(0,a.ZP)([(0,s.Z)(y,{},Z?{enableCache:!0,cacheExpireTime:15,cacheLocation:"MEM",cacheKey:Z}:void 0)],y.updateSecKill?{text:"\u6392\u961f\u4e2d"}:void 0);case 8:if(S=e.sent,C=(new Date).getTime(),(0,u.f)({key:"o_sightdetail_poi_shelf_fetch_getproductshelf",title:"poi\u5e97\u94fa\u4e3b\u63a5\u53e3\u8bf7\u6c42\u8017\u65f6",time:C-T},"devtrace"),P=S&&S[0],y.isAckError={isShelfInfoError:(0,d.qc)(P)},P){e.next=15;break}return e.abrupt("return",{shelfInfo:P});case 15:if(!y.poiId&&P.poiId&&(y.poiId=P.poiId),N=(null===(f=P.ResponseStatus)||void 0===f||null===(f=f.Extension)||void 0===f||null===(f=f[1])||void 0===f?void 0:f.Value)||"",(0,l.FD)("rootMessageId-shelfData",N),y.scenicSpotPriceInfo||(y.scenicSpotPriceInfo=P.scenicSpotPriceInfo),D=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,r,a,s,l,u,d,f,m,g,x,Z,T;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v=!1,!k){e.next=6;break}return r=Date.now(),a=function(e){var t=Date.now()-r;console.log("blockShelfRenderPromise".concat(e,": ").concat(t,"ms"))},e.next=6,Promise.race([k,h(1e3,"blockShelfRenderPromise")]).then(a.bind(_,"Resolve"),a.bind(_,"Timeout"));case 6:if(y.preposeInstallmentInfo=P.preposeInstallmentInfo,y.spotId||(y.spotId=P.spotid||0),e.t0=null===w||void 0===w||null===(t=w["tabsInfo"])||void 0===t?void 0:t.call(w),!e.t0){e.next=13;break}return e.next=12,w["tabsInfo"]();case 12:e.t0=e.sent;case 13:return s=e.t0,l=null===P||void 0===P||null===(n=P.shelfTypes)||void 0===n||null===(o=n.find)||void 0===o?void 0:o.call(n,(function(e){return"\u8d85\u503c\u7cbe\u9009"===e.name||"\u70ed\u95e8\u62a2\u7968"===e.name})),l||(m=(null===(u=P.shelfGroups)||void 0===u||null===(d=u.find)||void 0===d?void 0:d.call(u,(function(e){return[c.XN.marketing,c.XN.recommend,c.XN.seckill,c.XN.poiactivity].includes(e.tabType)})))&&(0,p.IA)(),g=y.businessIdTop||-1!=y.menuId,m&&(f={source:2,shelfItems:[{idType:0,shelfGroupId:"0_czjx"}],name:null!==(x=P.flags)&&void 0!==x&&x.includes("showContestPoi")?"\u70ed\u95e8\u62a2\u7968":"\u8d85\u503c\u7cbe\u9009",label:"",id:"",code:"0_0",url:""},null===P||void 0===P||null===(Z=P.shelfTypes)||void 0===Z||Z.splice(g?1:0,0,f))),T=null===s||void 0===s?void 0:s.default({shelfTypes:(null===P||void 0===P?void 0:P.shelfTypes)||[],districtId:I}),null===b||void 0===b||b(),e.abrupt("return",{shelfInfo:P,shelfTypes:P.shelfTypes||[],tabsInfo:T.tabsInfo||[],moduleList:T.moduleList||[],emptyShelfs:T.emptyShelfs||[]});case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=new Promise((function(e){j=e})),L=r.GI.getPlatform()===r.GI.PLATFORM_TYPE.CRN,E="1"===(null===(m=P.passThroughInfos)||void 0===m||null===(m=m.find((function(e){return e&&"onlyHotelShelfType"===e.key})))||void 0===m?void 0:m.value),!(L&&E&&v)){e.next=31;break}return g&&g(P.passThroughInfos,j),e.next=27,Promise.race([R,h(1e3,"getProductShelf")]).then(D,D);case 27:return V=e.sent,e.abrupt("return",V);case 31:return g&&g(P.passThroughInfos),e.abrupt("return",D());case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=g},9562:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(298),o=n(85187),r=n(73954),a=function(e,t){var n=[];e.split(".").map((function(e){n.push(parseInt(e,10))}));for(var i=n.length;i<t;i++)n.push("0");return parseInt(n.join(""),10)},s=function(e,t){var n=Math.max(e.split(".").length,t.split(".").length);return a(e,n)>=a(t,n)},l=n(59217),c=n(18589),u=n(79975),d=n(13878),p=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.needHotels,p=void 0!==a&&a,f=arguments.length>2?arguments[2]:void 0,h=(0,r.Z)(),m=e.spotId,_=e.poiId,v=e.needFilter,g=e.resourceLimit,y=e.filters,x=e.updateSecKill,b=void 0!==x&&x,k=e.ticketGroupId,w=e.businessIdTop,I=e.menuId,Z=e.passThroughParameters,T=e.hideShelfTypes,S=e.cityId,C=void 0===S?"":S,P=e.aid,N=e.sid,D=e.subEnv,j={enviroment:h.enviroment,spotid:m?Number(m):0,poiId:_?Number(_):0,needFilter:v,resourceLimit:g,filters:y,needHotels:p,updateSecKill:b,needScenicSpotPrice:!0,passThroughParameters:Z||[],clientInfo:(0,i.Z)((0,i.Z)({},h.clientInfo||{}),{},{extension:[{name:"230315_VAC_poi",value:"B"}],location:(0,i.Z)({cityType:3},C?{cityId:C}:{}),pageId:u.Hq[(0,d.dD)()]}),tags:[{key:"seckill",value:"newSeckill"},{key:"effectiveDate",value:"saleProperty"},{key:"preposeInstallment",value:"true"},{key:"miniTangramTag",value:"activityTag"},{key:"preferenceShelf",value:"T"},{key:"ticketGroupCard",value:"true"},{key:"needProductAggregationJumpBooking",value:"true"},{key:"needPackingVersion3",value:"true"},{key:"hideShelfTypes",value:T||""},{key:"needVideoInfo",value:"T"},{key:"needHighlights",value:"T"},{key:"qconfigTag",value:"true"},{key:"needOutboundTools",value:"T"},{key:"newSeckillStructure",value:"v1"},{key:"needRateLimit",value:"T"}]},R=[{name:"needNewStructureV2",value:"true"},{name:"serverVersion",value:"1.4"},{name:"needActivityTag",value:"true"},{name:"aid",value:P||""},{name:"sid",value:N||""},{name:"imgSize",value:JSON.stringify([{code:"shelf_hotel",size:"C_300_540_Q100"},{code:"shelf_act",size:"C_300_540_Q100"},{code:"shelf_ticket_group",size:"C_300_540_Q100"},{code:"shelf_recommend_background",size:"Z_865_0_Q100"},{code:"shelf_scan_package",size:"W_620_0_Q80"},{code:"shelf_swiper_poi",size:"C_750_260_Q80"}])}];(0,l.jJ)()&&j.tags.push({key:"isScanShelf",value:"onlyScanShelf"}),(0,c.IG)()&&j.tags.push({key:"needAroundRecommendProduct",value:"T"}),(0,c.fm)()&&j.tags.push({key:"needAppointmentCard",value:"T"}),(s((null===r.Z||void 0===r.Z||null===(t=(0,r.Z)())||void 0===t?void 0:t.clientInfo.version)||"8.44.0","8.44.0")||o.hj.isMini())&&j.tags.push({key:"callRecallPK",value:"pkOneOrMore"}),j.tags.push({key:"poiMall",value:"showShelfType"}),k&&j.tags.push({key:"ticketGroupIdTop",value:"".concat(k)}),w&&j.tags.push({key:"businessIdTop",value:"".concat(w)}),!I||-1==I||w||k||j.tags.push({key:"typeIdTop",value:"".concat(I)}),o.hj.isApp()&&j.tags.push({key:"need1DayTripRecommend",value:"T"}),o.hj.isApp()||(j.head={extension:R});var L="/restapi/soa2/21052/json/getProductShelf";return D&&(L+="?subEnv=".concat(D)),{data:j,others:{extension:R},url:L,cachePolicy:f}},f=p},79369:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var i=function(e){var t=e.productid,n=e.productname,i=e.bookBtnName,o=e.module_name,r=void 0===o?"":o,a=e.ctypename_sec,s=void 0===a?"":a;return{productid:t,productname:n,resourcetype:"",resourceid:"",level1saleunitid:"",level2saleunitid:"",stocktype:"",module_name:r||"activity",discounttype:"",discountprice:"",elementcount:"",categoryunitcount:"",is_recommend:"",is_introduction:"",recommendtype:"",bookBtnName:i,picType:"",innerseq:"",tipType:"",subtktpos:"",vs_type:"",is_vedio:"",categoryid_l1:"",categoryid_l2:"",ctypename_sec:s,shipid:"",personname:"",personsubname:""}}},33111:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var i=n(34685),o=n(79369);function r(e){var t,n,r,a,s,l,c,u,d,p,f,h,m,_,v,g=e.product,y=e.poiInfo,x=null===(t=g.extraTags)||void 0===t||null===(t=t.find((function(e){return"marketTag"===e.code})))||void 0===t?void 0:t.image,b=(null===(n=g.imgInfo)||void 0===n?void 0:n.imgDesc)||"",k=g.imgInfo&&{imageUrl:g.imgInfo.imgUrl,leftTopImageUrl:x,bottom:{type:"tag",text:b}},w="";g.ctripTag&&["\u81fb\u4eab","\u4f18\u9009","\u643a\u7a0b\u4f18\u9009"].indexOf(g.ctripTag.text)>-1&&(w="https://dimg04.c-ctrip.com/images/1o56x12000bmr7yf125E6.png_.webp");var I={text:g.name,prefix:w},Z=[],T=[],S=null===(r=g.extraTags)||void 0===r||null===(r=r.find((function(e){return"beginTime"===e.code})))||void 0===r?void 0:r.text;S&&T.push({text:S,type:"gray"});var C=null===(a=g.extraTags)||void 0===a||null===(a=a.find((function(e){return!!e&&"dayNum"==e.code})))||void 0===a?void 0:a.text;C&&T.push({text:"\u7b2c".concat(C,"\u5929"),type:"gray"}),y.name&&(S||C)&&(T.push({text:"\u5728",type:"gray"}),T.push({text:"".concat(y.name),type:"blue_dark"}),T.push({text:"\u6d3b\u52a8\u7ea6",type:"gray"}));var P=null===(s=g.extraTags)||void 0===s||null===(s=s.find((function(e){return"duration"===e.code})))||void 0===s?void 0:s.text,N=P?parseInt(P):void 0,D="";N&&(N<60?D=N+"\u5206\u949f":(D=parseInt(String(N/60))+"\u5c0f\u65f6",N%60&&(D+=N%60+"\u5206\u949f"))),D&&T.push({text:D,type:"gray"});var j=S||P||C,R=j?{prefix:"time",textList:T}:void 0,L=null===(l=g.tags)||void 0===l||null===(l=l.find((function(e){return"ProductPower"===e.groupCode})))||void 0===l?void 0:l.groups,E=null!==(c=null===L||void 0===L?void 0:L.map((function(e){return{type:"tag",tagType:"divider_gray",text:e.text,dividerPlace:"before"}})))&&void 0!==c?c:[];E.length>0&&Z.push({items:E,type:"wrap_hidden"});var V=null===(u=g.tags)||void 0===u||null===(u=u.find((function(e){return"Differences"===e.groupCode})))||void 0===u?void 0:u.groups,A=null!==(d=null===V||void 0===V?void 0:V.map((function(e){return{type:"tag",tagType:e.type,text:e.text}})))&&void 0!==d?d:[];null!==(p=g.proprietaryTag)&&void 0!==p&&p.text&&A.unshift({type:"tag",tagType:"gradient_ziying",text:g.proprietaryTag.text}),A.length>0&&Z.push({items:A,type:"wrap_hidden"});var O=[],F=g.productDesc,M=Number(null!==(f=g.score)&&void 0!==f?f:0);M>0&&O.push({type:"text",text:M+"\u5206",textType:"blue_dark"}),F&&O.push({type:"text",text:F}),O&&Z.push({type:"wrap_show",items:O});var B={text:"\u9884\u8ba2",url:g.productUrl},U=g.productUrl,G={price:null===(h=g.minPrice)||void 0===h||null===(h=h.price)||void 0===h?void 0:h.toString(),zero:null!==(m=g.minPrice)&&void 0!==m&&m.price?void 0:"\u5b9e\u65f6\u8ba1\u4ef7"},H=(0,o.Z)({productid:String(null!==(_=null===g||void 0===g?void 0:g.id)&&void 0!==_?_:""),productname:null===g||void 0===g?void 0:g.name,bookBtnName:B.text}),z=null===(v=g.extInfos)||void 0===v||null===(v=v.find((function(e){return"backGroundImgUrl"===e.key})))||void 0===v?void 0:v.value;return{productType:i.$.onedaytrip,imageInfo:k,title:I,matrix:Z,url:U,button:B,priceInfo:G,metricData:H,timeDesc:R,backgroundImageUrl:z}}},68455:function(e,t,n){"use strict";n.d(t,{u:function(){return _e}});var i=n(79301),o=n(298),r=n(95308),a=n(96483),s=n(65896),l=n(85187),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l.GI.getDevEnv();switch(t){case l.GI.DEV_ENV_TYPE.DEV:case l.GI.DEV_ENV_TYPE.FAT:return e?"https://".concat(e):"https://m.fws.qa.nt.ctripcorp.com";case l.GI.DEV_ENV_TYPE.PROD:return"https://m.ctrip.com";default:return"https://m.ctrip.com"}};function u(e){var t=e||{},n=t.date,i=t.token,o=t.resourceId,r=t.spotid,a=t.type,l=t.isscan,u=t.ctm_ref,d=t.traceid,p=t.label,f=void 0===p?"":p,h=t.hasDiscountInfo,m={date:n,token:decodeURIComponent(i),optid:[o],usePage:"detail",aggregation:!0,spotid:r,traceid:d,label:f,hasDiscountInfo:h};"T"==l&&(m["isscan"]=!0),u&&(m["ctm_ref"]=u);var _={},v=Object.keys(e||{}).filter((function(e){return-1!==e.indexOf("ext-")}));v.forEach((function(t){var n=t;e[t]&&(_[n]=e[t])})),m["extParams"]=_;var g=m,y={resourcetype:a,showPoplayerTime:Date.now()};try{g&&(g=encodeURIComponent(JSON.stringify(g))),y&&(y=encodeURIComponent(JSON.stringify(y)))}catch(e){}var x=(0,s.R)({request:g,otherParams:y,hasAssistCompRender:!0,prefix:".m_ctrip"},!0);return{url:"".concat(c(),"/webapp/taro/pages/tnt/detail/product-sku/index?").concat(x),extParams:_}}var d=n(79975);function p(e){var t=e||{},n=t.id,i=t.poiId,o=t.info,r=t.tags,a=o||{},s=a.ticketGroup,l=a.groupType,c="https://m.ctrip.com/webapp/things-to-do/detail/".concat(n,"?isHideNavBar=YES&poiId=").concat(i),u=!1,p=(r||[]).find((function(e){return"categoryId"===e.tagType})),h="";p&&(u=(p.tagItems||[]).some((function(e){if("303"===e.tagCode)return h="photographytrip",!0}))),u&&(c+="&pshowcode=".concat(h)),l&&(c+="&ext-shelfType=".concat(d.aC[l])),c=f({url:c,ticketGroup:s,type:7});var m={directionalCustomField:"poi"};return c+="&tangMapping=".concat(encodeURIComponent(JSON.stringify(m))),c}var f=function(e){var t=e.url,n=e.ticketGroup,i=e.type,o=n||{},r=o.id;return t&&i&&7==i&&r&&(t+="&ruleId=".concat(r)),t},h=n(78894);function m(e){var t=e||{},n=t.bookingParams,i=t.extra,r=n||{},a=r.spotId,s=r.date,l=i||{},c=l.formatedExtInfos,u=l.type,d=l.id,p=l.name,f=l.newStructure,m=(l.jumpToBooking,l.isResourcePage),x="";if(5==u)x=c&&c.url||"";else if(2==u)x="/ticket/index.html#/booking?".concat((0,h.Xh)((0,o.Z)((0,o.Z)({},n),{},{old:1})));else if(4==u){var b={pid:d,spotid:a,currentSelectDate:{date:s},productname:encodeURIComponent(p||"")};x=g("performance",b)}else x=6===u||3===u&&f||1===u&&f||8===u||9===u||12===u?_("booking",n):m?v("booking",n):y("booking",n);return m||(x+="&isminiprogram=true"),x}var _=function(e,t){var n="/pages/tnt/";return"booking"===e&&(n+="booking/"),n+="index?".concat((0,h.Xh)(t),"&usenative=T"),n};function v(e,t){var n="".concat(c(),"/webapp/ticket/tnt/").concat(e,"?").concat((0,h.Xh)(t));return l.GI.getDevEnv()!==l.GI.DEV_ENV_TYPE.FAT&&l.GI.getDevEnv()!==l.GI.DEV_ENV_TYPE.DEV||(n+="&env=fat"),n}function g(e,t){return l.hj.isInApp()?"/ticket/index.html#/".concat(e,"?").concat((0,h.Xh)(t)):"".concat(c(),"/webapp/tnt/").concat(e,"?").concat((0,h.Xh)(t))}var y=function(e,t,n){return l.hj.isInApp()?x("booking",t,n):"".concat(c(),"/webapp/ticket/tnt/").concat(e,"?").concat((0,h.Xh)(t))};function x(e,t,n){var i="/rn_ttd/_crn_config?CRNModuleName=rn_ttd&CRNType=1&initialPage=".concat(e,"&").concat((0,h.Xh)(t));return"booking"===e&&(i=b(i),n&&(i+="&".concat((0,h.Xh)(n)))),i}var b=function(e){for(var t=e.split("?")[1].split("&"),n={},i=0;i<t.length;i++){var o=t[i].split("=");""!=o[0]&&(n[o[0]]=o[1])}var r={optid:{newKey:"tid",newValue:function(e){return e}},count:{newKey:"resourceCount",newValue:function(e){return e}},date:{newKey:"currentSelectDate",newValue:function(e){var t=JSON.stringify({date:decodeURIComponent(e)});return t}}},a={};Object.keys(n||{}).forEach((function(e){r[e]?a[r[e].newKey]=r[e].newValue(n[e]):a[e]=n[e]}));var s=e.split("?")[0],l=Object.keys(a).reduce((function(e,t){return e+"".concat(t,"=").concat(a[t],"&")}),s+"?").slice(0,-1);return l},k=n(18946);function w(e){return"/pages/xtnt/business/detail/ticket-detail/index?".concat((0,h.Xh)(e),"&reuseInstance=2")}var I=n(16281);function Z(e){var t,n=e.ress,i=e.extraInfo,r=n||{},a=r.type,s=r.id,l=r.resourceId,c=r.token,f=r.extInfos,h=r.productIds,_=r.flags,v=r.name,g=r.spotid,y=r.poiId,x=r.tags,b=r.seckills,Z=(0,k.ec)(f),S=(0,k.KI)(_),C=(null===b||void 0===b?void 0:b[0].seckillId)||(null===b||void 0===b?void 0:b[0].seckillid),P=i||{},N=P.isResourcePage,D=P.ticketGroup,j=P.groupType,R=P.IsCtripPreferred,L=P.hasDiscountInfo,E=P.showTicketDetailPage,V=P.baseTicketDetailUrl,A=P.baiduBaseInfo,O=P.request,F=O.filters,M=void 0===F?[]:F,B=O.extParams,U=O.spotId,G=O.poiId,H=O.traceid,z=O.aid,q=O.sid,K=O.isNewNaquhua,W=O.ctm_ref,X=O.isscan,Y=O.date,Q=O.isAggregationPage,J="";M&&M.length&&(J=(null===(t=M[0])||void 0===t||null===(t=t.filterItems)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"");Y&&Q&&(J=Y);var $=(0,o.Z)({spotid:g||U,poiId:y||G,date:encodeURIComponent(J),token:encodeURIComponent(c),isscan:X,ctm_ref:W,traceid:H,ext:"source_gonglue","ext-shelfType":d.aC[j],"ext-IsCtripPreferred":R?"ctripPreferred":"","ext-shelfPage":"shoplist","ext-sellingviewspotid":U,label:K?"newNaquhua":"",hasDiscountInfo:L},B),ee=Boolean(S["singleResourceSaleFlag"]),te=Boolean(S["newStructure"]),ne=(0,k.K3)({type:a,jumpToBooking:ee}),ie=(0,o.Z)((0,o.Z)({},$),{},{poiid:y||G,optid:T({type:a,resourceId:l,id:s,date:J,jumpToBooking:ee}),ticketGroupId:null===D||void 0===D?void 0:D.id,showSku:ne,productId:9!==a&&8!=a||!ee?void 0:s,resourcetype:a});(0,I.Pj)(j)&&(ie.scene="delivery");var oe=w(ie,V),re="",ae={};if(7==a)return{url:p({id:s,tags:x,poiId:y,info:{groupType:j,ticketGroup:D},extInfos:f})};if(ne){ae=(0,o.Z)((0,o.Z)({},$),{},{resourceId:l||s,type:a,groupType:j,seckillid:C,productId:h&&h.length>0&&h[0]||void 0,baiduBaseInfo:A,date:J});var se=u(ae)||{};return{url:E?oe:se.url,showSkuLayer:!0,skuParams:(0,o.Z)((0,o.Z)({},ae),{},{extParams:se.extParams})}}var le=(0,o.Z)((0,o.Z)({},$),{},{random:Math.floor(1e4*Math.random()),aid:z,sid:q,optid:T({type:a,resourceId:l,id:s,date:J,jumpToBooking:ee}),ticketType:4==a?2:void 0,tid:2==a?l||s:void 0,productIds:8==a&&h&&h.length>0?h.join("|"):void 0,productId:9!==a&&8!=a||!ee?void 0:s});return re=m({bookingParams:le,extra:{formatedExtInfos:Z,type:a,id:s,name:v,newStructure:te,jumpToBooking:ee,isResourcePage:Boolean(N),extParams:B,groupType:j,seckillid:C,extInfos:f}}),{url:E?oe:re,bookingUrl:re}}function T(e){var t=e.type,n=e.resourceId,i=e.id,o=e.date,r=e.jumpToBooking,a="";return a=4==t?n:n||i,9!==t&&8!=t||!r||o||(a=""),a}var S=n(44047),C=n(44142),P=n(5243),N={},D=N,j=n(59217),R=n(18589),L=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,o,r,s,c,u,d,p,f,h,m,_,v,g,y,x,b,w,T,S,C,P,N,D,R,L,V,A,O,F,M,B,U,G,H,z,q;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.ress,o=t.extraInfo,!(0,I.iX)(o.groupType)){e.next=4;break}return r=n.urlInfo||{},s=r.app,c=r.h5,e.abrupt("return",{type:a.Os.booking,text:a.mG.booking,url:l.GI.getPlatform()==l.GI.PLATFORM_TYPE.H5?c:s});case 4:if(u=o||{},d=u.isResourcePage,p=u.reservation,f=u.groupType,h=n.stockstatus,m=n.payMode,_=n.type,v=n.inventoryTip,g=n.seckills,y=void 0===g?[]:g,x=n.flags,b=n.buyType,w=(0,k.Fr)(n),T=(0,k.KI)(x),h=d?(0,k.c$)(n):h,S=2==h,C=1==h,P=3==h,N="P"==m,D="O"==m,R=T&&T["hotSale"],L=T&&T["singleResourceSaleFlag"],V=(0,k.K3)({type:_,jumpToBooking:L}),A=(0,I.zu)(f),O={text:"\u9884\u8ba2",type:""},F=Z({ress:n,extraInfo:o}),M=F.url,B=F.showSkuLayer,U=F.bookingUrl,G=F.skuParams,3!=_){e.next=25;break}return e.next=23,E(n,{url:M,seckillsInfo:y[0]||{},serverSec:null!==(H=o.serverSec)&&void 0!==H?H:0,cardName:o.cardName});case 23:return z=e.sent,e.abrupt("return",z);case 25:return q=1==b,O.url=M,O.bookingUrl=U,O.isShowSku=B,O.skuParams=G,O.showTicketDetailPage=!(null===o||void 0===o||!o.showTicketDetailPage),S?(delete O.url,delete O.bookingUrl,O.type=a.Os.disabled,w?(O.text=a.mG.bookingFill,O.layerText=a.qn.bookingFill):(O.text=a.mG.disable,O.layerText=a.qn.disable,q&&(O.toastText="\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u5546\u54c1\uff5e"))):C?(w&&(N||p)?(O.type=a.Os.booking,O.text=a.mG.freeBooking,O.layerText=a.qn.freeBookig):(O.type=a.Os.booking,O.text=V?a.mG.select:(0,j.jJ)()?a.mG.customBooking:a.mG.booking,O.layerText=V?a.qn.select:a.qn.booking,D?O.text=a.mG.inPlacePay:v&&2==(0,k.ZV)(n)&&!V&&(O.type=a.Os.panicBuy,O.text=a.mG.panicBuy,O.layerText=a.qn.panicBuy)),R&&(w?(O.type=a.Os.booking,O.text=a.mG.freeBooking,O.layerText=a.qn.freeBookig):(O.type=a.Os.panicBuy,O.text=a.mG.panicBuy,O.layerText=a.qn.panicBuy)),A&&(O.type=a.Os.panicBuy)):P&&(delete O.url,delete O.bookingUrl,O.type=a.Os.comming,w?(O.text=a.mG.freeComing,O.toastText="\u8fd8\u6ca1\u5230\u5f00\u59cb\u65f6\u95f4\u54e6",O.layerText=a.qn.freeComing):(O.text=a.mG.coming,O.toastText="\u8fd8\u6ca1\u5230\u5f00\u552e\u65f6\u95f4\u54e6",O.layerText=a.qn.coming)),e.abrupt("return",O);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e,t){return V.apply(this,arguments)}function V(){return V=(0,r.Z)((0,i.Z)().mark((function e(t,n){var o,r,s,c,u,d,p,f,h,m,_,v,g,y;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.url,r=n.seckillsInfo,s=r.seckillid,c=r.seckillbegtime,r.seckillendtime,u=n.serverSec,d=n.cardName,p=t.isZeroPrice,f=t.stockstatus,h=6e5,3!=f){e.next=20;break}if((0,R.Al)()&&!((0,P.XU)(c)-u<h)){e.next=8;break}m={type:a.Os.comming,text:p?a.mG.freeComing:a.mG.panicComing,layerText:p?a.qn.freeComing:a.qn.panicComing,toastText:"\u672a\u5230\u5f00\u62a2\u65f6\u95f4",seckillid:s,seckillbegtime:c},e.next=18;break;case 8:return m={type:a.Os.addClock,text:a.mG.addClock,layerText:a.qn.addClock,toastText:"\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",seckillid:s,seckillbegtime:c,clockType:"addClock"},e.next=11,A();case 11:if(_=e.sent,!_){e.next=18;break}if(v=(0,P.XU)(c),g=l.N9.getSync("shelf-seckillid-".concat(s),"ottd")||{title:d,start:v+"",end:v+1e3+"",hasAlarm:!0,remindMinutes:"10"},!g){e.next=18;break}return e.next=18,S.Z.isEventExistPromise(g).then((function(e){var t,n;e&&0==(null===(t=e.status)||void 0===t?void 0:t.status)&&null!==(n=e.result)&&void 0!==n&&n.isExist&&(m={type:a.Os.hasClock,text:a.mG.hasClock,layerText:a.qn.hasClock,toastText:"\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",seckillid:s,seckillbegtime:c,clockType:"hasClock"})}));case 18:e.next=21;break;case 20:1==f?(y=o?"".concat(o,"&skid=").concat(s):"",m={type:p?a.Os.booking:a.Os.panicBuy,text:p?a.mG.freeBooking:a.mG.panicBuy,layerText:p?a.qn.freeBookig:a.qn.panicBuy,url:y,seckillid:s,seckillbegtime:c}):m={type:a.Os.disabled,text:p?a.mG.bookingFill:a.mG.snappedUp,layerText:p?a.qn.bookingFill:a.qn.snappedUp,toastText:"\u5df2\u62a2\u5149\uff0c\u4e0b\u6b21\u65e9\u70b9\u6765\u54e6",seckillid:s,seckillbegtime:c};case 21:return C.B.send("ottd_shelf_secclock_timeup",m),C.B.send("ottd_shelf_price_secclock_timeup",m),m.stockstatus=f,m.isZeroPrice=p,e.abrupt("return",m);case 26:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}var A=function(){return new Promise((function(e){try{null===D||void 0===D||D.checkPermissions({functions:["readcalendar"]},(function(t){var n="1"===(null===t||void 0===t?void 0:t.readcalendar);e(n)}))}catch(t){console.log(t),e(!1)}}))},O=n(99059),F=function(e){var t=e.extra;if(!(0,I.iX)(t.groupType)){var n=(0,O.Jz)(e)||{},i=n.tips;if(i){var o=[{type:"text",textType:i.imgUrl?"blue_dark":void 0,text:i.name,isShowArrow:i.showDetail,eventType:"buyTips"}];return null!==i&&void 0!==i&&i.imgUrl&&o.unshift({type:"image",imageUrl:i.imgUrl,imageType:"lowerlightspot"}),{tipsSubtitle:{textType:i.imgUrl?"blue_dark":"gray",text:i.name,isShowArrow:i.showDetail,prefix:i.imgUrl},propsData:i.propsData}}}},M=n(38233),B=function(e){var t=e.resource,n=e.extra,i=7===t.type;if((0,I.iX)(n.groupType)||i){var o=[],r=t.statisticInfo||{},a=r.commentScore,s=r.commentLevel,l=r.saleCount,c=U(t.tags),u=c.refundTagName,d=c.directPurchaseName;if(d&&o.push({type:"tag",tagType:"hollow_brown",text:d}),a||s){var p=a?a+"\u5206":"",f=[p,s].filter((function(e){return!!e})).join(" ");o.push({type:"tag",tagType:"divider_blue",text:f})}if(u&&o.push({type:"tag",tagType:"divider_gray",text:u}),!(0,I.iX)(n.groupType)&&l&&!(0,I.ce)(n.groupType)){var h=(0,M.Z)(l);o.push({type:"tag",tagType:"divider_gray",text:"\u5df2\u552e".concat(h)})}return{type:"wrap_show",items:o}}},U=function(e){var t="",n="";return(e||[]).forEach((function(e){if(e){var i=e||{},o=i.tagItems;o&&o.length&&(o||[]).forEach((function(e){if(e&&e.tagCode&&e.tagName){var i=e||{},o=i.tagName,r=i.tagCode;"RefundAnyTime"==r&&(t=o),"DirectPurchase"==r&&(n=o)}}))}})),{refundTagName:t,directPurchaseName:n}};function G(e){var t=e.seckills,n=e.serverSec,i=e.stockstatus,o=e.isPresell,r=e.key,a=e.isZeroPrice,s=(null===t||void 0===t?void 0:t[0])||{},l=s.seckillbegtime,c=s.seckillendtime,u=s.needCountdown,d=s.description,p=s.seckillid;if(l){var f=3==i,h=f?(0,P.XU)(l)-n:(0,P.XU)(c)-n,m=864e5;return{needCountDown:u,setTimerToOpen:f&&h<m,prefix:"".concat(o?"\u9884\u552e\u4f18\u60e0: ":"")+d,time:u||f?h:0,key:r,startTime:(0,P.XU)(l),endTime:(0,P.XU)(c),isPresell:o,stockstatus:i,isShow:f,seckillid:p,isZeroPrice:a}}}var H=n(3300),z={"\u4f4f":"https://dimg04.c-ctrip.com/images/1o52h12000bnlpezrE868.png","\u98df":"https://dimg04.c-ctrip.com/images/1o54312000bnlpenp3248.png","\u4eab":"https://dimg04.c-ctrip.com/images/1o55012000bnlpux5626F.png"},q={1:"\u4f4f",2:"\u4eab",3:"\u98df"};function K(e){var t=e.resource,n=e.extra;if((0,I.iX)(n.groupType)){var i=t.descInfoList,o=[],r=function(e){var t=null===i||void 0===i?void 0:i.find((function(t){var n;return q[null!==(n=t.type)&&void 0!==n?n:0]==e}));t&&o.push({textList:t.desc?[{text:t.desc,numberOfLines:"\u4eab"===e?2:1}]:[],imageUrl:z[e]})};for(var a in z)r(a);return{descList:o}}var s=(0,I.zu)(n.groupType),l=!s&&n.showTicketDetailPage||(0,j.g8)()?t.elementGroupNames:null;if(l){var c,u=[];return null===l||void 0===l||null===(c=l.slice(0,3))||void 0===c||c.forEach((function(e,n){var i,o;2===n&&l.length>3&&(i="\u53e6\u542b\u201c".concat(null===(o=l[3])||void 0===o?void 0:o.name,"\u201d\u7b49\u5171").concat(l.length,"\u9879"));var r=t.ressType===H.cM.custom;e.values&&u.push({textList:e.values.map((function(e){return{text:e}})),imageUrl:e.icon,totalDesc:i,textStyle:r?"custom_blue":void 0,imageStyle:r?"24X76":void 0})})),{descList:u}}}var W=function(e){var t,n,i=e.resource,o=e.extra,r=i.mediaInfo,a=i.descInfoList,s=null===r||void 0===r?void 0:r.imgUrl,l=o.ticketGroup||{},c=l.imgUrl,u=l.imgUrlType,d=void 0===u?0:u,p=o.subTicketGroup||{},f=p.subTicketGroupInfo,h=f||{},m=h.imgUrl,_=c||m||s,v=1==d,g=null===r||void 0===r?void 0:r.description,y=(null===a||void 0===a||null===(t=a.find((function(e){return 7===e.type})))||void 0===t?void 0:t.desc)||"",x=(null===a||void 0===a||null===(n=a.find((function(e){return 6===e.type})))||void 0===n?void 0:n.desc)||"";return _&&(0,I.Pj)(o.groupType)?{imageUrl:_,isVideo:v,bottom:{type:"tag",text:x,styleType:"gradient"},leftTopText:y}:_&&!(0,I.zu)(o.groupType)?{imageUrl:_,isVideo:v,bottom:{type:"tag",text:g}}:void 0};function X(e){var t,n,i=e.resource,o=e.extra;if((0,I.iX)(o.groupType)){var r=i.feature;return{type:"lightspot",text:'"'.concat(r,'"'),textStyle:"blue_dark"}}var a=(0,I.zu)(o.groupType),s=null===(t=i.descInfoList)||void 0===t||null===(t=t.find((function(e){return 5===e.type})))||void 0===t?void 0:t.desc;if(s&&(o.showTicketDetailPage&&!a||(0,j.g8)()))return{type:"lowerlightspot",text:s,textStyle:"blue_dark"};var l=null===(n=i.descInfoList)||void 0===n||null===(n=n.find((function(e){return 4===e.type})))||void 0===n?void 0:n.desc;return l&&(o.showTicketDetailPage&&!a||(0,j.g8)())?{type:"lightspot",text:l,textStyle:"blue_dark"}:void 0}var Y=function(e){var t,n,i,o,r,a,s,l,c,u,d,p,f,h,m,_,v,g,y=e.resource,x=e.extra,b=e.bookBtnName,w=e.isLightspot,Z=e.isLowerLightspot,T=e.discountType,S=e.discountPrice,C=null===(t=y.elementGroupNames)||void 0===t?void 0:t.length,P=null===(n=y.elementGroupNames)||void 0===n?void 0:n.reduce((function(e,t){var n,i;return e+(null!==(n=null===(i=t.values)||void 0===i?void 0:i.length)&&void 0!==n?n:0)}),0),N=null===(i=y.tags)||void 0===i||null===(i=i.find((function(e){return"categoryId"===e.tagType})))||void 0===i?void 0:i.tagItems,D=null===N||void 0===N||null===(o=N.find((function(e){return"firstLevelCategory"===e.tagName})))||void 0===o?void 0:o.tagCode,j=null!==(r=null===N||void 0===N||null===(a=N.find((function(e){return"secondLevelCategory"===e.tagName})))||void 0===a?void 0:a.tagCode)&&void 0!==r?r:"";return{productid:null===(s=y.productIds)||void 0===s?void 0:s.join(","),productname:y.fullName?y.fullName:y.name,resourcetype:y.type,resourceid:String(y.id),level1saleunitid:String(null===(l=x.ticketGroup)||void 0===l?void 0:l.id),level2saleunitid:String(null===(c=x.subTicketGroup)||void 0===c||null===(c=c.subTicketGroupInfo)||void 0===c?void 0:c.id),belongingviewspotid:String(y.spotid),stocktype:(0,k.ZV)({inventoryTipInfo:null!==(u=y.inventoryTipType)&&void 0!==u?u:""}),module_name:(0,I.Pj)(x.groupType)?"destination_rec":null!==(d=x.module_name)&&void 0!==d?d:"",discounttype:T,discountprice:String(S),elementcount:P,categoryunitcount:C,is_recommend:w?"1":"0",is_introduction:x.showTicketDetailPage?"1":"0",recommendtype:w?"\u4eae\u70b9":Z?"\u8d85\u503c\u5957\u9910":"",bookBtnName:b,picType:1===(null===(p=x.ticketGroup)||void 0===p?void 0:p.imgUrlType)?"\u89c6\u9891\u5934\u56fe":"\u7968\u79cd\u5934\u56fe",innerseq:x.innerseq,tipType:null!==(f=x.ticketGroup)&&void 0!==f&&f.desc?"\u7968\u79cd":"\u5206\u7ec4",subtktpos:x.ticketGroupIndex?x.ticketGroupIndex+1:"",vs_type:x.vs_type,is_vedio:null!==(h=x.is_vedio)&&void 0!==h?h:"",categoryid_l1:7===y.type?D:"",categoryid_l2:7===y.type?j:"",shipid:5===y.type?String(y.id):"",personname:null!==(m=null===(_=x.subTicketGroup)||void 0===_||null===(_=_.subTicketGroupInfo)||void 0===_?void 0:_.name)&&void 0!==m?m:"",personsubname:null!==(v=null===(g=x.subTicketGroup)||void 0===g||null===(g=g.subTicketGroupInfo)||void 0===g?void 0:g.subName)&&void 0!==v?v:""}},Q=function(e,t){var n,i,o;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),Number(((e*o+t*o)/o).toFixed(Math.max(n,i)))},J=function(e,t){var n,i,o,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),r=n>=i?n:i,Number(((e*o-t*o)/o).toFixed(r))};function $(e){var t,n,i=e||{},r=i.ress,a=i.naquhuaBannerInfo,s=i.extraInfo,l=s||{},c=l.groupType,d=l.isAggregationPage,p=l.button,f=r||{},h=f.flags,m=f.displayPrice,_=(0,k.KI)(h),v=_.preposeInstallment,g=(0,I.zu)(c),y=null===a||void 0===a?void 0:a.discountAmount,x=v&&!g&&!d&&1===(null===a||void 0===a?void 0:a.type)&&!!y;if(x){var b=J(m,y),w=p||{},Z=w.url,T=w.toastText,S=w.skuParams,C=w.isShowSku,P=u((0,o.Z)((0,o.Z)({},S),{},{label:"newNaquhua"}));delete p.skuParams;var N=0===(null===a||void 0===a||null===(t=a.descInfoList)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.type)&&(null===a||void 0===a||null===(n=a.descInfoList)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.desc)||"";return{title:"\u62ff\u53bb\u82b1\u65b0\u5ba2\xb7\u4ed8\u6b3e\u4e13\u4eab",subtitle:"\u518d\u51cf\xa5".concat(a.discountAmount),button:{text:"\u51cf\u540e\xa5".concat(b,"\u9884\u8ba2"),type:"naquhua",url:C?P:Z?Z+"".concat("&"===Z[Z.length-1]?"":"&")+"label=newNaquhua":"",toastText:T},layerInfo:{title:"\u62ff\u53bb\u82b1\xb7\u65b0\u5ba2\u4ed8\u6b3e\u4e13\u4eab",backgroundImgUrl:"https://dimg04.c-ctrip.com/images/0AS1212000a0oykp5CD54.png",desc:N}}}}var ee=function(e){var t,n,i=e.resource,o=i.priceInfo,r=i.marketPriceInfo,a=i.formatedFlags,s=i.displayPrice,l=i.isZeroPrice,c=null!==(t=null===o||void 0===o?void 0:o.price)&&void 0!==t?t:0,u=r&&Number(r.price)>Number(s||c)?null===r||void 0===r||null===(n=r.price)||void 0===n?void 0:n.toString():void 0;return 11==i.type?(0,k.LA)(i):{price:(null===s||void 0===s?void 0:s.toString())||(null===c||void 0===c?void 0:c.toString()),deletePrice:u,zero:l?"\u514d\u8d39":void 0,suffix:a&&a.minPriceFlag?"\u8d77":""}},te=function(e){var t;return e>0&&(t={type:"tag",tagType:"discount",text:"\u5df2\u4f18\u60e0\xa5".concat(e),value:e}),t},ne=function(e){var t,n,i,o,r,a=e.resource,s=null!==(t=null===(n=a.priceInfo)||void 0===n?void 0:n.price)&&void 0!==t?t:0,l=null!==(i=null===(o=a.marketPriceInfo)||void 0===o?void 0:o.price)&&void 0!==i?i:0,c=null!==(r=a.preferentialAmount)&&void 0!==r?r:0,u=0;return l>0&&l>s&&(u=J(l,s)),u+c},ie=!0,oe=function(e){var t=e.marketPriceInfo,n=e.priceInfo,i=e.promotions,o=void 0===i?[]:i,r=e.returnCash,a=e.formatedFlags,s=e.marketOriginPriceInfo,l=e.descInfoList,c=e.isZeroPrice,u=void 0!==c&&c,d=e.subTicketName,p=e.preposeInstallmentPromInfo,f=void 0===p?{}:p,h=a&&a.minPriceFlag;f.amount>0&&o.push(f);var m=re(o,n),_=m.minusAmount,v=void 0===_?0:_,g=m.promotionInfo,y=m.naquhuaAmount,x=g||{},b=x.selfPromData,k=t||{},w=k.price,I=void 0===w?0:w,Z=n||{},T=Z.price,S=void 0===T?0:T,C=Math.max(parseFloat(String(J(S,v||0))),0)||0;if(ie&&I>S){v=Q(v,J(I,S));var P=[],N=J(I,S),D={name:"\u643a\u7a0b\u9884\u8ba2\u4f18\u60e0",amout:N,discountText:"\u60e0",price:"-\xa5"+"".concat(N)};P.push(JSON.parse(JSON.stringify(D))),g?g.ctripReduceData=P:g={ctripReduceData:P}}var j="",R={},L="",E=!1;if(b&&!b.canUse)E=!0;else if(r){var V=r||{},A=V.cashBackAmount,O=V.maxCashBackAmount;V.cbType;(O||A)&&(E=!0)}R={price:C,from:h};var F=ie?"\u5df2\u4f18\u60e0":"\u5df2\u51cf",M=ie?Math.min(Math.max(S,I),v):Math.min(S,v);ie&&I&&I>C||I&&I>S&&S>=C?(j=I,L=M>0?"".concat(F,"\xa5").concat(M):"",E=!0):(!I||I<=S)&&S>C&&(L=M>0?"".concat(F,"\xa5").concat(M):"",E=!0);var B=ae(g,{delPrice:j,sprice:S,minPrice:R,returnCash:r,marketOriginPriceInfo:s,descInfoList:l,subTicketName:d,mprice:I,isCtripReduced:ie,priceTipList:e.priceTipList,minusAmount:v,naquhuaAmount:y}),U=se(M,g),G=U.discountType,H=U.discountPrice;return{price:{delPrice:j,minPrice:R,reducePrice:L,hasPriceLayer:E,isZeroPrice:u,discountType:G,discountPrice:H},promotionLayer:B}},re=function(e,t){if(!e||!e.length)return{};var n={},i={},o={},r={},a=[],s=[],l=[];e.forEach((function(e){if(e){var l=e.minustype,c=e.promotionstatus,u=e.amount,d=e.reductionMode,p=e.startAmount,f=e.descriptions,h=e.promotionDescs;if(1==e.type)1==l&&0==c?(n.amount=u,n.name="\u7acb\u51cf",n.price="-\xa5"+"".concat(u)):5==l&&0==c&&(n.amount=u,n.name="\u9650\u65f6\u7acb\u51cf",n.price="-\xa5"+"".concat(u)),n.discountText="\u51cf",n.descs=f||h,(null===n||void 0===n?void 0:n.name)&&a.push(JSON.parse(JSON.stringify(n)));else if(3==e.type){if(i={},1==d)i.amount=u,i.name="\u7528\u5238\u51cf\xa5".concat(u),i.price="-\xa5"+"".concat(u);else if(2==d){var m=100*J(1,Number(u)),_=m%10>0?m:m/10;i.name="\u7528\u5238".concat(1===u?"\u5168\u514d":"\u4eab"+_+"\u6298"),i.amount=p,i.price="-\xa5"+"".concat(p)}else if(3==d){var v=t.price;i.canUse=v&&Number(p)<=v;var g="\u6ee1".concat(p,"\u51cf").concat(u);i.name=g,i.show=g,i.canUse?(i.amount=u,i.price="-\xa5"+"".concat(u)):i.name="".concat(i.name,"(\u672a\u6ee1\u8db3\u4f7f\u7528\u95e8\u69db)")}i.amount&&(i.discountText="\u60e0"),i.descs=f||h}else 4==e.type?(o.amount=u,o.name="\u673a\u7968\u4e13\u4eab",o.descs=f||h,o.amount&&(o.discountText="\u51cf",o.price="-\xa5"+"".concat(u))):5==e.type&&(r.amount=u,r.name="\u4f7f\u7528\u62ff\u53bb\u82b1\u4ed8\u6b3e (\u65b0\u5ba2\u518d\u51cf\xa5".concat(u,")"),r.amount&&(r.discountText="\u51cf",r.price="-\xa5"+"".concat(u)),(null===r||void 0===r?void 0:r.name)&&s.push(JSON.parse(JSON.stringify(r))))}}));var c=0,u=a.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0);return o.amount&&u?o.amount<u?(a.forEach((function(e){return e.name="".concat(e.name,"(\u4e0e\u673a\u7968\u4e13\u4eab\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528)")})),c=Q(c,u),delete o.price):(o.name="".concat(o.name,"(\u4e0e\u7acb\u51cf\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528)"),c=Q(c,o.amount),a.forEach((function(e){return delete e.price}))):c=Q(c,o.amount||u||0),i.amount&&(c=Q(c,i.amount)),r.amount&&(c=Q(c,r.amount)),{minusAmount:c,naquhuaAmount:r.amount||0,promotionInfo:{reducedDataArr:a,selfPromData:i,airTicketData:o,preposeInstallmentDataArr:s,ctripReduceData:l}}},ae=function(e,t){var n=t.delPrice,i=t.sprice,r=t.minPrice,a=t.returnCash,s=t.marketOriginPriceInfo,l=t.descInfoList,c=t.subTicketName,u=(t.mprice,t.isCtripReduced),d=t.priceTipList,p=t.minusAmount,f=t.naquhuaAmount,h={totleContent:{}},m=e||{},_=m.reducedDataArr,v=m.selfPromData,g=m.airTicketData,y=m.ctripReduceData,x=m.preposeInstallmentDataArr,b=!1,k=[];[y,g,_,v].forEach((function(e){e instanceof Array?(k=k.concat(e),b=!0):e&&e.name&&(k.push(e),b=!0)}));var w=u?k.map((function(e){return{total:(0,o.Z)((0,o.Z)({},e),{},{isNoDash:!0})}})):k.length>0?[{total:{name:"\u4f18\u60e0",price:"-\xa5"+"".concat(p-f)},items:k}]:[];x&&x.length>0&&(b=!0,w.push({total:{name:"\u4f7f\u7528\u62ff\u53bb\u82b1\u4ed8\u6b3e\uff08\u65b0\u5ba2\u518d\u51cf\xa5".concat(f,"\uff09"),price:"-\xa5"+f}}));var I=s&&s.currency,Z="CNY"!=I&&"RMB"!=I,T={total:{name:c,marketPrice:n?"\xa5"+"".concat(n):"",price:i||0==i?"\xa5"+"".concat(i):"",extraPrice:Z?s:null,isNoDash:!c}};h.content=[T].concat(w),b&&(h.totleContent={price:r&&r.price?"\xa5"+"".concat(r.price):""});var S=[];if(a){var C=a.desc,P=a.cbType,N=a.maxCashBackAmount,D=a.cashBackAmount;S.push({name:"\u8fd4\u73b0",descs:C?[C]:[],price:"\xa5"+"".concat(1==P?N:D)});var j=1==P?"\u6700\u9ad8\u53ef\u8fd4\xa5".concat(N):"\u8fd4\xa5".concat(D);h.totleContent.info="\u9884\u8ba2\u6210\u529f\u540e".concat(j)}S.length&&(h.extraList=S);var R=(l||[]).filter((function(e){return 0==e.type}))||[];return R&&R.length&&(h.descTips=(R||[]).map((function(e){return e.desc}))),h.priceTipList=d,h},se=function(e,t){var n,i="\u65e0",o=null!==e&&void 0!==e?e:0,r=!(null===t||void 0===t||null===(n=t.ctripReduceData)||void 0===n||!n.length),a=!(null===t||void 0===t||!t.selfPromData);return r&&a&&(i="\u95e8\u5e02\u4ef7+\u5176\u5b83\u4f18\u60e0"),r&&!a&&(i="\u95e8\u5e02\u4ef7"),!r&&a&&(i="\u5176\u5b83\u4f18\u60e0"),{discountType:i,discountPrice:o}},le=function(e){var t=e.resource,n=e.extra;if(t&&!(0,I.zu)(n.groupType)){var i=n.subTicketGroup||{},o=i.subTicketGroupInfo,r=o||{},a=r.suitablePeopleDesc,s=r.name,l=r.subName,c=n.ticketGroup||{},u=c.imgUrl,d=o||{},p=d.imgUrl,f=!1;if(a){var h,m;if(u||p)f=(null===(h=a.trim())||void 0===h?void 0:h.length)>7;else f=(null===(m=a.trim())||void 0===m?void 0:m.length)>12;var _={dataList:[{peopleName:"".concat(s||"").concat(l?"("+l+")":""),peopleDescStr:"\u9002\u7528\u6761\u4ef6\uff1a".concat(a)}]},v=a.trim().replace(/[\r\n]/gi,""),g=t.ressType===H.cM.custom,y={textType:g?"custom_light_blue":"gray",text:g?"\u9002\u7528\u4eba\u7fa4\uff1a".concat(v):v,isShowArrow:f,numberOfLines:(0,j.fi)()&&!g?2:1};return{peopleSubtitle:!n.needCombineGroup||g?y:void 0,peopleLayer:_}}}},ce=n(22276);function ue(e){var t=e.activityTime,n=e.serverSec,i=e.tagName,o=e.key,r=t||{},a=r.startTime,s=r.endTime;if(t&&n&&s){var l=(0,P.XU)(a),c=(0,P.XU)(s);if(!(n<l||n>c-5e3)){var u=864e5,d=7*u;return c-n>d?{needCountDown:!1,prefix:"".concat(i,":").concat((0,P.p6)(c),"\u7ed3\u675f"),key:o}:c-n>u?{needCountDown:!1,prefix:"".concat(i,":\u4ec5\u5269").concat((0,P.Ug)(c,n),"\u5929"),key:o}:{needCountDown:!0,prefix:"".concat(i,":\u4ec5\u5269{0}"),time:c-n,key:o,startTime:l,endTime:c}}}}var de=function(e){var t,n=e.resource,i=null===(t=n.tags)||void 0===t||null===(t=t.find((function(e){return"PT_BRAND_TAG"===e.tagType})))||void 0===t?void 0:t.tagItems,o=null===i||void 0===i?void 0:i.find((function(e){return"Preferred"===e.tagCode||"xiechengyouxuan"===e.tagCode||"xcyx"===e.tagCode}));return o},pe=function(e){var t,n=e.resource,i=e.extra,o=null!==(t=n.tags)&&void 0!==t?t:[];if((0,I.i8)(i.groupType)){var r,a=null===(r=i.ticketGroup)||void 0===r||null===(r=r.ticketRecommend)||void 0===r?void 0:r.recommendTags;if(null!==a&&void 0!==a&&a.length){var s=a.map((function(e){return{type:"tag",text:e,tagType:"divider_red"}})),l={type:"icon",iconType:"liked",styleType:"red"};return[l].concat((0,ce.Z)(s))}}if((0,I.N3)(i.groupType)){var c=[];o.forEach((function(e){var t;null===e||void 0===e||null===(t=e.tagItems)||void 0===t||t.forEach((function(e){if("Activity"===e.tagCode&&e.activityTime){var t=ue({tagName:e.tagName,activityTime:e.activityTime,serverSec:i.serverSec,key:n.token});c.push({type:"countdown",text:null===t||void 0===t?void 0:t.prefix,tagType:"divider_red",countdown:t})}"DiscountLabel"===e.tagCode&&c.push({type:"tag",text:e.tagName,tagType:"divider_red"})}))}));var u={type:"icon",iconType:"coupon",styleType:"red"};if(c.length)return[u].concat(c)}},fe=function(e){var t,n;if(!(0,j._Q)())return[];var i=e.resource,o=null!==(t=null===(n=i.tags)||void 0===n||null===(n=n.find((function(e){return"PT_TOP_TAG"===e.tagType})))||void 0===n?void 0:n.tagItems)&&void 0!==t?t:[],r=me(e,o,"PT_TOP_TAG");return r},he=function(e){var t,n,i,o;if(!(0,j._Q)())return[];var r=e.resource,a=e.extra,s=null!==(t=null===(n=r.tags)||void 0===n||null===(n=n.find((function(e){return"PT_POWER_TAG"===e.tagType})))||void 0===n?void 0:n.tagItems)&&void 0!==t?t:[],l=me(e,s,"PT_POWER_TAG"),c=7===r.type,u=null!==(i=null===(o=r.statisticInfo)||void 0===o?void 0:o.saleCount)&&void 0!==i?i:0;if(u>0&&!c&&!(0,I.ce)(a.groupType)){var d=(0,M.Z)(u);l.push({type:"tag",text:"\u5df2\u552e".concat(d),tagType:"divider"})}return(0,k._q)(e)&&l.push({type:"tag",text:"\u8d2d\u4e70\u987b\u77e5",tagType:"divider",isShowArrow:!0,eventType:"buyNote"}),l},me=function(e,t,n){var i,o=e.resource,r=e.extra,a=7===o.type;(0,I.N3)(r.groupType)&&(t=t.filter((function(e){return"Activity"!==e.tagCode&&"DiscountLabel"!==e.tagCode})));var s=null===(i=t)||void 0===i?void 0:i.map((function(e,t){var i,s,l=null===(i=e.items)||void 0===i||null===(i=i.find((function(e){return"disPlayStyle"===e.key})))||void 0===i?void 0:i.value,c=null===(s=e.items)||void 0===s||null===(s=s.find((function(e){return"displayGroupId"===e.key})))||void 0===s?void 0:s.value;"green"==c&&(c="divider_green");var u=a?c:l;if(e.activityTime){var d=ue({tagName:e.tagName,activityTime:e.activityTime,serverSec:r.serverSec,key:"".concat(o.token,"-").concat(n,"-").concat(t)});return{type:"countdown",text:e.tagName,tagType:u,countdown:d}}return{type:"tag",text:e.tagName,tagType:u}}));return s};function _e(e){return ve.apply(this,arguments)}function ve(){return ve=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,s,l,c,u,d,p,f,h,m,_,v,g,y,x,b,w,Z,T,S,C,P,N,D,R,E,V,A,O,M,U,z,q,Q,J,ie,re,ae,se,ce,ue,me,_e,ve,ge,ye,xe,be,ke;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d=t.resource,p=t.extra,f=7===d.type,h=p.isNoSale,m=p.applicationConfig,_=p.request,v=(0,I.zu)(p.groupType),g=1==d.stockstatus,p.showTicketDetailPage=g&&d.formatedFlags&&d.formatedFlags.ticketGroupCard&&(0,j.tv)(),y=W(t),x={text:5===p.groupType?d.name:d.fullName,isShowArrow:p.showTicketDetailPage},w=F(t)||{},Z=w.tipsSubtitle,T=w.propsData,!p.showTicketDetailPage&&Z&&(b=Z),S=le(t)||{},C=S.peopleLayer,P=S.peopleSubtitle,N=!p.showTicketDetailPage&&!Z&&C&&(h||P),N&&(b=P),D=N?C:void 0,R=[],E=X(t),V=K(t),A=de(t),A&&(x.prefix="https://dimg04.c-ctrip.com/images/1o56x12000bmr7yf125E6.png_.webp"),O=pe(t),M=O&&O.length>0,U=M?{type:"wrap_hidden",items:O}:void 0,z=fe(t),z.length>0&&!f&&p.groupType!=H.XN.seckill&&R.push({type:"wrap_show",items:z}),q=he(t),Q=[],q.length>0&&(y?R.push({type:f?"wrap_hidden":"wrap_show",items:q}):(p.groupType==H.XN.seckill&&Q.push({type:"wrap_show",items:z}),Q.push({type:"wrap_show",items:q}))),z.length>0&&f&&R.push({type:"wrap_hidden",items:z}),J=B(t),J&&R.push(J),ie=ne(t),re=te(ie),h){e.next=38;break}return e.next=35,L({ress:d,extraInfo:(0,o.Z)((0,o.Z)({},p),{},{hasDiscountInfo:!!re,IsCtripPreferred:!!A,cardName:x.text})});case 35:e.t0=e.sent,e.next=39;break;case 38:e.t0={type:"",text:""};case 39:return ae=e.t0,se=ae&&(ae.type==a.Os.booking||ae.type==a.Os.panicBuy),ce=se?d.inventoryTip:"",ue={seckills:null!==(n=d.seckills)&&void 0!==n?n:[],stockstatus:null!==(r=d.stockstatus)&&void 0!==r?r:0,serverSec:null!==(s=p.serverSec)&&void 0!==s?s:0,isPresell:1==d.buyType,key:d.token,isZeroPrice:(0,k.Fr)(d)},me=(0,I.e3)(d)?G(ue):void 0,_e=$({ress:d,extraInfo:{groupType:p.groupType,button:ae,isAggregationPage:p.isResourcePage},naquhuaBannerInfo:p.naquhuaBannerInfo}),ve=(0,k.BX)({resource:d,showTicketDetailPage:p.showTicketDetailPage,button:ae,groupId:p.groupId||0,groupType:p.groupType,request:_}),ge=ee(t),ye=oe((0,o.Z)((0,o.Z)({},d),{},{priceTipList:(0,k._A)({priceTip:m}),subTicketName:(0,k.U_)(t)})),xe=null!==re&&void 0!==re&&re.text?{promotionLayerContent:ye.promotionLayer,buttonInfo:{type:ae.type,layerText:ae.layerText,toast:ae.toastText,url:ae.url,seckillid:null===ae||void 0===ae?void 0:ae.seckillid}}:void 0,be=Y((0,o.Z)((0,o.Z)({},t),{},{isLightspot:!("lightspot"!==(null===E||void 0===E?void 0:E.type)),isLowerLightspot:!("lowerlightspot"!==(null===E||void 0===E?void 0:E.type)),bookBtnName:ae.text,discountType:null===ye||void 0===ye||null===(l=ye.price)||void 0===l?void 0:l.discountType,discountPrice:null===ye||void 0===ye||null===(c=ye.price)||void 0===c?void 0:c.discountPrice})),ke=null===(u=((null===d||void 0===d?void 0:d.extInfos)||[]).find((function(e){return e.key="backGroundImgUrl"})))||void 0===u?void 0:u.value,e.abrupt("return",{imageInfo:y,title:x,subtitle:b,matrix:R,priceInfo:ge,priceBottomTag:re,button:ae,inventoryTip:ce,leftBottomMatrix:Q,countdown:me,groupType:p.groupType,isGradientBackground:v,metricData:be,url:ae.url,tipsPropsData:T,bottomBanner:_e,peopleLayerParams:D,buyNoteUrlParams:ve,priceLayerParams:xe,isNoSale:11===d.type,showTicketDetailPage:p.showTicketDetailPage,lightspot:E,descList:V,topLine:U,backgroundImageUrl:ke});case 52:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}},18946:function(e,t,n){"use strict";n.d(t,{Fr:function(){return l},K3:function(){return c},ZV:function(){return u},ec:function(){return d},KI:function(){return p},c$:function(){return f},_q:function(){return h},BX:function(){return _},xw:function(){return v},LA:function(){return g},_A:function(){return y},U_:function(){return x}});var i=n(298),o=n(85187),r=n(49671),a=n(16281),s=n(14062);function l(e){var t=e||{},n=t.priceInfo,i=t.flags,o=p(i),r=o.minPriceFlag,a=o.isSameSalePrice;return n&&0===n.price&&!r&&a}function c(e){var t=e.type,n=e.jumpToBooking;return!(9!=t&&8!=t&&10!=t&&6!=t&&12!=t&&1!=t||n)}var u=function(e){var t=e||{},n=t.inventoryTipType,i={normal:0,limited:1,panic:2};return[1,3,5,7].includes(n)?i.panic:[2,4,6,8,9,10,11].includes(n)?i.limited:i.normal},d=function(e){if(!e||!e.length)return{};var t={};return(e||[]).forEach((function(e){if(e&&e.key){var n=e.key,i=e.value,o=i;t[n]=o}})),t},p=function(e){if(!e||!e.length)return{};var t={};return(e||[]).forEach((function(e){e&&(t[e]=!0)})),t},f=function(e){if(!e)return{};var t=e.terminals,n=e.type,i=e.stockstatus;if(5===n)return 1;if(!t||!t)return 0;var r={RN:5,mini:21,H5:7},a=r[o.GI.getPlatform()],s=(t||[]).find((function(e){return e&&e.tmalid==a}));return s?s.issale?i:3:0},h=function(e){var t=!0,n=e.resource,i=e.extra,o=i.isNoSale;return(o||5==n.type||7==n.type||n.formatedFlags&&n.formatedFlags.ticketGroupCard||(0,a.iX)(i.groupType))&&(t=!1),t},m=function(e){var t=e.ress,n=e.showTicketDetailPage,i=t.type,o=t.flags,r=p(o),a=r&&r["singleResourceSaleFlag"],s=!0;return(n||5==i||7==i||8==i||9==i||10==i||12==i||6==i&&!a||1==i&&!a)&&(s=!1),s},_=function(e){var t,n,i=e.resource,o=e.button,r=e.showTicketDetailPage,l=e.groupId,c=e.groupType,d=e.request;if(!(0,a.iX)(c)&&m({ress:i,showTicketDetailPage:r})){var p=d||{},f=p.filters,h=p.traceid,_=p.spotId,v=p.poiId,g=i||{},y=g.type,x=g.id,b=g.seckills,k=g.inventoryTip,w=g.productIds,I=g.resourceId,Z=g.inventoryTipType,T=g.extInfos,S=1==y||2==y||3==y,C=w&&w.length>0&&w[0]||void 0;return{spotId:_,resourceId:S?s.Z.isBaiduMap()&&I||x:I,seckillid:(null===b||void 0===b||null===(t=b[0])||void 0===t?void 0:t.seckillId)||(null===b||void 0===b||null===(n=b[0])||void 0===n?void 0:n.seckillid),isBox:2==y,buttonInfo:o,productId:S?void 0:C,traceid:h,filters:f,stocktype:k?u(i):null,groupId:l,poiId:v,isFromShelf:!0,groupType:c,inventoryTip:k,inventoryTipType:Z,extInfos:T,baiduBaseInfo:null===d||void 0===d?void 0:d.baiduBaseInfo}}},v=function(e){var t=(0,r.ji)();e=(0,i.Z)((0,i.Z)({},t),e);var n=e,o=n.viewspotid,a=n.resourceid,s=n.pos,l=n.groupid,c=n.level1saleunitid,u=n.level2saleunitid,d=n.channelid;return{type:"click",params:{key:"tkt_spotdetail_share_click",actioncode:"tkt_spotdetail_share_click",viewspotid:o,resourceid:a,pos:s,groupid:l,level1saleunitid:c,level2saleunitid:u,channelid:d}}},g=function(e){var t,n=e||{},i=n.priceInfo,o=n.priceType,r=null!==(t=null===i||void 0===i?void 0:i.price)&&void 0!==t?t:0;return 1==o?{zero:"\u514d\u8d39"}:0!=o&&o?i&&0===i.price?{prefix:"\u90e8\u5206\u65e5\u671f\u514d\u8d39",suffix:""}:{prefix:"\u53c2\u8003\u4ef7\xa5".concat(r).concat(3==o?"\u8d77":""),suffix:""}:{prefix:"\u6682\u65e0\u62a5\u4ef7",suffix:""}},y=function(e){var t=e.priceTip;if(t){var n=JSON.parse((null===t||void 0===t?void 0:t.value)||"{}"),i=n.desc,o=(i||[]).map((function(e){return{type:"text",text:e}})),r=o.map((function(e){return e.text})).join("\n");return r}},x=function(e){var t=e||{},n=t.resource,i=t.extra,o=i||{},r=o.subTicketGroup,a=r||{},s=a.subTicketGroupInfo,l=void 0===s?{}:s,c=l.name,u=void 0===c?"":c,d=l.subName,p=d?"".concat(u," (").concat(d,")"):u,f="",h=n||{},m=h.descInfoList;if(m&&m.length){var _=m.find((function(e){return 3===e.type}));f=_&&_.desc}return p||f}},80630:function(e,t,n){"use strict";n.d(t,{Q$:function(){return r},bq:function(){return a},AH:function(){return s},PE:function(){return l}});var i=n(45023),o=n(85187),r=(0,i.Z)((0,i.Z)((0,i.Z)({},o.GI.PLATFORM_TYPE.CRN,5),o.GI.PLATFORM_TYPE.H5,7),o.GI.PLATFORM_TYPE.Mini,21),a=(0,i.Z)((0,i.Z)((0,i.Z)({},o.GI.PLATFORM_TYPE.CRN,115),o.GI.PLATFORM_TYPE.H5,116),o.GI.PLATFORM_TYPE.Mini,117),s=(0,i.Z)((0,i.Z)((0,i.Z)({},o.GI.PLATFORM_TYPE.CRN,1),o.GI.PLATFORM_TYPE.H5,2),o.GI.PLATFORM_TYPE.Mini,3),l=(0,i.Z)((0,i.Z)((0,i.Z)({},o.GI.PLATFORM_TYPE.CRN,2),o.GI.PLATFORM_TYPE.H5,1),o.GI.PLATFORM_TYPE.Mini,3)},42792:function(e,t,n){"use strict";n.r(t),n.d(t,{getFilterStatus:function(){return u}});var i=n(298),o=n(85187),r=n(5243),a=function(e,t,n){var i,o;if(!e)return null;var r,a=e||{},u=a.filters,d=void 0===u?[]:u,p=a.festivals,f=void 0===p?[]:p,h={},m={},_=[],v=null,g=null,y=-1;(d.forEach((function(e){"TagFilter"==e.type&&(h=e),"DateFilter"==e.type&&(m=e)})),null!==(i=h)&&void 0!==i&&null!==(i=i.filterItems)&&void 0!==i&&i.length)&&(h.filterItems.forEach((function(e){(e||e.key)&&("TodayCanBook"==e.key&&(v=e),"TomorrowCanBook"==e.key&&(g=e))})),null!==t&&void 0!==t&&t.length&&(y=((null===(r=h)||void 0===r?void 0:r.filterItems)||[]).findIndex((function(e){var n;return e&&e.key&&(null===t||void 0===t||null===(n=t[0])||void 0===n||null===(n=n.filterItems)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.key)==(null===e||void 0===e?void 0:e.key)})),-1==y&&(y=n),-1==y||t[0].filterItems[0]||(t[0].filterItems[0].value=h.filterItems[y].value)));void 0!==y&&-1!=y||(y=n);var x={},b=(null===(o=m)||void 0===o?void 0:o.filterItems)||[];if(b.length){var k,w=b.slice(0,3),I=s(f,w,b);w.forEach((function(e){if(e){var t=e.value;e.type=h.type,v&&v.value==t?e.key=v.key:g&&g.value==t?e.key=g.key:e.type=m.type;var n=c(e);_.push({type:e.type,key:e.key,text:n,date:e.value,label:e.tag,current:y})}}));var Z=3==y&&null!==t&&void 0!==t&&null!==(k=t[0])&&void 0!==k&&null!==(k=k.filterItems)&&void 0!==k&&k[0]?c(t[0].filterItems[0]):"\u66f4\u591a\u65e5\u671f",T={type:"DateFilter",key:"Date",isMoreDate:!0,text:Z};I&&(T.label=I),x=l(b),x&&(T.calendarDate=x),_.push(T)}return{filterItems:_,fdefault:y}},s=function(e,t,n){if(!e||0==(null===e||void 0===e?void 0:e.length))return"";for(var i,o=function(){var i=e[r],o=i.date,a=i.name,s=i.realHoliday;if(s){var l=!1,c=(n||[]).findIndex((function(e){return o==e.value}))>-1;if(t.forEach((function(e){var t=e.value;o==t&&c&&(e.tag=a,l=!0)})),!l&&c)return{v:"\u8ba2".concat(a)}}},r=0;r<e.length;r++)if(i=o(),i)return i.v;return""},l=function(e){if(!e)return{};var t={},n=(0,r.fh)(new Date),i=(0,r.fh)((new Date).getTime()+2592e6),a=o.hj.isApp()?(0,r.rR)(n):n,s=Array.from({length:31});e&&e.length&&e.forEach((function(e){if(e){var t=e.value,n=Math.ceil((new Date((0,r.BW)(t)).getTime()-(new Date).getTime())/864e5);n>=0&&(s[n]=t)}})),s.forEach((function(e,n){if(!e){var i=24*n*60*60*1e3+(new Date).getTime(),o=(0,r.al)(i);t[o]={disable:!0}}}));var l={showToday:!0};return{startDate:n,endDate:i,currentDate:a,dayConfig:t,configuration:l}},c=function(e){if(!e)return"";var t=e.key,n=e.value;switch(t){case"TodayCanBook":return"\u8ba2\u4eca\u65e5";case"TomorrowCanBook":return"\u8ba2\u660e\u65e5";default:var i=(new Date).getFullYear(),o=(0,r.Jr)(n),a=o.year,s=o.month,l=o.day;return i==a?"\u8ba2".concat(s,"\u6708").concat(l,"\u65e5"):(a%=100,"\u8ba2".concat(a,"\u5e74").concat(s,"\u6708").concat(l,"\u65e5"))}},u=function(e){var t,n=e.filters,i=e.hiddenNum,o=e.refreshFilter,r=(null===n||void 0===n||null===(t=n[0])||void 0===t||null===(t=t.filterItems)||void 0===t?void 0:t[0])||null;return{isTimeOver:r&&o,hiddenNum:i>0?i:-1}},d=function(e){var t=e.response,n=e.request,o=t.shelfInfo,r=void 0===o?{}:o,s=n.defaultFilters,l=n.filters,c=void 0===l?null:l,d=n.firstRessTotal,p=n.filter_fdefault,f=r.filterResult,h=r.resources,m=void 0===h?[]:h,_=r.flags,v=d-m.length,g=(_||[]).includes("refreshFilter");n.shelfFilter=n.firstRessTotal<4&&(null===s||void 0===s||!s.length)?{}:a(f,c,p);var y=u({filters:n.filters,hiddenNum:v,refreshFilter:g})||{};return(0,i.Z)((0,i.Z)({},n.shelfFilter),{},{filterStatus:y})};t["default"]=d},78248:function(e,t,n){"use strict";n.d(t,{U:function(){return a},R:function(){return s}});var i=n(298),o=n(85187),r=n(63778);function a(e){var t=(0,r.Q)(e);return(0,i.Z)((0,i.Z)({},t),{},{sceneParam:c(e)})}function s(e){var t=a(e),n=e||{},o=n.pageId;return{visible:!1,data:(0,i.Z)((0,i.Z)({},t),{},{pageId:o}),clientEnv:{env:t.env,ctType:0,clientType:t.clientEnv}}}var l={fat:"5w5f77k93fax",prod:"29zavd6trf87"},c=function(e){var t=e||{},n=t.poiId,i=t.spotId,r=t.isscan,a=[];n&&a.push({type:3008,value:String(n)}),i&&a.push({type:3009,value:String(i)});var s=[],c=r?5013:5014;return s.push({type:c,value:String(c)}),{sceneCode:l[o.GI.getDevEnv().toLowerCase()],filters:[{filterSubId:2003,filterValueList:[{type:2007,value:"use-poiid-query"}]},{filterSubId:3006,filterValueList:a},{filterSubId:5002,filterValueList:s}]}}},63778:function(e,t,n){"use strict";n.d(t,{Q:function(){return a},H:function(){return s}});var i=n(298),o=n(85187),r=n(80630);function a(e){var t=e||{},n=t.aid,i=t.sid,a=t.clientId,s=t.source,l=t.productId,c=t.spotId,u=t.poiId,d=t.receivePromotionType;return{env:o.GI.getDevEnv().toLowerCase(),clientEnv:r.AH[o.GI.getPlatform()],saleChannel:r.Q$[o.GI.getPlatform()],allianceId:Number(n)||0,siteId:Number(i)||0,clientId:a,locale:"zh-CN",source:s||"THINGS_TODO",currency:"CNY",productId:l||"",scenicSpotId:c,poiId:u,isShowClaimedModule:"TICKET"!=s,receivePromotionType:d}}function s(e){var t=a(e),n=e||{},o=n.isShowEmptyContent,r=n.needPopover,s=n.forceReloadTimestamp,l=n.pageId;return{visible:!1,clientEnv:{env:t.env,ctType:0,clientType:t.clientEnv},isShowClaimedModule:t.isShowClaimedModule,isShowEmptyContent:o,needPopover:r,data:(0,i.Z)((0,i.Z)({},t),{},{forceReloadTimestamp:s,pageId:l})}}},83586:function(e,t,n){"use strict";n.r(t);var i=n(5243),o=864e5,r=30*o,a=function(e){var t,n,a,l,c=e.response,u=e.request,d=null===c||void 0===c||null===(t=c.shelfInfo)||void 0===t||null===(t=t.shelfTypes)||void 0===t?void 0:t.some((function(e){return 1===e.type}));if(!d)return null;var p=null===u||void 0===u||null===(n=u.filters)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.filterItems)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.value,f=null===(a=c.shelfInfo)||void 0===a||null===(a=a.ResponseStatus)||void 0===a?void 0:a.Timestamp,h=f?parseInt(f.substring(6)):(new Date).valueOf(),m=(0,i.fh)(h),_=p||(null===(l=u.hotelDate)||void 0===l||null===(l=l.selectedDate)||void 0===l?void 0:l.beginDate);_||(_=m);var v=u.hotelDate;v||(v={selectedDate:{beginDate:_,endDate:(0,i.fh)(new Date(_).valueOf()+o)},optionalDate:{beginDate:m,endDate:(0,i.fh)(new Date(m).valueOf()+r)}});var g=new Date(v.selectedDate.beginDate).getTime(),y=new Date(v.selectedDate.endDate).getTime(),x=(y-g)/o,b=s({response:c,hotelDate:v,duration:x});return{hotelDate:v,duration:x,metricData:b}},s=function(e){var t,n=e.response,i=e.hotelDate,o=e.duration,r=null===(t=n.shelfInfo)||void 0===t?void 0:t.shelfTypes,a=null===r||void 0===r?void 0:r.findIndex((function(e){return 1===e.type})),s=(null===r||void 0===r?void 0:r.find((function(e){return 1===e.type})))||{},l=s.id,c=s.name,u=s.label;return{tabid:l,tabname:c,tabindex:a,iconname:u,producttype:"\u9152\u5e97",checkin:i.selectedDate.beginDate,checkout:i.selectedDate.endDate,duration_date:o}};t["default"]=a},49155:function(e,t,n){"use strict";n.r(t);var i=n(79301),o=n(45023),r=n(95308),a=n(79975),s=n(39726),l=n(68455),c=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,c,u,d,p,f,h,m,_,v,g,y,x,b,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V,A,O,F,M;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.hotelList,r=t.baseTicketDetailUrl,c=t.request,u=c||{},d=u.hotelPosInfo,p=u.spotId,f=u.filters,h=d||{},m=h.hotelGroup,_=n||{},v=_.fetched,g=void 0!==v&&v,y=_.data,x=void 0===y?[]:y,b=_.message,k=m||{},w=k.groupId,I=k.groupName,Z=k.name,T=k.ticketGroups,S=void 0===T?[]:T,C=k.tabType,P=k.id,N=k.activityDetail,D=S&&S.length||0,g){e.next=8;break}return e.abrupt("return",{showBreathe:!0,tabType:C,groupId:w,groupList:(0,o.Z)({},w,{type:C,cardList:[],visibleNumber:2})});case 8:j={},j.shelfTabInfo=(0,o.Z)({},w,""),j.tabType=C,j.groupName=1==D?S[0]&&S[0].name:I||Z,R=[],L=0;case 14:if(!(L<(null===x||void 0===x?void 0:x.length))){e.next=26;break}if(E=x[L],E){e.next=18;break}return e.abrupt("continue",23);case 18:return V={ticketGroup:x,groupId:w,ressDesc:!1,groupType:C,ticketGroupIndex:L,activityDetail:N,module_name:a.BF[C],spotId:p,baseTicketDetailUrl:r,baiduBaseInfo:null===c||void 0===c?void 0:c.baiduBaseInfo,poiId:c.poiId,request:c},e.next=21,(0,l.u)({resource:E,extra:V});case 21:A=e.sent,A&&R.push(A);case 23:L++,e.next=14;break;case 26:return O=Math.min(R.length,3),F="",f&&f.length>0&&(M=f[0].filterItems,M&&(F=s.Z&&(0,s.Z)(M[0]))),j.groupList=(0,o.Z)({},w,{type:"hotel",visibleNumber:O,cardList:R,cardCount:R.length,module_name:a.BF[C],level1saleunitid:null===x||void 0===x?void 0:x.id,groupId:w,viewMore:{text:R.length>O?"\u67e5\u770b\u66f4\u591a".concat(R.length-O,"\u4e2a"):""},shelfMetricData:{level1saleunitid:"",groupId:"",ticketGroupIndex:""},message:R.length?"":"\u62b1\u6b49\uff0c".concat(F?"\u201c"+F+"\u201d":"","\u6682\u65e0\u666f\u9152\u5957\u9910\uff0c\u60a8\u53ef\u4ee5\u770b\u770b\u5176\u5b83\u65e5\u671f")}),j.message=b,j.id=P,j.productType="\u95e8\u7968+\u9152\u5e97",e.abrupt("return",j);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,o,r,a,s,l;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.response,o=t.request,r=n.hotelList,a=n.baseTicketDetailUrl,s=[],e.next=5,c({hotelList:r,baseTicketDetailUrl:a,request:o});case 5:return l=e.sent,s.push(l),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["default"]=u},2279:function(e,t,n){"use strict";n.d(t,{rb:function(){return i},Wv:function(){return o},Xd:function(){return r}});var i=function(e){return e["tickets"]="tickets",e["outbound"]="outbound",e["groupTour"]="groupTour",e["hotel"]="hotel",e["play"]="play",e["oneDayTrip"]="oneDayTrip",e["poi"]="poi",e["ticket"]="ticket",e}({}),o=function(e){return e["oneDayTrip"]="1daytrip",e["tickets"]="Ticket2",e["hotel"]="105",e["groupTour"]="101",e}({}),r=function(e){return e[e["ticket"]=0]="ticket",e[e["poi"]=2]="poi",e[e["tourOrHotel"]=2]="tourOrHotel",e[e["outbound"]=3]="outbound",e[e["play"]=4]="play",e[e["ticketPlay"]=5]="ticketPlay",e[e["dayTripOrTicket"]=100]="dayTripOrTicket",e[e["transportation"]=110]="transportation",e[e["simcard"]=111]="simcard",e[e["wifi"]=112]="wifi",e}({})},29864:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(39726),o=n(33111),r=n(79369);function a(e){var t,n,i,o,a,s,l,c,u,d,p=e.product,f=e.poiInfo,h=null===(t=p.extraTags)||void 0===t||null===(t=t.find((function(e){return"marketTag"===e.code})))||void 0===t?void 0:t.image,m=p.imgInfo&&{imageUrl:p.imgInfo.imgUrl,leftTopImageUrl:h};p.departureCity&&m&&(m.bottom={type:"tag",text:p.departureCity+"\u51fa\u53d1"});var _={text:p.name},v=[],g={text:p.subName},y=[],x=null===(n=p.extraTags)||void 0===n||null===(n=n.find((function(e){return"beginTime"===e.code})))||void 0===n?void 0:n.text;x&&y.push({text:x,type:"gray"});var b=null===(i=p.extraTags)||void 0===i||null===(i=i.find((function(e){return!!e&&"dayNum"==e.code})))||void 0===i?void 0:i.text;b&&y.push({text:"\u7b2c".concat(b,"\u5929"),type:"gray"}),f.name&&(y.push({text:"\u5728",type:"gray"}),y.push({text:"".concat(f.name),type:"blue_dark"}));var k=null===(o=p.extraTags)||void 0===o||null===(o=o.find((function(e){return"duration"===e.code})))||void 0===o?void 0:o.text,w=k?parseInt(k):void 0,I="";w&&(w<60?I=w+"\u5206\u949f":(I=parseInt(String(w/60))+"\u5c0f\u65f6",w%60&&(I+=w%60+"\u5206\u949f"))),I&&y.push({text:"\u6d3b\u52a8\u7ea6".concat(I),type:"gray"});var Z=x||k||b,T=Z?{prefix:"time",textList:y}:void 0,S=[];parseInt(null!==(a=p.poiLevel)&&void 0!==a?a:"")>0&&S.push({type:"tag",tagType:"solid_blue",text:p.poiLevel,suffix:"diamond"}),null===(s=p.productTags)||void 0===s||s.forEach((function(e){S.push({type:"tag",tagType:"hollow_blue",text:e.text})})),S.length>0&&v.push({type:"wrap_hidden",items:S});var C=[],P=p.productDesc;Number(null!==(l=p.score)&&void 0!==l?l:0)>0?C.push({type:"text",text:p.score+"\u5206",textType:"blue_dark"}):C.push({type:"text",text:"\u6682\u65e0\u8bc4\u5206",textType:"gray_light"}),P&&C.push({type:"text",text:"\u5df2\u552e"+P}),C&&v.push({type:"wrap_show",items:C});var N={text:"\u9884\u8ba2",url:p.productUrl},D=p.productUrl,j=!(null!==(c=p.minPrice)&&void 0!==c&&null!==(c=c.price)&&void 0!==c&&c.toString()),R={price:j?"":null===(u=p.minPrice)||void 0===u||null===(u=u.price)||void 0===u?void 0:u.toString(),zero:j?" ":void 0},L=(0,r.Z)({productid:String(null!==(d=null===p||void 0===p?void 0:p.id)&&void 0!==d?d:""),productname:null===p||void 0===p?void 0:p.name,bookBtnName:N.text});return{imageInfo:m,title:_,subtitle:g,matrix:v,url:D,button:N,priceInfo:R,metricData:L,timeDesc:T}}var s=n(85187),l=function(e){var t=e.opUid,n=e.pageId,i=e.guideId,o=e.poiname,r=e.destId,a={guideId:i,destId:r,poiName:o},l=s.GI.getDevEnv(),c=l==s.GI.DEV_ENV_TYPE.FAT?"https://m.ctrip.fat30.qa.nt.ctripcorp.com":"https://m.ctrip.com";return"".concat(c,"/tour/im/group?IMCode=14050004&bizType=1405&isPreSale=1&opUid=").concat(t,"&pageId=").concat(n,"&extendJson=").concat(encodeURIComponent(JSON.stringify(a)))},c=l;function u(e){var t,n,i,o,a,s,l,u,d,p,f,h,m,_,v,g,y,x,b=e.product,k=e.poiInfo,w=e.pageId,I=b.imgInfo&&{imageUrl:b.imgInfo.imgUrl},Z={text:b.name},T=[],S=null===(t=b.productTags)||void 0===t||null===(t=t.find((function(e){return"icon_liangdian"===e.type})))||void 0===t?void 0:t.text,C=null===(n=b.productTags)||void 0===n||null===(n=n.find((function(e){return"recommend_reason"===e.type})))||void 0===n?void 0:n.text,P=C&&S?{imageUrl:S,text:"\u201c".concat(C,"\u201d"),textStyle:"blue_dark"}:void 0,N=[],D=null===(i=b.productTags)||void 0===i||null===(i=i.find((function(e){return"icon_jian"===e.type})))||void 0===i?void 0:i.text,j=null!==(o=null===(a=b.productTags)||void 0===a||null===(a=a.find((function(e){return"category_poiName"===e.type})))||void 0===a?void 0:a.text)&&void 0!==o?o:"",R=null!==(s=null===(l=b.productTags)||void 0===l||null===(l=l.find((function(e){return"category_desc"===e.type})))||void 0===l?void 0:l.text)&&void 0!==s?s:"";D&&(j||R)&&(N.push({type:"image",imageUrl:D,imageType:"single_text_small"}),j&&N.push({type:"text",text:j,underline:"linear_blue",styleType:"max_width"}),R&&N.push({type:"text",text:R,styleType:"max_width_end"})),N.length>0&&T.push({type:"nowrap",items:N});var L=[],E=null===(u=b.productTags)||void 0===u||null===(u=u.find((function(e){return"icon_dao"===e.type})))||void 0===u?void 0:u.text,V=null!==(d=null===(p=b.productTags)||void 0===p||null===(p=p.find((function(e){return"member_highest_level"===e.type})))||void 0===p?void 0:p.text)&&void 0!==d?d:"",A=null!==(f=null===(h=b.productTags)||void 0===h||null===(h=h.find((function(e){return"team_member_desc"===e.type})))||void 0===h?void 0:h.text)&&void 0!==f?f:"",O=null===(m=b.productTags)||void 0===m?void 0:m.filter((function(e){return"small_image"===e.type})).map((function(e){return{url:e.text}}));E&&L.push({type:"image",imageUrl:E,imageType:"single_text_small"}),V&&L.push({type:"text",text:V,underline:V.includes("\u91d1\u724c")?"linear_gold":"linear_sliver"}),O&&O.length>0&&L.push({type:"image_list",imageList:O}),A&&L.push({type:"text",text:A,styleType:"flex-shrink"}),L.length>0&&T.push({type:"nowrap",items:L});var F=[],M=b.score;M&&Number(M)>0&&F.push({type:"text",text:M+"\u5206",textType:"blue_dark"});var B=b.reviews;B&&F.push({type:"text",text:B,textType:"blue_dark"});var U=null===(_=b.productTags)||void 0===_||null===(_=_.find((function(e){return"service_time"===e.type})))||void 0===_?void 0:_.text;U&&F.push({type:"text",text:U}),F.length>0&&T.push({type:"wrap_show",items:F});var G=b.productUrl,H=null===(v=b.productTags)||void 0===v||null===(v=v.find((function(e){return"opUid"===e.type})))||void 0===v?void 0:v.text,z=b.name,q=b.productUrl,K=(null===k||void 0===k||null===(g=k.location)||void 0===g?void 0:g.cityName)||"",W=(null===k||void 0===k||null===(y=k.location)||void 0===y?void 0:y.districtId)||"",X=null===k||void 0===k?void 0:k.name,Y=b.id||"",Q=c({opUid:H,nickName:z,jumpUrl:q,cityname:K,poiname:X,pageId:w,destId:W,guideId:Y}),J={type:"guide",text:"\u514d\u8d39\u54a8\u8be2"},$=(0,r.Z)({productid:String(null!==(x=null===b||void 0===b?void 0:b.id)&&void 0!==x?x:""),productname:null===b||void 0===b?void 0:b.name,bookBtnName:J.text});return{imageInfo:I,title:Z,matrix:T,url:G,imUrl:Q,button:J,lightspot:P,metricData:$}}var d=n(79756),p=n(34685),f=function(e,t){var n,i,o,a=e.name,s=e.eName,l=e.productUrl,c=e.imgInfo,u=e.id,d=e.poiLevel,f=e.productTags,g=void 0===f?[]:f,y={text:"\u9884\u8ba2"},x=(0,r.Z)({productid:String(null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:""),productname:null===e||void 0===e?void 0:e.name,bookBtnName:y.text}),b=(null===g||void 0===g||null===(i=g.find((function(e){return"hotel_type"==e.type})))||void 0===i?void 0:i.text)||void 0,k=l+"&back=1",w={productType:p.$.hotel,productId:null===u||void 0===u?void 0:u.toString(),title:{text:a+(t&&s?s:""),suffixList:h(d,g)},imageInfo:{imageUrl:null===c||void 0===c?void 0:c.imgUrl,leftTopText:b},matrix:m(e),priceInfo:_(e,t?"\u542b\u7a0e/\u8d39":""),hotelPriceTags:(null===(o=v(g))||void 0===o?void 0:o.length)>0?v(g):void 0,button:y,url:k,metricData:x};return w};function h(e,t){var n=[];if(!isNaN(e)&&e>0){var i=12,o=i*e,r=t.find((function(e){return"star_icon_url"==e.type}));null!==r&&void 0!==r&&r.text&&n.push({url:r.text,width:o})}var a=t.find((function(e){return"goldOrPlatinumDiamond"==e.type}));if(null!==a&&void 0!==a&&a.text){var s="";"1"==a.text?s="https://dimg04.c-ctrip.com/images/0AS43120009g3blkl7F31.png.webp":"2"==a.text&&(s="https://dimg04.c-ctrip.com/images/0AS0m120009g3bk550EA4.png.webp"),s&&n.push({url:s,width:24})}return n}function m(e){var t,n,i=e.score,o=e.productTags,r=e.productDesc,a=e.reviews,l=null===o||void 0===o?void 0:o.filter((function(e){return"member_text"==e.type})),c=null===o||void 0===o?void 0:o.filter((function(e){return"service_text"==e.type})),u=null===o||void 0===o?void 0:o.find((function(e){return"overall_merit"==e.type})),d=[];(l||[]).forEach((function(e){d.push({type:"tag",text:e.text,tagType:"hollow_gold_background",prefix:"https://dimg04.c-ctrip.com/images/0AS70120009g3bg4i7A0C.png.webp"})})),(c||[]).forEach((function(e){d.push({type:"tag",text:e.text,tagType:"hollow_blue"})}));var p=(null===o||void 0===o||null===(t=o.filter((function(e){return"rank_text"==e.type})))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.text)||"",f=null===o||void 0===o?void 0:o.filter((function(e){var t=e.type,n=e.text;return"notice_show_text"===t&&!!n})).slice(0,3).map((function(e){return{type:"text",text:e.text,textType:"blue_dark",styleType:"max_width_end"}})),h=(null===o||void 0===o||null===(n=o.find((function(e){return"position_show_text"==e.type})))||void 0===n?void 0:n.text)||"",m=[];(p||(null===f||void 0===f?void 0:f.length)>0)&&m.push({type:"wrap_hidden",items:p?[{type:"tag",tagType:"solid_gold",prefix:"https://dimg04.c-ctrip.com/images/0AS6j120009g3bo05A94C.png.webp",text:p}]:f});var _=[parseFloat(i)>0?{type:"text",text:"".concat(i,"\u5206"),textType:"blue_dark"}:{type:"text",text:"\u6682\u65e0\u8bc4\u5206",textType:"gray"}];return null!==u&&void 0!==u&&u.text&&_.push({type:"text",text:u.text,textType:"blue_dark"}),Number(a)>0&&_.push({type:"text",text:"".concat(a,"\u6761\u70b9\u8bc4")}),r&&_.push({type:"text",text:"\u6708\u9500".concat(r,"\u4efd"),textType:"gray"}),m.push({type:"wrap_show",items:_}),h&&m.push({type:s.hj.isApp()?"wrap_hidden":"nowrap",items:[{ellipsizeMode:"middle",type:"text",text:h}]}),d&&d.length>0&&m.push({type:"wrap_hidden",items:d}),m}function _(e,t){var n=e.minPrice,i=e.marketPrice,o=e.code;return{price:(null===n||void 0===n?void 0:n.price)||0,deletePrice:null===i||void 0===i?void 0:i.price,currency:null===n||void 0===n?void 0:n.currency,prefix:t,suffix:"\u8d77",zero:n&&n.price&&0!=Number(n.price)||"grouptour"!=o?null:"\u5b9e\u65f6\u8ba1\u4ef7"}}function v(e){var t,n,i,o=null!==e&&void 0!==e?e:[],r=(null===(t=o.find((function(e){return"total_discount_price_desc"==e.type})))||void 0===t?void 0:t.text)||"",a=o.filter((function(e){return"discount_price_text"==e.type})).slice(0,4),s=null!==(n=null===(i=a.map((function(e){return e.text})).join(""))||void 0===i?void 0:i.length)&&void 0!==n?n:0,l=s+r.length,c=d["default"].getSystemInfoSync(),u=c.screenWidth,p=u<=360?11:12;while(l>p){var f,h;a.shift(),s=null!==(f=null===(h=a.map((function(e){return e.text})).join(""))||void 0===h?void 0:h.length)&&void 0!==f?f:0,l=s+r.length}var m=[];return a.forEach((function(e){m.push({type:"tag",text:e.text,tagType:"marketing"})})),r&&m.push({type:"tag",text:r,tagType:"discount"}),m}function g(e){var t,n,i,o,a,s=e.product,l={text:s.name},c=s.imgInfo&&{imageUrl:s.imgInfo.imgUrl},u=[],d=null===(t=s.tags)||void 0===t||null===(t=t.find((function(e){return"PT_TOP_TAG"===e.groupCode})))||void 0===t?void 0:t.groups,p=null===d||void 0===d?void 0:d.map((function(e){return{type:"tag",tagType:e.type,text:e.text}}));p&&u.push({type:"wrap_hidden",items:p});var f=null===(n=s.tags)||void 0===n||null===(n=n.find((function(e){return"PT_HIGHLIGHT_TAG"===e.groupCode})))||void 0===n?void 0:n.groups,h=null===f||void 0===f?void 0:f.map((function(e){return{type:"tag",tagType:e.type,text:e.text}}));h&&u.push({type:"nowrap",items:h});var m=null===(i=s.tags)||void 0===i||null===(i=i.find((function(e){return"PT_POWER_TAG"===e.groupCode})))||void 0===i?void 0:i.groups,_=null===m||void 0===m?void 0:m.map((function(e){return{type:"tag",tagType:e.type,text:e.text}}));_&&u.push({type:"wrap_hidden",items:_});var v=s.productDesc;v&&u.push({type:"wrap_show",items:[{type:"text",text:s.productDesc}]});var g=s.productUrl,y={price:null===(o=s.minPrice)||void 0===o||null===(o=o.price)||void 0===o?void 0:o.toString(),suffix:"\u8d77"},x={text:"\u9884\u8ba2"},b=(0,r.Z)({productid:String(null!==(a=null===s||void 0===s?void 0:s.id)&&void 0!==a?a:""),productname:null===s||void 0===s?void 0:s.name,bookBtnName:x.text});return{title:l,imageInfo:c,matrix:u,priceInfo:y,url:g,isLeftBottomMatrixMarginTop:!1,button:x,metricData:b}}function y(e){var t,n,i,o=e.product,a=e.tabInfo,s=112===a.tabId,l={text:o.name},c=[],u=[],d=["PT_TOP_TAG","PT_HIGHLIGHT_TAG","PT_POWER_TAG"];d.forEach((function(e){var t,n=null===(t=o.tags)||void 0===t||null===(t=t.find((function(t){return t.groupCode===e})))||void 0===t?void 0:t.groups,i=null===n||void 0===n?void 0:n.map((function(e){return{type:"tag",tagType:e.type,text:e.text}}));null!==i&&void 0!==i&&i.length&&("PT_POWER_TAG"===e?u.push({type:"wrap_show",items:i}):c.push({type:"wrap_show",items:i}))}));var p=o.productUrl,f={price:null===(t=o.minPrice)||void 0===t||null===(t=t.price)||void 0===t?void 0:t.toString(),suffix:s?"\u5929/\u8d77":"\u8d77"},h={text:"\u9884\u8ba2"},m=(0,r.Z)({productid:String(null!==(n=null===o||void 0===o?void 0:o.id)&&void 0!==n?n:""),productname:null===o||void 0===o?void 0:o.name,bookBtnName:h.text}),_=null===(i=o.productDesc)||void 0===i?void 0:i.split("|").map((function(e){return e.trim()}));return{title:l,matrix:c,leftBottomMatrix:u,priceInfo:f,url:p,isLeftBottomMatrixMarginTop:!0,button:h,metricData:m,leftBottomDescList:_}}function x(e){var t,n,i,o,a,s,l,c=e.product,u=(null===(t=c.productExtension)||void 0===t||null===(t=t.find((function(e){return"front_tag_name"==e.key})))||void 0===t?void 0:t.value)||"",d=(null===(n=c.productExtension)||void 0===n||null===(n=n.find((function(e){return"feature"==e.key})))||void 0===n?void 0:n.value)||"",f=d?{type:"lightspot",text:d,textStyle:"blue_dark"}:void 0,h=c.imgInfo&&{imageUrl:c.imgInfo.imgUrl,leftTopText:u},m={text:c.name,prefix:""},_=[];null===(i=c.tags)||void 0===i||i.map((function(e){var t,n,i=null!==(t=null===(n=e.groups)||void 0===n?void 0:n.map((function(e){return{type:"tag",tagType:"info"!=e.type&&e.type?e.type:"divider_gray",text:e.text}})))&&void 0!==t?t:[];i.length&&_.push({items:i,type:"wrap_hidden"})}));var v=[],g=c.productDesc,y=Number(null!==(o=c.score)&&void 0!==o?o:0);y>0&&v.push({type:"tag",tagType:"divider_gray",text:y+"\u5206"}),g&&v.push({type:"tag",tagType:"divider_gray",text:g}),v.length&&_.push({type:"wrap_show",items:v});var x=c.productUrl||"";x+="".concat("&"===x[x.length-1]?"":"&")+"ext-shelfType=destination_rec";var b={text:"\u9884\u8ba2",url:x},k={price:null===(a=c.minPrice)||void 0===a||null===(a=a.price)||void 0===a?void 0:a.toString(),zero:null!==(s=c.minPrice)&&void 0!==s&&s.price?void 0:"\u5b9e\u65f6\u8ba1\u4ef7"},w=(0,r.Z)({productid:String(null!==(l=null===c||void 0===c?void 0:c.id)&&void 0!==l?l:""),productname:null===c||void 0===c?void 0:c.name,bookBtnName:b.text,module_name:"destination_rec",ctypename_sec:u});return{productType:p.$.play,imageInfo:h,title:m,matrix:_,url:x,button:b,priceInfo:k,metricData:w,lightspot:f}}var b={100:"\u4e00\u65e5\u6e38",101:"\u8ddf\u56e2\u6e38",102:"\u5f53\u5730\u5411\u5bfc",104:"\u95e8\u7968+\u666f\u9152",105:"\u9152\u5e97",110:"\u5f53\u5730\u4ea4\u901a",111:"\u7535\u8bdd\u5361",112:"wifi",666:"\u73a9\u4e50"},k=function(e){var t,n=e.response,r=e.request,s=(null===n||void 0===n?void 0:n.poiRecommendInfo)||{},l=s.data,c=s.poiShelfTypes,d=l||{},p=d.poiInfo,h=d.recommends,m=void 0===h?[]:h,_=r||{},v=_.filters,k=_.pageId,w=null===p||void 0===p||null===(t=p.location)||void 0===t?void 0:t.inOversea,I=[],Z=3;return(c||[]).forEach((function(e){var t,n,r,s=m.find((function(t){var n;return(null===t||void 0===t||null===(n=t.tabInfo)||void 0===n?void 0:n.tabId)==(null===e||void 0===e?void 0:e.tabId)})),l=s||{},c=l.tabInfo,d=void 0===c?{}:c,h=l.newProducts,_=void 0===h?[]:h,T=111===d.tabId||112===d.tabId,S=102===d.tabId,C=100===d.tabId,P=101===d.tabId,N=110===d.tabId,D=105===d.tabId,j=666===d.tabId,R=e||{},L=R.productIdList,E=void 0===L?[]:L,V={groupName:d.tabName||(null===e||void 0===e||null===(t=e.shelfType)||void 0===t?void 0:t.name),id:null===e||void 0===e?void 0:e.shelfGroupId,tabId:d.tabId||(null===e||void 0===e?void 0:e.tabId),productType:b[null===e||void 0===e?void 0:e.tabId],tabSubTitle:d.tabSubTitle,groupList:{}};E.length&&(V.productIdList=E,_=_.filter((function(e){return E.some((function(t){return t==e.id}))})));var A=[];T?A=_.map((function(e){return y({product:e,tabInfo:d})})):N?A=_.map((function(e){return g({product:e})})):S?A=_.map((function(e){return u({product:e,poiInfo:p,pageId:k})})):C?A=_.map((function(e){return(0,o.R)({product:e,poiInfo:p})})):P?A=_.map((function(e){return a({product:e,poiInfo:p})})):D?A=_.map((function(e){return f(e,w)})):j&&(A=_.map((function(e){return x({product:e})})));var O,F="";v&&v.length>0&&(O=v[0].filterItems,O&&(F=i.Z&&(0,i.Z)(O[0])));var M={visibleNumber:Math.min(A.length,Z),backgroundImageUrl:null===e||void 0===e||null===(n=e.shelfType)||void 0===n?void 0:n.url,viewMore:{text:A.length>Z?"\u67e5\u770b\u66f4\u591a".concat(A.length-Z,"\u4e2a"):""},isPoiRecommed:!1,cardList:A,message:A.length?"":"\u62b1\u6b49\uff0c".concat(F?"\u201c"+F+"\u201d":"","\u6682\u65e0").concat((null===e||void 0===e||null===(r=e.shelfType)||void 0===r?void 0:r.name)||"","\uff0c\u60a8\u53ef\u4ee5\u770b\u770b\u5176\u5b83\u65e5\u671f"),module_name:j?"destination_rec":"recommend",shelfMetricData:{level1saleunitid:"",groupId:"",ticketGroupIndex:""}};V.groupList["fdefault"]=M,I.push(V)})),I},w=k},82945:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n(22276),o=n(79975),r="https://pages.c-ctrip.com/ticket/app/ibu_shelf/exclusive-tag.png",a="https://dimg04.c-ctrip.com/images/0AS091200090yprkoFF0E.png";function s(e){var t,n=e.shelfInfo,i=n||{},o=i.extInfos,s=void 0===o?[]:o,c=i.resources,u=void 0===c?[]:c,d=l(u),p=(null===s||void 0===s||null===(t=s.find((function(e){return"airTicketPromotionDay"==e.key})))||void 0===t?void 0:t.value)||28;if(d&&p)return{title:"\u60a8\u662f\u673a\u7968\u4e13\u4eab\u7528\u6237\uff0c\u4eab\u53d7",tags:[{type:"image",content:a},{type:"black",content:"\u6743\u76ca"}],imgUrl:r,layerInfo:{layerType:"air",text:"\u673a\u7968\u9884\u8ba2\u6210\u529f\u540e\u81f3\u51fa\u884c\u540e".concat(p,"\u5929\u5185\uff0c\u7528\u6237\u53ef\u6839\u636e\u76ee\u7684\u5730\u57ce\u5e02\uff0c\u4eab\u53d7\u6307\u5b9a\u57ce\u5e02\u666f\u70b9\u95e8\u7968\u4e13\u4eab\u4ef7\u3002\n\u9884\u8ba2\u5e26\u6709\u3010\u673a\u7968\u7528\u6237\u3011\u6807\u8bc6\u7684\u666f\u70b9\uff0c\u4eab\u53d7\u4e13\u5c5e\u6298\u6263\u4f18\u60e0\uff0c\u6d3b\u52a8\u8986\u76d6\u56fd\u5185\u70ed\u95e8\u57ce\u5e02\u3001\u70ed\u95e8\u666f\u70b9\uff0c\u5e76\u5728\u6301\u7eed\u65b0\u589e\u4e2d\u3002")}}}function l(e){for(var t=0;t<e.length;t++)for(var n=e[t].promotions,i=void 0===n?[]:n,o=0;o<i.length;o++){var r=i[o].type;if(4==r)return i[o]}return!1}var c="https://dimg04.c-ctrip.com/images/0AS0k1200052fedku4507.png";function u(e){var t=e.naquhuaData,n=t||{},i=n.IsCreditSuccess,o=n.IsTargetAudience,r=n.MarketingTag,a=n.PromotionWords,s=n.CampaignUrl,l=!i&&o;if(l){var u=[];return r&&u.push({type:"hollow_orange",content:r}),a&&u.push({type:"orange",content:a}),{title:"\u5f00\u901a\u62ff\u53bb\u82b1",tags:u,imgUrl:c,layerInfo:{jumpUrl:s,layerType:"naquhua"}}}}var d="https://pages.c-ctrip.com/ticket/app/ibu_shelf/bargain-half.png";function p(e){var t=e.shelfInfo,n=t.bargainInfo,i=(null===n||void 0===n?void 0:n.maxAmount)>0;if(i)return{title:"\u4efb\u6027\u780d5\u6298",tags:[{type:"orange",content:"\u4e0b\u5355\u540e\u9080\u8bf7\u597d\u53cb\u780d5\u6298\uff0c\u6700\u9ad8\u53ef\u8fd4".concat(null===n||void 0===n?void 0:n.maxAmount,"\u5143")}],imgUrl:d,layerInfo:{jumpUrl:null===n||void 0===n?void 0:n.descUrl,layerType:"bargin"}}}function f(e){var t=e.couponData,n=e.isLogin,o=[],r=t||{},a=r.availableClaimList,s=void 0===a?[]:a,l=r.availableUseList,c=void 0===l?[]:l,u=r.receivedNouseList,d=void 0===u?[]:u,p=r.robbedList,f=void 0===p?[]:p,h=r.expiredList,m=void 0===h?[]:h,_=r.notStartedList,v=void 0===_?[]:_,g=[].concat((0,i.Z)(s),(0,i.Z)(c),(0,i.Z)(d)),y=[].concat((0,i.Z)(f),(0,i.Z)(m),(0,i.Z)(v)),x=[].concat((0,i.Z)(g),(0,i.Z)(y));x.forEach((function(e){if(e){var t=e.promotionLabel;o.push({type:"linear_red",content:t})}}));var b=!(null===g||void 0===g||!g.length),k=!(null===y||void 0===y||!y.length);if(b||k){var w=!0;return w=n?!b||!(null!==s&&void 0!==s&&s.length):!b,{tags:o,buttonText:w?"\u5df2\u9886":"\u53bb\u9886\u5238",buttonType:w?"":"go",layerInfo:{layerType:"reduct"}}}}var h="https://dimg04.c-ctrip.com/images/0AS1k120008vr1kx9B1C4.png";function m(e){var t=e.crossCouponInfo,n=!(null===t||void 0===t||!t.length);if(n){var i=[];return t.forEach((function(e){var t=e.promotionLabel;i.push({type:"hollow_orange",content:t})})),{buttonText:"\u67e5\u770b",title:"\u8d60\u5238",tags:i,imgUrl:h,layerInfo:{layerType:"cross"}}}}function _(e){var t=e.response,n=e.isLogin,r=t||{},a=r.couponData,l=void 0===a?{}:a,c=r.shelfInfo,d=void 0===c?{}:c,h=r.naquhuaData,_=void 0===h?{}:h,v=r.crossCouponInfo,g=void 0===v?[]:v,y=s({shelfInfo:d}),x=u({naquhuaData:_}),b=p({shelfInfo:d}),k=f({couponData:l,isLogin:n}),w=m({crossCouponInfo:g}),I=([b,y,x,k,w].filter((function(e){return!!e}))||[]).length,Z=([b,y,x,w].filter((function(e){return!!e}))||[]).length;if(I){var T;if(1==I){var S,C=[b,y,x,k,w].filter((function(e){return!!e}))[0],P=null===C||void 0===C||null===(S=C.layerInfo)||void 0===S?void 0:S.layerType;T=C,T.metricInfo={type:o.kW["".concat(P)]}}else{var N=[];if(k&&k.tags&&(1===Z&&(N=k.tags.slice(0,2)),Z>=2&&(N=k.tags.slice(0,1))),w&&w.tags){var D,j=3-(Z-1)-N.length,R=j>0?j:1;(D=N).push.apply(D,(0,i.Z)(w.tags.slice(0,R)))}b&&N.push({type:"hollow_orange",content:"\u4efb\u6027\u780d5\u6298"}),y&&N.push({type:"hollow_orange",content:"\u673a\u7968\u7528\u6237\u4e13\u4eab"}),x&&N.push({type:"hollow_orange",content:"\u5f00\u901a\u62ff\u53bb\u82b1"});var L=[b,y,x,k,w].filter((function(e){return!!e}))||[],E=[];L.forEach((function(e){var t;E.push((null===e||void 0===e||null===(t=e.layerInfo)||void 0===t?void 0:t.layerType)||"")})),T={tags:N,buttonText:k?k.buttonText:w?"\u67e5\u770b":"",buttonType:k?k.buttonType:"",layerInfo:{layerType:"reduct",bannerInfo:[w,b,y,x].filter((function(e){return!!e}))},metricInfo:{type:E.join("/")}}}return T.key=(new Date).getTime(),T}}},30389:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(63778);function o(e){var t,n=e.response,o=e.isLogin,r=e.request,a=null===r||void 0===r?void 0:r.spotId,s=(0,i.Q)(r),l=(null===n||void 0===n||null===(t=n.scenicSpotInfo)||void 0===t?void 0:t.scenicSpotInfos)||[],c=(null===n||void 0===n?void 0:n.couponData)||{},u=c.availableClaimList,d=void 0===u?[]:u,p=(null===l||void 0===l?void 0:l.find((function(e){return e.id==a})))||{},f=p.ticketCouponInfo,h=f||{},m=h.promotionId,_=h.desc,v=void 0===_?"":_;if(m&&d.length>0&&o){var g=d.find((function(e){return(null===e||void 0===e?void 0:e.promotionId)===m}))||{},y=g.promotionSecretId,x=void 0===y?"":y;if(x)return{desc:v,promotionSecretIds:x,promotionId:m,params:s}}}},82611:function(e,t,n){"use strict";n.r(t),t["default"]=function(e){var t=e.response,n=t||{},i=n.scenicSpotInfo,o=i||{},r=o.scenicSpotInfos,a=void 0===r?[]:r,s=a[0]||{},l=s.basicInfo,c=l||{},u=c.scenicSpotCardInfo;return{scenicSpotName:(null===l||void 0===l?void 0:l.scenicSpotName)||"",pageTitle:(null===u||void 0===u?void 0:u.pageTitle)||"",scenicSpotPopupNotice:(null===u||void 0===u?void 0:u.scenicSpotPopupNotice)||"",type:(null===u||void 0===u?void 0:u.type)||1,scenicSpotStarLevel:(null===u||void 0===u?void 0:u.scenicSpotStarLevel)||"",scenicSpotNotice:(null===u||void 0===u?void 0:u.scenicSpotNotice)||"",desc:(null===u||void 0===u?void 0:u.desc)||"",backGroundImgUrl:(null===u||void 0===u?void 0:u.backGroundImgUrl)||""}}},10722:function(e,t,n){"use strict";n.r(t),n.d(t,{decodeAnchorId:function(){return f},default:function(){return d},encodeAnchorId:function(){return p}});var i=n(298),o=n(45023),r=n(22276),a=function(e){return e["2-105"]="hotel",e["2-101"]="groupTour",e["3-outbound"]="outbound",e["4-0"]="play",e["5-0"]="play",e["100-1daytrip"]="oneDayTrip",e["100-Ticket2"]="tickets",e["38_2"]="POI",e["39_2"]="POI",e["40_2"]="POI",e["41_2"]="POI",e["44_2"]="POI",e["45_2"]="POI",e["50_2"]="POI",e["165_1"]="POI",e["4119_1"]="POI",e["0-0"]="ticket",e["2-0"]="poi",e}({}),s=n(2279),l=n(49671),c=n(78894),u=n(16567),d=function(e){var t=e.shelfTypes,n=e.districtId,i=[],o=[],a=[],c={};return(t||[]).forEach((function(e,t){if(e){var l=e.shelfItems,d=e.name,f=void 0===d?"":d,m=e.label,_=e.backgroundImageUrl,v=e.code,g=e.type,y=e.source,x=[],b="";(l||[]).forEach((function(i,r){if(i){var l={groupName:e.name,categoryName:e.name,desc:{fdefault:e.feature},anchorId:"",groupList:null};b=p({code:e.code,shelfItem:i}),l.anchorId=b;var d=function(e){var t,n=e.item,i=e.anchorId,r=e.pendingShelf,l=void 0!==r&&r,c=e.shelfInfo;o.push(s.rb.poi),c.shelfGroupId=n.shelfGroupId,c.idType=n.idType,c.pendingShelf=l,c.anchorId=i,null!==(t=n.productIdList)&&void 0!==t&&t.length&&(c.productIdList=n.productIdList),a.push(c)},f=function(n){x.push(n),c[n]={tabid:e.id,tabindex:t+1,tabname:e.name,iconname:e.label,sourceid:e.source,extGsId:e.id}};i.shelfGroupId&&!i.itemId&&2!=i.type?(d({item:i,anchorId:b,shelfInfo:(0,u.I8)(l)}),f(b)):2==i.type&&i.combineShelfItems?(i.combineShelfItems.map((function(t,n){0==n&&(b=p({code:e.code,shelfItem:t})),d({item:t,anchorId:b,pendingShelf:!0,shelfInfo:(0,u.I8)(l)})})),f(b)):(i.idType==s.Xd.outbound&&0==r?o.push(s.rb.outbound):i.idType==s.Xd.tourOrHotel&&i.itemId==s.Wv.groupTour?o.push(s.rb.groupTour):i.idType==s.Xd.tourOrHotel&&i.itemId==s.Wv.hotel?o.push(s.rb.hotel):i.idType==s.Xd.play||i.idType==s.Xd.ticketPlay?(o.push(s.rb.play),l.groupList=h({tab:e,anchorId:b,districtId:n})):i.idType==s.Xd.dayTripOrTicket&&i.itemId==s.Wv.oneDayTrip?(o.push(s.rb.oneDayTrip),l.groupList=h({tab:e,anchorId:b,districtId:n})):i.idType==s.Xd.dayTripOrTicket&&i.itemId==s.Wv.tickets&&(o.push(s.rb.tickets),l.groupList=h({tab:e,anchorId:b,districtId:n})),0==r&&(e.anchorId=b),(i.idType==s.Xd.outbound&&0==r||i.idType!=s.Xd.outbound)&&(c[b]={tabid:e.id,tabindex:t+1,tabname:e.name,iconname:e.label||"",sourceid:e.source,extGsId:e.id},x.push(b),a.push(l)))}})),o=Array.from(new Set((0,r.Z)(o))),i.push({categoryName:f,label:m,imageUrl:_,anchorIdArray:x,code:v,source:y,type:g})}})),(0,l._1)({tabsMetricInfo:c}),{tabsInfo:i,moduleList:o,emptyShelfs:a}},p=function(e){var t=e.code,n=e.shelfItem,i=n||{},o=i.idType,r=i.itemId,a=i.extraInfoDtos,l=i.shelfGroupId,c=i.productIdList,u=void 0===c?[]:c,d=((a||[]).find((function(e){return"keyWord"==e.key}))||{}).value||"",p="".concat(t,"-").concat(o);return o==s.Xd.outbound?p+="-outbound":o!=s.Xd.dayTripOrTicket&&o!=s.Xd.tourOrHotel||!r?o==s.Xd.play||o==s.Xd.ticketPlay?p+="-0-".concat(r):(o==s.Xd.ticket&&l||o==s.Xd.poi&&l)&&(p+="-0-".concat(l)):p+="-".concat(r),d&&(p+="-".concat(d)),u.length&&(p+="-".concat(u.join("-"))),p},f=function(e,t){if(e){var n=e&&e.split("-"),i="";n&&n[1]&&n[2]&&(i=a["".concat(n[1],"-").concat(n[2])]);var o={pagetype:"city",id:t,pshowcode:"all"},r=!1;switch(i){case s.rb.oneDayTrip:o.pshowcode=n[2],r=!0;break;case s.rb.play:n[1]==s.Xd.play&&n[3]?o.pshowcode=n[3]:n[1]==s.Xd.ticketPlay&&n[3]&&(o.pagetype="poi",o.name=n[4],o.id=Number(n[3]),o.districtid=t),r=!0;break;case s.rb.tickets:o.pshowcode=n[2],o.districtid=t,r=!0;break;default:break}return{business:i,componentProps:o,isIndependent:r}}},h=function(e){var t=e.tab,n=e.anchorId,i=e.districtId;return(0,o.Z)({},"fdefault",{visibleNumber:5,backgroundImageUrl:null===t||void 0===t?void 0:t.backgroundImageUrl,viewMore:{text:"\u67e5\u770b\u66f4\u591a".concat((null===t||void 0===t?void 0:t.name)||"","\u4ea7\u54c1"),url:m({anchorId:n,districtId:i,name:(null===t||void 0===t?void 0:t.name)||""})}})},m=function(e){var t=e.anchorId,n=e.districtId,o=e.name;o=encodeURIComponent(o);var r="/rn_destination_home/main.js?CRNModuleName=rn_destination_home&CRNType=1&initialPage=list&pageTitle=".concat(o),a="/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=list",l=f(t,n),u=l||{},d=u.business,p=u.componentProps,h=p||{},m=h.pshowcode,_=(0,i.Z)((0,i.Z)({},p),{},{name:null!==p&&void 0!==p&&p.name?encodeURIComponent(p.name):""}),v=["photographytrip","Travelservice","Parking1","Communicationequipment","privatetour1","Ticket2","1daytrip"].findIndex((function(e){return e==m}));switch(-1!=v&&(r=a),d){case s.rb.oneDayTrip:case s.rb.play:case s.rb.tickets:return r+"&"+(0,c.Xh)(_);default:break}}},48085:function(e,t,n){"use strict";n.d(t,{BT:function(){return a},ZF:function(){return s}});var i={},o=function(e){return e["shelfCardTag"]="220125_VAC_HJJCQ",e["listHasFilter"]="221219_VAC_rqsx",e["appointmentCard"]="231114_VAC_yymk",e}(o||{}),r=function(e,t){i[e]=t},a=function(e){e&&null!==e&&void 0!==e&&e.length&&e.forEach((function(e){if(e){var t=e.key,n=e.value;t&&n&&r(t,n)}}))},s=function(){var e=i[o.appointmentCard];return"B"==e?1:2}},71106:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var i=n(79301),o=n(298),r=n(90129),a=n(95308),s=n(45023),l=n(38233),c=n(16567);function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e/t*100||0,o=Math.pow(10,n);return Math.floor(i*o)/o}var d=n(79975),p=n(68455),f=n(3300),h=!1,m=0,_=function(e){h=!1,m=0;var t=e.ticketGroups,n=void 0===t?[]:t,i=e.displayStrategy,o=e.shelfGroupIndex,r=e.tabType,a=e.groupId,s=n.length,l=0;n.forEach((function(e,t){var n=e.mainTicket,i=e.subTicketGroups,r=void 0===i?[]:i;n&&(h=!0),r.forEach((function(e){var n=e.tokens,i=void 0===n?[]:n;m+=i.length,0==o&&0==t&&(l+=i.length)}))}));var c=!1;if(s!=m&&r!=f.XN.seckill||(c=!0),r==f.XN.marketing||r==f.XN.recommend||r==f.XN.poiactivity||r==f.XN.seckill)return{needCombineGroup:!0,ressDesc:c};if(r==f.XN.poiactivity)return{needCombineGroup:!0,ressDesc:c};if(s<=1&&a)return{needCombineGroup:!0,ressDesc:c};if(2==i)return{needCombineGroup:!0,ressDesc:c};if(!i||0==i||3==i)return{needCombineGroup:!1,ressDesc:c};if(h){if(m<=7||m-s<=3)return{needCombineGroup:!0,ressDesc:c}}else if(m-s<=1||m-s>1&&m-s<=3&&l<=2)return{needCombineGroup:!0,ressDesc:c};return{needCombineGroup:!1,ressDesc:c}},v=n(99059),g=n(90927),y=n(16281),x=n(33111),b=n(59217),k=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,h){var m,k,w,I,Z,T,S,C,P,N,D,j,R,L,E,V,A,O,F,M,B,U,G,H,z,q,K,W,X,Y,Q,J,$,ee,te,ne,ie,oe,re,ae,se,le,ce,ue,de,pe,fe,he,me,_e,ve,ge,ye,xe,be,ke,we,Ie,Ze,Te,Se,Ce,Pe,Ne,De;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:k=_(t),w=k.needCombineGroup,I=k.ressDesc,Z=t.groupId,T=t.groupName,S=t.name,C=t.ticketGroups,P=void 0===C?[]:C,N=t.saleTotalCount,D=t.sumYearlySale,j=void 0===D?0:D,t.shelfGroupIndex,t.secKillShelf,R=t.tabType,L=t.longTail,E=t.priceInfo,V=void 0===E?{}:E,A=t.id,t.activityDetail,O=t.tabTypeName,F=P.length,M=Z&&(T||S),B=R==f.XN.scenicStore,U=R==f.XN.marketing,G=R==f.XN.poiactivity,H=R==f.XN.recommend,R==f.XN.seckill,z=R==f.XN.seckill,q=R===f.XN.custom,K=(0,o.Z)({id:A,groupName:"",shelfTabInfo:{},groupList:{},hasPresell:!1,needCombineGroup:w,groupId:Z},q?{cardsType:"custom"}:{}),(0,y.zu)(R)?K.groupName=O:F>1&&M||w?K.groupName=T||S:w||1!==F||(K.groupName=P[0].name),q&&(K.groupName=""),w&&(K.shelfTabInfo=(0,s.Z)({},Z,"")),W=null,X=[],Y=[],Q=j,J=0;case 20:if(!(J<P.length)){e.next=67;break}ee=P[J],te=ee.id,ne=ee.name,ie=ee.yearlySale,oe=void 0===ie?0:ie,re=ee.subTicketGroups,ae=void 0===re?[]:re,ee.mainTicket,se=ee.titleType,le=ee.imgUrlType,ce=ee.ticketRecommend,ce&&ce.recommendTags&&(K.recommendTags=ce.recommendTags),ue={},w||(K.shelfTabInfo[J+"-"+te]=ne,X=[],Y=[],Q=oe),G||U||(ue=w?(0,v.E4)({shelfGroup:t,ticketGroups:P,ressDesc:I}):(0,v.hv)({shelfGroup:t,ticketGroup:ee,ressDesc:I})),q&&(ue={}),de=0;case 30:if(!(de<ae.length)){e.next=48;break}if(pe=ae[de],pe){e.next=34;break}return e.abrupt("continue",45);case 34:fe=pe.subTicketGroupInfo,he=void 0===fe?{}:fe,me=pe.tokens,_e=pe.tokenType,ve=he.official,ge=(0,i.Z)().mark((function e(){var o,s,l,u,m,_,v,y,b;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=me[ye],s=(0,c.I8)(n[o]),l=8===R&&2===_e&&h,l&&(m=h.recommends,s=null===m||void 0===m||null===(u=m[0])||void 0===u||null===(u=u.newProducts)||void 0===u?void 0:u.find((function(e){return e.token===o}))),s||(_=r.missedToken,_||(_=[]),_.push(o),r.missedToken=_),s){e.next=7;break}return e.abrupt("return",1);case 7:if(B&&(s.ressType=f.cM.scenicStore),U&&(s.ressType=f.cM.marketing),G&&(s.ressType=f.cM.poiactivity),H&&(s.ressType=f.cM.recommed),z&&(s.ressType=f.cM.seckill),q&&(s.ressType=f.cM.custom),K.productType="normal"===s.ressType&&5==s.type?"\u4ea4\u901a\u8239\u7968":"",v={},y={ticketGroup:ee,subTicketGroup:pe,needCombineGroup:w,groupId:Z,ressDesc:I,groupType:R,ticketGroupIndex:J,shelfType_id:K.id,activityDetail:null===t||void 0===t?void 0:t.activityDetail,module_name:d.BF[R],spotId:r.spotId,isNoSale:ve,serverSec:(0,g.b)(),applicationConfig:r.applicationConfig,naquhuaBannerInfo:r.preposeInstallmentInfo,baseTicketDetailUrl:a,vs_type:"vsMainTicket"==se?2:"vsBuySeparately"==se?1:0,is_vedio:le||0,baiduBaseInfo:null===r||void 0===r?void 0:r.baiduBaseInfo,request:r},!l){e.next=21;break}b=h.poiInfo,v=(0,x.R)({product:s,poiInfo:b}),e.next=24;break;case 21:return e.next=23,(0,p.u)({resource:s,extra:y});case 23:v=e.sent;case 24:v&&(ve?Y.push(v):X.push(v)),v&&v.isPresell&&(K.hasPresell=!0);case 26:case"end":return e.stop()}}),e)})),ye=0;case 38:if(!(ye<me.length)){e.next=45;break}return e.delegateYield(ge(),"t0",40);case 40:if(!e.t0){e.next=42;break}return e.abrupt("continue",42);case 42:ye++,e.next=38;break;case 45:de++,e.next=30;break;case 48:xe=-1,be=3,xe=Math.min(X.length||Y.length,be),ke=u(Q,N,1),we=ke/100>=.1&&ke/100<=.9,Ie="",X.length>be&&(Ie=X[be]&&(null===(Ze=X[be])||void 0===Ze||null===(Ze=Ze.title)||void 0===Ze?void 0:Ze.text)||""),Te={text:"\u67e5\u770b".concat(Ie.length>10?Ie.slice(0,10)+"...":Ie).concat(X.length>be+1?"\u7b49\u5176\u4ed6\u7968":"")},Se=[],Ce=Q>0?"\u7d2f\u8ba1\u9500\u91cf".concat((0,l.Z)(Q)):"",Pe=we&&ke?"".concat(ke,"%\u6e38\u5ba2\u8d2d\u4e70"):"",Pe&&Se.push(Pe),Ce&&Se.push(Ce),(0,b.aD)()||(Se=[]),null!==($=X)&&void 0!==$&&$.length&&(W={tips:ue.tips,salesInfo:Se,cardList:X.concat(Y),visibleNumber:xe,viewMore:Te,cardCount:X.length,module_name:d.BF[R],shelfMetricData:{level1saleunitid:w?"":te,groupId:Z,ticketGroupIndex:J+1}}),w||W&&(K.groupList[J+"-"+te]=W);case 64:J++,e.next=20;break;case 67:for(L&&(K.tailFoldInfo={fold:!0,price:{minPrice:V&&V.price,currency:V&&V.currency}}),Ne=0;Ne<3;Ne++)t["activityDetail".concat(Ne||"")]&&(K["activityDetail".concat(Ne||"")]=t["activityDetail".concat(Ne||"")]);if(w&&(De=Math.min(X.length,3),W&&(W.visibleNumber=De,Z?K.groupList["".concat(Z)]=W:K.groupList["default"]=W),R==f.XN.marketing&&W&&(K.groupList["marketing"]=W,K.isMarketing=!0),R==f.XN.poiactivity&&W&&(K.groupList["poiactivity"]=W,K.isPoiactivity=!0),R==f.XN.recommend&&W&&(K.groupList["recommend"]=W,K.isRecommend=!0),R==f.XN.seckill&&W&&(K.groupList["seckill"]=W,K.isSeckill=!0)),null!==(m=Object.keys((null===K||void 0===K?void 0:K.groupList)||{}))&&void 0!==m&&m.length){e.next=72;break}return e.abrupt("return",null);case 72:return e.abrupt("return",{group:K});case 73:case"end":return e.stop()}}),e)})));return function(t,n,i,o,r){return e.apply(this,arguments)}}(),w=n(90983);function I(e,t,n,i,o){return Z.apply(this,arguments)}function Z(){return Z=(0,a.Z)((0,i.Z)().mark((function e(t,n,o,r,a){var c,f,h,m,_,v,g,x,b,k,I,Z,T,S,C,P,N,D,j,R,L,E,V,A,O,F,M,B,U,G,H,z,q,K,W,X,Y,Q,J,$;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:f={},h=t||{},m=h.groupId,_=h.groupName,v=h.name,g=h.sumYearlySale,x=void 0===g?0:g,b=h.ticketGroups,k=void 0===b?[]:b,I=h.tabType,Z=h.saleTotalCount,T=h.id,S=k.length||0,C=v||_,S>1&&C?f.groupName=_||v:1==S&&(f.groupName=k[0]&&k[0].name),f.shelfTabInfo=(0,s.Z)({},m,""),f.tabType=I,P=[],N=(0,w.Z)(k),e.prev=9,N.s();case 11:if((D=N.n()).done){e.next=57;break}j=D.value,R=j.subTicketGroups,L=void 0===R?[]:R,E=j.id,V=(0,w.Z)(L),e.prev=15,V.s();case 17:if((A=V.n()).done){e.next=47;break}O=A.value,F=O.tokens,M=(0,w.Z)(F),e.prev=21,M.s();case 23:if((B=M.n()).done){e.next=37;break}if(U=B.value,G=n[U],G||(H=o.missedToken,H||(H=[]),H.push(U),o.missedToken=H),G){e.next=29;break}return e.abrupt("continue",35);case 29:return z=parseInt(r.substr(6))||(new Date).getTime(),q={ticketGroup:j,subTicketGroup:O,needCombineGroup:!1,groupId:m,ressDesc:!1,groupType:I,ticketGroupIndex:E,shelfType_id:T,activityDetail:null===t||void 0===t?void 0:t.activityDetail,module_name:d.BF[I],serverSec:z,baseTicketDetailUrl:a,baiduBaseInfo:null===o||void 0===o?void 0:o.baiduBaseInfo,request:o},e.next=33,(0,p.u)({resource:G,extra:q});case 33:K=e.sent,K&&P.push(K);case 35:e.next=23;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e["catch"](21),M.e(e.t0);case 42:return e.prev=42,M.f(),e.finish(42);case 45:e.next=17;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e["catch"](15),V.e(e.t1);case 52:return e.prev=52,V.f(),e.finish(52);case 55:e.next=11;break;case 57:e.next=62;break;case 59:e.prev=59,e.t2=e["catch"](9),N.e(e.t2);case 62:return e.prev=62,N.f(),e.finish(62);case 65:return W=Math.min(P.length,3),X=u(x,Z,1),Y=X/100>=.1&&X/100<=.9,Q=[],J=x>0?"\u7d2f\u8ba1\u9500\u91cf".concat((0,l.Z)(x)):"",$=Y&&X?"".concat(X,"%\u6e38\u5ba2\u8d2d\u4e70"):"",J&&Q.push(J),$&&Q.push($),f.groupList=(0,s.Z)({},m,{type:"activity",module_name:null!==(c=d.BF[I])&&void 0!==c?c:"",visibleNumber:W,salesInfo:Q,cardList:P,viewMore:{text:P.length>W?"\u67e5\u770b\u66f4\u591a".concat(P.length-W,"\u4e2a"):""}}),f.productType="\u6d3b\u52a8",f.isActivity=(0,y.ri)(f.tabType),e.abrupt("return",f);case 77:case"end":return e.stop()}}),e,null,[[9,59,62,65],[15,49,52,55],[21,39,42,45]])}))),Z.apply(this,arguments)}var T=n(85187),S=function(e){var t={};return e.forEach((function(e){e.formatedFlags=C(e.flags),e.formatedExtInfos=P(e.extInfos);var n=e.token,i=void 0===n?"":n,o=e.priceInfo,r=e.type,a=e.buyType,s=e.formatedFlags,l=s.isSameSalePrice,c=s.minPriceFlag,u=s.needUpdateAppVersion;e.needUpdateAppVersion=u;var d=T.GI.getPlatform()==T.GI.PLATFORM_TYPE.CRN||T.hj.isWechat()||T.GI.getPlatform()==T.GI.PLATFORM_TYPE.H5;(1!=a||d)&&(e.isZeroPrice=o&&0===o.price&&!c&&l,3==r?(e.ressType=f.cM.seckill,i&&(t["".concat(i)]=e)):11==r?(e.ressType=f.cM.official,i&&(t["".concat(i)]=e)):(e.ressType=f.cM.normal,i&&(t["".concat(i)]=e)))})),t},C=function(e){if(!e||!e.length)return{};var t={};return(e||[]).forEach((function(e){e&&(t[e]=!0)})),t},P=function(e){if(!e||!e.length)return{};var t={};return(e||[]).forEach((function(e){if(e&&e.key){var n=e.key,i=e.value,o=i;t[n]=o}})),t},N=function(e,t){if(e)return e instanceof Array?e.map((function(e,n){var i=e||{},o=i.isMarketing,r=i.isRecommend,a=i.recommendTags,s=void 0===a?[]:a,l=i.groupList,c=void 0===l?{}:l,u=i.isPoiactivity,d=i.groupName;return{groupName:d,recommendTags:s,groupList:c,isMarketing:o,isRecommend:r,isPoiactivity:u,activityId:null===t||void 0===t?void 0:t.activityId,activityDetail:t}})):void 0},D=function(e){return e},j=function(e,t,n,i,o){var r=(null===e||void 0===e?void 0:e.panicBuyShelfs)||[],a=(null===e||void 0===e?void 0:e.marketingShelf)||[],s=(null===e||void 0===e?void 0:e.handpickShelf)||[],l=[],c=R(t),u=[],d=[];a.forEach((function(e,t){var n;null!==e&&void 0!==e&&null!==(n=e.groupList)&&void 0!==n&&null!==(n=n.marketing)&&void 0!==n&&n.cardList&&(u=u.concat(e.groupList.marketing.cardList))})),s.forEach((function(e,t){var n;null!==e&&void 0!==e&&null!==(n=e.groupList)&&void 0!==n&&null!==(n=n.recommend)&&void 0!==n&&n.cardList&&(d=d.concat(e.groupList.recommend.cardList))})),c.forEach((function(t,n){var i,o,c;switch(t){case"seckill":r.forEach((function(e){var n;l.push({ressType:t,groupName:(null===e||void 0===e?void 0:e.groupName)||"",groupNameImgUrl:(null===e||void 0===e?void 0:e.groupNameImgUrl)||"",group:null===e||void 0===e||null===(n=e.groupList)||void 0===n?void 0:n["seckill"]})}));break;case"poiactivity":for(var u=0;u<3;u++){var d,p,f,h=e["poiactivityShelf".concat(u||"")][0];if(null!==(d=e["poiactivityShelf".concat(u||"")])&&void 0!==d&&d.length)l.push({ressType:t,groupName:(null===h||void 0===h?void 0:h.groupName)||"",groupNameImgUrl:(null===h||void 0===h?void 0:h.groupNameImgUrl)||"",activityRessType:"poiactivity".concat(u||""),activityId:null===(p=e["poiactivityShelf".concat(u||"")])||void 0===p||null===(p=p[0])||void 0===p?void 0:p.activityId,activityDetail:h.activityDetail,group:null===(f=e["poiactivityShelf".concat(u||"")])||void 0===f||null===(f=f[0])||void 0===f||null===(f=f.groupList)||void 0===f?void 0:f["poiactivity"]})}break;case"marketing":var m,_,v;if(a.length>=1)l.push({ressType:t,groupName:(null===(m=a[0])||void 0===m?void 0:m.groupName)||"",groupNameImgUrl:(null===(_=a[0])||void 0===_?void 0:_.groupNameImgUrl)||"",group:null===(v=a[0])||void 0===v||null===(v=v.groupList)||void 0===v?void 0:v["marketing"]});break;case"recommend":l.push({ressType:t,groupName:(null===(i=s[0])||void 0===i?void 0:i.groupName)||"",groupNameImgUrl:(null===(o=s[0])||void 0===o?void 0:o.groupNameImgUrl)||"",group:null===(c=s[0])||void 0===c||null===(c=c.groupList)||void 0===c?void 0:c["recommend"]});break}}));var p={groupName:"",categoryName:(o||[]).includes("showContestPoi")?"\u70ed\u95e8\u62a2\u7968":"\u8d85\u503c\u7cbe\u9009",desc:{},anchorId:"0_0-0-0-0_czjx",groupList:{},id:"czjx",shelfTabInfo:{},hasPresell:!1,needCombineGroup:!0,isXToOne:!0,innerseqIndex:n?1:0,productType:"\u95e8\u7968",shelfTabInfoInitKey:""},f={seckill:"seckill",marketing:"market",recommend:"recommend",poiactivity:"poiactivity",poiactivity1:"poiactivity1",poiactivity2:"poiactivity2"};if(l.forEach((function(e){var t=f[e.activityRessType||e.ressType];p.shelfTabInfo[t]=e.groupName;var n=JSON.parse(JSON.stringify(e.group||{}));n.poiactivityname="poiactivity"==e.ressType?e.groupName:"",n.groupName=e.groupName,n.activityDetail=D(e.activityDetail),n.viewMore={text:"\u67e5\u770b\u66f4\u591a".concat(e.groupName?" \xb7 "+e.groupName:"")},"seckill"==e.ressType&&(o||[]).includes("showContestPoi")?n.visibleNumber=3:n.visibleNumber=1,p.groupList[t]=n})),1===Object.keys(p.groupList||{}).length){var h=p.groupList[Object.keys(p.groupList)[0]];p.groupName=(null===h||void 0===h?void 0:h.groupName)||""}return p.shelfTabInfoInitKey=i,[p]},R=function(e){var t=[];return(null===e||void 0===e?void 0:e.length)&&e.some((function(e,n){e.tabType!==f.XN.marketing||t.includes("marketing")?e.tabType!==f.XN.poiactivity||t.includes("poiactivity")?e.tabType!==f.XN.recommend||t.includes("recommend")?e.tabType!==f.XN.seckill||t.includes("seckill")||t.push("seckill"):t.push("recommend"):t.push("poiactivity"):t.push("marketing")})),t},L=n(48085),E=n(49671),V=n(13878),A=n(37617),O=n(55853),F=n(29864),M=n(64558),B=n(2434),U=function(e,t){var n,i=null===(n=e.ticketGroups)||void 0===n||null===(n=n[0].subTicketGroups)||void 0===n||null===(n=n[0].tokens)||void 0===n?void 0:n[0],o=t[i];return{resource:o}},G=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,s,l,c,u,d,p,h,m,_,v,y,x,w,Z,T,C,P,D,R,G,H,z,q,K,W,X,Y,Q,J,$,ee,te,ne,ie,oe,re,ae,se,le,ce,ue,de,pe,fe,he,me,_e,ve,ge,ye,xe,be,ke,we,Ie,Ze,Te,Se,Ce,Pe,Ne,De,je;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=t.request,c=t.response,u={},d=c.shelfInfo,p=void 0===d?{}:d,h=c.scenicSpotInfo,m=void 0===h?{}:h,_=c.baseTicketDetailUrl,v=l.isInit,y=l.poiId,x=l.spotId,w=l.filters,Z=void 0===w?null:w,T=l.anchorCategory,C=(null===p||void 0===p||null===(n=p.ResponseStatus)||void 0===n||null===(n=n.Extension)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.Value)||"",(0,V.FD)("rootMessageId-shelf",C),P=(null===p||void 0===p||null===(a=p.ResponseStatus)||void 0===a?void 0:a.Timestamp)||"",(0,g.l)(P),D=p.shelfGroups,R=void 0===D?null:D,G=p.resources,H=void 0===G?[]:G,z=p.extInfos,q=p.shelfTypes,K=p.crossRecommendProductInfo,l.isMainShelfNoData=(0,A.kF)(p),u["error"]=!1,R||Z){e.next=14;break}return u["error"]=!0,e.abrupt("return",u);case 14:(0,L.BT)(z),W=S(H),X=[],Y=(R||[]).reduce((function(e,t){var n=(null===t||void 0===t?void 0:t.sumYearlySale)||0;return e+n}),0),v&&($=m||{},ee=$.scenicSpotInfos,te=void 0===ee?[]:ee,l.poiId=y||((null===te||void 0===te||null===(Q=te[0])||void 0===Q||null===(Q=Q.basicInfo)||void 0===Q?void 0:Q.poiId)||""),(0,E._1)({viewspotid:String(x),poiid:String(l.poiId)}),l.hideShelfTypes=null===(J=(z||[]).find((function(e){return"hideShelfTypes"==(null===e||void 0===e?void 0:e.key)})))||void 0===J?void 0:J.value),ne=!1,ie=[],oe=[],re=[],ae=[],se=[],le=[],ce={},ue={},de={},pe={hotelGroup:{},hotelIndex:-1,hasHotel:!1},fe=!1,he=(0,i.Z)().mark((function e(){var t,n,r,a,s,c,u,d,p,h,m,v;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=R[_e],r){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(r.tabType!==f.XN.marketing&&r.tabType!==f.XN.poiactivity&&r.tabType!==f.XN.recommend&&r.tabType!==f.XN.seckill){e.next=6;break}if((0,b.IA)()){e.next=6;break}return e.abrupt("return",0);case 6:if(a=null,s=r.id,r.tabType===f.XN.poiactivity&&(r.activityDetail&&(r.activityDetail.activityId="100_"+_e),null!==(c=ce)&&void 0!==c&&c.activityName?null!==(u=ue)&&void 0!==u&&u.activityName?null!==(d=de)&&void 0!==d&&d.activityName||(de=r.activityDetail):ue=r.activityDetail:ce=r.activityDetail),r.tabType!==f.XN.main&&r.tabType!==f.XN.scenicStore&&r.tabType!==f.XN.marketing&&r.tabType!==f.XN.peripheral&&r.tabType!==f.XN.poiactivity&&r.tabType!==f.XN.recommend&&r.tabType!==f.XN.seckill&&r.tabType!=f.XN.custom){e.next=18;break}return e.next=12,k((0,o.Z)((0,o.Z)({},r),{},{saleTotalCount:Y,shelfGroupIndex:_e}),W,l,_,K);case 12:p=e.sent,a=p&&p.group,a&&r.tabType==f.XN.seckill?(ie.push(a),a=""):r.tabType==f.XN.marketing?(a&&re.push(a),a=""):r.tabType==f.XN.poiactivity?(null!==ae&&void 0!==ae&&ae.length||!a?null!==se&&void 0!==se&&se.length||!a?null!==le&&void 0!==le&&le.length||!a||le.push(a):se.push(a):ae.push(a),a=""):r.tabType==f.XN.recommend&&(a&&oe.push(a),a=""),a&&a.hasPresell&&(ne=!0),e.next=25;break;case 18:if(r.tabType!==f.XN.activity){e.next=24;break}return e.next=21,I((0,o.Z)((0,o.Z)({},r),{},{spotId:x,saleTotalCount:Y}),W,l,P,_);case 21:a=e.sent,e.next=25;break;case 24:r.tabType===f.XN.ticketHotel?(pe.hotelGroup=r,pe.hotelShelfType=null===q||void 0===q?void 0:q.find((function(e){var t;return((null===e||void 0===e||null===(t=e.shelfItems)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.shelfGroupId)||"-1")==(null===r||void 0===r?void 0:r.id)})),pe.hotelIndex=X&&X.length,pe.hasHotel=!0):r.tabType==f.XN.poi?fe=!0:r.tabType==f.XN.appointment&&(h=U(r,W),m=h.resource,v=(0,B.Z)(r,m),a=v&&v.group);case 25:a&&null!==(t=Object.keys((null===(n=a)||void 0===n?void 0:n.groupList)||{}))&&void 0!==t&&t.length&&(a.productType=a.productType?a.productType:"\u95e8\u7968",a.id=s,X.push(a),r.tabType==f.XN.main&&(l.isTicketGroup=!0));case 26:case"end":return e.stop()}}),e)})),_e=0;case 33:if(!(_e<(null===R||void 0===R?void 0:R.length))){e.next=43;break}return e.delegateYield(he(),"t0",35);case 35:if(me=e.t0,0!==me){e.next=38;break}return e.abrupt("continue",40);case 38:if(!me){e.next=40;break}return e.abrupt("return",me.v);case 40:_e++,e.next=33;break;case 43:return l.hasCountDown=(null===ie||void 0===ie?void 0:ie.length)>0||ne,l.hotelPosInfo=pe,l.hasToShop=fe,ve=N(re),ge=N(ae,ce),ye=N(se,ue),xe=N(le,de),be=N(oe),u["panicBuyShelfs"]=ie,u["mainShelfs"]={shelfs:X,hasPresell:ne},u["handpickShelf"]=be,u["marketingShelf"]=ve,u["poiactivityShelf"]=ge,u["poiactivityShelf1"]=ye,u["poiactivityShelf2"]=xe,ke=l.businessIdTop||-1!=l.menuId||l.ticketGroupId,we=j(u,R,ke,T,null===p||void 0===p?void 0:p.flags),u["concatShelf"]=we,u["activityDetail"]=ce,u["activityDetail1"]=ue,u["activityDetail2"]=de,Ie="B"===(null===z||void 0===z||null===(s=z.find((function(e){return"230907_VAC_ryjhh"===e.key})))||void 0===s?void 0:s.value),Ie&&K&&(Ze=q.filter((function(e){return e.shelfItems.find((function(e){return"3"===e.shelfGroupId}))})),l.isRecommendDaytrip=Ie,Te=(0,M.getPoiModuleList)({shelfTypes:Ze,isMainShelf:!0,isRecommendDaytrip:Ie}),Se=Te.poiShelfTypes,Ce=(0,F["default"])({response:{poiRecommendInfo:{poiShelfTypes:Se,data:K}},request:l}),Pe=(0,r.Z)(Ce,1),Ne=Pe[0],X.push(Ne)),De=(u&&u.mainShelfs&&u.mainShelfs.shelfs||[]).some((function(e){return!(!e||e.isActivity||e.isHotel)})),l.hasMainShelf=De,je=l.missedToken,je&&je.length>0&&((0,O.KH)(je),l.missedToken=[]),e.abrupt("return",u);case 71:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=G},90927:function(e,t,n){"use strict";n.d(t,{l:function(){return o},b:function(){return r}});var i=0;function o(e){var t=0;t="string"===typeof e&&"/"==e[0]?parseInt(e.substr(6))||(new Date).getTime():e,i=Date.now()-t}function r(){return Date.now()-i}},2434:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var i=n(298),o=n(79975),r=n(48085);t["Z"]=function(e,t){var n;if(!t)return null;var i=e.groupId,r=e.ticketGroups,a=void 0===r?[]:r,s=e.id,l=e.tabType,u={id:s,groupName:"",shelfTabInfo:{},groupList:{},hasPresell:!1,groupId:i,hasAppointment:!0},d=null,p=[c(t,{title:null===(n=a[0])||void 0===n?void 0:n.name})];return d={tips:{},cardList:p,visibleNumber:p.length,cardCount:p.length,module_name:o.BF[l]},u.groupList["default"]=d,{group:u}};var a=function(e,t){return 0==t?"":2==t?"\u9884\u7ea6":1==e?"\u8d2d\u7968":"\u9884\u8ba2"},s={0:"\u672a\u77e5",1:"\u6536\u8d39",2:"\u514d\u8d39",3:"\u65e0\u9700\u95e8\u7968",4:"\u9650\u65f6\u514d\u8d39",5:"\u9650\u65f6\u6536\u8d39"},l=function(e){return e[e["jumpUrl"]=1]="jumpUrl",e[e["qrcode"]=2]="qrcode",e[e["text"]=3]="text",e}({}),c=function(e,t){var n=e.appointmentInfo,o=e.fullName,c=t.title,u=n||{},d=u.chargeType,p=u.type,f=u.sightTicketType,h=u.appointmentDetails,m=void 0===h?[]:h,_=u.recommendInfo,v=_||{},g=v.details,y=void 0===g?[]:g,x=(0,r.ZF)(),b={chargetype:s[f],needreserve:2==p?"\u662f":"\u5426",channelentrance:"",orderbuttonname:""};1==x?b.channelentrance=a(x,p):b.orderbuttonname=a(x,p);var k={channellayer:2==p?"\u9884\u7ea6":"\u8d2d\u7968",channeltype:2==p?"\u9884\u7ea6":"\u8d2d\u7968"};return{styleType:x,title:c,subTitle:o,feeText:2==d?"\u514d\u8d39":"\u6536\u8d39",buttonText:a(x,p),metricData:b,appointPopInfos:{popTitle:(2==p?"\u9884\u7ea6":"\u8d2d\u7968")+"\u65b9\u5f0f",details:m.map((function(e){var t=e.channel,n=e.detail,o=e.wayId,r=e.supplement,a=0==n.indexOf("http:")||0==n.indexOf("https:"),s=a&&[1,2,4].includes(o),c=s?l.qrcode:a?l.jumpUrl:l.text;return{channel:t,detailType:c,detail:n,supplement:r,metricData:(0,i.Z)((0,i.Z)({},k),{},{channeldetail:t,channelbutton:s?"\u67e5\u770b\u4e8c\u7ef4\u7801":a?"\u8df3\u8f6c\u94fe\u63a5":""})}})),recommendInfo:(0,i.Z)((0,i.Z)({},_),{},{metricData:(0,i.Z)((0,i.Z)({},k),{},{recommended1:y[0]||"",recommended2:y[1]||""})})}}}},99059:function(e,t,n){"use strict";n.d(t,{hv:function(){return s},E4:function(){return l},Jz:function(){return u}});var i=n(298),o=n(92954),r=n.n(o),a=function(e){var t=!1;return e&&e.length>0&&(t=!!e.find((function(e){return(e.detail||"").indexOf("<img")>-1}))),t},s=function(e){var t=e.shelfGroup,n=e.ticketGroup,i=e.ressDesc,o=t.desc,r=t.detail,a=n||{},s=a.desc,l=a.detail,u=a.name,d=[],p={};if(i)o&&(p={tips:{name:o,showDetail:!!r,propsData:c([{detail:r}]),tipsMetricInfo:{tipType:o?"\u5206\u7ec4":"\u7968\u79cd",vs_type:0,is_video:0}}});else if(s){o||r?(d.push({desc:o,detail:r}),(s||l)&&d.push({name:u,desc:s,detail:l})):l&&d.push({detail:l});var f=!!d.length;p={tips:{name:s,showDetail:f,propsData:c(d),tipsMetricInfo:{tipType:o?"\u5206\u7ec4":"\u7968\u79cd",vs_type:0,is_video:0}}}}else if(o){r&&d.push({detail:r}),(s||l)&&d.push({name:u,desc:s,detail:l});var h=!!d.length;p={tips:{name:s,showDetail:h,propsData:c(d),tipsMetricInfo:{tipType:o?"\u5206\u7ec4":"\u7968\u79cd",vs_type:0,is_video:0}}}}else p={};return p},l=function(e){var t=e.shelfGroup,n=e.ticketGroups,i=e.ressDesc;if(!n||!n.length||!t)return{};var o=t.desc,r=t.detail,a=t.groupName||t.name,s=[];r&&s.push({detail:r}),i||(n||[]).forEach((function(e){if(e){var t=e||{},n=t.desc,i=t.detail,o=t.name;(n||i)&&s.push({name:o,desc:n,detail:i})}}));var l=!!s.length,u=o||(l?"\u67e5\u770b".concat(a?a+"\u7684":"","\u4f7f\u7528\u8bf4\u660e"):""),d=c(s);return{tips:{name:u,showDetail:l,propsData:d,tipsMetricInfo:{tipType:o?"\u5206\u7ec4":"\u7968\u79cd",vs_type:0,is_video:0}}}},c=function(e,t){var n=(0,i.Z)({details:e,isHasImg:a(e),imageStyle:{width:r().getSystemInfoSync().windowWidth-32}},t);return n},u=function(e){var t=e.resource,n=e.extra,i=n.ticketGroup,o=n.ressDesc,r=n.request;if(t){var a=t.ressType;if(o&&"marketing"!==a){var s=i||{},l=s.desc,u=s.detail,d=s.id,p=s.ticketTitle,f=void 0===p?"":p,h=s.titleType,m=void 0===h?"":h,_=f&&m,v="vsMainTicket"===m||"vsBuySeparately"===m||"ticketViedo"===m,g=m&&("vsMainTicket"===m||"vsBuySeparately"===m),y=v||!!u,x={};return x=l||_?{tips:{name:_?f:l,showDetail:y,propsData:y?c([{detail:u}],{desc:l,ticketGroupId:d,poiId:(null===r||void 0===r?void 0:r.poiId)||0}):null,imgUrl:g?"https://dimg04.c-ctrip.com/images/1o52k12000ax8wkmv1A5A.png.webp":""}}:{},x}}}},3300:function(e,t,n){"use strict";n.d(t,{XN:function(){return o},cM:function(){return a}});var i=n(298),o=function(e){return e[e["main"]=1]="main",e[e["scenicStore"]=2]="scenicStore",e[e["poi"]=3]="poi",e[e["activity"]=4]="activity",e[e["ticketHotel"]=5]="ticketHotel",e[e["marketing"]=6]="marketing",e[e["peripheral"]=7]="peripheral",e[e["recommend"]=8]="recommend",e[e["seckill"]=9]="seckill",e[e["poiactivity"]=10]="poiactivity",e[e["custom"]=11]="custom",e[e["appointment"]=12]="appointment",e}({}),r={info:{type:"info",border:!1},green:{type:"green",border:!1},blue:{type:"blue"},red:{type:"red",border:!1},orange:{type:"orange",separator:!0},orange_icon:{type:"orange_icon",separator:!1,icon:"discount2"},info_icon:{type:"info_icon",separator:!1},red_sale:{type:"red_sale",icon:"discount"},studio:{type:"studio",icon:"discount2"},new_studio:{type:"new_studio",icon:"discount"},quanzhuti:{type:"red_sale",icon:"discount",numberOfLines:1},hollow_brown:{type:"hollow_brown"},hollow_orange:{type:"hollow_orange"},hollow_red:{type:"hollow_red"}},a=(r.green,r.green,r.green,r.info,r.info,r.info,r.info,r.red_sale,r.red_sale,r.red_sale,r.red_sale,(0,i.Z)((0,i.Z)({},r.info_icon),{},{icon:"flight"}),(0,i.Z)((0,i.Z)({},r.info_icon),{},{icon:"svip"}),r.new_studio,r.quanzhuti,r.orange,r.orange,r.blue,r.blue,r.blue,r.info,r.info,r.info,r.info,r.hollow_red,r.hollow_red,r.hollow_red,r.hollow_red,r.hollow_red,r.hollow_red,r.hollow_orange,r.hollow_orange,r.hollow_orange,r.hollow_brown,r.hollow_orange,function(e){return e["seckill"]="seckill",e["normal"]="normal",e["scenicStore"]="scenicStore",e["official"]="official",e["recommed"]="recommend",e["marketing"]="marketing",e["hotel"]="hotel",e["poiactivity"]="poiactivity",e["custom"]="custom",e}({}))},56290:function(e,t,n){"use strict";n.r(t);var i=n(45023),o=n(298),r=n(37617),a=n(39726),s=function(e,t){return e.length===t.length&&e.every((function(e){return t.includes(e)}))},l=function(e,t,n,l,c){var u,d,p,f,h=c.tabsInfo,m=c.shelfTypes,_=(null===(u=e.poiList)||void 0===u||null===(u=u.mainShelfs)||void 0===u?void 0:u.shelfs)||[],v=(null===(d=e.poiList)||void 0===d?void 0:d.concatShelf)||[];_=_.concat(e.hotelList||[]),_=_.concat(e.poiRecommend||[]);var g=(t||[]).map((function(e){if(e){if("0_0-0-0-0_czjx"==e.anchorId&&v.length)return v[0];var t,n=_.filter((function(t){return t.id==e.shelfGroupId&&t.id}));return 1==n.length?t=n[0]:n.length>1&&(t=n.find((function(t){return s(t.productIdList||[],e.productIdList||[])}))),t&&(e=(0,o.Z)((0,o.Z)((0,o.Z)({},e),t),{},{groupName:t.groupName,categoryName:e.categoryName}),delete e.groupId),e}})),y=g.filter((function(e){return!e.pendingShelf})),x=[];if(l.includes("hotelList")||l.includes("poiRecommend")){var b=g.filter((function(e){return e.pendingShelf}));m.map((function(e){var t=e.shelfItems;(t||[]).forEach((function(e){if(2==e.type&&e.combineShelfItems){var t="",n=e.title,r=void 0===n?"":n,a=e.subTitle,l=void 0===a?"":a,c=e.combineShelfItems.reduce((function(e,n,a){var c,u=b.filter((function(e){return e.id==n.shelfGroupId&&e.id}));if(1==u.length?c=u[0]:u.length>1&&(c=u.find((function(e){return s(e.productIdList||[],n.productIdList||[])}))),c&&!t){var d=Object.keys(c.groupList);t=d[0];var p=c.groupList[t]||{},f=p.cardList,h=p.cardCount,m=p.visibleNumber,_=p.viewMore;e=(0,o.Z)((0,o.Z)((0,o.Z)({},e),c),{},{groupName:r,tabSubTitle:l,pendingShelf:!1,groupList:(0,i.Z)({},t,{cardList:f,cardCount:h,visibleNumber:m,viewMore:_})})}else if(c){var v=Object.keys(c.groupList),g=c.groupList[v[0]],y=e.groupList[t].cardList,x=y.concat(g.cardList||[]),k=Math.min(x.length,3);e=(0,o.Z)((0,o.Z)({},e),{},{groupList:(0,i.Z)({},t,(0,o.Z)((0,o.Z)({},e.groupList[t]),{},{cardCount:x.length,cardList:x,visibleNumber:k,viewMore:{text:x.length>k?"\u67e5\u770b\u66f4\u591a".concat(x.length-k,"\u4e2a"):""}}))})}return e}),{});x.push(c)}}))})),g=y.concat(x)}var k,w,I,Z,T,S=g.filter((function(e){return e.pendingShelf})),C=n||{},P=C.filters;(P&&P.length>0&&(k=P[0].filterItems,k&&(w=a.Z&&(0,a.Z)(k[0]))),null===h||void 0===h||null===(p=h.forEach)||void 0===p||p.call(h,(function(e){var t,n;e.eventresult="\u8d85\u503c\u7cbe\u9009"===(null===e||void 0===e?void 0:e.categoryName)||"\u70ed\u95e8\u62a2\u7968"===(null===e||void 0===e?void 0:e.categoryName)?"0":"\u672a\u77e5";var i=!1,o=[];if(null===(t=e.anchorIdArray)||void 0===t||null===(n=t.forEach)||void 0===n||n.call(t,(function(t,n){var r=g.find((function(e){return e&&e.anchorId==t}));if(r){o.push(r);var a=Object.keys(r.groupList||{});a.forEach((function(t){r.groupList[t]&&r.groupList[t].cardList.length&&(e.eventresult="0",i=!0)}))}})),l.includes("hotelList")||l.includes("poiRecommend")){if(i){var r,a=(null===m||void 0===m||null===(r=m.find((function(t){return t.code==e.code})))||void 0===r?void 0:r.label)||"";e.eventresult="0",e.label=a,e.noDataMetric=null}else{var s,c,u;e.eventresult="1",e.label="\u4e0d\u53ef\u8ba2",e.noDataMetric={filterbutton:null!==(s="\u8ba2".concat(w))&&void 0!==s?s:"",filtervalue:null!==(c=null===(u=k)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.value)&&void 0!==c?c:""}}o.forEach((function(t,n){if(t.deleteTag=!1,i){var o=!1,r=Object.keys(t.groupList||{});if(r.forEach((function(e){t.groupList[e]&&t.groupList[e].cardList.length&&(o=!0)})),!o){var a=e.anchorIdArray.findIndex((function(e){return e==t.anchorId}));e.anchorIdArray.splice(a,1),t.deleteTag=!0}}else if(0!=n){var s=e.anchorIdArray.findIndex((function(e){return e==t.anchorId}));e.anchorIdArray.splice(s,1),t.deleteTag=!0}}))}})),l.includes("poiList"))&&(f=null===c||void 0===c||null===(I=c.shelfInfo)||void 0===I||null===(I=I.flags)||void 0===I?void 0:I.includes("hideFilter"));(l.includes("hotelList")||l.includes("poiRecommend"))&&(g=g.filter((function(e){return!e.deleteTag})),(0,r.mI)(n,(null===(Z=e.poiRecommend)||void 0===Z?void 0:Z.length)||(null===(T=e.hotelList)||void 0===T?void 0:T.length)));return{res:y.concat(x),allPendingShelfs:S,notShowFilters:f}};t["default"]=l},16281:function(e,t,n){"use strict";function i(e){return 6==e||8==e||9==e||10==e}function o(e){return 3===e.type||1===e.buyType}function r(e){return 9==e}function a(e){return 8==e}function s(e){return 6==e}function l(e){return 10==e}function c(e){return 5===e}function u(e){return 7===e}n.d(t,{zu:function(){return i},e3:function(){return o},ce:function(){return r},i8:function(){return a},N3:function(){return s},ri:function(){return l},iX:function(){return c},Pj:function(){return u}})},55853:function(e,t,n){"use strict";n.d(t,{wl:function(){return l},XL:function(){return c},ln:function(){return u},OO:function(){return d},IX:function(){return p},pP:function(){return f},_Q:function(){return h},jM:function(){return m},tw:function(){return _},MR:function(){return v},cL:function(){return g},xn:function(){return y},KH:function(){return x},uI:function(){return b}});var i=n(79756),o=n(73954),r=n(13878),a=n(45710),s=n(65896),l=function(e){var t,n,r="ctrip",l=(0,o.Z)().clientInfo.version,c=(0,i.getCurrentInstance)(),u="".concat(null===c||void 0===c||null===(t=c.router)||void 0===t?void 0:t.path,"?").concat((0,s.R)(null===c||void 0===c||null===(n=c.router)||void 0===n?void 0:n.params));(0,a.Vg)({attrs:[{key:"key",value:(null===e||void 0===e?void 0:e.spotId)+(null===e||void 0===e?void 0:e.poiId)+Date.now().toString(36)+(1e3*Math.random()).toString(36)+(1e4*Math.random()).toString(36)}],action:"sys_pageinfo",desc:"\u57fa\u672c\u4fe1\u606f",contents:[{key:"PageId",value:"sight_detail"},{key:"url\u5730\u5740",value:u},{key:"\u4ea7\u54c1\u7c7b\u578b",value:""},{key:"\u6e20\u9053\u5e73\u53f0",value:r},{key:"\u7248\u672c",value:l},{key:"spotid",value:null===e||void 0===e?void 0:e.spotId},{key:"poiid",value:null===e||void 0===e?void 0:e.poiId}],jsonData:e})},c=function(e){return{attrs:[{key:"\u4f18\u60e0\u5238",value:e}],module:"\u4f18\u60e0\u5238\u6a21\u5757",scene:"\u4f18\u60e0\u5238\u6a21\u5757\u70b9\u51fb",action:"usr_click",value:e}},u=function(e,t){return{attrs:[{key:"\u7b5b\u9009\u6a21\u5757",value:t}],module:"\u7b5b\u9009\u6a21\u5757",scene:"\u9009\u62e9\u65e5\u671f",action:"usr_change",before:e,value:e==t?"\u65e0\u7b5b\u9009":t}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{attrs:[{key:"\u7b5b\u9009\u6a21\u5757",value:e}],module:"\u7b5b\u9009\u6a21\u5757",scene:1==t?"\u70b9\u51fb\u66f4\u591a\u65e5\u671f":2==t?"\u70b9\u51fb\u6e05\u7a7a\u6309\u94ae":"",role:"usr",action:"click",value:e}},p=function(e){return{attrs:[{key:"\u7968\u79cdtab",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u70b9\u51fb\u7968\u79cdtab",role:"usr",action:"click",value:e}},f=function(e,t){return{attrs:[{key:"\u8d27\u67b6group\u67e5\u770b\u66f4\u591a",value:e?"\u6536\u8d77":"\u5c55\u5f00"}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u5c55\u5f00/\u6536\u8d77\u6309\u94ae",role:"usr",action:"click",value:"".concat(t||"","-").concat(e?"\u6536\u8d77":"\u5c55\u5f00")}},h=function(e){return{attrs:[{key:"\u957f\u5c3e\u7968\u79cd\u5c55\u5f00/\u6536\u8d77\u6309\u94ae",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u957f\u5c3e\u7968\u79cd\u5c55\u5f00/\u6536\u8d77\u6309\u94ae",role:"usr",action:"click",value:e}},m=function(e){return{attrs:[{key:"\u8d27\u67b6\u5361\u7247\u8d2d\u7968\u8d34\u58eb",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u70b9\u51fb\u8d2d\u7968\u8d34\u58eb",action:"usr_click",value:e}},_=function(e){return{attrs:[{key:"\u8d27\u67b6\u5361\u7247\u4f18\u60e0\u8bf4\u660e",value:e}],module:"\u4f18\u60e0\u5238\u6a21\u5757",scene:"\u70b9\u51fb\u5c55\u793a\u4f18\u60e0\u5238",action:"usr_click",value:e}},v=function(e){return{attrs:[{key:"\u8d27\u67b6\u5361\u7247\u9002\u7528\u4eba\u7fa4",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u8d27\u67b6\u5361\u7247\u70b9\u51fb\u9002\u7528\u4eba\u7fa4",action:"usr_click",value:e}},g=function(e){return{attrs:[{key:"\u8d27\u67b6\u5361\u7247\u8d2d\u4e70\u987b\u77e5",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u8d27\u67b6\u5361\u7247\u70b9\u51fb\u8d2d\u4e70\u987b\u77e5",role:"usr",action:"click",value:e}},y=function(e){return{attrs:[{key:"\u6309\u94ae",value:e}],module:"\u8d27\u67b6\u6a21\u5757",scene:"\u9009\u62e9\u8d44\u6e90",role:"usr",action:"click",value:e}},x=function(e){var t=(0,r.b6)("rootMessageId-shelf")||"";t&&(0,a.Vg)({attrs:[{key:"tkt_1100003",value:"token\u6ca1\u6709\u5339\u914d\u5230\u8d44\u6e90"}],action:"sys_show",module:"\u8d27\u67b6\u963b\u65ad",scene:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",key:"tkt_1100003",value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",jsonData:{value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",token:e},rootMessageId:t}),(0,r.FD)("rootMessageId-shelf","")},b=function(e){var t=(0,r.b6)("rootMessageId-shelfData")||"";t&&(0,a.Vg)({attrs:[{key:"tkt_4100002",value:"\u4e3b\u6d41\u91cf\u666f\u70b9\u6ca1\u6709\u6570\u636e"}],action:"sys_show",module:"\u8d27\u67b6\u963b\u65ad",scene:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38,\u4e3b\u6d41\u91cf\u666f\u70b9\u6ca1\u6709\u6570\u636e",key:"tkt_4100002",value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38\uff0c\u4e3b\u6d41\u91cf\u666f\u70b9\u6ca1\u6709\u6570\u636e",jsonData:{value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38\uff0c\u4e3b\u6d41\u91cf\u666f\u70b9\u6ca1\u6709\u6570\u636e",spotId:e},rootMessageId:t}),(0,r.FD)("rootMessageId-shelfData","")}},3795:function(e,t,n){"use strict";n.d(t,{cw:function(){return Z},X4:function(){return P}});var i=n(298),o=n(85187),r=n(49671),a=n(52231),s=a.R[o.GI.getPlatform()],l=function(e){var t=(0,r.ji)()||{},n=t.districtid,o=void 0===n?"":n,a=t.scene,s=void 0===a?"":a,l=t.viewspotid,c=void 0===l?"":l,u=t.poiid,d=void 0===u?"":u,p=t.tabsMetricInfo,f=void 0===p?"":p,h=e||{},m=h.anchorId,_=h.card,v=h.moreInfo,g=_||{},y=g.viewTagName,x=void 0===y?"":y,b=g.id,k=void 0===b?"":b,w=g.mainName,I=void 0===w?"":w,Z=g.index,T=void 0===Z?"":Z,S=v||{},C=S.module_name,P=void 0===C?"":C,N=S.poiactivityname,D=void 0===N?"":N,j=S.tabseq,R=void 0===j?"":j,L=S.groupid,E=void 0===L?"":L,V=S.groupname,A=void 0===V?"":V,O=S.level1saleunitid,F=void 0===O?"":O,M=S.count,B=void 0===M?"":M,U=S.productType,G=void 0===U?"":U;return(0,i.Z)((0,i.Z)({},null===f||void 0===f?void 0:f[m]),{},{districtid:o,scene:s,producttype:x||G,productid:k,productname:I,index:T,viewspotid:c,poiid:d,module_name:P,poiactivityname:D,tabseq:R,groupid:E,groupname:A,level1saleunitid:F,count:B})},c=function(e){var t=(0,r.ji)()||{},n=t.districtid,o=void 0===n?"":n,a=t.scene,s=void 0===a?"":a,l=t.viewspotid,c=void 0===l?"":l,u=t.poiid,d=void 0===u?"":u,p=t.tabsMetricInfo,f=void 0===p?"":p,h=e||{},m=h.anchorId;return(0,i.Z)((0,i.Z)({},null===f||void 0===f?void 0:f[m]),{},{districtid:o,scene:s,viewspotid:c,poiid:d})},u=function(e){var t=(0,r.ji)()||{},n=t.poiid,o=void 0===n?"":n,a=t.tabsMetricInfo,s=void 0===a?"":a,l=e||{},c=l.anchorId,u=l.noDataInfo,d=void 0===u?{}:u,p=d.filterbutton,f=d.filtervalue;return(0,i.Z)((0,i.Z)({},null===s||void 0===s?void 0:s[c]),{},{poiid:o,filterbutton:p,filtervalue:f})},d=function(e){var t=(0,r.ji)()||{},n=t.districtid,o=void 0===n?"":n,a=t.scene,s=void 0===a?"":a,l=t.viewspotid,c=void 0===l?"":l,u=t.poiid,d=void 0===u?"":u,p=t.tabsMetricInfo,f=void 0===p?"":p,h=e||{},m=h.index,_=void 0===m?"":m,v=h.anchorId,g=void 0===v?"":v,y=h.producttype,x=void 0===y?"":y,b=h.productid,k=void 0===b?"":b,w=h.title,I=void 0===w?"":w,Z=h.productname,T=void 0===Z?"":Z,S=h.groupid,C=void 0===S?"":S,P=h.pos,N=void 0===P?"":P,D=h.level1saleunitid,j=void 0===D?"":D,R=h.level2saleunitid,L=void 0===R?"":R,E=h.belongingviewspotid,V=void 0===E?"":E,A=h.resourcetype,O=void 0===A?"":A,F=h.subtktpos,M=void 0===F?"":F,B=h.stocktype,U=void 0===B?"":B,G=h.module_name,H=void 0===G?"":G,z=h.innerseq,q=void 0===z?"":z,K=h.discounttype,W=void 0===K?"":K,X=h.discountprice,Y=void 0===X?"":X,Q=h.elementcount,J=void 0===Q?"":Q,$=h.categoryunitcount,ee=void 0===$?"":$,te=h.is_recommend,ne=void 0===te?"":te,ie=h.is_introduction,oe=void 0===ie?"":ie,re=h.recommendtype,ae=void 0===re?"":re,se=h.bookBtnName,le=void 0===se?"":se,ce=h.shipid,ue=void 0===ce?"":ce,de=h.categoryid_l1,pe=void 0===de?"":de,fe=h.categoryid_l2,he=void 0===fe?"":fe,me=h.ctypename_sec,_e=void 0===me?"":me,ve=h.resourceid,ge=void 0===ve?"":ve,ye=h.personname,xe=void 0===ye?"":ye,be=h.personsubname,ke=void 0===be?"":be,we=h.supertabname,Ie=void 0===we?"":we,Ze=h.poiactivityname,Te=void 0===Ze?"":Ze;return(0,i.Z)((0,i.Z)({},null===f||void 0===f?void 0:f[g]),{},{districtid:o,scene:s,producttype:x,productid:k,productname:(null===I||void 0===I?void 0:I.text)||T,index:_,viewspotid:c,poiid:d,groupid:C,pos:N,level1saleunitid:j,level2saleunitid:L,belongingviewspotid:V,resourcetype:O,subtktpos:M,stocktype:U,module_name:H,innerseq:q,discounttype:W,discountprice:Y,elementcount:J,categoryunitcount:ee,is_recommend:ne,is_introduction:oe,recommendtype:ae,orderbuttonname:le,shipid:ue,categoryid_l1:pe,categoryid_l2:he,ctypename_sec:_e,resourceid:ge,personname:xe,personsubname:ke,supertabname:Ie,poiactivityname:Te})},p=function(e){var t,n=(0,r.E7)("ctrip_click_noresult_noresult_click","238697",(0,i.Z)((0,i.Z)({},l(e)),{},{eventresult:null!==(t=null===e||void 0===e?void 0:e.eventresult)&&void 0!==t?t:"\u672a\u77e5"}));o.hS.logTrace(n.key,n.params||{})},f={tabInfoExposureFn:function(e){return(0,r.S9)("ctrip_dsthome_tktgs_tab_tab_expo","238659",c(e))},tabInfoClickFn:function(e){return(0,r.E7)("ctrip_dsthome_tktgs_tab_tab_click","238660",c(e))},tabInfoNoDataClickFn:function(e){return(0,r.E7)("ctrip_click_noresult_noresult_click","238697",(0,i.Z)((0,i.Z)({},c(e)),{},{eventresult:null===e||void 0===e?void 0:e.eventresult}))},tabInfoNoDataExposureFn:function(e){return(0,r.S9)("ctrip_emptygsid_view_expo","229624",(0,i.Z)((0,i.Z)({},u(e)),{},{eventresult:null===e||void 0===e?void 0:e.eventresult}))},cardExposureFn:function(e){return(0,r.S9)("ctrip_dsthome_tktgs_card_card_expo","238661",d(e))},cardClickFn:function(e){return(0,r.E7)("ctrip_dsthome_tktgs_card_card_click","238662",d(e))},viewMoreExposureFn:function(e){return(0,r.S9)("ctrip_dsthome_tktgs_more_more_expo","238663",l(e))},viewMoreClickFn:function(e){return(0,r.E7)("ctrip_dsthome_tktgs_more_more_click","238664",l(e))},hasTabButUnsureDataMetric:p},h=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=e||{},o=i.module_name,a=i.supertabname,l=i.poiactivityname,c=void 0===l?"":l,u=i.tabseq;return{poiid:n,channelid:s,module_name:o,supertabname:a,poiactivityname:c,tabseq:u}},m=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.filterbutton,s=void 0===a?"":a,l=o.status,c=void 0===l?"":l,u=o.filtervalue,d=void 0===u?"":u;return{poiid:n,viewspotid:i,filterbutton:s,status:c,filtervalue:d}},_=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.type;return{poiid:n,viewspotid:i,type:a}},v=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.pos,l=o.level1saleunitid,c=o.level2saleunitid,u=o.bookBtnName,d=o.resourceid,p=o.resourcetype,f=o.subtktpos,h=o.stocktype,m=o.module_name,_=o.innerseq,v=o.elementcount,g=o.categoryunitcount,y=o.is_recommend,x=o.is_introduction,b=o.recommendtype,k=o.shipid,w=o.personname,I=o.personsubname;return{poiid:n,viewspotid:i,orderbuttonname:u,groupid:a,pos:s,level1saleunitid:l,level2saleunitid:c,resourceid:d,resourcetype:p,subtktpos:f,stocktype:h,module_name:m,innerseq:_,elementcount:v,categoryunitcount:g,is_recommend:y,is_introduction:x,recommendtype:b,shipid:k,personname:w,personsubname:I}},g=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.pos,l=o.level1saleunitid,c=o.level2saleunitid,u=o.resourceid,d=o.resourcetype,p=o.subtktpos,f=o.stocktype,h=o.module_name,m=o.innerseq,_=o.elementcount,v=void 0===_?"":_,g=o.categoryunitcount,y=void 0===g?"":g,x=o.is_recommend,b=void 0===x?"":x,k=o.is_introduction,w=o.recommendtype,I=o.supertabname,Z=void 0===I?"":I,T=o.poiactivityname,S=void 0===T?"":T,C=o.belongingviewspotid,P=void 0===C?"":C;return{poiid:n,viewspotid:i,belongingviewspotid:P,groupid:a,pos:s,level1saleunitid:l,level2saleunitid:c,resourceid:u,resourcetype:d,subtktpos:p,stocktype:f,module_name:h,innerseq:m,elementcount:v,categoryunitcount:y,is_recommend:b,is_introduction:k,recommendtype:w,supertabname:Z,poiactivityname:S}},y=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.tipType,l=o.level1saleunitid,c=o.vs_type,u=o.is_video,d=o.belongingviewspotid;return{poiid:n,viewspotid:i,belongingviewspotid:d,groupid:a,type:s,level1saleunitid:l,vs_type:c,is_video:u}},x=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.pos;return{poiid:n,viewspotid:i,groupid:a,pos:s}},b=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.pos,l=o.level1saleunitid;return{poiid:n,viewspotid:i,groupid:a,pos:s,level1saleunitid:l}},k=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,l=o.pos,c=o.level1saleunitid,u=o.subtktpos;return{poiid:n,viewspotid:i,groupid:a,pos:l,level1saleunitid:c,channelid:s,subtktpos:u}},w=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,l=o.pos,c=o.level1saleunitid,u=o.resourcetype,d=o.is_recommend,p=o.is_introduction,f=o.picType,h=o.belongingviewspotid;return{poiid:n,viewspotid:i,belongingviewspotid:h,groupid:a,pos:l,level1saleunitid:c,channelid:s,resourcetype:u,is_recommend:d,is_introduction:p,type:f}},I=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e||{},a=o.groupid,s=o.pos,l=o.level1saleunitid,c=o.productType,u=o.tabid,d=o.tabname,p=o.tabindex,f=o.source,h=o.label;return{tabid:u,tabname:d,tabindex:p,iconname:h,sourceid:f,producttype:c,poiid:n,viewspotid:i,groupid:a,pos:s,level1saleunitid:l}},Z={mergeShelfExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_mergeshelf_view","213503",h(e))},mergeShelfClickFn:function(e){return(0,r.E7)("tkt_sightdetail_mergeshelf_click","211526",h(e))},filterExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_quick_view_sight_detail","159358",m(e))},FilterItemExpsoureFn:function(e){return(0,r.S9)("tkt_sightdetail_quick_fl_view_sight_detail","159367",m(e))},FilterItemClickFn:function(e){return(0,r.E7)("tkt_sightdetail_quick_fl_click_sight_detail","159364",m(e))},PromotionExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_couponcenter_view_sight_detail","139871",_(e))},PromotionClickFn:function(e){return(0,r.E7)("tkt_sightdetail_couponcenter_click_sight_detail","139876",_(e))},CardBtnClickFn:function(e){return(0,r.E7)("tkt_sightdetail_tktorder_click_sight_detail","141954",d(e))},TicketCardContentClickFn:function(e){return(0,r.E7)("ctrip_ticketcardcontent_trace","224670",g(e))},CardBuyNoticeContentExposureFn:function(e){return(0,r.S9)("ctrip_ticketcard_tktnotice_expo","242872",d(e))},CardBuyNoticeContentClickFn:function(e){return(0,r.E7)("tkt_sightdetail_tktnotice_click_sight_detail","141953",d(e))},CardPromotionIconExposureFn:function(e){return(0,r.S9)("ctrip_tktrdiscount_view_expo","229625",d(e))},CardPromotionIconClickFn:function(e){return(0,r.E7)("tkt_sightdetail_tktrdiscount_click_sight_detail","141955",d(e))},CardTipExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_tips_view_sight_detail","171499",y(e))},CardTipClickFn:function(e){return(0,r.E7)("tkt_sightdetail_tips_click_sight_detail","171500",y(e))},CardPeopleExposureFn:function(e){return(0,r.S9)("ctrip_ticketcard_condition_expo","242873",d(e))},CardPeopleClickFn:function(e){return(0,r.E7)("ctrip_ticketcard_condition_click","242874",d(e))},CardOtherAreaExposureFn:function(e){return(0,r.S9)("ctrip_ticketcard_otherarea_expo","242875",v(e))},CardOtherAreaClickFn:function(e){return(0,r.E7)("ctrip_ticketcard_otherarea_click","242876",d(e))},GroupExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_ticketgroup_view_sight_detail","140679",x(e))},GroupTabExposureFn:function(e){return(0,r.S9)("tkt_sightdetail_ticket_tab_view_sight_detail","140691",b(e))},GroupTabClickFn:function(e){return(0,r.E7)("tkt_sightdetail_ticket_tab_click_sight_detail","140692",b(e))},GroupFloorClickFn:function(e){return(0,r.S9)("tkt_sightdetail_tktlevel_view_sight_detail","140706",k(e))},VideoCoverExposureFn:function(e){return(0,r.S9)("ctrip_videocover_video_expo","236021",w(e))},VideocoverClickFn:function(e){return(0,r.E7)("ctrip_videocover_video_click","236021",w(e))},LongDetailExposureFn:function(e){return(0,r.S9)("ctrip_cwpz_view_expo","253720",I(e))},LongDetailClickFn:function(e){return(0,r.E7)("ctrip_cwpz_click_click","253721",I(e))}},T=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e.chargetype,a=e.needreserve,s=e.channelentrance,l=e.orderbuttonname;return{poiid:n,viewspotid:i,chargetype:o,needreserve:a,channelentrance:s,orderbuttonname:l}},S=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e.channeltype,a=e.channeldetail,s=e.channelbutton;return{poiid:n,viewspotid:i,channeltype:o,channeldetail:a,channelbutton:s}},C=function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid,o=e.channellayer,a=e.recommended1,s=e.recommended2;return{poiid:n,viewspotid:i,channellayer:o,recommended1:a,recommended2:s}},P={appointCardExposureFn:function(e){return(0,r.S9)("ctrip_yymk_module_expo","",T(e))},appointCardClickFn:function(e){return(0,r.E7)("ctrip_yymk_module_click","",T(e))},appointPopExposureFn:function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid;return(0,r.S9)("ctrip_yymk_layer_expo","",{channellayer:e.channellayer,poiid:n,viewspotid:i})},appointPopCardExposureFn:function(e){return(0,r.S9)("ctrip_yymk_channel_expo","",S(e))},appointPopCardClickFn:function(e){return(0,r.E7)("ctrip_yymk_channelbutton_click","",S(e))},appointPopSaveQrcodeClickFn:function(e){var t=(0,r.ji)()||{},n=t.poiid,i=t.viewspotid;return(0,r.E7)("ctrip_yymk_qrcode_click","",{poiid:n,viewspotid:i,channeldetail:e.channeldetail})},appointPopRecomExposureFn:function(e){return(0,r.S9)("ctrip_yymk_recommended_expo","",C(e))},appointPopRecomClickFn:function(e){return(0,r.E7)("ctrip_yymk_recommended_click","",C(e))}};t["ZP"]=f},87216:function(e,t,n){"use strict";n.r(t);var i=n(79301),o=n(95308),r=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.config,o=t.hotelDate,this.request.hotelDate=o,r=[{fetchList:["poiRecommend"],formatList:["poiRecommend","hotelFilter"]}],this.fetchQueue({fetchToolList:r,config:n,onSeverCallBack:function(){},reset:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();t["default"]=r},52972:function(e,t,n){"use strict";n.r(t);var i=n(79301),o=n(95308),r=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,r,a,s,l,c,u,d,p,f,h,m,_,v,g,y;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.config,o=t.isCoupon,r=t.params,a=void 0===r?{}:r,s=t.isBreathe,l=t.secKillRefreshId,c=void 0===l?0:l,u=t.secKillRefreshCallback,d=void 0===u?function(){}:u,p=a.filterItem,f=void 0===p?{}:p,h=f.type,m=f.key,_=f.date,v=[],h&&(v=[{type:h,filterItems:[{key:m,value:_}]}]),o||(this.request["filters"]=v,this.request["filter_fdefault"]=null===a||void 0===a||null===(g=a.filters)||void 0===g?void 0:g.fdefault),this.request.hotelPosInfo={},s&&(this.request.hotelDate=null,this.clearCacheData()),y=[{fetchList:o?["shelfInfo","crossCouponInfo","couponData","baseTicketDetailUrl"]:["shelfInfo","baseTicketDetailUrl"],formatList:["poiList","newCustomerCoupon","promotion","hotelFilter"]},{fetchList:["hotel","poiRecommend"],formatList:["hotelList","poiRecommend"]}],this.fetchQueue({fetchToolList:y,config:n,onSeverCallBack:function(){},reset:!1,isBreathe:s,secKillRefreshId:c,secKillRefreshCallback:d});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();t["default"]=r},37617:function(e,t,n){"use strict";n.d(t,{kF:function(){return r},qc:function(){return s},mI:function(){return l}});var i=n(55853),o=!1,r=function(e){var t=e.resources,n=e.shelfGroups;return!t||0==t.length||(!n||0==(null===n||void 0===n?void 0:n.length))},a=function(e){var t=e.isAckError,n=t||{},i=n.isShelfInfoError;return!!i},s=function(e){var t=e.ResponseStatus,n=t||{},i=n.Ack;return"Success"!=i},l=function(e,t){var n=!(!e||!e.isMainShelfNoData),r=a(e);r||!n||t||o||(o=!0,(0,i.uI)(e.spotId))}},39726:function(e,t,n){"use strict";var i=n(5243),o=function(e){if(e){var t="";if("TomorrowCanBook"==e.key)return t="\u660e\u65e5",t;if("TodayCanBook"==e.key)return t="\u4eca\u65e5",t;var n=(0,i.fh)(e.value),o=(0,i.Jr)(n),r=o.year,a=o.month,s=o.day,l=(new Date).getFullYear();return l==r?t="".concat(a,"\u6708").concat(s,"\u65e5"):(r%=100,t="".concat(r,"\u5e74").concat(a,"\u6708").concat(s,"\u65e5")),t}};t["Z"]=o},18589:function(e,t,n){"use strict";n.d(t,{IG:function(){return s},Al:function(){return l},M8:function(){return c},fm:function(){return u},wT:function(){return d},j4:function(){return p}});var i=n(85187),o=i.GI.getPlatform(),r=i.GI.PLATFORM_TYPE,a=(i.hj.isIOS,i.hj.isAndroid,i.hj.isApp);function s(){return o===r.CRN}function l(){return!!a()}function c(){return o===r.Mini}function u(){return o===r.CRN}function d(){return!(!i.hj.isBaidu()||!i.hj.isMini())}function p(){return!(!i.hj.isBaidu()||!i.hj.isMini())}},59217:function(e,t,n){"use strict";n.d(t,{jJ:function(){return o},lz:function(){return r},IA:function(){return a},tv:function(){return s},_Q:function(){return c},aD:function(){return u},g8:function(){return l},fi:function(){return d},Xd:function(){return p},hB:function(){return f},Mk:function(){return h},tW:function(){return m}});var i=n(82099);function o(){return(0,i.Jh)()===i.Ur.OFFLINE}function r(){return o()}function a(){return!o()}function s(){return!o()}function l(){return o()}function c(){return!o()}function u(){return!o()}function d(){return o()}function p(){return!o()}function f(){return!o()}function h(){return!o()}function m(){return o()}},82099:function(e,t,n){"use strict";n.d(t,{Ur:function(){return o},Jh:function(){return a},qh:function(){return s}});var i=n(85187),o=function(e){return e[e["POI"]=0]="POI",e[e["OFFLINE"]=1]="OFFLINE",e[e["BAIDUMAP"]=2]="BAIDUMAP",e}(o||{}),r=o.POI,a=function(){return r},s=function(e){var t=e.props;r=i.GI.getPlatform()!==i.GI.PLATFORM_TYPE.H5||"baidumap"!==process.env.CURRENT_NFES_COMPILE_PLATFORM?i.GI.getPlatform()!==i.GI.PLATFORM_TYPE.Mini||"T"!==t.isscan?o.POI:o.OFFLINE:o.BAIDUMAP}},54294:function(e,t,n){"use strict";n.d(t,{Z:function(){return ne}});var i,o=n(298),r=n(57042),a=n(24460),s=n(81876),l=n(21867),c=n(86066),u=n(45023),d=n(90201),p=n(85187),f=n(79975),h=n(79301),m=n(95308),_=n(44142),v=(0,a.Z)((function e(){(0,r.Z)(this,e)}));i=v,(0,u.Z)(v,"checkCouponShouldShow",function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t,n){var o,r,a,s,l,c,u,d,f,m,_,v;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.newCustomerCoupon,r=t.spotId,a=o||{},s=a.promotionSecretIds,l=a.desc,c=a.promotionId,!l||!s){e.next=16;break}return e.next=5,p.N9.getSync("OTTD_STANDING_TIME_FROM_BOOKING","ottd");case 5:if(u=e.sent,d=u||{},f=d.time,m=d.spotId,r!=m){e.next=9;break}return e.abrupt("return");case 9:if(!(f&&f>2)){e.next=15;break}return e.next=12,p.N9.getSync("OTTD_TICKET_COUPON_CLOSE_TIME");case 12:_=e.sent,v=864e10,(!_||!_.timeStamp||Date.now()-_.timeStamp>v)&&i.updateTicketCouponPopInfo(c,n);case 15:p.N9.set({key:"OTTD_STANDING_TIME_FROM_BOOKING",data:{time:0}});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,u.Z)(v,"updateTicketCouponPopInfo",function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t,n){var i,r,a,s;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.N9.getSync("OTTD_TICKET_COUPON_POP_INFO");case 4:i=e.sent,r=i&&i[t]||{},a=r.count||0,s=a<3,s&&(r.count?r.count++:r.count=1,p.N9.set({key:"OTTD_TICKET_COUPON_POP_INFO",data:(0,o.Z)((0,o.Z)({},i||{}),{},(0,u.Z)({},t,r))}),n&&n());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var g=function(e){var t=e.newCustomerCoupon,n=e.request,i=n||{},o=i.hasMainShelf,r=i.spotId;o&&t&&t&&v.checkCouponShouldShow({newCustomerCoupon:t,spotId:r},(function(){_.B.send("ottd_shelf_showTicketCoupon",t)}))},y=function(e){_.B.register("ottd_shelf_reloadShelf",(function(){null===e||void 0===e||e({isBreathe:!1})})),_.B.register("ottd_shelf_closeTicketCoupon",(function(){p.N9.set({key:"OTTD_TICKET_COUPON_CLOSE_TIME",data:{timeStamp:Date.now()}})}))},x=n(13878),b=n(49671),k=n(3795),w=n(92361),I=n(16567),Z=n(4557),T=n(65167),S=n(51028),C=n(55853),P=!0,N=n(90927);function D(e){var t=e.state,n=e.callback,i=e.timeListRef,o=e.timerList,r=function(e){(e||[]).forEach((function(e){if(!e)return"";var t=e||{},n=t.time,o=t.key;i[o]=n,i[o]&&clearInterval(i[o]),a(e)}))},a=function(e){var t=e||{},r=t.needCountDown,a=t.setTimerToOpen,s=(t.prefix,t.key),l=(t.time,t.seckillid),c=t.isZeroPrice,u=t.endTime,d=t.startTime,p=(t.isShow,t.isPresell);o[s]&&clearInterval(o[s]),(r||a)&&(o[s]=setInterval((function(){(r||a)&&i[s]<=0?((p||3!==e.stockstatus)&&n&&n(),o[s]&&clearInterval(o[s]),(0,x.ku)("card-countdown-".concat(s))):(r||a)&&i[s]>0&&(a&&i[s]<=6e5&&i[s]>599e3&&(n&&n(),_.B.send("ottd_shelf_secclock_timeup",{seckillid:l,isZeroPrice:c}),_.B.send("ottd_shelf_price_secclock_timeup",{seckillid:l,isZeroPrice:c})),(0,x.FD)("card-countdown-".concat(s),i[s]),i[s]=3===e.stockstatus?d-(0,N.b)():u-(0,N.b)())}),1e3))},s=t||{},l=s.shelfs,c=[];return null===l||void 0===l||l.forEach((function(e){if(e.groupList)for(var t in e.groupList){var n,i=e.groupList[t];null===i||void 0===i||null===(n=i.cardList)||void 0===n||n.forEach((function(e){var t,n=e||{},i=n.countdown,o=n.matrix,r=n.topLine;i&&c.push(i),null===r||void 0===r||null===(t=r.items)||void 0===t||t.forEach((function(e){null!==e&&void 0!==e&&e.countdown&&c.push(e.countdown)})),null===o||void 0===o||o.forEach((function(e){var t;null===(t=e.items)||void 0===t||t.forEach((function(e){e.countdown&&c.push(e.countdown)}))}))}))}})),r(c),function(){(c||[]).forEach((function(e){if(!e)return"";var t=e||{},n=t.key;clearInterval(i[n])}))}}var j=n(82099);function R(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L(e,t,n){R(e,t),t.set(e,n)}function E(e,t){return t.get?t.get.call(e):t.value}function V(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function A(e,t){var n=V(e,t,"get");return E(e,n)}function O(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function F(e,t,n){var i=V(e,t,"set");return O(e,i,n),n}var M=n(79756),B=p.Y8.mkt.getUnion(),U=function(){var e;return null===p.Y8||void 0===p.Y8||null===(e=p.Y8.user)||void 0===e?void 0:e.isLogin()},G=n(73954);function H(){}var z=function(e){var t=Object.keys(e||{}).filter((function(e){return-1!==e.indexOf("ext-")})),n={};return t.forEach((function(t){var i=t;e[t]&&(n[i]=e[t])})),n},q=n(71190),K=n(7560),W=function(e,t){var n,i,o=(null===(n=t.shelfs)||void 0===n?void 0:n.find((function(e){return"czjx"===e.id})))||{},r=(null===(i=o.groupList)||void 0===i?void 0:i.seckill)||{},a=r.cardList.find((function(t){var n;return(null===(n=t.countdown)||void 0===n?void 0:n.seckillid)===e}))||{};return a.button||{}},X=new WeakMap,Y=new WeakMap,Q=new WeakMap,J=new WeakMap,$=new WeakMap,ee=function(){function e(t){var n=t.config,i=t.method,o=t.data,a=t.onSeverCallBack,s=t.blockShelfRenderPromise;(0,r.Z)(this,e),(0,u.Z)(this,"cacheData",void 0),L(this,X,{writable:!0,value:void 0}),L(this,Y,{writable:!0,value:void 0}),(0,u.Z)(this,"request",void 0),L(this,Q,{writable:!0,value:void 0}),L(this,J,{writable:!0,value:void 0}),(0,u.Z)(this,"response",void 0),L(this,$,{writable:!0,value:void 0}),F(this,X,n),F(this,Y,i),F(this,Q,a),F(this,$,s),this.cacheData={},F(this,J,{}),this.getInit(o)}return(0,a.Z)(e,[{key:"clearCacheData",value:function(){this.cacheData={}}},{key:"clearCacheDataShelfs",value:function(){this.cacheData=(0,o.Z)((0,o.Z)({},this.cacheData),{},{shelfs:null})}},{key:"getParamsFromUrl",value:function(e){var t,n=(0,G.Z)(),i=e.spotId,o=e.poiId,r=e.defaultFilters,a=e.ticketGroupId,s=e.urlParams,l=e.anchorCategory,c=e.passThroughParameters,u=e.aid,d=e.sid,f=e.cacheKey,h=e.menuId,m=e.businessIdTop,_=(p.GI.getPlatform(),s||{}),v=_.ctm_ref,g=_.traceid,y=_.isscan,b=_.subEnv,k=B,w=z(s),I=[];return 1==(null===r||void 0===r?void 0:r.length)&&I.push({type:"TagFilter",filterItems:[{key:r[0],value:""}]}),{pageId:(0,x.dD)(),clientId:(null===n||void 0===n||null===(t=n.clientInfo)||void 0===t?void 0:t.cid)||"",receivePromotionType:1,source:"TICKET",spotId:Number(i||0),poiId:Number(o||0),ctm_ref:v,traceid:g,isscan:y,aid:u||String(k.allianceid||""),sid:d||String(k.sid||""),extParams:w,ticketGroupId:a,anchorCategory:l,passThroughParameters:c,filters:I,cacheKey:f,subEnv:b,isInit:!0,resourceLimit:!0,needFilter:!0,sceneId:o,tabList:[],defaultFilters:r,isTicketGroup:!1,crossTab:[],menuId:h||-1,businessIdTop:m,hideShelfTypes:"",baiduBaseInfo:H(),updateSecKill:!1,isLogin:U()}}},{key:"getFormatByModules",value:function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t){var n,i,o,r,a,s,l,c,u,d,p,f,_,v,g,y,x,b,k,w=this;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.modules,r=this.response||{},a=r.emptyShelfs,s=r.tabsInfo,l=A(this,X)||{},c=l.format,this.cacheData.shelfs||(this.cacheData.shelfs=a),u={},d=this,p=o.map(function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t){var n,i,o,r;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=A(w,J)[t],e.t0){e.next=17;break}if(e.t1=null===c||void 0===c||null===(n=c[t])||void 0===n?void 0:n.call(c),!e.t1){e.next=16;break}return e.next=6,c[t]();case 6:if(e.t3=i=e.sent,e.t2=null===e.t3,e.t2){e.next=10;break}e.t2=void 0===i;case 10:if(!e.t2){e.next=14;break}e.t4=void 0,e.next=15;break;case 14:e.t4=i.default;case 15:e.t1=e.t4;case 16:e.t0=e.t1;case 17:return A(w,J)[t]=e.t0,e.next=20,null===(o=(r=A(w,J))[t])||void 0===o?void 0:o.call(r,{response:w.response,isLogin:w.request.isLogin,request:w.request,clearCacheDataShelfs:w.clearCacheDataShelfs.bind(d)});case 20:u[t]=e.sent;case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(p);case 9:if(e.t0=null===c||void 0===c||null===(n=c["shelfs"])||void 0===n?void 0:n.call(c),!e.t0){e.next=23;break}return e.next=13,c["shelfs"]();case 13:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=17;break}e.t1=void 0===i;case 17:if(!e.t1){e.next=21;break}e.t3=void 0,e.next=22;break;case 21:e.t3=i.default;case 22:e.t0=e.t3;case 23:return f=e.t0,f&&(v=null!==(_=null===f||void 0===f?void 0:f(u,this.cacheData.shelfs.concat(this.cacheData.allPendingShelfs||[]),this.request,o,this.response))&&void 0!==_?_:{},g=v.res,y=v.notShowFilters,x=v.allPendingShelfs,this.cacheData.shelfs=g,this.cacheData.notShowFilters=y,this.cacheData.allPendingShelfs=x),b=["tabsInfo","shelfs","promotion","newCustomerCoupon","filters","hotelFilter","scenicSpot"],k={tabsInfo:s,shelfs:this.cacheData.shelfs},Object.keys(u).forEach((function(e){u[e]&&b.includes(e)&&(k[e]=u[e],"filters"===e&&(k[e].notShowFilters=w.cacheData.notShowFilters),"promotion"!==e||w.request.hasMainShelf||(k["promotion"]=null))})),e.abrupt("return",k);case 29:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getInit",value:function(e){this.request=this.getParamsFromUrl(e),this.fetchQueue({fetchToolList:A(this,X).initFetchToolList,onSeverCallBack:A(this,Q),blockShelfRenderPromise:A(this,$),reset:!0}),this.initMehods()}},{key:"initMehods",value:function(){var e=(0,m.Z)((0,h.Z)().mark((function e(){var t,n,i,o;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=A(this,X),n=t.state,e.t0=(0,h.Z)().keys(n);case 2:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.next=6,n[i]();case 6:o=e.sent,this[i]=o.default.bind(this),e.next=2;break;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchQueue",value:function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t){var n,i,r,a,s,l,c,u,d,p,_,v,g,y,x,b,k=this;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.fetchToolList,i=t.onSeverCallBack,r=void 0===i?function(){}:i,a=t.blockShelfRenderPromise,s=t.reset,l=void 0!==s&&s,c=t.isBreathe,u=void 0!==c&&c,d=t.secKillRefreshId,p=void 0===d?0:d,_=t.secKillRefreshCallback,v=void 0===_?function(e){}:_,this.request.updateSecKill=!!p,l&&(this.response={}),g=A(this,X),y=g.fetch,x={},b=function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t){var n,i,s,l,c,d,_,g,w,I;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t[0],l=s.fetchList,c=s.formatList,d=k,_=l.map(function(){var e=(0,m.Z)((0,h.Z)().mark((function e(t){var n,i,o;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=null===y||void 0===y||null===(n=y[t])||void 0===n?void 0:n.call(y),!e.t0){e.next=14;break}return e.next=4,y[t]();case 4:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=8;break}e.t1=void 0===i;case 8:if(!e.t1){e.next=12;break}e.t3=void 0,e.next=13;break;case 12:e.t3=i.default;case 13:e.t0=e.t3;case 14:return o=e.t0,e.abrupt("return",o({onSeverCallBack:r,blockShelfRenderPromise:a,isBreathe:u,request:k.request,config:A(k,X),response:k.response,clearCacheDataShelfs:k.clearCacheDataShelfs.bind(d)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(_);case 5:return g=e.sent,g.forEach((function(e){k.response=(0,o.Z)((0,o.Z)({},k.response),e)})),e.t0=o.Z,e.t1=o.Z,e.t2=(0,o.Z)({},x),e.next=12,k.getFormatByModules({modules:c});case 12:if(e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.t6={hideShelfTypes:null===(n=k.request)||void 0===n?void 0:n.hideShelfTypes},x=(0,e.t0)(e.t4,e.t5,e.t6),w=((null===(i=k.response)||void 0===i||null===(i=i.shelfInfo)||void 0===i?void 0:i.extInfos)||[]).find((function(e){return e.key===f.Jq.TATE_LIMIT_MESSAGE})),!w){e.next=23;break}t=[],p?M["default"].showToast({title:w.value||"",icon:"none"}):q.Z.show({content:w.value||"",btnOK:["\u53d6\u6d88","\u8fd4\u56de\u4e0a\u4e00\u9875"],btnCallBack:[function(){K.ZP.navigateBack()}]}),e.next=46;break;case 23:if(!p){e.next=44;break}if(I=W(p,x),1!==I.stockstatus){e.next=30;break}v(I.url),t=[],e.next=42;break;case 30:if(2!==I.stockstatus){e.next=36;break}return M["default"].showToast({title:"\u62b1\u6b49\uff0c\u6d3b\u52a8\u592a\u706b\u7206\uff0c\u5df2\u62a2\u5149",icon:"none"}),e.next=34,A(k,Y).call(k,x);case 34:e.next=42;break;case 36:if(3!==I.stockstatus){e.next=40;break}t=[],e.next=42;break;case 40:return e.next=42,A(k,Y).call(k,x);case 42:e.next=46;break;case 44:return e.next=46,A(k,Y).call(k,x);case 46:k.request.updateSecKill=!1,t.length>1&&b(t.slice(1));case 48:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b(n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),te=ee,ne=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,i,a){var l;return(0,r.Z)(this,n),l=t.call(this,e),(0,u.Z)((0,s.Z)(l),"state",void 0),(0,u.Z)((0,s.Z)(l),"hasInit",void 0),(0,u.Z)((0,s.Z)(l),"request",void 0),(0,u.Z)((0,s.Z)(l),"innerSideRef",void 0),(0,u.Z)((0,s.Z)(l),"outSidebarRef",void 0),(0,u.Z)((0,s.Z)(l),"scrollContainerRef",void 0),(0,u.Z)((0,s.Z)(l),"outerPoplayerRef",void 0),(0,u.Z)((0,s.Z)(l),"innerPoplayerRef",void 0),(0,u.Z)((0,s.Z)(l),"timeListRef",void 0),(0,u.Z)((0,s.Z)(l),"poplayerRef",void 0),(0,u.Z)((0,s.Z)(l),"timerList",void 0),(0,u.Z)((0,s.Z)(l),"update",void 0),(0,u.Z)((0,s.Z)(l),"config",void 0),(0,u.Z)((0,s.Z)(l),"changeState",void 0),(0,u.Z)((0,s.Z)(l),"blockShelfRenderPromise",void 0),(0,u.Z)((0,s.Z)(l),"blockShelfRenderResolve",void 0),(0,u.Z)((0,s.Z)(l),"changeFilter",(0,Z.D)((function(e){var t,n=e.isBreathe,i=void 0===n||n,r=e.isCoupon,a=void 0!==r&&r,s=e.params,c=void 0===s?{key:"shelf"}:s;if(i){l.props.scrollTo({x:0,y:l.props.topDistance,animated:!1});var u=c.filters;l.update=i,l.setState((function(e){return{filters:u||(0,o.Z)((0,o.Z)({},e.filters),{},{fdefault:-1}),tabsInfo:null,shelfs:null,promotion:{}}}))}null===(t=l.changeState.refreshShelf)||void 0===t||t.call(l.changeState,{config:l.config,request:l.request,isCoupon:a,params:c,isBreathe:i})}),100)),(0,j.qh)({props:e}),(0,x.PX)({pageId:a||f.DV[p.GI.getPlatform()]}),console.log("==========ShelfComponentProps=========="),console.log(e),l.config=i,l.update=!1,l.state={},l.innerSideRef=d.createRef(),l.outSidebarRef=d.createRef(),l.scrollContainerRef=d.createRef(),l.innerPoplayerRef=d.createRef(),l.outerPoplayerRef=e.poplayerRef,l.afterFetch=l.afterFetch.bind((0,s.Z)(l)),l.changeFilter=l.changeFilter.bind((0,s.Z)(l)),l.timeListRef={},l.timerList={},l.blockShelfRenderPromise=null,e.blockShelfRender&&(l.blockShelfRenderPromise=l.initBlockShelfRenderPromise(),setTimeout((function(){l.proceedShelfRender()}),1e3)),(0,T.Zw)(),!p.hj.isInServer()&&(0,T.eV)(["getProductPriceCalendar","CreateTicketOrder","SearchBookingReducetools","searchBookingSalesPromotionRestful","getProductShelf","searchAdditionalResource","getActPreferenceInfo","resourceDetails","getShelfResourceList","getShopScenes","getTicketGroupInfo"]),(0,x.LV)(),(0,b._1)({metricFnObj:k.ZP,targetPageRef:e.targetPageRef}),(0,C.wl)(l.request),l.changeState=new te({config:l.config,method:l.afterFetch.bind((0,s.Z)(l)),data:e,onSeverCallBack:e.onSeverCallBack,blockShelfRenderPromise:l.blockShelfRenderPromise}),l.request=l.changeState.request,y(l.changeFilter),l.poplayerRef=P?l.innerPoplayerRef:l.outerPoplayerRef,l}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function(e,t){var n,i=this;if(null!==(n=this.state.filters)&&void 0!==n&&null!==(n=n.filterStatus)&&void 0!==n&&n.isTimeOver&&(w.ZP.show("\u65e5\u671f\u5df2\u53d1\u751f\u53d8\u66f4\uff0c\u8bf7\u6ce8\u610f\u65f6\u95f4\u53d8\u5316"),this.changeFilter({isBreathe:!0,isCoupon:!1})),(0,I.I8)(this.state.tabsInfo)!==(0,I.I8)(t.tabsInfo)){var o,r,a,s,l,c,u;if(1==(null===(o=this.state.tabsInfo)||void 0===o?void 0:o.length)&&this.state.hideShelfTypes)null===(r=this.outSidebarRef)||void 0===r||null===(r=r.current)||void 0===r||r.setShowSideBar(),null===(a=this.innerSideRef.current)||void 0===a||a.setShowSideBar(),null===(s=(l=this.props).hideShowSideBar)||void 0===s||s.call(l);if(this.update)null===(c=this.scrollContainerRef)||void 0===c||null===(c=c.current)||void 0===c||c.setCurrentTab(null===(u=this.state.tabsInfo)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.categoryName),this.update=!1}D({state:this.state,callback:function(){i.changeFilter({isBreathe:!1,isCoupon:!0})},timeListRef:this.timeListRef,timerList:this.timerList})}},{key:"pageDidAppear",value:function(){var e,t;g({newCustomerCoupon:this.state.newCustomerCoupon,request:this.request}),null!==(e=this.request)&&void 0!==e&&e.hasCountDown&&this.hasInit&&this.changeFilter({isBreathe:!1}),null===x.bw||void 0===x.bw||null===(t=x.bw.setRef)||void 0===t||t.call(x.bw,void 0)}},{key:"pageDidDisappear",value:function(){var e;null===x.bw||void 0===x.bw||null===(e=x.bw.setRef)||void 0===e||e.call(x.bw,"")}},{key:"scrollTo",value:function(){this.props.scrollTo({x:0,y:this.props.topDistance,animated:!1})}},{key:"onScroll",value:function(e){var t;null===(t=this.scrollContainerRef)||void 0===t||null===(t=t.current)||void 0===t||t.onScroll(e)}},{key:"getOutSideRef",value:function(e){var t,n,i,o;this.outSidebarRef={current:e},null!==(t=this.outSidebarRef)&&void 0!==t&&null!==(t=t.current)&&void 0!==t&&t.getOutSideRef&&(null===(n=this.outSidebarRef)||void 0===n||n.current.getOutSideRef(e)),null===e||void 0===e||null===(i=e.setShowSubTitle)||void 0===i||i.call(e),null===(o=this.scrollContainerRef)||void 0===o||null===(o=o.current)||void 0===o||o.getOutSideRef(e)}},{key:"getInSideRef",value:function(e){var t,n,i,o;this.innerSideRef={current:e},null!==(t=this.outSidebarRef)&&void 0!==t&&null!==(t=t.current)&&void 0!==t&&t.getInSideRef&&(null===(n=this.outSidebarRef)||void 0===n||n.current.getInSideRef(e)),null===e||void 0===e||null===(i=e.setShowSubTitle)||void 0===i||i.call(e),null===(o=this.scrollContainerRef)||void 0===o||null===(o=o.current)||void 0===o||o.getInSideRef(e)}},{key:"getTabRef",value:function(){var e;null===(e=this.scrollContainerRef)||void 0===e||null===(e=e.current)||void 0===e||e.getTabRef()}},{key:"getInnerTabRef",value:function(e){var t;null===(t=this.scrollContainerRef)||void 0===t||null===(t=t.current)||void 0===t||t.getInnerTabRef(e)}},{key:"getOutTabRef",value:function(e){var t;null===(t=this.scrollContainerRef)||void 0===t||null===(t=t.current)||void 0===t||t.getOutTabRef(e)}},{key:"getScenicSpotHeaderRef",value:function(e){var t;null===(t=this.scrollContainerRef)||void 0===t||null===(t=t.current)||void 0===t||t.getScenicSpotHeaderRef(e)}},{key:"onTabclick",value:function(e,t){var n;null===(n=this.scrollContainerRef)||void 0===n||null===(n=n.current)||void 0===n||n.onTabclick(e,t)}},{key:"onScrollBeginDrag",value:function(e){var t;null===(t=this.scrollContainerRef)||void 0===t||null===(t=t.current)||void 0===t||t.onScrollBeginDrag(e)}},{key:"changeTitleTab",value:function(e,t){var n;null===(n=this.scrollContainerRef)||void 0===n||null===(n=n.current)||void 0===n||n.changeTitleTab(e,t)}},{key:"changeHotelDate",value:function(e){var t;this.setState((function(e){var t;return(0,o.Z)((0,o.Z)({},e),{},{shelfs:null===e||void 0===e||null===(t=e.shelfs)||void 0===t?void 0:t.filter((function(e){return"\u9152\u5e97"!==(null===e||void 0===e?void 0:e.groupName)}))})})),null===(t=this.changeState.changeHotelFilter)||void 0===t||t.call(this.changeState,{config:this.config,hotelDate:e})}},{key:"frontSecKillRefresh",value:function(e,t){var n;null===(n=this.changeState.refreshShelf)||void 0===n||n.call(this.changeState,{request:this.request,config:this.config,isCoupon:!1,params:{key:"shelf"},isBreathe:!1,secKillRefreshId:e,secKillRefreshCallback:t})}},{key:"afterFetch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log("===>ds",e),this.setState((function(t){return(0,o.Z)((0,o.Z)({},t),e)}),(function(){n(t.state),t.hasInit=!0}))}},{key:"initBlockShelfRenderPromise",value:function(){var e=this;return new Promise((function(t){e.blockShelfRenderResolve=t}))}},{key:"proceedShelfRender",value:function(){var e;null===(e=this.blockShelfRenderResolve)||void 0===e||e.call(this)}}]),n}(S.ZP)},5838:function(e,t,n){"use strict";n.d(t,{VJ:function(){return x},jo:function(){return X},YE:function(){return b.Z}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),l=n(90201),c=n(27503),u=n(21342),d=n(54294),p=n(45023),f=n(70245),h=n(85187),m=n(2279),_={ui:(0,p.Z)((0,p.Z)({},m.rb.poi,(0,h.vw)((function(){return Promise.resolve().then((function(){return(0,f.Z)(n(5827))}))}))),m.rb.ticket,(0,h.vw)((function(){return Promise.resolve().then((function(){return(0,f.Z)(n(5827))}))}))),special:{},fetch:{couponData:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(97538))}))},crossCouponInfo:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(44771))}))},hotel:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(10622))}))},applicationConfig:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(13999))}))},naquhuaData:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(88070))}))},scenicSpotInfo:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(64581))}))},shelfInfo:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(14641))}))},poiRecommend:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(64558))}))},baseTicketDetailUrl:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(37995))}))}},format:{tabsInfo:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(10722))}))},shelfs:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(56290))}))},hotelList:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(49155))}))},poiList:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(71106))}))},filters:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(42792))}))},poiRecommend:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(29864))}))},promotion:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(82945))}))},newCustomerCoupon:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(30389))}))},hotelFilter:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(83586))}))}},state:{refreshShelf:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(52972))}))},changeHotelFilter:function(){return Promise.resolve().then((function(){return(0,f.Z)(n(87216))}))}},initFetchToolList:[{fetchList:["scenicSpotInfo","naquhuaData","applicationConfig","couponData","crossCouponInfo","shelfInfo","baseTicketDetailUrl"],formatList:["poiList","filters","newCustomerCoupon","promotion","hotelFilter"]},{fetchList:["hotel","poiRecommend"],formatList:["hotelList","poiRecommend"]}]},v=_,g=n(2269),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e,v)}return(0,r.Z)(n,[{key:"render",value:function(){var e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,(0,i.Z)((0,i.Z)({},this.props),{},{scrollTo:this.props.scrollTo,config:this.config,state:this.state,InitRenderNum:2,ref:this.scrollContainerRef,changeFilter:this.changeFilter.bind(this),frontSecKillRefresh:this.frontSecKillRefresh.bind(this),changeHotelDate:this.changeHotelDate.bind(this),FooterComponent:this.props.renderScrollViewBottomHint,showFooter:!1,breatheNum:6,needSideBar:1!=(null===(e=this.state.tabsInfo)||void 0===e?void 0:e.length)||!this.state.hideShelfTypes,needSafe:!1,request:this.request,poplayerRef:this.poplayerRef,isHalf:this.props.isHalf})),(0,g.jsx)(u.Z,{ref:this.poplayerRef})]})}}]),n}(d.Z),x=(0,l.memo)(y),b=n(86007),k=n(71515),w=n(96417),I=n(90129),Z=function(e,t){h.Y8.component.calendar(e,(function(e){t&&t(e)}))};function T(e){if(/^\d+-\d+-\d+$/.test(e)){var t=e.split("-");return t=t.map((function(e,t){return 0===t?e:~~e})),t.join("-")}return e}function S(e){return e.indexOf("-")>-1?e:"".concat(e.substr(0,4),"-").concat(e.substr(4,2),"-").concat(e.substr(6,2))}var C={showCalendar:function(e,t){var n=e.endDate,o=e.startDate,r=e.selectedDate,a=e.dayConfig,s=e.configuration,l=Object.keys(a),c={};l.length>0&&l.forEach((function(e){a[e].disable,c[T(S(e))]=a[e]}));var u=(0,i.Z)((0,i.Z)({},e),{},{choosenDate:T(r),beginDate:T(o),endDate:T(n),configuration:s,info:c});Z(u,(function(e){t&&t(e)}))}},P=n(5243),N=n(3795),D=n(45710),j=n(55853),R=(n(79756),n(14062)),L=function(){},E=h.GI.getPlatform()==h.GI.PLATFORM_TYPE.CRN,V=function(e,t){(0,l.useImperativeHandle)(t,(function(){return{getProps:function(e){s(e),y((0,i.Z)((0,i.Z)({},g),{},{filterItems:e.filterItems,fdefault:e.fdefault,notShowFilters:e.notShowFilters,calendarDate:f()||{}}))},getFilterHeight:function(){return g.filterItems&&g.filterItems.length&&!g.notShowFilters?E?44.5:d:0},getMainRef:function(e){n.current=e},onClear:w}}));var n=(0,l.useRef)(null),o=(0,l.useState)(e),r=(0,I.Z)(o,2),a=r[0],s=r[1],c=(0,l.useState)(-1),u=(0,I.Z)(c,2),d=u[0],p=u[1],f=function(){var e,t=null===a||void 0===a||null===(e=a.filterItems)||void 0===e?void 0:e.find((function(e){return e.isMoreDate}));return null===t||void 0===t?void 0:t.calendarDate},m=function(e){var t,n=null===e||void 0===e||null===(t=e.nativeEvent)||void 0===t?void 0:t.layout,i=n.height;p(i)};(0,l.useEffect)((function(){null!==a&&void 0!==a&&a.filterItems&&0!=(null===a||void 0===a?void 0:a.filterItems.length)||!a||s(e)}),[e]);var _=(0,l.useState)({filterItems:a.filterItems,fdefault:a.fdefault,notShowFilters:a.notShowFilters,showShadow:!1,calendarDate:f()||{}}),v=(0,I.Z)(_,2),g=v[0],y=v[1],x=(0,l.useRef)(null),b=function(e){y((function(t){return(0,i.Z)((0,i.Z)({},t),{},{filterItems:e.filterItems?e.filterItems:t.filterItems,fdefault:e.fdefault||0==e.fdefault?e.fdefault:t.fdefault,calendarDate:e.calendarDate?e.calendarDate:t.calendarDate})}))},k=function(e,t){var o=g.fdefault,r=g.filterItems,a=g.calendarDate,s=r[t];if(s){if(s.isMoreDate){var l,c,u=r.filter((function(e){return e.isMoreDate}))[0],d="";if(t===o)d=u.date;else if(-1!=o)d=null===(c=r[o])||void 0===c?void 0:c.date;var p=o>-1&&(null===(l=r[o])||void 0===l?void 0:l.text);R.Z.setNaScrollable(!1),C.showCalendar((0,i.Z)((0,i.Z)({},a),{},{selectedDate:d}),(function(e){var i;L(),R.Z.setNaScrollable(!0);var a=o,s=o;s=t;var l,c,d=(0,P.fh)(e),f=r.findIndex((function(e){return e.date==d}));if(-1!=f&&3!=f){var h;s=f,u.text=null===(h=r[f])||void 0===h?void 0:h.text,(r.filter((function(e){return e.isMoreDate}))[0]||{}).text="\u66f4\u591a\u65e5\u671f"}else{var m=(0,P.Jr)(d),_=m.year,v=m.month,g=m.day,y=(new Date).getFullYear();y==_?u.text="\u8ba2".concat(v,"\u6708").concat(g,"\u65e5"):(_%=100,u.text="\u8ba2".concat(_,"\u5e74").concat(v,"\u6708").concat(g,"\u65e5"))}(u.date=d,Z({filterbutton:u.text,status:"\u9009\u4e2d",filtervalue:u.date}),(null!==p&&void 0!==p?p:""!==u.text)||a!=o)&&(0,D.Vg)((0,j.ln)(-1!==o&&null!==(l=null===(c=r[a])||void 0===c?void 0:c.text)&&void 0!==l?l:"\u65e0\u7b5b\u9009",u.text));b({filterItems:r,fdefault:s}),null===n||void 0===n||null===(i=n.current)||void 0===i||i.changeFilter({isBreathe:!0,isCoupon:!1,params:{key:"shelf",filterItem:u,isInit:!1,filters:{filterItems:r,fdefault:s}}})})),(0,D.Vg)((0,j.OO)("\u66f4\u591a\u65e5\u671f"))}else{var f,h,m,_,v;if(t===o)return Z({filterbutton:s.text,status:"\u672a\u9009\u4e2d",filtervalue:s.date}),void w();(r.filter((function(e){return e.isMoreDate}))[0]||{}).text="\u66f4\u591a\u65e5\u671f",b({filterItems:r,fdefault:t}),null===(f=n.current)||void 0===f||null===(h=f.changeFilter)||void 0===h||h.call(f,{isBreathe:!0,isCoupon:!1,params:{key:"shelf",filterItem:s,isInit:!1,filters:{filterItems:r,fdefault:t}}});var y=null!==(m=null===r||void 0===r||null===(_=r[e])||void 0===_?void 0:_.text)&&void 0!==m?m:"",x=(0,j.ln)(-1!==o&&y?y:"\u65e0\u7b5b\u9009",null!==(v=s.text)&&void 0!==v?v:t);L(),(0,D.Vg)(x)}Z({filterbutton:s.text,status:"\u9009\u4e2d",filtervalue:s.date})}},w=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=g.filterItems,r=g.calendarDate;if((o.filter((function(e){return e.isMoreDate}))[0]||{}).text="\u66f4\u591a\u65e5\u671f",t)b({filterItems:o,fdefault:-1}),null===n||void 0===n||null===(e=n.current)||void 0===e||e.changeFilter({isBreathe:!0,isCoupon:!1,params:{key:"shelf",filterItem:{},isInit:!1,filters:{filterItems:o,fdefault:-1}}});else if(i){var a={fdefault:-1,filterItems:i.filterItems||[],calendarDate:i.calendarDate||r};b(a)}(0,D.Vg)((0,j.OO)("\u6e05\u7a7a",2))},Z=function(e){var t=e.filterbutton,n=e.status,i=e.filtervalue,o={filterbutton:t,status:n,filtervalue:i},r=N.cw.FilterItemClickFn(o);h.hS.logTrace(null===r||void 0===r?void 0:r.key,null===r||void 0===r?void 0:r.params)};return{state:g,tabScrollRef:x,onClickFilter:k,onClear:w,onLayout:m}},A=V,O=n(79992),F={m_shelf_filter:"index-module_TUEAY",m_shelf_filter_border:"index-module_w_vuU",m_shelf_filter_item:"index-module_oDPEJ",m_shelf_filter_item_hasClear:"index-module_UGbu8",m_shelf_filter_item_active:"index-module_ijT70",m_shelf_filter_item_has_clear:"index-module_ua6xr",m_shelf_filter_tag:"index-module_aUofq",m_shelf_filter_tag_text:"index-module_XUqqA",m_shelf_filter_clear:"index-module_LSPPL",m_shelf_filter_clear_back:"index-module_wl5Nj",m_tab_wrap:"index-module_ZkxqX",m_shelf_filter_con:"index-module_ujxQb",left_shadow:"index-module_iD1nl",lineadr_white:"index-module_cnCUA",tab_m_wrap:"index-module_cFJlh",tab_list_fstyel_m_wrap:"index-module_Xy_wP",m_shelf_filter_more_icon:"index-module_h7qjU",m_shelf_filter_more_icon_highLight:"index-module_x8RgF",m_shelf_filter_item_active_list:"index-module_T5Zq0",m_shelf_filter_name:"index-module_PPbrc",m_shelf_filter_name_android:"index-module_cQVcP",m_shelf_filter_name_active_list:"index-module_bisQQ",m_shelf_filter_clear_text_list:"index-module_WOd6V"},M=function(e){return{}},B=M,U={clear:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgba(255, 255, 255,0)","rgba(255, 255, 255,1)"],locations:[0,1]},clear_dark:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgba(51, 51, 51, 0)","rgba(51, 51, 51 ,1)"],locations:[0,1]},tag:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 19, 105)","rgb(255, 85, 0)"]}},G=n(49671),H=n(61070),z=n(77163),q=n(18589),K=h.hj.isAndroid(),W=(R.Z.isBaiduMap(),(0,l.forwardRef)((function(e,t){var n=(0,l.useRef)({});(0,G._1)({targetPageRef:e.targetPageRef});var o=A(e,t),r=o.state,a=o.tabScrollRef,s=o.onClickFilter,c=o.onClear,u=o.onLayout,d=r.filterItems,p=r.showShadow,f=r.fdefault,m=r.notShowFilters,_=N.cw.filterExposureFn({}),v=(0,H.TC)(),y=l.useCallback((function(e,t,o){var r=e.current===t,a=N.cw.FilterItemExpsoureFn({filterbutton:e.text,status:"\u672a\u9009\u4e2d"});return(0,g.jsxs)(h.En,{className:(0,h.AK)(F.m_shelf_filter_item,d.length-1==t?F.m_shelf_filter_item_hasClear:null,r?F.m_shelf_filter_item_active_list:null),style:(0,z.N)(v,[{key:"backgroundColor",value:r?"blue_light":"gray_btn"},{key:"borderColor",value:r?"blue":"gray_btn"}]),testID:a&&n.current?a:void 0,children:[(0,g.jsx)(k.Text,{className:(0,h.AK)(F.m_shelf_filter_name,r?F.m_shelf_filter_name_active_list:null,K?F.m_shelf_filter_name_android:""),style:(0,z.N)(v,{key:"color",value:r?"blue":"black"}),children:e.text}),e.isMoreDate?(0,g.jsx)(O.m,{type:"forward",size:24,className:r?F.m_shelf_filter_more_icon_highLight:F.m_shelf_filter_more_icon,style:(0,z.N)(v,{key:"color",value:r?"blue":"black"})||{color:r?"#0086F6":"#333"}}):null,e.label?(0,g.jsx)(h.cn,(0,i.Z)((0,i.Z)({},U.tag),{},{className:F.m_shelf_filter_tag,children:(0,g.jsx)(k.Text,{numberOfLines:1,className:(0,h.AK)(F.m_shelf_filter_tag_text),children:e.label})})):null]})}),[d,v]);h.hj.isApp();return d&&d.length&&!m?(0,g.jsx)(h.En,{className:(0,h.AK)(F.m_shelf_filter_list,"xtaro_border_box"),onLayout:function(e){u(e)},children:(0,g.jsxs)(h.En,{className:(0,h.AK)(F.m_shelf_filter,null===B||void 0===B?void 0:B("ticket_shelf_filter"),h.hj.isMini()?"":F.m_shelf_filter_border),testID:_||void 0,id:"ticket_shelf_filter",style:(0,z.N)(v,{key:"backgroundColor",value:"white"}),children:[(0,g.jsx)(k.View,{className:F.m_shelf_filter_con,style:(0,q.j4)()?{height:"86px"}:{},children:(0,g.jsx)(w.U,{prefixCls:"xtaro-poi-shelf",ref:a,data:d.map((function(e){return e.current=f,e})),renderItem:function(e,t,n){return y(e,t,n)},tabsBackgroundColor:"#ffffff",current:f,onTabClick:s,comStyle:(0,i.Z)({},(0,z.N)(v,{key:"backgroundColor",value:"white"})||{})})}),f&&-1!=f||0==f?(0,g.jsxs)(h.En,{className:(0,h.AK)(F.m_shelf_filter_clear,p?F.m_shelf_filter_clear_shadow:null),onClick:c,style:(0,z.N)(v,{key:"backgroundColor",value:"white"}),children:[(0,g.jsx)(k.Text,{className:F.m_shelf_filter_clear_text_list,children:"\u6e05\u7a7a"}),(0,g.jsx)(h.cn,(0,i.Z)((0,i.Z)({},U["dark"===v?"clear_dark":"clear"]),{},{className:(0,h.AK)(F.lineadr_white)}))]}):null]})}):null}))),X=(0,l.memo)(W)},51028:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S}});var i=n(79301),o=n(298),r=n(68277),a=n(95308),s=n(57042),l=n(24460),c=n(81876),u=n(21867),d=n(86066),p=n(45023),f=n(90201),h=n(85187),m=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"openCompare",!1),i}return(0,l.Z)(n,[{key:"shouldComponentUpdate",value:function(){if(!this.openCompare)return!0;var e=!0;return e}}]),n}(f.Component),_=n(92361),v=n(71190),g=n(16911),y=n(73954),x=n(7560),b=n(61070),k=(n(2269),n(32180)["window"]),w=["target"],I=x.ZP.navigateTo,Z=x.ZP.navigateBack,T=x.ZP.redirectTo,S=(g.ZP,_.ZP,v.Z,function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"http",void 0),(0,p.Z)((0,c.Z)(i),"header",void 0),(0,p.Z)((0,c.Z)(i),"cName",void 0),(0,p.Z)((0,c.Z)(i),"timer",void 0),(0,p.Z)((0,c.Z)(i),"platform",void 0),(0,p.Z)((0,c.Z)(i),"fetchStatus",0),(0,p.Z)((0,c.Z)(i),"ctx",void 0),(0,p.Z)((0,c.Z)(i),"toast",_.ZP),(0,p.Z)((0,c.Z)(i),"confirm",v.Z),(0,p.Z)((0,c.Z)(i),"push",I),(0,p.Z)((0,c.Z)(i),"pop",Z),(0,p.Z)((0,c.Z)(i),"redirect",T),i.cName="",i.timer=(new Date).getTime(),i.http=g.ZP,i.header=(0,y.Z)(),i.platform=h.GI.getPlatform(),i.ctx=n.ctx,i}return(0,l.Z)(n,[{key:"setFetchStatus",value:function(e){this.fetchStatus=e?1:2}},{key:"componentDidMount",value:function(){this.cName&&console.log("%c\u6027\u80fd\u68c0\u6d4b-".concat(this.cName,"\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u8017\u65f6:").concat((new Date).getTime()-this.timer,"ms"),"color:red")}}],[{key:"setContext",value:function(e){var t,i=(null===e||void 0===e?void 0:e.req)||{};n.ctx={url:i.url,query:i.query,cid:i.clientId,middleware:i.__middleware,isLogin:i.isLogin,isLoginWithoutType:i.isLoginWithoutType,userAgent:null===(t=i.headers)||void 0===t?void 0:t["user-agent"],cookies:i.cookies,isUseSkuModel:i.isUseSkuModel,parsedUrl:i._parsedUrl},n.__req__=i,h.hj.isInServer()?n.http=function(e,t,i,o,r){return(0,g.ZP)(e,t,i,n.__req__,o,r)}:n.ctx.middleware=k["__middleware"]}},{key:"getBaseInitialState",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a,s,l,c,u,d,p,f,h,m,_=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=_.length>2&&void 0!==_[2]?_[2]:{},l=new Promise((function(e){s=e})),c=t.getBaseState?t.getBaseState():{},c||(c={}),u=a||{},d=u.target,p=void 0===d?{}:d,f=(0,r.Z)(u,w),h=(0,o.Z)({state:c,header:t.header(),http:t.http,ctx:t.ctx,platform:t.platform,afterFetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ds,i=t.cb;s&&s({state:Object.assign(c,e),ds:n}),i&&i()}},p),n.init((0,o.Z)((0,o.Z)((0,o.Z)({second:function(){}},p),f),{},{target:h})),e.next=9,l;case 9:return m=e.sent,e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(m));(0,p.Z)(S,"http",g.ZP),(0,p.Z)(S,"header",y.Z),(0,p.Z)(S,"platform",h.GI.getPlatform()),(0,p.Z)(S,"__req__",void 0),(0,p.Z)(S,"ctx",void 0),(0,p.Z)(S,"contextType",b.Ni)},77163:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var i=function(){}},61070:function(e,t,n){"use strict";n.d(t,{Ni:function(){return d},TC:function(){return f}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(45023),l=n(90201),c=function(e){return e["dark"]="dark",e["light"]="light",e}({}),u=n(2269),d=l.createContext("light"),p=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,u.jsx)(u.Fragment,{children:this.props.children})}}]),n}(l.PureComponent);(0,s.Z)(p,"theme",c.light);var f=function(){return(0,l.useContext)(d)}},86552:function(e,t,n){"use strict";n.d(t,{BM:function(){return fe},EB:function(){return xe},e:function(){return Ge},Lf:function(){return B},YE:function(){return U}});var i,o=n(79301),r=n(298),a=n(95308),s=n(32629),l=n(45023),c=n(64980),u=n(55316);try{var d=n(42347).ES;i=d&&"function"==typeof d.getInstance?d.getInstance():{}}catch(nt){console.warn("can't resolve '../../utils/index'")}var p=(0,l.Z)((0,l.Z)({},s.Yw.CTRIP,{dev:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",fat:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",uat:"gateway.m.uat.qa.nt.ctripcorp.com/restapi",prod:"m.ctrip.com/restapi"}),s.Yw.TRIP,{dev:"uk.fat1.qa.nt.tripqate.com/restapi",fat:"uk.fat1.qa.nt.tripqate.com/restapi",uat:"uk.fat1.qa.nt.tripqate.com/restapi",prod:"www.trip.com/restapi"}),f={dev:"offline.fx.fws.qa.nt.ctripcorp.com",fat:"offline.fx.fws.qa.nt.ctripcorp.com",uat:"offline.fx.uat.qa.nt.ctripcorp.com",prod:"offline.fx.ctripcorp.com"};function h(e,t,n){var o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,l=r?f[e]:p[n][e],c=null===(o=i)||void 0===o?void 0:o.inApp;"prod"!==e&&(t==s.AH.NATIVE||"function"==typeof c&&c())&&n==s.Yw.TRIP&&(l=p[s.Yw.CTRIP][e]);var u=m(t),d="".concat(u).concat(l,"/soa2/28181/json/").concat(a);return d}function m(e){return e==s.AH.NATIVE||e==s.AH.MiniProgram?"https://":"//"}function _(e){return v.apply(this,arguments)}function v(){return v=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,l,d,p,f,m,_,v,y,x,b,k,w,I,Z,T,S,C,P,N;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.env,i=t.client,a=t.api,l=t.variables,d=t.fetch,p=t.isOffline,f=t.logUbtDevTrace,m=t.ctType,_=void 0===m?s.Yw.CTRIP:m,v=t.apiPost,y=void 0!==v&&v,x=t.componentInfo,b=void 0===x?{}:x,k=t.traceLogId,e.prev=1,Z={cid:t.cid},T={"x-ctx-Locale":l.baseInfo.locale,"x-ctx-Currency":l.baseInfo.currency},S=h(n,i,_,p,a),i!=s.AH.MiniProgram){e.next=13;break}return C={url:S,data:(0,r.Z)((0,r.Z)({},l),{},{head:(0,r.Z)((0,r.Z)({},Z),{},{miniAuth:"82E962A110D92E1B58E8FB03B15FC60D4720855F333886095B968C3977D945F4"})}),method:"POST",timeout:c.o.mE},e.next=9,d(C);case 9:P=e.sent,w=P.data||{},e.next=24;break;case 13:if(i!=s.AH.NATIVE){e.next=20;break}return I={body:(0,r.Z)((0,r.Z)({},l),{},{head:Z}),headers:T},e.next=17,d(S,I);case 17:w=e.sent,e.next=24;break;case 20:return I=(0,r.Z)((0,r.Z)({},l),{},{head:Z}),e.next=23,d(S,I,{headers:T,timeout:c.o.mE});case 23:w=e.sent;case 24:return N={response:w,api:a,apiPost:y,componentInfo:b,traceLogId:k,ctType:_,baseInfo:null===l||void 0===l?void 0:l.baseInfo},g(f,N),e.abrupt("return",w);case 29:e.prev=29,e.t0=e["catch"](1),console.log(e.t0.stack),f&&f({key:u.NG.POST_EXCEPTION,value:{error:e.t0,funName:"post",errStack:null===e.t0||void 0===e.t0?void 0:e.t0.stack,api:a,apiPost:y,componentInfo:b,traceLogId:k,ctType:_,baseInfo:null===l||void 0===l?void 0:l.baseInfo}});case 33:case"end":return e.stop()}}),e,null,[[1,29]])}))),v.apply(this,arguments)}function g(e,t){if(e){var n=t.response,i=t.api,o=t.apiPost,r=t.componentInfo,a=t.traceLogId,s=t.ctType,l=t.baseInfo;try{var c;e({key:u.NG.BFF_EXTENSION,value:{api:i,extensions:null===n||void 0===n||null===(c=n.ResponseStatus)||void 0===c?void 0:c.Extension,apiPost:o,componentInfo:r,traceLogId:a,ctType:s,baseInfo:l}})}catch(t){var d;e({key:u.NG.POST_EXCEPTION,value:{error:t,funName:"logTraceCatMsgId",errStack:null===t||void 0===t?void 0:t.stack,api:i,extensions:null===n||void 0===n||null===(d=n.ResponseStatus)||void 0===d?void 0:d.Extension,apiPost:o,componentInfo:r,traceLogId:a,ctType:s,baseInfo:l}})}}}var y=n(93212),x=n(22276);function b(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1}function k(e,t,n,i){try{var o=[void 0,null,NaN];t=[].concat(o,(0,x.Z)(t||[])),n&&(t=t.filter((function(e){return!n.includes(e)})));var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&!t.includes(e[a])&&("function"===typeof i&&"number"===typeof e[a]?r[a]=i(e[a]):r[a]=e[a]);return r}catch(t){return console.error("filterObject error."),e}}function w(e,t){var n,i;if(!b(e)){var o=e.toString(),r=(null===o||void 0===o||null===(n=o.split(".")[0])||void 0===n?void 0:n.length)||0,a=(null===o||void 0===o||null===(i=o.split(".")[1])||void 0===i?void 0:i.length)||0,s=r+a;return t?s>=6?24:s>=4?28:32:s>=6?15:s>=4?20:32}}var I=n(90201),Z=function(e){var t={availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[]};function n(e){return{promotionId:e.promotionId,promotionSecretId:e.promotionSecretId,couponCode:e.couponCode,couponName:e.couponName,deductionStrategyType:e.deductionStrategyType,deductionList:e.deductionList,deductionAmount:e.deductionAmount,matchedQuantity:e.matchedQuantity,promotionLabel:e.promotionLabel,extendInfo:e.extendInfo}}function i(e){switch(e.promotionStatus){case 1:t.availableClaimList.push(n(e));break;case 2:t.availableUseList.push(n(e));break;case 3:t.receivedNouseList.push(n(e));break;case 4:t.robbedList.push(n(e));break;case 5:t.expiredList.push(n(e));break;case 6:t.notStartedList.push(n(e));break;case 7:t.singkekList.push(n(e));break}}return(e.claimList||[]).forEach((function(e){i(e)})),(e.useableList||[]).forEach((function(e){e.status?e.promotionStatus=2:e.promotionStatus=3,i(e)})),t};function T(e,t,n,i,o){var r,a,s=t-e,l=3e3;return s<=0?(n(),null):(s>l?(s-=l,r=i,a="task2"):(r=n,a="task1"),"function"===typeof console.group&&console.group(o||"mainKey"),console.log("%cNext task execution function\uff1a","color:#8000FF",a),console.log("%cNext task execution time\uff08ms\uff09\uff1a","color:#8000FF",s),"function"===typeof console.groupEnd&&console.groupEnd(),setTimeout((function(){r()}),s))}function S(e){var t=new Date(e),n=t.getHours(),i=t.getMinutes(),o=t.getSeconds(),r=t.getMilliseconds();return 1e3*(60*(60*(24-n)-i)-o)-r}n(32180)["window"];function C(e,t){var n=Math.abs(e),i=t-(n+"").length;return(e<0?"-":"")+"0".repeat(i<0?0:i)+n}function P(){var e=(new Date).getTimezoneOffset(),t=Math.abs(e/60),n=Math.abs(e%60),i="".concat(e>0?"-":"+").concat(C(Math.floor(t),2),":").concat(C(n,2));return{desc:i,offset:e}}var N,D=function(e){return e&&"object"===(0,y.Z)(e)?Array.isArray(e)?!e.length:!Object.keys(e).length:"number"!==typeof e&&(!e||null==e||" "===e||""===e||void 0===e||"undefined"===typeof e)},j=function(e,t,n){return{channelId:e.saleChannel,allianceId:e.allianceId,siteId:e.siteId,clientId:e.clientId,source:e.source,utcOffset:P().offset,locale:e.locale,currency:e.currency,uid:t?e.uid:"",rmsToken:e.rmsToken,requestScene:s.NT.DetailClaim,version:n,componentType:e.componentType,outOpenId:e.outOpenId}},R=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,l,u,d,p,f,h,m;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.isShowClaimedModule,i=void 0===n||n,e.prev=1,!(t.productId>0)){e.next=7;break}r=t.productId,a=s.K7.PRODUCTID,e.next=18;break;case 7:if(!(t.scenicSpotId>0)){e.next=12;break}r=t.scenicSpotId,a=s.K7.SCENICSPOTID,e.next=18;break;case 12:if(!(t.poiId>0)){e.next=17;break}r=t.poiId,a=s.K7.POIID,e.next=18;break;case 17:throw new Error("Params Error\uff0cproductId\u3001scenicSpotId\u3001poiId Need One Or More");case 18:return l=[s._1.Offline,s.Gi.Offline].includes(t.saleChannel),u=j(t,l,t.version),d={baseInfo:u,relationDetail:{relationType:a,relationId:r},receivePromotionType:t.receivePromotionType,shownewuserpromo:!0,filterType:i?1:2},p={env:t.env,client:t.clientEnv,api:c.o.bl.RECEIVE_PROMOTION,fetch:t.fetch,variables:d,logUbtDevTrace:t.logUbtDevTrace,isOffline:l,ctType:t.ctType||s.Yw.CTRIP,auth:t.auth,cid:t.clientId,apiPost:!0},e.next=24,_(p);case 24:if(e.t0=e.sent,e.t0){e.next=27;break}e.t0={};case 27:return f=e.t0,h=f.list,m=void 0===h?[]:h,e.abrupt("return",m);case 33:return e.prev=33,e.t1=e["catch"](1),e.abrupt("return",[]);case 36:case"end":return e.stop()}}),e,null,[[1,33]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,l,u,d,p,f;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.isShowClaimedModule,i=void 0===n||n,e.prev=1,i){e.next=4;break}return e.abrupt("return",[]);case 4:if(t.productId){e.next=6;break}throw new Error("productId can't be null if needUseableList !");case 6:return r=[s._1.Offline,s.Gi.Offline].includes(t.saleChannel),a=j(t,r,t.version),l={baseInfo:a,productIDList:[t.productId],filterType:1},u={env:t.env,client:t.clientEnv,api:c.o.bl.PROMOTION_TAG,fetch:t.fetch,variables:l,logUbtDevTrace:t.logUbtDevTrace,isOffline:r,ctType:t.ctType||s.Yw.CTRIP,auth:t.auth,cid:t.clientId,apiPost:!0},e.next=12,_(u);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:return d=e.t0,p=d.list,f=void 0===p?[]:p,e.abrupt("return",f);case 21:return e.prev=21,e.t1=e["catch"](1),e.abrupt("return",[]);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,"needUseableList"in t&&!("isShowClaimedModule"in t)&&(console.warn("the argument needUseableList has been deprecated , please replace it with isShowClaimedModule. It means whether to display the coupon module which has been claimed or not."),t.isShowClaimedModule=t.needUseableList),e.next=4,R(t);case 4:return n=e.sent,e.next=7,L(t);case 7:return i=e.sent,r={claimList:n,useableList:i},a=Z(r),e.abrupt("return",Object.assign({},a,{claimCouponList:r}));case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[],claimCouponList:{claimList:[],useableList:[]}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,l,u,d,p,f;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={baseInfo:{channelId:t.saleChannel,clientId:t.clientId,utcOffset:P().offset,locale:t.locale,currency:t.currency,rmsToken:t.rmsToken,requestScene:s.NT.CrossCoupon,version:t.version,componentType:t.componentType,outOpenId:t.outOpenId}},t.orderId?n.businessId=t.orderId:t.sceneParam&&(n.sceneParam={sceneCode:null===(i=t.sceneParam)||void 0===i?void 0:i.sceneCode,filterList:null===(r=t.sceneParam)||void 0===r?void 0:r.filters,shownewuserpromo:null===(a=t.sceneParam)||void 0===a?void 0:a.shownewuserpromo}),l={env:t.env,client:t.clientType,api:c.o.bl.CROSS_COUPON,fetch:t.fetch,variables:n,logUbtDevTrace:t.logUbtDevTrace,ctType:t.ctType||s.Yw.CTRIP,cid:t.clientId,apiPost:!0},e.next=6,_(l);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return u=e.t0,d=u.list,p=d||[],f=p.map((function(e){return{promotionId:e.promotionId,displayName:e.displayName,couponCode:e.couponCode,couponStartDate:e.couponStartDate,couponDisableDate:e.couponDisableDate,promotionLabel:e.promotionLabel}})),e.abrupt("return",f);case 16:return e.prev=16,e.t1=e["catch"](0),e.abrupt("return",{availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[],claimCouponList:{claimList:[],useableList:[]}});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),A=n(42347),O=n(18239);try{var F=n(33675);N=F&&F.cwx}catch(nt){console.log("%c ".concat(nt),"color:red;")}var M=function(e){try{N&&N.sendUbtByPage.ubtDevTrace(e.key,e.value)}catch(e){}},B=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E((0,r.Z)((0,r.Z)({},t),{},{logUbtDevTrace:M,fetch:A.jJ,auth:N&&N.user.auth||(0,A.v0)(),version:A.Ke,componentType:O.Lm.Taro,clientEnv:O.AH.MiniProgram}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V((0,r.Z)((0,r.Z)({},t),{},{logUbtDevTrace:M,fetch:A.jJ,auth:N&&N.user.auth||(0,A.v0)(),version:A.Ke,componentType:O.Lm.Taro,clientType:O.AH.MiniProgram}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=n(90129),H=n(92954),z=n.n(H),q=n(93398),K="ZERO_TASK";function W(e){var t=e.compVersion,n=e.componentType,i=e.visible,l=e.data,u=(e.onClose,e.showToast),d=e.logTrace,p=e.ensureUbtHasAttached,f=e.fetch,h=e.clientEnv,m=e.isShowClaimedModule,v=void 0===m||m,g=e.userLogin,y=e.onLoadData,b=e.onClaim,k=e.onLogin,w=e.onVisibleChange,C=e.firstDidAmount,N=e.logMetric,j=e.logUbtDevTrace,R=e.traceLogId,L=(e.triggerError,e.needPopover),E=void 0===L||L,V=(e.kmInfo,e.needScrollPrevent),A=void 0===V||V,O=e.userRealNameAuth,F=e.getUserRealNameResult;"needUseableList"in e&&!("isShowClaimedModule"in e)&&(console.warn("the argument needUseableList has been deprecated , please replace it with isShowClaimedModule. It means whether to display the coupon module which has been claimed or not."),v=e.needUseableList);var M=(0,I.useMemo)((function(){return[s._1.Offline,s.Gi.Offline].includes(l.saleChannel)}),[l.saleChannel]),B=(0,I.useMemo)((function(){return{env:h.env,client:h.clientType,fetch:f,logTrace:d,logMetric:N,logUbtDevTrace:j,isOffline:M,ctType:h.ctType,cid:l.clientId}}),[e]),U=(0,I.useState)(i),H=(0,G.Z)(U,2),z=H[0],W=H[1],X=(0,I.useState)(!1),Y=(0,G.Z)(X,2),Q=Y[0],J=Y[1],$=(0,I.useState)(null),ee=(0,G.Z)($,2),te=ee[0],ne=ee[1],ie=(0,I.useState)([]),oe=(0,G.Z)(ie,2),re=oe[0],ae=oe[1],se=(0,I.useState)([]),le=(0,G.Z)(se,2),ce=le[0],ue=le[1],de=(0,I.useState)({}),pe=(0,G.Z)(de,2),fe=pe[0],he=pe[1],me=(0,I.useState)(!1),_e=(0,G.Z)(me,2),ve=_e[0],ge=_e[1],ye=(0,I.useRef)(new Map),xe=(0,I.useRef)(!1),be=(0,I.useRef)(),ke=(0,I.useMemo)((function(){return P()}),[]),we=(0,I.useMemo)((function(){return{pageId:l.pageId,componentId:c.o.CE.RECEIVEDETAIL.id,componentName:c.o.CE.RECEIVEDETAIL.name,componentVersion:t,ubtSourceKey:c.o.sH[l.source]}}),[]);(0,I.useImperativeHandle)(e.ref,(function(){return{show:function(){E?(W(!0),Ke(c.o.NG.CLAIMCOUPON_INVOKE_SHOW)):Ke(c.o.NG.EXPOSURE)},hide:function(){E&&(W(!1),Ke(c.o.NG.CLAIMCOUPON_INVOKE_HIDE))}}})),(0,I.useEffect)((function(){return C&&C(),p&&p(l.pageId,h.clientType),function(){w&&w(!1)}}),[]),(0,I.useEffect)((function(){if(xe.current){var e=Ae(l.locale);he(e)}}),[l.locale]),(0,I.useEffect)((function(){!D(fe)&&F&&F(null,Be)}),[fe]),(0,I.useEffect)((function(){try{return xe.current||(xe.current=!0),Ce(),function(){ye.current.forEach((function(e){clearTimeout(e)}))}}catch(e){qe(e)}}),[JSON.stringify(e.data),e.hasError]),(0,I.useEffect)((function(){W(i)}),[i]),(0,I.useEffect)((function(){E&&(z&&Ke(c.o.NG.EXPOSURE),w&&w(z&&A))}),[z,E]);var Ie=function(e){return 2!=e.promotionStatus&&3!=e.promotionStatus||(e.showImg=!0),e},Ze=function(e,t,n){ae((function(i){var o=(0,x.Z)(void 0===n?i:n);if(e&&t){var r=o.find((function(t){return t.promotionId==e}));r&&Object.assign(r,t||{})}return o}))},Te=function(e,t,n,i){var o=(0,x.Z)(n),r=o.find((function(t){return t.promotionId==e}));r&&Object.assign(r,t||{}),i?ae(o):ue(o)};function Se(t){void 0!==z&&W(!1),e.onClose&&e.onClose(),Q&&(Ce(),J(!1)),Ke(c.o.NG.CLAIMCOUPON_CLOSE)}function Ce(e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,a.Z)((0,o.Z)().mark((function t(n){var i,r,a,s,c,u,d;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasError){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Ae(l.locale);case 5:return i=t.sent,he(i),t.next=9,Ee();case 9:r=t.sent,a=r.list,s=r.serverTime;try{Ne(a,s,i),De(s,a,i)}catch(e){qe(e)}return t.next=15,Ve();case 15:c=t.sent,ae(a||[]),ue(c||[]),u={claimList:a,useableList:c},d=Z(u),y&&y(d),n&&n(u),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](2),qe(t.t0);case 27:case"end":return t.stop()}}),t,null,[[2,24]])}))),Pe.apply(this,arguments)}var Ne=(0,I.useCallback)((function(e,t,n,i){e&&0!=e.length&&e.forEach((function(o){if(1==o.promotionStatus&&1==o.activityStatus){var r=ye.current.get(o.promotionId);r&&clearTimeout(r);var a=T(t,o.nextAvailableTime,(function(){Ze(o.promotionId,{buttonText:n[c.m.RECEIVE],disableButton:!1,activityStatus:2},i||e),console.log("--------------------Scene Start\uff0cChange Button State--------------------",(new Date).toString())}),(function(){je([o.promotionId],i||e,n)}),o.promotionId);a&&ye.current.set(o.promotionId,a)}}))}),[fe,ye]);function De(e,t,n){var i=S(e),o=t.filter((function(e){return 1==e.promotionStatus&&1==e.activityStatus})).map((function(e){return e.promotionId}));ye.current.set(K,setTimeout((function(){je(o,t,n)}),i))}function je(e,t,n){return Re.apply(this,arguments)}function Re(){return Re=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s,l;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&0!=t.length){e.next=2;break}return e.abrupt("return");case 2:return r=(0,x.Z)(n),e.next=5,Ee(!1);case 5:a=e.sent,s=a.list,l=a.serverTime,t.forEach((function(e){var t=s.find((function(t){return t.promotionId==e})),n=r.find((function(t){return t.promotionId==e}));if(n&&t)if(Object.assign(n,{disableButton:t.disableButton,buttonText:t.buttonText,activityStatus:t.activityStatus,promotionStatus:t.promotionStatus}),1==t.promotionStatus&&1==t.activityStatus)Ne([t],l,i,r);else{var o=ye.current.get(t.promotionId);o&&clearTimeout(o),Ze(null,null,r)}}));case 9:case"end":return e.stop()}}),e)}))),Re.apply(this,arguments)}var Le=function(){return{channelId:l.saleChannel,allianceId:l.allianceId,siteId:l.siteId,clientId:l.clientId,source:l.source,utcOffset:ke.offset,locale:l.locale,currency:l.currency,outOpenId:l.outOpenId,uid:M?l.uid:"",rmsToken:l.rmsToken,requestScene:q.NT.DetailClaim,version:t,componentType:n}},Ee=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,a,s,u,d,p,f,h,m=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=!(m.length>0&&void 0!==m[0])||m[0],e.prev=1,!(l.productId>0)){e.next=7;break}n=l.productId,i=q.K7.PRODUCTID,e.next=18;break;case 7:if(!(l.scenicSpotId>0)){e.next=12;break}n=l.scenicSpotId,i=q.K7.SCENICSPOTID,e.next=18;break;case 12:if(!(l.poiId>0)){e.next=17;break}n=l.poiId,i=q.K7.POIID,e.next=18;break;case 17:throw new Error("Params Error\uff0cproductId\u3001scenicSpotId\u3001poiId Need One Or More");case 18:return a=Le(),s={baseInfo:a,relationDetail:{relationType:i,relationId:n},receivePromotionType:l.receivePromotionType,shownewuserpromo:!0,filterType:t?v?1:2:0,utcOffset:ke.offset},u=(0,r.Z)((0,r.Z)({},B),{},{api:c.o.bl.RECEIVE_PROMOTION,variables:s,componentInfo:we,traceLogId:R}),e.next=23,_(u);case 23:if(e.t0=e.sent,e.t0){e.next=26;break}e.t0={};case 26:return d=e.t0,p=d.list,f=void 0===p?[]:p,h=d.serverTime,f.forEach((function(e){Ie(e)})),e.abrupt("return",{list:f,serverTime:Number.parseInt(h)});case 34:e.prev=34,e.t1=e["catch"](1),qe(e.t1);case 37:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,a,s,u,d,p=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=!(p.length>0&&void 0!==p[0])||p[0],e.prev=1,v){e.next=4;break}return e.abrupt("return",[]);case 4:if(l.productId){e.next=6;break}throw new Error("productId can't be null if isShowClaimedModule !");case 6:return n=Le(),i={baseInfo:n,productIDList:[l.productId],filterType:t?1:0},a=(0,r.Z)((0,r.Z)({},B),{},{api:c.o.bl.PROMOTION_TAG,variables:i,componentInfo:we,traceLogId:R}),e.next=11,_(a);case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:return s=e.t0,u=s.list,d=void 0===u?[]:u,d.forEach((function(e){Ie(e)})),e.abrupt("return",d);case 21:e.prev=21,e.t1=e["catch"](1),qe(e.t1);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),Ae=(0,I.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,s,l,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Le(),i={sharkLocale:t,baseInfo:n},a=(0,r.Z)((0,r.Z)({},B),{},{api:c.o.bl.SHARK,variables:i,componentInfo:we,traceLogId:R}),e.prev=3,e.next=6,_(a);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return s=e.t0,l=s.data,u=void 0===l?{}:l,e.abrupt("return",u);case 15:return e.prev=15,e.t1=e["catch"](3),qe(e.t1),e.abrupt("return",{});case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[]),Oe=function(e,t,n,i){He(e,t,function(){var t=(0,a.Z)((0,o.Z)().mark((function t(r){var a,s,l,c;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a.buttonText=r.buttonText,a.disableButton=r.disableButton,a.showImg=r.success,a.animationAction=r.success,t.next=7,Ee(!1);case 7:s=t.sent,l=s.list,c=l.find((function(t){return t.promotionId==e})),a.useDateShown=c.useDateShown,a.promotionStatus=c.promotionStatus,a.activityStatus=c.activityStatus,Ze(e,a,null===n||void 0===n?void 0:n.claimList),r.showToast&&r.message&&u({className:"coupon_toast",content:r.message,duration:1500,needMask:!1,type:r.toastType||"failed"}),J(!0),i&&i(),b&&b({success:r.success,promotionId:r.promotionId,couponCode:r.couponCode,promotionSecretId:r.promotionSecretId,code:r.code,message:r.message});case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Fe=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ce((function(e){var t=(e.claimList||[]).find((function(e){return e.promotionId==be.current}));t&&1==t.promotionStatus&&Oe(be.current,t.promotionSecretId,e)})),k&&k();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ce((function(e){var t=(e.claimList||[]).find((function(e){return e.promotionId==be.current}));t&&1==t.promotionStatus&&Oe(be.current,t.promotionSecretId,e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=fe[c.m.DETAILS_REALNAME_CLAIM_FAIL];u({className:"coupon_toast",content:e,duration:1500,needMask:!1,type:"failed"})},Ue=function(){ge(!1),Ke(c.o.NG.REALNAME_DETAIL_VERIFY_CLICK,{strategyid:be.current}),O&&O(h.env,Me,Be)},Ge=function(){ge(!1),Ke(c.o.NG.REALNAME_DETAIL_REFUSE_CLICK,{strategyid:be.current})};function He(e,t,n){return ze.apply(this,arguments)}function ze(){return ze=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var a,s,l,d,p,f,m,v,y;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Le(),s={baseInfo:a,promotionSecretIds:[n]},l=(0,r.Z)((0,r.Z)({},B),{},{api:c.o.bl.CLAIM,variables:s,componentInfo:we,traceLogId:R}),e.prev=3,e.next=6,_(l);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(d=e.t0,p=d.typename,f=d.resultStatus,m=d.claimResultList,v=m&&m[0],p!=c.o.k5){e.next=18;break}f&&f.code==c.o.rG.AUTH_FAILURE&&(be.current=t,g(h.env,Fe)),e.next=26;break;case 18:if(!v||v.code!=c.o.rG.REALNAME_FAILURE){e.next=24;break}be.current=t,ge(!0),Ke(c.o.NG.REALNAME_DETAIL_EXPO,{strategyid:t}),e.next=26;break;case 24:return e.next=26,i(v);case 26:e.next=33;break;case 28:e.prev=28,e.t1=e["catch"](3),y=fe[c.m.FAILURE_NOTICE]||"Failed to claim, please contact Trip.com customer support",u({className:"coupon_toast",content:y,duration:1500,needMask:!1,type:"failed"}),qe(e.t1);case 33:case"end":return e.stop()}}),e,null,[[3,28]])}))),ze.apply(this,arguments)}function qe(e){console.error(e),Ke(c.o.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var Ke=(0,I.useCallback)((function(t,n){if(d){var i={compId:we.componentName,ttdVer:we.componentVersion,pagebu:l.source,productId:l.productId?l.productId:void 0,scenicSpotId:l.scenicSpotId?l.scenicSpotId:void 0,state:{visible:z,flagd:Q,expandCode:te},props:(0,r.Z)((0,r.Z)({},e.data),{},{visible:e.visible,clientEnv:e.clientEnv,isShowClaimedModule:e.isShowClaimedModule,isShowEmptyContent:e.isShowEmptyContent,title:e.title})};try{d({key:t,value:n?(0,r.Z)((0,r.Z)({},n),i):i})}catch(e){console.error(e)}}}),[e.data,z,Q,te,we]),We=(0,I.useCallback)((function(e,t){Ke(c.o.NG.CLICK,{module:e,strategyid:t})}),[Ke]);return{ctrl:{handleClaimCouponClick:Oe,handleClose:Se,changeCouponListItem:Te,handleTraceClick:We,loginSuccessCb:Fe,handleRealNameClick:Ue,handleRealNameClose:Ge},modelState:{timezone:ke,claimableCouponList:re,useableCouponList:ce,expandCode:te,componentInfo:we,visible:z,sharkData:fe,showRealNameModal:ve},modelAction:{setExpandCode:ne}}}var X=n(71515),Y=n(68277),Q=n(2269),J=["handleExpand","expanded","buttonText","disableButton","handleTraceClick","handleClaim","scene"],$=I.useEffect,ee=function(e){return e[e["Claim_Claimable"]=0]="Claim_Claimable",e[e["Calim_Useabel"]=1]="Calim_Useabel",e}({}),te=function(e){var t=e.handleExpand,n=e.expanded,i=e.buttonText,o=e.disableButton,r=e.handleTraceClick,a=e.handleClaim,s=e.scene,l=(0,Y.Z)(e,J),c=l.promotionId,u=l.deductionInfoShown,d=l.showImg,p=l.animationAction;$((function(){d&&h.current&&!p&&(h.current.style.transition="none",h.current.classList.add("load"))}),[]),$((function(){h.current&&(d&&!h.current.classList.contains("load")&&h.current.classList.add("load"),p||(h.current.style.transition="none"))}),[p,d]);var f=(0,I.useRef)(null),h=(0,I.useRef)(null),m=function(){if(null===f.current){if(o)return;a(l.promotionId,l.promotionSecretId),r("Claim",c),f.current=setTimeout((function(){f.current=null}),1e3)}},_=1==l.promotionStatus&&1==l.activityStatus,v="".concat(2*w(u.amount,!1),"rpx");return(0,Q.jsxs)(X.View,{className:"coupon_block_view",children:[(0,Q.jsxs)(X.View,{className:"coupon_info_view available",children:[(0,Q.jsxs)(X.View,{className:"info_deduction_view",children:[2==l.promotionMethod&&(0,Q.jsx)(X.View,{className:"deduction_tag",children:(0,Q.jsx)(X.Text,{className:"font10px",children:"\u540e\u8fd4\u5238"})}),u.fullDeduction?(0,Q.jsx)(X.View,{className:"deduction_fullamount",children:u.desc}):(0,Q.jsxs)(I.Fragment,{children:[!!u.desc&&(0,Q.jsx)(X.View,{className:"deduction_part1 font10px",children:u.desc}),(0,Q.jsxs)(X.View,{className:"deduction_part2",children:[(0,Q.jsx)(X.View,{className:"deduction_amount",style:{fontSize:v},children:u.amount}),(0,Q.jsx)(X.View,{className:"deduction_unit",children:u.discountUnit})]})]})]}),(0,Q.jsxs)(X.View,{className:"info_desc_view",children:[(0,Q.jsx)(X.View,{className:"desc_name",children:(0,Q.jsx)(X.View,{className:"name_text",children:l.couponName})}),(0,Q.jsxs)(X.View,{className:"desc_middle",children:[(0,Q.jsx)(X.View,{className:"desc_shortremark",children:l.shortRemark}),l.useDateShown&&(0,Q.jsx)(X.View,{className:"desc_usedate",children:l.useDateShown})]}),(0,Q.jsxs)(X.View,{className:"desc_detail",children:[(0,Q.jsxs)(X.View,{className:"detail_link",onClick:function(){t(n?null:c),r("Detail",c)},children:[(0,Q.jsx)(X.Text,{className:"font10px",children:"\u8be6\u7ec6\u8bf4\u660e"}),(0,Q.jsx)(X.View,{className:"expandicon",children:n?(0,Q.jsx)(X.Text,{className:"ttd_mkt_icon",children:"\ue946"}):(0,Q.jsx)(X.Text,{className:"ttd_mkt_icon",children:"\ue945"})})]}),(0,Q.jsx)(X.View,{className:"claim_btn ".concat(o?"disabled":""," ").concat(_?"warmup":""),style:{display:d?"none":"block"},onClick:m,children:(0,Q.jsx)(X.Text,{className:"claimbtn_txt",children:i})})]}),s!==ee.Calim_Useabel&&(0,Q.jsx)(X.Image,{ref:h,className:"claim_success_img claimCoupon_".concat(c),src:"https://dimg04.c-ctrip.com/images/0AS3q1200087hg3qwC682.png"})]})]}),!!n&&(0,Q.jsxs)(X.View,{className:"coupon_detail_view",children:[u&&u.deductionList&&(0,A.yo)(u.deductionList,2).map((function(e,t){return(0,Q.jsx)(X.View,{className:"detail_deduction_list",children:e.map((function(e,t){return(0,Q.jsx)(X.View,{className:"deduction_info_view",children:(0,Q.jsx)(X.Text,{className:"font10px",children:e})},t)}))},t)})),(0,Q.jsx)(X.View,{className:"detail_remark_list",children:(l.detailRemarkShown||[]).map((function(e,t){return(0,Q.jsx)(X.View,{className:"remark_info",children:e},t)}))}),1==l.couponType&&(0,Q.jsxs)(X.View,{className:"detail_remark_code",children:["\u4f18\u60e0\u5238\u7801\uff1a",l.couponCode]})]})]})},ne=te,ie=function(e){var t=e.modelState,n=e.modelAction,i=e.ctrl,o=e.isShowEmptyContent,a=e.Header,s=e.productId,l=e.scenicSpotId,c=t.timezone,u=t.claimableCouponList,d=t.useableCouponList,p=t.expandCode,f=(t.visible,(u||[]).length),h=(d||[]).length,m=n.setExpandCode,_=i.handleTraceClick,v=i.handleClaimCouponClick;return(0,Q.jsxs)(X.View,{className:"ttd_mkt_coupon_body",children:[-480!=c.offset&&(f>0||h>0)&&(0,Q.jsx)(X.View,{className:"coupon_timezone_view",children:"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT+08:00"}),a&&(0,Q.jsx)(X.View,{className:"coupon_list_view tagheader",children:a}),0==f&&0==h&&o&&(0,Q.jsxs)(X.View,{className:"coupon_empty_view",children:[(0,Q.jsx)(X.Image,{className:"empty_img",src:"//pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),(0,Q.jsx)(X.View,{className:"empty_span1",children:"\u62b1\u6b49\uff0c\u6682\u65e0\u53ef\u9886\u53d6\u6216\u5df2\u9886\u53d6\u7684\u4f18\u60e0\u5238"})]}),(0,Q.jsxs)(X.View,{className:"coupon_list_view",children:[f>0&&(0,Q.jsx)(X.View,{className:"coupon_block_name",children:"\u53ef\u9886\u4f18\u60e0\u5238"}),(u||[]).map((function(e,t){return(0,Q.jsx)(ne,(0,r.Z)({},(0,r.Z)((0,r.Z)({},e),{},{positionId:t+1,expanded:e.promotionId==p,handleExpand:m,handleTraceClick:_,scene:ee.Claim_Claimable,handleClaim:v,productId:s,scenicSpotId:l})),"".concat(e.promotionId,"-").concat(t))}))]}),(0,Q.jsxs)(X.View,{className:"coupon_list_view",children:[h>0&&(0,Q.jsxs)(X.View,{className:"coupon_block_name",children:[(0,Q.jsx)(X.View,{className:"coupon_block_name_title",children:"\u5df2\u9886\u4f18\u60e0\u5238"}),(0,Q.jsx)(X.View,{className:"coupon_block_name_desc",children:"\u6ee1\u8db3\u6761\u4ef6\u540e\u5373\u53ef\u7528\u4e8e\u5f53\u524d\u5546\u54c1"})]}),(d||[]).map((function(e,t){return(0,Q.jsx)(ne,(0,r.Z)({},(0,r.Z)((0,r.Z)({},e),{},{positionId:t+1,expanded:e.promotionId==p,handleExpand:m,handleTraceClick:_,scene:ee.Calim_Useabel,productId:s,scenicSpotId:l})),"".concat(e.promotionId,"-").concat(t))}))]})]})},oe=ie,re=function(e){var t=e.style,n=e.children;return(0,Q.jsx)(X.View,{className:"tangram-mask",style:(0,r.Z)({position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1e4},t),children:n})},ae=I.memo(re),se={modal:{width:"281px",paddingTop:"28px",paddingLeft:"16px",paddingRight:"16px",paddingBottom:"16px",borderRadius:"8px",backgroundColor:"white",boxSizing:"border-box"},content:{display:"inline-block",fontSize:"17px",lineHeight:"23px",fontFamily:"PingFangSC-Medium",textAlign:"center"},btns:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"26px"},cancel:{paddingLeft:"6.5px",paddingRight:"6.5px",minWidth:"118.5px",height:"36px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center"},ok:{flex:1,marginLeft:"8px",paddingLeft:"6.5px",paddingRight:"6.5px",maxWidth:"118.5px",height:"36px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center"},text:{flex:1,fontSize:"15px",fontFamily:"PingFangSC-Regular",textAlign:"center"}},le=function(e){var t=e.visible,n=e.content,i=e.textColor,o=void 0===i?"#333333":i,a=e.cancelText,s=void 0===a?"\u53d6\u6d88":a,l=e.okText,c=void 0===l?"\u786e\u8ba4":l,u=e.cancelButtonStyle,d=void 0===u?{}:u,p=d.color,f=void 0===p?"#0086F6":p,h=d.backgroundColor,m=void 0===h?"white":h,_=d.borderColor,v=void 0===_?"#2698F7":_,g=e.okButtonStyle,y=void 0===g?{}:g,x=y.color,b=void 0===x?"white":x,k=y.backgroundColor,w=void 0===k?"#0086F6":k,I=y.borderColor,Z=e.style,T=void 0===Z?{}:Z,S=e.maskStyle,C=e.handleCancel,P=e.handleOK;return t?(0,Q.jsx)(ae,{style:S,children:(0,Q.jsxs)(X.View,{style:(0,r.Z)((0,r.Z)({},se.modal),T),children:[(0,Q.jsx)(X.Text,{style:(0,r.Z)((0,r.Z)({},se.content),{},{color:o}),children:n}),(0,Q.jsxs)(X.View,{style:se.btns,children:[(0,Q.jsx)(X.View,{style:(0,r.Z)((0,r.Z)({},se.cancel),{},{backgroundColor:m,borderColor:v}),onClick:C,children:(0,Q.jsx)(X.Text,{style:(0,r.Z)((0,r.Z)({},se.text),{},{color:f}),children:s})}),(0,Q.jsx)(X.View,{style:(0,r.Z)((0,r.Z)({},se.ok),{},{backgroundColor:w,borderColor:I}),onClick:P,children:(0,Q.jsx)(X.Text,{style:(0,r.Z)((0,r.Z)({},se.text),{},{color:b}),children:c})})]})]})}):null},ce=I.memo(le),ue=I.useEffect,de=I.useState,pe=I.forwardRef((function(e,t){var n=de(""),i=(0,G.Z)(n,2),s=i[0],l=i[1],u=de(!1),d=(0,G.Z)(u,2),p=d[0],f=d[1],h=de(!1),m=(0,G.Z)(h,2),_=m[0],v=m[1],g=e.Header,y=e.title,x=e.data,b=x.productId,k=x.scenicSpotId,w=(x.locale,e.isShowEmptyContent),Z=void 0===w||w,T=e.style,S=void 0===T?{}:T,C=e.needPopover,P=void 0===C||C,N=(0,r.Z)((0,r.Z)({},e),{},{fetch:A.jJ,compVersion:A.Ke,componentType:O.Lm.Taro,showToast:function(e){z().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:A.qn,logMetric:A.HR,logUbtDevTrace:A.q6,userLogin:A.Sx,ref:t,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec useCoupon firstDidAmount","color:yellow"),e.next=3,(0,A.So)();case 3:t=e.sent,t&&t.safeArea&&t.safeArea.top&&t.safeArea.top>20&&(f(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),userRealNameAuth:A.RO}),D=W(N),j=D.modelState,R=D.modelAction,L=D.ctrl,E=j.claimableCouponList,V=j.useableCouponList,F=j.visible,M=j.showRealNameModal,B=j.sharkData,U=(E||[]).length,H=(V||[]).length,q=L.handleClose,K=(L.loginSuccessCb,L.handleRealNameClick),Y=L.handleRealNameClose;ue((function(){F?(l(""),z().nextTick((function(){v(!0)}))):(v(!1),setTimeout((function(){l("displayNone")}),100))}),[F]);var J=S.zIndex?S.zIndex:1e3,$=function(){var e={};return e.zIndex=J+1,0==U&&0==H&&(e.top="160px"),S.top&&(e.top=S.top),e},ee=I.useMemo((function(){return $()}),[S,U,H]);return(0,Q.jsxs)(X.View,{className:"ttd_mkt_claimcoupon_main ".concat(_?"shown":"hidden"),children:[P&&(0,Q.jsx)(X.View,{className:"coupon_modal_mask ".concat(s),onClick:q,catchMove:!0,style:{zIndex:J}}),(0,Q.jsxs)(X.View,{className:"coupon_modal_body".concat(P?" dialog":" block"," ").concat(s),catchMove:P,style:ee,children:[P&&(0,Q.jsxs)(X.View,{className:"modal_header",children:[(0,Q.jsx)(X.View,{className:"header_closebtn",hoverClass:"closebtn_inhover",onClick:q}),(0,Q.jsx)(X.View,{className:"header_title",children:y||"\u4f18\u60e0\u5238"}),(0,Q.jsx)(X.View,{className:"header_right"})]}),(0,Q.jsx)(X.ScrollView,{className:"modal_content",scrollY:!0,scrollWithAnimation:!0,style:{marginBottom:p?"34rpx":0},children:(0,Q.jsx)(oe,{productId:b,scenicSpotId:k,isShowEmptyContent:Z,modelState:j,modelAction:R,ctrl:L,Header:g})}),(0,Q.jsx)(Q.Fragment,{children:M&&(0,Q.jsx)(ce,{visible:M,content:B[c.m.DETAILS_REALNAME_CONFIRM],okText:B[c.m.DETAILS_REALNAME_CONFIRM_AUTH],cancelText:B[c.m.DETAILS_REALNAME_CONFIRM_GIVEUP],handleOK:K,handleCancel:Y})})]})]})})),fe=pe;function he(e){var t=e.logTrace,n=e.data,i=e.logMetric,l=e.logUbtDevTrace,d=e.hasError,p=e.fetch,f=e.onClose,h=e.onLoad,m=e.traceLogId,v=e.visible,g=e.compVersion,y=e.componentType,x=e.miniType,b=e.firstDidAmount,k=e.onVisibleChange,w=e.expandPromotionId,Z=e.clientEnv,T=(0,I.useState)(w),S=(0,G.Z)(T,2),C=S[0],N=S[1],D=(0,I.useState)(v),j=(0,G.Z)(D,2),R=j[0],L=j[1],E=(0,I.useState)([]),V=(0,G.Z)(E,2),A=V[0],O=V[1],F=(0,I.useState)({}),M=(0,G.Z)(F,2),B=M[0],U=M[1],H=(0,I.useMemo)((function(){return P()}),[]);(0,I.useEffect)((function(){N(w)}),[w]);var z=(0,I.useMemo)((function(){return{pageId:n.pageId,componentId:u.CE.CROSS_COUPON.id,componentName:u.CE.CROSS_COUPON.name,componentVersion:g}}),[]),q=(0,I.useMemo)((function(){return{channelId:n.saleChannel,clientId:n.clientId,utcOffset:H.offset,locale:n.locale,currency:n.currency,rmsToken:n.rmsToken,outOpenId:n.outOpenId,requestScene:s.NT.CrossCoupon,version:g,componentType:y,miniType:x}}),[e.data,H]);(0,I.useEffect)((function(){L(v)}),[v]),(0,I.useEffect)((function(){k&&k(R)}),[R]),(0,I.useEffect)((function(){return b&&b(),function(){k&&k(!1)}}),[]),(0,I.useEffect)((function(){R&&J(n.orderId?u.NG.CROSS_AFTERBOOKING_EXPOSURE:u.NG.CROSS_BEFOREBOOKING_EXPOSURE)}),[R]),(0,I.useEffect)((function(){W()}),[JSON.stringify(n),d]),(0,I.useEffect)((function(){Y()}),[n.locale]);var K=(0,I.useMemo)((function(){return{env:(null===Z||void 0===Z?void 0:Z.env)||n.env,client:null===Z||void 0===Z?void 0:Z.clientType,ctType:null===Z||void 0===Z?void 0:Z.ctType,fetch:p,logTrace:t,logMetric:i,logUbtDevTrace:l,cid:n.clientId}}),[e]);function W(){return X.apply(this,arguments)}function X(){return X=(0,a.Z)((0,o.Z)().mark((function e(){var t,i,a,s,l,u,p,f,v;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={baseInfo:q},n.orderId?t.businessId=n.orderId:n.sceneParam&&(t.sceneParam={sceneCode:null===(i=n.sceneParam)||void 0===i?void 0:i.sceneCode,filterList:null===(a=n.sceneParam)||void 0===a?void 0:a.filters,shownewuserpromo:null===(s=n.sceneParam)||void 0===s?void 0:s.shownewuserpromo}),l=(0,r.Z)((0,r.Z)({},K),{},{api:c.o.bl.CROSS_COUPON,variables:t,componentInfo:z,traceLogId:m}),e.next=8,_(l);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:u=e.t0,p=u.list,f=p||[],O(f),v=f.map((function(e){var t={promotionId:e.promotionId,displayName:e.displayName,couponCode:e.couponCode,couponStartDate:e.couponStartDate,couponDisableDate:e.couponDisableDate,promotionLabel:e.promotionLabel,businessLineType:e.businessLineType,customerNewOrOldName:e.customerNewOrOldName,businessLineName:e.businessLineName,deductionAmountLabel:e.deductionAmountLabel,toUseLink:e.toUseLink};return t})),h&&h(v),J(c.o.NG.CROSS_ONLOAD,v),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](2),Q(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20]])}))),X.apply(this,arguments)}var Y=(0,I.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var t,i,a,s,l;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sharkLocale:n.locale,baseInfo:q},i=(0,r.Z)((0,r.Z)({},K),{},{api:c.o.bl.SHARK,variables:t,componentInfo:z,traceLogId:m}),e.prev=2,e.next=5,_(i);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:a=e.t0,s=a.data,l=void 0===s?{}:s,U(l),e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](2),Q(e.t1);case 17:case"end":return e.stop()}}),e,null,[[2,14]])}))),[n.locale,n.env]);function Q(e){console.error(e),J(u.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var J=function(i,o){var a;if(t){var s={compId:z.componentName,ttdVer:z.componentVersion,state:{visible:R,expandId:C},props:(0,r.Z)((0,r.Z)({},e.data),{},{visible:e.visible,title:e.title})};n.orderId?s.orderId=n.orderId:s.sceneCode=null===(a=n.sceneParam)||void 0===a?void 0:a.sceneCode;try{t({key:i,value:o?(0,r.Z)((0,r.Z)({},o),s):s})}catch(e){console.error(e)}}};function $(e,t){J(n.orderId?u.NG.CROSS_AFTERBOOKING_CLICK:u.NG.CROSS_BEFOREBOOKING_CLICK,{module:e,strategyid:t})}function ee(){console.log("invoke handleClose"),L(!1),$("CloseByX"),f&&f()}return{modelState:{visible:R,expandId:C,couponList:A,sharkData:B,componentInfo:z},modelAction:{setExpandId:N},ctrl:{handleClose:ee,handleTraceClick:$}}}var me=he,_e=I.useEffect,ve=I.forwardRef,ge=I.useState,ye=(I.useCallback,ve((function(e,t){var n=ge(""),i=(0,G.Z)(n,2),l=i[0],u=i[1],d=ge(!1),p=(0,G.Z)(d,2),f=p[0],h=p[1],m=ge(!1),_=(0,G.Z)(m,2),v=_[0],g=_[1],y=e.data,x=e.title,b=e.style,k=e.popoverLevel,w=void 0===k?1:k,Z=(0,r.Z)((0,r.Z)({},e),{},{compVersion:A.Ke,componentType:s.Lm.Taro,miniType:(0,A.H9)(),showToast:function(e){z().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:A.qn,logUbtDevTrace:A.q6,logMetric:A.HR,auth:A.Y8&&A.Y8.user.auth||(0,A.v0)(),fetch:A.jJ,ensureUbtHasAttached:null,ref:t,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec crossCoupon firstDidAmount","color:yellow"),e.next=3,(0,A.So)();case 3:t=e.sent,t&&t.safeArea&&t.safeArea.top&&t.safeArea.top>20&&(h(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),T=me(Z),S=T.modelState,C=T.modelAction,P=T.ctrl,N=S.couponList,D=S.sharkData,j=S.visible,R=S.expandId,L=C.setExpandId,E=P.handleClose,V=P.handleTraceClick,O=function(e){(0,A.tv)(e)};_e((function(){j?(console.log("show"),u(""),z().nextTick((function(){g(!0)}))):(console.log("hide"),g(!1),setTimeout((function(){u("displayNone")}),100))}),[j]),(0,H.useDidShow)((function(){})),(0,H.useDidHide)((function(){})),(0,H.usePullDownRefresh)((function(){}));var F=y.orderId?s.Qo.AfterBooking:s.Qo.BeforeBooking,M=I.useCallback((function(){var e={};return w>1?e.top=0:N&&0!=N.length||(e.top=320),null!==b&&void 0!==b&&b.top?e.top=b.top:w>1&&(e.borderRadius=0),null!==b&&void 0!==b&&b.zIndex&&(e.zIndex=b.zIndex+1),e}),[b,N]),B=I.useMemo((function(){return M()}),[M]);return(0,Q.jsxs)(X.View,{className:"ttd_mkt_layout ".concat(v?"shown":"hidden"),children:[(0,Q.jsx)(X.View,{className:"ttdmkt_crs_cover ".concat(l),onClick:function(){E(),V("CloseByX")},catchMove:!0}),(0,Q.jsxs)(X.View,{className:"ttdmkt_crs_main ".concat(l),catchMove:!0,style:B,children:[(0,Q.jsxs)(X.View,{className:"crs_header",children:[(0,Q.jsx)(X.View,{className:"crs_header_close ".concat(w>1?"crs_back_icon":"crs_close_icon"),hoverClass:"crs_close_active",onClick:function(){E()}}),(0,Q.jsx)(X.View,{className:"crs_header_title",children:x||"".concat(D[c.m.CROSS_TITLE]||"\u8d60\u5238")}),(0,Q.jsx)(X.View,{className:"crs_header_right"})]}),(0,Q.jsxs)(X.ScrollView,{className:"crs_body",scrollY:!0,scrollWithAnimation:!0,style:f?{paddingBottom:20}:{},children:[(0,Q.jsx)(X.View,{className:"crs_tips_body",children:F==s.Qo.AfterBooking?(0,Q.jsx)(X.Text,{className:"crs_tips_text",children:"".concat(D[c.m.CROSS_AFTERBOOKING_SUBTITLE]||"\u4f18\u60e0\u5238\u5df2\u5230\u8d26\uff0c\u53ef\u5728\u201c\u6211\u7684\u201d>\u201c\u4f18\u60e0\u5238\u201d\u4e2d\u67e5\u770b")}):(0,Q.jsx)(X.Text,{className:"crs_tips_text",children:"".concat(D[c.m.CROSS_BEFOREBOOKING_SUBTITLE]||"*\u652f\u4ed8\u6210\u529f\u540e\uff0c\u4ee5\u4e0b\u4f18\u60e0\u5238\u5c06\u81ea\u52a8\u53d1\u653e\u81f3\u60a8\u7684\u8d26\u6237")})}),null===N||void 0===N?void 0:N.map((function(e,t){var n,i,o;if(!e.promotionLabel)return null;var r=F===s.Qo.AfterBooking&&e.toUseLink,a=e.promotionId==R;return(0,Q.jsxs)(X.View,{className:"crs_block",children:[(0,Q.jsxs)(X.View,{className:"crs_block_hd",children:[(0,Q.jsxs)(X.View,{className:"crs_block_hd_name",onClick:function(){L(a?null:e.promotionId),V("Detail",e.promotionId)},children:[(0,Q.jsx)(X.Image,{className:"crs_block_hd_img",src:e.iconImageUrl}),(0,Q.jsxs)(X.View,{className:"crs_block_hd_tag ".concat(r?"withTouse":""),children:[(0,Q.jsxs)(X.View,{children:[(0,Q.jsx)(X.Text,{className:"crs_block_hd_p1",children:"".concat(null!==(n=e.businessLineName)&&void 0!==n?n:"").concat(null!==(i=e.customerNewOrOldName)&&void 0!==i?i:"")}),(0,Q.jsx)(X.Text,{className:"crs_block_hd_p2",children:e.deductionAmountLabel})]}),r&&(0,Q.jsxs)(X.View,{className:"crs_op_detail withTouse",onClick:function(){L(a?null:e.promotionId),V("Detail",e.promotionId)},children:[(0,Q.jsx)(X.Text,{className:"crs_op_detail_txt",children:"".concat(D[c.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,Q.jsx)(X.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,Q.jsx)(X.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]})]}),r?(0,Q.jsx)(X.View,{className:"crs_op_touse",onClick:function(){O(e.toUseLink),V("ToUse",e.promotionId)},children:(0,Q.jsx)(X.Text,{className:"crs_op_touse_text",children:"".concat(D[c.m.POP_TOUSE]||"\u53bb\u4f7f\u7528")})}):(0,Q.jsxs)(X.View,{className:"crs_op_detail",onClick:function(){L(a?null:e.promotionId),V("Detail",e.promotionId)},children:[(0,Q.jsx)(X.Text,{className:"crs_op_detail_txt",children:"".concat(D[c.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,Q.jsx)(X.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,Q.jsx)(X.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]}),a&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(X.View,{className:"crs_cutting_line  ".concat(r?"with_touse":"")}),(0,Q.jsxs)(X.View,{className:"crs_block_bd",children:[F===s.Qo.AfterBooking&&(0,Q.jsxs)(X.View,{className:"crs_block_bd_item",children:[(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_title",children:"".concat(D[c.m.CROSS_VALIDPERIOD_TIITLE]||"\u4f7f\u7528\u6709\u6548\u671f")}),(0,Q.jsx)(X.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_content",children:e.useDateShown||""})})]}),(0,Q.jsxs)(X.View,{className:"crs_block_bd_item",children:[(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_title",children:e.displayName}),(0,Q.jsx)(X.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,Q.jsxs)(X.View,{className:"crs_block_bd_item_content_row",children:[(0,Q.jsx)(X.View,{className:"crs_block_bd_item_content_dot"}),(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_content",children:e.shortRemark})]})})]}),(0,Q.jsxs)(X.View,{className:"crs_block_bd_item",children:[(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_title",children:"".concat(D[c.m.CROSS_USEDETAIL]||"\u4f7f\u7528\u89c4\u5219")}),(0,Q.jsx)(X.View,{className:"crs_block_bd_item_content_row_wrap",children:null===(o=e.detailRemark)||void 0===o?void 0:o.map((function(e){return(0,Q.jsxs)(X.View,{className:"crs_block_bd_item_content_row",children:[(0,Q.jsx)(X.View,{className:"crs_block_bd_item_content_dot"}),(0,Q.jsx)(X.Text,{className:"crs_block_bd_item_content",children:e})]})}))})]})]})]})]})}))]})]})]})}))),xe=ye,be={Title:"key.couponcenter.receivedetailspage.title",Claim:"key.couponcenter.popup.claimall",Received:"key.couponcenter.common.receivestatus_received",Claimed:"key.couponcenter.popup.claimed",ToUse:"key.couponcenter.popup.touse",UseDesc:"key.couponcenter.common.termsandconditions",DetailDesc:"key.couponcenter.common.details",CurrencyAmount:"key.couponcenter.common.currencyamount_tiers",CurrencyAmount_two:"key.couponcenter.common.percentage_tiers",Robbed:"key.couponcenter.popup.outofstock",NowDisdount:"key.couponcenter.common.currencyamount_off",claimFailed:"key.couponcenter.popup.failurenotice",claimSuccess:"key.couponcenter.popup.successnotice",timeZoneDesc:"key.couponcenter.common.validitytimezone",promoCode:"key.couponcenter.common.promocode",validityDate:"key.couponcenter.common.validity",receive:"key.couponcenter.common.receive",noContent:"key.couponcenter.receivedetailspage.usablecodes_prompt",subTitle:"key.couponcenter.receivedetailspage.usablecodes_subtitle",claimTitle:"key.couponcenter.receivedetailspage.receivablecodes_title",useTitle:"key.couponcenter.receivedetailspage.usablecodes_title",nullError:"key.couponcenter.popup.failurenotice.nullerror",newuseronly:"key.couponcenter.common.receivestatus_newuseronly",errortoast:"key.couponcenter.common.errortoast.common",detailsrealnameconfirm:"key.couponcenter.receivedetailspage.realnameconfirm",detailsrealnameconfirmgiveup:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",detailsrealnameconfirmauth:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",detailsrealnameclaimfail:"key.couponcenter.receivedetailspage.claimfailure.realname",popuprealnameconfirm:"key.couponcenter.receivepopup.realnameconfirm",popuprealnameconfirmgiveup:"key.couponcenter.receivepopup.realnameconfirm.giveup"},ke=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var i,a,s,l;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(0,r.Z)((0,r.Z)({},n),{},{api:c.o.bl.SERVER_TIME,variables:{utcOffset:t}}),e.prev=1,e.next=4,_(i);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return a=e.t0,s=a.serverTime,l=void 0===s?"":s,e.abrupt("return",l);case 13:e.prev=13,e.t1=e["catch"](1),n.logTrace&&n.logTrace("getServerTime Error",{utcOffset:t,bffCommonRequestBody:n,error:JSON.stringify(e.t1)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}();function we(e){var t=e.data,n=e.compVersion,i=e.componentType,l=e.fetch,u=e.auth,d=e.env,p=void 0===d?s.vw.Prod:d,f=e.client,h=e.logTrace,m=e.logUbtDevTrace,v=e.ensureUbtHasAttached,g=e.showToast,y=e.userLogin,x=e.couponOnShow,b=e.couponOnHide,k=e.Storage,w=e.traceLogId,Z=e.logMetric,C=e.onDialogVisiableChange,N=e.floatingIconSetting,j=e.onClaim,R=e.ABTestId,L=e.alertStatusCallBack,E=e.userRealNameAuth,V=e.getUserRealNameResult,A=e.needCleanStorage,O=t.saleChannel,F=t.clientId,M=t.pageId,B=t.sceneId,U=t.resSlotData,H=t.locale,z=t.filters,q=void 0===z?[]:z,K=t.miniType,W=t.shownewuserpromo,X="zh-CN"==H?s.Yw.CTRIP:s.Yw.TRIP,Y=(0,I.useState)(!1),Q=(0,G.Z)(Y,2),J=Q[0],$=Q[1],ee=(0,I.useState)(!1),te=(0,G.Z)(ee,2),ne=te[0],ie=te[1],oe=(0,I.useState)(!1),re=(0,G.Z)(oe,2),ae=re[0],se=re[1],le=(0,I.useState)(!1),ce=(0,G.Z)(le,2),ue=ce[0],de=ce[1],pe=(0,I.useState)(0),fe=(0,G.Z)(pe,2),he=fe[0],me=fe[1],_e=(0,I.useState)("Cannot participate"),ve=(0,G.Z)(_e,2),ge=ve[0],ye=ve[1],xe=(0,I.useState)([]),we=(0,G.Z)(xe,2),Ie=we[0],Ze=we[1],Te=(0,I.useState)([]),Se=(0,G.Z)(Te,2),Ce=Se[0],Pe=Se[1],Ne=(0,I.useState)([]),De=(0,G.Z)(Ne,2),je=De[0],Re=De[1],Le=(0,I.useState)({}),Ee=(0,G.Z)(Le,2),Ve=Ee[0],Ae=Ee[1],Oe=(0,I.useState)({}),Fe=(0,G.Z)(Oe,2),Me=Fe[0],Be=Fe[1],Ue=(0,I.useMemo)((function(){return P()}),[]),Ge=(0,I.useRef)(null),He=(0,I.useRef)(null),ze=(0,I.useRef)(null),qe=(0,I.useRef)({}),Ke=(0,I.useRef)(!1),We=(0,I.useRef)(null).current,Xe=(0,I.useRef)({});(0,I.useEffect)((function(){"iconStyle"in e&&console.error("the argument iconStyle has been abandoned , please replace it with floatingIconSetting. ")}),[]),(0,I.useEffect)((function(){!D(Me)&&V&&V(null,et)}),[Me]);var Ye=(0,I.useMemo)((function(){return{env:p,client:f,fetch:l,auth:u,logTrace:h,logUbtDevTrace:m,logMetric:Z,ctType:X,cid:F}}),[e,X]),Qe=(0,I.useMemo)((function(){return{pageId:M,componentId:c.o.CE.POPCOUPON.id,componentName:c.o.CE.POPCOUPON.name,componentVersion:n,ubtSourceKey:"coupon"}}),[]);function Je(){return function(){console.log("Login Success"),jt(null,(function(e){var t=e.canReceiveCoupon,n=e.displayCoupons;if(_t(n,t,Xe.current),0===n.length&&g&&g({className:"coupon_toast",content:Me[be.nullError]||"Your account is not currently eligible to claim promo codes. Thanks for your interest in this promotion!",duration:1500,needMask:!1,type:"failed"}),t&&t.length>0){var i=t.map((function(e){return e.promotionSecretId}));Vt(i||[],!0)}}))}}(0,I.useEffect)((function(){return v&&v(M.toString(),f),gt(),St(),function(){Ge.current&&clearTimeout(Ge.current),He.current&&clearTimeout(He.current),ze.current&&clearTimeout(ze.current),C&&C(!1)}}),[JSON.stringify(e.data)]),(0,I.useEffect)((function(){C&&C(ne),ne?(x&&x(),Ft(c.o.NG.POPUP_EXPOSURE)):b&&b()}),[ne]);var $e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("RealName Success"),jt(null,(function(e){var t=e.canReceiveCoupon,n=e.displayCoupons;if(_t(n,t,Xe.current),t&&t.length>0){var i=t.map((function(e){return e.promotionSecretId}));Vt(i||[],!0)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Me[be.detailsrealnameclaimfail];g({className:"coupon_toast",content:e,duration:1500,needMask:!1,type:"failed"})},tt=function(){1===he?Ft(c.o.NG.REALNAME_POPUPALL_VERIFY_CLICK):2===he&&Ft(c.o.NG.REALNAME_POPUPSOME_VERIFY_CLICK),de(!1),A&&(We=new k(M,Ve.sceneCode),We.remove&&We.remove()),E(p,$e,et)},nt=function(){if(de(!1),1===he)Ft(c.o.NG.REALNAME_POPUPALL_REFUSE_CLICK);else if(2===he&&(Ft(c.o.NG.REALNAME_POPUPSOME_REFUSE_CLICK),je&&je.length>0)){var e=je.map((function(e){return e.promotionSecretId}));Vt(e||[],!0)}};function it(e){return ot.apply(this,arguments)}function ot(){return ot=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,s,l,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(n=We)||void 0===n?void 0:n.get();case 2:i=e.sent,r=i||{},a=r.popCount,s=void 0===a?0:a,l=r.lastTime,u={storage:{interval:t.interval,maxNumber:t.maxNumber,prePopCount:s,lastTime:l}},Ft(c.o.NG.POPUP_LOAD,u);case 6:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function rt(e){We=new k(M,"".concat(e.sceneCode,"_FloatIcon"));var t=(new Date).getTime(),n={lastTime:t};We.set(n),$(!1)}function at(e){return st.apply(this,arguments)}function st(){return st=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,s;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return We=new k(M,"".concat(t.sceneCode,"_FloatIcon")),e.next=3,We.get();case 3:if(n=e.sent,i=(new Date).getTime(),r=n.lastTime,!Object.keys(n)||Object.prototype.hasOwnProperty.call(n,"lastTime")){e.next=10;break}return e.abrupt("return",!0);case 10:return a=864e5,s=r+a,e.abrupt("return",s<=i);case 13:case"end":return e.stop()}}),e)}))),st.apply(this,arguments)}function lt(e,t,n){return ct.apply(this,arguments)}function ct(){return ct=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s,l,c,u,d,p,f,h,m,_,v,g;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return We=new k(M,i.sceneCode),e.next=3,We.get();case 3:if(r=e.sent,a=i.interval,s=i.maxNumber,l=void 0===s?1:s,c=(new Date).getTime(),u=r||{},d=u.popCount,p=void 0===d?0:d,f=u.lastTime,h=void 0===f?0:f,a=a/l||48,l=1,a<48&&(a=48),!(l<=0||t&&t.length<=0)){e.next=12;break}return e.abrupt("return",!1);case 12:if(!Object.keys(r)||Object.prototype.hasOwnProperty.call(r,"interval")){e.next=22;break}if(m={interval:a,maxNumber:l,lastTime:c,popCount:p+1},!(n.length>0)){e.next=19;break}return We.set(m),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 20:e.next=35;break;case 22:if(_=60*(a||0)*60*1e3,v=h+_,!(v<=c)){e.next=34;break}if(g={interval:a,maxNumber:l,lastTime:c,popCount:p+1},!(n.length>0)){e.next=31;break}return We.set(g),e.abrupt("return",!0);case 31:return e.abrupt("return",!1);case 32:e.next=35;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}function ut(){}function dt(){ae&&null===Ge.current&&(Vt(null,!1),Ge.current=setTimeout((function(){Ge.current=null}),1e3))}function pt(){$(!1),ie(!0)}function ft(){ie(!1),Xe.current.shoudReshowIcon&&$(!0)}function ht(e,t,n){return mt.apply(this,arguments)}function mt(){return mt=(0,a.Z)((0,o.Z)().mark((function t(n,i,r){var a,s,l,u;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=!1,s=!1,t.next=4,lt(n,i,r);case 4:return a=t.sent,a&&R&&(u=(null===e||void 0===e||null===(l=e.getABTest)||void 0===l?void 0:l.call(e))||"A",["A","C","D"].includes(u)&&(a=!1)),L&&L(a),t.next=9,at(r);case 9:s=t.sent,ie(a),a&&Ft(c.o.NG.POPUP_EXPOSURE),null!==r&&void 0!==r&&r.shoudReshowIcon&&n.length>0&&!a&&s?$(!0):$(!1);case 13:case"end":return t.stop()}}),t)}))),mt.apply(this,arguments)}function _t(e,t,n){e.length<=0?(ne&&ie(!1),J&&$(!1)):ne||J||ht(e,t,n)}function vt(e){var t=[],n=[],i=[],o=[],r=[],a=[],s=[],l=[],c=[],u=[];return(e||[]).forEach((function(e){1===e.promotionStatus?2!=e.activityStatus&&e.activityStatus?1==e.activityStatus?o.push(e):3==e.activityStatus&&r.push(e):(e.requireRealName?n.push(e):i.push(e),t.push(e)):2===e.promotionStatus?a.push(e):3===e.promotionStatus?s.push(e):4===e.promotionStatus?l.push(e):7===e.promotionStatus&&c.push(e)})),u=e.filter((function(e){return[1,2,3,4,7].includes(e.promotionStatus)}))||[],{canReceiveCoupon:t,displayCoupons:u,canReceiveNeedRealNameCoupon:n,canReceiveNoNeedRealNameCoupon:i}}function gt(){return yt.apply(this,arguments)}function yt(){return yt=(0,a.Z)((0,o.Z)().mark((function t(){var n,i,a,s,l,c,u,d,p,f,h,m,_,v,g,y,x,b;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasError){t.next=2;break}return t.abrupt("return");case 2:if(n="",!B){t.next=14;break}return t.next=6,Pt();case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:a=t.t0,n=a.sceneCode,i=a,t.next=15;break;case 14:U&&U.sceneCode&&(n=U.sceneCode,i=JSON.parse(JSON.stringify(U)));case 15:if(s=N||{},l=s.style,c=s.canDrag,u=void 0===c?!!i.draggable:c,i.draggable=u,i.iconStyle=(0,r.Z)((0,r.Z)({},i.initPosition?i.iconStyle:{}),l),"boolean"===typeof W&&(i.showNewCoupons=W?"1":"0"),Ae(i),Xe.current=i,!n){t.next=34;break}return t.next=24,jt(i);case 24:p=t.sent,f=p.receivePromotionData,h=p.serverTime,m=(null===(d=f.list[0])||void 0===d?void 0:d.promotionList)||[],_=f.nextAvailableTime||"",v=vt(m),g=v.canReceiveCoupon,y=void 0===g?[]:g,x=v.displayCoupons,b=void 0===x?[]:x,Ke.current?_t(b,y,i):(Ke.current=!0,ht(b,y,i)),xt(_,h),Zt(h),it(i);case 34:case"end":return t.stop()}}),t)}))),yt.apply(this,arguments)}function xt(e,t){return bt.apply(this,arguments)}function bt(){return bt=(0,a.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:He.current=T(n,t,kt,(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wt();case 2:t=e.sent,n=t.nextTime,i=t.currentTime,xt(n,i);case 6:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)}))),bt.apply(this,arguments)}function kt(){ye(qe.current[be.Claim]||"Claim"),se(!0)}function wt(){return It.apply(this,arguments)}function It(){return It=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,r;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jt(Xe.current,null,!0);case 2:return t=e.sent,n=t.receivePromotionData,i=t.serverTime,r=n.nextAvailableTime||"",e.abrupt("return",{nextTime:r,currentTime:i});case 7:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function Zt(e){return Tt.apply(this,arguments)}function Tt(){return Tt=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,ke(Ue.offset,Ye);case 4:e.t0=e.sent;case 5:t=e.t0,n=S(parseInt(t)),ze.current=setTimeout(wt,n);case 8:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}function St(){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,a,s;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sharkLocale:H,baseInfo:Dt()},n=(0,r.Z)((0,r.Z)({},Ye),{},{api:c.o.bl.SHARK,variables:t,componentInfo:Qe,traceLogId:w}),e.prev=2,e.next=5,_(n);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:i=e.t0,a=i.data,s=void 0===a?{}:a,Be(s),qe.current=s,e.next=18;break;case 15:e.prev=15,e.t1=e["catch"](2),Ot(e.t1);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),Ct.apply(this,arguments)}function Pt(){return Nt.apply(this,arguments)}function Nt(){return Nt=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,a,s;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return",{});case 2:return t={parameters:{sceneId:B,saleChannel:O},baseInfo:Dt()},n=(0,r.Z)((0,r.Z)({},Ye),{},{api:c.o.bl.SCENE_CONFIG,variables:t,componentInfo:Qe,traceLogId:w}),e.prev=4,e.next=7,_(n);case 7:if(i=e.sent,a=i.data,s=i.typename,!a||s==c.o.k5){e.next=12;break}return e.abrupt("return",a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),Ot(e.t0);case 17:return e.abrupt("return",{});case 18:case"end":return e.stop()}}),e,null,[[4,14]])}))),Nt.apply(this,arguments)}var Dt=function(){return{channelId:t.saleChannel,clientId:t.clientId,allianceId:t.allianceId,siteId:t.siteId,source:t.source,utcOffset:Ue.offset,locale:t.locale,currency:t.currency,miniType:K,outOpenId:t.outOpenId,requestScene:s.NT.PopClaim,version:n,componentType:i}};function jt(e,t,n){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s,l,c,u,d,p,f,h,m,_,v,g;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Lt(Xe.current);case 2:return a=e.sent,s=a.receivePromotionData,l=(null===(r=s.list[0])||void 0===r?void 0:r.promotionList)||[],c=vt(l),u=c.canReceiveCoupon,d=void 0===u?[]:u,p=c.displayCoupons,f=void 0===p?[]:p,h=c.canReceiveNeedRealNameCoupon,m=void 0===h?[]:h,_=c.canReceiveNoNeedRealNameCoupon,v=void 0===_?[]:_,g=0,d.length===m.length&&0!==d.length?g=1:d.length>m.length&&m.length>0&&(g=2),me(g),Re(v),ye(s.claimAllButtonText),se(!s.disableClaimAllButton),!i&&Ze(f),Pe(d),n&&n({canReceiveCoupon:d,displayCoupons:f}),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function Lt(e){return Et.apply(this,arguments)}function Et(){return Et=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,s,l,u,d,p,f,h,m,v,g,y,x,b,k,I,Z;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t||{},i=n.sceneCode,a=void 0===i?Xe.current.sceneCode:i,s=n.showNewCoupons,l=void 0===s?"0":s,a){e.next=4;break}if(t.sceneCode){e.next=4;break}return e.abrupt("return");case 4:return u={baseInfo:Dt(),sceneParams:[{sceneCode:a,filterList:q,shownewuserpromo:"1"===l}],utcOffset:Ue.offset},d=(0,r.Z)((0,r.Z)({},Ye),{},{api:c.o.bl.POP_COUPON,variables:u,componentInfo:Qe,traceLogId:w}),e.prev=6,e.next=9,_(d);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return p=e.t0,f=p.list,h=void 0===f?[]:f,m=p.claimAllButtonText,v=void 0===m?"":m,g=p.disableClaimAllButton,y=void 0!==g&&g,x=p.nextAvailableTime,b=void 0===x?"":x,k=p.serverTime,I=void 0===k?"":k,Z={list:h,claimAllButtonText:v,disableClaimAllButton:y,nextAvailableTime:b},e.abrupt("return",{receivePromotionData:Z,serverTime:I});case 27:e.prev=27,e.t1=e["catch"](6),Ot(e.t1);case 30:case"end":return e.stop()}}),e,null,[[6,27]])}))),Et.apply(this,arguments)}function Vt(){return At.apply(this,arguments)}function At(){return At=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,i,a,s,l,u,d,f,h,m=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:[],n=m.length>1?m[1]:void 0,i=[],i=!t||t.length<=0?Ce.map((function(e){return e.promotionSecretId})):t,a={baseInfo:Dt(),promotionSecretIds:i},s=(0,r.Z)((0,r.Z)({},Ye),{},{api:c.o.bl.CLAIM,variables:a,componentInfo:Qe,traceLogId:w}),e.prev=6,e.next=9,_(s);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:l=e.t0,u=l.claimResultList,d=l.typename,f=l.resultStatus,h=u&&u[0],d==c.o.k5?f&&f.code==c.o.rG.AUTH_FAILURE&&(n?g&&g({className:"coupon_toast",content:Me[be.claimFailed]||"Failed to claim, please contact Trip.com customer support",duration:1500,needMask:!1,type:"failed"}):(A&&(We=new k(M,Ve.sceneCode),We.remove&&We.remove()),y(p,Je(),ut))):h&&h.code==c.o.rG.REALNAME_FAILURE?(de(!0),Ft(c.o.NG.REALNAME_DETAIL_EXPO)):(h.success&&jt(),h.showToast&&h.message&&g({className:"coupon_toast",content:h.message,duration:1500,needMask:!1,type:h.toastType||"failed"}),j&&j({success:h.success,promotionId:h.promotionId,couponCode:h.couponCode,promotionSecretId:h.promotionSecretId,code:h.code,message:h.message})),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](6),Ot(e.t1);case 23:case"end":return e.stop()}}),e,null,[[6,20]])}))),At.apply(this,arguments)}function Ot(e){console.error(e),Ft(c.o.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var Ft=(0,I.useCallback)((function(t,n){var i;if(h){var o={compId:Qe.componentName,ttdVer:Qe.componentVersion,sceneCode:(null===Xe||void 0===Xe||null===(i=Xe.current)||void 0===i?void 0:i.sceneCode)||"sceneCode is empty",state:{isShowFloat:J,isShowCouponDialog:ne,isShowReceiveBtn:ae,claimAllButtonText:ge,promotionList:(Ie||[]).map((function(e){return e.promotionId})),slot:Xe},props:(0,r.Z)({},e.data)};try{h({key:t,value:n?(0,r.Z)((0,r.Z)({},n),o):o})}catch(e){console.error(e)}}}),[e]),Mt=(0,I.useCallback)((function(e){Ft(c.o.NG.POP_CLICK,{module:e})}),[]);return{modelState:{isShowFloat:J,isShowCouponDialog:ne,isShowReceiveBtn:ae,promotionList:Ie,slot:Ve,sharkKey:Me,claimAllButtonText:ge,realNameCase:he,canReceiveNoNeedRealNameCoupon:je,showRealNameModal:ue},modelAction:{setShowFloat:$,setShowCouponDialog:ie,setShowReceiveBtn:se,setPromotionList:Ze,setSlot:Ae},ctrl:{handleClickFloatIcon:pt,handleClickCloseFloatIcon:rt,handleClose:ft,claimAllCoupon:dt,loginSuccessCb:Je(),handleTraceClick:Mt,handleRealNameClick:tt,handleRealNameClose:nt}}}var Ie=n(57042),Ze=n(24460),Te="ttd_rn_popcoupon_",Se="ttd_front_marketing",Ce=function(){function e(t,n){(0,Ie.Z)(this,e),(0,l.Z)(this,"key",void 0),(0,l.Z)(this,"storage",void 0),(0,l.Z)(this,"domain",void 0),this.key=Te+t+"_"+n,this.domain=Se}return(0,Ze.Z)(e,[{key:"get",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=z().getStorageSync(this.key),"string"===typeof t)try{t=JSON.parse(t)}catch(e){t={}}return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e["catch"](0),console.log("%c getStorage failed err:",e.t0,"color:red"),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"set",value:function(e){if("string"!==typeof e)try{e=JSON.stringify(e)}catch(e){}z().setStorage({key:this.key,data:e})}},{key:"remove",value:function(){this.set({})}}]),e}(),Pe=Ce,Ne="#3264FF",De="#fff",je="#999",Re="#FFA50A",Le="#eee",Ee=["sharkKey","toUseBtnShow","expanded","changeExpandedCode","handleTraceClick"],Ve=I.useCallback;I.useState,I.useRef,I.useEffect;function Ae(e){var t=e.sharkKey,n=e.toUseBtnShow,i=e.expanded,o=e.changeExpandedCode,r=e.handleTraceClick,a=(0,Y.Z)(e,Ee),s=a.promotionStatus,l=a.jumpUrl,c=a.promotionId,u=a.couponCode,d=a.deductionInfoShown,p=a.couponName,f=a.shortRemark,h=a.useDateShown,m=a.detailRemarkShown,_=a.couponType,v="".concat(2*w(d.amount,!1),"rpx"),g=2==s||3==s?"https://dimg04.c-ctrip.com/images/0AS3q1200087hg3qwC682.png":"",y=Ve((function(e){r("ToUse"),(0,A.tv)(l)}),[l]);return(0,Q.jsxs)(X.View,{className:"couponItem ttd_mk_popcouponcard",children:[(0,Q.jsxs)(X.View,{className:"couponItem_body",children:[(0,Q.jsx)(X.View,{className:"couponItem_body_left",children:d.fullDeduction?(0,Q.jsx)(X.View,{className:"deduction_fullamount",children:d.desc}):(0,Q.jsxs)(X.View,{className:"info_deduction_view_flexBox",children:[(0,Q.jsx)(X.View,{className:"deduction_part1",children:d.desc}),4==d.type?(0,Q.jsx)(X.View,{className:"deduction_part2",children:d.desc}):(0,Q.jsxs)(X.View,{className:"deduction_part2",children:[(0,Q.jsx)(X.View,{className:"deduction_amount",style:{fontSize:v},children:d.amount}),(0,Q.jsx)(X.View,{className:"deduction_discountUnit",children:d.discountUnit})]})]})}),(0,Q.jsxs)(X.View,{className:"couponItem_body_right",children:[(0,Q.jsxs)(X.View,{className:"couponItem_body_right_top",children:[(0,Q.jsx)(X.View,{className:"couponName",children:p}),(0,Q.jsx)(X.View,{className:"couponDesc",children:f}),(0,Q.jsx)(X.View,{className:"couponUseDate",children:h})]}),(0,Q.jsxs)(X.View,{className:"couponItem_body_right_bottom",onClick:function(){o(c)},children:["".concat(t[be.DetailDesc]||"\u8be6\u60c5\u8bf4\u660e"),i?(0,Q.jsx)(X.View,{className:"arrow",children:"\ue946"}):(0,Q.jsx)(X.View,{className:"arrow",children:"\ue945"})]}),!!g&&(0,Q.jsx)(X.View,{className:"stamp_img",children:(0,Q.jsx)(X.Image,{src:g,className:"stamp_img_img",mode:"scaleToFill"})}),2==s&&n&&!!l&&(0,Q.jsx)(X.View,{className:"toUseBtn",onClick:y,children:"".concat(t[be.ToUse]||"\u53bb\u4f7f\u7528")}),7==s&&(0,Q.jsx)(X.View,{className:"toUseBtn",style:{backgroundColor:"#eeeeee",borderColor:"#eeeeee",color:"#999999"},children:"".concat(t[be.newuseronly]||"\u65b0\u5ba2\u4e13\u4eab")}),4==s&&(0,Q.jsx)(X.View,{className:"toUseBtn",style:{backgroundColor:"#eeeeee",borderColor:"#eeeeee",color:"#999999"},children:"".concat(t[be.Robbed]||"\u5df2\u62a2\u5149")})]})]}),(0,Q.jsxs)(X.View,{className:"cardDetail ".concat(i?"":"hidden"),children:[(0,A.yo)(d.deductionList||[],2).map((function(e,t){return(0,Q.jsx)(X.View,{className:"detail_deduction_list",children:(e||[]).map((function(e,t){return(0,Q.jsx)(X.View,{className:"detail_deduction_item",children:e},"deduction_item"+t)}))},"deduction_list"+t)})),!!m&&m.length>0&&(0,Q.jsx)(X.View,{className:"detail_remark",children:(m||[]).map((function(e,t){return(0,Q.jsxs)(X.View,{className:"detail_remark_list",children:[(0,Q.jsx)(X.View,{className:"circlePointer"}),e]},"remark_list"+t)}))}),1==_&&(0,Q.jsx)(X.View,{className:"detail_remark_code",children:"".concat(t[be.promoCode]||"\u4f18\u60e0\u5238\u7801","\uff1a").concat(u)})]})]})}var Oe=Ae,Fe=I.useMemo,Me=I.useCallback,Be=I.useState,Ue=I.forwardRef((function(e,t){e.data.locale;var n=Fe((function(){return P()}),[]),i=we((0,r.Z)((0,r.Z)({},e),{},{env:(0,A.qL)(),client:s.AH.MiniProgram,compVersion:A.Ke,componentType:s.Lm.Taro,miniType:(0,A.H9)(),showToast:function(e){z().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:A.qn,logMetric:A.HR,logUbtDevTrace:A.q6,fetch:A.jJ,auth:A.Y8&&A.Y8.user.auth||(0,A.v0)(),userLogin:A.Sx,Storage:Pe,onDialogVisiableChange:function(e){},userRealNameAuth:A.RO})),o=i.modelState,a=o.isShowFloat,l=o.isShowCouponDialog,c=o.isShowReceiveBtn,u=o.promotionList,d=o.slot,p=o.sharkKey,f=o.claimAllButtonText,h=o.realNameCase,m=o.showRealNameModal,_=(i.modelAction,i.ctrl),v=_.handleClickFloatIcon,g=_.handleClickCloseFloatIcon,y=_.handleClose,x=_.claimAllCoupon,b=(_.loginSuccessCb,_.handleTraceClick),w=_.handleRealNameClick,I=_.handleRealNameClose,Z=Be(0),T=(0,G.Z)(Z,2),S=T[0],C=T[1],N=d.toUseButton,D=Fe((function(){var e=-480!==n.offset?115:105;switch(u.length){case 1:return e;case 2:return 215;default:return 267}}),[u,n]),j=Me((function(e){C(S!=e?e:0)}),[S]),R=Me((function(){var e=d.clickLink,t=void 0===e?[]:e,n=t.find((function(e){return"clickLinkNative"===e.key||"clickLinkHttp"===e.key||"clickLinkHybrid"===e.key})),i=n&&n.value||"";(0,A.tv)(i)}),[d]),L=Fe((function(){var t;return(0,Q.jsxs)(X.View,{className:"float_icon ".concat(a?"":"hidden"),style:k(null===(t=e.floatingIconSetting)||void 0===t?void 0:t.style),children:[!!d.hoverIconImage&&(0,Q.jsx)(X.Image,{onClick:function(e){g(d)},className:"closeIconImg",src:"https://dimg04.c-ctrip.com/images/0306m12000aq6hzuf7EA5.png",mode:"widthFix"}),!!d.hoverIconImage&&(0,Q.jsx)(X.Image,{onClick:function(e){v(),b("FloatingIcon")},className:"iconImg",src:d.hoverIconImage,mode:"widthFix"})]})}),[a,d]),E=(0,Q.jsxs)(X.View,{className:"mainBody ".concat(l?"":"hidden"),children:[(0,Q.jsx)(X.View,{className:"mainBody_mask",onClick:function(){y()}}),(0,Q.jsxs)(X.View,{className:"mainBody_couponLayer",children:[!!d.headImage&&(0,Q.jsx)(X.View,{className:"mainBody_couponLayer_headerImg",children:(0,Q.jsx)(X.Image,{className:"mainBody_couponLayer_headerImg",src:d.headImage})}),-480!==n.offset&&(0,Q.jsx)(X.View,{className:"timeZone",children:"".concat((p[be.timeZoneDesc]||"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT $(0)").replace(/\$\(\d+\)/gi,n.desc))}),(0,Q.jsxs)(X.ScrollView,{className:"mainBody_couponLayer_scrollBody",style:{backgroundColor:Ne,height:D},enableFlex:!0,scrollY:!0,scrollWithAnimation:!0,children:[!!d.couponBgImage&&(0,Q.jsx)(X.Image,{className:"mainBody_couponLayer_scrollBody_img",src:d.couponBgImage,mode:"scaleToFill"}),(0,Q.jsxs)(X.View,{className:"coupon_scrollView",children:[(0,Q.jsx)(X.View,{style:{width:"100%",height:-480!==n.offset?"16rpx":0}}),(u||[]).map((function(e){return(0,Q.jsx)(Oe,(0,r.Z)((0,r.Z)({},e),{},{expanded:e.promotionId==S,changeExpandedCode:j,toUseBtnShow:N,sharkKey:p,handleTraceClick:b}),e.promotionId)}))]})]}),(0,Q.jsxs)(X.View,{className:"mainBody_couponLayer_scrollBody_receiveBtn",style:{backgroundColor:Ne},children:[!!d.collectionImage&&(0,Q.jsx)(X.Image,{className:"mainBody_couponLayer_scrollBody_receiveBtn_img",src:d.collectionImage,mode:"scaleToFill"}),(0,Q.jsx)(X.View,{className:"mainBody_couponLayer_scrollBody_receiveBtn_button",style:{color:c?d.collectionColor||De:je,backgroundColor:c?d.collectionBackgroundColor||Re:Le},onClick:function(e){x(),b("OneKeyClaim")},children:"".concat(f)})]}),!!d.bannerImage&&(0,Q.jsx)(X.View,{className:"adBanner",onClick:function(e){R(),b("Banner")},children:(0,Q.jsx)(X.Image,{className:"adBanner_img",src:d.bannerImage,mode:"scaleToFill"})}),(0,Q.jsx)(X.View,{className:"close_icon_box",onClick:function(e){y(),b("CloseByX")},children:(0,Q.jsx)(X.View,{className:"close_icon"})})]}),m&&(0,Q.jsx)(ce,{visible:m,content:1===h?p[be.detailsrealnameconfirm]:p[be.popuprealnameconfirm],okText:p[be.detailsrealnameconfirmauth],cancelText:1===h?p[be.detailsrealnameconfirmgiveup]:p[be.popuprealnameconfirmgiveup],handleOK:w,handleCancel:I})]});return(0,Q.jsxs)(X.View,{children:[L&&L,E&&E]})})),Ge=Ue,He=n(81876),ze=n(21867),qe=n(86066);function Ke(e){var t,n,i=e.compVersion,l=e.componentType,u=e.visible,d=e.notUseCoupon,p=e.initCouponCode,f=e.data,h=e.showToast,m=e.logTrace,v=e.logUbtDevTrace,g=e.ensureUbtHasAttached,y=e.fetch,x=e.clientEnv,b=e.traceLogId,k=e.firstDidAmount,w=e.logMetric,Z=e.miniType,T=e.auth,S=(e.kmInfo,e.timeout),C=e.onVisibleChange,N=e.onSelect,D=e.onAutoClaim,j=e.onError;null===(t=f.bookingInfo)||void 0===t||null===(t=t.priceCalendar)||void 0===t||t.forEach((function(e){e.price=String(e.price)})),null===(n=f.bookingInfo)||void 0===n||null===(n=n.resourceList)||void 0===n||n.forEach((function(e){e.price=String(e.price)})),console.log("%c \ud83c\udf48 props: ","font-size:20px;background-color: #465975;color:#fff;",e);var R=(0,I.useState)(u),L=(0,G.Z)(R,2),E=L[0],V=L[1],A=(0,I.useState)(d),O=(0,G.Z)(A,2),F=O[0],M=O[1],B=(0,I.useState)(),U=(0,G.Z)(B,2),H=U[0],z=U[1],q=(0,I.useState)(""),K=(0,G.Z)(q,2),W=K[0],X=K[1],Y=(0,I.useState)({}),Q=(0,G.Z)(Y,2),J=Q[0],$=Q[1],ee=(0,I.useState)([]),te=(0,G.Z)(ee,2),ne=te[0],ie=te[1],oe=(0,I.useState)(p),re=(0,G.Z)(oe,2),ae=re[0],se=re[1],le=(0,I.useState)(null),ce=(0,G.Z)(le,2),ue=ce[0],de=ce[1],pe=(0,I.useState)(!1),fe=(0,G.Z)(pe,2),he=fe[0],me=fe[1],_e=(0,I.useState)(),ve=(0,G.Z)(_e,2),ge=ve[0],ye=ve[1],xe=(0,I.useState)(!1),ke=(0,G.Z)(xe,2),we=ke[0],Ie=ke[1],Ze=(0,I.useMemo)((function(){return P()}),[]),Te=(0,I.useMemo)((function(){return{pageId:f.pageId,componentId:c.o.CE.ORDER_USE_COUPON.id,componentName:c.o.CE.ORDER_USE_COUPON.name,componentVersion:i,ubtSourceKey:c.o.sH[f.source]}}),[]),Se=[s._1.Offline,s.Gi.Offline].includes(f.saleChannel);function Ce(e,t){qe(c.o.NG.CLICK,{module:e,strategyid:t})}(0,I.useImperativeHandle)(e.ref,(function(){return{show:function(){V(!0),qe(c.o.NG.USECOUPON_INVOKE_SHOW)},hide:function(){V(!1),qe(c.o.NG.USECOUPON_INVOKE_HIDE)}}})),(0,I.useEffect)((function(){return k&&k(),g&&g(f.pageId,x.clientType),function(){C&&C(!1)}}),[]),(0,I.useEffect)((function(){Ne()}),[JSON.stringify(e.data),e.hasError]),(0,I.useEffect)((function(){He()}),[f.locale]),(0,I.useEffect)((function(){d&&!F&&(M(!0),se(null))}),[d]),(0,I.useEffect)((function(){V(u)}),[u]),(0,I.useEffect)((function(){E&&qe(c.o.NG.EXPOSURE),C&&C(E)}),[E]);var Pe=(0,I.useMemo)((function(){return{env:x.env,client:x.clientType,fetch:y,logTrace:m,logUbtDevTrace:v,logMetric:w,isOffline:Se,ctType:x.ctType,auth:T,cid:f.clientId}}),[e]);function Ne(){return De.apply(this,arguments)}function De(){return De=(0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=new Promise((function(e,t){setTimeout((function(){t(new Error(s.De.TIMEOUT))}),S||c.o.MY)})),n=je(),Promise.race([t,n]).catch((function(e){j&&j({name:e.name,errorCode:e.message,errorStack:(new Error).stack})}));case 3:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}function je(){return Re.apply(this,arguments)}function Re(){return Re=(0,a.Z)((0,o.Z)().mark((function t(){var n,i,a,l,u,h,m,v,g,y,x,k,w,I,Z,T;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasError){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,a=null===(n=f.extendInfoList)||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return{key:t,value:String(n)}})),l={baseInfo:Oe(),bookingInfo:f.bookingInfo,isFirstValidate:!1,extendInfoList:a},u=(0,r.Z)((0,r.Z)({},Pe),{},{api:c.o.bl.USE_COUPON,variables:l,componentInfo:Te,traceLogId:b}),t.next=8,_(u);case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={};case 11:if(h=t.t0,m=h.autoClaimResult,v=h.list,g="true"===(null===a||void 0===a||null===(i=a.find((function(e){return e.key="needAutoReceive"})))||void 0===i?void 0:i.value),g&&"function"==typeof D&&m&&(y={success:m.success,message:m.message,svcErroCode:m.svcErroCode,svcErrorMessage:m.svcErrorMessage},x=(v||[]).find((function(e){return e.couponCode==m.couponCode})),x&&Object.assign(y,{claimedInfo:{promotionSecretId:m.promotionSecretId,couponCode:x.couponCode,promotionId:x.promotionId,couponName:x.couponName,deductionStrategyType:x.deductionStrategyType,deductionList:x.deductionList,deductionAmount:x.deductionAmount,matchedQuantity:x.matchedQuantity,promotionLabel:x.promotionLabel,extendInfo:x.extendInfo}}),D&&D(y)),k=v||[],ie(k||[]),!d&&!F){t.next=24;break}return t.next=21,Ke(null,k,s.GD.NotUse,H);case 21:return w=t.sent,w&&!F&&(M(!0),se(null)),t.abrupt("return");case 24:if(!p){t.next=45;break}if(H!=s.so.Default){t.next=29;break}Le((k||[]).filter((function(e){return e.status}))),t.next=43;break;case 29:return t.next=31,Ue(p);case 31:if(I=t.sent,I&&I.available){t.next=39;break}return t.next=35,Ke(null,k,s.GD.NotAvailable,H);case 35:Z=t.sent,Z&&se(null),t.next=43;break;case 39:return t.next=41,Ke(I.couponInfo,k,s.GD.Use,H);case 41:T=t.sent,T&&se(p);case 43:t.next=46;break;case 45:Le((k||[]).filter((function(e){return e.status})));case 46:qe(c.o.NG.USECOUPON_LOAD),t.next=52;break;case 49:t.prev=49,t.t1=t["catch"](2),ze(t.t1);case 52:case"end":return t.stop()}}),t,null,[[2,49]])}))),Re.apply(this,arguments)}function Le(e){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,l,u=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:0,!(n>c.o.o7||n+1>t.length)){e.next=5;break}i=null,e.next=17;break;case 5:return r=t[n],e.next=8,Ue(r.couponCode);case 8:if(a=e.sent,!a.available){e.next=13;break}i=r,e.next=17;break;case 13:if(qe(c.o.NG.USECOUPN_BESTSELECT_VALIDATEFAIL,{promotionId:r.promotionId,couponCode:r.couponCode}),!(n<c.o.o7)){e.next=17;break}return Le(t,++n),e.abrupt("return");case 17:return e.next=19,Ke(i,t,i?s.GD.Use:s.GD.NotUse,s.so.Default);case 19:l=e.sent,l&&(z(s.so.Default),se((i||{}).couponCode));case 21:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Ve(e,t){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,a.Z)((0,o.Z)().mark((function e(t,n){var i,r,a,l=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(l.length>2&&void 0!==l[2])||l[2],null!=t&&void 0!=t&&""!=t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,Ce("CodeUse"),e.next=7,Ue(t);case 7:if(r=e.sent,r.available){e.next=11;break}return E&&(n==s.AH.PC?(Ie(!0),ye(r)):h&&h({className:"coupon_toast",content:r.notAvailableMessage,duration:1500,needMask:!1,type:"failed"})),e.abrupt("return");case 11:return e.next=13,Ke(r.couponInfo,ne,s.GD.Use,s.so.UserInput);case 13:a=e.sent,a&&(X(""),M(!1),se(t),z(s.so.UserInput),i&&Be()),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),ze(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])}))),Ae.apply(this,arguments)}var Oe=(0,I.useCallback)((function(){return{channelId:f.saleChannel,allianceId:f.allianceId,siteId:f.siteId,clientId:f.clientId,source:f.source,utcOffset:Ze.offset,locale:f.locale,currency:f.currency,outOpenId:f.outOpenId,uid:Se?f.uid:"",rmsToken:f.rmsToken,requestScene:s.NT.OrderUse,version:i,componentType:l,miniType:Z}}),[e.data]);function Fe(e,t){return Me.apply(this,arguments)}function Me(){return Me=(0,a.Z)((0,o.Z)().mark((function e(t,n){var i,r,a,l=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(l.length>2&&void 0!==l[2])||l[2],e.prev=1,r=!0,!n){e.next=13;break}if(!F){e.next=7;break}return i&&Be(),e.abrupt("return");case 7:return e.next=9,Ke(null,ne,s.GD.NotUse,s.so.UserSelect);case 9:r=e.sent,r&&(M(!0),se(""),z(s.so.UserSelect),setTimeout((function(){i&&Be()}),0)),e.next=26;break;case 13:if(!t){e.next=26;break}if(t!=ae){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Ue(t);case 18:if(a=e.sent,!E||a.available){e.next=22;break}return h&&h({className:"coupon_toast",content:a.notAvailableMessage,duration:1500,needMask:!1,type:"failed"}),e.abrupt("return");case 22:return e.next=24,Ke(a.couponInfo,ne,s.GD.Use,s.so.UserSelect);case 24:r=e.sent,r&&(se(t),M(!1),z(s.so.UserSelect),setTimeout((function(){i&&Be()}),0));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](1),ze(e.t0);case 31:case"end":return e.stop()}}),e,null,[[1,28]])}))),Me.apply(this,arguments)}function Be(){de(null),void 0!==E&&V(!1),e.onClose&&e.onClose(),qe(c.o.NG.USECOUPON_CLOSE)}function Ue(e){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,s,l,u,d,p,h,m;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=f.bookingInfo.shoppingId,a=null===(n=f.extendInfoList)||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return{key:t,value:String(n)}})),s=t,"{}"==JSON.stringify(s)&&(s=null),l={baseInfo:Oe(),validateInfo:{couponCode:s,shoppingId:i,bookingInfo:f.bookingInfo,extendInfoList:a,needVerifyRealName:!1}},u=(0,r.Z)((0,r.Z)({},Pe),{},{api:c.o.bl.VALIDATE,variables:l,componentInfo:Te,traceLogId:b}),e.next=8,_(u);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={validateCoupon:{}};case 11:return d=e.t0,p=d.couponInfo,h=d.resultStatus,m=h&&h.success&&0==h.errorCode,e.abrupt("return",{couponInfo:p,available:m,notAvailableMessage:h&&h.customerErrorMessage});case 16:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}var He=(0,I.useCallback)((0,a.Z)((0,o.Z)().mark((function t(){var n,i,a,s,l;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={sharkLocale:e.data.locale,baseInfo:Oe()},i=(0,r.Z)((0,r.Z)({},Pe),{},{api:c.o.bl.SHARK,variables:n,componentInfo:Te,traceLogId:b}),t.prev=2,t.next=5,_(i);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0={};case 8:a=t.t0,s=a.data,l=void 0===s?{}:s,$(l),t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](2),ze(t.t1);case 17:case"end":return t.stop()}}),t,null,[[2,14]])}))),[e.data.locale,e.clientEnv]);function ze(e){console.error(e),qe(c.o.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}function qe(t,n){if(m)try{var i,o={comptID:Te.componentName,ttdver:Te.componentVersion,productId:null===(i=f.bookingInfo)||void 0===i?void 0:i.productId,pagebu:f.source,state:{notUseCoupon:F,selectedBy:H,couponCodeText:W,selectedCouponCode:ae,expandCode:ue},props:(0,r.Z)((0,r.Z)({},e.data),{},{visible:e.visible,clientEnv:e.clientEnv,initCouponCode:e.initCouponCode,notUseCoupon:e.notUseCoupon})},a={key:t,value:n?(0,r.Z)((0,r.Z)({},n),o):o};m(a)}catch(e){console.error(e)}}function Ke(e,t,n,i){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,a.Z)((0,o.Z)().mark((function e(t,n,i,r){var a,l,u;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=((n||[]).filter((function(e){return e.isTopOne}))||[])[0],l={useStatus:i,selectedBy:null!==r&&void 0!==r?r:s.so.UserSelect,availableCount:(n||[]).filter((function(e){return e.status})).length,couponInfo:t?{promotionId:t.promotionId,couponCode:t.couponCode,couponName:t.couponName,deductionAmount:t.deductionAmount,deductionList:t.deductionList,deductionStrategyType:t.deductionStrategyType,extendInfo:t.extendInfo,matchedQuantity:t.matchedQuantity,promotionLabel:t.promotionLabel,requireRealName:t.requireRealName,receiverName:t.receiverName}:null,isTopOne:!(!t||!a||a.couponCode!=t.couponCode)},qe(c.o.NG.USECOUPON_ONSELECT,{options:l}),e.next=5,N(l);case 5:if(u=e.sent,We(u)||!1!==u.success){e.next=11;break}return h&&E&&h({className:"coupon_toast",content:u.message||J[be.errortoast],duration:1500,needMask:!1,type:"failed"}),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}var Ye={ctrl:{validateCoupon:Ue,handleSelectCoupon:Fe,handleClickUseCoupon:Ve,handleClose:Be,handleTraceClick:Ce},modelState:{notUseCoupon:F,sharkData:J,couponCodeText:W,timezone:Ze,couponList:ne,selectedCouponCode:ae,expandCode:ue,componentInfo:Te,inScrolling:he,validateCodeRst:ge,showValidateMsg:we,visible:E},modelAction:{setInScrolling:me,setNotUseCoupon:M,setCouponCodeText:X,setExpandCode:de,setSelectedCouponCode:se,setShowValidateMsg:Ie}};return Ye}var We=function(e){return null===e||void 0===e},Xe=function(e){(0,ze.Z)(n,e);var t=(0,qe.Z)(n);function n(e){var i;return(0,Ie.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,He.Z)(i),"handleSelect_throttle",void 0),(0,l.Z)((0,He.Z)(i),"imgRef",void 0),(0,l.Z)((0,He.Z)(i),"timer",void 0),i.handleSelect_throttle=function(){i.timer||(i.props.handleSelect(i.props.couponCode,!1,i.props.closeAfterSelect),i.props.handleTraceClick("AvailableCoupon",i.props.promotionId)),i.timer=setTimeout((function(){i.timer=null}),1e3)},i}return(0,Ze.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.groupId,t.positionId,t.couponCode),i=t.couponType,o=t.status,r=t.promotionId,a=t.unavailableReasonShown,s=t.deductionInfoShown,l=(t.deductionAmount,t.detailRemarkShown),c=t.handleExpand,u=t.expanded,d=t.handleTraceClick,p="".concat(2*w(s.amount,!1),"rpx");return(0,Q.jsxs)(X.View,{className:"coupon_block",children:[(0,Q.jsxs)(X.View,{className:"coupon_info ".concat(o?"available":"notAvailable"),children:[(0,Q.jsx)(X.View,{className:"info_deduction",onClick:function(){c(u?null:n),d("Detail",r)},children:s.fullDeduction?(0,Q.jsx)(X.View,{className:"deduction_fullamount",children:s.desc}):(0,Q.jsxs)(X.View,{children:[(0,Q.jsx)(X.View,{className:"deduction_part1 font10px",children:s.desc}),(0,Q.jsx)(X.View,{className:"deduction_part2",children:4==s.type?(0,Q.jsx)("span",{className:"",children:s.desc}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(X.View,{className:"deduction_amount",style:{fontSize:p},children:s.amount}),(0,Q.jsx)(X.View,{className:"deduction_unit",children:s.discountUnit})]})}),o&&s.deductionAmountTag&&(0,Q.jsx)(X.View,{className:"deduction_part3",children:s.deductionAmountTag})]})}),(0,Q.jsxs)(X.View,{className:"info_desc",onClick:function(){c(u?null:n),d("Detail",r)},children:[(0,Q.jsx)(X.View,{className:"desc_name",children:this.props.couponName}),(0,Q.jsxs)(X.View,{className:"desc_middle",children:[(0,Q.jsx)(X.View,{className:"desc_shortremark",style:{width:o?"374rpx":"462rpx"},children:this.props.shortRemark}),!!this.props.useDateShown&&(0,Q.jsx)(X.View,{className:"desc_usedate",children:this.props.useDateShown})]}),(0,Q.jsxs)(X.View,{className:"desc_detail",children:[(0,Q.jsx)(X.View,{className:"font10px",children:"\u8be6\u7ec6\u8bf4\u660e"}),(0,Q.jsx)(X.View,{className:"expandicon",children:this.props.expanded?(0,Q.jsx)(X.Text,{className:"expandicon_text",children:"\ue946"}):(0,Q.jsx)(X.Text,{className:"expandicon_text",children:"\ue945"})})]})]}),!!o&&(0,Q.jsx)(X.View,{className:"desc_select",onClick:function(){return e.handleSelect_throttle()},children:this.props.selected?(0,Q.jsx)(X.View,{className:"coupon_select_icon",children:"\ued1e"}):(0,Q.jsx)(X.View,{className:"coupon_select_icon",children:"\uee35"})})]}),this.props.expanded&&(0,Q.jsxs)(X.View,{className:"coupon_detail_div",children:[s&&s.deductionList&&(0,A.yo)(s.deductionList,2).map((function(e,t){return(0,Q.jsx)(X.View,{className:"detail_deduction_list",children:e.map((function(e,t){return(0,Q.jsx)(X.View,{className:"deduction_info_div",children:(0,Q.jsx)(X.View,{className:"font10px",children:e})},t)}))},t)})),(0,Q.jsx)(X.View,{className:"detail_remark_list",children:(l||[]).map((function(e,t){return(0,Q.jsx)(X.View,{className:"detail_remark_list_text",children:e},t)}))}),1==i&&(0,Q.jsxs)(X.View,{className:"detail_remark_code",children:["\u4f18\u60e0\u5238\u7801\uff1a",n]})]}),!o&&(0,Q.jsxs)(X.View,{className:"coupon_reason_div ".concat(this.props.expanded?"withexpand":""),children:[(0,Q.jsx)(X.View,{className:"icon_info font10px",children:"\uf4d5"}),(0,Q.jsx)(X.View,{className:"reason_list_div",children:(a||[]).map((function(e,t){return(0,Q.jsx)(X.View,{className:"font10px",children:e},t)}))})]})]})}}]),n}(I.PureComponent),Ye=I.useEffect,Qe=I.forwardRef,Je=I.useState,$e=Qe((function(e,t){var n=Je(""),i=(0,G.Z)(n,2),l=i[0],c=i[1],u=Je(!1),d=(0,G.Z)(u,2),p=d[0],f=d[1],h=Je(!1),m=(0,G.Z)(h,2),_=m[0],v=m[1],g=(e.data,e.title),y=void 0===g?"\u9009\u62e9\u4f18\u60e0\u5238":g,x=(e.style,e.clientEnv),b=e.needCodeInput,k=void 0===b||b,w=e.needPopover,I=void 0===w||w,Z=(0,r.Z)((0,r.Z)({},e),{},{clientEnv:(0,r.Z)((0,r.Z)({},x),{},{clientType:s.AH.MiniProgram}),compVersion:A.Ke,componentType:s.Lm.Taro,miniType:(0,A.H9)(),showToast:function(e){z().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:A.qn,logMetric:A.HR,logUbtDevTrace:A.q6,auth:A.Y8&&A.Y8.user.auth||(0,A.v0)(),fetch:A.jJ,ensureUbtHasAttached:null,ref:t,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec useCoupon firstDidAmount","color:yellow"),e.next=3,(0,A.So)();case 3:t=e.sent,t&&t.safeArea&&t.safeArea.top&&t.safeArea.top>20&&(f(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),T=Ke(Z),S=T.modelState,C=T.modelAction,P=T.ctrl,N=S.timezone,D=S.couponList,j=S.selectedCouponCode,R=S.couponCodeText,L=S.expandCode,E=(S.sharkData,S.notUseCoupon),V=S.visible,O=C.setCouponCodeText,F=C.setExpandCode,M=P.handleSelectCoupon,B=P.handleClickUseCoupon,U=P.handleClose,q=P.handleTraceClick,K=D.filter((function(e){return!!e.status})).length;return Ye((function(){V?(c(""),z().nextTick((function(){v(!0)}))):(v(!1),setTimeout((function(){c("displayNone")}),100))}),[V]),(0,H.useDidShow)((function(){})),(0,H.useDidHide)((function(){})),(0,H.usePullDownRefresh)((function(){})),(0,Q.jsxs)(X.View,{className:"ttd-useCoupon ".concat(_?"ttd-marketing-show":"ttd-marketing-hidden"),children:[I&&(0,Q.jsx)(X.View,{className:"ttd-marketing-mask ".concat(l),onClick:U,catchMove:!0}),(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-screen-".concat(I?"dialog":"block"," ").concat(l),catchMove:I,children:[I&&(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-claim-header",children:[(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-close ttd-marketing-icon-close",hoverClass:"ttd-marketing-close-active",onClick:U}),(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-title",children:y}),(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-right"})]}),(0,Q.jsxs)(X.ScrollView,{className:"ttd-marketing-half-claim-body",scrollY:!0,scrollWithAnimation:!0,style:{marginBottom:p?"34rpx":0},children:[k&&(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-useCoupon-inputCode",children:[(0,Q.jsx)(X.Input,{className:"code_text_input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u5238\u7801",value:R,onClick:function(){q("CodeInput")},onInput:function(e){O(e.detail.value)}}),!!R&&(0,Q.jsx)(X.Text,{className:"code_clear_icon",onClick:function(){O("")},children:"\ue003"}),(0,Q.jsx)(X.View,{className:"code_exchange_btn ".concat(R?"active":""),onClick:function(){q("CodeUse"),R&&B(R,e.clientEnv.clientType)},children:"\u4f7f\u7528"})]}),K<=0?(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-useCoupon-noContent",children:[(0,Q.jsx)(X.Image,{className:"noContent-img",src:"https://pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),(0,Q.jsx)(X.View,{className:"empty_text1",children:"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238"}),k&&(0,Q.jsx)(X.View,{className:"empty_text2",children:"\u5982\u679c\u60a8\u6709\u4f18\u60e0\u5238\u7801\uff0c\u53ef\u8f93\u5165\u5e76\u4f7f\u7528\u4f18\u60e0"})]}):-480!=N.offset&&(0,Q.jsx)(X.View,{className:"coupon_timezone",children:"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT+08:00"}),(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-useCoupon-coupon_list",children:[K>0&&(0,Q.jsxs)(X.View,{children:[(0,Q.jsxs)(X.View,{className:"list_availablecount_text",children:["\u53ef\u7528\u4f18\u60e0\u5238\uff08",(0,Q.jsx)(X.Text,{className:"list_availablecount_text_number",children:K}),"\u5f20\uff09"]}),(0,Q.jsxs)(X.View,{className:"coupon_notuse",children:[(0,Q.jsx)(X.View,{className:"coupon_notuse_text",children:"\u4e0d\u4f7f\u7528\u4f18\u60e0\u5238"}),(0,Q.jsx)(X.View,{onClick:function(){M(null,!0,I),q("NotUse")},children:E?(0,Q.jsx)(X.View,{className:"coupon_notuse_btn",children:"\ued1e"}):(0,Q.jsx)(X.View,{className:"coupon_notuse_btn",children:"\uee35"})})]})]}),(D||[]).map((function(e,t){return(0,Q.jsx)(Xe,(0,r.Z)({},(0,r.Z)((0,r.Z)({},e),{},{groupId:e.status?1:2,positionId:e.status?t+1:t-K,selected:!E&&e.couponCode==j,expanded:e.couponCode==L,closeAfterSelect:I,handleSelect:M,handleExpand:F,handleTraceClick:q})),"".concat(e.couponCode,"-").concat(t))}))]})]})]})]})})),et=I.memo($e);function tt(e){var t=e.title,n=void 0===t?"\u9009\u62e9\u4f18\u60e0\u5238":t,i=e.needPopover,o=void 0===i||i,r=(0,I.useState)(e.visible),a=(0,G.Z)(r,2),s=a[0],l=a[1];(0,I.useEffect)((function(){l(e.visible)}),[e.visible]);var c=function(){l(!1),e.onClose&&e.onClose()};return(0,Q.jsxs)(X.View,{className:"ttd-useCoupon ".concat(s?"ttd-marketing-show":"ttd-marketing-hidden"),children:[o&&(0,Q.jsx)(X.View,{className:"ttd-marketing-mask ".concat(s?"":"displayNone"),onClick:c,catchMove:!0}),(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-screen-".concat(o?"dialog":"block"," ").concat(s?"":"displayNone"),catchMove:!0,children:[o&&(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-claim-header",children:[(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-close ttd-marketing-icon-close",hoverClass:"ttd-marketing-close-active",onClick:c}),(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-title",children:n}),(0,Q.jsx)(X.View,{className:"ttd-marketing-half-claim-header-right"})]}),(0,Q.jsxs)(X.View,{className:"ttd-marketing-half-useCoupon-error",children:[(0,Q.jsx)(X.Image,{className:"error-img",src:"https://pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),(0,Q.jsx)(X.View,{className:"error-text1",children:"\u52a0\u8f7d\u672a\u6210\u529f"}),(0,Q.jsx)(X.View,{className:"error-text2",children:"\u5982\u957f\u65f6\u95f4\u672a\u89e3\u51b3\u8bf7\u8054\u7cfb\u643a\u7a0b\u5ba2\u670d"}),(0,Q.jsx)(X.Button,{className:"retry",onClick:e.handleRetry,children:"\u5728\u8bd5\u4e00\u6b21"})]})]})]})}var nt=tt;I.Component},73564:function(e,t,n){"use strict";var i=n(90201);function o(e){var t=(0,i.useRef)(e);t.current=(0,i.useMemo)((function(){return e}),[e]);var n=(0,i.useRef)();return n.current||(n.current=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.current.apply(null,n)}),n.current}t["Z"]=o},36280:function(e,t){"use strict";var n=function(e){var t=e.yShadow,n=e.xShadow,i=e.blur,o=e.spread,r=e.color,a=[];return(n||0==n)&&a.push("".concat(n,"px")),(t||0==t)&&a.push("".concat(t,"px")),(i||0==i)&&i>=0&&a.push("".concat(i,"px")),(o||0==o)&&a.push("".concat(o,"px")),r&&a.push("".concat(r)),{boxShadow:a.join(" ")}};t["Z"]=n},24414:function(e,t){"use strict";t["Z"]=1},5243:function(e,t,n){"use strict";n.d(t,{ie:function(){return o},fh:function(){return r},Jr:function(){return a},$q:function(){return s},Ug:function(){return l},BW:function(){return c},al:function(){return u},p6:function(){return d},rR:function(){return p},XU:function(){return f}});var i=function(e){return e<10?"0".concat(e):"".concat(e)},o=function(e,t){var n=new Date(c(e)),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),S:n.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=a(e),o=n.year,r=n.month,s=n.day;return o+t+i(r)+t+i(s)},a=function(e){var t=new Date(c(e));return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},s=function(e){if(e&&Number(e)){e=c(e);var t=Number(e)/1e3,n=Math.floor(t/3600),o=Math.floor((t-60*n*60)/60),r=Math.floor(t-60*n*60-60*o);return"".concat(i(n),":").concat(i(o),":").concat(i(r))}},l=function(e,t){var n=new Date(e),i=new Date(t);if(n>i){var o=n;n=i,i=o}var r,a=n.getDate(),s=n.getMonth()+1,l=n.getFullYear(),c=i.getDate(),u=function(e,t){var n=[0,31,28,31,30,31,30,31,31,30,31,30,31];return 2===t&&(e%400===0||e%4===0&&e%100!==0)?29:n[t]};return r=c>=a?c-a:u(l,s)+c-a,r},c=function(e){return e&&"string"===typeof e?e.replace(/-/g,"/"):e},u=function(e){var t=a(e),n=t.year,o=t.month,r=t.day;return"".concat(n).concat(i(o)).concat(i(r))},d=function(e){if(!e)return"";var t=a(e),n=t.month,i=t.day;return n+"\u6708"+i+"\u65e5"},p=function(e){if(e){if("[object Date]"===Object.prototype.toString.call(e)){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDay();return 1===String(n).length&&(n="0"+n),1===String(i).length&&(i="0"+i),String(t)+String(n)+String(i)}var o=e.split("-"),r=o.map((function(e){return 1===String(e).length?"0"+e:e}));return r.join("")}};function f(e){var t=(new Date).getTimezoneOffset(),n=new Date(c(e)).getTime(),i=60*(-t/60-8)*60*1e3+n;return i}},4557:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var i=n(79301),o=n(95308);function r(e,t){var n;return(0,o.Z)((0,i.Z)().mark((function o(){var r,a,s,l,c=arguments;return(0,i.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(r=c.length,a=new Array(r),s=0;s<r;s++)a[s]=c[s];l=this,clearTimeout(n),n=setTimeout((function(){e.apply(l,a)}),t);case 4:case"end":return i.stop()}}),o,this)})))}},65896:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var i=n(93212),o=function(e,t){var n=[];if(e)for(var o in e)t&&"object"===(0,i.Z)(e[o])||n.push("".concat(o,"=").concat(e[o]));return n.join("&")}},16567:function(e,t,n){"use strict";n.d(t,{I8:function(){return o}});var i=n(93212),o=function(e){return r(e)?JSON.parse(JSON.stringify(e)):e};function r(e){return null!=e&&"object"===(0,i.Z)(e)}},78894:function(e,t,n){"use strict";n.d(t,{vn:function(){return o},Xh:function(){return r}});var i=n(93212),o=function(e){var t=decodeURIComponent(e).split("?"),n={};if(2==t.length){var i=t[1],o=i.split("&");o.forEach((function(e){var t=e.search("=");t>0&&(n[e.slice(0,t)]=e.slice(t+1))}))}return n},r=function(e){return e=e||{},Object.keys(e).reduce((function(t,n){return"undefined"==typeof e[n]&&null!==e[n]||(t+="object"===(0,i.Z)(e[n])?"".concat(n,"=").concat(JSON.stringify(e[n]),"&"):"".concat(n,"=").concat(e[n],"&")),t}),"").slice(0,-1)}},77108:function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},93430:function(e,t,n){var i=n(92435);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},3619:function(e,t,n){var i=n(92435);function o(e,t,n){return t=i(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},72216:function(e,t,n){var i=n(3619);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},19028:function(e,t,n){var i=n(66371)["default"];function o(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},92435:function(e,t,n){var i=n(66371)["default"],o=n(19028);function r(e){var t=o(e,"string");return"symbol"===i(t)?t:String(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},47493:function(e){"use strict";e.exports=JSON.parse('{"compVerison":"2.0.3"}')}}]);
//# sourceMappingURL=taroCommon.js.map