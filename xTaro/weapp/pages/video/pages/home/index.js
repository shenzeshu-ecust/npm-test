(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6555],{12811:function(){},14082:function(e,t,n){"use strict";var i=n(32180),o=n(57042),r=n(24460),c=n(81876),a=n(21867),s=n(86066),l=n(45023),u=n(65542),d="10650100326",m=function(e){return e["VIDEO"]="video",e["PICTURE"]="picture",e["LIVE"]="live",e}({}),p=function(e){return e["SWIPER_UP"]="SWIPER_up",e["SWIPER_DOWN"]="SWIPER_down",e["SWIPER_LEFT"]="SWIPER_left",e["SWIPER_RIGHT"]="SWIPER_right",e}({}),h=function(e){return e["EXPOSURE"]="exposure",e["CLICK"]="show",e["CLOSE"]="close",e}({}),f=function(e){return e["Y"]="Y",e["N"]="N",e}({}),v=function(e){return e["IMAGE"]="image",e["NAME"]="name",e["SWIPE_LEFT"]="swipeLeft",e}({}),g=function(e){return e["LIKE"]="like",e["DISLIKE"]="dislike",e["DOUBLELIKE"]="doubleLike",e}({}),_=function(e){return e["COLLECT"]="collect",e["DISCOLLECT"]="disCollect",e}({}),x=function(e){return e["WEIXIN"]="weixin",e["POSTER"]="template",e}({}),C=function(e){return e["POI"]="poi",e["DESTRICT"]="destrict",e}({}),w=function(e){return e["BACK"]="back",e["MORE"]="more",e["EXIT"]="exit",e["HOME"]="home",e}({}),I=function(e){return e["PLAY"]="play",e["PAUSE"]="pause",e["SPEED"]="speed",e["BACKOFF"]="backoff",e}({}),y=function(e){return e["PAGE_LOAD_FAILED"]="pageLoadFailed",e["PRODUCT_VIEW_EMPTY"]="productView",e["SLIDE_CATON"]="slideCaton",e["NOT_FOUND"]="notFound",e}({}),T=function(e){return e[e["SWIPER_UP_ENTRANCE"]=1]="SWIPER_UP_ENTRANCE",e[e["SWIPER_UP_FULLPLAY"]=2]="SWIPER_UP_FULLPLAY",e[e["DOUBLE_CLICK"]=3]="DOUBLE_CLICK",e[e["DOUBLE_CLICK_SHARE"]=4]="DOUBLE_CLICK_SHARE",e[e["ATTENTION"]=5]="ATTENTION",e[e["SEARCH"]=6]="SEARCH",e[e["SWIPER_UP_30_DAYS"]=7]="SWIPER_UP_30_DAYS",e}({}),j=n(22276),S=n(298),b=n(79301),k=n(95308),N=n(90129),E=n(90201),L=n(71515),V=n(92954),Z=n.n(V),R=E.createContext({}),A=(n(12811),function(e){return e["LIKE"]="like",e["COLLECT"]="collect",e["ATTENTION"]="attention",e}({})),O=function(e){return e[e["OFF"]=0]="OFF",e[e["ON"]=1]="ON",e}({}),P="https://m.ctrip.com",F="/pages/you/lvpai/shareImage/shareImage",D={baseUrl:"".concat(P,"/restapi/soa2"),timeout:5e3},U={getVideoList:"/13012/getContentList",operateVideo:"/13012/operateContent",contentProduct:"/13012/getContentProductList",getRiskInfo:"/13012/getContentCenterRiskInfo",reportMktProduct:"/13012/reportMktProductClick",shareDoTask:"/16189/shareDoTask"},M=function(e){return e[e["OK"]=200]="OK",e[e["PARAM_ERR"]=400]="PARAM_ERR",e[e["NETWORK_ERR"]=500]="NETWORK_ERR",e}({}),B=0,W=function(e){B=e},K=function(){return B},G={},H=function(){G={}},q=function(e){return G[e]},z=function(e,t){G[t]=(0,V.createVideoContext)("videoIndex_".concat(t)),e==t&&G[e].play()},X=function(e,t){var n;+t==+e&&(Y(K()),null===(n=G[t])||void 0===n||n.play())},Y=function(e){for(var t in G)if(Object.prototype.hasOwnProperty.call(G,t)){var n=G[t];if(e==t)continue;n.stop()}},J=function(e){G[e]&&(G[e].stop(),delete G[e])},Q=n(93212),$=function(e){return!e},ee=function(e){return!e.toString()},te=function(e){return 0===Object.keys(e).length},ne=function(e){return 0===e.length},ie={string:$,number:ee,Object:te,Array:ne,function:function(){return!1},undefined:function(){return!0},boolean:function(e){return!e},Null:function(){return!0}},oe=function(e){var t=(0,Q.Z)(e);return"object"!==t||(t=Object.prototype.toString.call(e).replace(/^\[object (\S+)\]$/,"$1")),ie[t](e)},re=function(e){return"undefined"==typeof e},ce=function(e){return e<1e4?e:(e=(e/1e4).toFixed(1),"".concat(e,"w"))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss";if(e){e=new Date(e);e.getDay();e.setHours(e.getHours());var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Math.round(e),i=[];while(t>=0){var o=Math.floor(n/Math.pow(60,t));i.push(o),n-=o*Math.pow(60,t),--t}return i.map((function(e){return(e<0?0:e)<=9?"0".concat(e):e})).join(":")},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=ae((new Date).getTime(),"yyyyMMddHHmmss");return e++,"".concat(t).concat(e.toString().padStart(4,"0"))}}(),ue=function(e){e.stopPropagation()},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=je.getSystemInfoSync(),i=n.windowWidth,o=i/750*e;return o!==o&&(o=e/2),t?"".concat(o,"px"):o},me={},pe=function(e){var t=e.index,n=e.startTime,i=e.startCallback,o=e.endTime,r=e.endCallback,c=K();c==t&&(he(),me[c]||(me[c]={}),me[c].startTimer=setTimeout((function(){i()}),1e3*n),me[c].endTimer=setTimeout((function(){delete me[c],r()}),1e3*o))},he=function(){if(!oe(me))for(var e in me)me[e]&&(me[e].startTimer&&clearTimeout(me[e].startTimer),me[e].endTimer&&clearTimeout(me[e].endTimer),delete me[e])},fe=null,ve=function(){fe&&clearTimeout(fe)},ge=function(e){ve(),fe=setTimeout((function(){e&&e()}),5e3)},_e=0,xe=0,Ce=0,we=function(e){"start"!=e?(_e=0,xe=0,Ce=0):Ce=0},Ie=function(e){var t=e.totalTime,n=void 0===t?_e:t,i=e.playTime,o=void 0===i?xe:i,r=e.startTime,c=void 0===r?Ce:r;_e=+n,xe=+o,Ce=+c},ye=function(e){return"start"==e?Ce:"play"==e?xe:{totalTime:_e,playTime:xe,startTime:Ce}},Te=n(33675),je=Te.cwx,Se=Te.__global,be="wx0e6ed4f51db9d078",ke=function(){return je.user.auth},Ne=function(e,t){Ee((function(n){n?e&&e():Le((function(e){e&&t&&t()}))}))},Ee=function(e){if(!e)return je.user.isLogin();je.user.checkLoginStatusFromServer(e)},Le=function(e){je.user.login({param:{},callback:function(){e&&Ee(e)}})};function Ve(e){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i,o,r,c,a;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.url,i=t.cver,o=t.param,r=ke(),c={auth:r,extension:[]},i&&(c["cver"]=i),a=(0,S.Z)({head:c},o),e.abrupt("return",new Promise((function(e,t){je.request({url:"".concat(D.baseUrl).concat(n),method:"POST",data:a,success:function(n){var i=n.statusCode,o=n.data;n.errMsg;i===M.OK&&o?e(n):t(n)},fail:function(e){t(e)}})})));case 6:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}function Re(e){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:U.operateVideo,param:t},e.next=3,Ve(n);case 3:if(i=e.sent,i.statusCode==M.OK){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}var Oe,Pe="https://pages.c-ctrip.com/miniapp/miniapp_video",Fe=("".concat(Pe,"/image/avatar.png"),"".concat(Pe,"/image/weapp.png")),De="".concat(Pe,"/image/download.png"),Ue=("".concat(Pe,"/image/empty.png"),"".concat(Pe,"/image/networkErr.png"),"".concat(Pe,"/image/loadErr.png"),"".concat(Pe,"/animation/liked.png")),Me="".concat(Pe,"/animation/collected.png?11"),Be="".concat(Pe,"/animation/shoppingcart.png"),We="".concat(Pe,"/animation/doubleClick.webp"),Ke="".concat(Pe,"/animation/slideUp.webp"),Ge="".concat(Pe,"/animation/loading_earth.gif"),He="".concat(Pe,"/animation/loading_circle.gif"),qe=function(){return"fat"===Se.env||"devtools"==je.wxSystemInfo.platform},ze=function(e){return e["core_videoPlayTime"]="o_wx_platform_video_length",e["core_videoFinish"]="o_wx_platform_video_length_finish",e["core_videoBrowse"]="o_wx_platform_video_browse",e["core_isValidView"]="o_cgc_content_isValidView",e["core_mktProduct"]="o_gs_tripshoot_detail_all_recommend_goods",e["videoGuide"]="o_wx_platform_video_guide",e["videoGesture"]="o_wx_platform_video_gesture",e["videoTitleBar"]="o_wx_platform_video_titlebar",e["videoPlayer"]="o_wx_platform_video_player",e["videoError"]="o_wx_platform_video_error",e["videoVote"]="o_wx_platform_video_vote_show",e["videoLandscape"]="o_wx_platform_video_landscape",e["videoAuthor"]="c_wx_platform_video_author",e["videoFollowAuthor"]="c_wx_platform_video_followauthor",e["videoLike"]="c_wx_platform_video_like",e["videoShare"]="c_wx_platform_video_share",e["videoCollect"]="c_wx_platform_video_collect",e["videoComment"]="c_wx_platform_video_comment",e["videoShareView"]="c_wx_platform_video_shareview",e["videoViewAll"]="c_wx_platform_video_viewall",e["videoPoi"]="c_wx_platform_video_articlepoi",e["videoShoppingCart"]="c_wx_platform_video_goodscard",e["videoShoppingCartView"]="c_wx_platform_video_goodscard_view",e["videoRecommendGoods"]="c_wx_platform_video_recommendgoods",e["videoArticaleTag"]="c_wx_platform_video_articaleTag",e["videoArticaleTagView"]="c_wx_platform_video_articaleTag_view",e}({}),Xe="devtrace_miniapp_taro_video",Ye={media:m.VIDEO,systemcode:null===(Oe=je.getSystemInfoSync())||void 0===Oe?void 0:Oe.platform},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ye=(0,S.Z)((0,S.Z)({},Ye),e)},Qe={dev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;qe()&&(t=(0,S.Z)((0,S.Z)({},Ye),t),console.log("\n%c [taro-video] ".concat(e," -----\x3e"),"color:#009C67",t))},trace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e||console.error("\u8bf7\u521d\u59cb\u5316\u4e1a\u52a1\u4f7f\u7528\u7684key\u503c"),t=(0,S.Z)((0,S.Z)({},Ye),t),je.sendUbtByPage.ubtTrace(e,t,{tiled:!0})}catch(e){console.error("Log.logTrace failed",e.message,e.stack)}},devTrace:function(e){try{Qe.dev("devTrace",e),je.sendUbtByPage.ubtDevTrace(Xe,{data:JSON.stringify(e)})}catch(e){console.error("Log.logDevTrace failed",e.message,e.stack)}},sendPV:function(e){je.sendUbtByPage.ubtSendPV({pageId:e}),Qe.dev("pageId ===>>> ",e)}},$e=Qe,et={tables:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],UTF16ToUTF8:function(e){for(var t=[],n=e.length,i=0;i<n;i++){var o=e.charCodeAt(i);if(o>0&&o<=127)t.push(e.charAt(i));else if(o>=128&&o<=2047){var r=192|o>>6&31,c=128|63&o;t.push(String.fromCharCode(r),String.fromCharCode(c))}else if(o>=2048&&o<=65535){var a=224|o>>12&15,s=128|o>>6&63,l=128|63&o;t.push(String.fromCharCode(a),String.fromCharCode(s),String.fromCharCode(l))}}return t.join("")},UTF8ToUTF16:function(e){for(var t=[],n=e.length,i=0;i<n;i++){var o=e.charCodeAt(i);if(0==(o>>7&255))t.push(e.charAt(i));else if(6==(o>>5&255)){var r=e.charCodeAt(++i),c=(31&o)<<6,a=63&r,s=c|a;t.push(Sting.fromCharCode(s))}else if(14==(o>>4&255)){var l=e.charCodeAt(++i),u=e.charCodeAt(++i),d=o<<4|l>>2&15,m=(3&l)<<6|63&u,p=(255&d)<<8|m;t.push(String.fromCharCode(p))}}return t.join("")},encode:function(e){if(!e)return"";var t=this.UTF16ToUTF8(e),n=0,i=t.length,o=[];while(n<i){var r=255&t.charCodeAt(n++);if(o.push(this.tables[r>>2]),n==i){o.push(this.tables[(3&r)<<4]),o.push("==");break}var c=t.charCodeAt(n++);if(n==i){o.push(this.tables[(3&r)<<4|c>>4&15]),o.push(this.tables[(15&c)<<2]),o.push("=");break}var a=t.charCodeAt(n++);o.push(this.tables[(3&r)<<4|c>>4&15]),o.push(this.tables[(15&c)<<2|(192&a)>>6]),o.push(this.tables[63&a])}return o.join("")},decode:function(e){if(!e)return"";var t=e.length,n=0,i=[];while(n<t){var o=this.tables.indexOf(e.charAt(n++)),r=this.tables.indexOf(e.charAt(n++)),c=this.tables.indexOf(e.charAt(n++)),a=this.tables.indexOf(e.charAt(n++)),s=o<<2|r>>4;if(i.push(String.fromCharCode(s)),-1!=c){var l=(15&r)<<4|c>>2;i.push(String.fromCharCode(l))}if(-1!=a){var u=(3&c)<<6|a;i.push(String.fromCharCode(u))}}return this.UTF8ToUTF16(i.join(""))}},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=t.param,i=void 0===n?"":n,o=t._mktTaskActivityId,r=void 0===o?"":o,c=(t.sepopup,et.decode(i)||""),a=JSON.parse(c),s=a,l=s.bizType,u=s.source,d=s.requestListType,m=s.articleId,p=s.productType;return a=(0,S.Z)((0,S.Z)({},a),{},{requestSource:d,contentIdList:[{id:m,productType:p}],_mktTaskActivityId:r}),Je({bizType:l,source:u,requestlist:d}),a},nt=function(e){var t=/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;return t.test(e)};function it(e){var t=e.indexOf("?"),n=e.indexOf("#"),i=t>=0?e.slice(t+1,n>=0?n:void 0):"",o={};return i&&i.split("&").forEach((function(e){var t=e.split("="),n=(0,N.Z)(t,2),i=n[0],r=n[1];o[i]=decodeURIComponent(r)})),o}function ot(e,t){var n=it(e);for(var i in t)n[i]=t[i];var o=e.split("?")[0],r=!0;for(var c in n)r?(o+="?"+c+"="+encodeURIComponent(n[c]),r=!1):o+="&"+c+"="+encodeURIComponent(n[c]);return o}var rt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];$e.devTrace((0,S.Z)({msg:"navigateTo"},t)),je.navigateTo.apply(je,t)},ct=function(){return je.navigateBack()},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$e.devTrace({msg:"jumpToH5",url:e}),e?je.component.cwebview({data:{url:encodeURIComponent(e),needLogin:t}}):console.warn("\u7f3a\u5c11H5 url")},st=function(e,t,n){if(e||t)return e&&!nt(e)?(n&&(e=ot(e,{backpre:1})),console.log("[taro-video] jumpUrl: ",e),void rt({url:e})):void(t&&at(t))},lt="public",ut="page",dt="video",mt=function(e){return e["ALLGOODS"]="allGoods",e["RECOMMENDS"]="recommends",e}({}),pt=function(e){var t=e.totalTime,n=e.playTime,i=e.startTime;$e.trace(ze.core_videoPlayTime,{total_duration:t,start_duration:i,play_duration:n})},ht=function(e){var t=e.totalTime,n=e.playTime,i=e.startTime;$e.trace(ze.core_videoFinish,{total_duration:t,start_duration:i,play_duration:n})},ft=function(){$e.trace(ze.core_videoBrowse)},vt=function(e){e.isRisk,e.isInfoSecurityRisk,e.infoSecurityRiskLevel,e.isBusinessRisk,e.businessRiskLevel,e.requestId,e.eventId;$e.trace(ze.core_isValidView,(0,S.Z)({from:lt,type:ut,content_type:dt},e))},gt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=e.length;n<i;n++){var o=JSON.parse(e[n]),r=o.extInfo;t&&r&&$e.trace(ze.core_mktProduct,{from:lt,type:ut,product_infos:t&&r||""})}},_t=function(e){var t=e.allGoods,n=e.videoGoods,i=e.recommends;t.totalCount?gt(t.items,!0):(n.totalCount&&gt(n.items,!1),i.totalCount&&gt(i.items,!1))},xt=function(e){$e.trace(ze.videoGuide,{guidetype:e})},Ct=function(e){$e.trace(ze.videoGesture,{gestureType:e})},wt=function(e){$e.trace(ze.videoTitleBar,{titleBarType:e})},It=function(e){$e.trace(ze.videoPlayer,{playType:e})},yt=function(e){$e.trace(ze.videoError,{errorType:e})},Tt=function(e){var t=e.actionType,n=void 0===t?"":t,i=e.isGravity,o=void 0===i?"":i;$e.trace(ze.videoLandscape,{actionType:n,isGravity:o})},jt=function(e){$e.trace(ze.videoAuthor,{authorType:e})},St=function(){$e.trace(ze.videoFollowAuthor)},bt=function(e){$e.trace(ze.videoLike,{likeType:e})},kt=function(e){$e.trace(ze.videoCollect,{collectType:e})},Nt=function(){$e.trace(ze.videoComment)},Et=function(){$e.trace(ze.videoShare)},Lt=function(e,t){$e.trace(ze.videoShareView,{actionType:e,shareType:t})},Vt=function(e){e&&$e.trace(ze.videoViewAll,{actionType:e})},Zt=function(e){$e.trace(ze.videoPoi,{poiType:e})},Rt=function(e,t,n){var i=e.protag,o=e.id,r=e.cardSource,c=e.distanceSubTitle;return{prodcuttype:i,productid:o,number:t,goodsType:r,video_goods:n,distanceSubTitle:c}},At=function(e){var t=e.productInfo,n=e.actionType;if(!oe(t)){var i=Rt(t,0,mt.ALLGOODS);$e.trace(ze.videoRecommendGoods,(0,S.Z)((0,S.Z)({},i),{},{actionType:n}))}},Ot=function(e){$e.trace(ze.videoShoppingCart,{actionType:e})},Pt=function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];o="string"===typeof o?JSON.parse(o):o;var r=Rt(o,n,mt.ALLGOODS);$e.trace(ze.videoShoppingCartView,(0,S.Z)({actionType:h.EXPOSURE},r))}},Ft=function(){$e.trace(ze.videoShoppingCartView,{actionType:h.CLOSE})},Dt=function(e,t){var n=Rt(e,t,mt.ALLGOODS);$e.trace(ze.videoShoppingCartView,(0,S.Z)({actionType:h.CLICK},n))},Ut=function(e,t){var n=e.wxUrl,i=e.h5Url,o=e.jumpUrl;jt(t),st(n,i||o)},Mt=n(2269),Bt=function(e){return(0,Mt.jsx)(L.View,{className:"video-mask",style:e.style,onClick:e.handleClick})},Wt=function(e){e&&e.title&&Z().showToast((0,S.Z)({duration:e.duration||2e3,mask:!0},e))},Kt=(0,E.memo)((function(e){var t=e.text,n=e.size,i=void 0===n?"default":n;return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)("button",{type:"default","open-type":"share",className:"video-share__button",children:(0,Mt.jsxs)(L.View,{className:"flex-column font-size22 color-333 line-height24",children:[(0,Mt.jsx)(L.Image,{src:Fe,className:"".concat(i)}),t&&(0,Mt.jsx)(L.Text,{className:"margin-top16",children:"\u8f6c\u53d1\u7ed9\u670b\u53cb"})]})})})})),Gt=(0,E.memo)((function(e){var t=e.title,n=e.bgColor,i=void 0===n?"":n,o=e.videoInfo,r=o.contentId,c=o.articleTitle,a=(o.author,function(){var e={title:c&&encodeURIComponent(c),imageType:"tripshoot_multi",businessId:r,sourceType:"front",sourceFrom:"video",from_native_page:1,index:0,styleType:1},t=Object.keys(e).reduce((function(t,n){return t.push("".concat(n,"=").concat(e[n])),t}),[]),n="".concat(F,"?").concat(t.join("&"));return n}),s=function(e){var t=a();rt({url:t}),Lt(h.CLICK,x.POSTER)};return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsxs)(L.View,{className:"video-modal",style:{backgroundColor:i},children:[(0,Mt.jsxs)(L.View,{className:"video-modal__header",children:[(0,Mt.jsx)(L.View,{className:"iconfont-close",onClick:e.handleClose}),(0,Mt.jsx)(L.View,{children:t})]}),(0,Mt.jsxs)(L.View,{className:"video-modal__content flex-spacebetween margin48X paddingX140",children:[(0,Mt.jsx)(Kt,{text:"\u8f6c\u53d1\u7ed9\u670b\u53cb"}),(0,Mt.jsxs)(L.View,{className:"flex-column font-size22 color-333 line-height24",onClick:s,children:[(0,Mt.jsx)(L.Image,{src:De,className:"video-modal__image margin-bottom16"}),(0,Mt.jsx)(L.Text,{children:"\u751f\u6210\u6d77\u62a5"})]})]})]})})})),Ht=function(e){return e["STRONG"]="strong",e["DISCOUNT"]="discount",e["NORMAL"]="normal",e}({}),qt=(0,E.memo)((function(e){var t=e.text,n=e.type,i=e.style,o=void 0===i?"normal":i,r=e.iconUrl,c=e.color,a=e.bgColor,s=e.wxUrl,l=e.h5Url,u=e.poiType,d=(0,E.useState)({}),m=(0,N.Z)(d,2),p=m[0],h=m[1];(0,E.useEffect)((function(){var e={};c&&(e["color"]=c),a&&(e["backgroundColor"]=a),h(e)}),[]);var f=function(){s&&l&&(u&&Zt(4!=u?C.POI:C.DESTRICT),st(s,l))},v=function(){switch(n){case"location":return(0,Mt.jsxs)(L.View,{className:"video-tag location",onClick:function(){return f(C.POI)},children:[(0,Mt.jsx)(L.Image,{src:r,className:"video-tag__icon"}),(0,Mt.jsx)(L.Text,{children:t&&t.length>8?"".concat(null===t||void 0===t?void 0:t.substring(0,8),"..."):t})]});case"identity":return r&&(0,Mt.jsxs)(L.View,{className:"video-tag identity",style:p,onClick:f,children:[(0,Mt.jsx)(L.Image,{src:r,className:"video-tag__icon"}),(0,Mt.jsx)(L.Text,{children:t})]})||(0,Mt.jsx)(Mt.Fragment,{});case"product":return(0,Mt.jsx)(L.View,{className:"video-tag product ".concat(o),onClick:f,children:(0,Mt.jsx)(L.Text,{children:t})});default:return(0,Mt.jsx)(Mt.Fragment,{})}};return v()})),zt=function(e){return e["FLOAT"]="float",e["LIST"]="list",e}({}),Xt=function(e){return e[e["NONE"]=0]="NONE",e[e["SCORE"]=1]="SCORE",e[e["PRICE"]=2]="PRICE",e}({}),Yt=(0,l.Z)((0,l.Z)((0,l.Z)({},Xt.NONE,["9998"]),Xt.SCORE,["2","3","4","5","6","7","11","14","15","20","22","25","26","29"]),Xt.PRICE,["40"]),Jt=function(e){var t=e.type,n=void 0===t?zt.FLOAT:t,i=e.closable,o=void 0===i||i,r=e.productInfo,c=r.productType,a=r.title,s=r.distanceSubTitle,u=r.subTitle,d=r.image,m=r.jumpText,p=(r.jumpUrl,r.score),h=r.salesText,f=r.commentText,v=(r.goodsListShowStartSecond,r.goodsListShowEndSecond,r.itag),g=void 0===v?[]:v,_=r.stag,x=void 0===_?[]:_,C=r.tag,w=void 0===C?[]:C,I=r.protag,y=r.proTagInfo,T=void 0===y?{}:y,j=T.startcolor,S=T.endcolor,b=T.graduallyAngle,k=T.textColor,V=r.priceUnit,Z=r.currentPrice,R=r.originPrice,A=r.startFromText,O=(0,E.useState)([]),P=(0,N.Z)(O,2),F=P[0],D=P[1];(0,E.useEffect)((function(){var e=[];if(!oe(g))for(var t=0;t<g.length;t++){var n=g[t];e.push({name:n,style:Ht.STRONG})}if(!oe(x))for(var i=0;i<x.length;i++){var o=x[i];e.push({name:o,style:Ht.DISCOUNT})}if(!oe(w))for(var r=0;r<w.length;r++){var c=w[r];e.push({name:c,style:Ht.NORMAL})}D(e)}),[]);var U=function(){var e=Object.values(Yt).findIndex((function(e){return e.some((function(e){return e==c}))}));return e>-1?Object.keys(Yt)[e]:Xt["NONE"]},M=U(),B=function(t){ue(t),e.handleClose&&e.handleClose()},W=function(){return(0,Mt.jsx)(L.View,{className:"iconfont-close video-product__close",onClick:B})},K=function(){return(0,Mt.jsxs)(L.View,{className:"video-product__left",children:[(0,Mt.jsx)(L.View,{className:"video-product__tag ".concat(k?"rank":""),style:{background:"linear-gradient(".concat(b,"deg, ").concat(j," 0%, ").concat(S," 100%)"),color:k},children:I}),(0,Mt.jsx)(L.View,{className:"iconfont-dolphin"}),(0,Mt.jsx)(L.Image,{className:"video-product__img",src:d})]})},G=function(){return(0,Mt.jsxs)(L.View,{className:"price",children:[(0,Mt.jsx)(L.Text,{className:"color-price",children:V}),(0,Mt.jsx)(L.Text,{className:"bold",children:Z}),(0,Mt.jsx)(L.Text,{className:"",children:A}),n==zt.FLOAT?h?(0,Mt.jsx)(L.Text,{children:h}):R?(0,Mt.jsxs)(L.Text,{className:"line-through",children:[V||"\uffe5",R]}):null:(0,Mt.jsxs)(Mt.Fragment,{children:[R&&(0,Mt.jsxs)(L.Text,{className:"line-through",children:[V||"\uffe5",R]}),h&&(0,Mt.jsx)(L.Text,{children:h})]})]})},H=function(){var e=M==Xt["SCORE"]&&s||u;return(0,Mt.jsxs)(L.View,{className:"flex-column-spacebetween flex1",children:[(0,Mt.jsxs)(L.View,{children:[(0,Mt.jsx)(L.View,{className:"video-product__title line-limited1",children:a}),e&&(0,Mt.jsx)(L.View,{className:"video-product__subtitle line-limited1",children:e}),(0,Mt.jsx)(L.View,{className:"video-product__tags",children:F.map((function(e,t){return(0,Mt.jsx)(qt,{text:e.name,type:"product",style:e.style})}))})]}),(0,Mt.jsx)(L.View,{className:"video-product__info",children:M==Xt["SCORE"]?p&&(0,Mt.jsxs)(L.View,{className:"score",children:[(0,Mt.jsx)(L.Text,{className:"bold mark",children:p||0}),(0,Mt.jsx)(L.Text,{className:"mark",children:"\u5206"}),(0,Mt.jsx)(L.Text,{children:f})]}):Z&&G()})]})};return(0,Mt.jsxs)(L.View,(0,l.Z)((0,l.Z)({onClick:ue,className:"video-product ".concat(n==zt.FLOAT?"product-float":"")},"onClick",e.handleClick),"children",[o&&W(),K(),H(),(0,Mt.jsx)(L.View,{className:"video-product__button",children:m})]))},Qt=function(e,t){return e.productInfo==t.productInfo},$t=(0,E.memo)(Jt,Qt),en=function(e){return e["VIEW"]="view",e["EXPO"]="expo_product",e["CLICK"]="click_product",e}({});function tn(e){return nn.apply(this,arguments)}function nn(){return nn=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:U.reportMktProduct,param:t},e.next=3,Ve(n);case 3:if(i=e.sent,200==i.resultCode){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)}))),nn.apply(this,arguments)}var on=function(e){return e["EMPTY"]="empty",e["NETWORK_ERROR"]="networkError",e["LOAD_FAILED"]="loadFailed",e}({}),rn=function(e){var t=e.type,n=e.title,i=e.subTitle,o=e.buttonText,r=e.theme;return(0,Mt.jsxs)(L.View,{className:"video-status ".concat(r),children:[t&&(0,Mt.jsx)(L.View,{className:"video-status__img ".concat(t)}),n&&(0,Mt.jsx)(L.View,{className:"video-status__title",children:n}),(0,Mt.jsx)(L.View,{className:"video-status__subTitle",children:i}),o&&(0,Mt.jsx)(L.Button,{className:"video-status__btn",onClick:e.handleClick,children:o})]})},cn=function(e){return e[e["GLOBAL"]=0]="GLOBAL",e[e["PARTIAL"]=1]="PARTIAL",e}({}),an=function(e){var t=e.type,n=void 0===t?cn["PARTIAL"]:t;return(0,Mt.jsx)(L.View,{className:"video-loading",children:(0,Mt.jsx)(L.Image,{className:"video-loading__img ".concat(n===cn.GLOBAL?"":"animation"),src:n===cn.GLOBAL?Ge:He})})},sn=3,ln=(0,E.memo)((function(e){var t,n,i=e.videoInfo,o=e.products,r=e.netWorkErr,c=(0,E.useContext)(R),a=c.urlParams,s=r||oe(o)||oe(o.items)||(null===o||void 0===o?void 0:o.items.length)>sn?{height:"calc(62vh)"}:{};"ios"!=je.wxSystemInfo.platform&&(s["marginBottom"]="20px"),(0,E.useEffect)((function(){!oe(null===o||void 0===o?void 0:o.items)&&Pt(o.items)}),[]);var l=function(e,t){var n=i.author,o=i.contentId;tn({clientAuth:n.clientAuth,page_type:"video_detail",pageid:d,materialid:o,product_infos:e.extInfo,click_type:en.CLICK,note:JSON.stringify({is_star:n.isStarAccount||!1,sourcefrom:a.source})}),Dt(e,t);var r=e.wxUrl,c=e.h5Url,s=e.productType;st(r,c,18==s)};return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsxs)(L.View,{className:"video-modal",children:[(0,Mt.jsxs)(L.View,{className:"video-modal__header",children:[(0,Mt.jsx)(L.View,{className:"iconfont-close",onClick:e.handleClose}),(0,Mt.jsx)(L.View,{className:" bold font-size34 color-333",children:(null===o||void 0===o||null===(t=o.groupedItems[0])||void 0===t?void 0:t.title)||(null===o||void 0===o||null===(n=o.groupedItems[1])||void 0===n?void 0:n.title)||"\u643a\u7a0b\u63a8\u8350"})]}),(0,Mt.jsx)(L.View,{className:"video-modal__content",style:s,children:r?(0,Mt.jsx)(rn,{type:on.NETWORK_ERROR,title:"\u7f51\u7edc\u4e0d\u7ed9\u529b",subTitle:"\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u518d\u8bd5",buttonText:"\u518d\u8bd5\u4e00\u6b21"}):oe(o)?(0,Mt.jsx)(an,{}):oe(o.items)?(0,Mt.jsx)(rn,{type:on.EMPTY,title:"\u6682\u65e0\u5185\u5bb9"}):(0,Mt.jsxs)(L.ScrollView,{style:{height:"100%"},scrollY:!0,scrollWithAnimation:!0,scrollTop:0,lowerThreshold:50,upperThreshold:20,children:[null===o||void 0===o?void 0:o.items.map((function(e,t){var n=JSON.parse(e);return(0,Mt.jsx)($t,{type:zt.LIST,closable:!1,productInfo:n,handleClick:function(){return l(n,t)}})})),(null===o||void 0===o?void 0:o.items.length)<=sn?null:(0,Mt.jsx)(L.View,{className:"video-modal__bottom",children:"\u6ca1\u6709\u66f4\u591a\u4e86"})]})})]})})})),un=n(56884);function dn(e){var t=e.url,n=e.data,i=e.success,o=e.fail,r=e.complete,c={head:{extension:[{name:"GsMiniPlantform",value:"wechatMiniapp"}]}};Object.assign(n,c),un.cwx.request({url:t,data:n,success:function(e){i(e)},fail:function(e){var t;["MobileRequestFilterException","AccountMobileRequestFilterException"].indexOf(null===e||void 0===e||null===(t=e.ResponseStatus)||void 0===t||null===(t=t.Errors)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.ErrorCode)>-1&&un.cwx.user.login({}),o&&o(e)},complete:function(){r&&r()}})}var mn=function(e,t){dn({url:"/restapi/soa2/14045/json/ruleSortCommentList",data:e,success:function(e){t(e)},fail:function(e){t(e)}})},pn=function(e,t){dn({url:"/restapi/soa2/14045/json/comment",data:{action:e.action,commentId:e.commentId,comment:e.comment,isNeedInteractTag:!0},success:function(e){t(e)},fail:function(e){t(e)}})},hn=function(e,t){dn({url:"/restapi/soa2/14045/json/action",data:{action:e.action,targetId:e.targetId,targetType:e.targetType},success:function(e){t(e)},fail:function(e){t(e)}})},fn=function(e,t){dn({url:"/restapi/soa2/16189/json/getPkVote",data:e,success:function(e){t(e)},fail:function(e){t(e)}})},vn=function(e,t){dn({url:"/restapi/soa2/14045/json/interactionAction",data:e,success:function(e){t(e)},fail:function(e){t(e)}})},gn=function(e,t,n){var i=!1;return e&&e.data&&e.data.ResponseStatus&&"success"===e.data.ResponseStatus.Ack.toLowerCase()?i=!0:e&&e.data&&e.data.ResponseStatus&&"failure"===e.data.ResponseStatus.Ack.toLowerCase()&&"MobileRequestFilterException"==e.data.ResponseStatus.Errors[0].ErrorCode&&(n=!1,un.cwx.user.logout((function(e){un.cwx.user.login({callback:function(e){if(console.log("isLogin",e),e&&0==e.ReturnCode)return t&&t()}})}))),void 0==n&&(n=!1),!i&&n&&Z().showToast({title:"\u8bf7\u6c42\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5~",icon:"none"}),i};function _n(e,t,n){var i={text:"",wrapperStyle:"",cemojiStyle:""};return e&&(i.text=e[t],n&&(i.wrapperStyle=n.wrapperStyle,i.cemojiStyle=n.cemojiStyle)),i}var xn=function(e,t,n){var i=[],o=t;return n&&(o=n),e.forEach((function(r,c){r.commentId==o&&(n&&t!=n?(i=e[c].childComments,i.forEach((function(e,n){e.commentId==t&&(e.isLike?(e.isLike=!1,e.likeCount=(e.likeCount||0)-1):(e.isLike=!0,e.likeCount=(e.likeCount||0)+1))}))):r.isLike?(r.isLike=!1,r.likeCount=(r.likeCount||0)-1):(r.isLike=!0,r.likeCount=(r.likeCount||0)+1))})),e},Cn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.inputObj,n=e.cwx,i="";return n&&(i=n.convertCEmojiInput(t)),(0,Mt.jsx)(E.Fragment,{children:i?(0,Mt.jsx)(L.RichText,{nodes:i}):(0,Mt.jsx)("cemoji-converter",{inputObj:this.props.inputObj})})}}]),n}(E.Component);function wn(e,t){var n=e.inputObj||{},i=t.inputObj||{};return n.text==i.text&&n.wrapperStyle==i.wrapperStyle&&n.cemojiStyle==i.cemojiStyle}var In=(0,E.memo)(Cn,wn),yn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,c.Z)(i),"inpValueChange",(function(e){var t=e.detail&&e.detail.value;i.state.inputValue=t,i.inputValueData=t})),(0,l.Z)((0,c.Z)(i),"handleFocus",(function(e){i.props.inputFocus(e)})),(0,l.Z)((0,c.Z)(i),"handleBlur",(function(e){i.canHide&&i.hideCommentInput(e)})),(0,l.Z)((0,c.Z)(i),"hideCommentInput",(function(){i.isClickQuick?i.isClickQuick=!1:i.setState({visible:!1,commentFocus:!1})})),(0,l.Z)((0,c.Z)(i),"testInvalidStr",(function(e){var t=/^[\[\]\{\}\#\%\^\*\+\=\_\\\|\~\<\>\\u20ac\\xa3\\xa5\\u2022\.\,\?\!\'\-\/\:\;\(\)\$\&\@\"\.\-\/\\uff1a\\uff1b\\uff08\\uff09\\xa5\\u201c\\u201d\\u3002\\uff0c\\u3001\\uff1f\\uff01\.\\u3010\\u3011\\uff5b\\uff5d\#\%\\u2014\\uff5e\\u300a\\u300b\\xb7\\u2026\,\\u2018\\u2019\s]+$/;return t.test(e)})),(0,l.Z)((0,c.Z)(i),"toComment",(function(){var e={action:"post",comment:{articleId:i.props.articleId,content:i.inputValueData,replyCommentId:i.replyCommentId},isContentEncode:!0};return 0==i.inputValueData.length?(Z().showToast({title:"\u60a8\u4e0d\u80fd\u63d0\u4ea4\u7a7a\u8bc4\u8bba\u54e6~",icon:"none"}),void i.hideCommentInput()):i.testInvalidStr(i.inputValueData)?(Z().showToast({title:"\u8bf7\u60a8\u7559\u4e0b\u6709\u610f\u4e49\u7684\u4e00\u7b14\u54e6~",icon:"none"}),void i.hideCommentInput()):void pn(e,(function(e){var t;console.log("toComment",e);var n=e.data,o="";null!==n&&void 0!==n&&null!==(t=n.comment)&&void 0!==t&&t.commentId?(i.props.ubtTrace("c_gs_tripshoot_comment_publishcomment",{articleId:i.props.articleId,commentId:n.comment.commentId}),console.log("c_gs_tripshoot_comment_publishcomment",{articleId:i.props.articleId,commentId:n.comment.commentId}),o=n.rewardInfo&&n.rewardInfo.message?n.rewardInfo.message:i.tempReplyId?"\u4f60\u7684\u56de\u590d\u5df2\u53d1\u5e03":"\u4f60\u7684\u8bc4\u8bba\u5df2\u53d1\u5e03",i.inputValueData="",Z().showToast({title:o,icon:"none"}),i.props.commentSubmitNotify(n.comment),i.hideCommentInput(),i.setState({inputValue:""})):(o=n&&n.result&&101==n.result.resultId?"\u8868\u60c5\u6b63\u5728\u5347\u7ea7\u4e2d\uff0c\u8bf7\u8f93\u5165\u6587\u5b57\uff5e\uff5e":n&&n.result&&103==n.result.resultId?"\u62b1\u6b49\u7531\u4e8e\u5bf9\u65b9\u8bbe\u7f6e\uff0c\u4f60\u65e0\u6cd5\u6267\u884c\u8be5\u64cd\u4f5c":n&&n.result&&n.result.resultText?n.result.resultText:"\u8bc4\u8bba\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e",Z().showToast({title:o,icon:"none"}),i.inputValueData="")}),(function(){Z().showToast({title:"\u8bc4\u8bba\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e",icon:"none"}),i.inputValueData=""}))})),(0,l.Z)((0,c.Z)(i),"toFoucus",(function(){i.setState({commentFocus:!0})})),(0,l.Z)((0,c.Z)(i),"handleClickQuickItemValue",(function(e){i.isClickQuick=!0,i.inputValueData=i.inputValueData+e,i.props.ubtTrace("c_gs_tripshoot_detail_keyboardReply",{articleId:i.props.articleId}),console.log("c_gs_tripshoot_detail_keyboardReply",{articleId:i.props.articleId}),i.setState({inputValue:i.inputValueData,commentFocus:!1},(function(){setTimeout((function(){i.setState({commentFocus:!0},(function(){i.isClickQuick=!1}))}),100)}))})),i.inputValueData="",i.isClickQuick=!1,i.canHide=!0,i.state={inputValue:"",visible:!1,commentFocus:!1,placeholder:"\u8bf4\u70b9\u4ec0\u4e48..."},i}return(0,r.Z)(n,[{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u8bf4\u70b9\u4ec0\u4e48...",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e||this.state.inputValue,r=n||this.state.placeholder;this.replyCommentId=i,this.canHide=!1,setTimeout((function(){t.canHide=!0}),1e3),this.setState({visible:!0,inputValue:o,placeholder:r},(function(){setTimeout((function(){t.toFoucus(),t.inputValueData=o}),200)}))}},{key:"render",value:function(){var e=this,t=this.props.replyList,n=this.state,i=n.visible,o=n.commentFocus,r=n.placeholder;return(0,Mt.jsxs)(E.Fragment,{children:[(0,Mt.jsx)(L.View,{className:"comment-fixedsbg ".concat(i?"show":""),catchMove:!0,onClick:this.hideCommentInput}),(0,Mt.jsxs)(L.View,{className:"comp-fixedbottom ".concat(i?"show":""),children:[(0,Mt.jsxs)(L.View,{className:"comp-quickReply_tab",children:[(0,Mt.jsx)(L.View,{className:"commentbox",children:(0,Mt.jsx)(L.Textarea,{"show-confirm-bar":!1,fixed:!0,"disable-default-padding":!0,"auto-height":!0,className:"commentbox-inp commentbox-inp-fixed commentbox-test","placeholder-className":"commentbox-inp",onFocus:this.handleFocus,"adjust-position":!0,onInput:this.inpValueChange,value:this.state.inputValue,placeholder:r,onKeyboardHeightChange:this.props.keybordHeightChange,focus:o,"cursor-spacing":t&&t.length>0?54:20,onBlur:this.handleBlur})}),(0,Mt.jsx)(L.View,{className:"comment-send",onClick:this.toComment,children:"\u53d1\u9001"})]}),t&&t.length>0&&(0,Mt.jsxs)(L.View,{className:"comp-quickReply comp-quickReply-Input",children:[(0,Mt.jsx)(L.View,{className:"quickText",children:"\u5feb\u6377\u56de\u590d:"}),(0,Mt.jsx)(L.ScrollView,{className:"quickScroll",children:(0,Mt.jsx)(L.View,{className:"comp-quickReplyList",children:t.slice(0,3).map((function(t,n){return(0,Mt.jsx)(L.View,{className:"comp-quickReplyItem comp-quickReplyObserverTwo",onClick:function(){return e.handleClickQuickItemValue(t)},children:t},n)}))})})]})]})]})}}]),n}(E.Component);function Tn(e,t){return e.articleId==t.articleId&&e.replyCommentId==t.replyCommentId&&e.replyList==t.replyList}var jn=(0,E.memo)(yn,Tn);yn.defaultProps={inputFocus:function(){},articleId:"",replyList:[],ubtTrace:function(){},commentSubmitNotify:function(){}};var Sn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,c.Z)(i),"getVoteInfo",(function(){var e={articleId:i.props.articleId};fn(e,(function(e){var t,n,o,r,c,a,s,l;(i.isPushAction=!1,null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.interaction)&&(i.props.ubtTrace("o_gs_tripshoot_detail_vote_expose",{type:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.interaction.type}),console.log("o_gs_tripshoot_detail_vote_expose",{type:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.interaction.type}),i.setState({voteInfo:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.interaction,isInteract:null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.interaction.isInteract,isEnd:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.interaction.isEnd,activeType:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.interaction.type,interactItems:(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.interaction.interactItems)||[]}))}))})),(0,l.Z)((0,c.Z)(i),"_renderItem",(function(e,t){var n=i.state,o=n.isInteract,r=n.activeType;return(0,Mt.jsxs)(L.View,{className:"vote-list-item ".concat(e.isChecked?"isChecked":""),onClick:function(){return i._handleClickItem(e,t)},children:[(0,Mt.jsxs)(L.View,{className:"item-text",children:[e.name,e.isChecked&&(2==r||3==r&&o)?"(\u5df2\u9009)":""]}),o?(0,Mt.jsxs)(E.Fragment,{children:[(0,Mt.jsx)(L.View,{className:"item-per-bg",style:{width:"".concat(e.percentage,"%")}}),(0,Mt.jsxs)(L.View,{className:"item-per-num",children:[e.percentage,"%"]})]}):null,!o&&3==r&&e.isChecked?(0,Mt.jsx)(L.View,{className:"item-check",children:(0,Mt.jsx)(L.Image,{className:"check-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/selected.png"})}):null]})})),(0,l.Z)((0,c.Z)(i),"_handleClickItem",(function(e,t){var n=i.props.cwx.user.isLogin();if(n){var o=i.state,r=o.activeType,c=o.isInteract,a=o.isEnd;c||i.isPushAction||a||(i.state.interactItems[t].isChecked=!i.state.interactItems[t].isChecked,2==r?(i.props.ubtTrace("c_gs_tripshoot_detail_vote_option",{type:2}),console.log("c_gs_tripshoot_detail_vote_option",{type:2}),i._interactionAction()):3==r&&(i.setState({interactItems:i.state.interactItems}),i.props.ubtTrace("c_gs_tripshoot_detail_vote_option",{type:3}),console.log("c_gs_tripshoot_detail_vote_option",{type:3})))}else i.props.toLogin()})),(0,l.Z)((0,c.Z)(i),"_interactionAction",(function(){if(!i.isPushAction){var e=i.state.interactItems,t=[];e.forEach((function(e){e.isChecked&&t.push({title:e.name,articleInteractionItemId:e.itemId})}));var n={action:"interactive",articleId:i.props.articleId,interaction:{interactionItems:t}};i.isPushAction=!0,vn(n,(function(e){var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.result)&&void 0!==t&&t.result?i.getVoteInfo():i.isPushAction=!1}))}})),(0,l.Z)((0,c.Z)(i),"_handleSubmitBtn",(function(){!i.isCanSubmit||i.isPushAction||i.state.isInteract||(i._interactionAction(),i.props.ubtTrace("c_gs_tripshoot_detail_vote_submit"),console.log("c_gs_tripshoot_detail_vote_submit"))})),i.isPushAction=!1,i.state={isInteract:!1,isEnd:!1,activeType:0,activeTypeMap:{1:"pk",2:"\u5355\u9009",3:"\u591a\u9009"},voteInfo:null,interactItems:[]},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.articleId,n=e.userInit;this.state.voteInfo||!t||"0"==t||n||this.getVoteInfo()}},{key:"isCanSubmit",get:function(){return this.state.interactItems.find((function(e){return e.isChecked}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInteract,i=t.isEnd,o=t.activeType,r=t.activeTypeMap,c=t.voteInfo,a=t.interactItems;return c?(0,Mt.jsx)(E.Fragment,{children:(0,Mt.jsxs)(L.View,{className:"vote-content",children:[(0,Mt.jsxs)(L.View,{className:"vote-title",children:[c.name,"\uff08",r[o],"\uff09"]}),(0,Mt.jsx)(L.View,{className:"vote-list ".concat(i?"isEnd":""," ").concat(n?"isInteract":""),children:a.map((function(t,n){return e._renderItem(t,n)}))}),n||i||3!=o?null:(0,Mt.jsx)(L.View,{onClick:this._handleSubmitBtn,className:"vote-submit ".concat(this.isCanSubmit?"active":""),children:"\u786e\u8ba4\u63d0\u4ea4"}),(0,Mt.jsxs)(L.View,{className:"vote-info",children:[(0,Mt.jsx)(L.View,{className:"vote-time",children:c.endDisplayTime}),(0,Mt.jsxs)(L.View,{children:["\xb7 ",c.joinCount,"\u4eba\u5df2\u53c2\u4e0e"]})]})]})}):null}}]),n}(E.Component),bn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,c.Z)(i),"initCommentList",(function(){i.pageIndex=1,i.state.commentList=[],i.getCommentList()})),(0,l.Z)((0,c.Z)(i),"getCommentList",(function(){var e={articleId:i.id,para:{pageIndex:i.pageIndex,pageSize:10,sortType:i.state.sortType},isContentEncode:!1,displayType:2,showCommentCount:!0,sortDirection:0,excludeCommentIds:[],levels:[0]},t=[],n=0,o=!1;i.setState({isloading:!0}),mn(e,(function(e){gn(e)&&e.data.comments&&e.data.comments.length>0?(t=(e.data.comments||[]).map((function(e){return e.childCommentsPageIndex=1,e.childComments.forEach((function(e,t){e.isPublic=!0})),e})),t=i.state.commentList.concat(t),n=e.data.sceneTotalCount,o=t.length>=e.data.totalCount,i.setState({commentList:t,totalCount:n,isloading:!1,isLoadEnd:o,listLoading:!1})):i.setState({isloading:!1,isLoadEnd:!0})}))})),(0,l.Z)((0,c.Z)(i),"switchSortType",(function(e){i.props.ubtTrace("c_gs_tripshoot_comment_orderchange",{articleId:i.id}),console.log("c_gs_tripshoot_comment_orderchange",{articleId:i.id}),i.setState({sortType:e,listLoading:!0},(function(){i.initCommentList()}))})),(0,l.Z)((0,c.Z)(i),"handleLoadMore",(function(){i.state.isLoadEnd||i.state.isloading||(i.pageIndex++,i.getCommentList())})),(0,l.Z)((0,c.Z)(i),"jumpToHome",(function(e){i.props.ubtTrace("c_gs_tripshoot_comment_mypic",{articleId:i.id}),console.log("c_gs_tripshoot_comment_mypic",{articleId:i.id});var t="",n="";n="uat"===un.__global.env.toLowerCase()?"https://m.uat.qa.nt.ctripcorp.com/webapp/you/tripshoot/user/":"https://m.ctrip.com/webapp/you/tripshoot/user/",t=n+"home?seo=0&isMini=2&autoawaken=close&popup=close&ishideheader=yes&clientAuth="+e;encodeURIComponent(t);var o="/pages/ugc/user/index?clientAuth="+e;un.cwx.navigateTo({url:o})})),(0,l.Z)((0,c.Z)(i),"doCommentPraise",(function(e,t){i.topCommentId=t;var n=(0,c.Z)(i),o="",r=i.props.cwx.user.isLogin(),a="";e.isLike?(o="cancel_like",a="c_gs_tripshoot_comment_cancellike"):(o="like",a="c_gs_tripshoot_comment_like"),n.props.ubtTrace(a,{articleId:i.id,commentId:e.commentId}),console.log(a,{articleId:i.id,commentId:e.commentId}),r?n.getActionInfo(o,"comment",e.commentId):n.toLogin()})),(0,l.Z)((0,c.Z)(i),"getActionInfo",(function(e,t,n){var o={action:e,targetId:n,targetType:t};hn(o,(function(t){var o;if(gn(t))if(null!==t&&void 0!==t&&null!==(o=t.data)&&void 0!==o&&null!==(o=o.result)&&void 0!==o&&o.result){i.refreshComment(n,i.topCommentId),i.topCommentId="";var r="",c="";"like"==e?(r="\u70b9\u8d5e\u6210\u529f",c=t.data.rewardInfo,c&&c.message&&(r=r+" "+c.message),setTimeout((function(){Z().showToast({title:r,icon:"none"})}),750)):r="\u5df2\u53d6\u6d88\u70b9\u8d5e",i.props.praiseNotify&&i.props.praiseNotify(e,n)}else"like"==e?Z().showToast({title:"\u70b9\u8d5e\u5931\u8d25",icon:"none"}):"cancel_like"==e&&Z().showToast({title:"\u53d6\u6d88\u70b9\u8d5e\u5931\u8d25",icon:"none"})}))})),(0,l.Z)((0,c.Z)(i),"toLogin",(function(){var e=(0,c.Z)(i);i.props.cwx&&i.props.cwx.user.login({callback:function(t){t&&0==t.ReturnCode&&e.props.loginCallback&&e.props.loginCallback()}})})),(0,l.Z)((0,c.Z)(i),"toReply",(function(e,t,n,o){i.props.ubtTrace("c_gs_tripshoot_comment_clickcomment",{articleId:i.id,commentId:o});var r=i.props.cwx&&i.props.cwx.user.isLogin();r?(i.replyCommentId=t,i.topCommentId=t,i.inputMaskRef&&i.inputMaskRef.show("","\u56de\u590d"+e+":",t)):i.toLogin()})),(0,l.Z)((0,c.Z)(i),"_renderCommentDetail",(function(e,t){var n=i.props.commentTextStyle;try{return(0,Mt.jsxs)(E.Fragment,{children:[(0,Mt.jsxs)(L.View,{className:"comemnt-avat",onClick:function(){return i.jumpToHome(e.author.clientAuth)},children:[(0,Mt.jsx)(L.Image,{className:"comemnt-avat-img",src:e.author.coverImage&&e.author.coverImage.dynamicUrl||"https://pages.c-ctrip.com/you/lvpai-home-defaultavat.jpg"}),e.author.vIcon&&(0,Mt.jsx)(L.Image,{className:"comemnt-vip",src:e.author.vIcon})]}),(0,Mt.jsxs)(L.View,{className:"comemnt-content",children:[(0,Mt.jsx)(L.View,{className:"comemnt-name-wrapper",children:(0,Mt.jsxs)(L.View,{className:"comemnt-name",children:[(0,Mt.jsxs)(L.View,{className:"name-reply-container",children:[(0,Mt.jsx)(L.View,{className:"name-text",children:e.author.nickName}),e.author.tag&&(0,Mt.jsx)(L.View,{className:"comemnt-identity",children:e.author.tag}),e.refComment&&e.refComment.author&&e.refComment.author.nickName&&(0,Mt.jsxs)(E.Fragment,{children:[(0,Mt.jsx)(L.View,{className:"reply",children:"\u56de\u590d"}),(0,Mt.jsx)(L.View,{className:"name-text",children:e.refComment.author.nickName}),e.refComment.author.tag&&(0,Mt.jsx)(L.View,{className:"comemnt-identity",children:e.refComment.author.tag})]})]}),(0,Mt.jsxs)(L.View,{className:"common-comment-praise",onClick:function(){return i.doCommentPraise(e,t)},children:[(0,Mt.jsx)(L.View,{className:"like-content",children:e.isLike?(0,Mt.jsx)(L.Image,{className:"like-icon",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/vote-comment-liked.png"}):(0,Mt.jsx)(L.Image,{className:"like-icon",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/vote-comment-like.png"})}),e.likeCount>0&&(0,Mt.jsx)(L.View,{className:"count",children:e.likeCount}),5!=e.publishStatus&&4!=e.publishStatus&&3!=e.publishStatus&&(0,Mt.jsx)(L.View,{className:"item-more",onClick:function(n){i.showCommentAction(e.author.nickName,t,e.isOwner,e.commentId,n)},children:(0,Mt.jsx)(L.Image,{className:"item-more-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/comment_ic_more.png"})})]})]})}),5==e.publishStatus||3==e.publishStatus?(0,Mt.jsx)(L.View,{className:"comment-detail",children:(0,Mt.jsx)(L.View,{className:"common-comment-delete",children:e.reportType>0?"\u8bc4\u8bba\u56e0\u8fdd\u53cd\u643a\u7a0b\u793e\u533a\u89c4\u8303\u88ab\u5220\u9664":e.content})}):(0,Mt.jsx)(L.View,{className:"comment-detail",onClick:function(){return i.toReply(e.author.nickName,t,e.isOwner,e.commentId)},children:(0,Mt.jsx)(In,{cwx:i.props.cwx,inputObj:_n(e,"content",n)})}),(0,Mt.jsxs)(L.View,{className:"common-comment-info",children:[(0,Mt.jsxs)(L.View,{className:"common-comment-time",children:[(0,Mt.jsx)(L.Text,{children:e.publishTimeDisplay}),(0,Mt.jsx)(L.Text,{className:"ip",children:e.ipLocatedName})]}),(e.tags||[]).map((function(e,t){return(0,Mt.jsx)(L.View,{className:"tag",children:e.tagName},t)}))]})]})]})}catch(e){}})),(0,l.Z)((0,c.Z)(i),"_renderList",(function(){var e=i.state.commentList;return e.map((function(e){return(0,Mt.jsxs)(L.View,{className:"comment-item",children:[(0,Mt.jsx)(L.View,{className:"comment-main-item",children:i._renderCommentDetail(e,e.commentId)}),(e.childComments||[]).map((function(t,n){return(0,Mt.jsx)(L.View,{className:"sub-item ".concat(0==n?"sub-item-f":""),children:i._renderCommentDetail(t,e.commentId)},n)})),(e.childComments||[]).length<e.childTotalCount&&!e.showSubCommentLoading&&(0,Mt.jsx)(L.View,{onClick:function(){return i.fetchSubCommentList(e)},className:"comment-show-more",children:"\u5c55\u5f00\u66f4\u591a\u56de\u590d"}),e.showSubCommentLoading&&(0,Mt.jsx)(L.View,{className:"sub-loading",children:"\u52a0\u8f7d\u4e2d..."}),(0,Mt.jsx)(L.View,{className:"line"})]},e.commentId)}))})),(0,l.Z)((0,c.Z)(i),"getExcludeCommentIds",(function(e){var t=[];return e&&e.length&&e.forEach((function(e,n){e.isPublic&&t.push(e.commentId)})),t})),(0,l.Z)((0,c.Z)(i),"fetchSubCommentList",(function(e){var t=e.commentId,n={displayType:3,levels:[2],pageSize:10,pageIndex:1,sortDirection:0,sortType:2},o=i.state.commentList,r=-1,c=1,a=[];if(o.forEach((function(e,n){e.commentId==t&&(r=n,c=e.childCommentsPageIndex,a=i.getExcludeCommentIds(e.childComments))})),t&&!o[r].showSubCommentLoading){o[r].showSubCommentLoading=!0,i.setState({commentList:o});var s={articleId:i.id,topLevelCommentId:t,levels:n.levels,isContentEncode:!1,displayType:n.displayType,excludeCommentIds:a,addExcludeCount:!0,para:{pageIndex:c||1,pageSize:n.pageSize||10,sortType:n.sortType||0,sortDirection:0}},l=o[r].childComments;mn(s,(function(e){if(gn(e)&&e.data.comments&&e.data.comments.length>0){if(e=e.data,o[r].showSubCommentLoading=!1,e.comments&&e.comments.length){var t=l.concat(e.comments);t&&t.length<e.totalCount&&o[r].childCommentsPageIndex++,o[r].childComments=t}i.setState({commentList:o})}else o[r].showSubCommentLoading=!1,i.setState({commentList:o})}),(function(e){i.setState({commentList:o})}))}})),(0,l.Z)((0,c.Z)(i),"toInputFocus",(function(){i.props.ubtTrace("c_gs_tripshoot_comment_inputbox",{articleId:i.id}),console.log("c_gs_tripshoot_comment_inputbox",{articleId:i.id}),i.hideNotify(),i.inputMaskRef&&i.inputMaskRef.show()})),(0,l.Z)((0,c.Z)(i),"showCommentAction",(function(e,t,n,o,r){r.stopPropagation(),i.topCommentId=t,i.toReply_temp_currentCommentId=o,i.toReply_temp_nickname=e;var c=i.props.cwx&&i.props.cwx.user.isLogin();c?(i.setState({actionVisible:!0,isself:n}),i.props.ubtTrace("c_gs_tripshoot_comment_commentspot",{articleId:i.id,commentId:o}),console.log("c_gs_tripshoot_comment_commentspot",{articleId:i.id,commentId:o})):i.toLogin()})),(0,l.Z)((0,c.Z)(i),"hideAction",(function(){i.setState({actionVisible:!1})})),(0,l.Z)((0,c.Z)(i),"showAction",(function(){i.setState({actionVisible:!0})})),(0,l.Z)((0,c.Z)(i),"handleReply",(function(){i.toReply(i.toReply_temp_nickname,i.toReply_temp_currentCommentId),i.setState({actionVisible:!1})})),(0,l.Z)((0,c.Z)(i),"actionDeleteComment",(function(){i.props.ubtTrace("c_gs_tripshoot_detail_commentmodule_delete",{articleId:i.id});var e=i.toReply_temp_currentCommentId,t={action:"delete",commentId:e,comment:{articleId:i.id}};pn(t,(function(t){var n,o="";if(gn(t)&&null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(n=n.result)&&void 0!==n&&n.result){var r=i.deleteComment(e,i.topCommentId);i.topCommentId="",o="\u5220\u9664\u8bc4\u8bba\u6210\u529f",i.props.deleteCommentNotify&&i.props.deleteCommentNotify(e,r)}else o="\u5220\u9664\u8bc4\u8bba\u5931\u8d25";i.hideAction(),Z().showToast({title:o,icon:"none"})}))})),(0,l.Z)((0,c.Z)(i),"refreshComment",(function(e,t){var n=xn(i.state.commentList,e,t);i.setState({commentList:n})})),(0,l.Z)((0,c.Z)(i),"addComment",(function(e,t,n){var o;return t?(n?i.state.commentList.forEach((function(i){if(i.commentId==n){i.childComments||(i.childComments=[]);var o=i.childComments.findIndex((function(e){return e.commentId==t}));i.childComments.splice(o+1,0,e),i.childTotalCount=(i.childTotalCount||0)+1}})):i.state.commentList.forEach((function(n){n.commentId==t&&(n.childComments||(n.childComments=[]),n.childComments.push(e),n.childTotalCount=(n.childTotalCount||0)+1)})),o=i.state.commentList):(o=[e].concat(i.state.commentList),i.setState({scrollTop:0})),i.setState({commentList:o,totalCount:i.state.totalCount+1}),o})),(0,l.Z)((0,c.Z)(i),"deleteComment",(function(e,t){var n,o=i.state.totalCount;return n=t&&e!=t?i.state.commentList.map((function(n){var i=!1;if(n.commentId==t&&(n.childTotalCount=n.childTotalCount-1,n.childComments=(n.childComments||[]).map((function(t){var i=!1;if(t.commentId==e){t.publishStatus=3,t.content="\u8be5\u56de\u590d\u5df2\u5220\u9664";var r=n.childComments.filter((function(t){return 5!=t.publishStatus&&3!=t.publishStatus&&t.refComment&&t.refComment.commentId==e}));i=!(r.length>0)}return i&&o--,i?null:t})).filter((function(e){return!!e}))),5==n.publishStatus||3==n.publishStatus)if(n.childComments){var r=n.childComments.filter((function(e){return 5!=e.publishStatus&&3!=e.publishStatus}));i=!(r.length>0)}else i=!0;return i&&o--,i?null:n})).filter((function(e){return!!e})):i.state.commentList.map((function(t){var n=!1;if(t.commentId==e){if(t.publishStatus=3,t.content="\u8be5\u8bc4\u8bba\u5df2\u5220\u9664",t.childComments){var i=t.childComments.filter((function(e){return 5!=e.publishStatus&&3!=e.publishStatus}));n=!(i.length>0)}else n=!0;n&&o--}return n?null:t})).filter((function(e){return!!e})),i.setState({commentList:n,totalCount:o}),i.props.ubtTrace("c_gs_tripshoot_comment_delete",{articleId:i.id,commentId:e}),console.log("c_gs_tripshoot_comment_delete",{articleId:i.id,commentId:e}),n})),(0,l.Z)((0,c.Z)(i),"handScroll",(function(e){var t;i.state.scrollTop=(null===(t=e.detail)||void 0===t?void 0:t.scrollTop)||0})),(0,l.Z)((0,c.Z)(i),"commentSubmitNotify",(function(e){var t=i.addComment(e,i.replyCommentId,i.topCommentId);i.topCommentId="",i.replyCommentId=0,i.props.commentSubmitNotify(e,t)})),(0,l.Z)((0,c.Z)(i),"hideNotify",(function(){i.topCommentId="",i.replyCommentId=0})),(0,l.Z)((0,c.Z)(i),"show",(function(){i.setState({visible:!0})})),(0,l.Z)((0,c.Z)(i),"hide",(function(e){i.props.ubtTrace("c_gs_tripshoot_comment_close",{articleId:i.id}),console.log("c_gs_tripshoot_comment_close",{articleId:i.id}),i.setState({visible:!1}),i.props.closeNotify&&i.props.closeNotify(e)})),i.pageIndex=1,i.id="",i.topCommentId="",i.replyCommentId=0,i.inputMaskRef=null,i.state={commentList:[],totalCount:0,isloading:!1,isLoadEnd:!1,sortType:0,listLoading:!1,scrollTop:0,visible:!1,actionVisible:!1,isself:!1},i}return(0,r.Z)(n,[{key:"componentDidUpdate",value:function(e){var t,n,i=e.isVisible,o=this.props,r=o.articleId,c=o.isVisible;r&&"0"!=r&&r!=this.id&&(this.id=r,null===(t=this.props.cwx)||void 0===t||null===(n=t.getCEmojiMapData)||void 0===n||n.call(t),this.initCommentList());!i&&c&&(this.props.ubtTrace("o_gs_tripshoot_comment_expose",{articleId:this.id}),console.log("o_gs_tripshoot_comment_expose",{articleId:this.id}))}},{key:"showAll",value:function(e){this.show(),this.inputMaskRef&&this.inputMaskRef.show(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.replyList,i=t.showVote,o=this.state,r=o.totalCount,c=o.listLoading,a=o.scrollTop,s=o.isloading,l=o.sortType,u=o.isLoadEnd,d=o.visible,m=o.actionVisible,p=o.isself,h=p,f={};return(0,Mt.jsxs)(E.Fragment,{children:[d&&(0,Mt.jsx)(L.View,{className:"comment-list-modal",onClick:function(){return e.hide("mask")},catchMove:!0,style:f,children:(0,Mt.jsxs)(L.View,{className:"comment-content",onClick:function(e){return e.stopPropagation()},children:[(0,Mt.jsxs)(L.View,{className:"top-title",children:[(0,Mt.jsx)(L.Image,{className:"close-icon",onClick:function(t){t.stopPropagation(),e.hide("icon")},src:"https://pages.c-ctrip.com/livestream/tripshoot/Close.svg"}),i?(0,Mt.jsx)(L.View,{className:"total-count",children:"\u6295\u7968"}):(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsxs)(L.View,{className:"total-count",children:["\u5168\u90e8\u8bc4\u8bba",r>0&&(0,Mt.jsxs)(E.Fragment,{children:["\uff08",r,"\uff09"]})]}),r>0&&(0,Mt.jsxs)(L.View,{className:"filter-content",children:[(0,Mt.jsx)(L.View,{className:"filter-item ".concat(0===l?"active":""),onClick:function(){return e.switchSortType(0)},children:"\u9ed8\u8ba4"}),(0,Mt.jsx)(L.View,{className:"filter-item ".concat(3===l?"active":""),onClick:function(){return e.switchSortType(3)},children:"\u6700\u65b0"})]})]})]}),(0,Mt.jsxs)(L.ScrollView,{"scroll-top":a,"scroll-with-animation":!0,"scroll-y":!0,scrollTop:a,scrollWithAnimation:!0,scrollY:!0,onScrollToLower:this.handleLoadMore,className:"common-commentList",onScroll:this.handScroll,children:[i?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(Sn,{articleId:this.props.articleId,cwx:this.props.cwx,ubtTrace:this.props.ubtTrace.bind(this),toLogin:this.toLogin.bind(this)}),(0,Mt.jsxs)(L.View,{className:"top-title",children:[(0,Mt.jsxs)(L.View,{className:"total-count-left",children:["\u5171 ",r," \u6761\u8bc4\u8bba"]}),r>0&&(0,Mt.jsxs)(L.View,{className:"filter-content",children:[(0,Mt.jsx)(L.View,{className:"filter-item ".concat(0===l?"active":""),onClick:function(){return e.switchSortType(0)},children:"\u9ed8\u8ba4"}),(0,Mt.jsx)(L.View,{className:"filter-item ".concat(3===l?"active":""),onClick:function(){return e.switchSortType(3)},children:"\u6700\u65b0"})]})]})]}):null,c?(0,Mt.jsx)(L.View,{className:"loadingContainer",children:(0,Mt.jsxs)(L.View,{className:"loading",children:[(0,Mt.jsx)(L.Image,{className:"loadingImg",src:"https://dimg02.c-ctrip.com/images/1008170000012pqy49C5D.png"}),(0,Mt.jsx)(L.View,{className:"loadingText",children:"\u52a0\u8f7d\u4e2d..."})]})}):r>0?(0,Mt.jsxs)(Mt.Fragment,{children:[this._renderList(),s&&(0,Mt.jsxs)(L.View,{className:"isloading",children:[(0,Mt.jsx)(L.Image,{className:"loading-icon",src:"https://dimg02.c-ctrip.com/images/1008170000012pqy49C5D.png"}),(0,Mt.jsx)(L.View,{className:"loading-text",children:"\u52a0\u8f7d\u4e2d..."})]}),u&&(0,Mt.jsx)(L.View,{className:"load-end",children:(0,Mt.jsx)(L.Text,{className:"a",decode:!0,children:"- \u5df2\u7ecf\u5230\u5e95\u4e86\u54df -"})})]}):(0,Mt.jsxs)(L.View,{className:"empty-content",children:[(0,Mt.jsx)(L.Image,{className:"empty-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/noComment.png"}),(0,Mt.jsx)(L.View,{className:"empty-text",children:"\u8fd8\u6ca1\u6709\u4eba\u8bc4\u8bba\uff0c\u6210\u4e3a\u7b2c\u4e00\u4e2a\u62a2\u6c99\u53d1\u7684\u4eba\u5427\uff5e"})]})]}),(0,Mt.jsx)(L.View,{className:"prise-bottom",children:(0,Mt.jsx)(L.View,{className:"prise-commentbox",onClick:this.toInputFocus,children:"\u5185\u5bb9\u6709\u7528\u5417\uff1f\u7559\u4e0b\u4f60\u7684\u60f3\u6cd5"})})]})}),(0,Mt.jsx)(jn,{ref:function(t){return e.inputMaskRef=t},articleId:this.props.articleId,commentSubmitNotify:this.commentSubmitNotify.bind(this),hideNotify:this.hideNotify.bind(this),ubtTrace:this.props.ubtTrace,replyCommentId:this.replyCommentId,replyList:n}),m&&(0,Mt.jsx)(L.View,{className:"comp-mask comp-comment-hint-mask",onClick:this.hideAction,catchMove:!0,children:(0,Mt.jsxs)(L.View,{className:"hint-mask-inner",children:[(0,Mt.jsx)(L.View,{className:"btn ".concat(h?"btn_reply ":"bottom_reply"),onClick:this.handleReply,children:"\u56de\u590d"}),h&&(0,Mt.jsx)(L.View,{className:"btn btn-delete",onClick:this.actionDeleteComment,children:"\u5220\u9664"}),(0,Mt.jsx)(L.View,{className:"btn btn-cancel",onClick:this.hideAction,children:"\u53d6\u6d88"})]})})]})}}]),n}(E.Component);function kn(e,t){return e.articleId==t.articleId}var Nn=(0,E.memo)(bn,kn);bn.defaultProps={cwx:null,articleId:"",clientAuth:"",ubtTrace:function(){},showVote:!1,commentTextStyle:{wrapperStyle:"",cemojiStyle:""},replyList:[],commentSubmitNotify:function(e){},praiseNotify:function(e,t){},deleteCommentNotify:function(e){},loginCallback:function(){},closeNotify:function(e){}};var En,Ln,Vn,Zn=Nn,Rn=je.getSystemInfoSync().platform,An=function(e){var t=e.showVote,n=e.articleId,i=e.clientAuth,o=e.closeCallback,r=E.useRef(),c="android"===Rn;return(0,E.useEffect)((function(){null===r||void 0===r||r.current.show()}),[]),n&&i?(0,Mt.jsx)(L.CustomWrapper,{children:(0,Mt.jsx)(Zn,{cwx:je,ref:function(e){r.current=e},articleId:n,clientAuth:i,showVote:t,commentTextStyle:{wrapperStyle:"\n              font-size: ".concat(de(28),";\n              color: #333;\n              line-height: ").concat(de(38),";\n              font-weight: ").concat(c?"500":"normal",";\n            "),cemojiStyle:"\n              height: ".concat(de(34),";\n              vertical-align: text-bottom;\n            ")},commentSubmitNotify:function(e){},praiseNotify:function(e,t){},deleteCommentNotify:function(e){},loginCallback:function(){},closeNotify:function(e){o&&o()}})}):null},On=An,Pn=function(e){var t=e.videoInfo,n=e.products,i=e.doubleClick,o=e.netWorkErr,r=t.contentId,c=void 0===r?"":r,a=t.isFollow,s=t.isLike,l=t.isHost,u=t.likeCount,d=t.isCollected,m=t.collectCount,p=t.commentCount,f=t.author,x=(t.shareInfo,t.liveInfo,(0,E.useState)(!1)),C=(0,N.Z)(x,2),w=C[0],I=C[1],y=(0,E.useState)(!1),T=(0,N.Z)(y,2),j=T[0],S=T[1],b=(0,E.useState)(!1),k=(0,N.Z)(b,2),Z=k[0],P=k[1],F=(0,E.useState)(!1),D=(0,N.Z)(F,2),U=D[0],M=D[1],B=(0,E.useContext)(R),W=B.urlParams,G=B.videoList,H=B.setVideoList,q=(0,E.useState)(!1),z=(0,N.Z)(q,2),X=z[0],Y=z[1],J=(0,E.useRef)(null);(0,E.useEffect)((function(){i&&$()}),[i]),(0,V.useDidHide)((function(){Z?P(!1):U&&M(!1)}));var Q=function(){te(A.ATTENTION,!a)},$=function(){te(A.LIKE,!s)},ee=function(){te(A.COLLECT,!d)},te=function(e,t){Ne((function(){return ne(e,t)}))},ne=function(t,n){n&&(t==A.LIKE?(I(!0),En=setTimeout((function(){clearTimeout(En),I(!1),e.resetDoubleClick()}),1500)):t==A.COLLECT&&(S(!0),Ln=setTimeout((function(){clearTimeout(Ln),S(!1)}),1100))),ie({vId:c,type:t,status:n});var i=Re({targetType:t==A.ATTENTION?"author":"article",action:n?t:"cancel_".concat(t),contentId:{id:t==A.ATTENTION?f.clientAuth:c,productType:W.productType}});i||$e.devTrace("operateVideo error: ".concat(t,", ").concat(n))},ie=function(e){e.vId;var t=e.type,n=e.status,i=JSON.parse(JSON.stringify(G)),o=K(),r=i[o],c=r.isLike,a=r.isFollow,s=r.isCollected,l=r.likeCount,u=r.collectCount,d=(r.commentCount,r.author),m=!0;t==A.LIKE?n==c?m=!1:(i[o].isLike=n,i[o].likeCount=n?l+1:l-1,bt(n?g.LIKE:g.DISLIKE)):t==A.COLLECT?n==s?m=!1:(i[o].isCollected=n,i[o].collectCount=n?u+1:u-1,Wt({title:"".concat(n?"\u6536\u85cf\u6210\u529f":"\u5df2\u53d6\u6d88\u6536\u85cf"),icon:"none"}),kt(n?_.COLLECT:_.DISCOLLECT)):t==A.ATTENTION&&(n==a?m=!1:(Wt({title:"\u5173\u6ce8\u6210\u529f",icon:"none"}),i=i.map((function(e){return e.author.clientAuth===d.clientAuth&&(e.isFollow=n),e})),St())),m&&H(i)},oe=function(e){Y(!0),setTimeout((function(){var e;null===J||void 0===J||null===(e=J.current)||void 0===e||e.show()}),0),Nt()},re=function(e){P(!0),Et(),Lt(h.EXPOSURE)},ae=function(e){switch(e){case"shoppingCart":M(!1),Ft();break;case"share":P(!1);break;default:break}},se=function(){var e=f||{},t=e.liveStatus,n=e.coverImage,i=n||{},o=i.dynamicUrl,r=void 0===o?"":o;return(0,Mt.jsxs)(L.View,{className:"video-tools__item",onClick:ue,children:[(0,Mt.jsxs)(L.View,{className:"video-tools__avatar ".concat(t==O.ON&&"live"),onClick:function(){return Ut(f,v.IMAGE)},children:[(0,Mt.jsx)(L.Image,{className:"video-tools__avatar__image",src:r,mode:"aspectFit"}),t==O.ON&&(0,Mt.jsx)(L.View,{className:"video-tools__avatar__live",children:"\u76f4\u64ad"})]}),!a&&!l&&(0,Mt.jsx)(L.View,{className:"video-tools__avatar__follow ",onClick:Q,children:(0,Mt.jsx)(L.View,{className:"iconfont-add"})})]})},le=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsxs)(L.View,{className:"video-tools__item",onClick:$,children:[w?(0,Mt.jsx)(L.Image,{className:"video-tools__item__icon video-tools__item__animation",src:Ue}):(0,Mt.jsx)(L.View,{className:"video-tools__item__icon iconfont-liked ".concat(s?"color-red ":"")}),(0,Mt.jsx)(L.View,{className:"video-tools__item__text",children:ce(u)||"\u70b9\u8d5e"})]})})},de=function(){return(0,Mt.jsxs)(L.View,{className:"video-tools__item",onClick:oe,children:[(0,Mt.jsx)(L.View,{className:"iconfont-comment video-tools__item__icon"}),(0,Mt.jsx)(L.View,{className:"video-tools__item__text",children:ce(p)||"\u8bc4\u8bba"})]})},me=function(){return(0,Mt.jsxs)(L.View,{className:"video-tools__item",onClick:ee,children:[j?(0,Mt.jsx)(L.Image,{className:"video-tools__item__icon video-tools__item__animation",src:Me}):(0,Mt.jsx)(L.View,{className:"video-tools__item__icon ".concat(d?"color-red iconfont-collected":"color iconfont-collect")}),(0,Mt.jsx)(L.View,{className:"video-tools__item__text",children:ce(m)||"\u6536\u85cf"})]})},pe=function(){return(0,Mt.jsxs)(L.View,{className:"video-tools__item",onClick:re,children:[(0,Mt.jsx)(L.View,{className:"video-tools__item__icon",children:(0,Mt.jsx)(L.View,{className:"iconfont-share"})}),(0,Mt.jsx)(L.View,{className:"video-tools__item__text",children:"\u5206\u4eab"})]})},he=function(){return(0,Mt.jsxs)(L.View,{onClick:ue,catchMove:!0,children:[(0,Mt.jsx)(Bt,{handleClick:function(){return ae("share")}}),(0,Mt.jsx)(Gt,{title:"\u56fe\u7247\u5206\u4eab\u81f3",bgColor:"#f4f4f4",handleClose:function(){return ae("share")},videoInfo:t})]})},fe=function(){M(!0),Ot(h.CLICK)},ve=function(){var e=n||{},t=e.totalCount,i=e.type;return(0,Mt.jsx)(L.View,{className:"video-tools__item",style:{marginTop:14},onClick:fe,children:t?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(L.Image,{src:Be,className:"video-tools__item__shoppingcartImage"}),"all"==i&&(0,Mt.jsx)(L.View,{className:"video-tools__item__shoppingcart",children:null===n||void 0===n?void 0:n.totalCount})]}):null})},ge=function(){return(0,Mt.jsxs)(L.View,{onClick:ue,catchMove:!0,children:[(0,Mt.jsx)(Bt,{handleClick:function(){return ae("shoppingCart")}}),(0,Mt.jsx)(ln,{videoInfo:t,products:n,netWorkErr:o,handleClose:function(){return ae("shoppingCart")}})]})},_e=function(){return(0,Mt.jsx)(On,{articleId:c,clientAuth:null===f||void 0===f?void 0:f.clientAuth,closeCallback:function(){Y(!1)}})};return(0,Mt.jsxs)(L.View,{className:"video-tools",children:[se(),le(),de(),me(),pe(),ve(),Z&&he(),U&&ge(),X&&_e()]})},Fn=(0,E.memo)(Pn),Dn={1:"#FFC054",2:"#99CEFB"},Un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,n=e.r,i=e.g,o=e.b,r=e.a,c=void 0===r?1:r;return"rgba(".concat(n,",").concat(i,",").concat(o,",").concat(Math.floor(c*t)/t,")")},Mn=function(e){var t=e.slice(1),n=1;3===t.length&&(t="".concat(t[0]).concat(t[0]).concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2])),8===t.length&&(n=parseInt(t.slice(6),16)/255,t=t.slice(0,6));var i=parseInt(t,16);return{r:i>>16&255,g:i>>8&255,b:255&i,a:n}},Bn=function(e){var t=e.match(/(\d(\.\d+)?)+/g)||[],n=t.map((function(e){return parseInt(e,10)}));return{r:n[0],g:n[1],b:n[2],a:parseFloat(t[3])}},Wn=function(e){if(e.startsWith("#"))return Mn(e);if(e.startsWith("rgb"))return Bn(e);if("transparent"===e)return Mn("#00000000");throw new Error("color string error: ".concat(e))},Kn=function(e){var t=Wn(e);return Un(t)},Gn=n(32180)["document"],Hn=30,qn=function(e){var t=e.videoInfo,n=e.curIndex,i=e.index,o=(t.contentId,t.location),r=t.district,c=t.articleTitle,a=t.contentWithoutCtag,s=t.description,l=t.author,u=(t.articleLevel,t.publishedLocation),d=(t.voteInfo,a||c),m=(0,E.useState)(!0),p=(0,N.Z)(m,2),f=p[0],g=p[1],_=(0,E.useState)(!0),x=(0,N.Z)(_,2),C=x[0],w=x[1],I=(0,E.useState)(!1),y=(0,N.Z)(I,2),T=(y[0],y[1],(0,E.useState)(!1)),j=(0,N.Z)(T,2),S=j[0],b=j[1],k=(0,E.useState)(Hn),V=(0,N.Z)(k,2),R=V[0],A=V[1],O=(0,E.useRef)(!1);(0,E.useEffect)((function(){Vn=Vn||P(),A(Vn)}),[]),(0,E.useEffect)((function(){if(!oe(t)&&!oe(d))if(i==K()&&O.current)Vt(h.EXPOSURE);else{var e=null===d||void 0===d?void 0:d.replace(/\r?\n|\r/g," "),n=(e||"").length>=R;O.current=n,w(n)}}),[n]),(0,E.useEffect)((function(){if(!f){var e=function(e){ue(e);var t=e.target.dataset,n=t.wxurl,i=t.h5url;st(n,i)},t=Gn.getElementById("descEle");if(t)return t.addEventListener("tap",e),function(){t.removeEventListener("tap",e)}}}),[f]);var P=function(){var e=Hn,t=Z().createSelectorQuery();return t.select("#descContainer").boundingClientRect()&&t.exec((function(t){if(t[0]&&t[0].width){var n=je.getSystemInfoSync(),i=n.pixelRatio;e=Math.floor(t[0].width/16*i)-7}})),e},F=function(){if(s){var e=s.replace(/<ctag/g,"<span class='color-blue1' ");return e=e.replace(/\/ctag>/g,"/span>"),e=e.replace(/<poi/g,"<span class='color-blue1 marginX4'"),e=e.replace(/\/poi>/g,"/span>"),e=e.replace(/wxurl=/g,"data-wxurl="),e=e.replace(/h5url=/g,"data-h5url="),e='<div id="descEle" style="display: inline">'.concat(e,"</div>"),(0,Mt.jsx)(L.View,{dangerouslySetInnerHTML:{__html:e},className:"pre-wrap",style:{display:"inline"}})}},D=function(e){ue(e),C?(g(!f),f&&Vt(h.CLICK)):b(!S)},U=function(){return(0,Mt.jsxs)(L.View,{className:"flex-align margin-top12",children:[r&&r.districtName&&(0,Mt.jsx)(qt,{type:"location",poiType:r.poiType,text:r.districtName,iconUrl:r.poiTypeIcon,wxUrl:r.jumpWXUrl,h5Url:r.jumpH5Url}),o&&o.text&&(0,Mt.jsx)(qt,{type:"location",poiType:o.poiType,text:o.text,iconUrl:o.poiTypeIcon,wxUrl:o.jumpWXUrl,h5Url:o.jumpH5Url})]})},M=function(){l.tagStyleRgbaW;var e=l.tagStyleRgba,t=(l.tagStyleFontW,l.tagStyleFont),n=l.identityTagStyle,i=(l.tagStyleBackW,l.tagStyleBack),o=l.nickName,r=l.identityTypeName,c=l.vIcon,a=t||e||n&&Dn[n],s=e||i;return o||r?(0,Mt.jsxs)(L.View,{className:"flex-align margin12X",id:"detailsContainer",children:[o&&(0,Mt.jsxs)(L.View,{className:"font-size32 margin-right32 bold line-limited1",onClick:function(){return Ut(l,v.NAME)},children:["@",o]}),r&&(0,Mt.jsx)(qt,{type:"identity",text:r,iconUrl:c,color:Kn(a),bgColor:Kn(s)})]}):(0,Mt.jsx)(Mt.Fragment,{})},B=function(){var e=null===d||void 0===d?void 0:d.replace(/\r?\n|\r/g," ");return(0,Mt.jsx)(L.View,{id:"descContainer",children:C?(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsxs)(L.Text,{children:[null===e||void 0===e?void 0:e.substring(0,R),"... "]}),(0,Mt.jsx)(L.Text,{className:"color-blue2",onClick:D,children:"\u5c55\u5f00"})]}):(0,Mt.jsx)(L.Text,{children:e})})},W=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(L.ScrollView,{scrollY:!0,className:"video-article__unfold",children:F()})})};return(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(L.View,{className:"video-float",children:U()}),M(),(0,Mt.jsxs)(L.View,{className:"margin-top12",children:[(0,Mt.jsx)(L.View,{className:"font-size30 line-height42",onClick:D,children:f?B():W()}),f?S&&(0,Mt.jsx)(L.View,{className:"margin-top24 line-height24 font-size22 opacity_5 line-ellipsis",children:u||""}):(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(Bt,{style:{backgroundColor:"rgba(0,0,0,0.7)",zIndex:-1},handleClick:D}),(0,Mt.jsxs)(L.View,{className:"flex-spacebetween margin-top12 line-height36",onClick:D,children:[(0,Mt.jsx)(L.View,{className:"flex1 font-size22 opacity_5 line-ellipsis margin-right32",children:u||""}),(0,Mt.jsx)(L.View,{className:"color-blue2 bold font-size28",children:"\u6536\u8d77"})]})]})]})]})},zn=(0,E.memo)(qn);function Xn(e){return Yn.apply(this,arguments)}function Yn(){return Yn=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i,o,r;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.contentId,i=t.productType,o={contentId:{id:n,productType:i},coordinate:{type:"GCJ02",latitude:0,longitude:0,overSea:!0}},r={url:U.contentProduct,param:o},e.abrupt("return",Ve(r));case 5:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}var Jn="CP0031501",Qn=function(){var e=je.clientID,t=je.appId||be;return JSON.stringify({AppId:t,clientid:e})},$n=function(){var e=je.clientID,t=je.scene;return{clientId:e,scene:t}};function ei(){return ti.apply(this,arguments)}function ti(){return ti=(0,k.Z)((0,b.Z)().mark((function e(){var t,n,i,o,r,c,a,s,l,u,d,m,p,h,f,v,g;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},t.eventPoint=Jn,t.ruleParams=Qn(),t.eventBody=$n(),e.next=6,Ve({url:U.getRiskInfo,param:t});case 6:n=e.sent,i=n.data||{},o=i.isRisk,r=void 0===o?2:o,c=i.isInfoSecurityRisk,a=void 0===c?"":c,s=i.infoSecurityRiskLevel,l=void 0===s?"":s,u=i.isBusinessRisk,d=void 0===u?"":u,m=i.businessRiskLevel,p=void 0===m?"":m,h=i.requestId,f=void 0===h?"":h,v=i.eventId,g=void 0===v?"":v,vt({isRisk:r,isInfoSecurityRisk:a,infoSecurityRiskLevel:l,isBusinessRisk:d,businessRiskLevel:p,requestId:f,eventId:g});case 10:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}var ni,ii,oi=function(e){return e[e["SINGLE_CLICK"]=0]="SINGLE_CLICK",e[e["DOUBLE_CLICK"]=1]="DOUBLE_CLICK",e}({}),ri=function(){var e=(0,E.useState)(0),t=(0,N.Z)(e,2),n=t[0],i=t[1];return function(e){return function(t){var o=t.timeStamp,r=o-n;i(o),r<300?(clearTimeout(ni),e&&e(oi.DOUBLE_CLICK)):ni=setTimeout((function(){clearTimeout(ni),e&&e(oi.SINGLE_CLICK)}),300)}}},ci=function(e,t){return Math.atan2(t,e)*(180/Math.PI)},ai=function(e){var t=e.toLeft,n=e.toRight,i=e.disable,o=(0,E.useRef)(0),r=(0,E.useRef)(0),c=(0,E.useRef)(0),a=(0,E.useCallback)((function(e){if(!i){var t=e.changedTouches[0],n=t.pageX,a=t.pageY;o.current=n,r.current=a,c.current=Date.now()}}),[i]),s=(0,E.useCallback)((function(e,t){var n=t-r.current,i=ci(e,n);return Math.abs(i)}),[]),l=(0,E.useCallback)((function(e){if(!i){var r=e.changedTouches[0],a=r.pageX,l=r.pageY,u=a-o.current;if(u>0){if(!n||s(u,l)>20)return;(u>70||u>10&&Date.now()-c.current<200)&&n()}else{if(!t||s(u,l)<160)return;(u<-70||u<-10&&Date.now()-c.current<200)&&t()}}}),[i,s,t,n]);return{onTouchStart:a,onTouchEnd:l}},si=ai,li={activeColor:"#4DAAF8",backgroundColor:"#666"},ui=function(e){var t=e.value,n=e.duration,i=(0,E.useContext)(R),o=i.networkError,r=(0,E.useState)(!1),c=(0,N.Z)(r,2),a=c[0],s=c[1],l=(0,E.useState)(0),u=(0,N.Z)(l,2),d=u[0],m=u[1],p=(0,E.useState)(0),h=(0,N.Z)(p,2),f=h[0],v=h[1],g=(0,E.useState)(0),_=(0,N.Z)(g,2),x=_[0],C=_[1];(0,E.useEffect)((function(){ii||(ii=Z().getSystemInfoSync().screenWidth-Number(de(48,!1)))}),[]);var w=function(t){a&&(s(!1),e.onTouchEnd(x))},I=function(t){s(!0),e.onTouching(!0);var n=t.touches[0].clientX;m(n);var i=n/ii*100;v(i)},y=function(e){if(ue(e),a){var t=e.touches[0].clientX,n=f+(t-d)/ii*100,i=n<0?0:n>=100?100:n;C(i)}else I(e)};return(0,Mt.jsx)(Mt.Fragment,{children:o?null:(0,Mt.jsxs)(Mt.Fragment,{children:[a&&(0,Mt.jsxs)(L.View,{className:"video-progress__time",children:[(0,Mt.jsx)(L.View,{children:se(+x/100*n)}),(0,Mt.jsx)(L.View,{className:"video-progress__time__split opacity_4"}),(0,Mt.jsx)(L.View,{className:"opacity_4",children:se(+n)})]}),(0,Mt.jsx)(L.View,{id:"slider",className:"video-progress ".concat(a?"active":"inactive"),onTouchMove:y,onTouchEnd:w,children:(0,Mt.jsx)(L.Slider,{step:1,min:0,max:100,disabled:!0,trackSize:a?"4":"1",value:a?x:t,blockColor:a?"#fff":"transparent",blockSize:16,activeColor:li.activeColor,backgroundColor:li.backgroundColor})})]})})},di=(0,E.memo)(ui),mi="taro_video_swiper_change_event",pi=function(e,t){je.Observer.noti(mi,{curIndex:e,lastIndex:t})},hi=function(e){je.Observer.addObserverForKey(mi,e)},fi=function(e){e?je.Observer.removeAllObserversForKey(e):je.Observer.removeAllObserversForKey(mi)},vi=function(e){return e[e["VIDEO"]=1]="VIDEO",e[e["DETAILS"]=3]="DETAILS",e}(vi||{}),gi=0,_i=function(e){var t=(0,E.useContext)(R),n=t.urlParams,i=t.networkError,o=e.index,r=e.videoInfo,c=(0,E.useState)(K()),a=(0,N.Z)(c,2),s=a[0],u=a[1],d=(0,E.useState)({}),m=(0,N.Z)(d,2),_=m[0],x=m[1],C=(0,E.useState)(void 0),w=(0,N.Z)(C,2),T=w[0],j=w[1],Z=(0,E.useState)(!1),A=(0,N.Z)(Z,2),O=A[0],P=A[1],F=(0,E.useState)(0),D=(0,N.Z)(F,2),U=D[0],B=D[1],W=(0,E.useState)(!1),G=(0,N.Z)(W,2),H=G[0],Y=G[1],Q=(0,E.useState)({}),$=(0,N.Z)(Q,2),ee=$[0],te=$[1],ne=(0,E.useState)(!1),ie=(0,N.Z)(ne,2),ce=ie[0],ae=ie[1],se=(0,E.useState)(!1),le=(0,N.Z)(se,2),de=le[0],me=le[1],fe=(0,E.useState)(!1),ve=(0,N.Z)(fe,2),_e=ve[0],xe=ve[1],Ce=(0,E.useState)(!1),Te=(0,N.Z)(Ce,2),Se=Te[0],be=Te[1],ke=(0,E.useState)(!1),Ne=(0,N.Z)(ke,2),Ve=Ne[0],Ze=Ne[1],Re=(0,E.useState)(!1),Ae=(0,N.Z)(Re,2),Oe=Ae[0],Pe=Ae[1],Fe=(0,E.useRef)(!1),De=(0,E.useRef)({}),Ue=(0,E.useRef)(void 0),Me=ri(),Be=(r.shareInfo,r.videoDurationSeconds),We=void 0===Be?0:Be,Ke=r.contentId,Ge=r.videoWidth,He=void 0===Ge?0:Ge,qe=r.videoHeight,ze=void 0===qe?1:qe,Xe=r.author,Ye=r.videoUrl,Je=(r.videoSize,r.imageUrl);r.mediaId;(0,E.useEffect)((function(){if(0==o){if(oe(Ye))return void yt(y.PAGE_LOAD_FAILED);Ze(!0),Fe.current=!0,it(),tt(),ge((function(){ei()}))}et(0),hi(Qe)}),[]),(0,E.useEffect)((function(){Ve?z(K(),o):J(o)}),[Ve]),(0,V.useDidHide)((function(){K()==o&&(gt(),Ie({startTime:+ye("play")}))}));var Qe=function(e){var t=e.curIndex,n=e.lastIndex;X(t,o),t!=n&&(re(n)||P(!1),t==o?$e(t,n):et(t))},$e=function(e,t){oe(Ye)?yt(y.PAGE_LOAD_FAILED):(Ze(!0),u(e),Fe.current=!0,it(),tt(e),ge((function(){ei()})),!re(t)&&gt({lastIndex:t}))},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e!=o){var t=Math.abs(e-o)<=vi.VIDEO,n=!t;t&&(Ze(t),Fe.current=!0,it()),"undefined"!=typeof Ue.current&&(Ue.current=void 0,j(void 0)),n&&Fe.current&&(Ze(!1),Fe.current=!1)}},tt=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var t,i,r,c,a,s,l,u,d,m,p,f,v=arguments;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:0,Ke&&o==K()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Xn({contentId:Ke,productType:n.productType});case 5:if(i=e.sent,r=i.data,c=i.statusCode,c===M.OK){e.next=11;break}return ae(!0),e.abrupt("return");case 11:a=r||{},s=a.allGoods,l=a.videoGoods,u=a.recommends,d=s.totalCount?(0,S.Z)((0,S.Z)({},s),{},{type:"all"}):(0,S.Z)((0,S.Z)({},u),{},{type:"recommends"}),x(d),oe(l.items)||(m=JSON.parse(l.items[0]),p=m.goodsListShowStartSecond,f=m.goodsListShowEndSecond,nt(t,p,f,m)),_t(r),(s.totalCount||u.totalCount)&&Ot(h.EXPOSURE);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(e,t,n,i){n&&pe({index:e,startTime:t,endTime:n,startCallback:function(){De.current=i,j(!0),Ue.current=!0,At({productInfo:i,actionType:h.EXPOSURE}),Et(en.EXPO)},endCallback:function(){j(!1),Ue.current=!1}})},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ze,n=je.getSystemInfoSync(),i=n.screenWidth,r=n.screenHeight,c={},a=e/t;a<=0||(a>=1?(me(!0),c["height"]=Math.floor(i/a)+"px",K()==o&&Tt({actionType:h.EXPOSURE})):(c["height"]="100vh",c["width"]=Math.floor(a*r/i*100)+"vw"),te(c))},ot=function(e){if(e==oi.SINGLE_CLICK)return rt(),void be(!1);if(e==oi.DOUBLE_CLICK){var t=Ee();t?r.isLike||(be(!0),bt(g.DOUBLELIKE)):Le((function(){}))}},rt=function(){var e=q(s);P(!O),O?(e.play(),It(I.PLAY)):(e.pause(),It(I.PAUSE))},at=function(e){var t;_e&&(Math.abs(s-o)>=1||de&&!O&&(P(!0),null===(t=q(s))||void 0===t||t.pause()))},lt=function(){var e;Math.abs(s-o)>=1||de&&O&&(P(!1),null===(e=q(s))||void 0===e||e.play())},ut=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(L.View,{id:"video_tools_".concat(Ke,"_").concat(o),onClick:ue,catchMove:!0,children:(0,Mt.jsx)(Fn,{videoInfo:r,products:_,netWorkErr:ce,doubleClick:Se,resetDoubleClick:function(){be(!1)}})})})},dt=function(){return O&&(0,Mt.jsx)(L.View,{className:"video-swiper__item__ctrl__btns",children:(0,Mt.jsx)(L.View,{className:"iconfont-boradcast"})})},mt=si({toLeft:function(){H||(Ct(p.SWIPER_LEFT),Ut(Xe,v.SWIPE_LEFT))},toRight:function(){H||(ct(),Ct(p.SWIPER_RIGHT))},disable:!1}),ft=mt.onTouchEnd,vt=mt.onTouchStart,gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFinished,n=void 0!==t&&t,i=(e.lastIndex,ye()),o=i.totalTime,r=i.playTime,c=i.startTime,a=n||r>o?o:r;we("start");var s={totalTime:o,playTime:a,startTime:c};if(n){var l=(new Date).getTime()-gi;if(gi=(new Date).getTime(),l<500)return;return pt(s),void ht(s)}pt(s)},xt=function(e){var t,n=Math.round(e),i=Math.round(e/100*We);It(n>=U?I.SPEED:I.BACKOFF),B(n),null===(t=q(s))||void 0===t||t.seek(i),Y(!1)},wt=function(e){Y(e)},jt=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(di,{value:U,duration:We,onTouching:wt,onTouchEnd:xt})})},St=function(e){if(!H){var t=e.detail,n=t.currentTime,i=t.duration,o=+(null===n||void 0===n?void 0:n.toFixed(2)),r=+(null===i||void 0===i?void 0:i.toFixed(2));Ie({totalTime:r,playTime:o});var c=Math.round(o/r*100);c!=U&&(Math.abs(o-r)<=.5&&gt({isFinished:!0}),B(c))}},kt=function(e){var t;ue(e),xe(!0),null===(t=q(s))||void 0===t||t.requestFullScreen({direction:90}),Tt({actionType:h.CLICK,isGravity:f.N})},Nt=function(e){if(s==o){ue(e);var t,n=e.detail,i=n.direction,r=n.fullScreen;if(r!=_e)return"horizontal"!=i?(xe(!1),void(null===(t=q(s))||void 0===t||t.exitFullScreen())):r?(xe(!0),void Tt({isGravity:f.Y})):void 0}},Et=function(e){var t;tn({clientAuth:Xe.clientAuth,page_type:"video_detail",pageid:"",materialid:Ke,product_infos:null===(t=De.current)||void 0===t?void 0:t.extInfo,click_type:e,note:JSON.stringify({is_star:Xe.isStarAccount,sourcefrom:n.source})})},Lt=function(e){if(Et(en.CLICK),!oe(De.current)){At({productInfo:De.current,actionType:h.CLICK});var t=De.current,n=t.wxUrl,i=void 0===n?"":n,o=t.h5Url,r=void 0===o?"":o,c=t.productType,a=void 0===c?"":c;st(i,r,18==a)}},Vt=function(e){},Zt=function(e){var t=e.detail,n=t.width,i=t.height;He==n&&ze==i||it(n,i)},Rt=function(){var e;return oe(Ye)?(0,Mt.jsx)(rn,{title:"\u89c6\u9891\u5df2\u5931\u6548",theme:"dark"}):(0,Mt.jsxs)(L.View,{className:"video-swiper__video__wrap",onClick:Me((function(e){return ot(e)})),onTouchStart:vt,onTouchEnd:ft,children:[(0,Mt.jsx)(L.Video,(e={poster:i?"":Je,src:Ye},(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)(e,"src",Ye),"id","videoIndex_".concat(o)),"objectFit",_e?"contain":"fill"),"className",_e?"":"video-swiper__video"),"style",ee),"loop",!0),"showFullscreenBtn",!1),"showCenterPlayBtn",!1),"enableProgressGesture",!1),"showProgress",_e),(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)(e,"showPlayBtn",_e),"onLoadedMetaData",Zt),"onPause",at),"onPlay",lt),"enableAutoRotation",!1),"onFullScreenChange",Nt),"onError",Vt),"onTimeUpdate",St))),de&&(0,Mt.jsx)(L.View,{className:"video-swiper__rotateBtn",onClick:kt,children:(0,Mt.jsxs)(L.View,{className:"video-swiper__rotateBtn__inner",children:[(0,Mt.jsx)(L.Text,{className:"iconfont-screen_rotation"}),(0,Mt.jsx)(L.Text,{children:"\u6a2a\u5411\u89c2\u770b"})]})}),O&&dt()]})},Pt=function(){j(!1),Ue.current=!1,he(),At({productInfo:De.current,actionType:h.CLOSE})},Ft=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsxs)(L.View,{onClick:ue,catchMove:!0,className:"video-swiper__item__ctrl__details",style:{visibility:H?"hidden":"visible",zIndex:Oe?3:2},children:[s!=o||re(T)?null:(0,Mt.jsx)(L.View,{className:"video-float-card__animation ".concat(T?"appear":"disappear"),children:(0,Mt.jsx)($t,{productInfo:De.current,handleClick:Lt,handleClose:Pt})}),(0,Mt.jsx)(zn,{videoInfo:r,curIndex:s,index:o,handleVote:Dt},"videoDetails_".concat(Ke))]})})},Dt=function(e){Pe(e)};return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(L.SwiperItem,{itemId:"video_".concat(Ke,"_").concat(o),skipHiddenItemLayout:!0,children:(0,Mt.jsxs)(L.View,{className:"video-swiper__item",children:[Fe.current&&Ve&&Rt(),(0,Mt.jsxs)(L.CustomWrapper,{children:[We>=30&&jt(),ut(),Ft(),(0,Mt.jsx)(L.View,{className:"video-wrap__mask"})]})]})},"video_".concat(Ke,"_").concat(o))})},xi=(0,E.memo)(_i),Ci=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var i=this,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];t&&clearTimeout(t),t=setTimeout((function(){e.apply(i,r)}),n)}},wi=(0,E.memo)((function(e){var t=(0,E.useContext)(R),n=t.videoList,i=e.swiperToBottom,o=(0,E.useState)(!1),r=(0,N.Z)(o,2),c=r[0],a=r[1],s=(0,E.useRef)([]),l=je.getSystemInfoSync().screenHeight,u=function(){var t=(0,k.Z)((0,b.Z)().mark((function t(i){var o,r,c,a,s,l,u,d;return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=i.detail&&i.detail.current||0,r=K(),o!=r){t.next=4;break}return t.abrupt("return");case 4:W(o),pi(o,r),e.handleVideoChange(),c=n[o],a=c.contentId,s=c.mediaId,l=c.videoUrl,u=c.author,d=c.ext,Je({extra:d||"",articleid:a,id:s,index:o,url:l,isStarAccount:u.isStarAccount||!1}),Ct(o>r?p.SWIPER_UP:p.SWIPER_DOWN);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=(0,E.useCallback)(Ci((function(e){var t=+e.detail.dy%+l==0;t||yt(y.SLIDE_CATON)}),500),[]),m=function(e){if(d(e),i){var t=60;e.detail.dy>t&&!c?a(!0):c&&e.detail.dy<t&&a(!1)}};return(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(L.Swiper,{className:"video-swiper",current:K(),disableTouch:!0,vertical:!0,duration:300,skipHiddenItemLayout:!0,onAnimationFinish:u,onTransition:m,children:n.map((function(e,t){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(xi,{videoInfo:e,index:t,ref:function(e){s.current[t]=e}},"video_".concat(e.contentId,"_").concat(t))})}))}),i&&c&&(0,Mt.jsx)(L.View,{className:"video-swiper__bottom",children:"\u6ca1\u6709\u66f4\u591a\u4e86"},"video_bottom")]})}));function Ii(e){return yi.apply(this,arguments)}function yi(){return yi=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i,o,r,c,a,s,l;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.pageSize,o=je.locate.getCachedGeoPoint()||{},r=o.latitude,c=void 0===r?0:r,a=o.longitude,s=void 0===a?0:a,l={url:U.getVideoList,param:(0,S.Z)((0,S.Z)({},t),{},{pageSize:i||10,coordinate:{type:"GCJ02",latitude:c,longitude:s,overSea:!0}}),cver:"850.".concat(null===(n=Se.version)||void 0===n?void 0:n.split(".").join(""))},e.abrupt("return",Ve(l));case 4:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}var Ti="miniapp_video",ji="".concat(Ti,"_source"),Si=(0,l.Z)((0,l.Z)({},T.SWIPER_UP_ENTRANCE,{url:Ke,desc:"\u4e0a\u6ed1\u5207\u6362\u89c6\u9891"}),T.DOUBLE_CLICK,{url:We,desc:"\u53cc\u51fb\u5c4f\u5e55 \u70b9\u8d5e\u89c6\u9891"}),bi=function(e){var t=e.type;e.title;return oe(Si[t])?null:(0,Mt.jsxs)(Mt.Fragment,{children:[(0,Mt.jsx)(Bt,{}),(0,Mt.jsxs)(L.View,{className:"video-guide",onClick:e.handleClick,children:[(0,Mt.jsx)(L.Image,{className:"video-guide__img",src:Si[t].url,webp:!0}),(0,Mt.jsx)(L.View,{className:"video-guide__title",children:Si[t].desc})]})]})};function ki(e){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,k.Z)((0,b.Z)().mark((function e(t){var n;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.clientAuth,t.articleIds,n={url:U.shareDoTask,param:t},e.abrupt("return",Ve(n));case 3:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}var Ei,Li=function(){var e=(0,E.useContext)(R),t=e.urlParams;if(t&&t._mktTaskActivityId)return(0,Mt.jsx)("task-count-down",{})},Vi=1e4,Zi=13e3,Ri=2e4,Ai=25e3,Oi=function(e){var t,n,i,o,r=e.params,c=(0,E.useState)(void 0),a=(0,N.Z)(c,2),s=a[0],l=a[1],u=(0,E.useState)({}),d=(0,N.Z)(u,2),m=d[0],p=d[1],f=(0,E.useState)(0),v=(0,N.Z)(f,2),g=v[0],_=v[1],C=(0,E.useState)(1),I=(0,N.Z)(C,2),A=I[0],O=I[1],P=(0,E.useState)(!1),F=(0,N.Z)(P,2),D=F[0],U=F[1],B=(0,E.useState)(!1),W=(0,N.Z)(B,2),G=W[0],H=W[1],q=(0,E.useState)(!1),z=(0,N.Z)(q,2),X=z[0],Y=z[1],J=(0,E.useState)(!1),Q=(0,N.Z)(J,2),$=Q[0],ee=Q[1],te=(0,E.useState)(!1),ne=(0,N.Z)(te,2),ie=ne[0],re=ne[1],ce=(0,E.useState)(!1),ae=(0,N.Z)(ce,2),se=ae[0],ue=ae[1],de=(0,E.useState)(!1),me=(0,N.Z)(de,2),pe=me[0],he=me[1],fe=1==(0,V.getCurrentPages)().length,ve={customBack:!0,customHome:!0,bgTransparent:!0,iconColor:"white",showCapsule:fe,showBack:!fe,title:""};(0,E.useEffect)((function(){Ei=le();var e={};try{e=tt(r)}catch(e){ee(!0),yt(y.PAGE_LOAD_FAILED)}if(!oe(e))return p(e),(0,k.Z)((0,b.Z)().mark((function t(){return(0,b.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,xe(e,A);case 2:ft();case 3:case"end":return t.stop()}}),t)})))(),ge(),je.onAppHide((function(){wt(w.EXIT)})),function(){_e()}}),[]);var ge=function(){Z().onNetworkStatusChange((function(e){console.log("\u7f51\u7edc\u72b6\u6001\u53d8\u5316",X);var t=e.isConnected,n=e.networkType;if(!t||["none","offline"].includes(n))return Y(!0),Z().showToast({title:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u6001",icon:"none",duration:3e3}),void $e.devTrace({msg:"network error",networkType:n,isConnected:t});Y(!1)}))},_e=function(){clearTimeout(t),clearTimeout(i),clearTimeout(n),clearTimeout(o)};(0,V.useShareAppMessage)((function(e){if(oe(s))return{};var t=s&&s[K()]||{},n=t.shareInfo,i=n||{},o=i.title,r=i.imageUrl,c=i.urls,a=c.weixinUrl;c.h5Url;return Lt(h.CLICK,x.WEIXIN),{title:o,imageUrl:r,path:a}}));var xe=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(t){var n,i,o,r,c,a,u,d,m,p,h,f,v,g,x,C,w,I,T=arguments;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=T.length>1&&void 0!==T[1]?T[1]:1,i=T.length>2&&void 0!==T[2]&&T[2],!pe){e.next=4;break}return e.abrupt("return");case 4:return he(!0),o=(0,S.Z)((0,S.Z)({},t),{},{pageIndex:n}),e.prev=6,e.next=9,Ii(o);case 9:r=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),he(!1);case 15:if(c=r||{},a=c.statusCode,u=c.data,d=u.items,m=void 0===d?[]:d,p=u.totalCount,he(!1),a!=M.NETWORK_ERR){e.next=21;break}return yt(y.PAGE_LOAD_FAILED),e.abrupt("return");case 21:if(0!=p){e.next=25;break}return re(!0),yt(y.NOT_FOUND),e.abrupt("return");case 25:h=s||[],i&&(null===(f=h)||void 0===f||f.splice(-m.length)),h=h.concat(m),1==h.length&&ue(!0),O(n),l(h),_(p),X&&Y(!1),$&&ee(!1),ie&&re(!1),1==n&&(v=h[0],g=v.contentId,x=v.mediaId,C=v.videoUrl,w=v.author,I=v.ext,Ei=Ei||le(),Je({sessionid:Ei,extra:I||"",articleid:g,id:x,index:0,url:C,isStarAccount:w.isStarAccount||!1}),Ie(t,h),Ce(g,null===t||void 0===t?void 0:t.clientAuth));case 36:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e,t){t&&e&&ki({articleIds:[e],clientAuth:t})},we=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var t,n,i,o,r;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=K(),n=(null===s||void 0===s?void 0:s.length)||0,i=s&&s[t]||{},o=i.contentId,r=void 0===o?"":o,t+1!==n){e.next=9;break}if(n!=g){e.next=7;break}return ue(!0),e.abrupt("return");case 7:return e.next=9,xe(m,A+1);case 9:Ce(r,null===m||void 0===m?void 0:m.clientAuth);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(e,r){var c=e.source,a=je.getStorageSync(ji)||[];_e(),!oe(a)&&a.includes(c)||(t=setTimeout((function(){clearTimeout(t),U(!0),oe(r[K()])||xt(T.SWIPER_UP_ENTRANCE)}),Vi),i=setTimeout((function(){clearTimeout(i),U(!1)}),Zi),n=setTimeout((function(){clearTimeout(n),H(!0),oe(r[K()])||xt(T.DOUBLE_CLICK)}),Ri),o=setTimeout((function(){clearTimeout(o),H(!1)}),Ai),je.setStorage({key:ji,data:[].concat((0,j.Z)(a),[c]),success:function(e){},fail:function(e){}}))},ye=function(e){e==T.SWIPER_UP_ENTRANCE?(clearTimeout(i),U(!1)):e==T.DOUBLE_CLICK&&(clearTimeout(o),H(!1))},Te=function(){return(0,Mt.jsx)(bi,{type:T.SWIPER_UP_ENTRANCE,handleClick:function(){return ye(T.SWIPER_UP_ENTRANCE)}})},Se=function(){return(0,Mt.jsx)(bi,{type:T.DOUBLE_CLICK,handleClick:function(){return ye(T.DOUBLE_CLICK)}})},be=function(){return(0,Mt.jsx)(Mt.Fragment,{children:(0,Mt.jsx)(wi,{handleVideoChange:function(e){return we(e)},swiperToBottom:se})})},ke=function(){ct(),wt(w.BACK)},Ne=function(){wt(w.HOME),je.switchTab({url:"/pages/home/homepage"})},Ee=function(){return(0,Mt.jsx)("nav-bar",{navbarData:ve,onBack:ke,onHome:Ne})},Le=function(){return 0==K()&&pe?(0,Mt.jsx)(an,{type:cn.GLOBAL}):$?(0,Mt.jsx)(rn,{type:on.LOAD_FAILED,theme:"light",buttonText:"\u518d\u8bd5\u4e00\u6b21",handleClick:function(){return xe(m,A)}}):ie?(0,Mt.jsx)(rn,{theme:"dark",type:on.EMPTY,title:(0,Mt.jsxs)(L.View,{children:[(0,Mt.jsx)(L.View,{children:"\u54ce\u5440~\u6ca1\u6709\u627e\u5230\u4f60\u60f3\u770b\u5230"}),(0,Mt.jsx)(L.View,{children:"\u7684\u8fd9\u6761\u7b14\u8bb0"})]})}):(0,Mt.jsxs)(Mt.Fragment,{children:[be(),(0,Mt.jsx)(Li,{}),D&&Te(),G&&Se()]})};return(0,Mt.jsxs)(Mt.Fragment,{children:[Ee(),(0,Mt.jsx)(R.Provider,{value:{urlParams:m,videoList:s||[],setVideoList:l,networkError:X},children:(0,Mt.jsx)(L.View,{className:"video-wrap",children:Le()})})]})},Pi=Oi,Fi=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,c.Z)(i),"instance",(0,V.getCurrentInstance)()),i.pageId=d,i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){je.onAppHide((function(){ve(),wt(w.EXIT)}))}},{key:"componentWillUnmount",value:function(){W(0),H(),fi(),je.offAppHide();var e=ye()||{},t=e.totalTime,n=e.startTime,i=e.playTime;pt({totalTime:t,startTime:n,playTime:i}),we()}},{key:"render",value:function(){var e;return(0,Mt.jsx)(Pi,{params:null===(e=this.instance.router)||void 0===e?void 0:e.params})}}]),n}(u.Z),Di={navigationBarTitleText:"\u9996\u9875",navigationStyle:"custom",enableShareAppMessage:!0,pageOrientation:"portrait",usingComponents:{"nav-bar":"@miniapp/cwx/component/navbar/navbar","cemoji-converter":"@miniapp/cwx/component/cemojiConverter/cemojiConverter","task-count-down":"@miniapp/pages/market/directory/components/taskCountDown/index"},componentPlaceholder:{"task-count-down":"view"}};Fi.enableShareAppMessage=!0;Page((0,i.createPageConfig)(Fi,"pages/video/pages/home/index",{root:{cn:[]}},Di||{}))},79181:function(e){"use strict";e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){"use strict";e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){"use strict";e.exports=require("../../../../cwx/cwx")},65238:function(e){"use strict";e.exports=require("../../../../cwx/ext/global")},33675:function(e){"use strict";e.exports=require("../../../../cwx/cwx")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[2107,1216,8592],(function(){return t(14082)}));e.O()}]);
//# sourceMappingURL=index.js.map