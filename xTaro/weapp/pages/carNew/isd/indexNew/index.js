"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[9661],{96399:function(e,t,n){var i=n(32180),a=n(298),s=n(19153),o=n(79301),r=n(95308),c=n(57042),l=n(24460),u=n(81876),p=n(79038),d=n(59772),m=n(21867),h=n(86066),g=n(45023),x=n(90201),f=n(71515),_=n(33675),v=n.n(_),N=n(64341),C=n(75199),w=n(97114),b=n(90129),I=n(96714),j=n(74629),E=n(55060),T=n(11023),k=n(81653),P=n(84041),S=n(2269),y=j.PickType.PICKUP,D=j.PickType.DROPOFF,O=E.Utils.getSharkValue,M=function(e){var t=e.ptime,n=e.rtime,i=e.setDateInfo,a=e.onPressSearch,o=e.isLazyLoad,r=e.onPickChangeCallBack,c=(0,x.useState)(y),l=(0,b.Z)(c,2),u=l[0],p=l[1],d=(0,x.useState)(!1),m=(0,b.Z)(d,2),h=m[0],g=m[1],_=(0,x.useCallback)((function(e,t){var n=(0,P.K$)(e,t);i(n),E.ToastLoading.showToast({title:O("timePassedWarning")})}),[i]),v=(0,x.useCallback)((function(e){var t=e===y?y:D;p(t),g(!0),I.mq.LogCode({enName:e===y?I.XG.C_HOME_CHANGEINFO_POP_PICKUP_DATE.KEY:I.XG.C_HOME_CHANGEINFO_POP_DROPOFF_DATE.KEY,name:e===y?I.XG.C_HOME_CHANGEINFO_POP_PICKUP_DATE.NAME:I.XG.C_HOME_CHANGEINFO_POP_DROPOFF_DATE.NAME})}),[]),N=(0,x.useCallback)((function(e){g(!1);var t=e.pickUpDate,n=e.dropOffDate,a={pickup:t,dropoff:n};(0,P.rp)(t)?_(t,n):i(a),I.mq.LogCode({enName:I.XG.C_HOME_CHANGEINFO_POP_CHANGEDATE_CONFIRM.KEY})}),[_,i]),C=(0,x.useCallback)((function(){g(!1)}),[]),w=(0,x.useCallback)((0,s.debounce)((function(){(0,P.rp)(t)?_(t,n):a()}),300,{trailing:!1,leading:!0}),[_,a,t,n]);return(0,S.jsxs)(f.View,{className:"home-page-search","data-testid":j.UITestID.car_testid_page_home_page_search,children:[(0,S.jsx)(k.Z,{onPressSearch:w,onDateClick:v,isShowFreeDeposit:E.Utils.isCtripIsd(),isShowPickupDoor:E.Utils.isCtripIsd(),isShowNumberAndAge:E.Utils.isCtripOsd(),isShowBottomTip:E.Utils.isCtripOsd(),isLazyLoad:o,onPickChangeCallBack:r}),(0,S.jsx)(f.View,{children:h&&!!o&&(0,S.jsx)(T.Z,{ptime:t,rtime:n,type:u,onConfirm:N,onCancel:C,onPickChangeCallBack:r})})]})},U=(0,x.memo)(M),A=function(e){return{ptime:(0,C.o4)(e),rtime:(0,C.kd)(e)}},L=function(e){return{setDateInfo:function(t){return e((0,w.A2)(t))}}},V=(0,s.connect)(A,L)(U),R=[{type:"WEEK",title:"\u5468\u79df\u7279\u60e0",subTitle:"\u901a\u52e4\u5957\u9910\u4f4e\u4ef7\u79df",imageBg:"https://dimg04.c-ctrip.com/images/0AS6y120009743vlh7124.png"},{type:"MONTH",title:"\u957f\u79df\u7279\u60e0",subTitle:"\u79df\u8d8a\u4e45 \u7701\u8d8a\u591a",imageBg:"https://dimg04.c-ctrip.com/images/0AS04120009744808603F.png"}],Z=n(62403),H=n(54802),G=n(19410),B=E.Utils.getSharkValue,F={get freeDepositText(){return B("freeDepositText")}};function K(e){var t=(0,s.debounce)((function(t){var n,i,a,o,r,c=e.setDateInfo,l={},u=G.Z.geStorage(j.StorageKey.CAR_CROSS_DATA_ISD),p=E.Utils.jsonParse(u);(t===H.RentType.Week?(a=I.XG.C_HOME_BANNER_WEEK.NAME,o=I.XG.C_HOME_BANNER_WEEK.KEY,n=H.RentDayType.Week,i=[j.ApiResCode.FILTER_CODE.WeekRent]):(a=I.XG.C_HOME_BANNER_MONTH.NAME,o=I.XG.C_HOME_BANNER_MONTH.KEY,n=H.RentDayType.Month,i=[j.ApiResCode.FILTER_CODE.MonthRent]),(0,s.get)(p,"rentalDate.pickUp"))&&(l=null===p||void 0===p?void 0:p.rentalDate,l.dropOff.dateTime=(0,s.dayjs)(E.Utils.patchParseISOByDayjs(null===(r=l)||void 0===r||null===(r=r.pickUp)||void 0===r?void 0:r.dateTime)).add(n,"day").format("YYYY-MM-DD HH:mm:ss"));I.mq.LogCode({enName:o,name:a}),c(l),Z["default"].setRouterListLoader({filters:i}),v().navigateTo({url:"/pages/carNew/isd/subPages/list/index"})}),300,{trailing:!1,leading:!0});return(0,S.jsxs)(f.View,{className:"week-containers",children:[(0,S.jsxs)(f.View,{className:"free-deposit",children:[(0,S.jsx)(f.Text,{className:"free-deposit-icon icon-zhima"}),(0,S.jsx)(f.Text,{className:"free-deposit-text ",children:F.freeDepositText})]}),(0,S.jsx)(f.View,{className:"week-month-rent-entry",children:R.map((function(e,n){return(0,S.jsxs)(f.View,{className:"week-month-rent-box",onClick:function(){return t(e.type)},children:[(0,S.jsx)(f.Image,{className:"week-month-rent-image-bg",mode:"scaleToFill",src:e.imageBg}),(0,S.jsx)(f.View,{className:"week-month-rent-title",children:e.title}),(0,S.jsx)(f.View,{className:"week-month-rent-sub-title",children:e.subTitle})]})}))})]})}var q=(0,x.memo)(K),z=function(e){return{}},Y=function(e){return{setDateInfo:function(t){return e((0,w.A2)(t))}}},X=(0,s.connect)(z,Y)(q),W=function(e){var t,n=e.bannerInfo,i=e.autoplay,a=(null===(t=n[0])||void 0===t?void 0:t.ads)||[],s=(0,x.useState)(0),o=(0,b.Z)(s,2),r=o[0],c=o[1],l=function(e,t){I.mq.LogCode({enName:I.XG.C_INDEX_BANNER.KEY,name:I.XG.C_INDEX_BANNER.NAME,bannerIndex:t,bannerName:e.creativeMaterial.linkUrl});var n=e.creativeMaterial,i=n.linkUrl,a=n.appId;a?v().cwx_navigateToMiniProgram({appId:a,path:i,envVersion:"release",success:function(e){},fail:function(e){}}):null!==i&&void 0!==i&&i.includes("http")?v().component.cwebview({data:{url:encodeURIComponent(i)}}):v().navigateTo({url:i,success:function(e){}})},u=function(e){var t=e.detail,n=t.current,i=t.source;i&&c(n)};return(0,S.jsx)(f.View,{className:"scontainer",children:(null===a||void 0===a?void 0:a.length)>0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.Swiper,{className:"scanner",autoplay:i,interval:3500,duration:500,onChange:u,circular:!0,current:r,children:a.map((function(e,t){var n;return(0,S.jsx)(f.SwiperItem,{onClick:function(){l(e,t)},children:(0,S.jsx)(f.View,{className:"topBan",children:(0,S.jsx)(f.Image,{lazyLoad:!0,className:"topBan",src:null===e||void 0===e||null===(n=e.creativeMaterial)||void 0===n||null===(n=n.images[0])||void 0===n?void 0:n.imageUrl})})})}))}),a.length>1?(0,S.jsx)(f.View,{className:"swp-dot",children:a.map((function(e,t){var n;return(0,S.jsx)(f.View,{className:r===t?"active square-10 m-l-10":"square-10 m-l-10"},null===e||void 0===e||null===(n=e.creativeMaterial)||void 0===n||null===(n=n.images[0])||void 0===n?void 0:n.imageUrl)}))}):null,(0,S.jsx)(f.View,{className:"mask"})]})})},Q=(0,x.memo)(W),$="CTRIPNEWER",J="CTRIPBEST",ee="CTRIPLOCAL",te={NEWER:"https://pages.c-ctrip.com/carisd/weixin/newGuide.png",BEST:"https://pages.c-ctrip.com/carisd/weixin/best.png",LOCAL:"https://pages.c-ctrip.com/carisd/weixin/local2.png"},ne={CTRIPNEWER:"https://m.ctrip.com/webapp/cars/marketing/guide?source=isd",CTRIPBEST:"https://m.ctrip.com/html5/zuche/excellent?isHideNavBar=YES&from_native_page=1&hideHeader=true&hideFeedBack=true",CTRIPLOCAL:"https://contents.ctrip.com/huodong/prtemplate/index/PrTemplate1AlQ1m?from_native_page=1"},ie=E.Utils.getSharkValue,ae={get homeRentalGuidance(){return ie("homeRentalGuidance")}};function se(e){var t=function(e){var t="",n="";e===$?(t=I.XG.C_HOME_GUIDANCE_PRESS.KEY,n=I.XG.C_HOME_GUIDANCE_PRESS.NAME):e===J?(t=I.XG.C_HOME_MIDDLE_BANNER_PRESS.KEY,n=I.XG.C_HOME_MIDDLE_BANNER_PRESS.NAME):e===ee&&(t=I.XG.C_INDEX_GUIDE_PINGTAICHENGNUO.KEY,n=I.XG.C_INDEX_GUIDE_PINGTAICHENGNUO.NAME),I.mq.LogCode({enName:t,name:n});var i=ne[e];v().component.cwebview({data:{url:encodeURIComponent(i)}})};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(f.View,{className:"containers",children:[(0,S.jsxs)(f.View,{className:"co-title",children:[(0,S.jsxs)(f.Text,{className:"zc-title",children:[" ",ae.homeRentalGuidance]}),(0,S.jsx)(f.Image,{className:"bulec",src:"https://pages.c-ctrip.com/carisd/weixin/bluebg.png",lazyLoad:!0})]}),(0,S.jsxs)(f.View,{className:"rentGuide-img",children:[(0,S.jsx)(f.View,{className:"rentGuide-img-left",children:(0,S.jsx)(f.Image,{lazyLoad:!0,src:te.NEWER,onClick:function(){t($)},"data-testid":j.UITestID.car_testid_page_home_guide_newer})}),(0,S.jsx)(f.View,{className:"rentGuide-img-right",children:(0,S.jsx)(f.Image,{lazyLoad:!0,src:te.LOCAL,onClick:function(){t(ee)}})})]})]})})}var oe=(0,x.memo)(se),re="\u643a\u7a0b\u79df\u8f66\u7701\u5fc3\u4e4b\u9009",ce="2\u91cd\u670d\u52a1\u4fdd\u969c\u60a8\u7684\u51fa\u884c",le=[{title:"\u4e2d\u6587\u670d\u52a1",desc:"24\u5c0f\u65f6\u5728\u7ebf",imageUrl:"https://pages.c-ctrip.com/carisd/miniapp/zhuan_ye_ke_fu.webp"},{title:"\u9000\u8d54\u5b89\u5fc3",desc:"\u643a\u7a0b\u5e73\u53f0\u4fdd\u969c",imageUrl:"https://pages.c-ctrip.com/carisd/miniapp/tui_pei_an_xin.webp"}],ue=[{title:"\u5feb\u901f\u786e\u8ba4",desc:"10\u5206\u949f\u5185\u786e\u8ba4",imageUrl:"https://pages.c-ctrip.com/carisd/miniapp/li_ji_que_ren.webp"},{title:"\u552e\u540e\u4fdd\u969c",desc:"\u5ba2\u670d24\u5c0f\u65f6\u5728\u7ebf",imageUrl:"https://pages.c-ctrip.com/carisd/miniapp/zhuan_ye_ke_fu.webp"},{title:"\u9000\u8d54\u5b89\u5fc3",desc:"\u643a\u7a0b\u5e73\u53f0\u4fdd\u969c",imageUrl:"https://pages.c-ctrip.com/carisd/miniapp/tui_pei_an_xin.webp"}],pe={title:re,contents:ue},de={title:ce,contents:le};function me(e){var t=e.isTabISD,n=void 0!==t&&t,i=n?pe:de,a=i.title,o=i.contents;return(0,S.jsxs)(f.View,{className:(0,s.classnames)("bottom-wrap",!n&&"narrow"),children:[(0,S.jsx)(f.View,{className:"bottom-header",children:(0,S.jsx)(f.Text,{className:"header-text",children:a})}),(0,S.jsx)(f.View,{className:"bottom-content",children:o&&o.map((function(e,t){return(0,S.jsxs)(f.View,{className:(0,s.classnames)("item",1===t?"middle":"",2===t?"right":""),children:[(0,S.jsx)(f.View,{className:"bottom-icon",children:(0,S.jsx)(f.Image,{lazyLoad:!0,src:e.imageUrl,mode:"widthFix"})}),(0,S.jsxs)(f.View,{className:"bottom-icon-desc",children:[(0,S.jsx)(f.View,{className:"title",children:e.title}),(0,S.jsx)(f.View,{className:"desc",children:e.desc})]})]})}))}),(0,S.jsx)(f.View,{className:"slogan",children:(0,S.jsx)(f.Image,{className:"bottom-img",src:"https://dimg04.c-ctrip.com/images/0AS4g1200089vyff41D7A.png"})})]})}var he=me,ge=E.Utils.getSharkValue,xe={get homeIsd(){return ge("homeIsd")},get homeOsd(){return ge("homeOsd")},get homeOsdSubTitle(){return ge("homeOsdSubTitle")}},fe=n(23060),_e=j.Platform.COMPONENT_CHANNEL,ve=function(e){var t=e.tab,n=e.onPress,i=(0,x.useMemo)((function(){return t===_e.ISD}),[t]);return(0,S.jsx)(f.View,{className:"search-tab",children:(0,S.jsxs)(f.View,{className:"search-content",children:[(0,S.jsx)(f.View,{className:"search-bg"}),(0,S.jsx)(f.View,{className:"search-tab-item item-isd "+(i?"active":""),onClick:function(){return n(_e.ISD)},children:(0,S.jsx)(f.Text,{className:"text",children:xe.homeIsd})}),(0,S.jsxs)(f.View,{className:"search-tab-item item-osd "+(i?"":"active"),onClick:function(){return n(_e.OSD)},children:[(0,S.jsx)(f.Text,{className:"text",children:xe.homeOsd}),(0,S.jsx)(f.Text,{className:"sub-title",children:xe.homeOsdSubTitle})]}),(0,S.jsx)(f.View,{className:"scrollbar-wrap",children:(0,S.jsxs)(f.View,{className:"scrollbar-animation "+(i?"":"right"),"data-testid":fe.Z.car_testid_page_home_search_tab_osd,children:[(0,S.jsx)(f.Image,{className:"before-way",src:"https://pages.c-ctrip.com/cars/bbk/resource/tab_corner3.png"}),(0,S.jsx)(f.View,{className:"middle-way"}),(0,S.jsx)(f.View,{className:"bottom-line"}),(0,S.jsx)(f.Image,{className:"after-way",src:"https://pages.c-ctrip.com/cars/bbk/resource/tab_corner3.png"})]})})]})})},Ne=(0,x.memo)(ve),Ce=n(30976),we=n(80762),be=n(31729),Ie=n(49314),je=n(25755),Ee=n(47425),Te=n(65797),ke=function(e){var t=e.renderData,n=void 0===t?{}:t,i=e.onReceive,a=e.onSeeMore,c=e.setAnchorPromotionId,l=e.isLong,u=void 0!==l&&l,p=n.promotionSecretId,d=void 0===p?"":p,m=n.currencyCode,h=void 0===m?"":m,g=n.value,x=void 0===g?"":g,_=n.valueType,v=n.discountText,N=void 0===v?"":v,C=n.limitText,w=void 0===C?"":C,b=n.name,I=void 0===b?"":b,T=n.validPeriodDesc,k=void 0===T?"":T,P=n.cornerText,y=void 0===P?"":P,D=n.status,O=n.statusName,M=void 0===O?"":O,U=n.promotionId;if(!I)return null;var A=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==D||!d){e.next=13;break}return e.next=3,E.User.isLogin();case 3:if(t=e.sent,t){e.next=10;break}return e.next=7,E.User.toLogin();case 7:t=e.sent,e.next=11;break;case 10:i({promotionSecretId:d,promotionId:U,isHomeCouponItem:!0});case 11:e.next=15;break;case 13:a(),c(U);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(f.View,{onClick:A,className:"coupon-item","data-testid":j.UITestID.car_testid_page_home_coupon_wrap,children:[(0,S.jsx)(f.Image,{className:(0,s.classnames)("coupon-item-bg",u?"long-coupon-item-bg":""),src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_bg_2_".concat(u?"long":"short",".png")}),(0,S.jsxs)(f.View,{className:(0,s.classnames)("coupon-item-left",u?"long-coupon-item-left":""),children:[w&&(0,S.jsx)(f.Text,{className:"limit-text","data-testid":j.UITestID.car_testid_page_home_coupon_wrap_text,children:w}),(0,S.jsxs)(f.View,{className:"coupon-item-left-bottom",children:[_===Te.f.greatDeal&&(0,S.jsxs)(f.View,{className:"only-text-wrap",children:[(0,S.jsx)(f.View,{className:"only-text-item",children:x.substring(0,2)}),(0,S.jsx)(f.View,{className:"only-text-item",children:x.substring(2,4)})]}),_!==Te.f.greatDeal&&(0,S.jsxs)(S.Fragment,{children:[h&&(0,S.jsx)(f.Text,{className:(0,s.classnames)("currency-code-".concat(u?"long":"short")),children:h}),x&&(0,S.jsx)(f.Text,{className:(0,s.classnames)("value-".concat(u?"long":"short")),children:x}),N&&(0,S.jsx)(f.Text,{className:(0,s.classnames)("discount-text-".concat(u?"long":"short")),children:N})]})]})]}),(0,S.jsxs)(f.View,{className:(0,s.classnames)("coupon-item-right",u?"long-coupon-item-right":""),children:[(0,S.jsxs)(f.View,{className:"coupon-item-right-content",children:[(0,S.jsx)(f.View,{className:(0,s.classnames)("coupon-item-name",u?"coupon-item-name-long":""),children:I}),(0,S.jsx)(f.View,{className:"valid-period-desc",children:k})]}),D===Te.K.available&&(0,S.jsx)(f.View,{className:"receive-btn",children:M}),(0,S.jsx)(f.View,{className:"corner-wrap",children:y}),(D===Te.K.canUse||D===Te.K.canNotUse)&&(0,S.jsx)(f.Image,{className:"received-icon",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_home_received.png"})]})]})},Pe=ke,Se=E.Utils.getSharkValue,ye={get couponSeeMore(){return Se("couponSeeMore")},get receiveMoreCoupon(){return Se("receiveMoreCoupon")},get couponDetail(){return Se("couponDetail")}},De=function(e){var t=e.title,n=void 0===t?"":t,i=e.renderData,a=void 0===i?[]:i,s=e.onSeeMore,o=e.onReceive,r=e.setAnchorPromotionId;if(!a.length)return null;var c=6,l=1===a.length,u=a.length>c,p=[];p=u?a.slice(0,c):a;var d=function(){s(),I.mq.LogCode({key:I.Qx.TRACE_CLICK_KEY,enName:Ee.Z.C_HOME_COUPON_SEE_MORE.KEY,name:Ee.Z.C_HOME_COUPON_SEE_MORE.NAME,pageId:E.Channel.getPageId().HOME.ID})},m=function(){s(),I.mq.LogCode({key:I.Qx.TRACE_CLICK_KEY,enName:Ee.Z.C_HOME_COUPON_RECEIVE_MORE.KEY,name:Ee.Z.C_HOME_COUPON_RECEIVE_MORE.NAME,pageId:E.Channel.getPageId().HOME.ID})};return(0,S.jsx)(f.View,{className:"home-coupon-entry-wrap",children:(0,S.jsxs)(f.View,{className:"coupon-entry-inner",children:[(0,S.jsx)(f.Image,{className:"coupon-entry-bg",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_entry_bg.png"}),(0,S.jsxs)(f.View,{className:"header-wrap",children:[(0,S.jsxs)(f.View,{className:"header-left-wrap",children:[(0,S.jsx)(f.Image,{className:"coupon-title-img",src:"https://dimg04.c-ctrip.com/images/0AS3m12000952n74n55B6.png"}),(0,S.jsx)(f.Text,{className:"coupon-sub-title",children:n})]}),(0,S.jsxs)(f.View,{onClick:d,className:"header-right-wrap","data-testid":j.UITestID.car_testid_page_home_coupon_entry,children:[(0,S.jsx)(f.Text,{className:"see-more-title",children:ye.couponSeeMore}),(0,S.jsx)(f.Text,{className:"icon-arrow-right look-more"})]})]}),(0,S.jsx)(f.View,{children:(0,S.jsx)(f.ScrollView,{scrollX:!0,className:"coupon-list-wrap",children:(0,S.jsxs)(f.View,{className:"coupon-list-wrap",children:[p.map((function(e){return(0,S.jsx)(Pe,{renderData:e,onReceive:o,onSeeMore:s,isLong:l,setAnchorPromotionId:r})})),u&&(0,S.jsxs)(f.View,{onClick:m,className:"receive-more-wrap","data-testid":j.UITestID.car_testid_page_home_coupon_more,children:[(0,S.jsx)(f.Text,{className:"receive-more-text",children:ye.receiveMoreCoupon}),(0,S.jsx)(f.Image,{className:"receive-more-icon",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_circle_arrow_right.png"})]})]})})})]})})},Oe=(0,x.memo)(De),Me=function(e){return{title:(0,Ie.iU)(e),renderData:(0,Ie.Uk)(e)}},Ue=function(e){return{onReceive:function(t){return e((0,je.jP)(t))},setAnchorPromotionId:function(t){return e((0,je.t2)(t))}}},Ae=(0,s.connect)(Me,Ue)(Oe),Le=n(17063),Ve=E.Utils.getSharkValue,Re={get xsdlist(){return Ve("xsdlist")},get xsdLicense(){return Ve("xsdLicense")},get guide(){return Ve("guide")},get guideMore(){return Ve("guideMore")},get questions(){return Ve("questions")},get questionsMore(){return Ve("questionsMore")},get homeRentalGuidance(){return Ve("homeRentalGuidance")},get shareTitle(){return Ve("shareTitle")}},Ze=n(80427),He="https://dimg04.c-ctrip.com/images",Ge=[{get title(){return Re.xsdlist},imageUrl:"https://pages.c-ctrip.com/rncarapp/ctrip/app/xsdlist.png",jumpUrl:"".concat(E.Utils.getH5DomainURL(),"/webapp/carhire/xsd/xsdlistpage?isHideNavBar=YES")},{get title(){return Re.xsdLicense},imageUrl:"https://pages.c-ctrip.com/rncarapp/ctrip/app/xsdnewinterlicense.png",jumpUrl:"".concat(E.Utils.getH5DomainURL(),"/webapp/carhire/xsd/xsdnewinterlicensePage?isHideNavBar=YES")}],Be=[{get title(){return Re.guide},get subTitle(){return Re.guideMore},get imageUrl(){return E.Utils.compatImgUrlWithWebp("".concat(He,"/0AS1f120008a2d5bh2A0D.png"))},get jumpUrl(){return"https://m.ctrip.com/webapp/cars/marketing/guide?source=osd"},exposureLog:{ubtKeyName:Ze.ZP.c_car_trace_exposure,data:{key:Ze.ZP.c_car_trace_exposure,name:Ze.Uq.c_car_trace_exposure_guide}},clickLog:{enName:Ee.Z.C_HOME_GUIDE.KEY,name:Ee.Z.C_HOME_GUIDE.NAME},get UITestID(){return fe.Z.car_testid_page_home_guide_newer}},{get title(){return Re.questions},get subTitle(){return Re.questionsMore},get imageUrl(){return E.Utils.compatImgUrlWithWebp("".concat(He,"/0AS3e120008bfvkupFD0E.png"))},get jumpUrl(){return"/pages/carNew/isd/subPages/osdQA/index"},get UITestID(){return fe.Z.car_testid_page_home_guide_questions}}],Fe=[{title:"\u9996\u9875",imageUrl:"https://pages.c-ctrip.com/cars/bbk/resource/bar_logo_hover.png",jumpUrl:"",active:!0,UITestID:fe.Z.car_testid_page_home_bar_home},{title:"\u8ba2\u5355",imageUrl:"https://pages.c-ctrip.com/cars/bbk/resource/bar_order.png",jumpUrl:"/pages/myctrip/list/list",UITestID:fe.Z.car_testid_page_home_bar_orderdetail}],Ke=n(29316),qe=function(){var e=(0,s.debounce)((function(e){e&&(0,Ke.V4)(e)}));return null!==Ge&&void 0!==Ge&&Ge.length?(0,S.jsx)(f.View,{className:"home-banner",children:null===Ge||void 0===Ge?void 0:Ge.map((function(t){return null!==t&&void 0!==t&&t.imageUrl?(0,S.jsx)(f.View,{className:"banner-item","data-testid":j.UITestID.car_testid_page_home_document_processing,onClick:function(){e(t.jumpUrl)},children:(0,S.jsx)(f.Image,{lazyLoad:!0,src:t.imageUrl})}):null}))}):null},ze=(0,x.memo)(qe),Ye=function(e){var t=e.refreshObservePage;(0,x.useEffect)((function(){setTimeout((function(){t()}),0)}),[t]);var n=(0,s.debounce)((function(e){var t=e.clickLog,n=e.jumpUrl;n&&(t&&I.mq.LogCode(t),(0,Ke.V4)(n))})),i=null===Be||void 0===Be?void 0:Be.length;if(!i)return null;var o=function(e){return e?(0,a.Z)((0,a.Z)({},e),{},{data:(0,a.Z)((0,a.Z)({},null===e||void 0===e?void 0:e.data),{},{pageId:E.Channel.getPageId().HOME.ID})}):null};return(0,S.jsxs)(f.View,{className:"containers home-guide",children:[(0,S.jsxs)(f.View,{className:"co-title",children:[(0,S.jsxs)(f.Text,{className:"zc-title",children:[" ",Re.homeRentalGuidance]}),(0,S.jsx)(f.Image,{className:"bulec",src:"https://pages.c-ctrip.com/carisd/weixin/bluebg.png",lazyLoad:!0})]}),(0,S.jsx)(f.View,{className:"guide-box",children:null===Be||void 0===Be?void 0:Be.map((function(e,t){return null!==e&&void 0!==e&&e.imageUrl&&null!==e&&void 0!==e&&e.title?(0,S.jsxs)(S.Fragment,{children:[t===i-1&&(0,S.jsx)(f.View,{className:"line"}),(0,S.jsxs)(f.View,{className:"banner-item autoExpose",onClick:function(){n(e)},id:e.title,"data-expose":o(null===e||void 0===e?void 0:e.exposureLog),"data-testid":e.UITestID,children:[(0,S.jsxs)(f.View,{children:[(0,S.jsxs)(f.View,{className:"title",children:[(0,S.jsx)(f.Text,{children:e.title}),(0,S.jsx)(f.Text,{className:"icon icon-circleRight"})]}),(0,S.jsx)(f.View,{className:"sub-title",children:e.subTitle})]}),(0,S.jsx)(f.Image,{lazyLoad:!0,src:e.imageUrl})]})]}):null}))})]})},Xe=(0,x.memo)(Ye),We=n(93212),Qe={makeCall:function(){v().makePhoneCall({phoneNumber:"4006125929"})},formatBizType:function(e){var t=e;switch(t){case"HotelDomestic":case"HotelMask":case"HotelInternational":t="Hotel";break;case"FlightDomestic":case"FlightInternational":t="Flight";break;default:break}return t},device:{getClientVersion:function(){return"6.20"},getChannel:function(){return"WX"}},users:{name:"abc",checkLogin:function(e){if(!e||"function"!==typeof e)return v().user.isLogin();v().user.checkLoginStatusFromServer(e)},login:function(e){e||(e={}),e.param&&"object"===(0,We.Z)(e.param)||(e.param={}),e.callback&&"function"===typeof e.callback||(e.callback=function(){}),v().user.login(e)},logout:function(e){"function"!==typeof e&&(e=function(){}),v().user.logout(e)}}},$e=Qe,Je={id:"car"},et=function(){var e=(0,x.useCallback)((0,s.debounce)((function(e){e&&(e="".concat(e,"?data=").concat(JSON.stringify(Je)),$e.users.checkLogin()?(0,Ke.V4)(e):$e.users.login({callback:function(t){t&&0===+t.ReturnCode&&(0,Ke.V4)(e)}}))}),300),[]);return null!==Fe&&void 0!==Fe&&Fe.length?(0,S.jsx)(f.View,{className:"nav-bar",children:null===Fe||void 0===Fe?void 0:Fe.map((function(t){return null!==t&&void 0!==t&&t.imageUrl?(0,S.jsxs)(f.View,{className:(0,s.classnames)("item",(null===t||void 0===t?void 0:t.active)&&"active"),onClick:function(){e(t.jumpUrl)},"data-testid":t.UITestID,children:[(0,S.jsx)(f.Image,{lazyLoad:!0,src:t.imageUrl,className:"bar-img"}),(0,S.jsx)(f.Text,{children:t.title})]}):null}))}):null},tt=(0,x.memo)(et),nt=n(63118),it=j.Platform.COMPONENT_CHANNEL,at=function(e){(0,m.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,g.Z)((0,u.Z)(i),"options",void 0),(0,g.Z)((0,u.Z)(i),"autoExpose",void 0),(0,g.Z)((0,u.Z)(i),"isLoginPending",!1),(0,g.Z)((0,u.Z)(i),"preCacheProxy",void 0),(0,g.Z)((0,u.Z)(i),"onPressSearch",(function(){i.props.isPickupDoor&&Z["default"].setRouterListLoader({groupCode:"",filters:[j.ApiResCode.FILTER_CODE.StoreService_PickupOnDoor]}),v().navigateTo({url:"/pages/carNew/isd/subPages/list/index"})})),(0,g.Z)((0,u.Z)(i),"onPressTab",(function(e){if(e!=i.state.tab){var t=e===it.ISD;i.setState({tab:e}),(0,be.Z)({carEnv:{appType:(0,we.getAppType)(t)}}),setTimeout((function(){i.sendPagePV(),i.homePresetAction(t),t||i.props.isCouponEntryShow||i.props.fetchReceivePromotion()}))}})),(0,g.Z)((0,u.Z)(i),"openCouponModal",(function(){i.setState({couponModalVisible:!0})})),(0,g.Z)((0,u.Z)(i),"closeCouponModal",(function(){i.setState({couponModalVisible:!1})})),(0,g.Z)((0,u.Z)(i),"renderHomeSearch",(function(){var e=i.state,t=e.isLazyLoad,n=e.tab;return(0,S.jsxs)(f.View,{className:"home-search",children:[(0,S.jsx)(Ne,{isLazyLoad:t,tab:n,onPress:i.onPressTab}),(0,S.jsx)(V,{isLazyLoad:t,tab:n,onPressSearch:i.onPressSearch,onPickChangeCallBack:i.onPickChangeCallBack})]})})),(0,g.Z)((0,u.Z)(i),"onPickChangeCallBack",(function(e){i.setState({swiperAutoplay:!e})})),(0,g.Z)((0,u.Z)(i),"refreshObservePage",(function(){i.__page&&i.__page.getDOMProps&&"undefined"!==typeof i.__page.exposeObserver&&v().sendUbtExpose.refreshObserve((0,u.Z)(i))})),i.state={isLazyLoad:!1,isShouldMountPopCoupon:!1,forceReloadTimestamp:0,popCouponOptions:{},uid:v().user.uid,tab:(0,we.isCtripIsd)()?it.ISD:it.OSD,couponModalVisible:!1,swiperAutoplay:!0},i.autoExpose=!0,i.preCacheProxy={},i.checkPerformance=!0,i}return(0,l.Z)(n,[{key:"getPageId",value:function(){return this.pageId=E.Channel.getPageId().HOME.ID,this.pageId}},{key:"onLoad",value:function(e){this.options=e,(0,Z.setCarContext)({query:(0,a.Z)({},e)}),(0,p.Z)((0,d.Z)(n.prototype),"onLoad",this).call(this,e)}},{key:"onShareAppMessage",value:function(){var e,t=this.props,n=t.location,i=t.date,a=(0,we.isCtripIsd)()?nt.Z.APP_TYPE.ISD:nt.Z.APP_TYPE.OSD,s={tab:a,date:i,location:n,landingto:"home",route:null===v()||void 0===v()||null===(e=v().getCurrentPage())||void 0===e?void 0:e.route,sharedList:!0},o=(0,we.getShareUrl)(s)||"pages/carNew/isd/indexNew/index";return{title:Re.shareTitle,path:o,imageUrl:""}}},{key:"onReady",value:function(){(0,p.Z)((0,d.Z)(n.prototype),"onReady",this).call(this),this.onPageReady()}},{key:"lazyComponentDidMount",value:function(){var e=this.options;(0,Z.setCarContext)({query:(0,a.Z)({},e)}),this.lazyLoadOtherModules(),this.setState({isLazyLoad:!0}),this.props.fetchAdUrls(),this.props.initLocationAndDateInfo(e),this.checkIsShouldMountPopCoupon(),this.props.fetchQconfig(),this.props.getMarketTheme()}},{key:"componentDidShow",value:function(){if((0,p.Z)((0,d.Z)(n.prototype),"componentDidShow",this).call(this),this.state.isLazyLoad){this.state.isShouldMountPopCoupon&&v().user.uid!==this.state.uid&&this.checkIsShouldMountPopCoupon();var e=v().getStorageSync(j.StorageKey.CAR_ORDER_DETAIL);if(e&&e.length){var t,i,a,s=null===(t=e[0])||void 0===t||null===(t=t.rentalDate)||void 0===t?void 0:t.pickup,o=null===(i=e[0])||void 0===i||null===(i=i.rentalDate)||void 0===i?void 0:i.dropoff;this.props.setLocationAndDate({rentalDate:{pickUp:{dateTime:s},dropOff:{dateTime:o}},rentalLocation:null===(a=e[0])||void 0===a?void 0:a.rentalLocation}),v().removeStorageSync(j.StorageKey.CAR_ORDER_DETAIL)}var r=(0,Ce.IN)(this.props.date);r.needUpdate&&this.props.setDateInfo(r);var c,l=G.Z.geStorage(j.StorageKey.CAR_AREA_HISTORY);if(l){if(l.length>=2)(null===(c=l[1])||void 0===c?void 0:c.cid)!==this.props.pickUpId&&this.props.setBusinessLicense()}else this.props.setBusinessLicense()}(0,be.o)(),(0,we.isCtripIsd)()||(this.props.fetchReceivePromotion(),this.props.getCityTimeZone())}},{key:"componentDidHide",value:function(){(0,p.Z)((0,d.Z)(n.prototype),"componentDidHide",this).call(this)}},{key:"componentDidUpdate",value:function(e,t){var n=(0,we.isCtripIsd)()?it.ISD:it.OSD;n!==t.tab&&this.setState({tab:n})}},{key:"onPageReady",value:function(){this.performanceMonitor.interactiveStart=new Date,this.performanceMonitor.submit(),this.performanceMonitor.contentShowStart=this.performanceMonitor.interactiveStart,this.performanceMonitor.submitTTI()}},{key:"checkIsShouldMountPopCoupon",value:function(){var e=this;this.setState({popCouponOptions:{data:{forceReloadTimestamp:(new Date).getTime(),saleChannel:21,miniType:"MINI_WECHAT",locale:"zh-CN",pageId:+this.pageId,currency:"CNY",sceneId:554,shownewuserpromo:!0},couponOnShow:function(){e.state.popCouponOptions.data.forceReloadTimestamp=(new Date).getTime()}},isShouldMountPopCoupon:!0})}},{key:"homePresetAction",value:function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||this.props.getCityTimeZone(),n=this.state.tab,this.preCacheProxy[n]||(this.preCacheProxy[n]=!0,this.props.preFetchListProducts({}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props.bannerInfo,n=this.state,i=n.isLazyLoad,o=n.isShouldMountPopCoupon,r=n.popCouponOptions,c=n.couponModalVisible,l=n.tab,u=n.swiperAutoplay,p=l===it.ISD;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(f.ScrollView,{scrollY:!0,className:"home-page",children:[(0,S.jsx)(Q,{bannerInfo:t,autoplay:u}),this.renderHomeSearch(),!p&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Ae,{onSeeMore:this.openCouponModal}),(0,S.jsx)(Le.Z,{visible:c,onCancel:this.closeCouponModal})]}),i&&(p?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(X,{}),(0,S.jsx)(oe,{})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ze,{}),(0,S.jsx)(Xe,{refreshObservePage:this.refreshObservePage})]})),i&&(0,S.jsx)(he,{isTabISD:p}),(0,S.jsx)(f.View,{children:i&&o&&(0,S.jsx)(s.PopCoupon,(0,a.Z)({},r))}),(0,S.jsx)(tt,{}),(0,S.jsx)(f.View,{className:"view-check",onAnimationEnd:function(){return e.viewReadyHandle&&e.viewReadyHandle()}})]}),(0,S.jsx)("perinfo-protect-float",{forceExitMiniapp:"{{true}}"})]})}}]),n}(N.Z),st=at,ot=n(25532),rt=n(55382),ct=n(6017),lt=n(94475),ut=function(e){var t;return{home:e.Home,bannerInfo:(null===(t=e.Home)||void 0===t?void 0:t.bannerInfo)||[],date:(0,C.IQ)(e),pickUpId:(0,C.up)(e),isPickupDoor:(0,C.S6)(e),isCouponEntryShow:(0,Ie.yz)(e),location:(0,C.gk)(e)}},pt=function(e){return{initLocationAndDateInfo:function(t){return e((0,w.tT)(t))},fetchAdUrls:function(){return e((0,ot.L9)())},setDateInfo:function(t){return e((0,w.A2)(t))},setLocationAndDate:function(t){return e((0,w.b2)(t))},fetchQconfig:function(){return e((0,rt.ON)())},getMarketTheme:function(){return e((0,ot.SR)())},fetchReceivePromotion:function(){return e((0,je.To)())},receivePromotion:function(t){return e((0,je.jP)(t))},preFetchListProducts:function(t){return e((0,lt.s$)(t))},setBusinessLicense:function(){return e((0,rt.XG)())},getCityTimeZone:function(){return e((0,w.wG)())}}},dt=(0,s.connect)(ut,pt)(st),mt=(0,ct.Z)(dt),ht=function(e){return(0,S.jsx)(mt,(0,a.Z)({},e))},gt=ht,xt={navigationBarTitleText:"\u643a\u7a0b\u79df\u8f66",navigationBarTextStyle:"black",initialRenderingCache:"static",navigationBarBackgroundColor:"#ffffff",enableShareAppMessage:!0,usingComponents:{"perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};gt.enableShareAppMessage=!0;Page((0,i.createPageConfig)(gt,"pages/carNew/isd/indexNew/index",{root:{cn:[]}},xt||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[7606,2107,1216,8592],(function(){return t(96399)}));e.O()}]);
//# sourceMappingURL=index.js.map