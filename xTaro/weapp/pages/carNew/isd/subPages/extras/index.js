"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6178],{61028:function(e,t,n){var i=n(32180),o=n(298),r=n(19153),a=n(57042),s=n(24460),c=n(81876),u=n(79038),l=n(59772),d=n(21867),m=n(86066),p=n(45023),x=(n(90201),n(71515)),f=n(33675),g=n.n(f),h=n(64341),v=n(96103),b=n(62017),C=n(22548),k=n(55060),Z=k.Utils.getSharkValue,w={get okBtn(){return Z("okBtn")},get extrasAtPickup(){return Z("extrasAtPickup")},get extraOnline(){return Z("extraOnline")},get extraAllTip(){return Z("extraAllTip")},get extraTitle(){return Z("extraTitle")}},E=n(84750),N=n(2269),q=function(e){(0,d.Z)(n,e);var t=(0,m.Z)(n);function n(e){var i;return(0,a.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"options",void 0),(0,p.Z)((0,c.Z)(i),"isLoginPending",!1),(0,p.Z)((0,c.Z)(i),"currentCombination",null),(0,p.Z)((0,c.Z)(i),"onExtrasContinue",(function(){var e,t=i.state,n=t.equipments,o=t.combinations,r=i.props,a=r.changeExtrasNum,s=r.selectPackage,c=r.insPackageId,u=n.map((function(e){return{num:e.currentNum||0,code:e.equipmentCode}})),l=o.filter((function(e){return!e.hike}))||[];if(0===l.length)a(u);else if(null!==(e=i.currentCombination)&&void 0!==e&&e.bomCode&&!i.currentCombination.hike){var d={curPackageId:i.currentCombination.packageId,curBomCode:i.currentCombination.bomCode,payMode:i.currentCombination.payMode,selectedExtra:u};s(d)}else s({curInsPackageId:c,selectedExtra:u});g().navigateBack()})),(0,p.Z)((0,c.Z)(i),"handleCount",(function(e,t){var n=i.state.equipments,o=null===n||void 0===n?void 0:n.map((function(n){return n.equipmentCode===e&&(n.currentNum=t),n}));i.setState({equipments:o})})),(0,p.Z)((0,c.Z)(i),"getExtrasDescription",(function(e,t){if(k.Utils.isCtripIsd())return"";var n=!1,i=!1;return e.map((function(e){switch(e.payMode){case 1:n=!0;break;case 2:i=!0;break}})),t.map((function(e){switch(e.payMode){case 1:n=!0;break;case 2:case 3:i=!0;break}})),n&&i?w.extraAllTip:i?w.extraOnline:w.extrasAtPickup})),(0,p.Z)((0,c.Z)(i),"onChooseCard",(function(e,t){var n=i.state.combinations;i.setState({combinations:null===n||void 0===n?void 0:n.map((function(e){return e.selected=!1,e}))},(function(){i.currentCombination=null,t&&(e=JSON.parse(JSON.stringify(e)),e.selected=!0,i.currentCombination=e)}))})),i.state={equipments:[],combinations:[]},i.checkPerformance=!0,i}return(0,s.Z)(n,[{key:"getPageId",value:function(){return this.pageId=k.Channel.getPageId().EXTRAS.ID,this.pageId}},{key:"componentWillUnmount",value:function(){(0,u.Z)((0,l.Z)(n.prototype),"componentWillUnmount",this).call(this);var e=this.props.backToBooking;v.po.afterNavigateBack((function(t){e(t)}))}},{key:"componentDidHide",value:function(){(0,u.Z)((0,l.Z)(n.prototype),"componentDidHide",this).call(this)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.curEquipments,i=t.selectedExtras,r=t.combinations,a=void 0===r?[]:r,s=t.bomCode,c=JSON.parse(JSON.stringify(a));this.currentCombination=null,this.setState({equipments:n.map((function(e){var t=i.find((function(t){return t.equipmentCode===e.equipmentCode}))||{};return(0,o.Z)((0,o.Z)({},e),{},{currentNum:t.currentNum||0})})),combinations:c}),null===c||void 0===c||c.map((function(t){t.bomCode===s&&(e.currentCombination=t)}))}},{key:"render",value:function(){var e=this,t=this.props.bomCode,n=this.state,i=n.equipments,o=n.combinations,a=this.getExtrasDescription(i,o);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(x.View,{className:"extras-container",children:[k.Utils.isCtripOsd()&&(0,N.jsxs)(x.View,{className:"osd-extra-header",children:[(0,N.jsx)(x.Text,{className:"extra-title",children:w.extraTitle}),(0,N.jsx)(x.Text,{className:"extras-description",children:a})]}),!(null===o||void 0===o||!o.length)&&(0,N.jsx)(b.LB,{combinations:o,bomCode:t,onChooseExtra:this.onChooseCard}),(0,N.jsx)(x.View,{className:"extras-list",children:null===i||void 0===i?void 0:i.map((function(t,n){return(0,N.jsx)(x.View,{className:(0,r.classnames)(n!==i.length-1?"border-bt":""),children:(0,N.jsx)(b.i5,{type:E.o.Number,item:t,onHandleCount:e.handleCount})})}))})]}),(0,N.jsx)(x.View,{className:"extras-footer",children:(0,N.jsx)(C.Z,{onClick:this.onExtrasContinue,className:"confirm-btn",theme:"blue",children:w.okBtn})}),(0,N.jsx)(x.View,{className:"view-check",onAnimationEnd:function(){return e.viewReadyHandle&&e.viewReadyHandle()}})]})}}]),n}(h.Z),y=q,P=n(34719),B=n(62813),T=n(22189),I=n(58419),j=n(6017),O=function(e){var t,n,i,o,r;return k.Utils.isCtripIsd()?{curEquipments:null===(t=(0,B.E0)(e))||void 0===t?void 0:t.curEquipments,selectedExtras:null===(n=(0,B.E0)(e))||void 0===n?void 0:n.selectedExtras,bomCode:null===(i=(0,B.E0)(e))||void 0===i?void 0:i.bomCode,insPackageId:null===(o=(0,B.E0)(e))||void 0===o?void 0:o.insPackageId,payMode:null===(r=(0,B.E0)(e))||void 0===r?void 0:r.payMode}:(0,P.E0)(e)},S=function(e){return{changeExtrasNum:function(t){k.Utils.isCtripIsd()?(e((0,I.$u)(t)),e((0,I.B2)())):(e((0,T.$u)(t)),e((0,T.B2)()))},selectPackage:function(t){return e((0,T.oX)(t))},backToBooking:function(t){e((0,I.EL)(t)),e((0,I.BG)(!0))}}},A=(0,r.connect)(O,S)(y),M=(0,j.Z)(A),U=function(e){return(0,N.jsx)(M,(0,o.Z)({},e))},V=U,D={navigationBarTitleText:"\u9644\u52a0\u4ea7\u54c1",navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff"};Page((0,i.createPageConfig)(V,"pages/carNew/isd/subPages/extras/index",{root:{cn:[]}},D||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[7606,2107,1216,8592],(function(){return t(61028)}));e.O()}]);
//# sourceMappingURL=index.js.map