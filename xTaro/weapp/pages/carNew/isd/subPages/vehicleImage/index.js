"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[1589],{60962:function(e,i,n){var t=n(32180),a=n(298),o=n(19153),l=n(57042),r=n(24460),s=n(81876),c=n(79038),d=n(59772),u=n(21867),g=n(86066),h=n(45023),v=(n(90201),n(71515)),m=n(92954),p=n.n(m),f=n(64341),w=n(57849),x=n(96714),I=n(55060),V={get noWifiMsg(){return I.Utils.getSharkValue("noWifiMsg")}},C=n(80762),j=n(70542),N=n(2269),y=function(e){(0,u.Z)(n,e);var i=(0,g.Z)(n);function n(e){var t;return(0,l.Z)(this,n),t=i.call(this,e),(0,h.Z)((0,s.Z)(t),"options",void 0),(0,h.Z)((0,s.Z)(t),"isLoginPending",!1),(0,h.Z)((0,s.Z)(t),"handleChangeSwiper",(function(e){var i=e.detail.current;t.setState({viewModalIndex:i})})),(0,h.Z)((0,s.Z)(t),"renderContent",(function(){var e=t.state.nowRenderData.imageList,i=t.state,n=i.viewModalIndex,a=i.viewModalType;i.noWifiMsg;if("video"===a){var o,l=null===e||void 0===e||null===(o=e[0])||void 0===o?void 0:o.imageUrl;return(0,N.jsx)(v.View,{className:"vehicle-image-wrapper",onClick:function(){t.setState({showViewModal:!1})},children:(0,N.jsx)(v.View,{className:"vehlcie-image-swiper",onClick:function(e){return e&&e.stopPropagation()},children:(0,N.jsx)(v.Video,{src:l,className:"vehlcie-image-video",controls:!0,autoplay:!0,loop:!1,muted:!1,direction:0,showFullscreenBtn:!1,enablePlayGesture:!0,playBtnPosition:"center"})})})}if(null!==e&&void 0!==e&&e.length){var r=e.filter((function(e){var i;return!(null!==e&&void 0!==e&&null!==(i=e.imageUrl)&&void 0!==i&&i.includes("video"))&&!e.imageUrl.includes("mp4")}));return(0,N.jsxs)(v.View,{onClick:function(){t.setState({showViewModal:!1})},className:"vehicle-image-wrapper",children:[(0,N.jsx)(v.Swiper,{className:"vehlcie-image-swiper",current:n,onChange:function(e){t.handleChangeSwiper(e)},children:null===r||void 0===r?void 0:r.map((function(e){return(0,N.jsx)(v.SwiperItem,{className:"vehlcie-image-swiper-item",children:(0,N.jsx)(v.Image,{src:e.imageUrl,className:"vehlcie-image-swiper-image",mode:"aspectFill"})})}))}),(0,N.jsxs)(v.View,{className:"vehlcie-image-num",children:[(0,N.jsx)(v.Text,{className:"idx",children:n+1}),(0,N.jsxs)(v.Text,{className:"total",children:[" ","/".concat(null===r||void 0===r?void 0:r.length)]})]})]})}return null})),(0,h.Z)((0,s.Z)(t),"renderInner",(function(){var e,i=t.state.nowRenderData,n=i.imageList,a=i.emptyTips,o=null===(e=t.props)||void 0===e?void 0:e.vehicleInfo,l=o.vehicleCode;return(0,N.jsx)(N.Fragment,{children:null!==n&&void 0!==n&&n.length?n.map((function(e,i){var n=e.imageUrl;return null!==n&&void 0!==n&&n.includes("video")||null!==n&&void 0!==n&&n.includes("mp4")?(0,N.jsx)(v.View,{className:"vehicle-image-img-wrap",onClick:function(){t.handleView("video",e.imageUrl,i)},children:(0,N.jsx)(v.Video,{src:e.imageUrl,className:"vehicle-image-img",controls:!0,loop:!1,muted:!1,direction:0,showFullscreenBtn:!1,enablePlayGesture:!0,playBtnPosition:"center"})}):(0,N.jsx)(v.View,{className:"vehicle-image-img-wrap",onClick:function(){t.handleView("image",e.imageUrl,i)},children:(0,N.jsx)(j.Z,{src:e.imageUrl,type:C.procImageParamsType.isdBookingVehicleDetail,vehicleCode:l,mode:"aspectFill",className:"vehicle-image-img"})})})):(0,N.jsxs)(v.View,{className:"vehicle-image-empty",children:[(0,N.jsx)(v.View,{className:"vehicle-image-imgwrap",children:(0,N.jsx)(v.Image,{src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/animation_no_pic.png",className:"vehicle-image-emptyimg"})}),(0,N.jsx)(v.View,{className:"vehicle-image-txt",children:(0,N.jsx)(v.Text,{className:"vehicle-image-tips",children:a})})]})})})),t.state={nowRenderData:{title:"",tips:"",emptyTips:"",imageList:[],viewModalIndex:0},hasResponsed:!1,showViewModal:!1,viewModalType:"image",hasPv:!1,noWifiMsg:""},t.checkPerformance=!0,t}return(0,r.Z)(n,[{key:"getPageId",value:function(){return this.pageId=I.Channel.getPageId().VEHICLEIMAGE.ID,this.pageId}},{key:"onLoad",value:function(e){(0,c.Z)((0,d.Z)(n.prototype),"onLoad",this).call(this,(0,a.Z)((0,a.Z)({},e),{},{needPv:-1}))}},{key:"componentDidMount",value:function(){var e=this.props,i=e.storeCode,n=e.vehicleId,t=(e.leftRenderData,e.rightRenderData,e.fetchImageList),a={categoryId:35,storeCode:i,vehicleId:n};p().showLoading(),t(a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var i,n,t,a=this,o=this.props,l=(o.tagId,o.leftRenderData),r=o.rightRenderData,s=this.state,c=s.hasPv,d=s.nowRenderData;if("left"===e.tagId?(p().hideLoading(),this.setState({nowRenderData:l,hasResponsed:!0})):(p().hideLoading(),this.setState({nowRenderData:r,hasResponsed:!0})),2===(null===e||void 0===e||null===(i=e.leftAndRightData)||void 0===i?void 0:i.length)&&!c){var u=e.leftAndRightData[0].title,g=e.leftAndRightData[1].title;if(null!==u&&void 0!==u&&u.length&&null!==g&&void 0!==g&&g.length){this.setState({hasPv:!0});var h=u+g;this.sendPV(h)}}(null!==d&&void 0!==d&&null!==(n=d.imageList)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&null!==(n=n.imageUrl)&&void 0!==n&&n.includes("video")||null!==d&&void 0!==d&&null!==(t=d.imageList)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&null!==(t=t.imageUrl)&&void 0!==t&&t.includes("mp4"))&&p().getNetworkType({success:function(e){var i=e.networkType;"wifi"!==i&&a.setState({noWifiMsg:V.noWifiMsg})}})}},{key:"sendPV",value:function(e){var i=this.props,n=i.pStoreCode,t=i.rStoreCode,a=i.vendorInfo,o=i.vehicleInfo,l=o.vehicleCode,r=o.name,s=a.vendorCode;x.mq.LogTrace({key:x.Qx.c_car_page_search,info:{vehicledata:{vehicleCode:l,vehicleName:r,vendorCode:s,pstoreCode:n,rstoreCode:t,imageType:e}}})}},{key:"handleView",value:function(e,i,n){var t,a,o=this.state.nowRenderData.imageList,l=this.state.noWifiMsg,r=null!==o&&void 0!==o&&null!==(t=o[0])&&void 0!==t&&null!==(t=t.imageUrl)&&void 0!==t&&t.includes("video")||null!==o&&void 0!==o&&null!==(a=o[0])&&void 0!==a&&null!==(a=a.imageUrl)&&void 0!==a&&a.includes("mp4")?n-1:n;"video"===e&&l&&p().showToast({title:l,icon:"none",duration:2e3}),this.setState({showViewModal:!0,viewModalType:e,viewModalIndex:r})}},{key:"render",value:function(){var e,i=this,n=this.state,t=n.nowRenderData,a=n.showViewModal,l=n.viewModalIndex,r=n.hasResponsed,s=n.viewModalType,c=this.props,d=(c.leftRenderData,c.rightRenderData,c.tagId),u=c.setTagId,g=c.leftAndRightData,h=(t.title,t.tips),m=(t.emptyTips,t.imageList);return(0,N.jsxs)(N.Fragment,{children:[r?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(v.View,{className:"vehicle-image-tab",children:!(null===g||void 0===g||!g.length)&&(null===g||void 0===g?void 0:g.map((function(e){return(0,N.jsx)(v.View,{className:(0,o.classnames)("vehicle-image-tab-lr",d===e.tagId&&"selected"),onClick:function(){u(e.tagId)},children:e.title})})))}),(0,N.jsx)(v.View,{className:"vehicle-image-glock"}),(0,N.jsxs)(v.View,{className:"vehicle-image-wrap",children:[(0,N.jsx)(v.View,{className:"vehicle-image-head",children:(0,N.jsx)(v.Text,{className:"vehicle-image-tip",children:h})}),(0,N.jsx)(v.View,{className:"vehicle-image-content",children:this.renderInner()})]}),(0,N.jsx)(w.Z,{imageUrl:null===m||void 0===m||null===(e=m[l])||void 0===e?void 0:e.imageUrl,showModal:a,handleClose:function(){i.setState({showViewModal:!1})},renderContent:this.renderContent(),needDownload:"video"!==s})]}):(0,N.jsx)(v.View,{className:"vehicle-image-none"}),(0,N.jsx)(v.View,{className:"view-check",onAnimationEnd:function(){return i.viewReadyHandle&&i.viewReadyHandle()}})]})}}]),n}(f.Z),R=y,S=n(35740),D=n(68140),P=function(e){return e.VehicleImage.tagId},Z=function(e){return e.VehicleImage.leftRenderData},k=function(e){return e.VehicleImage.rightRenderData},M=function(e){return[(0,a.Z)((0,a.Z)({},Z(e)),{},{tagId:"left"}),(0,a.Z)((0,a.Z)({},k(e)),{},{tagId:"right"})]},T=n(62813),L=n(6017),U=function(e){var i,n,t;return{storeCode:null===(i=D.ProductSelectors.getPickupStoreInfo())||void 0===i?void 0:i.storeCode,vehicleId:(0,T.I6)(e),leftRenderData:Z(e),rightRenderData:k(e),tagId:P(e),leftAndRightData:M(e),pStoreCode:null===(n=D.ProductSelectors.getPickupStoreInfo())||void 0===n?void 0:n.storeCode,rStoreCode:null===(t=D.ProductSelectors.getReturnStoreInfo())||void 0===t?void 0:t.storeCode,vendorInfo:D.ProductSelectors.getVendorInfo(),vehicleInfo:D.ProductSelectors.getVehicleInfo()}},b=function(e){return{fetchImageList:function(i){return e((0,S.tu)(i))},setTagId:function(i){return e((0,S.fb)(i))}}},q=(0,o.connect)(U,b)(R),B=(0,L.Z)(q),A=function(e){return(0,N.jsx)(B,(0,a.Z)({},e))},F=A,W={navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff",navigationBarTitleText:"\u8f66\u578b\u56fe\u7247"};Page((0,t.createPageConfig)(F,"pages/carNew/isd/subPages/vehicleImage/index",{root:{cn:[]}},W||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var i=function(i){return e(e.s=i)};e.O(0,[7606,2107,1216,8592],(function(){return i(60962)}));e.O()}]);
//# sourceMappingURL=index.js.map