"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6333],{76147:function(e,t,i){var n=i(32180),r=i(298),s=i(19153),o=i(75199),a=i(93233),c=i(20205),l=i(24602),u=i(97114),d=i(57042),p=i(24460),h=i(81876),m=i(79038),f=i(59772),v=i(21867),g=i(86066),x=i(45023),C=i(90201),N=i(71515),w=i(33675),I=i.n(w),L=i(64341),S=i(28617),b=i(22276),T=i(79301),j=i(95308),_=i(90129),y=i(92954),k=i.n(y),Z=i(24531),P=function(e){return{tenancyDays:(0,l.Mb)(e)}},V=function(e){return{}},D=(0,s.connect)(P,V)(Z.ZP),F=i(12600),M=i(2269),O=function(e){var t=e.items,i=void 0===t?[]:t,n=e.itemClass,r=e.splitClass,s=i.length;return i.map((function(e,t){return(0,M.jsxs)(F.Z,{className:"textRange-item",layout:!0,children:[(0,M.jsx)(N.View,{className:n,children:e.text}),!!r&&t+1<s&&(0,M.jsx)(N.View,{className:r})]})}))},E=function(e){var t=e.className,i=O(e);return(0,M.jsx)(F.Z,{className:(0,s.classnames)("textRange-wrap",t),layout:!0,children:i})},R=E;function G(e){var t=e.items;return(0,M.jsx)(R,{splitClass:"split-class",itemClass:"item-class",items:t})}var U=(0,C.memo)(G),A=function(e){var t={},i={},n=e.percent,r=e.strokeColor,s=e.backgroundColor,o=e.strokeWidth;return t.width="".concat(n||0,"%"),o&&(t.height="".concat(k().pxTransform(o))),r&&(t.backgroundColor=r),s&&(i.backgroundColor=s),(0,M.jsx)(N.View,{className:"progress",children:(0,M.jsx)(N.View,{className:"progress-outer",children:(0,M.jsx)(N.View,{className:"progress-inner",style:i,children:(0,M.jsx)(N.View,{className:"progress-bg",style:t})})})})},H=A,B=i(55060),q=i(96714),W=i(76525),z=i(17427),Y=((0,s.memoizeOne)((function(e,t,i){var n=(0,z.bh)().getState(),r=(0,a.NH)(n),s=r.filterLabels,o={},c=(s||[]).length>0;return c&&(o={data:s,activeGroupId:e,activeGroupName:t,vehicleLength:i}),o})),function(){var e=(0,z.bh)().getState(),t=(0,a.VD)(e),i=t.groupId,n=t.selectedFilters,r=J(n);return{groupId:i,selectedFilters:r}}),J=function(e){var t=e.filterLabels,i=e.sortFilter,n=(0,s.map)(t,(function(e){var t=e.name,i=e.code;return t||i})),r=[i].concat((0,b.Z)(n)).sort().join(",");return r},Q=i(80427),X=B.Utils.getSharkValue,K={get browseNow(){return X("List_3nTv")},get urlFilterNoResultTitle(){return X("List_4Xbe")},get urlFilterNoResultDesc(){return X("List_Pylk")},get urlFilterNoResultRecommend(){return X("List_6Uth")},get cacheExpireContent(){return X("List_GVmU")},get clearAll(){return X("list_clearAll")},get complete(){return X("list_complete")},get showLess(){return X("listCombine_filter_showLess")},get showMore(){return X("listCombine_filter_showMore")},get cacheExpireConfirmText(){return X("List_41pq")},get noMoreFilter_NoMatch(){return X("List_GjV5")},get noMoreFilter_First(){return X("List_fWpv")},get noMoreFilter_Second(){return X("List_KE1P")},get vehicleAllText(){return X("List_rCpD")},get vehicleText(){return X("List_SSc8")},get load_fail(){return X("List_4dD2")},get networkErrTitle(){return X("ModifyOrder_PQjh")},get networkErrSubtitle(){return X("ModifyOrder_TBJZ")},get list_retry(){return X("ModifyOrder_Ow4Q")},get loadFail(){return X("loadFail")},get shareTitle(){return X("shareTitle")},get listRetry(){return X("list_retry")},get listLoading(){return X("list_loading")},get showAllVehicle(){return X("showAllVehicle")},showAllVehicleByName:function(e){return X("showAllVehicleByName",e)},get lookMore(){return X("List_LSNt")},get showAllVendorPrices(){return X("showAllVendorPrices")},get loadingText(){return X("List_hkYq")},get top(){return X("List_iNHV")},get moreText(){return X("listCombine_etc")},get youMayLikeLabel(){return X("listCombine_youMayLike")},get noProduct(){return X("List_L5TR")},get NoMatch_Second(){return X("List_oNeg")},get timeOutPopTitle(){return X("listCombine_timeOutPop_title")},get timeOutPopContent(){return X("listCombine_timeOutPop_content")},get timeOutPopConfirmText(){return X("listCombine_timeOutPop_confirmButton")},get orSimilar(){return X("list_orSimilar")},get specialized(){return X("list_specialized")},get proxyVendor(){return X("proxyVendor")},get directVendor(){return X("directVendor")},get listCombine_pickUp(){return X("listCombine_pickUp")},get listCombine_dropOff(){return X("listCombine_dropOff")},review:function(e){return X("review",e)},get showAllPricesTip(){return X("showAllPricesTip")},get view(){return X("view")},get continueView(){return X("List_Y2ep")},get selectOtherVendor(){return X("List_Qh2Z")},licenseContent:function(){return X("List_SaZB")},licenseContent2:function(e,t){return X("List_q7AY",e,t)},licenseContent3:function(e,t,i){return X("List_6sII",e,t,i)},get continueOrder(){return X("List_ih0T")},get listCombine_soldOut(){return X("listCombine_soldOut")},get cacheExpirePopTitle(){return X("cacheExpirePopTitle")},get cacheExpirePopDesc(){return X("cacheExpirePopDesc")},get cacheExpireReloadText(){return X("cacheExpireReloadText")},get searchNoResultTitle(){return X("searchNoResultTitle")},get searchLessResultSubTitle(){return X("searchLessResultSubTitle")},get searchLessResultBtn(){return X("searchLessResultBtn")},get listReceivePromotionToast(){return X("listReceivePromotionToast")},get listCombine_noneComment(){return X("listCombine_noneComment")}},$=i(81194),ee=i(92301),te=i(74629),ie=function(e){var t=e.data,i=e.isSoldOut,n=t.price,r=t.priceCurrency,o=t.originPrice,a=t.originPriceCurrency,c=t.descText,l=t.minTotalPriceOtherDesc;return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(N.View,{className:"veh-price-current",children:[o>0&&(0,M.jsx)(N.Text,{className:(0,s.classnames)("veh-price-origin",i&&"sold-out-disabled"),children:"".concat(a).concat(o)}),(0,M.jsx)(N.Text,{className:(0,s.classnames)("veh-price-currency",i&&"sold-out-disabled"),children:r}),(0,M.jsx)(N.Text,{className:(0,s.classnames)("veh-price-day",i&&"sold-out-disabled"),"data-testid":te.UITestID.car_testid_page_list_price_label,children:n}),(0,M.jsx)(N.Text,{className:(0,s.classnames)("veh-price-desc",i&&"sold-out-disabled"),"data-testid":te.UITestID.car_testid_page_list_vendor_price_desc,children:"".concat(c).concat(l)})]})})},ne=function(e){var t=e.data,i=e.isSoldOut;return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(N.View,{className:"veh-price-item",children:(0,M.jsxs)(N.View,{className:"veh-price-item-price",children:[(0,M.jsx)(ie,{data:t,isSoldOut:i}),(0,M.jsx)(N.Image,{src:"https://dimg04.c-ctrip.com/images/1mp6812000bpbsdqxB799.png",className:"veh-icon-right"})]})})})},re=function(e){var t=e.data,i=e.isSoldOut,n=t.discountLabels;return(0,M.jsx)(N.View,{children:(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-flex veh-label-discount",i&&"sold-out-filter"),children:null===n||void 0===n?void 0:n.map((function(e){return(0,M.jsx)(ee.Z,{tags:[e],customClass:"market-tag-multi",isSoldOut:i})}))})})},se=function(e){var t=e.text,i=e.isSoldOut;return(0,M.jsx)(N.View,{className:(0,s.classnames)("tag-icon-zhima",i&&"sold-out-disabled"),children:(0,M.jsx)(N.Text,{className:"tag-txt",children:t})})},oe=i(83799),ae=i(95088),ce=i(49959),le=i(58828),ue=i(57543),de={},pe=function(){de={}};function he(e){var t=e.licenseInfo,i=e.vendor,n=t||{},r=n.returnSupportCDLType,s=n.pickupSupportCDLType,o=n.returnCountryName,a=n.pickupCountryName,c=i||{},l=c.isPStoreSupportCdl,u=c.reference;if(!0===l&&4!==r)return{isShowModal:!1};var d=u.bizVendorCode,p=u.vehicleCode,h="".concat(d,"_").concat(p);if(de[h])return{isShowModal:!1};var m="",f=K.continueView;return l?4===r&&(m=K.licenseContent3(o,o,o)):4===s?m=K.licenseContent2(a,a):(f=K.selectOtherVendor,m=K.licenseContent()),de[h]=!0,{isShowModal:!0,content:m,confirmText:K.continueOrder,cancelText:f}}var me=he;function fe(e){var t=e||{},i=t.vehicleCode,n=t.bizVendorCode,r=t.packageType,s=void 0===r?0:r;return"".concat(i,"_").concat(n,"_").concat(s)}function ve(e){var t=e||{},i=t.vendorPriceList,n=t.saleOutList,r=(0,C.useMemo)((function(){var e=!1;if((null===n||void 0===n?void 0:n.length)>0){e=!0;for(var t=0;t<i.length;t++){var r=i[t],s=fe(r.reference);if(!n.includes(s)){e=!1;break}}}return e}),[i,n]);return r}function ge(e){var t=e||{},i=t.reference,n=t.saleOutList,r=(0,C.useMemo)((function(){if((null===n||void 0===n?void 0:n.length)>0){var e=fe(i);return n.includes(e)}return!1}),[i,n]);return r}var xe=i(62403),Ce=i(80762),Ne=i(70542),we=function(e){var t=e.css;return(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-1px",t)})},Ie=function(e){var t=e.labels;return(0,M.jsx)(M.Fragment,{children:t.map((function(e,i){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)($.Z,{type:"icon",className:"veh-icon",children:e.icon}),(0,M.jsx)(F.Z,{className:"veh-label-text",children:e.text}),t.length>1&&t.length-1>i&&(0,M.jsx)(N.View,{className:"veh-label-split"})]})}))})},Le=function(e){var t=e.vehicleInfo,i=t||{},n=i.groupSubName,r=i.passengerNo,s=i.doorNo,o=i.luggageNo,a=i.transmissionType,c=i.transmissionName,l=i.hasConditioner,u=i.imageList,d=i.conditionerDesc,p=(0,oe.uL)(null===u||void 0===u?void 0:u[0]),h=(0,le.wu)([{icon:le.Tu.car,text:n},{icon:le.Tu.seat,text:r},{icon:le.Tu.luggage,text:o},{icon:le.Tu.door,text:s}]),m=(0,le.wu)([{icon:le.Tu.transmission,text:c,transmissionType:a},{icon:le.Tu.snow,text:d,hasConditioner:l}]);return(0,M.jsxs)(N.View,{className:"veh-car-info",id:"group_0",children:[(0,M.jsx)(Ne.Z,{src:p,type:Ce.procImageParamsType.osdVendorModal,vehicleCode:null===t||void 0===t?void 0:t.vehicleCode,className:"veh-car-img"}),(0,M.jsxs)(N.View,{className:"veh-car-labels-wrap",children:[(0,M.jsx)(N.View,{className:"veh-car-labels",children:(0,M.jsx)(Ie,{labels:h})}),(0,M.jsx)(N.View,{className:"veh-car-labels",children:(0,M.jsx)(Ie,{labels:m})})]})]})},Se=function(e){var t=e.vendor,i=e.isSoldOut,n=t||{},r=n.isBroker,o=n.vendorLogo,a=n.commentInfo,c=n.vendorTag,l=a||{},u=l.level,d=l.overallRating,p=l.maximumRating,h=l.commentCount,m=l.hasComment;return(0,M.jsxs)(N.View,{className:(0,s.classnames)("veh-overview",i&&"sold-out-filter"),children:[!!o&&(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-price-logo-wrap","mr-16"),children:(0,M.jsx)(Ne.Z,{src:o,type:Ce.procImageParamsType.osdVendorModalLogo,className:"veh-logo"})}),(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text",i&&"sold-out-disabled"),children:null===c||void 0===c?void 0:c.title}),(0,M.jsx)(N.View,{className:"veh-label-split"}),(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text","pr-16",i&&"sold-out-disabled"),children:r?K.proxyVendor:K.directVendor}),m>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-rate",i&&"sold-out-disabled"),children:d}),(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-total","pr-16",i&&"sold-out-disabled"),children:"/".concat(p)})]}),0===m&&(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text","pr-16",i&&"sold-out-disabled"),children:K.listCombine_noneComment}),!!u&&(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-comment","pr-16",i&&"sold-out-disabled"),children:"".concat(u)}),h>0&&(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text","pr-16",i&&"sold-out-disabled"),children:"".concat(K.review(h))})]})},be=function(e){var t=e.vendor,i=e.isDifferentLocation,n=e.isSoldOut,r=t||{},o=r.pStoreRouteDesc,a=void 0===o?"":o,c=r.rStoreRouteDesc,l=void 0===c?"":c,u=r.pStoreSortDesc,d=void 0===u?"":u,p=r.rStoreSortDesc,h=void 0===p?"":p,m="".concat(d).concat(d?"\uff0c":""),f="".concat(h).concat(h?"\uff0c":""),v=i&&l,g="".concat(v?"".concat(K.listCombine_pickUp,": "):"").concat(a),x="".concat(v?"".concat(K.listCombine_dropOff,": ").concat(l):""),C="".concat(g?m:"").concat(g),w="".concat(x?f:"").concat(x);return(0,M.jsxs)(N.View,{className:"veh-store",children:[(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text",n&&"sold-out-disabled"),children:C}),!!w&&(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-text","m-t-12",n&&"sold-out-disabled"),children:w})]})},Te=function(e){var t=e.tags,i=e.isSoldOut;if(!t||0===t.length)return null;var n=(0,ue._B)(t);return 0===n.length?null:(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-section",i&&"sold-out-filter"),children:n.map((function(e,t){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ae.Z,{label:e,isSoldOut:i}),n.length>1&&n.length-1>t&&(0,M.jsx)(N.View,{className:"veh-label-split"})]})}))})},je=(0,C.memo)((function(e){var t=e.tags,i=e.isSoldOut;return(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-labels",i&&"sold-out-filter"),children:t.map((function(e){return(0,M.jsx)(se,{text:e.title,isSoldOut:i})}))})})),_e=function(e){var t=e.vendor,i=e.isSoldOut,n=t||{},r=n.allTags,o=(0,ue.f2)(r),a=(0,ue.$d)(r),c=(0,ce.kR)(t);return(0,M.jsxs)(N.View,{children:[(0,M.jsxs)(N.View,{className:"veh-price-section",children:[(0,M.jsx)(N.View,{children:o.length>0&&(0,M.jsx)(je,{isSoldOut:i,tags:o})}),(0,M.jsx)(ne,{isSoldOut:i,data:c})]}),(0,M.jsxs)(N.View,{className:(0,s.classnames)("m-t-4","veh-cons-view",i&&"veh-price-section-sold-out"),children:[(0,M.jsxs)(N.View,{children:[a.length>0&&(0,M.jsx)(N.View,{className:"veh-price-section-label",children:a.map((function(e){return(0,M.jsx)(ae.Z,{label:e,isSoldOut:i})}))}),i&&(0,M.jsx)(N.View,{className:(0,s.classnames)("sold-out-warning",a.length>0&&"mt-12"),children:K.listCombine_soldOut})]}),(0,M.jsx)(re,{isSoldOut:i,data:c})]})]})},ye=function(e){var t=e.data,i=(e.section,e.vehicleInfo),n=e.onHandleVendorPress,r=e.isDifferentLocation,s=e.licenseInfo,o=e.saleOutList,a=e.groupId,c=e.selectedFilters,l=t||{},u=l.vendor,d=l.reference,p=ge({saleOutList:o,reference:d}),h=(0,C.useCallback)((function(){if(!p){var e=me({licenseInfo:s,vendor:u});e.isShowModal?I().showModal({title:"",content:e.content,confirmText:e.confirmText,cancelText:e.cancelText,success:function(e){var r=e.confirm;r&&n(i.name,t)}}):n(i.name,t)}}),[n,i,t,p]),m=(0,C.useMemo)((function(){var e,t,n=(0,xe.getCarContext)();return{ubtKeyName:q.Qx.c_car_exposure_product_quote_10650068646,data:{key:q.Qx.c_car_exposure_product_quote_10650068646,pageId:B.Channel.getPageId().LIST.ID,groupId:a,selectedFilters:c,distributionChannelId:n.channelID,layerData:{vehicleCode:null===i||void 0===i?void 0:i.vehicleCode,currentTotalPrice:(null===u||void 0===u||null===(e=u.priceInfo)||void 0===e?void 0:e.currentTotalPrice)||0,vendorCode:(null===d||void 0===d?void 0:d.vendorCode)||"",isCouponedOrder:(null===(t=(0,ue.Ci)(null===u||void 0===u?void 0:u.allTags))||void 0===t?void 0:t.length)>0?"1":"0"}}}}),[a,c,u,i]);return(0,M.jsxs)(N.View,{className:"veh-price-wrap autoExpose",onClick:h,"data-expose":m,children:[(0,M.jsx)(Se,{isSoldOut:p,vendor:u}),(0,M.jsx)(be,{isSoldOut:p,vendor:u,isDifferentLocation:r}),(0,M.jsx)(Te,{isSoldOut:p,tags:null===u||void 0===u?void 0:u.allTags}),(0,M.jsx)(_e,{isSoldOut:p,vendor:u})]})},ke=function(e){var t=e.list,i=e.section,n=e.vehicleInfo,r=e.onHandleVendorPress,s=e.isDifferentLocation,o=e.licenseInfo,a=e.saleOutList;if(!t||0===t.length)return null;var c=Y(),l=c.groupId,u=c.selectedFilters;return(0,M.jsx)(M.Fragment,{children:t.map((function(e,t){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ye,{data:e,section:i,vehicleInfo:n,onHandleVendorPress:r,isDifferentLocation:s,licenseInfo:o,saleOutList:a,groupId:l,selectedFilters:u}),(0,M.jsx)(we,{css:"m-lr-33"})]})}))})},Ze=function(e){var t=e||{},i=t.section,n=t.list,r=t.onHandleVendorPress,s=t.isDifferentLocation,o=t.licenseInfo,a=t.saleOutList,c=i||{},l=c.vehicleInfo;return(0,M.jsxs)(N.View,{className:"veh-container",children:[(0,M.jsx)(Le,{vehicleInfo:l}),(0,M.jsx)(we,{}),(0,M.jsx)(ke,{saleOutList:a,list:n,section:i,vehicleInfo:l,onHandleVendorPress:r,isDifferentLocation:s,licenseInfo:o}),(0,M.jsx)(N.View,{className:"veh-show-all-tip",children:K.showAllPricesTip})]})},Pe=(0,C.memo)(Ze),Ve=i(84041),De=i(29316),Fe=null,Me={},Oe=B.Utils.getElHeight,Ee=B.Utils.getSharkValue,Re=B.Utils.getPixel,Ge=B.Utils.viewPortWidth,Ue=B.Utils.mappingLabel,Ae=B.Utils.procImageParamsType;function He(e){var t,i=e.item,n=e.section,o=void 0===n?{}:n,a=e.priceGroupItem,c=void 0===a?[]:a,l=e.saleOutList,u=e.modalHeight,d=e.refreshObservePage,p=e.isDifferentLocation,h=e.pTime,m=e.setTimeOutPopData,f=e.refreshList,v=e.licenseInfo,g=(0,C.useRef)(!1),x=(0,C.useRef)(),w=c&&c.length>0,L=Ge,S=(0,C.useState)(0),y=(0,_.Z)(S,2),Z=y[0],P=y[1],V=(0,C.useState)(!1),O=(0,_.Z)(V,2),E=O[0],R=O[1],G=(0,C.useState)(!1),A=(0,_.Z)(G,2),z=A[0],J=A[1],X=(0,C.useState)(""),$=(0,_.Z)(X,2),ee=$[0],te=$[1],ie=(0,C.useState)(70),ne=(0,_.Z)(ie,2),re=ne[0],se=ne[1],oe=(0,C.useState)(0),ae=(0,_.Z)(oe,2),ce=ae[0],le=ae[1],ue=(0,C.useState)(0),de=(0,_.Z)(ue,2),pe=de[0],he=de[1],me=(0,C.useState)(!1),fe=(0,_.Z)(me,2),ve=fe[0],ge=fe[1],xe=(0,C.useState)(0),Ce=(0,_.Z)(xe,2),we=Ce[0],Ie=Ce[1],Le=(0,C.useState)(0),Se=(0,_.Z)(Le,2),be=Se[0],Te=Se[1],je=(0,C.useState)(""),_e=(0,_.Z)(je,2),ye=_e[0],ke=_e[1],Ze=(0,C.useCallback)((function(e){var t=Re(140),i=Re(20),n=Re(30),r=(L-t)/2,s=e*(t+i)+n,o=s+t;we>s&&we<o||we>o||we<s?Te(s-r):s<we+L&&o>we+L&&Te(o-L+r)}),[L,we]),He=(0,C.useCallback)((function(e){var t=!1,i=[[]],n=e||[];return{isShowGS:t,gsArr:i,commonArr:n}}),[]),Be=8,qe=(0,C.useState)(w),We=(0,_.Z)(qe,2),ze=We[0],Ye=We[1],Je=[];Je=w?c:[{data:[i]}];var Qe=Je.length,Xe=100,Ke=100,$e=100;Je.forEach((function(e,t){var i,n=He(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i[0]),r=n.gsArr,s=void 0===r?[]:r,o=n.commonArr,a=void 0===o?[]:o;s.forEach((function(e,i){var n=Array.isArray(e)?e.length:1;Be>0&&Be<=n&&(Qe=t+1,Xe=i+1,Ke=Be,$e=0),Be-=n})),Be>0&&Be<=a.length&&(Qe=t+1,$e=Be),Be-=a.length}));var et=(0,C.useState)({vehIndex:Qe,gsVehIndex:Xe,gsVendorIndex:Ke,comVendorIndex:$e,isInitial:!0}),tt=(0,_.Z)(et,2),it=tt[0],nt=tt[1],rt=(0,C.useState)([]),st=(0,_.Z)(rt,2),ot=st[0],at=st[1];(0,C.useEffect)((function(){var e=function(){var e=0;k().nextTick((0,j.Z)((0,T.Z)().mark((function t(){var i,n,r,s;return(0,T.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<c.length)){t.next=12;break}return n="#group_".concat(i),Me[i]=e,t.next=6,Oe(n);case 6:r=t.sent,e+=Math.floor(r),i===c.length-1&&!ye&&r&&(s=4,ke("calc(".concat(u," - ").concat(r-s,"px)")));case 9:i++,t.next=1;break;case 12:se(100),Ye(!1);case 14:case"end":return t.stop()}}),t)}))))},t=function(){setTimeout((function(){var e=Oe("#vehicle-info-wrap-0");e.then((function(e){le(e)})).catch();var t=Oe("#vendor-list-scorll-view");t.then((function(e){he(e)})).catch()}),100)};w&&e(),t()}),[c,w,it,ye,u,ot]);var ct=7,lt=(0,C.useCallback)((function(e){var t=e.index;Z!==t&&P(t)}),[Z]),ut=(0,C.useCallback)((function(e){var t=e.code,i=t.split("_"),n=(0,_.Z)(i,2),r=n[1],s=parseInt(r,10)||0;lt({index:s})}),[lt]),dt=(0,C.useCallback)((function(e){var t=!1;if(l&&l.length>0){var i=e||{},n=i.reference,r=(0,De.iC)(n);l.includes(r)&&(t=!0)}return t}),[l]),pt=(0,C.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.imgUrl,n=e.vehicleLabelsGroupName,r=void 0===n?[]:n,s=e.vehicleLabelsHorizontal,a=void 0===s?[]:s,c=e.vehicleLabels,l=void 0===c?[]:c,u=[],d=[],p=a.slice(1);return r.map((function(e){return u.push(Ue(e)),null})),p.map((function(e){return u.push(Ue(e)),null})),l.map((function(e){return w?u.push(Ue(e)):d.push(Ue(e)),null})),d.push(Ue(a[0])),(0,M.jsx)(N.View,{id:"vehicle-info-wrap-".concat(t),className:"vehicle-info-wrap",children:(0,M.jsxs)(F.Z,{layout:!0,horizontal:!0,center:!0,children:[(0,M.jsx)(Ne.Z,{src:i,type:Ae.isdVendorModal,vehicleCode:null===o||void 0===o?void 0:o.vehicleCode,className:"vehicle-img"}),(0,M.jsxs)(N.View,{className:"vehicle-desc-wrap",children:[(0,M.jsx)(U,{items:u}),(0,M.jsx)(U,{items:d})]})]})})}),[w,null===o||void 0===o?void 0:o.vehicleCode]),ht=(0,C.useCallback)((function(e){var t=e.group,i=e.index,n=e.vehicleCode;return"".concat(t,"_").concat(i,"_").concat(n)}),[]),mt=(0,C.useCallback)((function(e){var t=e.style,i=e.displacement;return"".concat(t,"\xb7").concat(i)}),[]),ft=(0,C.useCallback)((function(e){Ie(e.target.scrollLeft)}),[]),vt=(0,C.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&!w||ze)return null;var t=[],i=(0,s.produce)(c,(function(e){return e.sort((function(e,t){return(null===e||void 0===e?void 0:e.groupSort)-(null===t||void 0===t?void 0:t.groupSort)}))}));i.forEach((function(e,i){var n=e.displacement,r=e.style,s=e.group,o=e.vehicleCode;t.push({name:mt({displacement:n,style:r}),style:r,displacement:n,isSelected:Z===i,code:ht({group:s,index:i,vehicleCode:o})})}));var n=function(e,t){ut(e),Ze(t),te("group_".concat(t))};return t.length<=1?null:(0,M.jsx)(N.ScrollView,{id:"group-tab-scroll",className:"group-tab-scroll",scrollX:!0,scrollLeft:be,scrollWithAnimation:!0,onScroll:ft,children:(0,M.jsxs)(F.Z,{layout:!0,horizontal:!0,center:!0,id:"group-tab-wrap",className:"group-tab-wrap",children:[t.map((function(e,t){return(0,M.jsxs)(F.Z,{layout:!0,vertical:!0,center:!0,justifyCenter:!0,id:"item_".concat(t),className:(0,s.classnames)("group-tab-item",{active:t===Z}),onClick:function(){return n(e,t)},children:[(0,M.jsx)(N.View,{className:"vehicle-style",children:e.style}),(0,M.jsx)(N.View,{className:"vehicle-displacement",children:e.displacement})]},e.code)})),(0,M.jsx)(N.View,{className:"padding-block"})]})})}),[Z,ht,mt,be,Ze,ft,w,ze,ut,c]),gt=w?null===(t=c[0])||void 0===t?void 0:t.vehicleCode:"",xt=function(e,t){var i=e||{},n=i.vendorIndex,r=void 0===n?"":n,s=i.vendor,o=void 0===s?{}:s,a=i.vendorHeaderProps,c=void 0===a?{}:a,l=i.reference,u=void 0===l?{}:l,d=i.vehicleCode,p=void 0===d?"":d,h=i.groupName,m=void 0===h?"":h,f=i.vehicleName,v=void 0===f?"":f,g=o.priceInfo,x=void 0===g?{}:g,C=o.allTags,N=void 0===C?{}:C,w=o.distance,I=void 0===w?"":w,L=o.rDistance,S=void 0===L?"":L,b=o.vendorName,T=void 0===b?"":b,j=x.currentDailyPrice,_=void 0===j?"":j,y=x.currentOriginalDailyPrice,k=void 0===y?"":y,Z=x.currentTotalPrice,P=void 0===Z?"":Z,V=u.pickWayInfo,D=void 0===V?"":V,F=u.returnWayInfo,M=void 0===F?"":F,O=u.vendorCode,E=void 0===O?"":O,R=u.vehicleCode,G=u.pStoreCode,U=void 0===G?"":G,A=u.rStoreCode,H=void 0===A?"":A,B=c.commentDesc,q=void 0===B?"":B,W=c.isEasyLife,z=void 0!==W&&W,Y=c.isOptimize,J=void 0!==Y&&Y,Q=c.score,X=void 0===Q?"":Q,K=[];return Object.keys(N).length&&N.forEach((function(e){K.push((null===e||void 0===e?void 0:e.labelCode)||"")})),{realVehicleCode:R,vehicleCode:t||p,vendorCode:E,vendorIndex:r,isEasyLife:z,isOptimize:J,pickWayInfo:D,returnWayInfo:M,distance:I,rDistance:S,commentDesc:q,score:X,currentDailyPrice:_,currentOriginalDailyPrice:k,currentTotalPrice:P,allTags:JSON.stringify(K),vendorName:T,groupName:m,vehicleName:v,pStoreCode:U,rStoreCode:H}},Ct=(0,C.useCallback)((0,s.debounce)(function(){var e=(0,j.Z)((0,T.Z)().mark((function e(t,i){var n,r,s,o,a;return(0,T.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(q.mq.LogCode({enName:q.XG.C_LIST_VENDOR.KEY}),!g.current){e.next=3;break}return e.abrupt("return");case 3:if(!dt(i)){e.next=5;break}return e.abrupt("return");case 5:if(B.Utils.isListPage()){e.next=7;break}return e.abrupt("return");case 7:if(g.current=!0,n=!1,r=(0,Ve.rp)(h),!r||!m){e.next=13;break}return m({visible:!0,title:K.timeOutPopTitle,content:K.timeOutPopContent,rightText:K.timeOutPopConfirmText}),e.abrupt("return");case 13:return e.next=15,B.User.isLogin();case 15:if(s=e.sent,s){e.next=24;break}return g.current=!1,e.next=20,B.User.toLogin();case 20:if(o=e.sent,o){e.next=23;break}return e.abrupt("return");case 23:n=!0;case 24:a={reference:i.reference,carName:t},B.Utils.isCtripIsd()?I().navigateTo({url:"/pages/carNew/isd/subPages/booking/index?data=".concat(encodeURIComponent(JSON.stringify(a))),complete:function(){g.current=!1,n&&f()}}):I().navigateTo({url:"/pages/carNew/isd/subPages/product/index?data=".concat(encodeURIComponent(JSON.stringify(a))),complete:function(){g.current=!1,n&&f()}});case 26:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),300,{trailing:!1,leading:!0}),[]),Nt=(0,C.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;if(!e.length)return null;var s=[],o=e.length>ct&&!ot[i],a=ot[i]?e:e.slice(0,ct),c=a.length,l=e.length-ct,u=(0,W._7)(),d=u.gsTypes,p=void 0===d?[]:d;c&&a.forEach((function(e,t){var o=e.vehicleIndex,a=e.vendorIndex,c=e.vehicleCode,l=xt(e,gt),u=Y(),d=u.groupId,h=u.selectedFilters,m={ubtKeyName:Q.ZP.c_car_trace_list_layer_exposure_222013,data:{key:Q.ZP.c_car_trace_list_layer_exposure_222013,groupId:d,selectedFilters:h,layerData:l}},f=e.reference,v=f.gsDesc,g=void 0===v?"":v,x=f.gsId,C=p.find((function(e){return e.id===x}))||{},w=C.hint;(t<it.comVendorIndex||i<it.vehIndex-1)&&s.push((0,M.jsx)(N.View,{className:"autoExpose vendor-info-item",id:"".concat(c,"_").concat(o,"_").concat(a,"_").concat(i),"data-expose":m,children:(0,M.jsx)(D,(0,r.Z)((0,r.Z)({isSoldOut:dt(e)},e),{},{hint:g||w,onHandleVendorPress:function(){return Ct(n,e)}}),"".concat(c,"_").concat(o,"_").concat(a))},"".concat(c,"_").concat(o,"_").concat(a,"_").concat(i)))}));var h=function(e,i){var n=(0,b.Z)(ot);n[i]=e,at(n),t&&J(e)};if(!s.length)return null;var m=function(){h(!ot[i],i)};return(0,M.jsx)(N.View,{children:(0,M.jsxs)(N.View,{className:"section-content",children:[(0,M.jsx)(N.View,{children:s}),o&&(0,M.jsxs)(N.View,{className:"look-more",onClick:m,children:[K.lookMore,Ee("listCombine_fetchResult2_pluralsuffix",l)]})]})})}),[ot,dt,gt,it.comVendorIndex,it.vehIndex]),wt=(0,C.useCallback)((function(e,t){if(!t)return null;var i=z||t&&e.length<=ct;return i&&(0,M.jsx)(N.View,{className:"already-sho-all-text",children:K.showAllVendorPrices})}),[z]),It=(0,C.useCallback)((function(e){var t=e.priceData,i=e.vehicleName,n=e.refIndex,r=e.isLast,s=void 0===r||r,o=e.vehicleDesc,a=t.commonArr;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(N.View,{id:"group_".concat(n),children:[(0,M.jsx)(N.View,{children:pt(o,n)}),(0,M.jsx)(N.View,{className:"gap-block"}),Nt(a,s,n,i),wt(a,s&&!ze)]}),s&&ye&&(0,M.jsx)(N.View,{style:{height:ye}})]})}),[Nt,wt,ze,pt,ye]),Lt=(0,C.useCallback)((function(){if(!w){var e=He(i),t=o.vehicleDesc,n=void 0===t?{}:t,r=(null===o||void 0===o?void 0:o.vehicleHeader)||{},a=r.vehicleName;return It({priceData:e,vehicleName:a,refIndex:0,isLast:!0,vehicleDesc:n})}var l=[],u=c.length,d=(0,s.produce)(c,(function(e){return e.sort((function(e,t){return(null===e||void 0===e?void 0:e.groupSort)-(null===t||void 0===t?void 0:t.groupSort)}))}));return d.forEach((function(e,t){var i,n=e.vehicleHeader.vehicleName,r=e.displacement,s=e.style,o=e.vehicleDesc;l.push((0,M.jsx)(N.View,{children:t<u&&t<it.vehIndex&&(0,M.jsx)(N.View,{children:It({priceData:He(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i[0]),vehicleName:n,refIndex:t,isLast:t===u-1,vehicleDesc:o})})},mt({displacement:r,style:s})))})),l}),[He,mt,It,w,i,c,o,it.vehIndex]),St=(0,C.useCallback)((function(e){clearTimeout(Fe),Fe=setTimeout((function(){var t=e.detail.scrollTop;t>pe?(te(""),R(!0)):R(!1),ge(t>ce);var i=Object.values(Me);i.forEach((function(e,n){n<i.length-1?t>=e&&t<i[n+1]&&Z!==n&&(P(n),Ze(n)):t>=e&&Z!==n&&(P(n),Ze(n))}))}),80)}),[Z,ce,Ze,pe]),bt=(0,C.useCallback)((function(){var e=(0,M.jsx)(N.ScrollView,{scrollY:!0,scrollIntoView:ee,scrollWithAnimation:!0,onScroll:St,id:"vendor-list-scorll-view",className:"scroll-view",style:{maxHeight:u},children:B.Utils.isCtripIsd()?(0,M.jsx)(N.View,{className:"vendor-price-list-inner",children:Lt()}):(0,M.jsx)(Pe,{list:i,section:o,onHandleVendorPress:Ct,isDifferentLocation:p,licenseInfo:v,saleOutList:l})});return x.current||setTimeout((function(){d()}),1e3),e}),[Lt,St,u,ee,d]),Tt=(0,C.useCallback)((function(){te("group_0")}),[]);return setTimeout((function(){it.isInitial&&nt({vehIndex:100,gsVehIndex:100,gsVendorIndex:100,comVendorIndex:100,isInitial:!1})}),500),(0,C.useEffect)((function(){setTimeout((function(){d()}),500)}),[ot,d]),(0,M.jsxs)(N.View,{ref:x,className:"shelf-wrap",children:[ze&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(N.View,{className:"loading-text",children:K.loadingText}),(0,M.jsx)(H,{percent:re,strokeWidth:5,strokeColor:"green",backgroundColor:"#fff"})]}),vt(),!w&&(0,M.jsx)(N.View,{className:"shadow-box",style:{visibility:ve?"visible":"hidden"}}),bt(),(0,M.jsxs)(F.Z,{layout:!0,vertical:!0,center:!0,justifyCenter:!0,onClick:Tt,className:(0,s.classnames)("to-top-wrap",!E&&"invisible"),children:[(0,M.jsx)(N.View,{className:"icon-to-top"}),K.top]})]})}var Be=(0,C.memo)(He),qe=i(94475),We=function(e){return{saleOutList:(0,a.wj)(e),isDifferentLocation:(0,o.Xu)(e),pTime:(0,o.o4)(e),licenseInfo:(0,c.getLicenseInfo)()}},ze=function(e){return{setTimeOutPopData:function(t){e((0,qe.NG)(t))},refreshList:function(){xe["default"].setUserFetchCacheId(),(0,W.Aj)(W.Qu.loginFromProduct,!0)}}},Ye=(0,s.connect)(We,ze)(Be),Je=i(88447);function Qe(e){var t=e.data,i=void 0===t?{}:t,n=e.vendorListModalVisible,r=void 0!==n&&n,o=e.vehicleInfoModalVisible,a=void 0!==o&&o,c=e.setVendorListModalData,l=e.refreshObservePage,u=e.setVehicleInfoModalData,d=e.setVendorListModalVisible,p=(0,C.useCallback)((function(){d?(d({visible:!1}),setTimeout((function(){c({visible:!1})}),300)):c({visible:!1})}),[c,d]),h=(0,C.useCallback)((function(){u({visible:!a})}),[u]),m=(0,C.useMemo)((function(){var e=i.priceGroupItem,t=0;return e&&e.length>0&&e.forEach((function(e){var i,n=(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.length)||0;t+=n})),t}),[i]),f=(0,C.useMemo)((function(){var e=i.priceGroupItem,t=i.priceListLen,n=void 0===t?0:t;if(B.Utils.isCtripOsd())return n>1?85:55;var r=!1;e&&e.length>1&&(r=!0,n=m);var s={h1:38,h2:55,h3:70};return n<=1?r?s.h2:s.h1:n<=2?r?s.h3:s.h2:s.h3}),[i,m]),v=(0,C.useMemo)((function(){var e=(0,s.get)(i,"section.vehicleHeader")||{},t=i||{},n=t.isOsdHeader,r=t.linkLabelText;return(0,M.jsx)(Je.Z,{name:e.vehicleName,isHotLabel:e.isHotLabel,licenseTag:e.licenseLabel,licenseType:e.licenseType,showLikeLabel:(0,s.get)(i,"showLikeLabel"),isOsdHeader:n,linkLabelText:r,onLinkLabelPress:h})}),[i]),g=(0,C.useMemo)((function(){return(0,M.jsx)(Ye,{item:i.item,section:i.section,priceGroupItem:i.priceGroupItem,priceGroupItemLength:i.priceGroupItemLength,modalHeight:"".concat(f,"vh"),refreshObservePage:l})}),[i,f,l]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(S.Z,{className:(0,s.classnames)("vendor-list-modal"),visible:r,renderHeader:v,renderContent:g,hasContent:!0,onModalClose:p})})}var Xe,Ke=(0,C.memo)(Qe),$e=function(e){return{vendorListModalVisible:(0,a.Em)(e),vehicleInfoModalVisible:(0,a.qF)(e),data:(0,a.sS)(e)}},et=function(e){return{setVendorListModalData:function(t){return e((0,qe.D)(t))},setVehicleInfoModalData:function(t){return e((0,qe.mX)(t))},setVendorListModalVisible:function(t){return e((0,qe.GD)(t))}}},tt=(0,s.connect)($e,et)(Ke),it=function(e){var t=e.isDifferentLocation,i=e.headerData,n=e.onHeaderPress;return(0,M.jsx)(N.View,{className:"list-header",onClick:n,"data-testid":te.UITestID.car_testid_page_list_header,children:(0,M.jsxs)(F.Z,{layout:!0,centered:!0,className:"list-header-info",children:[t?(0,M.jsxs)(N.View,{className:"list-header-diff",children:[(0,M.jsxs)(N.View,{className:"list-header-picker",children:[(0,M.jsx)(N.Text,{className:"list-header-site","data-testid":te.UITestID.car_testid_page_list_header_location_diff,children:i.pickupLocation.locationName}),(0,M.jsx)(N.Text,{children:i.pickUpDateStr})]}),(0,M.jsx)(N.View,{className:"icon-dur-arrow dur-arrow","data-testid":te.UITestID.car_testid_page_list_header_location_diff_icon}),(0,M.jsxs)(N.View,{className:"list-header-picker",children:[(0,M.jsx)(N.Text,{className:"list-header-site",children:i.returnLocation.locationName}),(0,M.jsx)(N.Text,{children:i.dropOffDateStr})]})]}):(0,M.jsxs)(N.View,{className:"list-header-picker",children:[(0,M.jsx)(N.Text,{className:"list-header-site","data-testid":te.UITestID.car_testid_page_list_header_location,children:i.pickupLocation.locationName}),(0,M.jsxs)(F.Z,{layout:!0,centered:!0,children:[(0,M.jsx)(N.Text,{children:i.pickUpDateStr}),(0,M.jsx)(N.View,{className:"icon-dur-arrow dur-arrow"}),(0,M.jsx)(N.Text,{children:i.dropOffDateStr})]})]}),(0,M.jsx)(N.Text,{className:"icon-edit"})]})})},nt=(0,C.memo)(it),rt=i(81653),st=i(30976),ot=function(e){var t=e.searchPanelModalVisible,i=e.rentalDate,n=e.onModalClose,r=e.onPressSearch,s=e.setDateInfo,o=e.onDateClick;return(0,C.useEffect)((function(){if(t){var e=(0,st.IN)(i);e.needUpdate&&s(e)}}),[i,t,s]),(0,M.jsx)(N.View,{"data-testid":"".concat(te.UITestID.car_testid_page_list_search_pannel_modal,"_").concat(t),children:(0,M.jsx)(S.Z,{isMask:!0,visible:t,hasContent:!1,animateType:"down",onModalClose:n,isMultiModal:!0,renderContent:(0,M.jsx)(rt.Z,{onPressSearch:r,onDateClick:o,isShowPickupDoor:!1,isShowNumberAndAge:B.Utils.isCtripOsd(),isLazyLoad:!0})})})},at=(0,C.memo)(ot),ct=function(e){return{ptime:(0,o.o4)(e),rtime:(0,o.kd)(e),rentalDate:(0,o.IQ)(e)}},lt=function(e){return{setDateInfo:function(t){return e((0,u.A2)(t))}}},ut=(0,s.connect)(ct,lt)(at),dt=i(29105),pt=i(63562),ht=i(22548),mt=function(e){var t=e.onConfirm,i=e.visible;return(0,M.jsx)(pt.Z,{visible:i,className:"pop-modal",renderContent:(0,M.jsxs)(N.View,{children:[(0,M.jsx)(N.View,{className:"pop-modal-title",children:K.cacheExpireContent}),(0,M.jsx)(ht.Z,{className:"pop-modal-button",debounce:!0,onClick:t,children:K.cacheExpireConfirmText})]})})},ft=function(e){var t=e.onConfirm,i=e.visible;return(0,M.jsx)(pt.Z,{visible:i,renderContent:(0,M.jsxs)(N.View,{className:"pop-osd",children:[(0,M.jsx)(N.Image,{className:"pop-osd-image",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/re_load.png"}),(0,M.jsx)(N.View,{className:"pop-osd-title",children:K.cacheExpirePopTitle}),(0,M.jsx)(N.View,{className:"pop-osd-desc",children:K.cacheExpirePopDesc}),(0,M.jsx)(ht.Z,{className:"pop-osd-button",debounce:!0,onClick:t,children:K.cacheExpireReloadText})]})})},vt=function(e){var t=e.visible,i=e.reacquire,n=e.pressCallback,r=e.type,s=(0,C.useCallback)((function(){i(),n()}),[n,i]);return"osdTimeOutPop"===r?ft({visible:t,onConfirm:s}):mt({visible:t,onConfirm:s})},gt=(0,C.memo)(vt),xt=function(e){return{visible:(0,a.mn)(e)}},Ct=function(e){return{reacquire:function(){e((0,qe.Lv)(!1)),xe["default"].setUserFetchCacheId(),e((0,qe.Y8)({type:te.ListEnum.FetchListPageType.Cache_Expire_Search}))}}},Nt=(0,s.connect)(xt,Ct)(gt),wt=function(e){var t=e.duration,i=void 0===t?150:t,n=e.text,r=void 0===n?"":n,o=e.className,a=void 0===o?"":o,c=e.timeout,l=void 0===c?3:c,u=e.contentClassName,d=void 0===u?"":u,p=e.handleDismiss,h=(0,C.useState)(),m=(0,_.Z)(h,2),f=m[0],v=m[1];return(0,C.useEffect)((function(){Xe=k().createAnimation({duration:i,timingFunction:"ease",delay:0}),Xe.opacity(1).step(),v(Xe.export());var e=setTimeout((function(){Xe.opacity(0).step(),v(Xe.export()),p&&p()}),1e3*l);return function(){return clearTimeout(e)}}),[i,p,l]),r?(0,M.jsx)(N.View,{className:(0,s.classnames)("car-toast",a),animation:f,children:(0,M.jsx)(N.View,{className:(0,s.classnames)("car-toast-container",d),children:(0,M.jsx)(N.Text,{className:"car-toast-text",children:r})})}):null},It=wt,Lt=function(e){var t=e.priceCount,i=void 0===t?"":t,n=e.vehicleCount,r=void 0===n?"":n,s=e.isShowToast,o=void 0!==s&&s,a=e.isFromCache,c=e.isFromSearch,l=e.setIsShowToast,u=e.setNoMoreToastText,d=e.filterNoResult,p=e.text,h=void 0===p?"":p,m=(0,C.useMemo)((function(){return o?B.Utils.getSharkValue("vehicleCount",r)+B.Utils.getSharkValue("listCombine_fetchResult2",i):h}),[o,i,h,r]),f=(0,C.useCallback)((function(){o&&l(!1),h.length&&u("")}),[o,l,u,h.length]);return!i&&!r||c&&!a||d||!m.length?null:(0,M.jsx)(It,{contentClassName:"toast-bottom",text:m,handleDismiss:f})},St=(0,C.memo)(Lt),bt=i(68140),Tt=function(e){return{priceCount:bt.ListResSelectors.getAllVendorPriceCount(),vehicleCount:bt.ListResSelectors.getAllVehicleCount(),isFromSearch:bt.ListResSelectors.getIsFromSearch(),isFromCache:bt.ListResSelectors.getIsFromCache(),isShowToast:(0,a.zJ)(e),filterNoResult:(0,a.Jk)(e),text:(0,a.H8)(e)}},jt=function(e){return{setIsShowToast:function(t){return e((0,qe.Ot)(t))},setNoMoreToastText:function(t){return e((0,qe.JX)(t))}}},_t=(0,s.connect)(Tt,jt)(St),yt=function(e){var t=e.activeGroupId,i=e.vehGroupList,n=e.filterNoResult,r=e.setActiveGroupId,o=(0,s.throttle)((function(e){e!==t&&r({activeGroupId:e})}),500),a=(0,C.useRef)(0);return(0,M.jsx)(N.ScrollView,{scrollWithAnimation:!0,scrollY:!0,className:"vehicle-group-wrapper",scrollTop:a.current,onScroll:function(e){a.current=e.detail.scrollTop},children:i.map((function(e){var i=e.title,r=e.subTitle,a=e.gId,c=e.hasResult;return(0,M.jsxs)(N.View,{className:(0,s.classnames)("vehicle-group",a===t&&"active",a!==t&&(!c||n)&&"disable"),onClick:function(){(a===t||c&&!n)&&o(a)},"data-testid":te.UITestID.car_testid_page_list_side_navigation_list,children:[(0,M.jsx)(N.View,{className:"title",children:i}),(0,M.jsx)(N.View,{className:"text",children:n?K.noProduct:r})]})}))})},kt=(0,C.memo)(yt),Zt=function(e){return{activeGroupId:(0,a.gp)(e),activeGroupIdIndex:(0,a.vb)(e),vehGroupList:(0,c.getVehGroupList)((0,c.getAllProductGroups)()),scrollViewHeight:(0,a.OH)(e),filterNoResult:(0,a.Jk)(e)}},Pt=function(e){return{setActiveGroupId:function(t){e((0,qe.tQ)(t))}}},Vt=(0,s.connect)(Zt,Pt)(kt),Dt=function(e){(0,v.Z)(i,e);var t=(0,g.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this,e),(0,x.Z)((0,h.Z)(n),"pageHeightArr",[]),(0,x.Z)((0,h.Z)(n),"initList",[]),(0,x.Z)((0,h.Z)(n),"windowHeight",0),(0,x.Z)((0,h.Z)(n),"currentPage",k().getCurrentInstance()),(0,x.Z)((0,h.Z)(n),"observer",void 0),(0,x.Z)((0,h.Z)(n),"handleComplete",(function(){var e=n.props.onComplete;n.setState({isComplete:!0},(function(){null===e||void 0===e||e()}))})),(0,x.Z)((0,h.Z)(n),"handleScroll",(0,s.throttle)((function(e){var t,i=n.props,r=i.listId,s=i.onGetScrollData,o=i.scrollViewProps;null===s||void 0===s||s((0,x.Z)({},"".concat(r),e)),null===o||void 0===o||null===(t=o.onScroll)||void 0===t||t.call(o,e)}),300)),(0,x.Z)((0,h.Z)(n),"getSystemInformation",(function(){try{var e=(0,y.getSystemInfoSync)();n.windowHeight=e.windowHeight}catch(e){console.error("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u5931\u8d25\uff1a".concat(e))}})),(0,x.Z)((0,h.Z)(n),"handleObserve",(function(){n.miniObserve()})),(0,x.Z)((0,h.Z)(n),"miniObserve",(function(){var e,t=n.state.wholePageIndex,i=n.props,r=i.scrollViewProps,s=i.listId,o=i.screenNum,a=(null===r||void 0===r||null===(e=r.style)||void 0===e?void 0:e.height)||n.windowHeight;n.observer=k().createIntersectionObserver(n.currentPage.page).relativeToViewport({top:o*a,bottom:o*a}),n.observer.observe("#".concat(s," .wrap_").concat(t),(function(e){var i,r=n.state.twoList;(null===e||void 0===e?void 0:e.intersectionRatio)<=0?(r[t]={height:n.pageHeightArr[t]},n.setState({twoList:(0,b.Z)(r)})):null!==(i=r[t])&&void 0!==i&&i.length||(r[t]=n.initList[t],n.setState({twoList:(0,b.Z)(r)}))}))})),n.state={wholePageIndex:0,twoList:[],isComplete:!1},n}return(0,p.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props.list;this.getSystemInformation(),this.formatMultiList(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,i=this,n=this.props,r=n.list,o=n.activeGroupId,a=n.selectedFilters;(0,s.isEqual)(e.activeGroupId,o)&&(0,s.isEqual)(e.selectedFilters,a)?(0,s.isEqual)(e.list,r)&&e.pageNum===this.props.pageNum||this.formatMultiList(e.list,e.pageNum):this.setState({wholePageIndex:0,isComplete:!1,twoList:[]},(function(){var t;null!==(t=e.list)&&void 0!==t&&t.length&&i.formatMultiList(e.list)})),null!==(t=e.list)&&void 0!==t&&t.length||this.handleComplete()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"setHeight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.state.wholePageIndex,n=this.props.listId;B.Utils.getElHeight("#".concat(n," .wrap_").concat(i)).then((function(i){null!==t&&void 0!==t&&t.length&&e.pageHeightArr.push(i)})),this.handleObserve()}},{key:"segmentList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props.segmentNum,i=[],n=[];e.forEach((function(e,r){i.push(e),(r+1)%t===0&&(n.push(i),i=[])}));var r=e.slice(n.length*t);null!==r&&void 0!==r&&r.length&&(n.push(r),n.length<=1&&this.handleComplete()),this.initList=n}},{key:"formatMultiList",value:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.props.segmentNum,s=this.state.twoList;if(null!==i&&void 0!==i&&i.length){var o;if(this.segmentList(i),this.initList[n-1])n-2>=0&&(null===(o=s[n-2])||void 0===o?void 0:o.length)!==r&&(s[n-2]=this.initList[n-2]),s[n-1]=this.initList[n-1],e=(0,b.Z)(s);else e=(0,b.Z)(this.initList);this.setState({twoList:e,wholePageIndex:n-1},(function(){k().nextTick((function(){t.setHeight(i)}))}))}}},{key:"render",value:function(){var e=this.state,t=e.twoList,i=(e.isComplete,this.props),n=i.segmentNum,s=i.scrollViewProps,o=i.onRenderTop,a=i.onRenderBottom,c=i.onRenderEmpty,l=i.onRender,u=i.listId,d=i.className,p={height:"100%"},h=(0,r.Z)((0,r.Z)({},s),{},{scrollTop:null===s||void 0===s?void 0:s.scrollTop});return(0,M.jsxs)(N.ScrollView,(0,r.Z)((0,r.Z)({scrollWithAnimation:!0,scrollY:!0,id:u,style:p,className:"zt-virtual-list-container ".concat(d)},h),{},{onScroll:this.handleScroll,children:[null===o||void 0===o?void 0:o(),t.length>0?(0,M.jsx)(N.View,{className:"zt-main-list",children:t.map((function(e,t){return(0,M.jsx)(N.View,{"data-index":t,className:"zt-wrap-item wrap_".concat(t),children:(null===e||void 0===e?void 0:e.length)>0?(0,M.jsx)(N.Block,{children:e.map((function(e,i){return null===l||void 0===l?void 0:l(e,t*n+i,t)}))}):(0,M.jsx)(N.View,{style:{height:"".concat(null===e||void 0===e?void 0:e.height,"px")}})},t)}))}):null===c||void 0===c?void 0:c(),null===a||void 0===a?void 0:a()]}))}}]),i}(C.Component);(0,x.Z)(Dt,"defaultProps",void 0),Dt.defaultProps={list:[],pageNum:1,listId:"zt-virtual-list",segmentNum:10,screenNum:2,scrollViewProps:{},className:"",autoScrollTop:!0,activeGroupId:"all",onRender:function(){return(0,M.jsx)(N.View,{})}};var Ft=Dt,Mt=(0,C.memo)((function(e){var t=e.code,i=e.name,n=e.clearFilter,r=e.activeGroupName,o=i?"":(0,c.getIconByCode)(t),a=null===t||void 0===t?void 0:t.includes("Vendor_-1"),l=(0,C.useCallback)((function(){n(t,i,r)}),[r,n,t,i]);return(0,M.jsxs)(F.Z,{layout:!0,centered:!0,className:(0,s.classnames)("selected-filter-item",!a&&o&&"image-item"),onClick:l,children:[i&&(0,M.jsx)(N.View,{className:"selected-filter-item-name",children:i}),o&&(0,M.jsx)(N.Image,{mode:"heightFix",className:a?"selected-filter-vendor-image":"selected-filter-image",src:o}),(0,M.jsx)(N.Text,{className:"icon-close"})]})})),Ot=function(e){var t=e.filters,i=void 0===t?[]:t,n=e.clearFilter,o=e.noMatch,a=e.clearAllId,c=e.activeGroupName,l=K.clearAll,u=(0,C.useMemo)((function(){if(o)return K.noMoreFilter_NoMatch;var e=K.noMoreFilter_First,t=K.noMoreFilter_Second;switch(c){case te.ListEnum.GroupBarEnums.all:return"".concat(e).concat(K.vehicleAllText).concat(t);case te.ListEnum.GroupBarEnums.hot:case te.ListEnum.GroupBarEnums.easyLife:return"".concat(e).concat(c).concat(K.vehicleAllText).concat(t);case te.ListEnum.GroupBarEnums.economy:case te.ListEnum.GroupBarEnums.comfort:case te.ListEnum.GroupBarEnums.luxury:return"".concat(e).concat(c).concat(K.vehicleText).concat(t);case te.ListEnum.GroupBarEnums.empty:return"";default:return"".concat(e).concat(c).concat(t)}}),[c,o]),d=(0,C.useCallback)((function(){n(a,l,c)}),[c,a,l,n]);return(0,M.jsx)(N.View,{className:"selected-filter-wrap",children:i.length>0?(0,M.jsx)(N.View,{className:"selected-filter",children:(0,M.jsxs)(N.View,{children:[(0,M.jsxs)(F.Z,{layout:!0,className:"selected-filter-title",children:[(0,M.jsx)(N.Text,{className:(0,s.classnames)(i.length>1?"selected-filter-title-text":"selected-one-filter-title-text"),children:u}),i.length>1&&(0,M.jsxs)(N.View,{className:"selected-filter-clear",onClick:d,"data-testid":te.UITestID.car_testid_page_list_clear_all,children:[(0,M.jsx)(N.Text,{className:"selected-filter-clear-text",children:K.clearAll}),(0,M.jsx)(N.Text,{className:"icon icon-delete"})]})]}),(0,M.jsx)(F.Z,{layout:!0,wrap:!0,className:"selected-filter-list",children:i.map((function(e){return(0,M.jsx)(Mt,(0,r.Z)((0,r.Z)({},e),{},{clearFilter:n,activeGroupName:c}),e.code)}))})]})}):null})},Et=(0,C.memo)(Ot),Rt="clearAll",Gt=function(e){var t=(0,a.NH)(e),i=t.filterLabels,n=i,r=(0,a.gp)(e),s=(0,ce.ZK)(r);return{filters:n,clearAllId:Rt,activeGroupId:r,activeGroupName:s}},Ut=function(e){return{clearFilter:function(t,i,n){t===Rt?(q.mq.LogCode({enName:q.XG.C_LIST_CLEAR_BOTTOM_ALLFILTER.KEY,name:i,activeGroupName:n}),e((0,qe.oo)()),e((0,u.so)(!1)),e((0,qe.Yz)(!1))):(q.mq.LogCode({enName:q.XG.C_LIST_CLEAR_BOTTOM_FILTER.KEY,name:i,activeGroupName:n}),e((0,qe.cX)({deleteCode:t,deleteName:i})),t===te.ApiResCode.FILTER_CODE.StoreService_PickupOnDoor&&(e((0,u.so)(!1)),e((0,qe.Yz)(!1))),t!==te.ApiResCode.FILTER_CODE.WeekRent&&t!==te.ApiResCode.FILTER_CODE.MonthRent||e((0,qe.Yz)(!1)))}}},At=(0,s.connect)(Gt,Ut)(Et),Ht=function(e){var t=e.isLoading,i=e.isLoadingFail,n=e.isLastPage,r=e.filtersLen,s=e.sectionsLen,o=e.current,a=e.total,c=e.activeGroupName,l=e.activeGroupId,u=e.fetchNextPage,d=(0,C.useMemo)((function(){var e=2;return!t&&!i&&n&&o+e>=a}),[o,n,t,i,a]),p=(0,C.useMemo)((function(){return r>0&&n&&!i&&s>0&&d}),[r,n,d,i,s]),h=(0,C.useMemo)((function(){return d&&!r}),[r,d]),m=(0,C.useMemo)((function(){return!i&&s>0&&!p&&!h}),[i,s,p,h]),f="all"===l?K.showAllVehicle:K.showAllVehicleByName(c);return(0,M.jsxs)(F.Z,{layout:!0,centered:!0,className:"list-footer-wrap",children:[i&&s>0&&(0,M.jsxs)(N.View,{className:"footer-content",onClick:u,children:[(0,M.jsx)(N.Text,{className:"icon-loading"}),K.loadFail,(0,M.jsx)(N.Text,{className:"blue",children:K.listRetry})]}),p&&(0,M.jsx)(At,{}),m&&(0,M.jsxs)(N.View,{className:"footer-content",children:[(0,M.jsx)(N.Text,{className:"icon-loading"}),K.listLoading]}),h&&(0,M.jsx)(N.View,{className:"footer-content",children:f})]})},Bt=(0,C.memo)(Ht),qt=function(e){var t=(0,a.NH)(e),i=t.filterLabels;return{isLoading:(0,a.B5)(e),isLoadingFail:(0,a.Rv)(e),isLastPage:(0,l.h$)(e),filtersLen:(0,s.get)(i,"length")}},Wt=(0,s.connect)(qt)(Bt),zt=i(68277),Yt=i(47728),Jt=function(e){var t=e.isSoldOut,i=e.hasOptimize,n=e.vendorListDesc,r=e.minTotalPrice,o=e.minTotalPriceOtherDesc,a=e.price,c=e.descText,l=e.restAssuredTag,u=e.hasEasyLife,d=e.hasNoVerify,p=e.noVerifyTagName,h=(0,C.useMemo)((function(){var e=B.Utils.getSharkValue("morePriceDescUnit"),t=n.split(e),i={numText:t[0],descText:"".concat(e).concat(t[1])};return i}),[n]);return(0,M.jsxs)(F.Z,{layout:!0,justifyBetween:!0,className:"vender-enter-wrap",children:[(0,M.jsxs)(N.View,{className:(0,s.classnames)("vender-enter-left",{"sold-out":t}),children:[u&&(0,M.jsx)(N.Image,{className:"wuyouzu-tag",src:"https://pages.c-ctrip.com/rncarapp/ctrip/app/wuyouzu_tag.png"}),i&&(0,M.jsx)(N.Image,{className:"tag-you",src:"http://pic.c-ctrip.com/car/osd/mobile/bbk/resource/youxuan.png"}),l&&(0,M.jsx)(N.View,{className:(0,s.classnames)("tag-anxin","colorTag".concat(l.colorCode),"border-color".concat(l.colorCode)),children:l.title}),d&&(0,M.jsx)(N.View,{className:"tag-icon-zhima",children:(0,M.jsx)(N.Text,{className:"tag-txt",children:p})}),!!n&&(0,M.jsxs)(N.View,{className:"vendor-enter-desc",children:[(0,M.jsx)(N.Text,{children:h.numText}),(0,M.jsx)(N.Text,{children:h.descText})]})]}),(0,M.jsxs)(N.View,{className:"vender-enter-right",children:[!t&&(0,M.jsx)(Yt.Z,{isReturnDesc:!1,tenancyDays:!!c,dayPrice:a,totalPrice:r,minTotalPriceOtherDesc:o,downIcon:!0}),t&&(0,M.jsx)(N.Text,{className:"sold-out-text",children:B.Utils.getSharkValue("listCombine_soldOut")})]})]})},Qt=(0,C.memo)(Jt),Xt=i(35418),Kt=i(33892),$t=i(96226),ei={get onlyPickDoor(){return B.Utils.getSharkValue("onlyPickDoor")}},ti=function(e){var t=e.tip,i=e.reQueryPress,n=e.reQueryText,r=e.ptime,s=e.rtime,o=e.isPickupDoor,a=e.updatePickupDoor,c=void 0===a?B.Utils.noop:a,l=(0,C.useCallback)((function(){c(!o)}),[o,c]);return(0,M.jsxs)(N.View,{className:"modify-rental",children:[!!t&&(0,M.jsx)(N.View,{className:"modify-rental-tip",children:(0,M.jsx)(N.Text,{className:"modify-rental-text",children:t})}),(0,M.jsxs)(N.View,{className:"modify-rental-date",children:[r&&s&&(0,M.jsx)(Kt.Z,{ptime:r,rtime:s}),(0,M.jsx)($t.s,{text:ei.onlyPickDoor,isPickupDoor:o,onChoosePickupDoor:l}),(0,M.jsx)(ht.Z,{className:"modify-rental-btn",onClick:i,debounce:!0,children:n})]})]})},ii=ti,ni=["className","hasImg","type","title","subTitle","buttonText","onButtonPress","buttonStyle","titleStyle","subTitleStyle","imgStyle","style","isShowOperateButton","isShowRentalDate"],ri=function(e){return e["noNetwork"]="netError",e["noResponse"]="load_fail",e["noSearchResult"]="animation_search_no_result",e["noCoupon"]="animation_no_coupon_v2",e}({}),si=function(e){var t=e.className,i=void 0===t?"":t,n=e.hasImg,o=void 0===n||n,a=e.type,c=e.title,l=e.subTitle,u=e.buttonText,d=e.onButtonPress,p=e.buttonStyle,h=e.titleStyle,m=e.subTitleStyle,f=e.imgStyle,v=e.style,g=e.isShowOperateButton,x=e.isShowRentalDate,C=(0,zt.Z)(e,ni);return(0,M.jsxs)(N.View,{className:(0,s.classnames)("car-error",i),style:v,children:[!!o&&(0,M.jsx)(N.View,{children:(0,M.jsx)(N.Image,{className:"car-error-img",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/".concat(a,".png"),style:f})}),(0,M.jsxs)(N.View,{className:"car-error-content",children:[!!c&&(0,M.jsx)(N.View,{className:"car-error-title",style:h,children:c}),!!l&&(0,M.jsx)(N.View,{className:"car-error-sub-title",style:m,children:l})]}),!!g&&(0,M.jsx)(ht.Z,{className:"car-error-button",style:p,onClick:d,debounce:!0,children:u}),!!x&&(0,M.jsx)(ii,(0,r.Z)({},C))]})};si.ErrorType=ri;var oi=si,ai=["data","section","activeGroupId","soldOutList","vehicleList","priceGroupItem","item","selectedFilters","setVendorListModalData","unUrlProduct","progressIsFinish"],ci="//pic.c-ctrip.com/car/osd/mobile/bbk/resource/tinified.png",li=function(e,t){var i=(0,s.get)(e,"section"),n=(0,s.get)(t,"section"),r=JSON.stringify(i),o=JSON.stringify(n),a=(0,s.get)(e,"data"),c=(0,s.get)(t,"data"),l=JSON.stringify(a),u=JSON.stringify(c),d=(0,s.get)(e,"unUrlProduct"),p=(0,s.get)(t,"unUrlProduct"),h=(0,s.get)(e,"soldOutList"),m=(0,s.get)(t,"soldOutList");return r===o&&l===u&&d===p&&h===m},ui=function(e){var t=e.data,i=e.section,n=e.activeGroupId,o=e.soldOutList,a=e.vehicleList,c=e.priceGroupItem,l=e.item,u=e.selectedFilters,d=e.setVendorListModalData,p=e.unUrlProduct,h=e.progressIsFinish,m=(0,zt.Z)(e,ai),f=i.vehicleCode,v=i.hotType,g=i.isSpecialized,x=i.vehicleIndex,w=i.isGroup,I=t.vendorPriceList,L=void 0===I?[]:I,S=t.productTopInfo,T=t.productRef,j=(0,ce.I3)(a,f,v,g,!w,void 0,T),_=j.vehicleHeader,y=j.vehicleDesc,k=_.vehicleName,Z=_.isHotLabel,P=_.licenseLabel,V=_.licenseType,O=_.groupName,E=_.groupId,R=y.imgUrl,G=y.vehicleLabelsGroupName,A=y.vehicleLabelsHorizontal,H=y.vehicleLabels,W=S,z=2===S,Y=(0,C.useMemo)((function(){if((null===c||void 0===c?void 0:c.length)>0){c.sort((function(e,t){return(null===e||void 0===e?void 0:e.groupSort)-(null===t||void 0===t?void 0:t.groupSort)}));var e=c.map((function(e){var t=e.vehicleCode,i=e.hotType,n=e.isSpecialized,s=(0,ce.I3)(a,t,i,n,!0,void 0,void 0),o=(0,ce.t6)(e.vendorPriceList,{vehicleCode:f,vehicleIndex:x}),c=(0,r.Z)((0,r.Z)((0,r.Z)({},e),s),{},{data:[o]});return c}));return e}return c}),[c,f,x,a]),Q=(0,C.useMemo)((function(){var e=[];return(null===Y||void 0===Y?void 0:Y.length)>0&&Y.forEach((function(t){e.push("".concat(t.style,"\xb7").concat(t.displacement))})),e}),[Y]),X=(0,C.useMemo)((function(){return Q.length>2?K.moreText:""}),[Q.length]),$=(0,C.useMemo)((function(){return Q.slice(0,2)}),[Q]),ee=(0,C.useMemo)((function(){var e=[Xt.q.JJp,Xt.q.pjQ,Xt.q.r90],t=(0,b.Z)(G),i=[];return $.length<=0&&(i=i.concat(H)),A.forEach((function(n){var r;e.includes(null===n||void 0===n||null===(r=n.icon)||void 0===r?void 0:r.iconContent)?i.push(B.Utils.mappingLabel(n)):t.push(B.Utils.mappingLabel(n))})),$.length>0&&(H.forEach((function(e){t.push(B.Utils.mappingLabel(e))})),i.push({text:"".concat($.join("\u3001")).concat(X),icon:{iconContent:Xt.q.JJp}})),{firstLabels:t,secondLabels:i}}),[$,X,H,G,A]),te=(0,C.useMemo)((function(){return(0,ce.iC)({activeGroupId:n,vehicleIndex:x,hotType:v})}),[n,v,x]),ie=(0,C.useMemo)((function(){return(0,ce.OX)(t,{vehicleCode:f,vehicleIndex:x})}),[t,f,x]),ne=(0,C.useMemo)((function(){var e=!1;if((null===o||void 0===o?void 0:o.length)>0){e=!0;for(var t=0;t<i.vendorPriceList.length;t++){var n=i.vendorPriceList[t],r=n||{},s=r.reference,a=(0,De.iC)(s);if(!o.includes(a)){e=!1;break}}}return e}),[i.vendorPriceList,o]),re=(0,C.useCallback)((function(){var e=l.length,t=(0,ce.t6)(l,{vehicleCode:f,vehicleIndex:x});d({visible:!0,data:(0,r.Z)({item:t,section:(0,r.Z)((0,r.Z)({},i),j),priceGroupItem:Y,priceListLen:e,showLikeLabel:te},m)}),q.mq.LogCode({enName:q.XG.C_LIST_OPEN_VENDORPRICE_POP.KEY,vehicleCode:f,vehicleName:k,vehicleIndex:x,groupId:E,groupName:O,selectedFilters:J(u),vechicleLable:te?K.youMayLikeLabel:""})}),[E,O,l,m,Y,i,u,d,te,f,x,j,k]),se=null;return z&&(se=((0,ce.t6)(L,{vehicleCode:f,vehicleIndex:x})||[])[0]),(0,M.jsxs)(N.View,{className:(0,s.classnames)("vehicle-wrap",{"browse-border":W}),onClick:re,children:[W&&(0,M.jsx)(N.View,{className:"vehicle-browse",children:K.browseNow}),0===x&&p&&h&&(0,M.jsxs)(N.View,{children:[(0,M.jsx)(oi,{className:"url-no-match-error",type:oi.ErrorType.noSearchResult,title:K.urlFilterNoResultTitle,subTitle:K.urlFilterNoResultDesc}),(0,M.jsxs)(F.Z,{layout:!0,center:!0,className:"recommend-wrap",children:[(0,M.jsx)(N.View,{children:(0,M.jsx)(N.Image,{className:"recommend-img",src:ci})}),(0,M.jsx)(N.Text,{className:"recommend-text",children:K.urlFilterNoResultRecommend})]})]}),(0,M.jsxs)(N.View,{onClick:z?B.Utils.noop:re,children:[(0,M.jsxs)(N.View,{className:(0,s.classnames)("vehicle-content",{"sold-out":ne}),children:[(0,M.jsxs)(F.Z,{layout:!0,horizontal:!0,className:"vehicle-top",children:[(0,M.jsx)(N.View,{children:(0,M.jsx)(Ne.Z,{src:R,type:B.Utils.procImageParamsType.isdList,vehicleCode:f,className:"vehicle-img"})}),(0,M.jsxs)(N.View,{className:"vehicle-top-content",children:[(0,M.jsx)(Je.Z,{name:k,licenseTag:P,licenseType:V}),(0,M.jsxs)(N.View,{className:"vehicle-top-desc",children:[(0,M.jsx)(U,{items:ee.firstLabels}),(0,M.jsx)(U,{items:ee.secondLabels})]})]})]}),te&&(0,M.jsx)(N.View,{children:(0,M.jsx)(N.Image,{className:"like-image",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/guesslike.png"})}),Z&&(0,M.jsx)(N.View,{children:(0,M.jsx)(N.Image,{className:"hot-image",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/hot.png"})})]}),!z&&(0,M.jsx)(Qt,(0,r.Z)({isSoldOut:ne},ie))]}),!!z&&(0,M.jsx)(D,(0,r.Z)((0,r.Z)({index:0},se),{},{isHideCommentLabel:!0,section:i,vehicleItemData:j,vehicleName:k,isHotLabel:Z,isSoldOut:ne}),"".concat(f,"_").concat(x,"_").concat(-1))]})},di=(0,C.memo)(ui,li),pi=function(e){return{vehicleList:(0,c.getVehicleList)(),soldOutList:(0,a.pl)(e),selectedFilters:(0,a.NH)(e),progressIsFinish:(0,a.eT)(e)}},hi=function(e){return{setVendorListModalData:function(t){return e((0,qe.D)(t))}}},mi=(0,s.connect)(pi,hi)(di),fi=function(e){var t=e.vehicleName,i=e.isSpecialized,n=e.isSoldOut,r="".concat(t).concat(i?K.specialized:K.orSimilar);return(0,M.jsx)(F.Z,{className:(0,s.classnames)("veh-title",n&&"sold-out-filter"),children:r})},vi=(0,C.memo)(fi),gi=function(e){var t=e.vehicle,i=e.isSoldOut,n=t||{},r=n.imageList,o=n.hasConditioner,a=n.transmissionType,c=n.transmissionName,l=n.passengerNo,u=n.luggageNo,d=n.doorNo,p=n.groupSubName,h=n.conditionerDesc,m=(0,oe.uL)(null===r||void 0===r?void 0:r[0]),f=(0,le.wu)([{icon:le.Tu.car,text:p}]),v=(0,le.wu)([{icon:le.Tu.seat,text:l},{icon:le.Tu.luggage,text:u},{icon:le.Tu.door,text:d}]),g=(0,le.wu)([{icon:le.Tu.transmission,text:c,transmissionType:a},{icon:le.Tu.snow,text:h,hasConditioner:o}]),x=[f,v,g],C=(0,oe.uL)(m);return C||(C=te.ImageUrl.defaultVehicleImg,q.mq.LogTraceDev({key:q.Wz.c_car_dev_list_no_veh_img,info:{vehicleCode:null===t||void 0===t?void 0:t.vehicleCode,expCode:te.ApiResCode.TraceCode.E1005,eventResult:!1}})),(0,M.jsxs)(N.View,{className:(0,s.classnames)("veh-card",i&&"sold-out-filter"),children:[(0,M.jsx)(N.View,{className:"veh-img-wrap",children:(0,M.jsx)(Ne.Z,{src:C,type:Ce.procImageParamsType.osdList,vehicleCode:null===t||void 0===t?void 0:t.vehicleCode,className:"veh-img"})}),(0,M.jsx)(N.View,{className:"veh-label-wrap","data-testid":te.UITestID.car_testid_page_list_veh_label,"data-value":(null===x||void 0===x?void 0:x.length)>0?JSON.stringify(x):"",children:null===x||void 0===x?void 0:x.map((function(e){return 0===e.length?null:(0,M.jsx)(N.View,{className:"veh-label",children:e.map((function(t,i){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)($.Z,{type:"icon",className:"veh-icon",children:t.icon}),(0,M.jsx)(F.Z,{className:"veh-label-text",children:t.text}),e.length>1&&e.length-1>i&&(0,M.jsx)(N.View,{className:"veh-label-split"})]})}))})}))})]})},xi=gi,Ci=function(e){var t=e.data,i=e.isSoldOut,n=t.vendorListDesc,r=t.logoUrlList,o=t.price,a=t.descText,c=t.minTotalPriceOtherDesc,l=t.discountLabels,u=t.priceCurrencyRMB,d=t.originPrice,p=t.originPriceCurrencyRMB,h=t.vehicleCode,m={price:o,priceCurrency:u,originPrice:d,originPriceCurrency:p,descText:a,minTotalPriceOtherDesc:c,discountLabels:l};return(0,M.jsxs)(N.View,{children:[(0,M.jsxs)(N.View,{className:"veh-price",children:[(0,M.jsx)(N.View,{children:(0,M.jsxs)(N.View,{"date-value":null===r||void 0===r?void 0:r.length,"data-testid":te.UITestID.car_testid_page_list_vendor_logo,className:(0,s.classnames)("veh-price-left",i&&"sold-out-filter"),children:[null===r||void 0===r?void 0:r.map((function(e,t){return(0,M.jsx)(N.View,{className:"veh-price-logo-wrap",children:(0,M.jsx)(Ne.Z,{src:e,type:Ce.procImageParamsType.osdVehLogo,vehicleCode:h,className:"veh-price-logo"})},"".concat(e,"_").concat(t))})),(0,M.jsx)(F.Z,{"data-testid":te.UITestID.car_testid_page_list_vendor_text,className:"veh-vendor-text",children:n})]})}),(0,M.jsx)(N.View,{className:(0,s.classnames)("veh-price-right",i&&"sold-out-filter"),children:(0,M.jsx)(ne,{isSoldOut:i,data:m})})]}),(0,M.jsxs)(N.View,{className:(0,s.classnames)("m-t-4",i&&"veh-price-section-sold-out"),children:[i&&(0,M.jsx)(N.View,{className:"sold-out-warning",children:K.listCombine_soldOut}),(0,M.jsx)(re,{isSoldOut:i,data:m})]})]})},Ni=(0,C.memo)(Ci),wi=["data","section","activeGroupId","saleOutProductCode","priceGroupItem","item","selectedFilters","setVendorListModalData","unUrlProduct","progressIsFinish"],Ii=function(e){var t=e.data,i=e.section,n=(e.activeGroupId,e.saleOutProductCode),s=(e.priceGroupItem,e.item),o=e.selectedFilters,a=e.setVendorListModalData,l=(e.unUrlProduct,e.progressIsFinish,(0,zt.Z)(e,wi)),u=i.vehicleCode,d=i.hotType,p=i.isSpecialized,h=i.vehicleIndex,m=i.isGroup,f=t.vendorPriceList,v=void 0===f?[]:f,g=(t.productTopInfo,t.productRef),x=(0,c.getVehicleList)(),w=(0,ce.I3)(x,u,d,p,!m,void 0,g),I=w.vehicleHeader,L=I.vehicleName,S=I.groupName,b=I.groupId,T=(0,C.useMemo)((function(){return null===x||void 0===x?void 0:x.find((function(e){return(null===e||void 0===e?void 0:e.vehicleCode)===u}))}),[x,u]),j=(0,C.useMemo)((function(){return(0,ce.OX)(t,{vehicleCode:u,vehicleIndex:h})}),[t,u,h]),_=(0,C.useCallback)((function(){var e=s.length,t=(0,ce.t6)(s,{vehicleCode:u,vehicleIndex:h});a({visible:!0,data:(0,r.Z)({item:t,section:(0,r.Z)((0,r.Z)((0,r.Z)({},i),w),{},{vehicleInfo:T}),priceListLen:e,isOsdHeader:!0,linkLabelText:p?K.specialized:K.orSimilar},l)}),q.mq.LogCode({enName:q.XG.C_LIST_OPEN_VENDORPRICE_POP.KEY,vehicleCode:u,vehicleName:L,vehicleIndex:h,groupId:b,groupName:S,selectedFilters:J(o)})}),[b,S,s,l,i,o,a,u,h,w,L]),y=ve({vendorPriceList:v,saleOutList:n});return(0,M.jsx)(N.View,{className:"vehicle-wrap",onClick:_,"data-testid":te.UITestID.car_testid_page_list_vehicle_osd,children:(0,M.jsxs)(N.View,{className:"veh-wrap",children:[(0,M.jsx)(vi,{isSoldOut:y,vehicleName:L,isSpecialized:p}),(0,M.jsx)(xi,{isSoldOut:y,vehicle:T}),(0,M.jsx)(N.View,{className:"veh-1px"}),(0,M.jsx)(Ni,{isSoldOut:y,data:j})]})})},Li=(0,C.memo)(Ii),Si=function(e){return{saleOutProductCode:(0,a.wj)(e),selectedFilters:(0,a.NH)(e),progressIsFinish:(0,a.eT)(e)}},bi=function(e){return{setVendorListModalData:function(t){return e((0,qe.D)(t))}}},Ti=(0,s.connect)(Si,bi)(Li),ji={current:0,total:Number.MAX_SAFE_INTEGER},_i=function(e){var t=e.sections,i=e.activeGroupId,n=e.activeGroupName,o=e.isLoading,a=e.isLastPage,c=e.isLoadingFail,l=e.pageNum,u=e.fetchListPage,d=e.getOsdNextPage,p=e.selectedFilters,h=e.unUrlProduct,m=(0,C.useState)(0),f=(0,_.Z)(m,2),v=f[0],g=f[1],x=B.Hooks.usePrevious(i),w=B.Hooks.usePrevious(p),I=B.Utils.isCtripIsd()?mi:Ti;(0,C.useEffect)((function(){(0,s.isEqual)(i,x)&&(0,s.isEqual)(p,w)||(g(Math.random()),k().nextTick((function(){g(0)})))}),[i,x,w,v,p]);var L=(0,C.useCallback)((function(e){return e.priceGroup&&e.priceGroup.length>0}),[]),S=(0,C.useCallback)((function(){B.Utils.isCtripIsd()?u({type:te.ListEnum.FetchListPageType.Next_Page_Search}):d()}),[u,d]),b=(0,C.useCallback)((function(){o||a||c||S()}),[S,a,o,c]),T=(0,C.useCallback)((function(e){return null===e||void 0===e?void 0:e.priceGroup}),[]),j=(0,C.useCallback)((function(e){if(!L(e))return e;var t=T(e)[0];return t.vehicleIndex=e.vehicleIndex,t}),[T,L]),y=(0,C.useCallback)((function(e){return L(e)?j(e).vendorPriceList:e.vendorPriceList}),[j,L]),Z=(0,C.useMemo)((function(){return null===t||void 0===t?void 0:t.length}),[null===t||void 0===t?void 0:t.length]),P=(0,C.useCallback)((function(){var e=K.NoMatch_Second;switch(n){case te.ListEnum.GroupBarEnums.all:return"".concat(K.noMoreFilter_First).concat(K.vehicleAllText).concat(e);case te.ListEnum.GroupBarEnums.hot:case te.ListEnum.GroupBarEnums.easyLife:return"".concat(K.noMoreFilter_First).concat(n).concat(K.vehicleAllText).concat(e);case te.ListEnum.GroupBarEnums.economy:case te.ListEnum.GroupBarEnums.comfort:case te.ListEnum.GroupBarEnums.luxury:return"".concat(K.noMoreFilter_First).concat(n).concat(K.vehicleText).concat(e);case te.ListEnum.GroupBarEnums.empty:return"";default:return"".concat(K.noMoreFilter_First).concat(n).concat(e)}}),[n]),V=(0,C.useCallback)((function(e,n,r){var s=t.indexOf(e),o=y(e),a=j(e);ji.current=s+1,ji.total=t.length;var c=(0,ce.CA)(o&&o[0],a,0,i),l=Y(),u=l.groupId,d=l.selectedFilters,p={ubtKeyName:Q.ZP.c_car_trace_list_vehicle_exposure_222013,data:{key:Q.ZP.c_car_trace_list_vehicle_exposure_222013,pageId:B.Channel.getPageId().LIST.ID,groupId:u,selectedFilters:d,vehicleData:c}};return(0,M.jsx)(N.View,{className:"autoExpose",id:"".concat(r,"_").concat(e.vehicleCode),"data-expose":p,children:(0,M.jsx)(I,{data:e,item:o,section:a,priceGroupItem:T(e),activeGroupId:i,unUrlProduct:h})})}),[i,y,T,j,t,h]),D=(0,C.useCallback)((function(){return(0,M.jsx)(Wt,(0,r.Z)((0,r.Z)({sectionsLen:Z},ji),{},{fetchNextPage:S,activeGroupName:n,activeGroupId:i}))}),[S,Z,n]),F=(0,C.useCallback)((function(){return(0,M.jsxs)(N.View,{className:"vehicle-list-empty",children:[(0,M.jsx)(oi,{type:oi.ErrorType.noSearchResult,title:P()}),(0,M.jsx)(At,{noMatch:!0})]})}),[P]);return(0,M.jsx)(N.View,{className:"vehicle-list-wrap",children:(0,M.jsx)(Ft,{listId:"VirtualList",list:t,segmentNum:12,pageNum:l,autoScrollTop:!1,onRender:V,screenNum:2,scrollViewProps:{onScrollToLower:b,lowerThreshold:700,scrollTop:v},onRenderBottom:D,onRenderEmpty:F,activeGroupId:i,selectedFilters:p})})},yi=_i,ki=[],Zi=function(e){var t=(0,a.gp)(e),i=(0,ce.ZK)(t),n=(0,c.getProductListByGroupId)(t),r=(0,a.Jk)(e),s=(0,c.getIsFromSearch)()&&!(0,c.getIsFromCache)(),o={index:(0,a.vb)(e),scrollViewHeight:(0,a.OH)(e),activeGroupId:t,activeGroupName:i,filterNoResult:r,priceCount:(0,c.getBaseAllVendorPriceCount)(),sections:r?ki:(0,ce.iD)(n),unUrlProduct:(0,c.getIsNoTopProduct)(),isLoading:(0,a.B5)(e),isLoadingFail:(0,a.Rv)(e),isLastPage:(0,l.h$)(e),networkCost:(0,c.getNetworkCost)(),isFromSearch:s,hasRetry:(0,c.getHasRetry)(),pageNum:(0,a.J$)(e),selectedFilters:(0,a.NH)(e)};return o},Pi=function(e){return{fetchListPage:function(t){return e((0,qe.dz)(t))},getOsdNextPage:function(){return e((0,qe.tC)())}}},Vi=(0,s.connect)(Zi,Pi)(yi),Di=function(e){var t=e.recommendInfo,i=e.recommendVehicleListData,n=e.isPickupDoor,r=e.updatePickupDoor,o=e.setDateInfo,a=e.fetchList,c=e.onButtonPress,l=e.errorInfo,u=e.isGroup,d=void 0!==u&&u,p=t||{},h=p.promptTitle,m=void 0===h?"":h,f=p.promptSubTitle,v=void 0===f?"":f,g=p.buttonTitle,x=void 0===g?"":g,w=p.pTime,I=void 0===w?"":w,L=p.rTime,S=void 0===L?"":L,b=p.recMsg,T=void 0===b?"":b,j=(0,C.useMemo)((function(){if(!l)return!0;var e=!1;return l&&te.ApiResCode.SERVER_ERROR.forEach((function(t){var i;null!==(i=l.toLocaleLowerCase())&&void 0!==i&&i.includes(t)&&(e=!0)})),e}),[l]),_=(0,C.useMemo)((function(){var e;return e=m?oi.ErrorType.noSearchResult:j?oi.ErrorType.noResponse:oi.ErrorType.noNetwork,e}),[j,m]),y=(0,C.useMemo)((function(){return m||(j?K.load_fail:K.networkErrTitle)}),[j,m]),k=(0,C.useMemo)((function(){return v||(j?"":K.networkErrSubtitle)}),[j,v]),Z=(0,C.useMemo)((function(){return x||K.list_retry}),[x]),P=(0,C.useMemo)((function(){return!(T&&I&&S)}),[I,S,T]),V=(0,C.useMemo)((function(){return!!(T||i&&i.length>0)}),[T,i]),D=(0,C.useCallback)((function(){o({pickup:I,dropoff:S}),a(),q.mq.LogCode({enName:q.XG.C_LIST_RECOMMEND_DATE_BUTTON.KEY,recommendPTime:I,recommendRTime:S})}),[a,I,S,o]);return(0,M.jsx)(N.View,{className:(0,s.classnames)("list-no-match-wrap",d&&"bg-color"),children:(0,M.jsx)(F.Z,{layout:!0,centered:!0,className:(0,s.classnames)(V&&"white-bg",!P&&"rental-no-match"),children:(0,M.jsx)(oi,{type:_,title:y,subTitle:k,buttonText:P&&Z,isShowOperateButton:P,isShowRentalDate:!P,reQueryText:Z,tip:T,ptime:I.replace(/-/g,"/"),rtime:S.replace(/-/g,"/"),isPickupDoor:n,updatePickupDoor:r,reQueryPress:D,onButtonPress:c})})})},Fi=(0,C.memo)(Di),Mi=function(e){return{recommendInfo:(0,c.getRecommendInfo)(),recommendVehicleListData:(0,c.getRecommendProducts)(),isPickupDoor:(0,o.S6)(e),errorInfo:(0,c.getErrorInfo)()}},Oi=function(e){return{fetchList:function(t){return e((0,qe.Y8)(t))},updatePickupDoor:function(t){return e((0,u.so)(t))},setDateInfo:function(t){return e((0,u.A2)(t))}}},Ei=(0,s.connect)(Mi,Oi)(Fi),Ri=B.Utils.getSysInfo(),Gi=Ri.windowWidth,Ui=function(){},Ai=function(e){return e/100*(Gi-36)},Hi=function(e){var t=e.code,i=e.text,n=e.filterCount,r=e.isActive,o=void 0!==r&&r,a=e.hasFilter,c=void 0!==a&&a,l=e.widthPercentage,u=void 0===l?25:l,d=e.justifyContent,p=e.marginLeft,h=e.onPressFilterBar,m=void 0===h?Ui:h,f=e.isFirst,v=e.isDisabled,g=Ai(u);return(0,M.jsxs)(F.Z,{layout:!0,center:!0,style:{width:g,justifyContent:-1===d?"flex-start":1===d?"flex-end":"center",marginLeft:p},className:"filterItem-wrap",onClick:function(){m(t,o)},"data-testid":te.UITestID.car_testid_page_list_filter_bar_item,children:[(0,M.jsx)(N.Text,{className:(0,s.classnames)("filterBarItem-text ellipsis",(o||c||f)&&"filterBarItem-text-active",v&&"filterBarItem-text-disabled"),"data-testid":te.UITestID.car_testid_page_list_filter_bar_text,children:i}),!!n&&(0,M.jsx)(N.View,{className:"filterItem-count",children:(0,M.jsx)(N.Text,{className:"filterItem-count-text","data-testid":te.UITestID.car_testid_page_list_filter_count,children:n})}),(0,M.jsx)(N.View,{className:(0,s.classnames)("filterItem-icon",(o||c||f)&&"filterBarItem-text-active"),children:(0,M.jsx)(N.Text,{className:(0,s.classnames)(o?"icon-solid-arrow-up":"icon-solid-arrow-down"),"data-testid":te.UITestID.car_testid_page_list_filter_item_icon})})]})},Bi=Hi,qi=function(){},Wi=function(e,t){return e.map((function(i,n){return(0,C.createElement)(Bi,(0,r.Z)((0,r.Z)({onPressFilterBar:t,isFirst:0===n},i),{},{key:i.text,length:e.length}))}))},zi=function(e,t){return!(!e.isHitCache||!t.isHitCache||(null===e||void 0===e?void 0:e.items)!==(null===t||void 0===t?void 0:t.items)||e.progress===t.progress&&e.progressIsFinish===t.progressIsFinish)||e===t},Yi=(0,C.memo)((function(e){var t=e.items,i=void 0===t?[]:t,n=e.setActiveFilterBarCode,r=void 0===n?qi:n,o=e.setFilterModalIsShow,a=void 0===o?qi:o,c=(0,C.useCallback)((function(e,t){r({activeFilterBarCode:B.Utils.selector(!t,e,""),type:e,isActive:t}),a(t?{visible:!1}:{visible:!0})}),[]),l=(0,C.useCallback)((0,s.debounce)((function(e,t){return c(e,t)}),400,{leading:!0,trailing:!1}),[]),u=[22.45,24.34,28.13,21.57],d=[0,8,8,8],p=[-1,1,1,1];i.forEach((function(e,t){e.widthPercentage=u[t],e.justifyContent=p[t],e.marginLeft=d[t]}));var h=Wi(i,l);return(0,M.jsx)(F.Z,{className:"fitlerbar-wrap",layout:!0,"data-testid":te.UITestID.car_testid_page_list_filter_bar_wrap,children:h})}),zi),Ji=Yi,Qi=function(e){return{items:(0,a.Gc)(e),progress:(0,a.xC)(e),progressIsFinish:(0,a.eT)(e),filterModalVisible:(0,a.vJ)(e)}},Xi=function(e){return{setActiveFilterBarCode:function(t){e((0,qe.BL)(t))},setFilterModalIsShow:function(t){return e((0,qe.Ni)(t))},setFilterBarIsShow:function(e){(0,W.Aj)(W.Qu.filterBarIsShow,e)}}},Ki=(0,s.connect)(Qi,Xi)(Ji),$i=i(11023),en=(0,C.memo)((function(e){var t=e.name,i=e.isSelected,n=e.code,r=e.imageUrl,o=void 0===r?"":r,a=e.groupCode,c=e.onPressItem,l=void 0===c?B.Utils.noop:c,u=(0,C.useCallback)((0,s.debounce)((function(){var e={name:t,code:n,isSelected:!i};l(e),q.mq.LogCode({enName:q.XG.C_LIST_FILTER_ITEM.KEY,name:q.XG.C_LIST_FILTER_ITEM.NAME,info:{itemType:a,itemName:t,itemCode:n,isSelected:i?"0":"1"}})}),300),[n,i,t,l]);return(0,M.jsxs)(N.View,{className:(0,s.classnames)("quickfilterbar-itemwrap",!!o&&"quickfilterbar-itemImagewrap",i&&"selected"),onClick:u,"data-testid":te.UITestID.car_testid_page_list_quick_filter_bar_btn,children:[!!o&&(0,M.jsx)(N.Image,{src:o,mode:"widthFix",className:"filteritem-Image"}),!!t&&(0,M.jsx)(N.Text,{className:"quickFilterBar-itemtxt",children:t}),i&&(0,M.jsx)(N.View,{children:(0,M.jsx)(N.Image,{src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/filterSelected.png",className:"filterSelectedImg"})})]})})),tn=function(e,t){return!(!e.isHitCache||!t.isHitCache||e.selectedFilters!==t.selectedFilters||e.quickFilterItems!==t.quickFilterItems||e.progress===t.progress&&e.progressIsFinish===t.progressIsFinish)||e===t},nn=(0,C.memo)((function(e){var t=e.quickFilterItems,i=void 0===t?[]:t,n=e.selectedFilters,o=e.updateSelectedFilter,a=(e.isHitCache,e.activeGroupId),c=void 0===a?"":a,l=e.updatePickupDoor,u=(0,C.useRef)([]),d=(0,C.useRef)(0),p=i.length<4,h=(0,C.useCallback)((function(){var e=n.filterLabels,t=[];e.forEach((function(e){i.findIndex((function(t){return t.itemCode===e.code}))>-1&&t.push((0,r.Z)((0,r.Z)({},e),{},{isSelected:!0}))})),u.current=t}),[n,u,i]);(0,C.useEffect)((function(){h()}),[n,h]);var m=(0,C.useCallback)((0,s.debounce)((function(){return B.Hooks.updateSelectedFilterByItem({item:u.current,newSelectedFilters:n,updateSelectedFilter:o,activeGroupId:c})}),50),[n,o,c]),f=function(e){var t=[].concat((0,b.Z)(u.current),[e]),i=B.Hooks.updateFiltersItem(t);u.current=i,m()},v=function(e){"StoreService_PickupOnDoor"===(null===e||void 0===e?void 0:e.code)&&l(null===e||void 0===e?void 0:e.isSelected),f(e)};return p?null:(0,M.jsx)(N.ScrollView,{className:"quickFilterBar-scroll",scrollX:!0,scrollLeft:d.current,onScroll:function(e){d.current=e.detail.scrollLeft},children:(0,M.jsxs)(F.Z,{className:"quickFilterBar-wrap",layout:!0,children:[i.map((function(e){return(0,M.jsx)(en,(0,r.Z)((0,r.Z)({},e),{},{onPressItem:v,itemsLength:i.length}),e.code)})),(0,M.jsx)(N.View,{className:"blank-item"})]})})}),tn),rn=nn,sn=function(e){var t=bt.ListResSelectors.getQuickFilter().map((function(t){var i;return(0,r.Z)((0,r.Z)({code:t.itemCode},t),{},{imageUrl:!!t.icon&&!t.name&&t.icon,isSelected:null===e||void 0===e||null===(i=e.bitsFilter)||void 0===i?void 0:i.includes(t.itemCode)})}));return{quickFilterItems:t,selectedFilters:e}},on=(0,s.createSelector)([a.NH,bt.ListResSelectors.getHashCode],sn),an=function(e){var t=(0,r.Z)((0,r.Z)({},on(e)),{},{progress:(0,a.xC)(e),progressIsFinish:(0,a.eT)(e),activeGroupId:(0,a.gp)(e)});return t},cn=function(e){return{updateSelectedFilter:function(t){return e((0,qe.Jh)(t))},setQuickFilterBarIsShow:function(e){(0,W.Aj)(W.Qu.quickFilterBarIsShow,e)},updatePickupDoor:function(t){return e((0,u.so)(t))}}},ln=(0,s.connect)(an,cn)(rn),un=function(e){var t=e.item,i=e.isLastItem,n=e.isSelected,r=e.onChoose;return(0,M.jsxs)(F.Z,{onClick:function(){return r(t.isSelected)},className:(0,s.classnames)("selectmenuitem-wrap",i&&"last"),layout:!0,"data-testid":te.UITestID.car_testid_page_list_filter_modal_select_menu,children:[(0,M.jsx)(N.Text,{className:(0,s.classnames)("selectmenuitem-txt",n&&"selected"),children:t.name}),n&&(0,M.jsx)(N.View,{className:"icon-tick selected"})]})},dn=function(e,t,i){var n=(0,s.clone)(e);return n.forEach((function(e){t&&e.code===t.code?e.isSelected=i:e.isSelected=!1})),n},pn=function(e){var t=e.filterData,i=e.onToggle,n=(0,C.useState)(t),r=(0,_.Z)(n,2),s=r[0],o=r[1];return(0,C.useEffect)((function(){o(t)}),[t]),(0,M.jsx)(N.View,{className:"selectValue-wrap",children:s&&s.length&&s.map((function(e,t){var n=t===s.length-1;return(0,M.jsx)(un,{item:e,isLastItem:n,isSelected:e.isSelected,onChoose:function(t){var n=dn(s,e,t);o(n),i(e),q.mq.LogCode({enName:q.XG.C_LIST_SAVED_SORT.KEY,name:q.XG.C_LIST_SAVED_SORT.NAME,info:{itemName:null===e||void 0===e?void 0:e.name,itemCode:null===e||void 0===e?void 0:e.code}})}},e.code)}))})},hn=pn,mn=i(69426),fn=B.Utils.noop,vn=function(e){var t=e.name,i=e.code,n=e.groupCode,r=e.itemCode,o=e.imageUrl,a=e.isSelected,c=e.onFilterBtnPress,l=void 0===c?fn:c,u=e.mark,d=e.isOneRow,p=void 0!==d&&d,h=e.width,m=void 0===h?83:h,f=(0,C.useCallback)((0,s.debounce)((function(){try{var e={name:t,code:i,isSelected:a,groupCode:n,itemCode:r};l(e),q.mq.LogCode({enName:q.XG.C_LIST_FILTER_ITEM.KEY,name:q.XG.C_LIST_FILTER_ITEM.NAME,info:{itemType:n,itemName:t,itemCode:i,isSelected:a?"0":"1"}})}catch(e){}}),300),[t,i,a,n,r,a]),v=null===i||void 0===i?void 0:i.includes("Vendor_-1"),g=(null===i||void 0===i?void 0:i.includes("BrandGroup"))||(null===i||void 0===i?void 0:i.startsWith("Brand_"));return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(N.View,{style:{width:"".concat(m,"px")},onClick:f,className:(0,s.classnames)("filterItemList-wrap",o&&!v&&!g&&"filterItem-rowwrap",o&&!!v&&!g&&"filteritem-vendor-image",!v&&!!g&&"filteritem-car-brand-image",a&&"selected",p&&"one"),"data-testid":te.UITestID.car_testid_page_list_filter_modal_item_osd,children:[!!o&&(0,M.jsx)(N.Image,{style:{width:g||v?"":m},src:(0,oe.uL)(o),mode:v?"widthFix":"aspectFill",className:(0,s.classnames)(v?"vendorImage":g?"brandImage":"filterImage")}),!!t&&(0,M.jsx)(N.Text,{className:(0,s.classnames)("filterItem-text",a&&"selected",!!o&&(!g||!v)&&"brandItem-text"),children:t}),!!u&&(0,M.jsx)(N.View,{className:"promotionWrap",children:(0,M.jsx)(N.Text,{className:"promotionText",children:u})}),a&&(0,M.jsx)(N.Image,{src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/filterSelected.png",className:"filterSelectedImg"})]})})},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=B.Utils.getSysInfo(),i=t.windowWidth,n=i-114,r=(i-(228+12*e)/2)/e;return{wrapWidth:n,itemWidth:r}},xn=function(e){var t=e.filterItems,i=e.splitNum,n=e.onFilterBtnPress,s=gn(i),o=s.wrapWidth,a=s.itemWidth;return(0,M.jsx)(N.View,{className:"lineFilter-wrap",style:{width:o},children:t.map((function(e){return(0,M.jsx)(vn,(0,r.Z)((0,r.Z)({isOneRow:1===i},e),{},{onFilterBtnPress:n,width:a}))}))})},Cn=function(e){(0,v.Z)(i,e);var t=(0,g.Z)(i);function i(e){var n;(0,d.Z)(this,i),n=t.call(this,e),(0,x.Z)((0,h.Z)(n),"layoutDetailInfo",void 0),(0,x.Z)((0,h.Z)(n),"handleShowMore",(function(){var e=n.props,t=e.showMore,i=void 0===t?fn:t,r=e.code,s=e.name,o=n.state.isShowMore,a=o?K.showLess:K.showMore;n.setState({isShowMore:!o}),i({code:r,name:s,text:a})})),(0,x.Z)((0,h.Z)(n),"onFilterBtnPress",(function(e){var t=n.props,i=t.code,r=t.filterItems,s=t.isSingleChoice,o=t.updateTempFilterItems,a=t.changeTempFilterData,c=t.priceStep,l=void 0===c?0:c,u=t.maxRange,d=!e.isSelected,p=(0,oe.w3)(r,e,"isSelected",d,s),h=null;if(o(i,p),"Price"===i){var m=e.code.split("-"),f=parseInt(m[0],10),v=parseInt(m[1],10),g=B.Utils.ceil(v,-(v.toString().length-1)),x=d?f:0,C=d&&g+l!==u?v:0;h={start:x,end:C}}if("StoreService_PickupOnDoor"===(null===e||void 0===e?void 0:e.code)){var N=n.props.updatePickupDoor;N(d)}a&&a(e,d?"add":"delete","Price"===i,s,h)})),(0,x.Z)((0,h.Z)(n),"getSplitNum",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("Brand")>-1;return"DriverLienee"===e||e===mn.FilterBarType.DriverLience?1:t?2:3})),(0,x.Z)((0,h.Z)(n),"getLineFilterItems",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=[];if(e&&e.length>0)for(var n=0;n<e.length;n+=t)i.push(e.slice(n,n+t));return i})),n.layoutDetailInfo=[];var r=e.filterItems,s=e.showOperationMinNum,o=void 0===s?15:s,a=o-1,c=r.find((function(e,t){return e.isSelected&&t>a}))&&!0;return n.state={isShowMore:!!c},n}return(0,p.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.code,i=e.onLayoutCallback;setTimeout((function(){k().nextTick((function(){B.Utils.getElHeight("#".concat(t)).then((function(e){e&&i(e,t)})).catch()}))}),300)}},{key:"shouldComponentUpdate",value:function(e,t){var i=this.props,n=i.selectedGroupCode,r=i.filterItems;return(this.state!==t||JSON.stringify(r||null)!==JSON.stringify(e.filterItems||null)||n!==e.selectedGroupCode)&&(this.props!==e||this.state!==t)}},{key:"render",value:function(){var e=this,t=this.props,i=t.code,n=t.name,r=t.filterItems,o=t.needShowOperation,a=t.selectedGroupCode,c=this.state.isShowMore,l=this.getSplitNum(i),u=this.getLineFilterItems(r,l),d=o&&!c?u.slice(0,5):u,p=c?K.showLess:K.showMore,h=c?"icon-arrow-up":"icon-arrow-down",m=i===a;return(0,M.jsxs)(N.View,{id:i,children:[(0,M.jsxs)(N.View,{className:"groupName-wrap",children:[(0,M.jsx)(N.Text,{className:(0,s.classnames)("groupName-name",m&&"selected"),children:n}),o&&(0,M.jsxs)(F.Z,{className:"groupName-showmore",onClick:this.handleShowMore,layout:!0,centered:!0,children:[(0,M.jsx)(N.Text,{className:"groupName-optxt",children:p}),(0,M.jsx)(N.Text,{className:h})]})]}),(0,M.jsx)(N.View,{children:d.map((function(t){return(0,M.jsx)(xn,{filterItems:t,splitNum:l,onFilterBtnPress:e.onFilterBtnPress})}))})]})}}]),i}(C.Component),Nn=(0,C.memo)(Cn),wn=B.Utils.noop,In=82,Ln=function(e){(0,v.Z)(i,e);var t=(0,g.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this,e),(0,x.Z)((0,h.Z)(n),"scrollRef",{}),(0,x.Z)((0,h.Z)(n),"layoutInfo",void 0),(0,x.Z)((0,h.Z)(n),"layoutDetailInfo",void 0),(0,x.Z)((0,h.Z)(n),"isUpdate",void 0),(0,x.Z)((0,h.Z)(n),"isGestureScroll",void 0),(0,x.Z)((0,h.Z)(n),"scrollThrottle",void 0),(0,x.Z)((0,h.Z)(n),"updateTempFilterItems",(function(e,t){var i=n.state.filterGroupListState.concat(),s=i.findIndex((function(t){return t.code===e}));if(s>-1){var o=(0,r.Z)((0,r.Z)({},i[s]),{},{filterItems:t,isSelected:t.some((function(e){return e.isSelected}))});i[s]=o,n.setState({filterGroupListState:i})}})),(0,x.Z)((0,h.Z)(n),"setScrollThrottle",(function(){n.scrollThrottle=(0,s.throttle)(n.onScroll,100,{trailing:!1})})),(0,x.Z)((0,h.Z)(n),"getSplitNum",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("Brand")>-1;return"DriverLienee"===e||e===mn.FilterBarType.DriverLience?1:t?2:3})),(0,x.Z)((0,h.Z)(n),"getScrollHeight",(function(e){for(var t=n.props.filterGroupList,i=void 0===t?[]:t,r=0,s=i.findIndex((function(t){return t.code===e})),o=0;o<s;o+=1)r+=n.layoutInfo[o]||0;var a=i[s];if(a&&a.isSelected&&a.needShowOperation){for(var c=a.filterItems.findIndex((function(e){return e.isSelected})),l=n.getSplitNum(e),u=Math.ceil((c+1)/l)-1,d=In,p=n.layoutDetailInfo[e],h=0;h<u;h+=1)p&&p[h]&&(d+=p[h]);r+=d}return r})),(0,x.Z)((0,h.Z)(n),"handleLayoutCallback",(function(e,t){var i=n.state.needScrollToCode,r=n.props,s=r.filterGroupList,o=r.changeNav,a=void 0===o?wn:o,c=s.findIndex((function(e){return e.code===t}));n.layoutInfo[c]=e,t===i&&(n.setState({needScrollToCode:""}),a(i))})),(0,x.Z)((0,h.Z)(n),"handleScrollToByCode",(function(e){var t=n.getScrollHeight(e);n.isGestureScroll=!1,n.setState({scrollTop:t})})),(0,x.Z)((0,h.Z)(n),"showMore",(function(e){var t=n.props.showMore,i=void 0===t?wn:t,r=e.code;i(e),n.setState({needScrollToCode:r})})),(0,x.Z)((0,h.Z)(n),"setLayOutDetailInfo",(function(e,t){n.layoutDetailInfo[e]=t})),(0,x.Z)((0,h.Z)(n),"setNextCode",(function(e){for(var t=n.props,i=t.filterGroupList,r=void 0===i?[]:i,o=t.setGroupCodeCallback,a=0,c=0,l=0;l<n.layoutInfo.length;l+=1){var u=n.layoutInfo[l];if(e>=a&&e<a+u){c=l;break}a+=u}var d=(0,s.get)(r[c],"code");d&&o(d)})),(0,x.Z)((0,h.Z)(n),"onScroll",(function(e){if(n.isGestureScroll){var t=e.nativeEvent,i=t.contentOffset.y;n.setNextCode(i)}})),(0,x.Z)((0,h.Z)(n),"onScrollBeginDrag",(function(){n.isGestureScroll=!0})),(0,x.Z)((0,h.Z)(n),"onMomentumScrollEnd",(function(e){if(n.isGestureScroll){var t=e.nativeEvent,i=t.contentOffset.y;n.setNextCode(i)}})),n.layoutInfo=[],n.layoutDetailInfo={},n.state={filterGroupListState:e.filterGroupList||[],needScrollToCode:"",scrollTop:0},n.setScrollThrottle(),n}return(0,p.Z)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.filterGroupList!==e.filterGroupList&&this.state.filterGroupListState!==e.filterGroupList&&this.setState({filterGroupListState:e.filterGroupList})}},{key:"render",value:function(){var e=this,t=this.props,i=t.changeTempFilterData,n=t.priceStep,o=t.showOperationMinNum,a=t.selectedGroupCode,c=t.updatePickupDoor,l=this.state,u=l.filterGroupListState,d=l.scrollTop;return 0===(0,s.get)(u,"length")?null:(0,M.jsxs)(N.ScrollView,{scrollY:!0,className:"filterGroup-wrap",scrollIntoView:a,scrollTop:d,onScroll:function(t){e.scrollRef.current=t.detail.scrollTop},children:[u.map((function(t){return(0,M.jsx)(Nn,(0,r.Z)((0,r.Z)({},t),{},{updateTempFilterItems:e.updateTempFilterItems,changeTempFilterData:i,showMore:e.showMore,priceStep:n,selectedGroupCode:a,showOperationMinNum:o,setLayOutDetailInfo:e.setLayOutDetailInfo,updatePickupDoor:c,onLayoutCallback:e.handleLayoutCallback}))})),(0,M.jsx)(N.View,{className:"filterEmpty"})]})}}]),i}(C.Component),Sn=Ln,bn=function(e,t){var i=[];return e&&e.length>0&&e.forEach((function(e){i.push({name:e.name,code:e.code,isShowDot:e.isSelected,isSelected:t===e.code})})),i},Tn=(0,C.memo)((function(e){var t=e.name,i=e.isSelected,n=e.isShowDot,r=e.onPressNav,o=e.isFirst,a=void 0!==o&&o;return(0,M.jsx)(N.View,{onClick:r,className:(0,s.classnames)("filterList-nav",a&&"navfirst",i&&"navselected"),"data-testid":te.UITestID.car_testid_page_list_filter_modal_filter_nav,children:(0,M.jsxs)(N.View,{children:[!!t&&(0,M.jsx)(N.Text,{className:(0,s.classnames)("filterList-txt",i&&"txtSelected"),children:t}),n&&(0,M.jsx)(N.View,{className:"filterList-dot"})]})})}),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),jn=function(e){var t=e.filterNavList,i=(e.handleRefCallback,e.onPressNav);if(!t)return null;var n=function(e,t){i((0,r.Z)((0,r.Z)({},e),{},{index:t}))};return(0,M.jsx)(N.View,{className:"nav-wrap",children:(0,M.jsx)(N.ScrollView,{children:t.map((function(e,t){return(0,M.jsx)(Tn,(0,r.Z)((0,r.Z)({isFirst:0===t},e),{},{onPressNav:function(){return n(e,t)}}))}))})})},_n=function(e){var t=e.changeFilterNav,i=e.filterGroups,n=(e.listThreshold,e.priceStep),r=void 0===n?50:n,o=e.showOperationMinNum,a=e.showMore,c=e.changeTempFilterData,l=e.type,u=e.updatePickupDoor,d=(0,C.useRef)(null),p=(0,C.useState)(""),h=(0,_.Z)(p,2),m=h[0],f=h[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=0,n=e.findIndex((function(e){return e.code===t}));if(n>-1)return t;var r=e.findIndex((function(e){return e.isSelected}));r>-1&&(i=r);var o=(0,s.get)(e[i],"code");return o},g=function(e){e!==m&&f(e)},x=function(e){e},w=function(e){f(e)},I=function(e){var i,n=e.index,r=e.code,s=e.name;t&&t({index:n,code:r,name:s}),r!==m&&(f(r),null===d||void 0===d||null===(i=d.current)||void 0===i||i.handleScrollToByCode(r))},L=v(i,m),S=bn(i,L);return(0,M.jsxs)(N.View,{className:"filter-container",children:[(0,M.jsx)(jn,{filterNavList:S,handleRefCallback:x,onPressNav:I}),(0,M.jsx)(Sn,{type:l,selectedGroupCode:L,filterGroupList:i,priceStep:r,showMore:a,showOperationMinNum:o,changeTempFilterData:c,setGroupCodeCallback:g,ref:d,changeNav:w,updatePickupDoor:u})]})},yn=_n,kn=(0,C.memo)((function(e){var t=e.onDetermine,i=e.onClear,n=e.children;return(0,M.jsx)(N.View,{children:n||(0,M.jsxs)(N.View,{className:"filterFooter-wrap",children:[(0,M.jsx)(N.Button,{className:"filterFooter-btn-clear",onClick:i,"data-testid":te.UITestID.car_testid_page_list_filter_modal_clear_btn,children:K.clearAll}),(0,M.jsx)(N.Button,{className:"filterFooter-btn-finish",onClick:t,children:K.complete})]})})})),Zn=kn,Pn=te.ListEnum.FilterBarType,Vn=te.ListEnum.GroupCode,Dn=function(){},Fn=function(e,t){return""===t.type||void 0===t.type},Mn=(0,C.memo)((function(e){var t=e.type,i=e.filterData,n=e.currency,r=e.priceStep,o=e.listThreshold,a=e.updateSelectedFilter,c=void 0===a?Dn:a,l=e.updateTempFilter,u=void 0===l?Dn:l,d=e.onHide,p=e.onDetermine,h=e.onClear,m=e.activeGroupId,f=e.updateEachSelect,v=e.updatePickupDoor;e.filterNoResult;if(!t)return null;if(t===Pn.Sort){var g=function(e){var t=e.code;c({sortFilter:t,activeGroupId:m,isFilter:!0}),d()};return(0,M.jsx)(hn,{filterData:i,listThreshold:o,onToggle:g})}var x=function(e,i,n,r,s){u(e,i,t,n,r,s)};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(yn,{filterGroups:(0,s.get)(i,"[0].filterGroups"),currency:n,listThreshold:o,type:t,priceStep:r,changeTempFilterData:x,updatePickupDoor:v}),(0,M.jsx)(Zn,{isNoTips:f,onDetermine:p,onClear:h})]})}),Fn),On=function(e,t,i){var n=[],r=[],o=i;n=t;var a=[];return a=n.filter((function(e){return e&&e.code})),r=(0,s.flatten)(a.map((function(e){return e&&e.code}))),o&&0===o.min&&0===o.max&&(o={}),{sortFilter:e,priceFilter:"{}"===JSON.stringify(o)?[]:[o],bitsFilter:En(r),filterLabels:En(n),commentFilter:[]}},En=function(e){return Object.isExtensible(e)||Object.isFrozen(e)||Object.isSealed(e)?JSON.parse(JSON.stringify(void 0===e?null:e)):e},Rn=function(e){var t=e.visible,i=e.filterData,n=e.selectedFilters,o=e.allFilters,a=void 0===o?[]:o,c=e.priceRange,l=e.type,u=e.currency,d=e.priceStep,p=e.updateSelectedFilter,h=void 0===p?Dn:p,m=e.setActiveFilterBarCode,f=e.getFilterCalculate,v=e.setFilterModalIsShow,g=e.listThreshold,x=e.activeGroupId,N=e.updateEachSelect,w=e.filterNoResult,I=e.updatePickupDoor,L=(0,C.useState)([]),b=(0,_.Z)(L,2),T=b[0],j=b[1],y=(0,C.useState)({min:0,max:0}),k=(0,_.Z)(y,2),Z=k[0],P=k[1],V=(0,C.useState)([]),D=(0,_.Z)(V,2),F=D[0],O=D[1],E=(0,C.useState)(!1),R=(0,_.Z)(E,2),G=R[0],U=R[1],A=(0,oe.DZ)({tempPrice:Z,priceRange:c,priceStep:d,currency:u});F=i;var H=t?0:300;(0,C.useEffect)((function(){var e=[];n.filterLabels&&n.filterLabels.length>0&&n.filterLabels.forEach((function(t){var i=a.find((function(e){var i,n;return Array.isArray(t.code)?t.code.length>0&&(null===e||void 0===e||null===(i=e.codeList)||void 0===i?void 0:i.includes(t.code[0])):null===e||void 0===e||null===(n=e.codeList)||void 0===n?void 0:n.includes(t.code)}));i?e.push((0,r.Z)({type:i.type},t)):w&&"StoreService_PickupOnDoor"===t.code&&e.push(t)})),setTimeout((function(){j(e)}),H)}),[n.filterLabels,a,j,H,w]),(0,C.useEffect)((function(){setTimeout((function(){P(n.priceFilter&&n.priceFilter.length>0?n.priceFilter[0]:{min:0,max:0})}),H)}),[n.priceFilter,H]);var B=(0,C.useCallback)((function(){m(""),v({visible:!1})}),[m,v]),q=(0,C.useCallback)((function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=En(T),a=null;return"add"===t?(n?(a=o.find((function(e){return e.code&&e.code.indexOf(Vn.Price)>-1&&e.code.indexOf("-")>-1})),(0,s.pull)(o,a)):(a=o.find((function(t){return t&&(t.code===e.code||t.name===e.groupName)})),(0,s.pull)(o,a)),r&&(a=o.find((function(t){return t.groupCode===e.groupCode})),(0,s.pull)(o,a)),o.push({code:n&&e.itemCode?e.itemCode:e.code,name:e.name,groupCode:e.groupCode,type:i})):(a=n?o.find((function(t){return t&&(t.code===e.itemCode||t.name===e.name)})):o.find((function(t){return t&&(t.code===e.code||t.name===e.groupName)})),(0,s.pull)(o,a)),o}),[T]),W=(0,C.useCallback)((function(){var e=A.startPrice,t=A.endPrice,i=A.startPriceStr,n=A.endPriceStr,r=A.formatCurrency,s=A.minRange,o=A.maxRange,a=A.maxRangeStr,c=(0,oe.Q_)({startPrice:e,endPrice:t,startPriceStr:i,endPriceStr:n,maxRange:o,maxRangeStr:a,currency:r}),l=e===s&&t===o?"delete":"add",u={name:c.replace(/CNY /g,"\uffe5").replace(/ /g,""),itemCode:"Price_".concat(c)},d=q(u,l,Pn.Filters,!0);return d}),[A,q]),z=(0,C.useCallback)((function(e,t){var i=On(n.sortFilter,e,t);return i}),[n,f]),Y=(0,C.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=t||T,o=i;N||(!Z||0===Z.min&&0===Z.max||(s=W()),o=On(n.sortFilter,s,Z),z(s,Z)),h((0,r.Z)((0,r.Z)({},o),{},{activeGroupId:x,isFilter:!0})),N&&!e||B()}),[T,Z,n,x,z,h,B,W,N]),J=(0,oe.Nr)(Y,600,[Y]),Q=(0,C.useCallback)((function(e,t,i,n,s,o){var a=Z;o&&(a=(0,r.Z)((0,r.Z)({},Z),{},{min:o.start||0,max:o.end||0}),P(a));var c=q(e,t,i,n,s);j(c);var l=z(c,a);N&&J(!1,c,l)}),[q,z,Z,J,N]),X=(0,C.useCallback)((function(){var e=T;!Z||0===Z.min&&0===Z.max||(e=W());var t=e.filter((function(e){return(l!==Pn.Filter||e.type!==Pn.Filters)&&e.type!==l})),i=F.map((function(e){var t=e;return t.isSelected=!1,t.filterGroups&&t.filterGroups.length>0&&t.filterGroups.forEach((function(e){var t=e;t.isSelected=!1,t.code===Vn.Price&&(t.minPrice=t.minRange,t.maxPrice=t.maxRange),t&&t.filterItems.length>0&&t.filterItems.forEach((function(e){var t=e;t.isSelected=!1})),t.toggleClearFilter=!G,U(!G)})),t})),s=l===Pn.Filter?{min:0,max:0}:Z;P(s),O(i),j(t),z(t,s);var o=On(n.sortFilter,t,s);h((0,r.Z)((0,r.Z)({},o),{},{activeGroupId:x})),B()}),[x,B,W,Z,h,n,F,z,T,G,l]),K=(0,C.useCallback)((function(){N?B():Y()}),[N,Y,B]);if(t&&F&&0===F.length)return null;var $=function(){B()};return(0,M.jsx)(S.Z,{visible:t,isAnimatingIn:!0,onModalClose:$,animateType:"down",className:"filterModal",renderContent:(0,M.jsx)(Mn,{type:l,filterData:F,activeGroupId:x,onDetermine:K,filterNoResult:w,onClear:X,currency:u,priceStep:d,listThreshold:g,updateSelectedFilter:h,updateTempFilter:Q,onHide:B,updateEachSelect:N,updatePickupDoor:I})})},Gn=Rn,Un=function(e){return(0,r.Z)((0,r.Z)({},(0,a.mB)(e)),{},{visible:(0,a.vJ)(e),activeGroupId:(0,a.gp)(e),filterNoResult:(0,a.Jk)(e),priceStep:50,currency:"CNY",updateEachSelect:!0})},An=function(e){return{updateSelectedFilter:function(t){return e((0,qe.Jh)(t))},setActiveFilterBarCode:function(t){return e((0,qe.BL)(t))},setFilterModalIsShow:function(t){return e((0,qe.Ni)(t))},getFilterCalculate:function(){return!1},updatePickupDoor:function(t){return e((0,u.so)(t))}}},Hn=(0,s.connect)(Un,An)(Gn),Bn=i(89205);function qn(e){var t=e.setDatePickerIsShow,i=e.setTimeOutPopData,n=e.data,r=n.visible,s=n.title,o=n.content,a=n.rightText,c=(0,C.useCallback)((function(){i({visible:!1}),t()}),[i,t]);return(0,M.jsx)(pt.Z,{visible:r,renderContent:(0,M.jsxs)(N.View,{className:"alert-wrap",children:[(0,M.jsx)(N.Image,{className:"alert-image",src:"https://dimg04.c-ctrip.com/images/0AS3x120008nkcuwr074D.png"}),(0,M.jsx)(N.View,{className:"alert-title",children:s}),(0,M.jsx)(N.View,{className:"alert-desc",children:o}),(0,M.jsx)(ht.Z,{className:"pop-modal-button",debounce:!0,onClick:c,children:a})]})})}var Wn,zn=(0,C.memo)(qn),Yn=function(e){return{data:(0,a.Q2)(e)}},Jn=function(e){return{setTimeOutPopData:function(t){e((0,qe.NG)(t))}}},Qn=(0,s.connect)(Yn,Jn)(zn),Xn=i(50927),Kn=i(24375),$n=i(6806),er=function(){function e(){(0,d.Z)(this,e)}return(0,p.Z)(e,null,[{key:"clearAll",value:function(){e.packageTimeData={},e.logData={}}}]),e}();Wn=er,(0,x.Z)(er,"packageTimeData",{}),(0,x.Z)(er,"logData",{}),(0,x.Z)(er,"keyList",{packageFilterBar:"packageFilterBar",packageQuickFilter:"packageQuickFilter",packageTipList:"packageTipList",packageVehGroup:"packageVehGroup",packageVehList:"packageVehList"}),(0,x.Z)(er,"start",(function(e){Wn.logData[e]=+new Date})),(0,x.Z)(er,"end",(function(e){if(Wn.logData[e]){var t=+new Date-Wn.logData[e];Wn.setData(e,t)}})),(0,x.Z)(er,"getData",(function(e){return Wn.packageTimeData[e]})),(0,x.Z)(er,"setData",(function(e,t){Wn.getData(e)||(Wn.packageTimeData[e]=t)})),(0,x.Z)(er,"getAllPackageTime",(function(){var e=0,t=Object.keys(Wn.keyList);return t.length>0&&t.forEach((function(t){var i=Wn.getData(t);i&&(e+=i)})),e}));var tr=B.Utils.getSharkValue,ir={vehicleCounts:function(e){return tr("listCombine_fetchResult",e)},priceCounts:function(e){return tr("listCombine_fetchResult2",e)}},nr=(0,C.memo)((function(e){var t=(0,C.useState)(!1),i=(0,_.Z)(t,2),n=i[0],r=i[1],s=(0,C.useState)(0),o=(0,_.Z)(s,2),a=o[0],c=o[1],l=(0,C.useState)(30),u=(0,_.Z)(l,2),d=u[0],p=u[1],h=e.progress,m=e.vehCount,f=e.priceCount,v=e.setProgressIsFinish;(0,C.useEffect)((function(){if(h<1&&a>0)c(.01),setTimeout((function(){return c(100*h)}),100);else{var e=h>=1?100:100*h;if(a>0){var t=Math.max(500,30*(e-a))/(e-a);t!==d&&p(t)}c(h>=1?100:100*h)}r(!1)}),[h]);var g=function(){a>=100&&(c(0),r(!0),v&&v(!0))};if(0===h)return null;if(n)return null;var x="".concat(ir.vehicleCounts(m)).concat(ir.priceCounts(f));return(0,M.jsxs)(N.View,{className:"list-progress",children:[(0,M.jsx)(N.View,{className:"list-progress-content",children:x}),(0,M.jsx)(N.Progress,{percent:a,borderRadius:2,strokeWidth:2,duration:d,activeMode:"forwards",active:!0,activeColor:"#00b87a",backgroundColor:"white",onActiveEnd:g})]})})),rr=nr,sr=function(e){return{progress:(0,a.xC)(e),vehCount:(0,c.getAllVehicleCount)(),priceCount:(0,c.getAllVendorPriceCount)()}},or=function(e){return{setActiveFilterBarCode:function(t){e((0,qe.BL)(t))},setFilterModalIsShow:function(t){return e((0,qe.Ni)(t))},setFilterBarIsShow:function(e){(0,W.Aj)(W.Qu.filterBarIsShow,e)},setProgressIsFinish:function(t){return e((0,qe.dM)(t))}}},ar=(0,s.connect)(sr,or)(rr),cr=i(27913),lr=(0,C.memo)((function(e){var t=e.licenseInfo,i=(0,C.useState)(!1),n=(0,_.Z)(i,2),r=n[0],s=n[1],o=(0,C.useCallback)((function(){s(!r)}),[s,r]);return null!==t&&void 0!==t&&t.pickupLicenseDesc?r?null:(0,M.jsxs)(N.View,{className:"license-tip",children:[(0,M.jsxs)(N.View,{className:"license-tip-wrap",children:[(0,M.jsx)($.Z,{type:"icon",className:"license-tip-icon",children:Xt.q.VlW}),(0,M.jsx)(N.View,{className:"license-tip-text",children:null===t||void 0===t?void 0:t.pickupLicenseDesc})]}),(0,M.jsx)(N.View,{onClick:o,className:"license-tip-flex",children:(0,M.jsx)($.Z,{type:"icon",className:"license-tip-close",children:Xt.q.kCc})})]}):null})),ur=lr,dr=function(e){return e[e["Vehicle"]=2]="Vehicle",e[e["Service"]=3]="Service",e[e["Market"]=1]="Market",e}(dr||{}),pr=function(e){var t=e.tags,i=e.customClass,n=function(e){var t;switch(e.groupId){case dr.Market:t=(0,M.jsxs)(N.View,{className:(0,s.classnames)("market-tag","colorTag".concat(e.colorCode),"border-color".concat(e.colorCode),"coupon-tag"),children:[(0,M.jsx)(N.View,{className:(0,s.classnames)("prefix","".concat(e.amountTitle?"":"prefix-left")),"data-testid":te.UITestID.car_testid_page_list_coupon_tip_title,children:e.title}),e.amountTitle&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(N.Image,{className:"dashed",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/dashed.png"}),(0,M.jsx)(N.View,{className:"postfix",children:e.amountTitle})]}),(0,M.jsx)(N.Image,{className:(0,s.classnames)("tag-left-coupon","tag-half-circle"),src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_left_half_circle.png"}),(0,M.jsx)(N.Image,{className:"tag-right-half-circle tag-half-circle tag-right-coupon",src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/coupon_right_half_circle.png"})]});break;default:break}return t},r=(0,C.useCallback)((function(e){return null===e||void 0===e?void 0:e.map((function(e){return n(e)}))}),[]),o=r(t);return null!==o&&void 0!==o&&o.length?(0,M.jsx)(N.View,{className:(0,s.classnames)("tags-wrap",i),children:o}):null},hr=(0,C.memo)(pr),mr="https://pages.c-ctrip.com/cars/components-image/ctrip-app/CouponEntry/",fr=(0,C.memo)((function(e){var t=e.couponEntryData,i=void 0===t?[]:t,n=e.isReceiveAble,r=e.onPress,s=(0,C.useCallback)((function(){r(),q.mq.LogCode({key:q.Qx.TRACE_CLICK_KEY,enName:n?q.XG.C_LIST_COUPON_BANNER_RECEIVE.KEY:q.XG.C_LIST_COUPON_BANNER_SEE.KEY,name:n?q.XG.C_LIST_COUPON_BANNER_RECEIVE.NAME:q.XG.C_LIST_COUPON_BANNER_SEE.NAME,pageId:B.Channel.getPageId().LIST.ID})}),[r]);return i.length?(0,M.jsx)(N.View,{className:"coupon-tip",children:(0,M.jsxs)(N.View,{className:"coupon-tip-wrap",onClick:s,"data-testid":te.UITestID.car_testid_page_list_coupon_tip,children:[(0,M.jsxs)(N.View,{className:"coupon-tip-left",children:[(0,M.jsx)(N.Image,{className:"coupon-tip-img",src:"".concat(mr,"coupon_chaozhiyouhui.png")}),i.map((function(e){return(0,M.jsx)(hr,{tags:[{groupId:1,colorCode:"3",title:e}],customClass:"coupon-tip-tag"})}))]}),(0,M.jsx)(N.View,{className:"coupon-tip-right",children:(0,M.jsx)(N.View,{className:"coupon-tip-button",children:(0,M.jsx)(N.View,{className:"coupon-tip-text","data-testid":te.UITestID.car_testid_page_list_coupon_view,children:K.view})})})]})}):null})),vr=fr,gr=i(49314),xr=function(e){return{couponEntryIsShow:(0,gr.AE)(e),couponEntryData:(0,gr.x7)(e),isReceiveAble:(0,gr.QI)(e)}},Cr=(0,s.connect)(xr)(vr),Nr=i(17063),wr=null,Ir=0,Lr=function(e){return e[e["Loop"]=0]="Loop",e[e["ExceedMaxCount"]=1]="ExceedMaxCount",e}(Lr||{}),Sr=3e5,br=4,Tr=function(){wr&&clearTimeout(wr),wr=null,Ir=0},jr=function e(t){if(Ir>=br)return t(Lr.ExceedMaxCount),void q.ZP.LogTraceDev({key:q.Wz.c_car_dev_list_expired,info:{expCode:te.ApiResCode.TraceCode.E1007,eventResult:!1}});0!==Ir&&t(Lr.Loop),Ir+=1,wr&&clearTimeout(wr),wr=setTimeout((function(){return e(t)}),Sr)},_r=function(e){Tr(),jr(e)},yr=i(63118),kr=function(e){return e["INIT"]="INIT",e["SHOW"]="SHOW",e["FAIL"]="FAIL",e}(kr||{}),Zr=function(e){return e[e["timeP"]=1]="timeP",e[e["timeR"]=2]="timeR",e[e["edit"]=3]="edit",e[e["reload"]=4]="reload",e}(Zr||{}),Pr=te.WarningInfo.PageIndexId,Vr=function(e){(0,v.Z)(i,e);var t=(0,g.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this,e),(0,x.Z)((0,h.Z)(n),"options",void 0),(0,x.Z)((0,h.Z)(n),"isLoginPending",!1),(0,x.Z)((0,h.Z)(n),"hasBackUp",!1),(0,x.Z)((0,h.Z)(n),"backPTime",""),(0,x.Z)((0,h.Z)(n),"backRTime",""),(0,x.Z)((0,h.Z)(n),"backUpRentalLocation",void 0),(0,x.Z)((0,h.Z)(n),"isHitCache",void 0),(0,x.Z)((0,h.Z)(n),"isHitLimitCache",void 0),(0,x.Z)((0,h.Z)(n),"hasUpdateResStatus",void 0),(0,x.Z)((0,h.Z)(n),"startTime",void 0),(0,x.Z)((0,h.Z)(n),"delayTime",void 0),(0,x.Z)((0,h.Z)(n),"setUpdateTime",void 0),(0,x.Z)((0,h.Z)(n),"isSubmitFirstLog",void 0),(0,x.Z)((0,h.Z)(n),"autoExpose",void 0),(0,x.Z)((0,h.Z)(n),"handleUpdateStatus",(function(){n.isHitCache&&(n.props.updateFetchCacheStatus({isLoading:!1,isFail:!1,progress:1,progressIsFinish:!0}),n.props.fetchLimitContent(!0))})),(0,x.Z)((0,h.Z)(n),"resetHitCacheStatus",(function(){n.isHitCache=!1,n.isHitLimitCache=!1,n.props.getListWarningInfo({pageIndexId:Pr.List}),B.Utils.isCtripOsd()&&(n.props.cleanOsdCache(),n.setState({searchPanelModalVisible:!1,couponModalVisible:!1}),pe())})),(0,x.Z)((0,h.Z)(n),"handleLimitCacheData",(function(){var e="13617/translimit",t=(0,Xn.yL)({url:e,uid:xe["default"].UserInfo.UserID,param:n.props.limitReqParam}),i=Kn.Z.getCacheWithResponseMap({key:t,groupId:e});i&&(n.isHitLimitCache=!0,W.ZP.setData(W.ZP.keyList.listLimitRuleRes,i))})),(0,x.Z)((0,h.Z)(n),"validateHasPageCache",(function(){var e=(0,l.AM)(),t=e.pageCacheKey,i=e.pageParamStr;if(B.Utils.isCtripIsd()){console.log("\u6d4b\u8bd5 ListPagingAgent",B.ListPagingAgent);var r=B.ListPagingAgent.loadSnapshot(t);r&&i&&(n.isHitCache=!0,W.ZP.setData(W.ZP.keyList.listProductReq,JSON.parse(i)),W.ZP.setData(W.ZP.keyList.listProductRes,r),xe["default"].setRouterListLoaderDispatch(!0),n.handleLimitCacheData(),n.props.setIsShowToast(!0))}else;})),(0,x.Z)((0,h.Z)(n),"handleBackUpData",(function(){var e=n.props,t=e.ptime,i=e.rtime,r=e.rentalLocation;n.hasBackUp||(n.hasBackUp=!0,n.backPTime=t,n.backRTime=i,n.backUpRentalLocation=r)})),(0,x.Z)((0,h.Z)(n),"onHeaderPress",(function(){(n.isHitCache||1===n.props.progress)&&(n.setState({searchPanelModalVisible:!0}),q.mq.LogCode({enName:q.XG.C_LIST_HEADER_CHANGEINFO.KEY}))})),(0,x.Z)((0,h.Z)(n),"onPressSearch",(function(){var e=n.props,t=e.ptime,i=e.rtime;(0,Ve.rp)(t)?n.handleTimepassed(t,i):(n.resetHitCacheStatus(),n.props.fetchList(),n.setState({searchPanelModalVisible:!1}),n.hasBackUp=!1)})),(0,x.Z)((0,h.Z)(n),"onBackUp",(function(){var e={pickup:n.backPTime,dropoff:n.backRTime};n.backUpRentalLocation&&(n.props.setLocationInfo((0,s.produce)(n.backUpRentalLocation,(function(e){e.notDisPatchPreFetch=!0}))),n.props.setDateInfo((0,s.produce)(e,(function(e){e.notDisPatchPreFetch=!0})))),n.hasBackUp=!1})),(0,x.Z)((0,h.Z)(n),"onSearchModalClose",(function(){n.setState({searchPanelModalVisible:!1}),n.onBackUp()})),(0,x.Z)((0,h.Z)(n),"timerOsdCheckHealthCallback",(function(e){var t;switch(e){case Lr.ExceedMaxCount:null===(t=n.props)||void 0===t||t.setCacheExpireModalIsShow(!0);break;case Lr.Loop:n.props.fetchList({type:te.ListEnum.FetchListPageType.Cache_Loop});break}})),(0,x.Z)((0,h.Z)(n),"timerOsdCheckHealth",(function(e){var t;B.Utils.isCtripIsd()||(null===e||void 0===e?void 0:e.uniqSign)!==(null===(t=n.props)||void 0===t?void 0:t.uniqSign)&&_r(n.timerOsdCheckHealthCallback)})),(0,x.Z)((0,h.Z)(n),"onPageReady",(function(){try{if(n.performanceMonitor.responseMap=bt.ListResSelectors.getBaseResponseMap(),n.isHitCache&&n.performanceMonitor.responseMap&&(n.performanceMonitor.responseMap.hasRetry=!1,n.performanceMonitor.responseMap.isSuccess=!0,n.performanceMonitor.responseMap.hasResult=!0,n.performanceMonitor.delayTime=n.delayTime),n.performanceMonitor.contentShowStart=new Date,n.performanceMonitor.interactiveStart=new Date,n.performanceMonitor.fromurl=n.props.fromurl,n.performanceMonitor.packageDataTime=er.getAllPackageTime(),n.performanceMonitor.isHitCache=n.isHitCache,n.isHitCache&&n.performanceMonitor.receiveResStart){var e=+n.performanceMonitor.receiveResStart-+n.setUpdateTime;n.performanceMonitor.delayReady=e,n.performanceMonitor.beforeFetchReady=0,n.performanceMonitor.afterFetchReady=0}n.performanceMonitor.submit&&n.performanceMonitor.submitTTI&&(n.performanceMonitor.submit(),n.performanceMonitor.submitTTI())}catch(e){}})),(0,x.Z)((0,h.Z)(n),"getSkeletonType",(function(){var e=n.props,t=e.isFilterLoading,i=e.isGroupLoading;return t?dt.Z.SkeletonType.listMost:i?dt.Z.SkeletonType.listHalf:dt.Z.SkeletonType.listFull})),(0,x.Z)((0,h.Z)(n),"isShowLoadingModule",(function(e){var t=n.props.isFilterLoading,i=e===kr.INIT;return i||t})),(0,x.Z)((0,h.Z)(n),"isShowPriceModule",(function(e){var t=n.props,i=t.isFilterLoading,r=t.isFilterFail;return e===kr.SHOW&&!i&&!r})),(0,x.Z)((0,h.Z)(n),"isShowFailModule",(function(e){var t=n.props.isFilterFail,i=e===kr.FAIL;return i||t})),(0,x.Z)((0,h.Z)(n),"isShowVehilceListModule",(function(e){var t=n.props,i=t.isFilterLoading,r=t.isFilterFail,s=t.isGroupLoading,o=t.isGroupFail,a=e===kr.SHOW&&!i&&!r&&!s&&!o;return a&&n.__page&&n.__page.getDOMProps&&"undefined"!==typeof n.__page.exposeObserver&&I().sendUbtExpose.refreshObserve((0,h.Z)(n)),a})),(0,x.Z)((0,h.Z)(n),"isShowCouponEntry",(function(e){if(B.Utils.isCtripIsd())return!1;var t=n.props,i=t.promotionData,r=t.progressIsFinish;return r&&(null===i||void 0===i?void 0:i.length)>0})),(0,x.Z)((0,h.Z)(n),"handleTimepassed",(function(e,t){var i=(0,Ve.K$)(e,t);n.props.setDateInfo(i),B.ToastLoading.showToast({title:B.Utils.getSharkValue("timePassedWarning")})})),(0,x.Z)((0,h.Z)(n),"onTimeOutDateClick",(function(){n.setState({isRetryFetchList:!0}),n.onDateClick()})),(0,x.Z)((0,h.Z)(n),"onDateClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te.PickType.PICKUP,t=e===te.PickType.PICKUP?te.PickType.PICKUP:te.PickType.DROPOFF;n.setState({datePickerVisible:!0,pickerRole:t})})),(0,x.Z)((0,h.Z)(n),"onDatePickerCancel",(function(){n.setState({datePickerVisible:!1})})),(0,x.Z)((0,h.Z)(n),"onDatePickerConfirm",(function(e){n.setState({datePickerVisible:!1});var t=e.pickUpDate,i=e.dropOffDate,r={pickup:t,dropoff:i};(0,Ve.rp)(t)?n.handleTimepassed(t,i):n.props.setDateInfo(r),n.state.isRetryFetchList&&(n.resetHitCacheStatus(),n.props.fetchList(),n.setState({isRetryFetchList:!1}))})),(0,x.Z)((0,h.Z)(n),"onNoMatchButtonPress",(function(){var e=n.props.recommendInfo.type,t=void 0===e?"":e;switch(t){case Zr.timeP:n.setState({datePickerVisible:!0,pickerRole:te.PickType.PICKUP,isRetryFetchList:!0});break;case Zr.timeR:n.setState({datePickerVisible:!0,pickerRole:te.PickType.DROPOFF,isRetryFetchList:!0});break;case Zr.edit:n.setState({searchPanelModalVisible:!0});break;default:n.props.fetchList({type:n.props.fetchType})}q.mq.LogCode({enName:q.XG.C_LIST_RECOMMEND_BUTTON.KEY,type:t})})),(0,x.Z)((0,h.Z)(n),"onNoMatchButtonPressOSD",(function(){n.setState({searchPanelModalVisible:!0}),q.mq.LogCode({enName:q.XG.C_LIST_RECOMMEND_BUTTON.KEY,type:Zr.edit})})),(0,x.Z)((0,h.Z)(n),"refreshObservePage",(function(){n.__page&&n.__page.getDOMProps&&"undefined"!==typeof n.__page.exposeObserver&&I().sendUbtExpose.refreshObserve((0,h.Z)(n))})),(0,x.Z)((0,h.Z)(n),"renderListHeader",(function(e){var t=e.curStage,i=n.props,r=i.isDifferentLocation,s=i.headerData,o=i.progressIsFinish,a=i.isFail,c=B.Utils.isCtripOsd()&&!n.isHitCache&&!o&&!a,l=!c&&(n.isHitCache||t===kr.SHOW);return(0,M.jsxs)(N.View,{className:"list-bar-shadow","data-testid":te.UITestID.car_testid_page_list_filter_bar_shadow,children:[(0,M.jsx)(nt,{onHeaderPress:n.onHeaderPress,isDifferentLocation:r,headerData:s}),l&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ki,{isHitCache:n.isHitCache}),(0,M.jsx)(ln,{isHitCache:n.isHitCache}),(0,M.jsx)(Bn.Z,{}),(0,M.jsx)(N.View,{children:(0,M.jsx)(Hn,{})}),(0,M.jsx)(ur,{licenseInfo:n.props.licenseInfo})]}),c&&(0,M.jsx)(ar,{})]})})),(0,x.Z)((0,h.Z)(n),"openCouponModal",(function(){n.setState({couponModalVisible:!0})})),(0,x.Z)((0,h.Z)(n),"closeCouponModal",(function(){n.setState({couponModalVisible:!1});var e=n.props,t=e.isListReceiveSuccess,i=e.setIsListReceiveSuccess;t&&(n.props.fetchList(),n.props.couponReset(),t&&(k().showToast({title:K.listReceivePromotionToast,icon:"none"}),i(!1)))})),(0,x.Z)((0,h.Z)(n),"renderNoMatch",(function(e){var t=e.curStage;return n.isShowFailModule(t)?(0,M.jsx)(Ei,{onButtonPress:n.onNoMatchButtonPress}):null})),n.state={searchPanelModalVisible:!1,datePickerVisible:!1,pickerRole:te.PickType.PICKUP,isRetryFetchList:!1,couponModalVisible:!1},n.autoExpose=!0,n.hasUpdateResStatus=!1,n.isSubmitFirstLog=!1,W.ZP.removeData(),(0,W.Nx)(),er.clearAll(),n.validateHasPageCache(),n.checkPerformance=!0,n}return(0,p.Z)(i,[{key:"getPageId",value:function(){return this.pageId=B.Channel.getPageId().LIST.ID,this.pageId}},{key:"onLoad",value:function(e){(0,m.Z)((0,f.Z)(i.prototype),"onLoad",this).call(this,e),this.options=e}},{key:"onShareAppMessage",value:function(){var e,t=this.props,i=t.rentalLocation,n=t.rentalDate,r=B.Utils.isCtripIsd()?yr.Z.APP_TYPE.ISD:yr.Z.APP_TYPE.OSD,s={tab:r,date:n,location:i,landingto:"list",route:null===I()||void 0===I()||null===(e=I().getCurrentPage())||void 0===e?void 0:e.route,sharedList:!0},o=B.Utils.getShareUrl(s)||"pages/carNew/isd/subPages/list/index";return{title:K.shareTitle,path:o,imageUrl:""}}},{key:"onReady",value:function(){(0,m.Z)((0,f.Z)(i.prototype),"onReady",this).call(this),this.startTime=new Date;var e=B.Utils.isFromMarket(this.options,"list");e?(this.resetHitCacheStatus(),this.props.reset(),this.props.initLocationAndDateInfo(this.options),this.options.sharedList&&this.props.fetchQconfig()):this.isHitCache||this.props.fetchList({isHitCache:this.isHitCache,isHitLimitCache:this.isHitLimitCache})}},{key:"componentDidShow",value:function(){(0,m.Z)((0,f.Z)(i.prototype),"componentDidShow",this).call(this);var e=(0,W.DG)(W.Qu.loginFromProduct),t=(0,W.DG)(W.Qu.downGradeFromProduct);e&&(this.resetHitCacheStatus(),this.props.fetchList()),t&&!this.state.searchPanelModalVisible&&(this.setState({searchPanelModalVisible:!0}),(0,W.Aj)(W.Qu.downGradeFromProduct,null));var n=(0,W.DG)(W.Qu.loginFromListCouponModal);n&&(this.resetHitCacheStatus(),this.props.fetchList(),(0,W.Aj)(W.Qu.loginFromListCouponModal,!1),this.props.fetchReceivePromotion())}},{key:"lazyComponentDidMount",value:function(){if(this.delayTime=+new Date-+this.startTime,this.setUpdateTime=new Date,this.handleUpdateStatus(),this.lazyLoadAllTranslationKey(),this.isHitCache){var e,t=W.ZP.getData(W.ZP.keyList.listProductReq),i=W.ZP.getData(W.ZP.keyList.listProductRes),n=(null===i||void 0===i||null===(e=i.baseResponse)||void 0===e?void 0:e.requestId)||"",r=te.ListEnum.FetchListPageType.Search;(0,$n.Qe)({requestId:n},i,!0,!1,r),(0,$n.kG)(!1,t,i,null,r)}this.props.getListWarningInfo({pageIndexId:Pr.List})}},{key:"componentDidUpdate",value:function(e){var t=this,i=this.getCurStage();this.isSubmitFirstLog||i===kr.INIT||(this.isSubmitFirstLog=!0,this.onPageReady(),setTimeout((function(){t.lazyLoadOtherModules()}),0)),e.needUpdateList!==this.props.needUpdateList&&this.props.needUpdateList&&(this.resetHitCacheStatus(),this.props.fetchList(),this.props.setNeedUpdateList(!1)),this.isHitCache&&!this.hasUpdateResStatus&&(this.props.handleResGroupIdAndFilters(),this.hasUpdateResStatus=!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.isSubmitFirstLog||e.isLoading||(this.performanceMonitor.receiveResStart=new Date),this.timerOsdCheckHealth(e)}},{key:"componentWillUnmount",value:function(){(0,m.Z)((0,f.Z)(i.prototype),"componentWillUnmount",this).call(this),this.handleBackUpData(),this.onSearchModalClose(),this.props.reset(),W.ZP.removeData(),(0,W.Nx)(),Tr()}},{key:"componentDidHide",value:function(){(0,m.Z)((0,f.Z)(i.prototype),"componentDidHide",this).call(this)}},{key:"getCurStage",value:function(){var e,t=this.props,i=t.isFail,n=t.isLoading;return e=i?kr.FAIL:n?kr.INIT:kr.SHOW,e}},{key:"render",value:function(){var e=this,t=this.getCurStage(),i=this.props,n=i.ptime,r=i.rtime,s=i.isGroupLoading,o=i.isGroupFail,a=i.promotionData,c=i.availablePromotionData,l=i.receivePromotion,u=i.receiveAllPromotion,d=this.state,p=d.searchPanelModalVisible,h=d.datePickerVisible,m=d.pickerRole,f=(d.dynamicClassName,d.couponModalVisible);return p&&this.handleBackUpData(),(0,M.jsxs)(F.Z,{layout:!0,vertical:!0,className:"list-page",children:[this.renderListHeader({curStage:t}),this.isShowCouponEntry(t)&&(0,M.jsx)(Cr,{onPress:this.openCouponModal}),this.isShowLoadingModule(t)&&(0,M.jsx)(dt.Z,{type:this.getSkeletonType()}),this.renderNoMatch({curStage:t}),this.isShowPriceModule(t)&&(0,M.jsxs)(F.Z,{layout:!0,className:"list-vehicle-wrapper",children:[(0,M.jsx)(Vt,{}),this.isShowVehilceListModule(t)&&(0,M.jsx)(Vi,{}),s&&(0,M.jsx)(dt.Z,{type:this.getSkeletonType()}),o&&(0,M.jsx)(Ei,{isGroup:!0,onButtonPress:this.onNoMatchButtonPress})]}),(0,M.jsx)(N.View,{children:(0,M.jsx)(ut,{searchPanelModalVisible:p,onPressSearch:this.onPressSearch,onModalClose:this.onSearchModalClose,onDateClick:this.onDateClick})}),(0,M.jsx)(N.View,{children:h&&(0,M.jsx)($i.Z,{ptime:n,rtime:r,type:m,onConfirm:this.onDatePickerConfirm,onCancel:this.onDatePickerCancel})}),(0,M.jsx)(N.View,{children:(0,M.jsx)(tt,{refreshObservePage:this.refreshObservePage})}),(0,M.jsx)(N.View,{children:(0,M.jsx)(cr.Z,{refreshObservePage:this.refreshObservePage})}),(0,M.jsx)(N.View,{children:(0,M.jsx)(Nt,{pressCallback:this.resetHitCacheStatus,type:B.Utils.isCtripIsd()?"cacheExpirePop":"osdTimeOutPop"})}),(0,M.jsx)(N.View,{children:(0,M.jsx)(_t,{})}),(0,M.jsx)(N.View,{children:(0,M.jsx)(Qn,{setDatePickerIsShow:this.onTimeOutDateClick})}),(0,M.jsx)(Nr.Z,{visible:f,renderData:a,availableData:c,onCancel:this.closeCouponModal,onReceive:l,onReceiveAll:u,isList:!0}),(0,M.jsx)(N.View,{className:"view-check",onAnimationEnd:function(){return e.viewReadyHandle&&e.viewReadyHandle()}}),(0,M.jsx)("perinfo-protect-float",{forceExitMiniapp:"{{true}}"})]})}}]),i}(L.Z),Dr=Vr,Fr=i(55382),Mr=i(6017),Or=i(25755),Er=i(94187),Rr=function(e){return{isDifferentLocation:(0,o.Xu)(e),headerData:(0,o.Tv)(e),rentalLocation:(0,o.gk)(e),ptime:(0,o.o4)(e),rtime:(0,o.kd)(e),rentalDate:(0,o.IQ)(e),recommendInfo:(0,c.getRecommendInfo)(),fetchType:(0,l.wr)(e),isLoading:(0,a.Vc)(e),isFail:(0,a.JU)(e),isFilterLoading:(0,a.r5)(e),isGroupLoading:(0,a.Cy)(e),isFilterFail:(0,a.TX)(e),isGroupFail:(0,a.Ny)(e),progress:(0,a.xC)(e),limitReqParam:(0,l.vq)(e),needUpdateList:(0,a.Jy)(e),progressIsFinish:(0,a.eT)(e),licenseInfo:(0,c.getLicenseInfo)(),uniqSign:(0,a.B2)(e),promotionData:(0,gr.YI)(e),availablePromotionData:(0,gr.iL)(e),isListReceiveSuccess:(0,gr.n2)(e)}},Gr=function(e){return{setLocationInfo:function(t){return e((0,u.yi)(t))},setDateInfo:function(t){return e((0,u.A2)(t))},fetchList:function(t){return e((0,qe.Y8)(t))},fetchLimitContent:function(t){return e((0,qe.kl)(t))},getListWarningInfo:function(t){e((0,Fr.F1)(t))},reset:function(){return e((0,qe.mc)())},handleResGroupIdAndFilters:function(){return e((0,qe.bo)())},setIsShowToast:function(t){return e((0,qe.Ot)(t))},updateFetchCacheStatus:function(t){return e((0,qe.hY)(t))},initLocationAndDateInfo:function(t){return e((0,u.tT)(t))},setNeedUpdateList:function(t){return e((0,qe.M4)(t))},setCacheExpireModalIsShow:function(t){return e((0,qe.Lv)(t))},receivePromotion:function(t){return e((0,Or.jP)(t))},receiveAllPromotion:function(t){return e((0,Or.hW)(t))},setIsListReceiveSuccess:function(t){return e((0,Or.YQ)(t))},couponReset:function(){return e((0,Or.Gz)())},cleanOsdCache:function(){Er.Z.clearRequest()},fetchReceivePromotion:function(){return e((0,Or.To)())},fetchQconfig:function(){return e((0,Fr.ON)())}}},Ur=(0,s.connect)(Rr,Gr)(Dr),Ar=(0,Mr.Z)(Ur),Hr=function(e){return(0,M.jsx)(Ar,(0,r.Z)({},e))},Br=Hr,qr={navigationBarTitleText:"\u9009\u62e9\u4ea7\u54c1",navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff",enableShareAppMessage:!0,usingComponents:{"perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};Br.enableShareAppMessage=!0;Page((0,n.createPageConfig)(Br,"pages/carNew/isd/subPages/list/index",{root:{cn:[]}},qr||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[7606,2107,1216,8592],(function(){return t(76147)}));e.O()}]);
//# sourceMappingURL=index.js.map