"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6023],{37672:function(e,s,t){var c=t(32180),r=t(298),l=t(19153),a=t(34719),n=t(6017),o=t(22276),i=t(57042),d=t(24460),u=t(81876),p=t(21867),m=t(86066),C=t(45023),x=t(90201),h=t(71515),g=t(33675),f=t(64341),P=t(55060),b=t(7324),j=P.Utils.getSharkValue,v={get selectCountry(){return j("selectCountry")},get crossCountryTip(){return j("crossCountryTip")},get selectProvince(){return j("selectProvince")},get crossProvinceTip(){return j("crossProvinceTip")},get selectIsland(){return j("selectIsland")},get crossIslandTip(){return j("crossIslandTip")},get selected(){return j("selected")},get determine(){return j("okBtn")},get deleted(){return j("deleted")},selectedCrossPlace:function(e){return j("selectedCrossPlace",e)}},w=(0,C.Z)((0,C.Z)((0,C.Z)({},b.tl.CrossIsland,v.selectIsland),b.tl.CrossProvince,v.selectProvince),b.tl.CrossCountry,v.selectCountry),Z=(0,C.Z)((0,C.Z)((0,C.Z)({},b.tl.CrossIsland,v.crossIslandTip),b.tl.CrossProvince,v.crossProvinceTip),b.tl.CrossCountry,v.crossCountryTip),N=t(86504),S=t(2269),T=function(e){var s=e.name,t=void 0===s?"":s,c=e.code,r=e.disabledText,a=e.isSelected,n=e.isDisabled,o=e.onPress,i=t.length>6,d=(0,x.useCallback)((function(){if(!n){var e={name:t,code:c,isSelected:a,isDisabled:n,disabledText:r};o(e)}}),[t,c,a]);return(0,S.jsxs)(h.View,{className:(0,l.classnames)("cross-place-item",a&&"selected-cross-place-item",n&&"disabled-cross-place-item"),onClick:d,children:[(0,S.jsx)(h.Text,{className:(0,l.classnames)(i&&"small-text"),children:t}),!!n&&!!r&&(0,S.jsx)(h.Text,{className:"cross-place-item-disabled-text",children:r}),a&&(0,S.jsx)(h.Image,{src:"https://pic.c-ctrip.com/car/osd/mobile/bbk/resource/filterSelect.png",className:"right-top-hook-img"})]})},k=function(e){var s=e.groupName,t=e.groupData,c=e.changeTempFilterData;return(0,S.jsxs)(h.View,{className:"group-wrap",children:[(0,S.jsx)(h.Text,{className:"group-name-text",children:s}),(0,S.jsx)(h.View,{className:"group-grid",children:t.map((function(e){var s=e.name,t=e.code,r=e.disabledText,l=e.isSelected,a=e.isDisabled;return(0,S.jsx)(T,{name:s,code:t,disabledText:r,isSelected:l,isDisabled:a,onPress:a?null:c})}))})]})},V=function(e){var s=e.listData,t=e.changeTempFilterData;return(0,S.jsx)(h.ScrollView,{children:Object.keys(s).map((function(e){return(0,S.jsx)(k,{groupName:e,groupData:s[e],changeTempFilterData:t})}))})},D=(0,x.memo)(V),I=t(28617),y=t(22548),M=t(81194),q=t(35418),B=function(e){var s=e.item,t=e.clearFilter,c=(0,x.useCallback)((function(){t(s)}),[s]);return(0,S.jsxs)(h.View,{className:"selected-item-label",onClick:c,children:[(0,S.jsx)(h.Text,{className:"selected-item-label-text",children:s.name}),(0,S.jsx)(M.Z,{className:"selected-item-label-icon",type:"icon",children:q.q.kCc})]})},F=function(e){var s=e.visible,t=e.selectedCrossPlace,c=e.clearCertainPlace,r=e.onCloseSelectedModal,l=e.onDetermine,a=e.onClear,n=(0,x.useMemo)((function(){return(0,S.jsx)(h.View,{className:"price-detail-modal-header",children:(0,S.jsx)(h.Text,{children:v.selected})})}),[]);return(0,S.jsx)(I.Z,{hasContent:!0,visible:s,onModalClose:r,renderHeader:n,renderContent:(0,S.jsxs)(h.View,{className:"bg-white",children:[(0,S.jsx)(h.View,{className:"selected-modal-content-wrap",children:t.map((function(e){return(0,S.jsx)(B,{item:e,clearFilter:c},e.code)}))}),(0,S.jsxs)(h.View,{className:"selected-modal-bottom-wrap",children:[(0,S.jsx)(y.Z,{className:"selected-modal-delete-btn",onClick:a,children:v.deleted}),(0,S.jsx)(y.Z,{className:"selected-modal-determine-btn",onClick:l,children:v.determine})]})]})})},G=(0,x.memo)(F),O=(0,x.memo)((function(e){var s=e.selectedCrossPlace,t=e.onDetermine,c=e.onClear,r=e.tips,a=e.onPressSelected,n=!(null!==s&&void 0!==s&&s.length);return(0,S.jsxs)(h.View,{className:"cross-place-footer-wrap",children:[n?(0,S.jsx)(h.Text,{className:"cross-place-footer-tips",children:r}):(0,S.jsxs)(h.View,{className:"cross-place-left-wrap",children:[(0,S.jsxs)(h.View,{className:"cross-place-selected-wrap",onClick:a,children:[(0,S.jsxs)(h.View,{className:"cross-place-selected-select",children:[(0,S.jsx)(M.Z,{textClassName:"cross-place-selected-count",text:v.selectedCrossPlace(s.length)}),(0,S.jsx)(M.Z,{type:"icon",className:"cross-place-selected-icon",children:q.q.DIG})]}),(0,S.jsx)(h.Text,{className:"cross-place-selected-places",children:s.map((function(e){return e.name})).join(", ")})]}),(0,S.jsx)(y.Z,{className:"cross-place-delete-btn",onClick:c,children:v.deleted})]}),(0,S.jsx)(y.Z,{className:(0,l.classnames)("cross-place-footer-determine-btn"),onClick:t,children:v.determine})]})})),z=(0,x.memo)(O),A=function(e){(0,p.Z)(t,e);var s=(0,m.Z)(t);function t(e){var c;return(0,i.Z)(this,t),c=s.call(this,e),(0,C.Z)((0,u.Z)(c),"onCloseCorssPlace",(function(){var e=c.props.crossPlaces;c.setState({tempCrossSpaces:e}),g.cwx.navigateBack()})),(0,C.Z)((0,u.Z)(c),"onCrossPlaceDetermine",(function(){var e=c.state.tempCrossSpaces,s=c.props.setCrossPlaces;s(e),c.onCloseCorssPlace()})),(0,C.Z)((0,u.Z)(c),"onCrossPlaceClear",(function(){c.setState({tempCrossSpaces:[]}),c.state.selectedCrossPlaceModalVisible&&c.onCloseSelectedModal()})),(0,C.Z)((0,u.Z)(c),"onCrossPlaceChange",(function(e){var s=c.state.tempCrossSpaces,t=(0,o.Z)(s),l=t.findIndex((function(s){return e.code===s.code}));l>-1?t.splice(l,1):t.push((0,r.Z)((0,r.Z)({},e),{},{isSelected:!e.isSelected}));var a=t.filter((function(e){return e.isSelected})).sort((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.groupCode<s.groupCode?-1:e.groupCode>s.groupCode?1:0}));a.length||c.onCloseSelectedModal(),c.setState({tempCrossSpaces:a})})),(0,C.Z)((0,u.Z)(c),"onPressSelected",(function(){c.setState({selectedCrossPlaceModalVisible:!0})})),(0,C.Z)((0,u.Z)(c),"onCloseSelectedModal",(function(){c.setState({selectedCrossPlaceModalVisible:!1})})),c.checkPerformance=!0,c.state={tempCrossSpaces:e.crossPlaces,selectedCrossPlaceModalVisible:!1},c}return(0,d.Z)(t,[{key:"getPageId",value:function(){return P.Channel.getPageId().CROSSPLACE.ID}},{key:"render",value:function(){var e=this.props.curInsPackageId,s=this.state,t=s.tempCrossSpaces,c=s.selectedCrossPlaceModalVisible,r=(0,N.mb)(t,e),l=r.locationGroups,a=r.crossType,n=w[a],o=Z[a];return(0,S.jsxs)(h.View,{className:"bg-white",children:[(0,S.jsxs)(h.View,{className:"pb-170",children:[(0,S.jsxs)(h.View,{className:"cross-place-page-title-wrap",children:[(0,S.jsx)(h.Text,{className:"cross-place-page-title",children:n}),(0,S.jsx)(h.Text,{className:"cross-place-page-sub-title",children:o})]}),(0,S.jsx)(D,{listData:l,changeTempFilterData:this.onCrossPlaceChange})]}),(0,S.jsx)(G,{visible:c,selectedCrossPlace:t,clearCertainPlace:this.onCrossPlaceChange,onCloseSelectedModal:this.onCloseSelectedModal,onDetermine:this.onCrossPlaceDetermine,onClear:this.onCrossPlaceClear}),(0,S.jsx)(z,{onDetermine:this.onCrossPlaceDetermine,onClear:this.onCrossPlaceClear,tips:n,selectedCrossPlace:t,onPressSelected:this.onPressSelected})]})}}]),t}(f.Z),E=A,H=t(22189),L=function(e){return{crossPlaces:(0,a.V0)(e),curInsPackageId:(0,a.z9)(e)}},R=function(e){return{setCrossPlaces:function(s){return e((0,H.au)(s))}}},U=(0,l.connect)(L,R)(E),_=(0,n.Z)(U),J=function(e){return(0,S.jsx)(_,(0,r.Z)({},e))},K=J,Q={navigationBarTitleText:"",navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff"};Page((0,c.createPageConfig)(K,"pages/carNew/isd/subPages/crossPlace/index",{root:{cn:[]}},Q||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var s=function(s){return e(e.s=s)};e.O(0,[7606,2107,1216,8592],(function(){return s(37672)}));e.O()}]);
//# sourceMappingURL=index.js.map