"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[8080],{62400:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(19153),i=t(90201),o=t(71515),a=t(6732),s=t(74629),c=t(29316),l=t(2269),u=function(e){var n,t,u=e.insuranceData,d=e.packageInfos,m=(0,i.useCallback)((0,r.debounce)((function(e){(0,c.V4)("/pages/carNew/isd/subPages/oldInsuranceDetail/index?insuranceDetailIdx=".concat(e))}),300),[u]);return u&&null!==d&&void 0!==d&&d.length?(0,l.jsxs)(o.View,{className:"osdInsuranceBoxWrap",children:[(0,l.jsx)(o.Text,{className:"titleText",children:a.Z.insuranceProtectionNew}),(0,l.jsx)(o.Text,{className:"subTitleText",children:null===d||void 0===d||null===(n=d[0])||void 0===n?void 0:n.packageName}),null===u||void 0===u||null===(t=u.insuranceItems)||void 0===t?void 0:t.map((function(e,n){return(0,l.jsxs)(o.View,{className:"flex item cutLine-s",onClick:function(){m(n)},children:[(0,l.jsxs)(o.View,{className:"flex flex1 flex-row",children:[(0,l.jsx)(o.Image,{src:s.ImageUrl.insSupport,className:"insSupport"}),(0,l.jsxs)(o.View,{children:[(0,l.jsx)(o.Text,{className:"title",children:null===e||void 0===e?void 0:e.title}),(0,l.jsx)(o.Text,{className:"subTitle ml16"})]})]}),(0,l.jsx)(o.Text,{className:"icon-arrow-right"})]},null===e||void 0===e?void 0:e.title)}))]}):null},d=(0,i.memo)(u),m=t(90607),x=t(26338),f=function(e){var n;return{insuranceData:(0,m.gj)(e),packageInfos:null===(n=(0,m.mb)(e))||void 0===n?void 0:n.packageInfos}},h=function(e){return{setOrderModalsVisible:function(n){return e((0,x.iO)(n))}}},p=(0,r.connect)(f,h)(d)},37282:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(298),i=t(19153),o=t(90201),a=t(49795),s=t(2269),c=(0,o.memo)((function(e){var n=e.packageInfos,t=e.curInsuranceItems,r=e.setOrderModalsVisible,i=e.insuranceAndXProductDesc,c=(0,o.useCallback)((function(){r({newInsuranceDetailModal:{visible:!0,data:{packageInfos:n,curInsuranceItems:t}}})}),[n]);return n&&n.length?(0,s.jsx)(a.Z,{onPressDetail:c,packageInfos:n,insuranceAndXProductDesc:i}):null})),l=c,u=t(90607),d=t(26338),m=function(e){return(0,r.Z)({},(0,u.e1)(e))},x=function(e){return{setOrderModalsVisible:function(n){return e((0,d.iO)(n))}}},f=(0,i.connect)(m,x)(l)},13898:function(e,n,t){var r=t(32180),i=t(298),o=t(19153),a=t(57042),s=t(24460),c=t(81876),l=t(79038),u=t(59772),d=t(21867),m=t(86066),x=t(45023),f=t(90201),h=t(71515),p=t(64341),v=t(55060),N=t(6732),T=t(92954),g=t.n(T),I=t(33675),j=t.n(I),w=t(90129),b=t(9898),y=t(2269),Z=function(e){var n=e.orderBaseInfo,t=e.onTiming,r=e.onTimeOut,i=e.isLoading,o=e.continuePayTick,a=n||{},s=a.orderStatusDesc,c=a.orderTip,l=a.orderStatusCtrip,u=o||{},d=u.minute,m=u.second,x=u.visible,p=c||{},v=p.tipContentArray,T=p.urgentWarning,g=(0,f.useState)({remainPayTimeDesc:"",minute:0,second:0}),I=(0,w.Z)(g,2),j=I[0],Z=I[1],C=(0,f.useRef)(null),V=(0,f.useCallback)((function(e,n){return"".concat(N.Z.orderPayTitle," ").concat(e<10?"0".concat(e):e,":").concat(n<10?"0".concat(n):n)}),[]),O=(0,f.useCallback)((function(){Z({remainPayTimeDesc:V(d,m),minute:d,second:m}),S(d,m)}),[d,m]),S=(0,f.useCallback)((function(e,n){clearTimeout(C.current),C.current=setTimeout((function(){n-=1,n<0&&(n=59,e-=1,e<0&&(n=0,e=0)),t&&t(n+60*e),Z({remainPayTimeDesc:V(e,n),minute:e,second:n}),0===n&&0===e?(Z({remainPayTimeDesc:"",minute:0,second:0}),r&&r()):S(e,n)}),1e3)}),[j]);return(0,f.useEffect)((function(){return x&&O(),function(){C.current&&clearTimeout(C.current)}}),[n,x]),i?null:(0,y.jsxs)(h.View,{className:"orderStatus-wrap",children:[(0,y.jsxs)(h.View,{className:"orderStatus-blueBg",children:[(0,y.jsx)(h.Text,{className:"orderStatus-title",children:s}),l===b.h7.WAITING_PAY&&j.remainPayTimeDesc&&(0,y.jsx)(h.Text,{className:"orderStatus-desc",children:j.remainPayTimeDesc}),!(null===v||void 0===v||!v.length)&&v.map((function(e){return(0,y.jsx)(h.Text,{className:"orderStatus-desc",children:e},e)}))]}),!!T&&(0,y.jsxs)(h.View,{className:"orderStatus-redBg",children:[(0,y.jsx)(h.Text,{className:"icon-RemindShape"}),(0,y.jsx)(h.Text,{className:"orderStatus-tip",children:T})]})]})},C=(0,f.memo)(Z),V=t(90607),O=function(e){var n;return{orderBaseInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.orderBaseInfo,continuePayTick:(0,V.GD)(e),isLoading:(0,V.Vc)(e)}},S=(0,o.connect)(O)(C),k=t(22548),P=function(e){var n=e.orderBaseInfo,t=e.orderPriceInfo,r=e.isLoading,i=e.setOrderModalsVisible,a=e.priceDetailData,s=e.orderAllDataSuccess,c=e.queryOrderPriceInfo,l=n||{},u=l.orderId,d=l.payMode,m=t||{},x=m.payModeDesc,p=m.localPrice,v=m.prepayPrice,T=m.currentTotalPrice,I=m.payAmount,j=p||{},w=j.totalPrice,Z=j.currencyCode,C=v||{},V=C.totalPrice,O=(0,f.useCallback)((0,o.debounce)((function(){a?i({orderPriceDetailModal:{visible:!0,data:a}}):c((function(e){i({orderPriceDetailModal:{visible:!0,data:e}})}))}),300),[a]),S=(0,f.useCallback)((0,o.debounce)((function(){g().setClipboardData({data:"".concat(u),success:function(){g().showToast({title:"".concat(N.Z.copyOrderId)})}})}),300),[u]),P=(0,f.useMemo)((function(){switch(d){case b.Z$.Store:return"".concat(x).concat(Z).concat(w);case b.Z$.PreOnline:return"".concat(x).concat(N.Z.cny).concat(V).concat(N.Z.toStorePay).concat(Z).concat(w);default:return""}}),[d,t]);if(r)return null;var D=d===b.Z$.Online?I||0:T||0;return(0,y.jsxs)(h.View,{className:"orderAmountWrap cutLine-s",children:[(0,y.jsxs)(h.View,{className:"flex between-horizontal",children:[(0,y.jsxs)(h.View,{className:"flex1",children:[(0,y.jsx)(h.Text,{className:"title",children:N.Z.orderAmount}),!!s&&(0,y.jsx)(h.Text,{className:"orangePrice",children:"".concat(N.Z.cny).concat(D)})]}),(0,y.jsx)(k.Z,{className:"cBlue textBtn",debounce:!0,onClick:O,children:N.Z.orderFee})]}),!!P&&(0,y.jsx)(h.Text,{className:"desc mt14 flex",children:P}),(0,y.jsxs)(h.View,{className:"flex flex-row mt16",children:[(0,y.jsx)(h.Text,{className:"desc mr16",children:N.Z.orderNo}),(0,y.jsx)(h.Text,{className:"desc",children:u}),(0,y.jsx)(k.Z,{className:"textBtn copyBtn",debounce:!0,onClick:S,children:(0,y.jsx)(h.Text,{className:"icon-copy"})})]})]})},D=(0,f.memo)(P),L=t(26338),M=function(e){var n,t;return{orderBaseInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.orderBaseInfo,orderPriceInfo:null===(t=(0,V.mb)(e))||void 0===t?void 0:t.orderPriceInfo,isLoading:(0,V.Vc)(e),priceDetailData:(0,V.Rl)(e),orderAllDataSuccess:(0,V.$8)(e)}},A=function(e){return{setOrderModalsVisible:function(n){e((0,L.iO)(n))},queryOrderPriceInfo:function(n){return e((0,L.B0)(n))}}},B=(0,o.connect)(M,A)(D),R=t(29316),Q=function(e){var n=e.isLoading,t=e.refundProgressList,r=(0,f.useCallback)((0,o.debounce)((function(){(0,R.V4)("/pages/carNew/isd/subPages/refundProgressList/index")}),300),[]);if(n||null===t||void 0===t||!t.length)return null;var i=null===t||void 0===t?void 0:t.reduce((function(e,n){return Number(v.Utils.numberAdd(e,n.refundAmount))}),0),a=t[t.length-1],s=a||{},c=s.refundCycle;s.remark;return(0,y.jsxs)(h.View,{className:"refundBlockWrap cutLine-s",children:[(0,y.jsxs)(h.View,{className:"flex between-horizontal mb16",children:[(0,y.jsxs)(h.View,{className:"flex flex1 flex-row",children:[(0,y.jsx)(h.Text,{className:"title",children:N.Z.refund_record}),(0,y.jsx)(h.Text,{className:"subTitle ml16",children:"(".concat(N.Z.refundEntryTitle(null===t||void 0===t?void 0:t.length,i),")")})]}),(0,y.jsx)(k.Z,{className:"rightText textBtn",onClick:r,children:N.Z.refundSchedule})]}),(0,y.jsx)(h.View,{className:"subTitle mt4",children:"".concat(N.Z.refund_progressed).concat(c?", ".concat(c):"")})]})},q=(0,f.memo)(Q),F=function(e){return{refundProgressList:(0,V.Ps)(e),isLoading:(0,V.Vc)(e)}},W=(0,o.connect)(F)(q),E=function(e){var n=e.isLoading,t=e.freeDeposit,r=e.setOrderModalsVisible,i=(0,f.useCallback)((0,o.debounce)((function(){r({depositDetailModal:{visible:!0,data:t}})}),300),[t]);if(n||!t)return null;var a=t.depositExplainV2,s=t.depositItemName,c=t.freeDepositTitle,l=t.showFreeLabel,u=null===a||void 0===a?void 0:a[0],d=u||{},m=d.explain,x=d.explainSupplement,p=d.badDebt;return(0,y.jsxs)(h.View,{className:"DepositBlockWrap cutLine-s",children:[(0,y.jsxs)(h.View,{className:"flex between-horizontal",children:[(0,y.jsxs)(h.View,{className:"flex flex1 flex-row",children:[(0,y.jsx)(h.Text,{className:"title",children:N.Z.orderDeposit}),!!l&&(0,y.jsx)(h.Text,{className:"label",children:N.Z.orderDepositFree}),!!c&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.View,{className:"point"}),(0,y.jsx)(h.Text,{className:"desc",children:c})]})]}),(0,y.jsx)(k.Z,{onClick:i,className:"rightText textBtn",children:s})]}),!!m&&(0,y.jsx)(h.Text,{className:"subTitle",children:m}),!!p&&(0,y.jsxs)(h.View,{className:"subBox flex",children:[(0,y.jsx)(h.View,{className:"point redPoint"}),(0,y.jsxs)(h.View,{children:[(0,y.jsx)(h.Text,{className:"title",children:m}),(0,y.jsx)(h.Text,{className:"desc",children:x})]})]})]})},U=(0,f.memo)(E),H=function(e){var n;return{freeDeposit:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.freeDeposit,isLoading:(0,V.Vc)(e)}},_=function(e){return{setOrderModalsVisible:function(n){e((0,L.iO)(n))}}},z=(0,o.connect)(H,_)(U),G=function(e){var n=e.orderBaseInfo,t=e.isLoading,r=e.continuePayment,i=e.rentalLocationAndDate,a=e.setLocationInfo,s=e.setDateInfo,c=e.payCountDownTimeOutFlag,l=e.isIncludeCtripInsurance,u=n||{},d=u.allOperations,m=function(){(0,R.V4)("/pages/carNew/isd/subPages/cancelOrder/index")},x=function(){var e=i.rentalLocation,n=i.rentalDate;a(e),s(n),g().reLaunch({url:"/pages/carNew/isd/indexNew/index?apptype=OSD_C_WX&landingto=home"})},p=function(){var e=n||{},t=e.orderId;if(l)return v.ToastLoading.showToast({title:N.Z.payToast});r({orderId:t})},T=(0,f.useCallback)((0,o.debounce)((function(e){var n=e||{},t=n.operationId,r=n.url;switch(t){case b.Fr.PayNow:p();break;case b.Fr.BookAgain:x();break;case b.Fr.CancelBooking:m();break;default:r&&(0,R.V4)(r);break}}),300),[n,i,l]);if(t)return null;var I=null===d||void 0===d?void 0:d.filter((function(e){return e.enable&&!(e.operationId===b.Fr.PayNow&&c)}));return(0,y.jsx)(h.View,{className:"optionButtonsWrap",children:(null===I||void 0===I?void 0:I.length)&&I.map((function(e,n){return(0,y.jsx)(k.Z,{onClick:function(){return T(e)},debounce:!0,className:"btn ".concat(e.operationId===b.Fr.PayNow&&"orangeBtn"," ").concat(n!==I.length-1&&"mr16"),noBorder:!0,children:e.buttonName},e.buttonName)}))})},$=(0,f.memo)(G),X=t(97114),Y=function(e){var n,t;return{orderBaseInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.orderBaseInfo,orderPriceInfo:null===(t=(0,V.mb)(e))||void 0===t?void 0:t.orderPriceInfo,isLoading:(0,V.Vc)(e),rentalLocationAndDate:(0,V.JL)(e),isIncludeCtripInsurance:(0,V.b8)(e)}},J=function(e){return{continuePayment:function(n){e((0,L.gg)(n))},setLocationInfo:function(n){e((0,X.yi)(n))},setDateInfo:function(n){e((0,X.A2)(n))}}},K=(0,o.connect)(Y,J)($),ee=function(e){var n=e.rentalDate,t=n||{},r=t.pickUp,i=t.dropOff,o=t.duration,a=t.showYear;return r?(0,y.jsxs)(h.View,{className:"dateLocation flex between-horizontal",children:[(0,y.jsxs)(h.View,{className:"flex flex-column",children:[(0,y.jsx)(h.Text,{className:"color9 text",children:N.Z.localPickupTime}),!!a&&(0,y.jsx)(h.Text,{className:"time",children:"".concat(null===r||void 0===r?void 0:r.year)}),(0,y.jsx)(h.Text,{className:"time",children:"".concat(null===r||void 0===r?void 0:r.date," ").concat(null===r||void 0===r?void 0:r.week," ").concat(null===r||void 0===r?void 0:r.time)})]}),(0,y.jsxs)(h.View,{className:"flex flex-column",children:[(0,y.jsx)(h.Text,{className:"day",children:o}),(0,y.jsxs)(h.View,{className:"arrow",children:[(0,y.jsx)(h.View,{className:"stroke"}),(0,y.jsx)(h.View,{className:"triangle"})]})]}),(0,y.jsxs)(h.View,{className:"flex flex-column column-end",children:[(0,y.jsx)(h.Text,{className:"color9 text",children:N.Z.localDropoffTime}),!!a&&(0,y.jsx)(h.Text,{className:"time",children:"".concat(null===i||void 0===i?void 0:i.year)}),(0,y.jsx)(h.Text,{className:"time",children:"".concat(null===i||void 0===i?void 0:i.date," ").concat(null===i||void 0===i?void 0:i.week," ").concat(null===i||void 0===i?void 0:i.time)})]})]}):null},ne=(0,f.memo)(ee),te=function(e){return{rentalDate:(0,V.IQ)(e),isLoading:(0,V.Vc)(e)}},re=(0,o.connect)(te)(ne),ie=(0,f.memo)((function(e){var n=e.vehicleName,t=e.special,r=e.showVehicleInfoModal,i=e.isSimilar;return(0,y.jsx)(h.View,{className:"vehicleHead ",children:(0,y.jsxs)(h.View,{className:"vehicleHead-title",children:[(0,y.jsxs)(h.Text,{className:"vehicleHead-title-text",children:[n,t?" ".concat(N.Z.specified):""]}),!!i&&(0,y.jsxs)(h.View,{className:"vehicleHead-subtitle",onClick:r,children:[(0,y.jsx)(h.Text,{className:"vehicleHead-subtitle-text",children:N.Z.orSimilar}),(0,y.jsx)(h.Text,{className:"icon-message"})]})]})})})),oe=(0,f.memo)((function(e){var n=e.vehicleInfo,t=n||{},r=t.imageUrl,i=t.vehicleGroupName,o=(0,f.useMemo)((function(){var e=[{icon:"icon-seat",text:n.passengerNum},{icon:"icon-luggage",text:n.luggageNum},{icon:"icon-door",text:n.doorNum}].filter((function(e){return!!e.text})),t=[{icon:"icon-snow",text:n.hasAC&&N.Z.hasCondition},{icon:n.transmission===b.NR.MT?"icon-circle-m-filled":"icon-circle-a-filled",text:n.transmission===b.NR.MT?N.Z.manual:N.Z.automatic}].filter((function(e){return!!e.text}));return{line1:e,line2:t}}),[n]);return(0,y.jsxs)(h.View,{className:"flex flex-row",children:[(0,y.jsxs)(h.View,{className:"carInfo-Image",children:[(0,y.jsx)(ce,{}),(0,y.jsx)(h.Image,{src:r,className:"carInfo-Image-main"})]}),(0,y.jsxs)(h.View,{className:"carInfo-details",children:[(0,y.jsx)(h.View,{className:"mb16",children:(0,y.jsx)(ae,{iconText:"icon-car",content:i})}),(0,y.jsx)(h.View,{className:"mb16 flex",children:o.line1.map((function(e,n){return(0,y.jsx)(ae,{iconText:e.icon,content:e.text,isSplitBefore:0!==n},e.icon)}))}),(0,y.jsx)(h.View,{className:"mb16 flex",children:o.line2.map((function(e,n){return(0,y.jsx)(ae,{iconText:e.icon,content:e.text,isSplitBefore:0!==n},e.icon)}))})]})]})})),ae=(0,f.memo)((function(e){var n=e.iconText,t=e.content,r=e.isSplitBefore;return t?(0,y.jsxs)(h.View,{className:"flex flex-row",children:[r&&(0,y.jsx)(h.View,{className:"split"}),!!n&&(0,y.jsx)(h.Text,{className:"".concat(n," iconItemIcon")}),(0,y.jsx)(h.Text,{className:"iconItemText",children:t})]}):null})),se=(0,f.memo)((function(){return(0,y.jsxs)(h.View,{className:"flex row-start noticeText",children:[(0,y.jsx)(h.Text,{className:"icon-note"}),(0,y.jsx)(h.Text,{className:"redText",children:N.Z.overseasInsurance})]})})),ce=(0,f.memo)((function(){return(0,y.jsx)(h.View,{className:"defaultPictureLabel",children:(0,y.jsx)(h.Text,{className:"label",children:N.Z.defaultPictureLabel})})})),le=function(e){var n=e.vehicleInfo,t=e.isLoading,r=e.similarVehicleModalData,i=e.setOrderModalsVisible,a=e.isOsdNewInsurance,s=e.orderAllDataSuccess,c=e.isSimilar,l=(0,f.useCallback)((0,o.debounce)((function(){i({orderVehicleInfoModal:{visible:!0,data:r}})}),300),[r]);if(t)return null;var u=n||{},d=u.vehicleName,m=u.special;return(0,y.jsxs)(h.View,{className:"orderVehicleWrap",children:[(0,y.jsx)(ie,{vehicleName:d,special:m,showVehicleInfoModal:l,isSimilar:c}),(0,y.jsx)(oe,{vehicleInfo:n}),(0,y.jsx)(re,{}),s&&!a&&(0,y.jsx)(se,{})]})},ue=(0,f.memo)(le),de=function(e){var n,t;return{vehicleInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.vehicleInfo,vendorInfo:null===(t=(0,V.mb)(e))||void 0===t?void 0:t.vendorInfo,isLoading:(0,V.Vc)(e),similarVehicleModalData:(0,V.p_)(e),isOsdNewInsurance:(0,V.yI)(e),orderAllDataSuccess:(0,V.$8)(e),isSimilar:(0,V.bf)(e)}},me=function(e){return{setOrderModalsVisible:function(n){e((0,L.iO)(n))}}},xe=(0,o.connect)(de,me)(ue),fe=t(86504),he=t(26456),pe=(0,f.memo)((function(e){var n=e.item,t=e.idx,r=e.onClick,i=e.isSelected;return(0,y.jsxs)(h.View,{className:"flex1 tab ".concat(i&&"onTab"),onClick:function(){return r(t)},children:[(0,y.jsx)(h.Text,{className:"tabName",children:n}),i&&(0,y.jsx)(h.View,{className:"selectLine"})]})})),ve=(0,f.memo)((function(e){var n=e.tabs,t=e.selectIdx,r=e.onClick;return(0,y.jsx)(h.View,{className:"flex flex-row cutLine-s",children:n.map((function(e,n){return(0,y.jsx)(pe,{onClick:r,idx:n,item:e,isSelected:t===n},e)}))})})),Ne=(0,f.memo)((function(e){var n=e.iconClassName,t=e.title,r=e.subTitle,i=e.rightText,o=e.onClick,a=e.isLast;return r?(0,y.jsxs)(h.View,{className:"textBlock ".concat(a&&"mb0"),children:[(0,y.jsxs)(h.View,{className:"flex between-horizontal",children:[(0,y.jsxs)(h.View,{children:[(0,y.jsx)(h.Text,{className:"icon ".concat(n)}),(0,y.jsx)(h.Text,{className:"title",children:t})]}),!!o&&!!i&&(0,y.jsx)(k.Z,{className:"textBtn rightText",debounce:!0,onClick:o,children:i})]}),(0,y.jsx)(h.Text,{className:"subTitle",children:r})]}):null})),Te=function(e){var n=e.vendorHeaderProps,t=e.pickupStore,r=e.returnStore,i=e.setOrderModalsVisible,o=e.isLoading,a=e.productRentalLocationInfo,s=[N.Z.pickCar,N.Z.returnCar],c=n||{},l=c.vendorLogo,u=c.score,d=c.totalScore,m=c.hasComment,x=(0,f.useCallback)((function(e){try{if("string"===typeof e&&(e=JSON.parse(e)),"[object Object]"===Object.prototype.toString.call(e)){var n=Object.keys(e);return 1===(null===n||void 0===n?void 0:n.length)&&"00:01-23:59"===e[n[0]]?N.Z.open24Hour:n.map((function(n){return"".concat(n," ").concat(e[n])})).join(" ")}}catch(e){return""}}),[]),p=(0,f.useState)(0),T=(0,w.Z)(p,2),g=T[0],I=T[1],b=(0,f.useCallback)((function(){var e=0===g?he.I.PICKUP:he.I.RETURNOFF,n=(0,fe.eg)(e,v.Utils.isCtripIsd(),a);j().navigateTo({url:"/pages/carNew/isd/subPages/map/index?type=".concat(e),success:function(e){e.eventChannel.emit("mapLocationInfo",{data:n})}})}),[a,g]),Z=(0,f.useMemo)((function(){var e=(0===g?t:r)||{};return[{title:N.Z.branchName,subTitle:e.storeName,iconClassName:"icon-store"},{title:N.Z.arrivalType,subTitle:e.storeWay,iconClassName:"icon-storeWay"},{title:N.Z.storeAddress,subTitle:e.storeAddress,iconClassName:"icon-location",rightText:N.Z.mapDetails,onClick:b},{title:N.Z.storePhone,subTitle:e.storeTel,iconClassName:"icon-phone",rightText:N.Z.callPhone,onClick:function(){var n=v.Utils.mapWithKey(v.Utils.getPhoneList(e.storeTel));(null===n||void 0===n?void 0:n.length)>1?i({phoneListsModal:{visible:!0,data:n}}):j().makePhoneCall({phoneNumber:e.storeTel})}},{title:N.Z.businessHour,subTitle:x(e.storeOpenTimeDesc),iconClassName:"icon-time"}]}),[g,t,r]),C=(0,f.useCallback)((function(e){I(e)}),[]);return o?null:(0,y.jsxs)(h.View,{className:"pickReturnTab",children:[(0,y.jsxs)(h.View,{className:"vendorHead cutLine-s",children:[!!l&&(0,y.jsx)(h.Image,{className:"vendorImg",src:l}),m?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Text,{className:"score",children:u}),(0,y.jsxs)(h.Text,{className:"totalScore",children:["/",d]})]}):(0,y.jsx)(h.Text,{className:"noneComment",children:N.Z.noneComment})]}),(0,y.jsx)(ve,{tabs:s,selectIdx:g,onClick:C}),(0,y.jsx)(h.View,{className:"textBlockWrap",children:Z.map((function(e,n){return(0,y.jsx)(Ne,{title:e.title,subTitle:e.subTitle,iconClassName:e.iconClassName,rightText:e.rightText,onClick:e.onClick,isLast:n===Z.length-1},e.title)}))})]})},ge=(0,f.memo)(Te),Ie=function(e){var n,t=(0,V.mb)(e)||{};return{pickupStore:t.pickupStore,returnStore:t.returnStore,isLoading:(0,V.Vc)(e),vendorInfo:t.vendorInfo,orderBaseInfo:t.orderBaseInfo,rentCenter:t.rentCenter,dropOffRentCenter:t.rRentCenter,giftText:null===t||void 0===t||null===(n=t.extendedInfo)||void 0===n?void 0:n.giftText,vendorHeaderProps:(0,V.Qw)(e),productRentalLocationInfo:(0,V._$)(e)}},je=function(e){return{setOrderModalsVisible:function(n){e((0,L.iO)(n))}}},we=(0,o.connect)(Ie,je)(ge),be=function(e){var n=e.cancelRuleInfo,t=e.policiesData,r=n||{},i=r.cancelDescription,a=(0,f.useCallback)((0,o.debounce)((function(e){(0,R.V4)("/pages/carNew/isd/subPages/orderPolicy/index?selectedId=".concat(e))}),300),[]);return i?(0,y.jsxs)(h.View,{className:"policyWrap",children:[(0,y.jsx)(h.Text,{className:"title",children:N.Z.cancelPolicy}),(0,y.jsx)(h.Text,{className:"subTitle cutLine",children:i}),(0,y.jsxs)(h.View,{children:[(0,y.jsx)(h.Text,{className:"morePolicy",children:N.Z.moreStorePolicies}),(0,y.jsx)(h.View,{className:"flex flex-row-wrap",children:(null===t||void 0===t?void 0:t.length)&&t.map((function(e){return(0,y.jsxs)(h.View,{className:"policyItem flex align-horizontal",onClick:function(){a(e.id)},children:[(0,y.jsx)(h.Text,{className:"policyText",children:e.labName}),(0,y.jsx)(h.Text,{className:"icon-arrow-right"})]},e.labName)}))})]})]}):null},ye=(0,f.memo)(be),Ze=function(e){var n;return{cancelRuleInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.cancelRuleInfo,policiesData:(0,V.EJ)(e)}},Ce=(0,o.connect)(Ze)(ye),Ve=function(e){var n=e.isLoading,t=e.driverInfo,r=(0,f.useMemo)((function(){if(null===t||void 0===t||!t.age)return[];var e=["name","age","email","telphone","flightNo"],n=[];return e.forEach((function(e){null!==t&&void 0!==t&&t[e]&&n.push({key:N.Z[e],value:"telphone"===e&&null!==t&&void 0!==t&&t.areaCode?"".concat(null===t||void 0===t?void 0:t.areaCode,"-").concat(null===t||void 0===t?void 0:t[e]):null===t||void 0===t?void 0:t[e]})})),n}),[t]);return!t||n?null:(0,y.jsxs)(h.View,{className:"driverInfoWrap",children:[(0,y.jsx)(h.Text,{className:"title",children:N.Z.driverDetails}),(null===r||void 0===r?void 0:r.length)&&r.map((function(e){return(0,y.jsxs)(h.View,{className:"flex flex-row mt8",children:[(0,y.jsx)(h.Text,{className:"driverKey",children:e.key}),(0,y.jsx)(h.Text,{className:"driverValue",children:e.value})]},e.key)}))]})},Oe=(0,f.memo)(Ve),Se=function(e){var n;return{driverInfo:null===(n=(0,V.mb)(e))||void 0===n?void 0:n.driverInfo,isLoading:(0,V.Vc)(e)}},ke=(0,o.connect)(Se)(Oe),Pe=t(45022),De=t(35695),Le=function(e){return{orderModalsData:(0,V.oj)(e),qconfig:(0,De.sX)(e)}},Me=function(e){return{setOrderModalsVisible:function(n){e((0,L.iO)(n))}}},Ae=(0,o.connect)(Le,Me)(Pe.Z),Be=t(79301),Re=t(95308),Qe=t(52671),qe=(0,f.memo)((function(e){var n=e.isLoading,t=e.orderId,r=(0,o.debounce)((0,Re.Z)((0,Be.Z)().mark((function e(){var n;return(0,Be.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Qe.R)({pageId:v.Channel.getPageId().ORDER_DETAIL.ID,isPreSale:1,orderId:t});case 2:n=e.sent,(0,R.V4)(n);case 4:case"end":return e.stop()}}),e)}))));return n?null:(0,y.jsxs)(h.View,{className:"customerEntry",onClick:r,children:[(0,y.jsx)(h.Text,{className:"icon-customer"}),(0,y.jsx)(h.Text,{className:"title",children:N.Z.customer})]})})),Fe=(0,f.memo)(qe),We=function(e){var n;return{orderId:null===(n=(0,V.mb)(e))||void 0===n||null===(n=n.orderBaseInfo)||void 0===n?void 0:n.orderId,isLoading:(0,V.Vc)(e)}},Ee=(0,o.connect)(We)(Fe),Ue=t(62403),He=t(65538),_e=function(e){return e[e["quickInterval"]=1e3]="quickInterval",e[e["normalInterval"]=8e3]="normalInterval",e}(_e||{}),ze=3,Ge=null,$e=function(e){(0,d.Z)(r,e);var n=(0,m.Z)(r);function r(e){var t;return(0,a.Z)(this,r),t=n.call(this,e),(0,x.Z)((0,c.Z)(t),"orderId",""),(0,x.Z)((0,c.Z)(t),"timeIsShowPage",null),(0,x.Z)((0,c.Z)(t),"orderQueryIntervalTime",_e.quickInterval),(0,x.Z)((0,c.Z)(t),"orderQueryOnCancelCount",0),(0,x.Z)((0,c.Z)(t),"timerQueryOrderId",null),(0,x.Z)((0,c.Z)(t),"options",void 0),(0,x.Z)((0,c.Z)(t),"prevAppType",""),(0,x.Z)((0,c.Z)(t),"setOrderId",(function(){var e,n=null===(e=(0,T.getCurrentInstance)())||void 0===e||null===(e=e.router)||void 0===e?void 0:e.params;t.orderId=(null===n||void 0===n?void 0:n.orderId)||"",t.props.setOrderId(t.orderId)})),(0,x.Z)((0,c.Z)(t),"getOrderData",(function(e){v.User.checkToLogin().then((function(){t.props.initOrder(e)})).catch((function(){v.ToastLoading.showToast({title:N.Z.busy,complete:j().navigateBack})}))})),(0,x.Z)((0,c.Z)(t),"setShowPageOtherModule",(function(){var e=100;t.timeIsShowPage=setTimeout((function(){t.state.isShowPageOtherModule||(t.lazyLoadOtherModules(),t.setState({isShowPageOtherModule:!0}))}),e)})),(0,x.Z)((0,c.Z)(t),"onPayTimeOut",(function(){t.setState({payCountDownTimeOutFlag:!0}),t.props.initOrder()})),(0,x.Z)((0,c.Z)(t),"setOrderIntervalTime",(function(e){var n=e.orderStatusCtrip,r=e.isQuickInterval;if(r)t.orderQueryIntervalTime=_e.quickInterval;else{var i=[b.h7.PROCESSING,b.h7.CANCELLING,b.h7.PAYING].includes(n)?_e.quickInterval:_e.normalInterval;t.orderQueryIntervalTime!==i&&(t.orderQueryIntervalTime=i)}})),(0,x.Z)((0,c.Z)(t),"timingQueryOrder",(function(){var e=t.props,n=e.queryOrderStatus,r=e.orderId,i=e.orderStatusCtrip;if(i===b.h7.CANCELLED){if(!(t.orderQueryOnCancelCount<=ze))return;t.orderQueryOnCancelCount+=1}t.timerQueryOrderId||(n({orderId:r}),t.timerQueryOrderId=setTimeout((function(){t.timerQueryOrderId&&t.clearTimingQueryOrder(),t.timingQueryOrder()}),t.orderQueryIntervalTime))})),(0,x.Z)((0,c.Z)(t),"clearTimingQueryOrder",(function(){clearTimeout(t.timerQueryOrderId),t.timerQueryOrderId=null})),t.props.clear(),t.setOrderId(),t.prevAppType="",t.state={payCountDownTimeOutFlag:!1,isShowPageOtherModule:!1},t}return(0,s.Z)(r,[{key:"getPageId",value:function(){return this.pageId=v.Channel.getPageId().ORDER_DETAIL.ID,this.pageId}},{key:"onReady",value:function(){(0,l.Z)((0,u.Z)(r.prototype),"onReady",this).call(this)}},{key:"onLoad",value:function(e){this.options=e,this.prevAppType=Ue["default"].SourceFrom,(0,Ue.setCarContext)({query:(0,i.Z)({},e)}),(0,l.Z)((0,u.Z)(r.prototype),"onLoad",this).call(this,e),this.getOrderData(!0)}},{key:"componentDidShow",value:function(){var e=this;(0,l.Z)((0,u.Z)(r.prototype),"componentDidShow",this).call(this),this.pageAppearCount>1&&setTimeout((function(){e.props.orderId||(e.setOrderId(),e.getOrderData())}),0)}},{key:"componentWillUnmount",value:function(){(0,l.Z)((0,u.Z)(r.prototype),"componentWillUnmount",this).call(this);var e=this.prevAppType;(0,He.SU)(e),this.clearTimingQueryOrder(),this.timeIsShowPage&&clearTimeout(this.timeIsShowPage),this.props.clear()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var n=this.props,t=n.queryOrderApiStatus,r=n.orderStatusCtrip,i=n.orderAllDataSuccess;t===b.zt.unstart&&e.queryOrderApiStatus!==b.zt.unstart&&(this.performanceMonitor.receiveResStart=new Date),i!==e.orderAllDataSuccess&&e.orderAllDataSuccess&&this.timingQueryOrder(),r!==e.orderStatusCtrip&&this.setOrderIntervalTime({orderStatusCtrip:e.orderStatusCtrip})}},{key:"onPageReady",value:function(){this.performanceMonitor.interactiveStart=new Date,this.performanceMonitor.submit(),this.performanceMonitor.contentShowStart=this.performanceMonitor.interactiveStart,this.performanceMonitor.submitTTI(),this.setShowPageOtherModule()}},{key:"componentDidUpdate",value:function(e){var n=this.props.orderAllDataSuccess;!e.orderAllDataSuccess&&n&&this.onPageReady()}},{key:"render",value:function(){var e=this.props,n=e.isOsdNewInsurance,r=e.orderAllDataSuccess,i=this.state,o=i.isShowPageOtherModule,a=i.payCountDownTimeOutFlag;return!Ge&&r&&(Ge=n?t(37282).Z:t(62400).Z),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(h.ScrollView,{scrollY:!0,className:"orderDetail-wrapper",children:[(0,y.jsx)(S,{onTimeOut:this.onPayTimeOut}),(0,y.jsx)(B,{}),(0,y.jsx)(z,{}),(0,y.jsx)(W,{}),(0,y.jsx)(K,{payCountDownTimeOutFlag:a}),(0,y.jsx)(xe,{}),(0,y.jsx)(we,{}),(0,y.jsx)(Ce,{}),!!Ge&&(0,y.jsx)(Ge,{}),(0,y.jsx)(ke,{}),(0,y.jsx)(Ee,{}),!!o&&(0,y.jsx)(Ae,{})]}),(0,y.jsx)("perinfo-protect-float",{forceExitMiniapp:"{{true}}"})]})}}]),r}(p.Z),Xe=$e,Ye=t(6017),Je=function(e){var n,t,r,i;return{orderId:(0,V.NO)(e),currentCurrencyCode:null===(n=(0,V.dS)(e))||void 0===n?void 0:n.currentCurrencyCode,currentTotalPrice:null===(t=(0,V.dS)(e))||void 0===t?void 0:t.currentTotalPrice,queryOrderApiStatus:(0,V.Dd)(e),appResponseMap:null===(r=(0,V.mb)(e))||void 0===r?void 0:r.appResponseMap,orderStatusCtrip:null===(i=(0,V.mb)(e))||void 0===i||null===(i=i.orderBaseInfo)||void 0===i?void 0:i.orderStatusCtrip,contactStorePhones:(0,V.rv)(e),orderAllDataSuccess:(0,V.$8)(e),isOsdNewInsurance:(0,V.yI)(e)}},Ke=function(e){return{queryOrderStatus:function(n){return e((0,L.Wc)(n))},initOrder:function(n){return e((0,L.S1)(n))},setOrderId:function(n){return e((0,L.al)(n))},setOrderModalsVisible:function(n){return e((0,L.iO)(n))},clear:function(){return e((0,L.ZH)())}}},en=(0,o.connect)(Je,Ke)(Xe),nn=(0,Ye.Z)(en),tn=function(e){return(0,y.jsx)(nn,(0,i.Z)({},e))},rn=tn,on={navigationBarTitleText:"\u8ba2\u5355\u8be6\u60c5",navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff",usingComponents:{"perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};Page((0,r.createPageConfig)(rn,"pages/carNew/isd/subPages/orderDetail/index",{root:{cn:[]}},on||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../../cwx/cwx")},44353:function(e){e.exports=require("../../../../../cwx/cwx.js")},46346:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[7606,2107,1216,8592],(function(){return n(13898)}));e.O()}]);
//# sourceMappingURL=index.js.map