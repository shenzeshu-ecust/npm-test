"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[3999],{67987:function(e,t,n){var r=n(32180),o=n(90129),i=n(90201),a=n(92954),s=n(67347),c=n(16921),l=n(60175),d=n(10546),u=n(37360),p=n(44720),g=n(81789),m=n(43198),h=n(43480),f=n(62171),v=n(71515),T=n(12809),I=n(63871),y=n(33943),k=n(66187),C=n(95569),x=n(69191),N=n(84724),w=n(12265),P=n(3875),_=n(2269),j=(0,_.jsxs)(v.View,{className:"international-x-loading",style:{marginLeft:0,marginRight:0},children:[(0,_.jsxs)(v.View,{className:"loading-section",children:[(0,_.jsxs)(v.View,{className:"loading-row justify-between loading-1",children:[(0,_.jsx)(v.View,{className:"loading-block loading-block-1"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-2"})]}),(0,_.jsxs)(v.View,{className:"loading-row justify-between align-start loading-2",children:[(0,_.jsxs)(v.View,{className:"loading-row justify-start align-start",children:[(0,_.jsx)(v.View,{className:"loading-block loading-block-3"}),(0,_.jsxs)(v.View,{className:"loading-column align-start loading-3",children:[(0,_.jsx)(v.View,{className:"loading-block loading-block-4"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-5"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-6"})]})]}),(0,_.jsx)(v.View,{className:"loading-block loading-block-7"})]}),(0,_.jsx)(v.View,{className:"loading-block loading-block-8"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-9"}),(0,_.jsx)(v.View,{className:"loading-row",children:(0,_.jsx)(v.View,{className:"loading-block loading-block-10"})})]}),(0,_.jsxs)(v.View,{className:"loading-section",children:[(0,_.jsxs)(v.View,{className:"loading-row justify-between loading-4",children:[(0,_.jsxs)(v.View,{className:"loading-row justify-start",children:[(0,_.jsx)(v.View,{className:"loading-block loading-block-3"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-11"})]}),(0,_.jsx)(v.View,{className:"loading-block loading-block-7"})]}),(0,_.jsx)(v.View,{className:"loading-block loading-block-12"}),(0,_.jsxs)(v.View,{className:"loading-row justify-between loading-4",children:[(0,_.jsxs)(v.View,{className:"loading-row justify-start",children:[(0,_.jsx)(v.View,{className:"loading-block loading-block-3"}),(0,_.jsx)(v.View,{className:"loading-block loading-block-11"})]}),(0,_.jsx)(v.View,{className:"loading-block loading-block-7"})]})]})]}),b=j,L=n(19025),R=n(298),S=n(88431),A=n(51897),Z=n(88455),D=n(68629),E=n(56494),V=n(14334),O=n(14426),F=n(97081),q=n(45023),M=n(64353),B=n(55172),G=n(59931),H=n(86252),Y=n(43752),U=n(10830),K=n(9154),X=function(e,t,n){return f.R.pipe(f.R.filter((function(e){return!!e.checked})),f.R.map((function(e){var r=(0,G.YL)(e,t,e.passengerType,n),o=r.ticketType,i=e.document;return!e.document&&e.documents&&e.documents.length&&(i=e.documents[0]),(0,R.Z)((0,R.Z)({},e),{},{ticketType:o,document:i})})))(e||[])},J=function(e){var t={ADULT:0,CHILD:0,INFANT:0,TOTAL:0,CHILD_BOOK_ADULT:0,INFANT_BOOK_ADULT:0,INFANT_BOOK_CHILD:0};return null===e||void 0===e||e.forEach((function(e){var n=e.checked,r=e.passengerType;n&&(t[r]++,t.TOTAL++)})),t},Q=function(e,t){return f.R.pipe(f.R.map((function(e){var n;return(0,R.Z)((0,R.Z)({},e),{},{checked:!!t[e.id]&&!e.nameError&&!(null!==(n=e.checkError)&&void 0!==n&&n.text)&&!e.defaultNoCheck,document:f.R.isEmpty(e.document)?f.R.head(e.documents):e.document})})))(e)},W=function(e){return f.R.pipe(f.R.filter((function(e){return!!e.checked})),f.R.map(f.R.pathOr("",["name","name"])),f.R.join("\u3001"))(e)},z=function(e){var t=W(e);(0,Y.jq)("Passenger selected",{names:t})},$=n(22276),ee={passengers:[],showCount:0},te=(0,f.createSlice)({name:"passengerStore",initialState:ee,reducers:{setShowCountAction:function(e,t){var n=t.payload,r=f.R.filter((function(e){return f.R.prop("checked",e)}),n),o=f.R.length(r);e.showCount=o>2?o:2},setPassengersAction:function(e,t){var n=t.payload;e.passengers=n},savePassengerToListAction:function(e,t){var n=t.payload,r=n.id,o=n.savedPassenger,i=e.passengers||[];f.R.any((function(e){return e.id===r}),i)?e.passengers=f.R.map((function(e){return e.id===r?(0,R.Z)((0,R.Z)({},o),{},{id:r}):e}),i):e.passengers=[(0,R.Z)((0,R.Z)({},o),{},{id:r})].concat((0,$.Z)(i))},setSelectedAction:function(e,t){var n=t.payload,r=n.selected,o=n.needSort,i=f.R.map((function(e){var t=r[e.id];return void 0===t?e:(0,R.Z)((0,R.Z)({},e),{},{checked:!!t})}))(e.passengers||[]);if(o){var a=f.R.descend(f.R.propOr(!1,"checked"));e.passengers=f.R.sort(a,i);var s=f.R.filter(f.R.propEq("checked",!0),i),c=f.R.length(s);e.showCount=c>2?c:2}else e.passengers=i}}}),ne=te.actions,re=(ne.savePassengerToListAction,ne.setPassengersAction),oe=ne.setShowCountAction,ie=ne.setSelectedAction,ae=f.useSelector,se=te,ce=function(e){return e.passengerStore},le=(0,f.createSelector)([ce],(function(e){return(null===e||void 0===e?void 0:e.passengers)||[]})),de=(0,f.createSelector)([ce],(function(e){return(null===e||void 0===e?void 0:e.showCount)||0})),ue=(0,f.createSelector)([le],(function(e){return e})),pe=(0,f.createSelector)([ue],(function(e){return J(e)})),ge=(0,f.createSelector)([ue,p.W9,p.t6],(function(e,t,n){return X(e,t,n)})),me=(0,f.createSelector)([pe],(function(e){return f.R.prop("TOTAL",e)})),he={},fe="",ve=function(e){var t=e.children,n=e.userId,r=void 0===n?"":n,o=e.showCount,s=e.policy,c=e.setTargetView,l=e.passengers,d=void 0===l?[]:l,u=e.passengerCount,p=e.selectedPassengers,g=e.setPassengers,m=e.setShowCount,h=e.setSelected,v=e.clrlist,T=e.isIntl,I=f.R.flatten((null===s||void 0===s?void 0:s.productTypes)||[]),y=I.indexOf("LIMITED_STUDENT")>-1,k=(0,a.useRouter)(),x=k.params,N=x||{},w=N.policyId,P=(0,U.XC)({userId:r,isStudent:y,intl:T,policyId:w}),_=P.data,j=P.isFetching;(0,i.useEffect)((function(){d.length&&(he=f.R.reduce((function(e,t){return(0,R.Z)((0,R.Z)({},e),{},(0,q.Z)({},t.id,t.checked))}),{},d)),z(d)}),[d]);var b=(0,i.useCallback)((function(e){var t=(e||[]).map((function(e){return(0,G.N6)(e,!0,null===_||void 0===_?void 0:_.notes,v)})),n=Q(t,he),r=(0,G.MG)(n,s);g((0,G.RR)(r)),m(r)}),[s,g,m,null===_||void 0===_?void 0:_.notes,v]);(0,i.useEffect)((function(){d.length&&(null===s||void 0===s?void 0:s.prdid)===fe||(b(null===_||void 0===_?void 0:_.passengers),fe=(null===s||void 0===s?void 0:s.prdid)||"")}),[b,null===_||void 0===_?void 0:_.passengers,d.length,null===s||void 0===s?void 0:s.prdid]);var L=(0,i.useCallback)((function(e){(0,Y.jq)("Order passenger check");var t=[];if(0===u.TOTAL)return c("userArea"),(0,Y.jq)("Order passenger check failed, none psg"),(0,f.showToast)("\u8bf7\u9009\u62e9\u4e58\u673a\u4eba");var n=s||{},r=n.ticketCount,o=void 0===r?0:r,i=n.psgType,a=n.totalPrices,l=n.salepolinfo,d=n.restriction,g=i||{},m=g.searchAdult,h=void 0===m?1:m,v=g.searchChild,T=void 0===v?0:v,I=g.searchBaby,y=void 0===I?0:I,k=u.ADULT,C=u.CHILD,x=void 0===C?0:C,N=u.INFANT,w=void 0===N?0:N,P=u.TOTAL-u.INFANT;if(P>o)return(0,f.showToast)("\u5f88\u62b1\u6b49\uff0c\u56e0\u7968\u91cf\u6709\u9650\uff0c\u6700\u591a\u53ea\u80fd\u6dfb\u52a0".concat(o,"\u540d\u4e58\u673a\u4eba"));var _=(0,G.PN)(u,s,!1);if(_){c("userArea");var j={title:"\u6b64\u4f18\u60e0\u4ef7\u683c\u6709\u4eba\u6570\u9650\u5236",speedValue:"Order passenger check failed, ticketLimit",content:_,speedLeft:"ticketLimit, other price click",speedRight:"ticketLimit, add passenger"};(0,H.Cd)(j)}else{var b=1;h>0&&T>0?b=2:h>0&&y>0&&(b=3);var L={title:"\u4e0b\u5355\u4eba\u6570\u4e0e\u641c\u7d22\u4eba\u6570\u4e0d\u7b26",speedValue:"Order passenger check failed, passenger number difference",content:"\u5f53\u524d\u4ef7\u683c\u8981\u6c42\u4e0b\u5355\u4eba\u6570\u4e0e\u641c\u7d22\u65f6\u8bbe\u7f6e\u7684\u4eba\u6570\u4e00\u81f4\uff0c\u8bf7\u60a8\u786e\u5b9a\u51fa\u884c\u4e58\u5ba2\u4eba\u6570\uff0c\u91cd\u65b0\u67e5\u8be2\u53ef\u8ba2\u822a\u73ed",speedLeft:"passenger number difference, other price click",speedRight:"passenger number difference, add passenger"};if(1===b){if((null===d||void 0===d||!d.canChangePassenger)&&k!==h)return void(0,H.Cd)(L)}else if(2===b){if(null!==d&&void 0!==d&&d.canChangePassenger){if(k<=0)return void(0,f.showToast)("\u8bf7\u6dfb\u52a0\u6210\u4eba");if(x/k>2)return void(0,f.showToast)("\u513f\u7ae5\u4eba\u6570\u8d85\u51fa\u9650\u5236, \u6bcf\u4f4d\u6210\u4eba\u6700\u591a\u80fd\u5e262\u4f4d\u513f\u7ae5")}else if(k!==h||x!==T)return void(0,H.Cd)(L)}else if(3===b&&(k!==h||w!==y))return void(0,H.Cd)(L);if(null===p||void 0===p||p.forEach((function(e){var t=(0,G.YL)(e,a,e.passengerType,l),n=t.forceChildBookAdult,r=t.forceInfantBookChild;x+=Number(n),w+=Number(r)})),T>0&&0===x||y>0&&0===w||T>0&&y>0&&(k!==h||x!==T||w!==y))return(0,H.__)(i,u);t.length?(c("userArea"),e({result:0,errors:t})):((0,Y.jq)("Order USER_CHECK check ok"),e({result:1}))}}),[s,u,p,c]);return(0,C.Up)(C.O4.USER_CHECK,L),t({selectedPassengers:p,showCount:o,passengerCount:u,passengers:d,setSelected:h,setPassengers:g,isFetching:j})},Te=function(e){return{userId:(0,M.c7)(e),policy:(0,p.Nb)(e),showCount:de(e),passengers:le(e),passengerCount:pe(e),selectedPassengers:ge(e)}},Ie=function(e){return{setPassengers:function(t){return e(re(t))},setShowCount:function(t){return e(oe(t))},setSelected:function(t,n){return e(ie({selected:t,needSort:n}))}}},ye=(0,f.connect)(Te,Ie),ke=(0,B.Z)({key:se.name,reducer:se.reducer}),Ce=(0,f.compose)(ke,ye)((0,i.memo)(ve)),xe=Ce,Ne={passengerCard:"PassengerModule-module_dRNXF",numLimitText:"PassengerModule-module_sGie9"},we=function(e){var t=e.setTargetView,n=e.isIntl,r=(0,I.Gm)("bookingPageText",{}),o=(0,p.Ck)(p.s7),a=(0,p.Ck)(p.GQ),s=a.registerMemberType,c=a.airlineName,l=(0,F.f3)(F.Oh),d=(0,i.useMemo)((function(){var e=f.R.pathOr({},["policy","restriction"],o),t=e.minPassengerNum,n=e.maxPassengerNum,r=t===n?t:"".concat(t+"-"+n);return(1!==t||9!==n)&&"\u6b64\u4ef7\u683c\u9650".concat(r,"\u4eba\u9884\u8ba2")}),[o]),u=(0,i.useMemo)((function(){var e,t,n=f.R.path(["policy","notes"],o)||[],r=(null===(e=f.R.find((function(e){return 24===e.ncate}),n))||void 0===e?void 0:e.detaillst)||[];return"CONTRACT"!==s&&(null===(t=f.R.find((function(e){return 1===e.notetype}),r))||void 0===t?void 0:t.notetit)||""}),[o,s]),g=f.R.path(["extflag"],o);return(0,_.jsx)(A.Z,{children:(0,_.jsx)(xe,{setTargetView:t,isIntl:n,clrlist:null===o||void 0===o?void 0:o.clrlist,children:function(e){var n,i,a=e.showCount,p=e.passengerCount,m=e.passengers,h=e.setSelected,f=e.selectedPassengers,T=void 0===f?[]:f,I=e.isFetching;return I?(0,_.jsx)(w.T,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(v.View,{className:"card user ".concat(Ne.passengerCard),id:"userArea",children:(0,_.jsx)(v.View,{className:"card-body",style:{paddingBottom:"0"},children:(0,_.jsxs)(v.View,{className:"container",children:[(0,_.jsxs)(Z.Z,(0,R.Z)((0,R.Z)({},p),{},{children:[(0,_.jsx)(v.View,{children:(0,_.jsx)(D.Z,{className:"inviteBooking"})}),!(0,S.GN)()&&(0,_.jsx)(V.Z,{})]})),d&&(0,_.jsx)(v.View,{className:"row ".concat(Ne.numLimitText),children:d}),(0,_.jsx)(E.Z,{showCount:a,passengerCount:p,passengerList:m,xPassengerIds:l,goToRealName:function(){},productTypes:[],salePolInfo:null===o||void 0===o||null===(n=o.policy)||void 0===n?void 0:n.salepolinfo,availableCardList:null===o||void 0===o||null===(i=o.policy)||void 0===i?void 0:i.acardlst,clrlist:null===o||void 0===o?void 0:o.clrlist,setSelected:h,isIntl:!0}),(0,_.jsx)(O.Z,{id:"contactArea",setTargetView:t,registerMemberType:s,airlineName:c,bookingPageText:r,selectedPassengers:T,isIntl:!0,americaTitle:u,extflag:g})]})})})})}})})},Pe=(0,i.memo)(we),_e=Pe,je=n(56849),be=n(92139),Le=function(){var e=(0,p.Ck)(p.Nb),t=(0,F.f3)(F.vY),n=(0,p.Ck)(p.e_),r=(0,je.Ft)(je.gZ),o=(0,je.Ft)(je.Xb),i=ae(pe),a=ae(ge);return(0,_.jsx)(v.View,{children:(0,_.jsx)(je.ZP,{hasSelectedInsurance:t,passengerCount:i,selectedPassengers:a,tripType:n,isIntl:!0,policy:e,children:function(e){var t=e.manualOperateSelected,n=e.addCouponDomestic,a=e.couponLabel,s=e.isIntl,c=e.addOrVerifyCouponInter;return(0,_.jsx)(be.Z,{manualOperateSelected:t,addCouponDomestic:n,couponLabel:a,isIntl:s,couponList:r,selected:o,addOrVerifyCouponInter:c,passengerTotalCount:i.TOTAL})}})})},Re=Le,Se=Re,Ae=n(52296),Ze=n(57895),De=n(14044),Ee=n(17745),Ve=n(5328),Oe=n(34869),Fe=n(19836),qe=function(){var e=ae(me),t=ae(ue),n=ae(ge),r=(0,i.useMemo)((function(){return n.map((function(e){return(0,R.Z)((0,R.Z)({},e),{},{birth:(0,De.h)(e)})}))}),[n]),a=(0,p.Ck)(p.OI),c=(0,u.GX)(u.cE),l=(0,p.Ck)(p.Ec),d=(0,I.Sl)("showInterInsuranceModule"),g=(0,F.GT)(),m=(0,o.Z)(g,1),h=m[0];return d?(0,_.jsx)(v.View,{id:"insuranceArea",children:(0,_.jsx)(A.Z,{children:(0,_.jsx)(f.Insurance,{regionType:"International",contextProps:{TARO_ENV:"weapp",miniProgram:(0,Oe.C0)(),sendSpeed:Ae.jq,sendShowTrace:Ae.$J,showModal:s.K4,closeModal:s.Mr,jumpToH5:Ee.G,request:Ze.W,sourceCode:"Flight",pageName:"FlightInterBooking",safeArea:(0,y.R2)(),screenWidth:(0,y.So)().screenWidth},promiseRequest:h,departureDate:l,insuranceParamString:a,insuranceRuleSwitch:c,passengerTotalCount:e,selectPassengerList:r,children:function(e){var n=e.selected,o=e.selectedInsurances,i=e.showInsuranceRetainsPop;return(0,_.jsx)(Ve.ZP,{passengerList:t,isIntl:!0,children:function(e){var t=e.applicant,a=e.onOpenApplicantListPopup,s=e.onClickApplicantNotice;return(0,_.jsx)(F.ZP,{selected:n,selectedInsurances:o,selectedPassengers:r,insuranceRuleSwitch:c,showInsuranceRetainsPop:i,applicant:t,children:function(e){var n=e.showNonageInsure;return(0,_.jsx)(f.NonageInsureComponent,{isIntl:!0,showNonageInsure:n,applicantName:t&&(0,Fe.Ob)(t),onOpenApplicantListPopup:a,onClickApplicantNotice:(0,f.trackFn)("insuranceArea--onClickApplicantNotice--f0697",s)})}})}})}})})}):null},Me=(0,i.memo)(qe),Be=Me,Ge=n(49574),He=n(34439),Ye=n(51491),Ue={ADULT:"\u6210\u4eba",CHILD:"\u513f\u7ae5",CHILD_BOOK_ADULT:"\u513f\u7ae5 (\u6210\u4eba\u7968)",INFANT:"\u5a74\u513f",INFANT_BOOK_ADULT:"\u5a74\u513f (\u6210\u4eba\u7968)",INFANT_BOOK_CHILD:"\u5a74\u513f (\u513f\u7ae5\u7968)"},Ke=function(e,t,n){var r=n.policy,o=t[e]||0;if(o>0&&r){var i=r.totalPrices,a=void 0===i?{}:i,s=r.totalTaxes,c=void 0===s?{}:s,l=r.discountAmount;"CHILD"===e&&(null!==a&&void 0!==a&&a.CHILD||null===a||void 0===a||!a.CHILD_BOOK_ADULT||(e="CHILD_BOOK_ADULT")),"INFANT"===e&&(null!==a&&void 0!==a&&a.INFANT||(e=null!==a&&void 0!==a&&a.CHILD?"INFANT_BOOK_CHILD":"INFANT_BOOK_ADULT"));var d=a[e]||0,u="ADULT"===e&&l>0?d+l:d,p=(c[e]||0)*o,g=d+(c[e]||0),m={name:"".concat(n.TYPES[e]),type:"FLIGHT",total:"\xa5".concat(g),count:"\xd7".concat(o,"\u4eba"),subItems:[{name:"\u673a\u7968",price:"\xa5".concat(u),type:"FLIGHT"}]};if(m.subItems.push({name:"\u7a0e\u8d39",price:"\xa5".concat(c[e]||0),type:"FLIGHT_ADDITION"}),"ADULT"===e&&l&&l>0){var h={name:"\u7acb\u51cf",price:"-\xa5".concat(l),type:"FLIGHT_DISCOUNT"};m.subItems.push(h)}n.items.push(m),n.xTotal+=p,n.total+=p+d*o}},Xe=function(e,t){null===t||void 0===t||t.forEach((function(t){var n=t.typeName,r=t.salePrice,o=t.count;o&&(e.items.push({name:n,total:"\xa5".concat(r),count:"\xd7".concat(o,"\u4eba"),type:"X_INSURANCE"}),e.total+=r*o)}))},Je=function(e,t){var n=t||{},r=n.checked,o=n.totalPrice,i=n.totalWeight;if(r&&o){var a={name:"\u884c\u674e\u989d(".concat(i,"KG)"),total:"\xa5".concat(o),count:"",type:"LUGGAGE"};e.items.push(a),e.total+=o}},Qe=function(e){var t=e.policy,n=e.passengerCount,r=e.selectedCoupons,o=e.selectedInsurances,i=e.selectedLuggage,a={policy:t,items:[],itemsNew:[],total:0,xTotal:0,TYPES:Ue};return Ye.IT.forEach((function(e){return Ke(e,n,a)})),Xe(a,o),Je(a,i),a.total&&(null===r||void 0===r||r.forEach((function(e){var t=e.deductionAmount,n=void 0===t?0:t,r={name:e.name,total:"-\xa5".concat(n),type:"X_COUPON"};a.items.push(r),a.total-=n}))),a},We=n(32180)["window"],ze=function(e){var t=e.children,n=e.userId,r=e.policy,a=e.selectedCoupons,s=e.passengerCount,c=e.selectedInsurances,l=e.selectedLuggage,d=e.initOrderCheckResult,u=e.termsSwitch,p=(0,i.useState)(!1),g=(0,o.Z)(p,2),m=g[0],h=g[1],f=(0,i.useState)(!1),v=(0,o.Z)(f,2),T=v[0],I=v[1],y=(0,i.useState)(!1),k=(0,o.Z)(y,2),x=k[0],N=k[1],w=(0,i.useCallback)((function(e){m?((0,Y.jq)("Order RESERVATION_CHECK check ok"),e({result:1})):((0,Y.jq)("Order RESERVATION_CHECK check failed"),u?N(!0):I(!0),e({result:0}))}),[m,u]);(0,C.Up)(C.O4.RESERVATION_CHECK,w);var P=(0,i.useCallback)((function(e){h(e)}),[]),_=(0,i.useMemo)((function(){var e=Qe({policy:r,passengerCount:s,selectedCoupons:a,selectedInsurances:c,selectedLuggage:l});return(0,Y.jq)("BOOKING_PRICE_CHANGE",{items:e.items,total:e.total}),e}),[s,r,a,l,c]),j=(0,i.useCallback)((function(){try{(0,Y.jq)("taro_goto_payment"),d()}catch(e){(0,He.u9)(e)}}),[d,n]),b=(0,i.useCallback)((function(){I(!1),h(!0),setTimeout((function(){j()}),50)}),[j]),L=(0,i.useCallback)((function(){(0,Y.jq)("payment_go_to_payment",{desc:"\u53bb\u652f\u4ed8\uff0c\u53d1\u8d77\u521b\u5355\u68c0\u67e5",time:(new We.Date).getTime()}),m||!T||u?j():b()}),[j,m,T,b]);return t({checkReservationBtn:P,priceDetail:_,reservationCheck:m,setReservationCheck:h,goToPayment:L,reservationAnimate:T,setReservationAnimate:I,agreeAndContinue:b,isForceShowScheduledDoubleCheckPop:x,setForceShowScheduledDoubleCheckPop:N})},$e=(0,i.memo)(ze),et=$e,tt=n(79301),nt=n(95308),rt=n(57042),ot=n(24460),it=n(81876),at=n(21867),st=n(86066),ct=n(4430),lt=n(555),dt=n(95329),ut=n(27201),pt=n(24873),gt=n(33699),mt=n(24094),ht=n(32408),ft=n(25651),vt=n(51482),Tt=n(10975),It=n(87108),yt=n(20092),kt=n(5709),Ct=n(43762),xt=n(56027),Nt=n(32180)["window"],wt={middle:0,booking:1,booking_retain:3},Pt=function(e,t){return(null===e||void 0===e?void 0:e.reduce((function(e,n){var r,o=n.packageString,i=n.productCode,a=n.typeName,s=n.typeId,c=n.priceDetails,l=n.minUnit,d=n.extensions,u=n.passengerIds,p=n.channelType,g=(0,f.findCNYPrice)(c)*l,m=(null===t||void 0===t?void 0:t.filter((function(e){return u.includes(e.id)})).reduce((function(e,t){var n=t.passengerType,r=e[n]?e[n]+1:1;return(0,R.Z)((0,R.Z)({},e),{},(0,q.Z)({},n,r))}),{}))||{};return[].concat((0,$.Z)(e),(0,$.Z)((null===(r=Object.keys(m))||void 0===r?void 0:r.map((function(e){var t,n=m[e];return{packageTypeId:Number((null===(t=d.find((function(e){var t=e.type;return"pkgtype"===t})))||void 0===t?void 0:t.content)||0),packageType:0,segno:0,packageID:s,packageName:a,packageSubType:0,packageCode:i,passengerIdList:[],passengerType:yt.xe[e],currency:"",price:g,count:n,amount:n*g,pageLocation:wt[p]||1,extendParams:o,userSelecte:0}})))||[]))}),[]))||[]},_t=function(e){var t=e||{},n=t.checked,r=t.passengers,o=void 0===r?[]:r;if(n){var i=f.R.pipe(f.R.map((function(e){var t=e.bagList,n=e.id,r=e.passengerType;return f.R.map((function(e){var t=e.sprice,o=e.pkgstr;return{pkgstr:o,sprice:t,id:n,passengerType:r}}),t)})),f.R.flatten)(o),a=f.R.pipe(f.R.map((function(e){return e.pkgstr})),f.R.uniq)(i);return f.R.map((function(e){var t=f.R.filter((function(t){return t.pkgstr===e}),i),n=t.length,r=(null===t||void 0===t?void 0:t[0])||{},o=r.sprice,a=r.passengerType;return{pageType:2,packageTypeId:999,packageType:0,packageSubType:999,passengerType:yt.xe[a],packageID:"",packageCode:"",extendParams:e,packageName:"\u6258\u8fd0\u884c\u674e\u989d",currency:"",price:o,count:n,amount:o*n,userSelecte:n,passengerIdList:t.map((function(e){var t=e.id;return{passengerID:t}})),checkInSelectedList:[],pageLocation:0}}),a)}return[]},jt=function(e){return(e||[]).map((function(e){var t,n=e.extensions,r=e.passengerIds;return{packageTypeId:Number((null===(t=n.find((function(e){return"pkgtype"===e.type})))||void 0===t?void 0:t.content)||0),packageType:0,settingDetailList:r.map((function(e){return{detailinfo:e,flag:0,extendString:""}}))}}))},bt=function(e){var t=e||{},n=t.checked,r=t.passengers,o=void 0===r?[]:r;return n?[{packageTypeId:15,packageType:0,settingDetailList:o.map((function(e){return{detailinfo:null===e||void 0===e?void 0:e.id,flag:0,extendString:""}}))}]:[]},Lt=function(e){return(null===e||void 0===e?void 0:e.reduce((function(e,t){var n=t.packageString;return[].concat((0,$.Z)(e),[{extendType:12,extendParams:n},{extendType:999,extendParams:n}])}),[]))||[]},Rt=function(e){return(e||[]).map((function(e){return{extendType:999,extendParams:(null===e||void 0===e?void 0:e.extendParams)||""}}))},St=function(e){if(!e)return[];var t=e.document,n=e.birth;return[{extendType:200,extendParams:(0,kt.h)(JSON.stringify({name:(0,Fe.Ob)(e),cardType:(0,Ct.hs)(null===t||void 0===t?void 0:t.type),cardNo:null===t||void 0===t?void 0:t.no,birth:(0,f.dayjs)(n).format("YYYYMMDD"),age:(0,xt.r)(n,new Nt.Date)}))}]};function At(e){var t,n=e.selectedPassengers,r=void 0===n?[]:n,o=e.selectedInsurances,i=e.selectedLuggage,a=e.policyHolder,s=null===(t=Nt)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.href,c=Pt(o,r),l=_t(i),d=jt(o),u=bt(i),p=Lt(o),g=Rt(l),m=St(a),h=[].concat((0,$.Z)(d),(0,$.Z)(u)),f=[].concat((0,$.Z)(c),(0,$.Z)(l)),v=[{extendType:1100,extendParams:s}].concat((0,$.Z)(m),(0,$.Z)(p),(0,$.Z)(g));return{packageList:f,packageSettingList:h,extendInfo:v}}var Zt=function(e){var t,n,r;return{contactName:(null===e||void 0===e?void 0:e.name)||"",contactPhoneType:1,contactPhone:(null===e||void 0===e?void 0:e.mobile)||"",email:(null===e||void 0===e?void 0:e.email)||"",contactCardNumber:(null===e||void 0===e?void 0:e.idCardNo)||"",countryCode:(null===e||void 0===e||null===(t=e.region)||void 0===t?void 0:t.code)||"86",firstName:"",lastName:"",contractCardType:1,gender:-1,destinationAddressInfo:{countryCode:"",stateCode:(null===e||void 0===e||null===(n=e.city)||void 0===n||null===(n=n.split(" / "))||void 0===n?void 0:n[0])||"",cityName:(null===e||void 0===e||null===(r=e.city)||void 0===r||null===(r=r.split(" / "))||void 0===r?void 0:r[1])||"",address:(null===e||void 0===e?void 0:e.location)||"",zipCode:(null===e||void 0===e?void 0:e.zipCode)||""}}},Dt=function(e){return e.map((function(e){return{segmentNo:0,ticketType:e.psgtype,price:e.price,discount:e.discount,fuelCharge:e.fuel,tax:e.tax}}))},Et=function(e){return e.map((function(e){var t,n,r,o,i,a;return{passengerID:Number(e.id),passengerName:(null===(t=e.name)||void 0===t?void 0:t.chineseName)||"",passengerNameEN:(null===(n=e.name)||void 0===n?void 0:n.englishName)||"",passengerEType:yt.xe[e.passengerType],birthday:e.birth,cardEType:0,cardNumber:(null===(r=e.document)||void 0===r?void 0:r.no)||"",genderEType:"FEMALE"===e.gender?0:"MALE"===e.gender?1:2,nationality:(null===(o=e.region)||void 0===o?void 0:o.acronym)||"",fFPNoInfo:[],promptNum:0,verifyResult:"",iDCardTimelimit:(null===(i=e.document)||void 0===i||null===(i=i.expired)||void 0===i?void 0:i.replace(/-/g,""))||"",contactPhone:e.phone.mobile||"",countryCode:e.phone.code||"",flag:0,infoId:Number(e.id),passengerRegisterInfo:{},mutilCardList:[],cardNewType:(0,Ct.hs)(null===(a=e.document)||void 0===a?void 0:a.type)||0,validateToken:"",puMutilCardList:[]}}))},Vt=function(e){return(e||[]).map((function(e){var t=e.deductionAmount,n=e.extension;return{promotionCategory:1,promotionID:0,promotionType:7,passengerType:0,currency:"",price:t,count:1,amount:t,extendInformation:n}}))},Ot=function(e){var t=e.policy,n=e.sections,r=void 0===n?[]:n,o=t||{},i=o.prdid,a=o.polid;return r.map((function(e,t){return{segmentNo:t,productId:i,policyId:a}}))},Ft=function(e){return e.map((function(e){return{segmentNo:0,passengerID:e.id,ticketType:yt.xe[e.ticketType||"ADULT"]}}))},qt=function(e){var t=e.tripType,n=e.checkNo,r=e.price;return{tripType:"ONE_WAY"===t?1:2,orderID:0,isAnonymous:!1,checkNo:n,price:r,orderStatus:1,deliverInfoID:0}},Mt=function(){var e=(0,ut.G)()||{},t=e.allianceid,n=void 0===t?"":t,r=e.sid,o=void 0===r?"":r,i=e.ouid,a=void 0===i?"":i,s=(0,Ge.eC)();return{allianceInfo:{allianceNewID:String(n),sNewID:String(o),oUID:String(a)},rmsToken:s}},Bt=function(e){ht.Y.orderRequest&&e&&(ht.Y.orderRequest.flag&e)!==e&&(ht.Y.orderRequest.flag+=e)},Gt=function(e,t){var n=e.map((function(e){return String(e.passengerID)})).join("|"),r=null===t||void 0===t?void 0:t.map((function(e){return String(e.passengerID)})).join("|");if(r!==n){var o,i=(null===ht.Y||void 0===ht.Y||null===(o=ht.Y.orderRequest)||void 0===o?void 0:o.flag)||yt.Vm.XFailAlert;(i&yt.Vm.PassengerVerify)===yt.Vm.PassengerVerify&&Bt(yt.Vm.ResetPassengerVerify)}},Ht=function(){var e=(0,nt.Z)((0,tt.Z)().mark((function e(t,n,r){var i,a,s,c,l,d,u,p,g,m,h,v,T,I,y,k,C,x,N,w,P,_,j,b,L,S,A,Z;return(0,tt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.tripType,c=t.detail,l=t.priceDetail,d=t.selectedCoupons,u=t.selectedPassengers,p=t.selectedInsurances,g=t.selectedLuggage,m=c.chkno,h=c.policy,v=l.total,T=h||{},I=T.price,y=void 0===I?[]:I,k=(0,Ge.I1)(),C=(0,Fe.xk)(),null!==u&&void 0!==u&&u.length){e.next=9;break}return(0,Ae.jq)("Order passenger check failed in create, none psg"),e.abrupt("return",(0,f.showToast)("\u8bf7\u9009\u62e9\u4e58\u673a\u4eba, \u82e5\u5df2\u9009\u62e9\u8bf7\u91cd\u65b0\u52fe\u9009"));case 9:if(x=At({selectedPassengers:u,policyHolder:C,selectedInsurances:p,selectedLuggage:g}),N=Vt(d),w=Et(u),P=Dt(y),_=Zt(mt.ZP.data.contact),j=Mt(),b=qt({tripType:s,checkNo:m,price:v}),L=Ot(c),S=Ft(u),!L.some((function(e){return!(null!==e&&void 0!==e&&e.productId)&&!(null!==e&&void 0!==e&&e.policyId)}))){e.next=21;break}return(0,Ae.jq)("Order passenger check failed in create, none policyId and productId"),e.abrupt("return",(0,f.showToast)("\u670d\u52a1\u5668\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 21:return Gt(w,null===(i=ht.Y.orderRequest)||void 0===i?void 0:i.passengerList),A=(0,gt.Z)(),e.t0=R.Z,e.t1=(0,R.Z)({},x),e.t2={},e.t3=[],e.t4=L,e.t5=S,e.t6=N,e.t7=w,e.t8=P,e.t9=_,e.t10=b,e.t11=j,e.t12=(null===ht.Y||void 0===ht.Y||null===(a=ht.Y.orderRequest)||void 0===a?void 0:a.flag)||yt.Vm.XFailAlert,e.next=38,k;case 38:e.t13=e.sent,e.t14={name:"market_awake_data",value:e.t13},e.t15={name:"insuranceToken",value:A},e.t16=[e.t14,e.t15],e.t17={duplicateOrderIDList:e.t3,segmentList:e.t4,passengerSettingList:e.t5,promotionList:e.t6,passengerList:e.t7,priceList:e.t8,contactInfo:e.t9,orderInfo:e.t10,miscInfo:e.t11,flag:e.t12,extension:e.t16},Z=ht.Y.orderRequest=(0,e.t0)(e.t1,e.t2,e.t17),pt.m_.promise(Z).then((function(e){if("Success"===(null===e||void 0===e?void 0:e.responseStatus.Ack)){console.log(e);var t=e||{},i=t.orderList,a=void 0===i?[]:i,s=t.payToken,c=void 0===s?"":s,l=t.externalNo,d=void 0===l?"":l,u=t.reminder,p=void 0===u?"":u,g=a.map((function(e){return null===e||void 0===e?void 0:e.orderID})),m=(0,o.Z)(g,1),h=m[0];(0,ut.c)(h),ht.Y.orderResult=(0,R.Z)((0,R.Z)({},e),{},{orderIds:g,payToken:c,requestId:d,busType:"102",payLink:p}),n&&n()}else r&&r()})).catch((function(e){console.log(e),r&&r()}));case 45:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Yt=function(e,t,n,r,o,i){var a=(null===e||void 0===e?void 0:e.policy)||{},c=a.psgType,l=c||{},d=l.searchAdult,u=void 0===d?1:d,p=l.searchChild,g=void 0===p?0:p,m=l.searchBaby,h=void 0===m?0:m,f={ADULT:u,CHILD:g,INFANT:h};(0,Ae.jq)("order_result_dialog_button_click",{type:n}),n!==yt.TI.passengerEdit&&i&&(0,s.Mr)(i),n===yt.TI.jumpToMiddlePage?(0,Ge.n)():n===yt.TI.jumpToDetailPage&&r.length?1===r.length?(0,lt.x)(r[0]):ct.L.jump():n===yt.TI.jumpToListPage?vt.MQ.jump((0,R.Z)((0,R.Z)({},(0,Tt.Q)("INTERNATIONAL","first",f)),{},{isFrom:"fromBooking",type:ft.F.reLaunch})):n===yt.TI.jumpToHomePage?vt.pW.jump({type:"reLaunch"}):n===yt.TI.retryOrder?t():n===yt.TI.showFlightTipLayer?(Bt(yt.Vm.AcceptRefundChange),t()):n===yt.TI.alert||(n===yt.TI.jumpToMiddlePageAndResearch||n===yt.TI.jumpToMiddlePageAndRefresh?(0,Ge.n)():n===yt.TI.passengerConfirm?(Bt(yt.Vm.PassengerVerify),t()):n===yt.TI.passengerEdit&&o&&(0,It.vJ)({id:"".concat(o),isIntl:"".concat(1)}))},Ut=n(8407),Kt=n(55590),Xt=n(66792),Jt=n(22722),Qt={"order-content-popup":"PassengerError-module_JtlBF",title:"PassengerError-module_F92qI","error-describe":"PassengerError-module_Gl0Px","passenger-list":"PassengerError-module_eC8_m","passenger-error":"PassengerError-module_p2RuY","error-left":"PassengerError-module_xDx4d","error-list":"PassengerError-module_aqseZ","text-left":"PassengerError-module_Qz5sk","high-light":"PassengerError-module_jFFwn","text-right":"PassengerError-module_tZYmp","error-right":"PassengerError-module_hGKLm","error-right-new":"PassengerError-module_GKLH1",mask:"PassengerError-module_GsBGy"},Wt=function(e){var t=e.title,n=e.errorPassengers,r=e.psgType,a=e.goToPayment,s=e.callback,c=e.allCheckedCallBack,l=(0,C.a8)(C.rM);return(0,i.useEffect)((function(){var e=n.length&&n.every((function(e){return(l||[]).includes(String(null===e||void 0===e?void 0:e.passengerId))}));e&&setTimeout((function(){c()}),100)}),[l,n,c]),(0,_.jsxs)(v.View,{className:Qt["order-content-popup"],children:[(0,_.jsx)(v.View,{className:Qt.title,children:"\u6e29\u99a8\u63d0\u9192"}),(0,_.jsx)(v.View,{className:Qt["error-describe"],children:t}),(0,_.jsx)(T.Z,{className:Qt["passenger-list"],scrollY:!0,id:"id_98528",onScroll:(0,f.trackFn)("id_98528"),children:n.map((function(e,t){var i=e||{},c=i.passengerId,d=i.passengerName,u=i.passengerNameEN,p=i.errorList,g=null===l||void 0===l?void 0:l.includes(String(c));return(0,_.jsxs)(v.View,{className:Qt["passenger-error"],children:[(0,_.jsxs)(v.View,{className:Qt["error-left"],children:[(0,_.jsxs)(v.View,{className:Qt["error-list"],children:[(0,_.jsx)(v.Text,{className:Qt["text-left"],children:"\u59d3\u540d"}),(0,_.jsx)(v.Text,{className:"".concat(Qt["high-light"]," ").concat(Qt["text-right"]),children:d||u})]},"-1"),p.map((function(e,t){var n=e.split("|"),r=(0,o.Z)(n,2),i=r[0],a=r[1];return(0,_.jsxs)(v.View,{className:Qt["error-list"],children:[(0,_.jsx)(v.Text,{className:Qt["text-left"],children:i}),(0,_.jsx)(v.Text,{className:Qt["high-light"],children:a})]},t)}))]}),(null===n||void 0===n?void 0:n.length)>1&&!g&&(0,_.jsx)(v.View,{className:Qt["error-right"],onClick:(0,f.trackFn)("id_98528--"+t+"--7a0e3",(function(){return s(r,a,yt.TI.passengerEdit,[],c)})),children:"\u53bb\u4fee\u6539"}),(null===n||void 0===n?void 0:n.length)>1&&g&&(0,_.jsx)(v.View,{className:Qt["error-right-new"],children:"\u5df2\u4fee\u6539"})]},t)}))}),(null===n||void 0===n?void 0:n.length)>1&&(0,_.jsx)(v.View,{className:Qt.mask})]})},zt=(0,i.memo)(Wt),$t=zt,en={"popup-container":"handleInterActionType-module__ZDJi","order-icon":"handleInterActionType-module_qEehK",icon:"handleInterActionType-module_ahDBU","error-describe":"handleInterActionType-module_MbjhS","order-content":"handleInterActionType-module_smZW8","content-list":"handleInterActionType-module_CKSfU","title-text":"handleInterActionType-module_ygBqY","content-text":"handleInterActionType-module_PEyYw","order-error-popup-bottom":"handleInterActionType-module_Fd7DF"},tn=function(e){var t,n,r,o=e.data,i=e.psgType,a=e.oids,c=e.goToPayment,l=o||{},d=l.resultAction,u=l.resultMessage,p=l.cartridgeList,g=l.passengerList,m=l.actionSetting,h="",T=0,I="",y=u?"":"\u670d\u52a1\u5668\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01",k=!1,C=d,x=[],N={Nationality:"\u56fd\u7c4d",Gender:"\u6027\u522b",Birthday:"\u51fa\u751f\u65e5\u671f",Name:"\u59d3\u540d",SurName:"\u59d3\u540d",GivenName:"\u59d3\u540d"},w={CardNo:"cardNumber",Nationality:"nationality",Gender:"genderEType",Birthday:"birthday",Name:"passengerName|passengerNameEN",SurName:"passengerNameEN|passengerName",GivenName:"passengerNameEN|passengerName"};if(t=(0,_.jsx)(v.View,{className:en["order-content"],children:u}),[yt.TI.phoneCall,yt.TI.alert,yt.TI.jumpToHomePage,yt.TI.jumpToListPage,yt.TI.jumpToMiddlePage,yt.TI.jumpToDetailPage,yt.TI.jumpToMiddlePageAndRefresh,yt.TI.jumpToMiddlePageAndResearch].includes(C)&&(I="\u786e\u5b9a"),C===yt.TI.toast)n=!0,y=u?"\u8ba2\u5355\u63d0\u4ea4\u5931\u8d25":"\u8ba2\u5355\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4";else if(C===yt.TI.showFlightTipLayer){var P=7,j=p.filter((function(e){return e.cartridgeType===P}))[0],b=(null===j||void 0===j?void 0:j.contentlist)||[];h="\u518d\u60f3\u60f3",T=yt.TI.alert,I="\u7ee7\u7eed\u9884\u8ba2",y="\u8bf7\u4ed4\u7ec6\u6838\u5bf9\u4ee5\u4e0b\u4fe1\u606f",n=!0,t=(0,_.jsx)(v.View,{className:en["order-content"],children:b.map((function(e,t){return(0,_.jsxs)(v.View,{className:en["content-list"],children:[(0,_.jsx)(v.Text,{className:en["title-text"],children:e.cartridgeTitle}),(0,_.jsx)(v.Text,{className:en["content-text"],children:e.cartridgeContent})]},t)}))})}else if(C===yt.TI.passengerConfirm){var L=ht.Y.orderRequest||{},R=L.passengerList,S=void 0===R?[]:R;k=(null===g||void 0===g?void 0:g.length)>1,null===g||void 0===g||g.forEach((function(e){var t=e.passengerID,n=e.verifyMessage,o=e.verifyFieldInfos;r=t,y=n;var i=S.find((function(e){return e.passengerID===t}))||{},a=[];null===o||void 0===o||o.forEach((function(e){var t="",n="",r=e.fieldName,o=e.cardType,s=w[r];"CardNo"===r?(t=(0,Ct.LU)(Number(o))||"",n=i[s]):(t=N[r],n="Gender"===r?1===i[s]?"\u7537":"\u5973":["Name","SurName","GivenName"].includes(r)?i[s.split("|")[0]]||i[s.split("|")[1]]:i[s]),a.push(t+"|"+n)})),x.push({passengerId:t,passengerName:null===i||void 0===i?void 0:i.passengerName,passengerNameEN:null===i||void 0===i?void 0:i.passengerNameEN,errorList:a})})),h="\u53bb\u4fee\u6539",T=yt.TI.passengerEdit,I="\u786e\u8ba4\u65e0\u8bef",k&&(y=u),null!==x&&void 0!==x&&x.length||(h="\u53bb\u6838\u5bf9",T=yt.TI.alert,y="\u5df2\u9009\u4e58\u5ba2\u4fe1\u606f\u53ef\u80fd\u6709\u8bef\uff0c\u8bf7\u6838\u5bf9\uff01",I="\u786e\u8ba4\u65e0\u8bef")}else if(C===yt.TI.common){var A=m||{},Z=A.buttonInfo,D=void 0===Z?[]:Z;D.forEach((function(e,t){var n,r=e||{},o=r.buttonDirect,i=r.buttonName;switch(o){case yt.ik.stayCurrentPage:n=yt.TI.alert;break;case yt.ik.jumpToPassengerSelectPage:n=yt.TI.alert;break;case yt.ik.jumpToListPage:n=yt.TI.jumpToListPage;break;case yt.ik.jumpToPayPage:n=yt.TI.retryOrder;break;case yt.ik.jumpToMiddlePage:n=yt.TI.jumpToMiddlePage;break;default:break}1===D.length||1===t?(C=n,I=i):0===t&&(h=i,T=n)}))}(0,Y.jq)("order_result_failure_errorcode02",{title:y,actionType:C});var E=(0,s.K4)({mask:{enableClose:!1},autoClose:C!==yt.TI.passengerConfirm,className:n?en["order-error-popup-bottom"]:"",content:(0,_.jsx)(v.View,{catchMove:!0,className:(0,f.classnames)((0,q.Z)({},en["popup-container"],n)),children:C===yt.TI.passengerConfirm?(0,_.jsx)($t,{title:y,errorPassengers:x,psgType:i,goToPayment:c,callback:Yt,allCheckedCallBack:function(){Yt(i,c,yt.TI.passengerConfirm,a,void 0,E)}}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v.View,{className:en["error-describe"],children:y}),t]})}),buttons:[].concat((0,$.Z)(h&&T&&!k?[{text:h,class:"default",callback:function(){Yt(i,c,T,a,r,E)}}]:[]),[{text:I&&I.length>4?"\u77e5\u9053\u4e86":I||"\u77e5\u9053\u4e86",class:"primary",callback:function(){Yt(i,c,C,a,void 0,E)}}]),position:n?"bottom":void 0,animationClassName:"animate__animated animate__faster animate__zoomIn"})},nn=n(30864),rn={"popup-container":"IntlRepeat-module_k8PVK","order-title-inter":"IntlRepeat-module_LSgF9",orderRepeat:"IntlRepeat-module_gYQGd",oldOrderInfo:"IntlRepeat-module_yhMxn",infoList:"IntlRepeat-module_wMLn_",flightDetail:"IntlRepeat-module_z0Ubk",detailItem:"IntlRepeat-module_NBioi",route:"IntlRepeat-module_SLWjO",detail:"IntlRepeat-module_jILVc",days:"IntlRepeat-module_mxTKj",marginTop:"IntlRepeat-module_dIN0L",orderState:"IntlRepeat-module_wWWo3",iconArrowRight:"IntlRepeat-module_mw_rV",repeatTip:"IntlRepeat-module_Z61DS","order-error-popup-bottom":"IntlRepeat-module_vdbcK"},on=n(32180)["window"],an=function(e){var t,n,r=e.resultMessage,o=e.duplicateOrderIDList,i=[],a=0,s=null===o||void 0===o||null===(t=o[0])||void 0===t?void 0:t.orderID;null===o||void 0===o||o.push([]),null===o||void 0===o||o.forEach((function(e,t){var n=e.orderID;n!==s&&(i.push(o.slice(a,t)),a+=1),s=n}));var c=null===r||void 0===r||null===(n=r.replace("[","<HL>"))||void 0===n?void 0:n.replace("]","</HL>");return(0,_.jsxs)(v.View,{catchMove:!0,className:rn["popup-container"],children:[(0,_.jsx)(v.View,{className:rn["order-title-inter"],children:"\u884c\u7a0b\u51b2\u7a81\u63d0\u793a"}),(0,_.jsxs)(v.View,{className:rn.orderRepeat,children:[(0,_.jsx)(v.View,{className:rn.oldOrderInfo,children:!(null===i||void 0===i||!i.length)&&(null===i||void 0===i?void 0:i.map((function(e,t){var n=(null===e||void 0===e?void 0:e[0])||{},r=n.payStatus,o=n.orderID;return(0,_.jsxs)(v.View,{className:rn.infoList,onClick:(0,f.trackFn)(t+"--10eb0",(function(){return(0,lt.x)(o)})),children:[(0,_.jsx)(v.View,{className:rn.flightDetail,children:null===e||void 0===e?void 0:e.map((function(e,t){var n=e||{},r=n.departCityName,o=n.arriveCityName,i=n.departDate,a=n.arriveDate,s=n.flightNo,c=null!==i&&void 0!==i&&i.includes("Date")?(0,f.dayjs)(new on.Date(parseInt(i.slice(6,19)))).format("YYYY-MM-DD HH:mm:ss"):i,l=null!==a&&void 0!==a&&a.includes("Date")?(0,f.dayjs)(new on.Date(parseInt(a.slice(6,19)))).format("YYYY-MM-DD HH:mm:ss"):a,d=(0,f.dayjs)(l).diff((0,f.dayjs)(c),"day");return(0,_.jsxs)(v.View,{className:"".concat(rn.detailItem," ").concat(t>=1?rn.marginTop:null),children:[(0,_.jsx)(v.View,{className:rn.route,children:r+" \u21c0 "+o}),(0,_.jsxs)(v.View,{className:rn.detail,children:["".concat(s," ").concat(c.slice(5,10)," ").concat(c.slice(11,16),"\u81f3").concat(l.slice(11,16))," ",!!d&&(0,_.jsxs)(v.View,{className:rn.days,children:["+",d,"\u5929"]})]})]},t)}))}),(0,_.jsxs)(v.View,{className:rn.orderState,children:[(0,_.jsx)(v.View,{style:2===r?{color:"#00AE73"}:{},children:1===r?"\u5f85\u652f\u4ed8":"\u5df2\u652f\u4ed8"}),(0,_.jsx)(v.View,{className:rn.iconArrowRight})]})]},t)})))}),(0,_.jsx)(v.View,{className:rn.repeatTip,dangerouslySetInnerHTML:{__html:c}})]})]})},sn=an,cn=function(e){var t=e.resultMessage,n=e.duplicateType,r=e.duplicateOrderIDList,o=e.cancelOrderIDList,i=e.buttons;(0,Y.$J)("popup_order_repeat_show"),(0,s.K4)({mask:{enableClose:!1},className:rn["order-error-popup-bottom"],content:(0,_.jsx)(sn,{resultMessage:t,duplicateType:n,duplicateOrderIDList:r,cancelOrderIDList:o}),buttons:i,position:"bottom",animationClassName:"animate__animated animate__faster animate__zoomIn"})},ln=n(32180)["window"],dn=["","ADULT","CHILD","INFANT"],un=function(e){(0,at.Z)(n,e);var t=(0,st.Z)(n);function n(){var e;(0,rt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,it.Z)(e),"state",{popup:{PRICE_DETAIL:!1,PRICE_CHANGE:!1},priceChangeInfo:{},showPayLoading:!1,qtePriceInfo:[]}),(0,q.Z)((0,it.Z)(e),"timePromoteText",(Math.round(10*Math.random())%2?"2\u5206\u949f\u8f7b\u677e\u5b8c\u6210\u4e0b\u5355":"10\u5206\u949f\u5185\u5b8c\u6210\u4e0b\u5355")+"\uff0c\u5373\u53ef\u9501\u5b9a\u4f4e\u4ef7"),(0,q.Z)((0,it.Z)(e),"onOpenPopup",(function(t){Jt.Z.onOpenPopup(t,(0,it.Z)(e))})),(0,q.Z)((0,it.Z)(e),"onClosePopup",(function(t){Jt.Z.onClosePopup(t,(0,it.Z)(e))})),(0,q.Z)((0,it.Z)(e),"onSwitchPopup",(function(t){var n=e.state.popup;(0,Y.jq)("inter_price_detail_switch",{desc:(n.PRICE_DETAIL?"\u5173\u95ed":"\u6253\u5f00")+"\u4ef7\u683c\u660e\u7ec6\u6d6e\u5c42",show:n.PRICE_DETAIL}),Jt.Z.onSwitchPopup(t,(0,it.Z)(e))})),(0,q.Z)((0,it.Z)(e),"orderCreateTime",0),(0,q.Z)((0,it.Z)(e),"clickPayment",(0,f.throttle)((function(){var t=e.props.goToPayment;(0,Y.jq)("inter_click_payment",{time:(new ln.Date).getTime(),desc:"\u70b9\u51fb\u53bb\u652f\u4ed8"}),e.onClosePopup("PRICE_DETAIL"),t()}))),e}return(0,ot.Z)(n,[{key:"componentDidUpdate",value:function(e){var t,n=this.props.orderCheck||{},r=n.pass;(null===(t=e.orderCheck)||void 0===t?void 0:t.pass)!==r&&(1===r?this._goToPayment():-1===r&&this._orderCheckFailure())}},{key:"_orderCheckFailure",value:function(){var e=this.props.orderCheck,t=e||{},n=t.fields,r=t.errors,o=void 0===r?[]:r,i=t.callbacks,a=void 0===i?[]:i;(0,Y.jq)("order_check_failure",{fields:n,errors:o}),o.length?"\u8bf7\u5148\u9605\u8bfb\u5e76\u52fe\u9009\u534f\u8bae"===o[0]?((0,Y.bd)("S_Flt_N_Confirm_mustread_toast_t"),this.onClosePopup("PRICE_DETAIL")):(0,K.w)({content:o[0],buttons:[{text:"\u77e5\u9053\u4e86",callback:function(){}}]}):a.length&&a.forEach((function(e){e&&e()}))}},{key:"_goToPayment",value:function(){var e=(0,nt.Z)((0,tt.Z)().mark((function e(t){var n,r,o,i,a,s,c,l,d,u,p,g,m,h,f,v,T=this;return(0,tt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.props,r=n.tripType,o=n.orderCheck,i=n.selectedPassengers,a=n.selectedCoupons,s=n.detail,c=n.registerMemberType,l=n.priceDetail,d=n.selectedLuggage,u=n.selectedInsurances,p=n.freeX,g=n.initPassengerCheck,m=o||{},h=m.fields,f=void 0===h?{}:h,g&&g(),0!==Object.values(f).filter((function(e){return!e})).length){e.next=17;break}if((0,Y.jq)("inter_order_check_success"),null!==u&&void 0!==u&&u.length&&(0,Y.jq)("inter_order_create_has_insurance",{length:null===u||void 0===u?void 0:u.length}),this.setState({showPayLoading:!0}),t){e.next=15;break}return e.next=10,(0,dt.g6)(s,i,t);case 10:if(v=e.sent,null===v||void 0===v||!v.result){e.next=15;break}return this.setState({showPayLoading:!1}),this.handleRepeatOrder(v),e.abrupt("return");case 15:this.orderCreateTime=(new ln.Date).getTime(),Ht({tripType:r,priceDetail:l,selectedCoupons:a,detail:s,selectedPassengers:i,selectedInsurances:u,selectedLuggage:d,freeX:p},(function(){(0,Y.jq)("inter_order_create_success",{registerMemberType:c}),T._orderInterCreateCallback(ht.Y.orderResult,!0)}),(function(){(0,Y.jq)("inter_order_create_failure",{registerMemberType:c}),T._orderInterCreateCallback(void 0,!0)}));case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_resetPay",value:function(){this.setState({showPayLoading:!1}),this.orderCreateTime=0}},{key:"handleRepeatOrder",value:function(e){var t=this,n=e||{},r=n.resultMessage,o=n.duplicateType,i=n.promptButtonList,a=n.duplicateOrderIDList,s=n.cancelOrderIDList,c=n.hashToken,l=null===i||void 0===i?void 0:i.map((function(e,n){var r=e.buttonType,o=e.buttonText;return{text:o,class:0===n?"default":"primary",callback:function(){var e;r===yt.PD.CHECK_ORDER?null!==a&&void 0!==a&&null!==(e=a[0])&&void 0!==e&&e.orderID?(0,lt.x)(a[0].orderID):ct.L.jump():r===yt.PD.RETURN_MODIFY||r===yt.PD.CONTINUE_PAY&&t._goToPayment(c)}}}));cn({resultMessage:r,duplicateType:o,duplicateOrderIDList:a,cancelOrderIDList:s,buttons:l})}},{key:"_orderInterCreateCallback",value:function(e,t){var n=this,r=this.props.bookingSwitch||{},o=r.insuranceRuleActive;if(this.orderCreateTime){var i=(new ln.Date).getTime()-this.orderCreateTime,a=o&&Xt.Z.getSwitcher("insuranceAgentLayer")?5e3:3e3;i<a?setTimeout((function(){n._orderInterCreateCallback(e,t)}),a-i):(this.orderCreateTime=0,setTimeout((function(){n._orderInterCreateCallback(e,t)}),200))}else{var s=e||{},c=s.resultAction;if(c!==yt.TI.directAcceptQte&&this._resetPay(),!e)return(0,Y.jq)("inter_order_result_failure_nodata",{desc:"\u521b\u5efa\u8ba2\u5355\u5931\u8d25, \u8bf7\u91cd\u8bd5"}),(0,f.showToast)("\u521b\u5efa\u8ba2\u5355\u5931\u8d25, \u8bf7\u91cd\u8bd5");!e||0!==e.resultAction&&21!==e.resultAction?this._handleInterErrorCode(e,e.orderIds||[]):(0,Kt.pw)("INTERNATIONAL")}}},{key:"_handleInterErrorCode",value:function(e,t){var n=this.props.detail,r=(null===n||void 0===n?void 0:n.policy)||{},o=r.psgType,i=e.resultAction,a=i;return a?a===yt.TI.qte?((0,Y.$J)("inter_popup_price_change_show"),void this.setState({popup:(0,R.Z)((0,R.Z)({},this.state.popup),{},{PRICE_CHANGE:!0}),priceChangeInfo:this._getInterNewPrice(e.qTEPriceInfo),qtePriceInfo:e.qTEPriceInfo})):void(a!==yt.TI.directAcceptQte?tn({data:e,psgType:o,oids:t,goToPayment:this._goToPayment.bind(this)}):this._acceptQte(e.qTEPriceInfo)):((0,Y.jq)("inter_order_result_failure_errorcode01"),(0,f.showToast)("\u521b\u5efa\u8ba2\u5355\u5931\u8d25, \u8bf7\u91cd\u8bd5"))}},{key:"_getNewPolicy",value:function(e){var t=this.props.detail,n=f.R.clone(null===t||void 0===t?void 0:t.policy);return(null===e||void 0===e?void 0:e.length)&&e.forEach((function(e){var t=e.passengerType,r=e.changeType,o=e.changedPrice;if(2===r&&n)n.price.forEach((function(e){e.psgtype===t&&(e.price=o)})),n.totalPrices[dn[t]]=o;else if(1===r&&n){var i;if(n.price.forEach((function(e){e.psgtype===t&&(e.tax=o)})),n.totalTaxes)n.totalTaxes[dn[t]]=o;else i[dn[t]]=o,n=(0,R.Z)((0,R.Z)({},n),{},{totalTaxes:i})}})),n}},{key:"_getInterNewPrice",value:function(e){var t=this.props.priceDetail.total,n=this.props,r=n.selectedCoupons,o=n.passengerCount,i=n.selectedLounge,a=n.selectedSecurity,s=n.selectedInsurances,c=n.selectedServicePackage,l=n.freeX,d=this._getNewPolicy(e),u=(0,Ut.t)(d,o,r,s,i,a,c,l);(0,Y.jq)("BOOKING_PRICE_CHANGE",{items:u.items,total:u.total});var p=u.total;return{oldPrice:t,newPrice:p,changeTitle:"\u822a\u73ed"+(t>p?"\u964d\u4ef7\u4e86":"\u6da8\u4ef7\u4e86"),bookingcnt:6}}},{key:"_acceptQte",value:function(e){var t=this,n=this.props.updatePrice,r=this._getNewPolicy(e);Bt(yt.Vm.AcceptQTE),n&&n(r),setTimeout((function(){t._goToPayment()}),500)}},{key:"render",value:function(){var e=this,t=this.state,n=t.popup,r=t.priceChangeInfo,o=t.showPayLoading,i=t.qtePriceInfo,a=this.props,s=a.freeX,c=a.showTimePromote,l=a.timePromoteTextJest,d=a.detail,u=a.tripType,p=a.departCity,g=a.arrivalCity,m=a.passengerCount,h=a.priceDetail,f=a.children,v=a.reservationAnimate,T=a.selectedPassengers,I=a.selectedInsurances,y=a.selectedServicePackage,k=a.selectedLuggage,C=a.bookingSwitch;return(0,_.jsx)(nn.Z,{freeX:s,children:f,priceDetail:h,passengerCount:m,onSwitchPopup:this.onSwitchPopup.bind(this),popup:n,reservationAnimate:v,showTimePromote:c,timePromoteTextJest:l,clickPayment:this.clickPayment.bind(this),timePromoteText:this.timePromoteText,priceChangeInfo:r,showPayLoading:o,detail:d,tripType:u,departCity:p,arrivalCity:g,selectedPassengers:T,selectedInsurances:I,selectedLuggage:k,selectedServicePackage:y,bookingSwitch:C,onClosePopup:this.onClosePopup.bind(this),isIntl:!0,priceChangeCallback:function(){e._acceptQte(i)}})}}]),n}(i.Component),pn=(0,i.memo)(un),gn=n(11870),mn=n(54972),hn=n(62461),fn=function(e){var t=e.showTimePromote,n=(0,hn.T)(),r=(0,hn.C)(M.c7),o=(0,p.Ck)(p.s7),i=(0,p.Ck)(p.C3),a=(0,p.Ck)(p.xt),s=(0,p.Ck)(p.e_),c=(0,p.Ck)(p.gs),l=(0,p.Ck)(p.Lj),d=(0,p.Ck)(p.ot),g=(0,u.GX)(u.DK),m=(0,je.Ft)(je.LJ),h=ae(ge),f=ae(pe),v=(0,F.f3)(F.FG),T=void 0,y=(0,C.a8)(C.Zc),k=function(){return n((0,C.EZ)())},x=function(){return n((0,C.T)())},N=function(e){return n((0,p._E)(e))},w=(0,I.Sl)("intlTermsDoubleCheckPop");return(0,_.jsx)(A.Z,{children:(0,_.jsx)(et,{userId:r,selectedCoupons:m,selectedPassengers:h,passengerCount:f,selectedLuggage:T,selectedInsurances:v,policy:null===o||void 0===o?void 0:o.policy,initOrderCheckResult:k,termsSwitch:w,children:function(e){var n=e.reservationCheck,r=e.setReservationCheck,u=e.reservationAnimate,p=e.setReservationAnimate,I=e.checkReservationBtn,k=e.goToPayment,C=e.priceDetail,P=e.isForceShowScheduledDoubleCheckPop,j=e.setForceShowScheduledDoubleCheckPop;return(0,_.jsx)(pn,{tripType:s,departCity:c,arrivalCity:l,goToPayment:k,orderCheck:y,bookingSwitch:g,selectedCoupons:m,selectedPassengers:h,passengerCount:f,showTimePromote:t,reservationCheck:n,selectedInsurances:v,selectedLuggage:T,flightPsgRegisterSettings:d,detail:o,priceDetail:C,reservationAnimate:u,isIntl:!0,updatePrice:N,initPassengerCheck:x,children:(0,_.jsx)(gn.I,{sections:i,productTypes:a,selectedInsurances:v,setReservationCheck:r,isIntl:!0,termsSwitch:w,children:function(e){var t=e.terms,o=e.personalInfoTerm,i=e.displayPolicyNote,a=e.setScheduledCheck;return(0,_.jsx)(mn.Z,{reservationAnimate:u,setReservationAnimate:p,reservationCheck:n,checkReservationBtn:I,terms:t,displayPolicyNote:i,personalInfoTerm:o,isIntl:!0,termsSwitch:w,goToPayment:k,setReservationCheck:r,setScheduledCheck:a,isForceShowScheduledDoubleCheckPop:P,setForceShowScheduledDoubleCheckPop:j})}})})}})})},vn=fn,Tn=vn,In={"booking-page":"BookingPage-module_GGadv","new-bg-color":"BookingPage-module_LvJI9"},yn=n(35102),kn=n(36140),Cn=n(44682),xn=function(e){var t=e.polid,n=e.prdid,r=e.notes,o=(0,i.useMemo)((function(){var e,t,n=(null===(e=f.R.find((function(e){return 8===e.ncate}),r))||void 0===e?void 0:e.detaillst)||[],o=(null===(t=f.R.find((function(e){return 37===e.notetype}),n))||void 0===t?void 0:t.notetit)||"";return o=o.replace(/\|/g," | "),(0,c.NJ)(o)>46?o.replace(/\|/g,"<br />"):o}),[r]);return(0,_.jsxs)(v.View,{className:Cn.Z.policy,"data-testid":"open-refund-luggage-popup",onClick:(0,f.trackFn)("onClick--d1887",(function(){return(0,kn.p0)({polid:t,prdid:n})})),children:[(0,_.jsx)(v.View,{className:Cn.Z.rl,dangerouslySetInnerHTML:{__html:o}}),(0,_.jsx)(v.View,{className:(0,f.classnames)("iconfont-h5 icon-arrow-right",Cn.Z.right)})]})},Nn=xn,wn=n(61659),Pn=n(10073),_n=Pn.Z.injectEndpoints({endpoints:function(e){return{getIncentiveTip:e.query({query:function(e){return{url:"/16818/getDreamlandRemark",queryObject:{subEnv:"fat36"},cver:"856.002",queryParams:e}}})}}}),jn=_n.useGetIncentiveTipQuery,bn={simulatorBox:"SimulatorTip-module_mfMov",simulateIcon:"SimulatorTip-module_qTFMm",simulateBigIcon:"SimulatorTip-module_bLyXU",simulateTip:"SimulatorTip-module_JRSEh"},Ln=function(e){var t=e.queryParams,n=e.isBigIcon,r=e.useColorFromService,a=e.sceneType,s=e.box,c=(0,i.useState)({iconUrl:"",content:""}),l=(0,o.Z)(c,2),d=l[0],u=l[1],p=jn((0,R.Z)({},t)),g=p.data,m=p.isFetching,h=(0,i.useMemo)((function(){var e,t=(null===g||void 0===g?void 0:g.slst)&&(null===(e=f.R.find((function(e){return(null===e||void 0===e?void 0:e.stype)===a}),null===g||void 0===g?void 0:g.slst))||void 0===e?void 0:e.rmklst);if(null===t||void 0===t||!t.length||!Object.keys(null===t||void 0===t?void 0:t[0]).length)return{iconUrl:"",content:"",url:"",textColor:""};var n=t[0];return{iconUrl:n.icon,content:n.rmk,url:n.jlink,textColor:n.color}}),[g,a]);(0,i.useEffect)((function(){u(h)}),[h,u]);var T=(0,i.useCallback)((function(){if(null!==d&&void 0!==d&&d.url)return(0,Ae.jq)("c_flt_jump_simulator_url"),(0,Ee.G)(d.url)}),[d.url]);return(0,i.useEffect)((function(){null!==d&&void 0!==d&&d.content||m||(0,Ae.jq)("o_flt_simulator_unShow",{desc:"\u6fc0\u52b1\u6587\u6848\u672a\u5c55\u793a"})}),[d,m]),null!==d&&void 0!==d&&d.content?(0,_.jsx)(s,{children:(0,_.jsxs)(v.View,{className:bn.simulatorBox,onClick:(0,f.trackFn)("onClick--5a40d",(function(){T()})),children:[(0,_.jsx)(wn.Z,{className:n?bn.simulateBigIcon:bn.simulateIcon,src:d.iconUrl||""}),(0,_.jsx)(v.Text,{className:bn.simulateTip,style:r?{color:d.textColor||"#00A876"}:{},children:d.content}),d.url?(0,_.jsx)(v.Text,{style:bn.iconArrow,children:"\ue008"}):null]})}):null},Rn=function(){var e=(0,a.useRouter)(),t=e.params,n=t.dstr,r=void 0===n?"":n,o=(0,p.Ck)(p.s7),s=(0,p.Ck)(p.Nb),c=s||{},l=c.polid,d=c.prdid,u=c.notes,g=void 0===u?[]:u,m=ae(pe),h=(0,I.Gm)("bookingPageText",{}),f=2,T=(0,i.useMemo)((function(){return{slst:[{stype:f,dstr:decodeURIComponent(r),code:"",ualst:[{atype:3,acnt:""}]}],stype:0,extendInfos:[{type:"10",content:"1"}]}}),[r]);return(0,_.jsxs)(yn.Z,{detail:o,passengerCount:m,bookingPageText:h,dstr:r,isIntl:!0,children:[(0,_.jsx)(Nn,{polid:l,prdid:d,notes:g}),(0,_.jsx)(Ln,{queryParams:T,sceneType:f,isBigIcon:!0,useColorFromService:!0,box:function(e){var t=e.children;return(0,_.jsx)(v.View,{className:"imply",children:t})}})]})},Sn=(0,i.memo)(Rn),An=Sn,Zn=function(e){var t=e.detail,n=e.loadingFlight,r=e.refetch,a=t||{},s=a.invoiceNote,c=a.notiInfo,l=a.policy,d=(0,i.useState)(""),u=(0,o.Z)(d,2),p=u[0],g=u[1],m=(0,i.useState)(!0),h=(0,o.Z)(m,2),j=h[0],R=h[1],S=function(){p&&g(""),j&&R(!1)},A=(0,I.aT)(S,r,12e5),Z=A.callback,D=(0,y.R2)(),E=D.bottom,V=void 0===E?0:E;return(0,_.jsx)(C.ZP,{children:function(){return(0,_.jsxs)(v.View,{className:In["booking-page"],onTouchStart:Z,id:"intl-booking-page",children:[(0,_.jsx)(k.Z,{clsName:"booking",pageName:"booking"}),(0,_.jsx)(T.Z,{className:"wrapper",scrollY:!0,scrollIntoView:p,scrollWithAnimation:!0,id:"intl-booking-page_id_e4265",onScroll:(0,f.trackFn)("intl-booking-page_id_e4265"),children:(0,_.jsx)(v.View,{className:(0,f.classnames)("container",In["new-bg-color"]),style:{paddingBottom:"".concat(140+V,"px")},children:n?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(w.g,{}),(0,_.jsx)(w.T,{}),b]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(An,{}),(0,_.jsx)(_e,{isIntl:!0,setTargetView:g}),(0,_.jsx)(Be,{}),(0,_.jsx)(Se,{}),(0,_.jsx)(P.Z,{invoiceNote:s}),(0,_.jsx)(v.View,{className:"card-mt-top",children:l&&(0,_.jsx)(N.Z,{notiInfo:c,isIntl:!0})}),(0,_.jsx)(x.Z,{pageName:"\u586b\u5199\u9875"})]})})}),(0,_.jsx)(Tn,{showTimePromote:j}),(0,_.jsx)(L.Z,{})]})}})},Dn=(0,i.memo)(Zn),En={},Vn=function(e){var t=e.setCurrentPageId,n=(0,i.useState)(!1),r=(0,o.Z)(n,2),g=r[0],f=r[1];return(0,i.useLayoutEffect)((function(){var e=(0,c.Vj)();return l.ZP.on(l.uk,(function(e){t(e),(0,d.Hj)({pageId:e,key:"middle-to-booking-inter",name:"\u4e2d\u95f4\u9875\u5230\u586b\u5199\u9875(\u56fd\u9645)"})}),e),function(){l.ZP.off(l.uk,e)}}),[t]),En=(0,h.$)(),(0,a.useShareAppMessage)((function(){return f(!0),En})),(0,i.useEffect)((function(){g&&(0,s.K4)({closeMethod:"close",content:(0,_.jsx)(m.Z,{content:"\u597d\u53cb\u4fe1\u606f\u586b\u5199\u5b8c\u6210\u540e\uff0c\u5373\u53ef\u4e0eta\u4e00\u8d77\u8d2d\u7968\u4e86\u54e6\uff01"}),animationClassName:"animate__animated animate__slideInUp animate__faster",buttons:[{text:"\u77e5\u9053\u4e86",class:"primary",callback:function(){f(!1)}}]})}),[g]),(0,_.jsx)(u.ZP,{children:function(e){var t=e.bookingSwitch;return(0,_.jsx)(p.ZP,{children:function(e){var n=e.loadingFlight,r=e.detail,o=e.refetch;return(0,_.jsx)(Dn,{detail:r,loadingFlight:n,refetch:o,bookingSwitch:t})}})}})},On=(0,g.Z)({needLogin:!0,createNonUser:!0})(Vn),Fn={navigationBarTitleText:"\u643a\u7a0b\u673a\u7968",navigationBarTextStyle:"white",titleBarColor:"#006ff6",navigationStyle:"custom",usingComponents:{captcha:"/commonComponent/captcha/captcha","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};On.enableShareAppMessage=!0;Page((0,r.createPageConfig)(On,"pages/flightBooking/pages/interBooking/index",{root:{cn:[]}},Fn||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[6011,2107,1216,8592],(function(){return t(67987)}));e.O()}]);
//# sourceMappingURL=index.js.map