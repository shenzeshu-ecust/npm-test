{"version":3,"file":"pages/flightschedule/outerComponents/coupon/index.js","mappings":"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","sources":["webpack://tarobaseproject/pages_flightschedule_outerComponents_coupon_index.js"],"sourcesContent":["\"use strict\";\n(wx[\"tripTaroGlobal30\"] = wx[\"tripTaroGlobal30\"] || []).push([[8000],{\n\n/***/ 52458:\n/***/ (function(__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) {\n\n/* harmony import */ var _builds_tinyapp_taro_auto_tarobaseproject_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93212);\n/* harmony import */ var _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33675);\n/* harmony import */ var _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0__);\n\n\nComponent({\n  properties: {\n    subChannel: {\n      type: String,\n      value: ''\n    },\n    hideTime: {\n      type: Number,\n      value: 0\n    }\n  },\n  data: {\n    isShow: false,\n    canShow: false,\n    couponSended: false,\n    isShowTipsDetail: false,\n    couponGiftStr: '',\n    coupons: [],\n    tips: [],\n    maskTransition: '',\n    showBg: true,\n    hasClick: false // 防止重复点击\n  },\n\n  lifetimes: {\n    attached: function attached() {\n      // 在组件实例进入页面节点树时执行\n      this.fetchData();\n    },\n    detached: function detached() {\n      // 在组件实例被从页面节点树移除时执行\n    }\n  },\n  pageLifetimes: {\n    show: function show() {\n      // 页面被展示\n    },\n    hide: function hide() {\n      // 页面被隐藏\n    }\n  },\n  methods: {\n    fetchData: function fetchData() {\n      var _this = this;\n      _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default().request({\n        url: '/restapi/soa2/17909/giftpackage',\n        data: {\n          trip: 1,\n          routes: null,\n          biztype: 1,\n          stpe: 2,\n          flag: 1,\n          // 1:下发拼接组合券\n          rnInfo: {\n            app_version: '',\n            code_version: '8.32'\n          }\n        },\n        success: function success(res) {\n          _this._getCouponInfo(res && res.data);\n        },\n        fail: function fail(_e) {\n          // 获取优惠券信息失败\n          this._endEvent({\n            isShow: false,\n            isSend: false,\n            isSendSuccess: false\n          });\n          this.sendTrace('flt_coupon_trace', {\n            msg: 'giftpackage service error'\n          });\n        }\n      });\n    },\n    _hide: function _hide() {\n      var _this2 = this;\n      this.setData({\n        showBg: false,\n        maskTransition: ''\n      });\n      setTimeout(function () {\n        _this2.setData({\n          isShow: false\n        });\n      }, this.properties.hideTime);\n    },\n    close: function close() {\n      this._hide();\n      this._endEvent({\n        isShow: true,\n        isSend: false,\n        isSendSuccess: false\n      });\n      this.sendTrace('C_Flt_N_Home_NewCoupon_Close', {\n        keyname: '新客礼包弹窗关闭埋点',\n        sourcefrom: this.properties.subChannel\n      });\n    },\n    showCoupon: function showCoupon() {\n      var _this3 = this;\n      var _this$data = this.data,\n        canShow = _this$data.canShow,\n        couponSended = _this$data.couponSended;\n      // 调用弹框展示方法 有可发券数据且未领过券进行弹框\n      if (canShow) {\n        this.setData({\n          isShow: true,\n          hasClick: false\n        });\n        setTimeout(function () {\n          _this3.setData({\n            showBg: true,\n            maskTransition: \"background-color \".concat(_this3.properties.hideTime / 1000, \"s linear\")\n          });\n        }, this.properties.hideTime);\n        // 曝光埋点\n        this.sendTrace('S_Flt_N_Home_NewCoupon_Pop', {\n          keyname: '新客礼包弹窗曝光埋点',\n          sourcefrom: this.properties.subChannel\n        });\n      } else {\n        this._endEvent({\n          isShow: false,\n          isSend: false,\n          isSendSuccess: couponSended\n        });\n      }\n      this.sendTrace('flt_coupon_trace', {\n        msg: 'show coupon',\n        canShow: canShow\n      });\n    },\n    showTipsDetail: function showTipsDetail() {\n      // 使用说明点击埋点\n      this.sendTrace('C_Flt_N_Home_NewCoupon_Explan', {\n        keyname: '新客礼包弹窗活动说明点击埋点',\n        sourcefrom: this.properties.subChannel\n      });\n      this.setData({\n        isShowTipsDetail: true\n      });\n    },\n    hideTipsDetail: function hideTipsDetail() {\n      this.setData({\n        isShowTipsDetail: false\n      });\n    },\n    sendCoupon: function sendCoupon() {\n      var _this4 = this;\n      var _this$data2 = this.data,\n        couponGiftStr = _this$data2.couponGiftStr,\n        hasClick = _this$data2.hasClick;\n      if (hasClick) {\n        return;\n      }\n      this.setData({\n        canShow: false,\n        hasClick: true\n      });\n      if (!couponGiftStr) {\n        this._hide();\n        // 发券失败\n        this._endEvent({\n          isShow: true,\n          isSend: true,\n          isSendSuccess: false\n        });\n        this.sendTrace('flt_coupon_trace', {\n          msg: 'couponGiftStr null'\n        });\n        return;\n      }\n      _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default().request({\n        url: '/restapi/soa2/15467/extendcoupon',\n        data: {\n          pstr: couponGiftStr,\n          sctype: 5\n        },\n        success: function success(res) {\n          if (res && res.data && res.data.sr && res.data.sr.rt === 0) {\n            // 发券成功\n            _this4._endEvent({\n              isShow: true,\n              isSend: true,\n              isSendSuccess: true\n            });\n            _this4.setData({\n              couponSended: true\n            });\n            _this4.sendTrace('C_Flt_N_Home_NewCoupon_Issue', {\n              keyname: '新客礼包弹窗点击领券埋点',\n              sourcefrom: _this4.properties.subChannel\n            });\n          } else {\n            // 发券失败\n            _this4._endEvent({\n              isShow: true,\n              isSend: true,\n              isSendSuccess: false\n            });\n            _this4.sendTrace('flt_coupon_trace', {\n              msg: 'send error'\n            });\n          }\n          _this4._hide();\n        },\n        fail: function fail(_e) {\n          this._hide();\n          // 发券失败\n          this._endEvent({\n            isShow: true,\n            isSend: true,\n            isSendSuccess: false\n          });\n          this.sendTrace('flt_coupon_trace', {\n            msg: 'send service error'\n          });\n        }\n      });\n    },\n    _getCouponInfo: function _getCouponInfo(data) {\n      var _this5 = this;\n      var couponSended = false;\n      try {\n        if (data) {\n          var _data$flagMap = data.flagMap,\n            flagMap = _data$flagMap === void 0 ? 0 : _data$flagMap,\n            couponList = data.coupons,\n            _data$nlst = data.nlst,\n            nlst = _data$nlst === void 0 ? [] : _data$nlst;\n          // 新客\n          var isNewGuest = (flagMap & 2) === 2;\n          if (isNewGuest && couponList.length > 0) {\n            // 优惠券处理 服务进行组合处理\n            var combinationCoupon = couponList.find(function (val) {\n              return val.ctype === 3;\n            });\n            // 有已发送券(机票券已发算已发状态)\n            couponSended = !!(combinationCoupon && (combinationCoupon.flag & 2) === 2);\n            if (!couponSended && combinationCoupon) {\n              var _nlst$find;\n              var cnotes = combinationCoupon.cnotes,\n                pstr = combinationCoupon.pstr,\n                amount = combinationCoupon.amount;\n              var iconStr = this._getNodeContent(cnotes, 5);\n              var titleStr = this._getNodeContent(cnotes, 3);\n              var descStr = this._getNodeContent(cnotes, 4);\n              var couponGiftStr = pstr;\n              var coupons = iconStr ? [{\n                icon: iconStr,\n                amout: amount,\n                title: titleStr || '新客券包',\n                desc: descStr\n              }] : [];\n\n              // 权益处理\n              var couponType2List = couponList.filter(function (val) {\n                return val.ctype === 2;\n              });\n              couponType2List.forEach(function (coupon) {\n                var cnotes = coupon.cnotes,\n                  pstr = coupon.pstr;\n                var icon = _this5._getNodeContent(cnotes, 5);\n                var title = _this5._getNodeContent(cnotes, 3);\n                var desc = _this5._getNodeContent(cnotes, 4);\n                if (icon && title) {\n                  couponGiftStr += pstr ? ',' + pstr : '';\n                  coupons.push({\n                    icon: icon,\n                    title: title,\n                    desc: desc\n                  });\n                }\n              });\n\n              // 使用说明\n              var tipStr = ((_nlst$find = nlst.find(function (nl) {\n                return nl.ntype === 10;\n              })) === null || _nlst$find === void 0 ? void 0 : _nlst$find.nconent) || '[]';\n              var couponRule = JSON.parse(tipStr.replace(/\\n/g, '\\\\\\\\n'));\n              var tips = couponRule.map(function (rule) {\n                var noteTitle = rule.noteTitle,\n                  noteContent = rule.noteContent;\n                return {\n                  title: noteTitle,\n                  content: noteContent === null || noteContent === void 0 ? void 0 : noteContent.replace(/\\$/g, '\\n')\n                };\n              });\n              if (coupons.length > 0) {\n                this.setData({\n                  isShow: true,\n                  canShow: true,\n                  couponGiftStr: couponGiftStr,\n                  coupons: coupons,\n                  tips: tips\n                });\n                // 曝光埋点\n                this.sendTrace('S_Flt_N_Home_NewCoupon_Pop', {\n                  keyname: '新客礼包弹窗曝光埋点',\n                  sourcefrom: this.properties.subChannel\n                });\n                return;\n              }\n            }\n          }\n        }\n      } catch (_e) {\n        this.sendTrace('flt_coupon_trace', {\n          msg: 'data processing error'\n        });\n      }\n      this.setData({\n        isShow: false,\n        canShow: false,\n        couponSended: couponSended\n      });\n      this._endEvent({\n        isShow: false,\n        isSend: false,\n        isSendSuccess: couponSended\n      });\n      this.sendTrace('flt_coupon_trace', {\n        msg: 'not show'\n      });\n    },\n    _getNodeContent: function _getNodeContent(nodeList, type) {\n      var noteListItem = nodeList && nodeList.find(function (item) {\n        return item.ntype === type;\n      });\n      return !!noteListItem && noteListItem.ncontent || '';\n    },\n    _endEvent: function _endEvent(info) {\n      // 弹框处理结束触发回调\n      this.triggerEvent('endevent', info);\n      this.sendTrace('flt_coupon_trace', {\n        msg: 'endEvent',\n        info: info\n      });\n    },\n    sendTrace: function sendTrace(key, value) {\n      // 自定义埋点\n      try {\n        var page = _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default().getCurrentPage();\n        if (typeof value === 'string') {\n          value = {\n            value: value\n          };\n        }\n        if ((0,_builds_tinyapp_taro_auto_tarobaseproject_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"] */ .Z)(value) === 'object') {\n          value.page = (page.route || '').replace('pages/flight/pages/', '').replace('/index', '');\n        }\n        _miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default().sendUbtByPage.ubtTrace(key, value);\n        console.log('%cubtlog', 'color:cyan', key, value);\n      } catch (e) {\n        console.error('===sendTrace failed', e);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 33675:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../cwx/cwx\");\n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [1216,8592], function() { return __webpack_exec__(52458); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ }\n]);"],"names":["wx","push","__unused_webpack_module","__unused_webpack___webpack_exports__","__webpack_require__","_builds_tinyapp_taro_auto_tarobaseproject_node_modules_babel_runtime_helpers_esm_typeof_js__WEBPACK_IMPORTED_MODULE_1__","_miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0__","_miniapp_cwx_cwx__WEBPACK_IMPORTED_MODULE_0___default","n","Component","properties","subChannel","type","String","value","hideTime","Number","data","isShow","canShow","couponSended","isShowTipsDetail","couponGiftStr","coupons","tips","maskTransition","showBg","hasClick","lifetimes","attached","this","fetchData","detached","pageLifetimes","show","hide","methods","_this","request","url","trip","routes","biztype","stpe","flag","rnInfo","app_version","code_version","success","res","_getCouponInfo","fail","_e","_endEvent","isSend","isSendSuccess","sendTrace","msg","_hide","_this2","setData","setTimeout","close","keyname","sourcefrom","showCoupon","_this3","_this$data","concat","showTipsDetail","hideTipsDetail","sendCoupon","_this4","_this$data2","pstr","sctype","sr","rt","_this5","_data$flagMap","flagMap","couponList","_data$nlst","nlst","isNewGuest","length","combinationCoupon","find","val","ctype","_nlst$find","cnotes","amount","iconStr","_getNodeContent","titleStr","descStr","icon","amout","title","desc","couponType2List","filter","forEach","coupon","tipStr","nl","ntype","nconent","couponRule","JSON","parse","replace","map","rule","noteTitle","noteContent","content","nodeList","noteListItem","item","ncontent","info","triggerEvent","key","page","getCurrentPage","Z","route","sendUbtByPage","ubtTrace","console","log","e","error","module","exports","require","__webpack_exec__","moduleId","s","O"],"sourceRoot":""}