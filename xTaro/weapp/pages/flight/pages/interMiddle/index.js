"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[8134],{45748:function(e,i,t){var n=t(32180),o=t(90201),l=t(71515),r=t(91425),c=t(9361),s=t(14140),a=t(74711),u=t(74498),d=t(14506),m=t(298),x=t(57042),p=t(24460),g=t(81876),f=t(21867),h=t(86066),T=t(45023);function y(e){return function(i,t){var n=e.asyncReducers,o=Reflect.has(n,i);o||(e.asyncReducers[i]=t(e.getState()),e.replaceReducer(e.createReducer(e.asyncReducers)))}}function v(e){return function(i,t){var n=e.asyncReducers,o=Reflect.has(n,i);o||(e.asyncReducers[i]=t,e.replaceReducer(e.createReducer(e.asyncReducers)))}}function j(e){return{injectReducer:y(e),injectSlice:v(e)}}var _=t(2269);function N(e){var i=e.key,t=e.reducerCreator,n=e.reducer;return function(e){var l=function(o){(0,f.Z)(c,o);var l=(0,h.Z)(c);function c(){var e;(0,x.Z)(this,c);for(var i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];return e=l.call.apply(l,[this].concat(t)),(0,T.Z)((0,g.Z)(e),"isInitialized",!1),e}return(0,p.Z)(c,[{key:"render",value:function(){var o=this;return(0,_.jsx)(r.ReactReduxContext.Consumer,{children:function(l){var r=l.store;if(!o.isInitialized){var c=j(r),s=c.injectReducer,a=c.injectSlice;t&&s(i,t),n&&a(i,n),o.isInitialized=!0}return(0,_.jsx)(e,(0,m.Z)({},o.props))}})}}]),c}(o.Component);return(0,T.Z)(l,"WrappedComponent",e),(0,T.Z)(l,"displayName","withReducer(".concat(e.displayName||e.name||"Component",")")),(0,r.hoistNonReactStatics)(l,e)}}var k=t(92954),b=t(67107),C=t(99531),I=t(60328),w=t(17321),B={},L=(0,r.createSlice)({name:"flightMiddleStore",initialState:B,reducers:{setFlightMiddleAction:function(e,i){var t=i.payload;e.flightMiddle=t}}}),S=L.actions.setFlightMiddleAction,P=r.useSelector,V=L,M=t(23787),R=function(e){var i=e.children,t=e.setFlightMiddle,n=(0,k.useRouter)(),l=n.params,c=l.dstr,s=void 0===c?"":c,u=l.isHasTax,d=void 0===u?"true":u,m=(0,b.C)(w.e_),x=(0,b.C)(w.QY),p=(0,b.C)(w.kM),g=(0,M.HQ)(l,{tripType:m,passengerType:p}),f=H(g,{skip:!x}),h=f.data,T=f.isFetching,y=f.isError,v=f.refetch;(0,o.useEffect)((function(){t(h),(0,C.jq)("o_middle_response_data",{middleData:JSON.stringify(h)})}),[t,h]);var j=(0,b.C)((function(e){return e.visitedInterPolicy})),_=(null===j||void 0===j?void 0:j.length)>0&&j[j.length-1]?Number(j[j.length-1]):0;return(0,o.useEffect)((function(){if(!T&&h){var e,i=null===h||void 0===h||null===(e=h.segs)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.transfer)||void 0===e?void 0:e.length,t=i&&i>1;a.ZP.emit(a.II,r.R.path(["INTERNATIONAL","ONE_WAY"!==m?"ROUND_TRIP":t?"TRANSIT":"ONE_WAY"],I.uo))}}),[h,m,T]),i({isFetching:T,isError:y,refetch:v,interMiddleData:h,dreamString:s,isHasTax:"true"===d,visitedPrice:_})},Z=function(){return{}},q=function(e){return{setFlightMiddle:function(i){return e(S(i))}}},F=(0,r.connect)(Z,q),E=N({key:V.name,reducer:V.reducer}),O=(0,r.compose)(E,F)((0,o.memo)(R)),A=t(58637),D=A.Z.injectEndpoints({endpoints:function(e){return{getInterMiddle:e.query({query:function(e){return{url:"/14780/middleSearchForH5",queryObject:{subEnv:"fat128"},cver:"856.002",queryParams:e}}})}}}),H=D.useGetInterMiddleQuery,U=(D.endpoints,D.usePrefetch,O),G=t(2059),W=t(9423),z=t(84211),X=t(45438),Y=t(42658),J=t(75156),Q=t(18228),K=t(29557),$=t(91321),ee=function(){return function(){}},ie=ee,te=t(98082),ne=t(13768),oe=t(90129),le=t(56262),re=t(97659),ce=t(94892),se=t(50826),ae={priceSummary:"PriceSummary-module_X3war",summaryBox:"PriceSummary-module_iNJBv",priceBox:"PriceSummary-module_BNO7E",priceSymbol:"PriceSummary-module_yn3Ae",cabin:"PriceSummary-module_AycAI",btnBox:"PriceSummary-module_ussXy",taxPlus:"PriceSummary-module_qg7bI",taxText:"PriceSummary-module_wycEh",taxNum:"PriceSummary-module_R3CNU"};function ue(e){var i=e.ticketCount,t=e.price,n=e.cabinInfo,o=e.goToBooking,s=e.tax,a=e.isHasTax,u=(0,c.R2)(),d=u.bottom,m=void 0===d?0:d;return(0,_.jsx)(l.View,{className:ae.priceSummary,style:{zIndex:1e3,paddingBottom:"".concat(m,"px")},children:(0,_.jsxs)(l.View,{className:ae.summaryBox,children:[(0,_.jsxs)(l.View,{children:[(0,_.jsxs)(l.View,{className:ae.priceBox,children:[(0,_.jsx)(l.Text,{className:ae.priceSymbol,children:"\xa5"}),(0,_.jsx)(l.Text,{className:ae.price,children:t}),!a&&s&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Text,{className:ae.taxPlus,children:"+"}),(0,_.jsx)(l.Text,{className:ae.taxText,children:"\u7a0e\u8d39"}),(0,_.jsxs)(l.Text,{className:ae.taxNum,children:["\uffe5",s]})]})]}),n&&(0,_.jsx)(l.View,{className:ae.cabin,children:n})]}),(0,_.jsx)(l.View,{className:ae.btnBox,"data-testid":"price-summary-go-to-booking",onClick:(0,r.trackFn)("goToBooking--2218c",o),children:i&&i<5?(0,_.jsx)(l.Text,{className:"next-btn mr-0",children:"\u53bb\u62a2\u7968"}):(0,_.jsx)(l.Text,{className:"next mr-0",children:"\u9884\u8ba2"})})]})})}var de=ue,me={descriptionBox:"PolicyDescription-module_C2NzW",lineDescription:"PolicyDescription-module_Ouiam",iconUrl:"PolicyDescription-module_liWm0",textBox:"PolicyDescription-module_JAXuQ",tripGroupBox:"PolicyDescription-module_f4_L_",smallIconUrl:"PolicyDescription-module_gCjRd",description:"PolicyDescription-module_fB6Fm",rightIcon:"PolicyDescription-module_vliI9",biggerTop:"PolicyDescription-module_aHXyD",separator:"PolicyDescription-module_GADv7"},xe=function(e){return e.flightMiddleStore},pe=(0,r.createSelector)([xe],(function(e){return null===e||void 0===e?void 0:e.flightMiddle})),ge=(0,r.createSelector)([pe],(function(e){return null===e||void 0===e?void 0:e.prdid})),fe=function(e){return e[e["Luggage"]=1]="Luggage",e[e["Refund"]=2]="Refund",e[e["Policy"]=3]="Policy",e[e["LimitInfo"]=4]="LimitInfo",e}({}),he=function(e){var i=e.descriptionTextList,t=e.type,n=e.fcolor,r=e.fmap,c=e.notes,s=e.showSeparator,a=e.hideRightIcon,u=e.isLastContent;return(0,_.jsxs)(o.Fragment,{children:[i.map((function(e,i){var o=e.content,c=e.isHighLight,s=(0,M.D1)(c,t,r,n);return(0,_.jsx)(l.Text,{className:me.description,style:s,children:o},i)})),null===c||void 0===c?void 0:c.map((function(e){var i=e.nContent,t=e.nTitle,n=void 0===t?"":t;if(i)return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(re.Z,{src:n,className:me.smallIconUrl}),(0,_.jsx)(l.Text,{className:me.description,children:i},i)]})})),s&&(0,_.jsx)(l.Text,{className:me.separator}),!a&&u&&(0,_.jsx)(l.Text,{className:me.rightIcon})]})};function Te(e){var i;if(null===e||void 0===e||!e.notelst||!Array.isArray(e.notelst))return"";var t=e.notelst.find((function(e){return 5===e.notetpe})),n=null===t||void 0===t||null===(i=t.notecnt)||void 0===i?void 0:i.split("|");return null!==n&&void 0!==n&&n.length?n[0]:""}var ye=function(e){var i=e.desclst,t=e.polid,n=e.price,c=e.goToBooking,s=e.isHasTax,a=e.tax,u=e.policy,d=(0,M.Vy)(i),m=P(ge);if(null===d||void 0===d||!d.length)return null;var x=function(e){if(m&&t){var i=1===e||2===e?e:0;(0,ce.K4)({close:{position:"top-left"},content:(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)(se.Z,{pageType:1,polid:t,prdid:m,activeIndex:i}),(0,_.jsx)(de,{price:n,goToBooking:c,isHasTax:s,tax:a,cabinInfo:Te(u)})]}),position:"bottom",style:{height:"80vh"}})}};return(0,_.jsx)(l.View,{className:me.descriptionBox,children:null===d||void 0===d?void 0:d.map((function(e,i){var t=e.contentList,n=e.iconUrl,c=void 0===n?"":n,s=e.descriptionType,a=(null===t||void 0===t?void 0:t.length)>0,u=[fe.Policy,fe.LimitInfo].includes(s),d=null===t||void 0===t?void 0:t.find((function(e){var i;return null===e||void 0===e||null===(i=e.notes)||void 0===i?void 0:i.length}));return a&&(0,_.jsxs)(l.View,{className:"".concat(me.lineDescription," ").concat(s===fe.Policy?me.biggerTop:""),onClick:(0,r.trackFn)("description-".concat(i)+"--82df4",(function(){return x(s)})),children:[c&&(0,_.jsx)(re.Z,{src:c,className:me.iconUrl}),(0,_.jsx)(l.View,{className:"".concat(d?me.tripGroupBox:me.textBox),children:t.map((function(e,i){var n=e.descriptionTextList,l=e.fmap,r=e.type,c=e.notes,s=void 0===c?[]:c,a=e.fcolor,d=r===fe.Policy&&i!==t.length-1,m=i===t.length-1;return(0,_.jsx)(o.Fragment,{children:(0,_.jsx)(he,{descriptionTextList:n,fmap:l,fcolor:a,type:r,notes:s,showSeparator:d,hideRightIcon:u,isLastContent:m})},"description_".concat(i))}))})]},"description-".concat(i))}))})},ve=t(72546),je={multiModal:"MultiTicketsLayer-module_QhID1",container:"MultiTicketsLayer-module_KjeS5",topImageArea:"MultiTicketsLayer-module_ailOo",titleBgImage:"MultiTicketsLayer-module_Aarro",textBox:"MultiTicketsLayer-module_ik9vz",contentArea:"MultiTicketsLayer-module_MMH5q",fixedContent:"MultiTicketsLayer-module_oXjeS",scrollContent:"MultiTicketsLayer-module_Zl4jY",scrollViewBox:"MultiTicketsLayer-module_t7xR8",closeImage:"MultiTicketsLayer-module_Emjuq",bubbleText:"MultiTicketsLayer-module_weJd2",detailContainer:"MultiTicketsLayer-module_gg1w5",contentTitle:"MultiTicketsLayer-module_HbAX8",titleBox:"MultiTicketsLayer-module_JVuNq",subTitle:"MultiTicketsLayer-module_r8iav",contentBox:"MultiTicketsLayer-module_lQbFU",orangeColor:"MultiTicketsLayer-module_U847k",linkContent:"MultiTicketsLayer-module_jMG_Z",rightIcon:"MultiTicketsLayer-module_bViu8",moreSecurity:"MultiTicketsLayer-module_OFFwd",icon:"MultiTicketsLayer-module_uF3Y9",detailText:"MultiTicketsLayer-module_z4tEo",greenColor:"MultiTicketsLayer-module_b71tD",buttonBox:"MultiTicketsLayer-module_a3Tme",continueOrder:"MultiTicketsLayer-module_ikQZN"},_e=function(e){var i=e,t="",n="",o="";return i&&i.indexOf("\u3010")>-1&&(t=i.split("\u3010")[0],n=i.split("\u3010")[1].split("\u3011")[0],o=i.split("\u3011")[1]),[{isHight:!1,content:t||i},{isHight:!0,content:n},{isHight:!1,content:o}]},Ne=function(e,i){var t=e,n=[];if(e&&e.indexOf("<url")>-1){var o=e.split("<url")[0],c=e.split("</url>")[1];t="".concat(o).concat(c)}return t&&t.indexOf("\u3010")>-1?n=_e(t):n.push({isHight:!1,content:t}),(0,_.jsx)(l.View,{className:je.contentBox,children:n.map((function(e,i){var t=e.isHight,n=e.content;return(0,_.jsx)(l.Text,{className:(0,r.classnames)(je.detailText,(0,T.Z)({},je.greenColor,t)),children:n},"detail_".concat(i))}))},"link_".concat(i))},ke=function(e){if(e&&e.indexOf("<url")>-1){var i=e.split('">')[1].split("></url>")[0],t=e.split('href="')[1].split('">')[0];return(0,_.jsxs)(l.View,{className:je.moreSecurity,onClick:(0,r.trackFn)("onClick--17004",(function(){(0,Q.jq)("c_jump_to_multiTickets_security_link"),t.includes("https://")&&(0,ve.G)(t)})),children:[(0,_.jsx)(l.Text,{children:i}),(0,_.jsx)(l.Text,{className:je.rightIcon})]})}return null},be=function(e){var i,t,n=e.multiTicketFinish,o=e.multiTicketsData,c=e.closeMultiTicketsLayer,s=e.goToBooking,a=function(){n&&((0,Q.jq)("\u70b9\u51fb\u4e2d\u95f4\u9875\u591a\u7968\u7ec4\u5408\u5f39\u7a97\u7ee7\u7eed\u9884\u8ba2"),c(),s())},u=_e(null===o||void 0===o?void 0:o.Title);return(0,_.jsx)(l.View,{className:je.multiModal,children:(0,_.jsxs)(l.View,{className:je.container,children:[(0,_.jsxs)(l.View,{className:je.topImageArea,children:[(0,_.jsx)(re.Z,{className:je.closeImage,onClick:(0,r.trackFn)("onClick--d3960",(function(){return c()})),src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/newGuest/close.png"}),(0,_.jsx)(l.View,{className:je.titleBgImage,children:(0,_.jsxs)(l.View,{className:je.textBox,children:[u.map((function(e,i){var t=e.isHight,n=e.content;return(0,_.jsx)(l.Text,{className:(0,r.classnames)(je.bubbleText,(0,T.Z)({},je.greenColor,t)),children:n},"bubble_".concat(i))})),(0,_.jsx)(l.Text,{className:je.bubbleText,children:null===o||void 0===o?void 0:o.Desc})]})})]}),(0,_.jsx)(l.View,{className:"".concat((null===o||void 0===o||null===(i=o.ContentList)||void 0===i?void 0:i.length)>1?je.contentArea:je.fixedContent),children:(0,_.jsx)(l.View,{className:je.scrollContent,children:(0,_.jsx)(l.ScrollView,{className:je.scrollViewBox,scrollY:!0,id:"id_9c23b",onScroll:(0,r.trackFn)("id_9c23b"),children:null===o||void 0===o||null===(t=o.ContentList)||void 0===t?void 0:t.map((function(e,i){var t=_e(e.subTitle);return(0,_.jsxs)(l.View,{className:je.detailContainer,children:[(0,_.jsxs)(l.View,{className:je.contentTitle,children:[(0,_.jsxs)(l.View,{className:je.titleBox,children:[(0,_.jsx)(re.Z,{className:je.icon,src:e.icon}),t.map((function(e,i){var t=e.isHight,n=e.content;return(0,_.jsx)(l.Text,{className:(0,r.classnames)(je.subTitle,(0,T.Z)({},je.orangeColor,t)),children:n},"subtitle_".concat(i))}))]}),(0,_.jsx)(l.View,{className:je.linkContent,children:ke(null===e||void 0===e?void 0:e.details[0])})]}),(0,_.jsx)(l.View,{children:e.details.map(Ne)})]},"content_".concat(i))}))})})}),(0,_.jsx)(l.View,{className:je.buttonBox,children:(0,_.jsx)(l.View,{onClick:(0,r.trackFn)("continueToOrder--6ac03",a),className:je.continueOrder,children:(0,_.jsx)(l.Text,{children:null===o||void 0===o?void 0:o.ConfirmButtonText})})})]})})},Ce=t(79085),Ie={leftTopTagBox:"Tags-module_gZlCk",container:"Tags-module_tq6Az",leftLabelWrap:"Tags-module_s1yde",leftLabelText:"Tags-module_Eagph",rightWrap:"Tags-module_Nb8mB",highText:"Tags-module_HTXBe",jointImage:"Tags-module_K0tTY",rightLabel:"Tags-module_B5vNo",rightLabelWrap:"Tags-module_OUc5L",addPaddingRight:"Tags-module_IHUYl",rightLabelText:"Tags-module_v59F6",iconBox:"Tags-module_cF9aY",eachTagBox:"Tags-module_nK_Kv",tag:"Tags-module_FZn0P",subTag:"Tags-module_QTL0k",tagText:"Tags-module_ppm8Q"},we=function(e){var i=e.labelText,t=e.labelText2,n=e.subContext;return i?(0,_.jsxs)(l.View,{className:Ie.container,children:[!!i&&(0,_.jsx)(l.View,{className:(0,r.classnames)(Ie.leftLabelWrap,(0,T.Z)({},Ie.addPaddingRight,!t)),children:(0,_.jsx)(l.Text,{className:Ie.leftLabelText,children:i})}),n?(0,_.jsx)(l.View,{className:Ie.rightWrap,children:(0,_.jsx)(l.Text,{className:Ie.highText,children:n})}):null,!!t&&(0,_.jsx)(l.View,{className:Ie.rightLabel,children:(0,_.jsx)(l.View,{className:Ie.rightLabelWrap,children:(0,_.jsx)(l.Text,{className:Ie.rightLabelText,children:t})})})]}):null},Be=function(e){var i=e.leftTopTag;if(null===i||void 0===i||!i.length)return null;var t=(0,M.OI)(i||[],Ce.hu.Type_11)||[],n=(0,M.OI)(i||[],Ce.hu.Type_15)||[],o=(0,M.z7)(t,1),r=(0,M.z7)(n||[],1),c=(0,M.z7)(t,2);return(0,_.jsx)(l.View,{className:Ie.leftTopTagBox,children:(0,_.jsx)(we,{labelText:o,labelText2:r,subContext:c})})},Le=function(e){var i=e.borderColor,t=e.backgroundColor1,n=e.backgroundColor2,o=e.textColor1,r=e.textColor2,c=e.displayText1,s=e.displayText2,a=e.fontSize,u=e.borderRadius,d=e.isBold;return(0,_.jsxs)(l.View,{className:Ie.tag,style:{borderColor:i||"#00A876",borderRadius:u,borderWidth:"1px",borderStyle:"solid"},children:[(0,_.jsx)(l.Text,{className:Ie.tagText,style:{fontSize:a,fontWeight:d?"500":"normal",color:o||"#00A876",backgroundColor:t},children:c}),s?(0,_.jsx)(l.View,{className:Ie.subTag,style:{borderLeftColor:i||"#00A876",borderLeftWidth:"1px",borderLeftStyle:"solid"},children:(0,_.jsx)(l.Text,{className:Ie.tagText,style:{fontSize:a,fontWeight:d?"500":"normal",color:r||"#00A876",backgroundColor:n},children:s})}):void 0]})},Se=function(e){var i=e.priceAreaTagList;return null!==i&&void 0!==i&&i.length?(0,_.jsx)(_.Fragment,{children:i.map((function(e,i){if(!e||!e.styleType)return null;var t,n=e.styleType,o=e.content,r=e.content2,c=void 0===r?"":r,s=e.contentColor,a=void 0===s?"#08A66F":s,u=e.borderColor,d=void 0===u?"transparent":u,m=e.backgroundColor,x=void 0===m?"transparent":m,p=e.width,g=void 0===p?0:p,f=e.height,h=void 0===f?0:f;switch(n){case Ce.x0.IMAGE:t=(0,_.jsx)(re.Z,{style:{width:"".concat(g/2,"px"),height:"".concat(h/2,"px")},src:o});break;case Ce.x0.TEXT:case Ce.x0.BACKGROUND_TEXT:case Ce.x0.BORDER_TEXT:t=(0,_.jsx)(Le,{borderColor:d,borderRadius:2,backgroundColor1:x,textColor1:a,displayText1:o,backgroundColor2:x,textColor2:a,displayText2:c,fontSize:12,isBold:!0});break;default:break}return t?(0,_.jsx)(l.View,{className:Ie.eachTagBox,children:t},"".concat(i)):null}))}):null},Pe={tipBox:"Policy-module_BT8JF",averagePriceTip:"Policy-module_IMa5r",normal:"Policy-module_xgCmy",orange:"Policy-module_m8nE4",policyItemContainer:"Policy-module_qGwsO",policyItemBox:"Policy-module_NlY1t",policyItem:"Policy-module_nj9bq",policyLeftItem:"Policy-module_RoqWR",topContainer:"Policy-module_BcKI6",priceBox:"Policy-module_mM6RD",priceSymbol:"Policy-module_TgQMp",priceNumber:"Policy-module_oBrzt",priceTax:"Policy-module_saq9T",priceTaxText:"Policy-module_b5oy7",bookButton:"Policy-module_maOtS",quantity:"Policy-module_kVJgn",multiBookBtn:"Policy-module_qvylO"};function Ve(e){var i=e.flightTagList,t=e.policy,n=e.isHasTax,c=e.policyIndex,s=e.goToBooking,a=t.price,u=t.tax,d=t.quantity,m=t.desclst,x=t.aset,p=t.polid,g=(null===t||void 0===t?void 0:t.aset)||[],f=(0,o.useState)(!1),h=(0,oe.Z)(f,2),T=h[0],y=h[1],v=(0,o.useState)(!1),j=(0,oe.Z)(v,2),N=j[0],k=j[1],b=(0,M.ul)(i,(0,M.vk)(g,Ce.XF.Type_24)),C=(0,M.tS)(x,i),I=(0,M.G5)(t),w=function(){(0,Q.jq)("c_close_multiTickets_layer"),y(!1),k(!1)},B=function(e,i){var t;(0,Q.jq)(1===i?"c_click_multiTicketsLayer_button":"c_click_book_button");var n=null===e||void 0===e||null===(t=e.actionset)||void 0===t?void 0:t.find((function(e){return 1===e.atype&&8===e.tptype}));if(!N&&n)return(0,Q.jq)("c_interMiddle_show_multiTickets"),y(!0),void k(!0);s(e,c)},L=function(){return(0,_.jsxs)(l.View,{className:Pe.bookButton,onClick:(0,r.trackFn)("onClick--b9645",(function(){return B(t,0)})),children:[d&&-1!==d&&d<5&&(0,_.jsx)(l.Text,{className:Pe.quantity,children:"\u5269"+d+"\u5f20"}),(0,_.jsx)(l.Text,{children:le.kl})]})};return(0,_.jsxs)(l.View,{className:Pe.policyItemContainer,id:"policy-intl-".concat(c-1),children:[(0,_.jsxs)(l.View,{className:Pe.policyItemBox,ubtKey:p,children:[(0,_.jsx)(Be,{leftTopTag:b}),(0,_.jsxs)(l.View,{className:Pe.policyItem,children:[(0,_.jsxs)(l.View,{className:Pe.policyLeftItem,children:[(0,_.jsxs)(l.View,{className:Pe.topContainer,children:[(0,_.jsxs)(l.View,{className:Pe.priceBox,children:[(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Text,{className:Pe.priceSymbol,children:"\xa5"}),(0,_.jsx)(l.Text,{className:Pe.priceNumber,children:a})]}),!n&&u&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Text,{className:Pe.priceTaxText,children:"\u7a0e"}),(0,_.jsxs)(l.Text,{className:Pe.priceTax,children:["\xa5",u]})]})]}),(0,_.jsx)(Se,{priceAreaTagList:C})]}),(0,_.jsx)(ye,{desclst:m,polid:p,price:a,policy:t,isHasTax:n,tax:u,goToBooking:function(){return s(t,c)}})]}),(0,_.jsx)(L,{})]})]}),T&&(0,_.jsx)(be,{multiTicketFinish:N,multiTicketsData:I,closeMultiTicketsLayer:w,goToBooking:function(){return B(t,1)}})]})}var Me=function(e){var i=e.policies,t=e.flightTagList,n=e.isHasTax,c=e.messageToken,s=e.passengerType,a=e.refetch,u=ie(s),d=(0,te.Z)(),m=s||{},x=m.ADULT,p=void 0===x?1:x,g=m.CHILD,f=void 0===g?0:g,h=m.INFANT,T=void 0===h?0:h,y=[p,f,T].join("|"),v="1|0|0"!==y,j=(0,b.T)(),N=(0,o.useMemo)((function(){return(0,r.debounce)((function(e,i){var t=e.polid;(0,Q.jq)("o_booking_prefetch_query_params",{queryParams:JSON.stringify({messageToken:c,policyId:t})}),u({messageToken:c,policyId:t}),d({intl:!0,policyId:t}),ne.M1.jump({params:{policyId:t,messageToken:c,adult:p,child:f,baby:T,key:"middle-to-booking-inter"}});var n=(0,M.HZ)(e);j((0,$.f)(n)),(0,Q.ff)("c_flight_tinyapp_goto_inter_booking",{speed:"Goto interBooking page",policyIndex:i,routePolicyId:t,policy:JSON.stringify(e)})}),500,{leading:!0,trailing:!1})}),[c,p,f,T,j,u,d]),k=(0,K.aT)(N,a),C=k.callback,I=(0,M.aJ)(y,n),w=(0,M.Mh)({policies:i,passengerType:s,isHasTax:n});return(0,_.jsxs)(l.View,{className:Pe.policyContainer,children:[v&&(null===I||void 0===I?void 0:I.length)&&(0,_.jsx)(l.View,{className:Pe.tipBox,children:(0,_.jsx)(l.View,{className:Pe.averagePriceTip,children:null===I||void 0===I?void 0:I.map((function(e,i){var t=e.isHight,n=e.tip;return n&&(0,_.jsx)(l.Text,{className:"".concat(t?Pe.orange:Pe.normal),children:n},"tip_".concat(i))}))})}),(0,_.jsx)(l.View,{className:Pe.policy,children:null===w||void 0===w?void 0:w.map((function(e,i){return(0,_.jsx)(o.Fragment,{children:(0,_.jsx)(Ve,{policy:e,isHasTax:n,flightTagList:t,policyIndex:i+1,goToBooking:C})},"policyIndex_".concat(i))}))})]})},Re=(0,o.memo)(Me),Ze=A.Z.injectEndpoints({endpoints:function(e){return{getIncentiveTip:e.query({query:function(e){return{url:"/16818/getDreamlandRemark",queryObject:{subEnv:"fat36"},cver:"856.002",queryParams:e}}})}}}),qe=Ze.useGetIncentiveTipQuery,Fe={simulatorBox:"SimulatorTip-module_N0tqM",simulateIcon:"SimulatorTip-module_qT9I9",simulateBigIcon:"SimulatorTip-module_x_coH",simulateTip:"SimulatorTip-module_zKJDg"},Ee=function(e){var i=e.queryParams,t=e.isBigIcon,n=e.useColorFromService,c=e.sceneType,s=e.box,a=(0,o.useState)({iconUrl:"",content:""}),u=(0,oe.Z)(a,2),d=u[0],x=u[1],p=qe((0,m.Z)({},i)),g=p.data,f=p.isFetching,h=(0,o.useMemo)((function(){var e,i=(null===g||void 0===g?void 0:g.slst)&&(null===(e=r.R.find((function(e){return(null===e||void 0===e?void 0:e.stype)===c}),null===g||void 0===g?void 0:g.slst))||void 0===e?void 0:e.rmklst);if(null===i||void 0===i||!i.length||!Object.keys(null===i||void 0===i?void 0:i[0]).length)return{iconUrl:"",content:"",url:"",textColor:""};var t=i[0];return{iconUrl:t.icon,content:t.rmk,url:t.jlink,textColor:t.color}}),[g,c]);(0,o.useEffect)((function(){x(h)}),[h,x]);var T=(0,o.useCallback)((function(){if(null!==d&&void 0!==d&&d.url)return(0,C.jq)("c_flt_jump_simulator_url"),(0,ve.G)(d.url)}),[d.url]);return(0,o.useEffect)((function(){null!==d&&void 0!==d&&d.content||f||(0,C.jq)("o_flt_simulator_unShow",{desc:"\u6fc0\u52b1\u6587\u6848\u672a\u5c55\u793a"})}),[d,f]),null!==d&&void 0!==d&&d.content?(0,_.jsx)(s,{children:(0,_.jsxs)(l.View,{className:Fe.simulatorBox,onClick:(0,r.trackFn)("onClick--ddc5d",(function(){T()})),children:[(0,_.jsx)(re.Z,{className:t?Fe.simulateBigIcon:Fe.simulateIcon,src:d.iconUrl||""}),(0,_.jsx)(l.Text,{className:Fe.simulateTip,style:n?{color:d.textColor||"#00A876"}:{},children:d.content}),d.url?(0,_.jsx)(l.Text,{style:Fe.iconArrow,children:"\ue008"}):null]})}):null},Oe={noteInfoContainer:"NoteInfo-module_YRDbw",topBorder:"NoteInfo-module_ysZNp",noteInfoContent:"NoteInfo-module_oD4mm",noteBox:"NoteInfo-module_MpLCq",noteItem:"NoteInfo-module_euq08",noteItemOnly:"NoteInfo-module_VI5NZ",unExpandedStyle:"NoteInfo-module_iX854",textBold:"NoteInfo-module_Y1jSS",textNormal:"NoteInfo-module_ZR8O1",noteCollapseContainer:"NoteInfo-module_X6r3s"},Ae=function(e){var i=e.reminderList,t=e.isSingleNote,n=e.isExpanded;return(0,_.jsx)(l.View,{className:Oe.noteBox,children:i.map((function(e,i){var o=e.desc||"",c=o.split("[/R]"),s=(0,oe.Z)(c,2),a=s[0],u=void 0===a?"":a,d=s[1],m=void 0===d?"":d,x=u.split("[R]"),p=(0,oe.Z)(x,2),g=p[1],f=void 0===g?"":g,h=f.replace(/[\u3010\u3011]/g,""),y=o.split("[/B]"),v=(0,oe.Z)(y,2),j=v[0],N=void 0===j?"":j,k=v[1],b=void 0===k?"":k,C=N.split("[B]"),I=(0,oe.Z)(C,2),w=I[1],B=void 0===w?"":w,L=B.replace(/[\u3010\u3011]/g,""),S=h&&m;return(0,_.jsx)(l.View,{className:(0,r.classnames)(Oe.noteItem,(0,T.Z)({},Oe.noteItemOnly,t)),children:(0,_.jsxs)(l.View,{className:"".concat(Oe.textNormal," ").concat(n?null:Oe.unExpandedStyle),children:[(0,_.jsxs)(l.Text,{className:Oe.textBold,children:[S?h:L,"\uff1a"]}),S?m:b]})},"reminder_".concat(i))}))})},De=function(e){var i=e.isExpanded;return(0,_.jsx)(l.View,{className:Oe.noteCollapseContainer,children:(0,_.jsx)(l.Text,{className:(0,r.classnames)("iconfont-h5",{"icon-arrow-up":i,"icon-arrow-down":!i})})})},He=function(e){var i=e.reminderList,t=(0,o.useState)(!1),n=(0,oe.Z)(t,2),c=n[0],s=n[1],a=(0,o.useCallback)((function(){(0,Q.jq)(c?"c_unfold_flight_tip":"c_fold_flight_tip"),s(!c)}),[c]);if(null===i||void 0===i||!i.length)return null;var u=1===i.length;return(0,_.jsxs)(l.View,{className:Oe.noteInfoContainer,children:[(0,_.jsx)(l.View,{className:Oe.topBorder}),(0,_.jsxs)(l.View,{className:Oe.noteInfoContent,onClick:(0,r.trackFn)("onClick--5f9f3",(function(){(0,Q.jq)("REMINDER_".concat(c?"COLLAPSE":"EXPAND")),a()})),children:[(0,_.jsx)(Ae,{reminderList:i,isExpanded:c,isSingleNote:u}),(0,_.jsx)(De,{isExpanded:c})]})]})},Ue=t(1137),Ge={interMiddlePage:"index-module_oXEek",wFull:"index-module_eIM8J",CServiceBox:"index-module_BKVuG",interMiddleWrapper:"index-module_q3Uxq",linearGradientBox:"index-module_rylzU",simulatorTipContainer:"index-module_sUvWS"},We=function(e){var i,t=e.refetch,n=e.isError,o=e.isFetching,c=e.interMiddleData,s=e.dreamString,a=e.isHasTax,u=e.visitedPrice,d=(0,b.C)(w.kM),m=(0,b.C)(w.QY);if(o||!m)return(0,_.jsx)(Y.Z,{isInterMiddle:!0});var x=c||{},p=x.segs;if(n||null===p||void 0===p||!p.length){var g=n?"ERROR":"NO_RESULT";return(0,_.jsx)(z.Z,{state:g})}var f=c||{},h=f.fNoti,T=f.triptype,y=f.notes,v=f.pols,j=f.ftaglst,N=f.msgtoken,k=null===(i=r.R.find((function(e){return 6===e.notetype}),y||[]))||void 0===i?void 0:i.notes,C=1,I=(0,M.kO)(C,s,u);return(0,_.jsxs)(l.View,{children:[(0,_.jsx)(X.Y,{pageTitle:"\u51fa\u884c\u63d0\u9192",tripType:T,flightNotification:h,isMiddle:!0}),(0,_.jsx)(Ue.K,{flights:p}),(0,_.jsx)(l.View,{className:Ge.linearGradientBox,id:"note-info-box",children:(0,_.jsx)(He,{reminderList:k})}),(0,_.jsx)(Ee,{queryParams:I,sceneType:C,box:function(e){var i=e.children;return(0,_.jsx)(l.View,{className:Ge.simulatorTipContainer,children:i})}}),(0,_.jsx)(Re,{isHasTax:a,policies:v,flightTagList:j,messageToken:N,refetch:t,passengerType:d}),(0,_.jsx)(J.Z,{})]})},ze=(0,o.memo)(We),Xe=function(e){var i=e.setCurrentPageId;(0,o.useLayoutEffect)((function(){var e=(0,d.Vj)();return a.ZP.on(a.II,(function(e){i(e),s.ZP.report({pageId:e,key:"list-to-middle-inter",name:"\u5217\u8868\u9875\u5230\u4e2d\u95f4\u9875(\u56fd\u9645)"})}),e),function(){a.ZP.off(a.II,e)}}),[i]);var t=(0,c.R2)(),n=t.bottom,r=void 0===n?0:n;return(0,_.jsxs)(l.View,{className:Ge.interMiddlePage,children:[(0,_.jsx)(G.Z,{clsName:"list",pageName:"middle"}),(0,_.jsx)(l.View,{className:Ge.interMiddleWrapper,children:(0,_.jsxs)(l.View,{className:Ge.wFull,style:{paddingBottom:"".concat(140+r,"px")},children:[(0,_.jsx)(U,{children:function(e){var i=e.isFetching,t=e.isError,n=e.refetch,o=e.interMiddleData,l=e.dreamString,r=e.isHasTax,c=e.visitedPrice;return(0,_.jsx)(ze,{refetch:n,interMiddleData:o,isFetching:i,isError:t,dreamString:l,isHasTax:r,visitedPrice:c})}}),(0,_.jsx)(l.View,{className:Ge.CServiceBox,children:(0,_.jsx)(W.Z,{pageName:"\u56fd\u9645\u4e2d\u95f4\u9875"})})]})})]})},Ye=function(){return{}},Je={},Qe=(0,r.connect)(Ye,Je)(Xe),Ke=(0,u.Z)({})(Qe),$e={navigationBarTitleText:"\u643a\u7a0b\u673a\u7968",navigationBarTextStyle:"white",titleBarColor:"#0086f6",navigationStyle:"custom",usingComponents:{captcha:"/commonComponent/captcha_min/captcha","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};Page((0,n.createPageConfig)(Ke,"pages/flight/pages/interMiddle/index",{root:{cn:[]}},$e||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var i=function(i){return e(e.s=i)};e.O(0,[4499,2107,1216,8592],(function(){return i(45748)}));e.O()}]);
//# sourceMappingURL=index.js.map