"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[210],{6699:function(e,r,t){var a=t(32180),i=t(90201),n=t(71515),o=t(9361),s=t(9423),c=t(2059),l=t(74711),d=t(14140),u=t(14506),p=t(74498),m=t(75156),f=t(298),x=t(91425),R=t(92954),g=t(29557),j=t(17321),h=t(13612),v=t(24773),C=t(67107),y=t(22402),N=t(22276),Z=t(51173),b=t(32532),w=t(60452),P=function(e){var r=e.departureCodeArr,t=e.arrivalCodeArr,a=e.date,i=e.trafficNumber,n=e.journeyNo;return x.R.reduce((function(e,r){return[].concat((0,N.Z)(e),[(0,f.Z)((0,f.Z)({},x.R.mergeAll(r)),{},{segmentType:"FLIGHT",journeyNo:n,segmentNo:e.length+1,transitType:0})])}),[],x.R.transpose([x.R.map(x.R.objOf("departureCode"),r),x.R.map(x.R.objOf("arrivalCode"),t),x.R.map((function(e){return x.R.objOf("date",(0,x.dayjs)(e).format("YYYY-MM-DDTHH:mm:ss"))}),x.R.split(".",a)),x.R.map(x.R.objOf("trafficNumber"),x.R.split(".",i))]))},T=function(e){var r=(0,b.BD)(e),t=(0,b.BK)(r(["tripType","triptype","tripTypeParam"])),a=r(["dcode","dcity","dCityCodeParam"])||"",n=r(["acode","acity","aCityCodeParam"])||"",o=r(["ddate","dDateParam"])||"",s=r(["adate","aDateParam"])||"",c=r(["pid"])||"",l=r(["subclass"])||"",d=r(["price"])||"",u=r(["dfltno"])||"",p=r(["afltno"])||"",m=r(["searchKey"]);return(0,i.useMemo)((function(){var e;if(m)return null===(e=decodeURIComponent(m||""))||void 0===e?void 0:e.replace(/\s/g,"+");var r=c&&l?x.R.transpose([x.R.map(x.R.objOf("pid"),x.R.split(".",decodeURIComponent(c))),x.R.map(x.R.objOf("subclass"),x.R.split(".",l)),x.R.map(x.R.objOf("price"),x.R.split(".",d))]).map(x.R.mergeAll):[],i=x.R.split(".",a),f=x.R.split(".",n),R=[].concat((0,N.Z)(i.slice(1)),[f[0]]),g=(0,N.Z)(P({departureCodeArr:i,arrivalCodeArr:R,date:o,trafficNumber:u,journeyNo:1}));if(t===w.X9.ROUND_TRIP||f.length>1){var j=x.R.split(".",n),h=[].concat((0,N.Z)(j.slice(1)),[x.R.split(".",a)[0]]);g.push.apply(g,(0,N.Z)(P({departureCodeArr:j,arrivalCodeArr:h,date:s,trafficNumber:p,journeyNo:2})))}return(0,Z.h)(JSON.stringify({maxJourneyNo:(0,b.Ll)(t),searchJourneys:g,searchPolices:r}))}),[m,c,l,d,t,a,n,o,s,u,p])},_=t(9486),I=t(84211),B=t(89808),O=t(7138),V=t(65550),A=t(34954),D=t(55823),J=t(42658),S=t(85897),E=t(35232),F={"row-line":"index-module_JqGIl",middleWrapper:"index-module_JIaBD","iconfont-h5":"index-module_JZnBs","icon-close":"index-module_Eb5VM",MiddlePageNew:"index-module_IJk82",wFull:"index-module_UJTGi",CServiceBox:"index-module_dD4Na",midSkeletonBox:"index-module_yCV1v",cardBox:"index-module_WEDlV",navBarBox:"index-module_nT_rj",cardContainer:"index-module_m1toM",skeletonTop:"index-module_hejJT"},M=t(2269);function q(){var e=(0,g.Sl)("taroYoungVersion"),r=(0,R.useRouter)(),t=r.params,a=(0,C.C)(j.e_),i=(0,C.C)((function(e){return e.departure.cabin})),o=(0,C.C)((function(e){return e.arrival.cabin})),s="ONE_WAY"===a?[i]:[i,o],c=(0,C.C)(v.P),l=(0,C.C)(h.c7),d=T(t),u=V.Z.pageName.last===O.m8.FIRST;return(0,M.jsx)(y.ZP,{tripType:a,price:t.price,middleParams:{data:(0,f.Z)((0,f.Z)({},c),{},{searchKey:d}),extension:(0,A.nE)(t,s)},children:function(r){var t=r.isFetching,a=r.isError,i=r.notificationInfos,o=r.sections,c=r.tips,d=r.policies,p=r.refetch,m=r.fastTransNotes;if(t)return(0,M.jsx)(J.Z,{});if(a||!d.length){var f=a?"ERROR":"NO_RESULT";return(0,M.jsx)(I.Z,{state:f})}return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(_.Z,{notificationInfos:i}),(0,M.jsx)(E.Z,{userId:l,refetch:p}),(0,M.jsxs)(n.View,{children:[(0,M.jsx)(B.k,{tips:c,flights:o}),(0,M.jsx)(S.Z,{policies:d,flights:o,newPolicyVersion:e,cabinClasses:s,refetch:p})]}),u&&(0,M.jsx)(D.g,{notes:m})]})}})}var W=function(e){var r=e.setCurrentPageId;(0,i.useLayoutEffect)((function(){var e=(0,u.Vj)();return l.ZP.on(l.WI,(function(e){r(e),d.ZP.report({pageId:e,key:"list-to-middle",name:"\u5217\u8868\u9875\u5230\u4e2d\u95f4\u9875"})}),e),function(){l.ZP.off(l.WI,e)}}),[r]);var t=(0,o.R2)(),a=t.bottom,p=void 0===a?0:a;return(0,M.jsxs)(n.View,{className:F.MiddlePageNew,children:[(0,M.jsx)(c.Z,{clsName:"list",pageName:"middle"}),(0,M.jsx)(n.View,{className:F.middleWrapper,children:(0,M.jsxs)(n.View,{className:F.wFull,style:{paddingBottom:"".concat(140+p,"px")},children:[(0,M.jsx)(q,{}),(0,M.jsx)(n.View,{className:F.CServiceBox,children:(0,M.jsx)(s.Z,{pageName:"\u4e2d\u95f4\u9875"})})]})}),(0,M.jsx)(m.Z,{})]})},Y=(0,p.Z)({})(W),k={navigationBarTitleText:"\u643a\u7a0b\u673a\u7968",navigationBarTextStyle:"white",titleBarColor:"#0086f6",navigationStyle:"custom",usingComponents:{captcha:"/commonComponent/captcha_min/captcha","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};Page((0,a.createPageConfig)(Y,"pages/flight/pages/middle/index",{root:{cn:[]}},k||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var r=function(r){return e(e.s=r)};e.O(0,[4499,2107,1216,8592],(function(){return r(6699)}));e.O()}]);
//# sourceMappingURL=index.js.map