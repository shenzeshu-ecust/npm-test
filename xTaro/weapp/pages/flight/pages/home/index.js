"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6629],{90827:function(e,t,i){var a=i(32180),n=i(92954),s=i(60328),c=i(74498),r=i(14140),o=i(64676),l=i(90129),d=i(91425),u=i(90201),m=i(71515),p=i(29557),h=i(57042),f=i(24460),x=i(81876),g=i(21867),j=i(86066),N=i(45023),w=i(2269),_=function(e){(0,g.Z)(i,e);var t=(0,j.Z)(i);function i(){var e;(0,h.Z)(this,i);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n)),(0,N.Z)((0,x.Z)(e),"state",{show:!1}),e}return(0,f.Z)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.props.onLoad||function(){};setTimeout((function(){e.setState({show:!0},t)}),this.props.time)}},{key:"render",value:function(){return(0,w.jsx)(m.View,{children:this.state.show?this.props.children:null})}}]),i}(u.Component);_.defaultProps={time:150};var b=_,v=i(9423),y=i(34641),C=i(75156),T=i(97659),k=i(94892);function V(){(0,k.K4)({close:{position:"top-left"},content:(0,w.jsx)(m.View,{children:(0,w.jsx)(T.Z,{mode:"aspectFit",className:"img-disclaimer",src:"https://pages.ctrip.com/flight_h5/swift/hcxn-lxs-v2.jpg"})}),animationClassName:"animate__animated animate__slideInUp animate__faster",position:"bottom"})}function S(){return(0,w.jsx)(m.View,{children:(0,w.jsx)(m.View,{className:"container",children:(0,w.jsx)(m.View,{className:"row disclaimer-container",children:(0,w.jsx)(m.View,{className:"col disclaimer-wrap",onClick:(0,d.trackFn)("show--c498f",V),children:"\u673a\u7968\u9884\u8ba2\u63d0\u4f9b\u65b9\uff1a\u4e0a\u6d77\u534e\u7a0b\u897f\u5357\u56fd\u9645\u65c5\u884c\u793e\u6709\u9650\u516c\u53f8"})})})})}var I=S,Z=i(4091),F=i(18228),E=i(82761),O=i(72546),M=function(e){var t=e.tripType,i=e.departure,a=e.arrival,n={prd:"https://m.ctrip.com/webapp/cw/flight/flight-bundles/FHListPage.html",fat:"https://m.ares.fws.qa.nt.ctripcorp.com/webapp/cw/flight/flight-bundles/FHListPage.html"},c=n[(0,E.i)()],r="ROUND_TRIP"===t,o={from_page_code:s.lr,channel_type:1,trip_type:r?2:1,depart_city_id:i.cityId,depart_city_code:i.cityCode,depart_city_name:encodeURIComponent(i.cityName),arrive_city_code:a.cityCode,arrive_city_name:encodeURIComponent(a.cityName),depart_date:(0,d.dayjs)(i.date).format("YYYY/MM/DD"),arrive_date:r?(0,d.dayjs)(a.date).format("YYYY/MM/DD"):"",depart_airport:i.airportCode,arrive_airport:a.airportCode,arrive_city_id:a.cityId,class_grade:"ECONOMY"===i.cabin?"0001":"1100"},l=Object.keys(o).reduce((function(e,t){return o[t]&&(e[t]=o[t]),e}),{});(0,O.G)(c,{query:l})},A=i(93212),D=i(298),P=i(93652),R=i(7138);function U(e){return{name:e.cityName,code:e.cityCode,type:e.type||1,id:e.id}}function Y(e,t){return e.length?e.map((function(e){return U(e)})):[U(t)]}function z(e,t){return e.length?e:[{begin:t.date,end:t.date}]}function L(e,t){return(0,P.Fw)(e)?1:(0,P.SA)(e)||(0,P.rs)(e)&&t?2:1}function H(e,t,i,a){var n,s=e.depatureCity,c=e.arrivalCity,r=e.date,o=r.departDateRange,l=r.stayRange,u=r.weekDays;if((0,P.Fw)(a))n={departDateRange:[{begin:t.date,end:t.date}]};else if((0,P.SA)(a)){var m=(0,d.dayjs)(i.date).diff((0,d.dayjs)(t.date),"day")+1;n={departDateRange:[{begin:t.date,end:t.date}],stayRange:{min:m,max:m}}}else(0,P.rs)(a)&&(n={departDateRange:z(o,t),stayRange:l,weekDays:u});var p=(0,D.Z)((0,D.Z)({},R.AA.common),{},{fat:"https://m.ctrip.fat396.qa.nt.ctripcorp.com"}),h=p[(0,E.i)()]+"/webapp/flightactivity/muse/collection.html",f=(0,D.Z)((0,D.Z)({aCities:Y(c,i),dCities:Y(s,t)},n),{},{tripType:L(a,l),origin:1}),x=Object.keys(f).reduce((function(e,t){return"object"===(0,A.Z)(f[t])||Array.isArray(f[t])?e[t]=encodeURIComponent(JSON.stringify(f[t])):e[t]=f[t],e}),{});(0,O.G)(h,{query:x})}var W=i(50317),q=i(6941),B=i(71098),K=i(99531),G=new B.ZP({version:"2022-09-22",key:function(){return"searchHistory"},expires:function(){return 7*B.v0},default:function(){return[]}});function J(){var e=G.get();if(!e)return null;var t=(0,d.dayjs)().valueOf(),i=e.filter((function(e){var i=e||{},a=i.departTime;if(a){var n="".concat(a.slice(0,4),"/").concat(a.slice(4,6),"/").concat(a.slice(6,8)),s=(0,d.dayjs)(n).valueOf();return s>=t}return!1})).slice(0,5);return(0,K.jq)("update_history",i),G.set(i),i}function Q(e){var t=e.tripType,i=e.departCityCode,a=e.arriveCityCode;if(t&&i&&a){var n=G.get()||[],s=n.filter((function(e){return e?e.tripType!==t||e.departCityCode!==i||e.arriveCityCode!==a:null}));s.unshift(e),(0,K.jq)("save_history",s.slice(0,5)),G.set(s.slice(0,5))}}var X=i(88698),$=function(e){var t=e.children;return(0,w.jsx)(w.Fragment,{children:t})},ee=$,te=ee,ie=i(67107),ae=i(17321),ne=i(72713),se=i(49578),ce=i(92660),re=i(22772),oe=i(48935),le=i(54102),de=i(70958),ue=i(19479),me=i(13248),pe=i(75819),he=i(32532),fe=i(60452),xe=i(5644),ge=i(51070),je={switcher:"CabinSwitch-module_Nd8CQ",cabinSwitch:"CabinSwitch-module_vHJGO",left:"CabinSwitch-module_hccFv",right:"CabinSwitch-module_H4R9n",cabinTab:"CabinSwitch-module_aNO86",leftWidth:"CabinSwitch-module_TIkB2",rightWidth:"CabinSwitch-module_BHwDY",cabinTabSelected:"CabinSwitch-module_Lqqyx",cabinText:"CabinSwitch-module_Ve1qd"},Ne=function(e){var t=e.cabins,i=e.currentCabin,a=void 0===i?t[0].value:i,n=e.onChangeDepartureCabin,s=e.hidden,c=a===t[0].value;return(0,w.jsx)(m.View,{className:je.switcher,style:{display:s?"none":"block"},children:(0,w.jsx)(m.View,{className:"".concat(je.cabinSwitch," ").concat(c?je.left:je.right),children:t.length>0&&t.map((function(e,t){return(0,w.jsx)(m.View,{className:"".concat(je.cabinTab," ").concat(a===e.value?je.cabinTabSelected:""," ").concat(t?je.rightWidth:je.leftWidth),onClick:(0,d.trackFn)("".concat(e.name)+"--a0c79",(function(){n(e.value)})),children:(0,w.jsx)(m.Text,{className:je.cabinText,children:e.name})},"".concat(e.name))}))})})},we={container:"Cabin-module_jzTmI",domContainer:"Cabin-module_p6KT_",hidden:"Cabin-module_HcUik",cabinList:"Cabin-module_x3MkU",cabinItem:"Cabin-module_T1zIi",active:"Cabin-module_d9wZK",selected:"Cabin-module_n9fPK",cabin:"Cabin-module__SLKd",passenger:"Cabin-module_QRLIz",count:"Cabin-module_nnr_i",people:"Cabin-module_d8PLb",hotel:"Cabin-module_PFecv",txt:"Cabin-module_Zdu7o"};function _e(e){var t=e.setHotel,i=e.hotel,a=!0,n=(0,ie.C)(ae.Se),s=(0,ie.C)(ae.e_),c=(0,P.rs)(s),r=(0,ie.T)(),o=(0,p.lg)(),h=(0,l.Z)(o,1),f=h[0],x=ge.yc,g=(0,p.Sl)("jumpFlightPlusHotel"),j=(0,u.useMemo)((function(){return!(xe.t5||f||c)&&(!!a&&g)}),[a,g,f,c]),_=function(e){f&&"ECONOMY"!==e?(0,d.showToast)({title:"\u6a21\u7cca\u67e5\u8be2\uff08\u56fd\u5bb6\u3001\u7701\u4efd\u3001\u591a\u57ce\u5e02\uff09\u4ec5\u652f\u6301\u7ecf\u6d4e\u8231\u67e5\u8be2\uff0c\u53ef\u5355\u9009\u57ce\u5e02\u540e\u67e5\u8be2"}):((0,F.jq)("c_change_cabin",{cabin:e}),r((0,ce.jW)(e)))};return(0,w.jsxs)(m.View,{className:(0,d.classnames)(we.domContainer,(0,N.Z)({},we.hidden,c)),children:[(0,w.jsx)(Ne,{cabins:x,currentCabin:n,onChangeDepartureCabin:_,hidden:c}),j&&(0,w.jsxs)(m.View,{className:we.hotel,onClick:(0,d.trackFn)("onClick--c82a2",(function(){(0,F.jq)("c_change_hotel",{hotel:!i}),t(!i)})),children:[(0,w.jsx)(m.Text,{className:"iconfont-h5 ".concat(i?"icon-selected  ".concat(we.selected):"icon-unselected")}),(0,w.jsx)(m.Text,{className:we.txt,children:"\u673a\u7968+\u9152\u5e97"})]})]})}var be=i(22276),ve=function(e,t){var i=(0,u.useState)(!0),a=(0,l.Z)(i,2),s=a[0],c=a[1];(0,n.useDidShow)((function(){c(!0)})),(0,n.useDidHide)((function(){c(!1)})),(0,u.useEffect)((function(){s&&e()}),[s].concat((0,be.Z)(t||[])))},ye=function(e){var t=e.currentCabin,i=e.cabins,a=e.onChangeDepartureCabin;(0,F.jq)("c_cabin");var n=(0,k.K4)({close:{position:"top-left"},title:"\u9009\u62e9\u8231\u4f4d",content:(0,w.jsx)(m.View,{catchMove:!0,className:we.popContainer,children:(0,w.jsx)(m.View,{className:we.cabinList,children:i.map((function(e){var i=Array.isArray(e.value)?e.value.includes(t):t===e.value;return(0,w.jsxs)(m.View,{className:"".concat(we.cabinItem," ").concat(i?we.active:""),onClick:(0,d.trackFn)(e.value+"--c69d0",(function(){a(e.value),(0,k.Mr)(n)})),children:[e.name,i&&(0,w.jsx)(T.Z,{className:we.selected,src:"https://pages.c-ctrip.com/flight_h5/tinyapp/icons/index-searchcard/icon-layer-choose.svg"})]},e.value)}))})}),position:"bottom",style:{height:"60vh"}})},Ce={stepper:"Stepper-module_qrHFk","stepper-minus":"Stepper-module_MFnfQ",disable:"Stepper-module_qO_d2","stepper-num":"Stepper-module_7DmCu","stepper-plus":"Stepper-module_O482G"},Te=function(e){var t=e.value,i=e.disableMinus,a=e.onChangeCount,n=e.disablePlus,s=(0,u.useCallback)((function(){a(t-1)}),[a,t]),c=(0,u.useCallback)((function(){a(t+1)}),[a,t]);return(0,w.jsxs)(m.View,{className:Ce.stepper,children:[(0,w.jsx)(m.View,{className:(0,d.classnames)(Ce["stepper-minus"],(0,N.Z)({},Ce.disable,i)),onClick:(0,d.trackFn)("minusValue--b1dfe",s),"data-testid":"minus-value"}),(0,w.jsx)(m.Label,{className:Ce["stepper-num"],children:t}),(0,w.jsx)(m.View,{className:(0,d.classnames)(Ce["stepper-plus"],(0,N.Z)({},Ce.disable,n)),onClick:(0,d.trackFn)("plusValue--84aa0",c),"data-testid":"plus-value"})]})},ke=Te,Ve={"psg-list":"COptions-module_hT_UV","psg-item":"COptions-module_NIctT","psg-type":"COptions-module_WI2b0","psg-people":"COptions-module_tbsH8","psg-hint":"COptions-module_pYznV","psg-warning":"COptions-module_Z5FEy","psg-circle":"COptions-module_LnNlY","psg-tips":"COptions-module_FX2aW","psg-button":"COptions-module_OM5Gn"},Se=function(e,t){var i=9,a={child:2*e,infant:e};return e+a[t]<=i?a[t]:i-e},Ie=function(e,t){return{child:function(){return{min:0,max:Se(t,"child")}},infant:function(){return{min:0,max:Se(t,"infant")}}}[e]()},Ze=function(e){(0,g.Z)(i,e);var t=(0,j.Z)(i);function i(e){var a;(0,h.Z)(this,i),a=t.call(this,e),(0,N.Z)((0,x.Z)(a),"getPersonStatus",(function(){var e=a.state,t=e.items[0]&&e.items[0].val||1,i=e.items[1]&&e.items[1].val||0,n=e.items[2]&&e.items[2].val||0,s=t+i+n;e.items[0].disableMinus=t<=1,e.items[1].disableMinus=i<=0,e.items[2].disableMinus=n<=0,s>=9&&(0===i&&0===n?(e.items[0].disablePlus=!0,e.items[1].disablePlus=!0,e.items[2].disablePlus=!0):(e.items[0].disablePlus=!1,e.items[1].disablePlus=i>0,e.items[2].disablePlus=n>0)),a.setState({items:e.items})})),(0,N.Z)((0,x.Z)(a),"onChangeCount",(function(e,t){var i=-1;switch(e){case"adult":i=0;break;case"child":i=1;break;case"infant":i=2;break;default:break}a.beforeChange(i,t)&&a.onChange(i,t)})),(0,N.Z)((0,x.Z)(a),"beforeChange",(function(e,t){var i,n=a.state;if(0===e)return t>=9?(n.items[0].disablePlus=!0,n.items[1].disablePlus=!0,n.items[2].disablePlus=!0,n.items[1].disableMinus=!0,n.items[2].disableMinus=!0):(n.items[0].disablePlus=!1,n.items[1].disablePlus=!!(n.items[1]&&t+n.items[1].val>=9),n.items[2].disablePlus=!!(n.items[2]&&t+n.items[2].val>=9)),n.items[0].disableMinus=t<=1,a.setState({items:n.items}),!(t>9||t<1);var s=n.items[0].val;return 1===e?(i=Ie("child",s).max,9===s?(n.items[1].disableMinus=!0,n.items[1].disablePlus=!0):(n.items[1].disableMinus=t<=0,n.items[1].disablePlus=t>=i),a.setState({items:n.items}),t>i?(a.setState({warningTips:t+s<9?"\u6bcf\u540d\u6210\u4eba\u6700\u591a\u643a\u5e262\u540d\u513f\u7ae5\u4e58\u673a":""}),!1):!(t>i||t<0)):2===e?(i=Ie("infant",s).max,9===s?(n.items[2].disableMinus=!0,n.items[2].disablePlus=!0):(n.items[2].disableMinus=t<=0,n.items[2].disablePlus=t>=i),a.setState({items:n.items}),t>i?(a.setState({warningTips:t+s<9?"\u6bcf\u540d\u6210\u4eba\u6700\u591a\u643a\u5e261\u540d\u5a74\u513f\u4e58\u673a":""}),!1):!(t>i||t<0)):void 0})),(0,N.Z)((0,x.Z)(a),"onChange",(function(e,t){var i=a.state,n="";0===e&&(i.items[0].val=t,i.items.forEach((function(e,i){i<1||(e.max=Ie(e.type,t).max,e.val>0&&e.val>e.max&&(e.val=e.max))}))),1===e&&(n=i.items[2].val>0?"\u513f\u7ae5\u3001\u5a74\u513f\u540c\u65f6\u9884\u8ba2\u8bf7\u4e0b\u8f7d\u643a\u7a0bapp":"",i.items[2].val=0,i.items[2].disableMinus=!0,i.items[2].disablePlus=!1,i.items[1].val=t),2===e&&(n=i.items[1].val>0?"\u513f\u7ae5\u3001\u5a74\u513f\u540c\u65f6\u9884\u8ba2\u8bf7\u4e0b\u8f7d\u643a\u7a0bapp":"",i.items[1].val=0,i.items[1].disableMinus=!0,i.items[1].disablePlus=!1,i.items[2].val=t),a.setState({items:i.items,warningTips:n})})),(0,N.Z)((0,x.Z)(a),"onConfirmPassenger",(function(){(0,K.jq)("c_flt_tinyapp_home_search_passenger");var e=a.state,t={ADULT:e.items[0].val,CHILD:e.items[1].val,INFANT:e.items[2].val};a.props.onConfirmPassenger(t)}));var n=e.passenger,s=n.ADULT,c=void 0===s?1:s,r=n.CHILD,o=void 0===r?0:r,l=n.INFANT,d=void 0===l?0:l;return a.state={items:[{type:"adult",name:"\u6210\u4eba",hint:"12\u5c81\u4ee5\u4e0a\u9700\u8d2d\u4e70\u6210\u4eba\u7968",val:c,min:1,max:9,disableMinus:!1,disablePlus:!1},{type:"child",name:"\u513f\u7ae5",hint:"2-12\u5c81\uff08\u4e0d\u542b12\u5c81\uff09",val:o,min:0,max:2,disableMinus:!1,disablePlus:!1},{type:"infant",name:"\u5a74\u513f",hint:"14\u5929-2\u5c81\uff08\u4e0d\u542b2\u5c81\uff09",val:d,min:0,max:1,disableMinus:!1,disablePlus:!1}],warningTips:""},a}return(0,f.Z)(i,[{key:"componentDidMount",value:function(){this.getPersonStatus()}},{key:"render",value:function(){var e=this,t=this.state,i=t.items,a=t.warningTips,n=-1===(null===a||void 0===a?void 0:a.indexOf("app"));return(0,w.jsxs)(m.View,{children:[(0,w.jsx)(m.View,{className:Ve["psg-list"],children:i.map((function(t){return(0,w.jsxs)(m.View,{className:Ve["psg-item"],children:[(0,w.jsxs)(m.View,{className:Ve["psg-type"],children:[(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-"+t.type}),(0,w.jsxs)(m.View,{className:Ve["psg-people"],children:[t.name,(0,w.jsx)(m.Label,{className:Ve["psg-hint"],children:t.hint})]})]}),(0,w.jsx)(ke,{disableMinus:t.disableMinus,value:t.val,disablePlus:t.disablePlus,onChangeCount:function(i){return e.onChangeCount(t.type,i)}})]},t.type)}))}),n&&a&&(0,w.jsxs)(m.View,{className:Ve["psg-warning"],children:[(0,w.jsx)(m.View,{className:Ve["psg-circle"]}),(0,w.jsx)(m.View,{className:Ve["psg-tips"],children:a})]}),(0,w.jsx)(m.View,{className:Ve["psg-button"],onClick:(0,d.trackFn)("onConfirmPassenger--d48bf",this.onConfirmPassenger),"data-testid":"on-confirm-passenger",children:"\u786e\u5b9a"})]})}}]),i}(u.Component),Fe=Ze,Ee=function(e){var t=e.passenger,i=e.confirmPassenger,a=(0,k.K4)({close:{position:"top-left"},title:"\u9009\u62e9\u4e58\u5ba2",content:(0,w.jsx)(Fe,{passenger:t,onConfirmPassenger:function(e){i(e),(0,k.Mr)(a)}}),position:"bottom"})};function Oe(e){var t,i=e.passenger,a=e.confirmPassenger,n=(0,ie.C)(ae.uV),s=(0,ie.T)(),c=(0,p.lg)(),r=(0,l.Z)(c,1),o=r[0],h=(0,ie.C)(ae.e_),f=(0,P.rs)(h),x=(0,p.Sl)("useMiniInternationalAlipay"),g=(0,p.Sl)("useMiniInternationalSwan"),j=(0,u.useMemo)((function(){return!!["weapp"].includes("weapp")||(!(!["alipay"].includes("weapp")||!x)||!(!["swan"].includes("weapp")||!g))}),[x,g]);ve((function(){j?["ECONOMY","SUPER_ECONOMY"].includes(n)&&s((0,le.dS)("ECONOMY\u3001SUPER_ECONOMY")):["ECONOMY\u3001SUPER_ECONOMY","BUSINESS\u3001FIRST"].includes(n)&&s((0,le.dS)("ECONOMY"))}),[s,j,n]);var _=j?ge.AZ:ge.Yd,b=null===(t=[].concat((0,be.Z)(ge.AZ),(0,be.Z)(ge.Yd)).find((function(e){return e.value===n||Array.isArray(e.value)&&e.value.some((function(e){return e===n}))})))||void 0===t?void 0:t.name,v=function(e){(0,F.jq)("c_change_cabin",{cabin:e});var t=Array.isArray(e)?e[0]:e;s((0,le.dS)(t))};return(0,w.jsxs)(m.View,{className:(0,d.classnames)(we.domContainer,(0,N.Z)({},we.hidden,f)),children:[(0,w.jsx)(m.View,{className:we.cabin,style:{display:f?"none":"block"},onClick:(0,d.trackFn)("onClick--ff25a",(function(){o?(0,d.showToast)({title:"\u6a21\u7cca\u67e5\u8be2\uff08\u56fd\u5bb6\u3001\u7701\u4efd\u3001\u591a\u57ce\u5e02\uff09\u4ec5\u652f\u6301\u7ecf\u6d4e\u8231\u67e5\u8be2\uff0c\u53ef\u5355\u9009\u57ce\u5e02\u540e\u67e5\u8be2"}):ye({cabins:_,currentCabin:n,onChangeDepartureCabin:v})})),children:b}),!(o||f)&&(0,w.jsxs)(m.View,{"data-testid":"passenger",className:we.passenger,onClick:(0,d.trackFn)("onClick--a8534",(function(){return Ee({passenger:i,confirmPassenger:a})})),children:[(0,w.jsx)(m.Text,{className:we.count,style:{marginLeft:0},children:i.ADULT}),(0,w.jsx)(m.Text,{className:we.people,children:"\u6210\u4eba"}),(0,w.jsx)(m.Text,{className:we.count,children:i.CHILD}),(0,w.jsx)(m.Text,{className:we.people,children:"\u513f\u7ae5"}),(0,w.jsx)(m.Text,{className:we.count,children:i.INFANT}),(0,w.jsx)(m.Text,{className:we.people,children:"\u5a74\u513f"})]})]})}var Me=function(e){var t=e.regionType,i=e.setHotel,a=e.hotel,n=e.passenger,s=e.confirmPassenger;return t===fe.Og.DOMESTIC?(0,w.jsx)(_e,{setHotel:i,hotel:a}):t===fe.Og.INTERNATIONAL?(0,w.jsx)(Oe,{passenger:n,confirmPassenger:s}):null},Ae=Me;function De(e,t){var i=0;switch(e){case"ROUND_TRIP":i=t?37.5:50;break;case"SPECIAL_OFFERS":i=75;break;case"ONE_WAY":default:break}return i}var Pe=function(e){var t=e.tripType,i=e.onChangeTripType,a=e.changeRoundTrip,n=e.inSpecialTest;return(0,w.jsx)(m.View,{className:"tripType-switch-new",children:(0,w.jsxs)(m.View,{className:"switch-content",children:[(0,w.jsx)(m.View,{className:(0,d.classnames)("item left-border ",{active:"ONE_WAY"===t}),onClick:(0,d.trackFn)("onClick--83d72",(function(){return i("ONE_WAY")})),children:"\u5355\u7a0b"}),(0,w.jsx)(m.View,{className:(0,d.classnames)("item ",{active:"ROUND_TRIP"===t,"left-border":!n}),onClick:(0,d.trackFn)("changeRoundTrip--39607",a),children:"\u5f80\u8fd4"}),n&&(0,w.jsx)(m.View,{className:(0,d.classnames)("item item-special ",{active:"SPECIAL_OFFERS"===t}),onClick:(0,d.trackFn)("onClick--b8f6b",(function(){return i("SPECIAL_OFFERS")})),children:"\u7279\u4ef7\u673a\u7968"}),(0,w.jsx)(m.View,{className:"scrollbar-wrap",children:(0,w.jsxs)(m.View,{className:"scrollbar-animation",style:{transform:"translateX(".concat(De(t,n),"%)")},children:[(0,w.jsx)(T.Z,{className:"before-way",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/tab_corner.png"}),(0,w.jsx)(m.View,{className:"middle-way",style:{width:(n?25:50)+"%"}}),(0,w.jsx)(T.Z,{className:"after-way",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/tab_corner.png"})]})})]})})},Re=(0,u.memo)(Pe),Ue=Re,Ye=i(79301),ze=i(95308),Le=i(29465),He=i(95260),We=new Le.Z({name:"FLIGHT_SCHEDULE",needLogin:!0,mini:"/pages/flightschedule/pages/detail/detail",h5:function(){var e=(0,D.Z)((0,D.Z)({},R.AA.common),{},{fat:"https://m.fat35.qa.nt.ctripcorp.com"})[(0,E.i)()]||R.AA.common.prd;return e+"/webapp/flight/schedule/detail.html"},target:{mini:He.t.mini,h5:He.t.h5}},{prefix:""}),qe=new Le.Z({name:R.m8.ORDER_LIST,needLogin:!0,mini:'/pages/myctrip/list/list?data={"id":"flight","biz":"Flight","name":"\u673a\u7968"}',h5:function(){var e=R.AA.common[(0,E.i)()]||R.AA.common.prd,t={biz:encodeURIComponent("Flight")};return(0,xe.Ov)()&&(t.showfilter=0),(0,xe.mM)()&&(t.showhead=0,t.showfilter=0),{url:"".concat(e,"/webapp/myctrip/orders/flightorderlist"),query:t}},target:{mini:He.t.mini,h5:He.t.h5}},{prefix:""});function Be(){var e=(0,D.Z)((0,D.Z)({},R.AA.common),{},{fat:"https://m.fat36.qa.nt.ctripcorp.com"}),t=e[(0,E.i)()]+"/webapp/flight/checkin/listnext.html";(0,O.G)(t,{query:{origin:91}})}var Ke=i(53052),Ge=new Le.Z({name:"SUBSCRIPTION_LIST",needLogin:!0,mini:"/pages/flightLowPrice/pages/list/index",h5:function(){var e=(0,D.Z)((0,D.Z)({},R.AA.common),{},{fat:"https://m.ctrip.fat3.qa.nt.ctripcorp.com"})[(0,E.i)()]||R.AA.common.prd;return{url:e+"/webapp/flight/lowprice/list",opt:{isNavigate:!1}}},target:{mini:He.t.mini,h5:He.t.h5}},{prefix:""}),Je=new Le.Z({name:"SUBSCRIPTION_DETAIL",needLogin:!0,mini:"/pages/flightLowPrice/pages/detail/index",h5:function(){var e=(0,D.Z)((0,D.Z)({},R.AA.common),{},{fat:"https://m.ctrip.fat3.qa.nt.ctripcorp.com"})[(0,E.i)()];return{url:e[(0,E.i)()]+"/webapp/cw/flight/lowprice_subscribe/lowPriceEdit.html",opt:{isNavigate:!1}}},target:{mini:He.t.mini,h5:He.t.h5}},{prefix:""}),Qe=function(e){var t=e.cityCode,i=e.cityName,a=e.regionType,n=e.cityId;return{code:t,name:i,cityType:{DOMESTIC:1,INTERNATIONAL:2}[a||""]||1,areaType:2,id:n}},Xe=function(){var e=(0,ie.C)(ae.e_),t=(0,ie.C)(ae.wQ),i=(0,ie.C)(ae.wG);return(0,u.useCallback)((function(){var a=Qe(t),n=Qe(i);Ge.jump({originSource:"tinyapphomebar",pageParams:JSON.stringify({tripType:{ONE_WAY:1,ROUND_TRIP:2}[e]||1,departCities:[a],arrivalCities:[n],departDate:t.date,returnDate:i.date})})}),[e,t,i])},$e=function(){var e=(0,ie.C)(ae.e_),t=(0,ie.C)(ae.R1),i=(0,ie.C)(ae.Wt),a=(0,ie.C)(ae.Fo),n=(0,ie.C)(ae.PM),s=(0,ie.C)(ae.pW),c=(0,ie.C)(ae.sq),r=(0,ie.C)(ae.cY),o=(0,ie.C)(ae.ww);return(0,u.useCallback)((function(){var l="ONE_WAY"!==e,d="INTERNATIONAL"===a,u="INTERNATIONAL"===n;(0,O.G)((0,Ke.Nv)({url:"https://m.ctrip.com/webapp/cw/flight/lowprice_subscribe/lowPriceEdit.html",query:{originSource:"tinyapphomebar",bpushdate:s||"",epushdate:l?"":c||"",rbpushdate:l&&c||"",depname:t||"",arrname:r||"",depcode:i||"",arrcode:o||"",rtflag:l?1:0,sflag:d&&u?3:d?1:u?2:0,isEdit:!0}}))}),[e,t,i,a,s,r,o,n,c])},et=i(89188),tt=i(41179),it=(0,tt.Z)({ServiceCode:"77880011",url:"/13378/FlightLowPriceSubscriptionListSearch"});(0,tt.Z)({url:"/13378/FltLowPricePriceForecast"}),(0,tt.Z)({url:"/13378/FlightLowPriceSubscriptionUpdate"});function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return it.promise((0,D.Z)({stype:0},e)).then((function(e){if(null!==e&&void 0!==e&&e.airlines&&e.airlines.length){var t=[],i=[];return e.airlines.forEach((function(e){var a=(0,D.Z)((0,D.Z)({},e),{},{bpushdateTitle:(0,d.dayjs)(e.bpushdate).format("MM-DD"),epushdateTitle:(0,d.dayjs)(e.epushdate).format("MM-DD")});e.lprice&&i.push(a),!e.lprice&&t.push(a)})),[].concat(i,t)}})).catch((function(){return[]}))}var nt=i(60933),st=function(){(0,F.jq)("c_flt_tinyapp_home_search_flightassistant"),We.jump()};function ct(){var e=(0,nt._n)(),t=(0,u.useCallback)((0,ze.Z)((0,Ye.Z)().mark((function t(){return(0,Ye.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((0,F.jq)("c_flt_tinyapp_home_search_order"),e){t.next=4;break}return t.next=4,(0,et.x)();case 4:qe.jump();case 5:case"end":return t.stop()}}),t)}))),[e]),i=(0,u.useCallback)((0,ze.Z)((0,Ye.Z)().mark((function t(){return(0,Ye.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((0,F.jq)("c_flt_tinyapp_home_search_checkin"),e){t.next=4;break}return t.next=4,(0,et.x)();case 4:Be();case 5:case"end":return t.stop()}}),t)}))),[e]),a=$e(),n=Xe(),s=(0,u.useCallback)((0,ze.Z)((0,Ye.Z)().mark((function t(){var i;return(0,Ye.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((0,F.jq)("c_flt_tinyapp_home_search_subscription"),e){t.next=4;break}return t.next=4,(0,et.x)();case 4:return t.next=6,at({noCache:!0}).catch((function(e){(0,F.rb)(e)}));case 6:i=t.sent,(0,F.jq)("c_flt_tinyapp_home_search_lowprice",{length:null===i||void 0===i?void 0:i.length}),null!==i&&void 0!==i&&i.length?n():a();case 9:case"end":return t.stop()}}),t)}))),[e,n,a]),c=!0,r=!0;return c&&r?null:(0,w.jsxs)(m.View,{className:"row entrance-wrap",children:[!xe.Yo&&(0,w.jsx)(m.View,{className:"col entrance-item","data-testid":"to-order-list",onClick:(0,d.trackFn)("onClickOrderCallback--2f2a5",t),children:"\u673a\u7968\u8ba2\u5355"}),!xe.KE&&(0,w.jsx)(m.View,{className:"col entrance-item",onClick:(0,d.trackFn)("onClickDynamic--99d14",st),children:"\u822a\u73ed\u52a9\u624b"}),!xe.$F&&(0,w.jsx)(m.View,{className:"col entrance-item","data-testid":"to-check-in",onClick:(0,d.trackFn)("onClickCheckInCallback--9a0c7",i),children:"\u5728\u7ebf\u9009\u5ea7"}),!xe.In&&(0,w.jsx)(m.View,{className:"col entrance-item",onClick:(0,d.trackFn)("onClick--1f460",(function(){s()})),children:"\u4f4e\u4ef7\u8ba2\u9605"}),!xe.W4&&!1]})}var rt=ct,ot=rt,lt=function(e){return e.some((function(e){return e.isTheme}))},dt=function(){var e=(0,ie.C)(ae.e_),t=(0,ie.C)(ae.wQ),i=(0,ie.C)(ae.pW),a=(0,ie.C)(ae.Wt),s=(0,ie.C)(ae.Fo),c=(0,ie.C)(ae.KX),r=(0,ie.C)(ne.Fg),o=(0,ie.C)(ne.K),h=(0,ie.C)(ne.sP),f=(0,ie.C)(ne.e5),x=(0,p.lg)(),g=(0,l.Z)(x,2),j=g[0],N=g[1],_=(0,ie.C)(ae.wG),b=(0,ie.C)(ae.sq),v=(0,ie.C)(ae.ww),y=(0,ie.C)(ae.PM),C=(0,ie.C)(ae.VL),k=(0,ie.C)(ae._H),V=(0,ne.wV)(N),S=(0,ie.C)(V),I=(0,ae.Ae)(S),E=(0,ie.C)(I),O=(0,ie.C)(ae.kM),A=(0,ie.T)(),D=(0,u.useState)(!1),R=(0,l.Z)(D,2),U=R[0],Y=R[1],z=(0,u.useState)(!1),L=(0,l.Z)(z,2),B=L[0],K=L[1],G=(0,u.useState)(O||{ADULT:1,CHILD:0,INFANT:0}),J=(0,l.Z)(G,2),$=J[0],ee=J[1],xe=(0,P.rs)(e);(0,n.useDidShow)((function(){K(!1)})),(0,u.useEffect)((function(){!a||!v||a!==v||null!==C&&void 0!==C&&C.find((function(e){return e.name===a}))||A((0,ue.tl)(a))}),[a,v,A,C]);var ge=lt(r)||lt(o),je=(0,u.useCallback)((function(){if(!U&&!ge){r.length>0&&o.length>0?(A((0,de.jz)(o)),A((0,de.hO)(r))):r.length>0&&!o.length?(A((0,de.jz)([_])),A((0,de.hO)(r))):!r.length&&o.length>0?(A((0,de.jz)(o)),A((0,de.hO)([t]))):(A((0,oe.oC)(t)),A((0,ce.b7)(_))),Y(!0);var e=setTimeout((function(){Y(!1),clearTimeout(e)}),250)}}),[_,t,ge,A,o,r,U]),Ne=(0,u.useCallback)((function(t,i){var a=t.cityInfo,n=t.sideRegionType,c=void 0===n?"":n,r="DEPARTURE"===i,o=r?de.jz:de.hO;(0,F.jq)(r?"c_flt_tinyapp_home_search_departure":"c_flt_tinyapp_home_search_arrive"),(0,W.d)({title:"\u9009\u62e9".concat(r?"\u51fa\u53d1":"\u5230\u8fbe","\u57ce\u5e02"),regionType:c,tripType:e,cityInfo:a,sideName:i,from:"HOME"}).then((function(e){if(e){var t=e;if(Array.isArray(e)&&1===e.length&&(t=e[0]),e.isTheme&&(t=[e]),Array.isArray(t))return A(o(t)),void((0,P.tK)(E)||(S===fe.Og.DOMESTIC?A((0,ce.jW)(he.TP.cabin.value)):A((0,le.dS)(he.TP.cabin.value)),(0,d.showToast)({title:"\u6682\u4e0d\u652f\u6301\u516c\u52a1\u8231/\u5934\u7b49\u8231\u67e5\u8be2\uff0c\u5df2\u4e3a\u60a8\u5207\u6362\u4e3a\u7ecf\u6d4e\u8231"})));var i=r?[t.regionType,y]:[s,t.regionType],a=me.B.apply(void 0,i);a!==S&&A((0,ce.jW)(he.TP.cabin.value)),A(o([])),A(r?(0,ce.b7)(t):(0,oe.oC)(t))}}))}),[y,E,s,A,S,e]),we=(0,u.useCallback)((function(){(0,F.jq)("ONE_WAY"===e?"c_flt_tinyapp_home_search_date":"c_flt_tinyapp_home_search_ddate"),(0,q.j)({inSpecial:xe,departureCityCode:a,arrivalCityCode:v,departureDate:i,arrivalDate:b,regionType:S,tripType:e}).then((function(t){t&&((0,P.rs)(e)&&t.fuzzy?A((0,de.wP)(t)):(A((0,de.n1)()),A((0,ce.AO)(t.start)),t.end&&A((0,oe.FS)(t.end))))}))}),[v,b,a,i,A,xe,S,e]),_e=(0,pe.l)(),be=(0,u.useCallback)((function(){if(j||xe)H(f,t,_,e);else{if(a===v){var n=(0,X.E)(e,C,a);if(!n)return}if(B)return(0,F.jq)("c_to_flight_plus_hotel"),void M({tripType:e,departure:t,arrival:_});A((0,re.wl)($)),_e(S,"navigateTo",$);var s=i&&(0,d.dayjs)(i),c=b&&(0,d.dayjs)(b),r=s&&s.isValid()?s.format("YYYYMMDD"):"",o=c&&c.isValid()?c.format("YYYYMMDD"):"";Q({departCityCode:a||"",arriveCityCode:v||"",departTime:r,returnTime:o,flightType:"DOMESTIC"===S?1:2,tripType:"ONE_WAY"===e?1:2})}}),[j,xe,a,v,B,A,$,_e,S,i,b,e,f,t,_,C]),ve=(0,u.useCallback)((function(e){(0,F.jq)("c_change_home_search_triptype",{tripType:e}),A((0,se.mA)(e))}),[A]);(0,u.useEffect)((function(){N||"SPECIAL_OFFERS"!==e||ve("ONE_WAY")}),[N,ve,e]);var ye=function(){if(ve("ROUND_TRIP"),!(0,d.dayjs)(i).isSameOrBefore((0,d.dayjs)(b),"day")){var e=(0,d.dayjs)(i).add(2,"day").format("YYYY-MM-DD");A((0,oe.FS)(e))}},Ce=(0,u.useMemo)((function(){return(0,d.dayjs)(b).diff(i,"day")+1}),[b,i]),Te=function(e,t){return e.length>0?e.map((function(e){return e.cityName})).join(","):t},ke=function(){var e=(0,w.jsxs)(w.Fragment,{children:[(0,d.dayjs)(i).format("M\u6708D\u65e5"),(0,w.jsx)(m.Text,{className:"date-tag",children:(0,Z.eV)(i)})]});if(!xe)return e;var t=h||{},a=t.departDateRange,n=void 0===a?[]:a,s=t.weekDays,c=void 0===s?[]:s,r=t.stayRange,o=[];n.length&&o.push(n.map((function(e){return e.title})).join("\u3001")),null!==c&&void 0!==c&&c.length&&o.push(c.map((function(e){return"\u5468"+e.title})).join("\u3001"));var l=r||{},u=l.min,p=l.max;return u&&p&&o.push("".concat(u,"~").concat(p,"\u5929")),o.length?(0,w.jsx)(m.Text,{children:o.filter(Boolean).join(" | ")}):e},Ve=r.length>0||o.length>0;return(0,w.jsx)(m.View,{className:"search-wizard-container",children:(0,w.jsxs)(m.View,{className:"search-wizard",children:[(0,w.jsx)(m.View,{className:"container ",children:(0,w.jsx)(m.View,{className:"row",children:(0,w.jsx)(Ue,{tripType:e,onChangeTripType:ve,changeRoundTrip:ye,inSpecialTest:N})})}),(0,w.jsx)(m.View,{className:"card",children:(0,w.jsx)(m.View,{className:"card-body pt-0",children:(0,w.jsxs)(m.View,{className:"container container-wrap",children:[(0,w.jsx)(m.View,{className:(0,d.classnames)("row city-wrap",{"switch-city":U,"small-font":Ve,disable:ge}),children:(0,w.jsxs)(te,{children:[(0,w.jsx)(m.View,{className:"col departure-city","data-testid":"u_departure_city",onClick:(0,d.trackFn)("onClick--58180",(function(){return Ne(r.length>0?{cityInfo:encodeURIComponent(JSON.stringify(r))}:{cityInfo:encodeURIComponent(JSON.stringify(t)),sideRegionType:s},"DEPARTURE")})),children:Te(r,c)}),(0,w.jsxs)(m.View,{className:"col-2 switch-icon","data-testid":"u_switch_city",onClick:(0,d.trackFn)("onSwitchCity--d6d46",je),children:[(0,w.jsx)(T.Z,{className:"outside-icon",src:"https://pages.c-ctrip.com/flight_h5/swift/home/city_switch_circle.png"}),(0,w.jsx)(T.Z,{className:"inner-icon",src:"https://pages.c-ctrip.com/flight_h5/swift/home/city_switch_icon.png"})]}),(0,w.jsx)(m.View,{className:"col arrival-city","data-testid":"u_arrival_city",onClick:(0,d.trackFn)("onClick--9752f",(function(){return Ne(o.length>0?{cityInfo:encodeURIComponent(JSON.stringify(o))}:{cityInfo:encodeURIComponent(JSON.stringify(_)),sideRegionType:y},"ARRIVAL")})),children:Te(o,k)})]})}),(0,w.jsxs)(m.View,{className:(0,d.classnames)("row date-wrap"),children:[(0,w.jsx)(te,{children:(0,w.jsx)(m.View,{className:"col ellipsis","data-testid":"u_departure_date",onClick:(0,d.trackFn)("onClick--ab958",(function(){return we()})),children:xe?(0,w.jsx)(m.Text,{children:ke()}):(0,w.jsxs)(w.Fragment,{children:[(0,d.dayjs)(i).format("M\u6708D\u65e5"),(0,w.jsx)(m.Text,{className:"date-tag",children:(0,Z.eV)(i)})]})})}),(0,w.jsx)(m.View,{className:"col-1 interval",style:{display:"ROUND_TRIP"===e?"":"none"},children:"".concat(Ce," \u5929")}),(0,w.jsx)(te,{children:(0,w.jsxs)(m.View,{className:"col text-right","data-testid":"u_arrival_date",onClick:(0,d.trackFn)("onClick--bd841",(function(){return we()})),style:{display:"ROUND_TRIP"===e?"":"none"},children:[(0,d.dayjs)(b).format("M\u6708D\u65e5"),(0,w.jsx)(m.Text,{className:"date-tag",children:(0,Z.eV)(b)})]})})]}),(0,w.jsx)(Ae,{regionType:S,setHotel:K,hotel:B,passenger:$,confirmPassenger:ee}),(0,w.jsx)(m.View,{className:"row btn-wrap autoExpose","data-expose":{speed:"s_flt_tinyapp_home_search"},children:(0,w.jsx)(m.View,{className:"col btn-search","data-testid":"u_btn_search",onClick:(0,d.trackFn)("goToList--53774",be),children:"\u641c \u7d22"})}),(0,w.jsx)(ot,{})]})})})]})})},ut=dt,mt=ut,pt=i(18145),ht=i(82933),ft=function(){(0,u.useEffect)((function(){setTimeout((function(){(0,ht.I8)()}),20)}),[]);var e=(0,nt._n)(),t=$e(),i=(0,u.useCallback)((0,ze.Z)((0,Ye.Z)().mark((function i(){return(0,Ye.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e){i.next=3;break}return i.next=3,(0,nt.fN)();case 3:(0,F.jq)("c_flt_tinyapp_home_high_edit"),t();case 5:case"end":return i.stop()}}),i)}))),[e,t]);return(0,w.jsx)(m.View,{className:"card shadow-card",children:(0,w.jsx)(m.View,{className:"card-body",children:(0,w.jsx)(m.View,{className:"container",children:(0,w.jsxs)(m.View,{className:"row subscription-empty",children:[(0,w.jsx)(m.View,{className:"col-9",children:(0,w.jsxs)(m.View,{className:"text-wrap",children:[(0,w.jsx)(m.View,{className:"title",children:"\u4f4e\u4ef7\u63d0\u9192"}),(0,w.jsx)(m.View,{className:"subtitle",children:"\u822a\u73ed\u964d\u4ef7\u81ea\u52a8\u63a8\u9001\uff0c\u6bd4\u5f53\u524d\u4ef7\u683c\u66f4\u4fbf\u5b9c"})]})}),(0,w.jsx)(m.View,{className:"col-3 align-self-center",children:(0,w.jsx)(m.View,{className:"autoExpose btn-wrap","data-expose":{speed:"s_flt_tinyapp_home_high_addlowprice"},onClick:(0,d.trackFn)("onClick--104dd",(function(){return i()})),children:(0,w.jsx)(m.View,{className:"btn-add",children:"\u6dfb\u52a0\u63d0\u9192"})})})]})})})})},xt=function(e){return 2===e?"\u4f60\u8ba2\u9605\u7684\u822a\u73ed\u6bd4\u671f\u671b\u4ef7\u8fd8\u4f4e":1===e?"\u4f60\u8ba2\u9605\u7684\u822a\u73ed\u6bd4\u671f\u671b\u4ef7\u7565\u9ad8":0===e?"\u4f60\u8ba2\u9605\u7684\u822a\u73ed\u4e0e\u671f\u671b\u4ef7\u6301\u5e73":void 0},gt=function(e){return{airline:"".concat(e.depcode,"-").concat(e.arrcode),bpushdate:e.bpushdate,epushdate:e.epushdate,type:e.pctype}},jt=function(e,t){return"DOMESTIC"===e?{1:fe.pI.ECONOMY,2:fe.pI["BUSINESS,FIRST"],4:fe.pI.ECONOMY,9:fe.pI["BUSINESS,FIRST"]}[t]||fe.pI.ECONOMY:{1:fe.c2.SUPER_ECONOMY,2:fe.c2.BUSINESS,4:fe.IS["ECONOMY\u3001SUPER_ECONOMY"],9:fe.c2["BUSINESS\u3001FIRST"]}[t]||fe.c2.ECONOMY},Nt=function(e){return(0,d.dayjs)(e).format("MM-DD")},wt=function(){var e=$e(),t=Xe();return(0,u.useCallback)((function(i){i>2?((0,F.jq)("c_flt_tinyapp_home_high_list"),t()):((0,F.jq)("c_flt_tinyapp_home_high_edit"),e())}),[e,t])},_t=function(e){var t=e.subscription,i=void 0===t?[]:t,a=(0,ie.T)(),n=(0,pe.l)(),s=wt(),c=(0,u.useCallback)((function(e){(0,F.jq)("c_flt_tinyapp_home_high_main",gt(e));var t=e.ddate,i=e.adate,s=e.bpushdate,c=e.repushdate,r=e.flttype,o=e.depcode,l=e.arrcode,u=e.dcfname,m=e.acfname,p=e.rtflag,h=(0,d.dayjs)(t||s).format("YYYY-MM-DD"),f=(0,d.dayjs)(i||c).format("YYYY-MM-DD"),x=p?fe.X9.ROUND_TRIP:fe.X9.ONE_WAY,g=2===r?fe.Og.INTERNATIONAL:fe.Og.DOMESTIC,j=jt(g,e.class),N={cityCode:o,cityName:u,date:h,cabin:j},w={cityCode:l,cityName:m,date:f,cabin:j};a((0,se.mA)(x)),a((0,ce.b7)(N)),a((0,ce.AO)(N.date)),a((0,oe.oC)(w)),a((0,oe.FS)(w.date)),"DOMESTIC"!==g?n(g,He.F.navigateTo,{},{tripType:{value:x},departure:N,arrival:w}):Je.jump({airline:JSON.stringify(e)})}),[a,n]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.View,{className:"subscription-wrap",children:i.map((function(e,t){return t<2?(0,w.jsxs)(m.View,{className:"subscription-item autoExpose ".concat(i.length>1&&0===t?"delimiter":""),"data-expose":{speed:"s_flt_tinyapp_home_high_main",data:gt(e)},onClick:(0,d.trackFn)(t+"--539f9",(function(){return c(e)})),"data-testid":"on-click-item-".concat(t),children:[(0,w.jsx)(m.View,{className:"lockStatus ".concat(1===i.length?"radiusRight":""),children:(0,w.jsx)(m.View,{className:"detailText",children:xt(e.pctype)})}),(0,w.jsxs)(m.View,{className:"trip-price",children:[(0,w.jsxs)(m.View,{className:"trip",children:[e.depname,(0,w.jsx)(m.Text,{className:"type",children:e.rtflag?"\u21cc":"\u21c0"}),e.arrname]}),(0,w.jsx)(m.View,{className:"price",children:e.lprice?(0,w.jsxs)(u.Fragment,{children:["\xa5",(0,w.jsx)(m.Text,{className:"strong",children:e.lprice}),"\u8d77"]}):(0,w.jsx)(u.Fragment,{children:(0,w.jsx)(m.Text,{children:"\u6682\u65e0\u62a5\u4ef7"})})})]}),(0,w.jsxs)(m.View,{className:"date-price",children:[(0,w.jsx)(m.View,{className:"date",children:e.rtflag?"".concat(Nt(e.bpushdate),"\u53bb").concat(Nt(e.repushdate),"\u8fd4"):"".concat(Nt(e.bpushdate),"\u81f3").concat(Nt(e.epushdate),"\u51fa\u53d1")}),2===e.pctype&&(0,w.jsxs)(m.View,{className:"price down",children:[(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-price-down"}),(0,w.jsx)(m.Text,{className:"price-text",children:"\u6bd4\u671f\u671b\u4ef7\u4f4e\xa5"+e.pricech})]}),1===e.pctype&&(0,w.jsxs)(m.View,{className:"price up",children:[(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-price-up"}),(0,w.jsx)(m.Text,{className:"price-text",children:"\u6bd4\u671f\u671b\u4ef7\u9ad8\xa5"+e.pricech})]}),0===e.pctype&&(0,w.jsxs)(m.View,{className:"price equal",children:[(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-price-equal"}),(0,w.jsx)(m.Text,{className:"price-text",children:"\u4e0e\u671f\u671b\u4ef7\u6301\u5e73"})]})]})]},t):null}))}),0!==i.length&&(0,w.jsxs)(m.View,{className:"add-more autoExpose","data-expose":{speed:i.length<=2?"s_flt_tinyapp_home_high_edit":"s_flt_tinyapp_home_high_list"},onClick:(0,d.trackFn)("onClick--daf30",(function(){return s(i.length)})),"data-testid":"go-to-subscription-more",children:[(0,w.jsx)(T.Z,{className:"imgBox",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/priceLock/icon_"+(i.length<=2?"lowpriceMore.png":"lowpriceList.png")}),(0,w.jsxs)(m.View,{className:"text-describe",children:[(0,w.jsx)(m.Text,{children:"\u4f4e\u4ef7"}),(0,w.jsx)(m.Text,{children:"\u63d0\u9192"})]})]})]})};function bt(){var e=(0,u.useState)([]),t=(0,l.Z)(e,2),i=t[0],a=t[1],s=(0,u.useState)(!1),c=(0,l.Z)(s,2),r=c[0],o=c[1],p=(0,nt._n)();return(0,n.useDidShow)((function(){o(!r)})),(0,u.useEffect)((function(){p&&at().then((function(e){e&&e.length?(a(e),e.some((function(e){return 0===e.pctype}))&&(0,F.$J)("c_flt_lowprice_remind_show")):a([])}))}),[p,r]),(0,w.jsx)(m.View,{className:"subscription autoExpose","data-expose":{speed:"s_flt_tinyapp_home_high_card",data:{num:i.length}},onClick:(0,d.trackFn)("subscription",(function(){return(0,F.jq)("c_flt_tinyapp_home_high_card",{num:i.length})})),id:"subscription",children:p&&i&&i.length?(0,w.jsx)(m.View,{className:"subscription-container",children:(0,w.jsx)(m.View,{className:"subscription-content",children:(0,w.jsx)(m.View,{className:"subscriptionBox",children:(0,w.jsx)(_t,{subscription:i})})})}):(0,w.jsx)(ft,{})})}var vt=i(40085),yt=i(25487),Ct=i(86944),Tt=function(e,t){e&&(e.startsWith("/pages/")?((0,K.jq)("jumpToPages",{desc:"\u8df3\u8f6c\u5230\u7ad9\u5185\u5730\u5740\uff08\u7406\u8bba\u4e0a\u5e94\u8be5\u6ca1\u6709\u4e86\uff09",url:e}),(0,Ct.T8)({url:e+"&from=outer"})):(0,O.G)(e,t))},kt="https://images3.c-ctrip.com/flight/btm/market";function Vt(e){var t={memberIcon:"new_customer_area.png",bgIcon:"new_customer_area_bg.png",height:"273rpx"};return{0:t,1:t}[e]||{memberIcon:"exclusive_offer.png",bgIcon:"exclusive_offer_bg.png",height:"236rpx"}}function St(e){var t=e.memberInfo,i=e.hotActivities;if(!t)return null;var a=t.memberActivities,n=t.memberType,s=t.title,c=Vt(n),r=i&&i[0]||null;if(!a||a.length<=0)return null;var o={0:"nologin",1:"new"}[n]||"old";return(0,w.jsxs)(m.View,{className:"autoExpose memberInfo","data-expose":vt.z.exposure("member_all_".concat(o)),children:[(0,w.jsx)(m.Text,{className:"title",children:s}),(0,w.jsxs)(m.View,{className:"memberInfo-card",children:[(0,w.jsx)(m.View,{className:"card-bg",children:(0,w.jsx)(T.Z,{style:{height:c.height},className:"card-bg-img",src:"".concat(kt,"/").concat(c.bgIcon)})}),(0,w.jsx)(m.View,{className:"card-header",children:(0,w.jsx)(T.Z,{className:"card-header-icon",src:"".concat(kt,"/").concat(c.memberIcon)})}),(0,w.jsx)(m.View,{className:"card-list",children:(a||[]).map((function(e,t){return(0,w.jsxs)(m.View,{className:"autoExpose card-item","data-expose":vt.z.exposure("member_".concat(t+1,"_").concat(o)),onClick:(0,d.trackFn)(t+"--6df05",(function(){vt.z.click("member_".concat(t+1,"_").concat(o)),Tt(e.jumpUrl)})),children:[(0,w.jsx)(m.Text,{className:"card-item-title",children:e.title}),(0,w.jsx)(m.Text,{className:"card-item-subTitle",children:e.subTitle}),(0,w.jsx)(T.Z,{className:"card-item-icon",src:e.icon||""})]},t)}))}),r?(0,w.jsxs)(m.View,{className:"autoExpose card-footer","data-expose":vt.z.exposure("member_banner_".concat(o)),onClick:(0,d.trackFn)("onClick--dceb3",(function(){vt.z.click("member_banner_".concat(o)),Tt(r.jumpUrl)})),children:[(0,w.jsx)(m.Text,{className:"card-footer-title",children:r.title}),(0,w.jsxs)(m.View,{className:"card-footer-desc-bd",children:[(0,w.jsx)(m.Text,{className:"card-footer-desc",children:r.subTitle}),(0,w.jsx)(m.Text,{className:"card-footer-tag",children:r.buttonText})]}),(0,w.jsx)(T.Z,{className:"card-footer-img",src:"".concat(r.icon)})]}):null]})]})}var It=St,Zt=5,Ft=function(e){return e["NExpand"]="NExpand",e["Fold"]="Fold",e["UnFold"]="Unfold",e}(Ft||{});function Et(e){var t=e.data,i=e.homeOptimizePhaseII,a=(0,u.useState)((t||[]).length>Zt?Ft.Fold:Ft.NExpand),n=(0,l.Z)(a,2),s=n[0],c=n[1],r=(0,u.useMemo)((function(){return s===Ft.NExpand?t:s===Ft.Fold?t.slice(0,4).concat({title:"\u5c55\u5f00\u5168\u90e8",icon:"https://images3.c-ctrip.com/flight/btm/tools/icon_down.png",code:"unFold",jumpUrl:""}):[].concat((0,be.Z)(t.slice(0,4)),[{title:"\u6536\u8d77",icon:"https://images3.c-ctrip.com/flight/btm/tools/icon_up.png",code:"Fold",jumpUrl:""}],(0,be.Z)(t.slice(4)))}),[s,t]),o=function(){c(Ft.UnFold)},p=function(){c(Ft.Fold)};return!t||i?null:(0,w.jsx)(m.View,{className:"autoExpose tools","data-expose":vt.z.exposure("tool_all"),children:(0,w.jsx)(m.View,{className:"tools-card",children:r.map((function(e){return(0,w.jsxs)(m.View,{className:"autoExpose tools-card-item","data-expose":vt.z.exposure("tool_".concat(e.title)),onClick:(0,d.trackFn)((e.code||"")+"--3d49f",(function(){"unFold"===e.code?(vt.z.click("tool_more"),o()):"Fold"===e.code?(vt.z.click("tool_close"),p()):(vt.z.click("tool_".concat(e.title)),Tt(e.jumpUrl))})),children:[(0,w.jsx)(T.Z,{className:"tools-card-icon",src:e.icon||""}),(0,w.jsx)(m.Text,{className:"tools-card-name",children:e.title})]},e.code||"")}))})})}var Ot=i(27759),Mt=function(e){var t,i,a,n=e.item,s=void 0===n?{}:n,c=e.rankName,r=void 0===c?"":c,o="\u964d\u5e45\u699c"===r||"bd_50_29"===r;return(0,w.jsxs)(m.View,{className:(0,d.classnames)("left-column",{sale:o}),children:[(0,w.jsxs)(m.View,{className:"city",children:[(0,w.jsx)(m.Text,{className:"num-limit",children:null===(t=s.departCity)||void 0===t?void 0:t.name}),(0,w.jsx)(T.Z,{className:"arrow-icon",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/arrow_2.png"}),(0,w.jsx)(m.Text,{className:"num-limit",children:null===(i=s.arriveCity)||void 0===i?void 0:i.name})]}),(0,w.jsx)(m.Text,{className:"date",children:(0,d.dayjs)(null===(a=s.pl)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.departDate).locale("zh-cn").format("MM-DD ddd")+"\u53bb"})]})},At=Mt,Dt=function(e){var t=e.priceAll,i=e.rankName,a="\u964d\u5e45\u699c"===i||"bd_50_29"===i;return(0,w.jsxs)(m.View,{className:"price-container",children:[a&&t.prePrice&&(0,w.jsxs)(m.View,{className:"last-price-container",children:[(0,w.jsx)(m.Text,{className:"icon",children:"\xa5"}),(0,w.jsx)(m.Text,{className:"number",children:t.prePrice})]}),(0,w.jsxs)(m.View,{className:"now-price-container",children:[(0,w.jsxs)(m.View,{className:"price-top",children:[(0,w.jsx)(m.Text,{className:"icon",children:"\xa5"}),(0,w.jsx)(m.Text,{className:"number",children:t.price}),!a&&(0,w.jsx)(m.Text,{className:"text",children:"\u8d77"})]}),a&&t.decRate&&(0,w.jsxs)(m.View,{className:"price-bottom",children:[(0,w.jsx)(T.Z,{className:"down-icon",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/Combined%20Shape@1x.png"}),"\u5df2\u964d",Math.floor(100*-t.decRate),"%"]}),"\u70ed\u641c\u699c"===i&&!!t.rate&&(0,w.jsxs)(m.View,{className:"price-bottom bottom-tag",children:[Number(10*t.rate).toFixed(1),"\u6298"]})]})]})},Pt=Dt,Rt=function(e){Tt(e)},Ut=function(e){var t,i=e.rankName,a=e.item,n=e.idx,s="\u964d\u5e45\u699c"===i||"bd_50_29"===i,c=s&&0===n,r=a.pl&&a.pl[0]||null;return(0,w.jsxs)(u.Fragment,{children:[c&&(0,w.jsxs)(m.View,{className:"sub-container",children:[(0,w.jsx)(m.View,{className:"sub-left",children:"\u822a\u7ebf\u6392\u540d"}),(0,w.jsxs)(m.View,{className:"sub-right",children:[(0,w.jsx)(m.Text,{children:"\u8fc7\u53bb30\u5929\u5747\u4ef7"}),(0,w.jsx)(m.Text,{className:"right",children:"\u73b0\u4ef7/\u964d\u5e45"})]})]}),(0,w.jsxs)(m.View,{className:(0,d.classnames)("rank-route",{sale:s}),onClick:(0,d.trackFn)("onClick--b5ada",(function(){vt.z.click("hotlist_all"),r&&Rt(r.jumpUrl)})),children:[s?(0,w.jsx)(m.View,{className:"img-container sale-img-container",children:(0,w.jsx)(T.Z,{className:"sale-img",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/rank".concat(n+1,".png")})}):(0,w.jsxs)(m.View,{className:"img-container",children:[(0,w.jsx)(T.Z,{className:"icon",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/tag".concat(n+1,".png")}),(0,w.jsx)(T.Z,{className:"top-img",src:(null===(t=a.arriveCity)||void 0===t?void 0:t.imageUrl)||""})]}),(0,w.jsx)(m.View,{className:(0,d.classnames)("right-container",{sub:c}),children:(0,w.jsxs)(m.View,{className:"main-container",children:[(0,w.jsx)(At,{item:a,rankName:i}),r?(0,w.jsx)(Pt,{priceAll:r,rankName:i}):null]})})]})]})},Yt=Ut;function zt(){return(0,w.jsx)(m.View,{className:"lowprice-loading-status",children:(0,w.jsx)(m.View,{className:"loading-card",children:[0,1,2,4,5].map((function(e){return(0,w.jsxs)(m.View,{className:"loading-item",children:[(0,w.jsxs)(m.View,{className:"loading-item-lt",children:[(0,w.jsx)(m.View,{className:"loading-item-lt-lt"}),(0,w.jsxs)(m.View,{className:"loading-item-lt-rt",children:[(0,w.jsxs)(m.View,{className:"loading-item-lt-rt-tp",children:[(0,w.jsx)(m.View,{className:"loading-item-lt-rt-tp-1"}),(0,w.jsx)(m.View,{className:"loading-item-lt-rt-tp-2"}),(0,w.jsx)(m.View,{className:"loading-item-lt-rt-tp-1"})]}),(0,w.jsx)(m.View,{className:"loading-item-lt-rt-bt"})]})]}),(0,w.jsx)(m.View,{className:"loading-item-rt"})]},e)}))})})}var Lt="https://images3.c-ctrip.com/flight/btm/empty_state",Ht={ERROR_TITLE:"\u7cfb\u7edf\u5f00\u5c0f\u5dee\u5566",TRY_LATER:"\u8bf7\u7a0d\u540e\u518d\u8bd5",TRY_AGAIN:"\u518d\u8bd5\u4e00\u6b21",NETWORK_IS_NOT_STRONG:"\u7f51\u7edc\u4e0d\u7ed9\u529b",CHECK_NETWORK:"\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u518d\u8bd5",NO_FLIGHT:"\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u822a\u73ed",CHANGE_CONDITIONS:"\u8bf7\u8c03\u6574\u67e5\u8be2\u6761\u4ef6\u540e\u518d\u8bd5",ERROR_AND_TRY_AGAIN:"\u7cfb\u7edf\u5f00\u5c0f\u5dee\u5566\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"};function Wt(e,t){var i={icon:"".concat(Lt,"/noService.png"),title:Ht.ERROR_TITLE,subTitle:Ht.TRY_LATER,buttonText:Ht.TRY_AGAIN};return t?i={icon:"".concat(Lt,"/noNetWork.png"),title:Ht.NETWORK_IS_NOT_STRONG,subTitle:Ht.CHECK_NETWORK,buttonText:Ht.TRY_AGAIN}:e&&(i={icon:"".concat(Lt,"/noData.png"),title:Ht.NO_FLIGHT,subTitle:Ht.CHANGE_CONDITIONS,buttonText:""}),i}function qt(e){var t=e.isNoData,i=e.isNoNetWork,a=e.exposureId,n=e.tryAgain,s=Wt(t,i),c=s.icon,r=s.title,o=s.subTitle,l=s.buttonText;return(0,w.jsxs)(m.View,{className:"autoExpose empty-state","data-expose":vt.z.exposure(a),children:[(0,w.jsx)(T.Z,{className:"empty-state-icon",src:c}),(0,w.jsx)(m.Text,{className:"empty-state-title",children:r}),(0,w.jsx)(m.Text,{className:"empty-state-subtitle",children:o}),n?(0,w.jsx)(m.View,{className:"empty-state-btn",onClick:(0,d.trackFn)("tryAgain--7494f",n),children:(0,w.jsx)(m.Text,{className:"empty-state-btn-text",children:l})}):null]})}var Bt=function(e){return e[e["city"]=1]="city",e[e["country"]=2]="country",e[e["region"]=3]="region",e[e["airport"]=4]="airport",e[e["custom"]=5]="custom",e[e["theme"]=6]="theme",e[e["themeWithCity"]=7]="themeWithCity",e[e["cacheTheme"]=9]="cacheTheme",e[e["locationCity"]=11]="locationCity",e}({}),Kt=function(e){return e[e["oneWay"]=1]="oneWay",e[e["round"]=2]="round",e}({}),Gt=function(e){return e[e["Theme"]=23]="Theme",e}({}),Jt="https://pic.c-ctrip.com/AssetCatalog/app/index/default/topList.png",Qt=function(e){var t=e.boardItemList,i=e.departCode,a=e.departDate,s=(0,u.useState)({}),c=(0,l.Z)(s,2),r=c[0],o=c[1],p=(0,u.useState)("bd_49_29"),h=(0,l.Z)(p,2),f=h[0],x=h[1],g=(0,u.useState)([]),j=(0,l.Z)(g,2),N=j[0],_=j[1],b=(0,u.useState)(""),v=(0,l.Z)(b,2),y=v[0],C=v[1],T=(0,u.useState)(0),k=(0,l.Z)(T,2),V=k[0],S=k[1],I=(0,u.useState)(!1),Z=(0,l.Z)(I,2),F=Z[0],E=Z[1];(0,n.useDidShow)((function(){E(!1)})),(0,n.useDidHide)((function(){E(!0)})),(0,u.useEffect)((function(){var e=t[0]||{};o(e),x((null===e||void 0===e?void 0:e.code)||"bd_49_29")}),[t]),(0,u.useEffect)((function(){if(!F){var e=(0,d.dayjs)()||a,t=e.add(3,"month"),n=e.format("YYYY-MM-DD")||"",s=t.format("YYYY-MM-DD")||"",c={tt:Kt.oneWay,source:"themeboard",st:Gt.Theme,segments:[{dcs:[{ct:Bt.city,code:i},{ct:Bt.locationCity,code:i}],acs:[{ct:Bt.theme,code:f}],drl:[{begin:n,end:s}]}],useDoubleCver:!0};console.log("test fuzzySearchFetch params",c),yt.G$.promise(c).then((function(e){var t;if(e&&e.routes){console.log("test fuzzySearchFetch response",e),_(e.routes||[]);var i=e.combinations&&e.combinations[0].groups||[],a=(null===(t=i.find((function(e){return e.title===f})))||void 0===t?void 0:t.moreJumpUrl)||"";C(a),setTimeout((function(){(0,ht.I8)()}),100)}else _([])})).catch((function(){_([])}))}}),[t,i,a,F,f]);var O=(0,u.useCallback)((function(){y&&Tt(y)}),[y]),M=function(e){var i,a=e.detail.current;o(t[a]),x(null===(i=t[a])||void 0===i?void 0:i.code)};if(!Array.isArray(t)||!t.length)return null;var A=r||{},D=A.avatars,P=A.watchText,R=A.imageUrl,U=D&&D.map((function(e,t){return(0,w.jsx)(m.View,{className:"avatar",children:(0,w.jsx)(m.Image,{className:"avatar-img",src:e})},t)})),Y=t.map((function(e,t){var i=e.code,a=e.name,n=i===f;return(0,w.jsx)(m.SwiperItem,{className:(0,d.classnames)("autoExpose board-title-item"),"data-expose":vt.z.exposure("hotlist_tab_".concat(a)),onClick:(0,d.trackFn)(t+"--25a9c",(function(){vt.z.click("hotlist_tab_".concat(a)),x(i),o(e),S(t)})),children:(0,w.jsx)(m.View,{className:(0,d.classnames)("board-title-tab",{selected:n}),children:(0,w.jsx)(m.Text,{className:(0,d.classnames)("tab",{selected:n}),children:a})})},t)}));return(0,w.jsxs)(m.View,{className:(0,d.classnames)("autoExpose home-board-wrap",{bd_49_29:"bd_49_29"===f,bd_50_29:"bd_50_29"===f,bd_65_28:"bd_65_28"===f}),"data-expose":vt.z.exposure("hotlist_all"),children:[(0,w.jsxs)(m.View,{className:"autoExpose board-title","data-expose":vt.z.exposure("hotlist_tab"),children:[(0,w.jsx)(m.View,{className:"board-banner",children:(0,w.jsx)(m.Image,{mode:"widthFix",className:"board-title-bg",src:R||Jt})}),(0,w.jsxs)(m.View,{className:"board-title-info",children:[!!D&&(0,w.jsx)(m.View,{className:"avatar-list",children:U}),(0,w.jsx)(m.Text,{className:"watch",children:P})]}),(0,w.jsx)(m.Swiper,{autoplay:!0,circular:!0,previousMargin:"16px",current:V,onChange:M,interval:6e3,className:"board-title-list",displayMultipleItems:3,children:Y})]}),(0,w.jsxs)(m.View,{className:"board-content",children:[N.map((function(e,t){var i,a;return(0,w.jsx)(Yt,{item:e,idx:t,rankName:f},"".concat(null===(i=e.departCity)||void 0===i?void 0:i.code,"-").concat(null===(a=e.arriveCity)||void 0===a?void 0:a.code,"-").concat(t))})),!!y&&(0,w.jsxs)(m.View,{className:"autoExpose board-content-more","data-expose":vt.z.exposure("hotlist_more"),onClick:(0,d.trackFn)("onClick--50052",(function(){vt.z.click("hotlist_more"),vt.z.click("hotlist_all"),O()})),children:[(0,w.jsx)(m.Text,{className:"text",children:"\u67e5\u770b\u66f4\u591a\u822a\u7ebf"}),(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-arrow-right"})]})]})]})},Xt=Qt,$t={bd_49_29:"\u56fd\u5185\u4f4e\u4ef7\u699c",bd_50_29:"\u964d\u5e45\u699c",bd_65_28:"\u70ed\u5ea6\u699c"},ei=function(e){var t=e.departCityCode,i=e.departCityName,a=e.departDate,n=(0,u.useState)({groups:[],routes:[]}),s=(0,l.Z)(n,2),c=s[0],r=s[1],o=(0,u.useState)([]),h=(0,l.Z)(o,2),f=h[0],x=h[1],g=(0,u.useState)("bd_49_29"),j=(0,l.Z)(g,2),N=j[0],_=j[1],b=(0,u.useState)({name:i,code:t}),v=(0,l.Z)(b,2),y=v[0],C=v[1],k=(0,u.useState)(!0),V=(0,l.Z)(k,2),S=V[0],I=V[1],Z=(0,u.useRef)(!1),F="B"===(0,p.bE)(Ot.aZ,"A"),E=(0,u.useCallback)((function(e){I(!0);var t={dataSearchType:24,requestSource:"miniApp",childTravelAffirm:!1,parentTravelAffirm:!1,departCityCode:e,useDoubleCver:!0};yt.Hg.promise(t).then((function(t){if(console.log("test boardListShowSearchFetch response",yt.Hg),I(!1),Z.current=!0,e===y.code)if(t&&t.boardMusterList&&t.boardMusterList[0]&&t.boardMusterList[0].boardItemList){var i=t.boardMusterList[0].boardItemList||[];x(i)}else x([])})).catch((function(){x([])}))}),[y.code]),O=(0,u.useCallback)((function(e){I(!0);var t={tt:Kt.oneWay,source:"themeboard",st:Gt.Theme,segments:Object.keys($t).map((function(t){return{dcs:[{ct:Bt.city,code:e},{ct:Bt.locationCity,code:e}],acs:[{ct:Bt.theme,code:t}]}})),useDoubleCver:!0};yt.G$.promise(t).then((function(t){if(I(!1),Z.current=!0,e===y.code)if(t&&t.routes&&t.combinations&&t.combinations[0]&&t.combinations[0].groups){var i=t.combinations[0].groups||[];r({groups:i,routes:t.routes||[]}),setTimeout((function(){(0,ht.I8)()}),100)}else r({groups:[],routes:[]})})).catch((function(){r({groups:[],routes:[]})}))}),[y.code]);(0,u.useEffect)((function(){y.code&&(F?E(y.code):O(y.code))}),[y.code,E,O,F]),(0,u.useEffect)((function(){Z.current||(0,ht.k$)().then((function(e){var t=e.latitude,i=e.longitude;t&&i&&yt.Xg.promise({lati:t,longi:i,useDoubleCver:!0}).then((function(e){var t,i,a=(null===e||void 0===e?void 0:e.ccode)||(null===e||void 0===e||null===(t=e.fairinfo)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.ccode),n=(null===e||void 0===e?void 0:e.cname)||(null===e||void 0===e||null===(i=e.fairinfo)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.cname);a&&n&&setTimeout((function(){C({name:n,code:a})}),0)}))}))}),[]);var M=(0,u.useCallback)((function(){var e,t=null===(e=c.groups.find((function(e){return e.title===N})))||void 0===e?void 0:e.moreJumpUrl;t&&Tt(t)}),[c,N]),A=(0,u.useMemo)((function(){var e=[];return((c.groups.find((function(e){return e.title===N}))||{}).priceRefs||[]).forEach((function(t){e.push(c.routes[t.routeIndex])})),e}),[N,c]),D=function(){return S?(0,w.jsx)(zt,{}):c.groups.length<=0||c.routes.length<=0?(0,w.jsx)(qt,{exposureId:"lowPirceNoData",isNoData:!0}):(0,w.jsxs)(u.Fragment,{children:[(0,w.jsx)(m.View,{className:(0,d.classnames)("rank-route-container"),children:A.map((function(e,t){var i,a;return(0,w.jsx)(Yt,{item:e,idx:t,rankName:$t[N]},"".concat(null===(i=e.departCity)||void 0===i?void 0:i.code,"-").concat(null===(a=e.arriveCity)||void 0===a?void 0:a.code,"-").concat(t))}))}),(0,w.jsx)(m.View,{className:(0,d.classnames)("rank-more-route",{sale:"\u964d\u5e45\u699c"===$t[N]}),onClick:(0,d.trackFn)("onClick--4205a",(function(){vt.z.click("hotlist_more"),vt.z.click("hotlist_all"),M()})),children:(0,w.jsxs)(m.View,{className:"autoExpose more-content","data-expose":vt.z.exposure("hotlist_more"),children:[(0,w.jsx)(m.Text,{className:"text",children:"\u66f4\u591a\u822a\u7ebf"}),(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-arrow-right"})]})})]})},P=function(){return(0,w.jsxs)(m.View,{className:"autoExpose home-rank-container","data-expose":vt.z.exposure("hotlist_all"),children:[(0,w.jsx)(m.View,{className:"autoExpose rank-title-container","data-expose":vt.z.exposure("hotlist_tab"),children:Object.keys($t).map((function(e,t){return(0,w.jsx)(m.View,{onClick:(0,d.trackFn)(t+"--249ba",(function(){vt.z.click("hotlist_tab"),vt.z.click("hotlist_all"),_(e)})),className:(0,d.classnames)("rank-title",{current:N===e}),children:$t[e]},t)}))}),D()]})};return console.log("depart:",y),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(m.View,{className:"autoExpose home-rank-title",id:"home-rank","data-expose":vt.z.exposure("hotlist_citychoice"),onClick:(0,d.trackFn)("home-rank",(function(){vt.z.click("hotlist_citychoice"),(0,W.d)({title:"\u9009\u62e9\u51fa\u53d1\u57ce\u5e02",cityInfo:encodeURIComponent(JSON.stringify(y)),tripType:"ONE_WAY"}).then((function(e){e&&C({code:e.cityCode,name:e.cityName})}))})),children:[y.name,"\u51fa\u53d1\u7684\u4f4e\u4ef7",(0,w.jsx)(T.Z,{className:"title-icon",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/location.png"})]}),F?(0,w.jsx)(Xt,{boardItemList:f,departCode:y.code,departDate:a}):P()]})},ti=ei,ii={flightWillScenes:"flightWillScenesMini",memberInfo:"memberInfo",flightHomeTools:"flightHomeMiniTools",lowPrice:"lowprice",articleVideoModule:"articleVideoModule",recommendTopicModule:"recommendTopicModule"};function ai(){return(0,w.jsxs)(m.View,{className:"loading-status",children:[(0,w.jsx)(m.View,{className:"loading-title"}),(0,w.jsxs)(m.View,{className:"loading-card",children:[(0,w.jsx)(m.View,{className:"loading-card-title"}),(0,w.jsx)(m.View,{className:"loading-card-list",children:[0,1,2].map((function(e){return(0,w.jsxs)(m.View,{className:"loading-card-item",children:[(0,w.jsx)(m.View,{className:"loading-card-item-title"}),(0,w.jsx)(m.View,{className:"loading-card-item-subtitle"})]},e)}))})]}),(0,w.jsx)(m.View,{className:"loading-tools",children:[0,1,2,3,4].map((function(e){return(0,w.jsxs)(m.View,{className:"loading-tools-item",children:[(0,w.jsx)(m.View,{className:"loading-tools-item-title"}),(0,w.jsx)(m.View,{className:"loading-tools-item-subtitle"})]},e)}))})]})}var ni=i(14506),si="https://pic.c-ctrip.com/AssetCatalog/app/index/",ci="".concat(si,"default/image.png"),ri="https://images3.c-ctrip.com/flight/btm/label/reputation_label.png",oi="".concat(si,"common/icon_play_full.png"),li=u.memo((function(e){var t=e.title,i=e.userInfo,a=e.type,n=i||{},s=n.name,c=n.headUrl,r=n.vIcon;return(0,w.jsxs)(m.View,{className:(0,d.classnames)("item-info",{"item-info-spec":3===a}),children:[(0,w.jsx)(m.Text,{className:"item-title",children:(0,ni.d0)(t,8)}),(0,w.jsxs)(m.View,{className:"user-info",children:[!!c&&(0,w.jsx)(T.Z,{className:"avatar",src:c}),(0,w.jsx)(m.Text,{className:"name",children:(0,ni.d0)(s,7)}),!!r&&!!c&&(0,w.jsx)(T.Z,{className:"icon-vip",src:r})]})]})})),di=u.memo((function(e){var t=e.items,i=e.cardIndex,a=e.hasFlight,n=t&&t[i]||{},s=n.imageUrl;return(0,w.jsx)(T.Z,{className:(0,d.classnames)("card-bg",{"no-radius":a}),src:s})})),ui=function(e){(0,g.Z)(i,e);var t=(0,j.Z)(i);function i(e){var a;return(0,h.Z)(this,i),a=t.call(this,e),(0,N.Z)((0,x.Z)(a),"renderCardItem",(function(e,t){var i=a.props.items,n=e||{},s=n.title,c=n.type,r=n.imageUrl,o=n.jumpUrl,l=n.userInfo,u=r||ci;return(0,w.jsx)(m.SwiperItem,{className:(0,d.classnames)("swiper-item",{first:0===t,second:1===t,last:t===(i&&i.length||0)-1}),children:(0,w.jsxs)(m.View,{className:"autoExpose card-item","data-expose":"content_shipin_".concat(t),onClick:(0,d.trackFn)("onClick--2bb69",(function(){Tt(o),vt.z.click("content_shipin_".concat(t))})),children:[(0,w.jsx)(T.Z,{className:"image",style:{height:"".concat(a.state.swiperH)},src:u,onLoad:a.getHeight}),2===c&&(0,w.jsx)(T.Z,{className:"icon-play",src:oi}),3===c&&(0,w.jsx)(T.Z,{className:"label",src:ri}),(0,w.jsx)(li,{type:c,title:s,userInfo:l})]})},t)})),(0,N.Z)((0,x.Z)(a),"onIndexChange",(function(e){a.setState({currentIndex:e.detail.current})})),a.state={currentIndex:0},a}return(0,f.Z)(i,[{key:"render",value:function(){var e=this,t=this.props,i=t.items,a=t.flight;return i?(0,w.jsxs)(m.View,{className:(0,d.classnames)("card",{"no-radius":!!a}),children:[(0,w.jsx)(di,{items:i,cardIndex:this.state.currentIndex,hasFlight:!!a}),(0,w.jsx)(m.Swiper,{className:"carousel",onChange:this.onIndexChange,displayMultipleItems:2.3,children:i.filter((function(e){return null!=e})).map((function(t,i){return e.renderCardItem(t,i)}))})]}):null}}]),i}(u.Component);function mi(e){var t=e.flight,i=e.logKey;if(!t)return null;var a=t||{},n=a.departCity,s=a.arriveCity,c=a.departTime,r=a.price,o=a.jumpUrl,l=a.nearByCity,u=a.week,p=l?"\u90bb\u8fd1":"\u76f4\u98de",h="".concat(i,"_airline_").concat(p);return(0,w.jsxs)(m.View,{className:"autoExpose flight",onClick:(0,d.trackFn)("onClick--91d36",(function(){Tt(o),vt.z.click(h)})),"data-expose":vt.z.exposure(h),children:[(0,w.jsxs)(m.View,{className:"flight-info",children:[(0,w.jsxs)(m.View,{className:"info",children:[(0,w.jsx)(m.Text,{className:"city",children:n}),(0,w.jsx)(m.View,{className:"trip-arrow"}),(0,w.jsx)(m.Text,{className:"city",style:{marginRight:"8px"},children:s}),!!l&&(0,w.jsx)(m.View,{className:"tag",children:l})]}),(0,w.jsxs)(m.Text,{className:"time",children:[c," ",u]})]}),(0,w.jsxs)(m.View,{className:"flight-price",children:[(0,w.jsx)(m.Text,{className:"flight-price__symbol",children:"\uffe5"}),(0,w.jsx)(m.Text,{className:"flight-price__price",children:r||"--"}),"\u8d77",(0,w.jsx)(m.View,{className:"arrow-right"})]})]})}function pi(e){var t=e.personalizeCards;return t&&t.length?(0,w.jsx)(u.Fragment,{children:t.map((function(e,t){var i=e||{},a=i.items,n=i.flight,s=i.title,c=i.subTitle,r="content_shipin_".concat(t+1);return(0,w.jsxs)(m.View,{className:"autoExpose article-video","data-expose":vt.z.exposure(r),children:[(0,w.jsx)(ui,{items:a,flight:n}),(0,w.jsxs)(m.View,{className:"header",children:[(0,w.jsx)(m.Text,{className:"title",children:s}),(0,w.jsx)(m.Text,{className:"sub-title",children:c})]}),(0,w.jsx)(mi,{flight:n,logKey:r})]},t)}))}):null}var hi=pi,fi=u.memo((function(e){var t=e.isArea,i=e.recommendTopicListItem,a=i.title,n=i.subTitle,s=i.titleColor,c=i.subTitleColor,r=i.imageUrl,o=void 0===r?"":r,l=i.jumpUrl,u=i.items,p=i.titleImageUrl,h=void 0===p?"":p,f=i.id;if(!Array.isArray(u)||!u.length)return null;var x="content_picture_".concat(f);return(0,w.jsxs)(m.View,{onClick:(0,d.trackFn)("onClick--10d5d",(function(){Tt(l),vt.z.click("".concat(x,"_all"))})),className:(0,d.classnames)("autoExpose recommend",{"recommend-area":t}),"data-expose":vt.z.exposure("".concat(x,"_all")),children:[(0,w.jsx)(T.Z,{className:"recommend-bg",src:o||""}),t?(0,w.jsx)(xi,{title:a,jumpUrl:l,titleColor:s,titleImageUrl:h,logKey:x}):(0,w.jsx)(gi,{title:a,jumpUrl:l,subTitle:n,titleColor:s,subTitleColor:c,logKey:x}),(0,w.jsx)(ji,{items:u,isArea:t,logKey:x})]})})),xi=u.memo((function(e){var t=e.title,i=e.jumpUrl,a=e.titleColor,n=e.titleImageUrl,s=void 0===n?"":n,c=e.logKey,r="".concat(c,"_more");return(0,w.jsxs)(m.View,{className:"header",children:[(0,w.jsx)(m.Text,{className:"title",style:{color:a||""},children:t}),(0,w.jsx)(m.View,{onClick:(0,d.trackFn)("onClick--694e2",(function(e){Tt(i),vt.z.click(r),e.stopPropagation()})),className:"autoExpose","data-expose":vt.z.exposure(r),children:(0,w.jsx)(T.Z,{className:"title-image",src:s||""})})]})})),gi=u.memo((function(e){var t=e.title,i=e.jumpUrl,a=e.subTitle,n=e.titleColor,s=e.subTitleColor,c=e.logKey,r="".concat(c,"_more");return(0,w.jsxs)(m.View,{className:"header",children:[(0,w.jsx)(m.Text,{className:"title",style:{color:n||""},children:t}),(0,w.jsx)(m.Text,{className:"sub-title",style:{color:s||""},children:a}),(0,w.jsxs)(m.View,{className:"autoExpose button-more",onClick:(0,d.trackFn)("onClick--cef9b",(function(e){Tt(i),vt.z.click(r),e.stopPropagation()})),"data-expose":vt.z.exposure(r),children:["\u66f4\u591a",(0,w.jsx)(m.View,{className:"arrow-right"})]})]})})),ji=u.memo((function(e){var t=e.items,i=e.logKey,a=t?t.length:0;return(0,w.jsx)(m.View,{className:(0,d.classnames)("items",{"items-3":3===a}),children:t&&t.map((function(e,n){var s,c=e||{},r=c.arriveCityName,o=c.tags,l=c.price,u=c.jumpUrl,p=(null===o||void 0===o||null===(s=o[0])||void 0===s?void 0:s.name)||"",h="".concat(i,"_city");return(0,w.jsxs)(m.View,{className:(0,d.classnames)("autoExpose item",{"item-2":2===a,last:n===(t.length||0)-1}),onClick:(0,d.trackFn)(n+"--2effb",(function(e){Tt(u),vt.z.click(h),e.stopPropagation()})),"data-expose":vt.z.exposure(h),children:[(0,w.jsxs)(m.View,{className:"item-title",children:[(0,w.jsx)(m.Text,{className:"item-title-text",children:(0,ni.d0)(r)}),(0,w.jsx)(m.View,{className:"arrow-right"})]}),!!p&&(0,w.jsx)(m.View,{className:"item-tag",children:(0,w.jsx)(m.View,{className:"tag",children:p.substr(0,5)})}),(0,w.jsxs)(m.View,{className:"item-price",children:[(0,w.jsx)(m.Text,{className:"item-price__symbol",children:"\uffe5"}),(0,w.jsx)(m.Text,{className:"item-price__price",children:l||"--"})]})]},n)}))})})),Ni=3,wi=750;function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,a=[];return e.reduce((function(n,s,c){return i++<t&&a.push(s),a.length!==t&&c!==e.length-1||(n.push(a),i=0,a=[]),n}),[])}function bi(e){var t=e.recommendTopicList,i=e.type,a=(null===t||void 0===t?void 0:t.length)||0,n=a>Ni?wi*Ni:wi*a,s=(0,u.useState)(!1),c=(0,l.Z)(s,2),r=c[0],o=c[1],p=(0,u.useState)(1),h=(0,l.Z)(p,2),f=h[0],x=h[1],g=(0,u.useState)(1),j=(0,l.Z)(g,2),N=j[0],_=j[1],b=(0,u.useState)(n),v=(0,l.Z)(b,2),y=v[0],C=v[1],T=f*Ni<a;if((0,u.useEffect)((function(){o(!r),t&&_(t.slice(0,(f+1)*Ni).length)}),[f]),!t||!t.length)return null;var k="area"===i;if(k){var V=_i(t,3),S=function(){x(f+1),C(r?wi*N:n)};return(0,w.jsxs)(m.View,{className:"autoExpose content-recommend","data-expose":vt.z.exposure("content_all"),children:[(0,w.jsx)(m.View,{style:{height:y+"px"},children:V.map((function(e,t){return t>=f||!Array.isArray(e)||!e.length?null:e&&e.map((function(e,t){return(0,w.jsx)(fi,{isArea:k,recommendTopicListItem:e},t)}))}))}),T&&(0,w.jsxs)(m.View,{className:"add-more",onClick:(0,d.trackFn)("onClick--65879",(function(){return S()})),children:[(0,w.jsx)(m.View,{className:"add-more-shadow"}),(0,w.jsxs)(m.View,{className:"add-more-button",children:["\u5c55\u5f00\u66f4\u591a\u699c\u5355",(0,w.jsx)(m.View,{className:"arrow-down"})]})]})]})}return(0,w.jsx)(m.View,{className:"autoExpose content-recommend","data-expose":vt.z.exposure("content_all"),children:t.map((function(e,t){return(0,w.jsx)(fi,{isArea:k,recommendTopicListItem:e},t)}))})}var vi=i(9361);function yi(e){var t=e.subTools,i=e.handleToggle;return t?(0,w.jsxs)(m.View,{className:"subTool_modal",children:[(0,w.jsx)(m.View,{className:"subTool_modal_mask",onClick:(0,d.trackFn)("onClick--f47be",(function(){i&&i()}))}),(0,w.jsx)(m.View,{className:"autoExpose subTool animate__animated animate__slideInUp animate__faster","data-expose":vt.z.exposure("toolbar_subTool"),children:t.map((function(e,t){var i=e.title,a=e.icon,n=e.code;if(i)return(0,w.jsxs)(m.View,{className:"autoExpose subTool-item","data-expose":vt.z.exposure("toolbar_subTool_".concat(n)),onClick:(0,d.trackFn)(t+"--682c2",(function(){vt.z.click("toolbar_subTool_".concat(i)),Tt(e.jumpUrl)})),children:[!!a&&(0,w.jsx)(T.Z,{className:"subTool-icon",src:a}),!!i&&(0,w.jsx)(m.Text,{className:"subTool-name",children:i})]},t)}))})]}):null}var Ci=function(){var e=(0,ze.Z)((0,Ye.Z)().mark((function e(t){return(0,Ye.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,(0,ht.x4)();case 3:qe.jump();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ti=function(){We.jump()},ki=function(){(0,ht.Be)({appId:"wxfb15cd20309e823c",envVersion:"release"})};function Vi(e){var t=e.data,i=(0,u.useState)(!1),a=(0,l.Z)(i,2),n=a[0],s=a[1],c=(0,u.useMemo)((function(){var e;return t&&(null===(e=t.filter((function(e){return"toolBox"===e.code})))||void 0===e||null===(e=e[0])||void 0===e?void 0:e.subTool)}),[]),r=function(){s(!n)},o=$e(),p=Xe(),h=(0,u.useCallback)(function(){var e=(0,ze.Z)((0,Ye.Z)().mark((function e(t){return(0,Ye.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,(0,ht.x4)();case 3:at({noCache:!0}).then((function(e){null!==e&&void 0!==e&&e.length?p():o()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,p]),f=function(e,t){var i=(0,Ct.FA)().isLogin();"toolBox"===e?r():"myorder"===e?Ci(i):"subscription"===e?h(i):"dynamic"===e?Ti():"identification"===e?ki():Tt(t)};if(!t)return null;var x=(0,vi.R2)(),g=x.bottom,j=void 0===g?0:g;return(0,w.jsxs)(m.View,{className:"toolbar",children:[n&&(0,w.jsx)(yi,{subTools:c,handleToggle:r}),(0,w.jsx)(m.View,{className:"autoExpose toolbar-card",style:{paddingBottom:"".concat(j,"px")},"data-expose":vt.z.exposure("toolbar"),children:t.map((function(e,t){var i="toolBox"===e.code;return(0,w.jsxs)(m.View,{className:"autoExpose toolbar-item","data-expose":vt.z.exposure("tool_".concat(e.code)),onClick:(0,d.trackFn)(t+"--470ce",(function(){f(e.code,e.jumpUrl),i?vt.z.click("toolbar_more"):vt.z.click("toolbar_".concat(e.title))})),children:[i&&n?(0,w.jsx)(m.View,{className:"toolbox",children:(0,w.jsx)(T.Z,{className:"toolbox-icon",src:"https://images3.c-ctrip.com/flight/btm/toolbar/icon_yoyo.png"})}):!!e.icon&&(0,w.jsx)(T.Z,{className:"toolbar-icon",src:e.icon}),i&&n?null:(0,w.jsx)(m.Text,{className:"toolbar-name",children:e.title})]},t)}))})]})}function Si(e){var t=e.data||{},i=t.sceneType,a=t.miniText,n=t.jumpUrl,s=t.remainingTime,c=t.buttonText,r=(0,p.hk)(s,1),o=(0,u.useState)(""),h=(0,l.Z)(o,2),f=h[0],x=h[1],g=1===i,j=[];return a&&/[@/]/.test(a)&&(j=a.split("@")),(0,u.useEffect)((function(){if(g){var t=60,i=r||0,a=Math.floor(i/t).toString().padStart(2,"0"),n=Math.floor(i%t).toString().padStart(2,"0");i<=0?e.setExpired&&e.setExpired(!0):x("".concat(a,":").concat(n))}}),[r]),j?(0,w.jsx)(m.SwiperItem,{children:(0,w.jsxs)(m.View,{className:"autoExpose pop-text","data-expose":vt.z.exposure("flightWillScenes_".concat(i)),onClick:(0,d.trackFn)("onClick--6f1f4",(function(){vt.z.click("flightWillScenes_".concat(i)),Tt(n)})),children:[(0,w.jsxs)(m.View,{className:"text-area",children:[(0,w.jsx)(m.Text,{className:"text",children:j[0]}),!!j[1]&&(0,w.jsx)(m.Text,{className:g?"orange":"blue",children:j[1]}),!!j[2]&&(0,w.jsx)(m.Text,{className:"text",children:j[2]}),!!j[3]&&(0,w.jsx)(m.Text,{className:g?"orange":"blue",children:j[3]})]}),g?(0,w.jsxs)(m.View,{className:"go-pay",children:[!!f&&(0,w.jsxs)(m.Text,{className:"orange",children:[f,"\xa0\xa0"]}),(0,w.jsx)(m.Text,{className:"orange",children:c||"\u53bb\u652f\u4ed8"})]}):(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-arrow-right"})]})}):null}function Ii(e){var t,i=e.flightWillScenes,a=e.historyFlightWillScenes,n=e.homeOptimizePhaseII,s=(0,u.useState)(!1),c=(0,l.Z)(s,2),r=c[0],o=c[1],d=(0,u.useState)((null===i||void 0===i?void 0:i.length)||0),p=(0,l.Z)(d,2),h=p[0],f=p[1],x=null!==(t=null===a||void 0===a?void 0:a.length)&&void 0!==t?t:0,g=h+x;if((0,u.useEffect)((function(){r&&f(0)}),[h,r]),g<=0||!n)return null;var j=i&&i.slice(0,5)||[],N=a&&a.slice(0,5)||[];return(0,w.jsxs)(m.View,{className:"autoExpose flightWillScenes",children:[(0,w.jsx)(T.Z,{className:"flightWillScenes-yoyo",src:"https://images3.c-ctrip.com/flight/btm/toolbar/icon_yoyo_hi.png"}),(0,w.jsx)(m.View,{className:"flightWillScenes-pop",children:(0,w.jsxs)(m.Swiper,{className:"flightWillScenes-swiper",displayMultipleItems:1,autoplay:!0,interval:2e3,vertical:!0,circular:!0,children:[j.map((function(e,t){return(0,w.jsx)(Si,{data:e,setExpired:o},t)})),N.map((function(e,t){return(0,w.jsx)(Si,{data:e},t)}))]})})]})}var Zi=function(e){var t=e.show,i=e.setScrollId,a=(0,u.useState)(!0),n=(0,l.Z)(a,2),s=n[0],c=n[1];!t&&s&&c(!1);var r=function(){var e=(0,ze.Z)((0,Ye.Z)().mark((function e(){return(0,Ye.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:vt.z.click("",{speed:"c_flt_tinyapp_scrollclick"}),c(!1),i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=(0,u.useCallback)((function(e){e.stopPropagation(),c(!1)}),[c]),p=!0;return(0,w.jsx)(m.View,{className:(0,d.classnames)("home-rank-tools",{"down-animation":!s,"bottom-distance":p}),onClick:(0,d.trackFn)("scrollToPromotion--cd760",r),children:(0,w.jsxs)(m.View,{className:"tool-bg",children:[(0,w.jsxs)(m.View,{className:"left-container",children:[(0,w.jsx)(m.View,{className:"flight-icon",children:(0,w.jsx)(T.Z,{className:"flight-icon-image",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/home-rank-flight.png"})}),(0,w.jsx)(m.Text,{className:"text",children:"\u98de\u54ea\u513f\u4fbf\u5b9c\uff1f\u70b9\u51fb\u7acb\u5373\u67e5\u770b"})]}),(0,w.jsx)(T.Z,{className:"down-icon",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/home-rank-down.png"}),(0,w.jsx)(m.View,{className:"close-icon",onClick:(0,d.trackFn)("closeDisplay--ddb2c",o),children:(0,w.jsx)(T.Z,{className:"close-icon-image",src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/closeButton.png"})})]})})},Fi=Zi,Ei=function(e){return e[e["success"]=0]="success",e[e["serviceFail"]=1]="serviceFail",e[e["paramsFail"]=2]="paramsFail",e}(Ei||{}),Oi=function(e){var t=e.showTool,i=e.setScrollId,a=(0,ie.C)((function(e){return e.departure})),n=(0,ie.C)((function(e){return e.arrival})),s=(0,ie.C)(ae.e_),c=(0,ie.C)(ae.W$),r=(0,u.useState)({firstFetchFailed:!1,secondFetchFailed:!1,firstRenderSuccess:!1,secondRenderSuccess:!1,firstModules:[],secondModules:[],flightHomeTools:[],memberInfo:null,isFirstLoading:!0,isSecondLoading:!0,articleVideoModule:null,recommendTopicModule:null,miniToolBox:null,flightWillScenes:null,historyFlightWillScenes:null,historyFetchFailed:!1}),o=(0,l.Z)(r,2),d=o[0],p=o[1],h=!0,f=(0,u.useRef)(0),x=function(e,t){p((0,N.Z)({},t?"firstFetchFailed":"secondFetchFailed",!0))},g=(0,u.useCallback)((function(e){var t=e;yt.E3.promise(t).then((function(e){console.log("firstData:",e);var t=e.flightHomeTools,i=e.result,a=e.modules,n=e.memberInfo,s=e.hotActivities,c=e.hasOrder,r=e.miniToolBox,o=e.flightWillScenes;i===Ei.success?p({firstModules:(a||[]).reverse(),flightHomeTools:t,memberInfo:n,firstFetchFailed:!1,isFirstLoading:!1,hotActivities:s,hasOrderFirst:c,firstRenderSuccess:!0,miniToolBox:r,flightWillScenes:o}):p({firstFetchFailed:!0})}),(function(e){return x(e,!0)}))}),[]),j=(0,u.useCallback)((function(e){yt.zV.promise(e).then((function(e){console.log("secondData:",e);var t=e.result,i=e.modules,a=e.articleVideoModule,n=e.recommendTopicModule;t===Ei.success?(p((function(e){return(0,D.Z)((0,D.Z)({},e),{},{secondModules:i,secondRenderSuccess:!0,secondFetchFailed:!1,isSecondLoading:!1,articleVideoModule:a,recommendTopicModule:n})})),setTimeout((function(){(0,ht.I8)()}),200)):p((function(e){return(0,D.Z)((0,D.Z)({},e),{},{secondFetchFailed:!0})}))}))}),[]),_=(0,u.useCallback)((function(e){yt.SQ.promise(e).then((function(e){console.log("historyData:",e);var t=e.flightWillScenes;p(t?function(e){return(0,D.Z)((0,D.Z)({},e),{},{historyFetchFailed:!1,historyFlightWillScenes:t})}:function(e){return(0,D.Z)((0,D.Z)({},e),{},{historyFetchFailed:!0})})}),(function(e){p((function(e){return(0,D.Z)((0,D.Z)({},e),{},{historyFetchFailed:!0})}))}))}),[]),v=(0,u.useCallback)((function(){if(a&&a.cityCode){var e={useDoubleCver:!0,segment:[{departAirportCode:a.cityCode,arriveAirportCode:n.cityCode,departTime:a.date,flightType:"DOMESTIC"===c?1:2}],tripType:"ROUND_TRIP"===s?2:"MULTIPLE_TRIP"===s?3:1};g(e),j(e);var t=J();if(t){var i={useDoubleCver:!0,segment:t};console.log("test historyData request",i),_(i)}}}),[a,n.cityCode,c,s,g,j,_]);(0,u.useEffect)((function(){v()}),[v]);var y=function(){var e=d.firstModules,t=d.flightHomeTools,i=d.memberInfo,n=d.isFirstLoading,s=d.hotActivities,c=d.hasOrderFirst,r=d.flightWillScenes,o=d.historyFlightWillScenes,l=[];if(n)return(0,w.jsx)(ai,{});var u=(0,N.Z)((0,N.Z)((0,N.Z)({},ii.flightWillScenes,[Ii,{flightWillScenes:r,historyFlightWillScenes:o,homeOptimizePhaseII:h}]),ii.memberInfo,[It,{memberInfo:i,hotActivities:s}]),ii.flightHomeTools,[Et,{data:t,hasOrder:c,homeOptimizePhaseII:h}]);return(e||[]).forEach((function(e){var t=u[e];if(t){var i=t[0],a=t[1];l.push((0,w.jsx)(m.View,{children:(0,w.jsx)(i,(0,D.Z)({},a))},e))}})),l.push((0,w.jsx)(m.View,{children:(0,w.jsx)(ti,{departCityCode:a.cityCode||"",departCityName:a.cityName||"",departDate:a.date||""})},"lowPrice")),l};function C(){var e=d.secondModules,t=d.isSecondLoading,i=d.articleVideoModule,a=d.recommendTopicModule,n=[];if(t)return null;var s=(0,N.Z)((0,N.Z)({},ii.articleVideoModule,[hi,(0,D.Z)({},i)]),ii.recommendTopicModule,[bi,(0,D.Z)({},a)]);return(e||[]).forEach((function(e){var t=s[e];if(t){var i=t[0],a=t[1];n.push((0,w.jsx)(m.View,{children:(0,w.jsx)(i,(0,D.Z)({},a))},e))}})),n}function T(){var e=d.firstFetchFailed,a=d.secondFetchFailed,n=d.miniToolBox,s="tryagain_errornet".concat(f.current>0?"_2":""),c=(0,w.jsx)(qt,{exposureId:s,tryAgain:function(){vt.z.click(s),f.current++,v()}});return(0,w.jsxs)(w.Fragment,{children:[e?c:y(),a?e?null:c:C(),(0,w.jsx)(Fi,{show:t,setScrollId:function(){return i("second_floor")}}),!!n&&h&&(0,w.jsx)(Vi,{data:n})]})}return(0,w.jsx)(m.View,{className:"container",id:"second_floor",children:(0,w.jsx)(b,{time:300,children:T()})})},Mi=u.memo(Oi),Ai=i(95518),Di=i(74711),Pi=i(1098),Ri=i(5437),Ui={container:"HomeTitle-module__Hu72",info:"HomeTitle-module_TyZ_0",symbol:"HomeTitle-module_Ez2mz",city:"HomeTitle-module_wI8_3",backTop:"HomeTitle-module_iirCg",btn:"HomeTitle-module_ZVfpw",date:"HomeTitle-module_mDKmc"};function Yi(e){return(0,d.dayjs)(e).year()===(0,d.dayjs)().year()?(0,d.dayjs)(e).format("MM\u6708DD\u65e5"):(0,d.dayjs)(e).format("YYYY\u5e74MM\u6708DD\u65e5")}var zi=function(e){var t=e.clickFn,i=(0,ie.C)(ae.R1),a=(0,ie.C)(ae.pW),n=(0,ie.C)(ae.cY),s=(0,ie.C)(ae.sq),c=(0,ie.C)(ae.e_),r=Yi(a),o="ROUND_TRIP"===c?"\u53bb:".concat(r," \u8fd4:").concat(Yi(s)):"".concat(r,"\u51fa\u53d1");return(0,w.jsxs)(m.View,{className:Ui.container,children:[(0,w.jsxs)(m.View,{className:Ui.info,children:[(0,w.jsxs)(m.View,{className:Ui.city,children:[(0,w.jsx)(m.Text,{className:"ellipsis",children:i}),(0,w.jsx)(m.Text,{className:Ui.symbol,children:" \u21c0 "}),(0,w.jsx)(m.Text,{className:"ellipsis",children:n})]}),(0,w.jsx)(m.View,{className:Ui.date,children:o})]}),(0,w.jsxs)(m.View,{className:Ui.btn,onClick:(0,d.trackFn)("clickFn--f0303",t),children:[(0,w.jsx)(T.Z,{className:Ui.backTop,src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/backTop.png"}),(0,w.jsx)(m.Text,{children:"\u56de\u5230\u641c\u7d22"})]})]})},Li=(0,u.memo)(zi),Hi={navigation:"NavBarHome-module_lUe64",leftIcon:"NavBarHome-module_xwgxV",leftIconShow:"NavBarHome-module_IUwyd",homeBtn:"NavBarHome-module_t7n64",leftIconWrap:"NavBarHome-module_WdAI7","home-btn-group-new":"NavBarHome-module_vtmNT","btn-wrap":"NavBarHome-module_rrpK4","btn-home":"NavBarHome-module__bT3c","swan-home":"NavBarHome-module_wbyHG","btn-icon":"NavBarHome-module_T9473","btn-back":"NavBarHome-module_eGpvZ"},Wi=i(73027);function qi(e){var t,i=e.className,a=e.show,s=(0,vi.So)(),c=s.statusBarHeight,r=s.screenWidth,o=(0,vi.GR)(),l=r-o;var u=!(0,xe.Z1)()&&(null===(t=(0,n.getCurrentPages)())||void 0===t?void 0:t.length)<=1;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.View,{className:(0,d.classnames)(Wi.Z["navigation-container"],i),id:"navigation",children:a&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.View,{className:Wi.Z["status-bar"],style:{height:"".concat(c,"px")}}),(0,w.jsx)(m.View,{className:Hi.navigation,style:{paddingRight:"".concat(l,"px")},children:(0,w.jsx)(Li,{clickFn:function(){return Di.ZP.emit("BACK_TO_HOME_TOP")}})})]})}),(0,w.jsxs)(m.View,{className:"".concat(Hi.leftIcon," flex-center ").concat(a?Hi.leftIconShow:""),style:{top:" ".concat(c,"px")},children:[(0,w.jsx)(m.View,{className:Hi.leftIconWrap,children:(0,w.jsx)(m.Text,{className:"iconfont-h5 icon-arrow-left",onClick:(0,d.trackFn)("onClick--40b67",(function(){return(0,Ri.Ss)()}))})}),!a&&u&&(0,w.jsx)(m.View,{className:Hi.leftIconWrap,children:(0,w.jsx)(T.Z,{src:"https://pages.c-ctrip.com/flight_h5/tinyapp/home/home-white.png",mode:"aspectFit",className:"".concat(Hi.homeBtn," btn-icon"),onClick:(0,d.trackFn)("backBigHome--305a9",Ri.l0)})})]})]})}var Bi=qi,Ki=Bi,Gi=(0,ni.Vj)(),Ji=15,Qi=100;function Xi(e){var t=e.children,i=e.collection,a=e.scrollId,s=e.showTool,c=e.setShowTool,r=(0,u.useRef)({start:0,direction:"",isScrolling:!1,sendSpeed:!1,supportDragEnd:0,alreadyScroll:!1,scrollStatus:"start",scrollView:null}),o=(0,u.useState)(!1),m=(0,l.Z)(o,2),p=m[0],h=m[1],f=(0,u.useState)(513),x=(0,l.Z)(f,2),g=x[0],j=x[1],N=(0,u.useCallback)((0,ze.Z)((0,Ye.Z)().mark((function e(){var t,i,a,s;return(0,Ye.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Pi.Mc)("#second_floor",{rect:!0,retry:3});case 2:i=e.sent,a=(null===i||void 0===i?void 0:i.top)||513,j(a),s=null===(t=(0,n.getCurrentInstance)())||void 0===t||null===(t=t.page)||void 0===t?void 0:t.animate,s&&s("#navigation",[{opacity:0},{opacity:1}],1e3,{scrollSource:"#home-scroll",timeRange:1e3,startScrollOffset:15,endScrollOffset:a-Qi});case 7:case"end":return e.stop()}}),e)}))),[]),_=(0,u.useCallback)((function(){return new Promise((function(e){(0,n.createSelectorQuery)().select("#home-scroll").node().exec((function(t){if(t&&t[0]&&t[0].node){var i=t[0].node;r.current.scrollView=i,e(i)}}))}))}),[]);(0,u.useEffect)((function(){_(),N()}),[_,N]);var b=(0,u.useCallback)((function(e){var t,i={top:e,duration:300,animated:!0};r.current.scrollView?null===(t=r.current.scrollView)||void 0===t||t.scrollTo(i):_().then((function(e){e&&(null===e||void 0===e||e.scrollTo(i))}))}),[_]);(0,u.useEffect)((function(){return Di.ZP.on("BACK_TO_HOME_TOP",(function(){return b(0)}),Gi),function(){return Di.ZP.off("BACK_TO_HOME_TOP",Gi)}}),[b]);var v=(0,u.useMemo)((function(){return(0,d.debounce)((function(e){if(r.current.isScrolling=!1,e<Ji)b(0);else if(e>=Ji&&e<g-Qi){var t="up"===r.current.direction?g-Qi:0;b(t),r.current.start=0}}),100)}),[g,b]),y=function(e){var t=e.detail.scrollTop;r.current.start=t,r.current.isScrolling=!0,r.current.scrollStatus="start",r.current.alreadyScroll&&0===r.current.supportDragEnd&&(r.current.supportDragEnd=-1),r.current.alreadyScroll||(r.current.alreadyScroll=!0)},C=function(e){r.current.sendSpeed||(vt.z.click("",{speed:"c_flt_tinyapp_scroll"}),r.current.sendSpeed=!0);var t=e.detail.scrollTop;r.current.isScrolling&&(r.current.direction=t-r.current.start>0?"up":"down",r.current.start=t,(-1===r.current.supportDragEnd||1===r.current.supportDragEnd&&"end"===r.current.scrollStatus)&&v(t)),s&&t>g-Qi&&c&&c(!1),Math.ceil(t)!==Math.ceil(g-Qi)&&t>Ji&&!p?h(!0):t<Ji&&p&&h(!1)},T=function(e){r.current.supportDragEnd=1,r.current.scrollStatus="end";var t=e.detail.scrollTop;v(t)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Ki,{className:"home",show:p}),i,(0,w.jsx)(Ai.Z,{scrollY:!0,enhanced:!0,scrollWithAnimation:!0,id:"home-scroll",className:"home-wrapper",onDragStart:y,onDragEnd:T,onScroll:(0,d.trackFn)("home-scroll",C),scrollIntoView:a,children:t})]})}var $i=function(){var e=(0,vi.So)(),t=e.windowWidth,i=.5*t,a={delayTime:5e3,dotShow:!0,dotCurrentColor:"#fff",dotCurrentType:"pencil",dotColor:"#fff",dotOpacity:.6,dotCurrentOpacity:1,bottom:65,right:24},n={show:!0,position:"left",left:24,bottom:65};return(0,w.jsxs)(m.View,{id:"adSdkId",style:{height:"".concat(i+1,"px")},children:[(0,w.jsx)("ad-sdk",{impId:"05JPUPKC059JZYZPVFTLOQZ",width:t,height:i,slideVideo:a,showSign:n}),(0,w.jsx)(m.View,{className:"ad-bg"})]})},ea=$i,ta=ea,ia=function(){var e=(0,u.useState)(""),t=(0,l.Z)(e,2),i=t[0],a=t[1],n=(0,u.useState)(!0),s=(0,l.Z)(n,2),c=s[0],r=s[1],o=(0,p.Sl)("showCollection");return(0,w.jsxs)(m.View,{className:(0,d.classnames)("HomePage",{"second-promote":!0}),children:[(0,w.jsxs)(Xi,{collection:o&&(0,w.jsx)(y.Z,{}),scrollId:i,showTool:c,setShowTool:r,children:[(0,w.jsx)(ta,{}),(0,w.jsx)(m.View,{className:"home-bg"}),(0,w.jsxs)(m.View,{className:(0,d.classnames)("search-bg",{"search-bg-second":!0}),children:[(0,w.jsx)(mt,{}),(0,w.jsx)(bt,{})]}),(0,w.jsx)(Mi,{showTool:c,setScrollId:a}),(0,w.jsx)(m.View,{className:"home-container",children:(0,w.jsxs)(b,{time:300,children:[(0,w.jsx)(v.Z,{pageName:"\u9996\u9875",secondPromote:!0}),(0,w.jsx)(I,{})]})})]}),(0,w.jsx)(pt.Z,{pageSource:6}),(0,w.jsx)(C.Z,{})]})},aa=ia,na=function(){return(0,n.useReady)((function(){r.ZP.report({pageId:s.lr,key:"loading-to-home",name:"loading\u9875\u9762\u5230\u9996\u9875"})})),(0,n.useShareAppMessage)((function(){var e="pages/flight/pages/home/index";return{bu:"flight",title:"\u643a\u7a0b\u673a\u7968",path:e}})),(0,o.d)({miniUrl:"/pages/flight/pages/home/index",h5Url:"/html5/flight/home",ssrH5Url:"/html5/flight/taro/home"}),(0,w.jsx)(aa,{})},sa=(0,c.Z)({pageId:s.lr})(na),ca={navigationBarTitleText:"\u643a\u7a0b\u673a\u7968",navigationBarTextStyle:"black",titleBarColor:"#ffffff",navigationStyle:"custom",usingComponents:{collection:"/pages/market/components/collection/collection","ad-sdk":"/pages/market/advertiseNew/ad-sdk","scope-data":"/pages/flight/components/scope-data/index","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};sa.enableShareAppMessage=!0;Page((0,a.createPageConfig)(sa,"pages/flight/pages/home/index",{root:{cn:[]}},ca||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[4499,2107,1216,8592],(function(){return t(90827)}));e.O()}]);
//# sourceMappingURL=index.js.map