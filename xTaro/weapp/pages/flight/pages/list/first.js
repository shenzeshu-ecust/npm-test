"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[1482],{12896:function(e,n,a){var o=a(32180),t=a(45023),i=a(90201),s=a(71515),r=a(91425),l=a(74498),c=a(5644),u=a(14140),d=a(29557),m=a(14506),p=a(64676),f=a(61747),x=a(53096),h=a(34641),v=a(74711),g=a(75156),j=a(48935),w=a(84608),_=a(9486),N=a(18145),C=a(12603),S=a(97659),Z=a(99531),b=a(63779),Y=a(72546),P=a(95277),T={"advertisement-container":"advertisement-module_EgXPn","advertisement-swiper":"advertisement-module_CSmZ6","s-img":"advertisement-module_YoRbG","level-b":"advertisement-module_ajTnj","b-img":"advertisement-module_SsKKX","b-text":"advertisement-module__B5BW"},V=a(2269),k=function(e){var n=e.data,a=Number(b.Z.get("advertisementTime"))||5e3;if((0,i.useEffect)((function(){n&&n.length&&(0,Z.jq)("advertisement_show",{data:n})}),[n]),!n||null===n||void 0===n||!n.length)return null;var o=n.length>1,t=function(e){var n=e.jumpUrl,a=e.sceneCodes,o=void 0===a?[]:a;if(o.includes("12")&&"SAN_YA_COUPON"===n)(0,Z.jq)("advertisement_open_pop",e);else if(n)return(0,Z.jq)("advertisement_jump_to",e),n&&(0,Y.G)(n)};return(0,V.jsx)(s.View,{className:T["advertisement-container"],children:(0,V.jsx)(s.Swiper,{className:T["advertisement-swiper"],autoplay:o,circular:o&&!0,vertical:!1,interval:a,duration:300,children:n.map((function(e){var n=e.level,a=e.jumpUrl,o=void 0===a?"":a,i=e.content,l=e.imageUrl;if("S"===n&&l)return(0,V.jsx)(s.SwiperItem,{children:(0,V.jsx)(S.Z,{className:T["s-img"],src:l,onClick:(0,r.trackFn)(o+"--30e13",(function(){return t(e)}))})},o);if("B"===n||"A"===n){var c=(0,P.Z)(i);return(0,V.jsx)(s.SwiperItem,{children:(0,V.jsxs)(s.View,{className:T["level-b"],onClick:(0,r.trackFn)(o+"--643b1",(function(){return t(e)})),children:[(0,V.jsx)(S.Z,{className:T["b-img"],src:l}),(0,V.jsx)(s.View,{className:T["b-text"],dangerouslySetInnerHTML:{__html:c}}),(0,V.jsx)(s.Text,{className:"iconfont-h5 icon-arrow-right"})]})},o)}return null}))})})},M=k,y=M,I=a(90129),q=a(18228),F={"sanYaPop-container":"SanYaCouponModal-module_A6_Gc","sanYaPop-wrapper":"SanYaCouponModal-module_ftPSy",backImage:"SanYaCouponModal-module_x6kn8","position-style":"SanYaCouponModal-module_e79lu","coupon-box":"SanYaCouponModal-module_w9wUL","align-center":"SanYaCouponModal-module_Ah4F8","add-margin":"SanYaCouponModal-module_vvomU","coupon-content":"SanYaCouponModal-module_ZFC8L","coupon-title":"SanYaCouponModal-module_Uoq3d","price-symbol":"SanYaCouponModal-module__4wcm","price-number":"SanYaCouponModal-module_eMGdV","max-high":"SanYaCouponModal-module_kNCxm",info:"SanYaCouponModal-module_RAq3e",sanYaPopClose:"SanYaCouponModal-module_q8RMY"},A=0;function U(e){var n,a,o=e.show,l=e.sanYaData,c=(0,i.useState)(!1),u=(0,I.Z)(c,2),d=u[0],m=u[1],p=null===l||void 0===l||null===(n=l.noteItemList)||void 0===n||null===(n=n.find((function(e){return 81===(null===e||void 0===e?void 0:e.type)})))||void 0===n?void 0:n.content,f=JSON.parse(p||"{}"),x=null===f||void 0===f?void 0:f.couponTitle,h=null===f||void 0===f?void 0:f.couponAmount,v=null===f||void 0===f?void 0:f.couponBg;(0,i.useEffect)((function(){o&&!A&&(A+=1,m(!0))}),[o]);var g=function(){(0,q.jq)("sanYa_coupon_pop_click_close",{name:"\u77e5\u9053\u4e86"}),m(!1)};return l&&null!==l&&void 0!==l&&null!==(a=l.noteItemList)&&void 0!==a&&a.length&&p&&f&&Object.keys(f).length&&d?(0,V.jsx)(s.View,{className:F["sanYaPop-container"],children:(0,V.jsxs)(s.View,{className:F["sanYaPop-wrapper"],children:[(0,V.jsx)(S.Z,{className:(0,r.classnames)(F.backImage,(0,t.Z)({},F["position-style"],!1)),src:v}),(0,V.jsx)(s.View,{className:"".concat(F["coupon-box"]," ").concat(F["align-center"]),children:(0,V.jsx)(s.Text,{className:F["coupon-title"],children:x})}),(0,V.jsxs)(s.View,{className:F["coupon-content"],children:[(0,V.jsxs)(s.View,{className:"".concat(F["align-center"]," ").concat(F["add-margin"]),children:[(0,V.jsxs)(s.View,{children:[(0,V.jsx)(s.Text,{className:F["price-symbol"],children:"\uffe5"}),(0,V.jsx)(s.Text,{className:F["price-number"],children:h})]}),(0,V.jsx)(s.View,{className:F["max-high"],children:"\u6700\u9ad8"})]}),(0,V.jsx)(s.View,{className:F["align-center"],children:(0,V.jsx)(s.Text,{className:F.info,children:"\u51fa\u884c\u540e\u8fd4\u81f3\u643a\u7a0b\u8d26\u6237\uff0c\u53ef\u63d0\u73b0"})})]}),(0,V.jsx)(S.Z,{onClick:(0,r.trackFn)("close--f9af9",g),className:F.sanYaPopClose,src:"https://pages.c-ctrip.com/flight_h5/tinyapp/domList/know_btn.png"})]})}):null}var L=a(46535),B=a(73255);function E(){var e=(0,d.Sl)("listAdSwitcher");return(0,V.jsx)(B.ZP,{children:function(n){var a=n.data,o=n.lowestPrice,t=n.showSanYaPop,i=n.isFetching,r=n.isError,l=n.refetch;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(L.Z,{name:"first",children:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(w.Z,{lowestPrice:o,pageName:"first"}),(0,V.jsx)(s.View,{children:e&&(0,V.jsx)(y,{data:null===a||void 0===a?void 0:a.advertisement})}),(0,V.jsx)(s.View,{children:(0,V.jsx)(_.Z,{notificationInfos:null===a||void 0===a?void 0:a.notificationInfos})}),(0,V.jsx)(C.Z,{pageName:"first",data:a,isError:r,isFetching:i,refetch:l})]})}),(0,V.jsx)(U,{show:t,sanYaData:null===a||void 0===a?void 0:a.flightNotes}),!(0,c.IF)()&&!t&&!i&&(0,V.jsx)(N.Z,{pageSource:8})]})}})}var G=a(24417),O={changeArrivalCabin:j.Pc},K=function(e){return{cabin:e.departure.cabin}},R=function(e){var n=(0,c.pK)(),a=e.setCurrentPageId,o=e.changeArrivalCabin,l=e.cabin,j=(0,d.Sl)("showCollection")&&!0;return(0,i.useEffect)((function(){var e=(0,m.Vj)();return v.ZP.on(v.Ke,(function(e){"FIRST"===e&&o(l)}),e),function(){v.ZP.off(v.Ke,e)}}),[l,o,e]),(0,i.useLayoutEffect)((function(){var e=(0,m.Vj)();return v.ZP.on(v.Nz,(function(e){a(e),u.ZP.report({pageId:e,key:"home-to-list",name:"\u9996\u9875\u5230\u5217\u8868\u9875"})}),e),function(){v.ZP.off(v.Nz,e)}}),[a]),(0,p.d)({miniUrl:"/pages/flight/pages/list/first",h5Url:"/html5/flight/pages/first",ssrH5Url:"/html5/flight/taro/first"}),(0,V.jsxs)(s.View,{className:G.Z.ListPageNew,children:[(0,V.jsx)(s.View,{className:(0,r.classnames)(G.Z.pageTop,(0,t.Z)({},G.Z["pageTop-alipay"],!1)),children:(0,V.jsx)(x.Z,{clsName:"list",children:n?void 0:function(e){var n=e.clickTitle,a=e.fold;return(0,V.jsx)(f.Z,{clickTitle:n,fold:a})}})}),j&&(0,V.jsx)(h.Z,{}),(0,V.jsx)(E,{}),(0,V.jsx)(g.Z,{})]})},z=(0,l.Z)({})((0,r.connect)(K,O)(R)),D={navigationBarTitleText:"\u643a\u7a0b\u673a\u7968",navigationBarTextStyle:"white",navigationStyle:"custom",titleBarColor:"#0086f6",usingComponents:{captcha:"/commonComponent/captcha_min/captcha",collection:"/pages/market/components/collection/collection","scope-data":"/pages/flight/components/scope-data/index","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index"}};Page((0,o.createPageConfig)(z,"pages/flight/pages/list/first",{root:{cn:[]}},D||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[4499,2107,1216,8592],(function(){return n(12896)}));e.O()}]);
//# sourceMappingURL=first.js.map