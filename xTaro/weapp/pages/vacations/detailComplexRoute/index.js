"use strict";require("../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[6371],{13514:function(e,t,n){var a=n(32180),i=n(298),s=n(79301),o=n(95308),c=n(57042),r=n(24460),l=n(81876),u=n(21867),d=n(86066),x=n(45023),m=n(90201),h=n(71515),p=n(90129),f=n(92954),T=n.n(f),g=n(2269),j="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/hotelempty.png",I="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/poiempty.png",N="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/dinnerempty.png",C="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/shopemtpy.png",v={0:["\u65e9\u9910","\u5348\u9910","\u665a\u9910","\u4e0b\u5348\u8336","\u5bb5\u591c"],1:"\u9152\u5e97",2:"\u822a\u73ed",3:"\u666f\u70b9/\u573a\u9986",4:"\u8d2d\u7269",5:"\u81ea\u8d39\u9879\u76ee",6:"\u5168\u5929\u81ea\u7531\u6d3b\u52a8",7:"\u81ea\u7531\u6d3b\u52a8",8:"\u4ea4\u901a",9:"\u5176\u5b83",10:"\u8bfe\u7a0b",11:"\u6d3b\u52a8",12:"\u4e3b\u9898\u6d3b\u52a8",13:"\u8d44\u6e90",16:"\u542f\u822a",17:"\u62b5\u6e2f",18:"\u8239\u4e0a\u4f4f\u5bbf"},R=["\u65e9\u9910","\u5348\u9910","\u665a\u9910"],S=["BreakFast","Lunch","Supper"],D=m.memo(w),y=D;function w(e){var t=e.state,n=e.handlers,a=t.TravelIntroductionInfo,i=t.BasicInfo;if(!a||!a.TravelIntroductionList)return null;var s,o=a.TravelIntroductionList[0],c=o.IntroductionInfoList,r=o.LocalTimeDesc,l=o.TravelHotelDesc,u=i.isDiyfhxsdp,d=u?"\u63a8\u8350\u884c\u7a0b":"".concat(c.length,"\u65e5\u884c\u7a0b");return T().setNavigationBarTitle({title:d}),null===c||void 0===c||c.forEach((function(e){var t;e&&(null===(t=e.DailyList)||void 0===t||t.forEach((function(e,t){null!==e&&void 0!==e&&e.HotelInfoList&&null!==e&&void 0!==e&&e.HotelInfoList.length&&(s=!0)})))})),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F,{IntroductionInfoList:c}),(0,g.jsxs)(h.View,{className:"ModuleBox",children:[(0,g.jsxs)(h.View,{className:"RouteTitleBox MarginBottom24",children:[!!r&&(0,g.jsxs)(h.View,{className:"ModuleSubTitleBox",children:[(0,g.jsx)(h.Text,{className:"ModuleSubTitleIcon",children:"\ue405"}),(0,g.jsx)(h.Text,{className:"ModuleSubTitleText",children:r})]}),!!s&&(0,g.jsxs)(h.View,{className:"RouteDetailTitleTextSub",children:[(0,g.jsx)(h.Text,{className:"RouteDetailIcon",children:"\uef89"}),(0,g.jsx)(h.Text,{className:"RouteTimeTipText",children:"\u9152\u5e97\u94bb\u7ea7\u7531\u643a\u7a0b\u5e73\u53f0\u8bc4\u5b9a,\u5177\u4f53\u8bc4\u5b9a\u6807\u51c6\u53ef\u89c1\u643a\u7a0b\u5e73\u53f0\u9152\u5e97\u9891\u9053"})]}),!!l&&(0,g.jsxs)(h.View,{className:"ModuleSubTitleBox",children:[(0,g.jsx)(h.Text,{className:"ModuleSubTitleIcon",children:"\ue405"}),(0,g.jsx)(h.Text,{className:"ModuleSubTitleText",children:l})]}),(0,g.jsxs)(h.View,{className:"ModuleSubTitleBox",children:[(0,g.jsx)(h.Text,{className:"ModuleSubTitleIcon",children:"\ue405"}),(0,g.jsx)(h.Text,{className:"ModuleSubTitleText",children:"\u666f\u70b9\u56fe\u7247\u4ec5\u4f9b\u53c2\u8003"})]})]}),c.map((function(e,t){var a=e.FewDay,s=e.Desc,o=e.DailyList;e.TravelDate,e.IsSeaCruise;return(0,g.jsx)(W,{day:a,title:s,dayIndex:t,children:!!o&&o.map((function(e,t){var s=t+1===o.length;return(0,g.jsx)(B,{data:e,FewDay:a,isLast:s,BasicInfo:i,handlers:n},t)}))})}))]})]})}function F(e){var t=e.IntroductionInfoList,n=(0,m.useState)(1),a=(0,p.Z)(n,2),i=a[0],s=a[1],o=(0,m.useRef)(!1),c=(0,m.useRef)(0);(0,f.usePageScroll)((function(e){var n=e.scrollTop;c.current=n,o.current||t.forEach((function(e,t){var n=T().createSelectorQuery().select("#TabBar-".concat(t));n&&n.boundingClientRect((function(e){if(e){var n=e.top<44;if(n){var a=T().createSelectorQuery().select("#TabBar-".concat(t+1));a&&a.boundingClientRect((function(e){(!e||e&&e.top>44)&&s(t+1)})).exec()}}})).exec()}))}));var r=function(e){s(e)},l=(0,m.useCallback)((function(e){o.current=!0;var t=T().createSelectorQuery().select(e);t&&t.boundingClientRect((function(e){if(e){var t=c.current+e.top-44;T().pageScrollTo({scrollTop:t,duration:300,complete:function(){setTimeout((function(){o.current=!1}),250)}})}})).exec()}),[]);return(0,g.jsx)(h.View,{className:"DetailRouteNavBar",children:t.map((function(e,t){return(0,g.jsxs)(h.View,{className:i===t+1?"DayBottomLineContainer":"",children:[(0,g.jsxs)(h.Text,{onClick:function(){r(t+1),l("#TabBar-".concat(t))},children:["D",t+1]}),i===t+1?(0,g.jsx)(h.Text,{className:"DayBottomLine"}):null]})}))})}function B(e){var t=e.data,n=e.FewDay,a=e.isLast,i=void 0!==a&&a,s=e.BasicInfo,o=e.handlers,c=t.ActiveType;return v[c]&&5!==c?(0,g.jsxs)(h.View,{className:"DailyRouteContentContainer",children:[(0,g.jsx)(V,{data:t}),(0,g.jsx)(L,{day:n,data:t,BasicInfo:s,handlers:o}),i?null:(0,g.jsx)(h.View,{className:"RouteContentBorderLeft"})]}):null}function V(e){var t=e.data,n=t.DepartTime,a=t.ActiveType,i=t.DepartTimePrefix,s=t.DirectFlightFlag,o=v[a];if(0===a){var c=t.DinnerInfo,r=c||{},l=r.DinnerType,u=r.IncludeAdult,d=r.IncludeChild,x="";x="I"===u?"I"===d?"\u6210\u4eba\u3001\u513f\u7ae5 \u542b\u9910":"E"===d?"\u6210\u4eba\u542b\u9910 \u513f\u7ae5\u81ea\u7406":"\u6210\u4eba\u542b\u9910":"E"===u?"I"===d?"\u6210\u4eba\u81ea\u7406 \u513f\u7ae5\u542b\u9910":"E"===d?"\u6210\u4eba\u3001\u513f\u7ae5 \u81ea\u7406":"\u6210\u4eba\u81ea\u7406":"I"===d?"\u513f\u7ae5\u542b\u9910":"E"===d?"\u513f\u7ae5\u81ea\u7406":"",o=(v[0][l-1]||"\u9910\u996e")+(x?"\uff08".concat(x,"\uff09"):"")}if(7===a&&t.ScenicSpotList&&t.ScenicSpotList.length&&(o="\u81ea\u7531\u6d3b\u52a8-\u63a8\u8350\u666f\u70b9/\u573a\u9986"),2===a&&s){var m={D:"",Y:"\u76f4\u98de",N:"\u4e2d\u8f6c"};o=m[s]+o}var p="";return i=i||"",(i.trim()||n.trim())&&(p=i.trim()+n),(0,g.jsxs)(h.View,{className:"RouteContentTitleContainer MarginBottom16",children:[(0,g.jsx)(_,{ActiveType:a}),(0,g.jsx)(h.View,{children:(0,g.jsxs)(h.Text,{className:"RouteContentTitleText",children:[(0,g.jsx)(h.Text,{className:"FontNumberBold FontW600",children:p}),(0,g.jsx)(h.Text,{className:"FontW700",children:!!p&&!!o&&" \xb7 "}),(0,g.jsx)(h.Text,{className:"FontW600",children:o})]})})]})}function L(e){var t=e.day,n=e.data,a=e.BasicInfo,i=e.handlers,s=n.ScenicSpotList,o=n.HotelInfoList,c=n.DinnerInfo,r=(n.Desc,n.TakeTime),l=n.Distance,u=n.DriveTime,d=n.ActiveType,x=n.ProductsOnSale,m=(n.CruiseSailing,n.Themes);return(0,g.jsxs)(h.View,{children:[(0,g.jsx)(H,{day:t,ScenicSpotList:s,ActiveType:d,BasicInfo:a,handlers:i}),(0,g.jsx)(P,{HotelInfoList:o,BasicInfo:a,handlers:i}),(0,g.jsx)(M,{DinnerInfo:c,BasicInfo:a,handlers:i}),(0,g.jsx)(b,{data:n}),(0,g.jsx)(A,{ProductsOnSale:x}),(0,g.jsx)(q,{Themes:m}),(0,g.jsx)(G,{DinnerInfo:c}),(0,g.jsx)(Z,{Distance:l,DriveTime:u,ActiveType:d}),(0,g.jsx)(E,{TakeTime:r})]})}function k(e){var t=e.ImgUrl,n=e.RectImgURL,a=void 0===n?"":n,i=e.TitleName,s=e.rightContent,o=e.splitCircle,c=void 0!==o&&o,r=e.bottomContent,l=e.onClick;return c=!1,(0,g.jsxs)(h.View,{className:"RouteCardBox",onClick:l,children:[(0,g.jsxs)(h.View,{className:"RouteCard",children:[(0,g.jsxs)(h.View,{className:"RouteCardLeft MarginRight16",children:[(0,g.jsx)(h.Image,{className:"RouteCardImg",mode:"aspectFill",src:t}),a&&(0,g.jsx)(h.Image,{className:"RouteCardRecImg",src:a})]}),(0,g.jsxs)(h.View,{className:"RouteCardRight Flex1",children:[(0,g.jsxs)(h.View,{className:"RouteTitleLine MarginBottom4",children:[(0,g.jsx)(h.Text,{className:"RouteCardNameText FontW600",children:i}),(0,g.jsx)(h.Text,{className:"RouteCardNameIcon FontW600",children:"\ue944"})]}),s]}),c&&(0,g.jsxs)(m.Fragment,{children:[(0,g.jsx)(h.View,{className:"RouteCardGap RouteCardGapLeft"}),(0,g.jsx)(h.View,{className:"RouteCardGap RouteCardGapRight"})]})]}),r]})}function H(e){var t=e.day,n=e.ScenicSpotList,a=e.ActiveType,i=e.BasicInfo,s=e.handlers,o=s.handleGoPoiPage,c=s.handleShowSelfFundMask;if(!n||!n.length)return null;var r=4===a?C:I,l=new Array;return n.forEach((function(e,t){var a=new Array;0!==t&&n[t-1].OrFlag?l[l.length-1].push(e):(a.push(e),l.push(a))})),(0,g.jsx)(m.Fragment,{children:l.map((function(e,n){var s,l,u=e[0],d=u.Name,x=u.ImgList,p=u.RecommendDes,f=u.IsClassic,T=u.GSScenicSpotID,j=u.SuffixName,I=(u.BussinessIntroduce,u.GlobalRankingInfo),N=(u.CustomSynopsis,u.CommentScore),C=u.OpenTime,v=u.SightExtend,R=u.Tags,S=u.SelfFundedActivities,D=d+(j||""),y=x&&x[0]&&x[0].UrlList&&x[0].UrlList[0]&&x[0].UrlList[0].Value,w=p?p[0]:"";I&&I.Description&&(l=I.Description);var F,B=T&&4!==a&&y;if(v&&v.Star&&(F=v.Star),!B)return(0,g.jsx)(h.View,{className:"MarginBottom16 FlexAlignCenter FlexWrap",children:e.map((function(e,n){var a,i=e.Name,s=e.IsClassic,r=e.GSScenicSpotID,l=e.SuffixName,u=e.SelfFundedActivities,d=i+(l||"");return(0,g.jsxs)(m.Fragment,{children:[n>0&&(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(r>0?"FontBlue":"FontDark"),onClick:function(){r>0&&o(e,t)},children:[d,"\xa0"]}),s&&(0,g.jsxs)(m.Fragment,{children:[(0,g.jsx)(U,{className:"ComplexRouteContentTag",text:"\u4eba\u6c14"}),(0,g.jsx)(h.Text,{children:"\xa0"})]}),u&&u.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.Text,{className:"RouteTipText Ellipsis2",onClick:function(){c(d,u)},children:["(\u666f\u70b9/\u573a\u9986\u6536\u8d39\u53c2\u8003\uff1a",null===(a=u[0])||void 0===a?void 0:a.ActivityName,u.length>1&&"\u7b49".concat(u.length,"\u4e2a")]}),(0,g.jsx)(h.Text,{className:"RouteTipText FontGray FontIcon",onClick:function(){c(d,u)},children:"\uef89"}),(0,g.jsx)(h.Text,{className:"RouteTipText",children:")\xa0"})]})]},n)}))},n);var V=!([1,3].includes(i.ProductPatternId)||i.IsThemeProduct||i.isStudy),L=(0,g.jsxs)(m.Fragment,{children:[(f||!!F||R&&R.length>0)&&(0,g.jsxs)(h.View,{className:"RouteCardInfoLine",children:[!!f&&(0,g.jsx)(U,{text:"\u4eba\u6c14\u666f\u70b9",className:"ComplexRouteContentTag MarginRight8"}),!!F&&(0,g.jsx)(U,{text:"".concat(F,"A"),className:"ComplexRouteContentTag MarginRight8"}),R&&R.length>0&&R.map((function(e){return(0,g.jsx)(U,{text:e.TagName,className:"ComplexRouteContentTag MarginRight8"})}))]}),(N>0||!!w)&&(0,g.jsx)(h.View,{className:"RouteCardInfoLine",children:(0,g.jsxs)(h.Text,{className:"RouteCardInfoText FontBlue",children:[N>0&&"".concat(N,"\u5206")," "]})}),!!l&&(0,g.jsxs)(h.View,{className:"RouteCardInfoLine",children:[(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontRed FontIcon",children:"\uf457\xa0"}),(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontRed",children:l})]}),V&&!!C&&(0,g.jsx)(h.View,{className:"RouteCardInfoLine",children:(0,g.jsxs)(h.Text,{className:"RouteCardInfoText Ellipsis2",children:["\u5f00\u653e\u65f6\u95f4\uff1a",C]})}),S&&S.length>0&&(0,g.jsxs)(h.View,{className:"RouteCardInfoLine",onClick:function(e){e.stopPropagation(),c(D,S)},children:[(0,g.jsxs)(h.Text,{className:"RouteCardInfoText Ellipsis2",children:["\u666f\u70b9/\u573a\u9986\u6536\u8d39\u53c2\u8003\uff1a",null===(s=S[0])||void 0===s?void 0:s.ActivityName,S.length>1&&"\u7b49".concat(S.length,"\u4e2a")]}),(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontIcon",children:"\uef89"})]})]}),H=(0,g.jsx)(m.Fragment,{children:e.length>1&&(0,g.jsx)(h.View,{className:"RouteCardBottom",children:e.slice(1).map((function(e,n){var a,i=e.Name,s=e.IsClassic,r=e.GSScenicSpotID,l=e.SuffixName,u=e.SelfFundedActivities,d=i+(l||"");return(0,g.jsxs)(h.View,{children:[(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(r>0?"FontBlue":""),onClick:function(n){n.stopPropagation(),r>0&&o(e,t)},children:[(0,g.jsx)(h.Text,{className:"FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{children:[d,"\xa0"]})]}),s&&(0,g.jsx)(U,{className:"ComplexRouteContentTag",text:"\u4eba\u6c14"}),(0,g.jsx)(h.Text,{children:"\xa0"}),u&&u.length>0&&(0,g.jsx)(h.Text,{className:"RouteCardInfoText",onClick:function(e){e.stopPropagation(),c(d,u)},children:(0,g.jsxs)(h.Text,{className:"Ellipsis2",children:["(\u666f\u70b9/\u573a\u9986\u6536\u8d39\u53c2\u8003\uff1a",null===(a=u[0])||void 0===a?void 0:a.ActivityName,u.length>1&&"\u7b49".concat(u.length,"\u4e2a"),(0,g.jsx)(h.Text,{className:"FontGray FontIcon",style:{position:"relative",top:2},children:"\uef89"}),")"]})})]},n)}))})});return(0,g.jsx)(k,{ImgUrl:y||r,RectImgURL:7==a&&"https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/scenicrec.png",TitleName:D,splitCircle:e.length>1,rightContent:L,bottomContent:H,onClick:function(){o(e[0],t)}},n)}))})}function P(e){var t=e.HotelInfoList,n=e.BasicInfo,a=e.handlers,i=a.handleGoHotelDetail;if(!t||!t.length)return null;var s=t[0],o=s.HotelName,c=s.HotelImgUrl,r=s.HotelType,l=(s.Star,s.HotelID),u=(s.IsOversea,s.ToTownDistance),d=s.HotelBelong,x=s.CommentScore,p=s.HotelTags,f=s.CityId,T=s.HotelAwardInfoList,I="";null==u?I="":u>1e3&&u<2e4?(u=(u/1e3).toFixed(0),I="\u8ddd\u79bb\u5e02\u4e2d\u5fc3".concat(u,"km")):u<1e3&&u>=100?(u=u.toFixed(0),I="\u8ddd\u79bb\u5e02\u4e2d\u5fc3".concat(u,"m")):I=0<u&&u<100?"\u8ddd\u79bb\u5e02\u4e2d\u5fc3<100m":"";var N="";T&&T[0]&&T[0].Desc&&(N=T[0].Desc);var C=l>0&&c;if(!C)return(0,g.jsx)(h.View,{className:"MarginBottom16 FlexAlignCenter FlexWrap",children:t.map((function(e,t){var n=e.HotelID,a=e.HotelName,s=e.CityId,o=e.HotelType;return(0,g.jsxs)(m.Fragment,{children:[t>0&&(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(n>0?"FontBlue":"FontDark"),onClick:function(){n>0&&i({HotelID:n,CityId:s})},children:[a,!!o&&"\uff08".concat(o,"\uff09"),"\xa0"]})]},n)}))});var v=![1,3].includes(n.ProductPatternId)||n.isStudy||n.IsThemeProduct,R=(0,g.jsxs)(m.Fragment,{children:[!!r&&(0,g.jsx)(h.View,{className:"RouteCardInfoLine",children:(0,g.jsx)(U,{text:r,className:"ComplexRouteContentTag MarginRight8"})}),(x>0||p&&p.length>0)&&(0,g.jsxs)(h.View,{className:"RouteCardInfoLine",children:[x>0&&(0,g.jsxs)(h.Text,{className:"RouteCardInfoText FontBlue",children:[x,"\u5206\xa0"]}),p&&p.length>0&&p.map((function(e,t){return(0,g.jsxs)(h.Text,{className:"RouteCardInfoText FontBlue",children:["\u201c",e.TagName,"\u201d"]},t)}))]}),!!N&&(0,g.jsx)(h.View,{className:"RouteScenicCardRank",children:(0,g.jsx)(h.Text,{className:"RouteScenicCardRankText",children:N})}),v&&(!!I||!!d)&&(0,g.jsx)(h.View,{className:"RouteCardInfoLine",children:(0,g.jsxs)(h.Text,{className:"RouteCardInfoText",children:[!!I&&"".concat(I),!!I&&!!d&&" \xb7 ",!!d&&"".concat(d)]})})]}),S=(0,g.jsx)(m.Fragment,{children:t.length>1&&(0,g.jsx)(h.View,{className:"RouteCardBottom",children:t.slice(1).map((function(e,t){var n=e.HotelID,a=e.HotelName,s=e.CityId,o=e.HotelType;return(0,g.jsxs)(m.Fragment,{children:[(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(n>0?"FontBlue":""),onClick:function(e){e.stopPropagation(),n>0&&i({HotelID:n,CityId:s})},children:[a,!!o&&"\uff08".concat(o,"\uff09"),"\xa0"]})]},n)}))})});return(0,g.jsx)(k,{ImgUrl:c||j,TitleName:o,rightContent:R,bottomContent:S,onClick:function(){i({HotelID:l,CityId:f})}})}function M(e){var t=e.DinnerInfo,n=e.BasicInfo,a=e.handlers,i=a.handleGoRestaurantDetail;if(!t||!t.DinnerPoiInfoList||!t.DinnerPoiInfoList.length)return t&&t.Desc?(0,g.jsxs)(h.Text,{children:[R[t.DinnerType-1],"\uff1a",t.Desc]}):null;var s=t.DinnerPoiInfoList,o=s[0],c=o.ImgList,r=o.Name,l=(o.CommentScore,o.BussinessIntroduce,o.Tags),u=o.DistrictId,d=o.RestaurantId,x=o.GSScenicSpotID,p=c&&c[0]&&c[0].UrlList&&c[0].UrlList[0]&&c[0].UrlList[0].Value,f=S[t.DinnerType-1],T="S"===t[f],j=l&&l[0]&&l[0].TagName,I=x>0&&p&&([4].includes(n.ProductPatternId)||n.isPureDiyfhxsdp);if(!I)return(0,g.jsx)(h.View,{className:"MarginBottom16 FlexAlignCenter FlexWrap",children:s.map((function(e,t){var n=e.Name,a=e.DistrictId,s=e.RestaurantId;return n?(0,g.jsxs)(m.Fragment,{children:[t>0&&(0,g.jsx)(h.Text,{className:"RouteCardInfoText FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(x>0?"FontBlue":"FontDark"),onClick:function(){x>0&&i({destCityId:a,restId:s})},children:[n,"\xa0"]})]},t):null}))});var C=(0,g.jsx)(m.Fragment,{children:!!j&&(0,g.jsx)(h.View,{className:"RouteCardInfoLine",children:(0,g.jsx)(U,{text:j,className:"ComplexRouteContentTag MarginRight8"})})}),v=(0,g.jsx)(m.Fragment,{children:s.length>1&&(0,g.jsx)(h.View,{className:"RouteCardBottom",children:s.slice(1).map((function(e,t){var n=e.GSScenicSpotID,a=e.DistrictId,s=e.RestaurantId,o=e.Name,c=e.Tags,r=c&&c[0]&&c[0].TagName;return(0,g.jsxs)(m.Fragment,{children:[(0,g.jsxs)(h.Text,{className:"RouteCardInfoText ".concat(n>0?"FontBlue":""),onClick:function(){n>0&&i({destCityId:a,restId:s})},children:[(0,g.jsx)(h.Text,{className:"FontDark",children:"\u6216\xa0"}),(0,g.jsxs)(h.Text,{children:[o,"\xa0"]})]}),!!r&&(0,g.jsx)(U,{text:r}),(0,g.jsx)(h.Text,{children:"\xa0"})]},t)}))})});return(0,g.jsx)(k,{ImgUrl:p||N,TitleName:r,RectImgURL:T&&"https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/poirec.png",rightContent:C,bottomContent:v,onClick:function(){x>0&&i({destCityId:u,restId:d})}})}function b(e){var t=e.data,n=(0,m.useState)(t.Desc&&t.Desc.length>500),a=(0,p.Z)(n,2),i=a[0],s=a[1],o=(0,m.useState)(t.Desc&&t.Desc.length<=500),c=(0,p.Z)(o,2),r=c[0],l=c[1],u=t.Desc,d=t.ActiveType,x=v[d];return(0,m.useEffect)((function(){s(t.Desc&&t.Desc.length>500)}),[u]),u?([1,3,9].includes(d)||(12===d?u="".concat(t.Destination,"\uff1a").concat(u):0!==d&&(u="".concat(x,"\uff1a").concat(u))),u=u.replace(/<img(.*?)src="(.*?)"(.*?)>/g,'<img style="display: block!important;vertical-align: top!important;width: 100%!important;" src="$2" >'),u=u.replace(/<img(.*?)src="(.*?)"(.*?)\/>/g,'<img style="display: block!important;vertical-align: top!important;width: 100%!important;" src="$2" />'),(0,g.jsxs)(h.View,{children:[(0,g.jsx)(h.View,{className:"UIDescContent MarginBottom16 TextJustify ".concat(r?"expanded":""),children:(0,g.jsx)("mp-html",{content:u,copyLink:!1,onLinktap:function(e){}})}),!!i&&(0,g.jsxs)(h.View,{className:"FlexVerticalCenter MarginBottom24",onClick:function(){l(!r)},children:[(0,g.jsx)(h.Text,{className:"ContentExpandToggleText",children:r?"\u6536\u8d77":"\u5c55\u5f00"}),r?(0,g.jsx)(h.Text,{className:"ContentExpandToggleText FontIcon MarginLeft8",children:"\ue946"}):(0,g.jsx)(h.Text,{className:"ContentExpandToggleText FontIcon MarginLeft8",children:"\ue945"})]})]})):null}function A(e){var t=e.ProductsOnSale;return t?(0,g.jsx)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:(0,g.jsxs)(h.Text,{className:"RouteTipText",children:["\u8425\u4e1a\u4ea7\u54c1\uff1a ",t]})}):null}function G(e){var t=e.DinnerInfo;if(!t)return null;var n=t.Costs,a=S[t.DinnerType-1];if(n&&n[0]){var i="S"===t[a]?"\u53c2\u8003\u8d39\u7528":"\u9910\u6807",s=n[0],o=s.Cost,c=s.Currency;if(o>0)return(0,g.jsxs)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:[(0,g.jsx)(h.Text,{className:"RouteTipIcon",children:"\udb84\uddc7"}),(0,g.jsxs)(h.Text,{className:"RouteTipText",children:[i,"\uff1a",o," ",c,"/\u4eba"]})]})}return null}function Z(e){var t=e.Distance,n=e.DriveTime,a=e.ActiveType;return t&&n&&"0/0"!==n?(0,g.jsxs)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:[(0,g.jsx)(h.Text,{className:"RouteTipIcon",children:"\ue933"}),(0,g.jsxs)(h.Text,{className:"RouteTipText",children:[2===a?"\u98de\u884c\uff1a":"\u884c\u9a76\uff1a","\u7ea6",t,"\u516c\u91cc/\u7ea6",Number(n.split("/")[0])>0&&"".concat(n.split("/")[0],"\u5c0f\u65f6"),n.split("/")[1]>0&&"".concat(n.split("/")[1],"\u5206\u949f")]})]}):t?(0,g.jsxs)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:[(0,g.jsx)(h.Text,{className:"RouteTipIcon",children:"\ue933"}),(0,g.jsxs)(h.Text,{className:"RouteTipText",children:[2===a?"\u98de\u884c\u8ddd\u79bb\uff1a":"\u884c\u9a76\u8ddd\u79bb\uff1a","\u7ea6",t,"\u516c\u91cc"]})]}):n&&"0/0"!==n?(0,g.jsxs)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:[(0,g.jsx)(h.Text,{className:"RouteTipIcon",children:"\ue930"}),(0,g.jsxs)(h.Text,{className:"RouteTipText",children:[2===a?"\u98de\u884c\u65f6\u95f4\uff1a":"\u884c\u9a76\u65f6\u95f4\uff1a","\u7ea6",Number(n.split("/")[0])>0&&"".concat(n.split("/")[0],"\u5c0f\u65f6"),n.split("/")[1]>0&&"".concat(n.split("/")[1],"\u5206\u949f")]})]}):null}function E(e){var t=e.TakeTime;return t?(0,g.jsxs)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:[(0,g.jsx)(h.Text,{className:"RouteTipIcon",children:"\ue930"}),(0,g.jsx)(h.Text,{className:"RouteTipText",children:t})]}):null}function _(e){var t=e.ActiveType,n="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/detail/activetype".concat(t,"_n.png");return(0,g.jsx)(h.View,{className:"RouteContentTitleIconContainer FlexVerticalCenter",children:(0,g.jsx)(h.Image,{className:"RouteContentTitleIcon",src:n})})}function U(e){var t=e.className,n=void 0===t?"":t,a=e.text;return(0,g.jsx)(h.Text,{className:"UITag ".concat(n),children:a})}function W(e){var t=e.day,n=e.title,a=e.dayIndex,i=e.isLast,s=void 0!==i&&i,o=e.isSimple,c=void 0!==o&&o,r=e.children;return(0,g.jsxs)(h.View,{className:"DetailRouteDay",id:"TabBar-".concat(a),children:[(0,g.jsxs)(h.View,{className:"RouteDetailDay",children:[(0,g.jsxs)(h.View,{className:"RouteDetailDayTitleNum",children:[(0,g.jsx)(h.Text,{style:{color:"#333",fontSize:"10px",fontWeight:"bold"},children:"DAY"}),(0,g.jsx)(h.Text,{style:{color:"#0086f6",fontSize:"20px",fontFamily:"DINCondensed-Bold"},children:t>=10?t:"0".concat(t)})]}),(0,g.jsx)(h.View,{className:"RouteDetailDayTitleNumLine"}),(0,g.jsx)(h.View,{className:"DetailRouteTitle FlexAlignCenter FlexWrap FontW600",children:n})]}),(0,g.jsx)(h.View,{className:"DetailRouteContentContainer ".concat(s?"isLast":c?"isSimple":""),children:r}),!s&&c?(0,g.jsx)(h.View,{className:"RouteContentBorderLeft SimpleRouteDayBorderLeft"}):null]})}function q(e){var t=e.Themes;if(!t||!t[0])return null;var n=t[0],a=(n.CustomTheme,n.fields);return a&&a.length?(0,g.jsx)(g.Fragment,{children:a.map((function(e,t){var n=e.Title,a=e.Desc;return(0,g.jsx)(h.View,{className:"RouteTipBox FlexAlignCenter MarginBottom8",children:(0,g.jsxs)(h.Text,{className:"RouteTipText",children:[n,"\uff1a",a]})},t)}))}):null}var O=n(94503);function Y(e){var t=e.state,n=e.handlers,a=t.isShowSelfFundMask,i=t.SelfFundedMaskInfo,s=n.handleHideSelfFundMask;if(!a)return null;var o=i.ScenicName,c=i.SelfFundedActivities;return(0,g.jsx)(O.Z,{title:"\u81ea\u8d39\u8be6\u60c5",subtitle:o,handleClose:function(){s(!1)},children:(0,g.jsx)(h.View,{className:"PopMaskContainer MarginX32",children:c.map((function(e,t){var n=e.ActivityName,a=e.ActivityDesc,i=e.Currency,s=e.Price,o=e.UseListingPrice;return(0,g.jsxs)(h.View,{className:"ScenicItem",children:[(0,g.jsx)(h.View,{className:"ScenicTitle",children:n}),(0,g.jsxs)(h.View,{className:"ScenicContentContainer",children:[(0,g.jsx)(h.View,{className:"ScenicDot",children:"\u2022"}),(0,g.jsxs)(h.View,{className:"ScenicContentBox",children:[(0,g.jsx)(h.View,{className:"ScenicContent",children:a}),(s>0||o)&&(0,g.jsxs)(h.View,{className:"ScenicContent",children:["\u53c2\u8003\u4ef7\u683c\uff1a",o?"\u666f\u533a\u6302\u724c\u4ef7":"".concat(i).concat(s)]})]})]})]},t)}))})})}function $(e){var t=e.state,n=e.handlers;return(0,g.jsxs)(h.View,{className:"Layout",children:[(0,g.jsx)(y,{state:t,handlers:n}),(0,g.jsx)(Y,{state:t,handlers:n}),(0,g.jsx)(h.View,{style:{height:30}})]})}var Q=n(85198),z=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,x.Z)((0,l.Z)(e),"pageId",void 0),(0,x.Z)((0,l.Z)(e),"handleGoHotelDetail",(function(t){var n=t.HotelID,a=t.CityId,i="/webapp/vacations/idiytour/hotelDetail",s={cityid:a,hotelid:n,sourcefrom:"tour_poi"};e.jumpH5({url:i,params:s})})),(0,x.Z)((0,l.Z)(e),"handleGoRestaurantDetail",(function(t){var n=t.destCityId,a=t.restId,i="/webapp/you/foods/".concat(n,"/").concat(a,".html"),s={fromType:"hotel",isHideHeader:!0,navBarStyle:"white",isHideNavBar:"YES"};e.jumpH5({url:i,params:s})})),(0,x.Z)((0,l.Z)(e),"handleGoPoiPage",(function(t,n){var a=t.DistrictID,i=t.GSScenicSpotID,s=t.PoiTypeId,o=t.BusinessId;if(3===s||66===s){var c="/webapp/you/gspoi/sight/".concat(a,"/").concat(o,".html?poiId=").concat(i,"&scene=grouptours&seo=0&isHideNavBar=YES");e.jumpH5({url:c})}else if(5===s){var r="/webapp/you/gsshopping/shops/".concat(a,"/").concat(o,".html"),l={isHideNavBar:"YES",seo:0,scene:"grouptours"};e.jumpH5({url:r,params:l})}else if(2===s){var u="/webapp/you/foods/".concat(a,"/").concat(o,".html"),d={fromType:"hotel",isHideHeader:!0,navBarStyle:"white",isHideNavBar:"YES"};e.jumpH5({url:u,params:d})}})),(0,x.Z)((0,l.Z)(e),"handleShowSelfFundMask",(function(t,n){e.setState({isShowSelfFundMask:!0,SelfFundedMaskInfo:{ScenicName:t,SelfFundedActivities:n}})})),(0,x.Z)((0,l.Z)(e),"handleHideSelfFundMask",(function(){e.setState({isShowSelfFundMask:!1})})),e}return(0,r.Z)(n,[{key:"onLoad",value:function(e){this.fetchRouteData(e)}},{key:"componentWillMount",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:T().loadFontFace({family:"crn_font_Ctrip_GroupTour",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/crn_font_Ctrip_GroupTour.ttf?v=3")'}),T().loadFontFace({family:"20TH_bold",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/20TH_bold.ttf")'}),T().loadFontFace({family:"20TH_regular",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/20TH_regular.ttf")'});case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchRouteData",value:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,o,c,r,l,u,d,x,m;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="ProductComplexRouteInfo",a="\n        query getProductInfo($params: ProductArgs!) {\n            productInfo(params: $params) {\n              BasicInfo {\n                json\n              }\n              TravelIntroductionInfo {\n                json\n              }\n              ResponseStatus\n            }\n          }",o={params:(0,i.Z)({ProductId:Number(t.ProductId),DepartureCityId:Number(t.DepartCityId),Alias:t.Alias?[t.Alias]:["A"]},this.attachShardParams())},e.prev=3,this.showLoadingDialog({title:"\u52a0\u8f7d\u4e2d"}),e.next=7,this.gqlpost(a,o,n);case 7:if(c=e.sent,r=c.data,l=r.productInfo,u=l.ResponseStatus,"Success"!==u.Ack){e.next=17;break}d=l.BasicInfo,x=l.TravelIntroductionInfo,this.setState({BasicInfo:d,TravelIntroductionInfo:x}),this.hideLoadingDialog(),e.next=18;break;case 17:throw new Error(u.Errors[0].Message);case 18:e.next=26;break;case 20:e.prev=20,e.t0=e["catch"](3),console.log(e.t0),this.hideLoadingDialog(),m="\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",this.showToast(m);case 26:case"end":return e.stop()}}),e,this,[[3,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.state;console.log(e);var t={handleGoHotelDetail:this.handleGoHotelDetail,handleGoRestaurantDetail:this.handleGoRestaurantDetail,handleGoPoiPage:this.handleGoPoiPage,handleShowSelfFundMask:this.handleShowSelfFundMask,handleHideSelfFundMask:this.handleHideSelfFundMask};return e?(0,g.jsx)($,{state:e,handlers:t}):null}}]),n}(Q.Z),J={navigationBarTitleText:"",navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black",usingComponents:{"mp-html":"../common/mp-html/index"}};Page((0,a.createPageConfig)(z,"pages/vacations/detailComplexRoute/index",{root:{cn:[]}},J||{}))},79181:function(e){e.exports=require("../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../cwx/cwx")},65238:function(e){e.exports=require("../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../cwx/cwx")},46346:function(e){e.exports=require("../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[4666,2107,1216,8592],(function(){return t(13514)}));e.O()}]);
//# sourceMappingURL=index.js.map