/*! For license information please see taroCommon.js.LICENSE.txt */
(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[4666],{83259:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,a){n=n||"&",r=r||"=";var o={};if("string"!==typeof e||0===e.length)return o;var i=/\+/g;e=e.split(n);var c=1e3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var s,d,f,p,m=e[u].replace(i,"%20"),v=m.indexOf(r);v>=0?(s=m.substr(0,v),d=m.substr(v+1)):(s=m,d=""),f=decodeURIComponent(s),p=decodeURIComponent(d),t(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},61823:function(e,t,n){"use strict";var r=n(66371)["default"],a=function(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===r(e)?Object.keys(e).map((function(r){var o=encodeURIComponent(a(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(a(e))})).join(t):o+encodeURIComponent(a(e[r]))})).join(t):o?encodeURIComponent(a(o))+n+encodeURIComponent(a(e)):""}},79666:function(e,t,n){"use strict";t.decode=t.parse=n(83259),t.encode=t.stringify=n(61823)},94503:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(90129),a=n(90201),o=n(71515),i=n(60403),c=n(2269);function l(e){var t=e.children,n=e.headerBgUrl,l=void 0===n?"":n,u=e.title,s=e.subtitle,d=void 0===s?"":s,f=e.confirmText,p=void 0===f?"":f,m=e.confirmClose,v=void 0===m||m,h=e.handleClose,g=e.handleConfirm,y=void 0===g?null:g,_=e.isScrollView,b=void 0===_||_,E=e.zIndex,w=void 0===E?1e3:E,S=e.backgroundColor,I=void 0===S?"#fff":S,T=(0,a.useState)("fadeInUp"),C=(0,r.Z)(T,2),P=C[0],k=C[1],N=function(){k("fadeOutDown"),setTimeout((function(){h&&h()}),250)},O=function(){v&&k("fadeOutDown"),setTimeout((function(){y&&y()}),250)},x=""!==l;return(0,c.jsxs)(o.View,{catchMove:!0,className:"CommonPopContainer",style:{zIndex:w},children:[(0,c.jsx)(o.View,{className:"CommonPopGrayBg",onClick:function(e){e.stopPropagation(),N()}}),(0,c.jsx)(o.View,{className:"CommonPopContentContainer ".concat(P),children:(0,c.jsxs)(o.View,{className:"PopBox",style:{backgroundColor:I},children:[x&&(0,c.jsx)(o.View,{className:"PopHeaderBg",children:(0,c.jsx)(o.Image,{className:"PopHeaderBgPic",mode:"widthFix",src:l})}),(0,c.jsxs)(o.View,{className:"PopHeaderContainer",children:[(0,c.jsx)(o.Text,{className:"PopHeaderClickArea PopHeaderBtnIcon ".concat(x?"TextWhite":""),onClick:function(){N()},children:"\ue940"}),(0,c.jsxs)(o.View,{className:"PopHeaderTitle ".concat(x?"TextWhite":""),children:[(0,c.jsx)(o.Text,{className:"PopHeaderTitleText TextDark",children:u}),d&&(0,c.jsx)(o.Text,{className:"PopHeaderSubTitleText",children:d})]}),p&&(0,c.jsx)(o.Text,{className:"PopHeaderClickArea PopHeaderConfirmBtn TextBlue",onClick:function(){O()},children:p})]}),b?(0,c.jsxs)(o.ScrollView,{scrollY:!0,className:"PopContentScroll",children:[t,(0,c.jsx)(i.Z,{safeAreaBg:I})]}):(0,c.jsxs)(a.Fragment,{children:[t,(0,c.jsx)(i.Z,{safeAreaBg:I})]})]})})]})}},60403:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});n(90201);var r=n(71515),a=n(2269);function o(e){var t=e.safeAreaBg;return(0,a.jsx)(r.View,{className:"SafeArea",style:{backgroundColor:t}})}},36517:function(e,t,n){var r=n(32180)["window"],a=n(32180)["navigator"],o=n(32180)["document"],i=n(32180)["requestAnimationFrame"],c=n(66371)["default"];e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==c(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=170)}([function(e,t){e.exports=n(90201)},function(e,t){e.exports=n(71515)},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u}));var r,a,o=n(7),i=void 0!==e&&"test"===(null===(r=null==e?void 0:e.env)||void 0===r?void 0:r.NODE_ENV),c=void 0!==e&&"development"===(null===(a=null==e?void 0:e.env)||void 0===a?void 0:a.NODE_ENV),l=function(e){return null==e||"object"===Object(o.a)(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length},u=function(e){var t;return l(e)?"":(null===(t=null==e?void 0:e.find((function(e){return"RootMessageId"===e.Id})))||void 0===t?void 0:t.Value)||""}}).call(this,n(44))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(49),t)},function(e,t,n){"use strict";var r=n(7);t.a={isEmpty:function(e){return null==e||"string"==typeof e&&0===e.trim().length||("[object Array]"===Object.prototype.toString.call(e)?0===e.length:"[object Date]"!==Object.prototype.toString.call(e)&&"[object Function]"!==Object.prototype.toString.call(e)&&"object"===Object(r.a)(e)&&0===Object.keys(e).length)},cloneDeep:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if("object"!==Object(r.a)(t)||null===t)return t;if(n.has(t))return n.get(t);n.set(t,t);var a=Array.isArray(t)?[]:{};for(var o in t)t.hasOwnProperty(o)&&(a[o]=e(t[o],n));return a}}},function(e,t,n){"use strict";n.d(t,"PlatformContext",(function(){return a})),n.d(t,"TourContext",(function(){return o})),n.d(t,"setupTourContext",(function(){return i}));var r=n(3),a=(n(8),Object(r.createModelContext)({}),Object(r.createModelContext)({})),o=(Object(r.createModelContext)({}),Object(r.createModelContext)(null)),i=function(){return Object(r.setupContext)(o)}},function(e,t){e.exports=n(92954)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":c(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(36).default,a=n(37).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),u=c(n(116)),s=c(n(117)),d=c(n(118)),f=c(n(119)),p=function(){function e(t,n){r(this,e),this.config=t,this.sender=f.default(t,n)}return a(e,[{key:"logPageInfo",value:function(e){try{var t=u.default.checkPageInfo(e);if(t)return void d.default.warn("logPageInfo",t);var n=s.default.pageInfo(e);return this.sender.sendDevTrace(n),n}catch(e){if(this.config&&this.config.platform==l.PlatformType.test)return e;d.default.exception("logPageInfo",e)}}},{key:"logMessage",value:function(e){try{var t=u.default.checkMessage(e);if(t)return void d.default.warn("logMessage",t);var n=s.default.message(e);return this.sender.sendDevTrace(n),n}catch(e){if(this.config&&this.config.platform==l.PlatformType.test)return e;d.default.exception("logMessage",e)}}},{key:"logActionInfo",value:function(e){try{var t=u.default.checkActionInfo(e);if(t)return void d.default.warn("logActionInfo",t);var n=s.default.actionInfo(e);return this.sender.sendDevTrace(n),n}catch(e){if(this.config&&this.config.platform==l.PlatformType.test)return e;d.default.exception("logActionInfo",e)}}},{key:"logError",value:function(e){try{var t=u.default.checkError(e);if(t)return void d.default.warn("logError",t);var n=s.default.error(e);return this.sender.sendError(n),this.config.platform!=l.PlatformType.test&&d.default.error("logError",n),n}catch(e){if(this.config&&this.config.platform==l.PlatformType.test)return e;d.default.exception("logError",e)}}}]),e}();t.default=p,i(n(24),t)},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":c(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=n(33675)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(97),t)},function(e,t,n){(function(a){var o,i,c,l=n(9).default;!function(n,r){"object"==l(t)&&void 0!==e?r(t):(i=[t],void 0===(c="function"==typeof(o=r)?o.apply(t,i):o)||(e.exports=c))}(0,(function(e){"use strict";var t,n,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=(function(e,t){function n(e,t){return void 0===t&&(t={}),o=function(){return o=this,c=function(n){switch(n.label){case 0:return e&&"object"==l(e)?"function"==typeof e.clone?[4,e.clone().json()]:[3,2]:(console.log("[perf_metric ERROR, wrong Response]"),[2]);case 1:e=n.sent(),n.label=2;case 2:if(!(e=e||{}).ResponseStatus)return[2];if("undefined"==typeof r)return[2];try{!function(e,t,n,a){"undefined"!=typeof r&&(a?a(n||"http_request_perf",t||0,e):(r.__bfi=r.__bfi||[],r.__bfi.push(["_trackMetric",{name:"http_request_perf",value:t||0,tag:e}])))}((c=(o=(o=t)||{}).tag||{},d=(s=void 0===(u=(e||{}).ResponseStatus)?{}:u).Extension||[],f=s.Ack||"",p=(a(d,(function(e){return"CLOGGING_TRACE_ID"===e.Id}))||{}).Value,m=(a(d,(function(e){return"RootMessageId"===e.Id}))||{}).Value,v="success"===f.toLowerCase(),h=v?200:-1,g=o.url?o.url:"",i({framework:o.framework||"perf_metric",success:v||!0,statusCode:h||200,RootMessageId:m||"",CLOGGING_TRACE_ID:p||"",info:"",url:g||""},c)),t.value||0,t.name||"http_request_perf",t.logMetric)}catch(n){console.log("[perf-metric error] "+n)}return[2]}var o,c,u,s,d,f,p,m,v,h,g},p={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},f={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function n(e){return function(t){return function(e){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,s&&(d=2&e[0]?s.return:e[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,e[1])).done)return d;switch(s=0,d&&(e=[2&e[0],d.value]),e[0]){case 0:case 1:d=e;break;case 4:return p.label++,{value:e[1],done:!1};case 5:p.label++,s=e[1],e=[0];continue;case 7:e=p.ops.pop(),p.trys.pop();continue;default:if(!(d=0<(d=p.trys).length&&d[d.length-1])&&(6===e[0]||2===e[0])){p=0;continue}if(3===e[0]&&(!d||e[1]>d[0]&&e[1]<d[3])){p.label=e[1];break}if(6===e[0]&&p.label<d[1]){p.label=d[1],d=e;break}if(d&&p.label<d[2]){p.label=d[2],p.ops.push(e);break}d[2]&&p.ops.pop(),p.trys.pop();continue}e=c.call(o,p)}catch(t){e=[6,t],s=0}finally{u=d=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var o,c,u,s,d,f,p},new(n=(n=void 0)||Promise)((function(e,t){function r(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new n((function(e){e(t.value)})).then(r,a)}i((o=o.apply(void 0,[])).next())}));var n,o}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r))return r}}var o,i;i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},(o=t).createHttpPerfMetric=function(e){var t=e.key||"http_request_perf",r=e.name||"",a=e.type||"api",o=e.framework||"perf_metric",i=t,c={type:a},l=Date.now();return function(e){var t=e.data,a=e.logMetric,u=Date.now()-l;n(t,{name:i,url:r,value:u,tag:c,framework:o,logMetric:a})}},o.createMetric=function(e){var t=e.key,n=e.apiName,a=e.type,o={name:t=t||"http_request_perf",value:0,tag:{stage:"",errorStack:"",type:a=a||"api",subeventid:n}},i=Date.now();return function(e){var t=(e=e||{}).status,n=void 0===t?"":t,a=e.errorStack,c=void 0===a?"":a;o.value=Date.now()-i,o.tag.stage=n||"succ",o.tag.errorStack=c,"undefined"!=typeof r&&void 0===r.__bfi&&(r.__bfi=[]),"undefined"!=typeof r&&r.__bfi.push(["_trackMetric",o])}},o.default=n,Object.defineProperty(o,"__esModule",{value:!0})}(t={exports:{}},t.exports),t.exports);function c(e){return c=function(){var t,n,i,c,f,m,v,h,g,y;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(_){switch(_.label){case 0:t=o(o(o({},d),e),{params:o(o({},d.params),e.params),headers:o(o({},d.headers),e.headers)}),n=p(t),i=e.fetch?e.fetch:s?a.fetch:r.fetch,c=t.params,delete t.params,delete t.domains,delete t.env,delete t.fetch,delete t.needVirtualPath,delete t.path,delete t.subEnv,f=o(o({},c),t.extraBody);try{m=t.needStringifyBody?JSON.stringify(f):f}catch(_){console.log(_),m={}}if(v=i(n,o(o({method:"POST",body:m},t),{credentials:s?void 0:t.credentials})),t.needPerfMetric)try{h=u({name:n,framework:"graphql-client"})}catch(_){h=function(){}}return"number"!=typeof t.timeout?[3,2]:(g=e.timeoutErrorFormatter,y="function"==typeof g?g({url:n,options:t}):g,[4,function(e,t,n){void 0===t&&(t=0);var r=new Promise((function(e,r){setTimeout((function(){return r(new Error(n||"Timeout Error:"+t+"ms"))}),t)}));return Promise.race([e,r])}(v,e.timeout,y)]);case 1:return v=_.sent(),[3,4];case 2:return[4,v];case 3:v=_.sent(),_.label=4;case 4:try{if(v instanceof Error||"string"==typeof v)throw new Error;(v.clone?v.clone().json():Promise.resolve(v)).then((function(n){var r=(n||{}).extensions,a=(void 0===r?{}:r).SoaResponseStatus;"object"==l(a)&&t.needPerfMetric&&h&&h({data:a,logMetric:e.logMetric})})).catch((function(e){console.log(e)}))}catch(_){console.log(_)}return[2,v]}}))},new(i=(i=n=t=void 0)||Promise)((function(e,r){function a(e){try{l(c.next(e))}catch(e){r(e)}}function o(e){try{l(c.throw(e))}catch(e){r(e)}}function l(t){t.done?e(t.value):new i((function(e){e(t.value)})).then(a,o)}l((c=c.apply(t,n||[])).next())}));var t,n,i,c}(n=i)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")&&n.default;var u=i.createHttpPerfMetric,s=(i.createMetric,"undefined"==typeof r),d={path:"",env:"prod",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},needVirtualPath:!0,needStringifyBody:!0,params:{query:""},needPerfMetric:!0},f=/^\s*(?:[Q|q]uery|[M|m]utation)\s+([\w]+)/;function p(e){var t=o(o(o({},d),e),{params:o(o({},d.params),e.params),headers:o(o({},d.headers),e.headers)});return m(t,v(t))}function m(e,t){if(e.needVirtualPath){var n,r=e.params.queryName,a=e.params.query.match(f),o="";if(a&&0<a.length&&(o=a[1]),n=r||o){var i=t.split("?"),c=i[0],l=i.slice(1);t=c+"/"+n+(0<l.length?"?"+l.join("?"):"")}}return t}function v(e){var t="";if(e.path.startsWith("http")||e.path.startsWith("https")||e.path.startsWith("//"))t=e.path;else if(e.domains){var n=s?"server":"client";t=e.domains[n][e.env]+e.path}return t.startsWith("//")&&s&&(t="http:"+t),"fat"===e.env&&e.subEnv&&/fat(\d+)/.test(e.subEnv)&&(t=t.replace("fws.qa",e.subEnv+".qa")),t}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r="",a=0;a<e.length;a++)r+=e[a],r+=t[a]||"";return r}var g={load:c,gql:h};e.load=c,e.getUrl=p,e.appendVirtualPathToUrl=m,e.getUrlWithoutVirtualPath=v,e.gql=h,e.default=g,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n(27))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(26),a=n(29);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(13),a=function e(){for(var t=[],n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.forEach((function(n){if(n)if("string"!=typeof n){if("[object Object]"===Object.prototype.toString.call(n)){var a=Object.keys(n).filter((function(e){return!!n[e]}));t=t.concat(a)}Array.isArray(n)&&t.push(e.apply(void 0,Object(r.a)(n)))}else t.push(n)})),t.join(" ")}}).call(this,n(44))},function(e,t,n){var r=n(81),a=n(82),o=n(31),i=n(83);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.crossCouponInfoFields=t.claimCouponInfoFields=t.couponInfoFields=void 0,t.couponInfoFields="\n    fragment couponInfoFields on CouponInfoType{\n        promotionId\n        couponName\n        couponCode\n        couponType\n        promotionMethod\n        status\n        shortRemark\n        productLineIcon\n        detailRemarkShown\n        startDateShown\n        endDateShown\n        useDateShown\n        deductionInfoShown {\n            type\n            fullDeduction\n            desc\n            amount\n            discountUnit\n            deductionList\n            deductionAmount\n            deductionAmountTag\n        }\n        deductionAmount\n        matchedQuantity\n        deductionStrategyType\n        deductionList{\n            id\n            deductionType\n            startAmount\n            deductionAmount\n            deductionAmountLimit\n            hit\n        }\n        unavailableReasonShown\n        isTopOne\n        extendInfo{\n            userFilter\n            scheduleFrom\n            scheduleTo\n        }\n        unavailableReasonList{\n            code\n            message\n        }\n        promotionLabel\n        promotionStatus\n        disableButton\n        buttonText\n}\n",t.claimCouponInfoFields="\n    fragment claimCouponInfoFields on ClaimCouponInfoType{\n        promotionId\n        couponName\n        couponCode\n        couponType\n        promotionMethod\n        promotionSecretId\n        leftCount\n        promotionStatus\n        status\n        shortRemark\n        jumpUrl\n        productLineIcon\n        detailRemarkShown\n        startDateShown\n        endDateShown\n        useDateShown\n        deductionInfoShown {\n            type\n            fullDeduction\n            desc\n            amount\n            discountUnit\n            deductionList\n            deductionAmount\n        }\n        deductionAmount\n        deductionStrategyType\n        deductionList{\n            id\n            deductionType\n            startAmount\n            deductionAmount\n            deductionAmountLimit\n            hit\n        }\n        unavailableReasonShown\n        unavailableReasonList{\n            code\n            message\n        }\n        extendInfo{\n            userFilter\n        }\n        promotionLabel\n        activityStatus\n        nextAvailableTime\n        activityStatus\n        disableButton\n        buttonText\n}\n",t.crossCouponInfoFields="\n    fragment crossCouponInfoFields on CrossCouponInfoType{\n        promotionId\n        displayName\n        couponCode\n        couponStartDate\n        couponDisableDate\n        shortRemark\n        detailRemark\n        businessLineName\n        businessLineType\n        customerNewOrOldName\n        deductionAmountLabel\n        promotionLabel\n        useDateShown\n        toUseLink\n        iconImageUrl\n        productLineIcon\n        cardTitle\n        cardSubTitle\n    }\n    \n"},function(e,t,n){"use strict";var r=n(32).default,a=n(34).default,o=n(15).default,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return c(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(0)),d=n(1),f=u(n(6));n(153);var p={full:1,taller:.94,tall:.8,middle:.6,short:.4};t.default=function(e){var t=s.useRef(null),n=s.useRef(null),i=s.useState(0),c=o(i,2),l=c[0],u=c[1],m=s.useState(0),v=o(m,2),h=v[0],g=v[1],y=f.default.getSystemInfoSync().windowHeight,_=s.useState(!0),b=o(_,2),E=b[0],w=b[1],S=e.id,I=void 0===S?"JS-popup":S,T=e.disableScroll,C=void 0!==T&&T,P=e.needMoreHeight,k=void 0!==P&&P,N=e.renderTitle,O=e.topChildren,x=e.height,D=void 0===x?"taller":x,j=e.handleClose,M=e.handleScroll,A=e.scrollTop,R=e.scrollIntoView,V=e.setTabIndex,L=void 0===V?function(){}:V,B=e.listName,F=void 0===B?[]:B,U=e.showTitleHeight,H=e.noUseEffect,q=void 0!==H&&H,Y=e.testId,G=void 0===Y?"":Y,Z=e.closeTestId,$=void 0===Z?"":Z,z="full"===D,K=s.useState(!!U),W=o(K,2),X=W[0],J=W[1];s.useEffect((function(){if(!q){var e=f.default.createSelectorQuery();0!==(null==F?void 0:F.length)&&e.select("#JS-popup").boundingClientRect().exec((function(e){Q()})),O&&e.select("#JS-topChildren").boundingClientRect().exec((function(e){var t,n=(null===(t=e[1])||void 0===t?void 0:t.height)||0;n>0&&g(n)}))}}),[]);var Q=function(){var e=a(r().mark((function e(){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=0,F.map(function(){var e=a(r().mark((function e(t,a){var i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee("#".concat(t));case 2:i=e.sent,c=i.top,0===a&&(o=c),n.push(c-o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.current=n;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e){return new Promise((function(t){f.default.createSelectorQuery().select(e).boundingClientRect().exec((function(e){var n=e[0],r=n.top,a=n.height;t({top:r,height:a})}))}))},te=function(e){for(var n=t.current,r=0;r<=n.length-2;r++){var a=r+1;if(e>=n[r]&&e<n[a]&&l!==r){u(r),null==L||L(r);break}if(r===n.length-2&&e>=n[a]&&l!==a){u(a),null==L||L(a);break}}},ne=function(e){e.stopPropagation(),w(!1),null==j||j()},re=z?{borderRadius:0}:{},ae=z?{maxHeight:"100%",minHeight:"100%"}:{};return E?s.default.createElement(d.View,{catchMove:!0,style:{height:y},className:"'koala-booking-popup-wrapper '".concat(e.className?e.className:""),"data-testid":G},s.default.createElement(d.View,{className:"koala-booking-popup-mask","data-testid":$,onClick:function(e){return ne(e)}}),s.default.createElement(d.View,{className:"booking-popup-box koala-fadeInUp",style:Object.assign(Object.assign({},ae),re)},U?X?s.default.createElement(d.View,{className:"booking-popup-hide-head"},s.default.createElement(d.View,{className:"booking-popup-icon koala-icon koala-close",onClick:function(e){ne(e)}})):s.default.createElement(d.View,{className:"booking-popup-hide-head white"},s.default.createElement(d.View,{className:"booking-popup-icon koala-icon koala-close2",onClick:function(e){ne(e)}}),s.default.createElement(d.View,{className:"booking-popup-title"},e.title)):s.default.createElement(d.View,{className:"booking-popup-head",style:Object.assign({},re)},s.default.createElement(d.View,{className:"booking-popup-icon koala-icon koala-close2",onClick:function(e){ne(e)}}),N?"function"==typeof N?N():N:s.default.createElement(d.View,{className:"booking-popup-title"},e.title)),s.default.createElement(d.View,{id:"JS-topChildren"},O),s.default.createElement(d.ScrollView,{id:I,className:"booking-popup-content",style:{height:y*p[null==e?void 0:e.height]-(k?0:45)-h},scrollY:!C,onScroll:function(e){return function(e){var r=e&&e.detail&&e.detail.scrollTop||0;t.current&&Array.isArray(t.current)&&(n.current||(n.current=setTimeout((function(){n.current=null,te(r),U&&J(r<U)}),16))),null==M||M(e)}(e)},scrollTop:A,scrollIntoView:R,scrollWithAnimation:!0,refresherThreshold:16},e.children))):null}},,function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),c=n(21),l=n(11),u=n(58),s=n(59),d=(0,l.createReactModel)((function(){var e=(0,i.setupContext)(s.CommentContext),t=(0,c.setupEnvContext)(),n=(0,u.setupTaroPostJson)(),l={props:{env:t.env,channel:e.channel,queryId:e.queryId,scene:e.scene,cardNo:e.cardNo,cardType:e.cardType,titleTip:e.titleTip},commentAggregation:null,comments:[]},d={updateProps:function(e,t){return r(r({},e),{props:{env:t.env||e.props.env,channel:t.channel||e.props.channel,queryId:t.queryId||e.props.queryId,scene:t.scene||e.props.scene,cardNo:t.cardNo||e.props.cardNo,cardType:t.cardType||e.props.cardType,titleTip:t.titleTip||e.props.titleTip}})},updateCommentInfo:function(e,t){var n=t.commentAggregation,a=t.comments,o=t.albumInfo;return r(r({},e),{commentAggregation:n,comments:a,albumInfo:o})}},f=(0,i.setupStore)({initialState:l,reducers:d}),p=f.store,m=f.actions,v=function(e){var t=0;switch(e){case"vacations-diy":t=1;break;case"vacations-grp":t=2;break;case"vacations-visa":t=3;break;case"vacations-cru":t=8;break;case"ttd-act":t=6;break;case"ttd-gst":t=5;break;case"minilvgo":case"lvgoooo":t=9}return t},h={fat:"//webresource.fws.qa.nt.ctripcorp.com/ares2/vacation/vacation-order-comment/*/default/css/commentEntry.css",fws:"//webresource.fws.qa.nt.ctripcorp.com/ares2/vacation/vacation-order-comment/*/default/css/commentEntry.css",uat:"//webresource.uat.qa.nt.ctripcorp.com/ares2/vacation/vacation-order-comment/*/default/css/commentEntry.css",prod:"//webresource.c-ctrip.com/ares2/vacation/vacation-order-comment/*/default/css/commentEntry.css"};return(0,i.setupPreloadCallback)((function(){return a(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,a(void 0,void 0,void 0,(function(){var e,t,r,a,i,c,l,u,s,d,f,h,g,y,_,b,E,w,S,I;return o(this,(function(o){switch(o.label){case 0:e=p.getState(),t=e.props,r=t.channel,a=t.queryId,i=t.scene,c=t.cardNo,l=t.cardType,u={ucpBizId:v(r)},a&&(u.queryId=a),c&&l&&(u.extRequest={cardNo:c,cardType:l}),i&&(u.scene=i),s=function(e){return"/restapi/soa2".concat(e)}("/20047/getCommentSummary"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n(s,u)];case 2:return d=o.sent(),"Success"===(null===(b=null==d?void 0:d.ResponseStatus)||void 0===b?void 0:b.Ack)&&0===(null===(E=null==d?void 0:d.ret)||void 0===E?void 0:E.code)?(f=(null==d?void 0:d.commentAggregation)||null,h=(null==d?void 0:d.comments)||[],g=(null==d?void 0:d.albumInfo)||null,m.updateCommentInfo({commentAggregation:f,comments:h,albumInfo:g})):(y=(null===(w=null==d?void 0:d.ret)||void 0===w?void 0:w.msg)||(null===(I=null===(S=null==d?void 0:d.ResponseStatus)||void 0===S?void 0:S.errors)||void 0===I?void 0:I.message)||"getCommentSummary error",console.error(y)),[3,4];case 3:return _=o.sent(),console.error(_),[3,4];case 4:return[2]}}))}))];case 1:return e.sent(),[2]}}))}))})),{store:p,actions:r(r({},m),{fetchStyle:function(){return a(void 0,void 0,void 0,(function(){var e,n,r;return o(this,(function(a){switch(a.label){case 0:if(!h.hasOwnProperty(t.env))throw new Error("".concat(t.env," is not supports, it should be one of ").concat(Object.keys(h)));return e=t.env,n=h[e],[4,fetch(n)];case 1:if(200!==(r=a.sent()).status)throw Error("css\u52a0\u8f7d\u5931\u8d25: ".concat(n));return[4,r.text()];case 2:return[2,a.sent()]}}))}))}})}}));t.default=d},function(e,t,n){var r,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.MiniTypeEnum=t.SourceEnum=t.SaleChannel3Enum=t.SaleChannel2Enum=t.CTEnum=t.EnvEnum=t.ClientEnum=t.ComponentTypeEnum=void 0,(r=t.ComponentTypeEnum||(t.ComponentTypeEnum={}))[r.H5=1]="H5",r[r.PC=2]="PC",r[r.RN=3]="RN",r[r.MiniProgram=4]="MiniProgram",r[r.Taro=5]="Taro",function(e){e[e.PC=0]="PC",e[e.NATIVE=1]="NATIVE",e[e.H5=2]="H5",e[e.MiniProgram=3]="MiniProgram"}(t.ClientEnum||(t.ClientEnum={})),function(e){e.Fat="fat",e.Uat="uat",e.Prod="prod"}(t.EnvEnum||(t.EnvEnum={})),function(e){e[e.CTRIP=0]="CTRIP",e[e.TRIP=1]="TRIP"}(t.CTEnum||(t.CTEnum={})),function(e){e[e.Ctrip_Online=2]="Ctrip_Online",e[e.Ctrip_App=5]="Ctrip_App",e[e.Ctrip_H5=7]="Ctrip_H5",e[e.Ctrip_Mina=21]="Ctrip_Mina",e[e.Trip_Online=24]="Trip_Online",e[e.Trip_App=25]="Trip_App",e[e.Trip_H5=26]="Trip_H5",e[e.Offline=3]="Offline",e[e.CompanyShop=110]="CompanyShop",e[e.BestonShop=111]="BestonShop",e[e.QunarShop=112]="QunarShop",e[e.LvJing=113]="LvJing"}(t.SaleChannel2Enum||(t.SaleChannel2Enum={})),function(e){e[e.Ctrip_Online=114]="Ctrip_Online",e[e.Ctrip_App=115]="Ctrip_App",e[e.Ctrip_H5=116]="Ctrip_H5",e[e.Ctrip_Mina=117]="Ctrip_Mina",e[e.Trip_Online=118]="Trip_Online",e[e.Trip_App=119]="Trip_App",e[e.Trip_H5=120]="Trip_H5",e[e.Offline=121]="Offline",e[e.CompanyShop=502]="CompanyShop",e[e.BestonShop=503]="BestonShop",e[e.QunarShop=504]="QunarShop",e[e.LvJing=505]="LvJing"}(t.SaleChannel3Enum||(t.SaleChannel3Enum={})),function(e){e.TICKET="TICKET",e.THINGS_TODO="THINGS_TODO",e.TOUR="TOUR",e.CRUISE="CRUISE",e.CUS="CUS"}(t.SourceEnum||(t.SourceEnum={})),function(e){e.MINI_WECHAT="MINI_WECHAT",e.ALI_PAY="ALI_PAY",e.BYTE_DANCE="BYTE_DANCE",e.BAIDU="BAIDU",e.QQ="QQ"}(t.MiniTypeEnum||(t.MiniTypeEnum={})),o(n(42),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupPlatformInfo=t.setupEnvContext=t.EnvContext=t.getPlatform=t.platforms=void 0;var o=n(3);t.platforms=["NodeJS","Browser","CtripApp","TripApp","ReactNative","MicroMessenger","BestonApp"],t.getPlatform=function(e){if(e.platform)return e.platform;if("undefined"!=typeof a&&"ReactNative"===a.product)return"ReactNative";if("undefined"==typeof r||void 0===r.document)return"NodeJS";var t=function(e){return e.req?e.req.headers["user-agent"]?e.req.headers["user-agent"]:"":"undefined"!=typeof r?r.navigator.userAgent:""}(e);return/MicroMessenger/i.test(t)?"MicroMessenger":/Trip.com_CtripWireless/i.test(t)?"TripApp":/ctripwireless/i.test(t)?"CtripApp":/ctripBestonWireless/i.test(t)?"BestonApp":"Browser"},t.EnvContext=o.createModelContext({env:"prod"}),t.setupEnvContext=function(){return o.setupContext(t.EnvContext)},t.setupPlatformInfo=function(){for(var e=o.setupContext(t.EnvContext),n=t.getPlatform(e),r={},a=0;a<t.platforms.length;a++){var i=t.platforms[a];r[i]=i===n}return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(30);function a(e,t,n){return(t=Object(r.a)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorType=t.ActionType=t.RoleType=t.PlatformType=void 0,function(e){e.web="web",e.crn="crn",e.taro="taro",e.test="test"}(t.PlatformType||(t.PlatformType={})),function(e){e.usr="usr",e.sys="sys"}(t.RoleType||(t.RoleType={})),function(e){e.click="click",e.change="change",e.show="show"}(t.ActionType||(t.ActionType={})),function(e){e.Network_Fail="Network_Fail",e.Request_Abort="Request_Abort",e.Ack_Fail="Ack_Fail"}(t.ErrorType||(t.ErrorType={}))},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.SHARKKEY=t.CONST=void 0,o(n(64))),l=(t.CONST=c,i(n(132)));t.SHARKKEY=l.default},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":c(e)})(e)}var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"===("undefined"==typeof r?"undefined":n(r))&&(a=r)}e.exports=a},function(e,t,n){var r,a,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},d=(Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemInfo=t.jumpToUrl=t.__global=t.cwx=t.onLogin=t.getEnvType=t.chunk=t.getAuth=t.mapEnvToMiniType=t.miniRequest=t.BaseStorage=t.ClientUtil=t.COMPONENT_VERSION=void 0,c(n(6))),f=n(20),p=n(46);t.cwx=r,t.__global=a;try{var m=n(10);t.cwx=r=m&&m.cwx,t.__global=a=m&&m.__global}catch(e){console.log("%c "+e,"color:red;")}var v=null;try{v=n(133).compVerison}catch(e){console.error("\u8bfb\u53d6\u7248\u672c\u53f7\u5f02\u5e38!")}t.COMPONENT_VERSION=v,t.getAuth=function(){var e="";try{e=d.default.getStorageSync("auth")}catch(e){}return e},t.mapEnvToMiniType=function(){switch(d.default.getEnv()){case d.ENV_TYPE.WEAPP:return p.MiniTypeEnum.MINI_WECHAT;case d.ENV_TYPE.SWAN:return p.MiniTypeEnum.BAIDU;case d.ENV_TYPE.TT:return p.MiniTypeEnum.BYTE_DANCE;case d.ENV_TYPE.ALIPAY:return p.MiniTypeEnum.ALI_PAY;case d.ENV_TYPE.QQ:return p.MiniTypeEnum.QQ;default:return p.MiniTypeEnum.MINI_WECHAT}},t.chunk=function(e,t){if(e.length<=0||t<=0)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},t.getEnvType=function(){var e,t=d.default.getCurrentInstance(),n=f.EnvEnum.Prod;!a||(e=a.env)!==f.EnvEnum.Fat&&e!==f.EnvEnum.Uat||(n=e);try{n=t.page.$taroParams.testenv||n}catch(e){}return n},t.onLogin=function(e,t,n){r&&r.user.login({param:{},callback:function(e){e&&"0"===e.ReturnCode?t&&t():n&&n()}})},t.jumpToUrl=function(e){var t;e&&(function(e){return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)}(e)?(t={url:encodeURIComponent(e),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0,loginErrorUrl:e},r&&r.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(t)})):d.default.navigateTo({url:e}))},t.getSystemInfo=function(){return l(this,void 0,void 0,(function(){return u(this,(function(e){return[2,d.default.getSystemInfo()]}))}))};var h=s(n(134)),g=(t.ClientUtil=h.default,s(n(135))),y=(t.BaseStorage=g.default,n(136));Object.defineProperty(t,"miniRequest",{enumerable:!0,get:function(){return y.miniRequest}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(26);function a(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7);function a(e){var t=function(e,t){if("object"!==Object(r.a)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==Object(r.a)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Object(r.a)(t)?t:String(t)}},function(e,t,n){var r=n(50);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(9).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),c=new k(r||[]);return i(o,"_invoke",{value:I(e,n,c)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m={};function v(){}function h(){}function g(){}var y={};d(y,l,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(N([])));b&&b!==n&&o.call(b,l)&&(y=b);var E=g.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){var n;i(this,"_invoke",{value:function(a,i){function c(){return new t((function(n,c){!function n(a,i,c,l){var u=p(e[a],e,i);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,l)}),(function(e){n("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,l)}))}l(u.arg)}(a,i,n,c)}))}return n=n?n.then(c,c):c()}})}function I(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return O()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=T(i,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=p(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=g,i(E,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:h,configurable:!0}),h.displayName=d(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(S.prototype),d(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new S(f(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(E),d(E,s,"Generator"),d(E,l,(function(){return this})),d(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(31);e.exports=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function c(e){n(i,a,o,c,l,"next",e)}function l(e){n(i,a,o,c,l,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(51);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(51);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleCommentBar=void 0;var l=c(n(0)),u=n(1),s=c(n(107)),d=i(n(109)),f=c(n(114)),p=n(58);n(115),t.default=function(e){var t=e.isPremium||!1,n=e.isFillet||!1,a=e.jump||void 0,o=e.overlayClassName||void 0,i=e.isTPal||!1;return l.default.createElement(s.default,r({},e,{fetch:p.setupTaroPostJson}),l.default.createElement(f.default,r({},e)),l.default.createElement(d.default,{isPremium:t,isFillet:n,jump:a,overlayClassName:o,isTPal:i}))},t.SimpleCommentBar=function(e){var t=e.isPremium||!1,n=e.isFillet||!1,a=e.isTPal||!1,o=e.jump||void 0,i=e.overlayClassName||void 0;return a?l.default.createElement(u.View,{className:"com_entry_base ".concat(i||""),style:{height:38,backgroundColor:"#111111",position:"relative"}},l.default.createElement(u.View,{className:"com_init_bar",style:{height:38}},l.default.createElement(u.View,{className:"com_init_bar_breath_one",style:{height:12,backgroundColor:"#555"}}),l.default.createElement(u.View,{className:"com_init_bar_breath_two",style:{height:12,backgroundColor:"#555"}})),l.default.createElement(s.default,r({},e,{fetch:p.setupTaroPostJson}),l.default.createElement(f.default,r({},e)),l.default.createElement(d.TopCard,{isPremium:t,isFillet:n,jump:o,overlayClassName:i,isTPal:a}))):l.default.createElement(u.View,{className:"com_entry_base com_entry_bg ".concat(i||""),style:n?{borderRadius:8,height:48,position:"relative"}:{height:48,position:"relative"}},l.default.createElement(u.View,{className:"com_init_bar"},l.default.createElement(u.View,{className:"com_init_bar_breath_one"}),l.default.createElement(u.View,{className:"com_init_bar_breath_two"})),l.default.createElement(s.default,r({},e,{fetch:p.setupTaroPostJson}),l.default.createElement(f.default,r({},e)),l.default.createElement(d.TopCard,{isPremium:t,isFillet:n,jump:o,overlayClassName:i})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(n(19)),i={"vacations-visa":!1,"ttd-act":!0,"ttd-tkt":!0,"ttd-gst":!0,"vacations-grp":!0,"vacations-diy":!0,"vacations-cus":!0,"vacations-cru":!0,"wechat-mp":!1},c={"vacations-visa":!1,"ttd-act":!0,"ttd-tkt":!1,"ttd-gst":!0,"vacations-grp":!0,"vacations-diy":!0,"vacations-cus":!0,"vacations-cru":!1,"wechat-mp":!1},l={"vacations-visa":!1,"ttd-act":!0,"ttd-tkt":!1,"ttd-gst":!0,"vacations-grp":!0,"vacations-diy":!1,"vacations-cus":!1,"vacations-cru":!1,"wechat-mp":!1};t.default=function(){var e=o.default.useState((function(e){return e.props.channel})),t=o.default.useState((function(e){return e.commentAggregation})),n=o.default.useState((function(e){return null==e?void 0:e.albumInfo})),r=o.default.useState((function(e){var t;return(null===(t=null==e?void 0:e.comments)||void 0===t?void 0:t.length)?e.comments[0]:null})),u=(null==r?void 0:r.attachments)||[],s=(null==t?void 0:t.aiTags)||[];return{isShowAiTags:(0,a.useMemo)((function(){return!!(c[e]&&s.length>0)}),[e,s]),isShowTourType:(0,a.useMemo)((function(){return!!i[e]}),[e]),isShowPhoto:(0,a.useMemo)((function(){return u.length>=4}),[u]),isShowAlbum:(0,a.useMemo)((function(){return!!(l[e]&&n&&(null==n?void 0:n.albumAttachments.length)>3)}),[e])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.http=t.parseUrl=void 0,t.parseUrl=function(e,t){var n=[];return Object.keys(t).forEach((function(e){return t[e]&&n.push("".concat(e,"=").concat(t[e]))})),-1===e.search(/\?/)?e+="?".concat(n.join("&")):e+="&".concat(n.join("&")),e},t.http={fat:"https://m.ctrip.fat67.qa.nt.ctripcorp.com",uat:"https://m.ctrip.uat.qa.nt.ctripcorp.com",prod:"https://m.ctrip.com"}},function(e,t,n){var r,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORCODE=t.CouponRequestSceneEnum=t.ReceivePromotionTypeEnum=void 0,o(n(123),t),(r=t.ReceivePromotionTypeEnum||(t.ReceivePromotionTypeEnum={}))[r.Company=1]="Company",r[r.Vendor=2]="Vendor",function(e){e[e.OrderUse=1]="OrderUse",e[e.DetailClaim=2]="DetailClaim",e[e.PopClaim=3]="PopClaim",e[e.ShopClaim=4]="ShopClaim",e[e.DetailClaim_Useable=5]="DetailClaim_Useable",e[e.Tangram=6]="Tangram",e[e.CrossCoupon=7]="CrossCoupon"}(t.CouponRequestSceneEnum||(t.CouponRequestSceneEnum={})),function(e){e.TIMEOUT="TIMEOUT",e.JSERROR="JSERROR"}(t.ERRORCODE||(t.ERRORCODE={}))},function(e,t,n){(function(e,r){var a,o,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0,n(12)),s=n(20),d=n(45),f=n(25);try{var p=n(28).ClientUtil,m=p&&"function"==typeof p.getInstance?p.getInstance():{}}catch(e){console.warn("can't resolve '../../utils/index'")}var v=n(64),h=b()&&(null==(o=r.env)?void 0:o.DEBUG_BFF),g=((a={})[s.CTEnum.CTRIP]={debug:"localhost:8004",dev:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",fat:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",uat:"gateway.m.uat.qa.nt.ctripcorp.com/restapi",prod:"m.ctrip.com/restapi"},a[s.CTEnum.TRIP]={debug:"m.ctrip.fat468.qa.nt.ctripcorp.com",dev:"uk.fat1.qa.nt.tripqate.com/restapi",fat:"uk.fat1.qa.nt.tripqate.com/restapi",uat:"uk.fat1.qa.nt.tripqate.com/restapi",prod:"www.trip.com/restapi"},a),y={debug:"m.ctrip.fat468.qa.nt.ctripcorp.com",dev:{fat6:"marketing.service.ttd.fat6.qa.nt.ctripcorp.com",fat1204:"marketing.service.ttd.fat1204.qa.nt.ctripcorp.com"},fat:{fat6:"marketing.service.ttd.fat6.qa.nt.ctripcorp.com",fat1204:"marketing.service.ttd.fat1204.qa.nt.ctripcorp.com"},uat:"marketing.service.ttd.uat.qa.nt.ctripcorp.com",prod:"offline.fx.ctripcorp.com"};function _(t,n,r,a){var o=((a=void 0!==a&&a)?y:g[r])[t=h?"debug":t],i=null==m?void 0:m.inApp;return"prod"!==t&&(n==s.ClientEnum.NATIVE||"function"==typeof i&&i())&&r==s.CTEnum.TRIP&&(o=g[s.CTEnum.CTRIP][t]),i="",t==s.EnvEnum.Fat&&(i="fat1204",o=a?o[i]:o,n==s.ClientEnum.H5||n==s.ClientEnum.PC?i=d.getUrlParams("subEnv")||i:n==s.ClientEnum.NATIVE&&(i=e.currentApp&&e.currentApp.props.urlQuery.subEnv||i)),""+function(e){return e==s.ClientEnum.NATIVE?"https://":e==s.ClientEnum.MiniProgram?h?"http://":"https://":"//"}(n)+o+function(e,t,n){return e==s.EnvEnum.Prod&&t?"/ttd/middleBff":h||t?"/ttd/marketing-bff":"/ttd/marketing-bff"+(n?"-"+n:"")}(t,a,i)+"/graphql"}function b(){return void 0!==r&&!!r}function E(t){try{var n=null;return t==s.ClientEnum.H5||t==s.ClientEnum.PC?n=d.getUrlParams("mock"):t==s.ClientEnum.NATIVE&&(n=e.currentApp&&e.currentApp.props.urlQuery.mock),!!n}catch(t){return console.error("isMock error.",t),!1}}t.post=function(e){var t,n;return c(this,void 0,void 0,(function(){var a,o,c,d,p,m,h,g,y,w,S,I,T,C,P,k;return l(this,(function(l){switch(l.label){case 0:a=e.query,o=e.env,c=e.client,d=e.queryName,p=e.variables,m=e.fetch,h=e.logTrace,C=e.isOffline,g=e.logMetric,S=void 0===(S=e.ctType)?s.CTEnum.CTRIP:S,y=void 0!==(y=e.apiPost)&&y,w=void 0===(w=e.componentInfo)?{}:w,S=_(o,e.client,S,C),l.label=1;case 1:return l.trys.push([1,6,,7]),I={path:S,env:o,params:{query:a,queryName:d,variables:p,head:{cid:e.cid},mock:E(c)},timeout:f.CONST.TIMEOUT_BFF_REQUEST},c==s.ClientEnum.NATIVE&&(I.fetch=m,I.needStringifyBody=!1,I.logMetric=g),console.log("%c"+d+"%c-BFFRequest","color:#01A9DB","color:#FFFF00",I),T=void 0,c!=s.ClientEnum.MiniProgram?[3,3]:(C=function(e){var t;return{url:e.path+"/"+e.params.queryName,data:i(i({},e.params),{head:i(i({},null==(t=e.params)?void 0:t.head),{miniAuth:"82E962A110D92E1B58E8FB03B15FC60D4720855F333886095B968C3977D945F4"})}),header:{"content-type":"application/json"},dataType:"json",method:"POST",success:function(t){console.log("%c "+e.params.queryName,"color:#0f0;",t.data)},fail:function(t){console.log("%c "+e.params.queryName,"color:red;",t.data)}}}(I),[4,m(C)]);case 2:return P=l.sent(),T=P.data||{},[3,5];case 3:return[4,u.load(I).then((function(e){return"function"==typeof e.json?e.json():e}))];case 4:T=l.sent(),l.label=5;case 5:return console.log("%c"+d+"%c-BFFRespose","color:#01A9DB","color:#00FF00",T),b()&&"development"==(null==(t=r.env)?void 0:"production")&&function(e){if(!e)throw new Error("graphql-bff ,Query Result Empty.");var t=[];Object.keys(e).map((function(n){var r=e[n];"Error"==r.__typename&&t.push(n+"\uff1a\ncode\uff1a"+r.code+",message\uff1a"+r.message)})),0<t.length&&console.error(t.join("\n"))}(T.data),function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a={}),e)try{var o=((t.extensions||{}).SoaResponseStatus||{}).ResponseStatus;e({key:v.DEVTRACE_KEY.BFF_EXTENSION,value:{queryName:n,extensions:(o||{}).Extension,apiPost:r,componentInfo:a}})}catch(t){e({key:v.DEVTRACE_KEY.POST_EXCEPTION,value:{error:t,queryName:n,funName:"logTraceCatMsgId",apiPost:r,errStack:null==t?void 0:t.stack,componentInfo:a}})}}(h,T,d,y,w),P=(null==(n=null==(n=null==(t=null==T?void 0:T.extensions)?void 0:t.SoaResponseStatus)?void 0:n.ResponseStatus)?void 0:n.Extension)||[],k=(null==(n=null==(n=null===P?void 0:P.find)?void 0:n.call(P,(function(e){return"RootMessageId"===e.Id})))?void 0:n.Value)||"",T.data&&(T.data.rootMessageId=k),[2,T.data];case 6:return k=l.sent(),console.log(k.stack),h&&h({key:v.DEVTRACE_KEY.POST_EXCEPTION,value:{error:k,queryName:d,funName:"post",apiPost:y,errStack:null==k?void 0:k.stack,componentInfo:w}}),[3,7];case 7:return[2]}}))}))}}).call(this,n(27),n(44))},function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l,u=[],s=!1,d=-1;function f(){s&&l&&(s=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!s){var e=c(f);s=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||s||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.convertComptType=t.getNumberSize=t.getUrlParams=t.getTimeZone=t.Inertia=t.ClientUtil=t.SharkUtil=t.BusinessUtil=t.HooksUtil=t.CommonUtil=void 0,n(8));function u(e,t){var n=Math.abs(e);return(e<0?"-":"")+"0".repeat((t-=(n+"").length)<0?0:t)+n}t.getTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=Math.abs(e/60),n=Math.abs(e%60);return{desc:(0<e?"-":"+")+u(Math.floor(t),2)+":"+u(n,2),offset:e}},t.getUrlParams=function(e){return e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),"undefined"!=typeof r&&null!=(e=r.location.search.substr(1).match(e))?unescape(e[2]):null},t.getNumberSize=function(e){try{var t;return"number"==typeof e?e:(t=Number(e.slice(0,-2)),isNaN(t)?0:t)}catch(e){return console.error("getNumberSize error",e),0}};var s=n(20);t.convertComptType=function(e){var t,n;switch(e){case s.ComponentTypeEnum.H5:t=s.ClientEnum.H5,n=l.PlatformType.web;break;case s.ComponentTypeEnum.PC:t=s.ClientEnum.PC,n=l.PlatformType.web;break;case s.ComponentTypeEnum.RN:t=s.ClientEnum.NATIVE,n=l.PlatformType.crn;break;case s.ComponentTypeEnum.MiniProgram:case s.ComponentTypeEnum.Taro:t=s.ClientEnum.MiniProgram,n=l.PlatformType.taro}return{client:t,platform:n}};var d=i(n(63)),f=(t.CommonUtil=d,i(n(125))),p=(t.HooksUtil=f,i(n(128))),m=(t.BusinessUtil=p,i(n(129))),v=(t.SharkUtil=m,c(n(130))),h=(t.ClientUtil=v.default,c(n(131)));t.Inertia=h.default},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(20),t)},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16);t.default=o.gql(r=r||a(["\n    ","\n    query($baseInfo:BaseInfoType,$relationDetail:RelationDetailType,$receivePromotionType:Int,$shownewuserpromo:Boolean,\n        $filterType:Int,$utcOffset:Int,$getServerTime:Boolean=false){\n        receivePromotionData: getReceivePromotionByRelationId(baseInfo:$baseInfo,relationDetail:$relationDetail,\n        receivePromotionType:$receivePromotionType,shownewuserpromo:$shownewuserpromo,filterType:$filterType){\n            __typename\n           ...on GetReceivePromotionByRelationIdData{\n               list{\n                    ...claimCouponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        serverTime:getServerTime(utcOffset:$utcOffset) @include(if: $getServerTime) {\n            __typename\n            ...on GetServerTimeData{\n                serverTime\n            }\n        }\n     }  \n"],["\n    ","\n    query($baseInfo:BaseInfoType,$relationDetail:RelationDetailType,$receivePromotionType:Int,$shownewuserpromo:Boolean,\n        $filterType:Int,$utcOffset:Int,$getServerTime:Boolean=false){\n        receivePromotionData: getReceivePromotionByRelationId(baseInfo:$baseInfo,relationDetail:$relationDetail,\n        receivePromotionType:$receivePromotionType,shownewuserpromo:$shownewuserpromo,filterType:$filterType){\n            __typename\n           ...on GetReceivePromotionByRelationIdData{\n               list{\n                    ...claimCouponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        serverTime:getServerTime(utcOffset:$utcOffset) @include(if: $getServerTime) {\n            __typename\n            ...on GetServerTimeData{\n                serverTime\n            }\n        }\n     }  \n"]),i.claimCouponInfoFields)},,function(e,t,n){"use strict";var o=n(15).default,i=n(32).default,c=n(33).default,l=n(34).default,u=n(84).default,s=n(35).default,d=n(9).default;Object.defineProperty(t,"__esModule",{value:!0});var f=n(171),p=n(86),m=n(87),v=n(96);function h(e){return e&&"object"===d(e)&&"default"in e?e:{default:e}}var g=h(m),y=h(v),_=function(e){if("object"!==d(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},b=function(e,t){if(e===t)return!0;if("object"!==d(e)||null===e||"object"!==d(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!t.hasOwnProperty(n[a])||e[n[a]]!==t[n[a]])return!1;return!0},E=Symbol("@pure-model/context"),w=function(e,t){var n=e[E];return n&&n.hasOwnProperty(t)?n[t]:null},S=0,I=function(e){var t="@pure-model/context/".concat(S++),n=function(e){return s({},t,{value:e})};return{id:t,initialValue:e,impl:n,create:function(e){return s({},E,n(e))}}},T=function(e){var t=e,n={},r=function(r){n[r]=function(){var n=t[r];return"function"!=typeof n&&(n=e[r]),n.apply(void 0,arguments)}};for(var a in e)r(a);return{run:function(e,n){var r=t;try{return t=null!=n?n:t,e()}finally{t=r}},hooks:n}}({setupStore:function(){throw new Error("setupStore can't not be called after initializing")},setupContext:function(){throw new Error("setupContext can't not be called after initializing")},setupStartCallback:function(){throw new Error("setupStartCallback can't not be called after initializing")},setupFinishCallback:function(){throw new Error("setupFinishCallback can't not be called after initializing")},setupPreloadCallback:function(){throw new Error("setupPreloadCallback can't not be called after initializing")},setupModel:function(){throw new Error("setupModel can't not be called after initializing")}}),C=T.run,P=T.hooks,k=P.setupStore,N=P.setupContext,O=P.setupStartCallback,x=P.setupFinishCallback,D=P.setupPreloadCallback,j=P.setupModel,M=function(e){var t=e.reducers,n=e.initialState,r=e.preloadedState,a=A(e.devtools,e.name,e.logger),o=f.createStore((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=arguments.length>1?arguments[1]:void 0,a=r.type;if(!t.hasOwnProperty(a))return e;var o=t[a],i=o(e,r.payload);return i}),r,a);return{store:o,actions:R(t,o.dispatch)}},A=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e&&"object"===("undefined"==typeof r?"undefined":d(r))&&r.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?r.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:t}):f.compose,o=n?a(f.applyMiddleware(p.createLogger())):a();return o},R=function(e,t){var n={},r=function(r){e[r],n[r]=function(e){t({type:r,payload:e})}};for(var a in e)r(a);return n},V=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r())}return t},L=function(){var e=!1,t=!1,n=!1,r=[],a=[],o=[],i=null;return{preload:function(){if(i)return i;if(e||!o.length)return e=!0,Promise.resolve();var t=o;return o=[],i=Promise.all(V(t)).then((function(){})),e=!0,i},addPreloadCallback:function(t){if(e)throw new Error("Can't add preload callback after preloading");o.includes(t)||o.push(t)},isPreloaded:function(){return e},start:function(){if(!e)throw new Error("Expected calling .preload() before .start()");if(!t){t=!0;var n=r;r=[],V(n)}},addStartCallback:function(t){if(e)throw new Error("Can't add start callback after preloading");r.includes(t)||r.push(t)},isStarted:function(){return t},finish:function(){if(!t)throw new Error("Expected calling .start() before .finish()");if(!n){n=!0;var e=a;a=[],V(e)}},addFinishCallback:function(t){if(e)throw new Error("Can't add finish callback after preloading");a.includes(t)||a.push(t)},isFinished:function(){return n},clearPreloadCallbackList:function(){e=!0,o=[]}}},B=function(){var e=new WeakMap,t=function(e){return"initializer"in e?e.initializer:e},n=function(n){return e.get(t(n))},r={get:n,set:function(n,r){e.set(t(n),r)},getModel:function(a){var o=t(a),i=n(o);if(i){if(i.model)return i.model;var c=F(o,{preloadedState:i.preloadedState,context:i.context,container:r});return i.model=c,c}var l=F(o,{container:r});return e.set(o,{model:l}),l}};return r},F=function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(t=a.container)&&void 0!==t?t:B(),s=o.get(e);if(s){if(s.model)return s.model;a=u(u({},a),{},{context:null!==(n=s.context)&&void 0!==n?n:a.context,preloadedState:null!==(r=s.preloadedState)&&void 0!==r?r:a.preloadedState})}var d=L(),f=new Set,p=function(e){var t=o.getModel(e);return f.add(t),t},m=function(e){if(a.context){var t=w(a.context,e.id);if(t)return t.value}return e.initialValue},v=!1,h=function(t){if(v)throw new Error("Expected calling setupStore only once in initializer: ".concat(e.toString()));return v=!0,M(u(u({devtools:!0},t),{},{preloadedState:a.preloadedState}))},g={setupStore:h,setupContext:m,setupPreloadCallback:d.addPreloadCallback,setupStartCallback:d.addStartCallback,setupFinishCallback:d.addFinishCallback,setupModel:p},y=C((function(){var t=e();if(!t)throw new Error("Expected initializer returning { store, actions }, but got ".concat(t));var n=t.store,r=t.actions;if(!n)throw new Error("Expected initializer returning { store, actions }, but got a invalid store: ".concat(n));if(!r)throw new Error("Expected initializer returning { store, actions }, but got a invalid actions: ".concat(r));return{store:n,actions:r}}),g);void 0!==a.preloadedState&&d.clearPreloadCallbackList();var _=function(){var e=l(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=c(f);try{for(n.s();!(r=n.n()).done;)a=r.value,t.push(a)}catch(e){n.e(e)}finally{n.f()}return e.next=5,Promise.all(t.map((function(e){return e.preload()})));case 5:return e.abrupt("return",d.preload());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=u(u({},y),{},{initializer:e,preload:_,start:d.start,finish:d.finish,addPreloadCallback:d.addPreloadCallback,addStartCallback:d.addStartCallback,addFinishCallback:d.addFinishCallback,isPreloaded:d.isPreloaded,isStarted:d.isStarted,isFinished:d.isFinished});return s?s.model=b:o.set(e,{model:b}),b},U=["NodeJS","Browser","ReactNative"],H=function(e){return e.platform?e.platform:"undefined"!=typeof a&&"ReactNative"===a.product?"ReactNative":"undefined"==typeof r||void 0===r.document?"NodeJS":"Browser"},q=I({}),Y=function(){return N(q)},G=function(){var e=N(q);return H(e)},Z=function(){for(var e=G(),t={},n=0;n<U.length;n++){var r=U[n];t[r]=r===e}return t},$=function(){var e,t=Y(),n=Z(),r=null!==(e=t.fetch)&&void 0!==e?e:y.default;return function(e,a){return"string"==typeof e&&(e=function(e){return function(e){return e.startsWith("http")||e.startsWith("//")}(e)||e.startsWith("/")||(e="/"+e),e.startsWith("//")&&(e=n.NodeJS?"http:"+e:"undefined"!=typeof location&&"string"==typeof location.protocol?location.protocol+e:"https:"+e),e}(e)),a=function(e){var n=u({method:"GET",credentials:"include"},e);return t.req&&(n.headers=u(u({},n.headers),{},{cookie:t.req.headers.cookie||""})),n}(a),r(e,a)}};t.EnvContext=q,t.MODEL_CONTEXT=E,t.combineStore=function(e){var t={};for(var n in e)t[n]=e[n].getState();var r=k({devtools:!1,initialState:t,reducers:{update:function(e,t){var n=o(t,2),r=n[0],a=n[1];return u(u({},e),{},s({},r,a))}}}),a=r.store,i=r.actions,c=function(t){e[t].subscribe((function(){i.update([t,e[t].getState()])}))};for(var l in e)c(l);return a},t.createModelContext=I,t.createPureModel=F,t.createPureModelContainer=B,t.getModelContextValue=w,t.getPlatform=H,t.identity=function(e){return e},t.isThenable=function(e){return!(!e||"function"!=typeof e.then)},t.mergeModelContext=function(){for(var e=s({},E,{}),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;a++)Object.assign(e[E],n[a][E]);return e},t.platforms=U,t.select=function(e){if(!_(e))throw new Error("Expected subscribe(options) received { store, listener, selector?, compare? }, instead of ".concat(e));var t=e.model,n=e.selector,r=e.listener,a=e.compare,o=void 0===a?b:a,i=n(t.store.getState());return t.store.subscribe((function(){if(t.isStarted()){var e=t.store.getState(),a=n(e);o(a,i)?i=a:(i=a,r(a))}}))},t.setupContext=N,t.setupEnv=Y,t.setupFetch=$,t.setupFinishCallback=x,t.setupGetJSON=function(){var e=$();return function(){var t=l(i().mark((function t(n,r,a){var o,c,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r&&(o=n.includes("?")?"&":"?",n+=o+g.default.stringify(r)),t.next=3,e(n,u(u({},a),{},{method:"GET"}));case 3:return c=t.sent,t.next=6,c.text();case 6:return l=t.sent,t.abrupt("return",JSON.parse(l));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},t.setupModel=j,t.setupPlatform=G,t.setupPlatformInfo=Z,t.setupPostJSON=function(){var e=$();return function(){var t=l(i().mark((function t(n,r,a){var o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,u(u({},a),{},{method:"POST",body:r?JSON.stringify(r):null,headers:u(u({},a&&a.headers),{},{"Content-Type":"application/json"})}));case 2:return o=t.sent,t.next=5,o.text();case 5:return c=t.sent,t.abrupt("return",JSON.parse(c));case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},t.setupPreloadCallback=D,t.setupStartCallback=O,t.setupStore=k,t.setupUserAgent=function(){return function(e){return e.req?e.req.headers["user-agent"]?e.req.headers["user-agent"]:"":"undefined"!=typeof r?r.navigator.userAgent:""}(Y())},t.shallowEqual=b,t.subscribe=function(e,t){return e.store.subscribe((function(){if(e.isStarted()){var n=e.store.getState();t(n)}}))}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(9).default,a=n(85);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,r){var a=new XMLHttpRequest,o=[],i=[],c={};for(var l in a.open(t.method||"get",e,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),i.push([t,n]),c[t]=c[t]?c[t]+","+n:n})),n(function e(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:e,headers:{keys:function(){return o},entries:function(){return i},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}}())},a.onerror=r,a.withCredentials="include"==t.credentials,t.headers)a.setRequestHeader(l,t.headers[l]);a.send(t.body||null)}))}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(100);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(38),a=n(101),o=n(102);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var i=r(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(103),t)},function(e,t,n){"use strict";t.decode=t.parse=n(105),t.encode=t.stringify=n(106)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupTaroPostJson=void 0;var a=r(n(10));t.setupTaroPostJson=function(){return function(e,t){return new Promise((function(n,r){a.default.request({method:"post",url:e,data:t,success:function(e){n(e.data)},fail:function(e){},complete:function(e){console.log("done error"),n(e.data)}})}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentContext=void 0;var r=n(3);t.CommentContext=(0,r.createModelContext)({channel:"vacations-grp",scene:"PRODUCT_QUERY"})},function(e,t,n){var a,o=n(9).default;!function(){"use strict";var i={}.hasOwnProperty;function c(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var a=c.apply(null,n);a&&e.push(a)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)i.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):"object"===o(n(61))&&n(61)?void 0===(a=function(){return c}.apply(t,[]))||(e.exports=a):r.classNames=c}()},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCrossCouponList=t.fetchClaimCouponList=t.fetchUseCouponList=void 0;var r=n(120);Object.defineProperty(t,"fetchUseCouponList",{enumerable:!0,get:function(){return r.fetchUseCouponList}}),Object.defineProperty(t,"fetchClaimCouponList",{enumerable:!0,get:function(){return r.fetchClaimCouponList}}),Object.defineProperty(t,"fetchCrossCouponList",{enumerable:!0,get:function(){return r.fetchCrossCouponList}})},function(e,t){var n=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.filterObject=t.isObject=t.isEmpty=void 0,t.isEmpty=function(e){if(null==e)return!0;if("boolean"!=typeof e){if("number"==typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}}return!1},t.isObject=function(e){return"[Object Object]"===Object.prototype.toString.call(e)},t.filterObject=function(e,t,r,a){try{t=n(n([],[void 0,null,NaN]),t||[]),r&&(t=t.filter((function(e){return!r.includes(e)})));var o,i={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&!t.includes(e[o])&&("function"==typeof a&&"number"==typeof e[o]?i[o]=a(e[o]):i[o]=e[o]);return i}catch(t){return console.error("filterObject error."),e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.QUERY_NAME=t.KM_BLOCK_KEY=t.BFF_ERROR_TYPE=t.DEVTRACE_KEY=t.MAX_TRACE_PROPAGATION_COUNT=t.TTD_MKT_SECRET_KEY=t.COUPOON_VALIDATE_CODE=t.BFF_RESPONSECODE=t.ComponentInfo=t.UbtSourceKey=t.TIMEOUT_USECOUPON_ONSELECT=t.TIMEOUT_BFF_REQUEST=t.MAX_RETRY_TIME_VALIDATE_BEST=void 0;var r,a,o=n(20);t.MAX_RETRY_TIME_VALIDATE_BEST=1,t.TIMEOUT_BFF_REQUEST=1e4,t.TIMEOUT_USECOUPON_ONSELECT=5e3,t.UbtSourceKey=((r={})[o.SourceEnum.TICKET]="tkt",r[o.SourceEnum.THINGS_TODO]="act",r[o.SourceEnum.TOUR]="grp",r[o.SourceEnum.CRUISE]="cru",r),t.ComponentInfo={ORDER_USE_COUPON:{id:1,name:"order_usecodelist"},RECEIVEDETAIL:{id:2,name:"detail_claimcoupon"},POPCOUPON:{id:3,name:"popup"},SHOP_COUPON:{id:4,name:"storedetailreceive"},CROSS_COUPON:{id:5,name:"crocsscouponlist"}},t.BFF_RESPONSECODE={AUTH_FAILURE:4001},t.COUPOON_VALIDATE_CODE={NOT_AVAILABLE:5033},t.TTD_MKT_SECRET_KEY="EA2071AAE9211A2WANLEAMP422021",t.MAX_TRACE_PROPAGATION_COUNT=10,t.DEVTRACE_KEY={EXPOSURE:"vac_couponlist_exposure",CLICK:"vac_couponlist_click",POPUP_EXPOSURE:"vac_couponpopup_exposure",POP_CLICK:"vac_couponpopup_click",CROSS_BEFOREBOOKING_EXPOSURE:"vac_crocsscouponlist_beforebooking_exposure",CROSS_BEFOREBOOKING_CLICK:"vac_crocsscouponlist_beforebooking_click",CROSS_AFTERBOOKING_EXPOSURE:"vac_crocsscouponlist_afterbooking_exposure",CROSS_AFTERBOOKING_CLICK:"vac_crocsscouponlist_afterbooking_click",CROSS_ONLOAD:"ttd_marketing_crosscoupon_onload",CLAIMCOUPON_INVOKE_SHOW:"ttd_marketing_claimcoupon_invokeshow",CLAIMCOUPON_INVOKE_HIDE:"ttd_marketing_claimcoupon_invokehide",CLAIMCOUPON_CLOSE:"ttd_marketing_claimcoupon_close",USECOUPON_LOAD:"ttd_marketing_usecoupon_load",USECOUPON_CLOSE:"ttd_marketing_usecoupon_close",USECOUPON_INVOKE_SHOW:"ttd_marketing_usecoupon_invokeshow",USECOUPON_INVOKE_HIDE:"ttd_marketing_usecoupon_invokehide",USECOUPON_ONSELECT:"ttd_marketing_usecoupon_onselect",USECOUPN_BESTSELECT_VALIDATEFAIL:"ttd_marketing_usecoupon_bestselect_validate_fail",POPUP_LOAD:"ttd_marketing_popcoupon_load",JSERROR:"ttd_marketing_jserror",POST_EXCEPTION:"ttdmkt_post_expection",BFF_EXTENSION:"ttd_marketing_bffextensions",DHT_KEY:"o_tour_marketing_coupon"},t.BFF_ERROR_TYPE="Error",(a=t.KM_BLOCK_KEY||(t.KM_BLOCK_KEY={})).ClaimCoupon_ValidateFail="mktcoupoon_10001",a.ClaimCoupon_NeedLogin="mktcoupoon_10002",a.UseCoupon_ValidateFailed="mktcoupoon_10003",t.QUERY_NAME={RECEIVE_PROMOTION:"getReceivePromotionByRelationId",PROMOTION_TAG:"getPromotionTag",SHARK:"getShark",CLAIM:"claimCoupon",CROSS_COUPON:"getCrossCouponList",SCENE_CONFIG:"getSceneConfig",POP_COUPON:"getPopCouponList",SHOP_COUPON:"getShopCouponList",USE_COUPON:"useCouponList",VALIDATE:"validateCoupon",SERVER_TIME:"getServeTime"}},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)).gql(r=r||a(["\n    query($sharkLocale:String){\n        sharkData:getShark(local:$sharkLocale) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n    }\n"],["\n    query($sharkLocale:String){\n        sharkData:getShark(local:$sharkLocale) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n    }\n"]));t.default=o},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)).gql(r=r||a(["\n    query($utcOffset:Int){\n        serverTime:getServerTime(utcOffset:$utcOffset){\n            __typename\n            ...on GetServerTimeData{\n            serverTime\n            }\n        }\n    }\n"],["\n    query($utcOffset:Int){\n        serverTime:getServerTime(utcOffset:$utcOffset){\n            __typename\n            ...on GetServerTimeData{\n            serverTime\n            }\n        }\n    }\n"]));t.default=o},function(e,t,n){var r,a,o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.GetClaimCouponList=void 0,n(12)),c=n(16),l=i.gql(r=r||o(["\n    query($baseInfo:BaseInfoType,$promotionSecretIds:[String]){\n        claimCoupon(baseInfo:$baseInfo,promotionSecretIds:$promotionSecretIds){\n            __typename\n           ...on ClaimCouponData{\n                claimResultList{\n                    promotionId\n                    couponCode\n                    promotionSecretId\n                    buttonText\n                    disableButton\n                    success\n                    showToast\n                    toastType\n                    code\n                    message\n                    serviceMessage\n                }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n       \n     }  \n"],["\n    query($baseInfo:BaseInfoType,$promotionSecretIds:[String]){\n        claimCoupon(baseInfo:$baseInfo,promotionSecretIds:$promotionSecretIds){\n            __typename\n           ...on ClaimCouponData{\n                claimResultList{\n                    promotionId\n                    couponCode\n                    promotionSecretId\n                    buttonText\n                    disableButton\n                    success\n                    showToast\n                    toastType\n                    code\n                    message\n                    serviceMessage\n                }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n       \n     }  \n"])),u=i.gql(a=a||o(["\n    ","\n    ","\n    query($baseInfo:BaseInfoType,$productId:Int,$scenicSpotId:Int,$needUseableList:Boolean,$receivePromotionType:Int){\n        claimCouponList:getClaimCouponList(baseInfo:$baseInfo,productId:$productId,scenicSpotId:$scenicSpotId,needUseableList:$needUseableList,receivePromotionType:$receivePromotionType){\n            __typename\n           ...on GetClaimCouponData{\n               claimList{\n                    ...claimCouponInfoFields,\n               }\n               useableList{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"],["\n    ","\n    ","\n    query($baseInfo:BaseInfoType,$productId:Int,$scenicSpotId:Int,$needUseableList:Boolean,$receivePromotionType:Int){\n        claimCouponList:getClaimCouponList(baseInfo:$baseInfo,productId:$productId,scenicSpotId:$scenicSpotId,needUseableList:$needUseableList,receivePromotionType:$receivePromotionType){\n            __typename\n           ...on GetClaimCouponData{\n               claimList{\n                    ...claimCouponInfoFields,\n               }\n               useableList{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"]),c.claimCouponInfoFields,c.couponInfoFields);t.GetClaimCouponList=u,t.default=l},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16);t.default=o.gql(r=r||a(["\n    ","\n    query($baseInfo:BaseInfoType,$productIDList:[Int],$filterType:Int){\n        promotionTagData: getPromotionTag(baseInfo:$baseInfo,productIDList:$productIDList, filterType:$filterType){\n            __typename\n           ...on GetPromotionTagData{\n               list{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"],["\n    ","\n    query($baseInfo:BaseInfoType,$productIDList:[Int],$filterType:Int){\n        promotionTagData: getPromotionTag(baseInfo:$baseInfo,productIDList:$productIDList, filterType:$filterType){\n            __typename\n           ...on GetPromotionTagData{\n               list{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"]),i.couponInfoFields)},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this,d=(Object.defineProperty(t,"__esModule",{value:!0}),i(n(0))),f=u(n(6)),p=n(46),m=u(n(149)),v=u(n(150)),h=d.useEffect,g=d.useState,y=n(28),_=n(1),b=(n(152),d.forwardRef((function(e,t){var n=(E=g(""))[0],a=E[1],o=(E=g(!1))[0],i=E[1],u=(E=g(!1))[0],b=E[1],E=e.Header,w=e.title,S=(T=e.data).productId,I=T.scenicSpotId,T=void 0===(T.locale,T=e.isShowEmptyContent)||T,C=void 0===(P=e.style)?{}:P,P=void 0===(P=e.needPopover)||P,k=(e=r(r({},e),{fetch:y.miniRequest,compVersion:y.COMPONENT_VERSION,componentType:p.ComponentTypeEnum.Taro,showToast:function(e){f.default.showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:function(e){try{y.cwx&&y.cwx.sendUbtByPage.ubtTrace(e.key,e.value)}catch(e){}},userLogin:y.onLogin,logger:{ubtDevTrace:function(e,t){return y.cwx&&y.cwx.sendUbtByPage.ubtTrace(e,t)}},ref:t,onVisibleChange:function(e){},firstDidAmount:function(){return c(s,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return console.log("%cexec useCoupon firstDidAmount","color:yellow"),[4,y.getSystemInfo()];case 1:return(e=t.sent())&&e.safeArea&&e.safeArea.top&&20<e.safeArea.top&&(i(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow")),[2]}}))}))}}),e=(t=m.default(e)).modelState,t.modelAction),N=(t=t.ctrl,e.claimableCouponList),O=e.useableCouponList,x=e.visible,D=(N||[]).length,j=(O||[]).length,M=(N=t.handleClose,t.loginSuccessCb,h((function(){x?(a(""),f.default.nextTick((function(){b(!0)}))):(b(!1),setTimeout((function(){a("displayNone")}),100))}),[x]),C.zIndex||1e3);return O=d.useMemo((function(){return(e={}).zIndex=M+1,0==D&&0==j&&(e.top="160px"),C.top&&(e.top=C.top),e;var e}),[C,D,j]),d.createElement(_.View,{className:"ttd_mkt_claimcoupon_main "+(u?"shown":"hidden")},P&&d.createElement(_.View,{className:"coupon_modal_mask "+n,onClick:N,catchMove:!0,style:{zIndex:M}}),d.createElement(_.View,{className:"coupon_modal_body"+(P?" dialog":" block")+" "+n,catchMove:P,style:O},P&&d.createElement(_.View,{className:"modal_header"},d.createElement(_.View,{className:"header_closebtn",hoverClass:"closebtn_inhover",onClick:N}),d.createElement(_.View,{className:"header_title"},w||"\u4f18\u60e0\u5238"),d.createElement(_.View,{className:"header_right"})),d.createElement(_.ScrollView,{className:"modal_content",scrollY:!0,scrollWithAnimation:!0,style:{marginBottom:o?"34rpx":0}},d.createElement(v.default,{productId:S,scenicSpotId:I,isShowEmptyContent:T,modelState:e,modelAction:k,ctrl:t,Header:E}))))})));b.displayName="ClaimCoupon",t.default=b},function(e,t,n){"use strict";var r=n(36).default,a=n(37).default,o=n(54).default,i=n(55).default,c=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&c(t,e,n);return l(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=u(n(0)),f=n(1),p=s(n(17)),m=s(n(71)),v=s(n(155)),h=s(n(156)),g=s(n(157)),y=s(n(158));n(159);var _=["\u4ea7\u54c1\u8bf4\u660e","\u884c\u674e\u89c4\u5b9a","\u9000\u6539\u7b7e\u8bf4\u660e"],b=function(e){o(n,e);var t=i(n);function n(e){var a;return r(this,n),(a=t.call(this,e)).setShowCab=function(e){a.setState({isShowCabChange:e})},a.state={currentIndex:0,modulePositionArr:[],isShowCabChange:!1,index:0,ele:"child0"},a}return a(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.fareMaskInfo,r=void 0===n?{}:n,a=t.handleHiddenMask,o=this.state,i=o.isShowCabChange,c=o.ele,l=o.index;if(!Object.keys(r).length)return null;var u=r.confirmInfo,s=r.bookingNotice,b=void 0===s?[]:s,E=r.classInfo,w=r.baggageLimit,S=r.fareRemarkInfo,I=r.priceDetail,T=r.reduceDetail,C=r.isLineFlight,P=[];b.forEach((function(e){var t=e.bookingNotice;(void 0===t?[]:t).forEach((function(e){if("string"==typeof e)P.push(e);else if(e){var t=e.title,n=void 0===t?"":t,r=e.subTxt,a=void 0===r?[]:r;P.push("".concat(n).concat(a.join(" ")))}}))}));var k=["child0","child1","child2"];return d.default.createElement(f.View,null,d.default.createElement(p.default,{height:"tall",title:"\u884c\u674e\u989d\u53ca\u9000\u6539\u7b7e\u8bf4\u660e",listName:k,scrollIntoView:c,setTabIndex:function(t){return function(t){e.setState({index:t})}(t)},topChildren:d.default.createElement(m.default,{dataList:_,curIndex:l,handleClickTab:function(t){e.setState({index:t}),e.setState({ele:"child".concat(t)})}}),handleClose:a,disableScroll:i},d.default.createElement(f.View,{className:"koala-fare-remark-container"},d.default.createElement(v.default,{id:k[0],confirmInfo:u,reduceDetail:T,bookingNoticeTxtArr:P,classInfo:E,priceDetail:I,isLineFlight:C}),d.default.createElement(g.default,{id:k[1],info:w}),d.default.createElement(h.default,{id:k[2],info:S,setShowCab:this.setShowCab}))),i&&d.default.createElement(f.View,{className:"koala-fare-remark-container"},d.default.createElement(p.default,{id:"cabin-pop",needMoreHeight:!0,height:"tall",title:"\u540c\u8231\u6539\u671f\u8d39\u8bf4\u660e",handleClose:function(){return e.setShowCab(!1)}},d.default.createElement(y.default,null))))}}]),n}(d.Component);t.default=b},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1);n(154);var i=a.default.memo((function(e){var t=e.dataList,n=void 0===t?[]:t,r=e.curIndex,i=void 0===r?0:r,c=e.handleClickTab,l=e.style;return n.length<=0?null:a.default.createElement(o.ScrollView,{className:"koala-travelorder-tab-slider",scrollX:!0,style:l},n.map((function(e,t){var n="string"==typeof e?e:null==e?void 0:e.type;return a.default.createElement(o.View,{key:t,onClick:function(){return null==c?void 0:c(t)},className:"'travelorder-tab-item'".concat(t===i?" cur":"")},a.default.createElement(o.Text,null,n),t===i&&a.default.createElement(o.View,{className:"after-line"}))})))}));t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1),i=r(n(17));n(160),t.default=function(e){var t=e.flightSearchHornList,n=void 0===t?[]:t,r=e.onHidden,c={0:"subtitle gary_note",1:"subtitle",2:"subtitle yellow_note",3:"subtitle gary_note"};return a.default.createElement(i.default,{height:"tall",title:"\u673a\u7968\u51fa\u6e38\u63d0\u9192",handleClose:r},a.default.createElement(o.View,{className:"koala-travel-remind-body"},a.default.createElement(o.View,{className:"title"},"\u4ee5\u4e0b\u4fe1\u606f\u4ec5\u4f9b\u53c2\u8003\uff0c\u4ee5\u5f53\u5730\u90e8\u95e8\u6216\u673a\u573a\u653f\u7b56\u4e3a\u51c6"),n.map((function(e,t){var n=e.title,r=e.content,i=e.notificationLevel;return a.default.createElement(o.View,{key:t},a.default.createElement(o.View,{className:c[i]},a.default.createElement(o.Text,null,n)),a.default.createElement(o.View,{className:"sub_content"},r))}))))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1),i=r(n(17));n(161),t.default=function(e){var t=e.transferMaskInfo,n=e.handleHiddenMask,r=t.title,c=t.contentList;return c?a.default.createElement(i.default,{height:"tall",title:r,handleClose:n},a.default.createElement(o.View,{className:"koala-content-list-body"},c.map((function(e,t){return"string"===e.type?a.default.createElement(o.View,{key:t,className:"content-item-wrapper"},a.default.createElement(o.View,{className:"title"},e.title),a.default.createElement(o.View,{className:"content"},e.content)):"contentList"===e.type?a.default.createElement(o.View,{key:t,className:"content-item-wrapper"},a.default.createElement(o.View,{className:"title"},e.title),e.contentList.map((function(e,t){return a.default.createElement(o.View,{key:t},a.default.createElement(o.View,{className:"title"},e.title),e.contentList.map((function(e,t){return a.default.createElement(o.View,{key:t,className:"sub-content"},a.default.createElement(o.View,{className:"left"},"\u2022"),a.default.createElement(o.View,{className:"right"},e.content))})))}))):void 0})))):null}},function(e,t,n){"use strict";var r=n(15).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HotelPolicyAndNotice=void 0;var l=i(n(0)),u=n(1),s=n(162);n(164);var d=c(n(17)),f=function(e){var t=e.showHotelFacility,n=void 0===t||t,r=e.policy,a=e.needTitle,o=e.policyTitle,i=e.showOuter,c=e.onClickPolicy,d=e.policyId;return r?l.default.createElement(u.View,{id:d||"",onClick:function(){c&&c()}},a?l.default.createElement(s.NameRow,{name:o}):null,r.map((function(e){return l.default.createElement(s.InfoItem,{key:e.type,item:e})})),i&&n?l.default.createElement(s.Button,{text:"\u5168\u90e8\u9152\u5e97\u653f\u7b56"}):null):null};t.HotelPolicyAndNotice=function(e){var t=e.showHotelFacility,n=void 0===t||t,a=e.policy,o=void 0===a?{}:a,i=e.showOuter,c=void 0!==i&&i,p=e.direction,m=void 0===p?"column":p,v=e.onHide,h=e.outerNotice,g=void 0!==h&&h,y=e.onClickPolicy,_=e.onClickNotice,b=e.policyId,E=e.noticeId,w=e.testID;console.log(e,m);var S=o.notices,I=o.allPolicies,T=o.outerPolicies,C=o.hasPolicy,P=o.policyTitle,k=void 0===P?"\u9152\u5e97\u53ca\u513f\u7ae5/\u52a0\u5e8a\u653f\u7b56":P,N=o.noticeTitle,O=void 0===N?"\u8ba2\u623f\u5fc5\u8bfb":N,x=null==S?void 0:S.length,D=null==I?void 0:I.length;if("column"!==m){var j=[];x&&j.push(O),D&&j.push(k);var M=l.useState(0),A=r(M,2),R=A[0],V=A[1],L=l.useState(0),B=r(L,2),F=(B[0],B[1],1===j.length);return l.default.createElement(u.View,{className:"h5koala_policy_and_notice","data-testid":w},l.default.createElement(d.default,{title:C?F?j[0]:"":"\u52a0\u8f7d\u4e2d",height:"taller",renderTitle:!F&&C?l.default.createElement(s.MaskTitle,{title:j,tab:R,setTab:function(e){V(e)}}):void 0,handleClose:v},C?l.default.createElement(u.View,{style:{color:"#333333"}},j.map((function(e,t){if(Number(t)!==R)return null;switch(e){case O:return l.default.createElement(s.Notice,{key:e,noticeTitle:O,notices:S,needTitle:!F});case k:return l.default.createElement(f,{key:e,policy:c?T:I,policyTitle:k,needTitle:!F});default:return null}}))):l.default.createElement(s.MaskLoading,null)))}return C?l.default.createElement(u.View,{className:"h5koala_policy_and_notice","data-testid":w},x?l.default.createElement(s.Notice,{showHotelFacility:n,noticeTitle:O,notices:S,needTitle:!0,outerNotice:g,onClickNotice:_,noticeId:E}):null,x&&D?l.default.createElement(u.View,{style:{height:"10px",backgroundColor:"#f4f4f4"}}):null,D?l.default.createElement(f,{showHotelFacility:n,policy:c?T:I,policyTitle:"\u9152\u5e97\u653f\u7b56",needTitle:!0,showOuter:c,onClickPolicy:y,policyId:b}):null):null}},function(e,t,n){"use strict";var r=n(15).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HFacInfo=t.HotelSubRoomMask=void 0;var l=i(n(0)),u=n(1),s=c(n(6)),d=n(10);n(165);var f=n(166),p=c(n(167));t.HotelSubRoomMask=function(e){var n=e.room,a=void 0===n?{}:n,o=e.onHide,i=e.hideBottom,c=void 0===i||i,d=e.replacedContent,f=void 0===d?"\u643a\u7a0b":d,m=e.testId,v=void 0===m?"":m,h=e.popUpTestId,y=void 0===h?"":h,b=e.closeTestId,E=void 0===b?"":b,S=a.pictures,I=void 0===S?[]:S,T=a.priceInfo,C=void 0===T?{}:T,P=a.roomName,k=void 0===P?"":P,N=a.roomCode,O=a.staticInfo,x=void 0===O?[]:O,D=a.facilities,j=void 0===D?[]:D,M=a.prepayDiscounts,A=void 0===M?[]:M,R=a.signs,V=void 0===R?{}:R,L=a.policies,B=void 0===L?{}:L,F=a.feePolicy,U=a.mealInfo,H=l.useState(0),q=r(H,2);return q[0],q[1],l.default.createElement(l.default.Fragment,null,l.default.createElement(p.default,{height:"taller",title:k,testId:y,closeTestId:E,handleClose:o,banner:{auto:3e3,urlList:I,renderDots:function(e){return l.default.createElement(u.View,{style:{width:s.default.getSystemInfoSync().windowWidth,display:"flex",justifyContent:"center",position:"relative"}},l.default.createElement(u.View,{className:"koala_hotel_pop_banner_num"},e+1,"/",I.length))}},showTitleHeight:160},l.default.createElement(u.View,{className:"koala_hotel_pop_container","data-testid":v},l.default.createElement(u.View,{className:"room_name"},k),N?l.default.createElement(u.View,{className:"room_code"},"\u7f16\u53f7\uff1a",N):null,l.default.createElement(t.HFacInfo,{staticInfo:x,facilities:j,mealInfo:U,feePolicy:F}),l.default.createElement(_,{policies:B,replacedContent:f}),l.default.createElement(g,{signs:V,prepayDiscounts:A}),l.default.createElement(w,{roomTaxFeeInfos:C.roomTaxFeeInfos})),!c&&l.default.createElement(u.View,{style:{height:100}})))};var m=function(e){var t=e.list;return t.length?l.default.createElement(u.ScrollView,{scrollX:!0,style:{marginTop:"8px"}},l.default.createElement(u.View,{style:{width:"100%",display:"flex",whiteSpace:"nowrap"}},t.map((function(e,t){var n=e.title,r=e.column,a=void 0===r?[]:r;return l.default.createElement(u.View,{key:t,className:"info_container"},l.default.createElement(u.View,{className:"date"},n),a.map((function(e,t){return l.default.createElement(u.View,{key:t,className:"date breakfast"},e)})))})))):null},v=l.default.memo((function(e){var t=e.mealInfo;if(d._.isEmpty(t))return null;var n=t.mealList,r=t.mealDesc,a=t.mealTips;return l.default.createElement(u.View,{className:"breakfast_info"},l.default.createElement(u.View,{className:"fac_span_breakfast"},l.default.createElement(u.View,{className:"koala-icon icons-htl_breakfast"}),"undefined"!==r?r:"\u65e0\u9910\u98df"),l.default.createElement(m,{list:n}),a&&l.default.createElement(u.Text,{className:"meal_tips"},a))}));t.HFacInfo=function(e){var t=e.facilities,n=void 0===t?[]:t,a=e.staticInfo,o=void 0===a?[]:a,i=e.mealInfo,c=e.feePolicy,p=void 0===c?{}:c,m=e.isBase,g=void 0!==m&&m,y=l.useState(!1),_=r(y,2),b=_[0],w=_[1],S=f.StringDefault,I=S.moreFac,T=S.packUp,C=o.filter((function(e){return null==e?void 0:e.h5Icon})),P=l.useState([]),k=r(P,2),N=k[0],O=k[1];return l.useEffect((function(){var e=s.default.createSelectorQuery(),t=setTimeout((function(){var t=(s.default.getSystemInfoSync().windowWidth-48)/3;e.selectAll(".fac_span").boundingClientRect((function(e){var n=[];d._.map(e,(function(e,r){e.width>t?n[r]="100%":n[r]="33.3%"})),O(n)})).exec()}),200);return function(){return clearTimeout(t)}}),[]),l.default.createElement(u.View,{className:"koala_infos_container"},l.default.createElement(u.View,{className:"static_info"},d._.map(C,(function(e,t){return l.default.createElement(u.View,{className:"fac_span",style:{width:N[t]},key:t},l.default.createElement(u.View,{className:"koala-icon "+e.h5Icon}),e.name)}))),l.default.createElement(v,{mealInfo:i}),l.default.createElement(E,{feePolicy:p}),d._.isEmpty(n)||g?l.default.createElement(h,{facilities:n}):l.default.createElement(l.default.Fragment,null,b&&l.default.createElement(h,{facilities:n}),l.default.createElement(u.View,{onClick:function(){return w(!b)},className:"koala_show_more"},b?T:I,l.default.createElement(u.View,{className:"koala-icon "+(b?"arrow-dropup":"arrow-dropdown")}))))};var h=function(e){var t=e.facilities;return l.default.createElement(u.View,{className:"koala_fac_more_box"},d._.map(t,(function(e,t){var n=e.desc,r=void 0===n?[]:n,a=e.name,o=r.join("  ").replace("\u514d\u8d39",'<em className="em">\u514d\u8d39</em>');return l.default.createElement(u.View,{key:t,className:"fac_box"},l.default.createElement(u.View,{className:"fac_title"},a),l.default.createElement(u.View,{className:"fac_desc"},l.default.createElement(u.Text,{dangerouslySetInnerHTML:{__html:o}})))})))},g=l.default.memo((function(e){var t=e.signs,n=e.prepayDiscounts,r=[t.signMemberBenefit,t.signPkgSave].filter(Boolean),a=[t.signGift,t.signFreeEnjoy,t.signGuessLike].filter(Boolean),o=r.length>0,i=a.length>0,c=n.length>0;return o||i||c?l.default.createElement(u.View,{className:"koala_infos_container koala_room_pop_tag_list"},l.default.createElement(u.View,{className:"h4"},"\u4fc3\u9500\u4f18\u60e0"),o&&r.map((function(e,t){return l.default.createElement(y,{key:t,tag:e,hasExtend:109===(null==e?void 0:e.type)})})),c&&l.default.createElement(u.View,{className:"hotel_discount_box"},n.map((function(e,t){return l.default.createElement(y,{style:{marginTop:"16px"},key:"pre_".concat(t),tag:e})}))),i&&a.map((function(e,t){return l.default.createElement(y,{key:t,tag:e,hasExtend:109===(null==e?void 0:e.type)})}))):null})),y=function(e){var t=e.tag,n=e.hasExtend,r=void 0!==n&&n;return t?l.default.createElement(u.View,{className:"tag_box"},function(e,t){var n=e.name,r=e.type,a=f.TYPE_MAP[r]||"koala_label_org";return!!n&&l.default.createElement(u.View,{key:t+n,className:"span koala_label "+a},"koala_label_stag"===a?l.default.createElement(u.View,{className:"koala-icon"}):null,n)}(t,0),l.default.createElement(u.View,{className:"desc_box"},t.desc,r&&(null==t?void 0:t.extend.map((function(e,t){return l.default.createElement(u.View,{key:t,className:"extend_info"},l.default.createElement(u.View,{className:"extend_title"},e.Title),l.default.createElement(u.View,null,e.Description))}))))):null},_=l.default.memo((function(e){var t=e.policies,n=e.replacedContent,a=void 0===n?"\u643a\u7a0b":n;if(!t)return null;t.title;var o=t.ladderDeductions,i=t.table,c=void 0===i?[]:i,s=t.innerList,p=t.innerListTitle,m=l.useState(!1),v=r(m,2),h=v[0],g=v[1],y=f.StringDefault.packUp;return l.default.createElement(u.View,{className:"koala_infos_container koala_room_pop_policy koala_flex"},l.default.createElement(u.View,{className:"h4"},"\u9152\u5e97\u623f\u578b\u653f\u7b56"),c.map((function(e,t){var n=e.value,r=e.title,o=Array.isArray(n)?n:"string"==typeof n?[n]:[];return o.length?l.default.createElement(u.View,{key:"outer-policy-".concat(t),className:"tip_box"},l.default.createElement(u.Text,{className:"h5"},r),o.map((function(e,t){return l.default.createElement(u.Text,{className:"span",key:t},e.replace(/\u643a\u7a0b/g,a))}))):l.default.createElement(u.View,{key:"outer-policy-".concat(t),className:"tip_box"},l.default.createElement(u.Text,{className:"koala_label_green"},e.title))})),l.default.createElement(b,{ladderDeductions:o}),h&&s&&s.map((function(e,t){var n=e.title,r=e.value,a=void 0===r?[]:r;return l.default.createElement(u.View,{key:"innerList".concat(t),className:"policy_innerList"},l.default.createElement(u.View,{className:"h5"},n),a.map((function(e,t){var n=e.text,r=e.title,a=e.title4Table,o=e.extend,i="string"==typeof n?[n]:n;return l.default.createElement(u.View,{key:"policy-table".concat(t),className:"innerList_item"},r?l.default.createElement(u.View,{className:"p innerList_item_title"},r):null,i.map((function(e,t){return l.default.createElement(u.View,{className:"p",key:t},e)})),!d._.isEmpty(a)&&!d._.isEmpty(o)&&l.default.createElement(u.View,{className:"table_container"},l.default.createElement(u.View,{className:"table_head"},a.map((function(e,n){var r=0===n?{}:{borderLeft:"1px solid #eee"};return l.default.createElement(u.Text,{key:"policy-table".concat(t,"-title").concat(n),style:r,className:"span koala_flex_center"},e)}))),o.map((function(e,n){var r=e.title,a=e.other,o=e.columnType;return l.default.createElement(u.View,{key:"policy-table".concat(t,"-row").concat(n),className:"table_row"},l.default.createElement(u.View,{className:"span first_item koala_flex_center"},o&&l.default.createElement(u.Image,{className:"policy_child_icon",mode:"widthFix",src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/hotel-child".concat(o,".png")}),r),a[0].map((function(e,r){var o=e.replace("\u514d\u8d39",'<em className="em">\u514d\u8d39</em>').replace("-","<br/>");return l.default.createElement(u.View,{key:"policy-table".concat(t,"-row").concat(n,"-item").concat(r),style:{flex:1}},1===a.length?l.default.createElement(u.Text,{className:"other_item koala_flex_center",dangerouslySetInnerHTML:{__html:o}}):l.default.createElement(u.Text,{className:"other_item_one_column"},a.map((function(e,t){var a=e[r].replace("\u514d\u8d39",'<em className="em">\u514d\u8d39</em>').replace("-","<br/>");return l.default.createElement(u.Text,{key:"policy-table".concat(t,"-row").concat(n,"-item").concat(r,"-").concat(t),className:"other_item",dangerouslySetInnerHTML:{__html:a}})}))))})))}))))})))})),p&&l.default.createElement(u.View,{onClick:function(){return g(!h)},className:"koala_show_more"},h?y:p,l.default.createElement(u.View,{className:"koala-icon "+(h?"arrow-dropup":"arrow-dropdown")})))})),b=l.default.memo((function(e){var t=e.ladderDeductions,n=e.replacedContent;if(!t)return null;var r=t.titleHD,a=t.valueHD,o=t.table,i=t.title,c=void 0===i?"":i,s=t.desc.replace(/\u643a\u7a0b/g,n);return l.default.createElement(u.View,{className:"ladder_box"},l.default.createElement(u.View,{className:"h5"},c),s?l.default.createElement(u.View,{className:"ladder_desc"},s):null,l.default.createElement(u.View,{className:"ladder_title_box"},l.default.createElement(u.Text,{className:"span"},r),l.default.createElement(u.Text,{className:"span"},a)),o.map((function(e,t){var n=e.title,r=e.value.replace("\u514d\u8d39",'<em className="em">\u514d\u8d39</em>');return l.default.createElement(u.View,{key:t,className:"ladder_body_box"},l.default.createElement(u.Text,{className:"span"},n),l.default.createElement(u.Text,{className:"span",dangerouslySetInnerHTML:{__html:r}}))})))})),E=l.default.memo((function(e){var t=e.feePolicy,n=null==t?void 0:t.table;return!n||d._.isEmpty(n)?null:l.default.createElement(u.View,{className:"fee_policy_fac_box"},l.default.createElement(u.View,{className:"fee_policy_fac_title"},(null==t?void 0:t.title)||"\u8d39\u7528\u653f\u7b56"),l.default.createElement(u.View,{className:"fee_policy_fac_desc"},n.map((function(e,t){var n=e.replace("\u514d\u8d39",'<em className="em">\u514d\u8d39</em>');return l.default.createElement(u.View,{key:t,dangerouslySetInnerHTML:{__html:n}})}))))})),w=function(e){var t=e.roomTaxFeeInfos;return d._.isEmpty(t)?null:l.default.createElement(u.View,{className:"koala_infos_container koala_tax_info"},l.default.createElement(u.View,{className:"h4"},"\u7a0e/\u5176\u4ed6"),d._.map(t,(function(e,t){return l.default.createElement(u.View,{key:t},l.default.createElement(u.View,{className:"h5"},e.Title),l.default.createElement(u.View,{className:"p",dangerouslySetInnerHTML:{__html:e.Description}}))})))}},function(e,t,n){"use strict";var r=n(15).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),u=n(1),s=c(n(17)),d=c(n(71));n(169);var f=["\u4ea7\u54c1\u8bf4\u660e","\u884c\u674e\u8bf4\u660e"];t.default=function(e){var t=e.onHide,n=e.currentIndex,a=void 0===n?0:n,o=e.introductionUseCar,i=void 0===o?{}:o,c=i.ModelName,p=i.CarSeriesName,m=i.PassengerSeat,v=i.LargeBaggageSize,h=i.LargeBaggageSizeCount,g=i.SmallBaggageSize,y=i.SmallBaggageSizeCount,_=i.RecommendDesc,b=l.useState(a),E=r(b,2),w=E[0],S=E[1],I=l.useState("ele0"),T=r(I,2),C=T[0],P=T[1];return l.default.createElement(s.default,{height:"tall",title:"\u4ea7\u54c1\u53ca\u884c\u674e\u8bf4\u660e",scrollIntoView:C,topChildren:l.default.createElement(d.default,{dataList:f,curIndex:w,handleClickTab:function(e){S(e),P("ele".concat(e))}}),handleClose:t},l.default.createElement(u.View,{className:"koala-xIntroduction"},l.default.createElement(u.View,{className:"content",id:"ele0"},l.default.createElement(u.View,{className:"title"},"\u4ea7\u54c1\u8bf4\u660e"),!!c&&l.default.createElement(u.View,{className:"sub-title"},c),!!p&&l.default.createElement(u.View,{className:"third-title"},p),!!m&&l.default.createElement(u.View,{className:"intro-item"},l.default.createElement(u.View,{className:"desc"},"\u6700\u591a\u53ef\u5bb9\u7eb3\u4e58\u5ba2"),l.default.createElement(u.View,{className:"value"},"x",m)),!!v&&l.default.createElement(u.View,{className:"intro-item"},l.default.createElement(u.View,{className:"desc"},v,"\u5bf8\u4ee5\u4e0a\u884c\u674e"),l.default.createElement(u.View,{className:"value"},"x",h)),!!g&&l.default.createElement(u.View,{className:"intro-item"},l.default.createElement(u.View,{className:"desc"},"\u6216",g,"\u5bf8\u4ee5\u4e0b\u884c\u674e"),l.default.createElement(u.View,{className:"value"},"x",y)),!!_&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.View,{className:"sub-title mgt24"},"\u8d44\u6e90\u63cf\u8ff0"),l.default.createElement(u.View,{className:"describe"},l.default.createElement(u.RichText,{nodes:_})))),l.default.createElement(u.View,{className:"content",id:"ele1"},l.default.createElement(u.View,{className:"title mgt24"},"\u884c\u674e\u989d\u8bf4\u660e"),l.default.createElement(u.View,{className:"baggage"},l.default.createElement(u.View,{className:"head"},l.default.createElement(u.View,{className:"left"},"\u884c\u674e\u5c3a\u5bf8\uff08\u4ec5\u4f9b\u53c2\u8003\uff09"),l.default.createElement(u.View,{className:"right"},"\u56fe\u8868\u5355\u4f4d:CM")),l.default.createElement(u.Image,{className:"image",mode:"widthFix",src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/xsearch_usecar_intro_cn_app.png"}),l.default.createElement(u.View,{className:"table"},l.default.createElement(u.View,{className:"row top-row"},l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0")),l.default.createElement(u.View,{className:"row"},l.default.createElement(u.View,{className:"span"},"\u9ad8"),l.default.createElement(u.View,{className:"span"},"49"),l.default.createElement(u.View,{className:"span"},"59"),l.default.createElement(u.View,{className:"span"},"64"),l.default.createElement(u.View,{className:"span"},"69")),l.default.createElement(u.View,{className:"row"},l.default.createElement(u.View,{className:"span"},"\u52a0\u8f6e\u5b50\u9ad8"),l.default.createElement(u.View,{className:"span"},"55"),l.default.createElement(u.View,{className:"span"},"65"),l.default.createElement(u.View,{className:"span"},"70"),l.default.createElement(u.View,{className:"span"},"75")),l.default.createElement(u.View,{className:"row"},l.default.createElement(u.View,{className:"span"},"\u5bbd"),l.default.createElement(u.View,{className:"span"},"34"),l.default.createElement(u.View,{className:"span"},"41"),l.default.createElement(u.View,{className:"span"},"44"),l.default.createElement(u.View,{className:"span"},"48")),l.default.createElement(u.View,{className:"row"},l.default.createElement(u.View,{className:"span"},"\u539a"),l.default.createElement(u.View,{className:"span"},"22"),l.default.createElement(u.View,{className:"span"},"24"),l.default.createElement(u.View,{className:"span"},"27"),l.default.createElement(u.View,{className:"span"},"30")),l.default.createElement(u.View,{className:"row"},l.default.createElement(u.View,{className:"span"},"\u5bb9\u91cf(L)"),l.default.createElement(u.View,{className:"span"},"36.6"),l.default.createElement(u.View,{className:"span"},"58"),l.default.createElement(u.View,{className:"span"},"76"),l.default.createElement(u.View,{className:"span"},"99")),l.default.createElement(u.View,{className:"row bottom-row"},l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0"),l.default.createElement(u.View,{className:"span"},"\xa0")))),l.default.createElement(u.View,{className:"sub-title"},"\u884c\u674e\u8ba1\u7b97"),l.default.createElement(u.View,{className:"tip mgb24"},l.default.createElement(u.View,{className:"tip-item tip-item-blue"},"1.\u884c\u674e\u5927\u5c0f\u8ba1\u7b97\u6807\u51c6\u4e3a24\u5bf8\u884c\u674e\u7bb1\uff1b"),l.default.createElement(u.View,{className:"tip-item"},"2.\u8d85\u8fc724\u5bf8\u7684\u5927\u884c\u674e\u7bb1\uff0c\u8ba1\u4e3a2\u4ef6\u3002")),l.default.createElement(u.View,{className:"sub-title"},"\u6e29\u99a8\u63d0\u793a"),l.default.createElement(u.View,{className:"tip"},l.default.createElement(u.View,{className:"tip-item"},"\u5a74\u513f/\u513f\u7ae5\u7b971\u4eba\uff0c\u8bf7\u6ce8\u610f\u786e\u8ba4\u5177\u4f53\u8f66\u578b\u4e58\u5ba2\u4eba\u6570\u53ca\u643a\u5e26\u884c\u674e\u9650\u5236")))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={VPC_PRODUCTINFO:"VPC_PRODUCTINFO",VPC_DATE_INFO:"VPC_DATE_INFO",VPC_SAVED_PASSANGER_INFO:"VPC_SAVED_PASSANGER_INFO",VPC_SHOPPING_HISTORY:"VPC_SHOPPING_HISTORY",NewProcessSelectedDate:"NewProcessSelectedDate",VPC_PRESALE_DATE_INFO:"VPC_PRESALE_DATE_INFO",VPC_PRESALE_PASSENGER_INFO:"VPC_PRESALE_PASSENGER_INFO",VPC_SEGMENT_INFO:"VPC_SEGMENT_INFO",VPC_230331_VAC_CXZ:"VPC_230331_VAC_CXZ",VPC_HAS_AUTO_SHOW:"VPC_HAS_AUTO_SHOW"},a=["A","B","C","D","E","F","G","H","I","J"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(30);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Object(o.a)(r.key),r)}}var c=function(e,t,n,r){return(e=e.toString()).length<t&&(n=new Array(t).join(n||" "),e=r?(n+e).substr(-t):(e+n).substring(0,t)),e},l=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],u=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z)?((\+|-)?\d{1,2}:00)?$/,s=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a(this,e),this.date=new Date("");var o=e.handleZone(Date.now());if(t)if(/^-\d+$/.test(t)){if(n)return this.date=new Date(""),this;t=e.handleZone(t)}else if(/^\+?\d+$/.test(t))t=e.handleZone(t);else if("object"===Object(r.a)(t)&&t instanceof e)return t;if("string"==typeof(t=t||o)){var i=/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i;t.match(i)&&(t=t.replace(i,(function(e,t,n,r){return"".concat(t,"/").concat(n||"01","/").concat(r||"01")})))}this.date=new Date(t)}var t,n,o;return t=e,o=[{key:"parse",value:function(t,n,a){return"object"===Object(r.a)(t)?(t instanceof e&&(t=t.valueOf()),n?new Date(t):new e(t)):((t+="").indexOf("Date")>-1?t=t.match(/((\+|-)?\d+)/)[0]:u.test(t)&&(t=e.transformTimeStampISO8601(t)),isNaN(t)||(t=parseInt(t,10)),n?new e(t,a).valueOf():new e(t,a))}},{key:"minuteDiff",value:function(t,n){var r=Number(e.parse(t,!0));return(Number(e.parse(n,!0))-r)/6e4}},{key:"hourDiff",value:function(t,n){var r=Number(e.parse(t,!0));return(Number(e.parse(n,!0))-r)/36e5}},{key:"dayDiff",value:function(t,n){var r=e.parse(t,!0),a=e.parse(n,!0);r.setHours(0,0,0,0),a.setHours(0,0,0,0);var o=Number(r);return(Number(a)-o)/864e5}},{key:"diffMonth",value:function(t,n){return(t=new e(t)).diffMonth(n)}},{key:"diffYear",value:function(t,n){return(t=new e(t)).diffYear(n)}},{key:"timeRange",value:function(t,n,r){var a=e.dayDiff(t,r),o=e.dayDiff(r,n);return a>=0&&o>=0}},{key:"format",value:function(t,n,r){return new e(t=this.parse(t,!0,r),r).format(n)}},{key:"handleZone",value:function(e){return!e||isNaN(e)?e:+e+6e4*(new Date).getTimezoneOffset()+288e5}},{key:"transformTimeStamp",value:function(t){var n=t.match(/^\/Date\(-?(\d+)(\+|-)\d+\)\/$/);return n?e.handleZone(n[1]):t.match(/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i)?new Date(t).getTime():t}},{key:"transformTimeStampISO8601",value:function(e){var t=e.match(u);if(t&&t.length){var n=t[1],r=null==t[2]?0:t[2]-1,a=t[3],o=t[4],i=t[5],c=t[6];return new Date(n,r,a,o,i,c).getTime()-288e5-6e4*(new Date).getTimezoneOffset()}return null}},{key:"transformServerDate",value:function(t){return"/Date("+(t=e.handleZone(t))+"+0800)/"}},{key:"isCrossYear",value:function(t,n){return t=this.parse(t,!0,n),0!=e.diffYear(t,new e)}}],(n=[{key:"addDay",value:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this}},{key:"addMonth",value:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this}},{key:"addHours",value:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this}},{key:"addMinutes",value:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this}},{key:"getMinutes",value:function(){return this.date.getMinutes()}},{key:"addSeconds",value:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this}},{key:"addYear",value:function(e){return e=e||0,this.date.setFullYear(this.date.getFullYear()+e),this}},{key:"toBJZone",value:function(){return new e(e.handleZone(this.date.getTime()))}},{key:"setHours",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setHours.apply(this.date,t),this}},{key:"setMinutes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setMinutes.apply(this.date,t),this}},{key:"valueOf",value:function(){return this.date}},{key:"getTime",value:function(){return this.date.valueOf()}},{key:"toString",value:function(){return this.date.toString()}},{key:"format",value:function(e){var t=this.date;return(e=e||"YYYY-MM-DD").replace(/Y+|y+|M+|D+|d+|H+|h+|m+|s+|w+/g,(function(e){var n=e.substr(0,1),r=e.length;switch(n){case"Y":case"y":return t.getFullYear().toString().substr(4-r);case"M":return c(t.getMonth()+1,r,"0",!0);case"D":case"d":return c(t.getDate(),r,"0",!0);case"H":case"h":return c(t.getHours(),r,"0",!0);case"m":return c(t.getMinutes(),r,"0",!0);case"s":return c(t.getSeconds(),r,"0",!0);case"w":return l[t.getDay()]}}))}},{key:"diffMonth",value:function(t){var n=parseInt(this.format("YYYY"),10),r=parseInt(this.format("MM"),10),a=new e(t);return 12*(parseInt(a.format("YYYY"),10)-n)+(parseInt(a.format("MM"),10)-r)}},{key:"diffYear",value:function(t){var n=parseInt(this.format("YYYY"),10),r=new e(t);return parseInt(r.format("YYYY"),10)-n}},{key:"isValid",value:function(){return this.date&&!isNaN(this.date.getTime())}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t){e.exports=n(46346)},,function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(35);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(9).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){(function(a){var o,i,c,l=n(9).default;!function(n,r){"object"==l(t)&&void 0!==e?r(t):(i=[t],void 0===(c="function"==typeof(o=r)?o.apply(t,i):o)||(e.exports=c))}(0,(function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function c(e,t){c.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function d(e){var t=void 0===e?"undefined":T(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function f(e,t,n,r,a,l,p){p=p||[];var m=(a=a||[]).slice(0);if(void 0!==l){if(r){if("function"==typeof r&&r(m,l))return;if("object"===(void 0===r?"undefined":T(r))){if(r.prefilter&&r.prefilter(m,l))return;if(r.normalize){var v=r.normalize(m,l,e,t);v&&(e=v[0],t=v[1])}}}m.push(l)}"regexp"===d(e)&&"regexp"===d(t)&&(e=e.toString(),t=t.toString());var h=void 0===e?"undefined":T(e),g=void 0===t?"undefined":T(t),y="undefined"!==h||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(l),_="undefined"!==g||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(l);if(!y&&_)n(new i(m,t));else if(!_&&y)n(new c(m,e));else if(d(e)!==d(t))n(new o(m,e,t));else if("date"===d(e)&&e-t!=0)n(new o(m,e,t));else if("object"===h&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new o(m,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new u(m,b,new c(void 0,e[b]))):f(e[b],t[b],n,r,m,b,p);for(;b<t.length;)n(new u(m,b,new i(void 0,t[b++])))}else{var E=Object.keys(e),w=Object.keys(t);E.forEach((function(a,o){var i=w.indexOf(a);i>=0?(f(e[a],t[a],n,r,m,a,p),w=s(w,i)):f(e[a],void 0,n,r,m,a,p)})),w.forEach((function(e){f(void 0,t[e],n,r,m,e,p)}))}p.length=p.length-1}else e!==t&&("number"===h&&isNaN(e)&&isNaN(t)||n(new o(m,e,t)))}function p(e,t,n,r){return r=r||[],f(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function m(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,a=-1,o=n.path?n.path.length-1:0;++a<o;)void 0===r[n.path[a]]&&(r[n.path[a]]="number"==typeof n.path[a]?[]:{}),r=r[n.path[a]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var a,o=t[n],i=r.path.length-1;for(a=0;a<i;a++)o=o[r.path[a]];switch(r.kind){case"A":e(o[r.path[a]],r.index,r.item);break;case"D":delete o[r.path[a]];break;case"E":case"N":o[r.path[a]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=s(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(n.path?r[n.path[a]]:r,n.index,n.item);break;case"D":delete r[n.path[a]];break;case"E":case"N":r[n.path[a]]=n.rhs}}}function v(e){return"color: "+k[e].color+"; font-weight: bold"}function h(e,t,n,r){var a=p(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}a?a.forEach((function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,a=e.rhs,o=e.index,i=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",a];case"N":return[n.join("."),a];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",i];default:return[]}}(e);n.log.apply(n,["%c "+k[t].text,v(t)].concat(C(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function g(e,t,n,r){switch(void 0===e?"undefined":T(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,C(n)):e[r];case"function":return e(t);default:return e}}function y(e,t){var n=t.logger,r=t.actionTransformer,a=t.titleFormatter,o=void 0===a?function(e){var t=e.timestamp,n=e.duration;return function(e,r,a){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+a.toFixed(2)+" ms)"),o.join(" ")}}(t):a,i=t.collapsed,c=t.colors,l=t.level,u=t.diff,s=void 0===t.titleFormatter;e.forEach((function(a,d){var f=a.started,p=a.startedTime,m=a.action,v=a.prevState,y=a.error,_=a.took,b=a.nextState,E=e[d+1];E&&(b=E.prevState,_=E.started-f);var w=r(m),I="function"==typeof i?i((function(){return b}),m,a):i,T=S(p),C=c.title?"color: "+c.title(w)+";":"",P=["color: gray; font-weight: lighter;"];P.push(C),t.timestamp&&P.push("color: gray; font-weight: lighter;"),t.duration&&P.push("color: gray; font-weight: lighter;");var k=o(w,T,_);try{I?c.title&&s?n.groupCollapsed.apply(n,["%c "+k].concat(P)):n.groupCollapsed(k):c.title&&s?n.group.apply(n,["%c "+k].concat(P)):n.group(k)}catch(e){n.log(k)}var N=g(l,w,[v],"prevState"),O=g(l,w,[w],"action"),x=g(l,w,[y,v],"error"),D=g(l,w,[b],"nextState");if(N)if(c.prevState){var j="color: "+c.prevState(v)+"; font-weight: bold";n[N]("%c prev state",j,v)}else n[N]("prev state",v);if(O)if(c.action){var M="color: "+c.action(w)+"; font-weight: bold";n[O]("%c action    ",M,w)}else n[O]("action    ",w);if(y&&x)if(c.error){var A="color: "+c.error(y,v)+"; font-weight: bold;";n[x]("%c error     ",A,y)}else n[x]("error     ",y);if(D)if(c.nextState){var R="color: "+c.nextState(b)+"; font-weight: bold";n[D]("%c next state",R,b)}else n[D]("next state",b);u&&h(v,b,n,I);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},N,e),n=t.logger,r=t.stateTransformer,a=t.errorTransformer,o=t.predicate,i=t.logErrors,c=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(u){if("function"==typeof o&&!o(n,u))return e(u);var s={};l.push(s),s.started=I.now(),s.startedTime=new Date,s.prevState=r(n()),s.action=u;var d=void 0;if(i)try{d=e(u)}catch(e){s.error=a(e)}else d=e(u);s.took=I.now()-s.started,s.nextState=r(n());var f=t.diff&&"function"==typeof c?c(n,u):t.diff;if(y(l,Object.assign({},t,{diff:f})),l.length=0,s.error)throw s.error;return d}}}}var b,E,w=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},S=function(e){return w(e.getHours(),2)+":"+w(e.getMinutes(),2)+":"+w(e.getSeconds(),2)+"."+w(e.getMilliseconds(),3)},I="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,T="function"==typeof Symbol&&"symbol"==l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)},C=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},P=[];b="object"===(void 0===a?"undefined":T(a))&&a?a:"undefined"!=typeof r?r:{},(E=b.DeepDiff)&&P.push((function(){void 0!==E&&b.DeepDiff===p&&(b.DeepDiff=E,E=void 0)})),t(o,n),t(i,n),t(c,n),t(u,n),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:f,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&f(e,t,(function(r){n&&!n(e,t,r)||m(e,t,r)}))},enumerable:!0},applyChange:{value:m,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,a,o=e;for(a=n.path.length-1,r=0;r<a;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var a,o=t[n],i=r.path.length-1;for(a=0;a<i;a++)o=o[r.path[a]];switch(r.kind){case"A":e(o[r.path[a]],r.index,r.item);break;case"D":case"E":o[r.path[a]]=r.lhs;break;case"N":delete o[r.path[a]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=s(t,n)}return t}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==E},enumerable:!0},noConflict:{value:function(){return P&&(P.forEach((function(e){e()})),P=null),p},enumerable:!0}});var k={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},N={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=N,e.createLogger=_,e.logger=O,e.default=O,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n(27))},function(e,t,n){"use strict";var r=n(35).default,a=n(15).default,o=n(33).default,i=n(9).default,c=n(88).default,l=n(92),u=n(93),s=n(94),d=n(95),f=Symbol("encodeFragmentIdentifier");function p(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function m(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function v(e,t){return t.decode?u(e):e}function h(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function g(e){var t=(e=h(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function y(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function _(e,t){p((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!a&&v(n,e).includes(e.arrayFormatSeparator);n=o?v(n,e):n;var i=a||o?n.split(e.arrayFormatSeparator).map((function(t){return v(t,e)})):null===n?n:v(n,e);r[t]=i};case"bracket-separator":return function(t,n,r){var a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),a){var o=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return v(t,e)}));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o}else r[t]=n?v(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var c,l=o(e.split("&"));try{for(l.s();!(c=l.n()).done;){var u=c.value;if(""!==u){var d=s(t.decode?u.replace(/\+/g," "):u,"="),f=a(d,2),m=f[0],h=f[1];h=void 0===h?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?h:v(h,t),n(v(m,t),h,r)}}}catch(e){l.e(e)}finally{l.f()}for(var g=0,_=Object.keys(r);g<_.length;g++){var b=_[g],E=r[b];if("object"===i(E)&&null!==E)for(var w=0,S=Object.keys(E);w<S.length;w++){var I=S[w];E[I]=y(E[I],t)}else r[b]=y(E,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===i(n)&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"===i(t)?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))}t.extract=g,t.parse=_,t.stringify=function(e,t){if(!e)return"";p((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(c(n),null===r?[[m(t,e),"[",a,"]"].join("")]:[[m(t,e),"[",m(a,e),"]=",m(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(c(n),null===r?[[m(t,e),"[]"].join("")]:[[m(t,e),"[]=",m(r,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(c(n),null===r?[[m(t,e),":list="].join("")]:[[m(t,e),":list=",m(r,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(r,a){return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[m(n,e),t,m(a,e)].join("")]:[[r,m(a,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(c(n),null===r?[m(t,e)]:[[m(t,e),"=",m(r,e)].join("")])}}}}(t),a={},o=0,i=Object.keys(e);o<i.length;o++){var l=i[o];n(l)||(a[l]=e[l])}var u=Object.keys(a);return!1!==t.sort&&u.sort(t.sort),u.map((function(n){var a=e[n];return void 0===a?"":null===a?m(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?m(n,t)+"[]":a.reduce(r(n),[]).join("&"):m(n,t)+"="+m(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=s(e,"#"),r=a(n,2),o=r[0],i=r[1];return Object.assign({url:o.split("?")[0]||"",query:_(g(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:v(i,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign(r({encode:!0,strict:!0},f,!0),n);var a=h(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),c=Object.assign(i,e.query),l=t.stringify(c,n);l&&(l="?".concat(l));var u=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#".concat(n[f]?m(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(a).concat(l).concat(u)},t.pick=function(e,n,a){a=Object.assign(r({parseFragmentIdentifier:!0},f,!1),a);var o=t.parseUrl(e,a),i=o.url,c=o.query,l=o.fragmentIdentifier;return t.stringifyUrl({url:i,query:d(c,n),fragmentIdentifier:l},a)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},function(e,t,n){var r=n(89),a=n(90),o=n(31),i=n(91);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(50);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},function(e,t,n){"use strict";var r=n(9).default,a=new RegExp("(%[a-f0-9]{2})|([^%]+?)","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function c(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(a)||[],n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(a)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+r(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=c(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="\ufffd";for(var a=Object.keys(t),i=0;i<a.length;i++){var l=a[i];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],c=e[i];(a?-1!==t.indexOf(i):t(i,c,e))&&(n[i]=c)}return n}},function(e,t,n){var a=n(52).default||n(52);r.fetch||(r.fetch=a),e.exports=a},function(e,t,n){"use strict";var a=n(36).default,o=n(37).default,i=n(53).default,c=n(98).default,l=n(38).default,u=n(54).default,s=n(55).default,d=n(33).default,f=n(32).default,p=n(34).default,m=n(15).default,v=n(9).default;Object.defineProperty(t,"__esModule",{value:!0});var h=n(0),g=n(49);function y(e){return e&&"object"===v(e)&&"default"in e?e:{default:e}}var _=y(h),b="undefined"!=typeof r&&void 0!==r.document&&void 0!==r.document.createElement?h.useLayoutEffect:h.useEffect,E=Symbol("default-value"),w=function(e){var t=e.list,n=e.children,r=e.fallback,a=e.container,o=h.useState(null),i=m(o,2),c=i[0],l=i[1];b((function(){var e=!1;return S(t,a).then((function(t){e||l({Provider:t.Provider})})),function(){e=!0}}),[]);var u=null==c?void 0:c.Provider;return u?_.default.createElement(u,null,n):_.default.createElement(_.default.Fragment,null,null!=r?r:null)},S=function(){var e=p(f().mark((function e(t,n){var r,a,o,i,c,l,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null!=n?n:g.createPureModelContainer(),r=d(t);try{for(r.s();!(a=r.n()).done;)o=a.value,n.set(o.Model,{context:o.context,preloadedState:o.preloadedState})}catch(e){r.e(e)}finally{r.f()}return e.next=5,Promise.all(t.map((function(e){var t=e.Model,r=e.context,a=e.preloadedState;return t.preload(r,a,n)})));case 5:return i=e.sent,c=i.map((function(e){return e.Provider})),l=i.map((function(e){return e.state})),u=i.map((function(e){return e.model})),s=function(e){for(var t=e.children,n=c.length-1;n>=0;n--){var r=c[n];t=_.default.createElement(r,null,t)}return _.default.createElement(_.default.Fragment,null,t)},e.abrupt("return",{Provider:s,stateList:l,modelList:u});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e,t){return Object.values(e).map((function(e){return{Model:e,context:t}}))};t.HydrateProvider=function(e){var t,n=e.list,r=e.children,a=e.fallback,o=e.container,i=void 0===o?g.createPureModelContainer():o,c=d(n);try{for(c.s();!(t=c.n()).done;){var l=t.value;i.set(l.Model,{context:l.context,preloadedState:l.preloadedState}),r=_.default.createElement(l.Model.Provider,{context:l.context,preloadedState:l.preloadedState,container:i,fallback:a},r)}}catch(e){c.e(e)}finally{c.f()}return _.default.createElement(_.default.Fragment,null,r)},t.Provider=w,t.createReactModel=function(e){var t=_.default.createContext(null),n=function(n){var r,a=n.children,o=n.context,i=n.preloadedState,c=n.container,l=h.useMemo((function(){if(n.model)return n.model;var t={context:o,preloadedState:i,container:c};return g.createPureModel(e,t)}),[]),u=h.useMemo((function(){return{store:l.store,actions:l.actions}}),[l]),s=h.useState((function(){return l.isPreloaded()})),d=m(s,2),f=d[0],p=d[1];return b((function(){var e=!1;return l.isPreloaded()?l.isStarted()||l.start():l.preload().then((function(){e||(p(!0),l.start())})),function(){e=!0,l.isStarted()&&l.finish()}}),[]),f?_.default.createElement(t.Provider,{value:u},a):_.default.createElement(_.default.Fragment,null,null!==(r=n.fallback)&&void 0!==r?r:null)};return{isReactModel:!0,useState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.identity,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.shallowEqual,r=h.useContext(t);if(null===r)throw new Error("You may forget to attach Provider to component tree before calling Model.useState()");var a=r.store,o=h.useReducer((function(e){return e+1}),0),i=m(o,2),c=(i[0],i[1]),l=h.useRef(null),u=h.useRef(null),s=h.useRef(E),d=h.useRef(E),f=a.getState(),p=E;try{p=e!==u.current||f!==s.current||l.current?e(f):d.current}catch(e){throw l.current&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(l.current.stack,"\n\n")),e}if(b((function(){u.current=e,s.current=f,d.current=p,l.current=null})),b((function(){var e=!1,t=a.subscribe((function(){if(u.current&&!e){if(d.current===E)throw new Error("latestSelectedState should not be default value");try{var t=a.getState(),r=u.current(t);if(n(r,d.current))return;d.current=r,s.current=t}catch(e){l.current=e}c()}}));return function(){e=!0,t()}}),[a]),p===E)throw new Error("selectedState should not be default value");return p},useActions:function(){var e=h.useContext(t);if(null===e)throw new Error("You may forget to attach Provider to component tree before calling Model.useActions()");return e.actions},Provider:n,preload:function(){var t=p(f().mark((function t(r,a,o){var i,c,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=g.createPureModel(e,{context:r,preloadedState:a,container:o}),t.next=3,i.preload();case 3:return c=i.store.getState(),l=function(e){var t=e.children;return _.default.createElement(n,{model:i,context:r},t)},t.abrupt("return",{Provider:l,state:c,model:i});case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),create:e,initializer:e}},t.preload=S,t.provide=function(e){return function(t){return function(t){u(r,t);var n=s(r);function r(){var t;return a(this,r),(t=n.apply(this,arguments)).ReactModelArgs=I(e,i(t)),t}return o(r,[{key:"render",value:function(){return _.default.createElement(w,{list:this.ReactModelArgs},c(l(r.prototype),"render",this).call(this))}}]),r}(t)}},t.useReactModel=function(e,t){var n=h.useMemo((function(){return g.createPureModel(e.create,t)}),[]),r=h.useState((function(){return n.store.getState()})),a=m(r,2),o=a[0],i=a[1];return b((function(){var e=!1,r=n.store.subscribe((function(){i(n.store.getState())}));return n.isPreloaded()?n.isStarted()||n.start():n.preload().then((function(){e||n.start()})).catch(null==t?void 0:t.onError),function(){e=!0,r(),n.isStarted()&&n.finish()}}),[]),[o,n.actions]}},function(e,t,n){var r=n(99);function a(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var a=r(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(38);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(9).default,a=n(53);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PureModel=t.fetch=void 0;var d=n(6),f=s(n(104)),p=n(21),m=n(3);t.fetch=function(e,t){return i(void 0,void 0,void 0,(function(){var n,r;return c(this,(function(a){switch(a.label){case 0:return[4,d.request({url:e.toString(),method:null==t?void 0:t.method,header:null==t?void 0:t.headers,data:null==t?void 0:t.body,mode:null==t?void 0:t.mode,credentials:null==t?void 0:t.credentials,dataType:"text"})];case 1:return n=a.sent(),r=n.header,[2,{ok:n.statusCode>=200&&n.statusCode<300,status:n.statusCode,text:function(){return i(this,void 0,void 0,(function(){return c(this,(function(e){return[2,n.data]}))}))},json:function(){return i(this,void 0,void 0,(function(){return c(this,(function(e){return[2,JSON.parse(n.data)]}))}))},headers:{keys:function(){return Object.keys(n.header)},entries:function(){return Object.entries(n.header)},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}]}}))}))},t.PureModel=function(e){return function(n){var r,i;return i=function(e){function n(){var n,a,i=e.apply(this,u(arguments))||this;return i[r]=o(o({},i[m.MODEL_CONTEXT]),p.EnvContext.impl(o(o({},null===(a=null===(n=i[m.MODEL_CONTEXT])||void 0===n?void 0:n[p.EnvContext.id])||void 0===a?void 0:a.value),{fetch:t.fetch}))),i}return a(n,e),n}(f.default(e)(n)),r=m.MODEL_CONTEXT,i}}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),c=n(11),l=function(e,t){return Object.values(e).map((function(e){return{Model:e,context:t}}))};t.default=function(e){return function(t){return function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.ReactModelArgs=l(e,n),n}return a(n,t),n.prototype.render=function(){return i.default.createElement(c.Provider,{list:this.ReactModelArgs},t.prototype.render.call(this))},n}(t)}}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var c=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var s=0;s<u;++s){var d,f,p,m,v=e[s].replace(c,"%20"),h=v.indexOf(n);h>=0?(d=v.substr(0,h),f=v.substr(h+1)):(d=v,f=""),p=decodeURIComponent(d),m=decodeURIComponent(f),r(i,p)?a(i[p])?i[p].push(m):i[p]=[i[p],m]:i[p]=m}return i};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=n(9).default,a=function(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===r(e)?i(c(e),(function(r){var c=encodeURIComponent(a(r))+n;return o(e[r])?i(e[r],(function(e){return c+encodeURIComponent(a(e))})).join(t):c+encodeURIComponent(a(e[r]))})).join(t):l?encodeURIComponent(a(l))+n+encodeURIComponent(a(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(0)),u=n(3),s=c(n(19)),d=c(n(108));t.default=function(e){var t=(0,l.useMemo)((function(){var t;return(t={})[u.MODEL_CONTEXT]=r({},(0,d.default)(e)),t}),[]);return l.default.createElement(s.default.Provider,{context:t},e.children)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getScene=void 0;var a=n(3),o=n(59);t.getScene=function(e){var t="PRODUCT_QUERY";switch(e){case"vacations-grp":case"vacations-diy":case"vacations-visa":t="PRODUCT_QUERY";break;case"vacations-cru":t="SHIP_QUERY";break;case"ttd-act":case"ttd-gst":case"minilvgo":case"lvgoooo":t="PRODUCT_QUERY"}return t},t.default=function(e){return r(r({},a.EnvContext.impl({env:e.env,req:e.req,res:e.res,fetch:e.fetch,platform:e.platform})),o.CommentContext.impl({channel:e.channel,queryId:e.queryId,scene:e.scene||(0,t.getScene)(e.channel),cardNo:e.cardNo,cardType:e.cardType,titleTip:e.titleTip}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TopCard=void 0;var l=c(n(0)),u=c(n(19)),s=n(1),d=c(n(40)),f=c(n(110)),p=i(n(111)),m=c(n(112)),v=c(n(113));t.default=function(e){var t=u.default.useState((function(e){return e.commentAggregation})),n=!!t&&(null==t?void 0:t.totalCount)>0,a=(0,d.default)().isShowAiTags,o=e.overlayClassName,i=e.isFillet,c=e.isTPal,h=!!u.default.useState((function(e){var t;return(null===(t=null==e?void 0:e.comments)||void 0===t?void 0:t.length)?e.comments[0]:null}))||!!a,g={position:c?"relative":"static"};return n?l.default.createElement(s.View,{className:"com_entry_base com_entry_bg ".concat(o||""),style:i?r({borderRadius:8},g):g},c&&l.default.createElement(s.View,{className:"tpal_card_top"},l.default.createElement(s.View,{className:"tpal_header"},l.default.createElement(s.Text,{className:"tpal_header_text"},"\u70b9\u8bc4"),l.default.createElement(s.View,{style:"position: absolute; inset: 50px 0px 0px; background: linear-gradient(-180deg, rgb(232, 255, 250) -16.81%, rgba(255, 255, 255, 0) 65.02%);"}))),l.default.createElement(p.default,{isTPal:c,jump:e.jump}),h&&l.default.createElement(s.View,{className:"com_entry_body com_l_top"},l.default.createElement(m.default,{jump:e.jump}),l.default.createElement(v.default,{jump:e.jump}))):l.default.createElement(f.default,null)},t.TopCard=function(e){var t=u.default.useState((function(e){return e.commentAggregation})),n=!!t&&(null==t?void 0:t.totalCount)>0,r=e.isFillet,a=e.overlayClassName,o=(null==e?void 0:e.isTPal)||!1;return n?o?l.default.createElement(s.View,{className:"com_entry_base ".concat(a||"")},l.default.createElement(p.TitleForTPal,{jump:e.jump})):l.default.createElement(s.View,{className:"com_entry_base com_entry_bg ".concat(a||""),style:r?{borderRadius:8,position:"relative",zIndex:1,backgroundColor:"#fff"}:{position:"relative",zIndex:1,backgroundColor:"#fff"}},l.default.createElement(p.default,{jump:e.jump,isTopCard:!0})):o?l.default.createElement(s.View,{className:"tpal_error_bar"},l.default.createElement(s.Image,{className:"tpal_error_bar_icon",src:"https://dimg04.c-ctrip.com/images/0301512000ba3x7sm1086.png"}),l.default.createElement(s.Text,{className:"tpal_error_bar_text"},"\u671f\u5f85\u60a8\u51fa\u6e38\u540e\u7559\u4e0b\u5b9d\u8d35\u7684\u70b9\u8bc4")):l.default.createElement(s.View,{className:"com_error_bar"},l.default.createElement(s.Text,{className:"com_error_bar_text"},"\u671f\u5f85\u60a8\u51fa\u6e38\u540e\u7559\u4e0b\u5b9d\u8d35\u7684\u70b9\u8bc4"),l.default.createElement(s.Image,{className:"com_error_bar_icon",src:"https://dimg04.c-ctrip.com/images/0302p1200093czza9E932.png"}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1);t.default=function(){return a.default.createElement(o.View,{className:"com_entry_base com_entry_bg"},a.default.createElement(o.View,{className:"com_entry_tit_row"},a.default.createElement(o.View,{className:"tit_l"},a.default.createElement(o.Text,{className:"tit_text"},"\u8bc4\u4ef7"))),a.default.createElement(o.View,{className:"com_entry_body com_l_top"},a.default.createElement(o.View,{className:"com_no_comment"},a.default.createElement(o.View,{className:"img_wrap"}),a.default.createElement(o.Text,{className:"tip_text"},"\u5f53\u524d\u4ea7\u54c1\u6682\u65e0\u70b9\u8bc4\u4fe1\u606f"))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TitleForTPal=void 0;var u=o(n(0)),s=n(1),d=n(41),f=l(n(19));t.default=function(e){var t,n,r=f.default.useState((function(e){return e.props})),a=f.default.useState((function(e){return e.commentAggregation})),o=f.default.useState((function(e){return e.comments})),l=e.jump,p=e.isTopCard,m=e.isTPal;if(!a)return null;var v=a.totalCount,h=a.scoreAvg,g=a.goodRate,y=a.desc,_=a.aiTags,b=a.recommendReason,E=r.channel,w=r.titleTip,S=r.queryId,I=r.scene,T=r.cardNo,C=r.cardType,P=r.env,k="vacations-visa"===E,N=[(null===(n=null===(t=o[0])||void 0===t?void 0:t.userInfo)||void 0===n?void 0:n.avatarUrl)||"https://dimg04.c-ctrip.com/images/Z804180000013uqy3DB02.jpg","https://dimg04.c-ctrip.com/images/zc0h170000011fhu3CEE3.png","https://dimg04.c-ctrip.com/images/zc0e170000011go8z7956.png"],O=i((0,u.useState)([!1,!1,!1]),2),x=O[0],D=O[1],j=i((0,u.useState)(!1),2),M=j[0],A=j[1];(0,u.useLayoutEffect)((function(){A(!0)}),[]);var R=(0,u.useCallback)((function(){var e,t,n,r;if(b)return b;var a="";try{var o=null==_?void 0:_.filter((function(e){return"ai_1"===(null==e?void 0:e.tagCategory)})),i={};try{for(var l=c(o),u=l.next();!u.done;u=l.next()){var s=u.value,d=null===(r=null===(n=null==s?void 0:s.tagGroupId)||void 0===n?void 0:n.split("_"))||void 0===r?void 0:r[0];i[d]?i[d].push(s):i[d]=[s]}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}var f=Object.keys(i),p=[];[0,1,2].map((function(e){var t=[];f.map((function(n){i[n][e]&&t.push(i[n][e])})),t.sort((function(e,t){return t.totalCount-e.totalCount})),p=p.concat(t)})),p.length>3&&(p=p.slice(0,3)),p.map((function(e,t){a=a+(null==e?void 0:e.displayName)+"".concat(t===p.length-1?"":"\u3001")}))}catch(e){console.log(e)}return a}),[_,b]);return u.default.createElement(s.View,{className:"com_entry_tit_row",style:{position:"relative",zIndex:1},onClick:function(){var e=d.http[P]+"/webapp/vacations/order/public/comment_list",t={};t.channel=E,S&&(t.queryid=S),I&&(t.scene=I),T&&(t.cardNo=T),C&&(t.cardType=C),e=(0,d.parseUrl)(e,t),l(e)}},u.default.createElement(s.View,{className:"tit_l"},!p&&!m&&u.default.createElement(s.Text,{className:"tit_text"},"\u70b9\u8bc4"),p?u.default.createElement(s.Text,{className:"tit_score_wrap",style:{marginLeft:0}},u.default.createElement(s.Text,{className:"tit_score_num"},h),u.default.createElement(s.Text,{className:"tit_score_unit"},"\u5206 ",y)):u.default.createElement(s.Text,{className:"tit_score_wrap",style:m?{marginLeft:0}:{}},u.default.createElement(s.Text,{className:"tit_score_num",style:m?{color:"rgb(0, 255, 207)"}:{}},h),u.default.createElement(s.Text,{className:"tit_score_total"},"/5")),p&&(!!_&&(null==_?void 0:_.length)>0||!!b)&&u.default.createElement(s.View,{className:"tit_center"},u.default.createElement(s.Text,null,"\u201c"),u.default.createElement(s.Text,{className:"tit_score_tip"},R()),u.default.createElement(s.Text,null,"\u201d")),(!p||(!_||0===(null==_?void 0:_.length))&&!b)&&u.default.createElement(s.Text,{className:"tit_score_tip"},k?w:"\u597d\u8bc4\u7387"+(100*g).toFixed(1)+"%")),u.default.createElement(s.View,{className:"tit_r"},!p&&u.default.createElement(s.View,{className:"com_user_avatar_group"},v>=3&&N.map((function(e,t){var n=x[t]?"http://dimg04.c-ctrip.com/images/Z804180000013uqy3DB02.jpg":e;return u.default.createElement(s.View,{key:t,className:"com_user_avatar_group_item ".concat(t?"item_"+(t+1):"")},M&&u.default.createElement(s.Image,{className:"avatar_img",src:n,onError:function(){return function(e){var t=x.concat([]);t[e]=!0,D(t)}(t)}}))}))),u.default.createElement(s.View,{className:"link_text"},"".concat(v,"\u6761\u70b9\u8bc4"),u.default.createElement(s.Text,{className:"com_iconfont com_arr_r"}))))},t.TitleForTPal=function(e){var t,n,r=f.default.useState((function(e){return e.props})),a=f.default.useState((function(e){return e.commentAggregation})),o=f.default.useState((function(e){return e.comments})),l=e.jump;if(!a)return null;var p=a.totalCount,m=a.scoreAvg,v=a.goodRate,h=a.desc,g=a.aiTags,y=a.recommendReason,_=r.channel,b=r.titleTip,E=r.queryId,w=r.scene,S=r.cardNo,I=r.cardType,T=r.env,C="vacations-visa"===_,P=(null===(n=null===(t=o[0])||void 0===t?void 0:t.userInfo)||void 0===n||n.avatarUrl,i((0,u.useState)([!1,!1,!1]),2)),k=(P[0],P[1],i((0,u.useState)(!1),2)),N=(k[0],k[1]);(0,u.useLayoutEffect)((function(){N(!0)}),[]);var O=(0,u.useCallback)((function(){var e,t,n,r;if(y)return y;var a="";try{var o=null==g?void 0:g.filter((function(e){return"ai_1"===(null==e?void 0:e.tagCategory)})),i={};try{for(var l=c(o),u=l.next();!u.done;u=l.next()){var s=u.value,d=null===(r=null===(n=null==s?void 0:s.tagGroupId)||void 0===n?void 0:n.split("_"))||void 0===r?void 0:r[0];i[d]?i[d].push(s):i[d]=[s]}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}var f=Object.keys(i),p=[];[0,1,2].map((function(e){var t=[];f.map((function(n){i[n][e]&&t.push(i[n][e])})),t.sort((function(e,t){return t.totalCount-e.totalCount})),p=p.concat(t)})),p.length>3&&(p=p.slice(0,3)),p.map((function(e,t){a=a+(null==e?void 0:e.displayName)+"".concat(t===p.length-1?"":"\u3001")}))}catch(e){console.log(e)}return a}),[g,y]);return u.default.createElement(s.View,{className:"tpal_title_row",onClick:function(){var e=d.http[T]+"/webapp/vacations/order/public/comment_list",t={};t.channel=_,E&&(t.queryid=E),w&&(t.scene=w),S&&(t.cardNo=S),I&&(t.cardType=I),e=(0,d.parseUrl)(e,t),l(e)}},u.default.createElement(s.View,{className:"tit_l"},u.default.createElement(s.Text,{className:"tit_score_wrap"},u.default.createElement(s.Text,{className:"tit_score_num"},m),u.default.createElement(s.Text,{className:"tit_score_unit"},"\u5206 ",h)),(!!g&&(null==g?void 0:g.length)>0||!!y)&&u.default.createElement(s.View,{className:"tit_center"},u.default.createElement(s.Text,null,"\u201c"),u.default.createElement(s.Text,{className:"tit_score_tip"},O()),u.default.createElement(s.Text,null,"\u201d")),(!g||0===(null==g?void 0:g.length))&&!y&&u.default.createElement(s.Text,{className:"tit_score_tip"},C?b:"\u597d\u8bc4\u7387"+(100*v).toFixed(1)+"%")),u.default.createElement(s.View,{className:"tit_r"},u.default.createElement(s.View,{className:"link_text"},"".concat(p,"\u6761\u70b9\u8bc4"),u.default.createElement(s.Text,{className:"com_iconfont com_arr_r"}))))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1),i=r(n(19)),c=r(n(40)),l=n(41);function u(e){var t=e.data,n=e.jump,r=i.default.useState((function(e){return e.props})),c=i.default.useState((function(e){return e.props.env})),u=function(){var e=l.http[c]+"/webapp/vacations/order/public/comment_list",a=r.channel,o=r.queryId,i=r.scene,u=r.cardNo,s=r.cardType,d={};d.channel=a,d.selectTagName=t[0].tagName,o&&(d.queryid=o),i&&(d.scene=i),u&&(d.cardNo=u),s&&(d.cardType=s),e=(0,l.parseUrl)(e,d),n(e)};return t.length>1?a.default.createElement(o.View,{className:"com_filter_tag",onClick:u},a.default.createElement(o.Text,null,t[0].tagGroupName),a.default.createElement(o.View,{className:"com_filter_tag_oth"},a.default.createElement(o.Image,{src:"https://dimg04.c-ctrip.com/images/0305l120008bfo2dl6E49.png",style:{width:16,height:16}}),a.default.createElement(o.Text,null,t[0].totalCount)),a.default.createElement(o.View,{className:"com_filter_tag_oth"},a.default.createElement(o.Image,{src:"https://dimg04.c-ctrip.com/images/0306e120008bfo8al6373.png",style:{width:16,height:16}}),a.default.createElement(o.Text,null,t[1].totalCount))):a.default.createElement(o.View,{className:"com_filter_tag",onClick:u},a.default.createElement(o.Text,null,t[0].tagName,t[0].totalCount))}t.default=function(e){var t=i.default.useState((function(e){return e.commentAggregation})),n=(0,c.default)().isShowAiTags,r=e.jump,l=(null==t?void 0:t.aiTags)||[];if(!(null==l?void 0:l.length))return null;var s=[],d={};return l.forEach((function(e,t){d[null==e?void 0:e.tagGroupId]?s.forEach((function(t,n){t.id===e.tagGroupId&&(2===e.mood?s[n].data.push(e):1===e.mood&&s[n].data.unshift(e))})):(s.push({id:(null==e?void 0:e.tagGroupId)||"dest_"+t,data:[e]}),d[(null==e?void 0:e.tagGroupId)||"dest_"+t]=e)})),n?a.default.createElement(o.View,{className:"com_entry_tags"},a.default.createElement(o.ScrollView,{scrollX:!0,className:"tags_wrap"},a.default.createElement(o.View,{style:{flexDirection:"row",display:"flex"}},s.length>3?s.map((function(e,t){return t%2==0?a.default.createElement(u,{key:t,data:e.data,jump:r}):null})):s.map((function(e,t){return a.default.createElement(u,{key:t,data:e.data,jump:r})}))),a.default.createElement(o.View,{style:{flexDirection:"row",display:"flex"}},s.map((function(e,t){return t%2!=0?a.default.createElement(u,{key:t,data:e.data,jump:r}):null}))))):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(0)),u=n(1),s=c(n(19)),d=c(n(40)),f=n(41);t.default=function(e){var t,n,r,a,o=e.jump,c=s.default.useState((function(e){return e.props})),p=c.env,m=c.channel,v=c.queryId,h=c.scene,g=c.cardNo,y=c.cardType,_=s.default.useState((function(e){var t;return(null===(t=null==e?void 0:e.comments)||void 0===t?void 0:t.length)?e.comments[0]:null})),b=(0,d.default)(),E=b.isShowTourType,w=b.isShowPhoto;if(!_)return null;var S=(null===(t=_.userInfo)||void 0===t?void 0:t.avatarUrl)||"",I=(null===(n=null==_?void 0:_.userInfo)||void 0===n?void 0:n.displayName)||_.userId||"",T=(null===(r=_.userInfo)||void 0===r?void 0:r.curLevelCode)||0,C=_.score||0,P=function(e){return void 0===e&&(e=0),e<=5&&e>=4?"\u597d\u8bc4":e<4&&e>2?"\u4e2d\u8bc4":"\u5dee\u8bc4"}(C),k=function(e){if(!e)return null;var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();return"".concat(n,"-").concat(r,"-").concat(a)}(_.commentTime),N=(null===(a=_.tourTypeInfo)||void 0===a?void 0:a.tourTypeName)||"",O=_.content||"",x=function(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){var n={url:e.url,thumbnailURL:e.thumbUrl,imageType:e.attachmentType-1};1===e.attachmentType?t.push(n):t.unshift(n)})),t.filter((function(e,t){return t<4}))}(_.attachments||[]),D=i((0,l.useState)(!1),2),j=D[0],M=D[1],A=i((0,l.useState)(!1),2),R=A[0],V=A[1];return(0,l.useLayoutEffect)((function(){V(!0)}),[]),l.default.createElement(u.View,{className:"com_entry_detail com_l_top",onClick:function(){var e=f.http[p]+"/webapp/vacations/order/public/comment_list",t={};t.channel=m,v&&(t.queryid=v),h&&(t.scene=h),g&&(t.cardNo=g),y&&(t.cardType=y),e=(0,f.parseUrl)(e,t),o(e)}},l.default.createElement(u.View,{className:"com_detail_user_info"},l.default.createElement(u.View,{className:"user_avatar"},R&&l.default.createElement(u.Image,{src:j?"http://dimg04.c-ctrip.com/images/Z804180000013uqy3DB02.jpg":S,onError:function(){M(!0)}})),l.default.createElement(u.View,{className:"user_name_flex_box"},l.default.createElement(u.View,{className:"user_name"},l.default.createElement(u.Text,{className:"name_text"},I),l.default.createElement(u.View,{className:"com_member_tag"},l.default.createElement(u.Image,{src:"https://pic.c-ctrip.com/VacationOnlinePic/public_comment/common/app_m_".concat(T,".png"),className:"com_member_img",style:{width:"100%",height:"100%"},mode:"heightFix"})))),l.default.createElement(u.View,{className:"com_user_score_box"},l.default.createElement(u.View,{className:"com_user_score"},l.default.createElement(u.Text,{className:"com_star_icon star_".concat(parseInt(C.toString()))}),l.default.createElement(u.Text,null,"".concat(C.toFixed(1),"\u5206 ").concat(P))))),l.default.createElement(u.View,{className:"com_detail_date"},l.default.createElement(u.Text,{className:"date_text_l"},k,"\u53d1\u8868"),E&&!!N&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.View,{className:"date_text_divider"}),l.default.createElement(u.Text,{className:"date_text_l"},N))),l.default.createElement(u.View,{className:"com_detail_main_content two_line"},O),w&&l.default.createElement(u.View,{className:"com_pic_list com_entry_pic_list"},x.map((function(e,t){return l.default.createElement(u.View,{className:"com_pic_item_wrap",key:t},l.default.createElement(u.View,{className:"com_pic_item"},l.default.createElement(u.View,{className:"com_pic_item_inner"},l.default.createElement(u.Image,{className:"com_pic_img",src:e.thumbnailURL}),1===e.imageType&&l.default.createElement(u.View,{className:"com_pic_video_mask"},l.default.createElement(u.Text,{className:"com_iconfont com_icon_play"})))))}))))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(n(0)),l=i(n(19)),u=c.default.memo((function(e){var t=l.default.useActions(),n=(0,c.useRef)(!0);return(0,c.useEffect)((function(){n.current?n.current=!1:t.updateProps(e)})),null}));t.default=u},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.default={checkPageInfo:function(e){return e?e.contents&&e.contents.length?"":"contents \u4e0d\u80fd\u4e3a\u7a7a\uff01":"log \u4e0d\u80fd\u4e3a\u7a7a\uff01"},checkMessage:function(e){return e?"":"log \u4e0d\u80fd\u4e3a\u7a7a\uff01"},checkActionInfo:function(e){return e?e.action&&!Object.values(r.ActionType).includes(e.action)?"action \u679a\u4e3e\u7c7b\u578b\u9519\u8bef\uff01":e.action&&!(e.value||e.contents&&e.contents.length)?"action \u8bbe\u7f6e\u540e value \u6216 contents \u4e0d\u80fd\u4e3a\u7a7a\uff01":e.role&&!Object.values(r.RoleType).includes(e.role)?"role \u679a\u4e3e\u7c7b\u578b\u9519\u8bef\uff01":"":"log \u4e0d\u80fd\u4e3a\u7a7a\uff01"},checkError:function(e){return e?e.pageName?e.message?"":"message \u4e0d\u80fd\u4e3a\u7a7a\uff01":"pageName \u4e0d\u80fd\u4e3a\u7a7a\uff01":"log \u4e0d\u80fd\u4e3a\u7a7a\uff01"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);function a(e){var t={attrs:e.attrs,scene:e.scene,module:e.module,action:"",key:e.key,value:e.value,before:e.before,desc:e.desc,contents:e.contents,jsonData:e.jsonData,rootMessageId:e.rootMessageId};return e.role||(e.role=r.RoleType.sys),e.action?t.action=e.role+"_"+e.action:t.action=e.role,t}t.default={pageInfo:function(e){return{contents:e.contents,action:"sys_pageinfo",attrs:e.attrs,desc:e.desc||"\u57fa\u672c\u4fe1\u606f"}},message:function(e){return a({scene:e})},actionInfo:function(e){return a(e)},error:function(e){var t="Error";return e.errorType&&Object.values(r.ErrorType).includes(e.errorType)&&(t=e.errorType),{category:"km_"+e.pageName+"_"+t,message:e.message,ex:e.ex}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={exception:function(e,t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("\ud83d\udc80\ud83d\udc80\ud83d\udc80[Devhub-Trace Fatal"+e+"]",t)},warn:function(e,t){t||(t="Unknown Exception"),"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("\u2757\ufe0f\u2757\ufe0f\u2757\ufe0f[Devhub-Trace Warning "+e+"]",t)},error:function(e,t){console&&"function"==typeof console.error&&console.error("\ud83d\udca3\ud83d\udca3\ud83d\udca3[Devhub-Trace Error"+e+"]",t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(24);t.default=function(e,t){return{sendDevTrace:function(n){!function(e){if(!e)throw Error("Please new DevhubTrace with valid config");if(!Object.values(a.PlatformType).includes(e.platform))throw Error("Please setup platform in Config");if(!e.ubtKey)throw Error("Please setup ubtKey in Config")}(e),e.platform==a.PlatformType.web?function(e,t){var n=JSON.stringify(e);if("undefined"==typeof r)throw Error("window is not defined, please check platform in Config");r.__bfi=r.__bfi||[],r.__bfi.push(["_devTrace",t.ubtKey,n])}(n,e):e.platform==a.PlatformType.crn?function(e,t,n){if(void 0===n||"function"!=typeof n.logDevTrace)throw Error("Log.logDevTrace is not defined, please new DevhubTrace with @ctrip/crn.Log");var r={data:JSON.stringify(e)};t.targetPageRef&&(r.targetPageRef=t.targetPageRef),n.logDevTrace(t.ubtKey,r)}(n,e,t):e.platform==a.PlatformType.taro&&function(e,t,n){if(void 0===n||"function"!=typeof n.ubtDevTrace)throw Error("this.ubtDevTrace is not defined, please new DevhubTrace with taroBase.ubtDevTrace");var r=JSON.stringify(e);n.ubtDevTrace(t.ubtKey,{data:r})}(n,e,t)},sendError:function(n){!function(e){if(!e)throw Error("Please new DevhubTrace with valid config");if(!Object.values(a.PlatformType).includes(e.platform))throw Error("Please setup platform in Config");if(!e.ubtKey)throw Error("Please setup ubtKey in Config");if(!e.organizationId)throw Error("Please setup organizationId in Config")}(e),e.platform==a.PlatformType.web?function(e,t){if("undefined"==typeof r)throw Error("window is not defined, please check platform in Config");var n="";if(e.ex){var a=e.ex,o=a.stack,i=a.message,c=a.name;n=o||i||c}var l={version:11,organizationId:t,category:e.category,message:e.message,stack:n,appVer:"web"};r.__bfi=r.__bfi||[],r.__bfi.push(["_trackError",l])}(n,e.organizationId||"51"):e.platform==a.PlatformType.crn?function(e,t,n){if(void 0===n||"function"!=typeof n.logError)throw Error("Log.logError is not defined, new DevhubTrace with @ctrip/crn.Log");var r="";if(e.ex){var a=e.ex,o=a.stack,i=a.message,c=a.name;r=o||i||c}n.logError(e.category,e.message,t,{stack:r})}(n,e.organizationId||"51",t):e.platform==a.PlatformType.taro&&function(e,t,n){if(void 0===n||"function"!=typeof n.ubtTrackError)throw Error("this.ubtTrackError is not defined, new DevhubTrace with with taroBase.ubtTrackError");var r="";if(e.ex){var a=e.ex,o=a.stack,i=a.message,c=a.name;r=o||i||c}var l={version:15,organizationId:t,category:e.category,message:e.message,stack:r,appVer:"weixin"};n.ubtTrackError(l)}(n,e.organizationId||"51",t)}}}},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},i=this,c=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCrossCouponList=t.fetchClaimCouponList=t.fetchUseCouponList=void 0,n(121)),l=n(28),u=n(46);try{var s=n(10),d=s&&s.cwx}catch(e){console.log("%c "+e,"color:red;")}var f=function(e){try{d&&d.sendUbtByPage.ubtTrace(e.key,e.value)}catch(e){}},p=(t.fetchUseCouponList=function(e){return a(i,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,c.couponApi.fetchUseCouponList(r(r({},e),{logTrace:f,fetch:l.miniRequest,auth:d&&d.user.auth||l.getAuth(),version:l.COMPONENT_VERSION,componentType:u.ComponentTypeEnum.Taro,clientEnv:u.ClientEnum.MiniProgram,miniType:l.mapEnvToMiniType()}))];case 1:return[2,t.sent()]}}))}))},function(e){return a(i,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,c.couponApi.fetchClaimCouponList(r(r({},e),{logTrace:f,fetch:l.miniRequest,auth:d&&d.user.auth||l.getAuth(),version:l.COMPONENT_VERSION,componentType:u.ComponentTypeEnum.Taro,clientEnv:u.ClientEnum.MiniProgram}))];case 1:return[2,t.sent()]}}))}))}),m=(t.fetchClaimCouponList=p,function(e){return a(i,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,c.couponApi.fetchCrossCouponList(r(r({},e),{logTrace:f,fetch:l.miniRequest,auth:d&&d.user.auth||l.getAuth(),version:l.COMPONENT_VERSION,componentType:u.ComponentTypeEnum.Taro,clientType:u.ClientEnum.MiniProgram}))];case 1:return[2,t.sent()]}}))}))});t.fetchCrossCouponList=m},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.commonApi=t.couponApi=void 0,o(n(122))),c=(t.couponApi=i,o(n(148)));t.commonApi=c},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCrossCouponList=t.claimCoupon=t.fetchClaimCouponList=t.fetchUseCouponList=void 0,n(20)),c=n(43),l=n(137),u=o(n(47)),s=n(45),d=n(25),f=(t.fetchUseCouponList=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){switch(a.label){case 0:t=e.bookingInfo.shoppingId,n={baseInfo:{channelId:e.saleChannel,allianceId:e.allianceId,siteId:e.siteId,clientId:e.clientId,source:e.source,utcOffset:s.getTimeZone().offset,locale:e.locale,currency:e.currency,requestScene:i.CouponRequestSceneEnum.OrderUse,version:e.version,componentType:e.componentType,miniType:e.miniType},bookingInfo:e.bookingInfo,isFirstValidate:!1,query4Shopping:!!t,extendInfoList:e.extendInfoList},n={query:l.Coupon.UseCoupon,env:e.env,client:e.clientEnv,queryName:d.CONST.QUERY_NAME.USE_COUPON,fetch:e.fetch,variables:n,logTrace:e.logTrace,auth:e.auth,ctType:e.ctType||i.CTEnum.CTRIP,cid:e.clientId},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.post(n)];case 2:return o=a.sent()||{},r=o.useCouponList,o=o.useCouponList4Shopping,[2,t?o&&o.list?o.list:[]:r&&r.list?r.list:[]];case 3:return o=a.sent(),console.error(o),[2,[]];case 4:return[2]}}))}))},function(e,t,n){return{channelId:e.saleChannel,allianceId:e.allianceId,siteId:e.siteId,clientId:e.clientId,source:e.source,utcOffset:s.getTimeZone().offset,locale:e.locale,currency:e.currency,uid:t?e.uid:"",rmsToken:e.rmsToken,requestScene:i.CouponRequestSceneEnum.DetailClaim,version:n,componentType:e.componentType}}),p=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,l;return a(this,(function(a){switch(a.label){case 0:t=void 0===(t=e.isShowClaimedModule)||t,a.label=1;case 1:if(a.trys.push([1,3,,4]),o=l=void 0,0<e.productId)l=e.productId,o=i.RelationTypeEnum.PRODUCTID;else if(0<e.scenicSpotId)l=e.scenicSpotId,o=i.RelationTypeEnum.SCENICSPOTID;else{if(!(0<e.poiId))throw new Error("Params Error\uff0cproductId\u3001scenicSpotId\u3001poiId Need One Or More");l=e.poiId,o=i.RelationTypeEnum.POIID}return n=[i.SaleChannel2Enum.Offline,i.SaleChannel3Enum.Offline].includes(e.saleChannel),r={baseInfo:r=f(e,n,e.version),relationDetail:{relationType:o,relationId:l},receivePromotionType:e.receivePromotionType,shownewuserpromo:!0,filterType:t?1:2},o={query:u.default,env:e.env,client:e.clientEnv,queryName:d.CONST.QUERY_NAME.RECEIVE_PROMOTION,fetch:e.fetch,variables:r,logTrace:e.logTrace,isOffline:n,ctType:e.ctType||i.CTEnum.CTRIP,auth:e.auth,cid:e.clientId},[4,c.post(o)];case 2:return[2,(null==(l=(a.sent()||{}).receivePromotionData)?void 0:l.list)||[]];case 3:return a.sent(),[2,[]];case 4:return[2]}}))}))},m=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(a){switch(a.label){case 0:t=void 0===(t=e.isShowClaimedModule)||t,a.label=1;case 1:if(a.trys.push([1,3,,4]),!t)return[2,[]];if(e.productId)return r=[i.SaleChannel2Enum.Offline,i.SaleChannel3Enum.Offline].includes(e.saleChannel),n={baseInfo:n=f(e,r,e.version),productIDList:[e.productId],filterType:1},n={query:l.Coupon.GetPromotionTag,env:e.env,client:e.clientEnv,queryName:d.CONST.QUERY_NAME.PROMOTION_TAG,fetch:e.fetch,variables:n,logTrace:e.logTrace,isOffline:r,ctType:e.ctType||i.CTEnum.CTRIP,auth:e.auth,cid:e.clientId},[4,c.post(n)];throw new Error("productId can't be null if needUseableList !");case 2:return[2,(null==(r=(a.sent()||{}).promotionTagData)?void 0:r.list)||[]];case 3:return a.sent(),[2,[]];case 4:return[2]}}))}))},v=(t.fetchClaimCouponList=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),"needUseableList"in e&&!("isShowClaimedModule"in e)&&(console.warn("the argument needUseableList has been deprecated , please replace it with isShowClaimedModule. It means whether to display the coupon module which has been claimed or not."),e.isShowClaimedModule=e.needUseableList),[4,p(e)];case 1:return t=a.sent(),[4,m(e)];case 2:return n=a.sent(),n={claimList:t,useableList:n},r=s.BusinessUtil.getLoadDataChunk(n),[2,Object.assign({},r,{claimCouponList:n})];case 3:return a.sent(),[2,{availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[],claimCouponList:{claimList:[],useableList:[]}}];case 4:return[2]}}))}))},function(e){var t;return r(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n={baseInfo:{channelId:e.saleChannel,clientId:e.clientId,utcOffset:s.getTimeZone().offset,locale:e.locale,currency:e.currency,rmsToken:e.rmsToken,requestScene:i.CouponRequestSceneEnum.CrossCoupon,version:e.version,componentType:e.componentType}},e.orderId?n.businessId=e.orderId:e.sceneParam&&(n.sceneParam={sceneCode:null==(t=e.sceneParam)?void 0:t.sceneCode,filterList:null==(t=e.sceneParam)?void 0:t.filters,shownewuserpromo:null==(t=e.sceneParam)?void 0:t.shownewuserpromo}),n={query:l.Coupon.GetCrossCouponList,env:e.env,client:e.clientType,queryName:d.CONST.QUERY_NAME.CROSS_COUPON,fetch:e.fetch,variables:n,logTrace:e.logTrace,ctType:e.ctType||i.CTEnum.CTRIP,cid:e.clientId},[4,c.post(n)];case 1:return n=(r.sent()||{}).crossCouponData,[2,((null==n?void 0:n.list)||[]).map((function(e){return{promotionId:e.promotionId,displayName:e.displayName,couponCode:e.couponCode,couponStartDate:e.couponStartDate,couponDisableDate:e.couponDisableDate,promotionLabel:e.promotionLabel}}))];case 2:return r.sent(),[2,{availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[],claimCouponList:{claimList:[],useableList:[]}}];case 3:return[2]}}))}))}),h=(t.fetchCrossCouponList=v,function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,u,s;return a(this,(function(a){switch(a.label){case 0:o=[i.SaleChannel2Enum.Offline,i.SaleChannel3Enum.Offline].includes(e.saleChannel),r={baseInfo:r=f(e,o,e.version),promotionSecretIds:[].concat(e.promotionSecretIds||[])},r={query:l.Coupon.ClaimCoupon,env:e.env,client:e.clientEnv,queryName:d.CONST.QUERY_NAME.CLAIM,fetch:e.fetch,variables:r,logTrace:e.logTrace,isOffline:o,ctType:e.ctType||i.CTEnum.CTRIP,auth:e.auth,cid:e.clientId},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.post(r)];case 2:return o=(a.sent()||{}).claimCoupon,s=o.claimResultList[0]||{},o&&o.__typename==d.CONST.BFF_ERROR_TYPE&&o.code==d.CONST.BFF_RESPONSECODE.AUTH_FAILURE?(u={code:o.code,message:o.message},n&&n(u),[2]):(u={success:s.success,code:s.code,message:s.message},s.success?t&&t():n&&n(u),[2,{success:s.success,code:s.code,message:s.message}]);case 3:return s=a.sent(),n&&n(s),[2,{}];case 4:return[2]}}))}))});t.claimCoupon=h},function(e,t,n){var r,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.RelationTypeEnum=t.PromotionStatusEnum=t.SelectedByEnum=t.UseStatusEnum=void 0,o(n(124),t),(r=t.UseStatusEnum||(t.UseStatusEnum={}))[r.Use=1]="Use",r[r.NotUse=2]="NotUse",r[r.NotAvailable=3]="NotAvailable",function(e){e[e.Default=1]="Default",e[e.UserSelect=2]="UserSelect",e[e.UserInput=3]="UserInput"}(t.SelectedByEnum||(t.SelectedByEnum={})),function(e){e.AVAILABlE_CLAIM_LIST="availableClaimList",e.AVAILABLE_USE_LIST="availableUseList",e.RECEIVED_NOUSE_LIST="receivedNouseList",e.ROBBED_LIST="robbedList",e.EXPIRED_LIST="expiredList",e.NOT_STARTED="notStartedList",e.SINGKEK_LIST="singkekList"}(t.PromotionStatusEnum||(t.PromotionStatusEnum={})),function(e){e.PRODUCTID="PRODUCTID",e.VENDORID="VENDORID",e.SCENICSPOTID="SCENICSPOTID",e.POIID="POIID"}(t.RelationTypeEnum||(t.RelationTypeEnum={}))},function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CrossSceneEnum=void 0,(n=t.CrossSceneEnum||(t.CrossSceneEnum={}))[n.BeforeBooking=0]="BeforeBooking",n[n.AfterBooking=1]="AfterBooking"},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.useUpdateEffect=t.useDeepEffect=void 0,n(0)),o=r(n(126));t.useDeepEffect=function(e,t){var n=a.useRef(t),r=a.useRef(!0);a.useEffect((function(){var a=n.current.every((function(e,n){return o.default(e,t[n])}));!r.current&&a||(e(),n.current=t),r.current=!1}),t)},t.useUpdateEffect=function(e,t){var n=a.useRef(!1);a.useEffect((function(){if(n.current)return e();n.current=!0}),t)}},function(e,t,n){(function(e,r){var a=n(9).default;Object.defineProperty(t,"__esModule",{value:!0});var o="[object Arguments]",i="[object Map]",c="[object Object]",l="[object Set]",u=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,d={},f=(d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[o]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[i]=d["[object Number]"]=d[c]=d["[object RegExp]"]=d[l]=d["[object String]"]=d["[object WeakMap]"]=!1,"object"==(void 0===e?"undefined":a(e))&&e&&e.Object===Object&&e),p="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,m=f||p||Function("return this")(),v="object"==a(t)&&t&&!t.nodeType&&t,h=v&&"object"==a(r)&&r&&!r.nodeType&&r,g=h&&h.exports===v,y=g&&f.process,_=function(){try{return y&&y.binding&&y.binding("util")}catch(e){}}(),b=_&&_.isTypedArray;function E(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function w(e,t){return e.has(t)}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function I(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var T,C,P,k=Array.prototype,N=Function.prototype,O=Object.prototype,x=m["__core-js_shared__"],D=N.toString,j=O.hasOwnProperty,M=(P=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",A=O.toString,R=RegExp("^"+D.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=g?m.Buffer:void 0,L=m.Symbol,B=m.Uint8Array,F=O.propertyIsEnumerable,U=k.splice,H=L?L.toStringTag:void 0,q=Object.getOwnPropertySymbols,Y=V?V.isBuffer:void 0,G=(T=Object.keys,C=Object,function(e){return T(C(e))}),Z=be(m,"DataView"),$=be(m,"Map"),z=be(m,"Promise"),K=be(m,"Set"),W=be(m,"WeakMap"),X=be(Object,"create"),J=Ce(Z),Q=Ce($),ee=Ce(z),te=Ce(K),ne=Ce(W),re=L?L.prototype:void 0,ae=re?re.valueOf:void 0;function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function le(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ce;++t<n;)this.add(e[t])}function ue(e){e=this.__data__=new ie(e),this.size=e.size}function se(e,t){var n,r=Ne(e),a=!r&&ke(e),o=!r&&!a&&Oe(e),i=!r&&!a&&!o&&Ae(e),c=r||a||o||i,l=c?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(n in e)!t&&!j.call(e,n)||c&&("length"==n||o&&("offset"==n||"parent"==n)||i&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Ie(n,u))||l.push(n);return l}function de(e,t){for(var n=e.length;n--;)if(Pe(e[n][0],t))return n;return-1}function fe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(H&&H in Object(e)?Ee:Te)(e)}function pe(e){return Me(e)&&fe(e)==o}function me(e,t,n,r,a){return e===t||(null==e||null==t||!Me(e)&&!Me(t)?e!=e&&t!=t:function(e,t,n,r,a,u){var s=Ne(e),d=Ne(t),f=s?"[object Array]":Se(e),p=(d=d?"[object Array]":Se(t),(f=f==o?c:f)==c),m=(d=d==o?c:d)==c;if((d=f==d)&&Oe(e)){if(!Oe(t))return!1;p=!(s=!0)}return d&&!p?(u=u||new ue,s||Ae(e)?ge(e,t,n,r,a,u):function(e,t,n,r,a,o,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new B(e),new B(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var u=S;case l:if(u=u||I,e.size!=t.size&&!(1&r))return!1;var s=c.get(e);return s?s==t:(r|=2,c.set(e,t),s=ge(u(e),u(t),r,a,o,c),c.delete(e),s);case"[object Symbol]":if(ae)return ae.call(e)==ae.call(t)}return!1}(e,t,f,n,r,a,u)):1&n||(s=p&&j.call(e,"__wrapped__"),f=m&&j.call(t,"__wrapped__"),!s&&!f)?d&&function(e,t,n,r,a,o){var i=1&n,c=ye(e),l=c.length;if(l!=ye(t).length&&!i)return!1;for(var u=l;u--;){var s=c[u];if(!(i?s in t:j.call(t,s)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;for(var f,p=!0,m=(o.set(e,t),o.set(t,e),i);++u<l;){var v,h=e[s=c[u]],g=t[s];if(!(void 0===(v=r?i?r(g,h,s,t,e,o):r(h,g,s,e,t,o):v)?h===g||a(h,g,n,r,o):v)){p=!1;break}m=m||"constructor"==s}return p&&!m&&(d=e.constructor)!=(f=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof f&&f instanceof f)&&(p=!1),o.delete(e),o.delete(t),p}(e,t,n,r,a,u=u||new ue):a(s?e.value():e,f?t.value():t,n,r,u=u||new ue)}(e,t,n,r,me,a))}function ve(e){return!(!je(e)||function(e){return!!M&&M in e}(e))&&(xe(e)?R:u).test(Ce(e))}function he(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}(e))return G(e);var t,n=[];for(t in Object(e))j.call(e,t)&&"constructor"!=t&&n.push(t);return n}function ge(e,t,n,r,a,o){var i=1&n,c=e.length,l=t.length;if(c!=l&&!(i&&c<l))return!1;if((l=o.get(e))&&o.get(t))return l==t;var u=-1,s=!0,d=2&n?new le:void 0;for(o.set(e,t),o.set(t,e);++u<c;){var f,p=e[u],m=t[u];if(void 0!==(f=r?i?r(m,p,u,t,e,o):r(p,m,u,e,t,o):f)){if(f)continue;s=!1;break}if(d){if(!E(t,(function(e,t){if(!w(d,t)&&(p===e||a(p,e,n,r,o)))return d.push(t)}))){s=!1;break}}else if(p!==m&&!a(p,m,n,r,o)){s=!1;break}}return o.delete(e),o.delete(t),s}function ye(e){return function(e,t,n){return t=t(e),Ne(e)?t:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(t,n(e))}(e,Re,we)}function _e(e,t){return e=e.__data__,function(e){var t=a(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?e["string"==typeof t?"string":"hash"]:e.map}function be(e,t){return ve(e=function(e,t){return null==e?void 0:e[t]}(e,t))?e:void 0}function Ee(e){var t=j.call(e,H),n=e[H];try{var r=!(e[H]=void 0)}catch(e){}var a=A.call(e);return r&&(t?e[H]=n:delete e[H]),a}oe.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},oe.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},oe.prototype.get=function(e){var t,n=this.__data__;return X?"__lodash_hash_undefined__"===(t=n[e])?void 0:t:j.call(n,e)?n[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:j.call(t,e)},oe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[],this.size=0},ie.prototype.delete=function(e){var t=this.__data__;return!((e=de(t,e))<0||(e==t.length-1?t.pop():U.call(t,e,1),--this.size,0))},ie.prototype.get=function(e){var t=this.__data__;return(e=de(t,e))<0?void 0:t[e][1]},ie.prototype.has=function(e){return-1<de(this.__data__,e)},ie.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ce.prototype.clear=function(){this.size=0,this.__data__={hash:new oe,map:new($||ie),string:new oe}},ce.prototype.delete=function(e){return e=_e(this,e).delete(e),this.size-=e?1:0,e},ce.prototype.get=function(e){return _e(this,e).get(e)},ce.prototype.has=function(e){return _e(this,e).has(e)},ce.prototype.set=function(e,t){var n=_e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},le.prototype.add=le.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},le.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.clear=function(){this.__data__=new ie,this.size=0},ue.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},ue.prototype.get=function(e){return this.__data__.get(e)},ue.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!$||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ce(r)}return n.set(e,t),this.size=n.size,this};var we=q?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}(q(e),(function(t){return F.call(e,t)})))}:function(){return[]},Se=fe;function Ie(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||s.test(e))&&-1<e&&e%1==0&&e<t}function Te(e){return A.call(e)}function Ce(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Pe(e,t){return e===t||e!=e&&t!=t}(Z&&"[object DataView]"!=Se(new Z(new ArrayBuffer(1)))||$&&Se(new $)!=i||z&&"[object Promise]"!=Se(z.resolve())||K&&Se(new K)!=l||W&&"[object WeakMap]"!=Se(new W))&&(Se=function(e){var t=fe(e);if(e=(e=t==c?e.constructor:void 0)?Ce(e):"")switch(e){case J:return"[object DataView]";case Q:return i;case ee:return"[object Promise]";case te:return l;case ne:return"[object WeakMap]"}return t});var ke=pe(function(){return arguments}())?pe:function(e){return Me(e)&&j.call(e,"callee")&&!F.call(e,"callee")},Ne=Array.isArray,Oe=Y||function(){return!1};function xe(e){return!!je(e)&&("[object Function]"==(e=fe(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function De(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}function je(e){var t=a(e);return null!=e&&("object"==t||"function"==t)}function Me(e){return null!=e&&"object"==a(e)}var Ae=b?function(e){return function(t){return e(t)}}(b):function(e){return Me(e)&&De(e.length)&&!!d[fe(e)]};function Re(e){return(function(e){return null!=e&&De(e.length)&&!xe(e)}(e)?se:he)(e)}t.default=function(e,t){return me(e,t)}}).call(this,n(27),n(127)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMillisecondsToZero=t.setTimeTask4TimingCoupon=t.getLoadDataChunk=void 0,t.getLoadDataChunk=function(e){var t={availableClaimList:[],availableUseList:[],receivedNouseList:[],robbedList:[],expiredList:[],notStartedList:[],singkekList:[]};function n(e){return{promotionId:e.promotionId,promotionSecretId:e.promotionSecretId,couponCode:e.couponCode,couponName:e.couponName,deductionStrategyType:e.deductionStrategyType,deductionList:e.deductionList,deductionAmount:e.deductionAmount,matchedQuantity:e.matchedQuantity,promotionLabel:e.promotionLabel,extendInfo:e.extendInfo}}function r(e){switch(e.promotionStatus){case 1:t.availableClaimList.push(n(e));break;case 2:t.availableUseList.push(n(e));break;case 3:t.receivedNouseList.push(n(e));break;case 4:t.robbedList.push(n(e));break;case 5:t.expiredList.push(n(e));break;case 6:t.notStartedList.push(n(e));break;case 7:t.singkekList.push(n(e))}}return(e.claimList||[]).forEach((function(e){r(e)})),(e.useableList||[]).forEach((function(e){e.status?e.promotionStatus=2:e.promotionStatus=3,r(e)})),t},t.setTimeTask4TimingCoupon=function(e,t,n,r,a){var o;return(t-=e)<=0?(n(),null):(e=void 0,e=3e3<t?(t-=3e3,o=r,"task2"):(o=n,"task1"),"function"==typeof console.group&&console.group(a||"mainKey"),console.log("%cNext task execution function\uff1a","color:#8000FF",e),console.log("%cNext task execution time\uff08ms\uff09\uff1a","color:#8000FF",t),"function"==typeof console.groupEnd&&console.groupEnd(),setTimeout((function(){o()}),t))},t.getMillisecondsToZero=function(e){return 1e3*(60*(60*(24-(e=new Date(e)).getHours())-e.getMinutes())-e.getSeconds())-e.getMilliseconds()}},function(e,t,n){var r,a,o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.formatShark=void 0,n(63));t.formatShark=function(e,t){if(null==e||""===e)return"";if(!i.isEmpty(t))if(Array.isArray(t))for(var n=0;n<t.length;n++)e=e.replace(new RegExp(String.raw(r=r||o(["$(",")"],["\\$\\(","\\)"]),n),"g"),t[n]);else if(i.isObject(t))for(var c in t)e=e.replace(new RegExp(String.raw(a=a||o(["$(",")"],["\\$\\(","\\)"]),c),"g"),t[c]||"");return e}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.device_Width=null,this.device_Height=null,this.device_Height=e.deviceHeight,this.device_Width=e.deviceWidth,this.inNotchIphone=this.inNotchIphone.bind(this),this.getHeaderHeight=this.getHeaderHeight.bind(this)}return e.prototype.inNotchIphone=function(){var e=this;try{return!!this.inIOSDevice()&&[[375,812],[390,844],[414,896],[428,926]].some((function(t){return t[0]===e.device_Width&&t[1]===e.device_Height}))}catch(e){return!1}},e.prototype.getHeaderHeight=function(){try{var e=22;return this.inNotchIphone()?44:e}catch(e){return console.error("getHeaderHeight error. ",e),0}},e}();t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){console.log(" constructor inertia instance. "),this.ele=e;var n,r={edge:!0,isIOSApp:!1},a={};for(n in t=t||{},r)void 0!==t[n]?a[n]=t[n]:a[n]=r[n];this.config=a}return e.prototype.init=function(){var e,t,n,a=this,c={distanceX:0,distanceY:0},l=r.innerWidth,u=r.innerHeight;this.ele&&(e=a.config.isIOSApp?64:44,t=function(e,t){e=Math.round(1e3*e)/1e3,t=Math.round(1e3*t)/1e3,a.ele.style.webkitTransform="translate("+e+"px, "+t+"px)",a.ele.style.transform="translate3d("+e+"px, "+t+"px, 0)",a.ele.distanceX=e,a.ele.distanceY=t},a.ele.style.visibility="visible",((n=a.ele.getBoundingClientRect()).left<-.5*n.width||n.top<-.5*n.height||n.right>l+.5*n.width||n.bottom>u+.5*n.height)&&t(0,0),a.ele.addEventListener("touchstart",(function(e){a.ele.style.webkitTransition="",a.ele.style.transition="",e=e.touches[0]||e,c.posX=e.pageX,c.posY=e.pageY,c.touching=!0,isNaN(a.ele.distanceX)||(c.distanceX=a.ele.distanceX),isNaN(a.ele.distanceY)||(c.distanceY=a.ele.distanceY),c.bound=a.ele.getBoundingClientRect(),c.timerready=!0})),o.addEventListener("touchmove",(function(n){var r,a,o,i,s;!0===c.touching&&(1==c.timerready&&(c.timerstart=+new Date,c.timerready=!1),n.preventDefault(),n=n.touches[0]||n,c.nowX=n.pageX,c.nowY=n.pageY,a=c.bound.left+(n=c.nowX-c.posX),o=c.bound.top+(r=c.nowY-c.posY),i=a+c.bound.width,s=o+c.bound.height,a<0&&(n-=a),o<e&&(r-=o-e),l<i&&(n-=i-l),u<s&&(r-=s-u),t(c.distanceX+n,c.distanceY+r))}),{passive:!1}),o.addEventListener("touchend",(function(){var n,r,o,s,d,f,p,m;!1!==c.touching&&(c.touching=!1,c.timerend=+new Date,c.nowX)&&c.nowY&&(n=c.nowX-c.posX,r=c.nowY-c.posY,Math.abs(n)<5&&Math.abs(r)<5||(o=Math.sqrt(n*n+r*r),s=o/(c.timerend-c.timerstart)*16.666,d=Math.min(10,s),c.inertiaing=!0,p=f=.8,(m=function(){if(1==c.touching)c.inertiaing=!1;else{var v=f*(s-=s/d)*n/o,h=p*s*r/o,g=a.ele.getBoundingClientRect();if(v<0&&g.left+v<0?(v=0-g.left,f=.1):0<v&&g.right+v>l&&(v=l-g.right,f=.1),h<0&&g.top+h<e?(h=-1*(g.top-e),p=.1):0<h&&g.bottom+h>u&&(h=u-g.bottom,p=.1),g=a.ele.distanceX+v,v=a.ele.distanceY+h,t(g,v),s<.1)if((s=0)==a.config.edge)c.inertiaing=!1;else{var y=function(e,t){1!=c.touching?(a.ele.style.webkitTransition="all .5s ease",a.ele.style.transition="all .5s ease",a.ele.style.webkitTransform="translate("+e+"px, "+t+"px)",a.ele.style.transform="translate3d("+e+"px, "+t+"px, 0)",a.ele.distanceX=e,a.ele.distanceY=t,c.inertiaing=!1):c.inertiaing=!1},_=(g=(h=a.ele.getBoundingClientRect()).left+h.width/2,v=l-g-h.width/2,h.top+h.height/2),b=u-_-h.height/2;if((v=Math.min(g,v,_,b))===_){var E=-(l-h.right),w=-(u-137);y(E,w)}else v===b?y(E=-(l-h.right),w=60):y(E=v===g?-(l-61):0,w=-(u-60-h.bottom))}else i(m)}})()))})))},e}();t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={TITLE:"key.couponcenter.receivedetailspage.title",USECODELIST_TITLE:"key.couponcenter.usecodelist.title",PROMOTIONCODE_PLACEHOLDER:"key.couponcenter.usecodelist.promocode_placeholder",USECODELIST_USE:"key.couponcenter.usecodelist.use",VALIDATY_TIMEZONE:"key.couponcenter.common.validitytimezone",AVAILABLECODES_TITLE:"key.couponcenter.usecodelist.availablecodes_title",DONOTUSECODE:"key.couponcenter.usecodelist.donotusecode",AVAILABLE_CURRENCY_AMOUNT:"key.couponcenter.usecodelist.availablecurrencyamount",UNAVAILABLE_REASON:"key.couponcenter.usecodelist.unavailablereason",USECODELIST_NOCODE:"key.couponcenter.usecodelist.nocode",POPUP_CLAIM:"key.couponcenter.popup.claimall",RECEIVESTATUS_RECEIVED:"key.couponcenter.common.receivestatus_received",POPUP_CLAIMED:"key.couponcenter.popup.claimed",POP_TOUSE:"key.couponcenter.popup.touse",TERMS_CONDITIONS:"key.couponcenter.common.termsandconditions",COMMON_DETAILS:"key.couponcenter.common.details",CURRENCYAMOUNT_TIERS:"key.couponcenter.common.currencyamount_tiers",PERCENTAGE_TIERS:"key.couponcenter.common.percentage_tiers",POPUP_OUTOFSTOCK:"key.couponcenter.popup.outofstock",NEWUSER_ONLY:"key.couponcenter.common.receivestatus_newuseronly",CURRENCYAMOUNT_OFF:"key.couponcenter.common.currencyamount_off",FAILURE_NOTICE:"key.couponcenter.popup.failurenotice",SUCCESS_NOTICE:"key.couponcenter.popup.successnotice",PROMOTIONCODE:"key.couponcenter.common.promocode",VALIDITY:"key.couponcenter.common.validity",RECEIVE:"key.couponcenter.common.receive",USECODES_PROMPT:"key.couponcenter.receivedetailspage.usablecodes_prompt",RECEIVABLECODES_TITLE:"key.couponcenter.receivedetailspage.receivablecodes_title",USEABLECODES_TITLE:"key.couponcenter.receivedetailspage.usablecodes_title",USEABLECODES_SUBTITLES:"key.couponcenter.receivedetailspage.usablecodes_subtitle",CANNOT_RECEIVE:"key.couponcenter.common.receivestatus_cannotreceive",NULL_ERROR:"key.couponcenter.popup.failurenotice.nullerror",CROSS_TITLE:"key.couponcenter.crosscouponlist.title",CROSS_BEFOREBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.beforebooking.subtitle",CROSS_AFTERBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.afterbooking.subtitle",CROSS_DETAIL:"key.couponcenter.crosscouponlist.promodetail",CROSS_VALIDPERIOD_TIITLE:"key.couponcenter.crosscouponlist.promovalidperiod.titile",CROSS_USEDETAIL:"key.couponcenter.crosscouponlist.promousedetail",CROSS_BULINE_USER_PROMO:"key.couponcenter.crosscouponlist.businesslineuserpromo",CROSS_BULINE_USER:"key.couponcenter.crosscouponlist.businesslineuser"}},function(e){e.exports=JSON.parse('{"compVerison":"1.4.23-beta.0"}')},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getInstance=function(){return null==this.singleInstance?new e:this.singleInstance},e.singleInstance=null,e}();t.default=n},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),o(n(6))),c=function(){function e(e,t){this.key="ttd_rn_popcoupon_"+e+"_"+t,this.domain="ttd_front_marketing"}return e.prototype.get=function(){return r(this,void 0,void 0,(function(){var e;return a(this,(function(t){try{if("string"==typeof(e=i.default.getStorageSync(this.key)))try{e=JSON.parse(e)}catch(t){e={}}return[2,e]}catch(t){return console.log("%c getStorage failed err:",t,"color:red"),[2,{}]}return[2]}))}))},e.prototype.set=function(e){if("string"!=typeof e)try{e=JSON.stringify(e)}catch(e){}i.default.setStorage({key:this.key,data:e})},e.prototype.remove=function(){this.set({})},e}();t.default=c},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.miniRequest=void 0,i(n(6)));try{var s=n(10),d=s&&s.cwx}catch(e){console.log("%c "+e,"color:red;")}var f=u.request;t.miniRequest=function(e){return c(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:try{e.data.head.auth=d&&d.user.auth||u.getStorageSync("auth")}catch(t){}return d?[3,2]:[4,f(e)];case 1:return[2,t.sent()];case 2:return[2,new Promise((function(t,n){d&&d.request(r(r({},e),{success:function(n){t(n),e.success(n)},fail:function(t){n(t),e.fail(t)}}))}))]}}))}))}},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Coupon=t.Tangram=t.Common=void 0,o(n(138))),c=(t.Common=i,o(n(139))),l=(t.Coupon=c,o(n(145)));t.Tangram=l},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentTime=t.GetShark=void 0,r(n(65))),o=(t.GetShark=a.default,r(n(66)));t.GetCurrentTime=o.default},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.GetCrossCouponList=t.GetPromotionTag=t.GetReceivePromotionByCode=t.GetReceivePromotionByRelationId=t.GetClaimCouponList=t.ClaimCoupon=t.ReceivePromotion=t.ValidateCoupon=t.UseCoupon=void 0,i(n(140))),l=(t.UseCoupon=c.default,i(n(141))),u=(t.ValidateCoupon=l.default,o(n(142))),s=(t.ReceivePromotion=u,o(n(67))),d=(t.ClaimCoupon=s.default,Object.defineProperty(t,"GetClaimCouponList",{enumerable:!0,get:function(){return s.GetClaimCouponList}}),i(n(47))),f=(t.GetReceivePromotionByRelationId=d.default,i(n(143))),p=(t.GetReceivePromotionByCode=f.default,i(n(68))),m=(t.GetPromotionTag=p.default,i(n(144)));t.GetCrossCouponList=m.default},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16),c=o.gql(r=r||a(["\n    ","\n    query($baseInfo:BaseInfoType,$bookingInfo:BookingInfoType,$extendInfoList:[ExtendInfoType],$isFirstValidate:Boolean,\n    $limit:Int=0,$queryShark:Boolean=false,$sharkLocale:String){\n        useCouponList:getUseCouponList(baseInfo:$baseInfo,bookingInfo:$bookingInfo,extendInfoList:$extendInfoList, isFirstValidate:$isFirstValidate,limit:$limit) {\n            __typename\n           ...on UseCouponData{\n               list{\n                    ...couponInfoFields\n               }\n               autoClaimResult{\n                    success\n                    message\n                    couponCode\n                    promotionId\n                    promotionSecretId\n                    svcErroCode\n                    svcErrorMessage\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        sharkData:getShark(local:$sharkLocale) @include(if: $queryShark) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"],["\n    ","\n    query($baseInfo:BaseInfoType,$bookingInfo:BookingInfoType,$extendInfoList:[ExtendInfoType],$isFirstValidate:Boolean,\n    $limit:Int=0,$queryShark:Boolean=false,$sharkLocale:String){\n        useCouponList:getUseCouponList(baseInfo:$baseInfo,bookingInfo:$bookingInfo,extendInfoList:$extendInfoList, isFirstValidate:$isFirstValidate,limit:$limit) {\n            __typename\n           ...on UseCouponData{\n               list{\n                    ...couponInfoFields\n               }\n               autoClaimResult{\n                    success\n                    message\n                    couponCode\n                    promotionId\n                    promotionSecretId\n                    svcErroCode\n                    svcErrorMessage\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        sharkData:getShark(local:$sharkLocale) @include(if: $queryShark) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"]),i.couponInfoFields);t.default=c},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16),c=o.gql(r=r||a(["\n    ","\n     query($baseInfo:BaseInfoType,$validateInfo:ValidateInfoType){\n        validateCoupon:validateCoupon(baseInfo:$baseInfo,validateInfo:$validateInfo){\n            __typename\n           ...on ValidateCouponData{\n                    couponInfo{\n                            ...couponInfoFields\n                    }\n                    resultStatus{\n                        success\n                        errorCode\n                        customerErrorMessage\n                    }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n       \n     }  \n"],["\n    ","\n     query($baseInfo:BaseInfoType,$validateInfo:ValidateInfoType){\n        validateCoupon:validateCoupon(baseInfo:$baseInfo,validateInfo:$validateInfo){\n            __typename\n           ...on ValidateCouponData{\n                    couponInfo{\n                            ...couponInfoFields\n                    }\n                    resultStatus{\n                        success\n                        errorCode\n                        customerErrorMessage\n                    }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n       \n     }  \n"]),i.couponInfoFields);t.default=c},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.GetClaimCoupon=void 0,n(12)),i=n(16);t.GetClaimCoupon=o.gql(r=r||a(["\n    ","\n    ","\n    query($baseInfo:BaseInfoType,$productId:Int,$scenicSpotId:Int,$queryShark:Boolean=false,$sharkLocale:String,$needUseableList:Boolean){\n        claimCouponList:getClaimCouponList(baseInfo:$baseInfo,productId:$productId,scenicSpotId:$scenicSpotId,needUseableList:$needUseableList){\n            __typename\n           ...on GetClaimCouponData{\n               claimList{\n                    ...claimCouponInfoFields,\n               }\n               useableList{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        sharkData:getShark(local:$sharkLocale) @include(if: $queryShark) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"],["\n    ","\n    ","\n    query($baseInfo:BaseInfoType,$productId:Int,$scenicSpotId:Int,$queryShark:Boolean=false,$sharkLocale:String,$needUseableList:Boolean){\n        claimCouponList:getClaimCouponList(baseInfo:$baseInfo,productId:$productId,scenicSpotId:$scenicSpotId,needUseableList:$needUseableList){\n            __typename\n           ...on GetClaimCouponData{\n               claimList{\n                    ...claimCouponInfoFields,\n               }\n               useableList{\n                    ...couponInfoFields,\n               }\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n        sharkData:getShark(local:$sharkLocale) @include(if: $queryShark) {\n            __typename\n           ...on SharkData{\n               data\n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"]),i.claimCouponInfoFields,i.couponInfoFields)},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16);t.default=o.gql(r=r||a(["\n    ","\n    query($baseInfo:BaseInfoType,$sceneParams:[SceneParamsType],$utcOffset:Int){\n        receivePromotionData:getReceivePromotionByScenesCode(baseInfo:$baseInfo,sceneParams:$sceneParams){\n            __typename\n            ...on GetReceivePromotionByBySceneCodeData{\n                list{\n                    sceneCode\n                    promotionList{\n                        ...claimCouponInfoFields\n                    }\n                }\n                claimAllButtonText\n                disableClaimAllButton\n                nextAvailableTime\n            }\n            ...on Error{\n                message\n               code\n            }\n        }\n        serverTime:getServerTime(utcOffset:$utcOffset){\n            __typename\n            ...on GetServerTimeData{\n            serverTime\n            }\n        }\n    }\n"],["\n    ","\n    query($baseInfo:BaseInfoType,$sceneParams:[SceneParamsType],$utcOffset:Int){\n        receivePromotionData:getReceivePromotionByScenesCode(baseInfo:$baseInfo,sceneParams:$sceneParams){\n            __typename\n            ...on GetReceivePromotionByBySceneCodeData{\n                list{\n                    sceneCode\n                    promotionList{\n                        ...claimCouponInfoFields\n                    }\n                }\n                claimAllButtonText\n                disableClaimAllButton\n                nextAvailableTime\n            }\n            ...on Error{\n                message\n               code\n            }\n        }\n        serverTime:getServerTime(utcOffset:$utcOffset){\n            __typename\n            ...on GetServerTimeData{\n            serverTime\n            }\n        }\n    }\n"]),i.claimCouponInfoFields)},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12)),i=n(16),c=o.gql(r=r||a(["\n    ","\n    query($baseInfo:BaseInfoType,$businessId:String,$sceneParam:SceneParamsType){\n        crossCouponData:getCrossCouponList(baseInfo:$baseInfo,businessId:$businessId,sceneParam:$sceneParam){\n            __typename\n           ...on GetCrossCouponData{\n               list{\n                    ...crossCouponInfoFields,\n               }\n              \n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"],["\n    ","\n    query($baseInfo:BaseInfoType,$businessId:String,$sceneParam:SceneParamsType){\n        crossCouponData:getCrossCouponList(baseInfo:$baseInfo,businessId:$businessId,sceneParam:$sceneParam){\n            __typename\n           ...on GetCrossCouponData{\n               list{\n                    ...crossCouponInfoFields,\n               }\n              \n           }\n           ...on Error{\n               message\n               code\n           }\n        }\n     }  \n"]),i.crossCouponInfoFields);t.default=c},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.getSceneConfig=t.getResourceSlot=void 0,r(n(146))),o=(t.getResourceSlot=a.default,r(n(147)));t.getSceneConfig=o.default},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12));t.default=o.gql(r=r||a(["\nquery($parameters:GetPopCouponResourceSlotRequest){\n    resourceSlot:getPopCouponResourceSlot(parameters:$parameters){\n        __typename\n        ...on GetPopCouponResourceSlotData{\n            data{\n                id\n                headImage\n                couponBgImage\n                toUseButton\n                collectionImage\n                collectionBackgroundColor\n                collectionColor\n                bannerImage\n                clickLink{\n                    key\n                    value\n                }\n                hoverIconImage\n                shoudReshowIcon\n                interval\n                maxNumber\n                sceneCode\n            }\n        }\n        ...on Error{\n            message\n           code\n        } \n    }\n}\n"],["\nquery($parameters:GetPopCouponResourceSlotRequest){\n    resourceSlot:getPopCouponResourceSlot(parameters:$parameters){\n        __typename\n        ...on GetPopCouponResourceSlotData{\n            data{\n                id\n                headImage\n                couponBgImage\n                toUseButton\n                collectionImage\n                collectionBackgroundColor\n                collectionColor\n                bannerImage\n                clickLink{\n                    key\n                    value\n                }\n                hoverIconImage\n                shoudReshowIcon\n                interval\n                maxNumber\n                sceneCode\n            }\n        }\n        ...on Error{\n            message\n           code\n        } \n    }\n}\n"]))},function(e,t,n){var r,a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(12));t.default=o.gql(r=r||a(["\nquery($parameters:GetSceneConfigRequest){\n    sceneConfig:getSceneConfig(parameters:$parameters){\n        __typename\n        ...on GetSceneConfigData{\n            data{\n                id\n                headImage\n                couponBgImage\n                toUseButton\n                collectionImage\n                collectionBackgroundColor\n                collectionColor\n                bannerImage\n                clickLink{\n                    key\n                    value\n                }\n                hoverIconImage\n                shoudReshowIcon\n                interval\n                maxNumber\n                sceneCode\n                showNewCoupons\n                draggable\n                initPosition\n                iconStyle {\n                    bottom\n                    right\n                }\n            }\n        }\n        ...on Error{\n            message\n           code\n        } \n    }\n}\n"],["\nquery($parameters:GetSceneConfigRequest){\n    sceneConfig:getSceneConfig(parameters:$parameters){\n        __typename\n        ...on GetSceneConfigData{\n            data{\n                id\n                headImage\n                couponBgImage\n                toUseButton\n                collectionImage\n                collectionBackgroundColor\n                collectionColor\n                bannerImage\n                clickLink{\n                    key\n                    value\n                }\n                hoverIconImage\n                shoudReshowIcon\n                interval\n                maxNumber\n                sceneCode\n                showNewCoupons\n                draggable\n                initPosition\n                iconStyle {\n                    bottom\n                    right\n                }\n            }\n        }\n        ...on Error{\n            message\n           code\n        } \n    }\n}\n"]))},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=this,l=(Object.defineProperty(t,"__esModule",{value:!0}),t.getServerTime=void 0,n(25)),u=n(43),s=i(n(66));t.getServerTime=function(e,t){return a(c,void 0,void 0,(function(){var n,a;return o(this,(function(o){switch(o.label){case 0:n=r(r({},t),{query:s.default,queryName:l.CONST.QUERY_NAME.SERVER_TIME,variables:{utcOffset:e}}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,u.post(n)];case 2:return[2,(void 0===(a=(o.sent()||{}).serverTime)?{serverTime:""}:a).serverTime];case 3:return a=o.sent(),t.logTrace&&t.logTrace("getServerTime Error",{utcOffset:e,bffCommonRequestBody:t,error:JSON.stringify(a)}),[3,4];case 4:return[2]}}))}))}},function(e,t,n){var r,a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},l=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){var l=[i,c];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,(l=a?[2&l[0],a.value]:l)[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3]))o.label=l[1];else if(6===l[0]&&o.label<a[1])o.label=a[1],a=l;else{if(!(a&&o.label<a[2])){a[2]&&o.ops.pop(),o.trys.pop();continue}o.label=a[2],o.ops.push(l)}}l=t.call(e,o)}catch(c){l=[6,c],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},f=(Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedBy=void 0,n(0)),p=n(45),m=n(43),v=d(n(47)),h=d(n(68)),g=d(n(65)),y=d(n(67)),_=n(20),b=n(42),E=n(25),w=n(25),S=n(42),I=c(n(8));(r=t.SelectedBy||(t.SelectedBy={}))[r.Default=1]="Default",r[r.UserSelect=2]="UserSelect",r[r.UserInput=3]="UserInput",t.default=function(e){var t=this,n=e.compVersion,r=e.componentType,o=e.visible,i=e.data,c=(e.onClose,e.showToast),d=e.logTrace,T=e.ensureUbtHasAttached,C=e.fetch,P=e.clientEnv,k=void 0===($=e.isShowClaimedModule)||$,N=e.userLogin,O=e.onLoadData,x=e.onClaim,D=e.onLogin,j=e.onVisibleChange,M=e.firstDidAmount,A=e.logMetric,R=void 0===(e.triggerError,$=e.needPopover)||$,V=e.kmInfo,L=e.logger,B=f.useMemo((function(){var e;return V?new I.default({ubtKey:null==V?void 0:V.ubtKey,organizationId:null==V?void 0:V.organizationId,platform:null==(e=p.convertComptType(r))?void 0:e.platform},L):null}),[]),F=("needUseableList"in e&&!("isShowClaimedModule"in e)&&(console.warn("the argument needUseableList has been deprecated , please replace it with isShowClaimedModule. It means whether to display the coupon module which has been claimed or not."),k=e.needUseableList),f.useMemo((function(){return[_.SaleChannel2Enum.Offline,_.SaleChannel3Enum.Offline].includes(i.saleChannel)}),[i.saleChannel])),U=f.useMemo((function(){return{env:P.env,client:P.clientType,fetch:C,logTrace:d,logMetric:A,isOffline:F,ctType:P.ctType,cid:i.clientId}}),[e]),H=($=f.useState(o))[0],q=$[1],Y=($=f.useState(!1))[0],G=$[1],Z=($=f.useState(null))[0],$=$[1],z=(ye=f.useState([]))[0],K=ye[1],W=(ye=f.useState([]))[0],X=ye[1],J=(ye=f.useState({}))[0],Q=ye[1],ee=f.useRef(new Map),te=f.useRef(!1),ne=f.useRef(),re=f.useMemo((function(){return p.getTimeZone()}),[]),ae=f.useMemo((function(){return{pageId:i.pageId,componentId:E.CONST.ComponentInfo.RECEIVEDETAIL.id,componentName:E.CONST.ComponentInfo.RECEIVEDETAIL.name,componentVersion:n,ubtSourceKey:E.CONST.UbtSourceKey[i.source]}}),[]),oe=(f.useImperativeHandle(e.ref,(function(){return{show:function(){R?(q(!0),ge(E.CONST.DEVTRACE_KEY.CLAIMCOUPON_INVOKE_SHOW)):ge(E.CONST.DEVTRACE_KEY.EXPOSURE)},hide:function(){R&&(q(!1),ge(E.CONST.DEVTRACE_KEY.CLAIMCOUPON_INVOKE_HIDE))}}})),f.useEffect((function(){return M&&M(),T&&T(i.pageId,P.clientType),function(){j&&j(!1)}}),[]),f.useEffect((function(){var e;te.current&&(e=pe(i.locale),Q(e))}),[i.locale]),p.HooksUtil.useDeepEffect((function(){try{return te.current||(te.current=!0),ce(),function(){ee.current.forEach((function(e){clearTimeout(e)}))}}catch(e){he(e)}}),[e.data,e.hasError]),f.useEffect((function(){q(o)}),[o]),f.useEffect((function(){R&&(H&&ge(E.CONST.DEVTRACE_KEY.EXPOSURE),j)&&j(H)}),[H,R]),function(e){return 2!=e.promotionStatus&&3!=e.promotionStatus||(e.showImg=!0),e}),ie=function(e,t,n){K((function(r){var a;return r=s([],void 0===n?r:n),e&&t&&(a=r.find((function(t){return t.promotionId==e})))&&Object.assign(a,t||{}),r}))};function ce(t){l(this,void 0,void 0,(function(){var n,r,a,o,c;return u(this,(function(l){switch(l.label){case 0:if(e.hasError)return[2];l.label=1;case 1:return l.trys.push([1,5,,6]),[4,pe(i.locale)];case 2:return n=l.sent(),Q(n),[4,de()];case 3:a=l.sent(),r=a.list,a=a.serverTime;try{le(r,a,n),s=r,d=n,u=p.BusinessUtil.getMillisecondsToZero(a),f=s.filter((function(e){return 1==e.promotionStatus&&1==e.activityStatus})).map((function(e){return e.promotionId})),ee.current.set("ZERO_TASK",setTimeout((function(){ue(f,s,d)}),u))}catch(l){he(l)}return[4,fe()];case 4:return a=l.sent(),K(r||[]),X(a||[]),o={claimList:r,useableList:a},c=p.BusinessUtil.getLoadDataChunk(o),O&&O(c),t&&t(o),[3,6];case 5:return he(l.sent()),[3,6];case 6:return[2]}var u,s,d,f}))}))}var le=f.useCallback((function(e,t,n,r){e&&0!=e.length&&e.forEach((function(a){var o;1==a.promotionStatus&&1==a.activityStatus&&((o=ee.current.get(a.promotionId))&&clearTimeout(o),o=p.BusinessUtil.setTimeTask4TimingCoupon(t,a.nextAvailableTime,(function(){ie(a.promotionId,{buttonText:n[w.SHARKKEY.RECEIVE],disableButton:!1,activityStatus:2},r||e),console.log("--------------------Scene Start\uff0cChange Button State--------------------",(new Date).toString())}),(function(){ue([a.promotionId],r||e,n)}),a.promotionId))&&ee.current.set(a.promotionId,o)}))}),[J,ee]);function ue(e,t,n){l(this,void 0,void 0,(function(){var r,a,o,i;return u(this,(function(c){switch(c.label){case 0:return e&&0!=e.length?(r=s([],t),[4,de(!1)]):[2];case 1:return a=c.sent(),o=a.list,i=a.serverTime,e.forEach((function(e){var t=o.find((function(t){return t.promotionId==e})),a=r.find((function(t){return t.promotionId==e}));a&&t&&(Object.assign(a,{disableButton:t.disableButton,buttonText:t.buttonText,activityStatus:t.activityStatus,promotionStatus:t.promotionStatus}),1==t.promotionStatus&&1==t.activityStatus?le([t],i,n,r):((a=ee.current.get(t.promotionId))&&clearTimeout(a),ie(null,null,r)))})),[2]}}))}))}var se=function(){return{channelId:i.saleChannel,allianceId:i.allianceId,siteId:i.siteId,clientId:i.clientId,source:i.source,utcOffset:re.offset,locale:i.locale,currency:i.currency,uid:F?i.uid:"",rmsToken:i.rmsToken,requestScene:S.CouponRequestSceneEnum.DetailClaim,version:n,componentType:r}},de=function(e){return void 0===e&&(e=!0),l(t,void 0,void 0,(function(){var t,n,r,o;return u(this,(function(c){switch(c.label){case 0:if(c.trys.push([0,2,,3]),r=t=void 0,0<i.productId)t=i.productId,r=b.RelationTypeEnum.PRODUCTID;else if(0<i.scenicSpotId)t=i.scenicSpotId,r=b.RelationTypeEnum.SCENICSPOTID;else{if(!(0<i.poiId))throw new Error("Params Error\uff0cproductId\u3001scenicSpotId\u3001poiId Need One Or More");t=i.poiId,r=b.RelationTypeEnum.POIID}return n={baseInfo:n=se(),relationDetail:{relationType:r,relationId:t},receivePromotionType:i.receivePromotionType,shownewuserpromo:!0,filterType:e?k?1:2:0,utcOffset:re.offset,getServerTime:!0},r=a(a({},U),{query:v.default,queryName:E.CONST.QUERY_NAME.RECEIVE_PROMOTION,variables:n,componentInfo:ae}),[4,m.post(r)];case 1:return t=c.sent()||{},n=t.receivePromotionData,r=t.serverTime,(o=(null==n?void 0:n.list)||[]).forEach((function(e){oe(e)})),[2,{list:o,serverTime:Number.parseInt(r&&r.serverTime)}];case 2:return he(c.sent()),[3,3];case 3:return[2]}}))}))},fe=function(e){return void 0===e&&(e=!0),l(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),!k)return[2,[]];if(i.productId)return t={baseInfo:t=se(),productIDList:[i.productId],filterType:e?1:0},t=a(a({},U),{query:h.default,queryName:E.CONST.QUERY_NAME.PROMOTION_TAG,variables:t,componentInfo:ae}),[4,m.post(t)];throw new Error("productId can't be null if isShowClaimedModule !");case 1:return t=(r.sent()||{}).promotionTagData,(n=(null==t?void 0:t.list)||[]).forEach((function(e){oe(e)})),console.log("useableList:",n),[2,n];case 2:return he(r.sent()),[3,3];case 3:return[2]}}))}))},pe=f.useCallback((function(e){return l(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:t={sharkLocale:e},t=a(a({},U),{query:g.default,queryName:E.CONST.QUERY_NAME.SHARK,variables:t,componentInfo:ae}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.post(t)];case 2:return[2,(void 0===(n=(r.sent()||{}).sharkData)?{data:{}}:n).data];case 3:return he(r.sent()),[2,{}];case 4:return[2]}}))}))}),[]),me=function(e,n,r,o){!function(e,t,n){l(this,void 0,void 0,(function(){var r,o,i,l;return u(this,(function(u){switch(u.label){case 0:r={baseInfo:r=se(),promotionSecretIds:[t]},r=a(a({},U),{query:y.default,queryName:E.CONST.QUERY_NAME.CLAIM,variables:r,componentInfo:ae}),u.label=1;case 1:return u.trys.push([1,6,,7]),[4,m.post(r)];case 2:return(o=(u.sent()||{}).claimCoupon).__typename!=E.CONST.BFF_ERROR_TYPE?[3,3]:(null!=B&&B.logActionInfo({attrs:null==V?void 0:V.attrs,scene:"\u9886\u53d6\u4f18\u60e0\u5238",module:"\u4e1a\u52a1\u963b\u65ad",action:I.ActionType.click,value:"\u8df3\u8f6c\u767b\u5f55",key:E.CONST.KM_BLOCK_KEY.ClaimCoupon_NeedLogin}),o&&o.code==E.CONST.BFF_RESPONSECODE.AUTH_FAILURE&&(ne.current=e,N(P.env,ve)),[3,5]);case 3:return i=o.claimResultList[0],[4,n(i)];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:return i=u.sent(),l=J[w.SHARKKEY.FAILURE_NOTICE]||"Failed to claim, please contact Trip.com customer support",c({className:"coupon_toast",content:l,duration:1500,needMask:!1,type:"failed"}),he(i),[3,7];case 7:return[2]}}))}))}(e,n,(function(n){return l(t,void 0,void 0,(function(){var t,a;return u(this,(function(i){switch(i.label){case 0:return(t={}).buttonText=n.buttonText,t.disableButton=n.disableButton,t.showImg=n.success,t.animationAction=n.success,[4,de(!1)];case 1:return a=(a=i.sent().list).find((function(t){return t.promotionId==e})),t.useDateShown=a.useDateShown,t.promotionStatus=a.promotionStatus,t.activityStatus=a.activityStatus,ie(e,t,null==r?void 0:r.claimList),n.showToast&&n.message&&(c({className:"coupon_toast",content:n.message,duration:1500,needMask:!1,type:n.toastType||"failed"}),null!=B)&&B.logActionInfo({attrs:V.attrs,scene:"\u9886\u53d6\u4f18\u60e0\u5238",module:"\u4e1a\u52a1\u963b\u65ad",action:I.ActionType.click,value:n.message,key:E.CONST.KM_BLOCK_KEY.ClaimCoupon_NeedLogin}),G(!0),o&&o(),x&&x({success:n.success,promotionId:n.promotionId,couponCode:n.couponCode,promotionSecretId:n.promotionSecretId,code:n.code,message:n.message}),[2]}}))}))}))},ve=function(){return l(this,void 0,void 0,(function(){return u(this,(function(e){return ce((function(e){var t=(e.claimList||[]).find((function(e){return e.promotionId==ne.current}));t&&1==t.promotionStatus&&me(ne.current,t.promotionSecretId,e)})),D&&D(),[2]}))}))};function he(e){console.error(e),ge(E.CONST.DEVTRACE_KEY.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var ge=f.useCallback((function(t,n){if(d){var r={compId:ae.componentName,ttdVer:ae.componentVersion,pagebu:i.source,productId:i.productId||void 0,scenicSpotId:i.scenicSpotId||void 0,state:{visible:H,flagd:Y,expandCode:Z},props:a(a({},e.data),{visible:e.visible,clientEnv:e.clientEnv,isShowClaimedModule:e.isShowClaimedModule,isShowEmptyContent:e.isShowEmptyContent,title:e.title}),propsComplete:a({},e)};try{d({key:t,value:n?a(a({},n),r):r})}catch(t){console.error(t)}}}),[e.data,H,Y,Z,ae]),ye=f.useCallback((function(e,t){ge(E.CONST.DEVTRACE_KEY.CLICK,{module:e,strategyid:t})}),[ge]);return{ctrl:{handleClaimCouponClick:me,handleClose:function(t){void 0!==H&&q(!1),e.onClose&&e.onClose(),Y&&(ce(),G(!1)),ge(E.CONST.DEVTRACE_KEY.CLAIMCOUPON_CLOSE)},changeCouponListItem:function(e,t,n,r){var a=(n=s([],n)).find((function(t){return t.promotionId==e}));a&&Object.assign(a,t||{}),(r?K:X)(n)},handleTraceClick:ye,loginSuccessCb:ve},modelState:{timezone:re,claimableCouponList:z,useableCouponList:W,expandCode:Z,componentInfo:ae,visible:H,sharkData:J},modelAction:{setExpandCode:$}}}},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(n(0))),l=n(1),u=i(n(151));t.default=function(e){var t=e.modelState,n=e.modelAction,a=e.ctrl,o=e.isShowEmptyContent,i=e.Header,s=e.productId,d=e.scenicSpotId,f=(e=t.timezone,t.claimableCouponList),p=t.useableCouponList,m=t.expandCode,v=(t.visible,t=(f||[]).length,(p||[]).length),h=n.setExpandCode,g=a.handleTraceClick,y=a.handleClaimCouponClick;return c.createElement(l.View,{className:"ttd_mkt_coupon_body"},-480!=e.offset&&(0<t||0<v)&&c.createElement(l.View,{className:"coupon_timezone_view"},"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT+08:00"),i&&c.createElement(l.View,{className:"coupon_list_view tagheader"},i),0==t&&0==v&&o&&c.createElement(l.View,{className:"coupon_empty_view"},c.createElement(l.Image,{className:"empty_img",src:"//pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),c.createElement(l.View,{className:"empty_span1"},"\u62b1\u6b49\uff0c\u6682\u65e0\u53ef\u9886\u53d6\u6216\u5df2\u9886\u53d6\u7684\u4f18\u60e0\u5238")),c.createElement(l.View,{className:"coupon_list_view"},0<t&&c.createElement(l.View,{className:"coupon_block_name"},"\u53ef\u9886\u4f18\u60e0\u5238"),(f||[]).map((function(e,t){return c.createElement(u.default,r({key:e.promotionId+"-"+t},r(r({},e),{positionId:t+1,expanded:e.promotionId==m,handleExpand:h,handleTraceClick:g,scene:u.SceneEnum.Claim_Claimable,handleClaim:y,productId:s,scenicSpotId:d})))}))),c.createElement(l.View,{className:"coupon_list_view"},0<v&&c.createElement(l.View,{className:"coupon_block_name"},c.createElement(l.View,{className:"coupon_block_name_title"},"\u5df2\u9886\u4f18\u60e0\u5238"),c.createElement(l.View,{className:"coupon_block_name_desc"},"\u6ee1\u8db3\u6761\u4ef6\u540e\u5373\u53ef\u7528\u4e8e\u5f53\u524d\u5546\u54c1")),(p||[]).map((function(e,t){return c.createElement(u.default,r({key:e.promotionId+"-"+t},r(r({},e),{positionId:t+1,expanded:e.promotionId==m,handleExpand:h,handleTraceClick:g,scene:u.SceneEnum.Calim_Useabel,productId:s,scenicSpotId:d})))}))))}},function(e,t,n){var r,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__rest||function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.SceneEnum=void 0,i(n(0))),u=n(0),s=n(28),d=l.useEffect,f=n(1),p=((r=t.SceneEnum||(t.SceneEnum={}))[r.Claim_Claimable=0]="Claim_Claimable",r[r.Calim_Useabel=1]="Calim_Useabel",function(e){var t=e.handleExpand,n=e.expanded,r=e.buttonText,a=e.disableButton,o=e.handleTraceClick,i=e.handleClaim,p=c(e,["handleExpand","expanded","buttonText","disableButton","handleTraceClick","handleClaim"]),m=p.promotionId,v=(e=p.deductionInfoShown,p.showImg),h=p.animationAction,g=(d((function(){v&&y.current&&!h&&(y.current.style.transition="none",y.current.classList.add("load"))}),[]),d((function(){y.current&&(v&&!y.current.classList.contains("load")&&y.current.classList.add("load"),h||(y.current.style.transition="none"))}),[h,v]),u.useRef(null)),y=u.useRef(null),_=1==p.promotionStatus&&1==p.activityStatus;return l.createElement(f.View,{className:"coupon_block_view"},l.createElement(f.View,{className:"coupon_info_view available"},l.createElement(f.View,{className:"info_deduction_view"},2==p.promotionMethod&&l.createElement(f.View,{className:"deduction_tag"},l.createElement(f.Text,{className:"font10px"},"\u540e\u8fd4\u5238")),e.fullDeduction?l.createElement(f.View,{className:"deduction_fullamount"},e.desc):l.createElement(u.Fragment,null,!!e.desc&&l.createElement(f.View,{className:"deduction_part1 font10px"},e.desc),l.createElement(f.View,{className:"deduction_part2"},l.createElement(f.View,{className:"deduction_amount"},e.amount),l.createElement(f.View,{className:"deduction_unit"},e.discountUnit)))),l.createElement(f.View,{className:"info_desc_view"},l.createElement(f.View,{className:"desc_name"},l.createElement(f.View,{className:"name_text"},p.couponName)),l.createElement(f.View,{className:"desc_middle"},l.createElement(f.View,{className:"desc_shortremark"},p.shortRemark),p.useDateShown&&l.createElement(f.View,{className:"desc_usedate"},p.useDateShown)),l.createElement(f.View,{className:"desc_detail"},l.createElement(f.View,{className:"detail_link",onClick:function(){t(n?null:m),o("Detail",m)}},l.createElement(f.Text,{className:"font10px"},"\u8be6\u7ec6\u8bf4\u660e"),l.createElement(f.View,{className:"expandicon"},n?l.createElement(f.Text,{className:"ttd_mkt_icon"},"\ue946"):l.createElement(f.Text,{className:"ttd_mkt_icon"},"\ue945"))),l.createElement(f.View,{className:"claim_btn "+(a?"disabled":"")+" "+(_?"warmup":""),style:{display:v?"none":"block"},onClick:function(){null!==g.current||a||(i(p.promotionId,p.promotionSecretId),o("Claim",m),g.current=setTimeout((function(){g.current=null}),1e3))}},l.createElement(f.Text,{className:"claimbtn_txt"},r))),l.createElement(f.Image,{ref:y,className:"claim_success_img claimCoupon_"+m,src:"https://dimg04.c-ctrip.com/images/0AS3q1200087hg3qwC682.png"}))),!!n&&l.createElement(f.View,{className:"coupon_detail_view"},e&&e.deductionList&&s.chunk(e.deductionList,2).map((function(e,t){return l.createElement(f.View,{className:"detail_deduction_list",key:t},e.map((function(e,t){return l.createElement(f.View,{key:t,className:"deduction_info_view"},l.createElement(f.Text,{className:"font10px"},e))})))})),l.createElement(f.View,{className:"detail_remark_list"},(p.detailRemarkShown||[]).map((function(e,t){return l.createElement(f.View,{className:"remark_info",key:t},e)}))),1==p.couponType&&l.createElement(f.View,{className:"detail_remark_code"},"\u4f18\u60e0\u5238\u7801\uff1a",p.couponCode)))});t.default=p},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1);t.default=function(e){var t=e.id,n=e.confirmInfo,r=void 0===n?{}:n,i=e.reduceDetail,c=void 0===i?{}:i,l=e.bookingNoticeTxtArr,u=e.classInfo,s=void 0===u?[]:u,d=(e.bindRef,e.priceDetail),f=e.isLineFlight,p=void 0!==f&&f,m=s.filter((function(e){return!!e.desc})).length>0||Array.from(new Set(s.map((function(e){return e.className})))).length>1||s.filter((function(e){return!!e.mealTypeDesc})).length>0;if(!(Object.keys(r).length||l.length||m))return null;var v=r.title,h=r.desc,g=d||{},y=[[g.adult,"\u6210\u4eba"],[g.child,"\u513f\u7ae5"],[g.infant,"\u5a74\u513f"]],_=c.title,b=c.priceDesc,E=c.reduceWithdraw;return a.default.createElement(o.View,{className:"pro_desc_body",id:t},a.default.createElement(o.View,{className:"fare_remark_title"},"\u4ea7\u54c1\u8bf4\u660e"),!!d&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},"\u7968\u4ef7\u660e\u7ec6"),a.default.createElement(o.View,{className:"fare_remark_gap"},a.default.createElement(o.View,{className:"fare_remark_border fare_remark_gap"},a.default.createElement(o.View,{className:"fare_remark_table_main_title"},a.default.createElement(o.View,null,(null==d?void 0:d.isIntl)?"\u5355\u4eba\u542b\u7a0e\u603b\u4ef7":"\u5355\u4eba\u4ef7\uff08\u4e0d\u542b\u71c3\u6cb9\u673a\u5efa\uff09")),y.map((function(e){return e[0]?a.default.createElement(o.View,{className:"fare_remark_table_row",key:e[1]},a.default.createElement(o.Text,{className:"fare_remark_table_left"},e[1],"\u513f\u7ae5"===e[1]&&a.default.createElement(a.default.Fragment,null,"\uff082-12\u5c81\uff09")),a.default.createElement(o.View,{className:"common_flex_txt fare_remark_table_right"},e[0])):null})))),!!d.desc&&a.default.createElement(o.View,{className:"fare_remark_txt"},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},d.desc))),!!h&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},v),a.default.createElement(o.View,{className:"fare_remark_txt"},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},h))),!!_&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},_),a.default.createElement(o.View,{className:"fare_remark_txt"},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},b)),a.default.createElement(o.View,{className:"fare_remark_txt"},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},E))),l.length>0&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},"\u8d2d\u7968\u8bf4\u660e"),l.map((function(e){return a.default.createElement(o.View,{className:"fare_remark_txt",key:e},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},e))}))),m&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},"\u8231\u4f4d\u8bf4\u660e"),s.map((function(e,t){var n=e.title,r=void 0===n?"":n,i=e.className,c=void 0===i?"":i,l=e.desc,u=e.mealTypeDesc;return a.default.createElement(o.View,{className:"fare_remark_txt",key:r+t},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},a.default.createElement(o.View,null,r,"\uff1a",c," ",u&&"(".concat(u,")")),!!l&&a.default.createElement(o.View,{className:"fare_remark_desc_txt",dangerouslySetInnerHTML:{__html:l}})))}))),p&&a.default.createElement(o.View,null,a.default.createElement(o.View,{className:"fare_remark_subtitle"},"\u8054\u7a0b\u822a\u73ed"),a.default.createElement(o.View,{className:"fare_remark_txt"},a.default.createElement(o.Text,{className:"fare_remark_dotted"}),a.default.createElement(o.View,{className:"common_flex_txt"},"\u8be5\u673a\u7968\u4e3a\u8054\u7a0b\u673a\u7968\uff08\u8054\u7a0b\u822a\u73ed\uff1a\u662f\u6307\u88ab\u5217\u660e\u5728\u5355\u4e00\u8fd0\u8f93\u5408\u540c\u4e2d\u7684\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u7684\u822a\u73ed\uff09"))))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(10),i=n(1),c=function(e){var t=e.flexColumn,n=e.rfType,r=e.info,o=1===t?l:2===t?u:s;return a.default.createElement(o,{rfType:n,info:r})},l=function(e){var t=e.info,n=void 0===t?[]:t,r=[];return"string"==typeof n?r.push(n):n.forEach((function(e){var t=e.title,n=void 0===t?"":t,a=e.subInfo,o=void 0===a?"":a;r.push(n+o)})),r.length?a.default.createElement(i.View,{className:"fare_remark_table_onlyOne_c"},r.map((function(e){return a.default.createElement(i.View,{key:e,dangerouslySetInnerHTML:{__html:e}})}))):null},u=function(e){var t=e.rfType,n=e.info,r=void 0===n?[]:n,o=[];return"string"==typeof r?o.push(r):r.forEach((function(e){var t=e.title,n=void 0===t?"":t;o.push(n)})),o.length?a.default.createElement(i.View,{className:"fare_remark_table_row"},a.default.createElement(i.Text,{className:"fare_remark_table_left"},t),a.default.createElement(i.View,{className:"common_flex_txt fare_remark_table_right"},o.map((function(e){return a.default.createElement(i.View,{className:"common_flex_txt",key:e+t,dangerouslySetInnerHTML:{__html:e}})})))):null},s=function(e){var t=e.info,n=void 0===t?[]:t,r=e.rfType;return a.default.createElement(a.default.Fragment,null,n.map((function(e,t){var n=e.title,o=e.subInfo,c=void 0===o?[]:o;return a.default.createElement(i.View,{className:"fare_remark_table_row",key:n+t+r},a.default.createElement(i.Text,{className:"fare_remark_table_left"},n),a.default.createElement(i.View,{className:"common_flex_txt fare_remark_table_right"},c.map((function(e,t){var n=e.timeTip,o=void 0===n?"":n,l=e.feeTip,u=void 0===l?"":l,s=e.title,d=e.subTitle,f=void 0===d?"":d,p=e.tinyInfo,m=void 0===p?[]:p,v=c.length>1;return o||u?a.default.createElement(i.View,{className:"fare_remark_txt",key:o+t+r},v&&a.default.createElement(i.Text,{className:"fare_remark_dotted"}),a.default.createElement(i.View,{className:"common_flex_txt"},a.default.createElement(i.View,{dangerouslySetInnerHTML:{__html:o+(o&&u?"\uff1a":"")+u}}))):a.default.createElement(i.View,{className:"fare_remark_table_content",key:r+t+s},m.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(i.View,{className:"fare_remark_subtitle",style:{marginTop:0}},s),f?a.default.createElement(i.View,{className:"fare_remark_subName"},f):null):a.default.createElement(i.View,{dangerouslySetInnerHTML:{__html:s}}),m.map((function(e,t){var n=e.timeTip,o=void 0===n?"":n,c=e.feeTip,l=void 0===c?"":c,u=m.length>1;return a.default.createElement(i.View,{className:"fare_remark_txt",key:o+r+t},u&&a.default.createElement(i.Text,{className:"fare_remark_dotted"}),a.default.createElement(i.View,{className:"common_flex_txt"},a.default.createElement(i.View,{dangerouslySetInnerHTML:{__html:o+(o&&l?"\uff1a":"")+l}})))})))}))))})))};t.default=function(e){var t=e.id,n=e.info,r=void 0===n?{}:n,l=e.setShowCab;if(!Object.keys(r).length)return null;var u=r.fareRemarkList,s=void 0===u?[]:u,d=r.exemptionInfo,f=void 0===d?[]:d;return a.default.createElement(i.View,{id:t,className:"fare-remark-body"},a.default.createElement(i.View,{className:"fare_remark_title"},"\u9000\u6539\u7b7e\u8bf4\u660e"),!o._.isEmpty(f)&&a.default.createElement(i.View,{className:"fare_remark_notice"},f.map((function(e,t){return a.default.createElement(i.View,{key:"exemptionInfo"+t},a.default.createElement(i.View,{className:"fare_remark_common_flex fare_remark_special_color fare_remark_notice_margin_top"},a.default.createElement(i.View,{className:"fare_remark_icon koala-icon icon-info"}),a.default.createElement(i.View,{className:"common_flex_title"},e.Title)),a.default.createElement(i.View,null,e.Description))}))),s.map((function(e,t){var n=e.policyTitleArr,r=void 0===n?[]:n,u=e.resultFareRemark,s=void 0===u?[]:u,d=e.refundCoupon,f=void 0===d?[]:d,p=e.specialChange,m=void 0===p?[]:p,v=e.noSingleRefund,h=void 0===v?[]:v,g=r.join("\uff0c"),y=[];return f.forEach((function(e){y.includes(e.Description)||y.push(e.Description)})),a.default.createElement(i.View,{key:g+t},a.default.createElement(i.View,{className:"fare_remark_subtitle"},g),(!o._.isEmpty(y)||!o._.isEmpty(m))&&a.default.createElement(i.View,{className:"fare_remark_notice",style:{marginBottom:"12px"}},y.length>0&&a.default.createElement(i.View,{className:"fare_remark_common_flex fare_remark_special_color"},a.default.createElement(i.View,{className:"fare_remark_icon koala-icon icon-info"}),a.default.createElement(i.View,{className:"common_flex_title"},"\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u9000\u6b3e\u53ef\u80fd\u4ec5\u9000\u4ee3\u91d1\u5238")),y.length>0&&y.map((function(e,t){return a.default.createElement(i.View,{key:"refundCouponTxt"+t},e)})),m&&m.map((function(e,t){return a.default.createElement(i.View,{key:"specialChange"+t},a.default.createElement(i.View,{className:"fare_remark_common_flex fare_remark_special_color fare_remark_notice_margin_top"},a.default.createElement(i.View,{className:"fare_remark_icon_selected koala-icon icon-selected",onClick:function(){return l(!0)}}),a.default.createElement(i.View,{className:"common_flex_title"},e.Title)),a.default.createElement(i.View,null,e.Description))}))),s.map((function(e,t){var n=e.rfType,r=e.flexColumn,o=e.info,u=void 0===o?[]:o;return u.length?a.default.createElement(i.View,{className:"fare_remark_border fare_remark_gap",key:g+t+n},(1===r||3===r)&&a.default.createElement(i.View,{className:"fare_remark_table_main_title"},a.default.createElement(i.View,null,n,"\u540c\u8231\u6539\u671f\u8d39"===n&&a.default.createElement(i.View,{className:"koala_fare_remark_changeCab_icon koala-icon icon-help",onClick:function(){return l(!0)}}))),a.default.createElement(c,{flexColumn:r,rfType:n,info:u})):null})),!o._.isEmpty(h)&&h.map((function(e,t){var n=e.Desc;return a.default.createElement(i.View,{className:"fare_remark_common_flex noSingleRefund",key:"noSingleRefund_".concat(t)},a.default.createElement(i.View,{className:"fare_remark_icon koala-icon icon-info"}),a.default.createElement(i.View,{className:"common_flex_title"},n))})))})))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1);t.default=function(e){var t=e.id,n=e.info,r=void 0===n?[]:n;return r.length?a.default.createElement(o.View,{className:"baggage-rule-body",id:t},a.default.createElement(o.View,{className:"fare_remark_title"},"\u884c\u674e\u89c4\u5b9a"),r.map((function(e,t){var n=e.segmentTitle,r=void 0===n?"":n,i=e.subBaggageLimit,c=void 0===i?[]:i,l=r.split(",").join("-");return a.default.createElement(o.View,{key:"BaggageRequirements"+t},a.default.createElement(o.View,{className:"fare_remark_subtitle"},l),a.default.createElement(o.View,{className:"fare_remark_border"},c.map((function(e,t){var n=e.passengerType,r=e.passengerBaggage,i=void 0===r?[]:r;return a.default.createElement(o.View,{className:"fare_remark_table_row",key:n+t+l},a.default.createElement(o.Text,{className:"fare_remark_table_left"},n),a.default.createElement(o.View,{className:"common_flex_txt"},i.map((function(e,t){var n=e.title,r=e.baggageWeight,i=void 0===r?"":r,c=e.baggageSize,u=void 0===c?"":c;return a.default.createElement(o.View,{className:"fare_remark_table_right fare_remark_table_right_item",key:i+t+l},!!n&&(i||u?a.default.createElement(o.View,{className:"fare_remark_table_title"},n):a.default.createElement(o.View,{dangerouslySetInnerHTML:{__html:n}})),a.default.createElement(o.View,null,i,!(!i||!u)&&"\uff0c",u))}))))}))))}))):null}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=n(1);t.default=function(){return a.default.createElement(o.View,{className:"cabin_change_dialog"},a.default.createElement(o.View,{className:"content"},a.default.createElement(o.View,{className:"que"},"Q\uff1a\u4ec0\u4e48\u662f\u540c\u8231\u6539\u671f\uff1f"),a.default.createElement(o.View,{className:"ans"},"A\uff1a\u6539\u671f\u5206\u4e3a\u4e24\u79cd\uff1a\u540c\u8231\u4f4d\u66f4\u6539\u548c\u5347\u8231\u3002"),a.default.createElement(o.View,{className:"ans-n"},"\u540c\u8231\u6539\u671f\u5c31\u662f\u76f8\u540c\u8231\u4f4d\u6539\u671f\uff0c\u5982\u60a8\u539f\u5148\u9884\u8ba2\u7684\u662f\u7ecf\u6d4e\u8231 5 \u6298\u7968\uff0c\u540c\u8231\u6539\u671f\u6307\u7684\u662f\u66f4\u6539\u5230\u5176\u4ed6\u822a\u73ed\u7684\u540c\u7b49\u6298\u6263\u7ecf\u6d4e\u8231\uff0c\u6b64\u65f6\u6309\u7167\u540c\u8231\u6539\u671f\u6536\u8d39\u89c4\u5219\u8ba1\u7b97\u6539\u671f\u8d39\u3002")),a.default.createElement(o.View,{className:"content"},a.default.createElement(o.View,{className:"que"},"Q\uff1a\u5982\u679c\u6539\u671f\u65f6\uff0c\u53ea\u5269\u4e0b\u66f4\u9ad8\u6298\u6263\u8231\u4f4d\uff0c\u600e\u4e48\u6536\u8d39\u5462\uff1f"),a.default.createElement(o.View,{className:"ans"},"A\uff1a\u5982\u679c\u60a8\u6240\u6539\u822a\u73ed\u7684\u8231\u4f4d\u6298\u6263\u9ad8\u4e8e\u539f\u6765\u9884\u8ba2\u7684\u8231\u4f4d\u6298\u6263\uff0c\u5c5e\u4e8e\u5347\u8231\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u822a\u7a7a\u516c\u53f8\u90fd\u4f1a\u8981\u6c42\u8865\u4ea4\u673a\u7968\u5dee\u4ef7\u3002"),a.default.createElement(o.View,{className:"ans-n"},"\u6b64\u65f6\u6539\u7b7e\u9700\u6536\u53d6\uff1a\u540c\u8231\u6539\u671f\u8d39+\u673a\u7968\u5dee\u4ef7\u3002")),a.default.createElement(o.View,{className:"content"},a.default.createElement(o.View,{className:"que"},"Q\uff1a\u5982\u679c\u6539\u671f\u65f6\uff0c\u6709\u66f4\u4f4e\u4ef7\u683c\u822a\u73ed\uff0c\u80fd\u9000\u6211\u94b1\u4e48\uff1f"),a.default.createElement(o.View,{className:"ans"},"A\uff1a\u822a\u7a7a\u516c\u53f8\u53ea\u5141\u8bb8\u540c\u8231\u6216\u5347\u8231\u6539\u671f\uff0c\u6539\u671f\u662f\u65e0\u6cd5\u6539\u5230\u66f4\u4f4e\u4ef7\u683c\u822a\u73ed\u7684\u3002"),a.default.createElement(o.View,{className:"ans-n"},"\u5982\u679c\u6539\u671f\u65f6\uff0c\u60a8\u53d1\u73b0\u6709\u66f4\u4f4e\u4ef7\u683c\u822a\u73ed\uff0c\u53ef\u8ba1\u7b97\u4e00\u4e0b\uff0c\u9000\u7968\u91cd\u8ba2\u4e00\u5f20\u662f\u5426\u6bd4\u6539\u671f\u66f4\u5212\u7b97\u3002")))}},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";var r=n(15).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MaskLoading=t.MaskTitle=t.InfoItem=t.Button=t.NameRow=t.Notice=void 0;var u=c(n(0)),s=n(1),d=l(n(163)),f=n(10),p=function(e){var n=e.list,a=e.limitLine,i=e.showHotelFacility,c=void 0===i||i,l=u.useState([-1,0]),d=r(l,2),p=r(d[0],2),h=p[0],g=p[1],y=d[1],_=u.useState(!1),b=r(_,2),E=b[0],w=b[1];return u.useEffect((function(){var e=[];Array(n.length).fill(0).map((function(t,n){var r;return e.push(Math.floor(((null===(r=o.getElementById("js_idiy_limit_line_".concat(n)))||void 0===r?void 0:r.clientHeight)||0)/18))}));var t=0;e.map((function(e,r){return t<a?(t+e>=a&&(y([Number(r),a-t]),n[Number(r)].numberOfLines=a-t,e>a-t&&w(!0)),t+=e):E||n[Number(r)].forceShow||w(!0),null})),e=f._.compact(e)}),[]),u.default.createElement(u.default.Fragment,null,u.default.createElement(s.View,{style:{flex:1,marginBottom:"10px"}},n.map((function(e,t){var n=e.forceShow,r=e.left,a=e.text;if(h>-1&&t>h&&!n)return null;var o={display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:g,overflow:"hidden"};return u.default.createElement(s.View,{id:"js_idiy_limit_line_".concat(t),key:t,className:"info_outer"},u.default.createElement(s.View,{className:"h5_koala_info_left"},r||u.default.createElement(m,null)),u.default.createElement(v,{key:t,v:a,style:t!==h||n?{}:o}))}))),E&&c?u.default.createElement(t.Button,{text:"\u5168\u90e8\u8ba2\u623f\u5fc5\u8bfb"}):null)},m=function(){return u.default.createElement(s.Text,{className:"koala_info_dot",style:{marginLeft:"8px"}},"\u2022")},v=function(e){var t=e.v,n=e.style;return u.default.createElement(s.View,{className:"h5_koala_info_title f12",style:n},t)};t.Notice=function(e){var n=e.showHotelFacility,r=void 0===n||n,a=e.notices,o=e.needTitle,i=e.noticeTitle,c=e.outerNotice,l=e.onClickNotice,d=e.noticeId,f=[];return c&&(null==a||a.map((function(e){return e.value.map((function(t){return f.push({text:t,forceShow:e.isAffect})}))}))),a?u.default.createElement(s.View,{id:d||"",style:{paddingBottom:"10px"},onClick:function(){return l&&l()}},o?u.default.createElement(t.NameRow,{name:i,icon:"icons-htl_info"}):null,c?u.default.createElement(p,{showHotelFacility:r,list:f,limitLine:5}):u.default.createElement(h,{notices:a})):null};var h=function(e){var n=e.notices;return null==n?void 0:n.map((function(e){return u.default.createElement(t.InfoItem,{key:e.type,item:e})}))};t.NameRow=function(e){var t=e.icon,n=e.name;return u.default.createElement(s.View,{className:"h5_koala_name_row"},t?u.default.createElement(s.View,{className:"h5_koala_info_left"},u.default.createElement(s.Text,{className:"".concat(t," koala-icon name_span")})):u.default.createElement(s.View,{style:{width:10}}),u.default.createElement(s.Text,{className:"name_span"},n))},t.Button=function(e){var t=e.text;return u.default.createElement(s.View,{className:"h5_koala_blue_btn"},u.default.createElement(s.Text,{className:"span_text"},t))},t.InfoItem=function(e){var t=e.item,n=t.title,r=t.value,a=t.isPolicy,o=t.type;return u.default.createElement(s.View,{className:"h5_koala_info_view"},u.default.createElement(s.View,{className:"h5_koala_info_left"},a?u.default.createElement(g,{type:o}):u.default.createElement(m,null)),u.default.createElement(s.View,{style:{flex:1}},u.default.createElement(s.View,{className:"h5_koala_info_title f14"},n),r.map((function(e,n){return 16===t.type?u.default.createElement(y,{key:n,value:e}):u.default.createElement(v,{key:n,v:e})}))))};var g=function(e){var t=e.type;return u.default.createElement(s.Text,{className:"koala-icon ".concat(_[String(t)])})},y=function(e){var t=e.value,n=t.title,r=t.text,a=t.rowTitle,o=t.rowTitle,i=void 0===o?{}:o,c=i.firstColumn,l=i.middleColumn,f=i.thirdColumn,p=i.lastColumn,m=t.extend;return u.default.createElement(s.View,{className:"h5_koala_child_and_bed"},n?u.default.createElement(s.View,{className:"h5_koala_info_title f12 h5_koala_bold"},n):null,u.default.createElement(s.View,{className:"h5_koala_info_title f12"},r),a?u.default.createElement(s.View,{style:{marginBottom:10,paddingRight:10}},u.default.createElement(s.View,{className:"h5_koala_child_title h5_koala_row"},c?u.default.createElement(s.Text,{className:"h5_koala_title h5_koala_first_column first_column_title"},c):null,l?u.default.createElement(s.Text,{className:"h5_koala_title h5_koala_other_column"},l):null,f?u.default.createElement(s.Text,{className:"h5_koala_title h5_koala_other_column"},f):null,p?u.default.createElement(s.Text,{className:"h5_koala_title h5_koala_last_column"},p):null),null==m?void 0:m.map((function(e){var t;return u.default.createElement(s.View,{key:e.title,className:"h5_koala_row h5_koala_border"},u.default.createElement(s.View,{className:"h5_koala_first_column h5_koala_child_age"},u.default.createElement(s.Image,{className:"age_image",src:"https://pic.c-ctrip.com/VacationH5Pic/shopping-cart/hotel-child".concat(e.columnType,".png")}),u.default.createElement(s.Text,{className:"age_span"},e.title)),u.default.createElement(s.View,{className:"h5_koala_other_column_view"},null===(t=e.other)||void 0===t?void 0:t.map((function(e,t){return u.default.createElement(s.View,{key:t,className:"h5_koala_row"},e.map((function(t,n){return u.default.createElement(s.Text,{key:t,className:d.default("h5_koala_other_column h5_koala_value ",{h5_koala_last_column:n===e.length-1,h5_koala_green:t.indexOf("\u514d\u8d39")>-1})},t)})))}))))}))):null)},_={15:"icons-htl_time",16:"icons-htl_child",17:"icons-htl_dog",19:"icons-htl_breakfast",20:"icons-htl_time",21:"icons-htl_warn",22:"icons-htl_ktv",23:"icons-htl_camera",24:"icons-htl_pay"};t.MaskTitle=function(e){var t=e.title,n=e.tab,r=e.setTab;return u.default.createElement(s.View,{className:"title_view"},t.map((function(e,t){var a=Number(t)===n;return u.default.createElement(s.View,{key:t,className:"top_bar_title",onClick:function(){return r(Number(t))}},u.default.createElement(s.Text,{key:e,className:"title_text"+(a?" cur":"")},e),a?u.default.createElement(s.View,{className:"cur_line"}):null)})))},t.MaskLoading=function(){return u.default.createElement(s.View,{className:"base_loading_s"},"\u52aa\u529b\u52a0\u8f7d\u4e2d",u.default.createElement(s.View,{className:"loader_inner"},u.default.createElement(s.Text,null),u.default.createElement(s.Text,null),u.default.createElement(s.Text,null)))}},function(e,t,n){"use strict";var r=n(9).default;Object.defineProperty(t,"__esModule",{value:!0});var a={}.hasOwnProperty;t.default=function e(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var i=[],c=0;c<arguments.length;c++){var l=arguments[c];if(l){var u=r(l);if("string"===u||"number"===u)i.push(l);else if(Array.isArray(l)){if(l.length){var s=e.apply(null,l);s&&i.push(s)}}else if("object"===u)if(l.toString===Object.prototype.toString)for(var d in l)a.call(l,d)&&l[d]&&i.push(d);else i.push(l.toString())}}return i.join(" ")}},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_MAP=t.roomFacilities=t.StringDefault=t.SIGNTAG=void 0,function(e){e[e.signJustConfirm=3]="signJustConfirm",e[e.signFreeEnjoy=4]="signFreeEnjoy",e[e.signLowBreakfast=5]="signLowBreakfast",e[e.signConfirmTime=6]="signConfirmTime",e[e.signWifi=7]="signWifi",e[e.signGuessLike=9]="signGuessLike",e[e.signLandTraffic=10]="signLandTraffic",e[e.signOffLine=11]="signOffLine",e[e.signPkgSave=101]="signPkgSave",e[e.signGift=102]="signGift",e[e.signBookPolicy=103]="signBookPolicy",e[e.signCancelPolicy=104]="signCancelPolicy",e[e.signBreakfast=105]="signBreakfast",e[e.signKingBed=106]="signKingBed",e[e.signTwinBed=107]="signTwinBed",e[e.signFamilyBed=108]="signFamilyBed",e[e.signMemberBenefit=109]="signMemberBenefit",e[e.signPayAtOnline=110]="signPayAtOnline",e[e.signPayAtHotel=111]="signPayAtHotel"}(t.SIGNTAG||(t.SIGNTAG={})),function(e){e.morePriceMeal="\u66f4\u591a\u4ef7\u683c\u3001\u9910\u98df\u8be6\u60c5",e.price="\u4ef7\u683c",e.food="\u9910\u98df",e.packUp="\u6536\u8d77",e.moreFac="\u66f4\u591a\u623f\u578b\u8bbe\u65bd",e.moreTips="\u66f4\u591a\u9152\u5e97\u63d0\u793a",e.feePolicyString="\u8d39\u7528\u653f\u7b56"}(t.StringDefault||(t.StringDefault={})),t.roomFacilities={2:"icons-htl_bed",4:"icons-htl_num",3:"icons-htl_area",10:"icons-htl_tips",9:"icons-htl_nosmoking",12:"icons-htl_floor",5:"icons-htl_broadband"},function(e){e[e.koala_label_brown=109]="koala_label_brown",e[e.koala_label_stag=101]="koala_label_stag"}(t.TYPE_MAP||(t.TYPE_MAP={}))},function(e,t,n){"use strict";var r=n(15).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(0)),s=n(1),d=l(n(6));n(168);var f=l(n(17));t.default=function(e){var t,n=e.banner,a=c(e,["banner"]),o=d.default.getSystemInfoSync().windowWidth,i=u.useState(0),l=r(i,2),p=l[0],m=l[1];return u.default.createElement(f.default,Object.assign({},a),u.default.createElement(s.Swiper,{circular:!0,onChange:function(e){console.log(e),m(e.detail.current)}},n.urlList.length?n.urlList.map((function(e){return u.default.createElement(s.SwiperItem,null,u.default.createElement(s.Image,{style:{width:o},className:"koala-slider-image",src:e,mode:"widthFix"}))})):u.default.createElement(s.SwiperItem,null,u.default.createElement(s.Image,{style:{width:o},className:"koala-slider-image",src:"https://pic.c-ctrip.com/VacationH5Pic/taocan/dp2/pic_none750x400.png",mode:"widthFix"}))),n.urlList.length?null===(t=n.renderDots)||void 0===t?void 0:t.call(n,p):null,e.children)}},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t),n.d(t,"MODEL_CONTEXT",(function(){return r.MODEL_CONTEXT})),n.d(t,"EnvContext",(function(){return o.EnvContext})),n.d(t,"PureModel",(function(){return i.PureModel})),n.d(t,"setupStore",(function(){return r.setupStore})),n.d(t,"setupContext",(function(){return r.setupContext})),n.d(t,"setupPreloadCallback",(function(){return r.setupPreloadCallback})),n.d(t,"setupStartCallback",(function(){return r.setupStartCallback})),n.d(t,"createReactModel",(function(){return a.createReactModel})),n.d(t,"createModelContext",(function(){return r.createModelContext})),n.d(t,"setupEnvContext",(function(){return o.setupEnvContext})),n.d(t,"EnvContextType",(function(){return o.EnvContextType})),n.d(t,"querystring",(function(){return c})),n.d(t,"SimpleCommentList",(function(){return u.a})),n.d(t,"SimpleCommentBar",(function(){return l.SimpleCommentBar})),n.d(t,"PopUp",(function(){return Ao.a})),n.d(t,"classnames",(function(){return d.a})),n.d(t,"DevHubTraceLog",(function(){return p.a})),n.d(t,"PageInfo",(function(){return f.PageInfo})),n.d(t,"ActionInfo",(function(){return f.ActionInfo})),n.d(t,"RoleType",(function(){return f.RoleType})),n.d(t,"ActionType",(function(){return f.ActionType})),n.d(t,"ErrorInfo",(function(){return f.ErrorInfo})),n.d(t,"ErrorType",(function(){return f.ErrorType})),n.d(t,"PlatformType",(function(){return f.PlatformType})),n.d(t,"fetchClaimCouponList",(function(){return m.fetchClaimCouponList})),n.d(t,"SelectDate",(function(){return jt})),n.d(t,"SelectPassenger",(function(){return Xn})),n.d(t,"fetchTransaction",(function(){return er})),n.d(t,"BaseText",(function(){return ct})),n.d(t,"Pressable",(function(){return Qe})),n.d(t,"PresaleNotice",(function(){return mr})),n.d(t,"UrgentInfo",(function(){return zr})),n.d(t,"PriceDetail",(function(){return ro})),n.d(t,"CustomerService",(function(){return Eo})),n.d(t,"FlightFareRemarkMask",(function(){return To.a})),n.d(t,"FlightTravelRemindMask",(function(){return Po.a})),n.d(t,"FlightTransferMask",(function(){return No.a})),n.d(t,"HotelPolicyAndNotice",(function(){return Oo.HotelPolicyAndNotice})),n.d(t,"HotelSubRoomMask",(function(){return xo.HotelSubRoomMask})),n.d(t,"XIntroductionMask",(function(){return jo.a})),n.d(t,"ClaimCoupon",(function(){return h.a}));var r=n(3),a=n(11),o=n(21),i=n(56),c=n(57),l=n(39),u=n.n(l),s=n(60),d=n.n(s),f=n(8),p=n.n(f),m=n(62),v=n(69),h=n.n(v),g=n(0),y=n.n(g),_=n(7);function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new P(a||[]);return r(i,"_invoke",{value:S(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function f(){}function p(){}function m(){}var v={};l(v,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(k([])));g&&g!==t&&n.call(g,o)&&(v=g);var y=m.prototype=f.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Object(_.a)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function S(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return N()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=I(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=m,r(y,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(y),l(y,c,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function E(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){E(o,r,a,i,c,"next",e)}function c(e){E(o,r,a,i,c,"throw",e)}i(void 0)}))}}var S=n(5),I=n(4),T=n(29);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||Object(T.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=n(78),k=n(77),N=function(e){var t=e.BasicInfo,n=e.aliasInfo,r=e.PreSaleNotice,a=e.TagGroupInfo,o=e.tPalClientInfo,i=t||{},c=i.IsOverSea,l=i.isPrivateGroup,u=i.ProductId,s=i.DepartureId,d=i.ProductCategoryId,f="multiLine"===(null==n?void 0:n.type),p="multiTravel"===(null==n?void 0:n.type),m=null==n?void 0:n.alias,v=a||{},h=v.MoreTagList,g=void 0===h?[]:h,y=v.SpecialTagList,_=(void 0===y?[]:y).some((function(e){return 2173===(null==e?void 0:e.TagId)})),b={isMultiLine:f,isMultiTravel:p,activeProductId:u,activeAlias:m,departCityId:s,IsOverSea:c,hasGroupTag:(null==g?void 0:g.some((function(e){return 1807===e.TagId})))||!1,isPrivateGroup:l,isTpal:_,isOverSeaDeparture:26===d},E=(r||{}).PreSaleRule||{},w=E.PreSaleTravelEndDay,S=E.PreSaleTravelStartDay,I=S?"".concat(P.a.parse(S,!1).format("YYYY-MM-DD")):"",T=w?"".concat(P.a.parse(w,!1).format("YYYY-MM-DD")):"",C=(o||{}).tPalScheduleList,k=void 0===C?[]:C,N={};return null==k||k.forEach((function(e){var t=e.departureDate,n=e.clientIds,r=void 0===n?[]:n,a=(null==r?void 0:r.length)||0;N[t]=a})),{productInfo:e,pageStatus:b,presaleStartDay:I,presaleEndDay:T,tpalScheduleMap:N}},O=function(e,t,n){var r=e.productInfo,a=e.pageStatus,o=(e.initParams,e.presaleStartDay,e.presaleEndDay,e.priceCalendarParams),i=void 0===o?{}:o,c=r||{},l=c.priceCalendar,u=(c.TagGroupInfo,c.tPalClientInfo,(n||{}).disableDates),s=l||{},d=s.dailyMinPrices,f=s.festivals,p=void 0===f?[]:f;if(I.a.isEmpty(d))return"detail"!==t.pageName||I.a.isEmpty(u)||I.a.isEmpty(i)||(i=x(u,i)),{dailyMinPrices:[],priceCalendarParams:i||{}};var m=["presale_detail","presale_order"].includes(t.pageName),v=["presale_order_complete"].includes(t.pageName),h=F(d,p,a,n),g=h.flatDailyMinPrice,y=h.monthMinPrice,_=h.curMinPrice,b=h.scheduleDates,E={},w=[];return m?E=j({state:e,flatDailyMinPrice:g,monthMinPrice:y}):v?(E=M({state:e,flatDailyMinPrice:g,monthMinPrice:y}),w=d.filter((function(e){return"\u5df2\u7ea6\u6ee1"!==E.dayConfig[H(e.date)].title}))):E=D({state:e,flatDailyMinPrice:g,monthMinPrice:y,curMinPrice:_,props:t}),"detail"!==t.pageName||I.a.isEmpty(u)||I.a.isEmpty(E)||(E=x(u,E)),{dailyMinPrices:d,flatDailyMinPrice:g,monthMinPrice:y,curMinPrice:_,priceCalendarParams:E,presaleOrderShowSchedules:w,detailScheduleDates:b}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},t);return null==e||e.forEach((function(e){var n,r=H(e),a=null===(n=null==t?void 0:t.dayConfig)||void 0===n?void 0:n[r];r&&a&&!a.disable&&!a.dayDefaultColorType&&(t.dayConfig[r]={disable:!0})})),n},D=function(e){var t=e.state,n=e.flatDailyMinPrice,r=e.monthMinPrice,a=e.curMinPrice,o=e.props,i=t.productInfo,c=t.pageStatus,l=(t.initParams,t.presaleStartDay,t.presaleEndDay,i.priceCalendar),u=i.BasicExtendInfo,s=l.dailyMinPrices,d=c.activeAlias,f=!0;if(u&&u.PriceStandardList){var p=u.PriceStandardList;if(p&&p.length){var m=p.find((function(e){return 1===e.PassengerType}));f=m&&m.IsCanBook}}var v={};v=c.isMultiTravel?A({state:t,flatDailyMinPrice:n,monthMinPrice:r,curMinPrice:a,props:o}):R({state:t,flatDailyMinPrice:n,monthMinPrice:r,curMinPrice:a,props:o});var h=H(s[0].date),g=H(s.slice(-1)[0].date),y=c.activeAlias?"\u9009\u62e9".concat(d,"\u7ebf\u51fa\u53d1\u65e5\u671f"):"\u9009\u62e9\u51fa\u53d1\u65e5\u671f",_="cruise_detail"===o.pageName,b=c.IsOverSea&&(c.hasGroupTag||c.isPrivateGroup),E="";return E=f?_?"\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u6210\u4eba\u8d77\u4ef7":b?"\xb7\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u6210\u4eba\u8d77\u4ef7 \xb7\u8ba1\u4ef7\u53ef\u80fd\u6709\u5ef6\u8fdf\uff0c\u8bf7\u4ee5\u4e0b\u5355\u65f6\u4e3a\u51c6\n\xb7\u4ee5\u4e0b\u73ed\u671f\u5747\u4fdd\u8bc1\u6210\u884c":"\xb7\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u6210\u4eba\u8d77\u4ef7 \xb7\u8ba1\u4ef7\u53ef\u80fd\u6709\u5ef6\u8fdf\uff0c\u8bf7\u4ee5\u4e0b\u5355\u65f6\u4e3a\u51c6":_?"\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u513f\u7ae5\u8d77\u4ef7":b?"\xb7\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u513f\u7ae5\u8d77\u4ef7 \xb7\u8ba1\u4ef7\u53ef\u80fd\u6709\u5ef6\u8fdf\uff0c\u8bf7\u4ee5\u4e0b\u5355\u65f6\u4e3a\u51c6\n\xb7\u4ee5\u4e0b\u73ed\u671f\u5747\u4fdd\u8bc1\u6210\u884c":"\xb7\u4ee5\u4e0b\u4ef7\u683c\u4e3a1\u513f\u7ae5\u8d77\u4ef7 \xb7\u8ba1\u4ef7\u53ef\u80fd\u6709\u5ef6\u8fdf\uff0c\u8bf7\u4ee5\u4e0b\u5355\u65f6\u4e3a\u51c6",c.isOverSeaDeparture&&(E+="\n\xb7\u65e5\u671f\u4e3a\u5f53\u5730\u65f6\u95f4"),{isOpenView:!0,startDate:h,currentDate:(new P.a).format("YYYYMMDD"),endDate:g,dayConfig:v,selectedDate:"",configuration:{businessCode:"group-tour",isUnChangeSelectedState:!1,isUnSelectedClose:!1,title:y,tipsMessage:E,tipsColorType:"orange",tipsAlignmentType:1,showToday:!c.isOverSeaDeparture,showHolidayInfo:!0,showFestival:!0,selectType:"single",showDaysSubTitle:!0,isGMT08:!0}}},j=function(e){var t,n=e.state,r=e.flatDailyMinPrice,a=e.monthMinPrice,o=V({state:n,flatDailyMinPrice:r,monthMinPrice:a}),i=n.productInfo,c=n.presaleStartDay,l=n.pageStatus,u=i.priceCalendar.dailyMinPrices,s=H(c),d=H(u.slice(-1)[0].date),f="\xb7\u5982\u9884\u7ea6\u65e5\u671f\u9700\u8865\u5dee\u4ef7\uff0c\u60a8\u9700\u5728\u9884\u7ea6\u65f6\u652f\u4ed8\u5dee\u4ef7\n\xb7 \u8be5\u65e5\u5386\u4ec5\u4f9b\u67e5\u770b\u4e0d\u652f\u6301\u9009\u62e9\uff0c\u8d2d\u4e70\u540e\u53ef\u9884\u7ea6\u65e5\u671f\n\xb7\u65e5\u671f\u4e3a\u5f53\u5730\u65f6\u95f4";l.isOverSeaDeparture&&(f+="\n\xb7\u65e5\u671f\u4e3a\u5f53\u5730\u65f6\u95f4");var p=Object.keys(o).find((function(e){var t=o[e];return!t.disable&&t.inventory>0}));return p&&(t=p),{isOpenView:!0,startDate:s,currentDate:(new P.a).format("YYYYMMDD"),endDate:d,dayConfig:o,selectedDate:"",configuration:{businessCode:"group-tour",anchorDate:t,isUnChangeSelectedState:!0,isUnSelectedClose:!0,toastMessage:"\u8be5\u65e5\u5386\u4ec5\u4f9b\u67e5\u770b\u4e0d\u80fd\u9009\u62e9\u54e6",title:"\u5f53\u524d\u53ef\u7ea6\u65e5\u671f",tipsMessage:f,tipsColorType:"orange",tipsAlignmentType:1,showToday:!l.isOverSeaDeparture,showHolidayInfo:!0,showFestival:!0,selectType:"single",showDaysSubTitle:!0,isGMT08:!0}}},M=function(e){var t=e.state,n=e.flatDailyMinPrice,r=e.monthMinPrice,a=L({state:t,flatDailyMinPrice:n,monthMinPrice:r}),o=t.productInfo,i=t.pageStatus,c=o.priceCalendar.dailyMinPrices,l=H(c[0].date),u=H(c.slice(-1)[0].date),s="\xb7\u90e8\u5206\u70ed\u95e8\u65e5\u671f\u9700\u8865\u5dee\u4ef7\uff0c\u5dee\u4ef7\u91d1\u989d\u9009\u62e9\u65e5\u671f\u540e\u53ef\u67e5\u770b";return i.isOverSeaDeparture&&(s+="\n\xb7\u65e5\u671f\u4e3a\u5f53\u5730\u65f6\u95f4"),{isOpenView:!0,startDate:l,currentDate:(new P.a).format("YYYYMMDD"),endDate:u,dayConfig:a,selectedDate:"",configuration:{businessCode:"group-tour",isUnChangeSelectedState:!1,isUnSelectedClose:!1,title:"\u9009\u62e9\u51fa\u884c\u65e5\u671f",tipsMessage:s,tipsColorType:"orange",tipsAlignmentType:1,showToday:!i.isOverSeaDeparture,showHolidayInfo:!0,showFestival:!0,selectType:"single",showDaysSubTitle:!0,isGMT08:!0}}},A=function(e){var t=e.state,n=e.flatDailyMinPrice,r=(e.monthMinPrice,e.curMinPrice),a=e.props,o=(t.pageStatus,((t.productInfo||{}).priceCalendar||{}).minPrice,{});return Object.keys(n).forEach((function(e,i,c){var l=n[e],u=(q(e),H(e));B(c[i-1],e).forEach((function(e){o[e]={disable:!0}}));var s=Y(e,l,t,a),d=s.disable,f=s.displayPrice,p=s.subTitle,m=s.dayDefaultColorType,v=f>0?"\xa5".concat(f):"\u5b9e\u65f6\u8ba1\u4ef7",h=0;f>0?f===r&&(h=2):h=0,o[u]={title:v,titleColorType:h,subTitle:p,disable:!!d,subTitleColorType:3,displayPrice:f,dayDefaultColorType:m}})),o},R=function(e){var t=e.state,n=e.flatDailyMinPrice,r=e.monthMinPrice,a=e.curMinPrice,o=e.props,i=t.pageStatus,c={};return Object.keys(n).forEach((function(e,l,u){var s,d=n[e],f=q(e),p=(null===(s=null==r?void 0:r[i.activeProductId])||void 0===s||s[f],H(e));B(u[l-1],e).forEach((function(e){c[e]={disable:!0}}));var m=G(e,d,t,o),v=m.displayPrice,h=m.subTitle,g=m.disable,y=m.dayDefaultColorType,_=v>0?"\xa5".concat(v):"\u5b9e\u65f6\u8ba1\u4ef7",b=0;v>0?v===a&&(b=2):b=0,c[p]={title:_,titleColorType:b,subTitle:h,disable:!!g,subTitleColorType:3,displayPrice:v,dayDefaultColorType:y}})),c},V=function(e){var t=e.state,n=e.flatDailyMinPrice,r=(e.monthMinPrice,t.pageStatus),a={},o=t.presaleStartDay,i=t.presaleEndDay,c=t.productInfo.TourGroupInfo,l=I.a.cloneDeep(n),u=Object.keys(l)[0],s=Object.keys(l).slice(-1)[0];new P.a(o).getTime()<new P.a(u).getTime()&&(l[o]=[Object.assign(Object.assign({},l[u][0]),{inventory:-1})]),new P.a(i).getTime()>new P.a(s).getTime()&&(l[i]=[Object.assign(Object.assign({},l[s][0]),{inventory:-1})]);var d=Object.keys(l).sort(),f={};return d.forEach((function(e){f[e]=l[e]})),Object.keys(f).forEach((function(e,t,n){var o=f[e],i=(q(e),H(e));B(n[t-1],e).forEach((function(e){a[e]={title:"",disable:!0}}));var l=Z(o,r.activeProductId,c),u=l.inventory,s=l.displayPrice,d="",p="",m=!1;-1===u?(d="",m=!0):0===u?(d="\u5df2\u7ea6\u6ee1",m=!0):u<=9?(d=s>0?"\xa5".concat(s):"\u5b9e\u65f6\u8ba1\u4ef7",p="\u4f59".concat(u),m=!1):u>=10&&(d=s>0?"\xa5".concat(s):"\u5b9e\u65f6\u8ba1\u4ef7",m=!1),a[i]={title:d,titleColorType:0,subTitle:p,subTitleColorType:3,disable:m,inventory:u}})),a},L=function(e){var t=e.state,n=e.flatDailyMinPrice,r=(e.monthMinPrice,t.pageStatus),a=t.productInfo,o=(t.initParams||{}).presaleOrderPassengerInfo,i={},c=0;o&&!I.a.isEmpty(o)&&Object.keys(o).forEach((function(e){o[e]&&(c+=o[e])}));var l=a||{},u=l.TourGroupInfo;return l.PreSaleNotice,Object.keys(n).forEach((function(e,t,a){var o=n[e],l=H(e);B(a[t-1],e).forEach((function(e){i[e]={disable:!0}}));var s=Z(o,r.activeProductId,u),d=s.inventory,f=(s.displayPrice,""),p=!1;c>d?(f="\u5df2\u7ea6\u6ee1",p=!0):d<=9&&(f="\u4f59".concat(d),p=!1),i[l]={title:f,titleColorType:2,disable:p,inventory:d}})),i},B=function(e,t){var n=[],r=1;return e&&t&&(r=Math.ceil(P.a.dayDiff(e,t))),r>1&&Array(r-1).fill(0).forEach((function(t,r){var a=P.a.parse(e,!1,!1).addDay(r+1).format("YYYYMMDD");a&&n.push(a)})),n},F=function(e){for(var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i={},c={},l=[],u=function(){var t=e[s],n=t.date,r=t.productPrices,u=void 0===r?[]:r,d=t.showGroup,f=q(n),p=[];u.forEach((function(e){var t=e=Object.assign(Object.assign({},e),{displayPrice:(null==o?void 0:o.needTradePrice)?e.tradePrice:e.displayPrice,showGroup:d,date:n}),r=t.productId,i=t.alias,u=t.displayPrice;r&&(p.push(e),r&&(c[r]=c[r]||{},c[r][f]=c[r][f]||new Set,"number"!=typeof u||Number.isNaN(u)||c[r][f].add(u)),i&&(c[i]=c[i]||{},c[i][f]=c[i][f]||new Set,"number"!=typeof u||Number.isNaN(u)||c[i][f].add(u)),a.isMultiTravel?i===a.activeAlias&&l.push(n):r===a.activeProductId&&l.push(n))})),p.sort((function(e,t){return e.displayPrice-t.displayPrice})),i[n]=p},s=0;s<e.length;s++)u();Object.entries(c).forEach((function(e){var t=C(e,2),n=t[0],r=t[1];Object.entries(r).forEach((function(e){var t=C(e,2),r=t[0],a=t[1],o=Array.from(a).sort((function(e,t){return e-t}));1===o.length?c[n][r]=o[0]:c[n][r]=0===o[0]?o[1]:o[0]}))}));var d=0;if(a.isMultiTravel){var f=(null==c?void 0:c[a.activeAlias])||{};d=(null===(t=Object.values(f).filter((function(e){return e>0})).sort((function(e,t){return e-t})))||void 0===t?void 0:t[0])||0}else{var p=(null==c?void 0:c[a.activeProductId])||{};d=(null===(n=Object.values(p).filter((function(e){return e>0})).sort((function(e,t){return e-t})))||void 0===n?void 0:n[0])||0}for(var m=[],v=(null==r?void 0:r.filter((function(e){return e.isMainFestival})))||[],h=0;h<v.length&&!(m.length>=2);h++){var g=v[h],y=g.festivalDate,_=g.festivalName,b=U(y,i,a);I.a.isEmpty(b)||m.push(Object.assign(Object.assign({},b),{festivalName:_}))}for(var E=function(){if(m.length>=10)return"break";var e=l[w];if(m.some((function(t){return t.date===e})))return"continue";var t=U(e,i,a);I.a.isEmpty(t)||m.push(t)},w=0;w<l.length;w++){var S=E();if("break"===S)break}return{flatDailyMinPrice:i,monthMinPrice:c,curMinPrice:d,scheduleDates:m}},U=function(e,t,n){var r=(null==t?void 0:t[e])||[];return n.isMultiTravel?null==r?void 0:r.find((function(e){return e.alias===n.activeAlias})):null==r?void 0:r.find((function(e){return e.productId===n.activeProductId}))},H=function(e){return e?e.split("-").join(""):""},q=function(e){var t=C(e.split("-"),2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)},Y=function(e,t,n,r){var a,o,i,c,l,u,s=n.pageStatus,d=n.tpalScheduleMap,f=void 0===d?{}:d,p=s.activeAlias,m=null==t?void 0:t.find((function(e){return e.alias===p})),v="";if(p){var h=m&&m.inventory<10&&m.inventory>0?m.inventory:"",g=f[e]||0;"detail"===r.pageName&&s.isTpal?m&&g>0&&(0===m.inventory?v="\u5df2\u62a5\u6ee1":(m.inventory>0||-99999===m.inventory)&&(v="\u5df2\u62a5".concat(g))):v="detail"===r.pageName&&m&&m.showGroup&&!s.isPrivateGroup&&!s.hasGroupTag?h?"\u6210\u56e2\xb7\u4f59".concat(h):"\u6210\u56e2":h?"\u4f59".concat(h):""}else{var y=(null===(a=null==t?void 0:t[0])||void 0===a?void 0:a.inventory)<10&&(null===(o=null==t?void 0:t[0])||void 0===o?void 0:o.inventory)>0?null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.inventory:"";v=y?"\u4f59".concat(y):""}if(-1===(u=p?m?m.displayPrice:-1:t[0].displayPrice)){var _=null===(c=null==t?void 0:t[0])||void 0===c?void 0:c.displayPrice,b=!!(null==t?void 0:t.length)&&(null===(l=t[0])||void 0===l?void 0:l.alias);return"detail"===r.pageName?{displayPrice:_,subTitle:b?"\u53ef\u9009".concat(b,"\u7ebf"):"",disable:!b,dayDefaultColorType:b?1:0}:{displayPrice:_,subTitle:b?"".concat(b,"\u7ebf"):"",disable:!0,dayDefaultColorType:0}}return u?{displayPrice:u,subTitle:v}:{displayPrice:"- -",subTitle:v}},G=function(e,t,n,r){var a,o,i,c,l,u=n.pageStatus,s=n.tpalScheduleMap,d=void 0===s?{}:s,f=n.productInfo.TourGroupInfo,p=u.activeProductId,m=f.TourGroupProductInfo,v={};null==m||m.forEach((function(e){v[e.ProductId]=k.a[e.SortNumber-1]}));var h,g=t.find((function(e){return e.productId===p})),y="";if(p){var _=g&&g.inventory<10&&g.inventory>0?g.inventory:"",b=d[e]||0;"detail"===r.pageName&&u.isTpal?g&&b>0&&(0===g.inventory?y="\u5df2\u62a5\u6ee1":(g.inventory>0||-99999===g.inventory)&&(y="\u5df2\u62a5".concat(b))):y="detail"===r.pageName&&g&&g.showGroup&&!u.isPrivateGroup&&!u.hasGroupTag?_?"\u6210\u56e2\xb7\u4f59".concat(_):"\u6210\u56e2":_?"\u4f59".concat(_):""}else{var E=(null===(a=null==t?void 0:t[0])||void 0===a?void 0:a.inventory)<10&&(null===(o=null==t?void 0:t[0])||void 0===o?void 0:o.inventory)>0?null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.inventory:"";y=E?"\u4f59".concat(E):""}if(-1===(h=p?g?g.displayPrice:-1:t[0].displayPrice)){var w=null===(c=null==t?void 0:t[0])||void 0===c?void 0:c.productId,S=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.displayPrice;if("detail"===r.pageName)return{displayPrice:S,subTitle:w?"\u53ef\u9009".concat(v[w],"\u7ebf"):"",disable:!w,dayDefaultColorType:w?1:0};var I=w?"".concat(v[w],"\u7ebf"):"";return t.length>1&&I&&(I+="\u7b49"),{displayPrice:t[0].displayPrice,subTitle:I,disable:!0,dayDefaultColorType:0}}return h?{displayPrice:h,subTitle:y}:{displayPrice:"- -",subTitle:y}},Z=function(e,t,n){var r,a=n.TourGroupProductInfo,o={};null==a||a.forEach((function(e){o[e.ProductId]=k.a[e.SortNumber-1]}));var i=e.find((function(e){return e.productId===t}));return{inventory:t?i.inventory:null===(r=null==e?void 0:e[0])||void 0===r?void 0:r.inventory,displayPrice:t?i?i.displayPrice:-1:e[0].displayPrice}},$={UPDATE_DATA:function(e,t){return Object.assign(Object.assign({},e),t)},UPDATE_CALANDAR_DATA:function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{isInitReady:!0})},UPDATE_CALANDAR_SELECTED_DATE:function(e,t){var n=e.priceCalendarParams,r=Object.assign({},n);return r.selectedDate=H(t),Object.assign(Object.assign({},e),{priceCalendarParams:r})},UPDATE_CALANDAR_DISABLE_DATE:function(e,t){var n=e.priceCalendarParams,r=Object.assign({},n),a=H(t);return a&&(r.dayConfig[a].disable=!0),Object.assign(Object.assign({},e),{priceCalendarParams:r})},UPDATE_CALANDAR_DISABLE_DATES:function(e,t){var n=e.priceCalendarParams,r=e.initParams.disableDates,a=void 0===r?[]:r,o=Object.assign({},n);return!I.a.isEmpty(t)&&n&&n.dayConfig&&(o=x(a,o)),Object.assign(Object.assign({},e),{priceCalendarParams:o})},UPDATE_PRODUCT_INFO:function(e,t){return Object.assign(Object.assign({},e),t)},UPDATE_PROPS:function(e,t){return Object.assign(Object.assign({},e),t)},UPDATE_INIT_PARAMS:function(e,t){return Object.assign(Object.assign({},e),{initParams:t})}},z=n(2),K="\nquery getProductInfo($productParams: ProductArgs!, $priceCalendarParams: PriceCalendarArgs!){\n    productInfo(params: $productParams) {\n        BasicInfo {\n            json\n        }\n        BasicExtendInfo {\n            json\n        }\n        TagGroupInfo {\n            json\n        }\n        FeeInfoList {\n            json\n        }\n        BookInfo {\n            json\n        }\n        aliasInfo {\n            type\n            name\n            alias\n        }\n        CostInfoList{\n            json\n        }\n        SegmentInfo {\n            json\n        }\n        VendorInfo {\n            json\n        }\n        PreSaleNotice{\n            json\n        }\n        TourGroupInfo {\n            json\n        }\n        TravelList {\n            json\n        }\n        priceCalendar(params: $priceCalendarParams) {\n            json\n        }\n        tPalClientInfo {\n            tPalScheduleList\n        }\n        ResponseStatus\n    }\n}\n",W="\nquery getProductInfo($productParams: ProductArgs!, $priceCalendarParams: PriceCalendarArgs!){\n    productInfo(params: $productParams) {\n        BasicInfo {\n            json\n        }\n        BasicExtendInfo {\n            json\n        }\n        TagGroupInfo {\n            json\n        }\n        FeeInfoList {\n            json\n        }\n        BookInfo {\n            json\n        }\n        aliasInfo {\n            type\n            name\n            alias\n        }\n        CostInfoList{\n            json\n        }\n        SegmentInfo {\n            json\n        }\n        VendorInfo {\n            json\n        }\n        TourGroupInfo {\n            json\n        }\n        TravelList {\n            json\n        }\n        priceCalendar(params: $priceCalendarParams) {\n            json\n        }\n        ResponseStatus\n    }\n}\n",X=n(22),J="\n  query getProductInfo($productParams: ProductArgs!){\n    productInfo(params: $productParams) {\n      BasicInfo {\n        json\n      }\n      BasicExtendInfo {\n        json\n      }\n      FeeInfoList {\n        json\n      }\n      CostInfoList{\n        json\n      }\n      BookInfo {\n        json\n      }\n      aliasInfo {\n        type\n        name\n        alias\n      }\n      SegmentInfo {\n        json\n      }\n      ResponseStatus\n  }\n}\n",Q=function(e){function t(){return(t=w(b().mark((function t(n){var r,a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E,w;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.productId,i=n.alias,c=n.departCityId,l=n.pageName,u=J,s=Object.assign({ProductId:Number(o),DepartureCityId:2},e.attachShardParams()),i&&(s.Alias=[i]),c&&(s.DepartureCityId=Number(c)),d={productParams:s},p={},t.prev=8,m=(new Date).getTime(),v=e.createGqlRequest(u,d,"VPC_ProductInfo",p),t.next=13,v.fetch();case 13:if((h=t.sent)&&h.data&&h.extensions){t.next=16;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 16:if(g=(new Date).getTime(),y=h.data,_=h.extensions,e.traceKMLogAction({attrs:[{key:"productId",value:String(o)}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"fetchProductInfo",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(g-m,"ms"),rootMessageId:Object(z.a)(null===(a=null===(r=null==_?void 0:_.SoaResponseStatus)||void 0===r?void 0:r.ResponseStatus)||void 0===a?void 0:a.Extension)}),y&&y.productInfo){t.next=21;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 21:if(E=y.productInfo,"Success"===(null==(w=null==E?void 0:E.ResponseStatus)?void 0:w.Ack)){t.next=25;break}throw new Error("ResponseStatus Ack Failed");case 25:return t.abrupt("return",E);case 28:throw t.prev=28,t.t0=t.catch(8),t.t0.isNetError||e.traceKMLogError({pageName:e.pageName||l,message:"fetchProductInfo->".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message),errorType:f.ErrorType.Ack_Fail,ex:t.t0}),new Error("fetchProductInfo Fail: ".concat(t.t0.message));case 32:case"end":return t.stop()}}),t,null,[[8,28]])})))).apply(this,arguments)}return{fetchProductInfo:function(e){return t.apply(this,arguments)},getProductInfo:function(){var t=w(b().mark((function t(n){var r,a,o,i,c,l,u,s,d;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.traceKMLogMessage("\u8bfb\u53d6productInfo\u7f13\u5b58: ".concat(n)),i=ee(n),c=i.productId,l=i.alias,u=i.departCityId,t.next=5,e.get(k.b.VPC_PRODUCTINFO);case 5:if(s=t.sent,d=null==s?void 0:s[c]){t.next=9;break}return t.abrupt("return",null);case 9:if((null===(r=null==d?void 0:d.BasicInfo)||void 0===r?void 0:r.ProductId)===c){t.next=11;break}return t.abrupt("return",null);case 11:if((null===(a=null==d?void 0:d.BasicInfo)||void 0===a?void 0:a.DepartureId)===u){t.next=13;break}return t.abrupt("return",null);case 13:if("multiTravel"!==(null===(o=null==d?void 0:d.aliasInfo)||void 0===o?void 0:o.type)||(null==d?void 0:d.aliasInfo.alias)===l){t.next=15;break}return t.abrupt("return",null);case 15:return t.abrupt("return",d);case 18:return t.prev=18,t.t0=t.catch(0),console.error("VPC_PRODUCTINFO: \u8bf7\u68c0\u67e5 cacheKey: ".concat(JSON.stringify(n))),t.abrupt("return",null);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),setProductInfo:function(t){if(t&&t.BasicInfo&&t.BasicInfo.ProductId){var n=t.BasicInfo.ProductId,r=t.BasicInfo,a=t.BasicExtendInfo,o=t.FeeInfoList,i=t.BookInfo,c=t.aliasInfo,l=t.SegmentInfo,u=t.CostInfoList;e.set(k.b.VPC_PRODUCTINFO,Object(X.a)({},n,{BasicInfo:r,BasicExtendInfo:a,FeeInfoList:o,BookInfo:i,aliasInfo:c,SegmentInfo:l,CostInfoList:u}))}else console.error("\u7f13\u5b58\u7684 productInfo \u4e0d\u6b63\u786e")},removeProductInfo:function(){var t=w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.remove(k.b.VPC_PRODUCTINFO);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},ee=function(e){var t=JSON.parse(e),n=t.productId,r=t.alias,a=t.departCityId;return{productId:Number(n),alias:r,departCityId:Number(a)}},te="\n  mutation getShoppingResource(\n    $params: ExtraResourceArgs!,\n    $ShoppingDetailParams: ShoppingDetailArgs!\n  ) {\n    extraResource(params: $params) {\n      settings\n      Option\n      Insurances\n      train\n      Tags\n      single\n      cruiseTour\n      room\n      discount\n      combinedTrans\n      transportation\n      visa\n      free\n      required\n      optional\n      trainUpdateResult\n      optionUpdateResult\n      ResponseStatus\n    }\n    shoppingDetail(params: $ShoppingDetailParams) {\n      prefetchSetting\n    }\n  }\n",ne="\n  query CabinFareRemark(\n    $params: CabinFareRemarkReq\n  ){\n    CabinInfo(params: $params){\n      FareRemarkForShopping{\n        RemarkList,\n        BriefFareRemark,\n        BriefTag,\n        BriefBaggageLimit,\n        TransferInfo,\n        BriefTransferInfo,\n        TransferInfoViewData \n      }\n    }\n  }\n";function re(e,t){var n=e.BasicInfo,r=e.BasicExtendInfo.PriceStandardList,a=e.FeeInfoList,o=e.BookInfo,i=e.aliasInfo,c=e.SegmentInfo,l=n.isPureDiyfhxsdp?"sdp":"grp",u=c.IsFixSegment?"fixSegment":"extendedStay",s=i.type,d=i.name,f=i.alias,p=n.ProductId,m=n.DepartureId,v=String((null==n?void 0:n.DepartureCityName)||""),h=n.isStudy,g=n.IsOverSea,y=2===(null==n?void 0:n.PreSaleStatus),_=null==n?void 0:n.isCruise,b=c.Segments||[],E=b.some((function(e){return!0===e.IsIncludeSystemFlight})),w=b.some((function(e){return!0===e.IsIncludeHotel})),S=b.some((function(e){return!0===e.IsIncludeSystemTrain})),I=o.MinBookPerson,T=o.MaxBookPerson,C=T;"grp"===l&&T>99?C=99:"sdp"===l&&T>9&&(C=9);var P=!1,k=!1,N=!1,O=2,x=18;r.forEach((function(e){1===e.PassengerType&&(P=e.IsCanBook),2===e.PassengerType&&(k=e.IsCanBook,"grp"===l&&(O=k?e.MinAge:2,x=k?e.MaxAge:12)),3===e.PassengerType&&"sdp"===l&&(N=e.IsCanBook)})),k||(N=!1);var D=k&&("sdp"===l||w),j=a&&a.some((function(e){return"15"===e.SubTitleCode})),M="grp"===l&&j,A=t||{},R=A.date,V=A.displayPrice,L=A.price,B=A.inventory;return{productType:l,segmentType:u,routeType:s,routeName:d,alias:f,line:p,departcityid:m,departcityname:v,isStudy:h,isOverSea:g,isCruise:_,isPresale:y,isIncludeSystemFlight:E,isIncludeSystemHotel:w,isIncludeSystemTrain:S,adultCanBook:P,childCanBook:k,infantCanBook:N,childMinAge:O,childMaxAge:x,childAgeRequired:D,MinBookPerson:I,MaxBookPerson:C,hasFeeIncludeTip:M,date:R,displayPrice:V,price:L,inventory:B}}function ae(e){var t=e.adultCanBook,n=e.childCanBook,r=e.isStudy,a=e.MinBookPerson,o=e.MaxBookPerson,i=2,c=0;return t&&n?r?(i=1,c=Math.max(a-1,1)):(i=Math.max(a,Math.min(2,o)),c=0):t&&!n?r?(i=Math.max(a,1),c=0):(i=Math.max(a,Math.min(2,o)),c=0):!t&&n&&(i=0,c=Math.max(a,1)),{adultCount:i,childCount:c,infantCount:0,childAges:[]}}var oe=function(e,t){var n=e.productType,r=e.isOverSea,a=null;return(a=ie(e,t))?a:a="sdp"===n?r?ue(e,t):le(e,t):ce(e,t)},ie=function(e,t){var n=e.isStudy,r=e.MinBookPerson,a=e.MaxBookPerson,o=e.adultCanBook,i=e.childCanBook,c=e.infantCanBook,l=e.childMinAge,u=e.childMaxAge,s=e.childAgeRequired,d=e.isIncludeSystemFlight,f=e.isIncludeSystemTrain;if(!t)return{scene:1,reason:"\u6ca1\u6709\u4eba\u6570\u7f13\u5b58\u6216\u7f13\u5b58\u8fc7\u671f",show:!1,vac_code:"",vac_desc:""};var p=t.adultCount,m=t.childCount,v=t.childAges,h=t.infantCount;if(!(p>=0&&m>=0&&h>=0))return{scene:1,reason:"\u6ca1\u6709\u4eba\u6570\u7f13\u5b58\u6216\u7f13\u5b58\u8fc7\u671f",show:!1,vac_code:"",vac_desc:""};var g=p+m+h;return!o&&p>0?{scene:3,reason:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301\u6210\u4eba\u9884\u8ba2\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u8054\u7cfb\u5ba2\u670d\u54a8\u8be2",show:!0,vac_code:"vac_30121",vac_desc:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301{x}\u9884\u8ba2"}:!i&&m>0&&!c&&h>0?{scene:3,reason:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301\u513f\u7ae5\u3001\u5a74\u513f\u9884\u8ba2\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u8054\u7cfb\u5ba2\u670d\u54a8\u8be2",show:!0,vac_code:"vac_30121",vac_desc:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301{x}\u9884\u8ba2"}:!i&&m>0?{scene:3,reason:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301\u513f\u7ae5\u9884\u8ba2\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u8054\u7cfb\u5ba2\u670d\u54a8\u8be2",show:!0,vac_code:"vac_30121",vac_desc:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301{x}\u9884\u8ba2"}:!c&&h>0?{scene:3,reason:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301\u5a74\u513f\u9884\u8ba2\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u8054\u7cfb\u5ba2\u670d\u54a8\u8be2",show:!0,vac_code:"vac_30121",vac_desc:"\u6b64\u4ea7\u54c1\u4e0d\u652f\u6301{x}\u9884\u8ba2"}:g<r?{scene:3,reason:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u5c0f\u4e8e".concat(r,"\u4eba"),show:!0,vac_code:"vac_30037",vac_desc:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u5c0f\u4e8e{x}\u4eba"}:n||0!==p?v.every((function(e){return e>=l&&e<u}))?s&&v.length!==m?{scene:3,reason:"\u8bf7\u9009\u62e9\u513f\u7ae5\u5e74\u9f84",show:!0,vac_code:"vac_30110",vac_desc:"\u513f\u7ae5\u5e74\u9f84\u4e0d\u5728\u8303\u56f4"}:g>a?{scene:3,reason:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc7".concat(a,"\u4eba\u3002")+"\u5982\u679c\u60a8\u662f".concat(a,"\u4eba\u4ee5\u4e0a\u51fa\u884c\uff0c\u8bf7\u5206\u591a\u4e2a\u8ba2\u5355\u8fdb\u884c\u9884\u8ba2\u3002"),show:!0,vac_code:"vac_30038",vac_desc:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc7{x}\u4eba"}:d&&g>9?{scene:3,reason:"\u7531\u4e8e\u673a\u7968\u9884\u8ba2\u9650\u5236\uff0c\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc79\u4eba\u3002\u5982\u679c\u60a8\u662f9\u4eba\u4ee5\u4e0a\u51fa\u884c\uff0c\u8bf7\u5206\u591a\u4e2a\u8ba2\u5355\u8fdb\u884c\u9884\u8ba2\u3002",show:!0,vac_code:"vac_30038",vac_desc:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc7{x}\u4eba"}:f&&p+m>9?{scene:3,reason:"\u7531\u4e8e\u706b\u8f66\u7968\u9884\u8ba2\u9650\u5236\uff0c\u6210\u4eba+\u513f\u7ae5\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc79\u4eba\u3002\u5982\u679c\u60a8\u662f9\u4eba\u4ee5\u4e0a\u51fa\u884c\uff0c\u8bf7\u5206\u591a\u4e2a\u8ba2\u5355\u8fdb\u884c\u9884\u8ba2\u3002",show:!0,vac_code:"vac_30038",vac_desc:"\u8ba2\u5355\u603b\u4eba\u6570\u4e0d\u53ef\u8d85\u8fc7{x}\u4eba"}:null:{scene:3,reason:"\u8bf7\u9009\u62e9\u513f\u7ae5\u5e74\u9f84",show:!0,vac_code:"vac_30110",vac_desc:"\u513f\u7ae5\u5e74\u9f84\u4e0d\u5728\u8303\u56f4"}:{scene:3,reason:"\u8bf7\u81f3\u5c11\u9009\u62e91\u540d\u6210\u4eba",show:!0,vac_code:"vac_30039",vac_desc:"\u8bf7\u81f3\u5c11\u9009\u62e91\u540d\u6210\u4eba"}},ce=function(e,t){return null},le=function(e,t){var n=t.adultCount,r=(t.childCount,t.childAges),a=n,o=t.infantCount,i=r.filter((function(e){return e>=12})).length,c=r.filter((function(e){return e<12&&e>0})).length;return 2*(a+i)>=c?2*(a+i)>=c+o&&a+i>=o?null:{scene:3,reason:"\u6bcf\u540d12\u5c81\u53ca\u4ee5\u4e0a\u7684\u51fa\u884c\u4eba\u6700\u591a\u53ef\u643a\u5e262\u540d12\u5c81\u4ee5\u4e0b\u7684\u513f\u7ae5\u62161\u540d12\u5c81\u4ee5\u4e0b\u7684\u513f\u7ae5+1\u540d\u5a74\u513f\u54e6~",show:!0,vac_code:"vac_30113",vac_desc:"SDP\u6210\u4eba\u513f\u7ae5\u6bd4"}:{scene:3,reason:"\u6bcf\u540d12\u5c81\u53ca\u4ee5\u4e0a\u7684\u51fa\u884c\u4eba\u6700\u591a\u53ef\u643a\u5e262\u540d12\u5c81\u4ee5\u4e0b\u7684\u513f\u7ae5\u54e6~",show:!0,vac_code:"vac_30112",vac_desc:"SDP\u6210\u4eba\u513f\u7ae5\u6bd4"}},ue=function(e,t){e.MaxBookPerson;var n=t.adultCount,r=(t.childCount,t.childAges),a=t.infantCount;if(a>4)return{scene:3,reason:"\u6bcf\u5f20\u8ba2\u5355\u4ec5\u652f\u6301\u643a\u5e264\u540d\u5a74\u513f\u3002\u5982\u60a8\u9700\u8981\u643a\u5e264\u540d\u4ee5\u4e0a\u5a74\u513f\uff0c\u4e14\u5206\u591a\u4e2a\u8ba2\u5355\u8fdb\u884c\u9884\u8ba2\u3002",show:!0,vac_code:"vac_30118",vac_desc:"SDP\u56fd\u9645\u5a74\u513f\u6570"};var o=n,i=a,c=r.filter((function(e){return e>=12})).length,l=r.filter((function(e){return e<12&&e>0})).length;return 2*(o+c)>=l&&o+c>=i&&3*(o+c)>=l+i?null:{scene:3,reason:"\u6bcf\u540d12\u5c81\u53ca\u4ee5\u4e0a\u7684\u51fa\u884c\u4eba\u6700\u591a\u53ef\u643a\u5e262\u540d12\u5c81\u4ee5\u4e0b\u7684\u513f\u7ae5+1\u540d\u5a74\u513f\u54e6~",show:!0,vac_code:"vac_30111",vac_desc:"SDP\u56fd\u9645\u6210\u4eba\u513f\u7ae5\u6bd4"}},se=function(e,t){var n=e.inventory;return t.adultCount+t.childCount>n&&n>0&&n<10?{scene:2,reason:"\u60a8\u9009\u62e9\u7684\u65e5\u671f\u4ec5\u5269".concat(n,"\u4e2a\u4f59\u4f4d"),show:!0,vac_code:"vac_30119",vac_desc:"\u60a8\u9009\u62e9\u7684\u65e5\u671f\u4ec5\u5269{x}\u4e2a\u4f59\u4f4d"}:null},de=function(e){var t="",n=e.adultCount,r=e.childCount,a=e.childAges,o=e.infantCount;return n>0&&(t+="".concat(n,"\u6210\u4eba")),r>0&&(t+="".concat(r,"\u513f\u7ae5")),a.length>0&&(t+="".concat(a,"\u5c81")),o>0&&(t+="\uff0c".concat(r,"\u5a74\u513f")),t},fe=function(e,t){var n=oe(e,t),r=ae(e),a=n?r:Object.assign({},t),o=function(e,t){var n=e.childMinAge,r=e.childMaxAge,a=t.childAgeRange;return!a||n===a[0]&&r===a[1]?null:{scene:5,reason:"",show:!0,vac_code:"vac_30114",vac_desc:"\u5e74\u9f84\u8303\u56f4\u4e0d\u7b26"}}(e,a),i=function(e,t){var n=e.childAgeRequired,r=t.childCount,a=t.childAges;return n&&r>a.length?{scene:1,reason:"\u8bf7\u9009\u62e9\u513f\u7ae5\u5e74\u9f84",show:!0,vac_code:"vac_30120",vac_desc:"\u81ea\u52a8\u586b\u5145\u6700\u4f4e\u513f\u7ae5\u5e74\u9f84"}:null}(e,a),c=se(e,a);return function(e,t){for(var n=e.MinBookPerson,r=e.inventory;r>0&&r<t.adultCount+t.childCount;)t.childCount>0?t.childCount--:t.adultCount>0&&t.adultCount--;if(r>0&&r<n){var a=ae(e);t.adultCount=a.adultCount,t.childCount=a.childCount}}(e,a),function(e,t){var n=e.childAgeRequired,r=e.childMinAge,a=t.childCount,o=t.childAges;n||(t.childAges=[]),n&&a>o.length&&(t.childAges=Array(t.childCount).fill(r)),o.length>a&&(t.childAges=t.childAges.slice(0,a))}(e,a),{result:c||i||o||n,initCount:a}},pe=function(e,t){var n=fe(e,t),r=n.result,a=n.initCount;return r&&2===r.scene?(r.reason+="\uff0c\u5df2\u4e3a\u60a8\u8c03\u6574\u4eba\u6570",{initCount:a,errorInfo:r}):r&&1===r.scene?("vac_30120"!==r.vac_code&&(r.reason=""),{initCount:a,errorInfo:r}):r&&3===r.scene?(r.reason="",{initCount:a,errorInfo:r}):r&&5===r.scene?{initCount:t,errorInfo:null}:{initCount:a,errorInfo:r}},me=function(e){var t=e.adultCanBook,n=e.childCanBook,r=e.infantCanBook,a=[];return t&&a.push("\u6210\u4eba"),n&&a.push("\u513f\u7ae5"),r&&a.push("\u5a74\u513f"),a.join("+")},ve=function(e){return{getPassengerInfo:function(){var t=e.getSync(k.b.VPC_SAVED_PASSANGER_INFO);if(!t)return null;if("RN"!==e.Platform)return t;var n=t.elderCount,r=void 0===n?0:n,a=t.adultCount,o=t.childCount,i=t.infantCount,c=void 0===i?0:i,l=t.childAges,u=void 0===l?[]:l,s=t.childAgeRange,d=void 0===s?[]:s,f={adultCount:r+a,childCount:o,infantCount:c,childAges:[]};return u.length>o&&(u=u.slice(0,o)),u.forEach((function(e){e>=0&&e<2?(f.infantCount++,f.childCount--):e>=0&&f.childAges.push(e)})),2===d.length&&d[0]<d[1]&&(f.childAgeRange=d),f},setPassengerInfo:function(t,n){if("RN"===e.Platform){var r=t.adultCount,a=t.childCount,o=t.infantCount,i=t.childAges,c=(e.getSync(k.b.VPC_SAVED_PASSANGER_INFO)||{}).elderCount,l=void 0===c?0:c,u={elderCount:l,adultCount:r-l,childCount:a,infantCount:o,childAges:i};r<l&&(u.adultCount=0,u.elderCount=r),n&&(u.childAgeRange=n),e.set(k.b.VPC_SAVED_PASSANGER_INFO,u,86400)}else e.set(k.b.VPC_SAVED_PASSANGER_INFO,t,86400)}}},he=function(e){var t={},n=function(){var n=w(b().mark((function n(o){var i;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.__pending&&e.traceKMInterruption("FetchTransaction has already been executed","vac_11001"),t={__pending:!0},n.prev=2,"UT"===(null==e?void 0:e.Platform)&&(t.__request_params={}),e.pageName||o.pageName){n.next=8;break}throw new Error("\u5fc5\u987b\u4f20\u5165 pageName");case 8:t.pageName=e.pageName||o.pageName;case 9:if(!o||o.productId){n.next=11;break}throw new Error("\u5fc5\u987b\u4f20\u5165 productId");case 11:return n.next=13,ge(e,t)(o);case 13:return n.next=15,r();case 15:return i=n.sent,Ie(e,t),n.abrupt("return",{result:!0,payload:i,request:t.__request_params});case 20:return n.prev=20,n.t0=n.catch(2),!(null==e?void 0:e.ignoreWarning)&&console.warn("fetchTransaction Failed:",n.t0.message),n.abrupt("return",{result:!1,payload:a(),request:t.__request_params});case 24:return n.prev=24,t={},n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[2,20,24,27]])})));return function(e){return n.apply(this,arguments)}}(),r=function(){var n=w(b().mark((function n(){var r,a,o,i,c,l,u,s,d,f,p,m;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=ye(e,t),c=be(e,t),l=_e(e,t),u=we(e,t),s=Ee(e,t),d={},f=function(){var e=w(b().mark((function e(){var t,n,r=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<r.length)){e.next=12;break}return n=t<0||r.length<=t?void 0:r[t],e.t0=Object,e.t1=Object.assign({},d),e.next=7,n();case 7:e.t2=e.sent,d=e.t0.assign.call(e.t0,e.t1,e.t2);case 9:t++,e.next=1;break;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),"cruise_detail"!==t.pageName){n.next=12;break}return n.next=10,f(i,u,l);case 10:n.next=14;break;case 12:return n.next=14,f(i,l);case 14:if(!(p=null===(a=null===(r=null==d?void 0:d.extraResource)||void 0===r?void 0:r.settings)||void 0===a?void 0:a.isQuickBookingV2)){n.next=18;break}return n.next=18,f(c);case 18:if(p){n.next=24;break}if(m=Te(null===(o=null==d?void 0:d.recommendSearch)||void 0===o?void 0:o.Flight),n.t0=m,!n.t0){n.next=24;break}return n.next=24,f(s);case 24:return d=Object.assign(Object.assign({},d),{shoppingId:t.shoppingid}),n.abrupt("return",d);case 26:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a=function(){if("detail"===t.pageName){if(t.isUnavailable)return{toastMessage:"\u8be5\u4ea7\u54c1\u4e3a\u9884\u552e\u4ea7\u54c1\uff0c\u8bf7\u5230\u6700\u65b0\u7248APP\u4e0b\u5355"};if(t.isScheduleFail){var e=P.a.parse(t.date).format("M\u6708D\u65e5");return{toastMessage:"".concat(e,"\u73ed\u671f\u5df2\u552e\u7f44\uff0c\u8bf7\u66f4\u6362\u81f3\u5176\u4ed6\u73ed\u671f")}}if(t.isLimited)return{toastMessage:t.errorMessage||"\u5f53\u524d\u62a2\u8d2d\u4eba\u6570\u8fc7\u591a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002",errorCode:"429"}}if("presale_detail"===t.pageName){var n="";if(t.isUnavailable)n="\u8be5\u4ea7\u54c1\u4e3a\u9884\u552e\u4ea7\u54c1\uff0c\u8bf7\u5230\u6700\u65b0\u7248APP\u4e0b\u5355";else if(t.isScheduleFail){if("multiLine"===t.routeType){var r=t.alias;n="".concat(r,"\u7ebf\u9884\u552e\u6b3e\u5df2\u552e\u7f44\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9")}"normal"===t.routeType&&(n="\u8be5\u4ea7\u54c1\u9884\u552e\u6b3e\u5df2\u552e\u7f44\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9")}return{shoppingId:t.shoppingid||"",toastMessage:n}}return"cruise_detail"===t.pageName&&t.__resourceStatuses?{ResourceStatuses:t.__resourceStatuses}:null};return n},ge=function(e,t){var n=Q(e),r=n.fetchProductInfo,a=n.getProductInfo,o=n.setProductInfo,i=ve(e);function c(){return(c=w(b().mark((function n(c){var l,u,s,d,f,p,m,v,h;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(k.b.VPC_DATE_INFO);case 2:if(l=n.sent){n.next=5;break}throw new Error("\u7f3a\u5c11\u9009\u4e2d\u65e5\u671f\u7f13\u5b58");case 5:return u=JSON.stringify(c),n.next=8,a(u);case 8:if(s=n.sent){n.next=14;break}return n.next=12,r(c);case 12:s=n.sent,o(s);case 14:if(d=re(s),f={date:l.date,price:l.price,displayPrice:l.displayPrice,inventory:l.inventory},p=i.getPassengerInfo(),m=fe(Object.assign(Object.assign({},d),f),p),m.result,v=m.initCount,Object.assign(t,Object.assign(Object.assign(Object.assign(Object.assign({},d),f),v),{shoppingid:""})),"extendedStay"!==t.segmentType||!["detail","resource"].includes(t.pageName)){n.next=26;break}return n.next=22,e.get(k.b.VPC_SEGMENT_INFO);case 22:if(h=n.sent,!Object(z.c)(c.segments)||!Object(z.c)(h)){n.next=25;break}throw new Error("\u5fc5\u987b\u4f20\u5165 segments");case 25:t.segments=c.segments||h;case 26:return n.next=28,e.get(k.b.VPC_230331_VAC_CXZ);case 28:t.__230331_VAC_CXZ=n.sent,e.traceKMLogMessage("\u63a8\u8350\u67e5\u8be2\u7684\u65e5\u671f\u4fe1\u606f\uff1a".concat(JSON.stringify(l))),e.set(k.b.VPC_HAS_AUTO_SHOW,!1);case 31:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(){return(l=w(b().mark((function e(n){var i,c,l,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.selectedResources){e.next=2;break}throw new Error("\u5fc5\u987b\u4f20\u5165 selectedResources");case 2:if(n.departureDate){e.next=4;break}throw new Error("\u5fc5\u987b\u4f20\u5165 departureDate");case 4:return i=JSON.stringify(n),e.next=7,a(i);case 7:if(c=e.sent){e.next=13;break}return e.next=11,r(n);case 11:c=e.sent,o(c);case 13:l=re(c),u={date:n.departureDate},Object.assign(t,Object.assign(Object.assign(Object.assign({},l),u),{adultCount:n.adultCount,childCount:n.childCount,selectedResources:n.selectedResources,shoppingid:""}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=w(b().mark((function e(n){var c,l,u,s,d,f,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify(n),e.next=3,a(c);case 3:if(l=e.sent){e.next=9;break}return e.next=7,r(n);case 7:l=e.sent,o(l);case 9:u=re(l),s={date:"2099-01-01",inventory:n.inventory},d=i.getPassengerInfo(),f=fe(Object.assign(Object.assign({},u),s),d),f.result,p=f.initCount,Object.assign(t,Object.assign(Object.assign(Object.assign(Object.assign({},u),s),p),{shoppingid:""})),u.isPresale&&(t.alias=n.alias,t.routeType=n.alias?"multiLine":"normal");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=w(b().mark((function n(a){var o,i,c,l;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get(k.b.VPC_PRESALE_DATE_INFO);case 2:if(o=n.sent){n.next=5;break}throw new Error("\u7f3a\u5c11\u9009\u4e2d\u65e5\u671f\u7f13\u5b58");case 5:return n.next=7,e.get(k.b.VPC_PRESALE_PASSENGER_INFO);case 7:if(n.t0=n.sent,n.t0){n.next=10;break}n.t0={adultCount:2,childCount:0};case 10:if(i=n.t0){n.next=13;break}throw new Error("\u7f3a\u5c11\u4eba\u6570\u7f13\u5b58");case 13:return n.next=15,r(a);case 15:c=n.sent,l=re(c,o),Object.assign(t,Object.assign(Object.assign(Object.assign({},l),i),{shoppingid:"",alias:a.alias,routeType:a.alias?"multiLine":"normal",preSaleShoppingId:a.preSaleShoppingId}));case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(e){switch(e.pageName){case"presale_order_complete":return function(e){return s.apply(this,arguments)}(e);case"presale_detail":case"presale_order":return function(e){return u.apply(this,arguments)}(e);case"cruise_detail":return function(e){return l.apply(this,arguments)}(e);default:return function(e){return c.apply(this,arguments)}(e)}}},ye=function(e,t){var n=function(){var n=w(b().mark((function n(){var r,a,o;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],"fixSegment"===t.segmentType&&(r=[{Key:"ab_flight_new",Value:"B"},{Key:"ab_flight_merge",Value:"B"},{Key:"ab_hotel_merge",Value:"B"},{Key:"isActualLoss",Value:"true"}],"multiLine"===t.routeType?r.push({Key:"productlinetype",Value:t.alias}):"multiTravel"===t.routeType&&(r.push({Key:"productlinetype",Value:t.alias}),r.push({Key:"productlinename",Value:t.routeName}))),e.H5Util&&e.H5Util.isBstHomeWxMini&&e.H5Util.isBstHomeWxMini()&&(r.push({Key:"bst_miniProgram",Value:"bstHomeWxmini"}),r.push({Key:"bst_pricechange",Value:"C"})),n.next=5,Se(e,t);case 5:if((a=n.sent)&&r.push({Key:"UserTraceId",Value:a}),t.isCruise||(r.push({Key:"isCalculateVipDiscount",Value:"true"}),r.push({Key:"isCalculateFlightDiscount",Value:"true"})),"presale_order_complete"===t.pageName&&t.preSaleShoppingId&&r.push({Key:"PreSaleShoppingId",Value:t.preSaleShoppingId}),t.__230331_VAC_CXZ&&r.push({Key:"230331_VAC_CXZ",Value:t.__230331_VAC_CXZ}),t.departcityid&&r.push({Key:"departcityid",Value:String(t.departcityid)}),t.departcityname&&r.push({Key:"departcityname",Value:t.departcityname}),t.displayPrice&&r.push({Key:"recommendsearch_calendar_price",Value:String(t.displayPrice)}),"H5"!=e.Platform||!e.antiSpider){n.next=19;break}return n.next=16,e.antiSpider.getToken({Extras:[{Key:"product.id",Value:String(t.line)},{Key:"product.city",Value:String(t.departcityid)},{Key:"user.checkin",Value:t.date},{Key:"user.checkout",Value:t.date}]});case 16:(o=n.sent)&&o.token&&r.push({Key:"ValidateToken",Value:o.token}),o&&o.hoteluuidkeys&&r.push({Key:"fingerprintkeys",Value:o.hoteluuidkeys});case 19:return n.abrupt("return",r);case 20:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r=function(){var e=[{Type:"Adult",Count:t.adultCount,Ages:null},{Type:"Child",Count:t.childCount,Ages:null}];return"sdp"===t.productType&&e.push({Type:"Infant",Count:t.infantCount,Ages:null}),t.childAgeRequired&&(e[1].Ages=t.childAges),e},a=function(){var t=w(b().mark((function t(n){var r,a,o,i,c,l;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCachedLocationData();case 2:return c=t.sent,(null===(r=null==c?void 0:c.cachedGeo)||void 0===r?void 0:r.lng)&&(null===(a=null==c?void 0:c.cachedGeo)||void 0===a?void 0:a.lat)&&n.Tags.push({Key:"latitude",Value:c.cachedGeo.lat},{Key:"longitude",Value:c.cachedGeo.lng}),(null===(i=null===(o=null==c?void 0:c.cachedCtripCity)||void 0===o?void 0:o.RecommendList)||void 0===i?void 0:i.length)>0&&(l=c.cachedCtripCity.RecommendList[0]||{}).GeoID&&(n.PositionCityId=l.GeoID),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(e){return"extendedStay"===t.segmentType&&(e.Segments=t.segments),e};function i(){return(i=w(b().mark((function i(){var c,l,u,s,d,p,m,v,h,g,y,_,E,w,S,I,T,C,P,k,N,O,x;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return v=e.attachShardParams(),h=Number(v.Version),i.next=4,n();case 4:if(g=i.sent,y=r(),_={ProductId:t.line,departCityId:t.departcityid,DepartDate:t.date,Passengers:y,Tags:g,Version:h,ClientInfo:{Locale:"zh-CN",Currency:"CNY"}},_=o(_),"RN"!=e.Platform){i.next=12;break}return i.next=11,a(_);case 11:_=i.sent;case 12:return t.__request_params&&(t.__request_params.recommendSearch=_),i.prev=13,E=(new Date).getTime(),w=e.createRequest("/20168/RecommendSearch",_,{allowAnyAck:!0}),i.next=18,w.fetch();case 18:if(S=i.sent,I=(new Date).getTime(),S&&S.ResponseStatus&&S.ShoppingId){i.next=23;break}throw e.traceKMInterruption("\u8282\u70b9\u4e0d\u5b8c\u6574","vac_10004"),new Error("vac_10004");case 23:if(e.traceKMLogAction({attrs:[{key:"productId",value:String(t.line)}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"/20168/RecommendSearch",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(I-E,"ms"),rootMessageId:Object(z.a)(null===(c=null==S?void 0:S.ResponseStatus)||void 0===c?void 0:c.Extension)}),!((null===(u=null===(l=null==S?void 0:S.ResponseStatus)||void 0===l?void 0:l.Errors)||void 0===u?void 0:u.length)>0)){i.next=29;break}throw T=(null===(d=null===(s=null==S?void 0:S.ResponseStatus)||void 0===s?void 0:s.Errors)||void 0===d?void 0:d[0])||{},C=T.ErrorCode,P=T.Message,e.traceKMInterruption(P,C),"vac_20000"===C||"vac_20046"===C?t.isScheduleFail=!0:"vac_20050"===C?t.isUnavailable=!0:"429"!==C||"RN"!==e.Platform&&"UT"!==e.Platform||(t.isLimited=!0,t.errorMessage=P),new Error(C);case 29:if("Success"===(null===(p=null==S?void 0:S.ResponseStatus)||void 0===p?void 0:p.Ack)){i.next=32;break}throw e.traceKMInterruption("Ack Fail","vac_10004"),new Error("vac_10004");case 32:if(!((null===(m=null==S?void 0:S.ResourceStatuses)||void 0===m?void 0:m.length)>0)){i.next=35;break}throw k=S.ResourceStatuses[0].Desc,new Error("\u63a5\u53e3\u62a5\u9519\uff1a".concat(k||""));case 35:return t.shoppingid=S.ShoppingId,i.abrupt("return",{recommendSearch:S});case 39:throw i.prev=39,i.t0=i.catch(13),N=i.t0.isNetError,O=i.t0.message,x=void 0===O?"":O,N||x.startsWith("vac_")||"429"===x||e.traceKMLogError({pageName:t.pageName,message:"/20168/RecommendSearch->".concat(x),ex:i.t0}),new Error("fetchRecommendSearch Fail: ".concat(x));case 44:case"end":return i.stop()}}),i,null,[[13,39]])})))).apply(this,arguments)}return function(){return i.apply(this,arguments)}},_e=function(e,t){function n(){return(n=w(b().mark((function n(){var r,a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E,w,S,I,T,C,P,k,N,O,x,D,j,M,A,R;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.shoppingid){n.next=2;break}throw new Error("no shoppingid");case 2:if(s="VPC_ExtraResource",d=te,p=e.attachShardParams(),m=Number(p.Version),v={extension:[]},!(t.price>=0)){n.next=13;break}return v.extension.push({name:"calendar_price_v2",value:t.price}),n.next=11,Se(e,t);case 11:n.sent||v.extension.push({name:"calendar_price",value:t.price});case 13:return h={params:Object.assign(Object.assign({ShoppingId:t.shoppingid,RecommendType:1,Options:[],Channel:4},p),{Version:m}),ShoppingDetailParams:Object.assign(Object.assign({},p),{Version:m})},t.__request_params&&(t.__request_params.extraResource={variables:h,options:v}),n.prev=15,g=(new Date).getTime(),y=e.createGqlRequest(d,h,s,v),n.next=20,y.fetch();case 20:if(_=n.sent,E=(new Date).getTime(),_&&_.data&&_.extensions){n.next=25;break}throw e.traceKMInterruption("\u8282\u70b9\u4e0d\u5b8c\u6574","vac_10081"),new Error("vac_10081");case 25:if(w=_.data,S=_.extensions,e.traceKMLogAction({attrs:[{key:"productId",value:String(t.line)},{key:"shoppingId",value:t.shoppingid}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"fetchExtraResource",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(E-g,"ms"),rootMessageId:Object(z.a)(null===(a=null===(r=null==S?void 0:S.SoaResponseStatus)||void 0===r?void 0:r.ResponseStatus)||void 0===a?void 0:a.Extension)}),w&&w.extraResource&&w.shoppingDetail){n.next=30;break}throw e.traceKMInterruption("\u8282\u70b9\u4e0d\u5b8c\u6574","vac_10081"),new Error("vac_10081");case 30:if(I=w.extraResource,T=w.shoppingDetail,C=null==I?void 0:I.ResponseStatus,P=null===(o=null==I?void 0:I.optionUpdateResult)||void 0===o?void 0:o.ResponseStatus,!((null===(i=null==C?void 0:C.Errors)||void 0===i?void 0:i.length)>0)){n.next=38;break}throw k=(null===(c=null==C?void 0:C.Errors)||void 0===c?void 0:c.find((function(e){var t;return null===(t=String(null==e?void 0:e.ErrorCode))||void 0===t?void 0:t.startsWith("vac_")})))||{},N=k.ErrorCode,O=k.Message,e.traceKMInterruption(O,N),"vac_20000"!==N&&"vac_20046"!==N||(t.isScheduleFail=!0),new Error(N);case 38:if("Success"===(null==C?void 0:C.Ack)){n.next=40;break}throw new Error("vac_10081");case 40:if(!((null===(l=null==P?void 0:P.Errors)||void 0===l?void 0:l.length)>0)){n.next=46;break}if(!(x=(null===(u=null==P?void 0:P.Errors)||void 0===u?void 0:u[0])||{})||!x.ErrorCode){n.next=46;break}throw D=x.ErrorCode,j=x.Message,e.traceKMInterruption(j,D),new Error(D);case 46:if("Success"===(null==P?void 0:P.Ack)){n.next=49;break}throw e.traceKMInterruption("\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f","vac_20039"),new Error("vac_20039");case 49:return n.abrupt("return",{extraResource:I,shoppingDetail:T});case 52:throw n.prev=52,n.t0=n.catch(15),M=n.t0.isNetError,A=n.t0.message,R=void 0===A?"":A,M||R.startsWith("vac_")||e.traceKMLogError({pageName:t.pageName,message:"fetchExtraResource->".concat(R),ex:n.t0}),new Error("fetchExtraResource Fail: ".concat(R));case 57:case"end":return n.stop()}}),n,null,[[15,52]])})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}},be=function(e,t){function n(){return(n=w(b().mark((function n(){var r,a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E,w,S,I,T,C;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.shoppingid){n.next=3;break}throw new Error("no shoppingid");case 3:return d=e.attachShardParams&&e.attachShardParams(),p={platform:(null==d?void 0:d.PlatformId)||0,channel:(null==d?void 0:d.ChannelCode)||0,isAsync:!0,isCallBack:!1,orderType:0,shoppingid:t.shoppingid,commonType:{version:null==d?void 0:d.Version,channelId:(null===(r=null==d?void 0:d.PlatformChannelInfo)||void 0===r?void 0:r.ChannelId)||117}},t.__request_params&&(t.__request_params.canBooking=p),m=(new Date).getTime(),v=e.createRequest("/13826/CanBooking",p),n.next=10,v.fetch();case 10:if(h=n.sent,g=(new Date).getTime(),h&&h.ResponseStatus){n.next=15;break}throw e.traceKMInterruption("\u8282\u70b9\u4e0d\u5b8c\u6574","vac_10084"),new Error("vac_10084");case 15:if(e.traceKMLogAction({attrs:[{key:"productId",value:String(t.line)},{key:"shoppingId",value:t.shoppingid}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"/13826/CanBooking",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(g-m,"ms"),rootMessageId:Object(z.a)(null===(a=null==h?void 0:h.ResponseStatus)||void 0===a?void 0:a.Extension)}),!((null===(i=null===(o=null==h?void 0:h.ResponseStatus)||void 0===o?void 0:o.Errors)||void 0===i?void 0:i.length)>0)){n.next=20;break}throw y=(null===(l=null===(c=null==h?void 0:h.ResponseStatus)||void 0===c?void 0:c.Errors)||void 0===l?void 0:l[0])||{},_=y.ErrorCode,E=y.Message,e.traceKMInterruption(E,_),new Error(_);case 20:if("Success"===(null===(u=null==h?void 0:h.ResponseStatus)||void 0===u?void 0:u.Ack)){n.next=23;break}throw e.traceKMInterruption("Ack Fail","vac_10084"),new Error("vac_10084");case 23:if(h.isSuccess){n.next=26;break}throw w=(null===(s=null==h?void 0:h.canBookingResults)||void 0===s?void 0:s[0])||{},w.code,S=w.message,new Error("\u63a5\u53e3\u62a5\u9519\uff1a".concat(S||""));case 26:return n.abrupt("return",{canBooking:h});case 29:throw n.prev=29,n.t0=n.catch(0),I=n.t0.isNetError,T=n.t0.message,C=void 0===T?"":T,I||C.startsWith("vac_")||e.traceKMLogError({pageName:t.pageName,message:"/13826/CanBooking->".concat(C),ex:n.t0}),new Error("fetchCanBooking Fail: ".concat(C));case 34:case"end":return n.stop()}}),n,null,[[0,29]])})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}},Ee=function(e,t){function n(){return(n=w(b().mark((function n(){var r,a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.shoppingid){n.next=2;break}throw new Error("no shoppingid");case 2:return c=ne,l={params:{clientParams:{appType:"app",appVersion:e.appVersion,sourcefrom:"tour_channel"},ShoppingId:t.shoppingid,Headers:[{Name:"SearchPKGRefer",value:"T"}],PageType:"DetailInfo"}},u={isDiy:!0},t.__request_params&&(t.__request_params.cabinInfo=l),n.prev=7,s=(new Date).getTime(),d=e.createGqlRequest(c,l,"CabinInfo",u),n.next=12,d.fetch();case 12:if(p=n.sent,m=(new Date).getTime(),p&&p.data&&p.extensions){n.next=16;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 16:if(v=p.data,h=p.extensions,e.traceKMLogAction({attrs:[{key:"productId",value:String(t.line)},{key:"shoppingId",value:t.shoppingid}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"fetchCabinInfo",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(m-s,"ms"),rootMessageId:Object(z.a)(null===(a=null===(r=null==h?void 0:h.SoaResponseStatus)||void 0===r?void 0:r.ResponseStatus)||void 0===a?void 0:a.Extension)}),"Success"===(null===(i=null===(o=null==h?void 0:h.SoaResponseStatus)||void 0===o?void 0:o.ResponseStatus)||void 0===i?void 0:i.Ack)){n.next=20;break}throw new Error("ResponseStatus Ack Fail");case 20:return g=(null==v?void 0:v.CabinInfo)||null,n.abrupt("return",{cabinInfo:g});case 24:return n.prev=24,n.t0=n.catch(7),y=n.t0.isNetError,_=n.t0.message,E=void 0===_?"":_,y||e.traceKMLogError({pageName:t.pageName,message:"fetchCabinInfo->".concat(E),ex:n.t0}),n.abrupt("return",{});case 29:case"end":return n.stop()}}),n,null,[[7,24]])})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}},we=function(e,t){function n(){return(n=w(b().mark((function n(){var r,a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E,w,S,I;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.shoppingid){n.next=2;break}throw new Error("no shoppingid");case 2:return d={ShoppingId:t.shoppingid,SelectedResources:t.selectedResources,Tags:[{Key:"resourceType",Value:64}]},t.__request_params&&(t.__request_params.updateShoppingDetail=d),n.prev=4,p=(new Date).getTime(),m=e.createRequest("/20168/UpdateShoppingDetail",d,{allowAnyAck:!0}),n.next=9,m.fetch();case 9:if(v=n.sent,h=(new Date).getTime(),v&&v.ResponseStatus){n.next=14;break}throw e.traceKMInterruption("\u8282\u70b9\u4e0d\u5b8c\u6574","vac_10076"),new Error("vac_10076");case 14:if(e.traceKMLogAction({attrs:[{key:"productId",value:String(t.line)},{key:"shoppingId",value:t.shoppingid}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"/20168/UpdateShoppingDetail",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(h-p,"ms"),rootMessageId:Object(z.a)(null===(r=null==v?void 0:v.ResponseStatus)||void 0===r?void 0:r.Extension)}),(null===(a=null==v?void 0:v.ResourceStatuses)||void 0===a?void 0:a.length)>0&&(t.__resourceStatuses=null==v?void 0:v.ResourceStatuses),!((null===(i=null===(o=null==v?void 0:v.ResponseStatus)||void 0===o?void 0:o.Errors)||void 0===i?void 0:i.length)>0)){n.next=20;break}throw g=(null===(l=null===(c=null==v?void 0:v.ResponseStatus)||void 0===c?void 0:c.Errors)||void 0===l?void 0:l[0])||{},y=g.ErrorCode,_=g.Message,e.traceKMInterruption(_,y),new Error(y);case 20:if("Success"===(null===(u=null==v?void 0:v.ResponseStatus)||void 0===u?void 0:u.Ack)){n.next=23;break}throw e.traceKMInterruption("Ack Fail","vac_10076"),new Error("vac_10076");case 23:if(!((null===(s=null==v?void 0:v.ResourceStatuses)||void 0===s?void 0:s.length)>0)){n.next=26;break}throw E=v.ResourceStatuses[0].Desc,new Error("\u63a5\u53e3\u62a5\u9519\uff1a".concat(E||""));case 26:return n.abrupt("return",{updateShoppingDetail:v});case 29:throw n.prev=29,n.t0=n.catch(4),w=n.t0.isNetError,S=n.t0.message,I=void 0===S?"":S,w||I.startsWith("vac_")||e.traceKMLogError({pageName:t.pageName,message:"/20168/UpdateShoppingDetail->".concat(I),ex:n.t0}),new Error("fetchUpdateShoppingDetail Fail: ".concat(I));case 34:case"end":return n.stop()}}),n,null,[[4,29]])})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}},Se=function(){var e=w(b().mark((function e(t,n){var r,a,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.line,a=n.alias,o=n.segmentType,e.next=3,t.get(k.b.VPC_SHOPPING_HISTORY);case 3:if(!(i=e.sent)||"extendedStay"===o){e.next=6;break}return e.abrupt("return",i["".concat(r,"_").concat(a)]||"");case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(e,t){var n=t.line,r=t.alias,a=t.shoppingid;"extendedStay"!==t.segmentType&&e.set(k.b.VPC_SHOPPING_HISTORY,Object(X.a)({},"".concat(n,"_").concat(r),a),86400)},Te=function(e){if(Object(z.c)(e)||Object(z.c)(e.Segments)||Object(z.c)(e.FlightSeats))return!1;var t=(null==e?void 0:e.FlightSeats)||[];return!(null==t?void 0:t.some((function(e){return Ce(e)})))},Ce=function(e){return e&&e.VacationSeat&&e.VacationSeat.Tags&&e.VacationSeat.Tags.some((function(e){return"Hide"==e.Type&&"T"==e.Name}))},Pe={selectedDate:"",isShowSelectDate:!1,isInitReady:!1,selectedDateFromProps:""},ke=Object(a.createReactModel)((function(){var e=Object(S.setupTourContext)(),t=e.props,n=Object(r.setupStore)({name:"isomorphic_select_date_components",initialState:Pe,reducers:$,logger:z.b&&!z.d&&!!t.logger}),a=n.store,o=n.actions,i=function(e,t){return{fetchProductInfo:function(){var n=w(b().mark((function n(r){var a,o,i,c,l,u,s,d,p,m,v,h,g,y,_,E,w,S,I,T,C;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=r.productId,u=r.alias,s=r.departCityId,d=r.needTradePrice,l){n.next=3;break}throw new Error("\u7f3a\u5c11 productId");case 3:return p=t.seckill?W:K,m=Object.assign({ProductId:Number(l),DepartureCityId:2},e.attachShardParams()),u&&(m.Alias=[u]),s&&(m.DepartureCityId=Number(s)),v={queryTourGroup:!0,needAlias:!0,needInventory:!0,needFlightDiscountPrice:!0},"presale_detail"!==t.pageName&&"presale_order"!==t.pageName||(v.needPreSale=!0,v.queryTourGroup=!1),"presale_order_complete"===t.pageName&&(v.needPreSale=!0,v.queryTourGroup=!1),d&&(v.needTradePrice=!0),console.log("\ud83e\udd21priceCalendarParams",{priceCalendarParams:v,props:t}),h={productParams:m,priceCalendarParams:v},g={},n.prev=15,y=(new Date).getTime(),_=e.createGqlRequest(p,h,"VPC_SelectDateProductInfo",g),n.next=20,_.fetch();case 20:if((E=n.sent)&&E.data&&E.extensions){n.next=23;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 23:if(w=(new Date).getTime(),S=E.data,I=E.extensions,e.traceKMLogAction({attrs:[{key:"productId",value:String(l)}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"fetchSelectDateProductInfo",role:f.RoleType.sys,action:f.ActionType.show,value:"".concat(w-y,"ms"),rootMessageId:Object(z.a)(null===(o=null===(a=null==I?void 0:I.SoaResponseStatus)||void 0===a?void 0:a.ResponseStatus)||void 0===o?void 0:o.Extension)}),S&&S.productInfo&&!Object(z.c)(S.productInfo.priceCalendar)){n.next=28;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 28:if("Success"===(null===(c=null===(i=S.productInfo.priceCalendar)||void 0===i?void 0:i.ResponseStatus)||void 0===c?void 0:c.Ack)){n.next=30;break}throw new Error("\u8282\u70b9\u4e0d\u5b8c\u6574");case 30:if(T=S.productInfo,"Success"===(null==(C=null==T?void 0:T.ResponseStatus)?void 0:C.Ack)){n.next=34;break}throw new Error("ResponseStatus Ack Failed");case 34:return n.abrupt("return",T);case 37:throw n.prev=37,n.t0=n.catch(15),n.t0.isNetError||e.traceKMLogError({pageName:e.pageName,message:"fetchSelectDateProductInfo->".concat((null===n.t0||void 0===n.t0?void 0:n.t0.message)||JSON.stringify(n.t0)),errorType:f.ErrorType.Ack_Fail,ex:n.t0}),new Error("fetchSelectDateProductInfo Fail: ".concat(n.t0.message));case 41:case"end":return n.stop()}}),n,null,[[15,37]])})));return function(e){return n.apply(this,arguments)}}()}}(e,t),c=he(e),l=Q(e).setProductInfo,u=!1,s=!1;Object(r.setupPreloadCallback)(w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));var d=function(){var n=w(b().mark((function n(r){var i,c,l,d,f,m,v;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.isShow,c=o.UPDATE_PROPS,i){n.next=6;break}return c({isShowSelectDate:!1}),s&&e.traceKMLogMessage("\u5173\u95ed\u9009\u62e9\u65e5\u671f\u7ec4\u4ef6"),n.abrupt("return");case 6:if(l=a.getState(),l.isInitReady){n.next=10;break}return u=!0,n.abrupt("return");case 10:if(s=!0,"resource"!==t.pageName&&"order"!==t.pageName){n.next=24;break}if(d="","RN"!==e.Platform){n.next=19;break}return n.next=16,g.getNewProcessSelectedDate();case 16:d=n.sent,n.next=23;break;case 19:return n.next=21,e.get(k.b.VPC_DATE_INFO);case 21:f=n.sent,d=(null==f?void 0:f.date)||"";case 23:p(d);case 24:"detail"!==t.pageName&&"presale_order_complete"!==t.pageName&&"cruise_detail"!==t.pageName||(m=a.getState(),v=m.selectedDateFromProps,p((void 0===v?"":v)||"")),c({isShowSelectDate:!0}),e.traceKMLogMessage("\u6253\u5f00\u9009\u62e9\u65e5\u671f\u7ec4\u4ef6");case 27:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(){var e=w(b().mark((function e(t){var n,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.getState(),r=n.priceCalendarParams,i=o.UPDATE_CALANDAR_SELECTED_DATE,t){e.next=5;break}return i(""),e.abrupt("return");case 5:if(!y.isDisabledDate(t)){e.next=8;break}return i(""),e.abrupt("return");case 8:t&&r.selectedDate!==H(t)&&i(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.isDisabledDate(t)){e.next=2;break}return e.abrupt("return");case 2:(0,o.UPDATE_CALANDAR_DISABLE_DATE)(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=w(b().mark((function e(n){var r,c,s,f,p,m,v,h,y;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.disableDates,c=o.UPDATE_PRODUCT_INFO,s=o.UPDATE_CALANDAR_DATA,f=o.UPDATE_INIT_PARAMS,o.UPDATE_CALANDAR_DISABLE_DATES,p=o.UPDATE_DATA,f(n),"presale_order_complete"===t.pageName&&(m=n.presaleOrderPassengerInfo,g.setPresalePassengerInfo(m)),e.next=7,i.fetchProductInfo(n);case 7:if(v=e.sent,l(v),h=N(v),c(h),y=O(a.getState(),t,n),!I.a.isEmpty(null==y?void 0:y.dailyMinPrices)){e.next=17;break}return p(y),e.abrupt("return",{});case 17:return s(y),u&&d({isShow:!0}),e.abrupt("return",y);case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(0),null===(r=null==t?void 0:t.onError)||void 0===r||r.call(t,e.t0),console.error("\u9009\u62e9\u65e5\u671f\u7ec4\u4ef6\u521d\u59cb\u5316\u5931\u8d25",e.t0),e.abrupt("return",{});case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),h={handleSelectDate:function(e){return w(b().mark((function n(){var r;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("order"!==(r=t.pageName)&&"resource"!==r){n.next=6;break}return n.next=4,h.handleTourSelectDate(e);case 4:n.next=19;break;case 6:if("detail"!==r){n.next=11;break}return n.next=9,h.handleDetailSelectDate(e);case 9:n.next=19;break;case 11:if("presale_order_complete"!==r){n.next=16;break}return n.next=14,h.handlePresaleOrderSelectDate(e);case 14:n.next=19;break;case 16:if("cruise_detail"!==r){n.next=19;break}return n.next=19,h.handleCruiseDetailSelectDate(e);case 19:case"end":return n.stop()}}),n)})))()},handleTourSelectDate:function(t){return w(b().mark((function n(){var r,o,i,l,u,s,d,p,v,h,_;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,o=a.getState(),o.isInitReady){n.next=4;break}return n.abrupt("return");case 4:return i=t.selectDate,l=a.getState(),u=l.pageStatus,s=y.getProductPrice(i),n.next=9,g.getNewProcessSelectedDate();case 9:if(d=n.sent,!I.a.isEmpty(s)){n.next=12;break}return n.abrupt("return");case 12:return p=(s||{}).price,e.traceKMLogAction({attrs:[{key:"productId",value:String(u.activeProductId)},{key:"page",value:r.pageName}],scene:"\u51fa\u53d1\u65e5\u671f",module:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",value:"".concat(i," / ").concat(p),before:d,action:f.ActionType.change,role:f.RoleType.usr}),g.set_VPC_DATE_INFO(s),g.setNewProcessSelectedDate(i),r.onClose(),e.showLoading(),n.next=20,c({pageName:r.pageName,productId:u.activeProductId,alias:u.activeAlias,departCityId:u.departCityId});case 20:v=n.sent,h=v.result,_=v.payload,h||"429"===(null==_?void 0:_.errorCode)||m(i),r.onSelect({result:h,payload:_}),e.hideLoading();case 25:case"end":return n.stop()}}),n)})))()},handleDetailSelectDate:function(t){return w(b().mark((function n(){var r,o,i,c,l,u,s,d;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,o=a.getState(),o.isInitReady){n.next=4;break}return n.abrupt("return");case 4:return i=t.selectDate,c=a.getState(),l=c.pageStatus,u=y.getDetailDateInfo(i),n.next=9,g.getNewProcessSelectedDate();case 9:if(s=n.sent,!I.a.isEmpty(u)){n.next=12;break}return n.abrupt("return");case 12:d=(u||{}).price,e.traceKMLogAction({attrs:[{key:"productId",value:String(l.activeProductId)},{key:"page",value:r.pageName}],scene:"\u51fa\u53d1\u65e5\u671f",module:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",value:"".concat(i," / ").concat(d),before:s,action:f.ActionType.change,role:f.RoleType.usr}),g.set_VPC_DATE_INFO(u),g.setNewProcessSelectedDate(i),r.onClose(),r.onSelect(u);case 18:case"end":return n.stop()}}),n)})))()},handlePresaleOrderSelectDate:function(t){return w(b().mark((function n(){var r,o,i,l,u,s,d,p,v,h,_,E,w;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,o=a.getState(),o.isInitReady){n.next=4;break}return n.abrupt("return");case 4:return i=t.selectDate,l=a.getState(),u=l.pageStatus,s=y.getProductPrice(i),n.next=9,g.getNewProcessSelectedDate();case 9:if(d=n.sent,!I.a.isEmpty(s)){n.next=12;break}return n.abrupt("return");case 12:return p=(s||{}).price,e.traceKMLogAction({attrs:[{key:"productId",value:String(u.activeProductId)},{key:"page",value:r.pageName}],scene:"\u51fa\u53d1\u65e5\u671f",module:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",value:"".concat(i," / ").concat(p),before:d,action:f.ActionType.change,role:f.RoleType.usr}),g.set_VPC_DATE_INFO(s),g.setNewProcessSelectedDate(i),r.onClose(),e.showLoading(),v=a.getState(),h=v.initParams,n.next=21,c({pageName:r.pageName,productId:u.activeProductId,alias:u.activeAlias,departCityId:u.departCityId,preSaleShoppingId:(null==h?void 0:h.preSaleShoppingId)||""});case 21:if(_=n.sent,E=_.result,w=_.payload,!E){n.next=29;break}return n.next=27,r.onSelect({result:E,payload:Object.assign(Object.assign({},w),{selectDate:i})});case 27:n.next=31;break;case 29:m(i),r.onSelect({result:E,payload:Object.assign(Object.assign({},w),{selectDate:i})});case 31:e.hideLoading();case 32:case"end":return n.stop()}}),n)})))()},handleCruiseDetailSelectDate:function(t){return w(b().mark((function n(){var r,o,i,c,l,u,s;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,o=a.getState(),o.isInitReady){n.next=4;break}return n.abrupt("return");case 4:if(i=t.selectDate,c=a.getState(),l=c.pageStatus,u=y.getProductPrice(i),!I.a.isEmpty(u)){n.next=9;break}return n.abrupt("return");case 9:s=(u||{}).price,e.traceKMLogAction({attrs:[{key:"productId",value:String(l.activeProductId)},{key:"page",value:r.pageName}],scene:"\u51fa\u53d1\u65e5\u671f",module:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",value:"".concat(i," / ").concat(s),action:f.ActionType.change,role:f.RoleType.usr}),r.onClose(),r.onSelect(u);case 13:case"end":return n.stop()}}),n)})))()},handleSyncDetailStorage:function(e){if(e){var t=y.getDetailDateInfo(e);I.a.isEmpty(t)||g.set_VPC_DATE_INFO(t)}}},g={getNewProcessSelectedDate:function(){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(k.b.NewProcessSelectedDate);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0="";case 5:return n=t.t0,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},getPresalePassengerInfo:function(){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(k.b.VPC_PRESALE_PASSENGER_INFO);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return n=t.t0,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},setNewProcessSelectedDate:function(n){"resource"!==t.pageName&&"order"!==t.pageName||e.set(k.b.NewProcessSelectedDate,n,86400)},setPresalePassengerInfo:function(t){e.set(k.b.VPC_PRESALE_PASSENGER_INFO,t,86400)},set_VPC_DATE_INFO:function(n){"presale_order_complete"===t.pageName?e.set(k.b.VPC_PRESALE_DATE_INFO,n,86400):e.set(k.b.VPC_DATE_INFO,n,86400)}},y={isDisabledDate:function(e){var t;if(!e)return!0;var n=(a.getState().priceCalendarParams||{}).dayConfig,r=H(e);return!(null==n?void 0:n[r])||!!(null===(t=null==n?void 0:n[r])||void 0===t?void 0:t.disable)},getProductPrice:function(e){var n=a.getState(),r=n.flatDailyMinPrice,o=n.pageStatus,i=(null==r?void 0:r[e])||[],c={};return c=o.isMultiTravel?i.find((function(e){return e.alias===o.activeAlias})):i.find((function(e){return e.productId===o.activeProductId})),I.a.isEmpty(c)?(console.warn("".concat(t.pageName,"\u5f53\u524d\u9009\u62e9\u65e5\u671f\u4e0b\u65e0\u73ed\u671f\u4fe1\u606f")),{}):Object.assign({date:e},c)},getDetailDateInfo:function(n){var r=a.getState(),o=r.flatDailyMinPrice,i=r.pageStatus;if(!I.a.isEmpty(i)){var c=(null==o?void 0:o[n])||[],l={};return i.isMultiTravel?(l=c.find((function(e){return e.alias===i.activeAlias})),I.a.isEmpty(l)&&(l=c[0])):(l=c.find((function(e){return e.productId===i.activeProductId})),I.a.isEmpty(l)&&(l=c[0])),I.a.isEmpty(l)?(console.warn("".concat(t.pageName,"\u5f53\u524d\u9009\u62e9\u65e5\u671f").concat(n,"\u4e0b\u65e0\u73ed\u671f\u4fe1\u606f")),{}):Object.assign({date:n},l)}e.traceKMLogMessage("VPC_ProductInfo \u672a\u8bf7\u6c42\u6210\u529f\u65f6\u5c1d\u8bd5\u540c\u6b65 ".concat(t.pageName," \u9875\u73ed\u671f\u7f13\u5b58"))}},_=e;return{store:a,actions:Object.assign(Object.assign({},o),{handlers:h,refreshComponent:v,updateProps:d,updateSelectedDateParams:p,updateDisabledDate:m,updateSelectedDateProps:function(e){var n=e.selectedDate;"detail"===t.pageName&&(h.handleSyncDetailStorage(n||""),(0,o.UPDATE_DATA)({selectedDateFromProps:n||""})),"cruise_detail"===t.pageName&&(0,o.UPDATE_DATA)({selectedDateFromProps:n||""}),"presale_order_complete"===t.pageName&&(0,o.UPDATE_DATA)({selectedDateFromProps:n||""})},ctrl:_})}})),Ne=n(6),Oe=n.n(Ne),xe=n(79),De=n.n(xe),je="8.55.6".replace(/(\d+)\.(\d+)\.?(\d+)?/,(function(e,t,n,r){var a=function(e,t){return(e=e.toString()).length<t&&(e=(new Array(t).join("0")+e).substr(-t)),e};return t+(n=a(n,2))+(r?a(r,3):"000")}));function Me(e){return"/restapi/soa2"+function(e){if("fat"!==De.a.env)return e;var t=e.includes("?")?"&":"?";return e+t+"subEnv=fat29"}(e)}var Ae=n(10),Re=n.n(Ae),Ve=Re.a.sendUbtByPage,Le=new p.a({platform:f.PlatformType.taro,ubtKey:"km_tour_trace_log",organizationId:"51"},Ve),Be=function(e,t){try{Ve.ubtTrace(e,JSON.stringify(t))}catch(e){console.log("\ud83d\udc38 logTrace",e)}},Fe=function(e,t){try{Ve.ubtDevTrace(e,JSON.stringify(t))}catch(e){console.log("\ud83d\udc38 logDevTrace",e)}},Ue=function(e,t){try{Ve.ubtExposure(e,t,{})}catch(e){console.log("\ud83d\udc38 createExposure",e)}},He=function(e){try{Le.logPageInfo(e)}catch(e){console.log("\ud83d\udc38 traceKMPageLogError",e)}},qe=function(e){try{Le.logActionInfo(e)}catch(e){console.log("\ud83d\udc38 traceKMLogAction",e)}},Ye=function(e){try{Le.logError(e)}catch(e){console.log("\ud83d\udc38 traceKMLogError",e)}},Ge=function(e){try{Le.logMessage(e)}catch(e){console.log("\ud83d\udc38 traceKMLogMessage",e)}},Ze=function(e,t){try{var n="";if(t.startsWith("vac_1")?n="\u7cfb\u7edf\u5f02\u5e38":t.startsWith("vac_2")?n="\u8d44\u6e90\u4e0d\u53ef\u8ba2":t.startsWith("vac_3")?n="\u7528\u6237\u8f93\u5165\u9a8c\u8bc1":t.startsWith("vac_4")&&(n="\u641c\u7d22\u65e0\u7ed3\u679c"),""===n)return;Le.logActionInfo({module:"\u963b\u65ad",scene:n,role:f.RoleType.sys,action:f.ActionType.show,value:e||"-",key:t})}catch(e){console.log("\ud83d\udc38 traceKMLogAction",e)}};function $e(e){var t;return{fetch:function(){return new Promise((function(n,r){t=Re.a.request(Object.assign(Object.assign({},e),{success:function(t){var a=t.data,o=void 0===a?{}:a,i=t.statusCode;e.url,i&&String(i).startsWith("5")&&r("\u7f51\u7edc\u5f02\u5e38: ".concat(i)),n(o)},fail:function(e){e&&"request:fail abort"===e.errMsg?r(Object.assign({name:"AbortError"},e)):r(e)}}))}))},cancel:function(){Re.a.cancel(t)}}}function ze(e,t,n){var r,a,o={url:Me(e),data:Object.assign(Object.assign({},t),(r=e,a=r.split("/")[1],"13826"===a?{ChannelId:117,PlatformChannelInfo:{ChannelId:117},DistributionChannelId:117,Version:je}:"20168"===a?{ChannelId:117,PlatformChannelInfo:{ChannelId:117},DistributionChannelId:117,Version:je,Channel:4}:{}))};return n&&n.headers&&(o=Object.assign(Object.assign({},o),{header:n.headers})),$e(o)}function Ke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(null==r?void 0:r.isDiy)?"27611":"18055",o=Me("/".concat(a,"/graphql?queryName=").concat(n)),i={};r&&r.extension&&(i.extension=r.extension);var c={url:o,data:{query:e,queryName:n,variables:t,fixVariables:1,head:i},header:Object.assign({locale:"ZH-CN","x-ctx-Locale":"ZH-CN"},r.headers)};return $e(c)}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/")&&e.split("/")[1];switch(t){case"10124":case"12446":case"12448":case"13592":return{ChannelCode:0,ChannelId:117,DistributionChannelId:117,PlatformId:2,Version:je,Locale:"zh-CN"};case"13966":case"13250":return{Channel:4,ChannelId:117,DistributionChannelId:117,Version:je};default:return{Channel:4,ChannelId:117,PlatformChannelInfo:{ChannelId:117},DistributionChannelId:117,ChannelCode:0,PlatformId:0,Version:je,Locale:"zh-CN"}}}function Xe(){var e;function t(e){try{var t=Oe.a.getStorageSync(e),n=t.value,r=t.domain,a=t.expires,o=t.timeStamp;if("tour"!==r)return null;var i=(new Date).getTime();if(a>0&&i-o>1e3*a)return null;var c=JSON.parse(n);return Fe("o_vacation_get_storage_log",{storeName:e,data:c}),c}catch(t){Fe("o_vacation_get_storage_error_log",e)}}return{tourContext:{Platform:"Taro",appVersion:je,set:function(e,t,n){try{if(!e.startsWith("VPC_"))return Oe.a.setStorage({key:e,data:t}),void Fe("o_vacation_set_storage_log",{storeName:e,value:t});var r={value:JSON.stringify(t),domain:"tour"};n&&(r.expires=n,r.timeStamp=(new Date).getTime()),Oe.a.setStorageSync(e,r),Fe("o_vacation_set_storage_log",{storeName:e,value:t})}catch(t){Fe("o_vacation_set_storage_error_log",e)}},get:(e=w(b().mark((function e(){var n=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.apply(void 0,n));case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),getSync:t,remove:function(e){try{var t={key:e,domain:"tour"};Oe.a.removeStorageSync(e),Fe("o_vacation_remove_storage_log",t)}catch(t){Fe("o_vacation_remove_storage_error_log",{storeName:e})}},showLoading:function(e){var t=e&&e.title?e.title:"\u52a0\u8f7d\u4e2d";Oe.a.showLoading({title:t,mask:!0})},hideLoading:function(){Oe.a.hideLoading()},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;Oe.a.showToast({title:e,duration:1e3*t,icon:"none"})},attachShardParams:We,createRequest:ze,createGqlRequest:Ke,logTrace:Be,logDevTrace:Fe,createExposure:Ue,traceKMPageLog:He,traceKMLogAction:qe,traceKMLogError:Ye,traceKMLogMessage:Ge,traceKMInterruption:Ze}}}var Je=n(1);function Qe(e){var t=e.style,n=void 0===t?{}:t,r=e.className,a=void 0===r?"":r,o=e.disabled,i=void 0!==o&&o,c=e.onPress,l=void 0===c?function(){}:c,u=e.onPressIn,s=void 0===u?function(){}:u,d=e.onPressOut,f=void 0===d?function(){}:d,p=e.children,m=void 0===p?null:p,v=C(Object(g.useState)(!1),2),h=v[0],_=v[1],b=n instanceof Function?n({pressed:h}):n;return y.a.createElement(Je.View,{className:a,style:b,onTouchStart:function(e){_(!0),!i&&s(e)},onTouchEnd:function(e){_(!1),!i&&f(e)},onClick:function(e){!i&&l(e)}},m)}var et,tt=n(13);function nt(e){var t=e.content,n=e.copyLink,r=void 0!==n&&n;return y.a.createElement("mp-html",{content:t,copyLink:r})}!function(e){e.e92f="&#xe92f;",e.ef39="&#xef39;",e.e931="&#xe931;",e.ef89="&#xef89;",e.e016="&#xe016;",e.ed0a="&#xed0a;",e.e93e="&#xe93e;",e.e940="&#xe940;",e.ed1f="&#xed1f;",e.e944="&#xe944;"}(et||(et={}));var rt={FontIcon:"_1gll3kh1j",color_000:"_1gll3kh1",color_111:"_1gll3kh2",color_222:"_1gll3kh3",color_333:"_1gll3kh4",color_555:"_1gll3kh5",color_666:"_1gll3kh6",color_999:"_1gll3kh7",color_aaa:"_1gll3kh8",color_ccc:"_1gll3kh9",color_eee:"_1gll3kha",color_fff:"_1gll3khb",color_ccd6e5:"_1gll3khc",color_f70:"_1gll3khd",color_0066f6:"_1gll3khe",color_0086f6:"_1gll3khf",color_287dfa:"_1gll3khg",color_5678a8:"_1gll3khh",color_89a0c2:"_1gll3khi",color_f5190a:"_1gll3khj",fs_20:"_1gll3khk",fs_22:"_1gll3khl",fs_24:"_1gll3khm",fs_26:"_1gll3khn",fs_28:"_1gll3kho",fs_30:"_1gll3khp",fs_32:"_1gll3khq",fs_34:"_1gll3khr",fs_36:"_1gll3khs",fs_38:"_1gll3kht",fs_40:"_1gll3khu",fs_42:"_1gll3khv",fs_44:"_1gll3khw",fs_46:"_1gll3khx",fs_48:"_1gll3khy",fw_400:"_1gll3khz",fw_500:"_1gll3kh10",fw_600:"_1gll3kh11",fw_700:"_1gll3kh12",fw_800:"_1gll3kh13",lh_20:"_1gll3kh14",lh_22:"_1gll3kh15",lh_24:"_1gll3kh16",lh_26:"_1gll3kh17",lh_28:"_1gll3kh18",lh_30:"_1gll3kh19",lh_32:"_1gll3kh1a",lh_34:"_1gll3kh1b",lh_36:"_1gll3kh1c",lh_38:"_1gll3kh1d",lh_40:"_1gll3kh1e",lh_42:"_1gll3kh1f",lh_44:"_1gll3kh1g",lh_46:"_1gll3kh1h",lh_48:"_1gll3kh1i"},at=function(e){return new Promise((function(t,n){var r=Oe.a.createSelectorQuery();e.forEach((function(e){r.select(e).boundingClientRect()})),r.exec((function(e){t(e)}))}))};function ot(){var e=Oe.a.getSystemInfoSync(),t=e.screenHeight,n=e.windowHeight,r=e.windowWidth,a=e.safeArea,o=e.platform,i=a.top,c=a.bottom;return a.height,{safeAreaTop:i,safeAreaBottom:t-c,windowHeight:n,windowWidth:r,isCustomHeader:t>n,isAndroid:"android"===o}}var it=ot().isAndroid;function ct(e){var t=e.children,n=e.weight,r=void 0===n?"400":n,a=e.style,o=void 0===a?{}:a,i=e.classNames,c=void 0===i?[]:i,l=function(e,t){var n=e.color,r=void 0===n?"#333":n,a=e.size,o=void 0===a?"28":a,i=e.weight,c=void 0===i?"400":i,l=e.lineHeight,u=void 0===l?"36":l,s=e.isIcon,d=void 0!==s&&s,f=e.block,p=void 0!==f&&f,m=e.icon,v=void 0===m?"":m,h="color_".concat(r.substring(1)),g="fw_".concat(c),y="fs_".concat(o),_=Number(o)>Number(u)?"lh_".concat(o):"lh_".concat(u),b={};p&&(b=Object.assign(Object.assign({},b),{display:"block"}));var E="";return v&&t?(b=Object.assign(Object.assign({},b),{fontFamily:t}),E=et[v]||""):d&&t&&(b=Object.assign(Object.assign({},b),{fontFamily:t})),{font_color:h,font_weight:g,font_size:y,line_height:_,text_style:b,icon_code:E}}(e,'"_1gll3kh0"'),u=l.font_color,s=l.font_size,d=l.font_weight,f=l.line_height,p=l.text_style,m=l.icon_code,v=[rt[u],rt[s],rt[f]];500===Number(r)&&it?v.push(rt.fw_600):v.push(rt[d]),v=[].concat(Object(tt.a)(v),Object(tt.a)(c));var h=Object.assign(Object.assign({},o),p);return m?y.a.createElement(Je.View,{className:v.join(" "),style:h},y.a.createElement(nt,{content:m})):y.a.createElement(Je.Text,{className:v.join(" "),style:h},t)}var lt={dot_container:"_1xzohsq1",dot:"_1xzohsq2",dot1:"_1xzohsq3",dot2:"_1xzohsq4",dot3:"_1xzohsq5"};function ut(){return y.a.createElement(Je.View,{className:lt.dot_container},y.a.createElement(Je.View,{className:[lt.dot,lt.dot1].join(" ")}),y.a.createElement(Je.View,{className:[lt.dot,lt.dot2].join(" ")}),y.a.createElement(Je.View,{className:[lt.dot,lt.dot3].join(" ")}))}var st={popModFull:"_9u3jdo4",popMaskClose:"_9u3jdo5",popContentFull:"_9u3jdo6",popContent:"_9u3jdo7",modalHeaderWrapper:"_9u3jdo8",modalHeader:"_9u3jdo9",modalIcon:"_9u3jdoa",modalHeaderClose:"_9u3jdob",modalHeaderConfirm:"_9u3jdoc",modalView:"_9u3jdod",modalContent:"_9u3jdoe",modalFooter:"_9u3jdof",modalFooterBtn:"_9u3jdog",modalFooterShadow:"_9u3jdoh",modalBgAnim1:"_9u3jdoi",modalBgAnim2:"_9u3jdoj",modalSlideAnim1:"_9u3jdok",modalSlideAnim2:"_9u3jdol"},dt=function(e,t,n){var r=e.show,a=e.handleClose,o=e.handleConfirm,i=C(Object(g.useState)(!1),2),c=i[0],l=i[1],u=C(Object(g.useState)(!1),2),s=u[0],d=u[1],f=function(){s||(a?a():console.warn("\u26a0\ufe0f You may forget to send handleClose as props."))},p=function(){var e=w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=5;break}return f(),e.abrupt("return");case 5:return d(!0),e.next=8,o();case 8:e.sent?(d(!1),f()):setTimeout((function(){d(!1)}),1e3);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=w(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=c&&n,!e.t0){e.next=4;break}return e.next=4,n();case 4:l(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.useEffect)((function(){r?(l(!0),t&&t()):m()}),[r]),{visible:c,loading:s,handleCloseMask:f,handlePressConfirm:p}},ft=function(){var e=ot(),t=e.windowHeight,n=e.safeAreaBottom,r=e.isCustomHeader?50:100;return{windowHeight:t,safeAreaBottom:n,modalPaddingTop:r,modalBoxMaxHeight:t-r-44}},pt=function(e){var t=e.top,n=void 0===t?0:t,r=e.footer,a=void 0!==r&&r,o=e.safeArea,i=void 0!==o&&o,c=ft(),l=c.windowHeight,u=c.safeAreaBottom,s=c.modalBoxMaxHeight;return a?s-=u+68:i&&(s-=u),{maxHeight:s-n,minHeight:0,windowHeight:l}},mt=function(e){var t=e.title,n=e.animatedDuration,r=void 0===n?350:n,a=e.confirmText,o=void 0===a?"\u786e\u8ba4":a,i=e.confirmLocation,c=void 0===i?"none":i,l=e.closeText,u=void 0===l?"":l,s=e.backgroundColor,d=void 0===s?"#fff":s,f=e.safeArea,p=void 0===f||f,m=e.footerShadow,v=void 0!==m&&m,h=e.zIndex,_=e.children,b=C(Object(g.useState)(""),2),E=b[0],w=b[1],S=C(Object(g.useState)(""),2),I=S[0],T=S[1],P=dt(e,(function(){w(st.modalBgAnim1),T(st.modalSlideAnim1)}),(function(){return new Promise((function(e){w(st.modalBgAnim2),T(st.modalSlideAnim2),setTimeout((function(){e(!0)}),r)}))})),k=P.visible,N=P.loading,O=P.handleCloseMask,x=P.handlePressConfirm,D="footer"===c,j=ft(),M=j.modalPaddingTop,A=j.safeAreaBottom,R={maxHeight:j.modalBoxMaxHeight};return k?y.a.createElement(Je.View,{className:st.popModFull,style:h?{zIndex:h}:{},catchMove:!0},y.a.createElement(Qe,{className:[st.popMaskClose,E].join(" "),style:{animationDuration:"".concat(r/1.5,"ms")},onPress:O}),y.a.createElement(Je.View,{className:[st.popContentFull,I].join(" "),style:{top:M,animationDuration:"".concat(r,"ms")}},y.a.createElement(Je.View,{className:st.popContent,style:{backgroundColor:d}},y.a.createElement(Je.View,{className:st.modalHeaderWrapper},u?y.a.createElement(Qe,{className:st.modalHeaderClose,style:function(e){return{opacity:e.pressed?.2:1}},onPress:O},y.a.createElement(ct,{size:"30",lineHeight:"42",color:"#666"},u)):y.a.createElement(Qe,{className:st.modalIcon,style:function(e){return{opacity:e.pressed?.2:1}},onPress:O},y.a.createElement(ct,{size:"34",lineHeight:"34",color:"#666",isIcon:!0},"\ue940")),y.a.createElement(Je.View,{className:st.modalHeader},y.a.createElement(ct,{size:"34",lineHeight:"42",weight:"500"},t)),"header"===c&&y.a.createElement(Qe,{className:st.modalHeaderConfirm,style:function(e){return{opacity:e.pressed?.2:1}},onPress:x},y.a.createElement(ct,{size:"30",lineHeight:"42",color:"#0086f6"},o))),y.a.createElement(Je.View,{className:st.modalView,style:R},y.a.createElement(Je.View,{className:st.modalContent},_),D&&y.a.createElement(Je.View,{className:st.modalFooter,style:{backgroundColor:d}},v&&D&&y.a.createElement(Je.View,{className:st.modalFooterShadow}),N?y.a.createElement(Je.View,{className:st.modalFooterBtn},y.a.createElement(ut,null)):y.a.createElement(Qe,{className:st.modalFooterBtn,style:function(e){return{opacity:e.pressed?.2:1}},onPress:x},y.a.createElement(ct,{size:"34",lineHeight:"42",weight:"500",color:"#fff"},o))),(p||D)&&y.a.createElement(Je.View,{style:{position:"relative",backgroundColor:d,height:A,pointerEvents:"auto"}}))))):null},vt=y.a.memo(mt),ht={container:"qyi2yk0",scroll_container:"qyi2yk1",tip_container:"qyi2yk2",tip_text:"qyi2yk3",week_container:"qyi2yk4",week_text_black:"qyi2yk5",week_text_red:"qyi2yk6",calendar_content:"qyi2yk7",month_container:"qyi2yk8",month_text:"qyi2yk9",day_container:"qyi2yka",day_item:"qyi2ykb",day_item_selected:"qyi2ykc",day_sub_text:"qyi2ykd",day_main_text:"qyi2yke",day_tip_text_3:"qyi2ykf",day_tip_text_4:"qyi2ykg"},gt=ot(),yt=gt.windowWidth,_t=gt.safeAreaBottom,bt={"01-01":"\u5143\u65e6","02-14":"\u60c5\u4eba\u8282","05-01":"\u52b3\u52a8\u8282","06-01":"\u513f\u7ae5\u8282","09-10":"\u6559\u5e08\u8282","10-01":"\u56fd\u5e86\u8282","12-25":"\u5723\u8bde\u8282"},Et=function(e,t){var n=Math.abs(new P.a(t).diffMonth(e)),r=new P.a(e).valueOf(),a=new Date(r.getFullYear(),r.getMonth(),1),o=new Date(r.setMonth(r.getMonth()+n));console.log(n,a,o);for(var i=[];o.getTime()-a.getTime()>=0;)i.push({year:a.getFullYear(),month:a.getMonth()+1}),a.setMonth(a.getMonth()+1);return i},wt=function(e){var t={workDay:{},restDay:{},holiday:{}};return JSON.parse(e.configContent).Holiday.forEach((function(e){var n=e.Year;e.HolidayList.forEach((function(e){var r=e.HolidayDay,a=e.HolidayCount,o=e.StartDay,i=e.EndDay,c=e.HolidayName,l=e.WorkDay;r&&(t.holiday["".concat(n,"-").concat(r.slice(0,2),"-").concat(r.slice(-2))]=c),l&&l.split(",").forEach((function(e){t.workDay["".concat(n,"-").concat(e.slice(0,2),"-").concat(e.slice(-2))]="\u73ed"}));for(var u=new Date("".concat(n,"/").concat(o.slice(0,2),"/").concat(o.slice(-2))),s=new Date("".concat(n,"/").concat(i.slice(0,2),"/").concat(i.slice(-2)));u.valueOf()<=s.valueOf()&&a;){var d=("0"+(u.getMonth()+1)).slice(-2),f=("0"+u.getDate()).slice(-2);t.restDay["".concat(n,"-").concat(d,"-").concat(f)]="\u4f11",u=new Date(u.setDate(u.getDate()+1))}}))})),t},St=function(){var e=w(b().mark((function e(){var t,n,r,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ne.request)({url:"https://m.ctrip.com/restapi/soa2/12378/json/getGeneralConfigData?key=Holiday",method:"GET"});case 3:return t=e.sent,n=t.data,r=n.rspJsonStr,a=JSON.parse(r),e.abrupt("return",wt(a.configList[0]));case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),It=function(e){var t=e.selectedDate,n=void 0===t?"":t,r=e.configuration,a=r.isUnChangeSelectedState,o=r.isUnSelectedClose,i=r.anchorDate;(a||o)&&i&&(n=i),console.log("getScrollViewID",n);var c=new P.a(n).valueOf();return"calendar-"+c.getFullYear()+"-"+(c.getMonth()+1)},Tt=function(e){var t=e.startDate,n=void 0===t?"2023-01-21":t,r=e.endDate,a=void 0===r?"2023-05-15":r,o=(e.currentDate,e.selectedDate),i=void 0===o?"":o,c=e.dayConfig,l=void 0===c?{}:c,u=e.configuration,s=e.onSelectDate,d=e.safeArea,f=void 0!==d&&d,p=e.handleClose,m=e.ctrl,v=(u.title,u.tipsMessage),h=u.showToday,_=u.showTomorrow,E=u.showFestival,S=void 0===E||E,I=u.isUnChangeSelectedState,T=u.isUnSelectedClose,k=u.toastMessage,N=C(Object(g.useState)({}),2),O=N[0],x=N[1];Object(g.useEffect)((function(){function e(){return(e=w(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var D=function(e,t){for(var r=e.year,o=e.month,c=new Date(n.replace(/-/g,"/")).getTime(),u=new Date(a.replace(/-/g,"/")).getTime(),s=new Date(r,o-1,1).getDay(),d=[],f=0;f<s;f++)d.push({day:""});for(var p=new Date(r,o,0).getDate(),m=("00"+o).substr(-2),v=1;v<=p;v++){var h="".concat(r,"-").concat(m,"-").concat(("00"+v).substr(-2)),g=new Date(h.replace(/-/g,"/")),y=t[h]||v,_=l[h]||{},b="",E="#111",w="";S&&(O&&Object.keys(O).length>1?O.holiday[h]&&O.restDay[h]?(b=O.holiday[h],E="#f5190a"):O.holiday[h]?b=O.holiday[h]:O.workDay[h]?(b="\u73ed",E="#111"):O.restDay[h]&&(b="\u4f11",E="#f5190a"):(b=bt["".concat(m,"-").concat(("00"+v).substr(-2))],E="#111")),h===i&&(w+=" anchorDate");var I=!1;(_.disable||g<c||g>u)&&(I=!0);var T={date:h,day:y,supStr:b,supStrColor:E,disable:I,option:_,className:w};d.push(T)}return d},j=(yt-6-6)/7,M={width:j,minHeight:j},A=function(){var e=Et(n,a),t={};if(h){var r=(new P.a).format("YYYY-MM-DD");t[r]="\u4eca\u5929"}if(_){var o=(new P.a).addDay(1).format("YYYY-MM-DD");t[o]="\u660e\u5929"}return e.map((function(e){var n=e.year,r=e.month,a=D({year:n,month:r},t);return{year:n,month:r,showMonth:"".concat(n,"\u5e74").concat(r,"\u6708"),dayLists:a}}))}(),R=function(e){s&&s({selectDate:e})},V=pt({top:59,footer:!1,safeArea:!1});return y.a.createElement(Je.View,{className:ht.container},!!v&&y.a.createElement(Je.View,{className:ht.tip_container},y.a.createElement(Je.Text,{className:ht.tip_text},v)),y.a.createElement(Je.View,{className:ht.week_container},y.a.createElement(Je.Text,{className:ht.week_text_red},"\u65e5"),y.a.createElement(Je.Text,{className:ht.week_text_black},"\u4e00"),y.a.createElement(Je.Text,{className:ht.week_text_black},"\u4e8c"),y.a.createElement(Je.Text,{className:ht.week_text_black},"\u4e09"),y.a.createElement(Je.Text,{className:ht.week_text_black},"\u56db"),y.a.createElement(Je.Text,{className:ht.week_text_black},"\u4e94"),y.a.createElement(Je.Text,{className:ht.week_text_red},"\u516d")),y.a.createElement(Je.ScrollView,{scrollY:!0,scrollWithAnimation:!0,scrollIntoView:It(e),className:ht.scroll_container,style:V},y.a.createElement(Je.View,{className:ht.calendar_content},A.map((function(e){var t=e.year,n=e.month,r=e.showMonth,a=e.dayLists;return y.a.createElement(y.a.Fragment,null,y.a.createElement(Je.View,{className:ht.month_container,id:"calendar-"+t+"-"+n},y.a.createElement(Je.Text,{className:ht.month_text},r)),y.a.createElement(Je.View,{className:ht.day_container},a.map((function(e,t){var n=e.date,r=e.day,a=e.disable,o=e.supStr,c=e.supStrColor,l=e.option,u=void 0===l?{}:l,s="#111",d="#f5190a";return a?(c="#ccc",s="#ccc",d="#ccc"):(1===(null==u?void 0:u.titleColorType)?s="#ff7700":2===(null==u?void 0:u.titleColorType)?s="#f5190a":3===(null==u?void 0:u.titleColorType)&&(s="#00b87a"),1===(null==u?void 0:u.subTitleColorType)?d="#00b87a":(2===(null==u?void 0:u.subTitleColorType)||3===(null==u?void 0:u.subTitleColorType))&&(d="#0086f6"),1===u.dayDefaultColorType&&(c="#ccc",s="#ccc")),n===i?y.a.createElement(Je.View,{key:t,className:[ht.day_item,ht.day_item_selected].join(" "),style:M,onClick:function(){I||T?k&&m.showToast(k,1):!a&&n&&(null==p||p(),R(n))}},y.a.createElement(Je.Text,{className:ht.day_sub_text,style:{color:"#fff"}},o||""),y.a.createElement(Je.Text,{className:ht.day_main_text,style:{color:"#fff"}},r),y.a.createElement(Je.Text,{className:ht.day_tip_text_3,style:{color:"#fff"}},u.title),y.a.createElement(Je.Text,{className:ht.day_tip_text_4,style:{color:"#fff"}},u.subTitle)):y.a.createElement(Je.View,{key:t,className:ht.day_item,style:M,onClick:function(){I||T?k&&m.showToast(k,1):!a&&n&&(null==p||p(),R(n))}},y.a.createElement(Je.Text,{className:ht.day_sub_text,style:{color:c}},o||""),y.a.createElement(Je.Text,{className:ht.day_main_text,style:{color:c}},r),y.a.createElement(Je.Text,{className:ht.day_tip_text_3,style:{color:s}},u.title),y.a.createElement(Je.Text,{className:ht.day_tip_text_4,style:{color:d}},u.subTitle))}))))})),f&&y.a.createElement(Je.View,{style:{height:_t,flexShrink:0}}))))},Ct=function(e){var t,n=ke.useState((function(e){return{isInitReady:e.isInitReady,isShowSelectDate:e.isShowSelectDate}})),r=n.isInitReady,a=n.isShowSelectDate,o=ke.useActions(),i=o.refreshComponent,c=o.handlers,l=o.ctrl,u=o.updateSelectedDateProps,s=o.updateProps,d=c.handleSelectDate,f=e.isShow,p=e.onRef,m=e.onClose,v=e.selectedDate,h=Ot(),_=(null===(t=null==h?void 0:h.configuration)||void 0===t?void 0:t.title)||"";return Object(g.useMemo)((function(){s({isShow:f})}),[f]),Object(g.useMemo)((function(){r&&u({selectedDate:v})}),[v,r]),Object(g.useMemo)((function(){p&&p({initCalendar:function(e){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},handleSyncSelectDateStorage:function(e){return w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u({selectedDate:e});case 1:case"end":return t.stop()}}),t)})))()}})}),[]),y.a.createElement(vt,{title:_,show:a&&r,handleClose:m,safeArea:!1},y.a.createElement(Tt,Object.assign({},h,{ctrl:l,onSelectDate:d,safeArea:!0})))},Pt=function(e){var t,n=ke.useState((function(e){return{isInitReady:e.isInitReady,isShowSelectDate:e.isShowSelectDate}})),r=n.isInitReady,a=n.isShowSelectDate,o=ke.useActions(),i=o.refreshComponent,c=o.updateProps,l=o.ctrl,u=e.isShow,s=e.onRef,d=e.onClose,f=Ot(),p=(null===(t=null==f?void 0:f.configuration)||void 0===t?void 0:t.title)||"";return Object(g.useMemo)((function(){c({isShow:u})}),[u]),Object(g.useMemo)((function(){s&&s({initCalendar:function(e){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()}})}),[]),y.a.createElement(vt,{title:p,show:a&&r,handleClose:d,safeArea:!1},y.a.createElement(Tt,Object.assign({},f,{ctrl:l,safeArea:!0})))},kt=function(e){var t,n=ke.useState((function(e){return{isInitReady:e.isInitReady,isShowSelectDate:e.isShowSelectDate}})),r=n.isInitReady,a=n.isShowSelectDate,o=ke.useActions(),i=o.refreshComponent,c=o.updateProps,l=o.handlers,u=o.ctrl,s=l.handleSelectDate,d=e.isShow,f=e.onRef,p=e.onClose,m=Ot(),v=(null===(t=null==m?void 0:m.configuration)||void 0===t?void 0:t.title)||"";return Object(g.useMemo)((function(){c({isShow:d})}),[d]),Object(g.useMemo)((function(){f&&f({initCalendar:function(e){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},handleSelectDate:function(e){return w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(e);case 1:case"end":return t.stop()}}),t)})))()}})}),[]),y.a.createElement(vt,{title:v,show:a&&r,handleClose:p,safeArea:!1},y.a.createElement(Tt,Object.assign({},m,{ctrl:u,onSelectDate:s,handleClose:p,safeArea:!0})))},Nt=function(e){var t,n=ke.useState((function(e){return{isInitReady:e.isInitReady,isShowSelectDate:e.isShowSelectDate}})),r=n.isInitReady,a=n.isShowSelectDate,o=ke.useActions(),i=o.refreshComponent,c=o.updateProps,l=o.updateSelectedDateProps,u=o.handlers,s=o.ctrl,d=u.handleSelectDate,f=e.isShow,p=e.onRef,m=e.onClose,v=e.selectedDate,h=Ot(),_=(null===(t=null==h?void 0:h.configuration)||void 0===t?void 0:t.title)||"";return Object(g.useMemo)((function(){c({isShow:f})}),[f]),Object(g.useMemo)((function(){r&&l({selectedDate:v})}),[r,v]),Object(g.useMemo)((function(){p&&p({initCalendar:function(e){return w(b().mark((function t(){var n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},handleSelectDate:function(e){return w(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(e);case 1:case"end":return t.stop()}}),t)})))()}})}),[]),y.a.createElement(vt,{title:_,show:a&&r,handleClose:m,safeArea:!1},y.a.createElement(Tt,Object.assign({},h,{ctrl:s,onSelectDate:d,handleClose:m,safeArea:!0})))},Ot=function(){var e=ke.useState((function(e){return{priceCalendarParams:e.priceCalendarParams}})).priceCalendarParams;if(I.a.isEmpty(e))return null;var t=I.a.cloneDeep(e),n=e.startDate,r=e.endDate,a=e.selectedDate,o=e.configuration,i=o.isUnChangeSelectedState,c=o.isUnSelectedClose,l=o.anchorDate;t.startDate=xt(n),t.endDate=xt(r),t.selectedDate=xt(a),t.currentDate=xt(a),(i||c)&&l&&(t.configuration.anchorDate=xt(l));var u={};return Object.keys(e.dayConfig).map((function(t){u[xt(t)]=e.dayConfig[t]})),t.dayConfig=u,t},xt=function(e){return e?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2):""},Dt=function(e){return"detail"===e.pageName?y.a.createElement(Ct,Object.assign({},e)):"presale_detail"===e.pageName||"presale_order"===e.pageName?y.a.createElement(Pt,Object.assign({},e)):"presale_order_complete"===e.pageName?y.a.createElement(Nt,Object.assign({},e)):"resource"===e.pageName||"order"===e.pageName?y.a.createElement(kt,Object.assign({},e)):void 0},jt=y.a.memo(Mt);function Mt(e){return y.a.createElement(At,Object.assign({},e),y.a.createElement(Dt,Object.assign({},e)))}function At(e){var t=y.a.useMemo((function(){var t=[S.PlatformContext.create({}),S.TourContext.create(Object.assign(Object.assign({},Xe().tourContext),{props:e,pageName:e.pageName,Platform:"Taro"}))];return r.mergeModelContext.apply(void 0,t)}),[]);return y.a.createElement(ke.Provider,{context:t},e.children)}var Rt={INIT_DRAFT:function(e,t){return Object.assign({internalInited:!0},t)},UPDATE_DRAFT:function(e,t){var n=e.tempCount;return Object.assign(Object.assign({},e),{tempCount:Object.assign(Object.assign({},n),t),errorInfo:null})},DISCARD_DRAFT:function(e){var t=e.initCount;return Object.assign(Object.assign({},e),{tempCount:t,errorInfo:null})},SAVE_DRAFT:function(e){var t=e.tempCount;return Object.assign(Object.assign({},e),{initCount:t,errorInfo:null,internalDiasbleMaskClose:!1})},UPDATE_ERRORINFO:function(e,t){return Object.assign(Object.assign({},e),{errorInfo:t})},INTERNAL_SHOW:function(e,t){return Object.assign(Object.assign({},e),{internalShow:t})},DISABLE_ACTION:function(e,t){return Object.assign(Object.assign({},e),{internalDisableAction:t})},DISABLE_SCROLL:function(e,t){return Object.assign(Object.assign({},e),{internalDisableScroll:t})},UPDATE_FEEINCLUDE_TYPE:function(e,t){return Object.assign(Object.assign({},e),{feeIncludeType:t})}},Vt={internalShow:!1,internalInited:!1,internalDisableAction:!1,internalDisableScroll:!1},Lt=Object(a.createReactModel)((function(){var e=Object(S.setupTourContext)(),t=e.props,n=Object(r.setupStore)({name:"isomorphic_select_passenger_components",initialState:Vt,reducers:Rt,logger:z.b&&!z.d&&!!t.logger}),a=n.store,o=n.actions,i=he(e),c=Q(e),l=c.getProductInfo,u=c.fetchProductInfo,s=ve(e),d=null,p=null,m=function(){var n=w(b().mark((function n(){var r,o;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v();case 2:if(d=n.sent){n.next=6;break}throw console.error("\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6: \u7f3a\u5c11productInfo"),new Error("\u7f3a\u5c11productInfo");case 6:if("presale_order"!==t.pageName){n.next=11;break}p={date:"2099-01-01",displayPrice:-1,inventory:t.inventory},E(t.passengerInfo),n.next=19;break;case 11:return n.next=13,e.get(k.b.VPC_DATE_INFO);case 13:if(p=n.sent){n.next=17;break}throw console.error("\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6: \u7f3a\u5c11\u73ed\u671f"),new Error("\u7f3a\u5c11\u73ed\u671f");case 17:h(),"function"==typeof t.onInit&&(r=a.getState(),o=r.tempCount,t.onInit(o));case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(r.setupPreloadCallback)(m);var v=function(){var e=w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,l(t.cacheKey);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:return e.prev=6,r=ee(t.cacheKey),e.next=10,u(r);case 10:return n=e.sent,e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),h=function(){if(!a.getState().internalInited){var t=o.INIT_DRAFT,n=re(d,p),r=s.getPassengerInfo(),i=null,c=null,l=!1;if("RN"===e.Platform){var u=function(e,t){var n=e.adultCanBook,r=e.childCanBook,a=e.infantCanBook,o=e.childAgeRequired,i=e.childMinAge,c=e.childMaxAge,l=fe(e,t),u=l.result,s=l.initCount;if(u&&2===u.scene)return u.reason+="\uff0c\u5df2\u4e3a\u60a8\u8c03\u6574\u4eba\u6570",{initCount:s,errorInfo:u};if(u&&1===u.scene)return"vac_30120"!==u.vac_code&&(u.reason=""),{initCount:s,errorInfo:u};if(u&&3===u.scene){var d={adultCount:0,childCount:0,infantCount:0,childAges:[]};return n&&(d.adultCount=(null==t?void 0:t.adultCount)||0),r&&(d.childCount=(null==t?void 0:t.childCount)||0),a&&(d.infantCount=(null==t?void 0:t.infantCount)||0),o&&(null==t?void 0:t.childAges)&&t.childAges.forEach((function(e){e>=i&&e<c&&d.childAges.push(e)})),"vac_30121"!==u.vac_code&&(u.reason=""),{initCount:d,errorInfo:u}}return u&&5===u.scene?{autoShow:!0,initCount:t,errorInfo:u}:{initCount:s,errorInfo:u}}(n,r);i=u.errorInfo,c=u.initCount,l=i&&3===i.scene}else{var m=pe(n,r);i=m.errorInfo,c=m.initCount}var v=!1;e.getSync(k.b.VPC_HAS_AUTO_SHOW)?(v=!1,i=null):i&&(v=!0,e.set(k.b.VPC_HAS_AUTO_SHOW,!0)),i&&i.scene&&e.logTrace("grp_resource_psgnum_show",{scene:i.scene}),e.traceKMLogAction({attrs:[{key:"productId",value:String(n.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u521d\u59cb\u5316\u5b8c\u6210",role:f.RoleType.sys,action:f.ActionType.show,contents:[{key:"\u72b6\u6001",value:v?"\u6253\u5f00":"\u5173\u95ed"},{key:"\u521d\u59cb\u4eba\u6570",value:de(c)},{key:"\u539f\u56e0",value:v?i.reason:""}]}),t({internalShow:v,initCount:l?{adultCount:0,childCount:0,infantCount:0,childAges:[]}:c,tempCount:c,errorInfo:i,productProperty:n,internalDiasbleMaskClose:l})}},g=function(){var t=a.getState(),n=t.tempCount,r=t.productProperty,i=o.UPDATE_ERRORINFO,c=oe(r,n),l=se(r,n);return l&&(c=l),c&&e.traceKMLogAction({attrs:[{key:"productId",value:String(r.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u68c0\u67e5\u4eba\u6570\u4e0d\u901a\u8fc7",role:f.RoleType.sys,action:f.ActionType.show,value:c.reason+c.show}),c&&c.vac_code&&e.traceKMInterruption(c.vac_desc,c.vac_code),i(c),null===c},y=function(){var n=w(b().mark((function n(){var r,c,l,u,d,f,p,m,v,h;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=a.getState(),c=r.tempCount,l=r.initCount,u=r.productProperty,d=u.childMinAge,f=u.childMaxAge,p=o.SAVE_DRAFT,m=o.DISABLE_ACTION,g()){n.next=6;break}return n.abrupt("return",!1);case 6:if(c.adultCount===l.adultCount&&c.childCount===l.childCount&&c.infantCount===l.infantCount&&c.childAges.toString()===l.childAges.toString()){n.next=25;break}if(e.logTrace("grp_resource_psgnum_edit"),p(),s.setPassengerInfo(c,[d,f]),v=ee(t.cacheKey),m(!0),"presale_order"!==t.pageName){n.next=18;break}return n.next=15,i(Object.assign(Object.assign({pageName:t.pageName},v),{inventory:t.inventory}));case 15:h=n.sent,n.next=21;break;case 18:return n.next=20,i(Object.assign({pageName:t.pageName},v));case 20:h=n.sent;case 21:return m(!1),t.onSubmit(h),_(),n.abrupt("return",!0);case 25:return p(),s.setPassengerInfo(c,[d,f]),n.abrupt("return",!0);case 28:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),_=function(){if("presale_order"!==t.pageName){var n=a.getState(),r=n.productProperty,o=n.initCount,i=r.productType,c=r.adultCanBook,l=r.childCanBook,u=r.infantCanBook,s=c?o.adultCount:null,d=l?o.childCount:null,f=u&&"sdp"===i?o.infantCount:null;"RN"===e.Platform&&e.logTrace("grp_resource_psgnumselect_confirm_click",{psgtype:me({adultCanBook:c,childCanBook:l,infantCanBook:u}),adultcount:s,childCount:d,infantCount:f}),t.onUpdate&&t.onUpdate({adultCount:s,childCount:d,infantCount:f})}},E=function(t){if(!a.getState().internalInited){var n=o.INIT_DRAFT,r=re(d,p||{}),i=t||s.getPassengerInfo(),c=pe(r,i),l=(c.errorInfo,c.initCount);e.traceKMLogAction({attrs:[{key:"productId",value:String(r.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u521d\u59cb\u5316\u5b8c\u6210",role:f.RoleType.sys,action:f.ActionType.show,contents:[{key:"\u521d\u59cb\u4eba\u6570",value:de(l)}]}),n({initCount:l,tempCount:l,errorInfo:null,productProperty:r}),_()}};return{store:a,actions:Object.assign(Object.assign({},o),{handleInitDraft:h,handleUpdateAdultCount:function(t){var n=a.getState(),r=n.productProperty,i=n.tempCount,c=o.UPDATE_DRAFT;e.traceKMLogAction({attrs:[{key:"productId",value:String(r.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u66f4\u65b0\u6210\u4eba\u6570",role:f.RoleType.usr,action:f.ActionType.change,value:String(t),before:String(i.adultCount)}),c({adultCount:t}),"RN"===e.Platform&&e.logTrace("grp_resource_psgnumselect_modify_click",{type:"\u6210\u4eba"})},handleUpdateChildCount:function(t){var n=a.getState(),r=n.tempCount,i=n.productProperty,c=i.childAgeRequired,l=r.childCount,u=r.childAges,s=o.UPDATE_DRAFT;e.traceKMLogAction({attrs:[{key:"productId",value:String(i.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u66f4\u65b0\u513f\u7ae5\u6570",role:f.RoleType.usr,action:f.ActionType.change,value:String(t),before:String(r.childCount)}),s(c?l>t?{childCount:t,childAges:u.slice(0,-1)}:{childCount:t,childAges:[].concat(Object(tt.a)(u),[0])}:{childCount:t}),"RN"===e.Platform&&e.logTrace("grp_resource_psgnumselect_modify_click",{type:"\u513f\u7ae5"})},handleUpdateChildAge:function(t){var n=a.getState(),r=n.productProperty,i=n.tempCount,c=o.UPDATE_DRAFT;e.traceKMLogAction({attrs:[{key:"productId",value:String(r.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u66f4\u65b0\u513f\u7ae5\u5e74\u9f84",role:f.RoleType.usr,action:f.ActionType.change,value:String(t),before:String(i.childAges)}),c({childAges:t})},handleUpdateInfantCount:function(t){var n=a.getState(),r=n.productProperty,i=n.tempCount,c=o.UPDATE_DRAFT;e.traceKMLogAction({attrs:[{key:"productId",value:String(r.line)}],module:"\u9009\u62e9\u4eba\u6570\u7ec4\u4ef6",scene:"\u66f4\u65b0\u5a74\u513f\u6570",role:f.RoleType.usr,action:f.ActionType.change,value:String(t),before:String(i.infantCount)}),c({infantCount:t}),"RN"===e.Platform&&e.logTrace("grp_resource_psgnumselect_modify_click",{type:"\u5a74\u513f"})},handleDiscardDraft:function(){(0,o.DISCARD_DRAFT)()},handleSubmitDraft:y,handleSyncExternalShow:function(e){var t=a.getState().internalShow,n=o.INTERNAL_SHOW;t!==e&&n(e)},handleEnableScroll:function(e){(0,o.DISABLE_SCROLL)(!e)},handleClickTip:function(t){(0,o.UPDATE_FEEINCLUDE_TYPE)(t),e.traceKMLogMessage("\u6253\u5f00\u8d39\u7528\u5305\u542b\u7ec4\u4ef6")},handleClearTip:function(){(0,o.UPDATE_FEEINCLUDE_TYPE)(""),e.traceKMLogMessage("\u5173\u95ed\u8d39\u7528\u5305\u542b\u7ec4\u4ef6")},handleInitDraft_PreSale:E})}})),Bt={countContainer:"_1li4j60",countBtnPressable:"_1li4j61",pr35:"_1li4j62",pl35:"_1li4j63",countText:"_1li4j64"},Ft=function(e){var t=function(e){var t=e.min,n=e.max,r=e.value,a=e.step,o=e.throttleWait,i=void 0===o?200:o,c=e.onChange,l=e.disabled,u=void 0!==l&&l,s=r+a<=n,d=r-a>=t,f=Object(g.useRef)();return{isDecreaseActive:!u&&d,isIncreaseActive:!u&&s,handleDecrease:function(){if(d&&!f.current){var e=r-a;c(e),i>0&&(f.current=setTimeout((function(){return f.current=void 0}),i)),e===t&&(f.current=void 0)}},handleIncrease:function(){if(s&&!f.current){var e=r+a;c(e),i>0&&(f.current=setTimeout((function(){return f.current=void 0}),i)),e===n&&(f.current=void 0)}}}}(e),n=t.isDecreaseActive,r=t.isIncreaseActive,a=t.handleDecrease,o=t.handleIncrease,i=n?"#0086f6":"#ddd",c=r?"#0086f6":"#ddd";return y.a.createElement(Je.View,{className:Bt.countContainer},y.a.createElement(Qe,{className:[Bt.countBtnPressable,Bt.pl35].join(" "),style:function(e){return{opacity:e.pressed?.2:1}},disabled:!n,onPress:a},y.a.createElement(ct,{size:"44",lineHeight:"44",isIcon:!0,style:{color:i}},"\ued0a")),y.a.createElement(Je.Text,{className:Bt.countText},e.value),y.a.createElement(Qe,{className:[Bt.countBtnPressable,Bt.pr35].join(" "),style:function(e){return{opacity:e.pressed?.2:1}},disabled:!r,onPress:o},y.a.createElement(ct,{size:"44",lineHeight:"44",isIcon:!0,style:{color:c}},"\ue93e")))},Ut=y.a.memo(Ft),Ht="_1e8qlgh0",qt="_1e8qlgh1",Yt="_1e8qlgh2",Gt="_1e8qlgh3",Zt="_1e8qlgh4",$t="_1e8qlgh5",zt="_1e8qlgh6",Kt=function(e){var t=e.value,n=e.valueFormatter;return y.a.createElement(Je.View,{className:Gt},!Number.isNaN(t)&&y.a.createElement(Je.View,{className:$t},y.a.createElement(ct,{size:"24",lineHeight:"32",color:"#fff"},n(t)),y.a.createElement(Je.View,{className:zt})),y.a.createElement(Qe,{className:Zt,style:function(e){return{opacity:e.pressed?.8:1}}}))},Wt=function(e){var t=e.id,n=e.min,r=e.max,a=e.value,o=e.width,i=e.startX,c=void 0===i?0:i,l=e.valueFormatter,u=void 0===l?function(e){return e+""}:l,s=e.onChangeStart,d=e.onChangeEnd,f=e.disabled,p=void 0!==f&&f,m=C(Object(g.useState)(0),2),v=m[0],h=m[1],_=Object(g.useRef)(v),b=Object(g.useRef)(o),E=Object(g.useRef)(NaN);Object(g.useMemo)((function(){a>=n&&a<=r&&o>0?(b.current=o,E.current=a,_.current=(a-n)/(r-n)*o,h((a-n)/(r-n)*o)):(b.current=o,E.current=NaN,_.current=0,h(0))}),[a,n,r,o]);var w=v;return Number.isNaN(E.current)||E.current===n?w=0:E.current===r?w-=24:w-=12,y.a.createElement(Je.View,{style:{position:"relative"}},y.a.createElement(Qe,{className:Ht,onPressIn:function(e){if(e.touches&&0!==e.touches.length){var a=e.touches[0].pageX-c-_.current,i=(_.current+a)/o*(r-n)+n;i>=n&&i<=r&&d(Math.round(i),t)}}},y.a.createElement(Je.View,{className:qt}),y.a.createElement(Je.View,{className:Yt,style:{width:v}})),p?y.a.createElement(Je.View,{style:{position:"relative",left:w}},y.a.createElement(Kt,{value:E.current,valueFormatter:u})):y.a.createElement(Je.View,{style:{position:"relative",left:w},onTouchStart:function(e){s()},onTouchMove:function(e){if(e.touches&&0!==e.touches.length){var t=e.touches[0].pageX-c-_.current,a=_.current+t;if(a>0&&a<b.current){h(a);var o=a/b.current*(r-n)+n;E.current=Math.round(o)}}},onTouchEnd:function(){E.current>=n&&E.current<=r&&d(E.current,t)}},y.a.createElement(Kt,{value:E.current,valueFormatter:u})))},Xt=y.a.memo(Wt),Jt={UPDATE_FEEINFO:function(e,t){return Object.assign(Object.assign({},t),{internalInited:!0})}},Qt={internalInited:!1},en=Object(a.createReactModel)((function(){var e=Object(S.setupTourContext)(),t=e.props,n=Object(r.setupStore)({name:"isomorphic_fee_include_components",initialState:Qt,reducers:Jt,logger:z.b&&!z.d&&!!t.logger}),a=n.store,o=n.actions,i=Q(e),c=i.getProductInfo,l=i.fetchProductInfo;Object(r.setupPreloadCallback)(w(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent){e.next=6;break}return console.error("\u8d39\u7528\u5305\u542b\u7ec4\u4ef6: \u7f3a\u5c11productInfo"),e.abrupt("return");case 6:s(t);case 7:case"end":return e.stop()}}),e)}))));var u=function(){var e=w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,c(t.cacheKey);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:return e.prev=6,r=ee(t.cacheKey),e.next=10,l(r);case 10:return n=e.sent,e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),s=function(e){(0,o.UPDATE_FEEINFO)(function(e){var t=e.BasicInfo,n=e.BasicExtendInfo.PriceStandardList,r=e.FeeInfoList,a=r&&r.find((function(e){return"15"===e.SubTitleCode})),o=a&&a.ProductClauseList,i=[],c=!1,l="",u="";n.forEach((function(e){var t=e.PassengerType,n=e.IsCanBook,r=e.MinHeight,a=e.MaxHeight,o=e.MinAge,s=e.MaxAge,d=e.Title;c=Boolean(2===t&&n&&(r||a)&&(o||s)),i.push({Type:t,IsCanBook:n}),1===t&&(l="\u6210\u4eba\u3010".concat(d,"\u3011")),2===t&&(u="\u513f\u7ae5\u3010".concat(d,"\u3011"))})),i=i.sort((function(e,n){return t.isStudy?n.Type-e.Type:e.Type-n.Type}));var s=t.isStudy?"\u4e3a\u6210\u4eba\u4e0e\u513f\u7ae5\u6709\u5dee\u5f02\u7684\u9879\u76ee\uff0c\u8bf7\u7279\u522b\u7559\u610f":"\u4e3a\u513f\u7ae5\u4e0e\u6210\u4eba\u6709\u5dee\u5f02\u7684\u9879\u76ee\uff0c\u8bf7\u7279\u522b\u7559\u610f";return{feeInclude:o,isShowChildHeightTip:c,displayPriceStandardList:i,childDiffTip:s,childHeightTip:c?"\u6ee1\u8db3\u5e74\u9f84\u6761\u4ef6\u7684\u513f\u7ae5\u8eab\u9ad8\u4e0d\u7b26\u65f6\uff0c\u8bf7\u6309\u513f\u7ae5\u4e0b\u5355\uff0c\u53ef\u80fd\u4f1a\u6d89\u53ca\u73b0\u573a\u8865\u5dee\u4ef7\uff0c\u7531\u670d\u52a1\u4eba\u5458\u73b0\u573a\u534f\u52a9\u5904\u7406\uff0c\u5177\u4f53\u5dee\u4ef7\u91d1\u989d\u4ee5\u73b0\u573a\u62a5\u4ef7\u4e3a\u51c6\u3002":"",adultTitle:l,childTitle:u}}(e))};return{store:a,actions:Object.assign(Object.assign({},o),{handleJumpH5:function(t){try{e.jumpH5(t)}catch(e){console.warn(e)}}})}})),tn="_13i19r30",nn="_13i19r31",rn="_13i19r32",an="_13i19r33",on="_13i19r34",cn="uuqg5z0",ln="uuqg5z1",un="uuqg5z2",sn="uuqg5z3",dn="uuqg5z4",fn="uuqg5z5",pn="uuqg5z6",mn="uuqg5z7",vn=ot().safeAreaBottom,hn={1:"\u6210\u4eba",2:"\u513f\u7ae5",adult:1,child:2},gn=function(e){var t=e.isShow,n=e.type,r=void 0===n?"adult":n,a=e.onClose,o=e.zIndex,i=C(Object(g.useState)(hn[r]),2),c=i[0],l=i[1];Object(g.useMemo)((function(){"adult"!==r&&"child"!==r||l(hn[r])}),[r]);var u=en.useState(),s=u.internalInited,d=u.feeInclude,f=u.displayPriceStandardList,p=u.childDiffTip,m=u.childHeightTip,v=u.adultTitle,h=u.childTitle;if(!s||Object(z.c)(d))return null;var _=2===c,b="";1===c?b=v:2===c&&(b=h);var E=pt({top:32,footer:!1,safeArea:!1});return y.a.createElement(vt,{title:"\u8d39\u7528\u5305\u542b",show:t,handleClose:a,safeArea:!1,zIndex:o},y.a.createElement(Je.View,{className:nn},f.map((function(e,t){var n=e.Type,r=e.IsCanBook;if(!hn[n])return null;if(!r)return y.a.createElement(Je.View,{className:rn},y.a.createElement(ct,{lineHeight:"40",weight:"500",color:"#ccc"},hn[n]+"\u4e0d\u53ef\u8ba2"));var a=n===c;return y.a.createElement(Qe,{key:t,className:rn,onPress:function(){return l(n)}},y.a.createElement(ct,{lineHeight:"40",weight:"500",color:a?"#0086f6":"#333"},hn[n]),a&&y.a.createElement(Je.View,{className:an}))}))),y.a.createElement(Je.ScrollView,{scrollY:!0,scrollWithAnimation:!0,style:E},y.a.createElement(Je.View,{className:tn},_&&y.a.createElement(Je.View,{className:on},y.a.createElement(ct,{size:"26",lineHeight:"38",color:"#f70",isIcon:!0,style:{paddingRight:4}},"\ue92f"),y.a.createElement(ct,{lineHeight:"40",color:"#666",style:{flex:1}},p)),!!_&&!!m&&y.a.createElement(Je.View,{className:on},y.a.createElement(ct,{size:"26",lineHeight:"38",color:"#f70",isIcon:!0,style:{paddingRight:4}},"\ue92f"),y.a.createElement(ct,{lineHeight:"40",color:"#666",style:{flex:1}},m)),y.a.createElement(Je.View,{className:cn},y.a.createElement(Je.View,{className:ln,style:{padding:12}},y.a.createElement(ct,{lineHeight:"40",weight:"500"},b)),d.map((function(e){var t=e.ClauseTypeName,n=e.ClauseSubItemList,r=_&&n.some((function(e){return 0!==e.DifferenceType}));return y.a.createElement(Je.View,{key:t,className:un},y.a.createElement(Je.View,{className:sn},r&&y.a.createElement(ct,{size:"26",lineHeight:"38",color:"#f70",isIcon:!0,style:{paddingRight:4}},"\ue92f"),y.a.createElement(ct,{lineHeight:"40",weight:"500"},t)),y.a.createElement(Je.View,{className:dn},n.map((function(e,t){var n=e.SubTitle,r=e.TargetPopulationItemList,a=[];if(null==r||r.forEach((function(e){var t,n=e.Description,r=e.TargetPopulation,o=e.IsHighlight;[1,c+1].includes(r)&&a.push({description:(t=n,t?t.replace(/<[\/]?[^<>]+>/g,(function(e){var t=(null==e?void 0:e.toLowerCase())||"";return 0===t.indexOf("<a>")||0===t.indexOf("<a ")||0===t.indexOf("</a>")?e:""})):""),isHighLight:o})})),a.length>1)return y.a.createElement(Je.View,{key:t,className:fn},!!n&&y.a.createElement(ct,{lineHeight:"40",color:"#666"},n+"\uff1a"),a.map((function(e,t){var n=e.description,r=e.isHighLight?mn:pn;return y.a.createElement(Je.View,{key:t,className:r},y.a.createElement(nt,{content:n,copyLink:!1}))})));var o=null==a?void 0:a[0].description,i=e.isHighLight?mn:pn;return y.a.createElement(Je.View,{key:t,className:"".concat(fn," ").concat(i)},y.a.createElement(nt,{content:o,copyLink:!1}))}))))}))),y.a.createElement(Je.View,{style:{height:vn}}))))},yn=y.a.memo(gn),_n=y.a.memo(bn);function bn(e){return y.a.createElement(En,Object.assign({},e),y.a.createElement(yn,Object.assign({},e)))}function En(e){var t=Object(g.useMemo)((function(){var t=[S.PlatformContext.create({}),S.TourContext.create(Object.assign(Object.assign({},Xe().tourContext),{props:e}))];return r.mergeModelContext.apply(void 0,t)}),[]);return y.a.createElement(en.Provider,{context:t},e.children)}var wn="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/resource/private_service_assistant.png",Sn="https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/resource/private_service_pattern.png",In={privateServiceBox:"_1cdkd0v0",privateServiceBoxB:"_1cdkd0v1",privateServiceImgBox:"_1cdkd0v2",privateServiceImg:"_1cdkd0v3",privateServiceText:"_1cdkd0v4",privateServiceBackgroundBox:"_1cdkd0v5",privateServiceBackground:"_1cdkd0v6",privateServiceBtnBox:"_1cdkd0v7",privateServiceBtn:"_1cdkd0v8",privateServiceBtnText:"_1cdkd0v9"},Tn=y.a.memo((function(e){var t=e.pageName,n=void 0===t?"resource":t,r=e.count,a=void 0===r?0:r,o=e.onClickIM;return a>5?y.a.createElement(Je.View,{className:[In.privateServiceBox,In.privateServiceBoxB].join(" ")},y.a.createElement(Je.View,{className:In.privateServiceImgBox},y.a.createElement(Je.Image,{className:In.privateServiceImg,src:wn})),y.a.createElement(Je.View,{className:In.privateServiceBackgroundBox},y.a.createElement(Je.Image,{className:In.privateServiceBackground,src:Sn})),y.a.createElement(Je.View,{className:In.privateServiceText},y.a.createElement(ct,{size:"28",lineHeight:"38",weight:"500",color:"#5678a8",style:{marginBottom:4}},"\u591a\u4eba\u51fa\u884c\uff0c\u8054\u7cfb\u5ba2\u670d\u9884\u8ba2\u66f4\u7701\u5fc3"),y.a.createElement(ct,{size:"24",lineHeight:"30",color:"#89a0c2"},"\u4e13\u4eba\u670d\u52a1\uff0c\u8c03\u6574\u4f4f\u5bbf\u3001\u7528\u8f66\u7b49")),y.a.createElement(Je.View,{className:In.privateServiceBtnBox},y.a.createElement(Qe,{className:In.privateServiceBtn,style:function(e){return{opacity:e.pressed?.2:1}},onPress:o},y.a.createElement(ct,{size:"26",lineHeight:"34",weight:"500",color:"#0086f6",style:{whiteSpace:"nowrap"}},"\u7acb\u5373\u8054\u7cfb")))):y.a.createElement(Je.View,{className:In.privateServiceBox},y.a.createElement(Je.View,{className:In.privateServiceImgBox},y.a.createElement(Je.Image,{className:In.privateServiceImg,src:wn})),y.a.createElement(Je.View,{className:In.privateServiceBackgroundBox},y.a.createElement(Je.Image,{className:In.privateServiceBackground,src:Sn})),"detail"===n?y.a.createElement(Je.View,{className:In.privateServiceText},y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:"#5678a8"},"\u9700\u8981\u8c03\u6574\u884c\u7a0b\u6216\u9152\u5e97\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d")):y.a.createElement(Je.View,{className:In.privateServiceText},y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:"#5678a8"},"\u6ca1\u627e\u5230\u5408\u9002\u7684\u4ea4\u901a\u3001\u9152\u5e97\uff1f"),y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:"#5678a8"},"\u8054\u7cfb\u5ba2\u670d\u5e2e\u60a8\u8c03\u6574")),y.a.createElement(Je.View,{className:In.privateServiceBtnBox},y.a.createElement(Qe,{className:In.privateServiceBtn,style:function(e){return{opacity:e.pressed?.2:1}},onPress:o},y.a.createElement(ct,{size:"26",lineHeight:"34",weight:"500",color:"#0086f6",style:{whiteSpace:"nowrap"}},"\u7acb\u5373\u8054\u7cfb"))))})),Cn="tmzlbl0",Pn="tmzlbl1",kn="tmzlbl2",Nn="tmzlbl3",On="tmzlbl4",xn="tmzlbl5",Dn="tmzlbl6",jn="tmzlbl7",Mn="tmzlbl8",An="tmzlbl9",Rn="tmzlbla",Vn="tmzlblb",Ln="tmzlblc";function Bn(){var e=Lt.useState((function(e){return{internalShow:e.internalShow,internalInited:e.internalInited,tempCount:e.tempCount,errorInfo:e.errorInfo,productProperty:e.productProperty,internalDisableAction:e.internalDisableAction,internalDisableScroll:e.internalDisableScroll,internalDiasbleMaskClose:e.internalDiasbleMaskClose,feeIncludeType:e.feeIncludeType}})),t=e.internalShow,n=e.internalInited,r=e.tempCount,a=e.errorInfo,o=e.productProperty,i=e.internalDisableAction,c=e.internalDisableScroll,l=e.internalDiasbleMaskClose,u=e.feeIncludeType;if(!n)return null;var s=o.productType,d=o.adultCanBook,f=o.childCanBook,p=o.infantCanBook,m=o.hasFeeIncludeTip,v=o.childAgeRequired,h=o.childMinAge,g=o.childMaxAge,y="grp"===s?function(e){var t=e.adultCanBook,n=e.childCanBook,r=(e.MinBookPerson,e.MaxBookPerson),a=e.childMinAge,o=e.childMaxAge,i=e.isStudy,c=i?0:1,l={adultAgeRange:"".concat(o,"\u5468\u5c81\u53ca\u4ee5\u4e0a"),adultMin:t?c:0,adultMax:t?r:0},u={childAgeRange:"".concat(a,"-").concat(o,"\u5468\u5c81(\u4e0d\u542b)"),childMin:0,childMax:n?r:0};return i&&n&&!t&&(u.childMin=1),Object.assign(Object.assign(Object.assign({},l),u),{})}(o):function(e){var t=e.adultCanBook,n=e.childCanBook,r=e.infantCanBook,a=e.MinBookPerson,o=e.MaxBookPerson,i=e.childMinAge,c=e.childMaxAge,l=a;n&&(l=1);var u={adultAgeRange:"".concat(c,"\u5468\u5c81\u53ca\u4ee5\u4e0a"),adultMin:t?l:0,adultMax:t?o:0},s={childAgeRange:"".concat(i,"-").concat(c,"\u5468\u5c81(\u4e0d\u542b)"),childMin:0,childMax:n?o:0},d={infantAgeRange:"14\u5929-".concat(i,"\u5468\u5c81(\u4e0d\u542b)"),infantMin:0,infantMax:r?o:0};return Object.assign(Object.assign(Object.assign({},u),s),d)}(o),_="";a&&a.show&&(_=a.reason||"");var b=r.childAges,E=v&&(null==b?void 0:b.length)>0&&!p?"#f7f9fb":"#ffffff",w="adult"===u||"child"===u;return Object.assign(Object.assign(Object.assign({internalShow:t,internalDisableAction:i,disableMaskClose:!!l,scrollEnabled:!c,adultCanBook:d,childCanBook:f,infantCanBook:p,hasFeeIncludeTip:m,childAgeRequired:v,childMinAge:h,childMaxAge:g},r),y),{reasonTips:_,backgroundColor:E,feeIncludeType:u,isShowFeeIncludeMask:w})}var Fn=ot().windowWidth,Un=function(e){return"presale_order"===e.pageName?y.a.createElement(qn,Object.assign({},e)):y.a.createElement(Hn,Object.assign({},e))},Hn=function(e){var t=e.isShow,n=e.onOpen,r=e.onClose,a=e.isShowPrivateIM,o=void 0!==a&&a,i=e.onClickIM,c=e.cacheKey,l=e.zIndex,u=Lt.useActions(),s=u.handleDiscardDraft,d=u.handleSubmitDraft,f=u.handleSyncExternalShow,p=u.handleClearTip,m=Object(g.useRef)(!1);Object(g.useMemo)((function(){m.current?(f(t),!t&&s()):m.current=!0}),[t]);var v=Bn(),h=v.internalShow,_=v.scrollEnabled,b=v.adultCount,E=v.childCount,w=v.backgroundColor,S=v.hasFeeIncludeTip,I=v.feeIncludeType,T=v.isShowFeeIncludeMask,C=b+E,P=o&&C>5,k=Object.assign(Object.assign({},v),{reasonTipPosition:P?"top":"bottom"});Object(g.useEffect)((function(){h!==t&&(f(t),h&&n())}),[h,t]);var N=pt({footer:!0,safeArea:!0});return y.a.createElement(y.a.Fragment,null,y.a.createElement(vt,{title:"\u9009\u62e9\u4eba\u6570",confirmText:"\u786e\u8ba4\u4eba\u6570",confirmLocation:"footer",show:h,backgroundColor:w,handleClose:r,handleConfirm:d,zIndex:l},y.a.createElement(Je.ScrollView,{scrollY:_,scrollWithAnimation:!0,bounces:!1,style:N},y.a.createElement(Yn,Object.assign({},k)),!!P&&y.a.createElement(Je.View,{className:Ln},y.a.createElement(Tn,{count:C,onClickIM:i})))),S&&y.a.createElement(_n,{isShow:T,type:I,onClose:p,cacheKey:c,zIndex:"number"==typeof l?l+1:void 0}))},qn=function(e){var t=e.isShow,n=e.onClose,r=e.cacheKey,a=Lt.useActions(),o=a.handleSyncExternalShow,i=a.handleSubmitDraft,c=a.handleDiscardDraft,l=a.handleClearTip;Object(g.useMemo)((function(){!t&&c()}),[t]);var u=Bn();if(!u)return null;var s=u.internalShow,d=u.backgroundColor,f=u.scrollEnabled,p=u.hasFeeIncludeTip,m=u.feeIncludeType,v=u.isShowFeeIncludeMask,h=Object.assign(Object.assign({},u),{reasonTipPosition:"bottom"}),_=pt({footer:!0,safeArea:!0});return Object(g.useEffect)((function(){s!==t&&o(t)}),[s,t]),y.a.createElement(y.a.Fragment,null,y.a.createElement(vt,{title:"\u9009\u62e9\u4eba\u6570",confirmText:"\u786e\u8ba4\u4eba\u6570",confirmLocation:"footer",show:t,backgroundColor:d,handleClose:n,handleConfirm:i},y.a.createElement(Je.ScrollView,{scrollY:f,scrollWithAnimation:!0,bounces:!1,style:_},y.a.createElement(Yn,Object.assign({},h)))),p&&y.a.createElement(_n,{isShow:v,type:m,onClose:l,cacheKey:r}))},Yn=function(e){var t=e.internalDisableAction,n=e.adultCanBook,r=e.childCanBook,a=e.infantCanBook,o=e.adultAgeRange,i=e.adultMin,c=e.adultMax,l=e.adultCount,u=e.childAgeRange,s=e.childMin,d=e.childMax,f=e.childCount,p=e.childAgeRequired,m=e.childMinAge,v=e.childMaxAge,h=e.childAges,g=e.infantAgeRange,_=e.infantMin,b=e.infantMax,E=e.infantCount,w=e.hasFeeIncludeTip,S=e.reasonTips,I=e.reasonTipPosition,T=Lt.useActions(),C=T.handleUpdateAdultCount,P=T.handleUpdateChildCount,k=T.handleUpdateChildAge,N=T.handleUpdateInfantCount,O=T.handleEnableScroll,x=T.handleClickTip;return y.a.createElement(y.a.Fragment,null,"top"===I&&y.a.createElement(Kn,{reason:S}),y.a.createElement(Zn,{type:"adult",canBook:n,rangeText:o,hasTips:w,min:i,max:c,count:l,setCount:C,onTipClick:x,disabled:t}),y.a.createElement(Je.View,{className:Pn}),y.a.createElement(Zn,{type:"child",canBook:r,rangeText:u,hasTips:w,min:s,max:d,count:f,setCount:P,onTipClick:x,disabled:t}),p&&y.a.createElement(zn,{minAge:m,maxAge:v-1,childAges:h,setChildAges:k,setScrollEnabled:O,disabled:t,inlineTip:!!S}),a&&y.a.createElement(Je.View,{className:Pn}),a&&y.a.createElement(Zn,{type:"infant",canBook:a,rangeText:g,hasTips:!1,min:_,max:b,count:E,setCount:N,disabled:t}),"bottom"===I&&y.a.createElement(Kn,{reason:S}))},Gn={infant:"\u5a74\u513f",child:"\u513f\u7ae5",adult:"\u6210\u4eba"},Zn=y.a.memo((function(e){var t=e.type,n=e.rangeText,r=e.canBook,a=void 0!==r&&r,o=e.hasTips,i=void 0!==o&&o,c=e.count,l=e.setCount,u=e.min,s=e.max,d=e.onTipClick,f=e.disabled,p=void 0!==f&&f,m=Gn[t];if(!a)return y.a.createElement(Je.View,{className:Cn},y.a.createElement(Je.View,{className:kn},y.a.createElement(ct,{color:"#999"},m+"\u4e0d\u53ef\u8ba2")),y.a.createElement(Ut,{min:c,max:c,step:1,value:c,onChange:l}));var v=i&&("adult"===t||"child"===t);return y.a.createElement(Je.View,{className:Cn},y.a.createElement(Je.View,{className:kn},y.a.createElement(ct,{weight:"500",style:{marginRight:20}},m),y.a.createElement(ct,{color:"#999"},n),v&&d&&y.a.createElement(Qe,{className:Nn,style:function(e){return{opacity:e.pressed?.2:1}},onPress:function(){return d(t)}},y.a.createElement(ct,{size:"28",color:"#aaa",isIcon:!0},"\uef89"))),y.a.createElement(Ut,{min:u,max:s,step:1,value:c,onChange:l,disabled:p}))})),$n=function(e){return e+"\u5468\u5c81"},zn=function(e){var t=e.minAge,n=e.maxAge,r=e.childAges,a=e.disabled,o=void 0!==a&&a,i=e.setChildAges,c=e.setScrollEnabled,l=e.inlineTip,u=void 0!==l&&l,s=C(Object(g.useState)(Fn-60-32),2),d=s[0],f=(s[1],Object(g.useRef)(r));Object(g.useEffect)((function(){f.current=r}),[r]);var p=Object(g.useCallback)((function(){return c(!1)}),[]),m=Object(g.useCallback)((function(e,t){c(!0);var n=Object(tt.a)(f.current);n[t]=e,i(n)}),[]);return y.a.createElement(Je.View,{className:On},r.map((function(e,r){var a=e>=t&&e<=n;return y.a.createElement(Je.View,{key:r},y.a.createElement(Je.View,{className:xn},y.a.createElement(ct,{lineHeight:"48",style:{width:60}},"\u513f\u7ae5",r+1),y.a.createElement(Je.View,{className:jn},y.a.createElement(Je.View,{className:Mn},y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#ccc"},t),y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#ccc"},n)),y.a.createElement(Xt,{id:r,width:d,startX:72,min:t,max:n,value:e,valueFormatter:$n,onChangeStart:p,onChangeEnd:m,disabled:o}))),u&&!a&&y.a.createElement(Je.View,{className:An},y.a.createElement(ct,{size:"24",lineHeight:"24",color:"#f5190a",isIcon:!0},"\uef39"),y.a.createElement(ct,{size:"24",lineHeight:"36",color:"#f5190a",style:{paddingLeft:4}},"\u8bf7\u9009\u62e9\u513f\u7ae5\u5e74\u9f84")))})),r.length>0&&y.a.createElement(Je.View,{className:Dn}),r.length>0&&y.a.createElement(Je.View,{className:Rn}))},Kn=function(e){var t=e.reason;return t?y.a.createElement(Je.View,{className:Vn},y.a.createElement(ct,{size:"26",lineHeight:"38",color:"#f70",isIcon:!0,style:{paddingRight:4}},"\uef89"),y.a.createElement(ct,{size:"24",lineHeight:"36",color:"#f70",style:{flex:1}},t)):null},Wn=y.a.memo(Un),Xn=y.a.memo(Jn);function Jn(e){return y.a.createElement(Qn,Object.assign({},e),y.a.createElement(Wn,Object.assign({},e)))}function Qn(e){var t=Object(g.useMemo)((function(){var t=[S.PlatformContext.create({}),S.TourContext.create(Object.assign(Object.assign({},Xe().tourContext),{props:e,pageName:e.pageName}))];return r.mergeModelContext.apply(void 0,t)}),[]);return y.a.createElement(Lt.Provider,{context:t},e.children)}var er=he(Xe().tourContext),tr="_1g2sdn00",nr="_1g2sdn01",rr="_1g2sdn02",ar="_1g2sdn03",or="_1g2sdn04",ir="_1g2sdn05",cr="_1g2sdn06",lr="_1g2sdn07",ur="_1g2sdn08",sr="_1g2sdn09",dr="_1g2sdn0a",fr="_1g2sdn0b",pr=ot().windowWidth,mr=y.a.memo((function(e){var t=e.isShow,n=e.onClose,r=e.notice,a=e.type,o=e.zIndex,i=Object(g.useRef)(!1),c=Object(g.useRef)(!0),l=Object(g.useRef)([]),u=Object(g.useRef)(0),s=C(Object(g.useState)(0),2),d=s[0],f=s[1],p=C(Object(g.useState)(!1),2),m=p[0],v=p[1],h=C(Object(g.useState)("PreSaleRule"),2),_=h[0],b=h[1],E=function(e,t){var n,r=[];return(null==e?void 0:e.PreSaleRule)&&r.push({type:"PreSaleRule",tabLabel:"\u9884\u7ea6\u89c4\u5219\u6d41\u7a0b",tabTitle:"\u9884\u7ea6\u89c4\u5219",mergeSection:"\u9884\u7ea6\u6d41\u7a0b",PreSaleRule:null==e?void 0:e.PreSaleRule,BookFlow:null==e?void 0:e.BookFlow}),(null==e?void 0:e.PreSaleUnbooking)&&r.push({type:"PreSaleUnbooking",tabLabel:"\u9000\u6539\u653f\u7b56",tabTitle:"\u9000\u6539\u653f\u7b56",PreSaleUnbooking:e.PreSaleUnbooking}),(null==e?void 0:e.InvoiceNotice)&&r.push({type:"InvoiceNotice",tabLabel:"\u53d1\u7968\u4fe1\u606f",tabTitle:"\u53d1\u7968\u4fe1\u606f",InvoiceNotice:e.InvoiceNotice}),(null==e?void 0:e.SpecialDescription)&&r.push({type:"SpecialDescription",tabLabel:"\u7279\u522b\u8bf4\u660e",tabTitle:"\u7279\u522b\u8bf4\u660e",SpecialDescription:e.SpecialDescription}),"BookFlow"===t&&(t="PreSaleRule"),n=r.findIndex((function(e){return(null==e?void 0:e.type)===t})),{noticeItems:r,currentIndex:n}}(r,_),w=E.noticeItems,S=E.currentIndex,I=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v(n),b(e),i.current=!0,f(l.current[t]),setTimeout((function(){i.current=!1}),500)},T=Object(g.useCallback)((function(e){if(k(),!i.current&&!Object(z.c)(l.current)){var t=e.detail,n=t.scrollTop,r=t.deltaY;r<0&&n+180>=l.current[u.current+1]&&(u.current+=1,w[u.current]&&b(w[u.current].type)),r>0&&n+180<l.current[u.current]&&(u.current-=1,w[u.current]&&b(w[u.current].type))}}),[]),k=function(){if(!(l.current.length>0)){var e=Oe.a.createSelectorQuery();e.select("#presaleNotice_PreSaleRule").boundingClientRect(),e.select("#presaleNotice_PreSaleUnbooking").boundingClientRect(),e.select("#presaleNotice_InvoiceNotice").boundingClientRect(),e.select("#presaleNotice_SpecialDescription").boundingClientRect(),e.exec((function(e){var t=[];e.forEach((function(n){n&&t.push(n.top-e[0].top)})),l.current=t}))}};Object(g.useEffect)((function(){t?c.current&&setTimeout((function(){k(),I(a,S,!1),c.current=!1}),100):setTimeout((function(){c.current=!0,b("PreSaleRule"),f(0)}),500)}),[a,t,S]);var N=pt({top:45,footer:!1,safeArea:!1});return y.a.createElement(vt,{title:"\u9884\u552e\u8bf4\u660e",show:t,handleClose:n,safeArea:!1,zIndex:o},y.a.createElement(Je.View,{className:or},w.map((function(e,t){var n=e.type,r=e.tabLabel,a=n===_;return y.a.createElement(Qe,{key:t,className:a?cr:ir,onPress:function(){return I(n,t)}},y.a.createElement(ct,{size:a?"34":"28",lineHeight:"40",weight:a?"500":"400",color:a?"#0066f6":"#111"},r),a&&y.a.createElement(Je.View,{className:lr}))}))),y.a.createElement(Je.ScrollView,{id:"presaleNotice_Scroll",enhanced:!0,scrollY:!0,scrollWithAnimation:m,scrollTop:d,onScroll:T,onTouchStart:function(){i.current=!1},onDragStart:function(){i.current=!1},style:Object.assign({backgroundColor:"#ededf5"},N)},w.map((function(e){var t,n,r,a,o,i,c,l,u,s,d,f,p,m,v,h,g,_,b,E,w,S,I,T,C,k,N,O,x,D,j,M,A,R,V=e.tabTitle,L=e.type;return"PreSaleRule"!==L||Object(z.c)(e.PreSaleRule)?"PreSaleUnbooking"!==L||Object(z.c)(e.PreSaleUnbooking)?"InvoiceNotice"!==L||Object(z.c)(e.InvoiceNotice)?"SpecialDescription"!==L||Object(z.c)(e.SpecialDescription)?null:y.a.createElement(Je.View,{className:tr,key:L,id:"presaleNotice_".concat(L)},gr(V),(R=e.SpecialDescription,y.a.createElement(y.a.Fragment,null,R.map((function(e,t){return y.a.createElement(_r,{key:t,line:[e],mb:12})}))))):y.a.createElement(Je.View,{className:tr,key:L,id:"presaleNotice_".concat(L)},gr(V),(A=e.InvoiceNotice,y.a.createElement(Je.View,null,A.map((function(e,t){return y.a.createElement(ct,{key:t,size:"26",color:"#555",lineHeight:"38"},e.Description)}))))):y.a.createElement(Je.View,{className:tr,key:L,id:"presaleNotice_".concat(L)},gr(V),(p=e.PreSaleUnbooking,v=(m=p||{}).UnBookingTagList,h=m.UnBookingAddInfo,g=m.ChangeLimit,b=(_=h||{}).TravelerTitle,E=_.TravellerDefaultList,w=_.DataRangeTableHead,S=_.TravellerHolidayDescDetail,I=_.TouristDescFooter,T=_.TouristRenegeHead,C=_.AgencyTitle,k=_.LossValueTableHead,N=_.TravelAgencyDefaultList,O=_.TravelAgencyHolidayDescDetail,x=_.TravelAgencyDescFooter,D=_.TravelAgencyRenegeHead,j=!Object(z.c)(v),M=!Object(z.c)(h),y.a.createElement(y.a.Fragment,null,j&&y.a.createElement(Je.View,{style:{marginBottom:12}},y.a.createElement(ct,{size:"34",lineHeight:"42",color:"#111",weight:"500"},"\u672a\u9884\u7ea6\u51fa\u884c\u65e5\u671f")),j&&(null==v?void 0:v.map((function(e,t){var n=e.TagName,r=e.Description;return y.a.createElement(Je.View,{style:{paddingBottom:20},key:t},y.a.createElement(vr,{key:t,title:n,desc:r}))}))),j&&y.a.createElement(Je.View,{style:{width:pr,height:1,marginLeft:-12,backgroundColor:"#efefef",marginBottom:20}}),y.a.createElement(Je.View,{style:{marginBottom:12}},y.a.createElement(ct,{size:"34",lineHeight:"42",color:"#111",weight:"500"},"\u5df2\u6210\u529f\u9884\u7ea6\u9884\u8ba2\u8fdd\u7ea6\u6761\u6b3e")),!!g&&!M&&y.a.createElement(ct,{size:"26",color:"#555",lineHeight:"38"},g),M&&y.a.createElement(y.a.Fragment,null,y.a.createElement(hr,{key:"TravelAgency",type:"TravelAgency",RefundPolicyList:N,title:D,desc:C,DataRangeTableHead:w,LossValueTableHead:k,HolidayDescDetail:O,DescFooter:x}),y.a.createElement(Je.View,{style:{height:20}}),y.a.createElement(hr,{key:"Tourist",type:"Tourist",RefundPolicyList:E,title:T,desc:b,DataRangeTableHead:w,LossValueTableHead:k,HolidayDescDetail:S,DescFooter:I}))))):y.a.createElement(y.a.Fragment,null,y.a.createElement(Je.View,{className:tr,key:L,id:"presaleNotice_".concat(L)},gr(V),(r=e.PreSaleRule,a=r.AdvanceBookingDays,o=r.AdvanceBookingTime,i=r.PreSaleDeadLine,c=r.PreSaleTravelStartDay,l=r.PreSaleTravelEndDay,u="".concat(a,"\u5929").concat(o,"\u524d"),s=P.a.parse(i,!1).format("YYYY\u5e74MM\u6708DD\u65e5")+"\u622a\u6b62\u3002",d=P.a.parse(c,!1).format("YYYY\u5e74MM\u6708DD\u65e5")+"-"+P.a.parse(l,!1).format("YYYY\u5e74MM\u6708DD\u65e5"),f=[[{Description:"\u9700\u81f3\u5c11\u63d0\u524d",isBold:!1},{Description:u,isBold:!0},{Description:"\u9884\u7ea6\uff0c",isBold:!1},{Description:s,isBold:!0}],[{Description:"\u6bcf\u4e2a\u8ba2\u5355\u4ec5\u53ef\u9884\u7ea61\u6b21\u3002",isBold:!1},{Description:"\u91cd\u8981\u63d0\u793a\uff1a\u9884\u7ea6\u6210\u529f\u540e\u4e0d\u53ef\u4fee\u6539\u8ba2\u5355\u3002",isBold:!0}],[{Description:d,isBold:!0},{Description:"\u671f\u95f4\u53ef\u51fa\u884c(\u4ee5\u5404\u9884\u552e\u4ea7\u54c1\u5b9e\u9645\u73ed\u671f\u4e3a\u51c6)\u3002",isBold:!1}]],y.a.createElement(y.a.Fragment,null,f.map((function(e,t){return y.a.createElement(_r,{key:t,line:e})}))))),!Object(z.c)(e.BookFlow)&&y.a.createElement(Je.View,{className:tr,key:"BookFlow",id:"presaleNotice_BookFlow"},gr(e.mergeSection),(t=e.BookFlow,n=[615.5,377,367],y.a.createElement(Je.View,{className:ur},t.map((function(e,t){var r=e.Description,a=e.Title;return y.a.createElement(Je.View,{className:sr,key:t},y.a.createElement(Je.View,{className:dr},y.a.createElement(Je.Image,{className:fr,src:e.Icon.ImageUrl}),y.a.createElement(Je.View,null,y.a.createElement(ct,{size:"34",lineHeight:"42",weight:"500",color:"#111"},a),y.a.createElement(ct,{size:"26",lineHeight:"38",color:"#666",block:!0,style:{marginTop:4}},r))),y.a.createElement(Je.Image,{src:e.Image.ImageUrl,style:{width:"".concat(.8*e.Image.Width||620,"rpx"),height:"".concat(.8*e.Image.Height||n[t],"rpx")}}))}))))))}))))}));function vr(e){var t=e.title,n=e.desc,r=e.type,a="Tourist"===r?"#f70":"#333",o="Tourist"===r?"#f70":"#111",i="Tourist"===r?"#f70":"#555";return t?y.a.createElement(Je.View,null,y.a.createElement(Je.View,{className:nr,style:{marginBottom:8}},y.a.createElement(yr,{height:21,mr:4,color:a}),y.a.createElement(ct,{size:"30",lineHeight:"42",color:o,weight:"500"},t)),y.a.createElement(ct,{size:"26",lineHeight:"38",color:i},n)):null}function hr(e){var t=e.RefundPolicyList,n=e.title,r=e.desc,a=e.HolidayDescDetail,o=e.DescFooter,i=e.DataRangeTableHead,c=e.LossValueTableHead,l=e.type,u="Tourist"===l?"#f70":"#555",s="Tourist"===l?"#f70":"#111",d={fontSize:"13px",lineHeight:"20px",color:u};return y.a.createElement(y.a.Fragment,null,y.a.createElement(vr,{title:n,desc:r,type:l}),!Object(z.c)(t)&&y.a.createElement(Je.View,{className:cn,style:{marginBottom:9}},y.a.createElement(Je.View,{className:"".concat(un," ").concat(ln)},y.a.createElement(Je.View,{className:sn,style:{borderTop:"none"}},y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:s},i||"\u884c\u7a0b\u524d")),y.a.createElement(Je.View,{className:dn,style:{textAlign:"center"}},y.a.createElement(Je.View,{className:fn,style:{borderTop:"none"}},y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:s},c||"\u8fdd\u7ea6\u91d1")))),t.map((function(e,t){var n=e.DateRange,r=e.LossVale;return y.a.createElement(Je.View,{className:un,key:t},y.a.createElement(Je.View,{className:sn},y.a.createElement(ct,{size:"26",lineHeight:"38",weight:"500",color:u},n||"")),y.a.createElement(Je.View,{className:dn,style:{textAlign:"center"}},y.a.createElement(Je.View,{className:fn},y.a.createElement(ct,{size:"26",lineHeight:"38",color:u},r||""))))}))),!!a&&y.a.createElement(Je.View,{style:d},y.a.createElement(nt,{content:a,copyLink:!1})),!!o&&y.a.createElement(Je.View,{style:d},y.a.createElement(nt,{content:o,copyLink:!1})))}function gr(e){return y.a.createElement(Je.View,{style:{marginBottom:16}},y.a.createElement(ct,{size:"38",lineHeight:"42",color:"#111",weight:"500"},e))}function yr(e){var t=e.height,n=void 0===t?19:t,r=e.mr,a=void 0===r?6:r,o=e.color,i=void 0===o?"#888":o;return y.a.createElement(Je.View,{className:rr,style:{marginRight:a,height:n}},y.a.createElement(Je.View,{className:ar,style:{backgroundColor:i}}))}function _r(e){var t=e.line,n=e.mb,r=void 0===n?8:n;return y.a.createElement(Je.View,{className:nr,style:{marginBottom:r}},y.a.createElement(yr,null),y.a.createElement(Je.View,null,t.map((function(e,t){var n=e.Description,r=e.isBold;return y.a.createElement(ct,{size:"26",lineHeight:"38",color:r?"#111":"#555",weight:r?"500":"400",key:t},n)}))))}var br="_1mbs4iz0",Er="_1mbs4iz1";function wr(e){var t=e.text,n=e.color,r=e.borderColor;return y.a.createElement(Je.View,{className:br,style:{borderColor:r}},y.a.createElement(Je.Text,{className:Er,style:{color:n}},t))}var Sr="#f5190a",Ir="#f70",Tr="#f5190a",Cr="#f70",Pr="#333",kr="#ffdcbf",Nr="#bfeddd",Or="#f70",xr="#00b87a",Dr="i0tojg0",jr="i0tojg1",Mr="i0tojg2",Ar="i0tojg3",Rr="i0tojg4",Vr="i0tojg5",Lr="i0tojg6",Br="i0tojg7",Fr="i0tojg8",Ur="i0tojg9",Hr="i0tojga",qr="i0tojgb",Yr="i0tojgc",Gr="i0tojgd",Zr="i0tojge",$r="i0tojgf",zr=y.a.memo((function(e){var t=e.isShow,n=e.onClose,r=e.riskPolicyInfo;return Object(z.c)(r)?null:y.a.createElement(vt,{title:"\u516c\u544a\u8be6\u60c5",show:t,handleClose:n,confirmLocation:"footer",confirmText:"\u6211\u77e5\u9053\u4e86",footerShadow:!0},y.a.createElement(Kr,{isShow:t,riskPolicyInfo:r}))}));function Kr(e){var t=e.isShow,n=e.riskPolicyInfo,r=Object(g.useRef)(!1),a=Object(g.useRef)([]),o=C(Object(g.useState)(0),2),i=o[0],c=o[1],l=C(Object(g.useState)(0),2),u=l[0],s=l[1],d=Object(g.useRef)(0),f=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t),r.current=!0,s(a.current[t]),setTimeout((function(){r.current=!1}),500);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=pt({top:n.length>1?45:0,footer:!0,safeArea:!0}),m=null==n?void 0:n.some((function(e){return"0"!=(null==e?void 0:e.tabType)})),v=function(){var e=w(b().mark((function e(){var t,r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current=[],t=n.map((function(e,t){return"#urgentInfo_".concat(t)})),e.next=4,at(t);case 4:r=e.sent,o=[],r.forEach((function(e){e&&o.push(e.top-r[0].top)})),a.current=o;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){setTimeout((function(){v()}),300)};return Object(g.useEffect)((function(){t&&h()}),[t]),y.a.createElement(y.a.Fragment,null,n.length>1&&y.a.createElement(Je.View,{className:Mr},n.map((function(e,t){var n=e.tabTitle,r=t===i;return y.a.createElement(Qe,{key:t,className:Ar,onPress:function(){f(t)}},y.a.createElement(ct,{size:"30",lineHeight:"38",weight:r?"500":"400",color:r?"#0066f6":"#333"},n),r&&y.a.createElement(Je.View,{className:Rr}))}))),y.a.createElement(Je.ScrollView,{enhanced:!0,scrollY:!0,scrollWithAnimation:!0,scrollTop:u,onScroll:function(e){if(!r.current&&!Object(z.c)(a.current)){var t=e.detail,o=t.scrollTop,i=t.deltaY;i<0&&o+0>=a.current[d.current+1]&&(d.current+=1,n[d.current]&&c(d.current)),i>0&&o+0<a.current[d.current]&&(d.current-=1,n[d.current]&&c(d.current))}},style:p},y.a.createElement(Je.View,{className:Dr,id:"urgentInfo_content"},n.map((function(e,t){return y.a.createElement(Wr,{key:t,item:e,index:t,onExpand:h})})),m&&y.a.createElement(ta,null))))}function Wr(e){var t=e.item,n=e.index,r=e.onExpand,a=t||{},o=a.policies,i=a.tabTitle,c=a.tabType;return y.a.createElement(Je.View,{className:Lr,id:"urgentInfo_".concat(n)},!!i&&y.a.createElement(ct,{size:"28",lineHeight:"36",weight:"500"},i),o.map((function(e,a){var o,i=e.policyText,l=e.phoneInfos,u=e.phoneTitle,s=e.tags,d=e.ctripCreateTime,f=null===(o=null==d?void 0:d.split(" "))||void 0===o?void 0:o[0],p="0"!=c&&(null==s?void 0:s.length)>0,m=!!u&&(null==l?void 0:l.length)>0;return y.a.createElement(Qr,{key:n,id:"".concat(n,"_").concat(a),height:288,onExpand:r},y.a.createElement(Je.View,{className:Br},y.a.createElement(Jr,{policy:e}),"0"!=(null==t?void 0:t.tabType)?y.a.createElement(Je.View,null,p&&y.a.createElement(Xr,{tags:s}),!!f&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#999",block:!0,style:{marginTop:8}},"\u66f4\u65b0\u65f6\u95f4\uff1a",f),!!i&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666",block:!0,style:{marginTop:8}},i),m&&y.a.createElement(ea,{title:u,phoneInfos:l,onExpand:r})):y.a.createElement(Je.View,{key:n,style:Object.assign(Object.assign({},{fontSize:"13px",lineHeight:"17px",color:"#666"}),{marginTop:8})},y.a.createElement(nt,{content:i,copyLink:!1}))))})))}function Xr(e){var t=e.tags;return y.a.createElement(Je.View,{className:Vr,style:{marginTop:8}},null==t?void 0:t.map((function(e,t){if(!e||!e.name)return null;var n=e||{},r=n.level,a=n.tagLevel,o=n.name,i="1"===(r=r||a)?Or:xr,c="1"===r?kr:Nr;return y.a.createElement(wr,{key:"tag_".concat(t),color:i,borderColor:c,text:o})})))}function Jr(e){var t=e.policy,n=t.title,r=t.urgencyLevel,a="0"===r?Sr:Ir,o="0"===r?Tr:"1"===r?Cr:Pr;return y.a.createElement(Je.View,{className:jr},y.a.createElement(ct,{size:"30",lineHeight:"36",color:a,isIcon:!0,style:{marginRight:2}},"\uef89"),y.a.createElement(ct,{size:"28",lineHeight:"36",color:o},n))}function Qr(e){var t=e.id,n=e.height,r=e.children,a=C(Object(g.useState)(!0),2),o=a[0],i=a[1],c=o?{maxHeight:n,overflow:"hidden"}:{},l=function(){var n=w(b().mark((function n(){var r,a;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,at(["#expand_toggle_".concat(t)]);case 2:(r=n.sent)[0]&&(a=r[0].height,i(a>=e.height));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(g.useEffect)((function(){setTimeout((function(){l()}),100)}),[]),y.a.createElement(Je.View,{className:Gr,style:c,id:"expand_toggle_".concat(t)},r,o&&y.a.createElement(Je.View,{className:Zr,onClick:function(){i(!o),e.onExpand()}},y.a.createElement(Je.View,{className:$r}),y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666"},"\u5c55\u5f00\u66f4\u591a"),y.a.createElement(ct,{size:"30",lineHeight:"30",color:"#666",isIcon:!0},"\ue944")))}function ea(e){var t=e.title,n=e.phoneInfos,r=e.onExpand,a=C(Object(g.useState)(!0),2),o=a[0],i=a[1],c=function(e){Oe.a.makePhoneCall({phoneNumber:e})};return y.a.createElement(y.a.Fragment,null,y.a.createElement(Je.View,{className:Ur}),y.a.createElement(Je.View,{className:Fr,onClick:function(){i(!o),r()}},y.a.createElement(Je.View,{className:jr},y.a.createElement(ct,{size:"32",lineHeight:"32",isIcon:!0,style:{marginRight:6}},"\ue016"),y.a.createElement(ct,{size:"26",lineHeight:"34"},t)),y.a.createElement(ct,{size:"32",lineHeight:"32",color:"#0086f6",isIcon:!0,classNames:[o?Hr:qr]},"\ue944")),!o&&y.a.createElement(Je.View,null,null==n?void 0:n.map((function(e,t){var n=e||{},r=n.province,a=n.city,o=n.county,i=n.phone,l=n.serviceTime;return y.a.createElement(Je.View,{key:t,style:{marginTop:8}},!!r&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666",style:{paddingRight:4}},r),!!a&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666",style:{paddingRight:4}},a),!!o&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666",style:{paddingRight:4}},o),!!i&&y.a.createElement(Je.Text,{className:Yr,onClick:c},i),!!l&&y.a.createElement(ct,{size:"26",lineHeight:"34",color:"#666"},l))}))))}function ta(){return y.a.createElement(ct,{size:"24",lineHeight:"30",color:"#f70"},"*\u9274\u4e8e\u76ee\u7684\u5730\u3001\u7ecf\u505c\uff08\u8f6c\uff09\u5730\u7684\u5165\u5883\u653f\u7b56\u53ca\u75ab\u60c5\u9632\u63a7\u653f\u7b56\u7684\u968f\u65f6\u53ef\u80fd\u8c03\u6574\uff0c\u9875\u9762\u4fe1\u606f\u53ef\u80fd\u5b58\u5728\u6ede\u540e\u6027\uff0c\u8bf7\u60a8\u5728\u51fa\u884c\u524d\u4ed4\u7ec6\u67e5\u9605\u5165\u5883\u8981\u6c42\u53ca\u6700\u65b0\u75ab\u60c5\u9632\u63a7\u89c4\u5b9a\uff0c\u5408\u7406\u5b89\u6392\u60a8\u7684\u51fa\u884c\u3002")}var na={UPDATE_PRODUCT_PROPERTY_INFO:function(e,t){return Object.assign(Object.assign({},e),t)},TOGGLE_FEE_INCLUDE_MASK:function(e,t){return Object.assign(Object.assign({},e),{isShowFeeIncludeMask:t})},TOGGLE_COST_INFO_MASK:function(e,t){return Object.assign(Object.assign({},e),{isShowCostInfoMask:t})},UPDATE_INIT_INFO:function(e,t){return Object.assign(Object.assign({},e),t)},UPDATE_DISCOUNT_INFO:function(e,t){return Object.assign(Object.assign({},e),t)}},ra={20:"\u94c2\u91d1\u8d35\u5bbe",30:"\u94bb\u77f3\u8d35\u5bbe",35:"\u91d1\u94bb\u8d35\u5bbe",40:"\u9ed1\u94bb\u8d35\u5bbe",102:"\u673a\u7968\u7528\u6237"},aa=0,oa=1,ia=2,ca=3,la=4,ua=5;function sa(e){var t=(e||{}).BasicInfo||{},n=t.isPureDiyfhxsdp,r=t.isCruise,a=t.isDiyfhxsdp;return{productInfo:e||{},pageStatus:{isCruise:r,isSDP:n,isDiyfhxsdp:a,isGRP:!r&&!n&&!a}}}var da=function(e){var t=e.priceDetail,n=e.props;if(I.a.isEmpty(t))return null;var r=t.priceDetailList,a=void 0===r?[]:r,o=t.tradePriceDetailList,i=void 0===o?[]:o,c=(t.totalPrice,n.isBestone?i:a),l=null==c?void 0:c.find((function(e){return e.priceType===ca})),u=l||{},s=u.priceName,d=u.resourcePriceDetailList,f=void 0===d?[]:d,p=u.totalPrice;if(I.a.isEmpty(l)||I.a.isEmpty(f))return null;var m=s,v="- \xa5 ".concat(Math.abs(p.totalPrice)),h=[];return null==f||f.forEach((function(e){var t=e.tag,n=void 0===t?[]:t,r=e.resourceName,a=e.token,o=null==n?void 0:n.find((function(e){return["ctrip_group_discount","ctrip_vip_discount"].includes(e.key)})),i={groupDiscount:{},vipDiscount:{},notDiscount:!o,resourceName:r,price:"- \xa5 ".concat(Math.abs(e.adultPrice)),countText:"x ".concat(e.count).concat(e.chargeUnit),tag:"\u60e0",token:a};o&&"ctrip_group_discount"===o.key&&(i.groupDiscount.code=o.value,i.groupDiscount.text=r),o&&"ctrip_vip_discount"===o.key&&(i.vipDiscount.code=o.value,i.vipDiscount.text=ra[null==o?void 0:o.value]||"",i.vipDiscount.resourceName=r),h.push(i)})),{title:m,titlePrice:v,renderList:h}},fa={priceDetail:{},isShowFeeIncludeMask:!1,isShowCostInfoMask:!1},pa=Object(a.createReactModel)((function(){var e=Object(S.setupTourContext)(),t=e.props,n=Object(r.setupStore)({name:"isomorphic_price_detail_components",initialState:Object.assign({},fa),reducers:na,logger:z.b&&!z.d&&!!t.logger}),a=n.store,o=n.actions,i=Q(e),c=i.getProductInfo,l=i.fetchProductInfo,u=i.setProductInfo;Object(r.setupPreloadCallback)(w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.priceDetail,!I.a.isEmpty(n)){e.next=4;break}return console.warn("\u91d1\u989d\u660e\u7ec6\u7ec4\u4ef6: \u7f3a\u5c11priceDetail"),e.abrupt("return");case 4:return e.next=6,s();case 6:if(r=e.sent){e.next=10;break}return console.warn("\u91d1\u989d\u660e\u7ec6\u7ec4\u4ef6: \u7f3a\u5c11productInfo"),e.abrupt("return");case 10:d(r);case 11:case"end":return e.stop()}}),e)}))));var s=function(){var e=w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,c(t.cacheKey);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:return e.prev=6,r=ee(t.cacheKey),e.next=10,l(r);case 10:return n=e.sent,u(n),e.abrupt("return",n);case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=w(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sa(t),(0,o.UPDATE_INIT_INFO)(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{store:a,actions:Object.assign(Object.assign({},o),{toggleFeeIncludeMask:function(t){(0,o.TOGGLE_FEE_INCLUDE_MASK)(t),e.traceKMLogMessage("".concat(t?"\u6253\u5f00":"\u5173\u95ed","\u8d39\u7528\u5305\u542b\u7ec4\u4ef6"))},toggleCostInfoMask:function(t){(0,o.TOGGLE_COST_INFO_MASK)(t),e.traceKMLogMessage("".concat(t?"\u6253\u5f00":"\u5173\u95ed","\u90ae\u8f6e\u8d39\u7528\u8bf4\u660e\u7ec4\u4ef6"))},handleWriteDiscountLog:function(t){var n=t.priceDetail;if(!I.a.isEmpty(n)){var r=da({priceDetail:n,props:t})||{},i=r.renderList,c=r.title,l=r.titlePrice;if(!I.a.isEmpty(i)){var u=i.map((function(e){var t=e.countText,n=e.price,r=e.resourceName,a=e.token;return{key:"".concat(r," (").concat(a,")"),value:"".concat(n," ").concat(t)}})),s=a.getState().discountLogSnap;if(JSON.stringify(s)===JSON.stringify(u))return;e.traceKMPageLog({contents:u,desc:"\u4ef7\u683c\u660e\u7ec6".concat(c," ").concat(l)}),(0,o.UPDATE_DISCOUNT_INFO)({discountLogSnap:u})}}}})}})),ma=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus;return function(e){var t=e.priceDetail,n=e.productInfo,r=e.pageStatus,a=e.props;if(I.a.isEmpty(t)||I.a.isEmpty(n))return null;var o=t.priceDetailList,i=t.tradePriceDetailList,c=t.countInfo,l=t.feeInfoList,u=a.isBestone?i:o,s=n||{},d=s.BasicInfo,f=void 0===d?{}:d,p=s.FeeInfoList,m=void 0===p?[]:p,v=s.CostInfoList,h=void 0===v?[]:v,g=null==u?void 0:u.find((function(e){return e.priceType===aa}));if(I.a.isEmpty(g))return null;var y=g.priceName,_=g.totalPrice,b=c.adultCount,E=c.childCount,w=y,S="\xa5 ".concat(_.totalPrice),T=[];"order"===a.pageName&&a.basePriceProps.isShowFreeTicket&&T.push("\u5df2\u51cf\u514d\u513f\u7ae5\u706b\u8f66\u7968"),r.isSDP&&![9,26].includes(+f.ProductCategoryId)&&a.basePriceProps.isContainFlight&&T.push("\u5982\u60a8\u9884\u8ba2\u4e86\u673a\u7968\uff0c\u4ef7\u683c\u4e2d\u5df2\u542b\u6c11\u822a\u53d1\u5c55\u57fa\u91d1\u3001\u71c3\u6cb9\u8d39\u53ca\u7a0e\u8d39");var C=[],P=[];I.a.isEmpty(l)||l.forEach((function(e){"hotel_tax_fee_included"===e.key?C.push(e.value):"hotel_tax_fee_not_included"===e.key&&P.push(e.value)})),I.a.isEmpty(l)||"resource"!==a.pageName||C.length||P.length||l.forEach((function(e){"hotel_tax_fee"===e.key&&C.push(e.value)})),(C.length||P.length)&&(T=[].concat(Object(tt.a)(T),C,P));var k=[];if(r.isGRP){var N=null==m?void 0:m.find((function(e){return"15"===e.SubTitleCode}));k=null==N?void 0:N.ProductClauseList}var O=r.isCruise&&!I.a.isEmpty(h),x=!I.a.isEmpty(k),D=[];return r.isGRP&&(_&&_.adultPrice>0&&b&&D.push({resourceName:"\u6210\u4eba",price:"\xa5 ".concat(_.adultPrice),countText:"x ".concat(b,"\u4eba")}),_&&_.childPrice>0&&E&&D.push({resourceName:"\u513f\u7ae5",price:"\xa5 ".concat(_.childPrice),countText:"x ".concat(E,"\u4eba")})),{title:w,titlePrice:S,tips:T,isShowClauseList:x,isCruiseShowCostInfo:O,renderList:D}}({priceDetail:e.priceDetail,productInfo:n,pageStatus:r,props:e})},va=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus;return function(e){var t=e.priceDetail,n=e.props;if(I.a.isEmpty(t))return null;var r=t.tradePriceDetailList,a=void 0===r?[]:r,o=t.priceDetailList,i=void 0===o?[]:o,c=(t.totalPrice,n.isBestone?a:i),l=null==c?void 0:c.find((function(e){return e.priceType===ia})),u=l||{},s=u.priceName,d=u.resourcePriceDetailList,f=void 0===d?[]:d,p=u.totalPrice;if(I.a.isEmpty(l)||I.a.isEmpty(f))return null;var m=(p||{}).shopPayPrice||{},v=m.price,h=m.currencyCode,g=void 0===h?"":h,y=s,_="\xa5 ".concat(p.totalPrice);v&&(_+="\uff0c\u8239\u4e0a\u53e6\u4ed8".concat(v||0).concat(g));var b=[];return null==f||f.forEach((function(e){var t=e.tag,n=void 0===t?[]:t,r=e.count,a=void 0===r?0:r,o=e.shopPayPrice,i=e.resourceType,c=e.resourceName,l=o||{},u=l.price,s=l.currencyCode,d=12===i&&!!u,f=(null==n?void 0:n.find((function(e){return"firstFree"===e.key})))||"",p="";f&&(p+="\u514d\u8d39 x 1 + "),p+=d?"\u8239\u4e0a\u53e6\u4ed8 ".concat(u||0).concat(s):"\xa5 ".concat(e.adultPrice);var m="x ".concat(f?a-1:a).concat(e.chargeUnit);b.push({resourceName:c,price:p,countText:m})})),{title:y,titlePrice:_,renderList:b}}({priceDetail:e.priceDetail,productInfo:n,pageStatus:r,props:e})},ha=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus;return function(e){var t=e.priceDetail,n=e.props;if(I.a.isEmpty(t))return null;var r=t.priceDetailList,a=void 0===r?[]:r,o=t.tradePriceDetailList,i=void 0===o?[]:o,c=(t.totalPrice,n.isBestone?i:a),l=null==c?void 0:c.find((function(e){return e.priceType===oa})),u=l||{},s=u.priceName,d=u.resourcePriceDetailList,f=void 0===d?[]:d,p=u.totalPrice;if(I.a.isEmpty(l)||I.a.isEmpty(f))return null;var m=s;"resource"===n.pageName&&(m+="(\u53ef\u81f3\u8ba2\u5355\u586b\u5199\u9875\u67e5\u770b/\u4fee\u6539)"),"order"===n.pageName&&n.insuranceProps.hasAgeRules&&p.totalPrice&&(m+="(\u4ee5\u5b9e\u9645\u9884\u8ba2\u4eba\u5e74\u9f84\u8ba1\u7b97\u4ef7\u683c)");var v="\xa5 ".concat(p.totalPrice?p.totalPrice:"0"),h=[];"resource"===n.pageName&&h.push("\u4fdd\u9669\u4e3a\u529e\u7b7e\u5fc5\u9700\u6750\u6599\uff0c\u53ef\u81f3\u8ba2\u5355\u586b\u5199\u9875\u67e5\u770b\uff0c\u6709\u7591\u95ee\u53ef\u8054\u7cfb\u5ba2\u670d");var g={};null==f||f.forEach((function(e){var t=e.tag,n=void 0===t?[]:t,r=e.token,a=null==n?void 0:n.filter((function(e){return["vip_cancel","level_cancel"].includes(e.key)}));I.a.isEmpty(a)&&(g[r]=g[r]||[],g[r].push(e))}));var y=[];return Object.values(g).forEach((function(e,t){var n=e[0],r=(n.tag,n.resourceName);if(n.count,e.length>1||e[0].groupType){var a=e.map((function(e){return{tag:e.adultPrice?"":"\u8d60",name:e.groupName,price:"".concat(e.adultPrice?"\xa5 "+e.adultPrice:"\xa5 0"),countText:" x ".concat(e.count).concat(e.chargeUnit)}}));y.push({resourceName:r,list:a})}else y.push({resourceName:r,price:"".concat(e[0].adultPrice?"\xa5 "+e[0].adultPrice:"\xa5 0"),countText:" x ".concat(e[0].count).concat(e[0].chargeUnit),tag:e[0].adultPrice?"":"\u8d60"})})),y.length?{title:m,titlePrice:v,tips:h,renderList:y}:null}({priceDetail:e.priceDetail,productInfo:n,pageStatus:r,props:e})},ga=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus;return function(e){var t=e.priceDetail,n=e.props;if(I.a.isEmpty(t))return null;var r=t.priceDetailList,a=void 0===r?[]:r,o=t.tradePriceDetailList,i=void 0===o?[]:o,c=(t.totalPrice,n.isBestone?i:a),l=null==c?void 0:c.find((function(e){return e.priceType===la})),u=l||{},s=u.priceName,d=u.resourcePriceDetailList,f=void 0===d?[]:d;if(u.totalPrice,I.a.isEmpty(l)||I.a.isEmpty(f))return null;var p=s,m=[];return null==f||f.forEach((function(e){var t=e.resourceName,n="\xa5 ".concat(Math.abs(e.adultPrice)),r=" x ".concat(e.count).concat(e.chargeUnit);m.push({tag:"\u8d60",resourceName:t,price:n,countText:r})})),{title:p,titlePrice:"\xa5 0",renderList:m}}({priceDetail:e.priceDetail,productInfo:n,pageStatus:r,props:e})},ya=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus;return function(e){var t=e.priceDetail,n=e.props;if(I.a.isEmpty(t))return null;var r=t.priceDetailList,a=void 0===r?[]:r,o=t.tradePriceDetailList,i=void 0===o?[]:o,c=(t.totalPrice,n.isBestone?i:a),l=null==c?void 0:c.find((function(e){return e.priceType===ua})),u=l||{},s=u.priceName,d=u.resourcePriceDetailList,f=void 0===d?[]:d,p=u.totalPrice;if(!l||I.a.isEmpty(f))return null;var m=s,v="- \xa5 ".concat(Math.abs(p.totalPrice)),h=[];return null==f||f.forEach((function(e){var t=e.resourceName,n="- \xa5 ".concat(Math.abs(e.adultPrice)),r=" x ".concat(e.count).concat(e.chargeUnit);h.push({tag:"\u51cf",resourceName:t,price:n,countText:r})})),{title:m,titlePrice:v,renderList:h}}({priceDetail:e.priceDetail,productInfo:n,pageStatus:r,props:e})},_a=function(e){var t=e.color,n=void 0===t?"#E6E6E6":t,r=e.width,a=void 0===r?1:r;return y.a.createElement(Je.View,{style:{borderBottomColor:n,borderBottomWidth:a,borderBottomStyle:"dashed"}})},ba=y.a.memo(_a),Ea={levelWrapper:"_1pz6lxn0",levelText:"_1pz6lxn1",defaultText:"_1pz6lxn2",glodDiamondView:"_1pz6lxn3",commonView:"_1pz6lxn4",levelView40:"_1pz6lxn5",levelView30:"_1pz6lxn6",levelView20:"_1pz6lxn7",levelView999:"_1pz6lxn8"},wa=n(14),Sa=["0","1","2","3","10","35","-1","10008"],Ia=["0","1","2","3","10","35","-1","10008","40","30","20","999"],Ta=y.a.memo(Ca);function Ca(e){var t=e.code,n=e.text,r=e.type;if(!Ia.includes(t))return y.a.createElement(Je.Text,{className:Ea.defaultText},n);var a=[];return Sa.includes(t)?"vip"===r?a.push(Ea.glodDiamondView):a.push(Ea.commonView):a.push(Ea["levelView".concat(t)]),y.a.createElement(Je.View,{className:Object(wa.a)(Ea.levelWrapper,a)},y.a.createElement(Je.Text,{className:Object(wa.a)(Ea.levelText)},n))}var Pa="_614b1b0",ka="_614b1b1",Na="_614b1b2",Oa=y.a.memo((function(e){var t=e.isShow,n=e.costInfoList,r=e.onClose,a=e.zIndex;if(Object(z.c)(n))return null;var o=Object.values(n||{}),i=pt({footer:!1,safeArea:!0});return y.a.createElement(vt,{show:t,title:"\u8d39\u7528\u8bf4\u660e",handleClose:r,safeArea:!1,zIndex:a},y.a.createElement(Je.ScrollView,{className:Pa,style:Object.assign({},i)},o.map((function(e){return y.a.createElement(Je.View,{key:e.TitleCode},y.a.createElement(Je.View,{className:ka},y.a.createElement(Je.Text,{className:Na},e.Category)),y.a.createElement(Je.View,null,!!e.DescriptionList&&e.DescriptionList.map((function(e,t){return e=e&&e.replace(/\n/g,"")||"",y.a.createElement(nt,{key:t,content:"".concat(t+1,". ").concat(e)})}))))}))))})),xa=y.a.memo(Oa),Da="_1tczcnw0",ja="_1tczcnw2",Ma="_1tczcnw3",Aa="_1tczcnw4",Ra="_1tczcnw5",Va="_1tczcnw6",La="_1tczcnw8",Ba="_1tczcnw9",Fa="_1tczcnwa",Ua="_1tczcnwb",Ha="_1tczcnwc",qa="_1tczcnwd",Ya="_1tczcnwf",Ga="_1tczcnwh",Za="_1tczcnwi",$a=function(e){var t=e.priceDetail,n=e.pageName,r=e.isShow,a=e.cacheKey,o=e.onClose,i=e.zIndex,c=e.bottomDistance,l=pa.useState((function(e){return{isShowFeeIncludeMask:e.isShowFeeIncludeMask,isShowCostInfoMask:e.isShowCostInfoMask,productInfo:e.productInfo}})),u=l.isShowFeeIncludeMask,s=l.isShowCostInfoMask,d=l.productInfo,f=pa.useActions(),p=f.toggleFeeIncludeMask,m=f.toggleCostInfoMask,v=f.handleWriteDiscountLog;if(Object(g.useEffect)((function(){v(e)}),[e.priceDetail]),!t)return null;var h=c||60,_=d||{},b=_.CostInfoList,E=(_.BasicInfo||{}).isStudy,w=pt({footer:!1,safeArea:!0}),S=null;return S="resource"===n?y.a.createElement(y.a.Fragment,null,y.a.createElement(za,Object.assign({},e)),y.a.createElement(Ka,Object.assign({},e)),y.a.createElement(Xa,Object.assign({},e)),y.a.createElement(Wa,Object.assign({},e)),y.a.createElement(eo,Object.assign({},e)),y.a.createElement(Ja,Object.assign({},e))):y.a.createElement(y.a.Fragment,null,y.a.createElement(za,Object.assign({},e)),y.a.createElement(Ka,Object.assign({},e)),y.a.createElement(Qa,Object.assign({},e)),y.a.createElement(Xa,Object.assign({},e)),y.a.createElement(Wa,Object.assign({},e)),y.a.createElement(eo,Object.assign({},e)),y.a.createElement(Ja,Object.assign({},e)),"function"==typeof e.customContent?e.customContent():e.customContent),y.a.createElement(y.a.Fragment,null,y.a.createElement(vt,{show:r,title:"\u91d1\u989d\u660e\u7ec6",handleClose:o,zIndex:i},y.a.createElement(Je.ScrollView,{scrollY:!0,className:ja,style:Object.assign({marginBottom:h},w)},S)),y.a.createElement(_n,{isShow:u,type:E?"child":"adult",onClose:function(){return p(!1)},cacheKey:a,zIndex:i+1}),y.a.createElement(xa,{isShow:s,costInfoList:b,onClose:function(){return m(!1)},zIndex:i+1}))},za=Object(g.memo)((function(e){var t=ma(e),n=pa.useState((function(e){return{isShowFeeIncludeMask:e.isShowFeeIncludeMask,isShowCostInfoMask:e.isShowCostInfoMask,productInfo:e.productInfo}})),r=(n.isShowFeeIncludeMask,n.isShowCostInfoMask,n.productInfo),a=pa.useActions(),o=a.toggleFeeIncludeMask,i=a.toggleCostInfoMask;if(e.isShow,e.cacheKey,I.a.isEmpty(t))return null;r.CostInfoList;var c=t.title,l=t.titlePrice,u=t.isShowClauseList,s=t.isCruiseShowCostInfo,d=t.tips,f=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},u||s?y.a.createElement(Qe,{onPress:function(){u?o(!0):s&&i(!0)},className:Da},y.a.createElement(Je.Text,{className:Va},c),y.a.createElement(ct,{size:"30",lineHeight:"38",isIcon:!0,style:{marginLeft:5}},"\ue931")):y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.Text,{className:Va},c)),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(Je.Text,{className:Va},l)),d.map((function(e,t){return y.a.createElement(Je.View,{key:t,className:La},y.a.createElement(Je.Text,{className:Ba},e))})),f.map((function(e,t){return y.a.createElement(Je.View,{key:t,className:Fa},y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,{className:Ha},e.resourceName)),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},e.price)),y.a.createElement(Je.Text,{className:Ha},e.countText)))})))})),Ka=Object(g.memo)((function(e){var t=va(e);if(I.a.isEmpty(t))return null;var n=t.title,r=t.titlePrice,a=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},n),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(Je.Text,{className:Va},r)),y.a.createElement(Je.View,null,a.map((function(e,t){var n=e.resourceName,r=e.price,a=e.countText;return y.a.createElement(Je.View,{key:t,className:Fa},y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,{className:Ha},n)),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},r)),y.a.createElement(Je.Text,{className:Ha},a)))}))))})),Wa=Object(g.memo)((function(e){var t=function(e){var t=pa.useState((function(e){return{productInfo:e.productInfo,pageStatus:e.pageStatus}})),n=t.productInfo,r=t.pageStatus,a=e.priceDetail;return da({priceDetail:a,productInfo:n,pageStatus:r,props:e})}(e);if(I.a.isEmpty(t))return null;var n=t.title,r=t.titlePrice,a=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},n),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(ct,{size:"30",lineHeight:"38",weight:"500",color:"#f70"},r)),y.a.createElement(Je.View,null,a.map((function(e,t){var n=e.groupDiscount,r=e.vipDiscount,a=e.notDiscount,o=e.resourceName,i=e.price,c=e.countText,l=null;return I.a.isEmpty(n)||(l=y.a.createElement(Ta,{code:n.code,text:o})),I.a.isEmpty(r)||(l=y.a.createElement(y.a.Fragment,null,y.a.createElement(Ta,{code:r.code,text:r.text,type:"vip"}),y.a.createElement(Je.Text,{className:Ha,style:{paddingLeft:4}},o))),a&&(l=y.a.createElement(Je.Text,{className:Ha},o)),y.a.createElement(Je.View,{key:t,className:Fa},y.a.createElement(to,null,"\u60e0"),y.a.createElement(Je.View,{className:Ya},l),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},i)),y.a.createElement(Je.Text,{className:Ha},c)))}))))})),Xa=Object(g.memo)((function(e){var t=ha(e);if(I.a.isEmpty(t))return null;var n=t.title,r=t.titlePrice,a=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},n),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(Je.Text,{className:Va},r)),y.a.createElement(Je.View,null,a.map((function(e,t){var n;if(null===(n=null==e?void 0:e.list)||void 0===n?void 0:n.length){var r=e.resourceName,a=e.list;return y.a.createElement(Je.View,{key:t},y.a.createElement(Je.View,{className:Fa},y.a.createElement(Je.Text,{className:Ha},r)),a.map((function(e,t){e.tag;var n=e.name,r=e.price,a=e.countText;return y.a.createElement(Je.View,{key:t,className:Ua},y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,{className:Ha},n)),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},r)),y.a.createElement(Je.Text,{className:Ha},a)))})))}var o=e.resourceName,i=e.price,c=e.countText,l=e.tag;return y.a.createElement(Je.View,{key:t,className:Fa},!!l&&y.a.createElement(to,null,l),y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,null,y.a.createElement(Je.Text,{className:Ha},o))),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},i)),y.a.createElement(Je.Text,{className:Ha},c)))}))))})),Ja=Object(g.memo)((function(e){var t=ga(e);if(I.a.isEmpty(t))return null;var n=t.title,r=t.titlePrice,a=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},n),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(Je.Text,{className:Va},r)),y.a.createElement(Je.View,null,a.map((function(e,t){var n=e.resourceName,r=e.price,a=e.countText;return y.a.createElement(Je.View,{key:t,className:Fa},y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,{className:Ha},n)),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},r)),y.a.createElement(Je.Text,{className:Ha},a)))}))))})),Qa=Object(g.memo)((function(e){var t=(e.freightProps||{}).freightPrice;return t?y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},"\u914d\u9001\u8d39"),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(Je.Text,{className:Va},"\xa5 ".concat(t)))):null})),eo=Object(g.memo)((function(e){var t=ya(e);if(I.a.isEmpty(t))return null;var n=t.title,r=t.titlePrice,a=t.renderList;return y.a.createElement(Je.View,{className:Ma},y.a.createElement(Je.View,{className:Aa},y.a.createElement(Je.Text,{className:Va},n),y.a.createElement(Je.View,{className:Ra},y.a.createElement(ba,null)),y.a.createElement(ct,{size:"30",lineHeight:"38",weight:"500",color:"#f70"},r)),y.a.createElement(Je.View,null,a.map((function(e,t){var n=e.resourceName,r=e.price,a=e.countText,o=e.tag;return y.a.createElement(Je.View,{key:t,className:Fa},y.a.createElement(to,null,o),y.a.createElement(Je.View,{className:Ya},y.a.createElement(Je.Text,{className:Ha},n)),y.a.createElement(Je.View,{className:Da},y.a.createElement(Je.View,{className:qa},y.a.createElement(Je.Text,{className:Object(wa.a)([Ha])},r)),y.a.createElement(Je.Text,{className:Ha},a)))}))))})),to=function(e){return y.a.createElement(Je.View,{className:Ga},y.a.createElement(Je.Text,{className:Za},e.children))},no=Object(g.memo)($a),ro=y.a.memo(ao);function ao(e){return y.a.createElement(oo,Object.assign({},e),y.a.createElement(no,Object.assign({},e)))}function oo(e){var t=Object(g.useMemo)((function(){var t=[S.PlatformContext.create({}),S.TourContext.create(Object.assign(Object.assign({},Xe().tourContext),{props:e,pageName:e.pageName}))];return r.mergeModelContext.apply(void 0,t)}),[]);return y.a.createElement(pa.Provider,{context:t},e.children)}var io=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=e.imInfo,o=a.imServiceTime,i=a.imSwitch,c=t.BasicInfo;if(!i)return null;var l="";if("\u5546\u5bb6"===(null===(n=null==e?void 0:e.serviceInfo)||void 0===n?void 0:n.shortServiceToast)){var u="\u5546\u5bb6\u5ba2\u670d";l="".concat(u,"\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u89e3\u7b54\u5ea6\u5047\u76f8\u5173\u95ee\u9898")}else{var s="\u643a\u7a0b\u5ba2\u670d";l="R"===c.SaleMode?"\u5ba2\u670d\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u89e3\u7b54\u5ea6\u5047\u76f8\u5173\u95ee\u9898":c.isCruise?"".concat(s,"\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u975e\u5de5\u4f5c\u65f6\u95f4\u53ef\u62e8\u6253\u7535\u8bdd\u8054\u7cfb\u6211\u4eec"):"".concat(s,"\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u89e3\u7b54\u5ea6\u5047\u76f8\u5173\u95ee\u9898")}return o&&(l="\u670d\u52a1\u65f6\u95f4\uff1a".concat(o,"\n").concat(l)),{itemDescription:l,itemType:"IM",jumpUrl:r}},co=function(e,t){var n=e.imInfo,r=n.mobileServiceTime,a=n.mobile,o=n.mobileCode,i=n.inquiry,c=t.BasicInfo;if(!i)return null;var l=a;if(o&&(l="".concat(a,",").concat(o)),!l)return null;l=String(l).split("-").join("");var u="";return c.isCruise?u="\u670d\u52a1\u65f6\u95f4 9:00-18:00\n\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5\u5ba2\u670d\u4ea7\u54c1\u7f16\u53f7: ".concat(c.ProductId):(u="\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5\u5ba2\u670d\u4ea7\u54c1\u7f16\u53f7: ".concat(c.ProductId),r&&(u="\u670d\u52a1\u65f6\u95f4\uff1a".concat(r,"\n").concat(u))),{itemTitle:"\u552e\u524d\u54a8\u8be2",itemDescription:u,itemLightDescriptionList:["".concat(c.ProductId)],destinationNumber:a,channelNumber:o||"",destinationNumberDisplay:l,itemType:"PSTN",locationGlobalId:"1",locationName:"\u4e2d\u56fd"}},lo=function(e,t){var n=e.imInfo,r=n.afterSaleServiceTime,a=n.afterSaleTel,o=n.afterSaleExtTel,i=n.mobileCode;if(!n.inquiry)return null;var c=a;if(i&&(c="".concat(a,",").concat(o)),!c)return null;c=String(c).split("-").join("");var l="\u5982\u60a8\u8ba2\u5355\u5df2\u63d0\u4ea4\uff0c\u53ef\u8054\u7cfb\u552e\u540e\u5ba2\u670d\u67e5\u8be2\u53ca\u4fee\u6539";return r&&(l="\u670d\u52a1\u65f6\u95f4\uff1a".concat(r,"\n").concat(l)),{itemTitle:"\u552e\u540e\u54a8\u8be2",itemDescription:l,itemLightDescriptionList:[],destinationNumber:a,channelNumber:o||"",destinationNumberDisplay:c,itemType:"PSTN",locationGlobalId:"1",locationName:"\u4e2d\u56fd"}},uo={UPDATE_PRODUCT_INFO:function(e,t){var n=t.BasicInfo,r=t.aliasInfo;return Object.assign(Object.assign({},e),{productInfo:{BasicInfo:n,aliasInfo:r}})},UPDATE_CUSTOMER_SERVICE:function(e,t){return Object.assign(Object.assign({},e),{customerService:t})}},so=Object(a.createReactModel)((function(){var e=Object(S.setupTourContext)(),t=e.props,n=Object(r.setupStore)({name:"isomorphic_fee_include_components",initialState:{customerService:[]},reducers:uo,logger:z.b&&!z.d&&!!t.logger}),a=n.store,o=n.actions,i=Q(e),c=i.getProductInfo,l=i.fetchProductInfo;Object(r.setupPreloadCallback)(w(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent){e.next=6;break}return console.error("\u5ba2\u670d\u7ec4\u4ef6: \u7f3a\u5c11productInfo"),e.abrupt("return");case 6:o.UPDATE_PRODUCT_INFO(t);case 7:case"end":return e.stop()}}),e)}))));var u=function(){var e=w(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,c(t.cacheKey);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:return e.prev=6,r=ee(t.cacheKey),e.next=10,l(r);case 10:return n=e.sent,e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();return{store:a,actions:Object.assign(Object.assign({},o),{initCustomerService:function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object(z.c)(e)||Object(z.c)(null==t?void 0:t.BasicInfo))return[];var r=[],a=io(e,t,n);a&&r.push({consultItemDataList:[a],moduleTitle:"\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d"});var o=co(e,t),i=lo(e,t);if(o||i){var c=[];o&&c.push(o),i&&c.push(i),r.push({consultItemDataList:c,moduleTitle:"\u62e8\u6253\u5ba2\u670d\u7535\u8bdd"})}return r}(e,a.getState().productInfo);o.UPDATE_CUSTOMER_SERVICE(t)}})}})),fo="_4w00g0",po="_4w00g1",mo="_4w00g2",vo="_4w00g3",ho="_4w00g4",go="_4w00g5";function yo(e){var t=e.isShow,n=e.onClose,r=e.imEntryInfo,a=e.onJumpIM,o={customerService:so.useState((function(e){return{customerService:e.customerService}})).customerService}.customerService,i=so.useActions().initCustomerService;if(Object(g.useEffect)((function(){t&&i(r)}),[r,t]),Object(z.c)(o))return null;var c=pt({top:0,footer:!1,safeArea:!0});return y.a.createElement(vt,{title:"\u8054\u7cfb\u5ba2\u670d",handleClose:n,show:t,zIndex:999},y.a.createElement(Je.ScrollView,{scrollY:!0,scrollWithAnimation:!0,style:c},y.a.createElement(Je.View,{className:fo},o.map((function(e,t){return y.a.createElement(y.a.Fragment,{key:t},t>0&&y.a.createElement(Je.View,{className:mo}),y.a.createElement(Je.View,{className:po},y.a.createElement(ct,{size:"32",lineHeight:"36",color:"#333",weight:"500"},e.moduleTitle),e.consultItemDataList.map((function(e,t){var n=e.itemType;return"IM"===n?y.a.createElement(_o,{key:t,item:e,onJumpIM:a}):"PSTN"===n?y.a.createElement(bo,{key:t,item:e}):null}))))})))))}function _o(e){var t=e.item,n=e.onJumpIM,r=t.itemDescription.split("\n");return y.a.createElement(Qe,{className:vo,onPress:function(){n&&n()}},y.a.createElement(Je.View,null,r.map((function(e,t){return y.a.createElement(ct,{key:t,size:"26",lineHeight:"38",color:"#aaa",block:!0,style:{marginTop:6}},e)}))),y.a.createElement(Je.View,{className:go}))}function bo(e){var t=e.item,n=t.itemTitle,r=t.itemDescription,a=t.itemLightDescriptionList,o=(t.channelNumber,t.destinationNumber),i=(t.destinationNumberDisplay,t.locationGlobalId,t.locationName,r.split("\n")),c=[];return i.forEach((function(e){var t=null==a?void 0:a.find((function(t){return e.includes(t)}));if(t){var n=e.indexOf(t),r=e.substring(0,n),o=e.substring(n,n+t.length),i=e.substring(n+t.length),l=[];r&&l.push({text:r,color:"#aaa"}),o&&l.push({text:o,color:"#333"}),i&&l.push({text:i,color:"#aaa"}),c.push(l)}else c.push([{text:e,color:"#aaa"}])})),y.a.createElement(Qe,{onPress:function(){Oe.a.makePhoneCall({phoneNumber:o})}},y.a.createElement(ct,{size:"28",lineHeight:"38",color:"#333",block:!0,style:{marginTop:12}},n),y.a.createElement(Je.View,{className:vo},y.a.createElement(Je.View,null,c.map((function(e,t){return y.a.createElement(ct,{key:t,size:"26",lineHeight:"38",color:"#aaa",block:!0,style:{marginTop:6}},e.map((function(e,t){return y.a.createElement(ct,{key:t,size:"26",lineHeight:"38",color:e.color},e.text)})))}))),y.a.createElement(Je.View,{className:ho})))}var Eo=y.a.memo(wo);function wo(e){return y.a.createElement(So,Object.assign({},e),y.a.createElement(yo,Object.assign({},e)))}function So(e){var t=Object(g.useMemo)((function(){var t=[S.PlatformContext.create({}),S.TourContext.create(Object.assign(Object.assign({},Xe().tourContext),{props:e}))];return r.mergeModelContext.apply(void 0,t)}),[]);return y.a.createElement(so.Provider,{context:t},e.children)}var Io=n(70),To=n.n(Io),Co=n(72),Po=n.n(Co),ko=n(73),No=n.n(ko),Oo=n(74),xo=n(75),Do=n(76),jo=n.n(Do),Mo=n(17),Ao=n.n(Mo)},function(e,t,n){"use strict";n.r(t),n.d(t,"__DO_NOT_USE__ActionTypes",(function(){return s})),n.d(t,"applyMiddleware",(function(){return y})),n.d(t,"bindActionCreators",(function(){return h})),n.d(t,"combineReducers",(function(){return m})),n.d(t,"compose",(function(){return g})),n.d(t,"createStore",(function(){return f})),n.d(t,"legacy_createStore",(function(){return p}));var r=n(7),a=n(22);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var l="function"==typeof Symbol&&Symbol.observable||"@@observable",u=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function d(e){if("object"!==Object(r.a)(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e,t,n){var a;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(c(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(c(1));return n(f)(e,t)}if("function"!=typeof e)throw new Error(c(2));var o=e,i=t,u=[],p=u,m=!1;function v(){p===u&&(p=u.slice())}function h(){if(m)throw new Error(c(3));return i}function g(e){if("function"!=typeof e)throw new Error(c(4));if(m)throw new Error(c(5));var t=!0;return v(),p.push(e),function(){if(t){if(m)throw new Error(c(6));t=!1,v();var n=p.indexOf(e);p.splice(n,1),u=null}}}function y(e){if(!d(e))throw new Error(c(7));if(void 0===e.type)throw new Error(c(8));if(m)throw new Error(c(9));try{m=!0,i=o(i,e)}finally{m=!1}for(var t=u=p,n=0;n<t.length;n++)(0,t[n])();return e}function _(e){if("function"!=typeof e)throw new Error(c(10));o=e,y({type:s.REPLACE})}function b(){var e,t=g;return(e={subscribe:function(e){if("object"!==Object(r.a)(e)||null===e)throw new Error(c(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[l]=function(){return this},e}return y({type:s.INIT}),(a={dispatch:y,subscribe:g,getState:h,replaceReducer:_})[l]=b,a}var p=f;function m(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var o,i=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:s.INIT}))throw new Error(c(12));if(void 0===n(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error(c(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},l=0;l<i.length;l++){var u=i[l],s=n[u],d=e[u],f=s(d,t);if(void 0===f)throw t&&t.type,new Error(c(14));a[u]=f,r=r||f!==d}return(r=r||i.length!==Object.keys(e).length)?a:e}}function v(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return v(e,t);if("object"!==Object(r.a)(e)||null===e)throw new Error(c(16));var n={};for(var a in e){var o=e[a];"function"==typeof o&&(n[a]=v(o,t))}return n}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(c(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(a)}));return r=g.apply(void 0,o)(n.dispatch),i(i({},n),{},{dispatch:r})}}}}])},95451:function(e,t,n){"use strict";n.d(t,{Ff:function(){return r},NN:function(){return a},cC:function(){return o},Bm:function(){return i},$V:function(){return v}});var r=function(e){return e[e["NONE"]=0]="NONE",e[e["FLIGHT"]=1]="FLIGHT",e[e["HOTEL"]=2]="HOTEL",e[e["TRAIN"]=32]="TRAIN",e[e["ALL"]=35]="ALL",e}({}),a=function(e){return e[e["CTRIPRN"]=2]="CTRIPRN",e[e["CTRIPH5"]=4]="CTRIPH5",e[e["TRIPRN"]=8]="TRIPRN",e[e["TRIPH5"]=16]="TRIPH5",e[e["WEIXIN"]=32]="WEIXIN",e}({}),o={20:"\u94c2\u91d1\u8d35\u5bbe",30:"\u94bb\u77f3\u8d35\u5bbe",35:"\u91d1\u94bb\u8d35\u5bbe",40:"\u9ed1\u94bb\u8d35\u5bbe",102:"\u673a\u7968\u7528\u6237"},i=function(e){return e[e["NOCHANGE"]=0]="NOCHANGE",e[e["SUCCESS"]=1]="SUCCESS",e[e["FAIL"]=2]="FAIL",e}({}),c="\nquery CabinFareRemark(\n  $params: CabinFareRemarkReq\n){\n  CabinInfo(params: $params){\n    FareRemarkForShopping{\n      RemarkList,\n      BriefFareRemark,\n      BriefTag,\n      BriefBaggageLimit,\n      TransferInfo,\n      BriefTransferInfo,\n      TransferInfoViewData \n    }\n  }\n}\n",l="\nquery GetSingleRoom($params: SingleRoomReq) {\n  SingleRoom(params: $params) {\n    policy\n    Room\n    ResponseStatus\n  }\n}\n",u="\nmutation GetSearchXResource($params: ExtraResourceArgs!) {\n  extraResource(params: $params) {\n    Option\n    Insurances\n    train\n    Tags\n    single\n    cruiseTour\n    room\n    discount\n    combinedTrans\n    transportation\n    visa\n    free\n    required\n    optional\n    trainUpdateResult\n    optionUpdateResult\n    ResponseStatus\n  }\n}\n",s="\nquery GetPriceDetail($params: ShoppingDetailArgs!){\n  shoppingDetail(params: $params) {\n    priceDetail{\n      json\n      ResponseStatus\n    }\n    ResponseStatus\n  }\n}\n",d="\nquery getFirstScreenInfo(\n  $ProductInfoParams: ProductArgs!, \n  $ShoppingDetailParams: ShoppingDetailArgs!, \n  $imEntryInfoParams: IMEntryInfoArgs!\n  $qconfigParams: QConfigArgs!\n  ) {\n  productInfo(params: $ProductInfoParams) {\n    BasicInfo {\n      json\n    }\n    SegmentInfo {\n      json\n    }\n    TourGroupInfo {\n      json\n    }\n    BasicExtendInfo {\n      json\n    }\n    FeeInfoList {\n      json\n    }\n    CostInfoList {\n      json\n    }\n    VendorInfo {\n      json\n    }\n    ExtInfo {\n      json\n    }\n    TagGroupInfo {\n      json\n    }\n    OrderKnow {\n      json\n    }\n    imEntryInfo(params: $imEntryInfoParams){\n      imInfo\n      serviceInfo\n    }\n    competitionInfo {\n      json\n    }\n    easeOrderInfo {\n      isShow\n      tags\n    }\n    aliasInfo {\n      alias\n      type\n      name\n    }\n    ResponseStatus\n  }\n  shoppingDetail(params: $ShoppingDetailParams) {\n    ShoppingId\n    Shopping\n    Flight\n    Hotel\n    tagInfo\n    Cruise\n    priceDetail {\n      json\n      ResponseStatus\n    }\n    flightHornContent {\n      Notifications\n    }\n    shoppingRequestInfo {\n      json\n      ResponseStatus\n      RecommendSearchRequest\n    }\n    prefetchSetting\n    ResponseStatus\n    competitionInfo {\n      json\n    }\n  }\n  qConfig(params: $qconfigParams){\n    AppSettingList\n  }\n}\n",f="\nquery fetchProductInfo($params: ProductArgs!) {\n productInfo(params: $params) {\n   BookInfo {\n     json\n   }\n   BasicInfo {\n     json\n   }\n   SegmentInfo {\n     json\n   }\n   OrderKnow {\n     json\n   }\n   BasicExtendInfo {\n     json\n   }\n   FeeInfoList {\n     json\n   }\n   Visa {\n     json\n   }\n   ExtInfo {\n     json\n   }\n   PriceInfo {\n     json\n   }\n   TagGroupInfo {\n    json\n   }\n   aliasInfo {\n    alias\n    type\n    name\n   }\n   ResponseStatus\n }\n}\n",p="\nquery UseCarResources($params: UseCarResourcesReq) {\n  UseCarIntroduction(params: $params) {\n     XIntroduction\n\n }\n}",m="\nquery getCompetitionInfo($ShoppingDetailParams: ShoppingDetailArgs!) {\n  shoppingDetail(params: $ShoppingDetailParams) {\n    ResponseStatus\n    competitionInfo {\n      json\n    }\n  }\n}\n",v={fetchCabinFareRemark:c,fetchHotelPolicyRemark:l,fetchSearchXResource:u,fetchPriceDetail:s,fetchFirstScreenInfo:d,fetchUseCarResources:p,fetchProductInfo:f,fetchCompetitionInfo:m}},63060:function(e,t,n){"use strict";n.d(t,{UK:function(){return f},v4:function(){return p},xb:function(){return m},Jb:function(){return h},yN:function(){return g},LU:function(){return _},xX:function(){return I},sF:function(){return C},By:function(){return k},Sy:function(){return N},tr:function(){return O},fP:function(){return x},sy:function(){return D},yi:function(){return j},XI:function(){return M},ze:function(){return A},f5:function(){return R},j3:function(){return V},T2:function(){return L},jR:function(){return B},zr:function(){return F},UE:function(){return U},re:function(){return H},UZ:function(){return q},jE:function(){return Y},Ae:function(){return G},A0:function(){return Z},Bh:function(){return $},Mt:function(){return z},N7:function(){return K},qE:function(){return W},Z2:function(){return X},KS:function(){return ee},_O:function(){return ne},FM:function(){return oe},BU:function(){return ue},zH:function(){return pe},oI:function(){return ve},vu:function(){return he},uq:function(){return ge},Is:function(){return ye},s9:function(){return _e},sL:function(){return be},aC:function(){return Pe},_e:function(){return ke},Bb:function(){return Ne},UH:function(){return Oe},PW:function(){return De},Q8:function(){return je},dG:function(){return Me},pi:function(){return Ae},uO:function(){return Re},gG:function(){return Ve},Hy:function(){return Le},e3:function(){return Be},A$:function(){return Fe},_4:function(){return Ue},eh:function(){return He},ZH:function(){return qe},ep:function(){return Ye},VF:function(){return Ge},LP:function(){return Ze},CE:function(){return $e},WP:function(){return ze},lM:function(){return Ke},e6:function(){return We},Vv:function(){return Xe},U3:function(){return Qe},QV:function(){return et},Pe:function(){return tt},mw:function(){return nt},vY:function(){return rt},Ll:function(){return at},zt:function(){return ot},hh:function(){return it},P2:function(){return ct},GR:function(){return lt},YE:function(){return st},kb:function(){return dt}});var r,a=n(90129),o=n(22276),i=n(90983),c=n(93212),l=n(298),u=n(22394),s=n(95451),d=n(79666),f=("undefined"!==typeof process&&(null===(r=process)||void 0===r||(r=r.env)),function(e,t){if(!e.hasOwnProperty("from"))return d.stringify(e);var n=(0,l.Z)({},e),r=n.from;delete n.from;var a=d.stringify(n);return t||(a+="&from=".concat(encodeURIComponent(r))),a}),p=function(e){var t,n,r={vipGrade:"",vipLevelName:""};if(!e||m(e.priceDetailList))return r;var a=(null===(t=e.priceDetailList.filter((function(e){return 3==e.priceType})))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.resourcePriceDetailList)||[],o=[];return null===a||void 0===a||a.forEach((function(e){var t;13==e.resourceType&&(null===(t=e.tag)||void 0===t||t.forEach((function(e){return o.push(e)})))})),r.vipGrade=(null===(n=o.find((function(e){return"ctrip_vip_discount"==e.key||"ctrip_flight_discount"==e.key})))||void 0===n?void 0:n.value)||"",r.vipLevelName=s.cC[r.vipGrade]||"",r},m=function(e){return void 0===e||null===e||"object"===(0,c.Z)(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},v=function(e){return"string"===typeof e?e.split(""):"object"===(0,c.Z)(e)?Object.values(e):void 0};var h=function(e){return"cardPosition"+e.replace(/[^0-9a-zA-Z]+/gi,"")},g=function(e,t){var n=e&&u.Z.parse(e).format(t);return n||""},y=function(e,t){if(!e||!e.length)return[];var n,r={},a=(0,i.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;o[t]&&(r[o[t]]="")}}catch(e){a.e(e)}finally{a.f()}return Object.keys(r)},_=function(e){if(!e)return"";var t=Math.floor(e/60),n=e-60*t;return n?"".concat(t,"h").concat(n,"m"):"".concat(t,"h")},b=function(e,t){var n=function(e){var t=new Date;return t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),t.getTime()},r=(new u.Z).format("HH:mm"),a=n(r);e=n(e),t=n(t);var o=e<a&&a<t;return o},E=function(e,t){return u.Z.dayDiff(e,t)},w=function(e,t,n,r){var a=e.isDiyfhxsdp,o=null===e||void 0===e?void 0:e.isPureDiyfhxsdp,i=null===e||void 0===e?void 0:e.isStudy,c=null===e||void 0===e?void 0:e.isCruise,l=4===(null===e||void 0===e?void 0:e.ProductPatternId),u=o?"sdp":c?"cruise":"grp",d="cruise"==u?"10650053816":o?"411022":"401072";t!=s.NN.CTRIPH5&&t!=s.NN.WEIXIN||(d="cruise"==u?"10650092601":o?"234022":"220164"),t===s.NN.CTRIPH5&&r&&"cruise"===u&&(d="10650094148");var f=n.IsFixSegment?"fixSegment":"extendStay",p={activeProductId:e.ProductId,isDiyfhxsdp:a,isPureDiyfhxsdp:o,isThemeProduct:e.IsThemeProduct,isStudy:i,isCruise:c,isPrivateGroup:l,isRetail:"R"===e.SaleMode,isAgent:"P"===e.SaleMode,prodType:u,pageId:d,actionIdSuffix:"".concat(u,"-").concat(d),segmentType:f};return{pageStatus:p,prodType:u}},S=function(e){var t=e.DepartureDate,n=e.ReturnDate,r=e.Passengers,a=e.ProductId,o=g(t,"YYYY-MM-DD"),i=o.slice(0,7),c=r.filter((function(e){return"Adult"===e.Type}))[0],l=r.filter((function(e){return"Child"===e.Type}))[0],u=r.filter((function(e){return"Infant"===e.Type}))[0],s=c?c.Count:0,d=l?l.Count:0,f=u?u.Count:0,p=l&&l.Ages||[];d>0&&0===p.length&&(p=Array(d).fill(0));var m={curDate:o,curMonth:i,adultCount:s,childCount:d,childAge:p,infantCount:f,DepartureDate:t,ReturnDate:n,curLine:a};return m},I=function(e){var t={TrainSaleStartTime:"",TrainSaleEndTime:""};if(m(e)||m(e.AppSettingList))return t;var n=e.AppSettingList;return t.TrainSaleStartTime=n.find((function(e){return"publictraininfo.train_saleStartTime"==e.Key})).Value,t.TrainSaleEndTime=n.find((function(e){return"publictraininfo.train_saleEndTime"==e.Key})).Value,t},T=["A","B","C","D","E","F","G","H","I","J"],C=function(e,t,n){var r,a=e.BasicInfo,o=e.TourGroupInfo,i=e.ExtInfo,c=e.OrderKnow,u=e.SegmentInfo,s=w(a,t,u,n),d=s.pageStatus,f=s.prodType,p=!1;o&&o.TourGroupProductInfo&&o.TourGroupProductInfo.length>1&&(p=!0);var v="";if(p){var h=o.TourGroupProductInfo.find((function(e){return e.ProductId===a.ProductId}));h&&h.SortNumber&&(v=T[h.SortNumber-1]||"")}var g,y=!1;m(i)||(y="true"==(null===(g=i.find((function(e){return"isVipDiscountProduct"==e.Key})))||void 0===g?void 0:g.Value));var _=null,b=null!==c&&void 0!==c&&null!==(r=c.OrderKnowList)&&void 0!==r&&r.some((function(e){return"\u8fdd\u7ea6\u6761\u6b3e"===(null===e||void 0===e?void 0:e.Title)}))?null===c||void 0===c?void 0:c.DefaultInfo:null;return null!==b&&void 0!==b&&b.TravellerDefaultList&&(_=b),(0,l.Z)((0,l.Z)({},e),{},{pageStatus:d,prodType:f,isMultiLine:p,multiLineAlias:v,specialTag:y,refundRule:_})},P=function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return"productlinetype"===e.Key})),n=null===e||void 0===e?void 0:e.find((function(e){return"productlinename"===e.Key}));return t&&n?{type:"multiTravel",alias:t.Value,name:n.Value}:t&&!n?{type:"multiLine",alias:t.Value,name:""}:{type:"normal",alias:"",name:""}},k=function(e){var t,n=(null===e||void 0===e||null===(t=e.Shopping)||void 0===t||null===(t=t.Basic)||void 0===t?void 0:t.Passengers)||[],r=n.filter((function(e){return"Adult"===e.Type}))[0],a=n.filter((function(e){return"Child"===e.Type}))[0],o=n.filter((function(e){return"Infant"===e.Type}))[0],i=r?r.Count:null,c=a?a.Count:null,l=o?o.Count:null;return{adultCount:i,childCount:c,infantCount:l}},N=function(e){var t=e.Shopping,n=t.Basic,r=t.Tags,a=t.Product,o=e.shoppingRequestInfo,i=(null===n||void 0===n?void 0:n.Passengers)||[],c=(null===n||void 0===n?void 0:n.DepartDate)||"",u=(null===n||void 0===n?void 0:n.ArriveDate)||"",s=(null===a||void 0===a?void 0:a.Id)||0,d=(null===o||void 0===o?void 0:o.RecommendSearchRequest)||{},f=(null===d||void 0===d?void 0:d.Segments)||[],p=S({DepartureDate:c,ReturnDate:u,Passengers:i,ProductId:s}),m=P(r);return(0,l.Z)((0,l.Z)((0,l.Z)({},e),p),{},{Passengers:i,Tags:r,ShoppingSegments:f,aliasInfo:m})},O=function(e){var t=e.Shopping,n=t.Basic,r=t.Tags,a=t.Product,o=(null===a||void 0===a?void 0:a.Id)||0,i=(null===a||void 0===a?void 0:a.Id)||0,c=null===n||void 0===n?void 0:n.DepartCityId,l=(null===a||void 0===a?void 0:a.MainName)||"",u=(null===a||void 0===a?void 0:a.Name)||"",s=null===n||void 0===n?void 0:n.OrderId,d=null===n||void 0===n?void 0:n.TempOrderId,f=null===r||void 0===r?void 0:r.find((function(e){return"recommendsearch_calendar_price"===e.Key})),p="";return null!==f&&void 0!==f&&f.Value&&(p=String(f.Value||"")),{productId:o,saleCityId:0,departCityId:c,line:i,MainName:l,Name:u,orderid:s,temporderid:d,recommendcalendarprice:p}},x=function(e){var t,n=[];return null===e||void 0===e||null===(t=e[0].groups)||void 0===t||t.forEach((function(e){var t;null===e||void 0===e||null===(t=e.datas)||void 0===t||t.forEach((function(e){var t,r,a,o=(null===e||void 0===e||null===(t=e.Basic)||void 0===t||null===(t=t.ExtendInfos)||void 0===t||null===(t=t.filter((function(e){return"TicketInfo"===e.Code})))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.FieldValues)||[],i=(null===(r=o.filter((function(e){return"POIId"===e.Key})))||void 0===r||null===(r=r[0])||void 0===r?void 0:r.Value)||"",c=(null===(a=o.filter((function(e){return"ScenicSpotId"===e.Key})))||void 0===a||null===(a=a[0])||void 0===a?void 0:a.Value)||"";i&&"0"!=i&&n.push({POIId:i,ScenicSpotId:c})}))})),n},D=function(e){var t=e.ShoppingResource,n=e.selectedResource,r=e.updateType,a=n.Token,o=n.SelectedCount,i=n.SelectedShopping,c=n.OrderExtendInfos,s=n.resourceType,d=(n.CategoryId,n.categorySeqId),f=n.poiId,p=n.SelectedInfo,m=t[s]||[],v=[],h=null===p||void 0===p?void 0:p.UseDate,g=null===p||void 0===p?void 0:p.EndUseDate;if("ExtendInfo"!=r){var y=Be(n),_=u.Z.format(null===i||void 0===i?void 0:i.UseDate,"YYYY-MM-DD");h=y?null===p||void 0===p?void 0:p.UseDate:_,g=y?null===p||void 0===p?void 0:p.EndUseDate:_}return m.forEach((function(e){if((null===e||void 0===e?void 0:e.categorySeqId)==d){var t=[];e.groups.forEach((function(e){if(5!=d||5==d&&e.poiId==f){var n=(null===e||void 0===e?void 0:e.datas)||[],i=[],u={};null===n||void 0===n||n.forEach((function(e){if(e.Token==a)switch(r){case"count":case"date":u=(0,l.Z)((0,l.Z)({},e),{},{SelectedInfo:(0,l.Z)((0,l.Z)({},e.SelectedInfo),{},{SelectedCount:o,UseDate:h,EndUseDate:g})}),i.push(u);break;case"ExtendInfo":u=(0,l.Z)((0,l.Z)({},e),{},{SelectedInfo:(0,l.Z)((0,l.Z)({},e.SelectedInfo),{},{OrderExtendInfos:c})}),i.push(u);break;default:break}else i.push(e)}));var s=(0,l.Z)((0,l.Z)({},e),{},{datas:i});t.push(s)}else t.push(e)}));var n=(0,l.Z)((0,l.Z)({},e),{},{groups:t});v.push(n)}else v.push(e)})),v},j=function(e){var t=e.ShoppingResource,n=e.selectedResource,r=(e.updateType,n.Token),a=n.resourceType,o=n.SelectedCount,i=n.GroupId,c=t[a]||[],u=[];return c.forEach((function(e){var t=[];null===e||void 0===e||e.groups.forEach((function(e){if(e.GroupId==i){var n=[];e.datas.forEach((function(e){if(e.Token==r){var t=(0,l.Z)((0,l.Z)({},e),{},{SelectedInfo:(0,l.Z)((0,l.Z)({},e.SelectedInfo),{},{SelectedCount:o})});n.push(t)}else n.push(e)}));var a=(0,l.Z)((0,l.Z)({},e),{},{datas:n});t.push(a)}else t.push(e)}));var n=(0,l.Z)((0,l.Z)({},e),{},{groups:t});u.push(n)})),u},M=function(e){var t,n,r,a,o,i=e.ShoppingResource,c=e.selectedResource,l=i["room"]||[],u=(null===(t=l[0])||void 0===t?void 0:t.title)||"",s=(null===(n=l[0])||void 0===n?void 0:n.resourceType)||"",d=(null===(r=l[0])||void 0===r||null===(r=r.groups[0])||void 0===r?void 0:r.type)||"",f=(null===(a=l[0])||void 0===a||null===(a=a.groups[0])||void 0===a?void 0:a.datas)||[],p=(null===(o=l[0])||void 0===o||null===(o=o.groups[0])||void 0===o?void 0:o.virtualRooms)||[],v=[],h={};null===p||void 0===p||p.forEach((function(e){if(m(null===e||void 0===e?void 0:e.SelectedInfo))v.push(e);else{var t={Token:c.Token,SelectedCount:c.Count};h={VirtualRoom:e.VirtualRoom,ResourceRelationId:e.ResourceRelationId,SelectedInfo:t},v.push(h)}}));var g=[{title:u,resourceType:s,groups:[{type:d,datas:f,virtualRooms:v}]}];return g},A=function(e){var t,n,r,a=e.ShoppingResource,o=e.deleteToken,i=a["transportation"]||[],c=(null===(t=i[0])||void 0===t?void 0:t.title)||"",u=(null===(n=i[0])||void 0===n||null===(n=n.groups[0])||void 0===n?void 0:n.type)||"",s=(null===(r=i[0])||void 0===r||null===(r=r.groups[0])||void 0===r?void 0:r.datas)||[],d=[],f={};null===s||void 0===s||s.forEach((function(e){var t,n=(null===e||void 0===e?void 0:e.SelectedInfo)||{},r=null===n||void 0===n?void 0:n.type,a="vacation"===r?null===n||void 0===n?void 0:n.Token:null===(t=n.CarProduct)||void 0===t?void 0:t.Token;a==o?(f=(0,l.Z)((0,l.Z)({},e),{},{SelectedInfo:{}}),d.push(f)):d.push(e)}));var p=[{title:c,groups:[{type:u,datas:d}]}];return p},R=function(e,t){var n=(0,o.Z)(e);return null===t||void 0===t||t.map((function(e){var t,r=(null===n||void 0===n||null===(t=n.filter((function(t){return t.Token==e})))||void 0===t?void 0:t[0])||{};m(r)&&n.push({Token:e,isSelectedToken:!1})})),n},V=function(e){var t=[];return Object.keys(e).forEach((function(n){if(-1!==["room","discount","visa","free","required","optional","hidden","cruiseTour"].indexOf(n)){var r=(null===e||void 0===e?void 0:e[n])||[];null===r||void 0===r||r.forEach((function(e){var n=e.groups||[];null===n||void 0===n||n.forEach((function(e){var n=(null===e||void 0===e?void 0:e.datas)||[];null===n||void 0===n||n.forEach((function(e){var n=null===e||void 0===e?void 0:e.SelectedInfo;null!==n&&void 0!==n&&n.SelectedDefaultDate&&t.push(null===e||void 0===e?void 0:e.Token)}))}))}))}})),t},L=function(e){var t=e.resource,n=[];return m(t)||t.map((function(e){var t=e.groups,r=[];null===t||void 0===t||t.map((function(e){var t=e.datas,n=[];null===t||void 0===t||t.map((function(e){var t=e.SelectedInfo,r=void 0===t?{}:t,a=e.OrderExtendInfos,o=void 0===a?[]:a,i=e.ResourceType;if(m(o)||!m(null===r||void 0===r?void 0:r.OrderExtendInfos)||"activity"!==i&&"scenic"!==i)n.push(e);else{var c=[];null===o||void 0===o||o.map((function(e){var t={},n=(e.Content,e.ID),r=e.Items,a=e.Name,o=e.OrderExtendIId,i=e.Token,l=e.Type,u=[];1!=l&&2!=l&&3!=l||null===r||void 0===r||r.map((function(e){e.Content;var t=e.CtripCode,n=e.ItemID,r=e.ItemToken,a=e.VendorCode,o={Id:n,Content:"",CtripCode:t,VendorCode:a,Token:r};u.push(o)})),t={Content:"",Id:n,Name:a,OrderExtendIId:o,Token:i,Type:l,Items:u},c.push(t)}));var u=(0,l.Z)((0,l.Z)({},r),{},{OrderExtendInfos:c}),s=(0,l.Z)((0,l.Z)({},e),{},{SelectedInfo:u});n.push(s)}}));var a=(0,l.Z)((0,l.Z)({},e),{},{datas:n});r.push(a)}));var a=(0,l.Z)((0,l.Z)({},e),{},{groups:r});n.push(a)})),{updateResource:n}},B=function(e){if(m(e))return[];var t=[];return e.forEach((function(e){var n={TokenInfo:e.Token,ExtendMaps:[{Key:"Content",Value:e.Content}]};t.push(n);var r=e.Items||[];null===r||void 0===r||r.forEach((function(e){if(!m(e.Content)){var n,r={TokenInfo:null!==(n=null===e||void 0===e?void 0:e.Token)&&void 0!==n?n:null===e||void 0===e?void 0:e.ItemToken,ExtendMaps:[{Key:"Content",Value:e.Content}]};t.push(r)}}))})),t},F=function(e,t,n){var r,a,i,c=null!==e&&void 0!==e&&null!==(r=e.SelectedInfo)&&void 0!==r&&r.OrderExtendInfos?(0,o.Z)(null===e||void 0===e||null===(a=e.SelectedInfo)||void 0===a?void 0:a.OrderExtendInfos):[];return null===e||void 0===e||null===(i=e.OrderExtendInfos)||void 0===i||i.forEach((function(e){if(e.Token===n){var r=e.Items.filter((function(e){return t.includes(e.ItemToken)})).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{Id:e.ItemID})})),a=c.findIndex((function(e){return e.Token===n}));c[a]?c[a]=(0,l.Z)((0,l.Z)({},c[a]),{},{Items:r}):c.push((0,l.Z)((0,l.Z)({},e),{},{Items:r}))}})),c},U=function(e){var t,n=e.SegmentNo,r=e.Room,a=e.RegisterPageName,o=e.ShoppingId,i=e.Platform,c=e.isTradeMinPriceMode,l=(null===r||void 0===r?void 0:r.BasicInfo)||{},u=(null===l||void 0===l?void 0:l.RoomCountInfo)||{},d=(null===r||void 0===r||null===(t=r.PriceInfo)||void 0===t?void 0:t.Room)||{},f=null===u||void 0===u?void 0:u.SelectedCount,p=(c?null===d||void 0===d?void 0:d.TradePrice:(null===d||void 0===d?void 0:d.Price)||0)*f,m=((null===d||void 0===d?void 0:d.TradePrice)||0)*f,v=(null===l||void 0===l?void 0:l.Token)||"",h={shoppingId:o,sourcefrom:"tour_channel",segment:n,roomtoken:v,basePrice:p,baseTradePrice:m,from:i==s.NN.WEIXIN?"/pages/vacations/resource/index":"",fromPage:i==s.NN.CTRIPRN?a:""};return h},H=function(e){var t=e.TotalPriceInfo,n=e.RegisterPageName,r=e.ShoppingId,a=e.Platform,o=e.isTradeMinPriceMode,i=me(t,!1),c=me(t,!0),l={basePrice:i,baseTradePrice:c,sourcefrom:"tour_channel",shoppingId:r,isTrade:o,fromPage:a==s.NN.CTRIPRN?n:""};return l},q=function(e){var t=e.SegmentNo,n=e.RegisterPageName,r=e.ShoppingId,a=e.Platform,o=e.isTradeMinPriceMode,i={shoppingId:r,segmentId:t,sourcefrom:"tour_channel",isTrade:o,fromPage:a==s.NN.CTRIPRN?n:""};return i},Y=function(e){var t=e.orderId,n=e.ticketPoi,r=e.RegisterPageName,a=e.ShoppingId,o=e.Platform,i=e.isTradeMinPriceMode,c={shoppingId:a,isTrade:i,productId:null===n||void 0===n?void 0:n.ScenicSpotId,categoryId:5,orderId:t,sourcefrom:"tour_channel",fromPage:o==s.NN.CTRIPRN?r:"",topImage:(null===n||void 0===n?void 0:n.image)||""};return c},G=function(e){var t=e.orderId,n=e.categoryId,r=e.RegisterPageName,a=e.ShoppingId,o=e.Platform,i=e.isTradeMinPriceMode,c={shoppingId:a,isTrade:i,categoryId:n,orderId:t,sourcefrom:"tour_channel",fromPage:o==s.NN.CTRIPRN?r:""};return c},Z=function(e){var t=e.AirportInfo,n=e.airPortTransferIndex,r=e.RegisterPageName,a=e.ShoppingId,o=e.Platform,i=e.isTradeMinPriceMode,c=[],l=[],u=[];t.forEach((function(e,t){var n=e.type;if(e.serviceType&&u.push(t),"vacation"===n){l.push(t);var r=(null===e||void 0===e?void 0:e.SelectedInfo)||{};if(m(r))return;var a=(null===r||void 0===r?void 0:r.Basic)||{},o=(null===a||void 0===a?void 0:a.CarRequestInfo)||{},i=o.PatternType,s=o.FixedLocation,d=o.UseTime,f=o.UseGeo,p={typeId:i,flightNumber:null===s||void 0===s?void 0:s.FlightNumber,airportCode:null===s||void 0===s?void 0:s.Code,cityId:null===f||void 0===f?void 0:f.CityId,terminalCode:(null===s||void 0===s?void 0:s.TerminalCode)||"",UseGeo:f,UseDate:d};c.push(p)}else{var v=(null===e||void 0===e?void 0:e.SelectedInfo)||{};if(m(v))return;var h=(null===v||void 0===v?void 0:v.RequestInfo)||{},g=h.PatternType,y=h.FixedLocation,_=h.UseTime,b=h.UseGeo,E={typeId:g,flightNumber:null===y||void 0===y?void 0:y.FlightNumber,airportCode:null===y||void 0===y?void 0:y.Code,cityId:null===b||void 0===b?void 0:b.CityId,terminalCode:(null===y||void 0===y?void 0:y.TerminalCode)||"",UseGeo:b,UseDate:_};c.push(E)}}));var d={shoppingId:a,isTrade:!!i,isFlightValid:!0,segments:JSON.stringify(c),sourcefrom:"tour_channel",only6381Segs:null!==l&&void 0!==l&&l.length?null===l||void 0===l?void 0:l.join("-"):"",fromPage:o==s.NN.CTRIPRN?r:"",checkedSegs:n,segmentList:null===u||void 0===u?void 0:u.join("-")};return d},$=function(e){var t=e.IsMust,n=e.GroupId,r=e.resourceType,a=e.RegisterPageName,o=e.ShoppingId,i=e.Platform,c={isMust:t?1:0,shoppingId:o,groupId:n,resourceType:r,sourcefrom:"tour_channel",fromPage:i==s.NN.CTRIPRN?a:""};return c},z=function(e){var t=e.productId,n=e.orderId,r=e.poiDetail,a=e.RegisterPageName,o=e.ShoppingId,i=e.Platform,c=e.isTradeMinPriceMode,l=r.token,u=r.is6381,d=r.poiid,f=r.selectedCount,p=r.price,m=r.baseTradePrice,v={shoppingId:o,productId:t,scenicSpotId:d,token:l,categoryId:5,selectedCount:f,price:p,baseTradePrice:m,tradePrice:m,is6381:u?1:0,isTrade:c,orderId:n,sourcefrom:"tour_channel",fromPage:i==s.NN.CTRIPRN?a:"",use_history:1,observerKey:s.NN.WEIXIN?"diyTourH5Result":""};return v},K=function(e){var t=e.productId,n=e.orderId,r=e.categoryId,a=e.token,o=e.is6381,i=e.selectedCount,c=e.price,l=e.baseTradePrice,u=e.RegisterPageName,d=e.ShoppingId,f=e.Platform,p=e.isTradeMinPriceMode,m={shoppingId:d,productId:t,token:a,categoryId:r,selectedCount:i,price:c,baseTradePrice:l,tradePrice:l,is6381:o?1:0,isTrade:p,orderId:n,sourcefrom:"tour_channel",fromPage:f==s.NN.CTRIPRN?u:"",use_history:1,observerKey:s.NN.WEIXIN?"diyTourH5Result":""};return m},W=function(e){var t=e.ShoppingId,n=e.Token,r=e.Platform,a=e.RegisterPageName,o=e.isZhixing,i=void 0!==o&&o,c={shoppingid:t,token:n,isHideNavBar:i?"no":"yes",from:r==s.NN.CTRIPRN?a:""};return c},X=function(e,t){var n=null===t||void 0===t?void 0:t.BriefTransferInfo;try{var r=e||{},a=r.Segments,i=void 0===a?[]:a,c=r.Tokens,u=void 0===c?[]:c,s=r.FlightSeats,d=void 0===s?[]:s;if(m(i)||m(u)||m(d))throw Error("\u673a\u7968\u8282\u70b9\u6570\u636e\u4e3a\u7a7a");var f={},p=i.map((function(e){var t=e.SegmentNo,r=e.Flights,a=void 0===r?[]:r,i=e.DurationMinute,c=u.find((function(e){return e.SegmentNo===t}))||{},s=c.Token,p=c.CompareToken,v=J(e),h=[],g=a.map((function(e){var r=e.FlightId,a=e.FlightNo;return d.map((function(i){if(te(i))throw Error("\u5305\u542b\u5ea6\u5047\u673a\u7968");var c=!1,u=i.RelatedFlights.find((function(e){return e.SegmentNo===t&&e.FlightId===r&&(c="Vacation"===e.FlightSourceType,!0)}));if(u&&u.ClassInfo){var d=ie(u.ClassInfo);h.push.apply(h,(0,o.Z)(re(i,t))),f[s]=a+d,f[p]=a+d;var m=fe(t,r,n),v=(null===m||void 0===m?void 0:m.greyTransferInfo)||[],g=(null===m||void 0===m?void 0:m.redTransferInfo)||[],y=(null===m||void 0===m?void 0:m.orangeTransferInfo)||[],_=(null===m||void 0===m?void 0:m.greenTransferInfo)||[],b=Q(e);return(0,l.Z)((0,l.Z)({},b),{},{cabinName:d,SegmentNo:t,greyTransferInfo:v,redTransferInfo:g,orangeTransferInfo:y,greenTransferInfo:_,isVacationFlight:c})}})).find((function(e){return!m(e)}))})).filter((function(e){return!m(e)})),y=ae(h);return{SegmentNo:t,Token:s,CompareToken:p,Flights:g,segmentInfo:(0,l.Z)((0,l.Z)({},v),{},{hasNoCheckBaggage:!!y,baggageTips:""}),LogBaggageTip:y,DurationMinute:i}}));return{flightSegments:p,flightTokenMap:f}}catch(e){return{flightSegments:[],flightTokenMap:{}}}},J=function(e){var t=e.Flights,n=t[0],r=n.DepartInfo,a=n.FlightNo,o=t[t.length-1].ArriveInfo,i=se(r,o),c=de(r,o),l="\u5f85\u5b9a"===a,u=!!r.TimeUnknown;return{DepartInfo:r,ArriveInfo:o,isFlightPending:l,isFlightTimePending:u,isOverNightFlight:i,isEarlyMorningFlight:c}},Q=function(e){var t=e.AirlineInfo,n=e.DepartInfo,r=e.ArriveInfo,a=e.OperationFlightInfo,o=e.DurationMinute,i=(null===t||void 0===t?void 0:t.Code)||"",c="https://pic.c-ctrip.com/flight_intl/airline_logo/32/".concat(i.toLowerCase(),".png"),u=ce(a),s=g(null===n||void 0===n?void 0:n.DateTime,"HH:mm"),d=g(null===r||void 0===r?void 0:r.DateTime,"HH:mm"),f=_(o),p=le(n),m=p.Airport,v=p.AirportCode,h=le(r),y=h.Airport,b=h.AirportCode,w=E(null===n||void 0===n?void 0:n.DateTime,null===r||void 0===r?void 0:r.DateTime),S=g(null===r||void 0===r?void 0:r.DateTime,"MM-DD");return(0,l.Z)((0,l.Z)({},e),{},{airlineIcon:c,operationCarrierName:u,departAirportCode:v,departAirport:m,departTime:s,timeText:f,dayTip:w,dayTipArriveTime:S,arriveTime:d,arriveAirportCode:b,arriveAirport:y})},ee=function(e){if(m(e)||m(e.Segments)||m(e.FlightSeats))return!1;var t=(null===e||void 0===e?void 0:e.FlightSeats)||[],n=null===t||void 0===t?void 0:t.some((function(e){return te(e)}));return!n},te=function(e){return e&&e.VacationSeat&&e.VacationSeat.Tags&&e.VacationSeat.Tags.some((function(e){return"Hide"==e.Type&&"T"==e.Name}))},ne=function(e){var t=e.Segments,n=e.FlightSeats,r=null===n||void 0===n?void 0:n.some((function(e){return te(e)}));return r?[]:t},re=function(e,t){var n=[],r=e||{},a=r.DomesticSeat,i=r.InternationalSeat,c=r.VacationSeat,l=a||i||c||{},u=l.PassengerSeat,s=void 0===u?[]:u;return s.forEach((function(e){var r=e.SegmentBaggages,a=e.CheckBaggage||{};n.push.apply(n,(0,o.Z)((Array.isArray(r)?r:[a]).filter((function(e){return(null===e||void 0===e?void 0:e.SegmentNo)==t||!(null!==e&&void 0!==e&&e.SegmentNo)}))))})),n},ae=function(e){if(!m(e)&&e.every((function(e){var t;return 0==(null===e||void 0===e||null===(t=e.CheckBaggage)||void 0===t?void 0:t.Weight)||0==(null===e||void 0===e?void 0:e.Weight)}))){var t,n,r,a,o,i="";if(m(null===(t=e[0])||void 0===t?void 0:t.CheckBaggage))i=(null===(n=e[0])||void 0===n?void 0:n.PieceWeightDesc)||(null===(r=e[0])||void 0===r?void 0:r.SizeDesc)||"";else i=(null===(a=e[0])||void 0===a||null===(a=a.CheckBaggage)||void 0===a?void 0:a.PieceWeightDesc)||(null===(o=e[0])||void 0===o||null===(o=o.CheckBaggage)||void 0===o?void 0:o.SizeDesc)||"";return i}return""},oe=function(e,t,n){var r=e.map((function(e){var r=e.RelatedFlights.find((function(e){return e.SegmentNo===t&&e.FlightId===n}));if(r&&r.ClassInfo){var a=ie(r.ClassInfo);return a}})).filter((function(e){return!m(e)}));return r[0]},ie=function(e){var t,n=(null===e||void 0===e?void 0:e.Name)||"",r=(null===e||void 0===e||null===(t=e.SpecialClass)||void 0===t?void 0:t.Key)||"",a=r||n||"";return a},ce=function(e){var t,n=(null===e||void 0===e||null===(t=e.AirlineInfo)||void 0===t?void 0:t.ShortName)||"",r=(null===e||void 0===e?void 0:e.FligntNo)||"",a=n?" \u5b9e\u9645\u627f\u8fd0"+n+(r||""):"";return a},le=function(e){var t=(null===e||void 0===e?void 0:e.AirportName)||"",n=(null===e||void 0===e?void 0:e.AirportCode)||"";return null!==e&&void 0!==e&&e.TerminalName&&(t+=" ".concat(null===e||void 0===e?void 0:e.TerminalName)),{Airport:t,AirportCode:n}},ue=function(e,t){var n=[];null===t||void 0===t||t.forEach((function(t){return!!e[t]&&n.push(e[t])}));var r=n.length>0?"\u60a8\u9009\u62e9\u7684\u822a\u73ed".concat(n.join("\u3001"),"\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u66f4\u6362\u5176\u4ed6\u822a\u73ed"):"";return r},se=function(e,t){var n=g(null===e||void 0===e?void 0:e.DateTime,"MM\u6708DD\u65e5"),r=g(null===t||void 0===t?void 0:t.DateTime,"MM\u6708DD\u65e5");return n!==r},de=function(e,t){var n=g(null===e||void 0===e?void 0:e.DateTime,"MM\u6708DD\u65e5"),r=g(null===t||void 0===t?void 0:t.DateTime,"MM\u6708DD\u65e5"),a=g(null===t||void 0===t?void 0:t.DateTime,"HH");return n===r&&Number(a)<5},fe=function(e,t,n){var r,a,o,i,c,l=null===n||void 0===n||null===(r=n[e])||void 0===r?void 0:r[t];if(!l)return null;var u=[],s=[],d=[],f=[];return null===(a=l.filter((function(e){return"grey"===e.color})))||void 0===a||a.forEach((function(e){return u.push(e.text)})),null===(o=l.filter((function(e){return"red"===e.color})))||void 0===o||o.forEach((function(e){return s.push(e.text)})),null===(i=l.filter((function(e){return"orange"===e.color})))||void 0===i||i.forEach((function(e){return d.push(e.text)})),null===(c=l.filter((function(e){return"green"===e.color})))||void 0===c||c.forEach((function(e){return f.push(e.text)})),{greyTransferInfo:u,redTransferInfo:s,orangeTransferInfo:d,greenTransferInfo:f}},pe=function(e,t,n){if(m(e)||m(t))return 0;var r=t.TotalPriceInfo||{},a=me(r,n),o=me(e,n);return o-a},me=function(e,t){var n;if(m(e))return 0;var r=0;return null===e||void 0===e||null===(n=e.PassengerPrices)||void 0===n||n.map((function(e){r+=(t?e.TradePrice:e.Price)+e.Tax+e.Oil})),r=r-(null===e||void 0===e?void 0:e.SavePrice)||0,r},ve=function(e){var t=e.FlightSeats,n=e.Segments,r=e.Tokens,a=void 0===r?[]:r,o=[];return a.map((function(e,r){var a=e.SegmentNo,i=e.Token,c=n.find((function(e){return e.SegmentNo===a})),l=(null===c||void 0===c?void 0:c.Flights)||[],u=l.map((function(e){var n,r=(null===e||void 0===e?void 0:e.FlightId)||"",o=oe(t,a,r);return(null===e||void 0===e||null===(n=e.AirlineInfo)||void 0===n?void 0:n.Name)+(null===e||void 0===e?void 0:e.FlightNo)+o})).join(" ");o.push({SegmentNo:a,Token:i,ResourceName:u})})),o},he=function(e){var t=e.PassengerPrices,n=e.TotalPrice,r=e.TotalTradePrice,a=t.find((function(e){return"Adult"===e.PassengerType})),o=t.find((function(e){return"Child"===e.PassengerType}));return a&&(a.totalPrice=a.Price+a.Tax+a.Oil),o&&(o.totalPrice=o.Price+o.Tax+o.Oil),{adultPrice:a,childPrice:o,TotalPrice:n,TotalTradePrice:r}},ge=function(e){var t=(null===e||void 0===e?void 0:e.BriefBaggageLimit)||[],n=(null===e||void 0===e?void 0:e.BriefFareRemark)||[],r=(null===e||void 0===e?void 0:e.BriefTag)||[],a=[],i="",c="",l=[],u=[],s=[],d=[],f=[];return null===t||void 0===t||t.map((function(e){var t=e.baggageBrief,n=e.isWeight;n?u.push(t):l.push(t),d.push(t)})),null===n||void 0===n||n.map((function(e){var t=e.refundBrief,n=e.status;n?u.push(t):l.push(t),f.push(t)})),null===r||void 0===r||r.map((function(e){var t=e.desc,n=e.type;switch(n){case"confirmDurationMinute":m(t)||(i=t);break;case"reduceTag":m(t)||(c=t);break;case"transitVisa":break;case"minPassengerNumLimit":m(t)||s.push(t);break;case"nationalityLimit":if(!m(t)){var r=[];v(t).map((function(e){m(e)||r.push(null===e||void 0===e?void 0:e.nationalityNames)})),s.push(r.join("\uff1b"))}break;case"supportBaby":break;case"ageRestriction":if(!m(t)){var l=v(t).join("\uff1b");a.push(l)}break;case"refundCouponTag":m(t)||s.push(t);break;case"newCarrierInfo":(null===t||void 0===t?void 0:t.length)>0&&s.push((0,o.Z)(t));break;default:break}})),{confirmDuration:i,reduceText:c,adultAgeInfoArray:a,normalFeeAndBaggageArray:l,warningFeeAndBaggageArray:u,warningBriefTagArray:s,warningBaggageArray:d,warningRefundArray:f}},ye=function(e,t,n){var r=t.isFlightPending,a=t.isFlightTimePending,o=t.isOverNightFlight,i=t.isEarlyMorningFlight,c=t.baggageTips,l=i&&10===e&&0===n,u=i&&11===e&&0===n,s=[];return c&&s.push(c),!o||r||a||s.push("\u8be5\u822a\u73ed\u4e3a\u9694\u591c\u822a\u73ed\uff0c\u8bf7\u7559\u610f\u60a8\u7684\u9152\u5e97\u5165\u4f4f\u65e5\u671f"),!l||r||a||s.push("\u8be5\u822a\u73ed\u4e3a\u51cc\u6668\u822a\u73ed\uff0c\u8bf7\u7559\u610f\u60a8\u7684\u9152\u5e97\u5165\u4f4f\u65e5\u671f"),!u||r||a||s.push("\u8be5\u822a\u73ed\u4e3a\u51cc\u6668\u822a\u73ed\uff0c\u9996\u65e5\u4f4f\u5bbf\u6309\u7167\u56fd\u9645\u60ef\u4f8b14:00\u540e\u624d\u80fd\u529e\u7406\u5165\u4f4f\uff0c\u8bf7\u7559\u610f\u9152\u5e97\u5165\u4f4f\u65e5\u671f"),s},_e=function(e,t,n){var r=e.TotalPriceInfo,a=void 0===r?{}:r,o=e.HasMore,i=(null===a||void 0===a?void 0:a.Tags)||[],c=i&&i.filter((function(e){return"SearchMoreGrade"===e.Type})).length&&"T"===i.filter((function(e){return"SearchMoreGrade"===e.Type}))[0].Name&&[6,8].includes(t)&&!n,l=!!o,u=!!c,s=!!o&&!c;return{hasChangeFlightBtn:l,hasUpgradeCabinBtn:u,hasChangeCabinBtn:s}},be=function(e,t,n){var r,a,o=e.TrainInfos,i=e.SegmentNo,c=e.ScrambleInfo,l=o[0],u=l.TrainNo,s=l.DepartInfo,d=l.DepartDate,f=l.ArriveInfo,p=l.DayDiff,m=l.DurationMinute,v=l.Seats,h=l.Flags,b=(l.AdvanceBookingDays,l.SaleTime,v[0]),E=b.BookingType,w=b.ConfirmDuration,S=b.SeatName,I=b.Token,T=b.UnitPriceInfos,C=g(d,"MM-DD(\u5468w)"),P=we(d,p),k=P.format("MM\u6708DD\u65e5"),N=p>0,O=_(m),x=Ve(null===w||void 0===w?void 0:w.DurationMinute,E),D=null===h||void 0===h?void 0:h.includes("supportCard"),j=null===h||void 0===h?void 0:h.includes("isCR"),M=Ie(E,t,n),A=Te(e),R=A.saleDate,V=A.saleTime,L=A.isMultiTrain,B=["".concat(n,"-").concat(t,"\u4e3a\u7cfb\u7edf\u7ef4\u62a4\u65f6\u95f4\uff0c\u8be5\u65f6\u6bb5\u5185\u706b\u8f66\u7968\u8ba2\u5355\u5c06\u5728\u65e9\u4e0a").concat(t,"\u5f00\u59cb\u62a2\u7968\uff0c\u65e0\u9700\u670d\u52a1\u8d39"),"\u8f66\u7968".concat(L?"\u6700\u65e9":"").concat(R).concat(V,"\u8d77\u552e\uff0c\u5f00\u552e\u540e\u81ea\u52a8\u62a2\u7968\u3002"),"\u5217\u8f66\u8fd0\u884c\u56fe\u8c03\u6574\uff0c\u53ef\u9884\u7ea6\u62a2\u7968\u3002\u8f66\u6b21\u65f6\u95f4\u3001\u7ad9\u70b9\u7b49\u4fe1\u606f\u5747\u4e3a\u9884\u4f30\uff0c\u4ee5\u51fa\u7968\u540e\u7684\u5b9e\u9645\u4fe1\u606f\u4e3a\u51c6\uff0c\u656c\u8bf7\u8c05\u89e3"],F=[];switch(E){case 2:break;case 3:F.push(B[1]);break;case 4:F.push(B[2]);break;default:break}var U=F.join(""),H=y(null===c||void 0===c?void 0:c.Trains,"TrainNo").join("\uff0c"),q=y(null===c||void 0===c?void 0:c.Seats,"SeatName").join("\u3001"),Y={segmentId:String(i),bookingType:E,trainSearch:JSON.stringify({ArriveCityName:f.CityName||"",ArriveCityId:f.CityId,DepartCityName:s.CityName||"",DepartCityId:s.CityId,DepartDate:g(d,"YYYY-MM-DD")}),basePrice:null===T||void 0===T||null===(r=T.find((function(e){return"Adult"==e.PassengerType})))||void 0===r?void 0:r.Price,baseTradePrice:null===T||void 0===T||null===(a=T.find((function(e){return"Adult"==e.PassengerType})))||void 0===a?void 0:a.TradePrice},G={trainNo:u,defaultSeatToken:I};return{trainInfo:{Token:I,TrainNo:u,SeatName:S,DepartDate:d,ArrivalDate:P,departureCityId:s.CityId,departureCity:s.CityName,departureStation:s.StationName,departureDate:C,departureTime:s.Time,arrivalCityId:f.CityId,arrivalCity:f.CityName,arrivalStation:f.StationName,arrivalDate:k,arrivalTime:f.Time,confirmDuration:x,isSupportIDCard:D,isCR:j,durationMinutes:O,isOverNight:N,isSrambleTicket:M,disclosureInformation:U,alternativeTrainStr:H,alternativeSeatStr:q,bookingType:E},jumpParams:Y,seatJumpParams:G}},Ee=function(e,t){var n=new u.Z(u.Z.transformTimeStamp(e)).addDay(-t);return n},we=function(e,t){var n=new u.Z(u.Z.transformTimeStamp(e)).addDay(t);return n},Se=function(e,t){return e&&t&&b(e,t)},Ie=function(e,t,n){return 2===e||3===e||4===e||!Se(t,n)},Te=function(e){var t,n,r,i,c=e.TrainInfos,l=void 0===c?[]:c,u=e.ScrambleInfo,s=1===(null===u||void 0===u||null===(t=u.Trains)||void 0===t?void 0:t.length)&&u.Trains[0].TrainNo===l[0].TrainNo,d=!s&&(null===u||void 0===u||null===(n=u.Trains)||void 0===n?void 0:n.length)>0&&(null===u||void 0===u||null===(r=u.Trains)||void 0===r||null===(i=r.every)||void 0===i?void 0:i.call(r,(function(e){return!(null===e||void 0===e||!e.DepartDate)&&!(null===e||void 0===e||!e.SaleTime)})));if(d){var f=[].concat((0,o.Z)(l),(0,o.Z)(null===u||void 0===u?void 0:u.Trains));f.sort((function(e,t){var n=e.SaleTime,r=e.DepartDate,o=e.AdvanceBookingDays,i=n.split(":"),c=(0,a.Z)(i,2),l=c[0],u=c[1],s=t.SaleTime,d=t.DepartDate,f=t.AdvanceBookingDays,p=s.split(":"),m=(0,a.Z)(p,2),v=m[0],h=m[1];return Ee(r,o).setHours(l,u,0).getTime()-Ee(d,f).setHours(v,h,0).getTime()}));var p=f[0]||{},m=p.DepartDate,v=p.AdvanceBookingDays,h=p.SaleTime,g=Ee(m,v).format("MM\u6708DD\u65e5");return{saleDate:g,saleTime:h,isMultiTrain:!0}}var y=l[0],_=y.DepartDate,b=y.AdvanceBookingDays,E=y.SaleTime,w=Ee(_,b).format("MM\u6708DD\u65e5");return{saleDate:w,saleTime:E,isMultiTrain:!1}},Ce=function(e,t){var n,r="";e&&e.length>0&&(r=(null===(n=e.find((function(e){return e.Key===t})))||void 0===n?void 0:n.Value)||"");return r},Pe=function(e,t){var n,r,a,o,i,c,l,u,s,d,f,p,v,h,y,_,b,w,S,I,T,C=e.BasicInfo,P=e.Rooms,k=void 0===P?[]:P,N=e.SegmentNo;if(m(k))return{};var O=(null===C||void 0===C?void 0:C.Token)||"",x=(null===C||void 0===C?void 0:C.Tags)||[],D=(null===C||void 0===C?void 0:C.StaticInfo)||{},j=(null===k||void 0===k||null===(n=k[0])||void 0===n?void 0:n.PaymentInfo)||{},M=j.CheckinDate,A=j.CheckoutDate,R=null===D||void 0===D?void 0:D.LogoUrl;-1==(null===(r=R)||void 0===r?void 0:r.indexOf("_R5"))&&(R=R.replace(".png","_W_350_350_R5.png"),R=R.replace(".jpg","_W_350_350_R5.jpg"));var V=x&&(null===(a=x.find((function(e){return"6"===e.Type})))||void 0===a?void 0:a.Name),L=x&&(null===(o=x.find((function(e){return"2"===e.Type})))||void 0===o?void 0:o.Name),B={HotelId:null===C||void 0===C?void 0:C.Id,HotelName:null===C||void 0===C?void 0:C.Name,HotelToken:O,HotelIndex:t,logoUrl:R,CheckinDate:g(M,"MM-DD(\u5468w)"),CheckoutDate:g(A,"MM-DD(\u5468w)"),Nights:E(M,A),ProvinceId:null===D||void 0===D||null===(i=D.Location)||void 0===i?void 0:i.ProvinceId,CityId:null===D||void 0===D||null===(c=D.Location)||void 0===c?void 0:c.CityId,CityName:null===D||void 0===D||null===(l=D.Location)||void 0===l?void 0:l.CityName,LocationZone:null===D||void 0===D||null===(u=D.Location)||void 0===u||null===(u=u.Zones)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.Name,isAbroad:2===(null===D||void 0===D?void 0:D.BMCountry)?1:0,CommentPoint:null===D||void 0===D||null===(s=D.Comment)||void 0===s?void 0:s.Point,GradeTag:V,CommentTag:L},F=null===k||void 0===k||null===(d=k[0])||void 0===d?void 0:d.BasicInfo,U=null===F||void 0===F?void 0:F.Descs,H=null===F||void 0===F?void 0:F.RoomCountInfo,q=null===k||void 0===k||null===(f=k[0])||void 0===f?void 0:f.PriceInfo,Y=(null===F||void 0===F?void 0:F.Token)||"",G=(null===F||void 0===F?void 0:F.Id)||"",Z=(null===F||void 0===F?void 0:F.Name)||"",$=(null===F||void 0===F?void 0:F.BaseRoomName)||"",z=null===H||void 0===H?void 0:H.SelectedCount,K=null===H||void 0===H?void 0:H.MinCount,W=null===H||void 0===H?void 0:H.MaxCount,X=z!==K||z!==W,J=(null===F||void 0===F||null===(p=F.Tags)||void 0===p||null===(p=p.find((function(e){return"3"===e.Type})))||void 0===p?void 0:p.Name)||"",Q=(null===F||void 0===F||null===(v=F.MealInfo)||void 0===v?void 0:v.Title)||"",ee=Ce(U,"4"),te=Ce(U,"2"),ne=Ce(U,"6"),re=(null===q||void 0===q||null===(h=q.AddBedFee)||void 0===h?void 0:h.Fee)<0&&ne?"\u4e0d\u53ef\u52a0\u5e8a":"\u53ef\u52a0\u5e8a";-100==(null===q||void 0===q||null===(y=q.AddBedFee)||void 0===y?void 0:y.Fee)&&(re="");var ae=Ce(U,"10"),oe=(null===F||void 0===F||null===(_=F.Gifts)||void 0===_||null===(_=_[0])||void 0===_?void 0:_.Desc)||"",ie=(null===q||void 0===q||null===(b=q.Room)||void 0===b||null===(b=b.PrepayDiscounts)||void 0===b?void 0:b.filter((function(e){return 2==e.Type}))[0])||{},ce=Math.ceil((ie?ie.Amount:0)*z),le=(null===ie||void 0===ie?void 0:ie.Name)||"",ue=(null===q||void 0===q||null===(w=q.Room)||void 0===w||null===(w=w.PrepayDiscounts)||void 0===w?void 0:w.filter((function(e){return 2!==e.Type})))||{},se=(null===ue||void 0===ue?void 0:ue.map((function(e){return e.Name})))||[],de=null===F||void 0===F||null===(S=F.Policies)||void 0===S?void 0:S.filter((function(e){return"2"===e.Type}))[0],fe=(null===F||void 0===F?void 0:F.CancelPenaltyType)||0,pe=xe({selectedCount:null===H||void 0===H?void 0:H.SelectedCount,RecommendCount:null===H||void 0===H?void 0:H.RecommendCount,BizRecommendCount:null===H||void 0===H?void 0:H.RecommendMinCount,MaxCount:W,AddBedFee:null===q||void 0===q||null===(I=q.AddBedFee)||void 0===I?void 0:I.Fee,addFee:ne}),me=(null===F||void 0===F?void 0:F.Application)||"",ve=null===q||void 0===q||null===(T=q.Total)||void 0===T?void 0:T.Price,he={HotelToken:O,HotelName:null===C||void 0===C?void 0:C.Name,SegmentNo:N,RoomName:Z,BaseRoomName:$,RoomID:G,RoomToken:Y,SelectedRoomCount:z,MinRoomCount:K,MaxRoomCount:W,isCanEditRoomCount:X,confirmDuration:J,mealInfo:Q,numberLimitInfo:ee,bedInfo:te,addBedInfo:re,windowInfo:ae,GiftDescription:oe,vipDiscountPrice:ce,userLeveName:le,cancleHotelPolicy:de,cancelPenaltyPolicyType:fe,hotelDiscountTags:se,hotelRecommendTip:pe,RoomPriceInfo:q,ApplicationInfo:me,totalPrice:ve},ge={SegmentNo:N,Room:k[0]||{}};return{hotelInfo:B,roomInfo:he,jumpParams:ge}},ke=function(e,t){var n,r="notchanged",a="";return(null===e||void 0===e?void 0:e.length)>0&&e.forEach((function(e,n){var o,i=null===t||void 0===t||null===(o=t[n])||void 0===o?void 0:o.RoomChangeResults;if(null!==i&&void 0!==i&&i.length){var c=i.find((function(e){return 1===e.Type})),l=c.Result;[1,2].includes(l)?(r="changed",a=1===l?"\u539f\u623f\u578b\u5df2\u5931\u6548\uff0c\u5df2\u4e3a\u60a8\u66f4\u65b0\u623f\u578b\uff0c\u8bf7\u67e5\u770b\u786e\u8ba4":"\u5df2\u4e3a\u60a8\u66f4\u65b0\u66f4\u4f18\u623f\u578b\uff0c\u8bf7\u67e5\u770b\u786e\u8ba4",2===l&&(a="\u5df2\u4e3a\u60a8\u66f4\u65b0\u66f4\u4f18\u623f\u578b\uff0c\u8bf7\u67e5\u770b\u786e\u8ba4")):i.some((function(e){return 1===e.Result}))&&(r="changed")}})),"changed"===r&&(n=e.map((function(e,n){var r;if(m(null===t||void 0===t||null===(r=t[n])||void 0===r?void 0:r.Rooms))return e;var a=null===t||void 0===t?void 0:t[n].Rooms;return(0,l.Z)((0,l.Z)({},e),{},{Rooms:a})}))),{UpdatedHotels:n||e,HotelSearchStatus:r,HotelChangedText:a}},Ne=function(e){var t,n,r=e.Rooms,a=e.BasicInfo,o=e.ShoppingId,i=null===a||void 0===a?void 0:a.Id,c=null===a||void 0===a||null===(t=a.StaticInfo)||void 0===t||null===(t=t.Location)||void 0===t?void 0:t.CityId,l=(null===(n=r[0])||void 0===n?void 0:n.PaymentInfo)||{},s=l.CheckinDate,d=l.CheckoutDate,f=u.Z.format(s,"YYYY-MM-DD"),p=u.Z.format(d,"YYYY-MM-DD"),m="zh-CN";return{ShoppingId:o,Extras:[{Key:"product.city",Value:c>0?String(c):"0"},{Key:"product.current",Value:i>0?String(i):"0"},{Key:"user.checkin",Value:f},{Key:"user.checkout",Value:p},{Key:"user.local",Value:m}]}},Oe=function(e){var t=[];return null===e||void 0===e||e.forEach((function(e){var n,r,a=null===e||void 0===e||null===(n=e.Rooms)||void 0===n?void 0:n[0],o=null===a||void 0===a?void 0:a.BasicInfo,i=null===o||void 0===o?void 0:o.RoomCountInfo;a&&o&&i&&t.push({Count:null===i||void 0===i?void 0:i.SelectedCount,ResourceName:(null===e||void 0===e||null===(r=e.BasicInfo)||void 0===r?void 0:r.Name)+(null===o||void 0===o?void 0:o.BaseRoomName),SegmentNo:null===e||void 0===e?void 0:e.SegmentNo,Token:null===o||void 0===o?void 0:o.Token,ExtendInfos:null===a||void 0===a?void 0:a.ExtendInfos})})),t},xe=function(e){var t=e.selectedCount,n=e.RecommendCount,r=e.BizRecommendCount,a=e.MaxCount,o=e.AddBedFee,i=e.addFee,c="";return t>=n||(a>=r?(c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\uff0c\u5efa\u8bae\u9009\u62e9".concat(n,"\u95f4"),o>0?c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39".concat(i,"\uff0c\u5efa\u8bae\u9009\u62e9").concat(n,"\u95f4"):0==o?c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u8981\u52a0\u5e8a(".concat(i||"\u8be6\u8be2\u9152\u5e97",")\uff0c\u5efa\u8bae\u9009\u62e9").concat(n,"\u95f4"):-100==o&&(c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39\uff0c\u8d39\u7528\u9700\u4e0e\u9152\u5e97\u786e\u8ba4\uff0c\u5efa\u8bae\u9009\u62e9".concat(n,"\u95f4"))):(c="\u53ef\u9009\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97",o>0?c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39".concat(i,"\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"):0==o?c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u8981\u52a0\u5e8a(".concat(i||"\u8be6\u8be2\u9152\u5e97",")\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"):-100==o&&(c="\u60a8\u9009\u62e9\u7684\u623f\u95f4\u95f4\u6570\u8fc7\u5c11\uff0c\u53ef\u80fd\u65e0\u6cd5\u5165\u4f4f\u6216\u9700\u73b0\u573a\u652f\u4ed8\u52a0\u5e8a\u8d39\uff0c\u8d39\u7528\u9700\u4e0e\u9152\u5e97\u786e\u8ba4\uff0c\u5efa\u8bae\u66f4\u6362\u623f\u578b/\u9152\u5e97"))),c},De=function(e){var t=[];e.forEach((function(e){var n,r=(null===e||void 0===e||null===(n=e.Rooms)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.PaymentInfo)||{},a=r.CheckinDate,o=r.CheckoutDate;a&&o&&t.push([a,o])}));var n=0,r=t.reduce((function(e,t){return e[n]?e[n][1]===t[0]?e[n][1]=t[1]:(n+=1,e[n]=t):e[n]=t,e}),[]).map((function(e){var t=u.Z.parse(e[0]).format("M\u6708D\u65e5"),n=u.Z.parse(e[1]).addDay(-1).format("M\u6708D\u65e5");return t===n?t:"".concat(t," - ").concat(n)})).join("\u3001");return r},je=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null===e||void 0===e?void 0:e.find((function(e){return e.SelectedInfo})),a=(null===r||void 0===r||null===(t=r.VirtualRoom)||void 0===t?void 0:t.Shoppings)||[],o=null===r||void 0===r?void 0:r.SelectedInfo,i=null===o||void 0===o?void 0:o.SelectedCount,c=null===a||void 0===a?void 0:a.find((function(e){return e.Count===i})),l=null===c||void 0===c?void 0:c.Relations.filter((function(e){return 30===e.CategoryId}))[0],u=null===c||void 0===c?void 0:c.Relations.filter((function(e){return 54===e.CategoryId}))[0],s=null===l||void 0===l?void 0:l.totalPrice,d=null===u||void 0===u?void 0:u.totalPrice;n&&(s=null===l||void 0===l?void 0:l.totalTradePrice,d=null===u||void 0===u?void 0:u.totalTradePrice);var f=[];a.map((function(e){return f.push(e.Count)}));var p=f[0],m=f[f.length-1];return{SelectedRoomCount:i,SelectedVirtualRoom:r,VirtualRoomShoppings:a,roomCountRange:f,minCount:p,maxCount:m,singleRoomTotalPrice:s,childBedTotalPrice:d}},Me=function(e,t,n,r,a,o){var i={needPinfang:"",hasChildBedPrice:"",hasSingleRoomPrice:"",roomCountNotMatch:""};return Number.isInteger(t)?(n&&(i.hasChildBedPrice="\u513f\u7ae5\u5360\u5e8a\u8d39\uffe5".concat(n)),n&&r&&(i.hasChildBedPrice+="\uff0c"),r&&(i.hasSingleRoomPrice="\u623f\u5dee\u8d39\uffe5".concat(r))):i.needPinfang=e?"1\u540d\u6210\u4eba\u9700\u8981\u4e0e\u540c\u6027\u62fc\u623f":"1\u540d\u6210\u4eba\u9700\u8981\u4e0e\u540c\u6027\u56e2\u53cb\u62fc\u623f",a>o&&t<o&&(i.roomCountNotMatch="".concat(o+a,"\u4e2a\u4eba\u53ea\u6709").concat(t,"\u95f4\u623f\uff0c\u8bf7\u4ed4\u7ec6\u8003\u8651\u9009\u62e9\u623f\u95f4\u6570\u54e6")),i},Ae=function(e){var t,n=(null===e||void 0===e||null===(t=e.filter((function(e){return"Adult"==e.PassengerType})))||void 0===t?void 0:t[0])||{};return n},Re=function(e,t,n){var r,a=e.find((function(e){var t;return null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.SelectedCount})),o=(null===a||void 0===a?void 0:a.SelectedInfo)||{},i=(null===a||void 0===a||null===(r=a.Shoppings)||void 0===r?void 0:r.find((function(e){return u.Z.format(e.UseDate,"YYYY-MM-DD")==(null===o||void 0===o?void 0:o.UseDate)})))||{},c=Ae(null===i||void 0===i?void 0:i.UnitPriceInfos),l=n?c.TradePrice:c.Price,s=Ae(t.Shoppings[0].UnitPriceInfos),d=n?s.TradePrice:s.Price,f=d-l;return f},Ve=function(e,t){return 0===e?3===t?"":"\u7acb\u5373\u786e\u8ba4":e>0&&e<60?"".concat(e,"\u5206\u949f\u5185\u786e\u8ba4"):e>=60&&e<=2880?"".concat(e%60===0?Math.floor(e/60):Math.floor(e/60)+(e%60>30?1:.5),"\u5c0f\u65f6\u5185\u786e\u8ba4"):e>2880?"\u5927\u4e8e48\u5c0f\u65f6\u786e\u8ba4":""},Le=function(e,t){var n=[];return n=e.filter((function(e){var n,r,a=m(null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)?0:null===e||void 0===e||null===(r=e.SelectedInfo)||void 0===r?void 0:r.SelectedCount;return-1!=t.indexOf(e.Token)||0!==a}))||[],n},Be=function(e){var t;return!!(4&(null===e||void 0===e||null===(t=e.Basic)||void 0===t?void 0:t.BMStatus))},Fe=function(e){return e.Shoppings.length>1},Ue=function(e,t){var n=!1;return 4===(4&e)&&t>0&&(n=!0),n},He=function(e){var t=[];return null===e||void 0===e||e.map((function(e){t.push(e)})),t},qe=function(e,t){for(var n=e.length,r=[],a=0;a<n-(t-1);a++)r.push(e[a]);return e=r,e},Ye=function(e,t,n,r,a){if(!r)return!1;for(var o=[],i=u.Z.parse(r).getTime(),c=864e5,l=i+(n-1)*c,s=i+(t-1)*c,d=l;d<=s;d+=c)o.push(u.Z.parse(d).format("YYYY-MM-DD"));var f=o[o.length-1],p=u.Z.parse(a[a.length-1].UseDate).format("YYYY-MM-DD");u.Z.parse(f).getTime()>=u.Z.parse(p).getTime()&&(f=p);var m=[];o.map((function(e){u.Z.parse(e).getTime()<=u.Z.parse(p).getTime()&&m.push(e)}));var v=m.map((function(e){return null===a||void 0===a?void 0:a.filter((function(t){return u.Z.format(t.UseDate,"YYYY-MM-DD")==e}))[0]}));return e=v,e},Ge=function(e,t){var n,r=t.poiId,a=Ze(null===t||void 0===t||null===(n=t.datas)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.Basic)||void 0===n?void 0:n.ExtendInfos,"ScenicSpotId"),o=(null===e||void 0===e?void 0:e[r])||{},i=o.ImageList,c=o.Rating,u=o.Name,s=null===i||void 0===i?void 0:i[0],d=(0,l.Z)((0,l.Z)({},t),{},{image:s||"",poiid:r,poiName:u,CommentGrade:c,ScenicSpotId:a});return d},Ze=function(e,t){var n,r,a="",o=(null===e||void 0===e||null===(n=e.filter((function(e){return"TicketInfo"===e.Code})))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.FieldValues)||[];return a=(null===(r=o.filter((function(e){return e.Key===t})))||void 0===r||null===(r=r[0])||void 0===r?void 0:r.Value)||"",a},$e=function(e,t){var n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,a=!1,o=!t,i="";return null===e||void 0===e||e.map((function(e){var t,a,o=e.Shoppings,i=e.SelectedInfo,c=(null===i||void 0===i?void 0:i.SelectedCount)||(null===o||void 0===o||null===(t=o[0])||void 0===t?void 0:t.DefaultCount)||0,l=Ae(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.UnitPriceInfos),u=null===l||void 0===l?void 0:l.Price;u<n&&(n=u),c>0&&(r=u)})),r<=n&&(a=!0),o&&(i=a?"\u5347\u7ea7\u8f66\u578b":"\u53d1\u73b0\u66f4\u4f4e\u4ef7"),i},ze=function(e){var t,n=e.inputValue,r=e.OrderExtendToken,a=void 0===r?"":r,o=e.resource,i=[],c=(null===o||void 0===o||null===(t=o.SelectedInfo)||void 0===t?void 0:t.OrderExtendInfos)||[],u=!1;return null===c||void 0===c||c.forEach((function(e){if(e.Token==a){var t=(0,l.Z)((0,l.Z)({},e),{},{Content:n});i.push(t),u=!0}else i.push(e)})),u||null===o||void 0===o||o.OrderExtendInfos.forEach((function(e){if(e.Token==a){var t=(0,l.Z)((0,l.Z)({},e),{},{Content:n});i.push(t)}})),console.log("\ud83c\udf1f formatUpdateInputOrderExtendInfo",c,a,i),i},Ke=function(e){return e?(e=e.replace(/src="\/\//g,'src="https://'),e=e.replace(/style="/g,'style="list-style-position:inside; width: auto !important;font-size: 14px !important;text-align: left!important;line-height: 1.3!important;float: none!important;padding: 0!important;position: static!important;height: auto!important;'),e=e.replace(/<img(.*?)src="(.*?)"(.*?)\/>/g,'<img style="display: block!important;vertical-align: top!important;width: 100%!important;" src="$2" />'),e):e},We=function(e){var t=e.Resource,n=e.params,r=e.BasicInfo,a=e.ShoppingId,o=e.SegmentInfo,i=e.isMultiLine,c=n.productId,l=n.departCityId,s=n.MainName,d=n.Name,f=(null===t||void 0===t?void 0:t[a])||{},p=f.Tags,v=void 0===p?[]:p,h=f.curDate,g=f.ReturnDate,y=f.adultCount,_=f.childCount,b=f.infantCount;if(m(r)||m(h))return{};var E,w=r.TravelDays,S="",I="";i?S=null===n||void 0===n?void 0:n.alias:I=(null===v||void 0===v||null===(E=v.find((function(e){return"productlinetype"==e.Key})))||void 0===E?void 0:E.Value)||"";var T="",C="";if(null!==o&&void 0!==o&&o.IsFixSegment){var P=u.Z.isCrossYear(h);T=u.Z.format(h,P?"YYYY\u5e74MM\u6708DD\u65e5":"MM\u6708DD\u65e5");var k=u.Z.isCrossYear(new u.Z(h).addDay(w-1));C=u.Z.format(new u.Z(h).addDay(w-1),k?"YYYY\u5e74MM\u6708DD\u65e5":"MM\u6708DD\u65e5")}else{var N=u.Z.isCrossYear(h);T=u.Z.format(h,N?"YYYY\u5e74MM\u6708DD\u65e5":"MM\u6708DD\u65e5");var O=u.Z.isCrossYear(g);C=u.Z.format(g,O?"YYYY\u5e74MM\u6708DD\u65e5":"MM\u6708DD\u65e5")}var x={productid:c,departcityid:l,shoppingid:a,mainName:s,title:d,alias:i?S:I,departcity:null===r||void 0===r?void 0:r.DepartureCityName,departdate:T,arrivedate:C,adultcount:y,childcount:_,infantcount:b};return x},Xe=function(e){var t=function(e){var t,n=[];return null===e||void 0===e||null===(t=e.groups)||void 0===t||t.map((function(e){var t,r,a,o,i=(null===e||void 0===e?void 0:e.datas)||[];i=i.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[];var c=(null===(t=i)||void 0===t?void 0:t.find((function(e){var t;return null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.SelectedCount})))||{},l=(null===c||void 0===c?void 0:c.Basic)||{},u=(null===l||void 0===l?void 0:l.ResourceName)||"",s=(null===l||void 0===l?void 0:l.ResourceId)||"",d=null!==(r=null===c||void 0===c||null===(a=c.ConfirmDuration)||void 0===a?void 0:a.DurationMinute)&&void 0!==r?r:"",f=Ve(d),p=(null===c||void 0===c||null===(o=c.SelectedInfo)||void 0===o?void 0:o.UseDate)||"",m={ResourceId:s,ResourceName:u,UseDate:p,ConfirmDuration:f,Count:1};n.push(m)})),n},n=(null===e||void 0===e?void 0:e.find((function(e){return 19==e.categoryId})))||{},r=(null===e||void 0===e?void 0:e.find((function(e){return 22==e.categoryId})))||{},a=(null===e||void 0===e?void 0:e.find((function(e){return 20==e.categoryId})))||{},i=(null===e||void 0===e?void 0:e.find((function(e){return 21==e.categoryId})))||{},c=[];return c.push.apply(c,(0,o.Z)(t(n))),c.push.apply(c,(0,o.Z)(t(r))),c.push.apply(c,(0,o.Z)(t(a))),c.push.apply(c,(0,o.Z)(t(i))),c},Je=function(e,t){var n=[];return null===e||void 0===e||e.map((function(e){var r,a=(null===e||void 0===e?void 0:e.Token)||"",o=(null===e||void 0===e?void 0:e.Basic)||{},i=(null===o||void 0===o?void 0:o.ResourceName)||"",c=(null===o||void 0===o?void 0:o.ResourceId)||"",l=(null===e||void 0===e?void 0:e.SelectedInfo)||{},s=(null===l||void 0===l?void 0:l.UseDate)||"",d=(null===l||void 0===l?void 0:l.EndUseDate)||"",f=(null===l||void 0===l?void 0:l.SelectedCount)||0,p=null===t||void 0===t||null===(r=t.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==a})))||void 0===r?void 0:r[0];!p||null!==p&&void 0!==p&&p.isSelectedToken||(l.UseDate="",s="");var m=(null===e||void 0===e?void 0:e.Shoppings)||[],v=(null===m||void 0===m?void 0:m.find((function(e){return u.Z.format(e.UseDate,"YYYY-MM-DD")==s})))||m[0],h=Ae(null===v||void 0===v?void 0:v.UnitPriceInfos),g=null===h||void 0===h?void 0:h.Price,y={ResourceId:c,ResourceName:i,UseDate:f>0?u.Z.format(s,"YYYY-MM-DD"):"",EndUseDate:f>0?u.Z.format(d,"YYYY-MM-DD"):"",Count:f,Price:g};n.push(y)})),n},Qe=function(e,t){var n,r=(null===(n=e[0])||void 0===n||null===(n=n.groups[0])||void 0===n?void 0:n.datas)||[];if(r=r.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[],0==r.length)return[];var a=[];r.length>1?(a=Le(r,[]),0==a.length&&(a=r.slice(0,1))):a=r;var o=Je(a,t);return o},et=function(e,t,n){var r=[],a=e||[];if(a=a.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[],0==a.length)return null;var i=[];"\u53ef\u9009"==t&&a.length>1?(i=Le(a,[]),0==i.length&&(i=a.slice(0,1))):i=a;var c=Je(i,n);return r.push.apply(r,(0,o.Z)(c)),r},tt=function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.AddressInfo,i=e.CarProduct,c=e.RequestInfo,l=i.UseTime,s=i.VehicleGroup,d=i.PriceInfo,f=i.SelectedCount,p=i.AddServices,m=c.PatternType,v=o.ArriveAddress,h=o.ArriveAddressName,g=o.DepartureAddress,y=o.DepartureAddressName,_=(null===p||void 0===p?void 0:p[0])||{},b=(null===_||void 0===_?void 0:_.AddService)||{},E=(null===_||void 0===_?void 0:_.SelectedCount)||0,w=null===b||void 0===b?void 0:b.IsFirstFree,S=(a?null===b||void 0===b||null===(t=b.PriceInfo)||void 0===t?void 0:t.TradePrice:null===b||void 0===b||null===(n=b.PriceInfo)||void 0===n?void 0:n.Price)||0,I=null===e||void 0===e||null===(r=e.CarProduct)||void 0===r?void 0:r.Token,T=18===m?"\u9001\u673a":"\u63a5\u673a",C=l?u.Z.format(l,"MM\u6708DD\u65e5 HH:mm"):"",P="\u4e13\u8f66",k=(null===s||void 0===s?void 0:s.Name)||"",N="\u8f86",O=y||g||"",x=h||v||"",D=a?null===d||void 0===d?void 0:d.TradePrice:null===d||void 0===d?void 0:d.Price,j=0==D?"\u514d\u8d39":"\uffe5".concat(D),M=D*f,A=w?S*(E-1):S*E,R=M+A;return{UseTime:l,PatternType:m,DepartureAddressName:y,DepartureAddress:g,ArriveAddressName:h,ArriveAddress:v,PriceInfo:d,SelectedCount:f,AddService:b,IsFirstFree:w,AddServicePrice:S,AddServiceSelectedCount:E,Token:I,carType:P,carName:k,unit:N,pattern:T,showUseTime:C,departAddress:O,arriveAddress:x,carPrice:j,totalPrice:R}},nt=function(e){var t,n,r,a,o=(null===e||void 0===e?void 0:e.Basic)||{},i=o.CarInfo,c=void 0===i?{}:i,l=o.CarRequestInfo,s=c.AddressInfo,d=void 0===s?{}:s,f=c.UseTime,p=c.VehicleName,m=d.ArriveAddress,v=d.ArriveAddressName,h=d.DepartureAddress,g=d.DepartureAddressName,y=null===e||void 0===e||null===(t=e.Shoppings[0])||void 0===t||null===(t=t.UnitPriceInfos.filter((function(e){return"Adult"==e.PassengerType})))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.Price,_=null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount,b=null===l||void 0===l?void 0:l.PatternType,E=(null===o||void 0===o||null===(r=o.ExtendInfos)||void 0===r||null===(r=r.filter((function(e){return"CarInfo"==e.Code})))||void 0===r?void 0:r[0])||{},w=(null===E||void 0===E||null===(a=E.FieldValues)||void 0===a||null===(a=a.filter((function(e){return"CarType"==e.Key}))[0])||void 0===a?void 0:a.Value)||"",S=null===e||void 0===e?void 0:e.Token,I="1"===w?"\u4e13\u8f66":"\u62fc\u8f66",T="1"===w?"\u8f86":"\u4eba",C=18===b?"\u9001\u673a":"\u63a5\u673a",P="1"===w?"".concat(p):"\u5c06\u6839\u636e\u5b9e\u9645\u4eba\u6570\u8c03\u6574",k=f?u.Z.format(f,"MM\u6708DD\u65e5 HH:mm"):"",N=g||h||"",O=v||m||"",x=0==y?"\u514d\u8d39":"\uffe5".concat(y),D=y*_;return{UseTime:f,PatternType:b,Price:y,SelectedCount:_,Token:S,carType:I,carName:P,unit:T,showUseTime:k,departAddress:N,arriveAddress:O,pattern:C,carPrice:x,totalPrice:D}},rt=function(e){var t=[];return e.map((function(e){var n=e.typeId,r=e.flightNo,a=e.cityName,o=e.airportName,i=(e.originIndex,e.minPrice),c=e.serviceType;if(!c)return null;var l="".concat(a).concat(18===n?"\u9001\u673a":"\u63a5\u673a").concat(r),u="",s="";18===n?s=o:u=o;var d=(null===e||void 0===e?void 0:e.SelectedInfo)||{};if(m(d))t.push({ResourceName:l,UseDate:"",DeparturePlace:u,ArrivePlace:s,CarType:"",FlightNo:r,Price:i+"\u8d77"});else if("vacation"==d.type){var f=nt(d),p=f.showUseTime,v=f.carName,h=f.departAddress,g=f.arriveAddress,y=f.totalPrice;t.push({ResourceName:l,UseDate:p,DeparturePlace:h,ArrivePlace:g,CarType:v,FlightNo:r,Price:y})}else{var _=tt(d),b=_.showUseTime,E=_.carName,w=_.departAddress,S=_.arriveAddress,I=_.totalPrice;t.push({ResourceName:l,UseDate:b,DeparturePlace:w,ArrivePlace:S,CarType:E,FlightNo:r,Price:I})}})),t},at=function(e,t,n){var r,a=[];if(null===e||void 0===e||null===(r=e.groups)||void 0===r||r.forEach((function(e){var t,n=(null===e||void 0===e||null===(t=e.datas)||void 0===t?void 0:t.filter((function(e){return 2!==(2&e.Basic.BMStatus)})))||[];if(!m(n)){var r={type:e.type,poiId:e.poiId,datas:n};a.push(r)}})),0==a.length)return[];var i={title:e.title,categorySeqId:e.categorySeqId,resourceType:e.resourceType,groups:a},c=[];if(i.groups.forEach((function(e){var n=Ge(t,e);c.push(n)})),m(c))return[];var l=[];return c.map((function(e,t){var r=e.datas,a=[];r.length>1?(a=Le(r,[]),0==a.length&&(a=r.slice(0,1))):a=r;var i=Je(a,n);l.push.apply(l,(0,o.Z)(i))})),l},ot=function(e,t,n){var r=[];return null===e||void 0===e||e.map((function(e){var a=e.groups;a.map((function(e){var a=e.datas||[];if(a=a.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[],0==a.length)return null;var i=e.type,c=e.PiCategoryId,l=[];"groupResource"==i&&"1132"==c?l=a.slice(0,1):"\u53ef\u9009"==t&&a.length>1?(l=Le(a,[]),0==l.length&&(l=a.slice(0,1))):l=a;var u=Je(l,n);r.push.apply(r,(0,o.Z)(u))}))})),r},it=function(e){var t=(null===e||void 0===e?void 0:e.Hotels)||[];if(m(t))return!1;var n=t.some((function(e){var t;return null===e||void 0===e||null===(t=e.Rooms)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.BasicInfo)||void 0===t?void 0:t.NeedPartitionedSearchResults}));return n},ct=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];console.log("\ud83c\udf1f throttle out",{args:a}),clearTimeout(n),n=setTimeout((function(){e.apply(void 0,a),n=null}),t)}},lt=function(e,t){var n;if(m(e))return{flightLogInfo:{},segmentsLogInfo:{}};var r={tabtype:"\u4ea4\u901a",isdrct:1,stop:0,num_trans:0,segment:e.length,type:[],is_pflt:0},a=[];if(null===e||void 0===e||e.forEach((function(e){var t,n=0,o=0,i=e||[],c=i.SegmentNo,l=i.Flights,u=i.isFlightPending,s=i.isFlightTimePending,d=0;null===l||void 0===l||l.forEach((function(e,t){var a=e.Stops,i=void 0===a?[]:a,c=e.isVacationFlight,l=void 0!==c&&c;l&&(r.is_pflt=1,d=1),null!==i&&void 0!==i&&i.length&&(n+=i.length),t>0&&o++}));var f,p={isdrct:n+o===0?1:0,stop:n,num_trans:o,segment:c,type:u&&s?"\u822a\u73ed\u5f85\u5b9a/\u65f6\u95f4\u5f85\u5b9a":u?"\u822a\u73ed\u5f85\u5b9a":s?"\u65f6\u95f4\u5f85\u5b9a":"\u5355\u673a\u5df2\u5b9a",is_pflt:d};(a.push(p),null!==(t=r.type)&&void 0!==t&&t.includes(p.type))||(null===(f=r.type)||void 0===f||f.push(p.type));0===p.isdrct&&(r.isdrct=0),r.stop+=n,r.num_trans+=o})),r.type=null===(n=r.type)||void 0===n?void 0:n.join(";"),!m(t)){var o=t||{},i=o.warningBriefTagArray,c=void 0===i?[]:i,l=o.warningBaggageArray,u=void 0===l?[]:l,s=o.warningRefundArray,d=void 0===s?[]:s;r.baggage=u.join("/"),r.refund_policy=d.join("/"),r.cnclplcy=c.join("/")}return{flightLogInfo:r,segmentsLogInfo:a}},ut={1:"\u4e0d\u53ef\u53d6\u6d88",2:"\u9650\u65f6\u514d\u8d39\u53d6\u6d88",3:"\u514d\u8d39\u53d6\u6d88",4:"\u6709\u635f\u53d6\u6d88",5:"30\u5206\u949f\u514d\u8d39\u53d6\u6d88"},st=function(e,t){var n=e||{},r=n.Nights,a=void 0===r?0:r,o=t.mealInfo,i=void 0===o?"":o,c=t.windowInfo,l=void 0===c?"":c,u=t.cancelPenaltyPolicyType,s=void 0===u?1:u,d=t.hotelRecommendTip,f=void 0===d?"":d,p=t.ApplicationInfo,m=void 0===p?"":p,v=[];f&&v.push(f),m&&v.push(m);var h={resourcetype:"\u7cfb\u7edf\u9152",num:a,breakfast:i,windowMsg:l,htlcnclplcy:ut[s],remark:v.join("/")};return h},dt=function(e){var t=e||{},n=t.adultCount,r=void 0===n?0:n,a=t.childCount,o=void 0===a?0:a,i=t.infantCount,c=void 0===i?0:i;return"".concat(r,"\u5927,").concat(o,"\u5c0f,").concat(c,"\u5a74")}},50107:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});n(298);var r=n(45023),a=n(63060),o=(n(79666),function(e){var t=e.ctx,n=function(e){var n=e.shoppingId,o=e.recommendSearch,i=e.cabinInfo,c=e.shoppingDetail,l=e.extraResource,u=c.prefetchSetting||{};u.resource||{};var s=u.resource||{},d=s.enabled,f=void 0!==d&&d,p=s.expiredtime,m=void 0===p?0:p;f&&t.set("RESOURCE_FIRST_SCREEN_INFO",(0,r.Z)({},n,{extraResource:l,CabinInfo:i}),m/1e3);var v=o.Flight,h=o.Hotel,g=l.train,y=l.Option,_={Hotel:!(0,a.xb)(h),Flight:(0,a.KS)(v),Trains:!(0,a.xb)(g),Option:!(0,a.xb)(y)};t.set("RESOURCE_TYPE_INFO",(0,r.Z)({},n,_),3600)},o=function(e){return"1"===e.iscruise?"cruise":"1"===e.istour?"grp":"0"===e.istour?"sdp":""},i=function(e){var t={};Object.keys(e).forEach((function(n){"true"===e[n]?t[n.toLocaleLowerCase()]="1":"false"===e[n]?t[n.toLocaleLowerCase()]="0":t[n.toLocaleLowerCase()]=e[n]}));var n=o(t),r=t.shoppingid||"",a="1"===e.isnewshopping,i="1"===e.restore||"cruise"===n&&!a,c={productId:t.pdid||"",line:t.line||t.pdid||"",alias:t.alias||"",date:t.date||"",departCityId:t.dcid||"",segmentType:"0"===t.stype?"extendStay":"fixSegment",cachekey:t.cachekey||""};return n&&(c.productType=n),{query:t,pageParams:c,ShoppingId:r,IsNewShopping:a,IsContinueBook:i}};return{cacheFirstScreenData:n,getInitialStateFromQuery:i}})},10932:function(e,t,n){"use strict";n.d(t,{fI:function(){return i},$S:function(){return c},X2:function(){return l},IP:function(){return u},p:function(){return s},Do:function(){return d}});var r=n(79301),a=n(95308),o=n(86582),i=(0,o.qj)({}),c=function(){var e=(0,o.H)(i);return e},l=(0,o.qj)({}),u=function(){var e=(0,o.H)(l);return e},s=((0,o.qj)({}),(0,o.qj)({getInitialData:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()})),d=function(){return(0,o.H)(s)}},22394:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(93212),a=n(57042),o=n(24460),i=n(45023),c=function(e,t,n,r){return e=e.toString(),e.length<t&&(n=new Array(t).join(n||" "),e=r?(n+e).substr(-t):(e+n).substring(0,t)),e},l=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],u=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z)?((\+|-)?\d{1,2}:00)?$/,s=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.Z)(this,e),(0,i.Z)(this,"date",new Date(""));var o=e.handleZone(Date.now());if(t)if(/^-\d+$/.test(t)){if(n)return this.date=new Date(""),this;t=e.handleZone(t)}else if(/^\+?\d+$/.test(t))t=e.handleZone(t);else if("object"===(0,r.Z)(t)&&t instanceof e)return t;if(t=t||o,"string"===typeof t){var c=/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i;t.match(c)&&(t=t.replace(c,(function(e,t,n,r){return"".concat(t,"/").concat(n||"01","/").concat(r||"01")})))}this.date=new Date(t)}return(0,o.Z)(e,[{key:"addDay",value:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this}},{key:"addMonth",value:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this}},{key:"addHours",value:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this}},{key:"addMinutes",value:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this}},{key:"getMinutes",value:function(){return this.date.getMinutes()}},{key:"addSeconds",value:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this}},{key:"addYear",value:function(e){return e=e||0,this.date.setFullYear(this.date.getFullYear()+e),this}},{key:"toBJZone",value:function(){return new e(e.handleZone(this.date.getTime()))}},{key:"setHours",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setHours.apply(this.date,t),this}},{key:"setMinutes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setMinutes.apply(this.date,t),this}},{key:"valueOf",value:function(){return this.date}},{key:"getTime",value:function(){return this.date.valueOf()}},{key:"toString",value:function(){return this.date.toString()}},{key:"format",value:function(e){var t=this.date;return e=e||"YYYY-MM-DD",e.replace(/Y+|y+|M+|D+|d+|H+|h+|m+|s+|w+/g,(function(e){var n=e.substr(0,1),r=e.length;switch(n){case"Y":return t.getFullYear().toString().substr(4-r);case"y":return t.getFullYear().toString().substr(4-r);case"M":return c(t.getMonth()+1,r,"0",!0);case"D":return c(t.getDate(),r,"0",!0);case"d":return c(t.getDate(),r,"0",!0);case"H":return c(t.getHours(),r,"0",!0);case"h":return c(t.getHours(),r,"0",!0);case"m":return c(t.getMinutes(),r,"0",!0);case"s":return c(t.getSeconds(),r,"0",!0);case"w":return l[t.getDay()]}}))}},{key:"diffMonth",value:function(t){var n=parseInt(this.format("YYYY"),10),r=parseInt(this.format("MM"),10),a=new e(t),o=parseInt(a.format("YYYY"),10),i=parseInt(a.format("MM"),10);return 12*(o-n)+(i-r)}},{key:"diffYear",value:function(t){var n=parseInt(this.format("YYYY"),10),r=new e(t),a=parseInt(r.format("YYYY"),10);return a-n}},{key:"isValid",value:function(){return this.date&&!isNaN(this.date.getTime())}}],[{key:"parse",value:function(t,n,a){return"object"===(0,r.Z)(t)?(t instanceof e&&(t=t.valueOf()),n?new Date(t):new e(t)):(t+="",t.indexOf("Date")>-1?t=t.match(/((\+|-)?\d+)/)[0]:u.test(t)&&(t=e.transformTimeStampISO8601(t)),isNaN(t)||(t=parseInt(t,10)),n?new e(t,a).valueOf():new e(t,a))}},{key:"minuteDiff",value:function(t,n){var r=Number(e.parse(t,!0)),a=Number(e.parse(n,!0));return(a-r)/6e4}},{key:"hourDiff",value:function(t,n){var r=Number(e.parse(t,!0)),a=Number(e.parse(n,!0));return(a-r)/36e5}},{key:"dayDiff",value:function(t,n){var r=e.parse(t,!0),a=e.parse(n,!0);r.setHours(0,0,0,0),a.setHours(0,0,0,0);var o=Number(r),i=Number(a);return(i-o)/864e5}},{key:"diffMonth",value:function(t,n){return t=new e(t),t.diffMonth(n)}},{key:"diffYear",value:function(t,n){return t=new e(t),t.diffYear(n)}},{key:"timeRange",value:function(t,n,r){var a=e.dayDiff(t,r),o=e.dayDiff(r,n);return a>=0&&o>=0}},{key:"format",value:function(t,n,r){return t=this.parse(t,!0,r),new e(t,r).format(n)}},{key:"handleZone",value:function(e){if(!e||isNaN(e))return e;var t=288e5,n=(new Date).getTimezoneOffset();return+e+6e4*n+t}},{key:"transformTimeStamp",value:function(t){var n=t.match(/^\/Date\(-?(\d+)(\+|-)\d+\)\/$/);return n?e.handleZone(n[1]):t.match(/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i)?new Date(t).getTime():t}},{key:"transformTimeStampISO8601",value:function(e){var t=e.match(u);if(t&&t.length){var n=t[1],r=void 0==t[2]?0:t[2]-1,a=t[3],o=t[4],i=t[5],c=t[6],l=new Date(n,r,a,o,i,c);return l.getTime()-288e5-6e4*(new Date).getTimezoneOffset()}return null}},{key:"transformServerDate",value:function(t){return t=e.handleZone(t),"/Date("+t+"+0800)/"}},{key:"isCrossYear",value:function(t,n){t=this.parse(t,!0,n);var r=e.diffYear(t,new e);return 0!=r}}]),e}()},86582:function(e,t,n){"use strict";n.d(t,{Xb:function(){return i},Mx:function(){return c},zn:function(){return r.setupStore},H:function(){return r.setupContext},lU:function(){return r.createReactModel},Ns:function(){return r.setupPreloadCallback},_0:function(){return r.setupStartCallback},qj:function(){return r.createModelContext},GD:function(){return r.RoleType},Us:function(){return r.ActionType},KI:function(){return r.fetchTransaction}});var r=n(36517),a=n(46346),o=n.n(a),i={getEnvType:function(){return o().env}},c={version:"8.36",appId:"338"}},85198:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var r=n(79301),a=n(298),o=n(95308),i=n(57042),c=n(24460),l=n(81876),u=n(21867),s=n(86066),d=n(45023),f=n(65542),p=n(33675),m=n.n(p),v=n(13336),h={QConfig:"/12446/QConfig.json",Getabpreinfo:"/12446/getabpreinfo",ProductDetailV5:"/12447/ProductDetailV5",ProductDetailExtend:"/12447/ProductDetailExtend",SearchProductPromotion:"/16255/searchProductPromotion",CompositeCouponDisplay:"/12447/compositeCouponDisplay",QueryPromotionDisplayInfo:"/12447/QueryPromotionDisplayInfo",GetResourceSlot:"/16035/getResourceSlot",GetSceneV2:"/20516/getSceneV2",TakeCouponCode:"/16255/takeCouponCode",GetProductRankingInfo:"/17023/getProduct",GetWindowRecommendProductInfo:"/12447/getWindowRecommendProductInfo",GetEmotionalCues:"/12447/getProductDetailEmotionalCues",GetNearbyStore:"/13642/crmStoreGetNearbyStore",GetUrgentInfo:"/12448/GetBookFormEmotionalCuesV2",GetIMEntryInfo:"/12446/GetIMEntryInfo",GetIMEntryInfoNew:"/15529/GetIMEntryInfo",Pricecalendar:"/12433/pricecalendarv2",IsMyFavorites:"/10108/IsMyFavorites",CreateFavorite:"/10108/MyFavoritesAdd",CancelFavorite:"/10108/MyFavoritesDelete",SearchBrandPromotion:"/16255/searchBrandPromotion",SearchScenesPromotion:"/16255/searchScenesPromotion",GetServiceEntry:"/15529/GetServiceEntry",GetCityNameByCityId:"/11198/getCityByCityIds",DepartureCityMetric:"/12447/DepartureCityMetric",CreateTrack:"/17582/createTrack",GetProductBookingRuleInfo:"/12447/GetProductBookingRuleInfo",GetUserCommonInfo:"/12448/GetUserCommonInfo",GetCommentSummary:"/15656/getCommentSummary",GetSuggestInternalProductInfo:"/12447/GetSuggestInternalProductInfo",TrainPassengerCheck:"/12448/TrainPassengerCheck",SendMessage:"/12448/SendMessage",ProductDetail:"/12447/ProductDetailV5",ProductDetailTiming:"/12447/ProductDetailTimingV5",ScenicTrip:"/12447/ScenicTrip",GetHotelBasicInfo:"/13078/getHotelBasicInfo",GetHotelBasicInfoList:"/13078/getHotelBasicInfoList",GetCalendarDataInfo:"/12447/GetCalendarDataInfo",ShoppingDetailGet:"/13966/ShoppingDetailGet",XSearch:"/13966/XSearch",GetCommonInfo:"/15486/getCommonInfo",GetCustomerTemplate:"/13966/customerInfoTemplateSearch",GetBookingLimit:"/13966/bookingLimit",MutateUserCommonInfo:"/12448/MutateUserCommonInfo",ClientValidation:"/12448/ClientValidation",ConvertPinyinWords:"/10653/ConvertPinyinWords",BookingLimitCheck:"/13966/bookingLimitCheck",ForceConfirm:"/13966/forceConfirm",ContactTemplate:"/13966/contactTemplate",CheckOrderDuplicated:"/12448/CheckOrderDuplicated",SearchBookingPromotion:"/16255/searchBookingPromotion",PromotionValidation:"/16255/promotionValidation",InsuranceUpdate:"/13966/InsuranceUpdate",QteRemarkSearch:"/13966/QteRemarkSearch",ShoppingDetailUpdate:"/13966/ShoppingDetailUpdate",Getshoppinginfo:"/13966/getshoppinginfo",SaveOrder:"/12448/SaveOrderV4",GetBookForm:"/12448/GetBookFormV4",SaveOrderCallback:"/12448/SaveOrderCallback",SaveTourCustomerType:"/12448/SaveTourCustomerType",GetOrderEmotionalCues:"/12448/GetBookFormEmotionalCuesV2",PaymentWayInfo:"/13826/paymentWayInfo",SendJourneyEmail:"/12447/SendJourneyEmail",ProductScheduleTourInfo:"/12447/ProductScheduleTourInfo",CreateProposalOrder:"/12448/CreateProposalOrder",compositeCouponDisplay:"/12447/compositeCouponDisplay",TourAssistGetNoticeTimeList:"/10644/TourAssistGetNoticeTimeList",CouponVerify:"/12448/PromotionValidationV4",ProductGroupInfo:"/12447/ProductGroupInfo",ProductComment:"/16238/listComments",ListCommentProductLines:"/16238/listCommentProductLines",TransmitVisaMaterials:"/13250/TransmitVisaMaterials",VisaStuffSearch:"/13762/VisaStuffSearch",TrainSearch:"/13966/TrainSearch",TrainBookingNote:"/13966/TrainBookingNote",RecommendSearch:"/13966/RecommendSearch",FlightSearch:"/13966/FlightSearch",HotelListSearch:"/13966/HotelListSearch",CarSearch:"/13966/CarSearch",GetHotelFilterInfo:"/13078/getHotelFilterInfo",GetCityEvents:"/13078/getCityEvents",GetCityLandmarks:"/13078/getCityLandmarks",HotelDetail:"/13966/HotelDetail",RoomListSearch:"/13966/RoomListSearch",RoomPriceCalulate:"/13966/RoomPriceCalulate",RoomAcceptableGuaranteeSearch:"/13966/RoomAcceptableGuaranteeSearch",FareRemarkSearch:"/13966/FareRemarkSearch",DomesticRemarkSearch:"/13966/DomesticRemarkSearch",FlightPlanePicture:"/13966/FlightPlanePicture",BookFormCallback:"/12448/BookFormCallback",CanBooking:"/13826/CanBooking",ComfirmTourStatus:"/17322/comfirmTourStatus",FlightRecommendSearch:"/13966/FlightRecommendSearch",FlightInfoSearch:"/13966/FlightInfoSearch",FlightSeatSearch:"/13966/FlightSeatSearch",DomesticRemarkSearchV2:"/13966/DomesticRemarkSearch",InternationalRemarkSearchV2:"/13966/InternationalRemarkSearch",InternationalExtendSearch:"/13966/InternationalExtendSearch",getUserInfo:"/11838/getUserInfo",GetOrderSuccessInfo:"/12448/GetOrderSuccessInfo",getPreposeInstallment:"/13826/preposeInstallment",GetPromotionInfo:"/16255/GetPromotionInfo",GetCategoryMaps:"/20168/GetCategoryMaps",GetFillPageWeChatAppShareUrl:"/12943/json/getFillPageWeChatAppShareUrl",GetAddressInfo:"/13592/GetAddressInfo",getuserinfo:"/12446/getuserinfo",ResourceCountUpdate:"/13966/ResourceCountUpdate",GetOrderStatusByShoppingId:"/14556/GetOrderStatusByShoppingId",BuildInsurance:"/12448/BuildInsurance",UpdateInsurance:"/12448/UpdateInsurance",UpdateShoppingDetail:"/20168/UpdateShoppingDetail",SetPromotionBasicInfo:"/13966/SetPromotionBasicInfo",DelPromotionBasicInfo:"/13966/DelPromotionBasicInfo",SearchX:"/20168/SearchX",GetShoppingDetail:"/20168/GetShoppingDetail",GetInsuranceDetail:"/20168/GetInsuranceDetail",UpdateResource:"/20168/UpdateResource",GetShoppingInfo:"/20168/GetShoppingInfo",GetCruiseRoomInfo:"/20168/GetCruiseRoomInfo",OvaryRoomPriceCalculate:"/20168/OvaryRoomPriceCalculate",CruisePackageJourneyInfo:"/19658/CruisePackageJourneyInfo",GetDisplayItem:"/20168/GetDisplayItem",GetValidatePassenger:"/20168/GetValidatePassenger",paymentByInstalment:"/13826/paymentByInstalment",GetResourceCertificate:"/20168/GetResourceCertificate",GetBaseInfoForBook:"/14206/getBaseInfoForBook",ValidateInvoiceInputInfo:"/14206/validateInvoiceInputInfo",GetCountryCode:"/12687/GetCountryCode",GetPassenger:"/18848/getPassenger",CustomerValidCheck:"/20168/CustomerValidCheck",GetScripting:"/20168/GetScripting",saveBrowseHistory:"/11298/saveBrowseHistory",getProductDisposition:"/12864/getProductDisposition",getProductScheduleDesc:"/12447/getProductScheduleDesc"},g={fat:{client:"http://m.fws.qa.nt.ctripcorp.com/tour/bff",server:"//m.fws.qa.nt.ctripcorp.com/tour/bff"},uat:{client:"//m.ctrip.uat.qa.nt.ctripcorp.com/tour/bff",server:"//m.ctrip.uat.qa.nt.ctripcorp.com/tour/bff"},prd:{client:"https://m.ctrip.com/restapi/tour/bff",server:"//apigateway.ctripcorp.com/restapi/tour/bff"}};function y(e){if("fat"!==v.Z.getEnv())return e;var t=e.includes("?")?"&":"?";return e+t+"subEnv=fat29"}var _=function(){function e(){(0,i.Z)(this,e)}return(0,c.Z)(e,null,[{key:"resolveFetchArgs",value:function(t,n){var r=t;return n&&n.isBffService?r=g[v.Z.getEnv()]["client"]+t:(e.api.hasOwnProperty(t)&&(r=e.api[t]||t),r="/restapi/soa2"+y(r)),r}},{key:"request",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){m().request((0,a.Z)((0,a.Z)({},t),{},{success:function(t){e(t)},fail:function(e){n(e)}}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestWithCancel",value:function(e){var t;return{fetch:function(){return new Promise((function(n,r){t=m().request((0,a.Z)((0,a.Z)({},e),{},{success:function(e){var t=e.data,a=void 0===t?{}:t,o=e.statusCode;o&&String(o).startsWith("5")&&r("\u7f51\u7edc\u5f02\u5e38: ".concat(o)),n(a)},fail:function(e){e&&"request:fail abort"===e.errMsg?r((0,a.Z)({name:"AbortError"},e)):r(e)}}))}))},cancel:function(){m().cancel(t)}}}},{key:"postWithCancel",value:function(t,n,r){var a=e.resolveFetchArgs(t,r);try{var o=e.requestWithCancel({url:a,data:n});return o}catch(e){throw e}}},{key:"gqlpostWithCancel",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=null!==a&&void 0!==a&&a.isDiy?"27611":"18055",i=e.resolveFetchArgs("/".concat(o,"/graphql?queryName=").concat(r)),c={};a&&a.extension&&(c.extension=a.extension);var l={fixVariables:1,query:t,queryName:r,variables:n,head:c};try{var u=e.requestWithCancel({url:i,data:l});return u}catch(e){throw e}}},{key:"post",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,a,o){var i,c,l,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i=e.resolveFetchArgs(n,o),t.next=4,e.request({url:i,data:a});case 4:if(c=t.sent,l=c.data,u=c.statusCode,!u||!String(u).startsWith("5")){t.next=9;break}throw new Error("\u7f51\u7edc\u5f02\u5e38: ".concat(u));case 9:return t.abrupt("return",l);case 12:throw t.prev=12,t.t0=t["catch"](0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"gqlpost",value:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,a){var o,i,c,l,u,s,d,f,p=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:"",i=p.length>3&&void 0!==p[3]?p[3]:{},o+="_weapp",c=null!==i&&void 0!==i&&i.isDiy?"27611":"18055",l=e.resolveFetchArgs("/".concat(c,"/graphql?queryName=").concat(o)),u={fixVariables:1,query:n,queryName:o,variables:a,head:i.head},t.prev=6,t.next=9,e.request({url:l,data:u});case 9:if(s=t.sent,d=s.data,f=s.statusCode,!f||!String(f).startsWith("5")){t.next=14;break}throw new Error("\u7f51\u7edc\u5f02\u5e38: ".concat(f));case 14:return t.abrupt("return",d);case 17:throw t.prev=17,t.t0=t["catch"](6),t.t0;case 20:case"end":return t.stop()}}),t,null,[[6,17]])})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}();(0,d.Z)(_,"api",h);var b=n(63906),E=n(92954),w=n.n(E),S="8.57.6",I=/(\d+)\.(\d+)\.?(\d+)?/,T=S.replace(I,(function(e,t,n,r){var a=function(e,t){if(e=e.toString(),e.length<t){var n=new Array(t).join("0");e=(n+e).substr(-t)}return e};return n=a(n,2),r=r?a(r,3):"000",t+n+r})),C=n(36517),P=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var c=arguments.length,u=new Array(c),s=0;s<c;s++)u[s]=arguments[s];return e=t.call.apply(t,[this].concat(u)),(0,d.Z)((0,l.Z)(e),"dhtLogger",void 0),(0,d.Z)((0,l.Z)(e),"tourContext",{Platform:"Taro",url:e.getPageUrl(),post:function(t,n,r){return e.post(t,n,r)},getInitialData:function(){},gqlpost:function(t,n,r,a){return e.gqlpost(t,n,r,a)},jumpH5:function(t){var n=t.url,r=t.params,a=t.options;return e.jumpH5({url:n,params:r,options:a})},showToast:function(t,n){return e.showToast(t,n)},navigateTo:function(t){var n=t.url,r=t.params;return e._navigateTo({url:n,params:r})},redirectTo:function(t){var n=t.url,r=t.params;return e.redirectTo({url:n,params:r})},navigateBack:function(t){return e._navigateBack(t)},switchTab:function(t){var n=t.url;return e._switchTab({url:n})},tracelog:function(t,n){return e.tracelog(t,n)},traceKeyLog:function(e){},traceDevLog:function(t,n){return e.traceDevLog(t,n)},sendPV:function(t){var n=t.pageId,r=t.url;return e.sendPV({pageId:n,url:r})},attachShardParams:function(t){return e.attachShardParams(t)},showLoadingDialog:function(t){return e.showLoadingDialog(t)},hideLoadingDialog:function(){return e.hideLoadingDialog()},showModal:function(t){return e.showModal(t)},login:function(t){return e.login(t)},logPageError:function(e,t){console.trace("\ud83d\udc1b\ud83d\udc1b\ud83d\udc1b\ud83d\udc1b ===logPageError===:\n",{functionName:e,error:t})},set:function(t,n,r){return e.set(t,n,r)},get:function(t){return e.get(t)},remove:function(t){return e.remove(t)},createRequest:function(t,n,r){return e.createRequestWithCancel(t,n,r)},createGqlRequest:function(t,n,r,a){return e.createGqlRequestWithCancel(t,n,r,a)},eventCenter:w().eventCenter,cwx:m(),getLocationInfo:function(){return e.getLocationInfo()},getClientInfo:function(){return e.getClientInfo()},sendKMLog:function(t){return e.sendKMLog(t)},logDevTrace:function(){},getDHTLogger:function(){return e.dhtLogger},miniProgramPlatform:e.getMiniProgramPlatform(),getWakeUpData:function(){return{}},getUserInfo:function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var n,o,i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUserInfo();case 2:return i=t.sent,t.abrupt("return",(0,a.Z)((0,a.Z)({},i),{},{isLogin:null===i||void 0===i?void 0:i.IsLogin,userInfo:(0,a.Z)((0,a.Z)({},i),{},{UserID:null===i||void 0===i?void 0:i.Uid,VipGrade:null===i||void 0===i||null===(n=i.ExtendInfo)||void 0===n?void 0:n.VipGrade,VipGradeRemark:null===i||void 0===i||null===(o=i.ExtendInfo)||void 0===o?void 0:o.LevelName})}));case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),getCurrentPageInfo:function(){return{}},loadStorage:function(t,n){return e.get(t)},Storage:{save:function(t){var n=t.key,r=t.value,a=t.expires;return e.set(n,r,a)},remove:function(t){return e.remove(t)}},getABTest:function(){},isInWebviewH5:function(){return!1},showMaskLoading:function(){},hideMaskLoading:function(){},goTo:function(t){var n=t.url,r=t.params;return e._navigateTo({url:n,params:r})},showDialog:function(t){return e.showModal(t)},getDepartureCityInfo:function(){return{}},getDepartureCityCache:function(){return{}},CRNFetch:{isSameRequestOnRoad:function(){return!1}}}),(0,d.Z)((0,l.Z)(e),"get",(function(t){try{var n=w().getStorageSync(t);return e.traceDevLog("o_vacation_get_storage_log",{key:t,value:n}),n}catch(e){console.log(e)}})),(0,d.Z)((0,l.Z)(e),"set",(function(t,n,r){try{w().setStorage({key:t,data:n}),e.traceDevLog("o_vacation_set_storage_log",{key:t,value:n})}catch(e){console.log(e)}})),(0,d.Z)((0,l.Z)(e),"remove",(function(t){try{w().removeStorageSync(t),e.traceDevLog("o_vacation_remove_storage_log",{key:t})}catch(e){console.log(e)}})),(0,d.Z)((0,l.Z)(e),"getLocationInfo",(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",new Promise((function(e,t){m().locate.getCtripCity((function(t){e(t.data)}),"vacations-lbs")})));case 4:e.prev=4,e.t0=e["catch"](0),console.log("getLocationInfo",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))),(0,d.Z)((0,l.Z)(e),"getUserInfo",(0,o.Z)((0,r.Z)().mark((function t(){var n,a,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={RequestType:[1,2,4,9]},t.prev=1,t.next=4,e.post("getuserinfo",n);case 4:return a=t.sent,o=a.Data,t.abrupt("return",o);case 9:return t.prev=9,t.t0=t["catch"](1),console.log(t.t0),t.abrupt("return",{IsLogin:!1});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))),e}return(0,c.Z)(n,[{key:"onLoad",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dhtLogger=new C.DevHubTraceLog({platform:C.PlatformType.taro,ubtKey:"km_tour_trace_log",organizationId:"51"},this);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMiniProgramPlatform",value:function(){var e,t={wxffcb7f77b0b8b8e1:"taro_vacation",wx0e6ed4f51db9d078:"taro_vacation_main"},n=w().getAccountInfoSync(),r=(null===n||void 0===n||null===(e=n.miniProgram)||void 0===e?void 0:e.appId)||"";return t[r]||"taro_vacation"}},{key:"post",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){var i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(0,a.Z)((0,a.Z)({},n),this.attachShardParams(t)),e.abrupt("return",_.post(t,i,o));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"gqlpost",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,a,o){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",_.gqlpost(t,n,a,o));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"createRequest",value:function(e,t,n){var r=this;return{fetch:function(){return r.post(e,t,n)},cancel:function(){}}}},{key:"createRequestWithCancel",value:function(e,t,n){var r=(0,a.Z)((0,a.Z)({},t),this.attachShardParams(e));return n&&n.extension&&(r=(0,a.Z)((0,a.Z)({},r),{},{head:{extension:n.extension}})),_.postWithCancel(e,r,n)}},{key:"createGqlRequestWithCancel",value:function(e,t,n,r){return _.gqlpostWithCancel(e,t,n,r)}},{key:"createAntiSpiderRequest",value:function(e,t,n,r,o){var i=(0,a.Z)((0,a.Z)({},n),this.attachShardParams(e)),c=_.resolveFetchArgs(e,{});return m().createAntiSpiderRequest({url:c,requestFn:t,fixedParams:i,callback:r,getScriptFromRsp:o})}},{key:"jumpH5",value:function(e){var t=e.url,n=e.params,r=e.options;t=v.Z._parseUrl(t,n),(0===t.indexOf("/webapp/")||r&&r.needHost)&&(t=b.I+t);var o={url:encodeURIComponent(t),pageTitle:{color:{backgroundColor:"#ffffff",frontColor:"#000000"}}};r&&r.needLogin&&(o=(0,a.Z)((0,a.Z)({},o),{},{needLogin:!0})),r&&r.observerKey&&(o=(0,a.Z)((0,a.Z)({},o),{},{observerKey:r.observerKey})),r&&r.isRedirect?m().redirectTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(o)}):m().navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(o)})}},{key:"_navigateTo",value:function(e){var t=e.url,n=e.params;t=v.Z._parseUrl(t,n),console.log("url=======",t),m().navigateTo({url:t})}},{key:"_navigateBack",value:function(e){e&&e.delta?m().navigateBack({delta:e.delta}):m().navigateBack()}},{key:"_switchTab",value:function(e){var t=e.url;console.log("switchTabUrl=====",{url:t}),m().switchTab({url:t})}},{key:"redirectTo",value:function(e){var t=e.url,n=e.params;t=v.Z._parseUrl(t,n),m().redirectTo({url:t})}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;w().showToast({title:e,duration:1e3*t,icon:"none"})}},{key:"showLoadingDialog",value:function(e){var t=e&&e.title?e.title:"\u52a0\u8f7d\u4e2d";w().showLoading({title:t,mask:!0})}},{key:"hideLoadingDialog",value:function(){m().hideLoading()}},{key:"showModal",value:function(e){w().showModal(e)}},{key:"login",value:function(e){var t={param:e.param,callback:function(t){e.callback&&e.callback()}};m().user.login(t)}},{key:"getClientInfo",value:function(){var e=m().mkt.getUnion(),t=e.allianceid,n=e.sid,r=m().clientID,a={allianceid:t,sid:n,clientId:r};return a}},{key:"sendPV",value:function(e){var t=e.pageId,n=e.url;this.ubtSendPV({pageId:t,url:n})}},{key:"tracelog",value:function(e,t){this.ubtTrace(e,t)}},{key:"traceDevLog",value:function(e,t){this.ubtDevTrace(e,t)}},{key:"sendKMLog",value:function(e){try{this.ubtDevTrace("km_tour_trace_log",{data:JSON.stringify(e)})}catch(e){console.log(e)}}},{key:"getUrlQuery",value:function(){var e=w().getCurrentPages(),t=e.pop(),n=t.options;return n}},{key:"getPageUrl",value:function(){var e=w().getCurrentPages(),t=e.pop(),n=t.route,r=t.options,a=n+"?"+C.querystring.stringify(r);return a}},{key:"attachShardParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&!e.includes("/")&&(e=h[e]);var t=e.split("/")&&e.split("/")[1];switch(t){case"10124":case"12446":case"12448":case"13592":return{ChannelCode:0,ChannelId:117,DistributionChannelId:117,PlatformId:3,Version:T,Locale:"zh-CN"};case"13966":case"20168":return{Channel:3,ChannelId:117,DistributionChannelId:117,Version:T};case"13250":return{Channel:3,ChannelId:117,DistributionChannelId:117,Version:T};default:return{Channel:3,ChannelId:117,PlatformChannelInfo:{ChannelId:117},DistributionChannelId:117,ChannelCode:0,PlatformId:3,Version:T,Locale:"zh-CN"}}}}]),n}(f.Z)},63906:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(46346),a=n.n(r),o={fat:"https://m.ctrip.fat67.qa.nt.ctripcorp.com",uat:"https://m.ctrip.uat.qa.nt.ctripcorp.com",prd:"https://m.ctrip.com"}[a().env]},13336:function(e,t,n){"use strict";var r=n(93212),a=n(46346),o=n.n(a),i=n(92954),c=n.n(i),l=n(36517);t["Z"]={getEnv:function(){return o().env},isIphoneX:function(){var e=c().getSystemInfoSync()||{},t=e.screenHeight,n=void 0===t?"":t,r=e.safeArea,a=void 0===r?{}:r,o=a||{},i=o.bottom;return n!==i},isEmpty:function(e){return void 0===e||null===e||"object"===(0,r.Z)(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},_parseUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isEmpty(t)){var n=e.indexOf("?")>=0?"&":"?";e=e+n+l.querystring.stringify(t)}return e}}},98933:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(93212),a=n(57042),o=n(24460),i=n(45023),c=function(e,t,n,r){return e=e.toString(),e.length<t&&(n=new Array(t).join(n||" "),e=r?(n+e).substr(-t):(e+n).substring(0,t)),e},l=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],u=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z)?((\+|-)?\d{1,2}:00)?$/,s=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.Z)(this,e),(0,i.Z)(this,"date",new Date(""));var o=e.handleZone(Date.now());if(t)if(/^-\d+$/.test(t)){if(n)return this.date=new Date(""),this;t=e.handleZone(t)}else if(/^\+?\d+$/.test(t))t=e.handleZone(t);else if("object"===(0,r.Z)(t)&&t instanceof e)return t;if(t=t||o,"string"===typeof t){var c=/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i;t.match(c)&&(t=t.replace(c,(function(e,t,n,r){return"".concat(t,"/").concat(n||"01","/").concat(r||"01")})))}this.date=new Date(t)}return(0,o.Z)(e,[{key:"addDay",value:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this}},{key:"addMonth",value:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this}},{key:"addHours",value:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this}},{key:"addMinutes",value:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this}},{key:"getMinutes",value:function(){return this.date.getMinutes()}},{key:"addSeconds",value:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this}},{key:"addYear",value:function(e){return e=e||0,this.date.setFullYear(this.date.getFullYear()+e),this}},{key:"toBJZone",value:function(){return new e(e.handleZone(this.date.getTime()))}},{key:"setHours",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setHours.apply(this.date,t),this}},{key:"setMinutes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.date.setMinutes.apply(this.date,t),this}},{key:"valueOf",value:function(){return this.date}},{key:"getTime",value:function(){return this.date.valueOf()}},{key:"toString",value:function(){return this.date.toString()}},{key:"format",value:function(e){var t=this.date;return e=e||"YYYY-MM-DD",e.replace(/Y+|y+|M+|D+|d+|H+|h+|m+|s+|w+/g,(function(e){var n=e.substr(0,1),r=e.length;switch(n){case"Y":return t.getFullYear().toString().substr(4-r);case"y":return t.getFullYear().toString().substr(4-r);case"M":return c(t.getMonth()+1,r,"0",!0);case"D":return c(t.getDate(),r,"0",!0);case"d":return c(t.getDate(),r,"0",!0);case"H":return c(t.getHours(),r,"0",!0);case"h":return c(t.getHours(),r,"0",!0);case"m":return c(t.getMinutes(),r,"0",!0);case"s":return c(t.getSeconds(),r,"0",!0);case"w":return l[t.getDay()]}}))}},{key:"diffMonth",value:function(t){var n=parseInt(this.format("YYYY"),10),r=parseInt(this.format("MM"),10),a=new e(t),o=parseInt(a.format("YYYY"),10),i=parseInt(a.format("MM"),10);return 12*(o-n)+(i-r)}},{key:"diffYear",value:function(t){var n=parseInt(this.format("YYYY"),10),r=new e(t),a=parseInt(r.format("YYYY"),10);return a-n}},{key:"isValid",value:function(){return this.date&&!isNaN(this.date.getTime())}}],[{key:"parse",value:function(t,n,a){return"object"===(0,r.Z)(t)?(t instanceof e&&(t=t.valueOf()),n?new Date(t):new e(t)):(t+="",t.indexOf("Date")>-1?t=t.match(/((\+|-)?\d+)/)[0]:u.test(t)&&(t=e.transformTimeStampISO8601(t)),isNaN(t)||(t=parseInt(t,10)),n?new e(t,a).valueOf():new e(t,a))}},{key:"minuteDiff",value:function(t,n){var r=Number(e.parse(t,!0)),a=Number(e.parse(n,!0));return(a-r)/6e4}},{key:"hourDiff",value:function(t,n){var r=Number(e.parse(t,!0)),a=Number(e.parse(n,!0));return(a-r)/36e5}},{key:"dayDiff",value:function(t,n){var r=e.parse(t,!0),a=e.parse(n,!0);r.setHours(0,0,0,0),a.setHours(0,0,0,0);var o=Number(r),i=Number(a);return(i-o)/864e5}},{key:"diffMonth",value:function(t,n){return t=new e(t),t.diffMonth(n)}},{key:"diffYear",value:function(t,n){return t=new e(t),t.diffYear(n)}},{key:"timeRange",value:function(t,n,r){var a=e.dayDiff(t,r),o=e.dayDiff(r,n);return a>=0&&o>=0}},{key:"format",value:function(t,n,r){return t=this.parse(t,!0,r),new e(t,r).format(n)}},{key:"handleZone",value:function(e){if(!e||isNaN(e))return e;var t=288e5,n=(new Date).getTimezoneOffset();return+e+6e4*n+t}},{key:"transformTimeStamp",value:function(t){var n=t.match(/^\/Date\(-?(\d+)(\+|-)\d+\)\/$/);return n?e.handleZone(n[1]):t.match(/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i)?new Date(t).getTime():t}},{key:"transformTimeStampISO8601",value:function(e){var t=e.match(u);if(t&&t.length){var n=t[1],r=void 0==t[2]?0:t[2]-1,a=t[3],o=t[4],i=t[5],c=t[6],l=new Date(n,r,a,o,i,c);return l.getTime()-288e5-6e4*(new Date).getTimezoneOffset()}return null}},{key:"transformServerDate",value:function(t){return t=e.handleZone(t),"/Date("+t+"+0800)/"}},{key:"isCrossYear",value:function(t,n){t=this.parse(t,!0,n);var r=e.diffYear(t,new e);return 0!=r}}]),e}()}}]);
//# sourceMappingURL=taroCommon.js.map