"use strict";require("../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[1666],{58913:function(e,n,t){t.r(n),t.d(n,{Graphql_CabinFareRemark:function(){return o},Graphql_GetPriceDetail:function(){return r},Graphql_GetOrderInfo:function(){return i},Graphql_GetOrderSecInfo:function(){return a},Graphql_GetMemberinfo:function(){return s},Graphql_GetProductinfo:function(){return l}});var o="\nquery CabinFareRemark($params: CabinFareRemarkReq){\n                CabinInfo(params: $params){\n                    QTEFareRemarkForShopping{\n                        RemarkList,\n                        NeedRetry\n                    }\n                }\n            }",r="\nquery getshoppingDetail($shoppingParams: ShoppingDetailArgs!) {\n    shoppingDetail(params: $shoppingParams) {\n        priceDetail {\n            json\n        }\n    }\n  }\n",i="\n    query orderInfo($productParams: ProductArgs!,$shoppingParams: ShoppingDetailArgs!,$qconfigParams: QConfigArgs!){\n        productInfo(params: $productParams) {\n            BasicInfo{\n                json\n            }\n            BasicExtendInfo{\n                json\n            }\n            CostInfoList{\n                json\n            }\n            VendorInfo {\n                json\n            }\n            ExtInfo {\n                json\n            }\n            resourceSlot {\n                specialBrandInfo\n            }\n            TagGroupInfo{\n                json\n            }\n            easeOrderInfo{\n                isShow\n                tags\n            }\n            TourGroupInfo {\n                json\n            }\n            ResponseStatus\n        }\n        shoppingDetail(params: $shoppingParams) {\n            ShoppingId\n            ResponseStatus\n            bookingLimit {\n                json\n            }\n            tagInfo\n            bookFormCallback{\n                json\n            }\n            contactTemplate{\n                json\n            }\n            shoppingOrderStatus{\n                json\n            }\n            addressInfo{\n                defaultAddressInfo\n            }\n            shoppingEmotionalCues {\n                shoppingTips\n                packageTips\n                emergencyTips\n            }\n            Cruise\n            Flight\n            Hotel\n            Shopping\n            Train\n            tmpOrderInfo {\n                json\n            }\n            mrgMemberUserInfo{\n                memberinfo\n                ResponseStatus\n            }\n            prefetchSetting \n        }\n        userContactInfo{\n            contacts{\n                json\n            }\n        }\n        qConfig(params: $qconfigParams){\n            AppSettingList\n        }\n    }",a="\n    query orderInfo($shoppingParams: ShoppingDetailArgs!,$searchXParams: ExtraResourceArgs!,$imArgs: IMEntryInfoArgs!,$productParams:ProductArgs!, $userDestinationParams:UserDestinationOrderArg!){\n        shoppingDetail(params: $shoppingParams) {\n            ResponseStatus\n            airlineClause{\n                json\n            }\n            orderConfirmTime{\n                json\n            }\n            imEntryInfo(params: $imArgs){\n                imInfo\n                serviceInfo\n            }\n            bookForm {\n                json\n            }\n            paymentWayInfo{\n                json\n            }\n            orderNoticeInfo{\n                json\n            }\n        }\n        productInfo(params: $productParams) {\n            FeeInfoList{\n                json\n            }\n            userDestinationOrder (params: $userDestinationParams) {\n                tags\n                productDestinationOrderList\n                productReturnOrderList\n            }\n            OrderKnow {\n                json\n            }\n            ResponseStatus\n        }\n        extraResource(params: $searchXParams){\n            Insurances\n            room\n            single\n            ResourceStatuses\n        }\n    }",s="\n    query orderInfo($shoppingParams: ShoppingDetailArgs!){\n        shoppingDetail(params: $shoppingParams) {\n            ResponseStatus\n            mrgMemberUserInfo{\n                memberinfo\n                ResponseStatus\n            }\n        }\n    }",l="\n    query getProduct($productParams: ProductArgs!){\n        productInfo(params: $productParams) {\n            TagGroupInfo{\n                json\n            }\n            FeeInfoList{\n                json\n            }\n            easeOrderInfo{\n                isShow\n                tags\n            }\n            OrderKnow {\n                json\n            }\n            ResponseStatus\n        }\n    }"},42703:function(e,n,t){var o,r,i=t(32180),a=t(79301),s=t(95308),l=t(298),c=t(57042),u=t(24460),d=t(81876),p=t(21867),h=t(86066),v=t(45023),g=t(36517),f=t(90201),x=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;(0,f.useLayoutEffect)((function(){return t.pageDidAppearEvents.push(e),function(){var n=t.pageDidAppearEvents.indexOf(e);-1!==n&&t.pageDidAppearEvents.splice(n,1)}}),n)},m=function(e,n){(0,f.useLayoutEffect)((function(){n.pageDidDisappearEvents.push(e)}),[])},S=t(93212),T=t(70245),I=t(22276),k=t(63060),w={isShowSelectCalendar:!1,isShowFlightPartitionedMask:!1,isShowAirTicketChangeInfoMask:!1,isShowAirHornInfoMask:!1,isShowFlightTransferMask:!1,isShowHotelPolicyMask:!1,isShowRoomInfoMask:!1,isShowHotelRoomCountMask:!1,isShowResourceAddInfoMask:!1,isShowDatePicker:!1,isShowResourceSelectAddInfoMask:!1,isShowResourceSelectMask:!1,isShowVisaDescriptionMask:!1,isShowResourceDescriptionInfoMask:!1,isShowGroupDescriptionMask:!1,isShowPriceListMask:!1,isShowServiceMask:!1,isShowResourceChangeTipMask:!1,isShowCruiseTourMask:!1,isShowSelectPassengerMask:!1,isShowSelectDateMask:!1,isShowCompetitionMask:!1,isShowRefundRuleMask:!1},P={FlightSearchStatus:"notchanged",HotelSearchStatus:"notchanged",HotelSearchUpdatingStatus:"notchanged",HotelChangedText:""},N=t(32180)["navigator"],D=function(e){var n=e.ShoppingId,t=e.Resource,o=(null===t||void 0===t?void 0:t[n])||{};return{ShoppingResource:o,Resource:t,ShoppingId:n}},y={UPDATE_HOTEL_SEARCH_STATUS:function(e,n){var t=e.PartitionStatus;return(0,l.Z)((0,l.Z)({},e),{},{PartitionStatus:(0,l.Z)((0,l.Z)({},t),{},{HotelSearchStatus:n})})},UPDATE_HOTEL_SEARCH_UPDATING_STATUS:function(e,n){var t=e.PartitionStatus;return(0,l.Z)((0,l.Z)({},e),{},{PartitionStatus:(0,l.Z)((0,l.Z)({},t),{},{HotelSearchUpdatingStatus:n})})},SET_PARTITIONED_HOTEL:function(e,n){var t=D(e),o=t.ShoppingResource,r=t.ShoppingId,i=e.PartitionStatus,a=n.UpdatedHotels,s=n.HotelChangedText,c=(null===o||void 0===o?void 0:o.Hotel)||{};return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},r,(0,l.Z)((0,l.Z)({},o),{},{Hotel:(0,l.Z)((0,l.Z)({},c),{},{Hotels:a})})),PartitionStatus:(0,l.Z)((0,l.Z)({},i),{},{HotelSearchStatus:"changed",HotelChangedText:s})})}},R={UPDATE_FLIGHT_SEARCH_STATUS:function(e,n){var t=e.PartitionStatus;return(0,l.Z)((0,l.Z)({},e),{},{PartitionStatus:(0,l.Z)((0,l.Z)({},t),{},{FlightSearchStatus:n})})},UPDATE_PENDING_PARTITIONED_FLIGHT:function(e,n){var t=n.RecommendFlight,o=n.CabinInfo,r=void 0===o?{}:o,i=D(e),a=i.ShoppingResource,s=i.ShoppingId,c=e.PartitionStatus,u=(null===r||void 0===r?void 0:r.FareRemarkForShopping)||[],d=(0,k.Z2)(t,u),p=d.flightSegments,h=d.flightTokenMap,g=(0,k.uq)(u);return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},s,(0,l.Z)((0,l.Z)({},a),{},{PendingPartitionedFlight:t,pendingFlightSegments:p,pendingFlightTokenMap:h,pendingFlightFareRemark:g})),PartitionStatus:(0,l.Z)((0,l.Z)({},c),{},{FlightSearchStatus:"pending"})})},CHANGED_PARTITIONED_FLIGHT:function(e,n){var t=n.PendingPartitionedFlight,o=D(e),r=o.ShoppingResource,i=o.ShoppingId,a=e.PartitionStatus,s=r.pendingFlightSegments,c=r.pendingFlightTokenMap,u=r.pendingFlightFareRemark;return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},i,(0,l.Z)((0,l.Z)({},r),{},{Flight:t,flightSegments:s,flightTokenMap:c,flightFareRemark:u,pendingFlightFareRemark:void 0,pendingFlightSegments:void 0,pendingFlightTokenMap:void 0,PendingPartitionedFlight:null})),PartitionStatus:(0,l.Z)((0,l.Z)({},a),{},{FlightSearchStatus:"changed"})})}},j=(0,l.Z)((0,l.Z)((0,l.Z)({},R),y),{},{WAITING_READY:function(e,n){var t=n.resourceTypeInfo,o=n.IsNewShopping,r=n.ShoppingId,i=o?(0,l.Z)((0,l.Z)({},e),{},{ShoppingId:r,IsNewShopping:o,Resource:{},PartitionStatus:P}):e,a={isShowInvalidProduct:!1,resourceTypeInfo:t,isShowSkeleton:!0,priceShowStatus:"loading",isShoppingDetailReady:!1,isExtraResourceReady:!1,isSecondDataReady:!1,isTradeMinPriceMode:!1,isCanEditPassenger:!1,hasPreload:void 0};return(0,l.Z)((0,l.Z)((0,l.Z)({},i),a),{},{flags:w})},UPDATE_STATE:function(e,n){return(0,l.Z)((0,l.Z)({},e),n)},UPDATE_SHOPPING_STATE:function(e,n){var t=n.ShoppingData,o=D(e),r=o.ShoppingResource,i=o.ShoppingId;return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},i,(0,l.Z)((0,l.Z)({},r),t))})},SET_FIRST_SCREEN_DATA:function(e,n){var t,o,r,i=e.ShoppingId,a=e.params,s=e.Resource,c=e.Platform,u=e.isShowSkeleton,d=e.isBestone,p=(null===s||void 0===s?void 0:s[i])||{},h=n.shoppingDetailData,g=n.CabinInfo,f=void 0===g?{}:g,x=h.productInfo,m=h.shoppingDetail,S=h.qConfig,T=(0,k.sF)(x,c,d),I=(0,k.Sy)(m),w=(0,k.tr)(m),P=(0,k.xX)(S),N=P.TrainSaleStartTime,D=P.TrainSaleEndTime,y=(0,k.v4)(m.priceDetail),R=(null===f||void 0===f?void 0:f.FareRemarkForShopping)||[],j=(0,k.Z2)(m.Flight,R),C=j.flightSegments,E=j.flightTokenMap,M=(0,k.uq)(R),_=I.Hotel,A=I.Flight,b=u;u&&((null!==A&&void 0!==A&&null!==(o=A.Segments)&&void 0!==o&&o.length||null!==_&&void 0!==_&&null!==(r=_.Hotels)&&void 0!==r&&r.length)&&(b=!1));var Z=(0,k.hh)(_),B=!Z,F=x.competitionInfo||{},V=I.competitionInfo||{},L=(0,k.By)(m),H=null===h||void 0===h||null===(t=h.productInfo)||void 0===t?void 0:t.BasicInfo,U=!H.isDiyfhxsdp&&!H.isCruise;return(0,l.Z)((0,l.Z)((0,l.Z)({},e),T),{},{isShowSkeleton:b,IsNewShopping:!1,isShowErrorNewProcess:!1,isBookingBtnGrey:!1,TrainSaleStartTime:N,TrainSaleEndTime:D,params:(0,l.Z)((0,l.Z)((0,l.Z)({},a),w),{},{cachekey:""}),passengerCount:L,Resource:(0,v.Z)({},i,(0,l.Z)((0,l.Z)((0,l.Z)({},p),I),{},{CabinInfo:f,userInfo:y,TypeList:[],flightSegments:C,flightTokenMap:E,flightFareRemark:M,competitionInfo:(0,l.Z)((0,l.Z)({},F),V)})),isShoppingDetailReady:!0,isExtraResourceReady:!1,isCanEditPassenger:B,isShowCompetition:U})},CONCAT_SEARCHX_DATA:function(e,n){var t,o=e.ShoppingId,r=e.Resource,i=e.ShoppingSelectedTokenList,a=void 0===i?[]:i,s=(e.OrderExtendInfoList,(null===r||void 0===r?void 0:r[o])||{}),c=(0,k.j3)(n);a=(0,k.f5)(a,c);var u=n["optional"],d=n["required"],p=(0,k.T2)({resource:u}),h=p.updateResource,g=(0,k.T2)({resource:d}),f=g.updateResource;n=(0,l.Z)((0,l.Z)({},n),{},{optional:h,required:f});var x=(null===s||void 0===s?void 0:s.Tags)||[],m=(null===(t=n)||void 0===t?void 0:t.Tags)||[];return(0,l.Z)((0,l.Z)({},e),{},{isShowSkeleton:!1,ShoppingSelectedTokenList:(0,I.Z)(a),Resource:(0,v.Z)({},o,(0,l.Z)((0,l.Z)((0,l.Z)({},s),n),{},{Tags:[].concat((0,I.Z)(x),(0,I.Z)(m))})),isExtraResourceReady:!0})},SET_SECOND_SCREEN_DATA:function(e,n){var t=n.ShoppingData,o=D(e),r=o.ShoppingResource,i=(o.Resource,o.ShoppingId);return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},i,(0,l.Z)((0,l.Z)({},r),t)),isSecondDataReady:!0})},UPDATE_SELECTED_RESOURCE:function(e,n){var t,o=D(e),r=o.ShoppingResource,i=(o.Resource,o.ShoppingId),a=n.resourceType,s=n.updateType;return t="cruiseTour"==a?(0,k.yi)({ShoppingResource:r,selectedResource:n,updateType:s}):(0,k.sy)({ShoppingResource:r,selectedResource:n,updateType:s}),(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},i,(0,l.Z)((0,l.Z)({},r),{},(0,v.Z)({},a,t)))})},UPDATE_ROOM_RESOURCE:function(e,n){var t=D(e),o=t.ShoppingResource,r=(t.Resource,t.ShoppingId),i=(0,k.XI)({ShoppingResource:o,selectedResource:n});return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},r,(0,l.Z)((0,l.Z)({},o),{},(0,v.Z)({},"room",i)))})},UPDATE_TRANSPORTATION:function(e,n){var t=D(e),o=t.ShoppingResource,r=(t.Resource,t.ShoppingId),i=(0,k.ze)({ShoppingResource:o,deleteToken:n});return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},r,(0,l.Z)((0,l.Z)({},o),{},(0,v.Z)({},"transportation",i)))})},UPDATE_SHOPPING_STATE_FLAG:function(e,n){var t=e.flags,o=n.flagData;return(0,l.Z)((0,l.Z)({},e),{},{flags:(0,l.Z)((0,l.Z)({},t),o)})},HIDE_ALL_MASK:function(e){return(0,l.Z)((0,l.Z)({},e),{},{flags:w})},INIT_PARTITION_STATUS:function(e,n){var t=n.initFlight,o=void 0!==t&&t,r=n.initHotel,i=void 0!==r&&r,a=e.PartitionStatus,s=o?{FlightSearchStatus:"notchanged"}:{},c=i?{HotelSearchStatus:"notchanged",HotelSearchUpdatingStatus:"notchanged",HotelChangedText:""}:{};return(0,l.Z)((0,l.Z)({},e),{},{PartitionStatus:(0,l.Z)((0,l.Z)((0,l.Z)({},a),s),c)})},UPDATE_RESOURCE_CHANGE_TIP_MASK:function(e,n){var t=e.flags;return(0,l.Z)((0,l.Z)({},e),{},{flags:(0,l.Z)((0,l.Z)({},t),{},{isShowResourceChangeTipMask:n})})},UPDATE_PRICESHOW_STATUS:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{priceShowStatus:n})},SET_BOOKING_BUTTON_GREY:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{isBookingBtnGrey:n})},UPDATE_ERROR_MESSAGE:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{errorMessage:n})},SET_SHOPPING_PRICE_DETAIL:function(e,n){var t=n.priceDetail,o=n.fallback,r=D(e),i=r.ShoppingResource,a=r.Resource,s=r.ShoppingId,c=a.HotelSearchStatus,u=(0,k.v4)(t);return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},s,(0,l.Z)((0,l.Z)({},i),{},{priceDetail:t,userInfo:u})),priceShowStatus:"loading"===c?"loading":o})},UPDATE_SHOPPING_SELECTED_TOKEN_LIST:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{ShoppingSelectedTokenList:(0,I.Z)(n)})},UPDATE_ORDER_EXTENDINFO_LIST:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{OrderExtendInfoList:n})},SET_ABTEST_RESULT:function(e,n){var t=(null===e||void 0===e?void 0:e.ABTestResult)||{};return(0,l.Z)((0,l.Z)({},e),{},{ABTestResult:(0,l.Z)((0,l.Z)({},t),n)})},SET_PRODUCTINFO_DATA:function(e,n){var t=e.Platform,o=e.isBestone;console.log("====",{productInfo:n});var r=(0,k.sF)(n,t,o);return(0,l.Z)((0,l.Z)((0,l.Z)({},e),r),{},{aliasInfo:n.aliasInfo,isShowSkeleton:!1,isShowErrorNewProcess:!0,isSecondDataReady:!0})},UPDATE_ERRORPAGE:function(e){return(0,l.Z)((0,l.Z)({},e),{},{isShowErrorNewProcess:!0})},SET_PASSENGER_BTN_LOADING:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{passengerBtnLoading:n})},UPDATE_CALENDARINFO_MASK:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{calendarMaskInfo:n})},UPDATE_TRADE_MINPRICE_MODE:function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{isTradeMinPriceMode:n})},UPDATE_BESTONE_PARAMS:function(e){var n=N.userAgent.indexOf("ctripBestonWireless")>-1;return(0,l.Z)((0,l.Z)({},e),{},{isInBestoneApp:n})},UPDATE_COMPETITION_INFO:function(e,n){var t=e.ShoppingId,o=e.Resource,r=(null===o||void 0===o?void 0:o[t])||{},i=(null===r||void 0===r?void 0:r.competitionInfo)||{};return(0,l.Z)((0,l.Z)({},e),{},{Resource:(0,v.Z)({},t,(0,l.Z)((0,l.Z)({},r),{},{competitionInfo:(0,l.Z)((0,l.Z)({},i),n)}))})},UPDATE_PARAMS:function(e,n){var t=e.params;return(0,l.Z)((0,l.Z)({},e),{},{params:(0,l.Z)((0,l.Z)({},t),n)})},UPDATE_MASK_DATA:function(e,n){var t=e.MaskData;return(0,l.Z)((0,l.Z)({},e),{},{MaskData:(0,l.Z)((0,l.Z)({},t),n)})}}),C=t(86582),E=t(10932),M=t(22394),_=t(95451),A=function(e){e.ctx;var n=e.store,t=function(e,n){var t=null;switch(e){case"\u66f4\u6362\u8f66\u6b21/\u5750\u5e2d":case"\u66f4\u6362\u4e3b\u62a2\u8f66\u7968":case"\u66f4\u6362\u5907\u62a2\u8f66\u7968":case"\u6dfb\u52a0\u5907\u62a2\u8f66\u7968":t=o(n);break;default:break}return null===t&&console.warn("\u672a\u914d\u7f6e\u300c".concat(e,"\u300d\u8df3\u8f6c\u573a\u666f\uff01")),t},o=function(e){var t=n.getState(),o=t.RegisterPageName,r=t.ShoppingId,i=t.Platform,a=(0,l.Z)({shoppingId:r,sourcefrom:"tour_channel",fromPage:i==_.NN.CTRIPRN?o:""},e);return a};return{getParams:t}},b=function(e){var n=e.ctx,t=e.store,o=function(e){if(!L)try{n.getDHTLogger().logActionInfo(e)}catch(e){}},r=function(e){if(!L)try{n.getDHTLogger().logPageInfo(e)}catch(e){}},i=function(e,t){var o={pageName:"resource",message:e,ex:t};if(!L)try{n.getDHTLogger().logError(o)}catch(e){console.log("\ud83d\udc38 traceKMLogError",e)}},a=function(e){if(!L)try{n.getDHTLogger().logMessage(e)}catch(e){console.log("\ud83d\udc38 traceKMLogMessage",e)}},s=function(e,t){try{var o="";if(t.startsWith("vac_1")?o="\u7cfb\u7edf\u5f02\u5e38":t.startsWith("vac_2")?o="\u8d44\u6e90\u4e0d\u53ef\u8ba2":t.startsWith("vac_3")?o="\u7528\u6237\u8f93\u5165\u9a8c\u8bc1":t.startsWith("vac_4")&&(o="\u641c\u7d22\u65e0\u7ed3\u679c"),""===o)return;if(L)return;n.getDHTLogger().logActionInfo({module:"\u963b\u65ad",scene:o,role:C.GD.sys,action:C.Us.show,value:e||"-",key:t})}catch(e){console.log("\ud83d\udc38 traceKMLogAction",e)}},l=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.getState(),a=i.ShoppingId;o({attrs:[{key:"shoppingid",value:a}],module:"".concat(e,"\u5f39\u5c42"),role:C.GD.usr,action:C.Us.change,value:n?"\u6253\u5f00":"\u5173\u95ed",before:n?"\u5173\u95ed":"\u6253\u5f00",jsonData:r})},c=function(e){var n=e.BackPageInfo,r=e.ShoppingCartInfo,i=void 0===r?{}:r,a=t.getState(),s=a.ShoppingId,l={};if(i)for(var c=0,u=Object.keys(i);c<u.length;c++){var d=u[c];l[d.toLowerCase()]=i[d]}var p=(null===l||void 0===l?void 0:l.flightupdated)||(null===l||void 0===l?void 0:l.hotelupdated),h=(null===n||void 0===n?void 0:n.useCouponStatus)||0;o({attrs:[{key:"ShoppingId",value:s}],scene:"\u8fd4\u56de\u8d44\u6e90\u9875",role:C.GD.sys,action:C.Us.show,contents:[{key:"\u6700\u4f73\u4f18\u60e0",value:String(2!==h)},{key:"\u6e05\u7a7a\u63a5\u9001\u673a",value:JSON.stringify(!!p)}],jsonData:{BackPageInfo:n,ShoppingCartInfo:l}})},u=function(e){var n=e.resource,r=e.updateSuccess,i=void 0!==r&&r,a=t.getState(),s=a.ShoppingId,l=n.Basic,c=n.SelectedCount,u=n.SelectedShopping,d=n.SelectedInfo,p=n.beforeCount,h=n.beforeUseDateRange,v=(null===l||void 0===l?void 0:l.ResourceId)||"",g=(null===l||void 0===l?void 0:l.ResourceName)||"",f=(null===l||void 0===l?void 0:l.Unit)||"",x=(0,k.e3)(n),m=M.Z.format(null===u||void 0===u?void 0:u.UseDate,"YYYY-MM-DD"),S=x?null===d||void 0===d?void 0:d.UseDate:m,T=x?null===d||void 0===d?void 0:d.EndUseDate:m,I=function(e,n){var t=e||"",o=n||"";return t===o?t:"".concat(t,"-").concat(o)};o({attrs:[{key:"ShoppingId",value:s}],module:"x\u8d44\u6e90",scene:"\u66f4\u6362\u8d44\u6e90 ".concat(i?"\u6210\u529f":"(\u672a\u66f4\u65b0\u5230 shopping)"),role:C.GD.usr,action:C.Us.change,contents:[{key:"\u8d44\u6e90 ID",value:v},{key:"\u8d44\u6e90\u540d\u79f0",value:g},{key:"\u66f4\u65b0\u524d\u4efd\u6570",value:"".concat(p).concat(f)},{key:"\u66f4\u65b0\u540e\u4efd\u6570",value:"".concat(c).concat(f)},{key:"\u66f4\u65b0\u524d\u4f7f\u7528\u65e5\u671f",value:I(null===h||void 0===h?void 0:h.UseDate,null===h||void 0===h?void 0:h.EndUseDate)},{key:"\u66f4\u65b0\u540e\u4f7f\u7528\u65e5\u671f",value:I(S,T)}]})},d=function(){var e=t.getState(),o=e.params,r=e.passengerCount,i=e.Resource,a=e.ShoppingId;try{var s,l,c=(null===i||void 0===i?void 0:i[a])||{},u=(null===c||void 0===c?void 0:c.priceDetail)||{},d={productId:o.productId,orderdate:o.date,displayprice:o.recommendcalendarprice,adultnum:r.adultCount||0,childnum:r.childCount||0,infantnum:r.infantCount||0,payamount:null===u||void 0===u||null===(s=u.totalPrice)||void 0===s?void 0:s.totalPrice,discnt:null===u||void 0===u||null===(l=u.totalPrice)||void 0===l?void 0:l.save};n.tracelog("grp_shoppingdata_price_load",d)}catch(e){console.log("\ud83c\udf36 logShoppingData",e)}};return{traceKMLogAction:o,traceKMLogPage:r,traceKMLogError:i,traceKMLogMessage:a,traceKMInterruption:s,traceMask:l,traceBackCache:c,traceResourceChange:u,logShoppingData:d}},Z=function(e){var n=e.ctx,t=e.store,o=e.actions,r=b({ctx:n,store:t}),i=r.traceMask,a=function(e){var n=o.UPDATE_MASK_DATA,t=o.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowCruiseTourMask:!0}}),n({CruiseTourId:e}),i("\u5cb8\u4e0a\u6e38\u7ec4\u8d44\u6e90",!0)},s=function(){var e=o.UPDATE_MASK_DATA,n=o.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowCruiseTourMask:!1}}),e({CruiseTourId:null}),i("\u5cb8\u4e0a\u6e38\u7ec4\u8d44\u6e90",!1)};return{showCruiseTourMask:a,hideCruiseTourMask:s}},B=t(50107),F=t(32180)["document"],V=t(32180)["window"],L="undefined"!==typeof process&&"test"===(null===(o=process)||void 0===o||null===(o=o.env)||void 0===o?void 0:"production"),H="undefined"!==typeof process&&"development"===(null===(r=process)||void 0===r||null===(r=r.env)||void 0===r?void 0:"production"),U=[],O=(0,C.lU)((function(){var e=(0,E.Do)(),n=(0,E.$S)(),o=(0,B.c)({ctx:e}),r=o.getInitialStateFromQuery(n),i=(0,C.zn)({name:"isomorphic_resource",initialState:(0,l.Z)((0,l.Z)((0,l.Z)({},r),(0,E.IP)()),{},{MaskData:{}}),reducers:j,logger:H}),c=i.store,u=i.actions,d=(null===e||void 0===e?void 0:e.ctrl)||{},p={batchesFlightRequests:[],batchesHotelRequests:[],shoppingRequests:[],priceDetailRequests:[]},h=!1,g=!1,f=null,x=[],m=[],w=[null,null],P=[],N=!0,D=A({ctx:e,store:c}),y=b({ctx:e,store:c}),R=y.traceKMLogAction,O=y.traceKMLogPage,G=y.traceKMLogError,Y=y.traceKMLogMessage,q=y.traceKMInterruption,W=y.traceResourceChange,K=y.traceBackCache,J=y.logShoppingData,X=Z({ctx:e,store:c,actions:u}),$=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,p,h,v,g,f,x,m,S;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,z();case 2:if(t=c.getState(),o=t.IsNewShopping,r=t.IsContinueBook,i=t.ShoppingId,s=t.newProcess,l=t.query,p=t.Platform,h=t.isShowErrorNewProcess,v=u.UPDATE_STATE,r||p!==_.NN.CTRIPRN||(f=(null===e||void 0===e||null===(g=e.get("DEPRECATED_SHOPPING"))||void 0===g?void 0:g[null===l||void 0===l?void 0:l.line])||[],e.remove("DEPRECATED_SHOPPING"),f.includes(i)&&q("shoppingid \u8fc7\u671f","vac_11003")),!h){n.next=7;break}return n.abrupt("return");case 7:if(i||s){n.next=9;break}return n.abrupt("return");case 9:if("H5"!==(null===e||void 0===e?void 0:e.Platform)||null===e||void 0===e||!e.isSSR||null===e||void 0===e||!e.isServer){n.next=22;break}return n.prev=10,n.next=13,ee({extraResourceParams:{clearTransportation:!1}});case 13:v({hasPreload:!0}),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](10),v({hasPreload:!1}),G("fetchFirstScreen",n.t0);case 20:n.next=27;break;case 22:return n.next=24,Ne.getResourceTypeInfoFromStorage(i);case 24:x=n.sent,Q({resourceTypeInfo:x,IsNewShopping:o,ShoppingId:i}),o?re({isSSR:!1,sendPV:!0}):(m=!1,S={},"H5"===(null===e||void 0===e?void 0:e.Platform)&&(d.setPageShowStorage(!1),m=d.getNeedClearTransportation(l),S=d.getBackPageInfo()),ie({isShowLoading:!1,isSSR:!1,clearTransportation:m,BackPageInfo:S,sendPV:!0}));case 27:case"end":return n.stop()}}),n,null,[[10,16]])})));return function(){return n.apply(this,arguments)}}();(0,C.Ns)($),"H5"==(null===e||void 0===e?void 0:e.Platform)&&(0,C._0)((0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s,l,p,h,v,g,f,x;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=c.getState(),t=n.hasPreload,o=n.ShoppingId,r=n.query,i=n.isShowErrorNewProcess,!i){e.next=4;break}return te(),e.abrupt("return");case 4:if(s=u.UPDATE_STATE,l="1"==r.isnewshopping,d.setPageShowStorage(!1),p=(null===d||void 0===d?void 0:d.getShoppingCartInfo())||{},h=!1,null!==p&&void 0!==p&&p.flightupdated&&(Ne.setFlightBaggageStorage(o),h=!0),null!==p&&void 0!==p&&p.hotelupdated&&(h=!0),v=d.getBackPageInfo(),g=d.getOrderUseCouponState(o),K({BackPageInfo:v,ShoppingCartInfo:p}),s({useCouponState:g}),void 0!==t){e.next=17;break}return e.abrupt("return");case 17:if(!0===t&&Ne.clearResourceFirstScreenFromStorage(),f=!0,!1!==t&&!h){e.next=25;break}return f=!1,e.next=23,Ne.getResourceTypeInfoFromStorage(o);case 23:x=e.sent,Q({resourceTypeInfo:x,IsNewShopping:l,ShoppingId:o});case 25:l?re({isSSR:f}):ie({isShowLoading:!1,isSSR:f,clearTransportation:h,BackPageInfo:v});case 26:case"end":return e.stop()}}),e)}))));var z=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s=arguments;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},o=u.UPDATE_STATE,n.next=4,e.getInitialData(t);case 4:r=n.sent,i=r.params,i.shoppingid?o((0,l.Z)({},r)):(o((0,l.Z)((0,l.Z)({},r),{},{isShowErrorNewProcess:!0})),"H5"!==(null===e||void 0===e?void 0:e.Platform)&&te());case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Q=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=n.resourceTypeInfo,o=n.IsNewShopping,r=n.ShoppingId,i=u.WAITING_READY,h=!1,g=!1,f=null,x=[],m=[],w=[null,null],i({resourceTypeInfo:t,IsNewShopping:o,ShoppingId:r});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,l,c,d,p,h,v;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.extraResourceParams,o=null,r=null,i=void 0,l=!1,c=null,d=null,p=u.SET_FIRST_SCREEN_DATA,h=u.CONCAT_SEARCHX_DATA,v=new Promise((function(e,n){var u=(new Date).getTime();le().then(function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var s,v;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.shoppingDetailData,l=t.__isFromCache,v=(null===(s=o)||void 0===s||null===(s=s.shoppingDetail)||void 0===s?void 0:s.Flight)||{},!v||(0,k.xb)(v.Segments)){n.next=9;break}return n.next=6,ce();case 6:i=n.sent,n.next=10;break;case 9:i={};case 10:p({shoppingDetailData:o,CabinInfo:i}),r&&(c=(new Date).getTime(),h(r),d=(new Date).getTime(),e({__isFromCache:l,startTime:u,fetchTime:c,renderTime:d}));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){n(e)})),se(t).then((function(n){r=n,o&&i&&(c=(new Date).getTime(),h(r),d=(new Date).getTime(),e({__isFromCache:l,startTime:u,fetchTime:c,renderTime:d}))})).catch((function(e){n(e)}))})),e.abrupt("return",v);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s,l,c,d,p,h,v,g,f;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ne.getResourceFirstScreenFromStorage();case 2:if(n=e.sent,t=n.extraResource,o=n.CabinInfo,!(0,k.xb)(n)){e.next=9;break}return e.next=7,ee({extraResourceParams:{}}).then((function(e){var n=e.__isFromCache,t=e.startTime,o=e.fetchTime,r=e.renderTime,i={timeStamp:r,content:[{key:"\u547d\u4e2d\u672c\u5730\u7f13\u5b58",value:String(!1)},{key:"\u547d\u4e2d\u7f13\u5b58",value:String(n)},{key:"\u9996\u5c4f\u63a5\u53e3",value:String(o-t)},{key:"\u9996\u5c4f\u6e32\u67d3",value:String(r-o)}]};x.push(i)}));case 7:e.next=27;break;case 9:return i=(new Date).getTime(),s=u.SET_FIRST_SCREEN_DATA,l=u.CONCAT_SEARCHX_DATA,e.next=13,le();case 13:if(c=e.sent,d=null===c||void 0===c?void 0:c.shoppingDetailData,p=null===c||void 0===c?void 0:c.__isFromCache,h=(null===d||void 0===d||null===(r=d.shoppingDetail)||void 0===r?void 0:r.Flight)||{},!(h&&h.Segments&&(0,k.xb)(o))){e.next=21;break}return e.next=20,ce();case 20:o=e.sent;case 21:v=(new Date).getTime(),s({shoppingDetailData:d,CabinInfo:o}),l(t),g=(new Date).getTime(),f={timeStamp:g,content:[{key:"\u547d\u4e2d\u672c\u5730\u7f13\u5b58",value:String(!0)},{key:"\u547d\u4e2d\u7f13\u5b58",value:String(p)},{key:"\u9996\u5c4f\u63a5\u53e3",value:String(v-i)},{key:"\u9996\u5c4f\u6e32\u67d3",value:String(g-v)}]},x.push(f);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=c.getState(),t=n.ShoppingId,o=n.newProcess,r=n.params,i=n.query,s={attrs:[{key:"shoppingId",value:t}],contents:[{key:"\u9884\u8ba2\u6d41\u7a0b(\u6b63\u5e38\u9884\u8ba2\u3001\u7ee7\u7eed\u9884\u8ba2)",value:h?"\u6b63\u5e38\u9884\u8ba2":"\u7ee7\u7eed\u9884\u8ba2"},{key:"\u9884\u8ba2\u6d41\u7a0b(\u6b63\u5e38\u3001\u7f29\u77ed)",value:o?"\u7f29\u77ed\u9884\u8ba2\u6d41\u7a0b":"\u6b63\u5e38\u9884\u8ba2\u6d41\u7a0b"},{key:"\u51fa\u53d1\u65f6\u95f4",value:r.date},{key:"\u4ea7\u54c1 ID",value:r.line},{key:"alias",value:r.alias},{key:"\u884c\u7a0b\u7c7b\u578b",value:"1"===i.stype?"\u56fa\u5b9a\u884c\u7a0b":"\u53ef\u5ef6\u4f4f"}],desc:"\u57fa\u672c\u4fe1\u606f"},O(s);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,d,p,h,v,g,f,x,m,S,T,I,k,w,P,N,D;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=c.getState(),r=o.ShoppingId,i=o.useCouponState,s=o.clientInfo,d=o.Platform,d===_.NN.CTRIPRN){n.next=3;break}return n.abrupt("return");case 3:return p=u.UPDATE_COMPETITION_INFO,h="CompetitionInfo",v=_.$V.fetchCompetitionInfo,g=e.attachShardParams(),f=Number(g.Version),x={ShoppingDetailParams:(0,l.Z)((0,l.Z)({ShoppingId:r,allianceId:(null===s||void 0===s?void 0:s.allianceid)||0,siteId:(null===s||void 0===s?void 0:s.sid)||0,clientId:(null===s||void 0===s?void 0:s.clientId)||"",useBestPromo:2!=i,PageId:"100061000710003",PageType:"DetailInfo"},e.attachShardParams()),{},{Version:f})},m=(new Date).getTime(),n.next=12,e.createGqlRequest(v,x,h).fetch();case 12:S=n.sent,T=S.data,I=S.extensions,k=(new Date).getTime(),R({attrs:[{key:"ShoppingId",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u83b7\u53d6\u8d44\u6e90\u7ade\u4e89\u529b CompetitionInfo",role:C.GD.sys,action:C.Us.show,value:"".concat(k-m,"ms"),rootMessageId:Re.getRootMessageId((null===I||void 0===I||null===(t=I.SoaResponseStatus)||void 0===t||null===(t=t.ResponseStatus)||void 0===t?void 0:t.Extension)||[])}),w=T||{},P=w.shoppingDetail,N=null===P||void 0===P?void 0:P.ResponseStatus,N&&"Success"===N.Ack&&(D=P.competitionInfo,p(D));case 20:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),re=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,d,p;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.isSSR,o=void 0!==t&&t,r=n.sendPV,i=void 0!==r&&r,e.prev=1,h=!0,s=c.getState(),l=s.Platform,d=u.UPDATE_BESTONE_PARAMS,e.t0=!o,!e.t0){e.next=9;break}return e.next=9,ne();case 9:return l===_.NN.CTRIPRN&&i&&Ce(),l===_.NN.CTRIPH5&&en({isnewshopping:"0"}),e.next=13,Promise.all([Ne.setResourceNeedSelectedDateStorage(),Ne.setOrderExtendInfoListStorage()]);case 13:l==_.NN.CTRIPH5&&(d(),Re.setBestonePriceInfo()),be({is_rec:1}),Ze({is_rec:1}),Re.setPrefetchSetting(),ae({isNeedBatches:!0}),je(),de({isUserChangeResource:!1}),De.handlePrefetchAllHotels(),e.next=32;break;case 23:if(e.prev=23,e.t1=e["catch"](1),e.t1.isNetError){e.next=31;break}if(null===e.t1||void 0===e.t1||null===(p=e.t1.message)||void 0===p||!p.startsWith("vac_")){e.next=30;break}return e.abrupt("return");case 30:G("fetchNewShopping",e.t1);case 31:Re.showNetWorkErrorPage();case 32:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,d,p,v,g,f,x,m,S,T,I,w,P,N,D,y,R,j,C,E,M;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.clearTransportation,o=void 0!==t&&t,r=n.BackPageInfo,i=void 0===r?{}:r,s=n.isShowLoading,l=void 0===s||s,d=n.afterFlightPartition,p=void 0!==d&&d,v=n.afterHotelPartition,g=void 0!==v&&v,f=n.isSSR,x=void 0!==f&&f,m=n.sendPV,S=void 0!==m&&m,h=!1,l&&Re.showLoadingDialog(),p||g||Re.initAllPartitionStates(),T=c.getState(),I=T.Platform,w=u.UPDATE_STATE,P=u.UPDATE_BESTONE_PARAMS,I==_.NN.CTRIPH5&&(P(),Re.listenBestoneAppVolumeChange()),e.prev=7,e.next=10,Promise.all([Ne.getResourceSelectedListFromStorage(),Ne.getOrderExtendInfoListFromStorage()]);case 10:if(N=e.sent,D=N[0]||[],y=N[1]||[],w({ShoppingSelectedTokenList:D,OrderExtendInfoList:y}),I!=_.NN.CTRIPH5){e.next=21;break}return j=Re.getResource(),C=j.ShoppingResource,E=(null===C||void 0===C||null===(R=C.transportation)||void 0===R||null===(R=R[0].groups)||void 0===R?void 0:R[0].datas)||[],o&&!(0,k.xb)(E)&&De.handleShowResourceChangedTipMask(),e.next=20,De.handleSetShoppingSelectedTokenListFromShoppingCart();case 20:Re.setBestonePriceInfo();case 21:if(e.t0=!x,!e.t0){e.next=25;break}return e.next=25,ee({extraResourceParams:{clearTransportation:o}});case 25:return I===_.NN.CTRIPRN&&S&&Ce(),e.next=28,Promise.all([Ne.setResourceNeedSelectedDateStorage(),Ne.setOrderExtendInfoListStorage()]);case 28:if(je(),be({is_rec:0}),Ze({is_rec:0}),Re.setPrefetchSetting(),Re.cleanErrorMessages(),Re.showOrderBookingErrorInfo(i),null===i||void 0===i||!i.needFlightUpdate){e.next=37;break}return e.next=37,ve();case 37:return l&&Re.hideLoadingDialog(),ae({isNeedBatches:!1,afterFlightPartition:p,afterHotelPartition:g}),de({isUserChangeResource:!1}),g&&De.handlePrefetchAllHotels(),e.abrupt("return",!0);case 44:if(e.prev=44,e.t1=e["catch"](7),e.t1.isNetError){e.next=52;break}if(null===e.t1||void 0===e.t1||null===(M=e.t1.message)||void 0===M||!M.startsWith("vac_")){e.next=51;break}return e.abrupt("return");case 51:G("fetchResourceInfoFromShoppingId",e.t1);case 52:return Re.showNetWorkErrorPage(),e.abrupt("return",!1);case 54:case"end":return e.stop()}}),e,null,[[7,44]])})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(o){var r,i,s,l,d,p,v,g,f,S,T,I,k,w,P,D,y,R,j,C,E,M,A,b,Z,B,F,V;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=o.isNeedBatches,i=o.afterFlightPartition,s=void 0!==i&&i,l=o.afterHotelPartition,d=void 0!==l&&l,p=u.SET_SECOND_SCREEN_DATA,v=u.UPDATE_PRICESHOW_STATUS,g=u.UPDATE_STATE,u.SET_ABTEST_RESULT,f=c.getState(),S=f.resourceTypeInfo,T=f.Platform,I=f.IsContinueBook,k=f.isCanEditPassenger,f.pageStatus,w=(null===S||void 0===S?void 0:S.fromPage)||"resourcePage",(T===_.NN.CTRIPH5||null!==e&&void 0!==e&&e.isSSR)&&en({timestamp:(new Date).getTime()}),Ne.clearResourceTypeStorage(),!r){t.next=25;break}return Te(),m.push((new Date).getTime()),t.next=11,Ie();case 11:if(P=t.sent,P!==_.Bm.SUCCESS){t.next=18;break}if(De.handleShowResourceChangedTipMask(),L){t.next=16;break}return t.abrupt("return");case 16:t.next=25;break;case 18:if(P!==_.Bm.FAIL){t.next=23;break}return ie({isShowLoading:!1}),t.abrupt("return");case 23:v("show"),"detailPage"!==w&&!d&&De.handleShowResourceChangedTipMask();case 25:return!k&&g({isCanEditPassenger:!0}),D=(new Date).getTime(),y=[ge(),xe(),Se(),fe(),ue()],s&&y.pop(),t.next=31,Promise.all(y);case 31:R=t.sent,j=(new Date).getTime(),C={},null===R||void 0===R||R.forEach((function(e){e&&Object.keys(e).forEach((function(n){C[n]=e[n]}))})),E=C.BffSingleRoom,M=C.mergeVisaPolicyInfoData,A=C.TicketPoiUrlDic,b=C.OptionDetails,Z=C.tourStatus,B={BffSingleRoom:E,VisaPolicyInfoData:M,TicketPoiUrlDic:A,OptionDetails:b,tourStatus:Z},s&&delete B.BffSingleRoom,p({ShoppingData:B}),F=(new Date).getTime(),V={timeStamp:F,content:[{key:"\u6b21\u5c4f\u63a5\u53e3",value:String(j-D)},{key:"\u6b21\u5c4f\u6e32\u67d3",value:String(F-j)}]},x.push(V),Be(x),x=[],h=!1,(I||"1"!==n.isnewshopping)&&(N=!1),N&&(J(),N=!1),T==_.NN.CTRIPRN&&(e.OrderEntry.preload(),e.logDevTrace("tour_entry_preload_resource",{rn_tour_order:!0}));case 48:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,u,d,p,h,v,g,f,x,m,S,T,I,w,P,N,D,y,j,E,M,A,b,Z,B,F,V,L,H,U,O,G,Y,q,W;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.clearTransportation,s=void 0!==i&&i,u=c.getState(),d=u.ShoppingId,p=u.IsNewShopping,h="ExtraResource",v=_.$V.fetchSearchXResource,g=e.attachShardParams(),f=Number(g.Version),x=[],s&&x.push("clearTransportation"),m={params:(0,l.Z)((0,l.Z)({ShoppingId:d,RecommendType:p?1:2,Options:x,Channel:4},e.attachShardParams()),{},{Version:f})},S=(new Date).getTime(),n.next=12,e.createGqlRequest(v,m,h).fetch();case 12:if(T=n.sent,I=T.data,w=T.extensions,P=(new Date).getTime(),R({attrs:[{key:"ShoppingId",value:d}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u9996\u5c4f extraResource",role:C.GD.sys,action:C.Us.show,value:"".concat(P-S,"ms"),rootMessageId:Re.getRootMessageId((null===w||void 0===w||null===(o=w.SoaResponseStatus)||void 0===o||null===(o=o.ResponseStatus)||void 0===o?void 0:o.Extension)||[])}),N=I||{},D=N.extraResource,y=void 0===D?{}:D,j=y.Option,E=y.Insurances,M=y.train,A=y.Tags,b=y.single,Z=y.cruiseTour,B=y.room,F=y.discount,V=y.combinedTrans,L=y.transportation,H=y.visa,U=y.free,O=y.required,G=y.optional,Y=(null===y||void 0===y?void 0:y.ResponseStatus)||{},q=(null===y||void 0===y||null===(r=y.optionUpdateResult)||void 0===r?void 0:r.ResponseStatus)||{},"Success"===(null===Y||void 0===Y?void 0:Y.Ack)){n.next=26;break}throw _e(Y,"vac_10081","\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f",!0,"searchX\u8fd4\u56de\u7ed3\u679c"),Re.setPageErrorInfo("\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f"),De.pageDealWithDateError(),new Error("vac_10081");case 26:if("Success"===(null===q||void 0===q?void 0:q.Ack)){n.next=31;break}throw _e(q,"vac_20039","\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f",!0,"searchX\u8fd4\u56de\u7ed3\u679c"),Re.setPageErrorInfo("\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f"),De.pageDealWithDateError(),new Error("vac_20039");case 31:if("Success"!==(null===Y||void 0===Y?void 0:Y.Ack)||!q||"Success"!==q.Ack){n.next=37;break}return W=[],(0,k.xb)(M)||M.forEach((function(e){var n,t,o=(null===e||void 0===e?void 0:e.SelectedInfo)||{},r=null===o||void 0===o?void 0:o.needUpdate,i=(null===e||void 0===e?void 0:e.TrainInfos)||[],a=(null===(n=i[0])||void 0===n?void 0:n.Seats)||[],s=(null===(t=a[0])||void 0===t?void 0:t.Token)||"";r&&W.push(s)})),n.abrupt("return",{Option:j,Insurances:E,train:M,Tags:A,single:b,cruiseTour:Z,room:B,discount:F,combinedTrans:V,transportation:L,visa:H,free:U,required:O,optional:G,ErrorTokenList:W});case 37:throw new Error("fetchSearchXPromise ResponseStatus Failed");case 38:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),le=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,u,d,p,h,v,g,f,x,m,S,T,I,k,w,P,N,D,y,j,E,M,A,b,Z,B,F,V;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=c.getState(),r=o.ShoppingId,i=o.params,s=o.useCouponState,u=o.clientInfo,d=o.sourceFrom,p=o.isZhixing,o.Platform,h=i.productId,v=i.departCityId,g=i.alias,f=i.cachekey,x=i.line,m="ShoppingDetailData",S=_.$V.fetchFirstScreenInfo,T=[],g&&T.push(g),I=e.attachShardParams(),k=Number(I.Version),w={ProductInfoParams:(0,l.Z)({ProductId:Number(x||h),DepartureCityId:Number(v||0),Alias:T},I),ShoppingDetailParams:(0,l.Z)((0,l.Z)({ShoppingId:r,allianceId:(null===u||void 0===u?void 0:u.allianceid)||0,siteId:(null===u||void 0===u?void 0:u.sid)||0,clientId:(null===u||void 0===u?void 0:u.clientId)||"",useBestPromo:2!=s,PageId:"100061000710003",PageType:"DetailInfo"},e.attachShardParams()),{},{Version:k}),imEntryInfoParams:{sourceFrom:p?"zhixing":d,pageFrom:"resource"},qconfigParams:{KeyList:["publictraininfo.train_saleStartTime","publictraininfo.train_saleEndTime"]}},P={needRetry:!0},f&&(P={needRetry:!0,cachePolicy:{enableCache:!0,cacheExpireTime:3,cacheLocation:"MEM",cacheKey:f}}),N=(new Date).getTime(),n.next=14,e.createGqlRequest(S,w,m,P).fetch();case 14:if(D=n.sent,y=D.data,j=D.__isFromCache,E=void 0!==j&&j,M=D.extensions,A=(new Date).getTime(),R({attrs:[{key:"ShoppingId",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u9996\u5c4f ShoppingDetailData",role:C.GD.sys,action:C.Us.show,value:"".concat(A-N,"ms, isFromCache: ").concat(E),rootMessageId:Re.getRootMessageId((null===M||void 0===M||null===(t=M.SoaResponseStatus)||void 0===t||null===(t=t.ResponseStatus)||void 0===t?void 0:t.Extension)||[])}),b=y||{},Z=b.productInfo,B=b.shoppingDetail,F=null===Z||void 0===Z?void 0:Z.ResponseStatus,V=null===B||void 0===B?void 0:B.ResponseStatus,V&&"Success"===V.Ack){n.next=29;break}throw _e(V,"vac_20039","\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f",!0,"shoppingDetail \u8fd4\u56de\u7ed3\u679c"),Re.setPageErrorInfo("\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f"),De.pageDealWithDateError(),new Error("fetchFirstScreenInfoPromise ResponseStatus failed");case 29:if(F&&"Success"===F.Ack){n.next=32;break}throw _e(F,"vac_20039","\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f",!0,"productInfo \u8fd4\u56de\u7ed3\u679c"),new Error("fetchFirstScreenInfoPromise ResponseStatus failed");case 32:return n.abrupt("return",{shoppingDetailData:y,__isFromCache:E});case 33:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),ce=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,c,u,d,p,h,v,g,f,x,m;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Re.getResource(),r=o.ShoppingId,i="CabinInfo",s=_.$V.fetchCabinFareRemark,l={params:{clientParams:{appType:"app",appVersion:e.appVersion,sourcefrom:"tour_channel"},ShoppingId:r,Headers:[{Name:"SearchPKGRefer",value:"T"}],PageType:"DetailInfo"}},t&&(l.params.Flight=t),c={isDiy:!0},n.prev=6,p=(new Date).getTime(),n.next=10,e.createGqlRequest(s,l,i,c).fetch();case 10:return h=n.sent,v=h.data,g=h.extensions,f=(new Date).getTime(),R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u9996\u5c4f CabinInfo",role:C.GD.sys,action:C.Us.show,value:"".concat(f-p,"ms"),rootMessageId:Re.getRootMessageId((null===g||void 0===g||null===(u=g.SoaResponseStatus)||void 0===u||null===(u=u.ResponseStatus)||void 0===u?void 0:u.Extension)||[])}),x=(null===v||void 0===v?void 0:v.CabinInfo)||{},m=Re.checkResponseStatus(null===g||void 0===g||null===(d=g.SoaResponseStatus)||void 0===d?void 0:d.ResponseStatus),n.abrupt("return",m?x:{});case 20:return n.prev=20,n.t0=n["catch"](6),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchFlightRemarkInfo",n.t0),n.abrupt("return",{});case 24:case"end":return n.stop()}}),n,null,[[6,20]])})));return function(e){return n.apply(this,arguments)}}(),ue=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,l,c,u,p,h,v;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=Re.getResource(),r=o.ShoppingId,i=o.ShoppingResource,l=o.Platform,c=(null===i||void 0===i||null===(t=i.Hotel)||void 0===t?void 0:t.Hotels)||[],!(0,k.xb)(c)){n.next=4;break}return n.abrupt("return",null);case 4:if(u=!0,l!==_.NN.CTRIPH5){n.next=8;break}return n.next=8,e.initHotelAntibotTokenJS(r);case 8:return p=c.map(function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,i,s,c,p,h,v,g,f,x,m,S,T,I,w;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.Rooms,s=void 0===i?[]:i,c=t.BasicInfo,p=void 0===c?{}:c,h=null===(o=s[0])||void 0===o||null===(o=o.BasicInfo)||void 0===o?void 0:o.Token,!u){n.next=11;break}if(v=(0,k.Bb)({Rooms:s,BasicInfo:p,ShoppingId:r}),l!==_.NN.CTRIPH5){n.next=8;break}return v.Callback="hotelAntibotScriptCallback",n.next=8,e.getHotelAntibotToken(v);case 8:if(l!==_.NN.WEIXIN){n.next=11;break}return n.next=11,e.getHotelAntibotToken(v);case 11:return g="GetSingleRoom",f=_.$V.fetchHotelPolicyRemark,x={clientParams:{appType:"app",appVersion:e.appVersion},ShoppingId:r,roomToken:h},u&&(l===_.NN.CTRIPH5&&(x.opts={token:null===(m=d.hotelAntibotToken)||void 0===m?void 0:m.token,fingerprintkeys:null===(S=d.hotelAntibotToken)||void 0===S?void 0:S.hoteluuidkeys}),l===_.NN.WEIXIN&&(x.opts={token:d.HotelAntibotToken})),T={params:x},I={isDiy:!0},w=e.createGqlRequest(f,T,g,I).fetch(),n.abrupt("return",w);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.prev=9,n.next=12,Promise.all(p);case 12:if(n.t0=n.sent,n.t0){n.next=15;break}n.t0=[];case 15:return h=n.t0,v=[],null===h||void 0===h||h.map((function(e){var n,t,o=e.data,i=e.extensions;R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u6b21\u5c4f GetSingleRoom",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===i||void 0===i||null===(n=i.SoaResponseStatus)||void 0===n||null===(n=n.ResponseStatus)||void 0===n?void 0:n.Extension)||[])});var a=(null===o||void 0===o?void 0:o.SingleRoom)||{},s=Re.checkResponseStatus(null===e||void 0===e||null===(t=e.extensions)||void 0===t||null===(t=t.SoaResponseStatus)||void 0===t?void 0:t.ResponseStatus);s&&v.push({SingleRoom:a})})),n.abrupt("return",{BffSingleRoom:v});case 21:return n.prev=21,n.t1=n["catch"](9),null!==n.t1&&void 0!==n.t1&&n.t1.isNetError||G("fetchHotelPolicyInfo",n.t1),n.abrupt("return",null);case 25:case"end":return n.stop()}}),n,null,[[9,21]])})));return function(){return n.apply(this,arguments)}}(),de=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,d,h,v,g,f,x,m,S,T,I,k,w,P,N,D,y,j,E,M,A,b,Z,B,F,V,H,U,O,Y,q=arguments;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=q.length>0&&void 0!==q[0]?q[0]:{},o=t.isAsync,r=void 0!==o&&o,i=t.fallback,s=void 0===i?"show":i,d=t.isUserChangeResource,h=void 0===d||d,n.next=3,ye.cancelPriceDetailFetch();case 3:return v=Re.getResource(),g=v.ShoppingId,f=v.ShoppingResource,x=c.getState(),m=x.useCouponState,S=x.clientInfo,T=u.UPDATE_PRICESHOW_STATUS,I=u.SET_SHOPPING_PRICE_DETAIL,k="PriceDetailInfo",w=_.$V.fetchPriceDetail,P=e.attachShardParams&&e.attachShardParams(),N=Number(P.Version),D={params:(0,l.Z)((0,l.Z)({useBestPromo:2!=m,ShoppingId:g,allianceId:(null===S||void 0===S?void 0:S.allianceid)||0,siteId:(null===S||void 0===S?void 0:S.sid)||0,clientId:(null===S||void 0===S?void 0:S.clientId)||"",PageId:"100061000710003",PageType:"DetailInfo"},P),{},{Version:N})},L&&(D.params.testCaseId="40298378"),n.prev=12,j=e.createGqlRequest(w,D,k),E=j.fetch(),n.next=17,ye.addPriceDetailFetch(j);case 17:return n.next=19,E;case 19:if(M=n.sent,A=M.data,b=M.extensions,p.priceDetailRequests=[],Z=null===A||void 0===A?void 0:A.shoppingDetail,B=Z.priceDetail,B&&B.ResponseStatus&&"Success"==B.ResponseStatus.Ack){n.next=27;break}throw _e(null===B||void 0===B?void 0:B.ResponseStatus,"vac_20039","\u73ed\u671f\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u9009\u73ed\u671f",!0,"priceDetail\u8fd4\u56de\u7ed3\u679c"),new Error("GetShoppingDetailPrice Failed");case 27:return I({priceDetail:B,fallback:s}),F=(null===B||void 0===B?void 0:B.totalPrice)||{},V=(null===F||void 0===F?void 0:F.totalPrice)||0,H=(null===f||void 0===f?void 0:f.priceDetail)||{},U=(null===H||void 0===H?void 0:H.totalPrice)||{},O=(null===U||void 0===U?void 0:U.totalPrice)||0,Y={attrs:[{key:"ShoppingId",value:g}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:h?"\u66f4\u65b0\u4ef7\u683c":"\u83b7\u53d6\u4ef7\u683c",role:C.GD.sys,action:h?C.Us.change:C.Us.show,value:String(Math.round(100*V)/100),rootMessageId:Re.getRootMessageId((null===b||void 0===b||null===(y=b.SoaResponseStatus)||void 0===y||null===(y=y.ResponseStatus)||void 0===y?void 0:y.Extension)||[])},h&&(Y=(0,l.Z)((0,l.Z)({},Y),{},{before:String(Math.round(100*O)/100)})),R(Y),n.abrupt("return",!0);case 39:return n.prev=39,n.t0=n["catch"](12),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchPriceDetail",n.t0),T("show"),r&&Re.showNetWorkErrorPage(),n.abrupt("return",!1);case 45:case"end":return n.stop()}}),n,null,[[12,39]])})));return function(){return n.apply(this,arguments)}}(),pe=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,c,d,p,h,v,g,f,x,m,S,T,I,k,w,P,N,D,y;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.SelectedResources,r=t.resourceEnum,i=t.isHotelPart,s=void 0!==i&&i,l=t.FetchPrice,c=void 0!==l&&l,d=t.isErrorNeedShowErrorPage,p=void 0!==d&&d,h=t.isShowErrorToast,v=void 0!==h&&h,g=Re.getResource(),f=g.ShoppingId,x=u.UPDATE_PRICESHOW_STATUS,m=r&_.Ff.HOTEL,S=r&_.Ff.FLIGHT,x("loading"),Re.cleanErrorMessages(),n.prev=7,T={ShoppingId:f,SelectedResources:o,DeletedTokens:[],Tags:[{Key:"resourceType",Value:r}]},S&&(T.Tags.push({Key:"UserUpdateType",Value:"userchoose"}),T.Tags.push({Key:"PageType",Value:"RecommendPartUpdate"})),I={extension:[]},s&&I.extension.push({name:"autoupdate",value:"true"}),k=(new Date).getTime(),w=e.createRequest("/20168/UpdateShoppingDetail",T,I),n.next=16,w.fetch();case 16:if(P=n.sent,N=(new Date).getTime(),D=(null===P||void 0===P?void 0:P.ResourceStatuses)||[],y=(null===P||void 0===P?void 0:P.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:f}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u66f4\u65b0\u8d2d\u7269\u8f66(".concat(s?"\u9152\u5e97\u5206\u6279":m?"\u9152\u5e97\u623f\u95f4\u6570":"\u673a\u7968\u5206\u6279",")"),role:C.GD.sys,action:C.Us.show,value:"".concat(N-k,"ms"),rootMessageId:Re.getRootMessageId(y.Extension||[])}),"Success"!==(null===y||void 0===y?void 0:y.Ack)||0!=(null===D||void 0===D?void 0:D.length)){n.next=29;break}if(!c){n.next=26;break}return n.next=25,de();case 25:return n.abrupt("return",n.sent);case 26:return n.abrupt("return",!0);case 29:return x("show"),n.abrupt("return",!1);case 31:n.next=40;break;case 33:return n.prev=33,n.t0=n["catch"](7),x("show"),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchUpdateShoppingCartWithHotelOrFlight",n.t0),p&&Re.showNetWorkErrorPage(),Re.dealWithErrorCatchNetWork({isShowToast:v}),n.abrupt("return",!1);case 40:case"end":return n.stop()}}),n,null,[[7,33]])})));return function(e){return n.apply(this,arguments)}}(),he=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,d,p,h,v,g,f,x,m,S,T,I,w;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.SelectedResource,r=t.DeletedToken,i=t.FetchPrice,s=void 0===i||i,l=t.scene,d=void 0===l?"\u66f4\u65b0\u8d44\u6e90\u5230\u8d2d\u7269\u8f66":l,p=c.getState(),h=p.ShoppingId,v=u.UPDATE_PRICESHOW_STATUS,v("loading"),g=!1,Re.cleanErrorMessages(),n.prev=6,f={ShoppingId:h,SelectedResources:(0,k.xb)(o)?[]:[o],DeletedTokens:r?[r]:[]},x=(new Date).getTime(),m=e.createRequest("/20168/UpdateShoppingDetail",f),n.next=12,m.fetch();case 12:if(S=n.sent,T=(new Date).getTime(),I=(null===S||void 0===S?void 0:S.ResourceStatuses)||[],w=(null===S||void 0===S?void 0:S.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:h}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:d,role:C.GD.sys,action:C.Us.show,value:"".concat(T-x,"ms"),rootMessageId:Re.getRootMessageId(w.Extension||[])}),"Success"!==(null===w||void 0===w?void 0:w.Ack)||0!=(null===I||void 0===I?void 0:I.length)){n.next=23;break}return g=!0,n.next=21,oe();case 21:n.next=25;break;case 23:_e(w,"","\u8d44\u6e90\u5f53\u524d\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",!0,"\u8d44\u6e90\u66f4\u65b0\u5931\u8d25"),g=!1;case 25:n.next=31;break;case 27:n.prev=27,n.t0=n["catch"](6),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchUpdateShoppingCart",n.t0),g=!1;case 31:if(!g||!s){n.next=35;break}return n.next=34,de();case 34:return n.abrupt("return",n.sent);case 35:return v("show"),n.abrupt("return",g);case 37:case"end":return n.stop()}}),n,null,[[6,27]])})));return function(e){return n.apply(this,arguments)}}(),ve=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,c,d,p,h,v,g,f,x,m,S;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=Re.getResource(),o=t.ShoppingId,r=t.ShoppingResource,i=r.Flight,!(0,k.xb)(i)&&!(0,k.xb)(i.Tokens)){n.next=4;break}return n.abrupt("return",!0);case 4:return s=i.Tokens,l=void 0===s?[]:s,c=[],l.forEach((function(e,n){var t=e.SegmentNo,o=e.Token;c.push({SegmentNo:t,Token:o})})),n.prev=7,d={ShoppingId:o,SelectedResources:c,Tags:[{Key:"PageType",Value:"FillUserInfo"}]},p=(new Date).getTime(),h=e.createRequest("/20168/UpdateShoppingDetail",d),n.next=13,h.fetch();case 13:if(v=n.sent,g=(new Date).getTime(),f=(null===v||void 0===v?void 0:v.ResourceStatuses)||[],x=(null===v||void 0===v?void 0:v.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:o}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u68c0\u67e5\u673a\u7968\u8d44\u6e90",role:C.GD.sys,action:C.Us.show,value:"".concat(g-p,"ms"),rootMessageId:Re.getRootMessageId(x.Extension||[])}),"Success"!==(null===x||void 0===x?void 0:x.Ack)||0!=(null===f||void 0===f?void 0:f.length)){n.next=22;break}return n.abrupt("return",!0);case 22:return _e(x,"","\u8d44\u6e90\u5f53\u524d\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",!0,"\u8d44\u6e90\u66f4\u65b0\u5931\u8d25"),m=u.UPDATE_SHOPPING_STATE,S=f.map((function(e){return e.Token})),m({ShoppingId:o,ShoppingData:{ErrorTokenList:S,TypeList:[]}}),De.handleErrorToken(),n.abrupt("return",!1);case 28:n.next=34;break;case 30:return n.prev=30,n.t0=n["catch"](7),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchUpdateShoppingCart",n.t0),n.abrupt("return",!0);case 34:case"end":return n.stop()}}),n,null,[[7,30]])})));return function(){return n.apply(this,arguments)}}(),ge=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,u,d,p,h;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=c.getState(),o=t.BasicInfo,r=t.ShoppingId,11==(null===o||void 0===o?void 0:o.ProductCategoryId)){n.next=3;break}return n.abrupt("return",{mergeVisaPolicyInfoData:[]});case 3:return n.prev=3,i={PolicyTypes:[1,2],CountryAreaId:null===o||void 0===o?void 0:o.DestinationCountryId,CountryAreaType:1},n.next=7,e.post("/13250/CountryAreaPolicyInfo",i);case 7:if(s=n.sent,l=(null===s||void 0===s?void 0:s.VisaPolicyInfoData)||[],u=(null===s||void 0===s?void 0:s.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u6b21\u5c4f /13250/CountryAreaPolicyInfo",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===u||void 0===u?void 0:u.Extension)||[])}),"Success"!=(null===u||void 0===u?void 0:u.Ack)||(0,k.xb)(l)){n.next=18;break}return d=(null===l||void 0===l?void 0:l.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.CityInfoDTOs)||void 0===n||null===(n=n.filter((function(e){return e.CityId==(null===o||void 0===o?void 0:o.DestCityId)})))||void 0===n?void 0:n.length)>0})))||[],p=(null===l||void 0===l?void 0:l.filter((function(e){return!e.CityInfoDTOs})))||[],h=[].concat((0,I.Z)(d),(0,I.Z)(p)),n.abrupt("return",{mergeVisaPolicyInfoData:h});case 18:return n.abrupt("return",{mergeVisaPolicyInfoData:[]});case 19:n.next=25;break;case 21:return n.prev=21,n.t0=n["catch"](3),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchVisaCountryAreaPolicy",n.t0),n.abrupt("return",null);case 25:case"end":return n.stop()}}),n,null,[[3,21]])})));return function(){return n.apply(this,arguments)}}(),fe=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,u,d,p,h,v,g;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=c.getState(),o=t.BasicInfo,r=Re.getResource(),i=r.ShoppingResource,s=r.ShoppingId,l=null===i||void 0===i?void 0:i.curDate,u=null===i||void 0===i?void 0:i.curLine,l){n.next=6;break}return n.abrupt("return",null);case 6:return n.prev=6,d={ProductId:u||(null===o||void 0===o?void 0:o.ProductId),DepartureDate:l,DepartureEndDate:l},n.next=10,e.post("/17322/comfirmTourStatus",d);case 10:if(p=n.sent,h=(null===p||void 0===p?void 0:p.comfirmTourStatusDTO)||[],v=(null===p||void 0===p?void 0:p.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:s}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u6b21\u5c4f /17322/comfirmTourStatus",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===v||void 0===v?void 0:v.Extension)||[])}),"Success"!=(null===v||void 0===v?void 0:v.Ack)){n.next=22;break}if(!(0,k.xb)(h)){n.next=17;break}return n.abrupt("return",{tourStatus:0});case 17:return g=h[0].tourStatus,o.IsOverSea||(g=0),n.abrupt("return",{tourStatus:g});case 22:return n.abrupt("return",null);case 23:n.next=29;break;case 25:return n.prev=25,n.t0=n["catch"](6),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchTourStatus",n.t0),n.abrupt("return",null);case 29:case"end":return n.stop()}}),n,null,[[6,25]])})));return function(){return n.apply(this,arguments)}}(),xe=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s,l,c,u,d,p,h,v;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Re.getResource(),t=n.ShoppingResource,o=(null===t||void 0===t?void 0:t.required)||[],r=(null===o||void 0===o?void 0:o.filter((function(e){return 5==e.categorySeqId})))||[],i=(null===t||void 0===t?void 0:t.optional)||[],s=(null===i||void 0===i?void 0:i.filter((function(e){return 5==e.categorySeqId})))||[],l=[],e.prev=6,c=(0,k.xb)(r)?[]:(0,k.fP)(r),u=(0,k.xb)(s)?[]:(0,k.fP)(s),l.push.apply(l,(0,I.Z)(c).concat((0,I.Z)(u))),d=[],l.map((function(e){var n,t=e.POIId,o=e.ScenicSpotId,r=(null===(n=d.filter((function(e){return(null===e||void 0===e?void 0:e.POIId)==t&&e.ScenicSpotId==o})))||void 0===n?void 0:n[0])||{};(0,k.xb)(r)&&d.push(e)})),p=[],d.forEach((function(e){!(0,k.xb)(null===e||void 0===e?void 0:e.POIId)&&p.push(e.POIId)})),!(0,k.xb)(p)){e.next=16;break}return e.abrupt("return",null);case 16:return e.next=18,me(p);case 18:return h=e.sent,v={},null===h||void 0===h||h.forEach((function(e){v[e.ScenicId]=e})),e.abrupt("return",{TicketPoiUrlDic:v});case 24:return e.prev=24,e.t0=e["catch"](6),null!==e.t0&&void 0!==e.t0&&e.t0.isNetError||G("fetchAllTicketPoiPromise",e.t0),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,u,d;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=c.getState(),r=o.ShoppingId,r){n.next=3;break}return n.abrupt("return",null);case 3:return n.prev=3,i={ImageSize:"C_300_168",ScenicIdList:t},n.next=7,e.post("/12447/ScenicTrip",i);case 7:if(s=n.sent,l=(null===s||void 0===s?void 0:s.Data)||[],u=(null===s||void 0===s?void 0:s.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u6b21\u5c4f /12447/ScenicTrip",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===u||void 0===u?void 0:u.Extension)||[])}),"Success"!=(null===u||void 0===u?void 0:u.Ack)){n.next=16;break}return d=(null===l||void 0===l?void 0:l.ScenicInfoList)||[],n.abrupt("return",d);case 16:return n.abrupt("return",null);case 17:n.next=23;break;case 19:return n.prev=19,n.t0=n["catch"](3),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchPoi",n.t0),n.abrupt("return",null);case 23:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(e){return n.apply(this,arguments)}}(),Se=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,c,u,d,p,h;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=Re.getResource(),o=t.ShoppingId,r=t.ShoppingResource,o){n.next=3;break}return n.abrupt("return",null);case 3:if(i=(null===r||void 0===r?void 0:r.Option)||{},s=(null===i||void 0===i?void 0:i.Options)||{},n.prev=5,l={Type:1,Tokens:[]},c=[],null===s||void 0===s||s.map((function(e){var n,t=(null===e||void 0===e||null===(n=e.Basic)||void 0===n||null===(n=n.Flags)||void 0===n?void 0:n.find((function(e){return"HasAddInfo"===e})))||{};(0,k.xb)(t)||c.push(null===e||void 0===e?void 0:e.Token)})),0!=(null===c||void 0===c?void 0:c.length)){n.next=11;break}return n.abrupt("return",null);case 11:return l.Tokens=c,u={TokenInfo:l,NeedOptionShopping:!0,NeedOptionDesc:!0,ShoppingId:o},n.next=15,e.post("/20168/GetOptionDetail",u);case 15:if(d=n.sent,p=(null===d||void 0===d?void 0:d.OptionDetails)||[],h=(null===d||void 0===d?void 0:d.ResponseStatus)||{},R({attrs:[{key:"shoppingid",value:o}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u6b21\u5c4f /20168/GetOptionDetail",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===h||void 0===h?void 0:h.Extension)||[])}),"Success"!=(null===h||void 0===h?void 0:h.Ack)){n.next=23;break}return n.abrupt("return",{OptionDetails:p});case 23:return n.abrupt("return",null);case 24:n.next=30;break;case 26:return n.prev=26,n.t0=n["catch"](5),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchOptionDetailInfoPromise",n.t0),n.abrupt("return",null);case 30:case"end":return n.stop()}}),n,null,[[5,26]])})));return function(){return n.apply(this,arguments)}}(),Te=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,c,d,h,v,g,f,x,m,S,T,I,w,P,N,D=arguments;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=D.length>0&&void 0!==D[0]?D[0]:"",o=Re.getResource(),r=o.ShoppingId,i=o.ShoppingResource,s=(null===i||void 0===i?void 0:i.Flight)||{},s&&!(0,k.xb)(s.Segments)&&null!==s&&void 0!==s&&s.NeedResearch){n.next=5;break}return n.abrupt("return",null);case 5:return l=u.UPDATE_FLIGHT_SEARCH_STATUS,c=u.UPDATE_PENDING_PARTITIONED_FLIGHT,d={ShoppingId:r,WaitToken:t},h={throwAbortError:!0},v=e.createRequest("/20168/RecommendFlight",d,h),g=v.fetch(),n.next=12,ye.addShoppingFetch(v);case 12:return n.next=14,ye.addFlightBatchesFetch(v);case 14:return n.prev=14,l("loading"),n.next=18,g;case 18:if(f=n.sent,x=f.Flight,m=f.WaitToken,S=f.WaitMilliseconds,T=f.ResponseStatus,p.batchesFlightRequests=[],R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u5206\u6279\u67e5\u8be2 /20168/RecommendFlight",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===T||void 0===T?void 0:T.Extension)||[])}),!(S<0)){n.next=30;break}return l("notchanged"),n.abrupt("return",null);case 30:if(0!==S){n.next=47;break}if(I=(null===x||void 0===x?void 0:x.Tokens)||[],w=(null===s||void 0===s?void 0:s.Tokens)||[],P=!1,I.map((function(e){var n,t=null===w||void 0===w||null===(n=w.filter((function(n){return(null===n||void 0===n?void 0:n.SegmentNo)===(null===e||void 0===e?void 0:e.SegmentNo)})))||void 0===n?void 0:n[0];(null===t||void 0===t?void 0:t.CompareToken)!==(null===e||void 0===e?void 0:e.CompareToken)&&(P=!0)})),!P){n.next=44;break}if(N=void 0,!x){n.next=41;break}return n.next=40,ce(x);case 40:N=n.sent;case 41:c({RecommendFlight:x,CabinInfo:N}),n.next=45;break;case 44:l("notchanged");case 45:n.next=48;break;case 47:setTimeout((function(){Te(m)}),S);case 48:n.next=54;break;case 50:n.prev=50,n.t0=n["catch"](14),l("notchanged"),!n.t0||null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||"AbortError"===(null===n.t0||void 0===n.t0?void 0:n.t0.name)||G("fetchFlightRecommendSearch",n.t0);case 54:case"end":return n.stop()}}),n,null,[[14,50]])})));return function(){return n.apply(this,arguments)}}(),Ie=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,l,c,h,v,g,f,x,m;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=Re.getResource(),r=o.ShoppingId,i=o.ShoppingResource,l=o.Platform,c=u.UPDATE_HOTEL_SEARCH_STATUS,h=(null===i||void 0===i||null===(t=i.Hotel)||void 0===t?void 0:t.Hotels)||[],!(0,k.xb)(h)){n.next=5;break}return n.abrupt("return",_.Bm.NOCHANGE);case 5:if(v=!0,l!=_.NN.CTRIPH5){n.next=9;break}return n.next=9,e.initHotelAntibotTokenJS(r);case 9:if(g=h.filter((function(e){var n;return null===e||void 0===e||null===(n=e.Rooms)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.BasicInfo)||void 0===n?void 0:n.NeedPartitionedSearchResults})),!(0,k.xb)(g)){n.next=12;break}return n.abrupt("return",_.Bm.NOCHANGE);case 12:return f=g.map(function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,i,s,c,u,p,h,g,f,x,m,S,T,I,w,P,N,D;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=t.Rooms,u=void 0===c?[]:c,p=t.BasicInfo,h=void 0===p?{}:p,!v){n.next=10;break}if(g=(0,k.Bb)({Rooms:u,BasicInfo:h,ShoppingId:r}),l!==_.NN.CTRIPH5){n.next=7;break}return g.Callback="hotelAntibotScriptCallback",n.next=7,e.getHotelAntibotToken(g);case 7:if(l!==_.NN.WEIXIN){n.next=10;break}return n.next=10,e.getHotelAntibotToken(g);case 10:return f=0,x=(null===t||void 0===t||null===(o=t.Rooms)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.BasicInfo)||void 0===o?void 0:o.FlagTags)||[],m=(null===(i=x.filter((function(e){return"recommendtype"==e.Key})))||void 0===i?void 0:i[0])||{},S=(null===m||void 0===m?void 0:m["Value"])||"","1"!=S&&"2"!=S||(f=1),T={ShoppingId:r,HotelToken:t.BasicInfo.Token,SegmentNumber:t.SegmentNo,HotelTokenTBChanged:t.BasicInfo.Token,RoomTokenTBChanged:null===(s=t.Rooms[0])||void 0===s?void 0:s.BasicInfo.Token,ActionType:2,PartitionedSearchMode:f,CheckInDate:M.Z.format(t.Rooms[0].PaymentInfo.CheckinDate,"YYYY-MM-DD"),CheckOutDate:M.Z.format(t.Rooms[0].PaymentInfo.CheckoutDate,"YYYY-MM-DD"),IsPartitionedSearch:!0},v&&(l===_.NN.CTRIPH5&&(T.Header=[{Key:"ValidateToken",Value:null===(I=d.HotelAntibotToken)||void 0===I?void 0:I.token},{Key:"fingerprintkeys",Value:null===(w=d.HotelAntibotToken)||void 0===w?void 0:w.hoteluuidkeys}]),l===_.NN.WEIXIN&&(T.Header=[{Key:"ValidateToken",Value:d.HotelAntibotToken}])),P={throwAbortError:!0},N=e.createRequest("/20168/SearchRooms",T,P),D=N.fetch(),n.next=22,ye.addShoppingFetch(N);case 22:return n.next=24,ye.addHotelBatchesFetch(N);case 24:return n.abrupt("return",D);case 25:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.prev=13,c("loading"),n.next=17,Promise.all(f);case 17:return x=n.sent,p.batchesHotelRequests=[],null===x||void 0===x||x.map((function(e){var n=e.ResponseStatus;R({attrs:[{key:"shoppingid",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u5206\u6279\u67e5\u8be2 SearchRooms",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===n||void 0===n?void 0:n.Extension)||[])})})),m=De.handleChangePartitionedHotel(h,x),n.abrupt("return",m);case 24:return n.prev=24,n.t0=n["catch"](13),Re.initHotelPartitionStates(),!n.t0||null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||"AbortError"===(null===n.t0||void 0===n.t0?void 0:n.t0.name)||G("fetchRoomListSearch",n.t0),n.abrupt("return",_.Bm.FAIL);case 29:case"end":return n.stop()}}),n,null,[[13,24]])})));return function(){return n.apply(this,arguments)}}(),ke=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l,d,p,h,v,g,f;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=c.getState(),r=o.ShoppingId,i=o.params,s=i.orderid,l=i.temporderid,d=u.SET_BOOKING_BUTTON_GREY,p=e.attachShardParams&&e.attachShardParams(),h={platform:(null===p||void 0===p?void 0:p.PlatformId)||0,channel:(null===p||void 0===p?void 0:p.ChannelCode)||0,isAsync:!0,isCallBack:!1,orderType:0,shoppingid:r,commonType:{version:null===p||void 0===p?void 0:p.Version,channelId:(null===p||void 0===p||null===(t=p.PlatformChannelInfo)||void 0===t?void 0:t.ChannelId)||117}},s&&(h.commonType.orderId=+s),l&&(h.commonType.tempOrderId=+l),n.prev=6,g=e.createRequest("/13826/CanBooking",h),n.next=10,g.fetch();case 10:return f=n.sent,R({attrs:[{key:"ShoppingId",value:r}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"/13826/CanBooking",role:C.GD.sys,action:C.Us.show,value:"-",rootMessageId:Re.getRootMessageId((null===f||void 0===f||null===(v=f.extensions)||void 0===v||null===(v=v.SoaResponseStatus)||void 0===v||null===(v=v.ResponseStatus)||void 0===v?void 0:v.Extension)||[])}),n.abrupt("return",f);case 15:return n.prev=15,n.t0=n["catch"](6),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchCanBooking",n.t0),d(!0),Re.dealWithErrorCatchNetWork(),n.abrupt("return",!1);case 21:case"end":return n.stop()}}),n,null,[[6,15]])})));return function(){return n.apply(this,arguments)}}(),we=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,c,d,p,h,g,f,x,m,S,T,I;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=Re.getResource(),r=o.ShoppingId,i=o.ShoppingResource,r&&t){n.next=3;break}return n.abrupt("return",!1);case 3:if(s=null===i||void 0===i?void 0:i.bffResIntroductionUseCar,(0,k.xb)(null===s||void 0===s?void 0:s[t])){n.next=6;break}return n.abrupt("return",!0);case 6:return c=u.UPDATE_SHOPPING_STATE,d=e.attachShardParams(),p=String(d.Version),h={params:{token:t,ShoppingId:r,Platform:"h5",Channel:"4",Version:p}},g={isDiy:!0},f=[],g.extension=f,n.prev=13,m="UseCarResources",S=_.$V.fetchUseCarResources,n.next=18,e.createGqlRequest(S,h,m,g).fetch();case 18:T=n.sent,I=(null===T||void 0===T?void 0:T.data)||{},c({ShoppingId:r,ShoppingData:{bffResIntroductionUseCar:(0,l.Z)((0,l.Z)({},s),{},(0,v.Z)({},t,I))}}),R({attrs:[{key:"ShoppingId",value:r}],module:"x\u8d44\u6e90",scene:"\u70b9\u51fb\u7528\u8f66\u7ec4\u8d44\u6e90title",role:C.GD.sys,action:C.Us.change,value:"-",rootMessageId:Re.getRootMessageId((null===T||void 0===T||null===(x=T.extensions)||void 0===x||null===(x=x.SoaResponseStatus)||void 0===x||null===(x=x.ResponseStatus)||void 0===x?void 0:x.Extension)||[])}),n.next=27;break;case 24:n.prev=24,n.t0=n["catch"](13),null!==n.t0&&void 0!==n.t0&&n.t0.isNetError||G("fetchUseCarResources",n.t0);case 27:case"end":return n.stop()}}),n,null,[[13,24]])})));return function(e){return n.apply(this,arguments)}}(),Pe=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,u,d,p,h,v;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.tourId,r=t.useDate,i=t.pageId,s=c.getState(),l=s.BasicInfo,l.isCruise||L){n.next=4;break}return n.abrupt("return");case 4:return u=Re.getResource(),d=u.ShoppingId,p={tourId:o,useDate:r,cruHead:{channel:e.H5Util.isBestone()?"BST":"H5",channel3:e.H5Util.getServiceChannelId()||116,localeLang:"zh-CN",pageId:i,currency:"CNY",clientInfo:{salesPlatform:"H5"}}},n.prev=6,n.next=9,e.post("ProductDetailTourDetail",p);case 9:return v=n.sent,R({attrs:[{key:"shoppingid",value:d}],module:"\u63a5\u53e3\u8bf7\u6c42",scene:"\u70b9\u51fb\u5cb8\u4e0a\u6e38\u8d44\u6e90title /19658/ProductDetailTourDetail",role:C.GD.sys,action:C.Us.show,value:o,rootMessageId:null===v||void 0===v||null===(h=v.responseStatus)||void 0===h||null===(h=h.extension.find((function(e){return"RootMessageId"===e.id})))||void 0===h?void 0:h.value}),n.abrupt("return",v);case 14:n.prev=14,n.t0=n["catch"](6),e.logPageError("fetchProductDetailTourDetail",n.t0),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[6,14]])})));return function(e){return n.apply(this,arguments)}}(),Ne={getResourceFirstScreenFromStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=c.getState(),o=t.ShoppingId,n.prev=1,n.next=4,e.get("RESOURCE_FIRST_SCREEN_INFO");case 4:if(n.t0=n.sent,n.t0){n.next=7;break}n.t0={};case 7:if(r=n.t0,Ne.clearResourceFirstScreenFromStorage(),i=r[o],s=i.extraResource,l=i.CabinInfo,(0,k.xb)(s)){n.next=14;break}return n.abrupt("return",{extraResource:s,CabinInfo:l});case 14:return n.abrupt("return",{});case 15:n.next=20;break;case 17:return n.prev=17,n.t1=n["catch"](1),n.abrupt("return",{});case 20:case"end":return n.stop()}}),n,null,[[1,17]])})));function t(){return n.apply(this,arguments)}return t}(),clearResourceFirstScreenFromStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return null===e||void 0===e||e.set("RESOURCE_FIRST_SCREEN_INFO",{},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),getResourceSelectedListFromStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ne.getResourceNeedSelectedDateStorage();case 3:if(n.t0=n.sent,n.t0){n.next=6;break}n.t0=[];case 6:return o=n.t0,r=t,r||(r=c.getState().ShoppingId),i=(null===o||void 0===o?void 0:o.ShoppingId)==r?null===o||void 0===o?void 0:o.ShoppingSelectedTokenList:[],e.logDevTrace("\u62ff\u7f13\u5b58resource_ShoppingSelectedTokenList",{ShoppingSelectedTokenList:i}),n.abrupt("return",i);case 14:return n.prev=14,n.t1=n["catch"](0),G("loadPage",n.t1),n.abrupt("return",[]);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));function t(e){return n.apply(this,arguments)}return t}(),getResourceNeedSelectedDateStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("RESOURCE_NEED_SELECTED_DATE");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return t=n.t0,n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),setResourceNeedSelectedDateStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=c.getState(),o=t.ShoppingId,r=t.ShoppingSelectedTokenList,null===e||void 0===e||e.set("RESOURCE_NEED_SELECTED_DATE",{ShoppingId:o,ShoppingSelectedTokenList:r},86400),e.logDevTrace("\u5199\u7f13\u5b58resource_ShoppingSelectedTokenList",{ShoppingSelectedTokenList:r}),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 4:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),clearResourceNeedSelectedDateStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=u.UPDATE_STATE,null===e||void 0===e||e.set("RESOURCE_NEED_SELECTED_DATE",{},86400),t({ShoppingSelectedTokenList:[]}),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 4:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),getNeedTurnBackSelectTokensFromStorage:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.getNeedTurnBackSelectTokensStorage();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return t=e.t0,o=n,o||(o=c.getState().ShoppingId),r=(null===t||void 0===t?void 0:t.ShoppingId)==o?null===t||void 0===t?void 0:t.NeedTurnBackSelectTokens:[],e.abrupt("return",r);case 13:return e.prev=13,e.t1=e["catch"](0),G("loadPage",e.t1),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));function n(n){return e.apply(this,arguments)}return n}(),getNeedTurnBackSelectTokensStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("RESOURCE_NEED_TURN_BACK_SELECTED_DATE_TOKEN");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return t=n.t0,n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),setNeedTurnBackSelectTokensStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=c.getState(),r=o.ShoppingId,null===e||void 0===e||e.set("RESOURCE_NEED_TURN_BACK_SELECTED_DATE_TOKEN",{ShoppingId:r,NeedTurnBackSelectTokens:t},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 3:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),clearNeedTurnBackSelectTokensStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return null===e||void 0===e||e.set("RESOURCE_NEED_TURN_BACK_SELECTED_DATE_TOKEN",{},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),getOrderExtendInfoListFromStorage:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=c.getState().ShoppingId,e.next=4,Ne.getOrderExtendInfoListStorage();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return t=e.t0,o=(null===t||void 0===t?void 0:t.ShoppingId)==n?null===t||void 0===t?void 0:t.OrderExtendInfoList:[],e.abrupt("return",o);case 12:return e.prev=12,e.t1=e["catch"](0),G("getOrderExtendInfosListFromStorage",e.t1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));function n(){return e.apply(this,arguments)}return n}(),getOrderExtendInfoListStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("ORDER_EXTENDINFO_LIST");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return t=n.t0,n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),setOrderExtendInfoListStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=c.getState(),o=t.ShoppingId,r=t.OrderExtendInfoList,null===e||void 0===e||e.set("ORDER_EXTENDINFO_LIST",{ShoppingId:o,OrderExtendInfoList:r},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 3:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),setOrderExtendInfoListStorageByToken:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t,o){var r,i,s,l,d,p,h,v;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=c.getState(),s=i.ShoppingId,l=i.OrderExtendInfoList,d=u.UPDATE_ORDER_EXTENDINFO_LIST,p=(null===l||void 0===l||null===(r=l.filter((function(e){return e.Token==t})))||void 0===r?void 0:r.length)>0,h=[],p?h=null===l||void 0===l?void 0:l.map((function(e){return e.Token==t?{Token:t,OrderExtendInfos:o}:e})):(v={Token:t,OrderExtendInfos:o},h=[].concat((0,I.Z)(l),[v])),null===e||void 0===e||e.set("ORDER_EXTENDINFO_LIST",{ShoppingId:s,OrderExtendInfoList:h},86400),d(h),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 8:case"end":return n.stop()}}),n)})));function t(e,t){return n.apply(this,arguments)}return t}(),getResourceTypeInfoFromStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={},n.prev=1,n.next=4,e.get("RESOURCE_TYPE_INFO");case 4:if(n.t0=n.sent,n.t0){n.next=7;break}n.t0={};case 7:return o=n.t0,Ne.clearResourceTypeStorage(),o=(null===(r=o)||void 0===r?void 0:r[t])||{},n.abrupt("return",o);case 13:return n.prev=13,n.t1=n["catch"](1),G("getResourceTypeInfoFromStorage",n.t1),n.abrupt("return",null);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));function t(e){return n.apply(this,arguments)}return t}(),clearResourceTypeStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.set("RESOURCE_TYPE_INFO",{},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),getOrderPageStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("storage_from_order");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return t=n.t0,Ne.clearOrderPageStorage(),n.abrupt("return",t);case 8:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),clearOrderPageStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.set("storage_from_order",{},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),setFlightLowerPriceStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.set("flight_lower_price",{isShowLowerPrice:!1,shoppingId:t},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),getIsShowFlightLowerPrice:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("flight_lower_price");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:if(o=n.t0,(null===o||void 0===o?void 0:o.shoppingId)!==t){n.next=8;break}return n.abrupt("return",o.isShowLowerPrice);case 8:return n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),setFlightBaggageStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.set("flight_baggage",{isShowBaggage:!1,shoppingId:t},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 2:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),getIsShowFlightBaggage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("flight_baggage");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:if(o=n.t0,(null===o||void 0===o?void 0:o.shoppingId)!==t){n.next=8;break}return n.abrupt("return",o.isShowBaggage);case 8:return n.abrupt("return",!0);case 9:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),getSelectedDateStatusStorage:function(){var n=e.get("selected_date_status")||{};return n},mergeSelectedDateStatusStorageByToken:function(e,n,t){var o=(null===e||void 0===e?void 0:e.find((function(e){return e.Token==n})))||{},r=(null===o||void 0===o?void 0:o.DefaultDate)||t;return r},setGroupLowerPriceStorage:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t,o){var r,i,s,l,c;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("group_lowerPrice");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return i=n.t0,s=[],(null===i||void 0===i?void 0:i.ShoppingId)==t&&(s=null===i||void 0===i?void 0:i.Groups),l=null===(r=s)||void 0===r||null===(r=r.filter((function(e){return(null===e||void 0===e?void 0:e.GroupId)==o})))||void 0===r?void 0:r[0],(0,k.xb)(l)&&(c={GroupId:o,isLowerPriceHidden:!0},s.push(c)),e.set("group_lowerPrice",{ShoppingId:t,Groups:s},86400),n.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),50)})));case 12:case"end":return n.stop()}}),n)})));function t(e,t){return n.apply(this,arguments)}return t}(),getIsGroupLowerPriceStorageHidden:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t,o){var r,i,s;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("group_lowerPrice");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:if(r=n.t0,(null===r||void 0===r?void 0:r.ShoppingId)!=t){n.next=9;break}return s=null===r||void 0===r||null===(i=r.Groups)||void 0===i||null===(i=i.filter((function(e){return(null===e||void 0===e?void 0:e.GroupId)==o})))||void 0===i?void 0:i[0],n.abrupt("return",null===s||void 0===s?void 0:s.isLowerPriceHidden);case 9:return n.abrupt("return",!1);case 10:case"end":return n.stop()}}),n)})));function t(e,t){return n.apply(this,arguments)}return t}(),getShoppingCartBackParams:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.get("I_DIYTOUR_H5-SHOPPING-CART-PARAMS");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:return t=n.t0,n.next=8,e.set("I_DIYTOUR_H5-SHOPPING-CART-PARAMS",{},86400);case 8:return o=(null===t||void 0===t?void 0:t.callBackParams)||{},n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}()},De={handlePopLastPage:function(){e.pop&&e.pop()},pageDealWithDateError:function(){if("H5"!==(null===e||void 0===e?void 0:e.Platform)||null===e||void 0===e||!e.isSSR||null===e||void 0===e||!e.isServer){var n=c.getState(),t=n.Platform;setTimeout((function(){t===_.NN.WEIXIN?e.navigateBack&&e.navigateBack({delta:1}):e.pop&&e.pop()}),3e3)}},showSelectCalendarPop:function(){var e=c.getState(),n=e.PartitionStatus,t=e.ShoppingId,o=u.UPDATE_SHOPPING_STATE_FLAG,r=(null===n||void 0===n?void 0:n.HotelSearchUpdatingStatus)||"notchanged";"notchanged"===r?(De.handleCancelRoomListSearch(),De.handleHideResourceChangedTipMask(),o({flagData:{isShowSelectCalendar:!0}}),R({attrs:[{key:"ShoppingId",value:t}],module:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",scene:"\u4ef7\u683c\u65e5\u5386\u5f39\u5c42",role:C.GD.usr,action:C.Us.click,value:"\u4fee\u6539"})):console.log("\u9152\u5e97\u5206\u6279\u66f4\u65b0\u65f6\u4e0d\u80fd\u8df3\u8f6c")},hideSelectCalendarPop:function(){var e=u.UPDATE_SHOPPING_STATE_FLAG;e({flagData:{isShowSelectCalendar:!1}})},handleErrorToken:function(){var e=Re.getResource(),n=e.ShoppingId,t=e.ShoppingResource,o=(null===t||void 0===t?void 0:t.ErrorTokenList)||[];if((0,k.xb)(o))return!0;var r=u.UPDATE_SHOPPING_STATE;return r({ShoppingId:n,ShoppingData:{ErrorTokenList:(0,I.Z)(o),TypeList:[]}}),De.handleScrollErrorPosition(o),!1},handleScrollErrorPosition:function(n){var t=Re.getResource(),o=t.ShoppingId;if(e.scrollToErrorPosition){var r=e.scrollToErrorPosition(n);R({attrs:[{key:"ShoppingId",value:o}],scene:"\u951a\u70b9\u6eda\u52a8",role:C.GD.sys,action:C.Us.show,value:"\u6eda\u52a8\u5230\u4e0d\u53ef\u8ba2\u8d44\u6e90 ".concat(n[0])}),!r&&R({attrs:[{key:"shoppingId",value:o}],scene:"\u9875\u9762\u5f02\u5e38",role:C.GD.sys,action:C.Us.show,value:"\u6eda\u52a8\u5931\u8d25"})}},handleChangePartitionedFlight:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s,l,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.CHANGED_PARTITIONED_FLIGHT,t=u.UPDATE_FLIGHT_SEARCH_STATUS,o=Re.getResource(),r=o.ShoppingResource,i=o.ShoppingId,s=r.PendingPartitionedFlight,(0,k.xb)(s)){e.next=23;break}return Re.showLoadingDialog(!1),l=(0,k.oI)(s),e.next=8,pe({SelectedResources:l,resourceEnum:_.Ff.FLIGHT});case 8:if(c=e.sent,c){e.next=14;break}return Re.hideLoadingDialog(),Re.showToast("\u673a\u7968\u66ff\u6362\u5931\u8d25\uff0c\u8bf7\u624b\u52a8\u66ff\u6362"),t("notchanged"),e.abrupt("return");case 14:if(n({PendingPartitionedFlight:s}),t("notchanged"),R({attrs:[{key:"shoppingid",value:i}],module:"\u673a\u7968",scene:"\u5206\u6279\u66f4\u65b0(\u624b\u52a8)\u6210\u529f",role:C.GD.usr,action:C.Us.change,jsonData:l}),e.t0=!L,!e.t0){e.next=21;break}return e.next=21,ie({afterFlightPartition:!0});case 21:Re.hideLoadingDialog(),Re.showToast("\u5df2\u4e3a\u60a8\u66ff\u6362\u5e76\u66f4\u65b0\u603b\u4ef7");case 23:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),handleChangePartitionedHotel:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,t){var o,r,i,s,l,c,d,p,h,v;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Re.getResource(),r=o.ShoppingId,i=u.SET_PARTITIONED_HOTEL,s=u.UPDATE_HOTEL_SEARCH_UPDATING_STATUS,l=(0,k._e)(n,t),c=l.HotelSearchStatus,d=l.HotelChangedText,p=l.UpdatedHotels,"changed"!==c){e.next=32;break}if(Re.showLoadingDialog(!1),s("updating"),h=(0,k.UH)(p),!(0,k.xb)(h)){e.next=12;break}return Re.hideLoadingDialog(),Re.initHotelPartitionStates(),e.abrupt("return",_.Bm.NOCHANGE);case 12:return e.next=14,pe({SelectedResources:h,isHotelPart:!0,resourceEnum:_.Ff.HOTEL});case 14:if(v=e.sent,v){e.next=19;break}return Re.hideLoadingDialog(),Re.initHotelPartitionStates(),e.abrupt("return",_.Bm.FAIL);case 19:if(i({UpdatedHotels:p,HotelChangedText:d}),Re.initHotelPartitionStates(),R({attrs:[{key:"shoppingid",value:r}],module:"\u9152\u5e97",scene:"\u5206\u6279\u66f4\u65b0(\u81ea\u52a8)\u6210\u529f",role:C.GD.sys,value:"-",action:C.Us.change,jsonData:h}),m.push((new Date).getTime()),Be(x),e.t0=!L,!e.t0){e.next=28;break}return e.next=28,ie({afterHotelPartition:!0});case 28:return Re.hideLoadingDialog(),e.abrupt("return",_.Bm.SUCCESS);case 32:return Re.initHotelPartitionStates(),e.abrupt("return",_.Bm.FAIL);case 34:case"end":return e.stop()}}),e)})));function n(n,t){return e.apply(this,arguments)}return n}(),handleCancelFlightBatches:function(){var e=c.getState(),n=e.PartitionStatus,t=(null===n||void 0===n?void 0:n.FlightSearchStatus)||"",o=u.UPDATE_FLIGHT_SEARCH_STATUS;ye.cancelAllFlightBatchesFetch(),"loading"===t&&o("notchanged")},handleCancelRoomListSearch:function(){var e=c.getState(),n=e.PartitionStatus,t=(null===n||void 0===n?void 0:n.HotelSearchStatus)||"",o=u.UPDATE_HOTEL_SEARCH_STATUS;ye.cancelAllHotelBatchesFetch(),"loading"===t&&o("notchanged")},handleJumpPreflight:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=c.getState(),r=o.PartitionStatus,i=o.ShoppingId,a=o.RegisterPageName,s=o.Platform,l=o.isTradeMinPriceMode,u=(null===r||void 0===r?void 0:r.HotelSearchUpdatingStatus)||"notchanged";if("notchanged"===u){De.handleCancelRoomListSearch();var d={ShoppingId:i,RegisterPageName:a,Platform:s,isTradeMinPriceMode:l};e(d),n&&R({attrs:[{key:"ShoppingId",value:i}],scene:n,module:"\u8df3\u8f6c\u4e8c\u7ea7\u9875\u9762",role:C.GD.usr,action:C.Us.click,value:t})}else console.log("\u9152\u5e97\u5206\u6279\u66f4\u65b0\u65f6\u4e0d\u80fd\u8df3\u8f6c")},handlePreJump:function(e){var n=e.scene,t=e.jumpFunc,o=e.initParams,r=c.getState(),i=r.ShoppingId,a=r.PartitionStatus,s=(null===a||void 0===a?void 0:a.HotelSearchUpdatingStatus)||"notchanged";if("notchanged"===s){var l=D.getParams(n,o);l&&t&&(t(l),R({attrs:[{key:"ShoppingId",value:i}],scene:n,module:"\u8df3\u8f6c\u4e8c\u7ea7\u9875\u9762",role:C.GD.usr,action:C.Us.click,value:"-"}))}},handlePrefetchAllHotels:function(){var n,t=c.getState(),o=t.RegisterPageName,r=t.Platform,i=t.isTradeMinPriceMode,a=t.ShoppingId,s=t.Resource,u=t.BasicInfo,p=(null===s||void 0===s?void 0:s[a])||{},h=(null===p||void 0===p||null===(n=p.Hotel)||void 0===n?void 0:n.Hotels)||[];r==_.NN.CTRIPRN&&((0,k.xb)(h)||h.map((function(n,t){var s=(0,k.aC)(n,t),c=s.jumpParams,p={RegisterPageName:o,Platform:r,ShoppingId:a,isTradeMinPriceMode:i},h=(0,k.UE)((0,l.Z)((0,l.Z)({},p),c));d.handlePrefetch({params:(0,l.Z)((0,l.Z)({},h),{},{productId:null===u||void 0===u?void 0:u.ProductId}),needJump:!1,pageName:"hotelList",prefetchFunc:e.HotelPreFetch})})))},handleHideAllMasks:function(){var e=u.HIDE_ALL_MASK;e()},handleFlightPartitionedMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowFlightPartitionedMask:e}}),Je("\u673a\u7968\u5206\u6279\u66ff\u6362",e)},handleAirTicketChangeInfoMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowAirTicketChangeInfoMask:e}}),!e&&Je("\u673a\u7968\u9000\u6539\u7b7e",!1)},handleAirHornInfoMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowAirHornInfoMask:e}}),!e&&Je("\u673a\u7968\u51fa\u6e38\u63d0\u9192\u516c\u544a",!1)},handleShowFlightTransferMask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowFlightTransferMask:!0}}),n({ShoppingData:{flightTransferMaskInfo:e}})},handleHideFlightTransferMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowFlightTransferMask:!1}}),e({ShoppingData:{flightTransferMaskInfo:null}}),Je("\u673a\u7968\u4e2d\u8f6c",!1)},handleShowHotelPolicyMask:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,t){var o,r,i,s,l,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=u.UPDATE_SHOPPING_STATE,r=u.UPDATE_SHOPPING_STATE_FLAG,i=Re.getResource(),s=i.ShoppingResource,l=(null===s||void 0===s?void 0:s.BffSingleRoom)||[],!(0,k.xb)(l)){e.next=15;break}return Re.showLoadingDialog(),e.next=7,ue();case 7:if(c=e.sent,Re.hideLoadingDialog(),(0,k.xb)(c)){e.next=13;break}o({ShoppingData:{BffSingleRoom:c.BffSingleRoom}}),e.next=15;break;case 13:return Re.showToast("\u4fe1\u606f\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),e.abrupt("return");case 15:o({ShoppingData:{hotelPolicyMaskIndex:n,hotelPolicyTarget:t}}),r({flagData:{isShowHotelPolicyMask:!0}});case 17:case"end":return e.stop()}}),e)})));function n(n,t){return e.apply(this,arguments)}return n}(),handleHideHotelPolicyMask:function(){var e=Re.getResource(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.hotelPolicyTarget)||"",o=u.UPDATE_SHOPPING_STATE_FLAG;o({flagData:{isShowHotelPolicyMask:!1,hotelPolicyTarget:""}}),Je("\u9152\u5e97\u653f\u7b56-".concat(t),!1)},handleShowRoomInfoMask:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=u.UPDATE_SHOPPING_STATE,o=u.UPDATE_SHOPPING_STATE_FLAG,r=Re.getResource(),i=r.ShoppingResource,s=i.BffSingleRoom||[],!(0,k.xb)(s)){e.next=15;break}return Re.showLoadingDialog(),e.next=7,ue();case 7:if(l=e.sent,Re.hideLoadingDialog(),(0,k.xb)(l)){e.next=13;break}t({ShoppingData:{BffSingleRoom:l.BffSingleRoom}}),e.next=15;break;case 13:return Re.showToast("\u4fe1\u606f\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),e.abrupt("return");case 15:t({ShoppingData:{hotelPolicyMaskIndex:n}}),o({flagData:{isShowRoomInfoMask:!0}});case 17:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleHideRoomInfoMask:function(){var e=u.UPDATE_SHOPPING_STATE_FLAG;e({flagData:{isShowRoomInfoMask:!1}}),Je("\u9152\u5e97\u623f\u578b\u8bf4\u660e",!1)},handleShowHotelRoomCountMask:function(e){var n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowHotelRoomCountMask:!0}}),n({ShoppingData:{roomInfo:e}});var o=e.HotelName;Je("\u9152\u5e97\u4fee\u6539\u623f\u95f4\u6570-".concat(o),!0)},handleHideHotelRoomCountMask:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,t){var o,r,i,s,c,d,p,h,v,g,f,x,m,S,T;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Re.getResource(),r=o.ShoppingResource,i=o.ShoppingId,s=u.UPDATE_SHOPPING_STATE,c=u.UPDATE_SHOPPING_STATE_FLAG,c({flagData:{isShowHotelRoomCountMask:!1}}),d=n.HotelName,Je("\u9152\u5e97\u4fee\u6539\u623f\u95f4\u6570-".concat(d),!1),p=(null===r||void 0===r?void 0:r.Hotel)||{},h=(null===p||void 0===p?void 0:p.Hotels)||[],e.prev=7,!(t>0)){e.next=31;break}if(g=n.SelectedRoomCount,f=h.filter((function(e){var t=null===e||void 0===e?void 0:e.Rooms[0];if(t&&null!==t&&void 0!==t&&t.BasicInfo)return e.BasicInfo.Token===n.HotelToken&&t.BasicInfo.Token===n.RoomToken})),x=null===(v=f[0])||void 0===v||null===(v=v.Rooms)||void 0===v?void 0:v[0],!f||!x){e.next=17;break}g=n.SelectedRoomCount,x.BasicInfo.RoomCountInfo.SelectedCount=t,e.next=19;break;case 17:return Re.showToast("\u9152\u5e97\u95f4\u6570\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 19:return Re.showLoadingDialog(),m=n.SegmentNo,S=[],-1!==m&&(S=(0,k.UH)(h).filter((function(e){return e.SegmentNo==m}))),e.next=25,pe({SelectedResources:S,resourceEnum:_.Ff.HOTEL,FetchPrice:!0});case 25:T=e.sent,Re.hideLoadingDialog(),T||(x.BasicInfo.RoomCountInfo.SelectedCount=g,Re.showToast("\u9152\u5e97\u95f4\u6570\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")),s({ShoppingData:{Hotel:(0,l.Z)((0,l.Z)({},p),{},{Hotels:h})}}),T&&De.handlePrefetchAllHotels(),T&&R({attrs:[{key:"shoppingid",value:i}],module:"\u9152\u5e97",scene:"\u66f4\u6362\u623f\u95f4\u6570\u91cf",role:C.GD.usr,action:C.Us.change,value:"".concat(x.BasicInfo.RoomCountInfo.SelectedCount,"\u95f4"),contents:[{key:"\u9152\u5e97\u540d\u79f0",value:f[0].BasicInfo.Name},{key:"\u623f\u95f4\u540d\u79f0",value:x.BasicInfo.Name}],before:"".concat(g,"\u95f4")});case 31:e.next=36;break;case 33:e.prev=33,e.t0=e["catch"](7),G("handleHideHotelRoomCountMask",e.t0);case 36:case"end":return e.stop()}}),e,null,[[7,33]])})));function n(n,t){return e.apply(this,arguments)}return n}(),handleShowResourceAddInfoMask:function(e){var n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowResourceAddInfoMask:!0}}),n({ShoppingData:{SelectedResource:e}})},handleHideResourceAddInfoMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowResourceAddInfoMask:!1}}),e({ShoppingData:{SelectedResource:null}}),Je("\u5355\u9009\u9879\u9644\u52a0\u4fe1\u606f",!1)},handleShowDatePicker:function(){var e=u.UPDATE_SHOPPING_STATE_FLAG;e({flagData:{isShowDatePicker:!0}})},handleHideDatePicker:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=u.UPDATE_SHOPPING_STATE,o=u.UPDATE_SHOPPING_STATE_FLAG;o({flagData:{isShowDatePicker:!1}}),n&&t({ShoppingData:{SelectedDatePickerValue:e}})},handleOrderExtendInfoResource:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,c,d,p,h,v,g,f,x;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Re.getResource(),o=t.ShoppingId,r=n.Token,i=n.SegmentNo,s=n.SelectedInfo,c=n.OrderExtendInfos,d=n.SelectedDatePickerValue,p=n.resourceType,h=n.resourceName,v=u.UPDATE_SELECTED_RESOURCE,g=u.UPDATE_SHOPPING_STATE,De.handleHideResourceAddInfoMask(),!r){e.next=19;break}return Re.showLoadingDialog(),f={Token:r,SegmentNo:i,Count:null===s||void 0===s?void 0:s.SelectedCount,UseDateRange:{UseDate:null===s||void 0===s?void 0:s.UseDate,EndUseDate:null===s||void 0===s?void 0:s.EndUseDate},ExtendInfos:(0,k.jR)(c)},e.next=9,he({SelectedResource:f,DeletedToken:"",FetchPrice:!1,scene:"".concat(h,"\u9644\u52a0\u4fe1\u606f\u66f4\u65b0\u5230\u8d2d\u7269\u8f66")});case 9:if(x=e.sent,x){e.next=15;break}return Re.hideLoadingDialog(),"single"==p&&g({ShoppingData:{SelectedDatePickerValue:d}}),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 15:return v((0,l.Z)((0,l.Z)({},n),{},{updateType:"ExtendInfo"})),Re.hideLoadingDialog(),R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"".concat(h,":\u586b\u5199\u9644\u52a0\u4fe1\u606f"),role:C.GD.usr,action:C.Us.change,jsonData:c}),e.abrupt("return");case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleUpdateResourceInfoExtendInfo:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,c,d,p,h,v,g,f,x;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Re.getResource(),o=t.ShoppingId,r=n.Token,i=n.SegmentNo,s=n.SelectedInfo,c=n.SelectedDatePickerValue,d=n.resourceType,p=n.resourceName,h=n.OrderExtendInfos,v=u.UPDATE_SELECTED_RESOURCE,g=u.UPDATE_SHOPPING_STATE,De.handleHideResourceAddInfoMask(),!r){e.next=19;break}return Re.showLoadingDialog(),f={Token:r,SegmentNo:i,Count:null===s||void 0===s?void 0:s.SelectedCount,UseDateRange:{UseDate:null===s||void 0===s?void 0:s.UseDate,EndUseDate:null===s||void 0===s?void 0:s.EndUseDate},ExtendInfos:(0,k.jR)(h)},e.next=9,he({SelectedResource:f,DeletedToken:"",FetchPrice:!1,scene:"".concat(p,"\u9644\u52a0\u4fe1\u606f\u66f4\u65b0\u5230\u8d2d\u7269\u8f66")});case 9:if(x=e.sent,x){e.next=15;break}return Re.hideLoadingDialog(),"single"==d&&g({ShoppingData:{SelectedDatePickerValue:c}}),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 15:return v((0,l.Z)((0,l.Z)({},n),{},{updateType:"ExtendInfo"})),Re.hideLoadingDialog(),R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"".concat(p,":\u586b\u5199\u9644\u52a0\u4fe1\u606f"),role:C.GD.usr,action:C.Us.change,jsonData:h}),e.abrupt("return");case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleSwitchSingleResource:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,c,d,p,h,v,g,f;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Re.getResource(),o=t.ShoppingId,r=n.CategoryName,i=n.Token,s=n.ResourceName,l=n.DeletedToken,c=n.SegmentNo,d=n.SelectedSingle,p=n.DeletedResoureName,h=u.CONCAT_SEARCHX_DATA,!(i&&l&&c)){e.next=29;break}return Re.showLoadingDialog(),e.prev=5,v={Token:i,SegmentNo:c,Count:null===d||void 0===d?void 0:d.SelectedCount,UseDateRange:{UseDate:null===d||void 0===d?void 0:d.UseDate,EndUseDate:null===d||void 0===d?void 0:d.EndUseDate}},e.next=9,he({SelectedResource:v,DeletedToken:l,FetchPrice:!1,scene:"".concat(s,"\u66f4\u65b0\u5230\u8d2d\u7269\u8f66")});case 9:if(g=e.sent,g&&R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"\u66f4\u6362".concat(r),role:C.GD.usr,action:C.Us.change,contents:[{key:"\u8d44\u6e90\u540d\u79f0",value:s},{key:"\u4efd\u6570",value:v.Count},{key:"\u4f7f\u7528\u65e5\u671f",value:v.UseDateRange.UseDate}],value:s,before:p}),g){e.next=14;break}throw Re.hideLoadingDialog(),new Error("fetchUpdateShoppingCart failed");case 14:return e.next=16,se({});case 16:if(f=e.sent,!(0,k.xb)(f)){e.next=19;break}throw new Error("fetchSearchXPromise failed");case 19:return h(f),e.next=22,de();case 22:Re.hideLoadingDialog(),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](5),Re.hideLoadingDialog(),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");case 29:case"end":return e.stop()}}),e,null,[[5,25]])})));function n(n){return e.apply(this,arguments)}return n}(),handleUpdateResource:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,c,d,p,h,v,g,f,x,m,S;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Re.getResource(),t.ShoppingId,o=n.Token,r=n.SelectedShopping,i=n.SelectedCount,s=n.SelectedInfo,l=n.updateType,c=n.Basic,n.beforeCount,n.beforeUseDateRange,d=(null===c||void 0===c?void 0:c.ResourceName)||"",p=u.UPDATE_SELECTED_RESOURCE,Re.showLoadingDialog(),h={},v="",g=(0,k.e3)(n),f=M.Z.format(r.UseDate,"YYYY-MM-DD"),x=g?null===s||void 0===s?void 0:s.UseDate:f,m=g?null===s||void 0===s?void 0:s.EndUseDate:f,0==i?v=o:h={Token:o,SegmentNo:0,Count:i,UseDateRange:{UseDate:x,EndUseDate:m},ExtendInfos:(0,k.jR)(null===s||void 0===s?void 0:s.OrderExtendInfos)},!(0==i||i>0&&x&&m)){e.next=25;break}return e.next=15,he({SelectedResource:h,DeletedToken:v,scene:"".concat(d,"\u66f4\u65b0\u5230\u8d2d\u7269\u8f66")});case 15:if(S=e.sent,!S){e.next=20;break}W({resource:n,updateSuccess:!0}),e.next=23;break;case 20:return Re.hideLoadingDialog(),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 23:e.next=26;break;case 25:W({resource:n});case 26:if(!g||"date"!=l){e.next=29;break}return e.next=29,De.handleShoppingSelectedTokenList(o);case 29:return p(n),Re.hideLoadingDialog(),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleUpdateGroupResource:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,c,d,p,h;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Re.getResource(),o=t.ShoppingId,r=n.Token,i=n.SelectedCount,s=n.Basic,l=(null===s||void 0===s?void 0:s.ResourceName)||"",c=u.UPDATE_SELECTED_RESOURCE,Re.showLoadingDialog(),d={},p="",0==i?p=r:d={Token:r,SegmentNo:0,Count:i},e.next=10,he({SelectedResource:d,DeletedToken:p,scene:"".concat(l,"\u66f4\u65b0\u5230\u8d2d\u7269\u8f66")});case 10:if(h=e.sent,h){e.next=15;break}return Re.hideLoadingDialog(),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 15:return c(n),Re.hideLoadingDialog(),R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"\u66f4\u6362".concat(l,"\u4efd\u6570"),role:C.GD.usr,action:C.Us.change,value:i}),e.abrupt("return");case 19:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleChangeRoomCount:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,c,d,p,h,v;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Re.getResource(),o=t.ShoppingId,r=n.VirtualRoomShoppings,i=n.RoomCountRange,s=n.curCount,l=n.changeCount,c=u.UPDATE_ROOM_RESOURCE,Re.showLoadingDialog(),d=i.indexOf(s),p="add"==l?i[++d]:i[--d],h=null===r||void 0===r?void 0:r.find((function(e){return e.Count==p})),e.next=9,he({SelectedResource:h,DeletedToken:"",scene:"\u623f\u95f4\u6570\u66f4\u65b0\u5230\u8d2d\u7269\u8f66"});case 9:if(v=e.sent,v){e.next=14;break}return Re.hideLoadingDialog(),Re.showToast("\u8d44\u6e90\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 14:return c(h),Re.hideLoadingDialog(),R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"\u66f4\u6362\u623f\u95f4\u6570",role:C.GD.usr,action:C.Us.change,value:String(p),before:String(s)}),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handlePopAirPort:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,l,u,d;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=c.getState(),r=o.Platform,i=t.content,!L){n.next=7;break}return n.next=5,De.handleComfirmDeleteTransportation(t);case 5:n.next=8;break;case 7:r==_.NN.CTRIPRN?(l={btns:[{name:"\u70b9\u9519\u4e86",onClick:function(){return e.hideAlert()}},{name:"\u5220\u9664",onClick:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.hideAlert(),n.next=3,De.handleComfirmDeleteTransportation(t);case 3:case"end":return n.stop()}}),n)})));function o(){return n.apply(this,arguments)}return o}()}],content:i},e.showAlert(l)):r==_.NN.WEIXIN?(u={content:i,confirmText:"\u5220\u9664",cancelText:"\u70b9\u9519\u4e86",success:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.confirm){e.next=5;break}return e.next=3,De.handleComfirmDeleteTransportation(t);case 3:e.next=6;break;case 5:n.cancel;case 6:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()},e.showModal(u)):r==_.NN.CTRIPH5&&(d={btns:[{name:"\u70b9\u9519\u4e86",onClick:function(){return e.hideAlert()}},{name:"\u5220\u9664",onClick:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.hideAlert(),n.next=3,De.handleComfirmDeleteTransportation(t);case 3:case"end":return n.stop()}}),n)})));function o(){return n.apply(this,arguments)}return o}()}],content:i},e.showAlert(d));case 8:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),handleComfirmDeleteTransportation:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.getState(),o=t.ShoppingId,r=u.UPDATE_TRANSPORTATION,i=n.title,s=n.Token,Re.showLoadingDialog(),e.next=6,he({SelectedResource:{},DeletedToken:s});case 6:if(l=e.sent,l){e.next=11;break}return Re.hideLoadingDialog(),Re.showToast("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.abrupt("return");case 11:r(s),Re.hideLoadingDialog(),R({attrs:[{key:"ShoppingId",value:o}],module:"x\u8d44\u6e90",scene:"\u5220\u9664\u63a5\u9001\u673a",role:C.GD.usr,action:C.Us.click,value:i});case 14:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleShowResourceSelectAddInfoMask:function(e){var n=e.ResourceInfo,t=e.resourceType,o=e.OrderExtendToken,r=e.categorySeqId,i=u.UPDATE_SHOPPING_STATE,a=u.UPDATE_SHOPPING_STATE_FLAG;a({flagData:{isShowResourceSelectAddInfoMask:!0}}),i({ShoppingData:{SelectedAddInfoResource:n,ResourceType:t,OrderExtendToken:o,categorySeqId:r}})},handleHiddenResourceSelectAddInfoMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowResourceSelectAddInfoMask:!1}}),e({ShoppingData:{SelectedAddInfoResource:null,OrderExtendToken:""}}),Je("\u8d44\u6e90\u9644\u52a0\u4fe1\u606f\u9009\u62e9",!1)},handleShowResourceSelectMask:function(e){var n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowResourceSelectMask:!0}}),n({ShoppingData:{ResourceSelectInfo:e}})},handleHideResourceSelectMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowResourceSelectMask:!1}}),e({ShoppingData:{ResourceSelectInfo:{}}}),Je("\u5355\u9009\u9879\u9009\u62e9",!1)},handleShowVisaDescriptionMask:function(e){var n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowVisaDescriptionMask:!0}}),n({ShoppingData:{VisaDescriptionInfo:e}})},handleHideVisaDescriptionMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowVisaDescriptionMask:!1}}),e({ShoppingData:{VisaDescriptionInfo:{}}}),Je("\u81ea\u7406\u7b7e\u8bc1",!1)},handleShowResourceDescriptionMask:function(e){var n,t=null===e||void 0===e||null===(n=e.Basic)||void 0===n?void 0:n.ResourceName,o=Re.getResource(),r=o.ShoppingId,i=u.UPDATE_SHOPPING_STATE,a=u.UPDATE_SHOPPING_STATE_FLAG;a({flagData:{isShowResourceDescriptionInfoMask:!0}}),i({ShoppingData:{ResourceDescriptionInfo:e}}),R({attrs:[{key:"ShoppingId",value:r}],module:"x\u8d44\u6e90",scene:"\u8d44\u6e90\u8bf4\u660e\u5f39\u5c42",role:C.GD.usr,action:C.Us.click,value:t})},handleHideResourceDescriptionMask:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowResourceDescriptionInfoMask:!1}}),e({ShoppingData:{ResourceDescriptionInfo:{}}}),Je("\u8d44\u6e90\u8bf4\u660e",!1)},handleShowCruiseTourMask:function(n,t){var o=u.UPDATE_SHOPPING_STATE_FLAG,r=u.UPDATE_SHOPPING_STATE,i=u.UPDATE_MASK_DATA;o({flagData:{isShowCruiseTourMask:!0}}),r({ShoppingData:{CruiseTourPopId:n}}),"H5"===e.Platform&&i({CruiseTourId:n,IsMust:t})},handleHideCruiseTourMask:function(){var n=u.UPDATE_SHOPPING_STATE_FLAG,t=u.UPDATE_SHOPPING_STATE,o=u.UPDATE_MASK_DATA;n({flagData:{isShowCruiseTourMask:!1}}),t({ShoppingData:{CruiseTourPopId:""}}),"H5"===e.Platform&&o({CruiseTourId:void 0,IsMust:void 0}),Je("\u5cb8\u4e0a\u6e38\u7ec4\u8d44\u6e90",!1)},handlePriceListMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowPriceListMask:e}}),Je("\u8d39\u7528\u660e\u7ec6",e)},handleServiceMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowServiceMask:e}}),Je("\u5ba2\u670d\u4fe1\u606f",e)},handleShowResourceChangedTipMask:function(){var n=c.getState(),t=n.ShoppingId,o=u.UPDATE_RESOURCE_CHANGE_TIP_MASK;o(!0),e.traceDevLog("o_vacation_resource_refresh",{Name:"o_vacation_resource_refresh"}),R({attrs:[{key:"ShoppingId",value:t}],module:"\u5f39\u5c42",scene:"\u8d44\u6e90\u5df2\u66ff\u6362\u63d0\u793a\u6846",role:C.GD.sys,action:C.Us.change,value:"\u6253\u5f00",before:"\u5173\u95ed"})},handleHideResourceChangedTipMask:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=c.getState(),t=n.ShoppingId,o=u.UPDATE_RESOURCE_CHANGE_TIP_MASK;o(!1),e&&R({attrs:[{key:"ShoppingId",value:t}],module:"\u5f39\u5c42",scene:"\u8d44\u6e90\u5df2\u66ff\u6362\u63d0\u793a\u6846",role:e?C.GD.usr:C.GD.sys,action:C.Us.change,value:"\u5173\u95ed",before:"\u6253\u5f00"})},handleShowCompetitionMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowCompetitionMask:e}}),Je("\u7ade\u4e89\u529b",e)},handleShowRefundRuleMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowRefundRuleMask:e}}),Je("\u9000\u6539\u4fe1\u606f",e)},handlePrefetchH5Booking:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var o,r,i,s,u,d,p,h,v,g,f,x,m,S,I,k,w,P,N,D,y,j,C,E,M,A,b,Z,B,F,V;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=c.getState(),r=o.ShoppingId,i=void 0===r?"":r,s=o.params,u=o.Platform,u===_.NN.CTRIPH5){n.next=3;break}return n.abrupt("return");case 3:return d=e.attachShardParams(),p="OrderShoppingInfo_App_1st_V1",n.next=7,Promise.resolve().then((function(){return(0,T.Z)(t(58913))}));case 7:return h=n.sent,v=h.Graphql_GetOrderInfo,g=Number(d.Version),f={productParams:(0,l.Z)({ProductId:Number(s.productId),DepartureCityId:Number(s.departCityId||0)},d),shoppingParams:(0,l.Z)((0,l.Z)({ShoppingId:i},d),{},{Version:g}),qconfigParams:{KeyList:["height_type","order_train_check","order_insurance_agent","order_train_seat","publictraininfo.train_saleStartTime","publictraininfo.train_saleEndTime","order_clauses"]}},n.prev=11,k=Date.now(),w=new AbortController,P=w.signal,n.next=17,Promise.race([e.gqlpost(v,f,p,{signal:P}),new Promise((function(e,n){setTimeout((function(){w.abort(),n("bff/graphql/OrderShoppingInfo_App_1st_V1 -> \u63a5\u53e3\u8c03\u7528\u8d85\u8fc71000ms")}),1e3)}))]);case 17:if(N=n.sent,D=N.data,y=N.extensions,"Success"===(null===y||void 0===y||null===(x=y.SoaResponseStatus)||void 0===x||null===(x=x.ResponseStatus)||void 0===x?void 0:x.Ack)){n.next=22;break}throw new Error("getOrderInitInfo");case 22:if(j=D.shoppingDetail,C=void 0===j?{}:j,E=C||{},M=E.contactTemplate,A=void 0===M?{}:M,b=E.mrgMemberUserInfo,Z=void 0===b?{}:b,B=E.ResponseStatus,F=void 0===B?{}:B,"Success"===(null===F||void 0===F?void 0:F.Ack)){n.next=26;break}throw new Error("20168/GetShoppingDetail");case 26:if("Success"===(null===A||void 0===A||null===(m=A.ResponseStatus)||void 0===m?void 0:m.Ack)){n.next=28;break}throw new Error("13966/contactTemplate");case 28:if("Success"===(null===Z||void 0===Z||null===(S=Z.ResponseStatus)||void 0===S?void 0:S.Ack)){n.next=30;break}throw new Error("20168/queryMrgMemberUserInfo");case 30:return V=Date.now(),R({attrs:[{key:"ShoppingId",value:i}],module:"\u586b\u5199\u9875H5 Prefetch \u9996\u5c4f\u63a5\u53e3\u8bf7\u6c42",scene:"\u9996\u5c4f /tour/bff/graphql/OrderShoppingInfo_App_1st_V1",value:"\u8bf7\u6c42\u65f6\u957f".concat(V-k,"ms"),rootMessageId:Re.getRootMessageId((null===y||void 0===y||null===(I=y.SoaResponseStatus)||void 0===I||null===(I=I.ResponseStatus)||void 0===I?void 0:I.Extension)||[])}),n.abrupt("return",D);case 35:return n.prev=35,n.t0=n["catch"](11),n.abrupt("return",{});case 38:case"end":return n.stop()}}),n,null,[[11,35]])})));function o(){return n.apply(this,arguments)}return o}(),handleBooking:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,p,h,v,g,f,x,m,S,T,I,w,P,N,D,y,j,E,M,A,b,Z,B,F,V,L,H,U,O,Y,W,K,J,X,$,z,Q,ee,ne,te,oe,re,ie,ae,se,le,ce;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=c.getState(),o=t.params,r=t.errorMessage,i=t.prodType,s=t.useCouponState,p=t.Platform,h=t.detailpagename,v=t.isBestone,g=t.queryorderid,f=t.RegisterPageName,x=t.Resource,m=t.BasicInfo,S=t.SegmentInfo,T=t.isMultiLine,t.IsContinueBook,t.query,I=Re.getResource(),w=I.ShoppingId,P=I.flags,N=o.productId,D=o.departCityId,y=o.fromhhtravel,j=o.activitycode,E=o.qstagecount,M=o.alias,(0,k.e6)({Resource:x,params:o,BasicInfo:m,ShoppingId:w,SegmentInfo:S,isMultiLine:T}),A=(null===P||void 0===P?void 0:P.isShowPriceListMask)||!1,b=u.SET_BOOKING_BUTTON_GREY,Z=u.UPDATE_PRICESHOW_STATUS,B=u.UPDATE_STATE,De.handleHideResourceChangedTipMask(),R({attrs:[{key:"ShoppingId",value:w}],scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65",role:C.GD.usr,action:C.Us.click,value:"\u7acb\u5373\u9884\u8ba2"}),F=!0,p===_.NN.CTRIPH5&&(V=d.getPageShowStorage(),V&&(F=!1,q("handleBooking \u9875\u9762\u672a\u5237\u65b0","vac_11000"))),n.prev=10,L=De.handleErrorToken(),w&&L){n.next=20;break}return A&&De.handlePriceListMask(!1),b(!0),H=r||"\u60a8\u9009\u62e9\u7684\u8d44\u6e90\u4e0d\u53ef\u8ba2\u54e6\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u54c8\uff01",Re.hideLoadingDialog(),Re.showToast(H),R({attrs:[{key:"shoppingid",value:w}],module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65\u6821\u9a8c\u7528\u6237\u9009\u62e9\u8d44\u6e90",role:C.GD.sys,action:C.Us.show,value:H}),n.abrupt("return");case 20:if(U=Re.checkResourceInputError(),!U){n.next=24;break}return A&&De.handlePriceListMask(!1),n.abrupt("return");case 24:return Re.showLoadingDialog(),Z("loading"),ye.cancelAllFlightBatchesFetch(),ye.cancelAllHotelBatchesFetch(),n.next=30,de({fallback:"loading"});case 30:if(O=n.sent,O){n.next=36;break}return R({attrs:[{key:"shoppingid",value:w}],module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u83b7\u53d6\u4ef7\u683c\u63a5\u53e3\u5931\u8d25",value:"-",role:C.GD.sys,action:C.Us.show}),A&&De.handlePriceListMask(!1),Re.hideLoadingDialog(),n.abrupt("return");case 36:if(!F){n.next=42;break}return n.next=39,ve();case 39:n.t0=n.sent,n.next=43;break;case 42:n.t0=!0;case 43:if(Y=n.t0,Y){n.next=50;break}return Re.hideLoadingDialog(),A&&De.handlePriceListMask(!1),b(!0),Z("show"),n.abrupt("return");case 50:return n.next=52,ke();case 52:if(W=n.sent,K=(null===W||void 0===W?void 0:W.isSuccess)||!1,J=(null===W||void 0===W?void 0:W.canBookingResults)||[],X=(null===W||void 0===W?void 0:W.canBookingResourceInfos)||[],$=(null===W||void 0===W?void 0:W.ResponseStatus)||{},!K){n.next=87;break}if(z={productId:N,departCityId:D,shoppingId:w,productType:i,useCouponStatus:2==s?"2":"0",orderid:g,detailpagename:h,resourcepagename:f,isnewshopping:1},M&&(z=(0,l.Z)((0,l.Z)({},z),{},{alias:M})),"1"===y&&(z=(0,l.Z)((0,l.Z)({},z),{},{fromhhtravel:1})),j&&(z=(0,l.Z)((0,l.Z)({},z),{},{activitycode:j})),E&&(z=(0,l.Z)((0,l.Z)({},z),{},{qstagecount:E})),B({backFromOrderPage:!0}),p!=_.NN.CTRIPH5){n.next=75;break}return localStorage.setItem("FIRST_JUMP_ORDER","true"),z.from=location.href,n.next=69,De.handlePrefetchH5Booking();case 69:Q=n.sent,e.set("FIRST_DATA_OF_BOOKING",Q,5),Re.hideLoadingDialog(),e.goTo({url:"/booking",params:z}),n.next=85;break;case 75:if(p!==_.NN.WEIXIN){n.next=81;break}Re.hideLoadingDialog(),ee="/pages/tourbooking/order/index",e.navigateTo({url:ee,params:z}),n.next=85;break;case 81:return Re.hideLoadingDialog(),ne="/rn_tour_order/main.js?CRNModuleName=CTTourApp&CRNType=1&inavbarhidden=1&ishidenavbar=yes&initialPage=tour_orderv3&timestamp="+(new Date).getTime(),e.goTo({url:ne,params:z}),n.abrupt("return",z);case 85:n.next=103;break;case 87:A&&De.handlePriceListMask(!1),b(!0),Z("show"),te=J[0]||{},oe=te.code,re=te.message,ie=function(){var n={productId:N,departCityId:D};switch(oe){case"system_error":break;case"invalid_product":p==_.NN.CTRIPRN?setTimeout((function(){e.Business.doBusinessJob(9,"80026",{},"",(function(e){console.log(e)}))}),4e3):p==_.NN.CTRIPH5?v||e.H5Util&&(e.H5Util.isInZTApp()||e.H5Util.isInMixApp()||e.H5Util.isInNewQuickApp())?e.goTo({url:"/detail",params:n}):e.goTo({url:"/vacations"}):e.switchTab({url:"/pages/home/homepage"});break;case"lack_resource":case"invalid_resource_count":case"invalid_shopping":p==_.NN.CTRIPRN?setTimeout((function(){e.pop&&e.pop()}),4e3):p==_.NN.CTRIPH5?e.goTo({url:"/detail",params:n}):setTimeout((function(){e.navigateBack({delta:1})}),4e3);break;case"reselect_cruise":p==_.NN.CTRIPRN?(setTimeout((function(){e.pop&&e.pop()}),4e3),e.Event.sendEvent("CanBookingResult",{ShoppingId:w,canBookingResults:J,canBookingResourceInfos:X})):p==_.NN.CTRIPH5?e.goTo({url:"/detail",params:n}):setTimeout((function(){e.navigateBack({delta:1})}),4e3);break;default:break}},Re.hideLoadingDialog(),ae=re||"\u8d44\u6e90\u5f53\u524d\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",Re.showToast(ae),setTimeout((function(){ie()}),3e3),_e($,"vac_20040",ae,!0,"canBooking\u62e6\u622a"),se=u.UPDATE_SHOPPING_STATE,le=u.UPDATE_ERROR_MESSAGE,ce=[],X.forEach((function(e){e&&!1===e.status&&ce.push(e.token)})),se({ShoppingId:w,ShoppingData:{ErrorTokenList:ce,TypeList:[]}}),le(ae),De.handleErrorToken();case 103:n.next=111;break;case 105:n.prev=105,n.t1=n["catch"](10),G("handleBooking",n.t1),A&&De.handlePriceListMask(!1),Re.hideLoadingDialog(),Re.dealWithErrorCatchNetWork();case 111:case"end":return n.stop()}}),n,null,[[10,105]])})));function t(){return n.apply(this,arguments)}return t}(),handleGoIM:function(){var n=c.getState(),t=n.imEntryInfo,o=n.BasicInfo,r=n.VendorInfo,i=n.pageStatus,a=n.ShoppingId,s=n.Platform,l=(null===t||void 0===t?void 0:t.imInfo)||{},u=l.resolveImCode,p=u||"";if(p||(p=null!==o&&void 0!==o&&o.isPureDiyfhxsdp?"02000300":null!==o&&void 0!==o&&o.isCruise?"00132200":o.IsThemeProduct?"30000200":o.ProductCategoryId&&[33,34,41,42].indexOf(+o.ProductCategoryId)>-1?"01330200":"01090300"),s===_.NN.CTRIPH5){if(o.IsDistribution)return;if(e.H5Util&&e.H5Util.isTieyou())return;var h="".concat(d.actionIdSuffix,"-bubble-imconsult-").concat(o.ProductId,"-").concat(o.ProductAlias),v={productId:o.ProductId,destinationIdList:[o.DestCityId],departureCityId:o.DepartureId,saleCityId:o.SaleCityId,hasProduct:0,platformId:1,extendJson:{Platform:"H5"},pageId:null===i||void 0===i?void 0:i.pageId,isPreSale:"1",actionId:h,IMCode:p,notShowFixedButton:!0};e.handleJumpIM(v)}else if(s===_.NN.WEIXIN){var g="grp-".concat(null===i||void 0===i?void 0:i.pageId,"-bubble-imconsult-").concat(o.ProductId,"-").concat(o.ProductAlias),f={IMCode:p,productId:o.ProductId,departureCityId:o.DepartureId,destinationIdList:JSON.stringify([o.DestCityId]),platformId:1,extendJson:JSON.stringify({Platform:"H5",providerId:r&&r.VenderId}),providerId:r&&String(r.VenderId),isPreSale:"1",shoppingId:a,saleCityId:o.SaleCityId,hasProduct:0,pageId:null===i||void 0===i?void 0:i.pageId,actionId:g,notShowFixedButton:!0,conversationType:"groupchat"},x="/tour/im/group",m=f,S={needLogin:!0,needHost:!0};e.jumpH5({url:x,params:m,options:S})}return{IMCode:p}},handleGoPrivateIM:function(){var e=c.getState(),n=e.BasicInfo;n.isPrivateGroup&&(De.jumpIMPage("01090503"),Me("grp_resource_service_click"))},handleGoPrivateIM_Duoren:function(){var e=c.getState(),n=e.BasicInfo;n.isPrivateGroup&&(De.jumpIMPage("01090508"),Me("grp_resource_loservice_click"))},handleGoPrivateIM_Mask:function(){var e=c.getState(),n=e.BasicInfo;n.isPrivateGroup&&(De.jumpIMPage("01090508"),Me("grp_psgnum_loservice_click"))},jumpIMPage:function(n){if(n){var t=c.getState(),o=t.BasicInfo,r=t.ShoppingId,i=t.imEntryInfo,a=t.VendorInfo,s=t.pageStatus,u=null===s||void 0===s?void 0:s.pageId,d=(null===i||void 0===i?void 0:i.imInfo)||{},p={providerId:String(a.VenderId)};try{d&&d.extendJson&&(p=(0,l.Z)((0,l.Z)({},p),JSON.parse(d.extendJson)))}catch(e){}var h={providerId:String(a.VenderId),shoppingId:r,productId:String(o.ProductId),saleCityId:String(o.SaleCityId),departureCityId:String(o.DepartureId),destinationIdList:[o.DestCityId],isPreSale:1,pageId:u,IMCode:n,ExtendJson:JSON.stringify(p)};e.Storage.save({key:"TOUR_GROUPCHAT_ROBOT",value:JSON.stringify(h),domain:"tour"});var v="ctrip://wireless/tour_groupchat_robot?groupBizType=1105&timestamp="+(new Date).getTime();e.openURL(v)}},handleShowGroupDescriptionMask:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we(n);case 2:t=u.UPDATE_SHOPPING_STATE,o=u.UPDATE_SHOPPING_STATE_FLAG,r=c.getState(),i=r.ShoppingId,t({ShoppingId:i,ShoppingData:{showGroupDescriptionMaskToken:n}}),o({ShoppingId:i,flagData:{isShowGroupDescriptionMask:!0}});case 6:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleHideGroupDescriptionMask:function(){var e=u.UPDATE_SHOPPING_STATE_FLAG,n=c.getState(),t=n.ShoppingId;e({ShoppingId:t,flagData:{isShowGroupDescriptionMask:!1}})},handleShoppingSelectedTokenList:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.getState(),o=t.ShoppingSelectedTokenList,r=u.UPDATE_SHOPPING_SELECTED_TOKEN_LIST,i=[],null===o||void 0===o||o.map((function(e){e.Token==n&&(e.isSelectedToken=!0),i.push(e)})),r(i),e.next=7,Ne.setResourceNeedSelectedDateStorage();case 7:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),handleSetShoppingSelectedTokenListFromShoppingCart:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.getState(),t=n.ShoppingSelectedTokenList,o=u.UPDATE_SHOPPING_SELECTED_TOKEN_LIST,e.next=4,Ne.getNeedTurnBackSelectTokensFromStorage();case 4:return r=e.sent,i=[],null===t||void 0===t||t.map((function(e){r&&-1!=r.indexOf(e.Token)&&(e.isSelectedToken=!0),i.push(e)})),o(i),e.next=10,Ne.clearNeedTurnBackSelectTokensStorage();case 10:return e.next=12,Ne.setResourceNeedSelectedDateStorage();case 12:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),handleShowErrorMessage:function(){var e=c.getState(),n=e.errorMessage;n&&Re.showToast(n)},handleShowCalendarInfoMask:function(e){var n=u.UPDATE_CALENDARINFO_MASK;n(e)},handleSelectPassengerMask:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=u.UPDATE_SHOPPING_STATE_FLAG;t({flagData:{isShowSelectPassengerMask:e}}),e&&!n&&Me("grp_resource_psgnum_show",{scene:4})},handleUpdatePassengerData:function(e){var n=e.adultCount,t=e.childCount,o=e.infantCount,r=u.UPDATE_STATE;r({passengerCount:{adultCount:n,childCount:t,infantCount:o}})},handlePassengerDateSubmit:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,d,p,h,g,f,x,m,S,T,I,w,N,D,y,R,j,C,E;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=c.getState(),r=o.params,i=o.Platform,s=o.ShoppingId,l=o.passengerCount,r.alias,d=r.line,p=u.UPDATE_STATE,h=t.result,g=t.payload,!h){n.next=28;break}if(f=g.recommendSearch,x=g.cabinInfo,m=g.shoppingDetail,S=g.extraResource,T=f.ShoppingId,"extendStay"===(null===r||void 0===r?void 0:r.segmentType)&&e.set("CALENDAR_SDP_SHOPPING_CHANGE",!0,300),i!=_.NN.CTRIPH5){n.next=13;break}return n.next=11,Promise.all([Ne.clearResourceNeedSelectedDateStorage(),Ne.clearNeedTurnBackSelectTokensStorage()]);case 11:return n.next=13,en({shoppingid:T,isnewshopping:"1"});case 13:return i===_.NN.CTRIPRN&&(e.set("DEPRECATED_SHOPPING",(0,v.Z)({},d,[].concat(P,[s]))),P.push(s)),n.next=16,Ne.getResourceTypeInfoFromStorage(T);case 16:return I=n.sent,Q({resourceTypeInfo:I,IsNewShopping:!0,ShoppingId:T}),w=m.prefetchSetting||{},N=w.resource||{},D=N.enabled,y=void 0!==D&&D,R=N.expiredtime,j=void 0===R?0:R,y&&e.set("RESOURCE_FIRST_SCREEN_INFO",(0,v.Z)({},T,{extraResource:S,CabinInfo:x}),j/1e3),n.next=23,re({isSSR:!1});case 23:C=c.getState(),E=C.passengerCount,(null===e||void 0===e?void 0:e.clickShoppingdataLog)&&e.clickShoppingdataLog("cxrfcxg_save",{passenger:(0,k.kb)(l),modify:(0,k.kb)(E)}),De.handleShowResourceChangedTipMask(),n.next=29;break;case 28:p({isShowErrorNewProcess:!0});case 29:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),handleSelectDateMask:function(e){var n=u.UPDATE_SHOPPING_STATE_FLAG;n({flagData:{isShowSelectDateMask:e}})},handleDateMaskError:function(){Re.showNetWorkErrorPage()},handleErrorPageChangeDate:function(){var e=c.getState(),n=e.params,t=n.segmentType;"extendStay"===t?De.showSelectCalendarPop():De.handleSelectDateMask(!0)}},ye={addShoppingFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.shoppingRequests.push(n);case 1:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addPriceDetailFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.priceDetailRequests.push(n);case 1:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addFlightBatchesFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.batchesFlightRequests.push(n);case 1:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addHotelBatchesFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.batchesHotelRequests.push(n);case 1:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),cancelPriceDetailFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.priceDetailRequests.forEach((function(e){e.cancel()})),p.priceDetailRequests=[];case 2:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),cancelAllFlightBatchesFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.batchesFlightRequests.forEach((function(e){e.cancel()})),p.batchesFlightRequests=[];case 2:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),cancelAllHotelBatchesFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.batchesHotelRequests.forEach((function(e){e.cancel()})),p.batchesHotelRequests=[];case 2:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),cancelAllShoppingFetch:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.shoppingRequests.forEach((function(e){e.cancel()})),p.shoppingRequests=[];case 2:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()},Re={setPrefetchSetting:function(){var e=Re.getResource(),n=e.ShoppingResource,t=e.Platform,o=(null===n||void 0===n?void 0:n.prefetchSetting)||{};t===_.NN.CTRIPRN&&(d.prefetchSetting=o)},getResource:function(){var e=c.getState(),n=e.ShoppingId,t=e.Resource,o=e.ShoppingSelectedTokenList,r=e.Platform,i=e.flags,a=void 0===i?{}:i,s=e.BasicInfo;n||console.warn("\u6ca1\u6709 ShoppingId");var l=(null===t||void 0===t?void 0:t[n])||{};return{ShoppingId:n,Resource:t,ShoppingResource:l,flags:a,ShoppingSelectedTokenList:o,Platform:r,BasicInfo:s}},checkResponseStatus:function(e){return!(!e||"Success"!==e.Ack)},getRootMessageId:function(e){var n;return null===(n=e.find((function(e){return"RootMessageId"===e.Id})))||void 0===n?void 0:n.Value},cleanErrorMessages:function(){var e=u.UPDATE_SHOPPING_STATE,n=u.SET_BOOKING_BUTTON_GREY;e({ShoppingData:{ErrorTokenList:[],TypeList:[]}}),n(!1)},initHotelPartitionStates:function(){var e=u.INIT_PARTITION_STATUS;e({initHotel:!0})},initAllPartitionStates:function(){var e=u.INIT_PARTITION_STATUS;e({initHotel:!0,initFlight:!0})},setPageErrorInfo:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=u.UPDATE_ERROR_MESSAGE,r=u.UPDATE_PRICESHOW_STATUS;e&&n&&(Re.showToast(e),t||(o(e),r("hide")))},showNetWorkErrorPage:function(){var e=u.UPDATE_STATE,n=Re.getResource(),t=n.ShoppingId;Re.hideLoadingDialog(),e({isShowInvalidProduct:!0,isCanEditPassenger:!0}),R({attrs:[{key:"shoppingId",value:t}],module:"\u9875\u9762\u5f02\u5e38",role:C.GD.sys,action:C.Us.show,scene:"\u8fdb\u5165\u7f51\u7edc\u9519\u8bef\u9875",value:"-"})},dealWithErrorCatchNetWork:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.isShowToast,t=void 0!==n&&n;try{var o="\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5";_e([],"vac_10075",o,!1),Re.setPageErrorInfo(o,t,!0)}catch(e){G("dealWithErrorCatchNetWork",e)}},showOrderBookingErrorInfo:function(e){var n=u.UPDATE_SHOPPING_STATE,t=u.UPDATE_ERROR_MESSAGE;if(!(0,k.xb)(e)){var o=e.TokenInfoList,r=e.ReselectTokenInfoList;if(o){var i=o,a=i.map((function(e){return e.Token})),s="\u60a8\u9009\u62e9\u7684\u8d44\u6e90\u4e0d\u53ef\u8ba2\u54e6\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u54c8";n({ShoppingData:{ErrorTokenList:a,TypeList:[]}}),t(s),!L&&De.handleErrorToken()}r&&(n({ShoppingData:{ReselectTokenInfoList:r}}),!L&&De.handleScrollErrorPosition(r))}},checkResourceInputError:function(){var n=Re.getResource(),t=n.ShoppingResource,o=n.ShoppingSelectedTokenList,r=n.ShoppingId,i=u.UPDATE_STATE,a=!1,s=[],l=t.visa,c=void 0===l?[]:l,d=t.discount,p=void 0===d?[]:d,h=t.free,v=void 0===h?[]:h,g=t.optional,f=void 0===g?[]:g,x=t.required,m=void 0===x?[]:x,S=[].concat(m,f,c,p,v);try{null===S||void 0===S||S.map((function(n){var t=(null===n||void 0===n?void 0:n.groups)||[];null===t||void 0===t||t.forEach((function(n){var t=(null===n||void 0===n?void 0:n.datas)||[];null===t||void 0===t||t.forEach((function(n){var t=(null===n||void 0===n?void 0:n.Token)||"",r=(null===n||void 0===n?void 0:n.SelectedInfo)||{},i=null===o||void 0===o?void 0:o.find((function(e){return(null===e||void 0===e?void 0:e.Token)==t})),a=!(i&&(null===i||void 0===i||!i.isSelectedToken)),l=(null===r||void 0===r?void 0:r.SelectedCount)||0,c=(null===r||void 0===r?void 0:r.UseDate)||"",u=(null===r||void 0===r?void 0:r.EndUseDate)||"",d=(null===r||void 0===r?void 0:r.OrderExtendInfos)||[];if(l>0){var p=c&&u&&a,h=!0;(0,k.xb)(d)||"activity"!==n.ResourceType&&"scenic"!==n.ResourceType||(h=d.every((function(e){return e.Items&&e.Items.some((function(e){return e.Content}))||e.Content}))),p&&h||(console.log("\u6709\u5f02\u5e38",{filterShoppingSelectedTokenResource:i},{iresource:n},{isDateSelected:p},{isExtendInfoSelected:h}),s.push(t),e.logDevTrace("resource_checkResourceInputError_error",{iresource:n,isDateSelected:p,isExtendInfoSelected:h,ShoppingSelectedTokenList:o}))}}))}))}))}catch(e){G("checkResourceInputError",e)}return a=s.length>0,i({isShowInputError:a}),a&&De.handleScrollErrorPosition(s),a&&R({attrs:[{key:"shoppingid",value:r}],module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65\u6821\u9a8c\u7528\u6237\u9009\u62e9\u8d44\u6e90",role:C.GD.sys,action:C.Us.show,value:"\u8d44\u6e90 ".concat(s[0],"\u65e5\u671f\u672a\u9009\u62e9\u6216\u9644\u52a0\u4fe1\u606f\u672a\u586b\u5199")}),a},showLoadingDialog:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Re.getResource(),o=t.Platform,r=t.ShoppingId;g=!0,o!==_.NN.WEIXIN?e.showMaskLoading():e.showLoadingDialog(),w[0]||(w[0]=(new Date).getTime(),R({attrs:[{key:"shoppingId",value:r}],role:C.GD.sys,action:C.Us.show,scene:"\u5f00\u59cb loading",value:"-"}),n&&(f=setTimeout((function(){g&&R({attrs:[{key:"shoppingId",value:r}],module:"\u9875\u9762\u5f02\u5e38",role:C.GD.sys,action:C.Us.show,scene:"loading \u5df2\u8d85\u8fc7 4000 ms",value:"-"})}),4e3)))},hideLoadingDialog:function(){var n=Re.getResource(),t=n.ShoppingId,o=n.Platform;g=!1,o!==_.NN.WEIXIN?e.hideMaskLoading():e.hideLoadingDialog(),clearTimeout(f),w[0]&&(w[1]=(new Date).getTime(),R({attrs:[{key:"shoppingId",value:t}],role:C.GD.sys,action:C.Us.show,scene:"\u7ed3\u675f loading",value:"".concat(w[1]-w[0],"ms")})),w=[null,null]},showToast:function(n){if(L)return n;var t=Re.getResource(),o=t.ShoppingId;e.showToast(n),R({attrs:[{key:"shoppingId",value:o}],role:C.GD.sys,action:C.Us.show,scene:"\u63d0\u793a",value:n})},getABTestResult:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,l,c,d=arguments;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:[],o=u.SET_ABTEST_RESULT,r={},i=L?t:U,l=i.map(function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getABTest(t);case 2:return o=n.sent,n.abrupt("return",{code:t,version:o.ExpVersion||"A"});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.next=7,Promise.all(l);case 7:c=n.sent,c.forEach((function(e){var n=e.code,t=e.version;r[n]=t})),o(r);case 10:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}(),getAB:function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=u.SET_ABTEST_RESULT,n.next=3,e.getABTest(t);case 3:return r=n.sent,i=(null===r||void 0===r?void 0:r.ExpVersion)||"A",s=(0,v.Z)({},"".concat(t),i),o(s),Y("".concat(t,": ").concat(i)),n.abrupt("return",i);case 9:case"end":return n.stop()}}),n)})));function t(e){return n.apply(this,arguments)}return t}(),setBestonePriceInfo:function(){Re.listenBestoneAppVolumeChange(),e.setTDSHomeButton(!0)},listenBestoneAppVolumeChange:function(){var n,t=c.getState(),o=t.isInBestoneApp,r=u.UPDATE_TRADE_MINPRICE_MODE;if(o){var i=null===e||void 0===e||null===(n=e.Stores)||void 0===n||null===(n=n.BestoneStore)||void 0===n?void 0:n.getInstance(),a=i.getVolumeStatus();"up"===a?(r(!1),F.body.classList.remove("bestone_group_body")):(r(!0),F.body.classList.add("bestone_group_body")),"undefined"!==typeof TDS&&TDS.volume((function(e){1==Number(e.volume)&&(r(!1),i.setVolumeStatus("up"),F.body.classList.remove("bestone_group_body")),0==Number(e.volume)&&(r(!0),i.setVolumeStatus("down"),F.body.classList.add("bestone_group_body"))}))}}},je=function(){var n=c.getState(),t=n.pageStatus,o=n.Platform,r=(null===t||void 0===t?void 0:t.pageId)||"";o!==_.NN.CTRIPRN&&(Y("sendPV - ".concat((new Date).toISOString())),e.sendPV({pageId:r,url:e.url}))},Ce=function(){var n=c.getState(),t=n.pageStatus,o=(null===t||void 0===t?void 0:t.pageId)||"";e.sendPV({pageId:o,url:e.url})},Ee=function(n,t){var o=d.logInfo,r=void 0===o?{}:o;t&&(r=(0,l.Z)((0,l.Z)({},r),t));var i="grp_resource_".concat(n,"_").concat(r.pageid),a=(0,l.Z)({},r);r.pageid&&e.tracelog(i,a)},Me=function(n,t){var o={};t&&(o=(0,l.Z)({},t)),e.tracelog(n,o)},_e=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vac_10075",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u91cd\u8bd5",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=(null===e||void 0===e||null===(n=e.Errors)||void 0===n?void 0:n[0])||{},s=String((null===a||void 0===a?void 0:a.ErrorCode)||t),l=String((null===a||void 0===a?void 0:a.Message)||o);Ae(s,l,r,i)},Ae=function(n,t,o,r){var i=c.getState(),a=i.BasicInfo,s=i.pageStatus,l=i.params,u=i.ShoppingId,d=Re.getResource(),p=d.ShoppingResource,h=null===p||void 0===p?void 0:p.curDate,v="vacation_usershoppinginterruption_vac",g={businessline:null!==s&&void 0!==s&&s.isPureDiyfhxsdp?"sdp1.0":"grp",merchandiseid:null===a||void 0===a?void 0:a.ProductId,pageid:null===s||void 0===s?void 0:s.pageId,operation:"\u9009\u62e9\u8d44\u6e90",messageid:n,message:t,startcity:null===l||void 0===l?void 0:l.departCityId,startdate:h,shoppingid:u};e.logDevTrace(v,g),o&&R({attrs:[{key:"shoppingid",value:u}],module:"\u53ef\u8ba2\u963b\u65ad",scene:r,role:C.GD.sys,action:C.Us.show,key:n,value:t})},be=function(e){var n=e.is_rec,t=void 0===n?0:n,o=Re.getResource(),r=o.ShoppingResource,i=null===r||void 0===r?void 0:r.curLine,a=c.getState(),s=a.BasicInfo,l=void 0===s?{}:s,u=a.ShoppingId,p=a.pageStatus,h=a.prodType,v=l.ProductId,g=p.isPureDiyfhxsdp,f=p.pageId,x={shoppingid:u,productId:v,lineid:i||v,bu:g?"sdp":"pkg",pageid:f,pttype:null===l||void 0===l?void 0:l.ProductPatternId,prodcategory:null===l||void 0===l?void 0:l.ProductCategoryId,is_rec:t};return d.logInfo=x,d.prodType=h,d.actionIdSuffix="".concat(h,"-").concat(f),x},Ze=function(e){var n,t,o,r,i,a=e.is_rec,s=void 0===a?1:a,l=Re.getResource(),u=l.ShoppingResource,p=c.getState(),h=p.params,v=p.prodType,g=u.Hotel,f=void 0===g?{}:g,x=u.Flight,m=void 0===x?{}:x,S=u.adultCount,T=u.childCount;if("sdp"===v){var I=[];null===m||void 0===m||null===(n=m.Segments)||void 0===n||n.map((function(e){var n=[];e.Flights.map((function(t){var o=(0,k.FM)(m.FlightSeats,e.SegmentNo,t.FlightId),r={departCity:t.DepartInfo.CityName,arriveCity:t.ArriveInfo.CityName,departCityId:t.DepartInfo.CityId,arriveCityId:t.ArriveInfo.CityId,departDateTime:(0,k.yN)(t.DepartInfo.DateTime,"YYYY-MM-DD HH:mm"),arriveDateTime:(0,k.yN)(t.ArriveInfo.DateTime,"YYYY-MM-DD HH:mm"),isVacationFlight:"Vacation"==m.FlightSeats[0].FlightSourceType?"Y":"N",airCorps:t.FlightNo,grade:o,d_airport:t.DepartInfo.AirportName,a_airport:t.ArriveInfo.AirportName};n.push(r)})),I.push(n)}));var w=[];null===f||void 0===f||null===(t=f.Hotels)||void 0===t||t.map((function(e){var n,t,o,r,i,a,s,l,c={roomcount:null===(n=e.Rooms)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.BasicInfo)||void 0===n||null===(n=n.RoomCountInfo)||void 0===n?void 0:n.SelectedCount,gift:null!==(t=e.Rooms)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&null!==(t=t.BasicInfo)&&void 0!==t&&null!==(t=t.Gifts)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.Desc?"1":"0",score:null===(o=e.BasicInfo)||void 0===o||null===(o=o.StaticInfo)||void 0===o||null===(o=o.Comment)||void 0===o?void 0:o.Point,checkin:(0,k.yN)(null===(r=e.Rooms)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.PaymentInfo)||void 0===r?void 0:r.CheckinDate,"YYYY-MM-DD"),checkout:(0,k.yN)(null===(i=e.Rooms)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.PaymentInfo)||void 0===i?void 0:i.CheckoutDate,"YYYY-MM-DD"),breakfast:(null===(a=e.Rooms[0])||void 0===a||null===(a=a.BasicInfo)||void 0===a||null===(a=a.MealInfo)||void 0===a?void 0:a.Title)||"",hotelid:null===(s=e.BasicInfo)||void 0===s?void 0:s.Id,roomid:null===(l=e.Rooms)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.BasicInfo)||void 0===l?void 0:l.Id};w.push(c)}));var P=null===m||void 0===m||null===(o=m.Segments)||void 0===o?void 0:o.map((function(e){return e.Flights.length<2?1:0})).join(","),N=null===m||void 0===m||null===(r=m.Segments)||void 0===r?void 0:r.reduce((function(e,n){return e+(n.Flights.length-1)}),0),D=null===m||void 0===m||null===(i=m.Segments)||void 0===i?void 0:i.reduce((function(e,n){for(var t=0,o=1;o<n.Flights.length;o++)if(n.Flights[o-1].ArriveInfo&&n.Flights[o].DepartInfo){var r=(0,k.yN)(n.Flights[o-1].ArriveInfo.DateTime,"YYYY-MM-DD HH:mm"),i=(0,k.yN)(n.Flights[o].DepartInfo.DateTime,"YYYY-MM-DD HH:mm");t+=M.Z.minuteDiff(r,i)}return e+t}),0),y={startdate:null===h||void 0===h?void 0:h.startDate,sdpid:null===h||void 0===h?void 0:h.productId,scity:null===h||void 0===h?void 0:h.saleCityId,dcity:null===h||void 0===h?void 0:h.departCityId,adult:S,child:T,is_rec:s,isdrct:P,num_trans:N,time_trans:D,isfixsegment:"TRUE",flights:I,hotels:w};return d.sdpTraceLogInfo=y,y}},Be=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,l,u,d,p,v,g,f,x,S,T,k,w,P,N,D,y,R,j,C,E,M,_,A,b,Z;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=c.getState(),o=t.ShoppingId,r=t.BasicInfo,i=t.prodType,s=t.IsContinueBook,l=t.queryorderid,u=t.newProcess,d=Re.getResource(),p=d.ShoppingResource,v=p.curDate,g=p.adultCount,f=p.childCount,x=p.infantCount,S=p.aliasInfo,T="grp"==i?"\u8ddf\u56e2\u6e38":"sdp"==i?"\u81ea\u7531\u884c":"\u90ae\u8f6e",k={attrs:[{key:"shoppingId",value:o}],contents:[{key:"\u9884\u8ba2\u6d41\u7a0b(\u6b63\u5e38\u9884\u8ba2\u3001\u7ee7\u7eed\u9884\u8ba2)",value:h?"\u6b63\u5e38\u9884\u8ba2":"\u7ee7\u7eed\u9884\u8ba2"},{key:"\u9884\u8ba2\u6d41\u7a0b(\u6b63\u5e38\u3001\u7f29\u77ed)",value:u?"\u7f29\u77ed\u9884\u8ba2\u6d41\u7a0b":"\u6b63\u5e38\u9884\u8ba2\u6d41\u7a0b"},{key:"\u4ea7\u54c1\u540d\u79f0",value:"("+r.ProductId+") "+r.MainName},{key:"\u51fa\u53d1\u57ce\u5e02",value:"("+r.DepartureId+") "+r.DepartureCityName},{key:"\u4ea7\u54c1\u7c7b\u578b\uff08\u8ddf\u56e2\u6e38\u3001\u81ea\u7531\u884c\u3001\u90ae\u8f6e\uff09",value:T},{key:"shoppingId",value:o},{key:"orderId",value:s?l:""},{key:"\u51fa\u53d1\u65f6\u95f4",value:v},{key:"\u7ebf\u8def",value:(null===S||void 0===S?void 0:S.alias)&&"".concat(null===S||void 0===S?void 0:S.alias,"\u7ebf")+(null===S||void 0===S?void 0:S.name)||""},{key:"\u51fa\u884c\u4eba\u6570",value:"\u6210\u4eba\uff1a".concat(g,"\u4e2a\uff0c\u513f\u7ae5\uff1a").concat(f,"\u4e2a\uff0c\u5a74\u513f\uff1a").concat(x,"\u4e2a")}],desc:"\u57fa\u672c\u4fe1\u606f"},O(k),w=[],n.forEach((function(e){e.content&&e.content.length&&(w=w.concat(e.content))})),2===m.length&&w.push({key:"\u9152\u5e97\u5206\u6279",value:String(m[1]-m[0])}),P={attrs:[{key:"shoppingId",value:o}],contents:w,desc:"\u9875\u9762\u8017\u65f6"},O(P),m=[];try{N=Fe(),D=Ve(),y=Le(),R=He(),j=Ue(),C=qe(),E=We(),M=Ke(),_=Oe(),A=Ge(),b=Ye(),Z=[].concat((0,I.Z)(N),(0,I.Z)(D),(0,I.Z)(y),(0,I.Z)(R),(0,I.Z)(j),(0,I.Z)(C),(0,I.Z)(E),(0,I.Z)(M),(0,I.Z)(_),(0,I.Z)(A),(0,I.Z)(b)),Z.map((function(e,n){setTimeout((function(){O(e)}),300*n)}))}catch(e){console.log("\ud83d\udc38 KM",e)}case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Fe=function(){var e=Re.getResource(),n=e.ShoppingId,t=e.ShoppingResource,o=e.BasicInfo,r=t.Flight,i=t.tourStatus,a=t.combinedTrans,s=t.flightFareRemark,l=t.flightSegments,c=null===r||void 0===r?void 0:r.TotalPriceInfo;if((0,k.xb)(c)||(0,k.xb)(l))return[];var u=[],d=(0,k.vu)(c),p=d.adultPrice,h=d.childPrice,v=d.TotalPrice,g=s.confirmDuration,f=(0,k.s9)(r,i,a),x=f.hasChangeFlightBtn,m=f.hasUpgradeCabinBtn,S=f.hasChangeCabinBtn,T={attrs:[{key:"shoppingId",value:n}],contents:[{key:"\u51fa\u7968\u786e\u8ba4\u65f6\u95f4",value:String(g)},{key:"\u822a\u73ed\u603b\u4ef7",value:String(v)},{key:"\u6210\u4eba\u603b\u4ef7",value:String(null===p||void 0===p?void 0:p.totalPrice)||""},{key:"\u513f\u7ae5\u603b\u4ef7",value:String(null===h||void 0===h?void 0:h.totalPrice)||""},{key:"\u66f4\u6362\u822a\u73ed\u6309\u94ae",value:x?"\u5c55\u793a":"\u4e0d\u5c55\u793a"},{key:"\u5347\u7ea7\u8231\u4f4d\u6309\u94ae",value:m?"\u5c55\u793a":"\u4e0d\u5c55\u793a"},{key:"\u66f4\u6362\u8231\u4f4d\u6309\u94ae",value:S?"\u5c55\u793a":"\u4e0d\u5c55\u793a"}],desc:"\u822a\u73ed"};return u.push(T),l.map((function(e,t){var r=e.Flights,i=e.segmentInfo,a=e.LogBaggageTip,s=(0,k.Is)(null===o||void 0===o?void 0:o.ProductCategoryId,i,t);r.map((function(e){var t=e.FlightNo,o=e.ArriveInfo,r=e.DepartInfo,i=e.cabinName,l=e.greyTransferInfo,c=e.redTransferInfo,d=e.orangeTransferInfo,p=e.greenTransferInfo,h="".concat(l.join(" ")," ").concat(c.join(" ")," ").concat(d.join(" ")," ").concat(p.join(" ")),v={attrs:[{key:"shoppingId",value:n}],contents:[{key:"\u822a\u73ed\u53f7",value:t},{key:"\u8d77\u98de\u57ce\u5e02",value:r.CityName},{key:"\u964d\u843d\u57ce\u5e02",value:o.CityName},{key:"\u8d77\u98de\u65f6\u95f4",value:(0,k.yN)(r.DateTime,"YYYY-MM-DD HH:mm")},{key:"\u964d\u843d\u65f6\u95f4",value:(0,k.yN)(o.DateTime,"YYYY-MM-DD HH:mm")},{key:"\u8231\u4f4d",value:i},{key:"\u4e2d\u8f6c\u4fe1\u606f",value:h.trim()},{key:"\u63d0\u9192\u8bdd\u672f",value:s.join("\uff0c")},{key:"\u662f\u5426\u65e0\u884c\u674e\u989d",value:a||""}],desc:"\u822a\u73ed"};u.push(v)}))})),u},Ve=function(){var e,n=Re.getResource(),t=n.ShoppingId,o=n.ShoppingResource,r=(null===o||void 0===o||null===(e=o.Hotel)||void 0===e?void 0:e.Hotels)||[];if((0,k.xb)(r))return[];var i=[];return r.map((function(e,n){var o,r=(0,k.aC)(e,n),a=r.hotelInfo,s=r.roomInfo,l=a.HotelId,c=a.HotelName,u=a.CheckinDate,d=a.CheckoutDate,p=s.RoomName,h=s.RoomID,v=s.numberLimitInfo,g=s.mealInfo,f=s.SelectedRoomCount,x=s.MaxRoomCount,m=s.hotelRecommendTip,S=s.ApplicationInfo,T=s.totalPrice,I=s.cancleHotelPolicy,w=s.cancelPenaltyPolicyType,P=m+" "+S,N={1:"\u4e0d\u53ef\u53d6\u6d88",2:"\u9650\u65f6\u514d\u8d39\u53d6\u6d88",3:"\u514d\u8d39\u53d6\u6d88",4:"\u6709\u635f\u53d6\u6d88",5:"30\u5206\u949f\u514d\u8d39\u53d6\u6d88"},D=1!==(null===e||void 0===e||null===(o=e.SegmentInfo)||void 0===o?void 0:o.MoreHotelStatus),y=!0,R={attrs:[{key:"shoppingId",value:t}],contents:[{key:"\u9152\u5e97id",value:String(l)},{key:"\u9152\u5e97\u540d\u79f0",value:c},{key:"\u5165\u4f4f\u65f6\u95f4",value:u},{key:"\u79bb\u5e97\u65f6\u95f4",value:d},{key:"\u623f\u578bid",value:String(h)},{key:"\u623f\u578b\u540d\u79f0",value:p},{key:"\u542b\u65e9\u4fe1\u606f",value:g},{key:"\u53ef\u4f4f\u4eba\u6570",value:v},{key:"\u63a8\u8350\u623f\u95f4\u6570",value:f+"\u95f4"},{key:"\u6bcf\u5355\u6700\u5927\u9884\u8ba2\u623f\u95f4\u6570",value:x+"\u95f4"},{key:"\u9875\u9762\u62ab\u9732\u8bdd\u672f",value:P.trim()},{key:"\u9000\u6539\u653f\u7b56",value:(null===I||void 0===I?void 0:I.Name)||N[w]},{key:"\u9152\u5e97\u603b\u4ef7",value:String(T)},{key:"\u66f4\u6362\u9152\u5e97\u6309\u94ae",value:D?"\u5c55\u793a":"\u4e0d\u5c55\u793a"},{key:"\u66f4\u6362\u623f\u578b\u6309\u94ae",value:y?"\u5c55\u793a":"\u4e0d\u5c55\u793a"}],desc:"\u9152\u5e97"};i.push(R)})),i},Le=function(){var e=c.getState(),n=e.TrainSaleStartTime,t=e.TrainSaleEndTime,o=Re.getResource(),r=o.ShoppingId,i=o.ShoppingResource,a=i.train;if((0,k.xb)(a))return[];var s=[];return a.map((function(e){var o=(0,k.sL)(e,n,t),i=o.trainInfo,a=i.TrainNo,l=i.SeatName,c=i.DepartDate,u=i.ArrivalDate,d=i.departureCity,p=i.departureStation,h=i.departureTime,v=i.arrivalCity,g=i.arrivalStation,f=i.arrivalTime,x=i.disclosureInformation,m=(0,k.yN)(c,"YYYY-MM-DD"),S=u.format("YYYY-MM-DD"),T={attrs:[{key:"shoppingId",value:r}],contents:[{key:"\u8f66\u6b21",value:a},{key:"\u51fa\u53d1\u57ce\u5e02",value:d},{key:"\u5230\u8fbe\u57ce\u5e02",value:v},{key:"\u51fa\u53d1\u65f6\u95f4",value:m+" "+h},{key:"\u5230\u8fbe\u65f6\u95f4",value:S+" "+f},{key:"\u51fa\u53d1\u7ad9",value:p},{key:"\u5230\u8fbe\u7ad9",value:g},{key:"\u5ea7\u5e2d",value:l},{key:"\u9875\u9762\u62ab\u9732\u8bdd\u672f",value:x}],desc:"\u706b\u8f66\u7968"};s.push(T)})),s},He=function(){var e=Re.getResource(),n=e.ShoppingResource,t=e.ShoppingId,o=(null===n||void 0===n?void 0:n.single)||[];if((0,k.xb)(o))return[];var r=(0,k.Vv)(o),i=[];return r.map((function(e){var n={attrs:[{key:"shoppingId",value:t}],contents:[{key:"\u8d44\u6e90id",value:String(e.ResourceId)},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u786e\u8ba4\u6807\u7b7e",value:e.ConfirmDuration},{key:"\u4efd\u6570",value:e.Count}],desc:"X\u8d44\u6e90\u5355\u9009\u9879"};i.push(n)})),i},Ue=function(){var e=c.getState(),n=e.ShoppingSelectedTokenList,t=Re.getResource(),o=t.ShoppingResource,r=t.ShoppingId,i=(null===o||void 0===o?void 0:o.discount)||[],a=(null===o||void 0===o?void 0:o.free)||[];if((0,k.xb)(i)&&(0,k.xb)(a))return[];var s=(0,k.U3)(i,n),l=(0,k.U3)(a,n),u=[].concat(s,l);if((0,k.xb)(u))return[];var d=[];return u.map((function(e){var n={attrs:[{key:"shoppingId",value:r}],contents:[{key:"\u8d44\u6e90id",value:String(e.ResourceId)},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u4efd\u6570",value:e.Count},{key:"\u4ef7\u683c",value:e.Price}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};d.push(n)})),d},Oe=function(){var e,n=c.getState(),t=n.ShoppingSelectedTokenList,o=Re.getResource(),r=o.ShoppingResource,i=o.ShoppingId,a=(null===r||void 0===r?void 0:r.combinedTrans)||[],s=(null===r||void 0===r?void 0:r.required)||[],l=(null===r||void 0===r?void 0:r.optional)||[],u=(null===r||void 0===r?void 0:r.room)||[],d=(null===(e=u[0])||void 0===e?void 0:e.resourceType)||"";"room"==d&&(l=[].concat(l,u));var p=s.filter((function(e){return-1==[1,2,3,4,5,6].indexOf(e.categorySeqId)}))||[],h=l.filter((function(e){return-1==[1,2,3,4,5,6].indexOf(e.categorySeqId)}))||[],v=[].concat(a,p);if((0,k.xb)(v)&&(0,k.xb)(h))return[];var g=(0,k.zt)(v,"\u5fc5\u9009",t),f=(0,k.zt)(h,"\u53ef\u9009",t),x=[].concat(g,f);if((0,k.xb)(x))return[];var m=[];return null===g||void 0===g||g.map((function(e){var n={attrs:[{key:"shoppingId",value:i}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u4efd\u6570",value:e.Count}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};m.push(n)})),null===f||void 0===f||f.map((function(e){var n={attrs:[{key:"shoppingId",value:i}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u4ef7\u683c",value:e.Price},{key:"\u4efd\u6570",value:e.Count}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};m.push(n)})),m},Ge=function(){var e,n=Re.getResource(),t=n.ShoppingResource,o=n.ShoppingId,r=(null===t||void 0===t?void 0:t.room)||[],i=(null===(e=r[0])||void 0===e?void 0:e.resourceType)||"";if("virtualRoom"==i){var a=r[0].title,s=r[0].groups[0].virtualRooms,l=null===s||void 0===s?void 0:s.find((function(e){return e.SelectedInfo})),c=null===l||void 0===l?void 0:l.SelectedInfo,u=null===c||void 0===c?void 0:c.SelectedCount,d=[],p={attrs:[{key:"shoppingId",value:o}],contents:[{key:"\u8d44\u6e90\u540d\u79f0",value:a},{key:"\u4efd\u6570",value:String(u)}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};return d.push(p),d}return[]},Ye=function(){var e,n=c.getState(),t=n.ShoppingSelectedTokenList,o=Re.getResource(),r=o.ShoppingResource,i=o.ShoppingId,a=(null===r||void 0===r||null===(e=r.visa)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.groups)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.datas)||[],s=(null===a||void 0===a?void 0:a.filter((function(e){return 1==(1&e.Basic.BMStatus)})))||[],l=(null===a||void 0===a?void 0:a.filter((function(e){return 1!==(1&e.Basic.BMStatus)})))||[];if((0,k.xb)(s)&&(0,k.xb)(l))return[];var u=(0,k.QV)(s,"\u5fc5\u9009",t),d=(0,k.QV)(l,"\u53ef\u9009",t),p=[].concat(u,d);if((0,k.xb)(p))return[];var h=[];return null===u||void 0===u||u.map((function(e){var n={attrs:[{key:"shoppingId",value:i}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u4efd\u6570",value:e.Count}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};h.push(n)})),null===d||void 0===d||d.map((function(e){var n={attrs:[{key:"shoppingId",value:i}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65e5\u671f",value:e.UseDate},{key:"\u4ef7\u683c",value:e.Price},{key:"\u4efd\u6570",value:e.Count}],desc:"X\u8d44\u6e90\u53ef\u9009\u9879"};h.push(n)})),h},qe=function(){var e,n=Re.getResource(),t=n.ShoppingResource,o=n.ShoppingId,r=(null===t||void 0===t||null===(e=t.transportation)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.groups)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.datas)||[],i=(null===t||void 0===t?void 0:t.Flight)||{},a=i.Segments,s=void 0===a?[]:a,l=i.FlightSeats,c=void 0===l?[]:l,u=(0,k.xb)((0,k._O)({Segments:s,FlightSeats:c}));if((0,k.xb)(r)||u)return[];var d=(0,k.vY)(r);if((0,k.xb)(d))return[];var p=[];return d.map((function(e){var n={attrs:[{key:"shoppingId",value:o}],contents:[{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u4f7f\u7528\u65f6\u95f4",value:e.UseDate},{key:"\u4e0a\u8f66\u5730\u70b9",value:e.DeparturePlace},{key:"\u4e0b\u8f66\u5730\u70b9",value:e.ArrivePlace},{key:"\u822a\u73ed\u53f7",value:e.FlightNo},{key:"\u8f66\u578b",value:e.CarType},{key:"\u63a5\u9001\u673a\u603b\u4ef7",value:e.Price}],desc:"\u63a5\u9001\u673a"};p.push(n)})),p},We=function(){var e=c.getState(),n=e.ShoppingSelectedTokenList,t=Re.getResource(),o=t.ShoppingResource,r=t.ShoppingId,i=(null===o||void 0===o?void 0:o.required)||[],a=(null===o||void 0===o?void 0:o.optional)||[],s=(null===o||void 0===o?void 0:o.TicketPoiUrlDic)||{},l=[].concat(i,a),u=l.find((function(e){return 5==e.categorySeqId}))||{};if((0,k.xb)(u))return[];var d=(0,k.Ll)(u,s,n);if((0,k.xb)(d))return[];var p=[];return d.map((function(e){var n={attrs:[{key:"shoppingId",value:r}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u5f00\u59cb\u65e5\u671f",value:e.UseDate},{key:"\u7ed3\u675f\u65e5\u671f",value:e.EndUseDate},{key:"\u4ef7\u683c",value:e.Price},{key:"\u4efd\u6570",value:e.Count}],desc:"\u666f\u70b9\u95e8\u7968"};p.push(n)})),p},Ke=function(){var e=c.getState(),n=e.ShoppingSelectedTokenList,t=Re.getResource(),o=t.ShoppingResource,r=t.ShoppingId,i=(null===o||void 0===o?void 0:o.required)||[],a=(null===o||void 0===o?void 0:o.optional)||[],s=i.filter((function(e){return-1!==[1,2,3,4,6].indexOf(e.categorySeqId)}))||[],l=a.filter((function(e){return-1!==[1,2,3,4,6].indexOf(e.categorySeqId)}))||[];if((0,k.xb)(s)&&(0,k.xb)(l))return[];var u=(0,k.zt)(s,"\u5fc5\u9009",n),d=(0,k.zt)(l,"\u53ef\u9009",n),p=[].concat(u,d);if((0,k.xb)(p))return[];var h=[];return null===u||void 0===u||u.map((function(e){var n={attrs:[{key:"shoppingId",value:r}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u5f00\u59cb\u65e5\u671f",value:e.UseDate},{key:"\u7ed3\u675f\u65e5\u671f",value:e.EndUseDate},{key:"\u4efd\u6570",value:e.Count}],desc:"\u73a9\u4e50\u6d3b\u52a8"};h.push(n)})),null===d||void 0===d||d.map((function(e){var n={attrs:[{key:"shoppingId",value:r}],contents:[{key:"\u8d44\u6e90id",value:e.ResourceId},{key:"\u8d44\u6e90\u540d\u79f0",value:e.ResourceName},{key:"\u5f00\u59cb\u65e5\u671f",value:e.UseDate},{key:"\u7ed3\u675f\u65e5\u671f",value:e.EndUseDate},{key:"\u4ef7\u683c",value:e.Price},{key:"\u4efd\u6570",value:e.Count}],desc:"\u73a9\u4e50\u6d3b\u52a8"};h.push(n)})),h},Je=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Re.getResource(),r=o.ShoppingId;R({attrs:[{key:"shoppingid",value:r}],module:"".concat(e,"\u5f39\u5c42"),role:C.GD.usr,action:C.Us.change,value:n?"\u6253\u5f00":"\u5173\u95ed",before:n?"\u5173\u95ed":"\u6253\u5f00"}),!(0,k.xb)(t)&&R({attrs:[{key:"shoppingid",value:r}],module:"".concat(e,"\u5f39\u5c42"),role:C.GD.sys,action:C.Us.show,jsonData:t})},Xe=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r,i,s,l,c,d,p,h,v,g,f,x,m,S,T=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},o=t.BackPageInfo,r=void 0===o?{}:o,i=t.clearTransportation,s=void 0!==i&&i,l=t.ShoppingCartInfo,c=void 0===l?{}:l,d=u.UPDATE_STATE,p=u.UPDATE_SHOPPING_STATE_FLAG,h=Re.getResource(),v=h.ShoppingResource,g=h.ShoppingId,f=h.Platform,x=(null===v||void 0===v||null===(n=v.transportation)||void 0===n||null===(n=n[0].groups)||void 0===n?void 0:n[0].datas)||[],p({flagData:{isShowPriceListMask:!1}}),e.prev=5,null!==c&&void 0!==c&&c.flightUpdated&&Ne.setFlightBaggageStorage(g),e.next=9,De.handleSetShoppingSelectedTokenListFromShoppingCart();case 9:if(m=0,f!==_.NN.WEIXIN){e.next=18;break}return e.next=13,Ne.getOrderPageStorage();case 13:S=e.sent,m=(null===S||void 0===S?void 0:S.useCouponStatus)||0,d({useCouponState:m,backFromOrderPage:!1,isExtraResourceReady:!1}),e.next=19;break;case 18:f===_.NN.CTRIPRN&&(m=(null===r||void 0===r?void 0:r.useCouponStatus)||0,d({useCouponState:m,backFromOrderPage:!1,isExtraResourceReady:!1}));case 19:if(K({BackPageInfo:r,ShoppingCartInfo:c}),e.t0=!L,!e.t0){e.next=24;break}return e.next=24,ie({clearTransportation:s,BackPageInfo:r});case 24:s&&!(0,k.xb)(x)&&De.handleShowResourceChangedTipMask(),e.next=30;break;case 27:e.prev=27,e.t1=e["catch"](5),G("pageDidBack",e.t1);case 30:case"end":return e.stop()}}),e,null,[[5,27]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(){var t,o,r,i,s,l;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=c.getState(),o=t.IsNewShopping,r=t.ShoppingId,i=t.params,s=t.query,R({attrs:[{key:"ShoppingId",value:r}],scene:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u518d\u8bd5\u4e00\u6b21",role:C.GD.usr,action:C.Us.click,value:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u518d\u8bd5\u4e00\u6b21"}),!r){n.next=14;break}return n.next=5,Ne.getResourceTypeInfoFromStorage(r);case 5:if(l=n.sent,!L){n.next=10;break}return n.next=9,Q({resourceTypeInfo:l,IsNewShopping:o,ShoppingId:r});case 9:return n.abrupt("return");case 10:Q({resourceTypeInfo:l,IsNewShopping:o,ShoppingId:r}),o?re({isSSR:!1}):ie({isShowLoading:!1}),n.next=15;break;case 14:e&&e.selectDateFn.current&&i.line&&e.selectDateFn.current.initCalendar({productId:i.line,alias:s.alias||"",departCityId:i.departCityId});case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),ze=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,c;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.ShoppingId,o=n.alias,r=n.line,i=u.UPDATE_PARAMS,e.prev=2,e.next=5,Promise.all([Ne.clearResourceNeedSelectedDateStorage(),Ne.clearNeedTurnBackSelectTokensStorage()]);case 5:return s={shoppingid:t,isnewshopping:"1",line:r},o&&(s=(0,l.Z)((0,l.Z)({},s),{},{alias:o})),e.next=9,en(s);case 9:return o&&i({alias:o}),r&&i({line:r}),e.next=13,Ne.getResourceTypeInfoFromStorage(t);case 13:if(c=e.sent,!L){e.next=18;break}return e.next=17,Q({resourceTypeInfo:c,IsNewShopping:!0,ShoppingId:t});case 17:return e.abrupt("return");case 18:Q({resourceTypeInfo:c,IsNewShopping:!0,ShoppingId:t}),re({isSSR:!1}),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),G("handleCalendarPopCallBack",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(n){return e.apply(this,arguments)}}(),Qe=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var o,r,i,s,l,c,d,p,h,g,f,x,m,S,T;return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=u.UPDATE_STATE,r=t.result,i=t.payload,!r){n.next=18;break}return s=i.recommendSearch,l=i.cabinInfo,c=i.shoppingDetail,d=i.extraResource,p=s.ShoppingId,e.set("CALENDAR_SDP_SHOPPING_CHANGE",!0,300),n.next=8,Ne.getResourceTypeInfoFromStorage(p);case 8:return h=n.sent,Q({resourceTypeInfo:h,IsNewShopping:!0,ShoppingId:p}),g=c.prefetchSetting||{},f=g.resource||{},x=f.enabled,m=void 0!==x&&x,S=f.expiredtime,T=void 0===S?0:S,m&&e.set("RESOURCE_FIRST_SCREEN_INFO",(0,v.Z)({},p,{extraResource:d,CabinInfo:l}),T/1e3),n.next=15,re({});case 15:De.handleShowResourceChangedTipMask(),n.next=20;break;case 18:o({isShowErrorNewProcess:!0}),De.hideSelectCalendarPop();case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),en=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,o,r,i,s,d,p,h;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.getState(),o=t.query,r=t.isInCtripApp,i=t.Platform,s=u.UPDATE_STATE,i!==_.NN.CTRIPH5){e.next=8;break}if(o=(0,l.Z)((0,l.Z)({},o),n),s({query:o}),!L){e.next=7;break}return e.abrupt("return");case 7:void 0!==("undefined"===typeof V?"undefined":(0,S.Z)(V))&&null!==(d=V)&&void 0!==d&&null!==(d=d.location)&&void 0!==d&&null!==(d=d.pathname)&&void 0!==d&&d.includes("resource")&&(h="?".concat((0,k.UK)(o,r)),null===(p=history)||void 0===p||p.replaceState(null,"",h));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{store:c,actions:(0,l.Z)((0,l.Z)({},u),{},{storages:Ne,handlers:De,helpers:Re,ctrl:d,jump:D,mask:X,actionTraceLog:Ee,newActionTraceLog:Me,logMaskStatus:Je,handleNetWorkErrorCallBack:$e,handleCalendarPopCallBack:ze,handleExtendStayCallBack:Qe,pageDidBack:Xe,eventCenter:e.eventCenter,initStore:z,initSkeletion:Q,fetchFirstScreen:ee,fetchSecondScreen:ae,fetchPriceDetail:de,fetchCruiseTourDetail:Pe,fetchCanBooking:ke,fetchUpdateShoppingCart:he,setLogInfo:be,sendRNPV:Ce,setSdpTraceLogInfo:Ze,preloadCallbackAction:$,fetchNewShopping:re,fetchResourceInfoFromShoppingId:ie,fetchFirstScreenFromCache:ne,updatePageUrlQuery:en,traceKMLogMessage:Y})}})),G=t(71515),Y=t(2269),q=function(e){var n;switch(e){case"FLIGHT":case"37":case"1176":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue95b"});break;case"HOTEL":case"56":case"1160":case"VIRTUAL_ROOM_LIST":case"54":case"1179":case"30":case"1175":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue959"});break;case"TRAIN":case"19":case"1126":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue95d"});break;case"22":case"1173":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue96d"});break;case"20":case"1131":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue965"});break;case"2":case"1132":case"CAR":case"AirPortCAR":case"51":case"1157":case"32":case"1087":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue95f"});break;case"15":case"1148":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue979"});break;case"58":case"1037":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue96a"});break;case"14":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue972"});break;case"4":case"1029":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue96c"});break;case"18":case"1174":case"PROMOTION":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue980"});break;case"DISCOUNTS":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue97b"});break;case"24":case"1102":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\uf13f"});break;case"21":case"1129":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue968"});break;case"-1":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\udb81\udd46"});break;case"1250":case"1251":case"1252":case"1259":case"CruiseFeatures":n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\uf631"});break;default:n=(0,Y.jsx)(G.Text,{className:"ModuleTitleIcon",children:"\ue1ac"});break}return n};function W(e){var n=e.children;return(0,Y.jsx)(G.View,{className:"ModBgWhite",children:n})}function K(e){var n=e.icon,t=e.title,o=e.tips;return(0,Y.jsx)(G.View,{className:"ModuleTitleContainer",children:(0,Y.jsxs)(G.View,{className:"ModuleTitle",children:[n||null,(0,Y.jsx)(G.Text,{className:"ModuleTitleText",children:t||"\u6807\u9898"}),o||null]})})}function J(e){var n=e.children,t=e.error,o=e.last,r=(e.noBg,e.id);return(0,Y.jsx)(G.View,{className:"ModuleBox ".concat(t?"ModuleBoxError":""),style:o?{marginBottom:0}:{marginBottom:16},id:r,children:n})}function X(e){var n=e.text,t=e.onPress,o=e.tag;return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){t&&t()},children:n}),!!o&&(0,Y.jsx)(G.View,{className:"ModuleBoxBottomTextTag",children:(0,Y.jsx)(G.Text,{style:{paddingLeft:2,paddingRight:2,paddingTop:1,fontSize:8,color:"#FFF"},children:o})})]})}var $=f.memo(Q),z=$;function Q(e){var n=e.className;return(0,Y.jsx)(G.View,{className:"SkeletonText ".concat(n)})}var ee={FLIGHT:"\u673a\u7968",HOTEL:"\u9152\u5e97",TRAIN:"\u706b\u8f66\u7968",OTHER:"\u5176\u4ed6",COMMON:""};function ne(e){var n=e.type,t=ee[n];return void 0===t?null:(0,Y.jsxs)(f.Fragment,{children:[t?(0,Y.jsx)(G.View,{className:"MarginLeft32 MarginRight32",children:(0,Y.jsx)(K,{icon:q("type"),title:t})}):(0,Y.jsx)(z,{className:"Title"}),(0,Y.jsx)(te,{})]})}function te(){return(0,Y.jsxs)(G.View,{className:"SkeletonCard",children:[(0,Y.jsx)(z,{className:"CardTitle"}),(0,Y.jsxs)(G.View,{className:"MarginTop16 FlexAlignCenter",children:[(0,Y.jsx)(z,{className:"CardSubTitle MarginRight8"}),(0,Y.jsx)(z,{className:"CardSubTitle MarginRight8"}),(0,Y.jsx)(z,{className:"CardSubTitle MarginRight8"})]}),(0,Y.jsx)(z,{className:"CardText MarginTop16"}),(0,Y.jsx)(z,{className:"CardText MarginTop16"}),(0,Y.jsx)(z,{className:"CardTextHalf MarginTop16"})]})}var oe=f.memo(ie),re=oe;function ie(){var e,n=O.useState(),t=n.resourceTypeInfo,o=(null===t||void 0===t?void 0:t.isReRecommend)||!1,r=(null===t||void 0===t?void 0:t.Hotel)||!1,i=(null===t||void 0===t?void 0:t.Flight)||!1,a=(null===t||void 0===t?void 0:t.Option)||!1,s=(null===t||void 0===t?void 0:t.Trains)||!1,l=[];if(o){if(i&&l.push("FLIGHT"),s&&l.push("TRAIN"),r&&l.push("HOTEL"),a&&l.push("OTHER"),(null===(e=l)||void 0===e?void 0:e.length)<5)for(var c=null===(u=l)||void 0===u?void 0:u.length;c<5;c++){var u;l.push("COMMON")}}else l=["COMMON","COMMON","COMMON","COMMON"];return(0,Y.jsxs)(G.View,{className:"SkeletonContainer",children:[(0,Y.jsxs)(G.View,{className:"SkeletonTop MarginBottom32",children:[(0,Y.jsx)(z,{className:"TopLarge"}),(0,Y.jsx)(z,{className:"TopSmall"})]}),l.map((function(e,n){return(0,Y.jsx)(ne,{type:e},n)}))]})}function ae(){var e=O.useActions(),n=e.handleNetWorkErrorCallBack;return(0,Y.jsxs)(G.View,{className:"InvalidPage",children:[(0,Y.jsx)(G.Image,{className:"InvalidPageImg",src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/tourcrn/nonetwork.png"}),(0,Y.jsx)(G.View,{className:"InvalidPageText",children:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e"}),(0,Y.jsx)(G.View,{className:"InvalidPageBtn",onClick:function(){n()},children:"\u518d\u8bd5\u4e00\u6b21"})]})}var se=t(90129),le={0:"\u7279\u60e0\u7968",1:"\u6210\u4eba\u7968",2:"\u513f\u7ae5\u7968",4:"\u5b66\u751f\u7968",8:"\u8001\u4eba\u7968",16:"\u4f18\u5f85\u7968",32:"\u4eb2\u5b50\u5bb6\u5ead\u7968"},ce={1:"\u968f\u65f6\u9000",2:"\u975e\u968f\u65f6\u9000",3:"\u4e0d\u53ef\u9000"},ue={1:"TagGreen",2:"TagBlue",3:"TagRed"},de={1:"tag_green",2:"tag_blue",3:"tag_red"};function pe(){var e=O.useState((function(e){var n=e.ShoppingId,t=e.Resource,o=e.ShoppingSelectedTokenList,r=e.isShowInputError,i=e.flags;return{ShoppingId:n,Resource:t,ShoppingSelectedTokenList:o,isShowInputError:r,flags:i}})),n=e.ShoppingId,t=e.Resource,o=e.ShoppingSelectedTokenList,r=e.isShowInputError,i=e.flags,a=(null===t||void 0===t?void 0:t[n])||{},s=(null===a||void 0===a?void 0:a.ErrorTokenList)||[];return{ShoppingId:n,ShoppingSelectedTokenList:o,ShoppingResource:a,Resource:t,flags:i,ErrorTokenList:s,isShowInputError:r}}function he(){var e=O.useState((function(e){var n=e.backFromOrderPage,t=e.flags,o=e.ABTestResult,r=e.params,i=e.isShowInvalidProduct,a=e.isShowErrorNewProcess,s=e.isShowSkeleton;return{backFromOrderPage:n,flags:t,ABTestResult:o,params:r,isShowInvalidProduct:i,isShowErrorNewProcess:a,isShowSkeleton:s}})),n=e.backFromOrderPage,t=e.flags,o=e.ABTestResult,r=e.params,i=e.isShowInvalidProduct,a=e.isShowErrorNewProcess,s=e.isShowSkeleton,l=r.segmentType;return{backFromOrderPage:n,flags:t,ABTestResult:o,segmentType:l,isShowInvalidProduct:i,isShowErrorPage:a,isShowSkeleton:s}}function ve(){var e=O.useState((function(e){var n=e.ABTestResult,t=e.flags,o=e.params,r=e.query;return{ABTestResult:n,flags:t,params:o,query:r}})),n=(e.ABTestResult,e.flags),t=e.params,o=e.query,r=(null===n||void 0===n?void 0:n.isShowSelectPassengerMask)||!1,i=(null===n||void 0===n?void 0:n.isShowSelectDateMask)||!1,a={productId:t.line,alias:o.alias||"",departCityId:t.departCityId};return{isShowSelectPassengerMask:r,isShowSelectDateMask:i,productParams:a}}function ge(){var e=O.useState((function(e){var n=e.ABTestResult,t=e.pageStatus,o=e.isShowSkeleton,r=e.isShowInvalidProduct,i=e.isShowErrorNewProcess,a=e.IsContinueBook,s=e.flags,l=e.params,c=e.query,u=e.isCruise,d=e.isCanEditPassenger,p=e.ShoppingId;return{ABTestResult:n,pageStatus:t,isShowSkeleton:o,isShowInvalidProduct:r,isShowErrorNewProcess:i,IsContinueBook:a,flags:s,params:l,query:c,isCruise:u,isCanEditPassenger:d,ShoppingId:p}})),n=e.ABTestResult,t=e.pageStatus,o=e.isShowSkeleton,r=e.isShowInvalidProduct,i=e.isShowErrorNewProcess,a=e.IsContinueBook,s=e.flags,l=e.params,c=e.query,u=e.isCruise,d=e.isCanEditPassenger,p=e.ShoppingId,h=(null===t||void 0===t?void 0:t.isPrivateGroup)||!1,v=(null===s||void 0===s?void 0:s.isShowSelectPassengerMask)||!1,g={productId:l.line,alias:c.alias||"",departCityId:l.departCityId};return{isShowErrorPage:i,isShowInvalidProduct:r,isShowSkeleton:o,isPrivateGroup:h,ABTestResult:n,isShowSelectPassengerMask:v,IsContinueBook:a,isCruise:u,isCanEditPassenger:d,productParams:g,ShoppingId:p}}function fe(){var e=O.useState((function(e){var n=e.params,t=e.flags,o=e.pageStatus,r=e.BasicInfo,i=e.VendorInfo,a=e.imEntryInfo,s=e.FeeInfoList,l=e.BasicExtendInfo,c=e.CostInfoList,u=e.userInfo,d=e.isTradeMinPriceMode;return{params:n,flags:t,pageStatus:o,BasicInfo:r,VendorInfo:i,imEntryInfo:a,FeeInfoList:s,BasicExtendInfo:l,CostInfoList:c,userInfo:u,isTradeMinPriceMode:d}})),n=e.params,t=e.flags,o=e.pageStatus,r=e.BasicInfo,i=e.VendorInfo,a=e.imEntryInfo,s=e.FeeInfoList,l=e.BasicExtendInfo,c=e.CostInfoList,u=e.userInfo,d=e.isTradeMinPriceMode,p=pe(),h=p.ShoppingResource,v=p.ShoppingId,g=(null===t||void 0===t?void 0:t.isShowPriceListMask)||!1,f=null===h||void 0===h?void 0:h.tagInfo,x=(null===h||void 0===h?void 0:h.priceDetail)||{},m={ProductType:null!==o&&void 0!==o&&o.isCruise?4:null!==o&&void 0!==o&&o.isPureDiyfhxsdp?2:3},S=(null===o||void 0===o?void 0:o.isStudy)||!1,T={LevelName:(null===u||void 0===u?void 0:u.VipGradeRemark)||""},I={isShowPriceDetailMask:g,isStudy:S,priceDetail:x,FeeInfoList:s,productBasicInfo:m,BasicExtendInfo:l,isCustomNavigation:!1,tagInfo:f,levelInfo:T,sourceFrom:"resource",CostInfoList:c,isTradeMinPriceMode:d},k=(null===t||void 0===t?void 0:t.isShowServiceMask)||!1,w=n.productId,P=n.line,N=(null===h||void 0===h?void 0:h.curLine)||P,D={isShowIMEntryInfo:k,productBasicInfo:m,imEntryInfo:a,productId:w,BasicInfo:r,VendorInfo:i,ShoppingId:v,pageId:null===o||void 0===o?void 0:o.pageId,curLine:N},y={isShowDatePicker:(null===t||void 0===t?void 0:t.isShowDatePicker)||!1,isShowFlightPartitionedMask:(null===t||void 0===t?void 0:t.isShowFlightPartitionedMask)||!1,isShowHotelRoomCountMask:(null===t||void 0===t?void 0:t.isShowHotelRoomCountMask)||!1,isShowResourceSelectMask:(null===t||void 0===t?void 0:t.isShowResourceSelectMask)||!1,isShowResourceDescriptionInfoMask:(null===t||void 0===t?void 0:t.isShowResourceDescriptionInfoMask)||!1,isShowResourceAddInfoMask:(null===t||void 0===t?void 0:t.isShowResourceAddInfoMask)||!1,isShowVisaDescriptionMask:(null===t||void 0===t?void 0:t.isShowVisaDescriptionMask)||!1,isShowResourceSelectAddInfoMask:(null===t||void 0===t?void 0:t.isShowResourceSelectAddInfoMask)||!1,isShowCruiseTourMask:(null===t||void 0===t?void 0:t.isShowCruiseTourMask)||!1,isShowRefundRuleMask:(null===t||void 0===t?void 0:t.isShowRefundRuleMask)||!1,isShowSelectPassengerMask:(null===t||void 0===t?void 0:t.isShowSelectPassengerMask)||!1,isShowResourceChangeTipMask:(null===t||void 0===t?void 0:t.isShowResourceChangeTipMask)||!1,isShowPriceListMask:(null===t||void 0===t?void 0:t.isShowPriceListMask)||!1,isShowServiceMask:(null===t||void 0===t?void 0:t.isShowServiceMask)||!1},R={isShowAirTicketChangeInfoMask:(null===t||void 0===t?void 0:t.isShowAirTicketChangeInfoMask)||!1,isShowAirHornInfoMask:(null===t||void 0===t?void 0:t.isShowAirHornInfoMask)||!1,isShowFlightTransferMask:(null===t||void 0===t?void 0:t.isShowFlightTransferMask)||!1,isShowHotelPolicyMask:(null===t||void 0===t?void 0:t.isShowHotelPolicyMask)||!1,isShowRoomInfoMask:(null===t||void 0===t?void 0:t.isShowRoomInfoMask)||!1,isShowGroupDescriptionMask:(null===t||void 0===t?void 0:t.isShowGroupDescriptionMask)||!1};return{showServicePopProps:D,shoppingCartMaskFlags:R,resourceMaskFlags:y,priceDetailPopProps:I}}function xe(){var e=O.useState((function(e){var n=e.params,t=e.query,o=e.userInfo,r=e.isTradeMinPriceMode;return{params:n,query:t,userInfo:o,isTradeMinPriceMode:r}})),n=e.params,t=e.query,o=(e.userInfo,e.isTradeMinPriceMode),r=pe(),i=r.ShoppingResource,a=r.flags,s=(null===a||void 0===a?void 0:a.isShowPriceListMask)||!1,l=null===i||void 0===i?void 0:i.tagInfo,c=(null===i||void 0===i?void 0:i.priceDetail)||{},u={productId:n.line,alias:t.alias||"",departCityId:n.departCityId};return{isShowPriceListMask:s,isTradeMinPriceMode:o,priceDetail:c,tagInfo:l,productParams:u}}function me(){var e,n,t,o=O.useState((function(e){var n=e.BasicInfo,t=e.isExtraResourceReady,o=e.pageStatus,r=e.VendorInfo,i=e.imEntryInfo,a=e.ABTestResult;return{BasicInfo:n,isExtraResourceReady:t,pageStatus:o,VendorInfo:r,imEntryInfo:i,ABTestResult:a}})),r=o.BasicInfo,i=o.isExtraResourceReady,a=o.pageStatus,s=(o.VendorInfo,o.imEntryInfo,o.ABTestResult),l=pe(),c=l.ShoppingResource,u=(l.ShoppingId,c.flightSegments||[]),d=(null===c||void 0===c||null===(e=c.Hotel)||void 0===e?void 0:e.Hotels)||[];(0,k.PW)(d);var p=c.childCount,h=(null===c||void 0===c?void 0:c.train)||[],v=i||!1,g=(null===c||void 0===c?void 0:c.single)||[],f=(null===g||void 0===g?void 0:g.find((function(e){return 19==e.categoryId})))||{},x=(null===g||void 0===g?void 0:g.find((function(e){return 22==e.categoryId})))||{},m=(null===g||void 0===g?void 0:g.find((function(e){return 20==e.categoryId})))||{},S=(null===g||void 0===g?void 0:g.find((function(e){return 21==e.categoryId})))||{},T=(null===c||void 0===c?void 0:c.room)||[],I=(null===c||void 0===c?void 0:c.combinedTrans)||[],w=(null===c||void 0===c||null===(n=c.visa)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.groups)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.datas)||[],P=(null===w||void 0===w?void 0:w.filter((function(e){return 1==(1&e.Basic.BMStatus)})))||[],N=(null===w||void 0===w?void 0:w.filter((function(e){return 1!==(1&e.Basic.BMStatus)})))||[],D=(null===c||void 0===c?void 0:c.VisaPolicyInfoData)||[],y=11==(null===r||void 0===r?void 0:r.ProductCategoryId)&&(0,k.xb)(w)&&!(0,k.xb)(D),R=11==(null===r||void 0===r?void 0:r.ProductCategoryId)&&(0,k.xb)(w)&&(0,k.xb)(D);y=!1,R=!1;var j=(null===c||void 0===c?void 0:c.discount)||[],C=(null===c||void 0===c?void 0:c.free)||[],E=(null===c||void 0===c?void 0:c.required)||[],M=(null===c||void 0===c?void 0:c.optional)||[],_=(null===c||void 0===c||null===(t=c.transportation)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.groups)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.datas)||[],A=(null===c||void 0===c?void 0:c.cruiseTour)||[],b=[],Z=[];null===A||void 0===A||A.map((function(e){e.groups[0].IsMust?b.push(e):Z.push(e)}));var B=N.length||y||R||_.length||M.length||Z.length,F=(null===a||void 0===a?void 0:a.isPrivateGroup)||!1;return{flightSegments:u,Hotels:d,childCount:p,Trains:h,extraReady:v,singleTrain:f,singleSegment:x,singleBus:m,singleBoat:S,room:T,combinedTrans:I,requiredVisa:P,visa:w,required:E,discount:j,free:C,optionVisa:N,freeOrArrivalVisa:y,selfVisa:R,transportation:_,requiredCruiseTour:b,optionalCruiseTour:Z,optional:M,optionLine:B,ABTestResult:s,isPrivateGroup:F}}function Se(){var e=O.useState((function(e){var n=e.pageStatus,t=e.IsContinueBook,o=e.isSecondDataReady,r=e.passengerCount,i=e.isCanEditPassenger,a=e.isInBestoneApp;return{pageStatus:n,IsContinueBook:t,isSecondDataReady:o,passengerCount:r,isCanEditPassenger:i,isInBestoneApp:a}})),n=e.pageStatus,t=e.IsContinueBook,o=e.isSecondDataReady,r=e.passengerCount,i=e.isCanEditPassenger,a=e.isInBestoneApp,s=r||{},l=s.adultCount,c=s.childCount,u=s.infantCount,d=null===n||void 0===n?void 0:n.isCruise,p="",h="",v="";(0,k.xb)(l)||(p=l+"\u6210\u4eba"),(0,k.xb)(c)||(h=c+"\u513f\u7ae5"),(0,k.xb)(u)||(v=u+"\u5a74\u513f");var g={passenger:(0,k.kb)(r)};return{isCruise:d,IsContinueBook:t,isSecondDataReady:o,isCanEditPassenger:i,adultCountUI:p,childCountUI:h,infantCountUI:v,isInBestoneApp:a,passengerLogInfo:g}}function Te(){var e,n=O.useState((function(e){var n=e.isTradeMinPriceMode;return{isTradeMinPriceMode:n}})),t=n.isTradeMinPriceMode,o=pe(),r=o.ShoppingResource,i=(null===r||void 0===r||null===(e=r.Flight)||void 0===e?void 0:e.TotalPriceInfo)||{},a=(null===r||void 0===r?void 0:r.PendingPartitionedFlight)||{},s=(0,k.zH)(i,a,t),l=null===r||void 0===r?void 0:r.pendingFlightSegments;return{diffPrice:s,flightSegments:l}}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=O.useState(),t=n.isTradeMinPriceMode,o=n.PartitionStatus,r=pe(),i=r.ShoppingResource,a=(null===i||void 0===i?void 0:i.Flight)||{},s=(null===a||void 0===a?void 0:a.TotalPriceInfo)||{},l=null===o||void 0===o?void 0:o.FlightSearchStatus,c=(null===i||void 0===i?void 0:i.PendingPartitionedFlight)||{},u=(0,k.zH)(s,c,t),d={viewmoretype:u>0?"\u4f4e\u4ef7":"\u9ad8\u6027\u4ef7\u6bd4",remark:u>0?"\u4fbf\u5b9c\uffe5".concat(u):"\u9ad8\u6027\u4ef7\u6bd4"},p={};if(!(0,k.xb)(e)){var h=(0,k.GR)(e,null),v=h.flightLogInfo,g=void 0===v?{}:v;(0,k.xb)(g)||(p=g)}return{FlightSearchStatus:l,diffPrice:u,flightPartitionLogInfo:d,flightLogInfo:p}}function ke(){var e=pe(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.Flight)||{},o=(null===n||void 0===n?void 0:n.flightSegments)||[],r=(null===n||void 0===n?void 0:n.flightHornContent)||{},i=(null===r||void 0===r?void 0:r.Notifications)||[],a=(null===n||void 0===n?void 0:n.flightFareRemark)||{},s=t.TotalPriceInfo,l=void 0===s?{}:s,c=t.SeatCount,u=l.Tags,d=void 0===u?[]:u,p=d.filter((function(e){return"SpringMembership"===e.Type}))[0],h=a.confirmDuration,v=a.reduceText,g=a.adultAgeInfoArray,f=a.normalFeeAndBaggageArray,x=a.warningFeeAndBaggageArray,m=a.warningBriefTagArray,S="\u9000\u6539\u7b7e\u3001\u884c\u674e\u989d\u53ca\u8d2d\u7968\u8bf4\u660e",T=(0,k.GR)(o,a),I=T.flightLogInfo,w=T.segmentsLogInfo;return{SpringTag:p,SeatCount:c,confirmDuration:h,reduceText:v,Notifications:i,normalFeeAndBaggageArray:f,adultAgeInfoArray:g,warningFeeAndBaggageArray:x,warningBriefTagArray:m,AirTicketInfoTitle:S,flightLogInfo:I,segmentsLogInfo:w}}function we(){var e=pe(),n=e.ShoppingResource,t=e.ShoppingId,o=e.ErrorTokenList,r=O.useState((function(e){var n=e.BasicInfo;return{BasicInfo:n}})),i=r.BasicInfo,a=n.adultCount,s=n.childCount,l=n.infantCount,c=n.childAge,u=null===n||void 0===n?void 0:n.tourStatus,d=null===n||void 0===n?void 0:n.combinedTrans,p=(null===n||void 0===n?void 0:n.Flight)||{},h=(null===n||void 0===n?void 0:n.flightSegments)||[],v=p.Tokens,g=void 0===v?[]:v,f=p.TotalPriceInfo,x=void 0===f?{}:f,m=p.HasMore,S=(null===x||void 0===x?void 0:x.Tags)||[],T=S&&S.filter((function(e){return"SearchMoreGrade"===e.Type})).length&&"T"===S.filter((function(e){return"SearchMoreGrade"===e.Type}))[0].Name&&[6,8].includes(u)&&!d,I=(null===h||void 0===h?void 0:h.some((function(e){var n;return!(null===e||void 0===e||null===(n=e.segmentInfo)||void 0===n||!n.hasNoCheckBaggage)})))||!1,w=!I&&S.some((function(e){return"HasLessLimitPrice"==(null===e||void 0===e?void 0:e.Type)})),P={TotalPriceInfo:x,adt:a,cld:s,ift:l,cldAges:JSON.stringify(c),isIntl:11===(null===i||void 0===i?void 0:i.ProductCategoryId)},N=n.flightTokenMap,D=(0,k.BU)(N,o),y=n.ReselectTokenInfoList||[],R=g.some((function(e){return y[0]===e.Token||y[0]===e.CompareToken}));return{canUpgrade:T,HasLessLimitPrice:w,HasNoCheckBaggage:I,errorTip:D,HasMore:m,ShoppingId:t,jumpParams:P,isShowReselectTips:R}}function Pe(e){var n=e.Segment,t=e.index,o=O.useState((function(e){var n=e.BasicInfo;return{BasicInfo:n}})),r=o.BasicInfo,i=n.SegmentNo,a=n.Flights,s=n.DurationMinute,l=n.segmentInfo,c=n.CompareToken,u=n.Token,d=l.DepartInfo,p=l.ArriveInfo,h=l.isFlightPending,v=l.isFlightTimePending,g=(0,k.yN)(null===d||void 0===d?void 0:d.DateTime,"MM-DD(\u5468w)"),f=(null===d||void 0===d?void 0:d.CityName)||"",x=(null===p||void 0===p?void 0:p.CityName)||"",m=h?"\u822a\u73ed\u5f85\u5b9a":v?"\u65f6\u95f4\u5f85\u5b9a":(0,k.LU)(s),S=(0,k.Is)(null===r||void 0===r?void 0:r.ProductCategoryId,l,t);return{Token:u,CompareToken:c,departDate:g,departCity:f,arriveCity:x,isFlightPending:h,isFlightTimePending:v,timeText:m,Flights:a,SegmentNo:i,tipsArray:S}}function Ne(e){var n=O.useState((function(e){var n=e.TrainSaleStartTime,t=e.TrainSaleEndTime;return{TrainSaleStartTime:n,TrainSaleEndTime:t}})),t=n.TrainSaleStartTime,o=n.TrainSaleEndTime,r=e.map((function(e){return(0,k.sL)(e,t,o)}));return{trains:r}}function De(e){var n=pe(),t=n.ErrorTokenList,o=e.trainInfo,r=e.jumpParams,i=o.Token,a=o.TrainNo,s=o.SeatName,l=-1!==(null===t||void 0===t?void 0:t.indexOf(i)),c="";return l&&(c="\u60a8\u6240\u9009\u62e9\u7684\u8f66\u6b21 ".concat(a," ").concat(s," \u5df2\u8ba2\u5b8c\uff0c\u8bf7\u66f4\u6362\u5176\u4ed6\u8f66\u6b21")),{isShowWarning:l,errorTip:c,trainInfo:o,jumpParams:r}}function ye(){var e=O.useState((function(e){var n=e.PartitionStatus;return{PartitionStatus:n}})),n=e.PartitionStatus,t=(null===n||void 0===n?void 0:n.HotelSearchStatus)||"notchanged",o=(null===n||void 0===n?void 0:n.HotelChangedText)||"",r="";return"loading"===t&&(r="\u6b63\u5728\u4e3a\u60a8\u67e5\u8be2\u66f4\u591a\u623f\u578b\u4ef7\u683c\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"),"changed"===t&&(r=o),{HotelSearchStatus:t,hotelSearchStr:r}}function Re(e,n){var t=pe(),o=t.ErrorTokenList,r=t.ShoppingResource,i=(0,k.aC)(e,n),a=i.hotelInfo,s=i.roomInfo,l=i.jumpParams,c=!1;o&&(o.includes(a.HotelToken)||o.includes(s.RoomToken))&&(c=!0);var u="";c&&s.BaseRoomName&&(u="\u60a8\u9009\u62e9\u7684".concat(s.BaseRoomName,"\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u66f4\u6362\u5176\u4ed6\u623f\u578b\u6216\u9152\u5e97"));var d=r.ReselectTokenInfoList||[],p=d[0]===a.HotelToken||d[0]===s.RoomToken,h=(0,k.YE)(a,s);return{hotelInfo:a,roomInfo:s,isShowWarning:c,isShowReselectTips:p,errorTip:u,jumpParams:l,hotelLogInfo:h}}function je(){var e=pe(),n=e.ShoppingResource,t=n.childCount;return{childCount:t}}function Ce(){for(var e=O.useState((function(e){var n=e.isTradeMinPriceMode;return{isTradeMinPriceMode:n}})),n=e.isTradeMinPriceMode,t=pe(),o=t.ShoppingResource,r=(null===o||void 0===o?void 0:o.roomInfo)||{},i=r.SelectedRoomCount,a=r.MinRoomCount,s=r.MaxRoomCount,l=r.RoomPriceInfo,c=[],u=a;u<=s;u++){var d,p,h=n?null===l||void 0===l||null===(d=l.Room)||void 0===d?void 0:d.TradePrice:null===l||void 0===l||null===(p=l.Room)||void 0===p?void 0:p.Price,v=h*(u-i);c.push({Count:u,DiffPrice:v,Current:i===u})}return{roomInfo:r,RoomSelectedList:c}}function Ee(e,n,t){var o,r,i,a,s=pe(),l=s.ErrorTokenList,c=O.useState((function(e){var n=e.TagGroupInfo,t=e.refundRule,o=e.ABTestResult;return{TagGroupInfo:null!==n&&void 0!==n?n:{},refundRule:t,ABTestResult:o}})),u=c.TagGroupInfo,d=c.refundRule,p=c.ABTestResult,h=(null===e||void 0===e?void 0:e.find((function(e){var n;return null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount})))||{},v=(null===h||void 0===h?void 0:h.Token)||"",g=(null===h||void 0===h?void 0:h.Basic)||{},f=(null===g||void 0===g?void 0:g.Flags)||[],x=-1!==f.indexOf("HasAddInfo"),m=(null===g||void 0===g?void 0:g.ResourceName)||"",S=null!==(o=null===h||void 0===h||null===(r=h.ConfirmDuration)||void 0===r?void 0:r.DurationMinute)&&void 0!==o?o:"",T=(0,k.gG)(S),I=(null===h||void 0===h||null===(i=h.SelectedInfo)||void 0===i?void 0:i.UseDate)||"",w=-1!=(null===l||void 0===l?void 0:l.indexOf(v))?"\u60a8\u9009\u62e9\u7684".concat(m,"\u4e0d\u53ef\u8ba2"):"",P=(null===h||void 0===h?void 0:h.OrderExtendInfos)||[],N=(null===u||void 0===u||null===(a=u.MoreTagList)||void 0===a||null===(a=a.find((function(e){return 2147===e.TagId})))||void 0===a?void 0:a.TagName)||"",D=19==t?"train_sc_expo":"single_expo",y=19==t?"train_sc_click":"singleentry_click",R=19==t?"train_sc_change_expo":"changeentry_expo",j=19==t?"train_sc_change_click":"changeentry_click",C={SegmentNo:n},E=!(0,k.xb)(d);return{selectSegmentData:h,hasDetailInfo:x,ResourceName:m,ConfirmDuration:T,UseDate:I,orderExtendInfosTemplate:P,errorTip:w,jumpParams:C,Token:v,freeUnsubscribeTag:N,testID:D,actionDetailID:y,changeTestID:R,actionChangeID:j,hasRefundRule:E,ABTestResult:p}}function Me(){var e=pe(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.ResourceSelectInfo)||{},o=O.useState((function(e){var n=e.isTradeMinPriceMode;return{isTradeMinPriceMode:n}})),r=o.isTradeMinPriceMode,i="\u9009\u62e9".concat(t[0].Basic.CategoryName),a=(null===t||void 0===t?void 0:t.find((function(e){var n;return null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount})))||{},s=(null===a||void 0===a?void 0:a.Token)||"",l=(null===a||void 0===a?void 0:a.SelectedInfo)||{},c=a.Basic.ResourceName;return{ResourceSelectInfo:t,isTradeMinPriceMode:r,title:i,SelectedToken:s,SelectedSingle:l,SelectedResourceName:c}}function _e(){var e,n,t=pe(),o=t.ShoppingResource,r=(null===o||void 0===o?void 0:o.ResourceDescriptionInfo)||{},i=(null===o||void 0===o?void 0:o.OptionDetails)||[],a=(null===i||void 0===i?void 0:i.find((function(e){return(null===e||void 0===e?void 0:e.Token)==(null===r||void 0===r?void 0:r.Token)})))||{},s=(null===a||void 0===a||null===(e=a.DescInfo)||void 0===e?void 0:e.Desc)||"",l=(null===a||void 0===a||null===(n=a.DescInfo)||void 0===n?void 0:n.AddInfos)||[];return(0,k.xb)(r)||(0,k.xb)(a)?{}:{filterOptionDetail:a,Desc:s,AddInfos:l}}function Ae(){var e,n,t=pe(),o=t.ShoppingResource,r=(null===o||void 0===o?void 0:o.SelectedResource)||{};console.log("\ud83c\udf36",r);var i=null===r||void 0===r?void 0:r.Token,a=null===r||void 0===r||null===(e=r.Basic)||void 0===e?void 0:e.ResourceName,s=null===r||void 0===r?void 0:r.SegmentNo,c=null===r||void 0===r||null===(n=r.Basic)||void 0===n?void 0:n.CategoryId,u=(null===r||void 0===r?void 0:r.SelectedInfo)||{},d=(null===u||void 0===u?void 0:u.UseDate)||"",p=(null===u||void 0===u?void 0:u.OrderExtendInfos)||[];if((0,k.xb)(p)){var h=(null===r||void 0===r?void 0:r.OrderExtendInfos)||[];null===h||void 0===h||h.forEach((function(e){var n=(0,l.Z)((0,l.Z)({},e),{},{Id:e.ID});p.push(n)}))}return{Token:i,resourceName:a,SegmentNo:s,SelectedInfo:u,CategoryId:c,OrderExtendInfos:p,SelectedUseDate:d}}function be(){var e,n=pe(),t=n.ShoppingResource,o=(null===t||void 0===t?void 0:t.curDate)||"",r=(null===t||void 0===t?void 0:t.SelectedResource)||{},i=(null===r||void 0===r?void 0:r.Token)||"",a=(null===t||void 0===t||null===(e=t.SelectedDatePickerValue)||void 0===e?void 0:e.Token)==i?null===t||void 0===t?void 0:t.SelectedDatePickerValue:{};if((0,k.xb)(a)){var s,l=(null===r||void 0===r?void 0:r.SelectedInfo)||{},c=(null===l||void 0===l?void 0:l.OrderExtendInfos)||[],u=(null===c||void 0===c||null===(s=c.find((function(e){return 4546==e.Id})))||void 0===s?void 0:s.Content)||"";if(u){var d=/\u5468[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/,p=new M.Z(u.replace(d,""));a={dateString:u,VDate:p}}else{var h,v=(null===r||void 0===r||null===(h=r.SelectedInfo)||void 0===h?void 0:h.UseDate)||o;a={dateString:new M.Z(v).setHours(8,0,0,0).toString,VDate:new M.Z(v).setHours(8,0,0,0).valueOf()}}}return{SelectedDatePickerValue:a,Token:i}}function Ze(e){var n,t=O.useState((function(e){var n=e.BasicInfo,t=e.isTradeMinPriceMode;return{BasicInfo:n,isTradeMinPriceMode:t}})),o=t.BasicInfo,r=t.isTradeMinPriceMode,i=pe(),a=i.ShoppingResource,s=(null===a||void 0===a||null===(n=a.Hotel)||void 0===n?void 0:n.Hotels)||[],l=a.adultCount,c=a.childCount,u=2===(null===o||void 0===o?void 0:o.ProductPatternId),d=(0,k.Q8)(e,r),p=d.SelectedRoomCount,h=d.SelectedVirtualRoom,v=d.VirtualRoomShoppings,g=d.roomCountRange,f=d.minCount,x=d.maxCount,m=d.singleRoomTotalPrice,S=d.childBedTotalPrice,T=(0,k.dG)(u,p,S,m,c,l),I=T.needPinfang,w=T.roomCountNotMatch,P=(0,k.PW)(s),N=P?"\u4e0d\u5305\u542b".concat(P,"\u7684\u9152\u5e97"):"",D=[];return I&&D.push("\u62fc\u623f"),w&&D.push("\u623f\u95f4\u6570\u4e0d\u8db3"),m&&D.push("\u623f\u5dee\u8d39"),S&&D.push("\u513f\u7ae5\u5360\u5e8a\u8d39"),{SelectedRoomCount:p,SelectedVirtualRoom:h,VirtualRoomShoppings:v,singleRoomTotalPrice:m,childBedTotalPrice:S,roomCountRange:g,minCount:f,maxCount:x,needPinfang:I,roomCountNotMatch:w,hotelStayDay:N,roomRemarks:D}}function Be(e){var n,t=(0,f.useState)(!0),o=(0,se.Z)(t,2),r=o[0],i=o[1],a=Oe(),s=a.recordSelectedTokenList,l=a.clearRecordSelectedToken,c=a.handleRecordSelectedToken,u=null===(n=e[0])||void 0===n?void 0:n.title,d=e[0].groups[0].datas||[];if(d=d.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[],0==d.length)return{};var p=[];d.length>1&&r?(p=(0,k.Hy)(d,s),0==p.length&&(p=d.slice(0,1))):p=d;var h=!0,v=!1,g=d.length-p.length||0,x=[];p.forEach((function(e){var n,t;(0,k.xb)(null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)||0===(null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.SelectedCount)||x.push(e)}));var m=x.length==p.length;return v=r&&g>0,h=d.length>1&&!m&&!r,{title:u,promotionResource:d,ShowSelectedResource:p,ShowMoreResourceUI:v,ShowResourceSeatCount:g,IsShowPackup:h,setShowMoreResource:i,handleRecordSelectedToken:c,clearRecordSelectedToken:l}}function Fe(e){var n,t=pe(),o=t.ErrorTokenList,r=t.ShoppingSelectedTokenList,i=(null===e||void 0===e?void 0:e.Token)||"",a=(null===e||void 0===e?void 0:e.Basic)||{},s=(null===a||void 0===a?void 0:a.Flags)||[],l=-1!==s.indexOf("HasAddInfo"),c=(null===a||void 0===a?void 0:a.ResourceName)||"",u=(null===e||void 0===e?void 0:e.SelectedInfo)||{},d=(null===u||void 0===u?void 0:u.UseDate)||"",p=(null===u||void 0===u?void 0:u.SelectedCount)||0,h=null===r||void 0===r||null===(n=r.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==i})))||void 0===n?void 0:n[0];!h||null!==h&&void 0!==h&&h.isSelectedToken||(u.UseDate="",d="");var v=(null===e||void 0===e?void 0:e.Shoppings)||[],g=(null===v||void 0===v?void 0:v.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==d})))||v[0],f=(0,k.pi)(null===g||void 0===g?void 0:g.UnitPriceInfos),x=null===f||void 0===f?void 0:f.Price,m=-1!==(null===o||void 0===o?void 0:o.indexOf(i))?"\u60a8\u9009\u62e9\u7684".concat(c,"\u4e0d\u53ef\u8ba2"):"";return{Token:i,hasDetailInfo:l,ResourceName:c,Price:x,SelectedCount:p,Basic:a,SelectedShopping:g,SelectedInfo:u,errorTip:m}}function Ve(){var e=pe(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.Flight)||{},o=t.Segments,r=void 0===o?[]:o,i=t.FlightSeats,a=void 0===i?[]:i,s=(0,k.xb)((0,k._O)({Segments:r,FlightSeats:a}));return{FlightHidden:s}}function Le(e){var n=pe(),t=n.ErrorTokenList,o=O.useState((function(e){var n=e.isTradeMinPriceMode;return{isTradeMinPriceMode:n}})),r=o.isTradeMinPriceMode,i=(0,k.Pe)(e,r),a=i.Token,s="";return t&&t.includes(a)&&(s="\u60a8\u9009\u62e9\u7684\u8f66\u8f86\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u66f4\u6362\u5176\u5b83\u8f66\u8f86"),(0,l.Z)((0,l.Z)({},i),{},{errorTip:s})}function He(e){var n=pe(),t=n.ErrorTokenList,o=(0,k.mw)(e),r=o.Token,i="";return t&&t.includes(r)&&(i="\u60a8\u9009\u62e9\u7684\u8f66\u8f86\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u66f4\u6362\u5176\u5b83\u8f66\u8f86"),(0,l.Z)((0,l.Z)({},o),{},{errorTip:i})}function Ue(e){var n=O.useState((function(e){var n=e.BasicInfo,t=e.isZhixing;return{BasicInfo:n,isZhixing:t}})),t=n.BasicInfo,o=void 0===t?{}:t,r=n.isZhixing,i=pe(),a=i.ShoppingResource,s=(null===a||void 0===a?void 0:a.VisaPolicyInfoData)||[],l=(null===e||void 0===e?void 0:e.filter((function(e){return 1==(1&e.Basic.BMStatus)})))||[],c=(null===e||void 0===e?void 0:e.filter((function(e){return 1!==(1&e.Basic.BMStatus)})))||[],u=11==(null===o||void 0===o?void 0:o.ProductCategoryId)&&(0,k.xb)(e)&&!(0,k.xb)(s),d=11==(null===o||void 0===o?void 0:o.ProductCategoryId)&&(0,k.xb)(e)&&(0,k.xb)(s);return u=!1,d=!1,{requiredVisa:l,optionVisa:c,selfVisa:d,freeOrArrivalVisa:u,VisaPolicyInfoData:s,isZhixing:r}}function Oe(){var e=(0,f.useState)([]),n=(0,se.Z)(e,2),t=n[0],o=n[1],r=function(e){-1==t.indexOf(e)&&t.push(e),o(t)},i=function(){o([])};return{recordSelectedTokenList:t,clearRecordSelectedToken:i,handleRecordSelectedToken:r}}function Ge(e){var n=e.requiredVisa,t=e.optionVisa,o=e.type,r=O.useState((function(e){var n=e.BasicInfo;return{BasicInfo:n}})),i=r.BasicInfo,a=(0,f.useState)(!0),s=(0,se.Z)(a,2),l=s[0],c=s[1],u=Oe(),d=u.recordSelectedTokenList,p=u.clearRecordSelectedToken,h=u.handleRecordSelectedToken,v="\u7b7e\u8bc1";53===(null===i||void 0===i?void 0:i.DestProvinceId)&&(v="\u5165\u53f0\u8bc1"),[58,59].indexOf(null===i||void 0===i?void 0:i.DestCityId)>-1&&(v="\u7b7e\u6ce8");var g=null===t||void 0===t?void 0:t.map((function(e){return e.Basic.Flags})),x=(null===g||void 0===g?void 0:g.filter((function(e){return!e.includes("HasVisaInfo")})).length)>0,m=n.length&&t.length&&x,S="\u5fc5\u9009"==o?n:t,T=[];"\u53ef\u9009"==o&&S.length>1&&l?(T=(0,k.Hy)(S,d),0==T.length&&(T=S.slice(0,1))):T=S;var I=!0,w=!1,P=S.length-T.length||0,N=[];T.forEach((function(e){var n,t;(0,k.xb)(null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)||0===(null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.SelectedCount)||N.push(e)}));var D=N.length==T.length;return w=l&&P>0,I=S.length>1&&!D&&!l,{VisaTitle:v,shouldShowVisaTip:m,ShowSelectedVisas:T,ShowMoreVisaUI:w,ShowVisaSeatCount:P,IsShowPackup:I,setShowMoreVisa:c,recordSelectedTokenList:d,clearRecordSelectedToken:p,handleRecordSelectedToken:h}}function Ye(e){var n,t,o=O.useState((function(e){var n=e.isBestone,t=e.isInBestoneApp,o=e.isZhixing;return{isBestone:n,isInBestoneApp:t,isZhixing:o}})),r=o.isBestone,i=o.isInBestoneApp,a=o.isZhixing,s=pe(),l=s.ErrorTokenList,c=s.ShoppingSelectedTokenList,u=(null===e||void 0===e?void 0:e.Token)||"",d=(null===e||void 0===e?void 0:e.Basic)||{},p=(null===d||void 0===d?void 0:d.ResourceName)||"",h=(null===e||void 0===e?void 0:e.SelectedInfo)||{},v=(null===h||void 0===h?void 0:h.SelectedCount)||0,g=(null===e||void 0===e?void 0:e.Shoppings)||[],f=null===c||void 0===c||null===(n=c.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==u})))||void 0===n?void 0:n[0];!f||null!==f&&void 0!==f&&f.isSelectedToken||(h.UseDate="");var x=(null===g||void 0===g?void 0:g.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==(null===h||void 0===h?void 0:h.UseDate)})))||g[0],m=(0,k.pi)(null===x||void 0===x?void 0:x.UnitPriceInfos),S=(null===d||void 0===d||null===(t=d.Flags)||void 0===t?void 0:t.includes("HasVisaInfo"))||!1,T=-1!==(null===l||void 0===l?void 0:l.indexOf(u))?"\u60a8\u9009\u62e9\u7684".concat(p,"\u4e0d\u53ef\u8ba2"):"",I={Token:u};return{Token:u,ResourceName:p,UnitPrice:m,SelectedCount:v,Basic:d,SelectedShopping:x,isShowVisaTip:S,errorTip:T,jumpParams:I,SelectedInfo:h,isBestone:r,isInBestoneApp:i,isZhixing:a}}function qe(){var e=pe(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.VisaDescriptionInfo)||{};return{VisaDescriptionInfo:t}}function We(e){var n,t=pe(),o=t.ShoppingResource,r=Oe(),i=r.recordSelectedTokenList,a=r.clearRecordSelectedToken,s=r.handleRecordSelectedToken,l=O.useState((function(e){var n=e.BasicInfo,t=e.params;return{BasicInfo:n,params:t}})),c=l.BasicInfo,u=void 0===c?{}:c,d=l.params,p=null===d||void 0===d?void 0:d.orderid,h=[];if(null===e||void 0===e||null===(n=e.groups)||void 0===n||n.forEach((function(e){var n,t=(null===e||void 0===e||null===(n=e.datas)||void 0===n?void 0:n.filter((function(e){return 2!==(2&e.Basic.BMStatus)})))||[];if(!(0,k.xb)(t)){var o={type:e.type,poiId:e.poiId,datas:t};h.push(o)}})),0==h.length)return null;var v={title:e.title,categorySeqId:e.categorySeqId,resourceType:e.resourceType,groups:h},g=(null===o||void 0===o?void 0:o.TicketPoiUrlDic)||{},f="\u666f\u70b9\u95e8\u7968",x=[];v.groups.forEach((function(e){var n=(0,k.VF)(g,e);x.push(n)}));var m={BasicInfo:u,orderId:p};return{TicketPoiList:x,title:f,jumpParams:m,recordSelectedTokenList:i,handleRecordSelectedToken:s,clearRecordSelectedToken:a}}function Ke(e){var n,t=O.useState((function(e){var n=e.params,t=e.ShoppingSelectedTokenList,o=e.Platform;return{params:n,ShoppingSelectedTokenList:t,Platform:o}})),o=t.params,r=t.ShoppingSelectedTokenList,i=t.Platform,a=null===o||void 0===o?void 0:o.orderid,s=pe(),l=s.ErrorTokenList,c=s.isShowInputError,u=(null===e||void 0===e?void 0:e.Token)||"",d=(null===e||void 0===e?void 0:e.Basic)||{},p=(null===d||void 0===d?void 0:d.Flags)||[],h=(null===d||void 0===d?void 0:d.ProductId)||"",v=-1!==p.indexOf("HasAddInfo"),g=(null===d||void 0===d?void 0:d.Tags)||[];"6381"==(null===e||void 0===e?void 0:e.ResourceType)&&(g=[]);var f=(null===d||void 0===d?void 0:d.ResourceName)||"",x=(null===e||void 0===e?void 0:e.SelectedInfo)||{},m=(null===x||void 0===x?void 0:x.SelectedCount)||0,S=(null===x||void 0===x?void 0:x.UseDate)||"",T=(null===e||void 0===e?void 0:e.Shoppings)||[],I=(null===e||void 0===e?void 0:e.OrderExtendInfos)||[],w=null===r||void 0===r||null===(n=r.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==u})))||void 0===n?void 0:n[0];!w||null!==w&&void 0!==w&&w.isSelectedToken||(x.UseDate="",S="");var P=(null===T||void 0===T?void 0:T.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==S})))||T[0],N=(0,k.pi)(P.UnitPriceInfos),D=N.Price,y=(null===d||void 0===d?void 0:d.ExtendInfos)||[],R=(0,k.LP)(y,"PeopleGroup"),j=(0,k.LP)(y,"RefundType"),C=le[R]||"",E=ce[j]||"",A=(i===_.NN.CTRIPH5?de[j]:ue[j])||"",b=(null===I||void 0===I?void 0:I.length)>0&&m>0;(0,k.e3)(e)&&!S&&(b=!1);var Z=!1;-1!=(null===l||void 0===l?void 0:l.indexOf(u))&&(Z=!0);var B="";Z&&(B="\u60a8\u9009\u62e9\u7684".concat(f,"\u4e0d\u53ef\u8ba2"));var F={productId:h,orderId:a};return{Token:u,Basic:d,ResourceName:f,SelectedCount:m,SelectedShopping:P,ResourcePrice:D,hasDetailInfo:v,TicketCategory:C,RefundTypeTitle:E,RefundTypeColor:A,SelectedInfo:x,OrderExtendInfos:I,isMatchShowOrderExtendInfos:b,Tags:g,errorTip:B,jumpParams:F,isShowInputError:c}}function Je(e,n,t){var o,r=(0,f.useState)(!0),i=(0,se.Z)(r,2),a=i[0],s=i[1],l=Oe(),c=l.recordSelectedTokenList,u=l.clearRecordSelectedToken,d=l.handleRecordSelectedToken,p=e.datas||[];if(p=p.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[],0==p.length)return null;var h=O.useState((function(e){var n=e.BasicInfo,t=e.params;return{BasicInfo:n,params:t}})),v=h.BasicInfo,g=void 0===v?{}:v,x=h.params,m=null===x||void 0===x?void 0:x.orderid,S=[];"\u53ef\u9009"==n&&p.length>1&&a?(S=(0,k.Hy)(p,c),0==S.length&&(S=p.slice(0,1))):S=p;var T=!0,I=!1,w=p.length-S.length||0,P=[];S.forEach((function(e){var n,t;(0,k.xb)(null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)||0===(null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.SelectedCount)||P.push(e)}));var N=P.length==S.length;I=a&&w>0,T=p.length>1&&!N&&!a;var D={BasicInfo:g,orderId:m,categoryId:t},y=null===(o=p)||void 0===o?void 0:o.map((function(e){return e.Token}));return{jumpParams:D,ShowSelectedOthers:S,ShowOtherSeatCount:w,ShowMoreResourceUI:I,IsShowPackup:T,NeedTurnBackSelectTokens:y,setShowMoreResource:s,handleRecordSelectedToken:d,clearRecordSelectedToken:u}}function Xe(e,n,t,o){var r=(0,f.useState)(!1),i=(0,se.Z)(r,2),l=i[0],c=i[1];(0,f.useEffect)((function(){(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(h,t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n})()()}));var u=(null===e||void 0===e?void 0:e.datas)||[],d=null===u||void 0===u?void 0:u.find((function(e){var n;return(null===e||void 0===e||null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)>0})),p=pe(),h=p.ShoppingId,v=[];u.length>1?v.push(d):v=u;var g=u.length-v.length||0,x=(0,k.CE)(u,l),m={IsMust:n,GroupId:t,resourceType:"groupedCar"};return{tag:x,ShowSelectedOthers:v,ShowOtherSeatCount:g,jumpParams:m,ShoppingId:h,setIsLowerPriceHidden:c}}function $e(e,n){var t=pe(),o=t.ErrorTokenList,r=t.isShowInputError,i=O.useState((function(e){var n=e.params,t=e.ShoppingSelectedTokenList;return{params:n,ShoppingSelectedTokenList:t}})),a=i.params,s=i.ShoppingSelectedTokenList,l=null===a||void 0===a?void 0:a.orderid,c=(null===e||void 0===e?void 0:e.Token)||"",u=(null===e||void 0===e?void 0:e.Basic)||{},d=(null===u||void 0===u?void 0:u.Flags)||[],p=(null===u||void 0===u?void 0:u.ProductId)||"",h=-1!==d.indexOf("HasAddInfo"),v=(null===u||void 0===u?void 0:u.ResourceName)||"",g=(null===e||void 0===e?void 0:e.SelectedInfo)||{},f=(null===e||void 0===e?void 0:e.Shoppings)||[],x=(null===g||void 0===g?void 0:g.SelectedCount)||0,m=(null===g||void 0===g?void 0:g.UseDate)||"",S=(null===g||void 0===g?void 0:g.EndUseDate)||"",T=null===u||void 0===u?void 0:u.MinBookingDays,I=T>0;if(I){var w,P=null===s||void 0===s||null===(w=s.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==c})))||void 0===w?void 0:w[0];!P||null!==P&&void 0!==P&&P.isSelectedToken||(g.EndUseDate="",S="")}else{var N,D=null===s||void 0===s||null===(N=s.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==c})))||void 0===N?void 0:N[0];!D||null!==D&&void 0!==D&&D.isSelectedToken||(g.UseDate="",m="")}var y=(null===f||void 0===f?void 0:f.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==m})))||f[0],R=(0,k.pi)(y.UnitPriceInfos),j=R.Price,C=R.TradePrice,E=e.OrderExtendInfos||[],_=(null===u||void 0===u?void 0:u.MinBookingDays)>0;if(_&&S){var A=1e4,b=0,Z=!1;null===f||void 0===f||f.map((function(e,n){if(M.Z.format(e.UseDate,"YYYY-MM-DD")==m&&(A=n),n>=A&&!Z){var t=(null===f||void 0===f?void 0:f.find((function(n){return M.Z.format(n.UseDate,"YYYY-MM-DD")==M.Z.format(e.UseDate,"YYYY-MM-DD")})))||f[0],o=(0,k.pi)(null===t||void 0===t?void 0:t.UnitPriceInfos);o.Price&&(b+=o.Price),console.log("\ud83c\udf1f index",{iUnitPrice:o,totalPrice:b})}M.Z.format(e.UseDate,"YYYY-MM-DD")==S&&(Z=!0)})),j=b}var B=(null===E||void 0===E?void 0:E.length)>0&&x>0&&"activity"==e.ResourceType;(0,k.e3)(e)&&!m&&(B=!1),_&&!S&&(B=!1);var F=!1;-1!=(null===o||void 0===o?void 0:o.indexOf(c))&&(F=!0);var V="";F&&(V="\u60a8\u9009\u62e9\u7684".concat(v,"\u4e0d\u53ef\u8ba2"));var L={productId:p,orderId:l,categoryId:n,token:c,selectedCount:x,price:j,baseTradePrice:C,is6381:"option"==e.ResourceType};return{Token:c,ResourceName:v,hasDetailInfo:h,ResourcePrice:j,SelectedCount:x,Basic:u,SelectedShopping:y,isMatchShowOrderExtendInfos:B,OrderExtendInfosTemplate:E,errorTip:V,jumpParams:L,SelectedInfo:g,isShowInputError:r}}function ze(){var e,n,t,o=pe(),r=o.ShoppingResource,i=o.flags,a=(null===i||void 0===i?void 0:i.isShowResourceSelectAddInfoMask)||!1,s=(null===r||void 0===r?void 0:r.SelectedAddInfoResource)||{},c="optional",u=null===s||void 0===s||null===(e=s.Basic)||void 0===e?void 0:e.ResourceName,d=null===r||void 0===r?void 0:r.categorySeqId,p=(null===s||void 0===s?void 0:s.poiId)||"",h=(null===r||void 0===r?void 0:r.OrderExtendToken)||"",v=(null===s||void 0===s||null===(n=s.SelectedInfo)||void 0===n?void 0:n.OrderExtendInfos)||[],g=(null===v||void 0===v?void 0:v.find((function(e){return e.Token==h})))||{},f=(null===s||void 0===s||null===(t=s.OrderExtendInfos)||void 0===t?void 0:t.find((function(e){return e.Token==h})))||{},x=null===f||void 0===f?void 0:f.Type,m=null===f||void 0===f?void 0:f.Name,S=(null===f||void 0===f?void 0:f.Items)||[],T=(null===g||void 0===g?void 0:g.Items)||[],I=[],k=[];return null===S||void 0===S||S.forEach((function(e){var n=null===T||void 0===T?void 0:T.some((function(n){return e.ItemID===n.Id&&n.Content})),t=(0,l.Z)((0,l.Z)({},e),{},{isSelected:n});n&&k.push(e.ItemToken),I.push(t)})),{isShowResourceSelectAddInfoMask:a,Type:x,SelectedAddInfoResource:s,extendItemName:m,OrderExtendToken:h,resourceType:c,resourceName:u,categorySeqId:d,OrderExtendInfo:f,poiId:p,resource:s,selectedItemTokens:k}}function Qe(e,n,t){var o,r,i,a,s,l,c,u,d,p=pe(),h=p.ErrorTokenList,v=p.ShoppingSelectedTokenList,g=(null===e||void 0===e?void 0:e.Token)||"",f=(null===e||void 0===e?void 0:e.Basic)||{},x=(null===f||void 0===f?void 0:f.ResourceName)||"",m=(null===e||void 0===e?void 0:e.SelectedInfo)||{},S=(null===e||void 0===e?void 0:e.Shoppings)||[],T=null===m||void 0===m?void 0:m.SelectedCount,I=(null===m||void 0===m?void 0:m.UseDate)||"",w=null===v||void 0===v||null===(o=v.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==g})))||void 0===o?void 0:o[0];!w||null!==w&&void 0!==w&&w.isSelectedToken||(m.UseDate="",I="");var P=(null===S||void 0===S?void 0:S.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==I})))||S[0],N=(0,k.pi)(null===P||void 0===P?void 0:P.UnitPriceInfos),D=null===N||void 0===N?void 0:N.Price;e&&(e.isMust=n);var y=(null===f||void 0===f?void 0:f.ExtendInfos)||[],R=(null===y||void 0===y||null===(r=y.filter((function(e){return"CarModelInfo"==(null===e||void 0===e?void 0:e.Code)})))||void 0===r?void 0:r[0])||{},j=(null===R||void 0===R?void 0:R.FieldValues)||[],C=(null===(i=S[0])||void 0===i?void 0:i.MinCount)||0,E=(null===(a=S[0])||void 0===a?void 0:a.MaxCount)||0,_=(null===(s=S[0])||void 0===s?void 0:s.StepCount)||0,A=(null===j||void 0===j||null===(l=j.filter((function(e){return"PassengerSeat"==(null===e||void 0===e?void 0:e.Key)})))||void 0===l||null===(l=l[0])||void 0===l?void 0:l.Value)||"",b=(null===j||void 0===j||null===(c=j.filter((function(e){return"SmallBaggageSizeCount"==(null===e||void 0===e?void 0:e.Key)})))||void 0===c||null===(c=c[0])||void 0===c?void 0:c.Value)||"",Z=(null===j||void 0===j||null===(u=j.filter((function(e){return"RecommendDesc"==(null===e||void 0===e?void 0:e.Key)})))||void 0===u||null===(u=u[0])||void 0===u?void 0:u.Value)||"",B=(null===j||void 0===j||null===(d=j.filter((function(e){return"AppPicUrl"==(null===e||void 0===e?void 0:e.Key)})))||void 0===d||null===(d=d[0])||void 0===d?void 0:d.Value)||"",F=!1;-1!=(null===h||void 0===h?void 0:h.indexOf(g))&&(F=!0);var V="";F&&(V="\u60a8\u9009\u62e9\u7684".concat(x,"\u4e0d\u53ef\u8ba2"));var L={IsMust:n,GroupId:t,resourceType:null===e||void 0===e?void 0:e.ResourceType};return{Token:g,ResourceName:x,ResourcePrice:D,SelectedCount:T,Basic:f,SelectedShopping:P,MaxCount:E,MinCount:C,StepCount:_,AppPicUrl:B,errorTip:V,PassengerSeat:A,SmallBaggageSizeCount:b,RecommendDesc:Z,jumpParams:L}}function en(e,n){var t,o=O.useState((function(e){var n=e.BasicInfo,t=e.SegmentInfo,o=e.ShoppingSelectedTokenList;return{BasicInfo:n,SegmentInfo:t,ShoppingSelectedTokenList:o}})),r=o.BasicInfo,i=o.SegmentInfo,a=o.ShoppingSelectedTokenList,s=pe(),l=s.ShoppingResource,c=s.isShowInputError,u=l.curDate,d=l.ReturnDate,p=(null===e||void 0===e?void 0:e.Token)||"",h=(null===e||void 0===e||null===(t=e.SelectedInfo)||void 0===t?void 0:t.OrderExtendInfos)||[],v=(null===e||void 0===e?void 0:e.Basic)||{},g=null===v||void 0===v?void 0:v.BMStatus,f=(null===e||void 0===e?void 0:e.Shoppings)||[],x=(null===e||void 0===e?void 0:e.SelectedInfo)||{},m=null===x||void 0===x?void 0:x.SelectedCount,S=null!==x&&void 0!==x&&x.UseDate?M.Z.parse(null===x||void 0===x?void 0:x.UseDate).format("YYYY-MM-DD"):"",T=null!==x&&void 0!==x&&x.EndUseDate?M.Z.parse(null===x||void 0===x?void 0:x.EndUseDate).format("YYYY-MM-DD"):"",I=(null===f||void 0===f?void 0:f.find((function(e){return M.Z.format(e.UseDate,"YYYY-MM-DD")==S})))||f[0],k=null===v||void 0===v?void 0:v.MinBookingDays,w=k>0,P=e.isMust||!1,N=P||1&g&&!(2&g),D=!1;if(!w){var y,R=null===a||void 0===a||null===(y=a.filter((function(e){return(null===e||void 0===e?void 0:e.Token)==p})))||void 0===y?void 0:y[0];!R||null!==R&&void 0!==R&&R.isSelectedToken||(S="",D=!0)}var j=null===r||void 0===r?void 0:r.TravelDays,C="",E="";null!==i&&void 0!==i&&i.IsFixSegment?(C=M.Z.format(u,"YYYY-MM-DD"),E=M.Z.format(new M.Z(u).addDay(j-1),"YYYY-MM-DD")):(C=M.Z.format(u,"YYYY-MM-DD"),E=M.Z.format(d,"YYYY-MM-DD"));var _="",A="",b="";return 61===(null===v||void 0===v?void 0:v.CategoryId)||99===(null===v||void 0===v?void 0:v.CategoryId)?(_="\u53d6\u4ef6\u65e5\u671f",A="\u8fd8\u4ef6\u65e5\u671f"):(k>0?_="\u8d77\u59cb\u65e5\u671f":(_="\u4f7f\u7528\u65e5\u671f",[1,2,3,4,5,6].includes(n)&&(S==C?b="\u60a8\u9009\u62e9\u7684\u4f7f\u7528\u65e5\u671f\u4e3a\u884c\u7a0b\u7b2c1\u5929\uff0c\u8bf7\u7279\u522b\u7559\u610f\u60a8\u7684\u884c\u7a0b\u5b89\u6392\uff0c\u4ee5\u514d\u65f6\u95f4\u51b2\u7a81\u3002":S==E&&(b="\u60a8\u9009\u62e9\u7684\u4f7f\u7528\u65e5\u671f\u4e3a\u884c\u7a0b\u6700\u540e1\u5929\uff0c\u8bf7\u7279\u522b\u7559\u610f\u60a8\u7684\u884c\u7a0b\u5b89\u6392\uff0c\u4ee5\u514d\u65f6\u95f4\u51b2\u7a81\u3002"))),A="\u7ed3\u675f\u65e5\u671f"),{Basic:v,Token:p,OrderExtendInfos:h,Shoppings:f,SelectedUseDate:S,SelectedUseEndDate:T,isHiddenPrice:N,isHiddenCalendarSelectedHighLight:D,datePlaceHolder:_,endDatePlaceHolder:A,isShowInputError:c,SelectedCount:m,isDoubleDate:w,warningDate:b,SelectedShopping:I}}function nn(){var e,n,t,o,r,i=O.useState((function(e){var n=e.priceShowStatus,t=e.isInBestoneApp,o=e.isTradeMinPriceMode;return{priceShowStatus:n,isInBestoneApp:t,isTradeMinPriceMode:o}})),a=i.priceShowStatus,s=i.isInBestoneApp,l=i.isTradeMinPriceMode,c=pe(),u=c.ShoppingResource,d=c.flags,p=(null===u||void 0===u?void 0:u.userInfo)||{},h=(null===p||void 0===p?void 0:p.vipGrade)||"",v=(null===p||void 0===p?void 0:p.vipLevelName)||"",g=(null===d||void 0===d?void 0:d.isShowPriceListMask)||!1,f=(null===u||void 0===u?void 0:u.priceDetail)||{},x=(null===f||void 0===f||null===(e=f.totalPrice)||void 0===e?void 0:e.totalPrice)||0,m=(null===f||void 0===f||null===(n=f.totalPrice)||void 0===n?void 0:n.save)||0,S=(null===f||void 0===f||null===(t=f.totalPrice)||void 0===t?void 0:t.shopPayPrice)||{},T=(null===S||void 0===S?void 0:S.price)||0,I=(null===S||void 0===S?void 0:S.currencyCode)||"",k=(null===f||void 0===f||null===(o=f.totalTradePrice)||void 0===o?void 0:o.totalPrice)||0,w=(null===f||void 0===f||null===(r=f.totalTradePrice)||void 0===r?void 0:r.save)||0,P=null===f||void 0===f?void 0:f.tradePriceDetailList;return{priceShowStatus:a,isInBestoneApp:s,isTradeMinPriceMode:l,totalPrice:x,save:m,totalTradePrice:k,saveTradePrice:w,tradePriceDetailList:P,offlinePrice:T,currencyCode:I,vipGrade:h,vipLevelName:v,isShowPriceListMask:g}}function tn(){var e,n=pe(),t=n.ShoppingResource,o=null===t||void 0===t||null===(e=t.CabinInfo)||void 0===e||null===(e=e.FareRemarkForShopping)||void 0===e?void 0:e.RemarkList;return{remarkList:o}}function on(){var e=pe(),n=e.ShoppingResource,t=(null===n||void 0===n?void 0:n.flightHornContent)||{},o=(null===t||void 0===t?void 0:t.Notifications)||[];return o=JSON.parse(JSON.stringify(o).replace(/NotificationLevel/g,"notificationLevel").replace(/NotificationId/g,"notificationId").replace(/Title/g,"title").replace(/Content/g,"content")),{Notifications:o}}function rn(){var e,n,t=pe(),o=t.ShoppingResource,r=(null===o||void 0===o?void 0:o.flightTransferMaskInfo)||{},i=r.SegmentNo,a=r.FlightId,s=null===o||void 0===o||null===(e=o.CabinInfo)||void 0===e||null===(e=e.FareRemarkForShopping)||void 0===e?void 0:e.TransferInfoViewData;return s=(null===(n=s)||void 0===n||null===(n=n[i])||void 0===n?void 0:n[a])||{},{TransferInfoViewData:s}}function an(){var e,n=pe(),t=n.ShoppingResource,o=t.hotelPolicyMaskIndex,r=t.BffSingleRoom||[];if((null===r||void 0===r?void 0:r.length)<=o||o<0)return{};var i=(null===r||void 0===r||null===(e=r[o])||void 0===e?void 0:e.SingleRoom)||{},a=(null===i||void 0===i?void 0:i.policy)||{},s=t.hotelPolicyTarget||"";return{policy:a,targetHotel:s}}function sn(){var e,n=pe(),t=n.ShoppingResource,o=t.hotelPolicyMaskIndex,r=t.BffSingleRoom||[],i=(null===r||void 0===r||null===(e=r[o])||void 0===e?void 0:e.SingleRoom)||{},a=(null===i||void 0===i?void 0:i.Room)||{};return{Room:a}}function ln(){var e,n=pe(),t=n.ShoppingResource,o=n.flags,r=(null===t||void 0===t?void 0:t.bffResIntroductionUseCar)||{},i=(null===t||void 0===t?void 0:t.showGroupDescriptionMaskToken)||"",a=(null===o||void 0===o?void 0:o.isShowGroupDescriptionMask)||!1;if(!a)return null;var s=null===r||void 0===r?void 0:r[i],l=null===s||void 0===s||null===(e=s.UseCarIntroduction)||void 0===e?void 0:e.XIntroduction;return(0,k.xb)(l)?null:{XIntroduction:l}}var cn={"#000":"_143xn8h0","#333":"_143xn8h1","#666":"_143xn8h2","#999":"_143xn8h3","#ccc":"_143xn8h4","#eee":"_143xn8h5","#fff":"_143xn8h6","#ccd6e5":"_143xn8h7","#f70":"_143xn8h8","#0066f6":"_143xn8h9","#0086f6":"_143xn8ha","#287dfa":"_143xn8hb",text20:"_143xn8hc",text22:"_143xn8hd",text26:"_143xn8he",text28:"_143xn8hf",text30:"_143xn8hg",text34:"_143xn8hh",textW500:"_143xn8hi",fontNumber:"_143xn8hj",fontNumberBold:"_143xn8hk",fontIcon:"_143xn8hl",mr4:"_143xn8hm",ml4:"_143xn8hn",mt4:"_143xn8ho",mb4:"_143xn8hp",mr8:"_143xn8hq",ml8:"_143xn8hr",mt8:"_143xn8hs",mb8:"_143xn8ht",mr12:"_143xn8hu",ml12:"_143xn8hv",mt12:"_143xn8hw",mb12:"_143xn8hx",mr16:"_143xn8hy",ml16:"_143xn8hz",mt16:"_143xn8h10",mb16:"_143xn8h11",mr20:"_143xn8h12",ml20:"_143xn8h13",mt20:"_143xn8h14",mb20:"_143xn8h15",mr24:"_143xn8h16",ml24:"_143xn8h17",mt24:"_143xn8h18",mb24:"_143xn8h19",mr28:"_143xn8h1a",ml28:"_143xn8h1b",mt28:"_143xn8h1c",mb28:"_143xn8h1d",mr32:"_143xn8h1e",ml32:"_143xn8h1f",mt32:"_143xn8h1g",mb32:"_143xn8h1h",mr36:"_143xn8h1i",ml36:"_143xn8h1j",mt36:"_143xn8h1k",mb36:"_143xn8h1l",mr40:"_143xn8h1m",ml40:"_143xn8h1n",mt40:"_143xn8h1o",mb40:"_143xn8h1p",pr32:"_143xn8h1q",pl32:"_143xn8h1r",pt32:"_143xn8h1s",pb32:"_143xn8h1t",pr64:"_143xn8h1u",pl64:"_143xn8h1v",pt64:"_143xn8h1w",pb64:"_143xn8h1x",flex_row:"_143xn8h1y",flex_column:"_143xn8h1z",flex_align_center:"_143xn8h20",flex_vertical_center:"_143xn8h21",flex_1:"_143xn8h22",flex_wrap:"_143xn8h23",relative:"_143xn8h2u",moduleTitleIcon:"_143xn8h24",moduleExtra:"_143xn8h25",moduleBoxDivider:"_143xn8h26",inlineDivider:"_143xn8h2f",numBluebg:"_143xn8h2g _143xn8h21",summaryIcon1:"_143xn8h2h _143xn8hl _143xn8hg",summaryIcon2:"_143xn8h2i _143xn8hl _143xn8hg",icon3:"_143xn8h2j _143xn8hl _143xn8hf",transBox:"_143xn8h27",transLeft:"_143xn8h28",transMiddle:"_143xn8h29",transRight:"_143xn8h2a",trainEditWrapper:"_143xn8h2b",trainAddIcon:"_143xn8h2c _143xn8hl",trainAddText:"_143xn8h2d",dividingLineVertical:"_143xn8h2e",dateInfo_container:"_143xn8h2p",dateInfo_icon:"_143xn8h2q",dateInfo_text:"_143xn8h2r",dateInfo_divider:"_143xn8h2s",dateInfo_btn:"_143xn8h2t",errorpage_wrapper:"_143xn8h2k",errorpage_img:"_143xn8h2l",errorpage_btns:"_143xn8h2m",select_passenger_btn:"_143xn8h2n",select_date_btn:"_143xn8h2o"};function un(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map((function(e){return cn[e]})).join(" ")}function dn(){var e=ve(),n=e.isShowSelectPassengerMask,t=e.isShowSelectDateMask,o=e.productParams,r=O.useActions().handlers,i=r.handleSelectPassengerMask,a=r.handlePassengerDateSubmit,s=r.handleSelectDateMask,l=r.handleDateMaskError,c=(0,f.useState)(null),u=(0,se.Z)(c,2),d=u[0],p=u[1],h=(0,f.useRef)(!1);return(0,f.useEffect)((function(){!h.current&&d&&(d.initCalendar(o),h.current=!0)}),[d,h.current]),(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:un("errorpage_wrapper"),children:[(0,Y.jsx)(G.Image,{className:un("errorpage_img"),src:"https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/resource/newprocess_no_result.png"}),(0,Y.jsxs)(G.View,{className:un("flex_align_center","flex_column"),children:[(0,Y.jsx)(g.BaseText,{size:"34",lineHeight:"42",weight:"500",children:"\u60a8\u67e5\u8be2\u7684\u884c\u7a0b\u6682\u4e0d\u53ef\u8ba2"}),(0,Y.jsx)(g.BaseText,{size:"26",lineHeight:"38",color:"#666",style:{marginTop:"12rpx"},children:"\u8bf7\u53ef\u66f4\u6362\u65e5\u671f\u6216\u4eba\u6570\u540e\u518d\u8bd5"})]}),(0,Y.jsxs)(G.View,{className:un("errorpage_btns"),children:[(0,Y.jsx)(G.View,{className:un("select_passenger_btn"),onClick:function(){return i(!0)},children:(0,Y.jsx)(G.Text,{children:"\u66f4\u6362\u4eba\u6570"})}),(0,Y.jsx)(G.View,{className:un("select_date_btn"),onClick:function(){return s(!0)},children:(0,Y.jsx)(G.Text,{children:"\u66f4\u6362\u65e5\u671f"})})]})]}),(0,Y.jsx)(g.SelectPassenger,{pageName:"resource",isShow:n,onClose:function(){return i(!1)},onOpen:function(){return i(!0,!0)},onSubmit:a,cacheKey:JSON.stringify(o),shoppingId:"noshoppingId"}),(0,Y.jsx)(g.SelectDate,{pageName:"resource",isShow:t,onRef:function(e){p(e)},onSelect:a,onClose:function(){return s(!1)},onError:l,logger:!0})]})}var pn=f.memo(vn),hn=pn;function vn(){var e=Se(),n=e.isCruise,t=e.IsContinueBook,o=e.isCanEditPassenger,r=e.adultCountUI,i=e.childCountUI,a=e.infantCountUI,s=O.useActions().handlers.handleSelectPassengerMask;return(0,Y.jsxs)(G.View,{className:un("dateInfo_container"),id:"Header",children:[(0,Y.jsxs)(G.View,{className:un("dateInfo_text","flex_align_center"),children:[(0,Y.jsx)(G.Text,{className:un("dateInfo_icon","mr8"),children:"\udb83\udc00"}),(0,Y.jsx)(g.BaseText,{size:"30",lineHeight:"40",children:"\u60a8\u5df2\u9009\u62e9\uff1a".concat(r)}),!!i&&(0,Y.jsx)(G.View,{className:un("dateInfo_divider")}),!!i&&(0,Y.jsx)(g.BaseText,{size:"30",lineHeight:"40",children:i}),!!a&&(0,Y.jsx)(G.View,{className:un("dateInfo_divider")}),!!a&&(0,Y.jsx)(g.BaseText,{size:"30",lineHeight:"40",children:a})]}),!t&&!n&&(0,Y.jsx)(g.Pressable,{className:un("dateInfo_btn"),style:function(e){var n=e.pressed;return{opacity:n?.2:1}},onPress:function(){o&&s(!0)},children:(0,Y.jsx)(g.BaseText,{size:"30",lineHeight:"40",color:"#0086f6",children:"\u4fee\u6539"})})]})}var gn=f.memo(xn),fn=gn;function xn(e){var n=e.text,t=e.more,o=e.replaceBtn,r=e.batchLoading,i=e.detailAction,a=e.replaceAction,s=(0,f.useState)("8vw"),l=(0,se.Z)(s,2),c=l[0],u=l[1];return(0,f.useEffect)((function(){return setTimeout((function(){u("98vw")}),0),function(){u("8vw")}}),[]),(0,Y.jsxs)(G.View,{className:"PartitionTips",children:[(0,Y.jsx)(G.Text,{className:"PartitionTipsText TextOrange",children:n}),!!t&&(0,Y.jsx)(G.Text,{className:"PartitionTipsText TextBlue Flex1",onClick:i,children:"\u8be6\u60c5"}),!!o&&(0,Y.jsx)(G.View,{className:"PartitionTipsBtn",children:(0,Y.jsx)(G.Text,{className:"PartitionTipsBtnText",onClick:a,children:"\u66ff\u6362"})}),!!r&&(0,Y.jsx)(G.View,{className:"PartitionTipsLine",style:{width:c}})]})}function mn(e){var n=e.className,t=void 0===n?"":n,o=e.text;return(0,Y.jsx)(G.Text,{className:"UITag ".concat(t),children:o})}function Sn(e){var n,t=e.type,o=e.text;switch(t){case"info":n=(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.Text,{className:"BaseTextIcon TextOrange",children:"\uef89"}),(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:o})]});break;case"infoGray":n=(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.Text,{className:"BaseTextIcon TextDarkGray",children:"\uef89"}),(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:o})]});break;case"warning":n=(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.Text,{className:"BaseTextIcon TextOrange",children:"\uef89"}),(0,Y.jsx)(G.Text,{className:"BaseText TextOrange",children:o})]});break;case"error":n=(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.Text,{className:"ErrorTextIcon TextRed",children:"\uef39"}),(0,Y.jsx)(G.Text,{className:"BaseText TextRed",children:o})]});break;default:n=null;break}return n}var Tn=f.memo(kn),In=Tn;function kn(e){var n=e.Segments;return(0,Y.jsxs)(G.View,{style:{position:"relative"},children:[(0,Y.jsx)(wn,{}),(0,Y.jsx)(Pn,{Segments:n})]})}function wn(){var e=Ie(),n=e.FlightSearchStatus,t=e.diffPrice,o=O.useActions(),r=o.actionTraceLog,i=O.useActions().handlers,a=i.handleChangePartitionedFlight,s=i.handleFlightPartitionedMask;if("pending"===n){var l=t>0?"\u627e\u5230\u6bd4\u539f\u63a8\u8350\u4fbf\u5b9c\xa5".concat(t,"\u7684\u673a\u7968"):"\u4e3a\u60a8\u627e\u5230\u66f4\u9ad8\u6027\u4ef7\u6bd4\u7684\u673a\u7968\u66ff\u6362";return(0,Y.jsx)(G.View,{children:(0,Y.jsx)(fn,{text:l,more:!0,replaceBtn:!0,batchLoading:!1,detailAction:function(){r("flight_load_click"),s(!0)},replaceAction:function(){a(),r("flight_load_change")}})})}return"loading"===n?(0,Y.jsx)(G.View,{children:(0,Y.jsx)(fn,{text:"\u59cb\u7ec8\u5bfb\u627e\u6700\u4f18\u6027\u4ef7\u6bd4\u7684\u673a\u7968",more:!1,replaceBtn:!1,batchLoading:!0,detailAction:function(){},replaceAction:function(){}})}):"changed"===n?(0,Y.jsx)(G.View,{children:(0,Y.jsx)(fn,{text:"\u5e2e\u4f60\u627e\u5230\u6027\u4ef7\u6bd4\u66f4\u9ad8\u7684\u673a\u7968\u5e76\u66ff\u6362",more:!1,replaceBtn:!1,batchLoading:!1,detailAction:function(){},replaceAction:function(){}})}):null}function Pn(e){var n=e.Segments,t=ke();if((0,k.xb)(t))return null;var o=t.SeatCount,r=t.confirmDuration,i=t.reduceText,a=t.SpringTag,s=t.Notifications,l=t.normalFeeAndBaggageArray,c=t.adultAgeInfoArray,u=t.warningFeeAndBaggageArray,d=t.warningBriefTagArray,p=t.AirTicketInfoTitle,h=O.useActions(),v=h.actionTraceLog,g=O.useActions().handlers,x=g.handleAirTicketChangeInfoMask,m=g.handleAirHornInfoMask;return(0,Y.jsxs)(G.View,{className:"ModBgWhite FTCardContainer",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsx)(K,{icon:q("FLIGHT"),title:"\u673a\u7968",tips:o<9?(0,Y.jsxs)(G.Text,{className:"FlightSeatCount",children:["\u5269",o,"\u5f20"]}):null}),(0,Y.jsxs)(G.View,{className:"Flex1 MarginLeft16 TagGroups",children:[!!r&&(0,Y.jsx)(mn,{className:"TagGreen",text:r}),!!i&&(0,Y.jsx)(mn,{className:"TagOrange",text:i}),!!a&&(0,Y.jsx)(mn,{className:"TagGreen",text:a.Name})]})]}),!(0,k.xb)(s)&&(0,Y.jsxs)(G.View,{className:"FlightNotification MarginBottom8",onClick:function(){m(!0)},children:[(0,Y.jsx)(G.View,{className:"Flex1",children:(0,Y.jsx)(Sn,{type:"warning",text:"\u673a\u7968\u51fa\u6e38\u63d0\u9192"})}),(0,Y.jsx)(G.Text,{className:"FlightNotificationArrowIcon",children:"\ue944"})]}),!(null===l||void 0===l||!l.length)&&(0,Y.jsx)(G.View,{className:"MarginBottom8",children:l.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:e}),n!==l.length-1&&(0,Y.jsx)(G.View,{className:"InlineDivider"})]})}))}),!(null===c||void 0===c||!c.length)&&(0,Y.jsx)(G.View,{className:"MarginBottom8 FlexAlignStart",children:c.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[0===n?(0,Y.jsx)(Sn,{type:"warning",text:e}):(0,Y.jsx)(G.Text,{className:"BaseText TextOrange",children:e}),n!==c.length-1&&(0,Y.jsx)(G.View,{className:"InlineDivider"})]})}))}),!(null===u||void 0===u||!u.length)&&(0,Y.jsx)(G.View,{className:"MarginBottom8 FlexAlignCenter FlexWrap",children:u.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[0===n?(0,Y.jsx)(Sn,{type:"warning",text:e}):(0,Y.jsx)(G.Text,{className:"BaseText TextOrange",children:e}),n!==u.length-1&&(0,Y.jsx)(G.View,{className:"InlineDivider"})]})}))}),null===d||void 0===d?void 0:d.map((function(e){return(0,Y.jsx)(G.View,{className:"MarginBottom8 FlexAlignStart",children:(0,Y.jsx)(Sn,{type:"warning",text:e})})})),(0,Y.jsx)(G.View,{className:"MarginBottom32",children:(0,Y.jsx)(G.View,{children:(0,Y.jsx)(G.Text,{className:"BaseText TextBlue",onClick:function(){v("flight_clause_click"),x(!0)},children:p})})}),(0,Y.jsx)(Nn,{segments:n})]})}function Nn(e){var n=e.segments,t=e.showInPartitionMask,o=void 0!==t&&t,r=we(),i=r.errorTip,c=r.HasMore,u=r.ShoppingId,d=r.HasNoCheckBaggage,p=r.HasLessLimitPrice,h=r.canUpgrade,v=r.jumpParams,g=r.isShowReselectTips,x=O.useActions(),m=x.actionTraceLog,S=O.useActions().storages,T=S.setFlightLowerPriceStorage,I=S.getIsShowFlightLowerPrice,w=S.setFlightBaggageStorage,P=S.getIsShowFlightBaggage,N=O.useActions().handlers.handleJumpPreflight,D=O.useActions().ctrl,y=D.handleGoFlightList,R=D.handleGoFlightDetail,j=(0,f.useState)(!1),C=(0,se.Z)(j,2),E=C[0],M=C[1];(0,f.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I(u);case 2:n=e.sent,M(n&&p);case 4:case"end":return e.stop()}}),e)})))()}),[u,p]);var _=(0,f.useState)(!1),A=(0,se.Z)(_,2),b=A[0],Z=A[1];return(0,f.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P(u);case 2:n=e.sent,Z(n&&d);case 4:case"end":return e.stop()}}),e)})))()}),[u,d]),(0,Y.jsxs)(G.View,{className:"".concat(o?"Margin32 PaddingBottom32":"ModuleBox MarginBottom16"," ").concat(g?"ModuleBoxTips":""," ").concat(i?"ModuleBoxError":""),children:[(0,Y.jsxs)(G.View,{className:"ModuleBoxContent",children:[n.map((function(e,t){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"Padding32",onClick:function(){N((function(e){if(!o){var n=(0,k.re)((0,l.Z)((0,l.Z)({},e),v));R((0,l.Z)((0,l.Z)({},n),{},{upgradeClass:0}))}}))},children:(0,Y.jsx)(Dn,{index:t,Segment:e,showInPartitionMask:o})},t),t!==n.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})})),(!!i||g)&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"}),(0,Y.jsxs)(G.View,{className:"Padding32",children:[!!i&&(0,Y.jsx)(Sn,{type:"error",text:i}),!i&&g&&(0,Y.jsx)(Sn,{type:"warning",text:"\u8bf7\u5728\u6b64\u5904\u66f4\u6362\u673a\u7968"})]})]})]}),!o&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsxs)(G.View,{className:"ModuleBoxBottom",children:[!!c&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"ModuleBoxBottomText",onClick:function(){m("flight_change_click"),N((function(e){var n=(0,k.re)((0,l.Z)((0,l.Z)({},e),v)),t=v.adt,o=v.cld,r=v.ift,i=v.cldAges,a=v.isIntl;y((0,l.Z)((0,l.Z)({},n),{},{adt:t,cld:o,ift:r,cldAges:i,isIntl:a}))}))},children:"\u66f4\u6362\u822a\u73ed"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottomDivider"})]}),!!h&&(0,Y.jsx)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){m("flight_class_click"),N((function(e){var n=(0,k.re)((0,l.Z)((0,l.Z)({},e),v));R((0,l.Z)((0,l.Z)({},n),{},{upgradeClass:1}))}))},children:"\u5347\u7ea7\u8231\u4f4d"}),!!c&&!h&&(0,Y.jsxs)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){N((function(e){w(u),Z(!1),T(u),M(!1);var n=(0,k.re)((0,l.Z)((0,l.Z)({},e),v));R((0,l.Z)((0,l.Z)({},n),{},{upgradeClass:0}))}))},children:[b&&(0,Y.jsx)(G.Text,{className:"FlightLowerTag",children:"\u6709\u884c\u674e\u989d\u8231\u4f4d"}),!b&&E&&(0,Y.jsx)(G.Text,{className:"FlightLowerTag",children:"\u53d1\u73b0\u66f4\u4f4e\u4ef7"}),"\u66f4\u6362\u8231\u4f4d"]})]})]})]})}function Dn(e){var n=e.Segment,t=e.index,o=e.showInPartitionMask,r=Pe({Segment:n,index:t}),i=r.Token,a=r.CompareToken,s=r.departDate,l=r.departCity,c=r.arriveCity,u=r.isFlightPending,d=r.isFlightTimePending,p=r.timeText,h=r.Flights,v=r.tipsArray;return(0,Y.jsxs)(G.View,{id:(0,k.Jb)(a),children:[(0,Y.jsxs)(G.View,{className:"FTInfoSummary",id:(0,k.Jb)(i),children:[(0,Y.jsx)(G.Text,{className:"FTInfoSummaryBlue MarginRight24",children:t+1}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:s}),(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:l}),(0,Y.jsx)(G.Text,{className:"BaseText FTInfoSummaryArrow",children:"\ue9e2"}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:c}),!u&&!d&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsx)(G.Text,{className:"FTInfoSummaryClock ",children:"\ueab6"}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:p})]})]}),(!!u||!!d)&&(0,Y.jsx)(G.Text,{className:"FlightInfoSummaryPendingText",children:p})]}),!u&&h.map((function(e,n){return(0,Y.jsx)(yn,{flight:e,isFlightTimePending:d,index:n,showInPartitionMask:o},n)})),!!v.length&&(0,Y.jsx)(G.View,{className:"MarginTop24",children:(0,Y.jsx)(Sn,{type:"warning",text:v.join(" \xb7 ")})})]})}function yn(e){var n=e.flight,t=e.isFlightTimePending,o=e.index,r=e.showInPartitionMask,i=n.SegmentNo,a=n.FlightId,s=n.airlineIcon,l=n.AirlineInfo,c=n.FlightNo,u=n.operationCarrierName,d=n.cabinName,p=n.departAirportCode,h=n.departTime,v=n.departAirport,g=n.timeText,x=n.Stops,m=n.dayTip,S=n.dayTipArriveTime,T=n.arriveTime,I=n.arriveAirport,w=n.arriveAirportCode,P=n.greyTransferInfo,N=n.redTransferInfo,D=n.orangeTransferInfo,y=n.greenTransferInfo,R=O.useActions(),j=R.actionTraceLog,C=O.useActions().handlers.handleShowFlightTransferMask,E=!(0,k.xb)(P)||!(0,k.xb)(N)||!(0,k.xb)(D)||!(0,k.xb)(y);return(0,Y.jsxs)(G.View,{children:[o>0&&!!E&&(0,Y.jsxs)(G.View,{className:"FlightInfoDetailTransfer",onClick:function(e){e.stopPropagation(),!r&&C({SegmentNo:i,FlightId:a}),j("flight_transfer_click")},children:[(0,Y.jsxs)(G.View,{className:"Flex1",children:[(0,Y.jsxs)(G.View,{children:[(0,Y.jsx)(G.Text,{className:"BaseText TextSteelBlue",children:"\u4e2d\u8f6c ".concat(null===P||void 0===P?void 0:P.join(" "))}),N&&(0,Y.jsx)(G.Text,{className:"BaseText TextRed",children:" "+(null===N||void 0===N?void 0:N.join(" "))})]}),(0,Y.jsxs)(G.View,{children:[D&&(0,Y.jsx)(G.Text,{className:"BaseText TextOrange",children:(null===D||void 0===D?void 0:D.join(" "))+" "}),y&&(0,Y.jsx)(G.Text,{className:"BaseText TextGreen",children:null===y||void 0===y?void 0:y.join(" ")})]})]}),!r&&(0,Y.jsx)(G.Text,{className:"FlightInfoDetailTransferArrowIcon",children:"\ue944"})]}),(0,Y.jsxs)(G.View,{className:"FTLineInfo",children:[(0,Y.jsx)(G.Image,{className:"FlightLineIcon",src:s}),(0,Y.jsxs)(G.View,{className:"Flex1 FlexAlignCenter FlexWrap",children:[(0,Y.jsxs)(G.Text,{className:"BaseText TextGray",children:[null===l||void 0===l?void 0:l.Name,c]}),!!u&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsx)(G.Text,{className:"BaseText TextGray",children:u})]}),!!d&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsx)(G.Text,{className:"BaseText TextGray",children:d})]})]})]}),(0,Y.jsxs)(G.View,{className:"FTInfoDetail",children:[!t&&(0,Y.jsxs)(G.View,{className:"FTInfoDetailLeft",children:[(0,Y.jsx)(G.Text,{className:"FTInfoDetailBoldText",children:h}),!!g&&(0,Y.jsx)(G.Text,{className:"FlightInfoDetailDuration",children:g}),(0,Y.jsxs)(G.View,{className:"FlexColumn",children:[m>0&&(0,Y.jsx)(G.Text,{className:"FTInfoDetailDayTipArrivalTime",children:S}),(0,Y.jsx)(G.Text,{className:"FTInfoDetailBoldText",children:T})]})]}),(0,Y.jsxs)(G.View,{className:"FTInfoDetailMiddle",children:[(0,Y.jsx)(G.View,{className:"FTInfoDetailLineCircle Top"}),(0,Y.jsx)(G.View,{className:"FTInfoDetailLine"}),(0,Y.jsx)(G.View,{className:"FTInfoDetailLineCircle Bottom"})]}),(0,Y.jsxs)(G.View,{className:"FTInfoDetailRight",children:[(0,Y.jsxs)(G.Text,{className:"FTInfoDetailBoldText",children:[p," ",v]}),!!x&&x.length>0&&(0,Y.jsx)(G.View,{className:"FTInfoDetailStopContainer",children:x.map((function(e,n){return(0,Y.jsxs)(G.View,{className:"FTInfoDetailStop",children:[(0,Y.jsx)(G.View,{className:"FTInfoDetailStopCircle"}),(0,Y.jsx)(G.Text,{className:"FTInfoDetailStopText Flex1",children:"\u7ecf\u505c ".concat((e.CityName?e.CityName+" ":"")+(0,k.LU)(e.DurationMinute))})]},"StopStation".concat(n))}))}),(0,Y.jsxs)(G.Text,{className:"FTInfoDetailBoldText",children:[w," ",I]})]})]})]})}function Rn(e){var n=e.Trains,t=Ne(n),o=t.trains;return(0,Y.jsxs)(G.View,{className:"ModBgWhite FTCardContainer",id:"Train",children:[(0,Y.jsx)(K,{icon:q("TRAIN"),title:"\u706b\u8f66\u7968"}),o.map((function(e,n){return(0,Y.jsx)(jn,{train:e,index:n},n)}))]})}var jn=function(e){var n=e.train,t=e.index,o=O.useActions(),r=o.actionTraceLog,i=O.useActions().handlers.handlePreJump,a=O.useActions().ctrl.handleEditTicket,s=De(n),l=s.isShowWarning,c=s.errorTip,u=s.trainInfo,d=s.jumpParams,p=u.Token,h=u.isSrambleTicket,v=u.disclosureInformation;return h?(0,Y.jsx)(G.View,{className:"ModuleBox MarginBottom16 ".concat(l?"ModuleBoxError":""),id:(0,k.Jb)(p),children:(0,Y.jsxs)(G.View,{className:"Padding32",children:[(0,Y.jsx)(Cn,{train:u,index:t}),(0,Y.jsx)(Mn,{train:u,jumpParams:d}),v&&(0,Y.jsx)(G.View,{className:un("mt24"),children:(0,Y.jsx)(Sn,{type:"infoGray",text:v})}),!!c&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:un("dividingLineVertical")}),(0,Y.jsx)(G.View,{children:(0,Y.jsx)(Sn,{type:"error",text:c})})]})]})}):(0,Y.jsxs)(G.View,{className:"ModuleBox MarginBottom16 ".concat(l?"ModuleBoxError":""),id:(0,k.Jb)(p),children:[(0,Y.jsxs)(G.View,{className:"Padding32",children:[(0,Y.jsx)(Cn,{train:u,index:t}),(0,Y.jsx)(En,{train:u}),!!c&&(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(G.View,{children:[(0,Y.jsx)(G.View,{className:un("dividingLineVertical")}),(0,Y.jsx)(Sn,{type:"error",text:c})]})})]}),(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){r("grp_trainchange_trace"),i({scene:"\u66f4\u6362\u8f66\u6b21/\u5750\u5e2d",jumpFunc:a,initParams:d})},children:"\u66f4\u6362\u8f66\u6b21/\u5750\u5e2d"})})]})]})},Cn=function(e){var n=e.train,t=e.index,o=n.departureDate,r=n.departureCity,i=n.arrivalCity,a=n.isSrambleTicket,s=n.durationMinutes,l=n.TrainNo,c=n.SeatName,u=n.confirmDuration,d=n.isSupportIDCard,p=n.isCR;return(0,Y.jsxs)(G.View,{children:[(0,Y.jsxs)(G.View,{className:un("flex_row","flex_align_center"),children:[(0,Y.jsx)(G.View,{className:un("numBluebg"),children:(0,Y.jsx)(G.Text,{className:un("text22","#fff"),children:t+1})}),(0,Y.jsxs)(G.View,{className:un("flex_1","flex_wrap","flex_align_center"),children:[(0,Y.jsx)(G.View,{children:(0,Y.jsx)(G.Text,{className:un("text26"),children:o})}),(0,Y.jsx)(G.View,{className:un("inlineDivider")}),(0,Y.jsxs)(G.View,{className:un("flex_align_center"),children:[(0,Y.jsx)(G.Text,{className:un("text26"),children:r}),(0,Y.jsx)(G.Text,{className:un("summaryIcon1"),children:"\ue9e2"}),(0,Y.jsx)(G.Text,{className:un("text26"),children:i})]}),!a&&[(0,Y.jsx)(G.View,{className:un("inlineDivider")},1),(0,Y.jsxs)(G.View,{className:un("flex_row","flex_align_center"),children:[(0,Y.jsx)(G.Text,{className:un("summaryIcon2"),children:"\ueab6"}),(0,Y.jsx)(G.Text,{className:un("text26"),children:s})]},2)],a&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(G.View,{className:un("flex_1")},1),(0,Y.jsx)(G.View,{className:un("flex_row","flex_align_center"),children:(0,Y.jsx)(G.Text,{className:un("text26","#f70"),children:"\u9700\u62a2\u7968"})},2)]})]})]}),a?(0,Y.jsx)(G.View,{className:un("flex_row","mt8"),children:!!u&&(0,Y.jsx)(mn,{className:"TagGreen",text:u})}):(0,Y.jsxs)(G.View,{className:un("flex_align_center","mt8"),children:[(0,Y.jsx)(G.Text,{className:un("text26"),children:l}),(0,Y.jsx)(G.View,{className:un("inlineDivider")}),(0,Y.jsx)(G.Text,{className:un("text26"),children:c}),(!!u||!!a)&&(0,Y.jsx)(G.View,{className:un("inlineDivider")}),(0,Y.jsxs)(G.View,{className:"Flex1 TagGroups",children:[!!u&&(0,Y.jsx)(mn,{className:"TagGreen",text:u}),!!d&&(0,Y.jsx)(mn,{className:"TagBlue",text:"\u53ef\u5237\u8eab\u4efd\u8bc1"}),!!p&&(0,Y.jsx)(mn,{className:"TagBlue",text:"\u590d\u5174\u53f7"})]})]})]})},En=function(e){var n=e.train,t=n.arrivalTime,o=n.arrivalDate,r=n.arrivalStation,i=n.departureTime,a=n.departureStation,s=n.isOverNight;return(0,Y.jsxs)(G.View,{className:un("transBox"),children:[(0,Y.jsxs)(G.View,{className:un("transLeft"),children:[(0,Y.jsx)(G.View,{children:(0,Y.jsx)(G.Text,{className:un("text30"),children:i})}),(0,Y.jsxs)(G.View,{children:[s&&(0,Y.jsx)(G.Text,{className:un("text20","#f70"),children:o}),(0,Y.jsx)(G.Text,{className:un("text30"),children:t})]})]}),(0,Y.jsx)(G.View,{className:un("transMiddle")}),(0,Y.jsxs)(G.View,{className:un("transRight"),children:[(0,Y.jsx)(G.View,{children:(0,Y.jsx)(G.Text,{className:un("text30"),children:a})}),(0,Y.jsx)(G.View,{children:(0,Y.jsx)(G.Text,{className:un("text30"),children:r})})]})]})},Mn=function(e){var n=e.train,t=e.jumpParams,o=n.arrivalTime,r=n.arrivalDate,i=n.arrivalStation,a=n.departureTime,s=n.departureStation,l=n.TrainNo,c=n.SeatName,u=n.isSupportIDCard,d=n.isCR,p=(n.isOverNight,n.alternativeTrainStr),h=n.alternativeSeatStr,v=O.useActions(),g=v.actionTraceLog,f=O.useActions().handlers.handlePreJump,x=O.useActions().ctrl,m=x.handleEditTicket,S=x.handleEditSnapTicket,T=!!p||!!h;return(0,Y.jsxs)(G.View,{className:un("moduleExtra"),children:[(0,Y.jsxs)(G.View,{children:[(0,Y.jsx)(G.Text,{className:un("text26","#666"),children:"\u4e3b\u62a2\u8f66\u7968"}),(0,Y.jsxs)(G.View,{className:un("mt8","relative","pr64"),children:[(0,Y.jsxs)(G.View,{className:un("flex_align_center","flex_wrap"),children:[(0,Y.jsx)(G.Text,{className:un("text30","mr16"),children:l}),(0,Y.jsx)(G.Text,{className:un("text30","mr16"),children:c}),!!u&&(0,Y.jsx)(mn,{className:"TagBlue",text:"\u53ef\u5237\u8eab\u4efd\u8bc1"}),!!d&&(0,Y.jsx)(mn,{className:"TagBlue",text:"\u590d\u5174\u53f7"})]}),(0,Y.jsxs)(G.Text,{children:[(0,Y.jsx)(G.Text,{className:un("text26"),children:"".concat(a,"-").concat(o)}),(0,Y.jsx)(G.Text,{className:un("text20","#666"),children:" (".concat(r,")")}),(0,Y.jsx)(G.Text,{className:un("fontIcon","text26","#ccd6e5"),children:"\udb83\ude5a"}),(0,Y.jsx)(G.Text,{className:un("text26"),children:"".concat(s,"-").concat(i)})]}),(0,Y.jsx)(G.View,{className:un("trainEditWrapper"),onClick:function(){g("grp_maintrain_number_trace"),f({scene:"\u66f4\u6362\u4e3b\u62a2\u8f66\u7968",jumpFunc:m,initParams:t})},children:(0,Y.jsx)(G.Text,{className:un("fontIcon","text28","#0066f6"),children:"\ue93b"})})]})]}),(0,Y.jsx)(G.View,{className:un("moduleBoxDivider","mt24","mb24")}),T?(0,Y.jsxs)(G.View,{children:[(0,Y.jsx)(G.Text,{className:un("text26","#666"),children:"\u5907\u62a2\u8f66\u7968"}),(0,Y.jsxs)(G.View,{className:un("relative","pr64"),children:[(0,Y.jsxs)(G.Text,{children:[(0,Y.jsx)(G.Text,{className:un("text30"),children:p}),(0,Y.jsx)(G.Text,{className:un("icon3","#ccd6e5"),children:"\udb83\ude5a"}),(0,Y.jsx)(G.Text,{className:un("text30"),children:h})]}),(0,Y.jsx)(G.View,{className:un("trainEditWrapper"),onClick:function(){g("grp_alternatetrain_number_trace"),f({scene:"\u66f4\u6362\u5907\u62a2\u8f66\u7968",jumpFunc:S,initParams:t})},children:(0,Y.jsx)(G.Text,{className:un("fontIcon","text28","#0066f6"),children:"\ue93b"})})]})]}):(0,Y.jsxs)(G.View,{className:un("flex_align_center"),onClick:function(){g("grp_addtrain_trace"),f({scene:"\u6dfb\u52a0\u5907\u62a2\u8f66\u7968",jumpFunc:S,initParams:t})},children:[(0,Y.jsx)(G.Text,{className:un("trainAddIcon"),children:"\ue93e"}),(0,Y.jsx)(G.Text,{className:un("trainAddText"),children:"\u6dfb\u52a0\u5907\u62a2\u8f66\u7968\uff0c\u63d0\u5347\u51fa\u7968\u6210\u529f\u7387\u786e\u4fdd\u6b63\u5e38\u51fa\u884c"})]})]})},_n={1:"\u4e0d\u53ef\u53d6\u6d88",2:"\u9650\u65f6\u514d\u8d39\u53d6\u6d88",3:"\u514d\u8d39\u53d6\u6d88",4:"\u6709\u635f\u53d6\u6d88",5:"30\u5206\u949f\u514d\u8d39\u53d6\u6d88"},An={1:"TagRed",2:"TagBlue",3:"TagGreen",4:"TagRed",5:"TagGreen"},bn=f.memo(Bn),Zn=bn;function Bn(e){var n=e.Hotels,t=e.childCount;return(0,k.xb)(n)?null:(0,Y.jsxs)(G.View,{style:{position:"relative"},children:[(0,Y.jsx)(Fn,{}),(0,Y.jsx)(Vn,{Hotels:n,childCount:t})]})}function Fn(){var e=ye(),n=e.HotelSearchStatus,t=e.hotelSearchStr;return"loading"===n?(0,Y.jsx)(G.View,{children:(0,Y.jsx)(fn,{text:t,more:!1,replaceBtn:!1,batchLoading:!0,detailAction:function(){},replaceAction:function(){}})}):"changed"===n&&t?(0,Y.jsx)(G.View,{children:(0,Y.jsx)(fn,{text:t,more:!1,replaceBtn:!1,batchLoading:!1,detailAction:function(){},replaceAction:function(){}})}):null}function Vn(e){var n=e.Hotels,t=e.childCount;return(0,Y.jsxs)(G.View,{className:"ModBgWhite FTCardContainer",children:[(0,Y.jsx)(K,{icon:q("HOTEL"),title:"\u9152\u5e97"}),t>0&&(0,Y.jsx)(G.View,{className:"MarginBottom32",children:(0,Y.jsx)(Sn,{type:"warning",text:"\u643a\u5e26\u513f\u7ae5\u51fa\u884c\uff0c\u8bf7\u5173\u6ce8\u9152\u5e97\u653f\u7b56(\u542b\u513f\u7ae5\u548c\u52a0\u5e8a)\uff0c\u4ee5\u514d\u5f71\u54cd\u5165\u4f4f"})}),n.map((function(e,n){return(0,Y.jsx)(Ln,{hotel:e,index:n},n)}))]})}function Ln(e){var n,t=e.hotel,o=e.index,r=O.useActions(),i=r.actionTraceLog,a=O.useActions().handlers.handleJumpPreflight,s=O.useActions().ctrl,c=s.handleGoHotelDetail,u=s.handleGoHotelList,d=Re(t,o)||{},p=d.hotelInfo,h=d.roomInfo,v=d.isShowWarning,g=d.errorTip,x=d.jumpParams,m=d.isShowReselectTips;return(0,Y.jsxs)(G.View,{className:"ModuleBox MarginBottom16 ".concat(m?"ModuleBoxTips":""," ").concat(v?"ModuleBoxError":""),id:(0,k.Jb)(p.HotelToken),children:[(0,Y.jsx)(G.View,{className:"ModuleBoxContent Padding32",style:{paddingBottom:0},children:(0,Y.jsx)(Hn,{hotelInfo:p,roomInfo:h,index:o,jumpParams:x})}),(v||m)&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"Padding32",children:[!!g&&(0,Y.jsx)(Sn,{type:"error",text:g}),!g&&m&&(0,Y.jsx)(Sn,{type:"warning",text:"\u8bf7\u5728\u6b64\u5904\u66f4\u6362\u9152\u5e97\u6216\u623f\u578b"})]}),(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottomContainer",children:(0,Y.jsxs)(G.View,{className:"ModuleBoxBottom",children:[1!==(null===t||void 0===t||null===(n=t.SegmentInfo)||void 0===n?void 0:n.MoreHotelStatus)&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){i("hotel_change_click"),a((function(e){var n=(0,k.UE)((0,l.Z)((0,l.Z)({},e),x));u(n)}))},children:"\u66f4\u6362\u9152\u5e97"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottomDivider"})]}),(0,Y.jsx)(G.Text,{className:"ModuleBoxBottomText",onClick:function(){i("hotel_changeroom_click"),a((function(e){var n=(0,k.UE)((0,l.Z)((0,l.Z)({},e),x));c(n)}))},children:"\u66f4\u6362\u623f\u578b"})]})})]})}function Hn(e){var n=e.hotelInfo,t=e.roomInfo,o=e.index,r=e.jumpParams,i=n.CheckinDate,a=n.CheckoutDate,s=n.CityName,l=n.Nights;return(0,Y.jsxs)(G.View,{id:(0,k.Jb)(t.RoomToken),children:[(0,Y.jsxs)(G.View,{className:"FTInfoSummary",children:[(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:i}),(0,Y.jsx)(G.Text,{className:"BaseText FTInfoSummaryArrow",children:"\ue9e2"}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:a}),(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:s}),(0,Y.jsx)(G.View,{className:"InlineDivider "}),(0,Y.jsxs)(G.Text,{className:"BaseText TextDark",children:["\u5171",l,"\u665a"]})]}),(0,Y.jsx)(Un,{hotelInfo:n,index:o,jumpParams:r}),(0,Y.jsx)(On,{roomInfo:t,index:o})]})}function Un(e){var n=e.hotelInfo,t=e.index,o=e.jumpParams,r=O.useActions(),i=r.actionTraceLog,a=O.useActions().handlers,s=a.handleShowHotelPolicyMask,c=a.handleJumpPreflight,u=O.useActions().ctrl.handleGoHotelDetail,d=n.HotelName,p=n.LocationZone,h=n.logoUrl,v=void 0===h?"":h,g=n.CommentPoint,f=n.GradeTag,x=n.CommentTag,m=je(),S=m.childCount;return(0,Y.jsxs)(G.View,{className:"HotelInfoDetail",onClick:function(){i("hotel_detail_click"),c((function(e){var n=(0,k.UE)((0,l.Z)((0,l.Z)({},e),o));u(n)}))},children:[!!v&&(0,Y.jsx)(G.View,{className:"HotelInfoDetailPicContainer",children:(0,Y.jsx)(G.Image,{className:"HotelInfoDetailPic",mode:"aspectFill",src:v})}),(0,Y.jsxs)(G.View,{className:"HotelInfoDetailContent Flex1",children:[(0,Y.jsx)(G.View,{className:"FlexAlignCenter",children:(0,Y.jsxs)(G.Text,{children:[(0,Y.jsx)(G.Text,{className:"HotelInfoDetailTitle Ellipsis2",children:d}),(0,Y.jsx)(G.Text,{className:"HotelInfoDetailArrow",children:"\ue944"})]})}),(0,Y.jsxs)(G.View,{className:"MarginTop8",children:[!!g&&(0,Y.jsxs)(G.Text,{className:"BaseText TextSteelBlue FontW600 MarginRight8",children:[g,"\u5206"]}),!!f&&(0,Y.jsx)(G.Text,{className:"BaseText TextSteelBlue",children:"".concat(f," ")}),!!x&&(0,Y.jsx)(G.Text,{className:"BaseText TextSteelBlue",children:"\u201c".concat(x,"\u201d ")})]}),(0,Y.jsx)(G.View,{className:"MarginTop8",children:(0,Y.jsx)(G.Text,{className:"BaseText TextGray",children:p})}),(0,Y.jsx)(G.View,{className:"MarginTop8",onClick:function(e){e.stopPropagation(),i("hotel_policy_click"),s(t,d)},children:(0,Y.jsx)(G.Text,{className:"BaseText TextBlue",children:S>0?"\u513f\u7ae5\u3001\u52a0\u5e8a\u53ca\u9152\u5e97\u653f\u7b56":"\u9152\u5e97\u653f\u7b56"})})]})]})}function On(e){var n=e.roomInfo,t=e.index,o=O.useActions(),r=o.actionTraceLog,i=n.RoomName,a=n.SelectedRoomCount,s=n.isCanEditRoomCount,l=n.confirmDuration,c=n.mealInfo,u=n.numberLimitInfo,d=n.bedInfo,p=n.addBedInfo,h=n.windowInfo,v=n.GiftDescription,g=n.vipDiscountPrice,f=n.userLeveName,x=n.cancleHotelPolicy,m=n.cancelPenaltyPolicyType,S=n.hotelDiscountTags,T=n.hotelRecommendTip,I=n.ApplicationInfo,k=O.useActions().handlers,w=k.handleShowRoomInfoMask,P=k.handleShowHotelRoomCountMask,N=An[m]||An[1];return(0,Y.jsxs)(G.View,{className:"HotelInfoExtra MarginTop24",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsxs)(G.View,{className:"Flex1",onClick:function(){w(t),r("hotel_chamber_click")},children:[(0,Y.jsx)(G.Text,{className:"BaseText TextDark MarginRight16",children:i}),(0,Y.jsx)(G.Text,{className:"HotelInfoExtraArrow",children:"\ue944"})]}),(0,Y.jsxs)(G.View,{onClick:function(){s&&(r("hotel_rooms_click"),P(n))},children:[(0,Y.jsxs)(G.Text,{className:"BaseText TextBlue MarginRight8",children:[a,"\u95f4"]}),s&&(0,Y.jsx)(G.Text,{className:"HotelInfoExtraArrow",children:"\ue0b2"})]})]}),(0,Y.jsx)(G.View,{className:"MarginTop8",children:(0,Y.jsxs)(G.Text,{className:"BaseText TextGray",children:[c,!!u&&"\xb7\u53ef\u4f4f".concat(u),!!d&&"\xb7".concat(d),!!p&&"(".concat(p,")"),!!h&&"\xb7".concat(h)]})}),(0,Y.jsxs)(G.View,{className:"MarginTop8 TagGroups",children:[!!l&&(0,Y.jsx)(mn,{className:"TagGreen",text:l}),!!x&&N&&(0,Y.jsx)(mn,{className:N,text:_n[m]}),!!f&&g>0&&(0,Y.jsx)(mn,{className:"TagOrange",text:f}),S.map((function(e,n){return(0,Y.jsx)(mn,{className:"TagOrange",text:e},n)})),!!v&&(0,Y.jsx)(mn,{className:"TagOrange",text:"\u793c"})]}),!!T&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(Sn,{type:"warning",text:T})}),!!I&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(Sn,{type:"warning",text:I})})]})}var Gn=f.memo(qn),Yn=Gn;function qn(e){var n=e.resource,t=e.id,o=void 0===t?"":t,r=n.groups,i=n.categoryId,a=n.title;return(0,Y.jsxs)(G.View,{className:"ModBgWhite",id:o,children:[(0,Y.jsx)(K,{title:a,icon:q(""+i)}),n.groups.map((function(e,n){return(0,Y.jsx)(Wn,{segmentItem:e,index:n,groupResource:r,title:a,categoryId:i},n)}))]})}function Wn(e){var n,t,o=e.segmentItem,r=e.index,i=e.groupResource,a=e.title,s=e.categoryId,c=(null===o||void 0===o?void 0:o.datas)||[],u=null===o||void 0===o?void 0:o.SegmentNo;c=c.filter((function(e){return 2!==(2&e.Basic.BMStatus)}))||[];var d=Ee(c,u,s),p=d.selectSegmentData,h=d.hasDetailInfo,v=d.ResourceName,g=d.ConfirmDuration,x=d.UseDate,m=d.orderExtendInfosTemplate,S=d.errorTip,T=d.jumpParams,I=d.Token,w=d.freeUnsubscribeTag,P=O.useActions().handlers,N=P.handleShowResourceDescriptionMask,D=P.handleShowResourceSelectMask,y=P.handleJumpPreflight,R=O.useActions().ctrl.handleChangeSingleTrain;return(0,Y.jsxs)(J,{last:r==i.length-1,id:(0,k.Jb)(I),children:[0!==(null===(n=c)||void 0===n?void 0:n.length)&&(0,Y.jsxs)(G.View,{className:"ModuleBoxContent Padding32",children:[(0,Y.jsx)(G.Text,{style:{flex:1},onClick:function(){h&&N(p)},children:(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:v}),h&&(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]})}),g&&"\u884c\u7a0b"==a&&!!w&&(0,Y.jsxs)(G.View,{className:"MarginTop16 FlexRow FlexAlignCenter",children:[(0,Y.jsx)(G.Text,{className:"BannerTagBox TagGreen BaseText MarginRight8",children:g}),(0,Y.jsxs)(G.View,{className:"FlexRow FlexAlignCenter",children:[(0,Y.jsx)(G.View,{className:"BannerTagBox",children:(0,Y.jsx)(G.Image,{style:{height:"24rpx",width:"143rpx",padding:"0 4rpx"},src:"https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/refundtag/detail_2147.png"})}),(0,Y.jsx)(G.Text,{className:"BaseText TextGreen MarginLeft8",children:"(\u4fdd\u9669\u9664\u5916)"})]})]}),g&&!("\u884c\u7a0b"==a&&w)&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(mn,{className:"TagGreen",text:g})}),(0,Y.jsx)(G.View,{className:"MarginTop16",style:{flexDirection:"row",flex:1},children:(0,Y.jsx)(G.Text,{className:"BaseText TextDark",children:19==s?"\u51fa\u53d1\u65e5\u671f: ".concat(x):"\u4f7f\u7528\u65e5\u671f: ".concat(x)})}),m.length>1&&(0,Y.jsx)(Kn,{SelectedResource:p,orderExtendInfosTemplate:m}),!!S&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginTop32 MarginBottom32"}),(0,Y.jsx)(Sn,{type:"error",text:S})]})]}),(null===(t=c)||void 0===t?void 0:t.length)>1&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u706b\u8f66\u7968"==a?"\u66f4\u6362\u706b\u8f66":"\u66f4\u6362".concat(a),onPress:function(){y((function(e){if(19==s){var n=(0,k.UZ)((0,l.Z)((0,l.Z)({},e),T));R(n)}else D(c)}))}})})]})]},r)}function Kn(e){var n,t=e.SelectedResource,o=e.orderExtendInfosTemplate,r=O.useActions(),i=r.actionTraceLog,a=O.useActions().handlers.handleShowResourceAddInfoMask,s=(null===t||void 0===t||null===(n=t.SelectedInfo)||void 0===n?void 0:n.OrderExtendInfos)||[],l=!1,c=[];return null===o||void 0===o||o.forEach((function(e){var n=(null===s||void 0===s?void 0:s.find((function(n){return n.Id==e.ID})))||{},t=n.Name,o=n.Content;o&&(l=!0,c.push("".concat(t,": ").concat(o)))})),(0,Y.jsxs)(G.View,{className:"ModCardExtra",children:[(0,Y.jsxs)(G.View,{style:{position:"relative"},children:[(0,Y.jsx)(G.Text,{className:"Flex1 Text30 TextDark",children:"\u63a5\u9001\u5907\u6ce8"}),(0,Y.jsx)(G.Text,{className:"BaseText TextBlue MarginLeft32",style:{position:"absolute",right:0},onClick:function(){i("pickup_click"),a(t)},children:l?"\u4fee\u6539":"\u586b\u5199"})]}),(0,Y.jsx)(G.View,{className:"MarginTop8",children:(0,Y.jsx)(G.Text,{className:"Text24 TextDarkGray",children:l?c.join(" | "):"\u82e5\u6709\u63a5\u9001\u9700\u6c42\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u586b\u5199\u63a5\u9001\u5907\u6ce8\uff0c\u5177\u4f53\u63a5\u9001\u8303\u56f4\u8bf7\u53c2\u8003\u884c\u7a0b\u4e2d\u76f8\u5173\u63cf\u8ff0\u3002"})})]})}function Jn(e){var n=Xn(e),t=function(t){var o=e.cur,r=e.onChange,i=e.customOptions||n,a=i.indexOf(o);0===a&&t<0||a===i.length-1&&t>0||r(i[a+t],t>0)},o=e.customOptions||n,r=e.cur,i=(e.unit,e.required),a=e.min;r=+r,r=o.indexOf(r)>-1?r:i?a:0;var s=!1,l=!1;r===o[o.length-1]&&(s=!0),r===o[0]&&(l=!0);var c=r;return(0,Y.jsxs)(G.View,{className:"CommonUINumContainer",children:[(0,Y.jsx)(G.View,{className:"CommonUINumButton",onClick:function(){t(-1)},children:(0,Y.jsx)(G.Text,{className:l?"CommonUINumButtonText disable":"CommonUINumButtonText",children:"\ued0a"})}),(0,Y.jsx)(G.View,{className:"CommonUINumCount",children:(0,Y.jsx)(G.Text,{className:"CommonUINumCountText",children:c})}),(0,Y.jsx)(G.View,{className:"CommonUINumButton",onClick:function(){t(1)},children:(0,Y.jsx)(G.Text,{className:s?"CommonUINumButtonText disable":"CommonUINumButtonText",children:"\ue93e"})})]})}var Xn=function(e){var n=e.min,t=[n];while((n+=e.step)<=e.max)t.push(n);return!e.required&&t.indexOf(0)<0&&t.unshift(0),t},$n=t(92954),zn=t.n($n),Qn=t(98933);function et(e){var n=e.startDate,t=void 0===n?"":n,o=e.endDate,r=void 0===o?"":o,i=e.anchorDate,l=void 0===i?"":i,c=e.showFestive,u=void 0===c||c,d=e.dateOptions,p=e.showMonthHead,h=void 0===p||p,v=e.onItemClick,x=e.title,m=void 0===x?"":x,S=e.handleClose,T=(e.callBackOptions,(0,f.useState)({})),I=(0,se.Z)(T,2),k=I[0],w=I[1],P=(0,f.useState)([l]),N=(0,se.Z)(P,2),D=N[0],y=N[1];(0,f.useEffect)((function(){function e(){return n.apply(this,arguments)}function n(){return n=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:n=e.sent,w(n);case 4:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()}),[]);var R=function(){var e=nt(t,r);return e.map((function(e){var n=e.year,t=e.month,o=j({year:n,month:t});return{showMonth:"".concat(n,"\u5e74").concat(t,"\u6708"),dayLists:o}}))},j=function(e){for(var n=e.year,o=e.month,i=(new Qn.Z).format("YYYY-MM-DD"),a=new Date(n,o-1,1).getDay(),s=[],l=0;l<a;l++)s.push({day:""});for(var c=new Date(n,o,0).getDate(),p=("00"+o).substr(-2),h=1;h<=c;h++){var v=("00"+h).substr(-2),g="".concat(n,"-").concat(p,"-").concat(v),f="".concat(n).concat(p).concat(v),x=h,m=d[g]||d[f]||{},S=i===g?"\u4eca\u5929":"";u&&(S=k[g]||S);var T=!0;(m.disable||g<t||g>r)&&(T=!1);var I={date:g,day:x,supStr:S,isValid:T,option:m};s.push(I)}return s},C=function(e){var n=e.showMonth,t=e.dayLists,o=(0,Y.jsx)(G.View,{className:"calenMonth",children:(0,Y.jsx)(G.Text,{className:"calenMonthText",children:n})}),r=(0,Y.jsx)(G.View,{className:"origin_calenDateList",children:t.map((function(e,n){var t=e.date,o=e.day,r=e.isValid,i=e.option,a=void 0===i?{}:i,s=e.supStr,l=D.includes(t);return(0,Y.jsxs)(G.View,{className:(0,g.classnames)({calenDateItem:r,calenInvalidDateItem:!r,selectedCalenDateItem:l}),onClick:r?function(){y([t]),null===v||void 0===v||v(e),null===S||void 0===S||S()}:void 0,children:[(0,Y.jsx)(G.View,{className:"calenDateTopTip",children:s||""}),(0,Y.jsx)(G.View,{className:"calenDateText",children:o}),(0,Y.jsx)(G.View,{className:"calenDateSubText ".concat((null===a||void 0===a?void 0:a.titleColorType)||""),children:a.title||""})]},t+n)}))});return h?[o,r]:[r]},E=R(),M=E.map((function(e){return C(e)}));return(0,Y.jsxs)(g.PopUp,{title:m||"\u9009\u62e9\u751f\u6548\u65e5\u671f",handleClose:S,height:"taller",className:"PopMaskZIndex",children:[(0,Y.jsxs)(G.View,{className:"origin_calenBox",children:[(0,Y.jsx)(G.View,{className:"CalenTip",children:"\u65e5\u671f\u5747\u4e3a\u5f53\u5730\u65f6\u95f4"}),(0,Y.jsxs)(G.View,{className:"calenWeekBox",children:[(0,Y.jsx)(G.View,{className:"calenWeekItem color_red",children:"\u65e5"}),(0,Y.jsx)(G.View,{className:"calenWeekItem",children:"\u4e00"}),(0,Y.jsx)(G.View,{className:"calenWeekItem",children:"\u4e8c"}),(0,Y.jsx)(G.View,{className:"calenWeekItem",children:"\u4e09"}),(0,Y.jsx)(G.View,{className:"calenWeekItem",children:"\u56db"}),(0,Y.jsx)(G.View,{className:"calenWeekItem",children:"\u4e94"}),(0,Y.jsx)(G.View,{className:"calenWeekItem color_red",children:"\u516d"})]}),M]}),(0,Y.jsx)(G.View,{style:{height:90,width:"100%"}})]})}var nt=function(e,n){var t=tt(e),o=tt(n),r=[];while(o.setDate(1)-t.setDate(1)>=0)r.push({year:t.getFullYear(),month:t.getMonth()+1}),t.setMonth(t.getMonth()+1);return r},tt=function(e){return 8===e.length?new Date(e.substr(0,4)+"/"+e.substr(4,2)+"/"+e.substr(6,2)):new Date(e.replace(/[-\u5e74\u6708\u65e5]/g,"/"))},ot=function(e){var n={},t=JSON.parse(e.configContent),o=t.Holiday;return o.forEach((function(e){var t=e.Year,o=e.HolidayList;o.forEach((function(e){var o=e.HolidayDay,r=e.HolidayCount,i=e.StartDay,a=e.EndDay,s=e.HolidayName,l=e.WorkDay;if(o&&(n["".concat(t,"-").concat(o.slice(0,2),"-").concat(o.slice(-2))]=s),l){var c=l.split(",");c.forEach((function(e){n["".concat(t,"-").concat(e.slice(0,2),"-").concat(e.slice(-2))]="\u73ed"}))}var u=new Date("".concat(t,"/").concat(i.slice(0,2),"/").concat(i.slice(-2))),d=new Date("".concat(t,"/").concat(a.slice(0,2),"/").concat(a.slice(-2)));while(u.valueOf()<=d.valueOf()&&r){var p=("0"+(u.getMonth()+1)).slice(-2),h=("0"+u.getDate()).slice(-2);n["".concat(t,"-").concat(p,"-").concat(h)]||(n["".concat(t,"-").concat(p,"-").concat(h)]="\u4f11"),u=new Date(u.setDate(u.getDate()+1))}}))})),n},rt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,o,r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\u8bf7\u6c42\u6570\u636e"),e.next=4,(0,$n.request)({url:"https://m.ctrip.com/restapi/soa2/12378/json/getGeneralConfigData?key=Holiday",method:"GET"});case 4:return n=e.sent,t=n.data,console.log("\u8bf7\u6c42\u6570\u636e\u5b8c\u6210",t),o=t.rspJsonStr,r=JSON.parse(o),e.abrupt("return",ot(r.configList[0]));case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();function it(e){var n=e.resource,t=e.resourceType,o=e.categorySeqId,r=void 0===o?void 0:o,i=e.poiId,a=void 0===i?void 0:i,s=en(n),c=s.Basic,u=s.Token,d=s.Shoppings,p=s.SelectedUseDate,h=s.SelectedUseEndDate,v=s.isHiddenPrice,g=s.datePlaceHolder,x=s.endDatePlaceHolder,m=s.isShowInputError,S=s.SelectedCount,T=s.isDoubleDate,I=s.warningDate,w=s.SelectedShopping,P=s.OrderExtendInfos,N=t,D=r,y=O.useActions().handlers.handleUpdateResource,R=(0,f.useState)(!1),j=(0,se.Z)(R,2),C=j[0],E=j[1],M=(0,f.useState)({}),_=(0,se.Z)(M,2),A=_[0],b=_[1],Z=function(e){E(!0),at({Basic:c,Shoppings:d,SelectedUseDate:p,SelectedUseEndDate:h,isHiddenPrice:v,isFirst:e,datePlaceHolder:g,endDatePlaceHolder:x,setDateOptions:b})};return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"MarginTop16",onClick:function(){Z(!0)},children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart ModCardExtra",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark",style:{minWidth:72},children:g}),(0,Y.jsxs)(G.View,{className:"FlexAlignStart Flex1 MarginLeft24",children:[p?(0,Y.jsx)(G.Text,{className:"Flex1 Text30 TextDark",children:p}):(0,Y.jsxs)(G.Text,{className:"Flex1 Text30 TextWhite",children:["\u8bf7\u9009\u62e9",g]}),(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon MarginTop16",children:"\ue944"})]})]}),!!m&&!!S&&!p&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:"\u8bf7\u9009\u62e9".concat(g)})})]}),!!T&&(0,Y.jsxs)(G.View,{className:"MarginTop16",onClick:function(){Z(!1)},children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart ModCardExtra",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark",style:{minWidth:72},children:x}),(0,Y.jsxs)(G.View,{className:"FlexAlignStart Flex1 MarginLeft24",children:[h?(0,Y.jsx)(G.Text,{className:"Flex1 Text30 TextDark",children:h}):(0,Y.jsxs)(G.Text,{className:"Flex1 Text30 TextWhite",children:["\u8bf7\u9009\u62e9",x]}),(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon MarginTop16",children:"\ue944"})]})]}),!!m&&!!S&&!h&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:"\u8bf7\u9009\u62e9".concat(x)})})]}),!!I&&(0,k.A$)(n)&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"warning",text:I})}),C&&(0,Y.jsx)(et,(0,l.Z)((0,l.Z)({},A),{},{onItemClick:function(e){var n=e.date;if(null!==A&&void 0!==A&&A.isFirst){var t={Token:u,Basic:c,SelectedShopping:w,SelectedCount:S,SelectedInfo:{UseDate:n,EndUseDate:T?"":n,OrderExtendInfos:P},resourceType:N,updateType:"date",categorySeqId:D,poiId:a,shouldSelectdUseDate:!0};y(t)}else{var o={Token:u,Basic:c,SelectedShopping:w,SelectedCount:S,SelectedInfo:{UseDate:p,EndUseDate:n,OrderExtendInfos:P},resourceType:N,updateType:"date",categorySeqId:D,poiId:a,shouldSelectdUseDate:!0};y(o)}},handleClose:function(){E(!1)}}))]})}var at=function(e){var n,t,o,r=e.Shoppings,i=e.Basic,a=e.SelectedUseDate,s=void 0===a?"":a,l=e.SelectedUseEndDate,c=void 0===l?"":l,u=e.isFirst,d=void 0===u||u,p=e.datePlaceHolder,h=void 0===p?"\u9009\u62e9\u65e5\u671f":p,v=e.endDatePlaceHolder,g=void 0===v?"\u8bf7\u9009\u62e9\u8fd8\u4ef6\u65e5\u671f":v,f=e.isHiddenPrice,x=e.setDateOptions;if(d||s){var m="";m=d?h:g;var S={},T={},I=i.BMStatus,w=(null===i||void 0===i?void 0:i.ExtendInfos)||[],P=(null===w||void 0===w||null===(n=w.find((function(e){return"TtdInfo"==(null===e||void 0===e?void 0:e.Code)})))||void 0===n?void 0:n.FieldValues)||[],N=Number((null===P||void 0===P||null===(t=P.find((function(e){return"MinBookingDays"==e.Key})))||void 0===t?void 0:t.Value)||0),D=Number((null===P||void 0===P||null===(o=P.find((function(e){return"MaxBookingDays"==e.Key})))||void 0===o?void 0:o.Value)||0),y=(0,k._4)(I,N),R="",j="",C=(0,k.eh)(r),E=(0,k.ZH)(C,N),M=(0,k.ep)(C,D,N,s,r),_=s;if(console.log({MaxBookingDays:D,MinBookingDays:N,dateList:C,startDateList:E,endDateList:M}),y){var A,b,Z=E[0],B=E[E.length-1];if(d){for(var F,V,L=Qn.Z.parse(null===(F=Z)||void 0===F?void 0:F.UseDate).getTime(),H=Qn.Z.parse(null===(V=B)||void 0===V?void 0:V.UseDate).getTime(),U=Qn.Z.dayDiff(L,H),O=[],G=0;G<U+1;G++){var Y=Qn.Z.parse(L,!1,null).addDay(G).format("YYYYMMDD");O.push(Y)}O.map((function(e,n){var t,o=null===(t=E.filter((function(n){return e==Qn.Z.format(n.UseDate,"YYYYMMDD")})))||void 0===t?void 0:t[0];if(o){var r=(0,k.pi)(null===o||void 0===o?void 0:o.UnitPriceInfos),i=Qn.Z.format(o.UseDate,"YYYYMMDD"),a=null===r||void 0===r?void 0:r.Price;S[i]={title:f?"":"\xa5"+a,highligtTitle:!0,titleColorType:"red",disable:!1}}else S[e]={disable:!0}}))}else _=c,null===M||void 0===M||M.map((function(e){var n=Qn.Z.format(e.UseDate,"YYYYMMDD"),t=(0,k.pi)(null===e||void 0===e?void 0:e.UnitPriceInfos),o=null===t||void 0===t?void 0:t.Price;S[n]={title:f?"":"\xa5"+o,highligtTitle:!0,titleColorType:"red",disable:!1}})),Z=M[0],B=M[M.length-1];R=Qn.Z.parse(null===(A=Z)||void 0===A?void 0:A.UseDate).getTime(),j=Qn.Z.parse(null===(b=B)||void 0===b?void 0:b.UseDate).getTime()}else{var q,W;R=Qn.Z.parse(null===(q=C[0])||void 0===q?void 0:q.UseDate).getTime(),j=Qn.Z.parse(null===(W=C[C.length-1])||void 0===W?void 0:W.UseDate).getTime();for(var K=Qn.Z.dayDiff(R,j),J=[],X=0;X<K+1;X++){var $=Qn.Z.parse(R,!1,null).addDay(X).format("YYYYMMDD");J.push($)}J.map((function(e,n){var t,o=null===(t=C.filter((function(n){return e==Qn.Z.format(n.UseDate,"YYYYMMDD")})))||void 0===t?void 0:t[0];if(o){var r=Qn.Z.format(o.UseDate,"YYYYMMDD"),i=(0,k.pi)(null===o||void 0===o?void 0:o.UnitPriceInfos),a=null===i||void 0===i?void 0:i.Price;S[r]={title:f?"":"\xa5"+a,highligtTitle:!0,titleColorType:"red",disable:!1}}else S[e]={disable:!0}}))}T={startDate:Qn.Z.parse(R).format("YYYY-MM-DD"),endDate:Qn.Z.parse(j).format("YYYY-MM-DD"),anchorDate:_?Qn.Z.parse(_).format("YYYY-MM-DD"):"",isOpenView:!0,title:m,isFirst:d,dateOptions:S},x(T)}else zn().showToast({title:"\u8bf7\u5148\u9009\u62e9".concat(h),icon:"success",duration:2e3})},st=function(e){var n=e.resource,t=e.resourceType,o=e.OrderExtendInfosTemplate,r=e.isShowInputError,i=e.categorySeqId;return null===o||void 0===o?void 0:o.map((function(e,o){return(0,Y.jsx)(lt,{resource:n,resourceType:t,orderExtendInfoTemplate:e,isShowInputError:r,categorySeqId:i},o)}))},lt=((0,k.P2)((function(e,n){e(n)}),1e3),function(e){var n,t=e.resource,o=e.resourceType,r=e.orderExtendInfoTemplate,i=e.isShowInputError,a=e.categorySeqId,s=O.useActions().handlers,l=s.handleShowResourceSelectAddInfoMask,c=s.handleUpdateResourceInfoExtendInfo,u=(r.Content,r.Items),d=r.Name,p=r.Token,h=r.Type,v=(null===t||void 0===t||null===(n=t.SelectedInfo)||void 0===n?void 0:n.OrderExtendInfos)||[],g=(null===v||void 0===v?void 0:v.find((function(e){return(null===e||void 0===e?void 0:e.Token)==p})))||{},x="\u8bf7\u9009\u62e9".concat(d),m=(0,f.useState)(null===g||void 0===g?void 0:g.Content),S=(0,se.Z)(m,2),T=S[0],I=S[1],w=(0,f.useState)(null===g||void 0===g?void 0:g.Content),P=(0,se.Z)(w,2),N=P[0],D=P[1],y=[];null===u||void 0===u||u.forEach((function(e){var n,t=(null===g||void 0===g||null===(n=g.Items)||void 0===n?void 0:n.find((function(n){return n.Id==e.ItemID})))||{};(0,k.xb)(t.Content)||y.push(t.Content)}));var R=(0,f.useCallback)((0,k.P2)((function(e,n){e(n)}),500),[]);(0,f.useEffect)((function(){(null===g||void 0===g?void 0:g.Content)!==N&&(null===g||void 0===g?void 0:g.Content)!==T&&(I(null===g||void 0===g?void 0:g.Content),D(null===g||void 0===g?void 0:g.Content))}),[t]);var j=y.join(", "),C=1===h||2===h||3===h,E=4===h||5===h;return(0,Y.jsxs)(G.View,{children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart ModCardExtra",onClick:function(){C&&l({ResourceInfo:t,resourceType:o,categorySeqId:a,OrderExtendToken:p})},children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark",children:d}),(0,Y.jsxs)(G.View,{className:"FlexAlignStart Flex1 MarginLeft24",children:[C&&(j?(0,Y.jsx)(G.Text,{className:"Flex1 Text30 TextDark",children:j}):(0,Y.jsx)(G.Text,{className:"Flex1 Text30 TextWhite",children:x})),E&&(0,Y.jsx)(G.Input,{className:"Flex1 Text30 TextDark",type:"text",value:T,placeholder:x,placeholderStyle:"color: #cccccc",onInput:function(e){var n=e.detail.value;n.length>200&&(n=n.slice(0,200)),I(n);var r=(0,k.WP)({inputValue:n,OrderExtendToken:p,resource:t}),i={poiId:null===t||void 0===t?void 0:t.poiId,Token:t.Token,SegmentNo:0,SelectedInfo:null===t||void 0===t?void 0:t.SelectedInfo,OrderExtendInfos:r,resourceType:o,categorySeqId:a};R(c,i)}})]}),C&&(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon MarginTop16",children:"\ue944"})]}),!!i&&C&&!j&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:x})}),!!i&&E&&!T&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:x})})]})}),ct=f.memo(dt),ut=ct;function dt(e){var n=e.type,t=e.resource,o=e.categorySeqId,r=We(t);if((0,k.xb)(r))return null;var i=r.TicketPoiList,a=r.title,s=r.jumpParams,c=r.recordSelectedTokenList,u=r.handleRecordSelectedToken,d=O.useActions().handlers.handleJumpPreflight,p=O.useActions().storages.setNeedTurnBackSelectTokensStorage,h=O.useActions().ctrl.handleGoToTicket;return(0,k.xb)(i)?null:(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(W,{children:[(0,Y.jsx)(K,{icon:q("4"),title:a}),i.map((function(e,t){var r,v,g=e.datas,x=[];x=g.filter((function(e){var n;return-1!=c.indexOf(e.Token)||!(0,k.xb)(e.SelectedInfo)&&(null===(n=e.SelectedInfo)||void 0===n?void 0:n.SelectedCount)>0}))||[],0==x.length&&(x=g.slice(0,1));var m=(null===g||void 0===g?void 0:g.length)-(null===(r=x)||void 0===r?void 0:r.length),S=null===g||void 0===g?void 0:g.map((function(e){return e.Token}));return(0,Y.jsxs)(J,{last:t==i.length-1,children:[(0,Y.jsxs)(G.View,{className:"ModuleBoxContent",children:[!!e.poiName&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStretch Padding32",onClick:function(){d((function(n){p(S);var t=(0,k.jE)((0,l.Z)((0,l.Z)((0,l.Z)({},n),s),{},{ticketPoi:e}));h(t)}))},children:[!!e.image&&(0,Y.jsx)(G.View,{className:"TicketImageContainer",children:(0,Y.jsx)(G.Image,{className:"TicketImage",mode:"aspectFill",src:e.image})}),(0,Y.jsxs)(G.View,{className:"Flex1",children:[(0,Y.jsxs)(G.View,{className:"FlexRow FlexAlignCenter",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark",children:e.poiName}),(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]}),(null===e||void 0===e?void 0:e.CommentGrade)>0&&(0,Y.jsxs)(G.View,{className:"FlexRow Text26 FontW500 TextSteelBlue",children:[e.CommentGrade,"\u5206"]})]})]}),(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32 "})]}),null===(v=x)||void 0===v?void 0:v.map((function(t,r){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(pt,{index:r,resource:t,ticketPoi:e,type:n,categorySeqId:o,handleRecordSelectedToken:u},r),r!=x.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))]}),m>0&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u66f4\u591a".concat(a,"(").concat(m,")"),onPress:function(){d((function(n){p(S);var t=(0,k.jE)((0,l.Z)((0,l.Z)((0,l.Z)({},n),s),{},{ticketPoi:e}));h(t)}))}})})]})]},t)}))]})})}var pt=function(e){var n=e.index,t=e.resource,o=e.type,r=e.ticketPoi,i=e.categorySeqId,a=e.handleRecordSelectedToken,s=Ke(t),c=s.Token,u=s.Basic,d=s.ResourceName,p=s.SelectedCount,h=s.SelectedShopping,v=s.SelectedInfo,g=s.ResourcePrice,x=s.hasDetailInfo,m=s.TicketCategory,S=s.RefundTypeTitle,T=s.RefundTypeColor,I=s.Tags,w=s.errorTip,P=s.jumpParams,N=s.isMatchShowOrderExtendInfos,D=s.OrderExtendInfos,y=s.isShowInputError,R=O.useActions().ctrl.handleGoToResourceDetail,j=O.useActions().handlers,C=j.handleUpdateResource,E=j.handleJumpPreflight;return(0,Y.jsxs)(G.View,{className:"Padding32",id:(0,k.Jb)(c),children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsxs)(G.View,{className:"Flex1 MarginRight32",onClick:function(){E((function(e){var n={token:c,is6381:"option"==(null===t||void 0===t?void 0:t.ResourceType)?1:0,poiid:r.poiid,selectedCount:p,price:g},o=(0,k.Mt)((0,l.Z)((0,l.Z)((0,l.Z)({},e),P),{},{poiDetail:n}));R(o)}))},children:[(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:d}),x&&(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]}),(!!m||!!S||(null===I||void 0===I?void 0:I.length)>0)&&(0,Y.jsxs)(G.View,{className:"MarginTop16 TagGroups",children:[!!m&&(0,Y.jsx)(mn,{className:"TagBlue",text:m}),!!S&&(0,Y.jsx)(mn,{className:T,text:S}),null===I||void 0===I?void 0:I.map((function(e,n){return(0,Y.jsx)(mn,{className:"TagBlue",text:e})}))]})]}),(0,Y.jsxs)(G.View,{className:"FlexColumn FlexEnd",children:["\u53ef\u9009"==o&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"FlexAlignBaseline",children:[(0,Y.jsx)(G.Text,{className:"Text32 TextOrange",children:g>=0?"\uffe5".concat(g):"-\uffe5".concat(-g)}),0==p&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["/",u.Unit||"\u4efd"]}),p>0&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["x ",p,u.Unit||"\u4efd"]})]}),(0,Y.jsx)(G.View,{className:"FlexRow MarginTop32",children:(0,Y.jsx)(Jn,{required:!1,cur:p,min:h.MinCount,max:h.MaxCount,step:h.StepCount,onChange:function(e,n){var t={Token:c,Basic:u,SelectedShopping:h,SelectedCount:e,SelectedInfo:v,resourceType:"optional",updateType:"count",categorySeqId:5,poiId:r.poiid};a(c),C(t)}})})]}),"\u5fc5\u9009"==o&&(0,Y.jsx)(G.View,{className:"FlexRow",children:(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray",children:[p,u.Unit||"\u4efd"]})})]})]}),(0,k.e3)(t)&&p>0&&(0,Y.jsx)(it,{resource:t,resourceType:"\u5fc5\u9009"==o?"required":"optional",categorySeqId:i,poiId:r.poiid}),N&&(0,Y.jsx)(st,{resource:(0,l.Z)((0,l.Z)({},t),{},{poiId:r.poiid}),OrderExtendInfosTemplate:D,resourceType:"\u5fc5\u9009"==o?"required":"optional",categorySeqId:i,isShowInputError:y}),!!w&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:w})})]},n)},ht=f.memo(gt),vt=ht;function gt(e){var n=e.type,t=e.resource,o=e.resourceType,r=void 0===o?"":o;return(0,Y.jsx)(f.Fragment,{children:t.map((function(e,t){var o,i=e.title,a=e.categorySeqId,s=e.groups,l=null===s||void 0===s||null===(o=s[0])||void 0===o||null===(o=o.datas)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.Basic)||void 0===o?void 0:o.PiCategoryId;return 5==a?(0,Y.jsx)(ut,{type:n,resource:e,categorySeqId:a}):(0,Y.jsxs)(W,{children:[(0,Y.jsx)(K,{title:i,icon:q(""+l)}),s.map((function(e,t){var o=e.type,l=e.PiCategoryId,c=e.IsMust,u=e.GroupId;return"groupResource"==o&&-1!=[-1,1132].indexOf(l)&&c?(0,Y.jsx)(xt,{iresource:e,index:t,groupResource:s,title:i,type:n,categorySeqId:a,IsMust:c,GroupId:u},t):(0,Y.jsx)(ft,{iresource:e,index:t,groupResource:s,title:i,type:n,categorySeqId:a,resourceType:r},t)}))]},t)}))})}var ft=function(e){var n=e.iresource,t=e.index,o=e.groupResource,r=e.title,i=e.type,a=e.categorySeqId,s=e.resourceType,c=void 0===s?"":s,u=Je(n,i,a);if((0,k.xb)(u))return null;var d=u.jumpParams,p=u.ShowSelectedOthers,h=u.ShowOtherSeatCount,v=u.ShowMoreResourceUI,g=u.IsShowPackup,x=u.NeedTurnBackSelectTokens,m=u.setShowMoreResource,S=u.handleRecordSelectedToken,T=u.clearRecordSelectedToken,I=O.useActions().handlers.handleJumpPreflight,w=O.useActions().storages.setNeedTurnBackSelectTokensStorage,P=O.useActions().ctrl.handleGoToTTD;return(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(J,{last:t==o.length-1,children:[(0,Y.jsx)(G.View,{className:"ModuleBoxContent",children:null===p||void 0===p?void 0:p.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(mt,{resource:e,index:n,type:i,categorySeqId:a,resourceType:c,handleRecordSelectedToken:S},n),n!=p.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))}),v&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u66f4\u591a".concat(r,"(").concat(h,")"),onPress:function(){-1!==[1,2,3,4,5,6].indexOf(a)?I((function(e){w(x);var n=(0,k.Ae)((0,l.Z)((0,l.Z)({},e),d));P(n)})):m(!1)}})})]}),g&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u6536\u8d77",onPress:function(){T(),m(!0)}})})]})]})})},xt=function(e){var n=e.iresource,t=e.index,o=e.groupResource,r=(e.title,e.type),i=e.categorySeqId,c=e.IsMust,u=e.GroupId,d=O.useActions().storages,p=d.setGroupLowerPriceStorage,h=d.getIsGroupLowerPriceStorageHidden,v=O.useActions().handlers.handleJumpPreflight,g=O.useActions().ctrl.handleGoToGroupList,x=Xe(n,c,u,h),m=x.ShowSelectedOthers,S=x.ShowOtherSeatCount,T=x.jumpParams,I=x.tag,w=x.ShoppingId,P=x.setIsLowerPriceHidden,N=O.useActions().storages.setNeedTurnBackSelectTokensStorage;return(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(J,{last:t==o.length-1,children:[(0,Y.jsx)(G.View,{className:"ModuleBoxContent",children:null===m||void 0===m?void 0:m.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(St,{resource:e,index:n,type:r,IsMust:c,GroupId:u,categorySeqId:i},n),n!=m.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))}),S>0&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{tag:I,text:"\u66f4\u591a\u8f66\u578b(".concat(S,")"),onPress:function(){v(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(w,u);case 2:P(!0),N(),t=(0,k.Bh)((0,l.Z)((0,l.Z)({},n),T)),g(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}})})]})]})})},mt=function(e){var n=e.resource,t=e.index,o=e.type,r=e.categorySeqId,i=e.resourceType,a=void 0===i?"":i,s=e.handleRecordSelectedToken,c=$e(n,r),u=c.Token,d=c.ResourceName,p=c.hasDetailInfo,h=c.ResourcePrice,v=c.SelectedCount,g=c.Basic,x=c.SelectedShopping,m=c.SelectedInfo,S=c.isMatchShowOrderExtendInfos,T=c.OrderExtendInfosTemplate,I=c.errorTip,w=c.jumpParams,P=c.isShowInputError,N=O.useActions().handlers,D=N.handleUpdateResource,y=N.handleShowResourceDescriptionMask,R=N.handleJumpPreflight,j=O.useActions().ctrl.handleGoToResourceDetail;return(0,Y.jsxs)(G.View,{className:"Padding32",id:(0,k.Jb)(u),children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.View,{className:"Flex1 MarginRight32",onClick:function(){p&&(-1!==[1,2,3,4,5,6].indexOf(r)?R((function(e){var n=(0,k.N7)((0,l.Z)((0,l.Z)({},e),w));j(n)})):y(n))},children:(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:d}),p&&(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]})}),(0,Y.jsxs)(G.View,{className:"FlexColumn FlexEnd",children:["\u53ef\u9009"==o&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"FlexAlignBaseline",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextOrange",children:h>=0?"\uffe5".concat(h):"-\uffe5".concat(-h)}),0==v&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["/",g.Unit||"\u4efd"]}),v>0&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["x ",v,g.Unit||"\u4efd"]})]}),(0,Y.jsx)(G.View,{className:"FlexRow MarginTop32",children:(0,Y.jsx)(Jn,{required:"room"==a&&2==x.StepCount,cur:v,min:x.MinCount,max:x.MaxCount,step:x.StepCount,onChange:function(e,n){var t={Token:u,Basic:g,SelectedShopping:x,SelectedCount:e,SelectedInfo:m,resourceType:a||"optional",updateType:"count",categorySeqId:r};s(u),D(t)}})})]}),"\u5fc5\u9009"==o&&(0,Y.jsx)(G.View,{className:"FlexRow",children:(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray",children:[v,g.Unit||"\u4efd"]})})]})]}),(0,k.e3)(n)&&v>0&&(0,Y.jsx)(it,{resource:n,resourceType:a||("\u5fc5\u9009"==o?"required":"optional"),categorySeqId:r}),!!S&&(0,Y.jsx)(st,{resource:n,resourceType:"\u5fc5\u9009"==o?"required":"optional",OrderExtendInfosTemplate:T,isShowInputError:P,categorySeqId:r}),!!I&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:I})})]},t)},St=function(e){var n=e.resource,t=e.index,o=e.type,r=e.categorySeqId,i=e.IsMust,a=e.GroupId,s=Qe(n,i,a),l=s.Token,c=s.Basic,u=s.ResourceName,d=s.SelectedCount,p=s.AppPicUrl,h=s.errorTip,v=s.PassengerSeat,g=s.SmallBaggageSizeCount,f=s.RecommendDesc,x=O.useActions().handlers,m=x.handleShowGroupDescriptionMask,S=x.handleJumpPreflight;return(0,Y.jsxs)(G.View,{className:"Padding32",id:(0,k.Jb)(l),children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[!!p&&(0,Y.jsx)(G.View,{className:"FlexAlignCenter MarginRight16",children:(0,Y.jsx)(G.Image,{style:{height:43,width:90},mode:"scaleToFill",src:p})}),(0,Y.jsxs)(G.View,{className:"Flex1 MarginRight16",children:[(0,Y.jsx)(G.View,{className:"Flex1 MarginRight32",onClick:function(){S((function(){m(l)}))},children:(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:u}),(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]})}),(0,Y.jsx)(G.Text,{className:"Text26 TextDark",children:(0,Y.jsx)(G.Text,{children:"".concat(v,"\u4e58\u5ba2\xb7").concat(g,"\u884c\u674e")})}),!!f&&(0,Y.jsxs)(G.View,{className:"FlexRow Flex1",children:[(0,Y.jsx)(G.Text,{className:"IconRecommend",children:"\uf409"}),(0,Y.jsx)(G.Text,{className:"IconRecommendText",children:"".concat(f)})]})]}),(0,Y.jsx)(G.View,{className:"FlexColumn FlexEnd",children:(0,Y.jsx)(G.View,{className:"FlexRow MaxWidth",children:(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray",children:[d,c.Unit||"\u4efd"]})})})]}),(0,k.e3)(n)&&d>0&&(0,Y.jsx)(it,{resource:n,resourceType:"\u5fc5\u9009"==o?"required":"optional",categorySeqId:r}),!!h&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:h})})]},t)},Tt=f.memo(kt),It=Tt;function kt(e){var n=e.resource,t=n,o=t[0].resourceType;if("room"==o)return(0,Y.jsx)(vt,{type:"\u53ef\u9009",resource:n,resourceType:o});var r=t[0].title,i=t[0].groups[0].virtualRooms,a=Ze(i),s=a.SelectedRoomCount,c=a.VirtualRoomShoppings,u=a.singleRoomTotalPrice,d=a.childBedTotalPrice,p=a.roomCountRange,h=a.minCount,v=a.maxCount,g=a.needPinfang,x=a.roomCountNotMatch,m=a.hotelStayDay,S=O.useActions().handlers.handleChangeRoomCount,T=[],I=[];return g?I.push((0,Y.jsx)(G.Text,{className:"TextDark BaseText",children:g},"onePerson")):((u||d)&&(T.push("\u9700\u652f\u4ed8"),d&&(T.push("\u513f\u7ae5\u5360\u5e8a\u8d39"),T.push((0,Y.jsx)(G.Text,{className:"TextJuice Text24",children:"\uffe5".concat(d)},"hasChildPriceInfo")),u&&T.push("\uff0c")),u&&(T.push("\u623f\u5dee\u8d39"),T.push((0,Y.jsx)(G.Text,{className:"TextJuice Text24",children:"\uffe5".concat(u)},"hasSingleRoomPriceInfo")))),T.length>0&&I.push((0,Y.jsx)(G.Text,{className:"TextDark BaseText",children:T},"onePerson"))),(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(W,{children:[(0,Y.jsx)(K,{icon:q("VIRTUAL_ROOM_LIST"),title:r}),(0,Y.jsx)(J,{last:!0,children:(0,Y.jsxs)(G.View,{className:"ModuleBoxContent Padding32",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsx)(G.View,{className:"Flex1 Text30 TextDark",children:r}),(0,Y.jsx)(Jn,{required:!0,cur:s,min:h,max:v,step:.5,onChange:function(e,n){var t={VirtualRoomShoppings:c,RoomCountRange:p,curCount:s};S(n?(0,l.Z)((0,l.Z)({},t),{},{changeCount:"add"}):(0,l.Z)((0,l.Z)({},t),{},{changeCount:"subtract"}))}})]}),I.length>0&&(0,Y.jsx)(G.View,{className:"FlexRow MarginTop16",children:I}),!!x&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(Sn,{type:"warning",text:x})}),!!m&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(Sn,{type:"info",text:m})})]})})]})})}var wt=f.memo(Nt),Pt=wt;function Nt(e){var n=e.type,t=e.resource,o=Ue(t),r=o.requiredVisa,i=o.optionVisa;o.selfVisa,o.freeOrArrivalVisa,o.VisaPolicyInfoData;return"\u5fc5\u9009"==n?(0,Y.jsx)(Dt,{requiredVisa:r,optionVisa:i,type:"\u5fc5\u9009"}):"\u53ef\u9009"==n&&i.length?(0,Y.jsx)(Dt,{requiredVisa:r,optionVisa:i,type:"\u53ef\u9009"}):null}var Dt=function(e){var n=e.requiredVisa,t=e.optionVisa,o=e.type,r=Ge({requiredVisa:n,optionVisa:t,type:o}),i=r.VisaTitle,a=r.shouldShowVisaTip,s=r.ShowSelectedVisas,l=r.ShowMoreVisaUI,c=r.ShowVisaSeatCount,u=r.IsShowPackup,d=r.setShowMoreVisa,p=r.clearRecordSelectedToken,h=r.handleRecordSelectedToken;return(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(W,{children:[(0,Y.jsx)(K,{icon:q("15"),title:i}),(0,Y.jsx)(G.View,{className:"MarginBottom32",children:"\u5fc5\u9009"==o&&!!a&&(0,Y.jsx)(Sn,{type:"info",text:"\u5982\u5df2\u81ea\u5907".concat(i,"\uff0c\u53ef\u81f3\u201c\u53ef\u9009 \xb7 \u52a0\u8d2d\u201d\u6a21\u5757\u9009\u62e9\u81ea\u7406\u7b7e\u8bc1\u6263\u9664\u4ea7\u54c1\u5305\u542b\u7684").concat(i,"\u8d39\u7528\u3002")})}),(0,Y.jsxs)(J,{last:!0,children:[(0,Y.jsx)(G.View,{className:"ModuleBoxContent",children:null===s||void 0===s?void 0:s.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(yt,{resource:e,index:n,type:o,handleRecordSelectedToken:h},n),n!=s.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))}),l&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u66f4\u591a".concat(i,"(").concat(c,")"),onPress:function(){d(!1)}})})]}),u&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u6536\u8d77",onPress:function(){p(),d(!0)}})})]})]})]})})},yt=function(e){var n=e.resource,t=e.index,o=e.type,r=e.handleRecordSelectedToken,i=Ye(n),a=i.Token,s=i.ResourceName,c=i.UnitPrice,u=i.SelectedCount,d=i.Basic,p=i.SelectedShopping,h=i.SelectedInfo,v=i.isShowVisaTip,g=i.errorTip,x=i.jumpParams,m=O.useActions().handlers,S=m.handleUpdateResource,T=m.handleJumpPreflight,I=O.useActions().ctrl.handleGoVisaDetail;return(0,Y.jsxs)(G.View,{className:"Padding32",id:(0,k.Jb)(a),children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.View,{className:"Flex1 MarginRight32",onClick:function(){T((function(e){var n=(0,k.qE)((0,l.Z)((0,l.Z)({},e),x));I(n)}))},children:(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:s}),(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]})}),(0,Y.jsxs)(G.View,{className:"FlexColumn FlexEnd",children:["\u53ef\u9009"==o&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"FlexAlignBaseline",children:[(0,Y.jsx)(G.Text,{className:"Text32 TextOrange",children:c.Price>=0?"\uffe5".concat(c.Price):"-\uffe5".concat(-c.Price)}),0==u&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["/",d.Unit||"\u4efd"]}),u>0&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["x ",u,d.Unit||"\u4efd"]})]}),(0,Y.jsx)(G.View,{className:"FlexRow MarginTop32",children:(0,Y.jsx)(Jn,{required:!1,cur:u,min:p.MinCount,max:p.MaxCount,step:p.StepCount,onChange:function(e,n){var t={Token:a,Basic:d,SelectedShopping:p,SelectedCount:e,SelectedInfo:h,resourceType:"visa",updateType:"count"};r(a),S(t)}})})]}),"\u5fc5\u9009"==o&&(0,Y.jsx)(G.View,{className:"FlexRow",children:(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray",children:[u,d.Unit||"\u4efd"]})})]})]}),(0,k.e3)(n)&&u>0&&(0,Y.jsx)(it,{resource:n,resourceType:"visa"}),"\u53ef\u9009"==o&&v&&!!(16&(null===d||void 0===d?void 0:d.BMStatus))&&0==u&&(0,Y.jsx)(G.View,{className:"MarginTop16",children:(0,Y.jsx)(Sn,{type:"warning",text:"\u6240\u9009\u7b7e\u8bc1\u4efd\u6570\u4e0d\u8db3\uff0c\u60a8\u9700\u786e\u4fdd\u5df2\u81ea\u5907\u7b7e\u8bc1\uff0c\u4ee5\u514d\u5f71\u54cd\u51fa\u884c\u3002"})}),!!g&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:g})})]},t)},Rt=f.memo(Ct),jt=Rt;function Ct(e){var n=e.resource,t=e.resourceType,o=Be(n),r=o.title,i=o.promotionResource,a=o.ShowSelectedResource,s=o.ShowMoreResourceUI,l=o.ShowResourceSeatCount,c=o.IsShowPackup,u=o.setShowMoreResource,d=o.handleRecordSelectedToken,p=o.clearRecordSelectedToken;return(0,k.xb)(i)?null:(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(W,{children:[(0,Y.jsx)(K,{icon:q("discount"==t?"DISCOUNTS":"PROMOTION"),title:r}),(0,Y.jsxs)(J,{last:!0,children:[(0,Y.jsx)(G.View,{className:"ModuleBoxContent",children:null===a||void 0===a?void 0:a.map((function(e,n){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(Et,{resource:e,index:n,resourceType:t,ShowSelectedResource:a,handleRecordSelectedToken:d},n),n!=a.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))}),s&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u66f4\u591a".concat(r,"(").concat(l,")"),onPress:function(){u(!1)}})})]}),c&&(0,Y.jsxs)(G.View,{className:"ModuleBoxBottomContainer",children:[(0,Y.jsx)(G.View,{className:"ModuleBoxDivider"}),(0,Y.jsx)(G.View,{className:"ModuleBoxBottom",children:(0,Y.jsx)(X,{text:"\u6536\u8d77",onPress:function(){p(),u(!0)}})})]})]})]})})}function Et(e){var n=e.resource,t=e.index,o=e.resourceType,r=e.handleRecordSelectedToken,i=Fe(n),a=i.Token,s=i.hasDetailInfo,l=i.ResourceName,c=i.Price,u=i.SelectedCount,d=i.Basic,p=i.SelectedShopping,h=i.errorTip,v=i.SelectedInfo,g=O.useActions().handlers,f=g.handleShowResourceDescriptionMask,x=g.handleUpdateResource,m=g.handleJumpPreflight;return(0,Y.jsxs)(G.View,{className:"Padding32",id:(0,k.Jb)(a),children:[(0,Y.jsxs)(G.View,{className:"FlexAlignStart",children:[(0,Y.jsx)(G.View,{className:"Flex1 MarginRight32",onClick:function(){s&&m((function(){f(n)}))},children:(0,Y.jsxs)(G.Text,{className:"Text30 TextDark",children:[(0,Y.jsx)(G.Text,{children:l}),s&&(0,Y.jsx)(G.Text,{className:"ModuleArrowIcon",children:"\ue944"})]})}),(0,Y.jsxs)(G.View,{className:"FlexColumn FlexEnd",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignBaseline",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextOrange",children:"free"==o?"\u514d\u8d39":c>=0?"\uffe5".concat(c):"-\uffe5".concat(-c)}),0==u&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["/",d.Unit||"\u4efd"]}),u>0&&(0,Y.jsxs)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:["x",u,d.Unit||"\u4efd"]})]}),!(1&(null===d||void 0===d?void 0:d.BMStatus))&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Jn,{required:!1,cur:u,min:p.MinCount,max:p.MaxCount,step:p.StepCount,onChange:function(e,n){var t={Token:a,SelectedCount:e,Basic:d,SelectedShopping:p,SelectedInfo:v,resourceType:o,updateType:"count"};r(a),x(t)}})})]})]}),(0,k.e3)(n)&&u>0&&(0,Y.jsx)(it,{resource:n,resourceType:o}),!!h&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:h})})]},t)}function Mt(e){var n=e.checked,t=e.onClick;return(0,Y.jsxs)(G.View,{className:"CheckContainer",onClick:t,children:[!n&&(0,Y.jsxs)(G.View,{children:[(0,Y.jsx)(G.Text,{className:"CheckCircle",children:"\uee35"}),(0,Y.jsx)(G.View,{className:"CheckCenterWrap",children:(0,Y.jsx)(G.Text,{className:"CheckCenterCheck",children:"\ue93d"})})]}),!!n&&(0,Y.jsx)(G.Text,{className:"CheckIcon",children:"\ued1e"})]})}var _t=f.memo(bt),At=_t;function bt(e){var n=e.resource,t=e.name,o=n,r=Ve(),i=r.FlightHidden,a=O.useActions().handlers,s=a.handlePopAirPort,c=a.handleJumpPreflight,u=O.useActions().ctrl.handleGoToTransfer;if(i)return null;var d=function(e){c((function(n){var t=(0,k.A0)((0,l.Z)((0,l.Z)({},n),{},{AirportInfo:o,airPortTransferIndex:e}));u(t)}))};return(0,Y.jsx)(f.Fragment,{children:(0,Y.jsxs)(G.View,{className:"ModBgWhite",id:"CarTransfer",children:[(0,Y.jsx)(K,{icon:q("AirPortCAR"),title:t}),(0,Y.jsx)(J,{last:!0,children:(0,Y.jsx)(G.View,{className:"ModuleBoxContent",children:o.map((function(e,n){var t=e.typeId,r=e.flightNo,i=e.cityName,a=e.airportName,l=e.originIndex,c=e.minPrice,u=e.serviceType;if(!u)return null;var p="".concat(i).concat(18===t?"\u9001\u673a":"\u63a5\u673a").concat(r),h="".concat(18===t?"\u9001\u6211\u5230":"\u6765").concat(a).concat(18!==t?"\u63a5\u6211":""),v=(null===e||void 0===e?void 0:e.SelectedInfo)||{};return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"Padding32",children:[(0,Y.jsxs)(G.View,{className:"FlexRow FlexBetween",children:[(0,Y.jsxs)(G.View,{className:"Flex1",children:[(0,Y.jsx)(G.View,{className:"Text30 TextDark",children:p}),(0,Y.jsx)(G.View,{className:"BaseText TextGray MarginTop16",children:h})]}),(0,Y.jsxs)(G.View,{className:"FlexColumn FlexEnd",children:[0==Object.keys(v).length&&(0,Y.jsx)(G.View,{className:"FlexRow MarginBottom32",children:(0,Y.jsxs)(G.View,{className:"FlexAlignBaseline",children:[(0,Y.jsxs)(G.Text,{className:"Text30 TextPriceColor",children:["\uffe5",c]}),(0,Y.jsx)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:"\u8d77"})]})}),(0,Y.jsx)(G.View,{children:(0,Y.jsx)(Mt,{checked:0!==Object.keys(v).length,onClick:function(){if(0==Object.keys(v).length)d(l);else{var e,n="\u786e\u8ba4\u5220\u9664\u3010".concat(p,"-").concat(h,"\u3011"),t={content:n,Token:"vacation"==v.type?null===v||void 0===v?void 0:v.Token:null===v||void 0===v||null===(e=v.CarProduct)||void 0===e?void 0:e.Token};s(t)}}})})]})]}),0!==Object.keys(v).length&&(0,Y.jsx)(G.View,{className:"MarginTop24",children:"vacation"==v.type?(0,Y.jsx)(Bt,{selectCar:v,airPortTransferIndex:l,gotoAirportTransferAction:d}):(0,Y.jsx)(Zt,{selectCar:v,airPortTransferIndex:l,gotoAirportTransferAction:d})})]},n),n!==o.length-1&&(0,Y.jsx)(G.View,{className:"ModuleBoxDivider MarginX32"})]})}))})})]})})}function Zt(e){var n=e.selectCar,t=e.airPortTransferIndex,o=e.gotoAirportTransferAction,r=Le(n),i=(r.PriceInfo,r.SelectedCount),a=r.AddService,s=r.IsFirstFree,l=r.AddServicePrice,c=r.AddServiceSelectedCount,u=r.Token,d=r.carType,p=r.carName,h=r.unit,v=r.pattern,g=r.departAddress,f=r.arriveAddress,x=r.errorTip,m=r.showUseTime,S=r.carPrice,T=s?c-1:c;return(0,Y.jsxs)(G.View,{id:(0,k.Jb)(u),children:[(0,Y.jsxs)(G.View,{className:"ModCardExtra",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter Flex1 MarginRight8",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark MarginRight8",children:"\u5f53\u5730\u65f6\u95f4".concat(m," ").concat(v)}),(0,Y.jsx)(mn,{className:"TagBlue",text:d})]}),(0,Y.jsx)(G.View,{className:"BaseText TextBlue",onClick:function(){o(t)},children:"\u4fee\u6539"})]}),(0,Y.jsxs)(G.View,{className:"MarginTop8",style:{position:"relative"},children:[(0,Y.jsxs)(G.View,{className:"AirPortRangeLine",children:[(0,Y.jsx)(G.View,{className:"FlightRangeLineCircle",style:{top:-3}}),(0,Y.jsx)(G.View,{className:"FlightRangeLineCircle",style:{bottom:-3}})]}),(0,Y.jsx)(G.View,{className:"FlexRow MarginBottom24 PaddingLeft28",children:(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:g})}),(0,Y.jsx)(G.View,{className:"FlexRow MarginTop24 PaddingLeft28",children:(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:f})})]}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",style:{marginTop:19},children:[(0,Y.jsx)(G.View,{className:"Flex1 BaseText TextDarkGray",children:"\u8f66\u578b\uff1a".concat(p)}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter MarginLeft40",children:[(0,Y.jsx)(G.Text,{className:"Text32 TextOrange",children:S}),(0,Y.jsx)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:"x".concat(i).concat(h)})]})]}),0!==Object.keys(a).length&&(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",style:{marginTop:19},children:[(0,Y.jsx)(G.View,{className:"Flex1 BaseText TextDarkGray",children:"\u513f\u7ae5\u5ea7\u6905(1\u4e2a\u5ea7\u6905\u53601.5\u4e2a\u5ea7\u4f4d)"}),(0,Y.jsxs)(G.View,{className:"FlexRow MarginLeft40",children:[s&&(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsxs)(G.Text,{className:"Text32 TextOrange",children:[" ","\u514d\u8d39"]}),(0,Y.jsx)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:"x1\u4e2a"})]}),T>0&&(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsx)(G.Text,{className:"Text32 TextOrange",children:0==l?"\u514d\u8d39":"\uffe5".concat(l)}),(0,Y.jsx)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:"x".concat(T,"\u4e2a")})]})]})]})]}),!!x&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:x})})]})}function Bt(e){var n=e.selectCar,t=e.airPortTransferIndex,o=e.gotoAirportTransferAction,r=He(n),i=r.SelectedCount,a=r.Token,s=r.departAddress,l=r.arriveAddress,c=r.pattern,u=r.showUseTime,d=r.carName,p=r.carType,h=r.unit,v=r.errorTip,g=r.carPrice;return(0,Y.jsxs)(G.View,{id:(0,k.Jb)(a),children:[(0,Y.jsxs)(G.View,{className:"ModCardExtra",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",children:[(0,Y.jsxs)(G.View,{className:"FlexAlignCenter Flex1 MarginRight8",children:[(0,Y.jsx)(G.Text,{className:"Text30 TextDark MarginRight8",children:"\u5f53\u5730\u65f6\u95f4".concat(u," ").concat(c)}),(0,Y.jsx)(mn,{className:"TagBlue",text:p})]}),(0,Y.jsx)(G.View,{className:"BaseText TextBlue",onClick:function(){o(t)},children:"\u4fee\u6539"})]}),(0,Y.jsxs)(G.View,{className:"MarginTop8",style:{position:"relative"},children:[(0,Y.jsxs)(G.View,{className:"AirPortRangeLine",children:[(0,Y.jsx)(G.View,{className:"FlightRangeLineCircle",style:{top:-3}}),(0,Y.jsx)(G.View,{className:"FlightRangeLineCircle",style:{bottom:-3}})]}),(0,Y.jsx)(G.View,{className:"FlexRow MarginBottom24 PaddingLeft28",children:(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:s})}),(0,Y.jsx)(G.View,{className:"FlexRow MarginTop24 PaddingLeft28",children:(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:l})})]}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter",style:{marginTop:19},children:[(0,Y.jsx)(G.View,{className:"Flex1 BaseText TextDarkGray",children:"\u8f66\u578b\uff1a".concat(d)}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter MarginLeft40",children:[(0,Y.jsx)(G.Text,{className:"Text32 TextOrange",children:g}),(0,Y.jsx)(G.Text,{className:"Text28 TextDarkGray MarginLeft4",children:"x".concat(i).concat(h)})]})]})]}),!!v&&(0,Y.jsx)(G.View,{className:"MarginTop32",children:(0,Y.jsx)(Sn,{type:"error",text:v})})]})}var Ft=f.memo(Lt),Vt=Ft;function Lt(){var e=me(),n=e.flightSegments,t=e.Hotels,o=e.childCount,r=e.Trains,i=(e.extraReady,e.singleTrain),a=e.singleSegment,s=e.singleBus,l=e.singleBoat,c=e.room,u=e.combinedTrans,d=e.requiredVisa,p=e.visa,h=e.required,v=e.discount,g=e.free,x=e.optionVisa,m=e.freeOrArrivalVisa,S=e.selfVisa,T=e.transportation,I=e.optional,w=e.optionLine;return(0,Y.jsxs)(f.Fragment,{children:[!(0,k.xb)(n)&&(0,Y.jsx)(In,{Segments:n}),!(0,k.xb)(r)&&(0,Y.jsx)(Rn,{Trains:r}),!(0,k.xb)(i)&&(0,Y.jsx)(Yn,{resource:i,id:"Train"}),!(0,k.xb)(t)&&(0,Y.jsx)(Zn,{Hotels:t,childCount:o}),0!==Object.keys(s).length&&(0,Y.jsx)(Yn,{resource:s}),0!==Object.keys(a).length&&(0,Y.jsx)(Yn,{resource:a}),0!==Object.keys(l).length&&(0,Y.jsx)(Yn,{resource:l}),0!==c.length&&(0,Y.jsx)(It,{resource:c}),0!==u.length&&(0,Y.jsx)(vt,{type:"\u5fc5\u9009",resource:u}),0!==d.length&&(0,Y.jsx)(Pt,{type:"\u5fc5\u9009",resource:p}),0!==h.length&&(0,Y.jsx)(vt,{type:"\u5fc5\u9009",resource:h}),0!==v.length&&(0,Y.jsx)(jt,{resource:v,resourceType:"discount"}),0!==g.length&&(0,Y.jsx)(jt,{resource:g,resourceType:"free"}),!!w&&(0,Y.jsxs)(G.View,{className:"CategoryView FlexVerticalCenter",children:[(0,Y.jsx)(G.View,{className:"CategoryLine"}),(0,Y.jsx)(G.View,{className:"CategoryName",children:"\u4ee5\u4e0b\u884c\u7a0b\u53ef\u81ea\u7531\u9009\u62e9\u52a0\u8d2d"}),(0,Y.jsx)(G.View,{className:"CategoryLine"})]}),(0!==x.length||m||S)&&(0,Y.jsx)(Pt,{type:"\u53ef\u9009",resource:p}),0!==T.length&&(0,Y.jsx)(At,{resource:T,name:"\u63a5\u9001\u673a"}),0!==I.length&&(0,Y.jsx)(vt,{type:"\u53ef\u9009",resource:I})]})}var Ht=t(60403),Ut=f.memo(Gt),Ot=Ut;function Gt(){return(0,Y.jsxs)(G.View,{className:"FixedFooter",children:[(0,Y.jsxs)(G.View,{className:"FooterBox",children:[(0,Y.jsx)(Yt,{}),(0,Y.jsx)(qt,{}),(0,Y.jsx)(Wt,{})]}),(0,Y.jsx)(Ht.Z,{})]})}function Yt(){var e=nn(),n=e.priceShowStatus,t=(e.isInBestoneApp,e.isTradeMinPriceMode,e.totalPrice),o=e.save,r=e.offlinePrice,i=e.currencyCode,a=e.vipGrade,s=e.vipLevelName,l=e.isShowPriceListMask,c=O.useActions().handlers.handlePriceListMask,u=Math.round(100*t)/100,d="\u8ba2\u5355\u603b\u989d";return a&&(d=s+"\u4ef7"),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter Flex1",onClick:function(){"number"!==typeof u||Number.isNaN(u)||c(!l)},children:["show"===n&&(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.View,{className:"MarginRight16 Flex1",children:(0,Y.jsxs)(G.View,{className:"Flex1",children:[(0,Y.jsxs)(G.View,{className:"foot_price",style:{fontSize:String(t).replace(".","").length>5?"34rpx":"40rpx"},children:[(0,Y.jsxs)(G.View,{style:{wordBreak:"break-all"},children:[(0,Y.jsx)(G.Text,{className:"foot_price_text1 TextOrange",children:"\xa5"}),(0,Y.jsx)(G.Text,{className:"foot_price_text2 TextOrange",children:t})]}),o>0&&(0,Y.jsxs)(G.Text,{className:"foot_price_label TextOrange",children:["\u5171\u4f18\u60e0\xa5",o]})]}),(0,Y.jsx)(G.View,{className:"foot_price",children:(0,Y.jsx)(G.Text,{className:"foot_price_text3",children:d})}),!!r&&(0,Y.jsxs)(G.View,{className:"MarginTop4 TextDark Text22",children:["\u8239\u4e0a\u53e6\u4ed8",r,i]})]})}),(0,Y.jsxs)(G.View,{className:"FlexAlignCenter FlexShrink0",children:[(0,Y.jsx)(G.Text,{className:"Text24 TextBlue",children:"\u660e\u7ec6"}),l?(0,Y.jsx)(G.Text,{className:"PriceDetailIcon",children:"\ue945"}):(0,Y.jsx)(G.Text,{className:"PriceDetailIcon",children:"\ue946"})]})]}),"loading"===n&&(0,Y.jsx)(G.View,{className:"vcm-foot-circle vcm-animate-circle"}),"hide"===n&&null]})}function qt(){var e=O.useActions().handlers.handleServiceMask;return(0,Y.jsxs)(G.View,{className:"FooterService",onClick:function(){e(!0)},children:[(0,Y.jsx)(G.Text,{className:"FooterServiceIcon",children:"\udb80\udcd6"}),(0,Y.jsx)(G.Text,{className:"FooterServiceText",children:"\u5ba2\u670d"})]})}function Wt(){var e=O.useState((function(e){var n=e.priceShowStatus,t=e.isBookingBtnGrey,o=e.isShowSkeleton;return{priceShowStatus:n,isBookingBtnGrey:t,isShowSkeleton:o}})),n=e.priceShowStatus,t=e.isBookingBtnGrey,o=e.isShowSkeleton,r=O.useActions().handlers,i=r.handleBooking,a=r.handleShowErrorMessage;return(0,Y.jsxs)(G.View,{onClick:function(){o||t||"show"!==n?t&&a():i()},children:[!t&&"hide"!==n&&(0,Y.jsxs)(G.View,{className:"ConfirmBtn FlexVerticalCenter",children:["show"===n&&(0,Y.jsx)(G.Text,{className:"ConfirmBtnText",children:"\u4e0b\u4e00\u6b65"}),"loading"===n&&(0,Y.jsxs)(G.View,{className:"FlexAlignCenter loader_inner",children:[(0,Y.jsx)(G.View,{className:"item"}),(0,Y.jsx)(G.View,{className:"item"}),(0,Y.jsx)(G.View,{className:"item"})]})]}),(t||"hide"===n)&&(0,Y.jsx)(G.View,{className:"ConfirmBtn FlexVerticalCenter CanNotBooking",children:(0,Y.jsx)(G.Text,{className:"ConfirmBtnText",children:"\u4e0b\u4e00\u6b65"})})]})}function Kt(){var e="\u8d44\u6e90\u5df2\u5237\u65b0",n="\u8d44\u6e90\u4fe1\u606f\u53ef\u80fd\u53d1\u751f\u53d8\u5316\uff0c\u8bf7\u518d\u6b21\u786e\u8ba4",t=Math.floor((e+n).length/3),o=Math.max(t,6),r=(0,f.useState)(o),i=(0,se.Z)(r,2),a=i[0],s=i[1],l=(0,f.useState)(""),c=(0,se.Z)(l,2),u=c[0],d=c[1],p=(0,f.useRef)({}),h=O.useActions().handlers.handleHideResourceChangedTipMask,v=function(){p.current=setInterval((function(){s(--a),0===a&&(null===p||void 0===p?void 0:p.current)&&clearInterval(p.current)}),1e3)};(0,f.useEffect)((function(){return setTimeout((function(){d("raise")}),1e3),setTimeout((function(){v()}),1500),function(){(null===p||void 0===p?void 0:p.current)&&clearInterval(p.current)}}),[]),(0,f.useEffect)((function(){0==a&&(d("fallen"),setTimeout((function(){h()}),1500))}),[a]);var g=function(){zn().pageScrollTo({scrollTop:0,duration:300})};return(0,Y.jsxs)(G.View,{className:"ResourceChangeTipContainer ".concat(u),children:[(0,Y.jsxs)(G.View,{className:"ResourceChangeTipLeft",children:[(0,Y.jsx)(G.View,{className:"ResourceChangeTipPicContainer",children:(0,Y.jsx)(G.Image,{className:"ResourceChangeTipPic",mode:"widthFix",src:"https://pic.c-ctrip.com/VacationH5Pic/group_travel/process_v2/hotel_change_new.png"})}),(0,Y.jsx)(G.Text,{className:"Text30 TextSteelBlue FontW500",children:"\u8d44\u6e90\u5df2\u5237\u65b0"}),(0,Y.jsx)(G.View,{className:"MarginTop8",children:(0,Y.jsx)(G.Text,{className:"BaseText TextSteelBlue",children:n})})]}),(0,Y.jsxs)(G.View,{className:"ResourceChangeTipRight",onClick:function(){d("fallen"),setTimeout((function(){h()}),1500),g()},children:[(0,Y.jsx)(G.Text,{className:"BaseText TextPureWhite",children:"\u77e5\u9053\u4e86"}),(0,Y.jsxs)(G.Text,{className:"BaseText TextPureWhite",children:["(",a,"s)"]})]})]})}var Jt=t(94503);function Xt(){var e=Ce(),n=e.roomInfo,t=e.RoomSelectedList,o=O.useActions().handlers.handleHideHotelRoomCountMask;return(0,k.xb)(n)||(0,k.xb)(t)?null:(0,Y.jsx)(Jt.Z,{title:"\u9009\u623f\u95f4",handleClose:function(){o(n)},children:(0,Y.jsx)(G.View,{className:"HotelRoomMaskContainer PopMaskContainer",children:t.map((function(e,t){return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"HotelRoomItem",onClick:function(){e.Current?o(n):o(n,e.Count)},children:[(0,Y.jsxs)(G.Text,{className:"HotelRoomItemText MarginRight32",children:[e.Count,"\u95f4"]}),e.DiffPrice>=0?(0,Y.jsxs)(G.Text,{className:"HotelRoomItemText TextOrange Flex1",children:["+\uffe5",e.DiffPrice]}):(0,Y.jsxs)(G.Text,{className:"HotelRoomItemText TextGreen Flex1",children:["-\uffe5",Math.abs(e.DiffPrice)]}),e.Current&&(0,Y.jsx)(G.Text,{className:"HotelRoomItemIcon TextBlue",children:"\uf1c8"})]},t),(0,Y.jsx)(G.View,{className:"HotelRoomDivider"})]})}))})})}function $t(){var e=Te(),n=e.diffPrice,t=e.flightSegments,o=O.useActions(),r=o.actionTraceLog,i=O.useActions().handlers,a=i.handleFlightPartitionedMask,s=i.handleChangePartitionedFlight;return(0,Y.jsxs)(Jt.Z,{title:"\u673a\u7968\u4fe1\u606f",handleClose:function(){a(!1)},children:[(0,Y.jsx)(G.ScrollView,{scrollY:!0,className:"PopContentScrollBottom",children:(0,Y.jsxs)(G.View,{className:"PopMaskContainer FTCardContainer",children:[(0,Y.jsx)(G.View,{className:"PopMaskTip",children:(0,Y.jsxs)(G.Text,{className:"BaseText TextDarkGray",children:["\u4ee5\u4e0b\u673a\u7968\u6bd4\u539f\u63a8\u8350\u4fbf\u5b9c\xa5",n]})}),(0,Y.jsx)(Nn,{segments:t,showInPartitionMask:!0})]})}),(0,Y.jsx)(G.View,{className:"PopBottomContainer",children:(0,Y.jsxs)(G.View,{className:"PopBottomGroup",children:[(0,Y.jsx)(G.View,{className:"PopBottomButton MarginRight16",onClick:function(){a(!1)},children:(0,Y.jsx)(G.Text,{className:"Text34 TextBlue",children:"\u53d6\u6d88"})}),(0,Y.jsx)(G.View,{className:"PopBottomButton PopBottomButtonPrimary",onClick:function(){r("flight_load_replace"),a(!1),s()},children:(0,Y.jsx)(G.Text,{className:"Text34 TextPureWhite",children:"\u66ff\u6362"})})]})})]})}function zt(){var e=on(),n=e.Notifications,t=O.useActions().handlers.handleAirHornInfoMask;return(0,k.xb)(n)?null:(0,Y.jsx)(g.FlightTravelRemindMask,{flightSearchHornList:n,onHidden:function(){t(!1)}})}function Qt(){var e=tn(),n=e.remarkList,t=O.useActions().handlers.handleAirTicketChangeInfoMask;return(0,k.xb)(n)?null:(0,Y.jsx)(g.FlightFareRemarkMask,{fareMaskInfo:n,handleHiddenMask:function(){t(!1)}})}function eo(){var e=rn(),n=e.TransferInfoViewData,t=O.useActions().handlers.handleHideFlightTransferMask;return(0,k.xb)(n)?null:(0,Y.jsx)(g.FlightTransferMask,{transferMaskInfo:n,handleHiddenMask:function(){t()}})}function no(){var e=an(),n=e.policy,t=O.useActions().handlers.handleHideHotelPolicyMask;return(0,k.xb)(n)?null:(0,Y.jsx)(g.HotelPolicyAndNotice,{policy:n,direction:"row",onHide:function(){t()}})}function to(){var e=sn(),n=e.Room,t=O.useActions().handlers.handleHideRoomInfoMask;return(0,k.xb)(n)?null:(0,Y.jsx)(g.HotelSubRoomMask,{room:n,onHide:function(){t()}})}function oo(){var e=Me(),n=e.ResourceSelectInfo,t=e.isTradeMinPriceMode,o=e.title,r=e.SelectedToken,i=e.SelectedSingle,a=O.useActions().handlers,s=a.handleHideResourceSelectMask,l=a.handleShowResourceDescriptionMask,c=a.handleSwitchSingleResource;return(0,k.xb)(n)?null:(0,Y.jsx)(Jt.Z,{title:o,handleClose:function(){s()},children:(0,Y.jsx)(G.View,{className:"PopMaskContainer ResourceSelectMaskContainer",children:n.map((function(e,o){var a,u=e.Basic,d=e.SelectedInfo,p=(null===d||void 0===d?void 0:d.SelectedCount)||0,h={Token:e.Token,DeletedToken:r,SegmentNo:e.SegmentNo,SelectedSingle:i},v=(0,k.uO)(n,e,t),g=-1!==(null===u||void 0===u||null===(a=u.Flags)||void 0===a?void 0:a.indexOf("HasAddInfo"));return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"ResourceSelectItem",children:[(0,Y.jsxs)(G.View,{className:"Flex1",onClick:function(){g&&l(e)},children:[(0,Y.jsx)(G.View,{children:(0,Y.jsxs)(G.Text,{className:"ResourceSelectItemText MarginRight32",children:[(0,Y.jsx)(G.Text,{children:null===u||void 0===u?void 0:u.ResourceName}),g&&(0,Y.jsx)(G.Text,{className:"ResourceSelectItemIcon",children:"\ue944"})]})}),0==p&&(v>=0?(0,Y.jsxs)(G.Text,{className:"ResourceSelectItemText TextOrange Flex1",children:["+\uffe5",v]}):(0,Y.jsxs)(G.Text,{className:"ResourceSelectItemText TextGreen Flex1",children:["-\uffe5",Math.abs(v)]}))]}),(0,Y.jsx)(Mt,{checked:0!==p,onClick:function(){0==p&&c(h),s()}})]},o),(0,Y.jsx)(G.View,{className:"ResourceSelectDivider"})]})}))})})}function ro(){var e=_e(),n=e.filterOptionDetail,t=e.Desc,o=e.AddInfos,r=O.useActions().handlers.handleHideResourceDescriptionMask;if((0,k.xb)(n))return null;var i=(0,k.lM)(t);return(0,Y.jsx)(Jt.Z,{title:"\u8bf4\u660e",handleClose:function(){r()},children:(0,Y.jsxs)(G.View,{className:"PopMaskContainer ResourceDescriptionMaskContainer",children:[(0,Y.jsx)(G.View,{className:"AddInfoDesc",children:!!t&&(0,Y.jsx)("mp-html",{content:i,copyLink:!1,onLinktap:function(e){}})}),null===o||void 0===o?void 0:o.map((function(e,n){var t;return e.Details&&e.Details.length?(0,Y.jsxs)(G.View,{className:"AddInfo",children:[!!e.SubName&&(0,Y.jsx)(G.Text,{className:"AddInfoSubName",children:e.SubName}),null===e||void 0===e||null===(t=e.Details)||void 0===t?void 0:t.map((function(e,n){var t=(0,k.lM)(e.Desc);return(0,Y.jsxs)(G.View,{className:"AddInfoDetail",children:[(0,Y.jsx)(G.Text,{className:"AddInfoCircle"}),!(null===e||void 0===e||!e.Desc)&&(0,Y.jsx)("mp-html",{content:t,copyLink:!1,onLinktap:function(e){}})]},"addInfoData-".concat(n))}))]},"html-".concat(n)):null}))]})})}function io(){var e=ln(),n=O.useActions().handlers.handleHideGroupDescriptionMask;if(!e)return(0,Y.jsx)(G.View,{});var t=e.XIntroduction;return(0,Y.jsx)(g.XIntroductionMask,{introductionUseCar:t,currentIndex:0,onHide:n})}function ao(){var e=O.useActions().handlers,n=e.handleHideResourceAddInfoMask,t=e.handleOrderExtendInfoResource,o=Ae(),r=o.Token,i=o.SegmentNo,a=o.SelectedInfo,s=o.CategoryId,c=o.OrderExtendInfos;return(0,k.xb)(c)?null:(0,Y.jsx)(Jt.Z,{title:"\u586b\u5199\u63a5\u9001\u5907\u6ce8",handleClose:function(){n()},children:(0,Y.jsxs)(G.Form,{onSubmit:function(e){var n=e.detail.value,o="";console.log(n);var u=c.map((function(e){var t=n[e.Id],r=(0,l.Z)((0,l.Z)({},e),{},{Content:t});return 4546==e.Id&&(o=e.Content||""),r})),d={Token:r,SegmentNo:i,SelectedInfo:a,OrderExtendInfos:u,resourceType:"single",CategoryId:s,SelectedDatePickerValue:o};t(d)},children:[(0,Y.jsx)(G.ScrollView,{scrollY:!0,className:"PopContentScrollBottom",children:(0,Y.jsxs)(G.View,{className:"PopMaskContainer",children:[(0,Y.jsx)(G.View,{className:"PopMaskTip",children:(0,Y.jsx)(G.Text,{className:"BaseText TextDarkGray",children:"\u82e5\u6709\u63a5\u9001\u9700\u6c42\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u586b\u5199\u63a5\u9001\u5907\u6ce8\uff0c\u5177\u4f53\u63a5\u9001\u8303\u56f4\u8bf7\u53c2\u8003\u884c\u7a0b\u4e2d\u76f8\u5173\u63cf\u8ff0\u3002"})}),c.map((function(e,n){return(0,Y.jsx)(so,{item:e,last:n===c.length-1},n)}))]})}),(0,Y.jsx)(G.View,{className:"PopBottomContainer",children:(0,Y.jsx)(G.View,{className:"PopBottomGroup",children:(0,Y.jsx)(G.Button,{className:"PopBottomButton PopBottomButtonPrimary ",formType:"submit",children:(0,Y.jsx)(G.Text,{className:"Text34 TextPureWhite",children:"\u786e\u8ba4"})})})})]})})}function so(e){var n=e.item,t=e.last,o=void 0!==t&&t,r=O.useActions().handlers.handleShowDatePicker,i=n.Name,a=n.Id,s=n.Content,l=be(),c=l.SelectedDatePickerValue,u=c.dateString,d=void 0===u?"":u,p=(0,f.useState)(s),h=(0,se.Z)(p,2),v=h[0],g=h[1],x=4546===a,m=(0,f.useMemo)((function(){return x?d:v}),[v,d]),S="\u8bf7".concat(x?"\u9009\u62e9":"\u586b\u5199").concat(i,"\uff0c\u975e\u5fc5\u586b");return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"FormItem",onClick:function(){x&&r()},children:[(0,Y.jsx)(G.Text,{className:"BaseText MarginRight16 FormLabel",children:i}),(0,Y.jsx)(G.Input,{className:"BaseText FormInput",type:"text",name:a,disabled:x,value:m,placeholder:S,placeholderStyle:"color: #cccccc",onInput:function(e){var n=e.detail.value;n.length>200&&(n=n.slice(0,200)),g(n)}}),x&&(0,Y.jsx)(G.Text,{className:"FontIcon",children:"\ue944"})]}),!o&&(0,Y.jsx)(G.View,{className:"FormItemDivider"})]})}var lo=t(68277),co=["OrderExtendInfos"];function uo(e){var n=e.data,t=e.formatData,o=t;n&&(o=(0,f.useMemo)((function(){var e=n.OrderExtendInfos,t=void 0===e?[]:e,o=(0,lo.Z)(n,co),r=po(t);return(0,l.Z)({type:r.type,extendInfo:r},o)}),[n]));var r=o,i=r.selectExtendItemList,a=void 0===i?[]:i,s=r.type,c=void 0===s?1:s,u=r.token,d=void 0===u?"":u,p=r.extendInfo,h=void 0===p?{}:p,v=(h.name,h.itemList),g=void 0===v?[]:v,x=h.orderExtendToken,m=void 0===x?"":x,S=(r.handleHideTemporaryView,r.changeResourceExtendInfo),T=r.showToastFn,k=r.outerStyle,w=void 0===k?{}:k,P=r.btnStyle,N=void 0===P?{}:P,D=(0,f.useState)(a),y=(0,se.Z)(D,2),R=y[0],j=y[1],C=function(){var e=[];g.forEach((function(n){var t=n.orderExtendItemToken,o=n.content;R.includes(t)&&e.push(o)})),S({token:d,extendToken:m,content:e,type:c,extendItemToken:R})},E=1===c||3===c,M=function(){return E?(0,Y.jsx)(G.View,{}):(0,Y.jsx)(G.View,{className:"bk-aci_bottom",onClick:function(){0!==R.length?C():null===T||void 0===T||T("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879")},style:(0,l.Z)({},N),children:(0,Y.jsx)(G.View,{className:"bk-aci_bottom_text",children:"\u786e\u5b9a"})})};g.length;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(G.View,{id:"temporary_view_container",style:(0,l.Z)({},w),children:g.map((function(e,n){var t=e.orderExtendItemToken,o=e.content,r=R.includes(t);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"bk-aci_item",onClick:function(){if(E)S({token:d,extendToken:m,content:[o],type:c,extendItemToken:[t]});else{var e=r?R.filter((function(e){return e!==t})):[].concat((0,I.Z)(R),[t]);j(e)}},children:[(0,Y.jsx)(G.View,{children:o}),E?null:(0,Y.jsx)(Mt,{checked:r,onClick:function(){var e=r?R.filter((function(e){return e!==t})):[].concat((0,I.Z)(R),[t]);j(e)}})]},t),(0,Y.jsx)(G.View,{className:"bk-aci_li_ss"})]})}))}),M()]})}function po(e){var n=e.Token,t=e.Name,o=e.Type,r=e.Items,i=void 0===r?[]:r,a=e.Content,s=void 0===a?"":a,l=e.OrderExtendIId;return{orderExtendToken:n,orderExtendInfoId:l,name:t,type:o,content:s,itemList:i.map((function(e){var n=e.ItemToken,t=e.Content,o=e.IsDefault;return{orderExtendItemToken:n,content:t,isDefault:o}}))}}function ho(){var e=ze(),n=e.isShowResourceSelectAddInfoMask,t=e.Type,o=e.SelectedAddInfoResource,r=e.extendItemName,i=e.resourceType,a=e.resourceName,s=e.categorySeqId,l=e.OrderExtendToken,c=e.OrderExtendInfo,u=e.resource,d=e.poiId,p=e.selectedItemTokens,h=O.useActions(),v=h.helpers.showToast,g=h.handlers,f=g.handleUpdateResourceInfoExtendInfo,x=g.handleHiddenResourceSelectAddInfoMask;return!n||(0,k.xb)(o)?null:(console.log("\ud83c\udf1f AdditionCheckInfo",uo),[1,2,3].includes(t)?(0,Y.jsx)(Jt.Z,{title:"\u9009\u62e9".concat(r),handleClose:function(){x()},children:(0,Y.jsx)(G.View,{className:"ResourceSelectMaskContainer",children:(0,Y.jsx)(uo,{data:{OrderExtendInfos:c,token:l,selectExtendItemList:p,changeResourceExtendInfo:function(e){var n=e.extendToken,t=e.extendItemToken,o=(0,k.zr)(u,t,n),r={Token:u.Token,SegmentNo:0,SelectedInfo:null===u||void 0===u?void 0:u.SelectedInfo,OrderExtendInfos:o,resourceType:i,categorySeqId:s,resourceName:a,poiId:d};f(r),x()},showToastFn:function(e){v(e)},outerStyle:{minHeight:"32vh"}}})})}):null)}function vo(){var e=xe(),n=e.isShowPriceListMask,t=e.priceDetail,o=e.tagInfo,r=e.productParams,i=O.useActions().handlers.handlePriceListMask;return t?(0,Y.jsx)(g.PriceDetail,{isShow:n,pageName:"resource",onClose:function(){return i(!1)},priceDetail:t,cacheKey:JSON.stringify(r),basePriceProps:o,bottomDistance:120,zIndex:99}):null}var go=vo;function fo(){for(var e=be(),n=e.SelectedDatePickerValue,t=e.Token,o=O.useActions().handlers.handleHideDatePicker,r=[],i=[],a=[],s=n.VDate,l=M.Z.parse(s).addMonth(-6).valueOf(),c=M.Z.parse(s).addMonth(6).valueOf(),u=M.Z.parse(s).valueOf(),d=M.Z.dayDiff(l,c),p=0,h=0;h<d;h++){h>0&&(l=M.Z.parse(l).addDay(1).valueOf());var v=s;v.getTime()===l.getTime()&&(p=h),r.push({time:l.getTime(),label:M.Z.parse(l).format("YYYY\u5e74MM\u6708DD\u65e5 \u5468w")})}for(var g=0;g<=23;g++)i.push("00".concat(g).slice(-2));for(var x=0;x<=59;x++)a.push("00".concat(x).slice(-2));var m=function(e){var n=(0,se.Z)(e,3),t=n[0],o=n[1],i=n[2],a=r[t].time,s=o,l=i,c=new M.Z(a||Date.now()).setHours(s,l,0,0).valueOf();return c},S=(0,f.useState)([p,u.getHours(),u.getMinutes()]),T=(0,se.Z)(S,2),I=T[0],k=T[1],w=(0,f.useState)(p),P=(0,se.Z)(w,2),N=P[0],D=P[1],y=(0,f.useState)(0),R=(0,se.Z)(y,2),j=R[0],C=R[1],E=(0,f.useState)(0),_=(0,se.Z)(E,2),A=_[0],b=_[1],Z=function(e){var n=e.detail.value,t=(0,se.Z)(n,3),o=t[0],r=t[1],i=t[2];return o!==N?(D(o),void k([o,0,0])):r!==j?(C(r),void k([o,r,0])):i!==A?(b(i),void k([o,r,i])):void 0},B=function(){console.log("onConfirm ---- value",I);var e=m(I);console.log("onConfirm ---- selectDate",e),o({VDate:e,dateString:M.Z.parse(e).format("YYYY-MM-DD \u5468w HH:mm"),Token:t},!0)};return(0,Y.jsx)(G.View,{children:(0,Y.jsx)(Jt.Z,{title:"\u9009\u62e9\u7528\u8f66\u65f6\u95f4",confirmText:"\u5b8c\u6210",handleClose:function(){o()},handleConfirm:B,isScrollView:!1,children:(0,Y.jsx)(G.View,{className:"PopMaskContainer ResourceDescriptionMaskContainer",children:(0,Y.jsxs)(G.PickerView,{indicatorClass:"FlexVerticalCenter",indicatorStyle:"height: 50px;",style:"width: 100%; height: 300px;",value:I,onChange:Z,children:[(0,Y.jsx)(G.PickerViewColumn,{style:{flex:2},children:r.map((function(e){return(0,Y.jsx)(G.View,{className:"FlexVerticalCenter",children:e.label})}))}),(0,Y.jsx)(G.PickerViewColumn,{children:i.map((function(e){return(0,Y.jsxs)(G.View,{className:"FlexVerticalCenter",children:[e,"\u65f6"]})}))}),(0,Y.jsx)(G.PickerViewColumn,{children:a.map((function(e){return(0,Y.jsxs)(G.View,{className:"FlexVerticalCenter",children:[e,"\u5206"]})}))})]})})})})}function xo(){var e=O.useState((function(e){var n=e.flags,t=e.pageParams,o=e.imEntryInfo;return{flags:n,pageParams:t,imEntryInfo:o}})),n=e.flags,t=e.pageParams,o=e.imEntryInfo,r=(null===n||void 0===n?void 0:n.isShowServiceMask)||!1,i={productId:t.line,alias:t.alias||"",departCityId:t.departCityId};return{isShowServiceMask:r,productParams:i,imEntryInfo:o}}function mo(){var e=xo(),n=e.imEntryInfo,t=e.isShowServiceMask,o=e.productParams,r=O.useActions().handlers,i=r.handleServiceMask,a=r.handleGoIM;return(0,k.xb)(n)?null:(0,Y.jsx)(g.CustomerService,{isShow:t,onClose:function(){return i(!1)},imEntryInfo:n,onJumpIM:a,cacheKey:JSON.stringify(o)})}function So(){var e=qe(),n=e.VisaDescriptionInfo,t=O.useActions().handlers.handleHideVisaDescriptionMask;if((0,k.xb)(n))return null;var o=n.title,r=n.content;return(0,Y.jsx)(Jt.Z,{title:o,handleClose:function(){t()},children:(0,Y.jsxs)(G.View,{className:"PopMaskContainer",children:[(0,Y.jsx)(G.View,{className:"Margin32",children:(0,Y.jsxs)(G.Text,{className:"BaseText TextDarkGray",children:["\u82e5\u60a8\u65e0",r,"\u6216\u5df2\u8fc7\u671f\uff0c\u5219\u9700\u81ea\u884c\u529e\u7406"]})}),(0,Y.jsx)(G.View,{className:"Margin32",children:(0,Y.jsxs)(G.Text,{className:"BaseText TextDarkGray",children:["\u82e5\u60a8\u5df2\u6709",r,"\u4e14\u5728\u6709\u6548\u671f\u5185\uff0c\u5219\u65e0\u9700\u529e\u7406"]})})]})})}function To(){var e=fe(),n=e.shoppingCartMaskFlags,t=e.resourceMaskFlags;return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"MaskLayout",children:[(0,Y.jsx)(go,{}),t.isShowResourceChangeTipMask&&(0,Y.jsx)(Kt,{}),(0,Y.jsx)(Ot,{})]}),(0,Y.jsxs)(G.View,{className:"MaskLayout",children:[(0,Y.jsx)(G.View,{children:n.isShowAirTicketChangeInfoMask&&(0,Y.jsx)(Qt,{})}),(0,Y.jsx)(G.View,{children:n.isShowAirHornInfoMask&&(0,Y.jsx)(zt,{})}),(0,Y.jsx)(G.View,{children:n.isShowFlightTransferMask&&(0,Y.jsx)(eo,{})}),(0,Y.jsx)(G.View,{children:n.isShowHotelPolicyMask&&(0,Y.jsx)(no,{})}),(0,Y.jsx)(G.View,{children:n.isShowRoomInfoMask&&(0,Y.jsx)(to,{})}),(0,Y.jsx)(G.View,{children:n.isShowGroupDescriptionMask&&(0,Y.jsx)(io,{})}),(0,Y.jsx)(G.View,{children:t.isShowFlightPartitionedMask&&(0,Y.jsx)($t,{})}),(0,Y.jsx)(G.View,{children:t.isShowHotelRoomCountMask&&(0,Y.jsx)(Xt,{})}),(0,Y.jsx)(G.View,{children:t.isShowResourceSelectMask&&(0,Y.jsx)(oo,{})}),(0,Y.jsx)(G.View,{children:t.isShowResourceDescriptionInfoMask&&(0,Y.jsx)(ro,{})}),(0,Y.jsx)(G.View,{children:t.isShowResourceAddInfoMask&&(0,Y.jsx)(ao,{})}),(0,Y.jsx)(G.View,{children:t.isShowResourceSelectAddInfoMask&&(0,Y.jsx)(ho,{})}),(0,Y.jsx)(G.View,{children:t.isShowVisaDescriptionMask&&(0,Y.jsx)(So,{})}),(0,Y.jsx)(G.View,{children:t.isShowDatePicker&&(0,Y.jsx)(fo,{})}),(0,Y.jsx)(mo,{})]})]})}var Io=f.memo(ko);function ko(){var e=ge(),n=e.isShowSelectPassengerMask,t=e.IsContinueBook,o=e.isCruise,r=e.isCanEditPassenger,i=e.productParams,a=e.ShoppingId,s=O.useActions().handlers,l=s.handleSelectPassengerMask,c=s.handlePassengerDateSubmit;return(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsxs)(G.View,{className:"Layout",children:[(0,Y.jsx)(hn,{}),(0,Y.jsx)(G.ScrollView,{className:"LayoutScrollView",scrollY:!0,scrollWithAnimation:!0,children:(0,Y.jsx)(Vt,{})}),(0,Y.jsx)(Ot,{})]}),(0,Y.jsx)(To,{}),!t&&!o&&r&&(0,Y.jsx)(g.SelectPassenger,{pageName:"resource",isShow:n,onClose:function(){return l(!1)},onOpen:function(){return l(!0,!0)},onSubmit:c,cacheKey:JSON.stringify(i),shoppingId:a})]})}var wo=t(33675),Po=t.n(wo);function No(){var e=he(),n=e.isShowInvalidProduct,t=e.isShowErrorPage,o=e.isShowSkeleton,r=(e.backFromOrderPage,e.flags,e.ABTestResult,e.segmentType),i=O.useActions(),l=i.pageDidBack,c=i.eventCenter,u=O.useActions().storages.clearNeedTurnBackSelectTokensStorage,d=O.useActions().ctrl;return(0,f.useEffect)((function(){return u(),c.on("orderPageInfo",(function(e){l({BackPageInfo:e})})),c.on("diyTourResult",(function(e){console.log("\ud83c\udf49diyTourResult",{res:e});var n=(null===e||void 0===e?void 0:e.flightUpdated)||(null===e||void 0===e?void 0:e.hotelUpdated);l({clearTransportation:n,ShoppingCartInfo:e})})),Po().Observer.addObserverForKeyOnly("diyTourH5Result",(function(e){var n=e.type,t=e.options;if("message"===n){var o;console.log("\ud83c\udf49diyTourResult",{options:t});var r=(null===t||void 0===t||null===(o=t.detail)||void 0===o?void 0:o.data.find((function(e){return"diyTourH5Result"===e.type})))||{},i=(null===r||void 0===r?void 0:r.flightUpdated)||(null===r||void 0===r?void 0:r.hotelUpdated);l({clearTransportation:i,ShoppingCartInfo:r})}})),function(){c.off("orderPageInfo"),c.off("diyTourResult"),Po().Observer.removeAllObserversForKey("diyTourH5Result")}}),[]),x((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("======usePageDidAppear"),setTimeout((function(){u()}),200);case 2:case"end":return e.stop()}}),e)}))),[],d),m((function(){console.log("======usePageDidDisappear")}),d),n?(0,Y.jsx)(ae,{}):t?(0,Y.jsx)(dn,{}):o?(0,Y.jsxs)(f.Fragment,{children:[(0,Y.jsx)(G.ScrollView,{className:"LayoutScrollView",scrollY:!0,scrollWithAnimation:!0,children:(0,Y.jsx)(re,{})}),(0,Y.jsx)(Ot,{})]}):(0,Y.jsx)(f.Fragment,{children:"fixSegment"===r&&(0,Y.jsx)(Io,{})})}var Do,yo,Ro=t(85198),jo=(Do=(0,g.PureModel)({Model:O}),Do(yo=function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;(0,c.Z)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=n.call.apply(n,[this].concat(r)),(0,v.Z)((0,d.Z)(e),g.MODEL_CONTEXT,(0,l.Z)((0,l.Z)((0,l.Z)({},E.p.impl((0,l.Z)((0,l.Z)({},e.tourContext),{},{ctrl:(0,d.Z)(e),getInitialData:function(){var n=e.getUrlQuery(),t={};for(var o in n)t[o.toLocaleLowerCase()]=n[o];var r={productId:+t.pdid||0,saleCityId:+t.scid||1,departCityId:+t.dcid||2,startDate:t.startdate,endDate:t.enddate,date:t.date,ouid:t.ouid||"",line:t.line||"",restore:t.restore||"0",orderid:t.orderid||"",temporderid:t.temporderid||"",shoppingid:t.shoppingid||"",sharePrice:t.dsprice,crhdepartname:t.crhdepartname,crhdeparttype:t.crhdeparttype,crhdestname:t.crhdestname,crhdesttype:t.crhdesttype,activitycode:t.activitycode||"",qstagecount:t.qstagecount||"",istour:t.istour,iscruise:t.iscruise||"",fromhhtravel:t.fromhhtravel||"",detailpagename:t.detailpagename||"",isnewshopping:t.isnewshopping||""};t.alias&&(r=(0,l.Z)((0,l.Z)({},r),{},{alias:t.alias})),"1"===t.iscruise||"true"===t.iscruise?(r.prodType="cruise",r.pageId="10650053816"):"1"===t.istour?(r.prodType="sdp",r.pageId="411022"):(r.prodType="grp",r.pageId="401072"),"0"===t.stype?r.segmentType="extendStay":r.segmentType="fixSegment";var i=r.shoppingid,a="1"===r.istour||"true"===r.istour,s="1"===r.iscruise||"true"===r.iscruise,c=!(0,k.xb)(r.istour)||!(0,k.xb)(r.iscruise),u="1"===r.restore||"true"===r.restore||s&&"1"!=t.isnewshopping,d="1"===r.isnewshopping,p=r.detailpagename||"",h=e.getClientInfo(),v=r.orderid,g="1"===t.fromhhtravel?"hhtravel":"";return{params:r,queryorderid:v,ShoppingId:i,isTour:a,isCruise:s,canLogPageIdformUrl:c,IsContinueBook:u,IsNewShopping:d,detailpagename:p,query:t,clientInfo:h,sourceFrom:g}},getHotelAntibotToken:function(n){return e.getHotelAntibotToken(n)},scrollToErrorPosition:function(n){return e.scrollToErrorPosition(n)}}))),E.X2.impl({Platform:_.NN.WEIXIN})),E.fI.impl((0,l.Z)({},e.getUrlQuery())))),(0,v.Z)((0,d.Z)(e),"pageId",void 0),(0,v.Z)((0,d.Z)(e),"pageDidAppearEvents",[]),(0,v.Z)((0,d.Z)(e),"pageDidDisappearEvents",[]),(0,v.Z)((0,d.Z)(e),"logInfo",{}),(0,v.Z)((0,d.Z)(e),"sdpTraceLogInfo",{}),(0,v.Z)((0,d.Z)(e),"prodType",""),(0,v.Z)((0,d.Z)(e),"selectDateFn",{current:null}),(0,v.Z)((0,d.Z)(e),"scrollToErrorPosition",(function(n){try{var t=null===n||void 0===n?void 0:n[0];return e.scrollToElem(t)}catch(e){return console.log(e),!1}})),(0,v.Z)((0,d.Z)(e),"scrollToElem",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!==typeof e||""===e)return!1;var t=zn().createSelectorQuery(),o=t.selectViewport(),r=zn().getSystemInfoSync().windowHeight,i=0;o.scrollOffset((function(e){i=e.scrollTop})).exec(),n&&(e="cardPosition"+e.replace(/[^0-9a-zA-Z]+/gi,"")),t.select("#".concat(e)).boundingClientRect((function(n){if(n){var t=n.top,o=n.bottom;return t<46||o>=r-88?zn().pageScrollTo({scrollTop:i+t-100,duration:300}):console.log("\u76ee\u6807\u5728\u53ef\u89c6\u8303\u56f4\u5185\uff0c\u65e0\u9700\u6eda\u52a8"),!0}return console.log("\u6ca1\u6709\u627e\u5230\u951a\u70b9",n,e),!1})).exec()})),(0,v.Z)((0,d.Z)(e),"HotelAntibotToken",""),(0,v.Z)((0,d.Z)(e),"getHotelAntibotToken",function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){var r="/20168/GetScripting",i=null,a=function(t,o){e.HotelAntibotToken=t,n(t)},s=function(e){return e&&e.data&&e.data.Script};e.createAntiSpiderRequest(r,i,t,a,s)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),(0,v.Z)((0,d.Z)(e),"isPlatformStandalone","taro_vacation"===e.tourContext.miniProgramPlatform),(0,v.Z)((0,d.Z)(e),"handleGoFlightList",(function(n){var t="/pages/shoppingcartflight/flight/flightlist/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)})),(0,v.Z)((0,d.Z)(e),"handleGoFlightDetail",(function(n){var t="/pages/shoppingcartflight/flight/cabinList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)})),(0,v.Z)((0,d.Z)(e),"handleGoHotelDetail",(function(n){var t="/pages/shoppingcarthotel/hotel/hotelDetail/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)})),(0,v.Z)((0,d.Z)(e),"handleGoHotelList",(function(n){var t="/pages/shoppingcarthotel/hotel/hotelList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)})),(0,v.Z)((0,d.Z)(e),"handleEditTicket",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/train/trainList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/trainList",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleEditSnapTicket",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/train/trainSnapList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/trainSnapList",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleChangeSingleTrain",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/train/radioResource/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/radioResource",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleGoToTransfer",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/car/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/carlist",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleGoVisaDetail",(function(n){var t="/webapp/vacations/tour/tourvisa",o={url:t,params:n};e.jumpH5(o)})),(0,v.Z)((0,d.Z)(e),"handleGoToCityVisa",(function(n){var t="/visa/extend/visapolicy",o={url:t,params:n,options:{needHost:!0}};e.jumpH5(o)})),(0,v.Z)((0,d.Z)(e),"handleGoToTTD",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/ttd/ttresourceList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/ttdResourceList",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleGoToTicket",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/ttd/ttdetail/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/ttDetailPage",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleGoToGroupList",(function(n){if(e.isPlatformStandalone){var t="/pages/shoppingcart/singleOptionXList/index",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e._navigateTo(o)}else{var r="/webapp/vacations/idiytour/singleOptionXList",i={url:r,params:(0,l.Z)((0,l.Z)({},n),{},{use_history:1,observerKey:"diyTourH5Result"}),options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(i)}})),(0,v.Z)((0,d.Z)(e),"handleGoToResourceDetail",(function(n){var t="/webapp/vacations/idiytour/xIntroduce",o={url:t,params:n,options:{observerKey:"diyTourH5Result",needLogin:!0}};e.jumpH5(o)})),e}return(0,u.Z)(t,[{key:"componentWillMount",value:function(){zn().loadFontFace({family:"crn_font_Ctrip_GroupTour",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/crn_font_Ctrip_GroupTour.ttf?v=3")'}),zn().loadFontFace({family:"20TH_bold",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/20TH_bold.ttf")'}),zn().loadFontFace({family:"20TH_regular",source:'url("https://pic.c-ctrip.com/VacationH5Pic/tourpic/group_travel/iconfont/20TH_regular.ttf")'}),console.log("======","componentWillMount")}},{key:"componentDidMount",value:function(){console.log("======","componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("======","componentWillUnmount")}},{key:"componentDidShow",value:function(){console.log("======","componentDidShow",this.pageDidAppearEvents),this.pageDidAppearEvents.forEach((function(e){return e()}))}},{key:"componentDidHide",value:function(){console.log("======","componentDidHide",this.pageDidDisappearEvents),this.pageDidDisappearEvents.forEach((function(e){return e()}))}},{key:"render",value:function(){return(0,Y.jsx)(No,{})}}]),t}(Ro.Z))||yo),Co={navigationBarTitleText:"\u8d44\u6e90\u9875",navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black",usingComponents:{"mp-html":"../common/mp-html/index"}};Page((0,i.createPageConfig)(jo,"pages/vacations/resource/index",{root:{cn:[]}},Co||{}))},79181:function(e){e.exports=require("../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../cwx/cwx")},65238:function(e){e.exports=require("../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../cwx/cwx")},46346:function(e){e.exports=require("../../../cwx/ext/global")}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[4666,2107,1216,8592],(function(){return n(42703)}));e.O()}]);
//# sourceMappingURL=index.js.map