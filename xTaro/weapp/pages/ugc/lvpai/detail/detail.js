"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[9943],{16583:function(e,t,i){var o=i(32180),s=i(79301),a=i(95308),n=i(298),r=i(57042),c=i(24460),l=i(81876),d=i(21867),p=i(86066),u=i(45023),m=i(90201),h=i(56884),g=i.n(h),f=i(27709),v=i.n(f),w=i(92954),_=i.n(w),x=i(65238),I=i.n(x),T=i(65542),y=new f.Events,b=y,k=i(62245),C=function(){function e(){(0,r.Z)(this,e)}return(0,c.Z)(e,[{key:"contentCollapse",value:function(e,t,i,o){var s=0,a=0,n=0,r=!1,c=!1;return n=53*i,s=750/t,a=e*s,console.log("=====>collapseConfig:",o),console.log("=====>contentHeight:",a),console.log("=====>rowHeight:",n),console.log("=====>scale:",s),o?(c=!0,r=a>n):(c=!1,r=a>n),console.log("=====>needFold:",r),console.log("=====>isFold:",c),{needFold:r,isFold:c}}},{key:"personalizedLabel",value:function(e){var t=e.author,i=e.isHost,o="";if(t&&t.userTags&&t.userTags.length<2&&(o=t.individualTag),!o&&t.followCount>100){var s=k.Z.formateNum(t.followCount),a=i?"\u4eba\u5173\u6ce8\u4e86\u6211":"\u4eba\u5173\u6ce8\u4e86TA";o=s+a}return o}},{key:"sortAuthorTags",value:function(e,t){var i=this,o=[];if(void 0==e)return[];var s=e.userTags,a=e.individualTag,n=(e.likeCount,e.followCount||0),r=(e.likeCountThreshold,e.followCountThreshold||0);if(s.forEach((function(e,t){e.tagName&&(1==e.tagType?o.unshift({tagName:e.tagName,tagType:e.tagType,tagWidth:i._calcTagWidth(e.tagName)}):o.push({tagName:e.tagName,tagType:e.tagType,tagWidth:i._calcTagWidth(e.tagName)}))})),s.length<2&&!a&&n>r){var c=k.Z.formateNum(n),l=t?"\u4eba\u5173\u6ce8\u4e86\u6211":"\u4eba\u5173\u6ce8\u4e86TA";o.push({tagName:"".concat(c+l),tagType:3})}return s.length,o}},{key:"rpxToPx",value:function(e){var t=.5*e;return t!==t&&(t=e/2),t+"px"}},{key:"sortArticleContent",value:function(e,t,i){var o=e,s=[],a=0,n=new RegExp("(<poi.*?</poi>|<ctag.*?</ctag>)","g"),r=!0;while(o)if(o.match(n)){var c=n.exec(o);if((o.startsWith("<poi")||o.startsWith("<ctag"))&&0==c.index){a++;var l=c[0],d=-1;d=o.startsWith("<poi")?2:1;var p=this._sortPoiTag(l,d,t,i);s.push(p),o=o.substring(l.length,o.length)}else{var u=o.split(n),m=u[0];(m.indexOf("ctag")>=0||m.indexOf("poi")>=0)&&(console.log("converttagfalse"+m),r=!1);var h={type:-1,name:m,acticleEmojiContent:{text:m.replace(/\n/g,"<br>"),wrapperStyle:"\n                font-size: ".concat(this.rpxToPx(34),";\n                color: #222;\n                display:inline;\n                line-height: ").concat(this.rpxToPx(52),";\n                font-family: PingFangSC-Regular;\n                text-align: justify;\n              "),cemojiStyle:"\n                height: ".concat(this.rpxToPx(38),";\n                vertical-align: text-bottom;\n              ")}};s.push(h),o=o.substring(m.length,o.length)}}else{var f={type:-1,name:o,acticleEmojiContent:{text:o,wrapperStyle:"\n              font-size: ".concat(this.rpxToPx(34),";\n              color: #222;\n              display:inline;\n              line-height: ").concat(this.rpxToPx(52),";\n              font-family: PingFangSC-Regular;\n              text-align: justify;\n            "),cemojiStyle:"\n              height: ".concat(this.rpxToPx(38),";\n              vertical-align: text-bottom;\n            ")}};o="",s.push(f)}0==r&&(console.log("converttagfalse"),g().getCurrentPage());var v={poiTagNumber:a,sortedContentList:s};return v}},{key:"replaceFlatTag",value:function(e,t,i){if(!e)return e;var o=e;try{var s=/(<|&lt;)\/?(ctag|poi).*?(>|&gt;)/g,a=e.match(s);a&&a.length>0&&(o=e.replace(s,""),i.ubtTrace("o_gs_tripshoot_detail_converttagfail",{articleId:t,replaceText:e,replaceType:"success"}))}catch(o){i.ubtTrace("o_gs_tripshoot_detail_converttagfail",{articleId:t,replaceText:e,replaceType:"fail"})}return o}},{key:"_sortPoiTag",value:function(e,t,i,o){if(e){var s=new RegExp(">.*<","g"),a="",n=e.match(s);if(n&&n.length>0){var r=n[0];if(r.length<=2)return;a=r.substring(1,r.length-1)}var c=this._sortPoiElement(e,t),l={poiType:c.poiType,isPoi:2==t,type:c.poiType,name:this.replaceFlatTag(a,i,o),poiId:c.poiId,wxUrl:c.wxUrl,h5Url:c.h5Url,icon:c.icon,id:c.poiId};return l}}},{key:"_sortPoiElement",value:function(e,t){var i=-1,o=0,s="",a="",n="",r=new RegExp(2==t?'poiid="\\d+?"':'id=".+?"',"g"),c=new RegExp(2==t?'poitype="\\d+?"':'type="\\d+?"',"g"),l=new RegExp('wxurl=".+?"',"g"),d=new RegExp('h5url=".+?"',"g"),p=new RegExp('icon=".+?"',"g"),u=e.replace(">"," "),m=u.match(r);if(m&&m.length>0){var h=m[0];if(h.length<=(2==t?7:4))return;i=h.substring(2==t?7:4,h.length-1)}var g=u.match(c);if(g&&g.length>0){var f=g[0];if(f.length<=(2==t?9:6))return;o=f.substring(2==t?9:6,f.length-1)}var v=u.match(l);if(v&&v.length>0){var w=v[0];s=w.substring(7,w.length-1)}var _=u.match(d);if(_&&_.length>0){var x=_[0];a=x.substring(7,x.length-1)}var I=u.match(p);if(I&&I.length>0){var T=I[0];n=T.substring(6,T.length-1)}var y={poiId:i,poiType:o,wxUrl:s,h5Url:a,type:o,icon:n,id:i};return y}},{key:"_calcTagWidth",value:function(e){for(var t=new RegExp("[a-z]","g"),i=new RegExp("[A-Z]","g"),o=2,s=0;s<e.length;s++){var a=e.charAt(s);a.match(t)?o+=12:a.match(i)?o+=16:o+=24}return o}}]),e}(),S="https://m.ctrip.com/restapi/soa2/19530/getEmojiImageMap",j=!1,Z=[],N={},L="cemojiMappingDetail",V=function(){if(!N||"{}"===JSON.stringify(N)){var e=v().getStorageSync(L);e&&"{}"!==JSON.stringify(e)||P((function(e){"{}"!==JSON.stringify(e)&&(N=e,v().setStorageSync(L,e))}))}},P=function(e){Z.push(e),j||(j=!0,console.log("request: ",Z),g().request({url:S,data:{},method:"GET",success:function(e){if(e){console.log("request success: ",e);var t={};if(e.data&&e.data.data&&e.data.data.map&&(t=e.data.data.map),j=!1,Z&&Z.length){var i=null;while(i=Z.shift())if(i&&"function"===typeof i)try{i(t)}catch(e){console.log("fetchCEmojiMap === catch error ===",e)}}}},fail:function(e){console.log("fetchCEmojiMap === fail ===",e)}}))};function A(e,t,i){if(e){var o;if(N&&"{}"!==JSON.stringify(N))o=R(e,t);else{var s=v().getStorageSync(L);s&&"{}"!==JSON.stringify(s)?(N=s,o=R(e,t)):P((function(s){"{}"!==JSON.stringify(s)&&(N=s,o=R(e,t),i&&"function"===typeof i&&i(o),v().setStorageSync(L,s))}))}i&&"function"===typeof i&&i(o)}}function R(e,t){var i=e.match(/\[[^(\[|\])]+\]/g),o="".concat(e);return i&&i.map((function(e){var i=e;if("["===i[0]&&(i=i.substring(1)),"]"===i[i.length-1]&&(i=i.substring(0,i.length-1)),i&&N[i]){var s='<img style="'.concat(t,'" width="19px" src="').concat(N[i],'"></img>');o=o.replace(e,s)}})),o}var H=i(39074);function D(e){var t=e.url,i=e.data,o=e.success,s=e.fail;e.complete;(0,H.Z)(t.replace("/restapi/soa2/",""),i).then((function(e){o({data:e})})).catch((function(e){var t;["MobileRequestFilterException","AccountMobileRequestFilterException"].indexOf(null===e||void 0===e||null===(t=e.ResponseStatus)||void 0===t||null===(t=t.Errors)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.ErrorCode)>-1&&h.cwx.user.login({}),null===s||void 0===s||s(e)}))}function F(e,t){h.__global.mock||D({url:"/restapi/soa2/16189/json/articleDetail",data:e,success:function(e){t(e)},fail:function(e){t(e)}})}function E(e,t){D({url:"/restapi/soa2/16189/json/moduleListSearch",data:e,success:function(e){t(e)},fail:function(e){t(e)}})}function U(e,t){D({url:"/restapi/soa2/20725/json/reportMktProductClick",data:{clientAuth:e.clientAuth,pageid:e.pageid+"",page_type:e.page_type,materialid:e.materialid,product_infos:e.product_infos,click_type:e.click_type,note:e.note},success:function(e){t(e)},fail:function(e){t(e)}})}function M(e,t){h.__global.mock||D({url:"/restapi/soa2/14045/json/relatedRecommend",data:{articleId:e.articleId},success:function(e){t(e)},fail:function(e){t(e)}})}function O(e,t){h.__global.mock||D({url:"/restapi/soa2/14045/json/attention",data:{friendClientAuth:e.friendClientAuth},success:function(e){t(e)},fail:function(e){t(e)}})}function B(e,t){h.__global.mock||D({url:"/restapi/soa2/10356/json/deleteFriendForApp",data:{UserClientAuth:e.userClientAuth},success:function(e){t(e)},fail:function(e){t(e)}})}function W(e,t){h.__global.mock||D({url:"/restapi/soa2/10356/json/CollectionInfoCancel",data:{CollectionInfo:e.CollectionInfo},success:function(e){t(e)},fail:function(e){t(e)}})}function G(e,t){console.log("advertBannerInfoparam",e),h.__global.mock||D({url:"/restapi/soa2/10319/json/advertBannerInfo",data:{Position:e.position},success:function(e){t(e)},fail:function(e){t(e)}})}function J(e,t){h.__global.mock||D({url:"/restapi/soa2/14045/json/getTripShootGoods",data:{articleId:e.articleId,showCustomizedGoods:e.showCustomizedGoods},success:function(e){t(e)},fail:function(e){t(e)}})}function q(e,t){h.__global.mock||D({url:"/restapi/soa2/16189/json/articleGoods",data:{articleId:e.articleId,hotelReqInfo:e.hotelReqInfo},success:function(e){t(e)},fail:function(e){t(e)}})}function z(e,t){h.__global.mock||D({url:"/restapi/soa2/16189/json/articlePoiCollect",data:{articleId:e.articleId,needPoi:e.needPoi,needDistrict:e.needDistrict},success:function(e){t(e)},fail:function(e){t(e)}})}function Q(e,t){h.__global.mock||D({url:"/restapi/soa2/15416/json/getWechatAppOpenID",data:{appId:e.appId,code:e.code},success:function(e){t(e)},fail:function(e){t(e)}})}function X(e,t){h.__global.mock||D({url:"/restapi/soa2/16486/json/submitUserSubscribeTimes",data:{subscribeType:1,businessType:1,businessId:e.clientAuth,otherParameter:e.openID,submitType:1,submitCount:1},success:function(e){t(e)},fail:function(e){t(e)}})}function K(e,t){h.__global.mock||D({url:"/restapi/soa2/20725/json/getRiskInfo",data:{},success:function(e){t(e)},fail:function(e){t(e)}})}function Y(e,t){D({url:"/restapi/soa2/16700/json/drawRewardList",data:{userTaskIdList:e},success:function(e){t(e)},fail:function(e){t(e)}})}function $(e,t){h.__global.mock||D({url:"/restapi/soa2/15416/json/getShareImage",data:e,success:function(e){t(e)},fail:function(e){t(e)}})}function ee(e,t){h.__global.mock||D({url:"/restapi/soa2/22598/json/userTaskList",data:e,success:function(e){t(e)},fail:function(e){t(e)}})}function te(e,t){var i="";i=e.productList?"/restapi/soa2/14045/json/deleteMyFavortiesList":"/restapi/soa2/10108/json/MyFavoritesAdd",h.__global.mock||D({url:i,data:e,success:function(e){t(e)},fail:function(e){t(e)}})}function ie(e,t){var i="/restapi/soa2/14045/json/getRecommendGruppe";h.__global.mock||D({url:i,data:e,success:function(e){t(e)},fail:function(e){t(e)}})}var oe={tripShoot:F,relatedRecommend:M,attention:O,cancelAttention:B,cancelCollection:W,advertBannerInfo:G,getTripShootProducts:J,getTripShootProductsV2:q,getArticlePoiCollect:z,getWechatAppOpenID:Q,submitUserSubscribeTimes:X,getRiskInfo:K,moduleListSearch:E,getreportMktProductClick:U,drawRewardList:Y,requestGetShareImage:$,userTaskList:ee,addMyFavorites:te,getRecommendGruppe:ie},se=i(2269),ae=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"_backlast",(function(){o.props.doTrack("c_gs_tripshoot_detail_back_top"),o.props.cwx._wxGetCurrentPages&&o.props.cwx._wxGetCurrentPages.length>1?o.props.cwx.navigateBack():h.cwx.switchTab({url:"/pages/lvpai/lvpaiHome/lvpaiHome"})})),(0,u.Z)((0,l.Z)(o),"taskJump",(function(){var e=o.state.mainWxUrl;if(o.props.doTrack("c_gs_tripshoot_detail_back_top"),e)if(e.startsWith("https")){var t={url:encodeURIComponent(e),needLogin:!0,isNavigate:!0};k.Z.jumpToWebview(t)}else e.indexOf("pages/")>-1&&h.cwx.navigateTo({url:e})})),(0,u.Z)((0,l.Z)(o),"getmoduleListSearch",(function(){var e=(0,l.Z)(o),t={lat:0,locationDistrictId:0,lon:0,pageCode:"task_wx_article"};oe.moduleListSearch(t,(function(t){if(k.Z.checkResponseAck(t)&&t.data.result.length>0){e.floatCurrent=0;var i="";try{i=t.data.result[0].headResourceItems[0].mainWxUrl}catch(e){console.info(e)}e.setState({moduleList:t.data.result[0].resourceItems.filter((function(e){return e.visible})),mainWxUrl:i},(function(){e.handleFloatStatus()}))}}))})),(0,u.Z)((0,l.Z)(o),"handleFloatStatus",(function(){var e=v().getStorageSync("float_close_time"),t=v().getStorageSync("float_last_show_time"),i=k.Z.formateData(new Date),s=!1;e?new Date(i).getTime()-new Date(e).getTime()>=2592e6?(s=!0,v().removeStorageSync("float_close_time")):s=!1:s=!0;var a=!1;if(t?new Date(i).getTime()-new Date(t).getTime()>=2592e5?(a=!0,v().setStorageSync("float_last_show_time",new Date(i).getTime())):a=!1:(a=!0,v().setStorageSync("float_last_show_time",new Date(i).getTime())),console.log("\u7528\u6237\u5173\u95ed30\u5929\u68c0\u67e5\u662f\u5426\u901a\u8fc7\uff1a".concat(!!s,", 72\u5c0f\u65f6\u68c0\u67e5\u662f\u5426\u901a\u8fc7\uff1a").concat(a)),s=s&&a,s&&o.state.moduleList&&o.state.moduleList.length>0){var n=o.state.moduleList[0];o.props.ubtTrace("o_gs_tripshoot_community_detail_float_expose",{floatId:n.id,floatName:n.title})}o.props.options._mktTaskActivityId&&(s=!1),o.setState({closefloatingwindow:s})})),(0,u.Z)((0,l.Z)(o),"handleFloatChange",(function(e){o.floatCurrent=e.detail.current})),(0,u.Z)((0,l.Z)(o),"floatJump",(function(e,t){o.props.ubtTrace("c_gs_tripshoot_community_detail_float_click",{floatId:t.id,floatName:t.title});var i=t.mainWxUrl;if(i)if(i.indexOf("https")>-1){var s={url:encodeURIComponent(i),needLogin:!0,isNavigate:!0};k.Z.jumpToWebview(s)}else i.indexOf("pages/")>-1&&h.cwx.navigateTo({url:i})})),(0,u.Z)((0,l.Z)(o),"closewindow",(function(){v().setStorageSync("float_close_time",k.Z.formateData(new Date));var e=o.state.moduleList[o.floatCurrent||0];o.props.ubtTrace("c_gs_tripshoot_community_detail_float_close",{floatId:e.id,floatName:e.title}),o.setState({closefloatingwindow:!1})})),(0,u.Z)((0,l.Z)(o),"_renderFloatWindow",(function(){var e=o.state,t=e.closefloatingwindow,i=e.moduleList;return i.length>0&&t?(0,se.jsxs)(f.View,{className:"floating-window",children:[(0,se.jsx)(f.Swiper,{className:"floating-window-swiper",onChange:o.handleFloatChange,autoplay:!0,interval:3e3,circular:!0,children:i.map((function(e,t){return(0,se.jsx)(f.SwiperItem,{children:(0,se.jsx)(f.Image,{className:"img",onClick:function(t){return o.floatJump(t,e)},src:e.coverImageUrl,mode:"aspectFit"})},t)}))}),(0,se.jsx)(f.View,{className:"detail-close",onClick:o.closewindow,bindtap:"closewindow",children:(0,se.jsx)(f.Image,{className:"close-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/detail-close.png"})})]}):null})),o.floatCurrent=0,o.state={mainWxUrl:"",moduleList:"",closefloatingwindow:!1},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){var e;"true"!==(null===(e=this.props.options)||void 0===e?void 0:e.hideFloatWindow)&&this.getmoduleListSearch()}},{key:"render",value:function(){var e=this.props,t=e.statusBarHeight,i=e.titleBarHeight,o=e.navbarData;return(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.View,{className:"headerComp-wrap",style:{paddingTop:"".concat(t+i,"px")},children:(0,se.jsxs)(f.View,{className:"nav-wrap",children:[(0,se.jsx)(f.View,{className:"status-bar",style:{height:"".concat(t,"px")}}),(0,se.jsxs)(f.View,{className:"title-bar",style:{height:"".concat(i,"px")},children:[(0,se.jsx)(f.View,{className:"title-bar-back",onClick:this._backlast,children:(0,se.jsx)(f.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/leftarrow.png",className:"back-home-return"})}),(0,se.jsx)(f.View,{className:"title-bar-text ".concat(""),children:o.title}),(0,se.jsx)(f.View,{className:"right-side",onClick:this.taskJump,children:(0,se.jsx)(f.Image,{className:"side-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/TaskCenter.png"})})]})]})}),this._renderFloatWindow()]})}}]),i}(m.Component),ne=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"jumpToCommentList",(function(e){var t=e.type;o.props.ubtTrace("c_gs_tripshoot_detail_viewallcomments",{articleId:o.props.articleId}),b.trigger("pageState",{commentModalVisible:!0}),"bottomadd"==t&&o.toInputFocus()})),(0,u.Z)((0,l.Z)(o),"toInputFocus",(function(){o.props.toInputFocus&&o.props.toInputFocus()})),(0,u.Z)((0,l.Z)(o),"toPraise",(function(e){var t=e.isLike,i=e.type,s=e.position,a=void 0===s?0:s,n=e.articleId,r=(0,l.Z)(o),c=o.props.cwx.user.isLogin(),d="";"relatedArticle"==i||(n=r.props.articleId),1==t?(d="cancel_like","relatedArticle"==i?r.props.ubtTrace("c_gs_tripshoot_detail_relatedarticle_cancellike",{articleId:r.props.articleId,relatedArticleId:n.toString(),relatedArticlePosition:a.toString()}):"likemodule"==i?r.props.ubtTrace("c_gs_tripshoot_detail_likemodule_cancellike",{articleId:r.props.articleId}):r.props.ubtTrace("c_gs_tripshoot_detail_cancellike",{articleId:r.props.articleId,authorId:r.props.author.clientAuth})):(d="like","relatedArticle"==i?r.props.ubtTrace("c_gs_tripshoot_detail_relatedarticle_like",{articleId:r.props.articleId,relatedArticleId:n.toString(),relatedArticlePosition:a.toString()}):"likemodule"==i?r.props.ubtTrace("c_gs_tripshoot_detail_likemodule_like",{articleId:r.props.articleId}):r.props.ubtTrace("c_gs_tripshoot_detail_like",{articleId:r.props.articleId,authorId:r.props.author.clientAuth})),c?r.props.getActionInfo(d,"article",n,i):r.props.toLogin()})),(0,u.Z)((0,l.Z)(o),"toCancelCollect",(function(){var e=(0,l.Z)(o),t={},i={},s=e.props.articleId,a=e.props.collectCount;e.props.ubtTrace("c_gs_tripshoot_detail_cancelcollect",{articleId:e.props.articleId,authorId:e.props.author.clientAuth,collectType:0}),i={BusinessId:s,CollectionType:29},t={CollectionInfo:i},oe.cancelCollection(t,(function(e){k.Z.checkResponseAck(e)&&e.data.ResultInfo.Result?(a--,b.trigger("pageState",{isCollected:!1,collectCount:a,showCollectCount:k.Z.formateNum(a)}),v().showToast({title:"\u53d6\u6d88\u6536\u85cf\u6210\u529f",icon:"none"})):v().showToast({title:"\u53d6\u6d88\u6536\u85cf\u5931\u8d25",icon:"none"})}))})),(0,u.Z)((0,l.Z)(o),"toCollect",(function(){var e=(0,l.Z)(o),t=o.props.cwx.user.isLogin();t?(e.props.ubtTrace("c_gs_tripshoot_detail_collect",{articleId:e.props.articleId,authorId:e.props.author.clientAuth,collectType:1}),e.props.getActionInfo("collect","article")):e.props.toLogin()})),(0,u.Z)((0,l.Z)(o),"jumpPoster",(function(){var e=(0,l.Z)(o);e.props.doTrack("c_gs_tripshoot_detail_share_poster");var t=e.props.shareInfo,i=e.props.shareimageUrl,s="/pages/ugc/lvpai/shareImage/shareImage?imageType=tripshoot_multi&businessId=".concat(e.props.articleId,"&index=0&sourceType=front&from_native_page=1&title=").concat(encodeURIComponent(t.shareTitle),"&shareImg=").concat(encodeURIComponent(i));h.cwx.navigateTo({url:s})})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this,i=this.props,o=i.isIphoneX,s=i.isLike,a=i.likeCount,n=i.showLikeCount,r=i.showPraiseGuide,c=i.isHost,l=i.author,d=i.commentCount,p=i.isCollected,u=i.enterType,h=i.commentNoticeItemSimple,g=i.collectCount,v=i.showCollectCount,w=i.isLiking,_=i.options;return(0,se.jsx)(m.Fragment,{children:(0,se.jsx)(f.View,{className:"footerComp-wrap",children:(0,se.jsxs)(f.View,{className:"fixedbottom ".concat(o?"iphonex-fixedbottom":""),children:[(0,se.jsxs)(f.View,{className:"r-operation ".concat("true"===(null===_||void 0===_?void 0:_.hideComment)?"noComment":""," ").concat("planB"==u?"has-share":""),children:[s?(0,se.jsxs)(f.View,{className:"opitem op-praise  has-praised",onClick:function(){return t.toPraise({isLike:s})},children:[(0,se.jsx)(f.View,{className:"praise_btn praise_btn_bottom praised_btn ".concat(w?"praising_btn praising_btn_bottom":"")}),(0,se.jsx)(f.View,{className:"t-wapper",children:a&&(0,se.jsx)(f.View,{className:"text",children:n})})]}):(0,se.jsxs)(f.View,{className:"opitem op-praise",onClick:function(){return t.toPraise({isLike:s})},children:[(0,se.jsx)(f.View,{className:"praise_btn praise_btn_bottom"}),(0,se.jsx)(f.View,{className:"t-wapper",children:a&&(0,se.jsx)(f.View,{className:"text",children:n})}),r&&!c&&(0,se.jsxs)(f.View,{className:"fixedPraiseGuide",children:[(0,se.jsxs)(f.View,{className:"".concat(l.isStarAccount?"thumbContentStar":"thumbContent"),children:[(0,se.jsx)(f.Image,{src:null===(e=l.avatar)||void 0===e?void 0:e.url,className:"thumb"}),l.vIcon&&(0,se.jsx)(f.Image,{className:"isVip",src:l.vIcon})]}),(0,se.jsx)(f.View,{className:"guideText",children:"\u770b\u6211\u8fd9\u4e48\u4e45\u4e86\uff0c\u7ed9\u6211\u70b9\u4e2a\u8d5e\u5427\uff1f"})]})]}),"true"!==(null===_||void 0===_?void 0:_.hideComment)&&(0,se.jsxs)(f.View,{className:"opitem op-comment",onClick:function(){return t.jumpToCommentList({type:"bottomadd"})},children:[(0,se.jsx)(f.View,{className:"img"}),(0,se.jsx)(f.View,{className:"t-wapper",children:d&&(0,se.jsx)(f.View,{className:"text",children:this.props.formateNum(d)})})]}),(0,se.jsxs)(f.View,{className:"opitem op-collect ".concat(p?"op-collected":""),onClick:function(){return p?t.toCancelCollect():t.toCollect()},children:[(0,se.jsx)(f.View,{className:"img"}),(0,se.jsx)(f.View,{className:"t-wapper",children:g&&(0,se.jsx)(f.View,{className:"text",children:v})})]})]}),"planB"==u?(0,se.jsxs)(f.View,{className:"share-box",children:[(0,se.jsx)(f.View,{className:"poster-btn",onClick:function(){return t.jumpPoster()},children:(0,se.jsx)(f.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/pictorial.png",className:"img",mode:""})}),(0,se.jsxs)(f.Button,{"open-type":"share",onClick:this.shareClick,className:"share-btn",children:[(0,se.jsx)(f.Image,{className:"wx-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/weixin.png",mode:""}),(0,se.jsx)(f.View,{className:"text",children:"\u5206\u4eab"})]})]}):"true"!==(null===_||void 0===_?void 0:_.hideComment)&&(0,se.jsx)(f.View,{className:"commentbox","data-type":"add",children:(0,se.jsx)(f.View,{className:"commentbox-inp",onClick:this.toInputFocus,children:h})})]})})})}}]),i}(m.Component),re=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"_renderAvat",(function(){var e,t,i=o.props,s=i.author,a=i.individualTag;return(0,se.jsxs)(f.View,{className:"avat",onClick:o.jumpToHome,children:[(0,se.jsxs)(f.View,{className:"img",children:[(0,se.jsx)(f.Image,{className:"image",src:null===(e=s.avatar)||void 0===e?void 0:e.url}),s.vIcon&&(0,se.jsx)(f.Image,{className:"isVip",src:s.vIcon})]}),(0,se.jsxs)(f.View,{className:"text-wapper ".concat(s.identityName||a?"":"around"),children:[(0,se.jsx)(f.View,{className:"text-name",children:(0,se.jsx)(f.View,{className:"text-nickname",children:s.nickName})}),(0,se.jsxs)(f.View,{className:"flex-container",children:[s.tags&&(null===(t=s.tags[0])||void 0===t?void 0:t.name)&&(0,se.jsx)(f.View,{className:"text-tagname ".concat(1==s.tags[0].tagType?"":"text-tagname-common"),children:s.tags[0].name}),s.followCount>100&&(0,se.jsxs)(f.View,{className:"identity-desc",children:[s.followCount,"\u4eba\u5173\u6ce8\u4e86TA"]})]})]})]})})),(0,u.Z)((0,l.Z)(o),"_renderShareHost",(function(){var e=o.props,t=e.isShareHost,i=e.activitySwitch,s=e.shareRewardInfo;return t&&i&&s.score?(0,se.jsxs)(f.View,{className:"share-header",children:[(0,se.jsxs)(f.View,{className:"hint",children:[(0,se.jsx)(f.View,{className:"t1",children:s.readCount}),(0,se.jsx)(f.View,{className:"t2",children:"\u4f4d\u597d\u53cb\u5df2\u9605\uff0c\u5e2e\u4f60\u8d5a\u4e86 "}),(0,se.jsx)(f.View,{className:"t1",children:s.score}),(0,se.jsx)(f.View,{className:"t2",children:" \u79ef\u5206"})]}),(0,se.jsxs)(f.Button,{"open-type":"share",className:"arrow",children:[(0,se.jsx)(f.View,{children:"\u7ee7\u7eed\u5206\u4eab"}),(0,se.jsx)(f.Image,{className:"img",src:"https://pages.c-ctrip.com/you/livestream/lvpai_more.png",children:" "})]})]}):null})),(0,u.Z)((0,l.Z)(o),"jumpToHome",(function(){o.props.jumpToHome({type:"header"})})),(0,u.Z)((0,l.Z)(o),"toCancelAttention",(function(){o.props.toCancelAttention()})),(0,u.Z)((0,l.Z)(o),"toAttention",(function(){o.props.toAttention()})),(0,u.Z)((0,l.Z)(o),"_renderFollow",(function(){var e=o.props,t=e.isHost,i=e.isFollow,s=e.followStatus,a=e.showAttentionGuide;return t?null:i?(0,se.jsx)(f.View,{className:"follow_btn follow_btn_end",onClick:o.toCancelAttention,children:(0,se.jsx)(f.View,{className:"follow_btn_end_text",children:1==s?"\u5df2\u5173\u6ce8":"\u4e92\u76f8\u5173\u6ce8"})}):(0,se.jsxs)(f.View,{className:"follow_btn",onClick:o.toAttention,children:[(0,se.jsx)(f.View,{className:"to_follow_pre"}),(0,se.jsx)(f.View,{className:"to_follow_suf",children:"\u5173\u6ce8"}),a&&(0,se.jsx)(f.View,{className:"fixedAttentionGuide",children:(0,se.jsx)(f.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/follow_tips.png",className:"fixedAttentionGuideImg",mode:"aspectFit"})})]})})),(0,u.Z)((0,l.Z)(o),"jumpToRace",(function(e,t){o.props.jumpToRace(e,t)})),(0,u.Z)((0,l.Z)(o),"_renderHeaderTopic",(function(){var e=o.props,t=e.showHeaderTopic,i=e.raceTopicInfo;return t?(0,se.jsx)(f.View,{className:"header-tag",children:(0,se.jsxs)(f.View,{className:"tag-inner",children:[(0,se.jsxs)(f.View,{className:"text",children:[(0,se.jsx)(f.Image,{className:"icon",src:"https://pages.c-ctrip.com/you/livestream/lvpai_detai_topic_icon1.png"}),(0,se.jsxs)(f.View,{className:"t",children:[(0,se.jsx)(f.View,{className:"tleft",children:"\u6b63\u5728\u53c2\u52a0"}),(0,se.jsxs)(f.View,{className:"tright",children:["#",i.name]})]})]}),(0,se.jsxs)(f.View,{className:"arrow",onClick:function(){return o.jumpToRace(i.topicUrl,"header-race")},children:[(0,se.jsx)(f.View,{className:"t",children:"\u67e5\u770b\u8be6\u60c5"}),(0,se.jsx)(f.Image,{className:"icon",src:"https://pages.c-ctrip.com/you/livestream/lvpai_detai_topic_icon2.png"})]})]})}):null})),(0,u.Z)((0,l.Z)(o),"setAttentionTips",(function(e){o.setState({attentionTips:e})})),(0,u.Z)((0,l.Z)(o),"showAttentionTips",(function(e){o.setState({attentionTips:e,showTips:!0});var t=o.props.author;v().setStorageSync("attention_tips_".concat(t.uid),Date.now()),setTimeout((function(){o.hideAttentionTips()}),5e3)})),(0,u.Z)((0,l.Z)(o),"hideAttentionTips",(function(){o.setState({showTips:!1})})),(0,u.Z)((0,l.Z)(o),"toggleAttentionLink",(function(e){o.setState({showLink:e})})),(0,u.Z)((0,l.Z)(o),"goShop",(function(){var e,t={url:encodeURIComponent(null===(e=o.state.attentionTips.button)||void 0===e?void 0:e.h5Url),needLogin:!1,isNavigate:!0};k.Z.jumpToWebview(t),o.toggleAttentionLink(!1)})),o.floatCurrent=0,o.state={attentionTips:null,showTips:!1,showLink:!1},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.showHeaderTop,i=e.headerClass,o=e.hideFixAuthorHeader,s=this.state,a=s.showTips,n=s.attentionTips,r=s.showLink;return(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"authorHeaderComp-wrap header-wapper ".concat(i),style:o?{position:"relative"}:{top:"".concat(t,"px")},children:[this._renderShareHost(),(0,se.jsxs)(f.View,{className:"header",children:[this._renderAvat(),this._renderFollow(),this._renderHeaderTopic(),a&&(0,se.jsx)(f.View,{className:"fixed_star_attention_wrap",children:(0,se.jsxs)(f.View,{className:"fixed_star_attention_content_wrap",children:[(0,se.jsx)(f.View,{className:"attention_dot"}),(0,se.jsx)(f.View,{className:"attention_text",children:n.tips}),(0,se.jsx)(f.Image,{className:"attention_img",src:"https://pages.c-ctrip.com/livestream/coupon.png"})]})}),r&&(0,se.jsx)(f.View,{className:"fixed_star_attention_wrap go_shop",children:(0,se.jsxs)(f.View,{className:"fixed_star_attention_content_wrap",onClick:this.goShop,children:[(0,se.jsx)(f.View,{className:"attention_dot"}),(0,se.jsx)(f.View,{className:"attention_text",children:"\u5173\u6ce8\u6210\u529f\uff01"}),(0,se.jsxs)(f.View,{className:"attention_text is_link",children:["\u70b9\u51fb\u8fdb\u5e97\u9886\u5238 ",">"]})]})})]})]})})}}]),i}(m.Component),ce=3/4,le={config:[{width:800,height:0,quality:"90",limit:0}]},de=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"swiperBindChange",(function(e){if("touch"==e.detail.source){var t=e.detail.current;o.setState({currentSwiperIndex:t+1})}})),(0,u.Z)((0,l.Z)(o),"changeSwiperHeight",(function(e){var t=(0,l.Z)(o),i=e.detail.current,s=t.state.swiperList,a=0;a=s[i].imageId,t.props.ubtTrace("c_gs_tripshoot_detail_picture_slide",{articleId:t.state.articleId,imageId:a}),t.props.getListOffsetTop()})),(0,u.Z)((0,l.Z)(o),"imageBrowser",(function(e,t){var i=(0,l.Z)(o),s=o.state.swiperList.map((function(e){return e.displayUrl}));i.props.ubtTrace("c_gs_tripshoot_detail_picture_fullscreen",{articleId:i.state.articleId,imageId:t}),v().previewImage({current:e,urls:s})})),(0,u.Z)((0,l.Z)(o),"adjustSwiper",(function(e,t){var i=(0,l.Z)(o),s=i.windowWidth,a=s/2,n=4*s/3,r=0,c=0,d=0,p={};return c=s,d=c*t/e,d>n?(r=n,d=n):d<a?(r=a,d=a):r=d,p={picWidth:c,picHeight:d,swiperHeight:r},p})),(0,u.Z)((0,l.Z)(o),"formatImageSizeByRatio",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},i=t.imageList,o=void 0===i?[]:i,s=t.screenWidth,a=t.articleId,r=t.pageId,c=0,l=null===o||void 0===o?void 0:o.map((function(e,t){var i=Math.ceil(e.width/e.height*100)/100;(0==c||i<c)&&(c=i);var o=(0,n.Z)((0,n.Z)({},e),{},{width:s,height:Math.ceil(s/i)}),l=(0,f.dynamicImageUrl)({imageUrl:o.dynamicUrl,height:100,width:100,ext:{pageId:r,articleId:a,index:t},dynamicImageType:"W",moreParams:"proc=namelogo/d_100"});o.backgroundUrl=l.dynamicUrl;var d=(0,f.dynamicImageUrl)({imageUrl:o.dynamicUrl,height:2*o.height,width:2*s,ext:{pageId:r,articleId:a,index:t},dynamicImageType:"W",config:le});return o.displayUrl=d.dynamicUrl,o}));c<ce&&(c=ce);var d=Math.ceil(s/c);return{imageInfoList:l,height:d}})),(0,u.Z)((0,l.Z)(o),"setSwiperList",(function(e){var t=(0,l.Z)(o),i=0,s=0,a=0,n=0;v().getSystemInfo({success:function(e){t.props.ubtTrace("o_gs_tripshoot_detail_getSystemInfo_success",{articleId:t.props.articleId})},fail:function(e){t.props.ubtTrace("o_gs_tripshoot_detail_getSystemInfo_fail",{articleId:t.props.articleId,errMsg:JSON.stringify(e.errMsg)})},complete:function(o){console.log("mode",o),o&&void 0!=o.model&&void 0!=o.windowWidth||(o.model="iPhone 6",o.windowHeight=667,o.windowWidth=375,o.screenHeight=667),(o.model.indexOf("iPhone X")>-1||o.model.indexOf("iPhone 11")>-1||o.model.indexOf("iPhone 12")>-1||o.model.indexOf("iPhone13")>-1)&&(a=750/o.windowWidth,n=120/a),i=o.windowWidth,s=o.windowHeight,t.windowWidth=i,t.windowHeight=s,t.headerHeight=n,e.forEach((function(e,i){var o=t.adjustSwiper(e.width,e.height);e.picWidth=o.picWidth,e.picHeight=o.picHeight,e.swiperHeight=o.swiperHeight,0==i&&e.swiperHeight}));var r=t.formatImageSizeByRatio({articleId:t.props.articleId,pageId:t.props.pageId,imageList:e,screenWidth:i}),c=r.imageInfoList,l=r.height;t.setState({swiperList:c,swiperHeight:l},(function(){v().hideLoading(),b.trigger("pageState",{showDetail:!0,showHeader:!0,showSbg:t.state.isShowSbg,showUploadBtn:!0}),t.props.getRaceTopics(),t.props.getListOffsetTop()}))}})})),o.state={swiperList:[],swiperHeight:0,currentSwiperIndex:1},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.headerClass,i=this.state,o=i.swiperHeight,s=i.currentSwiperIndex,a=i.swiperList;return a&&a.length?(0,se.jsxs)(f.View,{className:"swiper-wapper ".concat(t),style:{height:"".concat(o,"px")},children:[(0,se.jsx)(f.Swiper,{style:{height:"".concat(o,"px")},onChange:this.swiperBindChange,onAnimationfinish:this.changeSwiperHeight,onAnimationFinish:this.changeSwiperHeight,current:s-1,"adjust-height":"none",duration:300,children:a.map((function(t,i){var s,a=t.needAuth?k.Z.appendVideoAuth(t.displayUrl,"tripshoot",null===(s=e.props.author)||void 0===s?void 0:s.clientAuth):t.displayUrl;return(0,se.jsx)(f.SwiperItem,{className:"swiper-item",style:{height:"".concat(o,"px")},children:(0,se.jsx)(f.Image,{className:"swiper-item-image","lazy-load":!0,src:a,style:{width:"".concat(t.picWidth,"px"),height:"".concat(t.picHeight,"px")},mode:"aspectFill",onClick:function(){return e.imageBrowser(t.displayUrl,t.imageId)}})},i)}))}),(0,se.jsx)(f.View,{className:"swiper-tip-container",children:(0,se.jsxs)(f.Text,{className:"swiper-tip",children:[s,"/",a.length]})})]}):null}}]),i}(m.Component),pe=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"sendVideoTrack",(function(){var e=(0,l.Z)(o),t=e.videoTrackFlag,i=e.videoDuration,s=e.videoCurrentTime,a=e.props.articleId,n=e.state.videoInfo,r=e.videoPlayTimes;!t&&n&&n.videoId&&(r&&(s=r*i+s),e.props.ubtTrace("o_gs_tripshoot_detail_video_playlength",{articleId:a,videoId:n.videoId,videoDuration:i,playSeconds:s}),e.videoTrackFlag=!0)})),(0,u.Z)((0,l.Z)(o),"setVideoInfo",(function(e,t){var i=(0,l.Z)(o),s=0,a=0,n=0,r=0,c=0,d=0,p=0,u=0,m=0;v().getSystemInfo({success:function(e){i.props.ubtTrace("o_gs_tripshoot_detail_getSystemInfo_success",{articleId:i.props.articleId})},fail:function(e){i.props.ubtTrace("o_gs_tripshoot_detail_getSystemInfo_fail",{articleId:i.props.articleId,errMsg:JSON.stringify(e.errMsg)})},complete:function(o){console.log("mode",o),o&&void 0!=o.model&&void 0!=o.windowWidth||(o.model="iPhone 6",o.windowHeight=667,o.windowWidth=375,o.screenHeight=667),p=750/o.windowWidth,u=t?200/p:120/p,o.model.indexOf("iPhone X")>-1||o.model.indexOf("iPhone 11")>-1||o.model.indexOf("iPhone 12")>-1||o.model.indexOf("iPhone13")>-1?(!0,m=186/p):m=118/p,r=o.windowWidth,c=o.windowHeight,i.screenHeight=d,i.windowWidth=r,i.windowHeight=c,i.headerHeight=u,r;var l=2*(c-u-m-25);s=l>875?875:l;var h=e.width,g=e.height;a=2*r,n=a*g/h,n>s&&(n=s,a=h*n/g),e.videoWidth=parseInt(a/2),e.videoHeight=parseInt(n/2),i.judgeEvn(e)}})})),(0,u.Z)((0,l.Z)(o),"judgeEvn",(function(e){var t=(0,l.Z)(o),i="",s=!1,a=o.state.hideVideo,n="flex",r=!1,c=!1;v().getNetworkType({complete:function(o){if(i=o&&o.networkType?o.networkType:"wifi","wifi"==i)r=!0,a?(s=!1,n="flex"):(s=!0,n="none");else{var l=v().getStorageSync("LP_DETAIL_WIFIPLAY"),d=(new Date).getTime();l&&(l=JSON.parse(l),d-l.time<36e5&&(c=!0,"true"==l.play?(s=!0,n="none"):(s=!1,n="flex")))}t.setState({videoAutoplay:s,videoInfo:e,showDetail:!0,showPlayBtn:n,isWifi:r,coverInfo:e,wifiHintFlag:c},(function(){v().hideLoading(),b.trigger("pageState",{showDetail:!0,showHeader:!0,showUploadBtn:!0}),t.props.getRaceTopics(),t.props.getListOffsetTop()}))}})})),(0,u.Z)((0,l.Z)(o),"playVideo",(function(){var e=(0,l.Z)(o);e.setState({hideVideo:!1,showPlayBtn:"none",isPause:!1},(function(){e.toPlay1()}))})),(0,u.Z)((0,l.Z)(o),"toEnd",(function(){var e=(0,l.Z)(o);o.videoPlayTimes+=1,e.setState({hideVideo:!0,showPlayBtn:"none",isPause:!0},(function(){}))})),(0,u.Z)((0,l.Z)(o),"toPlay",(function(){console.log("toplay");var e=(0,l.Z)(o),t=(e.state.videoAutoplay,v().createVideoContext("video")),i=e.state.wifiHintFlag,s=e.state.isWifi;i||s?e.setState({showFollowHint:!1,isPause:!1,showPlayBtn:"none"}):(t.pause(),t.stop(),e.showModal(),e.setState({isPause:!0}))})),(0,u.Z)((0,l.Z)(o),"toPlay1",(function(){console.log("toplay1");var e=(0,l.Z)(o),t=(e.state.videoAutoplay,v().createVideoContext("video")),i=e.state.wifiHintFlag,s=e.state.isWifi;i||s?(e.setState({isPause:!1,showPlayBtn:"none"}),t.play()):(t.pause(),t.stop(),e.showModal(),e.setState({isPause:!0}))})),(0,u.Z)((0,l.Z)(o),"showModal",(function(){var e=(0,l.Z)(o);v().showModal({content:"\u5f53\u524d\u5728\u975eWi-Fi\u73af\u5883\u4e0b\n\u662f\u5426\u4f7f\u7528\u6d41\u91cf\u64ad\u653e",cancelText:"\u6682\u65f6\u53d6\u6d88",cancelColor:"#0099F7",confirmText:"\u7ee7\u7eed\u64ad\u653e",confirmColor:"#0099F7",success:function(t){t.confirm?(e.props.ubtTrace("c_gs_tripshoot_detail_video_start",{articleId:e.props.articleId,videoId:e.state.videoInfo.videoId}),e.onConfirmBT()):t.cancel&&e.onCancelBT()}})})),(0,u.Z)((0,l.Z)(o),"onConfirmBT",(function(){var e=(0,l.Z)(o),t=v().createVideoContext("video");t.play();var i={play:"true",time:(new Date).getTime()};v().setStorage({key:"LP_DETAIL_WIFIPLAY",data:JSON.stringify(i)}),e.setState({wifiHintFlag:!0,isPause:!1}),b.trigger("pageState",{listScroll:!0})})),(0,u.Z)((0,l.Z)(o),"onCancelBT",(function(){var e=(0,l.Z)(o),t={play:"false",time:(new Date).getTime()};v().setStorage({key:"LP_DETAIL_WIFIPLAY",data:JSON.stringify(t)}),e.setState({wifiHintFlag:!0}),b.trigger("pageState",{listScroll:!0})})),(0,u.Z)((0,l.Z)(o),"bindfullscreenchange",(function(e){var t=(0,l.Z)(o),i=e.detail.fullScreen,s=e.detail.direction,a=!1,n=!1,r={},c=t.windowWidth,d=t.screenHeight,p=t.state.videoInfo,u=!1;t.isFullScreen=i,i?(u=!0,"vertical"==s?(r.videoWidth=c,r.videoHeight=d):(r.videoWidth=d,r.videoHeight=c),t.props.ubtTrace("c_gs_tripshoot_detail_video_fullscreen",{articleId:t.props.articleId,videoId:t.state.videoInfo.videoId})):(a=!0,n=!0,r=p),t.setState({coverInfo:r,fullScreenState:u}),b.trigger("pageState",{showUploadBtn:a,showHeader:n})})),(0,u.Z)((0,l.Z)(o),"bindpause",(function(e){console.log("bindpause");var t=(0,l.Z)(o);t.setState({isPause:!0})})),(0,u.Z)((0,l.Z)(o),"getVideoDetail",(function(e){var t=(0,l.Z)(o),i=e.detail.duration,s=e.detail.currentTime;t.videoDuration=i,t.videoCurrentTime=s})),(0,u.Z)((0,l.Z)(o),"playError",(function(e){console.log("playError",e);var t=(0,l.Z)(o),i=t.props.articleId,s=t.state.videoInfo;t.props.ubtTrace("playError",{articleId:i,videoId:s.videoId,vendorType:s.vendorType,errMsg:JSON.stringify(e)})})),(0,u.Z)((0,l.Z)(o),"playProgress",(function(e){var t,i=(0,l.Z)(o),s=null===(t=e.detail)||void 0===t?void 0:t.buffered,a=e.timeStamp;s>=20&&s<50&&!i.timeStampTraced[0]&&(i.timeStampTrace(a,s),i.timeStampTraced[0]=!0),s>=50&&s<80&&!i.timeStampTraced[1]&&(i.timeStampTrace(a,s),i.timeStampTraced[1]=!0),s>=80&&s<100&&!i.timeStampTraced[2]&&(i.timeStampTrace(a,s),i.timeStampTraced[2]=!0),100!=s||i.timeStampTraced[3]||(i.timeStampTrace(a,s),i.timeStampTraced[3]=!0)})),(0,u.Z)((0,l.Z)(o),"timeStampTrace",(function(e,t){var i=(0,l.Z)(o),s=i.props.articleId,a=i.state.videoInfo,n="";n=e/1e3,t/=100,i.props.ubtTrace("downloadState",{articleId:s,videoId:a.videoId,vendorType:a.vendorType,downloadTime:n,downloadPercent:t,size:a.size})})),o.timeStampTraced=[],o.videoPlayTimes=0,o.videoTrackFlag=!1,o.state={hideVideo:!1,videoInfo:{},videoAutoplay:!1,wifiHintFlag:!1,isWifi:!1,coverInfo:{},showPlayBtn:"flex",isPause:!1},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.sendVideoTrack()}},{key:"render",value:function(){var e,t=this.props.headerClass,i=this.state,o=i.videoInfo,s=i.showPlayBtn,a=i.videoAutoplay,n=i.isPause,r=i.fullScreenState;if(!o||!o.videoUrl)return null;var c=o.needAuth?k.Z.appendVideoAuth(o.videoUrl,"tripshoot",null===(e=this.props.author)||void 0===e?void 0:e.clientAuth):o.videoUrl;return(0,se.jsxs)(f.View,{className:"swiper-wapper video-wapper ".concat(t),children:[(0,se.jsxs)(f.View,{className:"view view_title",style:{width:"".concat(o.videoWidth,"px"),height:"".concat(o.videoHeight,"px"),display:s},children:[(0,se.jsx)(f.Image,{className:"video-play-cover",src:o.coverImageUrl,style:{width:"".concat(o.videoWidth,"px"),height:"".concat(o.videoHeight,"px")}}),(0,se.jsx)(f.Image,{className:"video-play-btn",src:"https://pages.c-ctrip.com/you/livestream/lvpai_issue_videoplay1.png",onClick:this.playVideo})]}),(0,se.jsx)(f.View,{className:"view cover2",style:{display:n?"flex":"none"},onClick:this.playVideo,children:(0,se.jsx)(f.Image,{className:"video-play-btn",src:"https://pages.c-ctrip.com/you/livestream/lvpai_issue_videoplay1.png",onClick:this.playVideo})}),(0,se.jsx)(f.View,{className:"video-inner",style:{width:"".concat(o.videoWidth,"px"),height:"".concat(o.videoHeight,"px")},children:(0,se.jsx)(f.Video,{id:"video",src:c,style:{width:"".concat(o.videoWidth,"px"),height:"".concat(o.videoHeight,"px")},autoplay:a,onPlay:this.toPlay,onEnded:this.toEnd,"page-gesture":!1,"enable-progress-gesture":!1,"show-center-play-btn":!1,onFullscreenChange:this.bindfullscreenchange,onPause:this.bindpause,onTimeUpdate:this.getVideoDetail,onError:this.playError,onProgress:this.playProgress,"picture-in-picture-mode":"[]",children:(0,se.jsx)(f.View,{className:"view cover2",style:{display:n&&r?"flex":"none"},onClick:this.playVideo,children:(0,se.jsx)(f.Image,{className:"video-play-btn",src:"https://pages.c-ctrip.com/you/livestream/lvpai_issue_videoplay1.png",onClick:this.playVideo})})})})]})}}]),i}(m.Component),ue=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"exposeItem",(function(){var e=o.state.dataList;(e||[]).forEach((function(e,t){if(-1==i.hasExposedIds.indexOf(e.productId)){i.hasExposedIds.push(e.productId);var s,a,n,r="",c={};if("districtpopup"==o.props.pressType)r="o_gs_tripshoot_detail_destcard",c={articleId:o.props.articleId,index:t,destId:null===(s=o.props.showPopItemInfo)||void 0===s?void 0:s.districtId};else r="o_gs_tripshoot_detail_poicard",c={articleId:o.props.articleId,index:t,poiId:null===(a=o.props.showPopItemInfo)||void 0===a?void 0:a.poiId,poiType:null===(n=o.props.showPopItemInfo)||void 0===n?void 0:n.poiType};o.props.ubtTrace(r,c)}}))})),(0,u.Z)((0,l.Z)(o),"jumpToProduct",(function(e,t){var i,s,a,n,r="",c={};"districtpopup"==o.props.pressType?(r="c_gs_tripshoot_detail_destcard",c={articleId:o.props.articleId,index:t,destId:null===(s=o.props.showPopItemInfo)||void 0===s?void 0:s.districtId}):(r="c_gs_tripshoot_detail_poicard",c={articleId:o.props.articleId,index:t,poiId:null===(a=o.props.showPopItemInfo)||void 0===a?void 0:a.poiId,poiType:null===(n=o.props.showPopItemInfo)||void 0===n?void 0:n.poiType});o.props.ubtTrace(r,c);var l=(null===e||void 0===e||null===(i=e.basicInfo)||void 0===i?void 0:i.button)||{};k.Z.commonJump(l.h5Url,l.appUrl,l.wxUrl)})),(0,u.Z)((0,l.Z)(o),"_renderTemp",(function(e,t){return(0,se.jsx)(f.XGoodsCard,{style:{marginLeft:12,marginBottom:10,marginRight:12},cardItem:e,index:t,jumpToProduct:function(){return o.jumpToProduct(e,t)}})})),(0,u.Z)((0,l.Z)(o),"_renderDistrictItem",(function(e,t){var i,s;return(0,se.jsxs)(f.View,{className:"district-wrap ".concat(t==(null===(i=o.state.dataList)||void 0===i?void 0:i.length)-1?"last-item":""),onClick:function(){return o.jumpToProduct(e)},children:[(0,se.jsx)(f.Image,{className:"icon",mode:"aspectFill",src:"https://pages.c-ctrip.com/livestream/tripshoot/wx_detail_location.png"}),(0,se.jsx)(f.Text,{className:"district-name",children:null===e||void 0===e||null===(s=e.basicInfo)||void 0===s?void 0:s.title})]})})),(0,u.Z)((0,l.Z)(o),"closePopUp",(function(){var e,t;null===(e=(t=o.props).triggerProductMark)||void 0===e||e.call(t)})),o.state={dataList:[]},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){var e=this,t={articleId:this.props.articleId,needPoi:"poipopup"==this.props.pressType,needDistrict:"districtpopup"==this.props.pressType};console.log("componentDidMount"),oe.getArticlePoiCollect(t,(function(t){var i,o,s;if(console.log("componentDidMount res",t),k.Z.checkResponseAck(t))if("poipopup"==e.props.pressType)(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(i=i.pois)||void 0===i?void 0:i.length)>0&&(console.log("pois",null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.pois),e.setState({dataList:null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.pois},(function(){return e.exposeItem()})));else if("districtpopup"==e.props.pressType){var a,n,r;if((null===t||void 0===t||null===(a=t.data)||void 0===a||null===(a=a.districts)||void 0===a?void 0:a.length)>0)console.log("districts",null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.districts),e.setState({dataList:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.districts},(function(){return e.exposeItem()}))}}))}},{key:"render",value:function(){var e,t,i,o,s=this,a=this.props,n=a.title,r=a.touchStyle,c=a.pressType;return(0,se.jsx)(f.View,{className:"product_mark  show",catchMove:!0,style:r,children:(0,se.jsxs)(f.View,{className:"product_content",style:{maxHeight:.8*(null===(e=v().getSystemInfoSync())||void 0===e?void 0:e.windowHeight),minHeight:.4*(null===(t=v().getSystemInfoSync())||void 0===t?void 0:t.windowHeight)},children:[(0,se.jsxs)(f.View,{className:"top_header",children:[(0,se.jsx)(f.Image,{className:"close_icon",onClick:function(){return s.closePopUp()},src:"https://pages.c-ctrip.com/livestream/tripshoot/tripshoot_topic_ic_close.png"}),(0,se.jsx)(f.View,{className:"title",children:n})]}),(0,se.jsx)(f.View,{className:"block_container",children:null===(i=this.state.dataList)||void 0===i?void 0:i.map((function(e){return(0,se.jsx)(f.View,{className:"poipopup"==c?"height182":"height96"},e.productId)}))}),(0,se.jsx)(f.ScrollView,{"scroll-y":!0,className:"body",children:(0,se.jsx)(f.View,{className:"scroll_view goods_cards_wrap",children:null===(o=this.state.dataList)||void 0===o?void 0:o.map((function(e,t){return"poipopup"==c?s._renderTemp(e,t):s._renderDistrictItem(e,t)}))})})]})})}}]),i}(m.Component);(0,u.Z)(ue,"hasExposedIds",[]);var me=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"gotoPoiPage",(function(e){if(null!==e&&void 0!==e&&e.pressType)o.setState({showDistrictPoiPopUp:!0,popUpTitle:"districtpopup"==e.pressType?"\u63d0\u53ca\u76ee\u7684\u5730("+e.count+")":"\u63d0\u53ca\u5730\u70b9("+e.count+")",pressType:e.pressType,showPopItemInfo:e}),o.props.ubtTrace("districtpopup"==e.pressType?"c_gs_tripshoot_detail_multi_articledest":"c_gs_tripshoot_detail_multi_articlepoi",{articleId:o.props.articleId});else{var t=e.poiExt,i=t.h5Url,s=t.wxUrl,a=t.appUrl;k.Z.commonJump(i,a,s)}})),(0,u.Z)((0,l.Z)(o),"triggerProductMark",(function(){o.setState({showDistrictPoiPopUp:!o.state.showDistrictPoiPopUp})})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,i=t.pois,o=t.articleLevel,s=t.isHost,a=t.productType,r={showDistrictPoiPopUp:this.state.showDistrictPoiPopUp,touchStyle:{},title:this.state.popUpTitle,pressType:this.state.pressType,dataList:this.state.dataList,articleId:this.props.articleId,ubtTrace:this.props.ubtTrace,showPopItemInfo:this.state.showPopItemInfo};return i&&i.length?(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.View,{className:"mask-box",style:{marginRight:"".concat(this.props.labelUrl(o)&&s&&9!==a?64:0,"px")},children:i.map((function(t,i){var o;return(0,se.jsxs)(f.View,{className:"mask-text",onClick:function(){return e.gotoPoiPage(t)},children:[(0,se.jsx)(f.View,{className:"poi-icon-wrap"}),(0,se.jsx)(f.Text,{className:"poi-name",children:t.poiName}),t.rightText&&(0,se.jsx)(f.Text,{className:"poi-name-text",children:t.rightText}),(1==t.poiType||50==t.poiType)&&(0,se.jsx)(f.Text,{className:"count",children:null!==t&&void 0!==t&&null!==(o=t.poiExt)&&void 0!==o&&o.tripshootCount?t.poiExt.tripshootCount+"\u7bc7":""}),(0,se.jsx)(f.View,{className:"poi-more",children:" "})]},i)}))}),this.state.showDistrictPoiPopUp&&(0,se.jsx)(ue,(0,n.Z)((0,n.Z)({},r),{},{triggerProductMark:function(){return e.triggerProductMark()}}))]}):null}}]),i}(m.Component),he=i(71515);i(72049),_().options.html.transformElement=function(e){return"image"===e.nodeName&&e.setAttribute("mode","heightFix"),e};var ge=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"poiName",(function(e){if(e<0)return"";var t="poi-style-one";return t})),(0,u.Z)((0,l.Z)(o),"highLightClick",(function(e){var t=e.poiId,i=e.wxUrl,s=(e.h5Url,e.id),a=e.isPoi,n=e.type,r=e.name,c=e.poiType,l={articleId:o.props.articleId,id:s||t,text:r.replace(/[@#]/g,""),wxUrl:i};a?(l.poiType=c,l.type="1"):l.type=n,o.props.ubtTrace("c_gs_tripshoot_ctag_click",l),console.log("c_gs_tripshoot_ctag_click",l);var d=i;o._go2WebPage(d)})),(0,u.Z)((0,l.Z)(o),"_go2WebPage",(function(e){if(e&&e)if(e.startsWith("https")){var t={url:encodeURIComponent(e),needLogin:!1,isNavigate:!0};k.Z.jumpToWebview(t)}else h.cwx.navigateTo({url:e})})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=e.acticleContent;t&&t.sortedContentList&&t.sortedContentList.length>0&&this.props.handleContentShow("contentShow")}},{key:"render",value:function(){var e=this,t=this.props.acticleContent;return t&&t.sortedContentList&&t.sortedContentList.length?(0,se.jsx)(m.Fragment,{children:t.sortedContentList.map((function(t,i){return(0,se.jsx)(m.Fragment,{children:-1!=t.type?(0,se.jsx)(he.View,{onClick:function(){return e.highLightClick(t)},style:{display:"inline"},className:"normal ".concat(e.poiName(t.type)),children:t.isPoi?(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(he.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/poi.png",class:"poiIcon"}),(0,se.jsx)(he.Text,{children:t.name})]}):(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(he.Text,{children:t.name}),t.icon&&(0,se.jsx)(he.Image,{src:t.icon,class:"searchIcon"})]})}):(0,se.jsx)(he.View,{style:{display:"inline"},decode:!0,children:(0,se.jsx)(he.View,{style:{display:"inline"},className:"taro_html",dangerouslySetInnerHTML:{__html:t.acticleEmojiContent.text}})})},i)}))}):null}}]),i}(m.Component),fe=i(22276),ve=i(57301),we=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"collectAction",(function(e,t,i,s){if(null===e||void 0===e||e.stopPropagation(),(0,ve.bg)()){var a=i||{},n=a.favoriteInfo,r=void 0===n?{}:n,c=r.bizType,d=r.favoritesProductId,p=r.favoritesType,u=r.favoritesChannelId,m={};m=t?{productList:[{bizType:c,productId:d}]}:{FavoriteList:[{BizType:c,ProductID:d,ProductType:p,ExtendList:[{name:"channelid",value:null!==u&&void 0!==u?u:""}]}]};var h=(0,l.Z)(o);oe.addMyFavorites(m,(function(e){var o,a;if(k.Z.checkResponseAck(e,(function(){var e,t;null===(e=(t=h.props).refreshAfterLogin)||void 0===e||e.call(t)})))if(0==(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.resultCode)||0==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.ResultCode)){i.favoriteInfo?i.favoriteInfo.isFavorite=!t:i.favoriteInfo={isFavorite:!t};var n=h.state.productsList,r=(0,fe.Z)(n);r[s]=i,h.setState({productsList:n});var c=t?"\u53d6\u6d88\u6536\u85cf\u6210\u529f":"\u6536\u85cf\u6210\u529f";v().showToast({title:c,icon:"none"})}else v().showToast({title:t?"\u53d6\u6d88\u6536\u85cf\u5931\u8d25":"\u6536\u85cf\u5931\u8d25",icon:"none"})}))}else(0,ve.x4)((function(){var e,t;null===(e=(t=o.props).refreshAfterLogin)||void 0===e||e.call(t)}))})),(0,u.Z)((0,l.Z)(o),"jumpToProduct",(function(e,t,i){var s,a,r,c,d,p,u;null===i||void 0===i||null===(s=i.stopPropagation)||void 0===s||s.call(i);var m,g,f,v=(0,l.Z)(o),w=e.bdUrl||e.wxUrl||"",_=(e.h5Url,e.appId),x=(e.id,e.type,{});w=(null===e||void 0===e||null===(m=e.basicInfo)||void 0===m||null===(m=m.button)||void 0===m?void 0:m.wxUrl)||"",null===e||void 0===e||e.productId,null===e||void 0===e||null===(g=e.basicInfo)||void 0===g||null===(g=g.button)||void 0===g||g.h5Url,_=null===e||void 0===e||null===(f=e.basicInfo)||void 0===f?void 0:f.appId,e.productType,v.props.ubtTrace("c_gs_tripshoot_detail_goodscard",(0,n.Z)((0,n.Z)({},(null===e||void 0===e?void 0:e.buriedExt)||{}),{},{poiType:e.productName||"",poiID:((null===e||void 0===e?void 0:e.buriedExt)||{}).poiId||"",articleId:v.props.articleId+"",moduleType:((null===(a=e.buriedExt)||void 0===a?void 0:a.recommendType)||"")+"",goodsType:(null===(r=e.buriedExt)||void 0===r?void 0:r.productType)+"",goodsID:(null===(c=e.buriedExt)||void 0===c?void 0:c.productId)+"",goodsPosition:t+""})),v.props.ubtTrace("c_gs_tripshoot_detail_topgoodscard_click",(0,n.Z)((0,n.Z)({},(null===e||void 0===e?void 0:e.buriedExt)||{}),{},{poiType:e.productName||"",poiID:((null===e||void 0===e?void 0:e.buriedExt)||{}).poiId||"",articleId:v.props.articleId+"",moduleType:((null===(d=e.buriedExt)||void 0===d?void 0:d.recommendType)||"")+"",goodsType:(null===(p=e.buriedExt)||void 0===p?void 0:p.productType)+"",goodsID:(null===(u=e.buriedExt)||void 0===u?void 0:u.productId)+"",goodsPosition:t+""})),v.getreportMktProductClick("click_product",t),_&&""!==_&&"wx0e6ed4f51db9d078"!==_&&"wx402c540304df0b11"!==_?(w.indexOf("/")>0&&(w="/"+w),o.props.cwx.cwx_navigateToMiniProgram({appId:_,path:w,envVersion:"release",success:function(e){},fail:function(e){},complete:function(e){}})):w.indexOf("cwebview")>-1?h.cwx.navigateTo({url:w}):w.startsWith("https")?(x={url:encodeURIComponent(w),needLogin:!1,isNavigate:!0},k.Z.jumpToWebview(x)):h.cwx.navigateTo({url:w})})),(0,u.Z)((0,l.Z)(o),"cardColorCallBack",(function(e,t){e&&1==o.state.goodsExposeCardCount&&o.setState({cardBgColor:[e,t||e],isContentBgCard:!0})})),(0,u.Z)((0,l.Z)(o),"_renderTemp",(function(e,t,i){var s={marginLeft:12,marginBottom:10,marginRight:12,width:o.props.showStartAccountStyle&&o.state.productsList.length>1?"calc(100% - 16px)":"auto"},a={};return i&&o.state.isContentBgCard&&(s.marginBottom=0,a["borderBottomLeftRadius"]="0",a["borderBottomRightRadius"]="0"),(0,se.jsx)(f.XGoodsCard,{style:s,cardContainerStyle:a,cardItem:e,index:t,clickCollect:function(i,s){return o.collectAction(i,s,e,t)},jumpToProduct:function(e,t,i){return o.jumpToProduct(e,t,i)},cardColorCallBack:i?o.cardColorCallBack:null})})),(0,u.Z)((0,l.Z)(o),"handImgError",(function(e,t){if(o.state.productsList[e].attendUsers[t].headPhoto="https://dimg04.c-ctrip.com/images/t1/headphoto/258/512/704/6bce7506eecc48f8a4a6d3177e0acf24_C_180_180.jpg",o.setState({productsList:o.state.productsList}),0==e){var i=o.state;i&&i.modelType&&(i.attendUsers[t].headPhoto="https://dimg04.c-ctrip.com/images/t1/headphoto/258/512/704/6bce7506eecc48f8a4a6d3177e0acf24_C_180_180.jpg",o.setState({product:i}))}})),(0,u.Z)((0,l.Z)(o),"_renderSwiperCard",(function(){var e=o.state,t=e.product,i=e.productsList,s=e.productSwiperCurrent;return(0,se.jsxs)(f.View,{className:"goods_cards_wrap showStartAccount_product",children:[1==(null===i||void 0===i?void 0:i.length)&&(0,se.jsx)(f.View,{className:"simple-product",children:o._renderTemp(t,0)}),i&&i.length>1&&(0,se.jsx)(f.Swiper,{"next-margin":s==i.length-1?"40px":"80px",className:"swiper-container",onAnimationFinish:o.productsCardSwipe,onChange:o.productSwiperChange,circular:!1,"snap-to-edge":!1,children:i.filter((function(e){return e.modelType})).map((function(e,t){return(0,se.jsx)(f.SwiperItem,{className:"swiper-wrapper",children:o._renderTemp(e,t)},t)}))})]})})),(0,u.Z)((0,l.Z)(o),"_renderProCard",(function(){var e,t,i=o.state,s=i.showProductMark,a=i.goodsTotal,n=i.productsList,r=i.goodsExposeCardCount,c=i.cardBgColor,l=i.isContentBgCard,d=i.moduleName,p={},u=l?"https://pages.c-ctrip.com/livestream/tripshoot/602A0E.png":"https://pages.c-ctrip.com/livestream/more_5678a8.png";return(0,se.jsxs)(m.Fragment,{children:[(0,se.jsxs)(f.View,{className:"goods_cards_wrap list_product",style:n.length>2?{}:{paddingBottom:10},children:[n.slice(0,r).map((function(e,t){return o._renderTemp(e,t,!0)})),a>2&&(0,se.jsxs)(f.XLinearGradient,{className:"look_more ".concat(l?"isContentBgCard":""),onClick:o.triggerProductMark,colors:c,locations:[0,1],start:{x:0,y:0},end:{x:1,y:0},children:[l&&(0,se.jsx)(f.XLinearGradient,{colors:["#FADDC4","#FDF0E3"],locations:[0,1],start:{x:0,y:0},end:{x:1,y:0},className:"look_more_bg"}),(0,se.jsxs)(f.View,{className:"text",children:["\u67e5\u770b\u5168\u90e8 (",a||n.length,")"]}),(0,se.jsx)(f.Image,{className:"more_icon",src:u})]})]}),(0,se.jsx)(f.View,{className:"product_mark ".concat(s&&"show"),catchMove:!0,onClick:o.triggerProductMark,style:p,children:(0,se.jsxs)(f.View,{className:"product_content",style:{maxHeight:.8*(null===(e=v().getSystemInfoSync())||void 0===e?void 0:e.windowHeight),minHeight:.4*(null===(t=v().getSystemInfoSync())||void 0===t?void 0:t.windowHeight)},children:[(0,se.jsxs)(f.View,{className:"top_header",children:[(0,se.jsx)(f.Image,{className:"close_icon",onClick:o.triggerProductMark,src:"https://pages.c-ctrip.com/livestream/tripshoot/tripshoot_topic_ic_close.png"}),(0,se.jsx)(f.View,{className:"title",children:d||"\u5168\u90e8\u5546\u54c1\uff08".concat(a||n.length,"\uff09")})]}),(0,se.jsxs)(f.View,{className:"block_container",children:[null===n||void 0===n?void 0:n.map((function(e){return(0,se.jsx)(f.View,{className:"height182"},e.productId)})),(0,se.jsx)(f.View,{className:"footer"})]}),(0,se.jsxs)(f.ScrollView,{"scroll-y":!0,className:"body",children:[(0,se.jsx)(f.View,{className:"scroll_view goods_cards_wrap",children:n.map((function(e,t){return o._renderTemp(e,t)}))}),(0,se.jsx)(f.View,{className:"footer"})]})]})})]})})),(0,u.Z)((0,l.Z)(o),"getProductsListV2",(function(){var e=(0,l.Z)(o),t=[],i={},s={},a=2,r="",c=0,d=!1;s={articleId:e.props.articleId},oe.getTripShootProductsV2(s,(function(o){if(console.log("products",o),k.Z.checkResponseAck(o)){var s,l;if(o.data.goods&&o.data.goods.length)c=o.data.total,a=(null===(s=o.data.articleGoodsModule)||void 0===s||null===(s=s.guideModule)||void 0===s?void 0:s.exposeSize)||2,r=null===(l=o.data.articleGoodsModule)||void 0===l||null===(l=l.guideModule)||void 0===l?void 0:l.moduleName,c>0&&(d=!0,c>1||(i=o.data.goods[0]),t=o.data.goods,t.forEach((function(t,i){var o,s,a;i<2&&(t.hasExposed=!0,e.props.ubtTrace("o_gs_tripshoot_detail_goodscard",(0,n.Z)((0,n.Z)({},(null===t||void 0===t?void 0:t.buriedExt)||{}),{},{poiType:t.productName||"",poiID:((null===t||void 0===t?void 0:t.buriedExt)||{}).poiId||"",articleId:e.props.articleId+"",moduleType:((null===(o=t.buriedExt)||void 0===o?void 0:o.recommendType)||"")+"",goodsType:(null===(s=t.buriedExt)||void 0===s?void 0:s.productType)+"",goodsID:(null===(a=t.buriedExt)||void 0===a?void 0:a.productId)+"",goodsPosition:i+""})))}))),e._traceProductsInfo(o.data.goods);b.trigger("pageState",{hasProductsCard:d}),e.setState({productsList:t,product:i,hasProductsCard:d,goodsTotal:o.data.total,goodsExposeCardCount:a,moduleName:r},(function(){d&&(e.getreportMktProductClick("expo_product",0),e.getreportMktProductClick("expo_product",1))}))}}))})),(0,u.Z)((0,l.Z)(o),"getProductsList",(function(){o.getProductsListV2()})),(0,u.Z)((0,l.Z)(o),"getreportMktProductClick",(function(e,t){if("expo_product"!=e||!o.hasExportIdx[t]){o.hasExportIdx[t]=!0;var i=(0,l.Z)(o),s=o.state.productsList.length>1?o.state.productsList:[o.state.product];if(s[t]){var a={clientAuth:i.props.author.clientAuth,pageid:i.props.pageId,page_type:"article_detail",materialid:i.props.articleId,product_infos:JSON.stringify([s[t].ext]),click_type:e,note:"{sourceFrom:".concat(i.sourceFrom,"}")};i.props.ubtTrace("gs_ts_detail_report_mkt_product_clic",a),oe.getreportMktProductClick(a,(function(e){k.Z.checkResponseAck(e)&&e.data.result.length}))}}})),(0,u.Z)((0,l.Z)(o),"_traceProductsInfo",(function(e){if(e&&e.length>0){var t=[];e.forEach((function(e,i){e.extInfo&&(e.extInfo.sortno=i,e.extInfo.productid=e.id,t.push(e.extInfo))}));var i={articleId:o.props.articleId,product_infos:JSON.stringify(t),productid:e[0].id,product_type:e[0].goodsType};o.props.ubtTrace("o_gs_tripshoot_detail_all_recommend_goods",i),console.log("o_gs_tripshoot_detail_all_recommend_goods",i)}})),(0,u.Z)((0,l.Z)(o),"productsCardSwipe",(function(e){var t=(0,l.Z)(o),i=parseInt(e.detail.current),s=t.state.productsList,a=s[i].type,n=s[i].businessId;t.getreportMktProductClick("expo_product",i+1),t.props.ubtTrace("c_gs_tripshoot_detail_goodscard_slide",{articleId:t.props.articleId,goodsType:a,goodsID:n})})),(0,u.Z)((0,l.Z)(o),"productSwiperChange",(function(e){o.setState({productSwiperCurrent:e.detail.current})})),(0,u.Z)((0,l.Z)(o),"triggerProductMark",(function(){var e=(0,l.Z)(o);o.setState({showProductMark:!o.state.showProductMark},(function(){1==e.state.showProductMark&&(e.state.productsList.forEach((function(t,i){var o,s,a;t.hasExposed||(t.hasExposed=!0,e.props.ubtTrace("o_gs_tripshoot_detail_goodscard",(0,n.Z)((0,n.Z)({},(null===t||void 0===t?void 0:t.buriedExt)||{}),{},{poiType:t.productName||"",poiID:((null===t||void 0===t?void 0:t.buriedExt)||{}).poiId||"",articleId:e.props.articleId+"",moduleType:((null===(o=t.buriedExt)||void 0===o?void 0:o.recommendType)||"")+"",goodsType:(null===(s=t.buriedExt)||void 0===s?void 0:s.productType)+"",goodsID:(null===(a=t.buriedExt)||void 0===a?void 0:a.productId)+"",goodsPosition:i+""})))})),e.props.ubtTrace("c_gs_tripshoot_detail_goodsaggregate",{articleId:e.props.articleId}),console.log("c_gs_tripshoot_detail_goodsaggregate",{articleId:e.props.articleId}))}))})),o.hasExportIdx={},o.state={showProductMark:!1,product:null,productsList:[],hasProductsCard:!1,goodsTotal:0,productSwiperCurrent:0,goodsExposeCardCount:2,cardBgColor:["#f8fafd","#f8fafd"],isContentBgCard:!1},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.showStartAccountStyle,t=this.state.hasProductsCard;return t?(0,se.jsx)(m.Fragment,{children:e?this._renderSwiperCard():this._renderProCard()}):null}}]),i}(m.Component),_e=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"jumpToPraiseList",(function(){var e=(0,l.Z)(o),t={},i="";e.props.ubtTrace("c_gs_tripshoot_detail_likemodule_more",{articleId:e.props.articleId}),i=k.Z.newUrlPrefix()+"comment/prisedUserList.html?isHideShare=yes&autoawaken=close&popup=close&isMini=2&isHideHeader=true&isHideNavBar=YES&Id="+e.props.articleId,t={url:encodeURIComponent(i),needLogin:!1,isNavigate:!0},k.Z.jumpToWebview(t)})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,i=t.praiseList,o=t.likeCount,s=t.isLike,a=t.isLiking,n=t.showLikeCount;return(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"praiseList",children:[i&&i.length?(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.View,{className:"head_img_wrap",onClick:this.jumpToPraiseList,children:i.map((function(e,t){return(0,se.jsxs)(f.View,{className:"head_img_item",children:[(0,se.jsx)(f.Image,{src:e.headPhoto,className:"head_img"}),e.vIcon&&(0,se.jsx)(f.Image,{src:e.vIcon,className:"head_img_vIcon"})]},t)}))}),o>=100&&(0,se.jsx)(f.View,{className:"praise_more",onClick:this.jumpToPraiseList,children:(0,se.jsx)(f.Image,{mode:"heightFix",className:"praise_more_img",src:this.props.getZanImgUrl(o)})}),(0,se.jsxs)(f.View,{className:"praise_btn_wrap",children:[(0,se.jsx)(f.View,{className:"praise_btn ".concat(s?"praised_btn":""," ").concat(a?"praising_btn":""),onClick:function(){return e.props.toPraise({isLike:s,type:"likemodule"})}}),(0,se.jsx)(f.View,{className:"praise_count_wrap",children:n})]})]}):(0,se.jsxs)(f.View,{className:"prise_empty",children:[(0,se.jsx)(f.View,{className:"prise_empty_btn",onClick:function(){return e.props.toPraise({isLike:s,type:""})},children:(0,se.jsxs)(f.View,{className:"prise_empty_btn_bg",children:[(0,se.jsx)(f.Image,{className:"prise_empty_btn_icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/zan_icon_empty.png"}),(0,se.jsx)(f.Text,{className:"prise_empty_btn_text",children:"\u70b9\u8d5e"})]})}),(0,se.jsx)(f.View,{className:"prise_empty_text",children:"\u5feb\u6765\u6210\u4e3a\u7b2c\u4e00\u4e2a\u70b9\u8d5e\u7684\u4eba\u5427\uff5e"})]}),(0,se.jsx)(f.View,{className:"praise_list_spliter"})]})})}}]),i}(m.Component),xe=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"toReply",(function(e,t,i){o.props.commentListModalRef&&(e.isOwner?o.props.commentListModalRef.showCommentAction(e.author.nickName,t,e.isOwner,e.commentId,i):o.props.commentListModalRef.toReply(e.author.nickName,e.commentId,e.isOwner,e.commentId))})),(0,u.Z)((0,l.Z)(o),"doCommentPraise",(function(e,t){o.props.doCommentPraise(e.commentId,e.isLike,t)})),(0,u.Z)((0,l.Z)(o),"jumpToCommentList",(function(){o.props.ubtTrace("c_gs_tripshoot_detail_viewallcomments",{articleId:o.props.articleId}),o.props.commentListModalRef&&o.props.commentListModalRef.show()})),(0,u.Z)((0,l.Z)(o),"goHotel",(function(e){var t,i,s=e.url,a=s.wxUrl,n=s.h5Url,r=s.appUrl;o.props.ubtTrace("c_gs_tripshoot_detail_hotelcomment",{articleId:o.props.articleId,poiID:null===e||void 0===e||null===(t=e.poiInfo)||void 0===t?void 0:t.poiId,commentId:e.commentId}),console.log("c_gs_tripshoot_detail_hotelcomment",{articleId:o.props.articleId,poiID:null===e||void 0===e||null===(i=e.poiInfo)||void 0===i?void 0:i.poiId,commentId:e.commentId}),k.Z.commonJump(n,r,a)})),(0,u.Z)((0,l.Z)(o),"gotoPreviewImage",(function(e,t){null===e||void 0===e||e.stopPropagation(),v().previewImage({current:t,urls:[t]})})),(0,u.Z)((0,l.Z)(o),"_renderCommentDetail",(function(e,t){var i,s,a=o.props.commentTextStyle,r="",c=0,l=0;if((null===e||void 0===e||null===(i=e.nodes)||void 0===i?void 0:i.length)>0){var d,p,u=null===e||void 0===e||null===(d=e.nodes)||void 0===d?void 0:d[0];if(1==(null===u||void 0===u?void 0:u.nodeType)&&null!==u&&void 0!==u&&null!==(p=u.imageDto)&&void 0!==p&&p.originalUrl){var h,g,v=(null===u||void 0===u?void 0:u.imageDto)||{};(null===v||void 0===v?void 0:v.width)/(null===v||void 0===v?void 0:v.height)<.8?(c=120,l=4*c/3):(null===v||void 0===v?void 0:v.width)/(null===v||void 0===v?void 0:v.height)>=.8&&(null===v||void 0===v?void 0:v.width)/(null===v||void 0===v?void 0:v.height)<=1.2?(c=120,l=120):(c=160,l=3*c/4),r=null===(h=(0,f.dynamicImageUrl)({imageUrl:null===u||void 0===u||null===(g=u.imageDto)||void 0===g?void 0:g.originalUrl,height:l,width:c,ext:{}}))||void 0===h?void 0:h.dynamicUrl}}a=(0,n.Z)((0,n.Z)({},a),{},{wrapperStyle:(null===(s=a)||void 0===s?void 0:s.wrapperStyle)+"text-overflow: ellipsis;\n\t\t\tdisplay: -webkit-box;\n\t\t\t-webkit-box-orient: vertical;\n\t\t\t-webkit-line-clamp: ".concat(e.isHotelComment?3:2,";\n\t\t\toverflow: hidden;")});try{var w;return(0,se.jsxs)(m.Fragment,{children:[(0,se.jsxs)(f.View,{className:"comemnt-avat",onClick:function(){return e.isHotelComment?null:o.props.jumpToHome({type:"otherhome",auth:e.author.clientAuth})},children:[(0,se.jsx)(f.Image,{className:"comemnt-avat-img",src:e.author.coverImage&&e.author.coverImage.dynamicUrl||"https://pages.c-ctrip.com/you/lvpai-home-defaultavat.jpg"}),e.author.vIcon&&(0,se.jsx)(f.Image,{className:"comemnt-vip",src:e.author.vIcon})]}),(0,se.jsxs)(f.View,{className:"comemnt-content",children:[(0,se.jsx)(f.View,{className:"comemnt-name-wrapper",children:(0,se.jsxs)(f.View,{className:"comemnt-name",children:[(0,se.jsxs)(f.View,{className:"name-reply-container",children:[(0,se.jsx)(f.View,{className:"name-text",children:e.author.nickName}),e.author.tag&&(0,se.jsx)(f.View,{className:"comemnt-identity",children:e.author.tag}),e.label&&(0,se.jsx)(f.View,{className:"comemnt-identity",children:e.label}),e.refComment&&e.refComment.author&&e.refComment.author.nickName&&(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.View,{className:"reply",children:"\u56de\u590d"}),(0,se.jsx)(f.View,{className:"name-text",children:e.refComment.author.nickName}),e.refComment.author.tag&&(0,se.jsx)(f.View,{className:"comemnt-identity",children:e.refComment.author.tag})]})]}),!e.isHotelComment&&(0,se.jsxs)(f.View,{className:"common-comment-praise",onClick:function(){return o.doCommentPraise(e,t)},children:[(0,se.jsx)(f.View,{className:"like-content",children:e.isLike?(0,se.jsx)(f.Image,{className:"like-icon",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/like-blue.png"}):(0,se.jsx)(f.Image,{className:"like-icon",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/Like.png"})}),(0,se.jsx)(f.View,{className:"count",children:e.likeCount>0?e.likeCount:"\u9996\u8d5e"})]})]})}),5==e.publishStatus||3==e.publishStatus?(0,se.jsx)(f.View,{className:"comment-detail",children:(0,se.jsx)(f.View,{className:"common-comment-delete",children:e.reportType>0?"\u8bc4\u8bba\u56e0\u8fdd\u53cd\u643a\u7a0b\u793e\u533a\u89c4\u8303\u88ab\u5220\u9664":e.content})}):(0,se.jsxs)(f.View,{className:"comment-detail ".concat(e.isHotelComment?"padding-zero":""),onClick:function(i){return e.isHotelComment?null:o.toReply(e,t,i)},children:[(0,se.jsx)(f.EmojiComp,{className:"comment-text",inputObj:o.props.assembleEmojiObj(e,"content",a)}),r&&(0,se.jsx)(f.Image,{mode:"aspectFill",style:{width:c,height:l},onClick:function(e){return o.gotoPreviewImage(e,r)},className:"comment-pic",src:r})]}),e.isHotelComment?(0,se.jsxs)(f.View,{className:"hotel-more-wrap",onClick:function(){return o.goHotel(e)},children:[(0,se.jsxs)(f.View,{className:"hotel-more-text",children:["\u67e5\u770b\u66f4\u591a\u4f4f\u5ba2\u70b9\u8bc4(",e.commentCount,")"]}),(0,se.jsx)(f.Image,{className:"hotel-more-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/right-1.png"})]}):(0,se.jsxs)(f.View,{className:"common-comment-info ".concat((null===(w=e.childComments)||void 0===w?void 0:w.length)>0?"pad-lower":""),children:[(0,se.jsxs)(f.View,{className:"common-comment-time",children:[(0,se.jsx)(f.Text,{children:e.publishTimeDisplay}),(0,se.jsx)(f.Text,{className:"ip",children:e.ipLocatedName})]}),(e.tags||[]).map((function(e,t){return(0,se.jsx)(f.View,{className:"tag",children:e.tagName},t)}))]})]})]})}catch(e){}})),(0,u.Z)((0,l.Z)(o),"_renderCommentList",(function(){var e=o.props,t=e.commentList,i=e.hotelComment,s=t.map((function(e,s){return(0,se.jsxs)(f.View,{className:"comment-item",children:[(0,se.jsx)(f.View,{className:"comment-main-item",children:o._renderCommentDetail(e,e.commentId)}),(e.childComments||[]).slice(0,1).map((function(t,i){return(0,se.jsx)(f.View,{className:"sub-item ".concat(0==i?"sub-item-f":""),children:o._renderCommentDetail(t,e.commentId)},i)})),(e.childComments||[]).slice(0,1).length<e.childTotalCount&&!e.showSubCommentLoading&&(0,se.jsxs)(f.View,{onClick:function(){return o.jumpToCommentList()},className:"comment-show-more",children:["\u67e5\u770b",e.childTotalCount-1,"\u6761\u56de\u590d",(0,se.jsx)(f.Image,{className:"comment-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/comment-right.png"})]}),e.showSubCommentLoading&&(0,se.jsx)(f.View,{className:"sub-loading",children:"\u52a0\u8f7d\u4e2d..."}),s<(i?3:4)&&s!=t.length-1&&(0,se.jsx)(f.View,{className:"line"})]},e.commentId)}));return i&&s.unshift((0,se.jsxs)(f.View,{className:"comment-item",children:[(0,se.jsx)(f.View,{className:"comment-main-item",children:o._renderCommentDetail(i,i.commentId)}),t.length>0&&(0,se.jsx)(f.View,{className:"line"})]},i.commentId)),s.slice(0,5)})),(0,u.Z)((0,l.Z)(o),"_renderList",(function(){var e=o.props,t=e.showCommentListJump;e.commentCount;return(0,se.jsxs)(f.View,{className:"comment",children:[o._renderCommentList(),(0,se.jsx)(f.View,{className:"height20"}),t&&(0,se.jsxs)(f.View,{className:"find-more",onClick:o.jumpToCommentList,children:["\u67e5\u770b\u5168\u90e8\u8bc4\u8bba",(0,se.jsx)(f.Text,{className:"find-more-icon"})]})]})})),(0,u.Z)((0,l.Z)(o),"_renderEmpty",(function(){var e=o.props,t=e.isHost;e.replyList;return t?(0,se.jsxs)(f.View,{className:"comment_empty_wrapper",children:[(0,se.jsx)(f.Image,{className:"empty_image",src:"https://pages.c-ctrip.com/livestream/tripshoot/noComment.png"}),(0,se.jsxs)(f.View,{className:"empty_text",children:[(0,se.jsx)(f.View,{className:"text1",children:"\u6682\u65e0\u8bc4\u8bba"}),(0,se.jsx)(f.View,{className:"text2",children:"\u8bc4\u8bba\u5728\u8def\u4e0a\uff0c\u518d\u8010\u5fc3\u7b49\u7b49\uff5e"})]})]}):(0,se.jsxs)(f.View,{className:"comment_empty_wrapper",children:[(0,se.jsx)(f.Image,{className:"empty_image",src:"https://pages.c-ctrip.com/livestream/tripshoot/noComment.png"}),(0,se.jsxs)(f.View,{className:"empty_text",children:[(0,se.jsx)(f.View,{className:"text1",children:"\u6682\u65e0\u8bc4\u8bba"}),(0,se.jsx)(f.View,{className:"text2",children:"\u62a2\u4e2a\u6c99\u53d1\uff0c\u7ed9\u4f5c\u8005\u4e00\u70b9\u9f13\u52b1\uff5e"})]})]})})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.commentList,i=e.hotelComment;return(0,se.jsx)(m.Fragment,{children:null!==t&&void 0!==t&&t.length||i?this._renderList():this._renderEmpty()})}}]),i}(m.Component),Ie=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"handleClickQuickItem",(function(e){o.props.handleClickQuickItem&&o.props.handleClickQuickItem(e)})),(0,u.Z)((0,l.Z)(o),"_renderList",(function(){var e=o.props.replyList,t=e.slice(0,6);return t.map((function(e,t){return(0,se.jsx)(f.View,{className:"quickReplyItem-q quickReplyObserverOne",onClick:function(){return o.handleClickQuickItem(e)},children:e},t)}))})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,i=(t.replyList,t.userInfo),o=t.commentCount;return(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"comment",children:[o>0&&(0,se.jsxs)(f.View,{className:"comment-total",children:["\u5171 ",o," \u6761\u8bc4\u8bba"]}),(0,se.jsx)(f.View,{className:"my-comment",children:(0,se.jsxs)(f.View,{className:"my-comment-input",onClick:this.props.toInputFocus,children:[(0,se.jsx)(f.View,{className:"avat ".concat(i.identityType?"isVip":""),onClick:function(){i.clientAuth?e.props.jumpToHome({type:"myComment",auth:i.clientAuth}):e.props.toLogin()},children:(0,se.jsx)(f.Image,{className:"img",src:i.headPhoto})}),(0,se.jsx)(f.Text,{children:"\u6211\u6709\u60f3\u8bf4\u7684\u2026"})]})})]})})}}]),i}(m.Component),Te=i(93212),ye=function(e){var t=e||{},i=(t.tagId,t.impId),o=t.width,s=t.height,a=(t.wrapperWidth,t.extension),n=void 0===a?[]:a;return(0,se.jsx)("ad-sdk",{impId:i,width:o,height:s,extension:n})},be=ye,ke="pocketguide";function Ce(e){var t=[];for(var i in e){var o=(0,Te.Z)(e[i]);"string"!==o&&"number"!==o&&"boolean"!==o||t.push(i+"="+e[i])}return t.join("&")}var Se,je=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"jumpToDetail",(function(e,t){var i,s,a,n,r,c,d,p,u=(0,l.Z)(o),m=e.articleId,g=u.props.fromDetail;if(u.props.ubtTrace("c_gs_tripshoot_detail_relatedarticle",{articleId:u.props.articleId,relatedArticlePosition:t.toString(),relatedArticleId:m.toString(),feedsArticleType:e.feedsArticleType||"",extension:null!==(i=e.ext)&&void 0!==i?i:"",productType:e.productType,sourceid:null!==(s=e.sourceInfo)&&void 0!==s?s:""}),e.sourceInfo!==ke){var f={hidePublishButton:null===(a=o.props.options)||void 0===a?void 0:a.hidePublishButton,hideOpenCtrip:null===(n=o.props.options)||void 0===n?void 0:n.hideOpenCtrip,hideCustomHeader:null===(r=o.props.options)||void 0===r?void 0:r.hideCustomHeader,hideFloatWindow:null===(c=o.props.options)||void 0===c?void 0:c.hideFloatWindow,hideComment:null===(d=o.props.options)||void 0===d?void 0:d.hideComment,showContent:null===(p=o.props.options)||void 0===p?void 0:p.showContent},v=Ce(f),w=e.urls.find((function(e){return"tripShoot2"==e.version}));0;var _="".concat(w.wxUrl,"&").concat(v);1==g?h.cwx.redirectTo({url:_}):h.cwx.navigateTo({url:_})}else{var x,I=(null===e||void 0===e||null===(x=e.urls)||void 0===x?void 0:x[0])||{},T=(I.h5Url,I.wxUrl),y=void 0===T?"":T;if(y.startsWith("https")){var b={url:encodeURIComponent(y),needLogin:!1,isNavigate:!0};k.Z.jumpToWebview(b)}else 1==g?h.cwx.redirectTo({url:y}):h.cwx.navigateTo({url:y})}})),(0,u.Z)((0,l.Z)(o),"toPraise",(function(e){o.props.toPraise&&o.props.toPraise({isLike:e.isLike,type:"relatedArticle",position:e.itemIndex,articleid:e.articleId})})),(0,u.Z)((0,l.Z)(o),"assembleEmojiObj",(function(e,t,i){var o="font-size: 14px; line-height: 21px; color: #222; padding-top: 5px; -webkit-box-orient: vertical; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;",s="height: 18px;vertical-align: text-bottom",a={text:"",wrapperStyle:o,cemojiStyle:s,class:"infotitle"};return e&&(a.text=e[t],i&&(a.wrapperStyle=i.wrapperStyle,a.cemojiStyle=i.cemojiStyle)),a})),(0,u.Z)((0,l.Z)(o),"_renderItem",(function(e,t){var i,s;return(0,se.jsxs)(f.XView,{className:"wf-item-inner",onClick:function(){return o.jumpToDetail(e,t)},testID:{ubtKey:"o_gs_tripshoot_detail_relatedarticle",data:{articleId:o.props.articleId,relatedArticlePosition:t.toString(),relatedArticleId:o.props.articleId.toString(),feedsArticleType:e.feedsArticleType||"",extension:null!==(i=e.ext)&&void 0!==i?i:"",productType:e.productType,sourceid:null!==(s=e.sourceInfo)&&void 0!==s?s:""}},children:[(0,se.jsxs)(f.View,{className:"itemimg ".concat(e.isVideo?"isvideo":""),children:[(0,se.jsx)(f.View,{className:"itemimg-wapper",children:(0,se.jsx)(f.Image,{className:"img",src:e.image.url,style:{width:"".concat(e.image.picWidth).concat("r","px"),height:"".concat(e.image.picHeight).concat("r","px")},"lazy-load":!0,mode:"aspectFill"})}),e.poiName&&(0,se.jsx)(f.View,{className:"poiTag",children:e.poiName})]}),(0,se.jsxs)(f.View,{className:"infotext",children:[(0,se.jsx)(f.View,{className:"infotitle",children:(0,se.jsx)(f.EmojiComp,{inputObj:o.assembleEmojiObj(e,"title")})}),(0,se.jsxs)(f.View,{className:"linewrap",children:[(0,se.jsx)(f.View,{className:"usertext",children:(0,se.jsxs)(f.View,{className:"userhead",children:[(0,se.jsxs)(f.View,{className:"rel_head_img_wrap",children:[(0,se.jsx)(f.Image,{className:"rel_head_img ",src:e.author.avatUrl}),e.author.vIcon&&(0,se.jsx)(f.Image,{className:"rel_head_img_vIcon ",src:e.author.vIcon})]}),(0,se.jsx)(f.Text,{className:"username",children:e.author.nickName})]})}),e.sourceInfo!==ke&&(0,se.jsxs)(f.View,{className:"praisecount",onClick:function(t){o.toPraise(e),t.stopPropagation()},children:[e.isLike?e.showAnimation?(0,se.jsx)(f.View,{className:"do-comment-animation"}):(0,se.jsx)(f.View,{className:"img",children:(0,se.jsx)(f.Image,{className:"icon",src:"https://pages.c-ctrip.com/you/livestream/lvpai_detail_commentprised.png"})}):(0,se.jsx)(f.View,{className:"img",children:(0,se.jsx)(f.Image,{className:"icon",src:"https://pages.c-ctrip.com/you/livestream/lvpai_detail_commentprise.png"})}),(0,se.jsx)(f.Text,{className:"text",children:e.praiseCount?o.props.formateNum(e.praiseCount):""})]})]})]})]},t)})),(0,u.Z)((0,l.Z)(o),"_renderAdCard",(function(e,t){return(0,se.jsx)(f.View,{className:"wf-item-inner",onClick:function(){return o.jumpToDetail(e,t)},children:(0,se.jsx)(be,(0,n.Z)((0,n.Z)({},e),{},{handleAdEnd:o.handleAdEnd}))},t+e.impId)})),(0,u.Z)((0,l.Z)(o),"handleAdEnd",(function(e,t,i){t||(i.parentElement.style.display="none")})),(0,u.Z)((0,l.Z)(o),"_renderList",(function(){var e=o.props,t=e.waterfallLeftList,i=e.waterfallRightList,s=t.map((function(e,t){return"ad"==e.type?o._renderAdCard(e,t):o._renderItem(e,t)})),a=i.map((function(e,t){return"ad"==e.type?o._renderAdCard(e,t):o._renderItem(e,t)}));return(0,se.jsxs)(f.View,{className:"wf-container",children:[(0,se.jsx)(f.View,{className:"wf-item wf-item-2 ",id:"waterfallLeftList",children:s}),(0,se.jsx)(f.View,{className:"wf-item wf-item-2 ",id:"waterfallRightList",children:a})]})})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.relevantList,i=e.showRelevantList;return t&&t.length&&i?(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"relevant-list",id:"relevant-list",children:[(0,se.jsx)(f.View,{className:"title js_relevantTitle",children:"\u76f8\u5173\u7b14\u8bb0"}),(0,se.jsx)(f.View,{className:"waterfall-content",children:this._renderList()})]})}):null}}]),i}(m.Component),Ze=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"hideSbgMask",(function(){b.trigger("pageState",{listScroll:!0,showSbg:!1,hideVideo:!1})})),(0,u.Z)((0,l.Z)(o),"handleTouch",(function(){return!1})),(0,u.Z)((0,l.Z)(o),"_renderMask",(function(){var e=[],t=o.props,i=t.showSbg,s=t.activitySwitch,a=t.showRaceTopicToast,n=t.raceTopicInfo;return i&&s&&e.push((0,se.jsx)(f.View,{className:"mask sbg-hint-mask",onClick:o.hideSbgMask,catchMove:!0,children:(0,se.jsxs)(f.View,{className:"sbg-hint-wapper",children:[(0,se.jsx)(f.View,{className:"sbg-hint",children:"\u6253\u5f00\u53f3\u4e0a\u89d2\uff0c\u5206\u4eab\u8d62\u79ef\u5206"}),(0,se.jsx)(f.Image,{className:"sbg-hint-arrow",src:"https://pages.c-ctrip.com/you/livestream/lvpai_you_share_arrow.png"})]})})),a&&n&&n.toastUrl&&e.push((0,se.jsx)(f.View,{className:"raceTopicMask",catchMove:!0,onClick:function(){return o.props.hideRaceTopicMask("all")},children:(0,se.jsxs)(f.View,{className:"raceTopicMask-inner",children:[(0,se.jsx)(f.Image,{className:"raceTopicMask-img",src:n.imageUrl,onClick:function(){return o.props.jumpToRace(n.toastUrl,"toast-race")}}),(0,se.jsx)(f.Image,{className:"raceTopicMask-closebtn",src:"https://pages.c-ctrip.com/you/livestream/lvpai_detail_racetopic_close.png",onClick:function(){return o.props.hideRaceTopicMask("button")}})]})})),e})),o.state={},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return(0,se.jsx)(m.Fragment,{children:this._renderMask()})}}]),i}(m.Component),Ne=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"show",(function(e){o.setState((0,n.Z)({active:!0},e),(function(){var e=setTimeout((function(){o.hide(),clearTimeout(e)}),3e3)}))})),(0,u.Z)((0,l.Z)(o),"hide",(function(){o.setState({active:!1})})),(0,u.Z)((0,l.Z)(o),"getTaskPoint",(function(){var e=(0,l.Z)(o);e.state.userTaskId&&oe.drawRewardList([e.state.userTaskId],(function(t){Se=this.props.cwx.getCurrentPage(),k.Z.checkResponseAck(t)?v().showToast({title:"".concat(e.state.score||10,"\u79ef\u5206\u5df2\u9886\u53d6"),icon:"none"}):v().showToast({title:"\u9886\u53d6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),Se.ubtTrace("c_gs_tripshoot_taskfeedback_reward_click",{taskid:e.state.taskId,taskname:e.state.taskName}),console.log("c_gs_tripshoot_taskfeedback_reward_click",{taskid:e.state.taskId,taskname:e.state.taskName})}))})),o.state={active:!1,type:"like",title:"",desc:"",score:0},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){var e=this;b.on("detailShow",(function(){})),b.on("detailHide",(function(){e.hide()}))}},{key:"render",value:function(){var e=this.state,t=e.active,i=e.type,o=e.title,s=e.desc,a=e.score,n=this.props.top;return(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"feedback ".concat(t?"show":""),style:{top:"".concat(n,"px")},children:[(0,se.jsxs)(f.View,{className:"feedbackimg",children:["like"===i&&(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.Image,{className:"img",mode:"aspectFill",src:"https://pages.c-ctrip.com/livestream/tripshoot/like.png"}),(0,se.jsxs)(f.View,{className:"pointContent",children:[(0,se.jsx)(f.Image,{className:"pointImg",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/coin@3x.png"}),(0,se.jsxs)(f.Text,{className:"pointText",children:["+",a||0]})]})]}),"attention"===i&&(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.Image,{className:"img",mode:"aspectFill",src:"https://pages.c-ctrip.com/livestream/tripshoot/follow.png"}),(0,se.jsxs)(f.View,{className:"pointContent",children:[(0,se.jsx)(f.Image,{className:"pointImg",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/coin@3x.png"}),(0,se.jsxs)(f.Text,{className:"pointText",children:["+",a||10]})]})]}),"share"===i&&(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)(f.Image,{className:"img",mode:"aspectFill",src:"https://pages.c-ctrip.com/livestream/tripshoot/sharef.png"}),(0,se.jsxs)(f.View,{className:"pointContent",children:[(0,se.jsx)(f.Image,{className:"pointImg",mode:"widthFix",src:"https://pages.c-ctrip.com/livestream/tripshoot/coin@3x.png"}),(0,se.jsxs)(f.Text,{className:"pointText",children:["+",a||10]})]})]})]}),(0,se.jsxs)(f.View,{className:"feedbacktext",children:[(0,se.jsx)(f.View,{className:"title",children:o}),(0,se.jsx)(f.View,{children:s})]}),(0,se.jsx)(f.View,{className:"feedbackbtn",onClick:this.getTaskPoint,children:"\u9886\u79ef\u5206"})]})})}}]),i}(m.Component),Le=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"_getList",(function(){var e={articleId:o.props.articleId};oe.getRecommendGruppe(e,(function(e){var t,i,s;if(o.setState({dataList:((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.gruppes)||[]).filter((function(e){return 1!=(null===e||void 0===e?void 0:e.cardType)}))||[],title:(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.moduleName)||""}),(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(s=s.gruppes)||void 0===s?void 0:s.length)>0){var a;o.hasExposeIdx.push(0);var n=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.gruppes[0])||{},r={type:null===n||void 0===n?void 0:n.cardType};2==n.cardType?r.topicid=n.themeId:3==n.cardType?r.theme=n.name:4==n.cardType&&(r.districtid=n.districtid,r.producttype=n.type),o.props.ubtTrace&&o.props.ubtTrace("o_gs_tripshoot_detail_relatedgroup_expose",r)}}))})),(0,u.Z)((0,l.Z)(o),"_renderItem",(function(e){var t=function(){var t,i,s,a={type:null===e||void 0===e?void 0:e.cardType};2==e.cardType?a.topicid=e.themeId:3==e.cardType?a.theme=e.name:4==e.cardType&&(a.districtid=e.districtid,a.producttype=e.type),o.props.ubtTrace&&o.props.ubtTrace("c_gs_tripshoot_detail_relatedgroup_click",a),k.Z.commonJump(null===e||void 0===e||null===(t=e.url)||void 0===t?void 0:t.h5Url,null===e||void 0===e||null===(i=e.url)||void 0===i?void 0:i.appUrl,null===e||void 0===e||null===(s=e.url)||void 0===s?void 0:s.wxUrl)},i=(0,f.dynamicImageUrl)({imageUrl:e.coverImage.originalUrl,height:132,width:132,ext:{}}).dynamicUrl;return(0,se.jsxs)(f.View,{className:"list-item",onClick:t,children:[(0,se.jsxs)(f.View,{className:"item-left",children:[(0,se.jsxs)(f.View,{className:"info-content",children:[(0,se.jsxs)(f.View,{className:"re-title",children:[(0,se.jsx)(f.View,{className:"title-text",children:e.name}),(0,se.jsx)(f.Image,{className:"title-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/gray.png"})]}),(0,se.jsxs)(f.View,{className:"re-desc",children:[(0,se.jsx)(f.Image,{className:"desc-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/mark.png"}),(0,se.jsx)(f.View,{className:"desc-text",children:e.recommendedWords})]})]}),(0,se.jsx)(f.View,{className:"re-num",children:e.guideDesc})]}),(0,se.jsxs)(f.View,{className:"item-right",children:[(0,se.jsx)(f.Image,{className:"img",src:i}),(0,se.jsx)(f.Image,{className:"img-bg"})]})]})})),(0,u.Z)((0,l.Z)(o),"swiperChange",(function(e){var t,i=e.detail.current;if(!o.hasExposeIdx.includes(i)){o.hasExposeIdx.push(i);var s=(null===(t=o.state.dataList)||void 0===t?void 0:t[i])||{},a={type:null===s||void 0===s?void 0:s.cardType};2==s.cardType?a.topicid=s.themeId:3==s.cardType?a.theme=s.name:4==s.cardType&&(a.districtid=s.districtid,a.producttype=s.type),o.props.ubtTrace&&o.props.ubtTrace("o_gs_tripshoot_detail_relatedgroup_expose",a),console.log("aaa",a)}})),o.hasExposeIdx=[],o.state={dataList:[],title:""},o}return(0,c.Z)(i,[{key:"componentDidMount",value:function(){this._getList()}},{key:"render",value:function(){var e=this,t=this.state.dataList,i=null;return t&&0!=(null===t||void 0===t?void 0:t.length)?(1===t.length&&(i=t[0]),(0,se.jsx)(m.Fragment,{children:(0,se.jsxs)(f.View,{className:"recommend-list",children:[(0,se.jsx)(f.View,{className:"title",children:this.state.title}),(0,se.jsxs)(f.View,{className:"content-list",children:[i&&(0,se.jsx)(f.View,{className:"single-item",children:this._renderItem(i)}),!i&&(0,se.jsx)(f.Swiper,{onChange:this.swiperChange,className:"swiper-list",circular:!1,snapToEdge:!0,nextMargin:"60",children:t.map((function(t){return(0,se.jsx)(f.SwiperItem,{style:{width:300},className:"swiper-item",children:e._renderItem(t)},t.themeId)}))})]})]})})):null}}]),i}(m.Component),Ve=(0,c.Z)((function e(){(0,r.Z)(this,e)}));function Pe(e){var t;return 3==e||4==e?t="https://pages.c-ctrip.com/you/user/careful_chosen.png":2==e&&(t="https://pages.c-ctrip.com/you/user/high_grade.png"),t}function Ae(e){var t=Math.floor(e/100);return t>20?t=20:t>10&&t<20&&(t=10),t?"https://pages.c-ctrip.com/livestream/tripshoot/zan_"+t+"00.png":""}function Re(e){var t=Math.floor(e/100);return 1==t?"86px":t>1&&t<10?"96px":"122px"}(0,u.Z)(Ve,"formatDistrictPoiInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o={};if(e&&e.length>0){var s=e.length,a="",r={};if(t&&t.length>0)if("district"===i){var c=t.find((function(t){return 4===t.poiType&&t.poiName===e[0]}));a=(null===c||void 0===c?void 0:c.poiExt)||{},r={districtId:(null===c||void 0===c?void 0:c.districtId)||"",businessId:(null===c||void 0===c?void 0:c.businessId)||""}}else if("poi"===i){var l=t.find((function(t){return 4!==t.poiType&&t.poiName===e[0]}));a=(null===l||void 0===l?void 0:l.poiExt)||{},r={poiId:(null===l||void 0===l?void 0:l.poiId)||"",poiType:(null===l||void 0===l?void 0:l.poiType)||"",businessId:(null===l||void 0===l?void 0:l.businessId)||""}}o=(0,n.Z)({poiName:e[0],tagType:i,poiExt:a||{}},r),s>1&&(o=(0,n.Z)((0,n.Z)({},o),{},{rightText:"\u7b49(".concat(s,")"),count:s,pressType:(i+"popup").toLowerCase()}))}return o}));var He={formateNum:k.Z.formateNum,assembleEmojiObj:f.assembleEmojiObj,labelUrl:Pe,getZanImgUrl:Ae,getZanImgWidth:Re},De=i(641),Fe=(i(99466),i(32180)["document"]),Ee=i(32180)["window"],Ue=_().getApp();var Me=function(){return"10650013077"},Oe=new C,Be="pocketguide",We=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var o;return(0,r.Z)(this,i),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"renderTDKFinal",(function(e){var t,i;if(null!==e&&void 0!==e&&e.author){var s=(null===(t=e.pois)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.poiName)||"",a=null===(i=e.content)||void 0===i?void 0:i.replace(/<ctag.*?>(.*?)<\/ctag>/g,"$1").replace(/<poi.*?>(.*?)<\/poi>/g,"$1").replace(/\r|\n/gi,""),n=e.title?"".concat(s,"-").concat(e.title,"-\u643a\u7a0b\u653b\u7565"):(a||"").slice(0,32),r=(a||"").slice(0,75),c="".concat(s,"\u653b\u7565,").concat(s,"\u65c5\u62cd\u7b14\u8bb0");o.setTDK({title:n,keywords:c,description:r})}})),(0,u.Z)((0,l.Z)(o),"onPageScroll",(function(e){var t=(0,l.Z)(o),i=t.state.listOffsetTop,s=!1,a=e.scrollTop,n=t.state.navigationBarTitle,r=t.state.relevantList,c=(t.state.topics,t.state.showRelevantList),d=t.state.navbarData;t.scrollTop=a,!r||r.length<=0||t.isFullScreen||!c||(a>i&&"\u76f8\u5173\u7b14\u8bb0"!==d.title&&("\u76f8\u5173\u7b14\u8bb0",s=!1,d.title="\u76f8\u5173\u7b14\u8bb0",t.setState({showHeader:s,navbarData:d})),a<=i&&"\u643a\u7a0b\u793e\u533a"!==d.title&&(n,s=!0,d.title="\u643a\u7a0b\u793e\u533a",t.setState({showHeader:s,navbarData:d})),t.windowHeight&&a+t.windowHeight-o.state.showHeaderTop>i&&!t.pushContentShow&&!t.isRejectSubscribeMsg&&t.canShowSubscribeMsg&&"B"==t.subscribeAB&&!o.pushContentShow&&t.handleSubscribe("get",(function(){t.handleFollowOrSubscribe()})))})),(0,u.Z)((0,l.Z)(o),"getmoduleListSearch",(function(){var e=(0,l.Z)(o),t={lat:0,locationDistrictId:0,lon:0,pageCode:"task_wx_article"};oe.moduleListSearch(t,(function(t){if(k.Z.checkResponseAck(t)&&t.data.result.length>0){e.floatCurrent=0;var i="";try{i=t.data.result[0].headResourceItems[0].mainWxUrl}catch(e){console.info(e)}e.setState({moduleList:t.data.result[0].resourceItems.filter((function(e){return e.visible})),mainWxUrl:i},(function(){e.handleFloatStatus()}))}}))})),(0,u.Z)((0,l.Z)(o),"handleFloatStatus",(function(){var e=_().getStorageSync("float_close_time"),t=_().getStorageSync("float_last_show_time"),i=k.Z.formateData(new Date),s=!1;e?new Date(i).getTime()-new Date(e).getTime()>=2592e6?(s=!0,_().removeStorageSync("float_close_time")):s=!1:s=!0;var a=!1;if(t?new Date(i).getTime()-new Date(t).getTime()>=2592e5?(a=!0,_().setStorageSync("float_last_show_time",new Date(i).getTime())):a=!1:(a=!0,_().setStorageSync("float_last_show_time",new Date(i).getTime())),s=s&&a,s&&o.state.moduleList&&o.state.moduleList.length>0){var n=o.state.moduleList[0];o.ubtTrace("o_gs_tripshoot_community_detail_float_expose",{floatId:n.id,floatName:n.title})}o.options._mktTaskActivityId&&(s=!1),o.setState({closefloatingwindow:s})})),(0,u.Z)((0,l.Z)(o),"handleFloatChange",(function(e){o.floatCurrent=e.detail.current})),(0,u.Z)((0,l.Z)(o),"floatJump",(function(e,t){o.ubtTrace("c_gs_tripshoot_community_detail_float_click",{floatId:t.id,floatName:t.title});var i=t.mainWxUrl;if(i)if(i.startsWith("https")){var s={url:encodeURIComponent(i),needLogin:!0,isNavigate:!0};k.Z.jumpToWebview(s)}else i.indexOf("pages/")>-1&&h.cwx.navigateTo({url:i})})),(0,u.Z)((0,l.Z)(o),"closewindow",(function(){_().setStorageSync("float_close_time",k.Z.formateData(new Date));var e=o.state.moduleList[o.floatCurrent||0];o.ubtTrace("c_gs_tripshoot_community_detail_float_close",{floatId:e.id,floatName:e.title}),o.setState({closefloatingwindow:!1})})),(0,u.Z)((0,l.Z)(o),"_renderFloatWindow",(function(){var e=o.state,t=e.closefloatingwindow,i=e.moduleList;return i.length>0&&t?(0,se.jsxs)(f.View,{className:"floating-window",children:[(0,se.jsx)(f.Swiper,{className:"floating-window-swiper",onChange:o.handleFloatChange,autoplay:!0,interval:3e3,circular:i.length>1,children:i.map((function(e,t){return(0,se.jsx)(f.SwiperItem,{children:(0,se.jsx)(f.Image,{className:"img",onClick:function(t){return o.floatJump(t,e)},src:e.coverImageUrl,mode:"aspectFit"})},t)}))}),(0,se.jsx)(f.View,{className:"detail-close",onClick:o.closewindow,bindtap:"closewindow",children:(0,se.jsx)(f.Image,{className:"close-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/detail-close.png"})})]}):null})),(0,u.Z)((0,l.Z)(o),"_renderCodeCommandModal",(function(){return o.state.showCodeCommandModal?(0,se.jsx)(f.View,{className:"codCommand-modal",children:(0,se.jsxs)(f.View,{className:"content",children:[(0,se.jsx)(f.Image,{className:"content-img download_pop_img",onClick:function(){return o.ubtTrace("c_gs_tripshoot_detail_couponPopup",{})},src:o.state.codeCommandModalImg}),(0,se.jsx)(f.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/codeCommandClose.svg",className:"close-img",onClick:function(){o.setState({showCodeCommandModal:!1});var e=Fe.querySelector(".paipai-detail");e.style.overflow=null}})]})}):null})),(0,u.Z)((0,l.Z)(o),"_openCtrip",(function(e){var t=o.state.hasVideo,i=Ee.location.origin+"/webapp/you/lvpai-taro/detail?isHideNavBar=YES&seo=0&articleId="+o.options.articleId+"&hasVideo="+(t?"1":"0");switch(k.Z.openCtripUrl({url:i}),e){case"media":o.ubtTrace("c_gs_tripshoot_detail_picture_openapp",{articleId:o.options.articleId});break;case"seeAll":o.ubtTrace("c_gs_tripshoot_detail_articel_all",{articleId:o.options.articleId});break;case"comment":o.ubtTrace("c_gs_tripshoot_detail_comment_openapp",{articleId:o.options.articleId});break;default:break}})),(0,u.Z)((0,l.Z)(o),"_renderOpenBtn",(function(){return(0,se.jsxs)(f.View,{className:"open_btn_content",children:[(0,se.jsxs)(f.View,{className:"btn_item",children:[(0,se.jsx)(f.Image,{className:"open_icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/wxlogo.png"}),(0,se.jsx)(f.View,{className:"open_text",children:"\u5c0f\u7a0b\u5e8f\u6253\u5f00"}),(0,se.jsx)("wx-open-launch-weapp",{id:"launch-btn",username:"gh_36ada103ba97",path:"pages/you/lvpai/detail/detail?articleId=".concat(o.options.articleId),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,se.jsx)("script",{type:"text/wxtag-template",children:(0,se.jsx)(f.View,{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}})})})]}),(0,se.jsxs)(f.View,{className:"btn_item mgL12",onClick:o._openCtrip,children:[(0,se.jsx)(f.Image,{className:"open_icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/triplogo.png"}),(0,se.jsx)(f.View,{className:"open_text",children:"App\u5185\u6253\u5f00"})]})]})})),(0,u.Z)((0,l.Z)(o),"randomComment",(function(){var e=(0,l.Z)(o),t={lat:0,locationDistrictId:0,lon:0,pageCode:"comment_placeholder"};oe.moduleListSearch(t,(function(t){if(k.Z.checkResponseAck(t)&&t.data.result.length>0){var i=0,o="",s=[];t.data.result[0].resourceItems.forEach((function(e,t){s.push(e.content)})),s.length>0&&(i=parseInt(s.length*Math.random()),o=s[i],e.radomCommentNotice=o,e.setState({commentNoticeItemSimple:o.length>7?o.substring(0,7)+"...":o}))}}))})),(0,u.Z)((0,l.Z)(o),"requestGetShareImage",(function(){var e=(0,l.Z)(o),t={businessId:o.articleId,imageType:"tripShootShareImg",sourceType:o.state.sourceType};oe.requestGetShareImage(t,(function(t){if(k.Z.checkResponseAck(t)){var i=t.data;i.imageUrl&&e.setState({shareimageUrl:t.data.imageUrl})}}))})),(0,u.Z)((0,l.Z)(o),"handleFollowOrSubscribe",(function(e){console.log("handleFollowOrSubscribe",o.scrollTop,o.state.listOffsetTop);var t={};if(o.isRejectSubscribeMsg||!o.canShowSubscribeMsg||"B"!==o.subscribeAB||o.state.isHost||o.scrollTop<0||o.state.listOffsetTop<=0)return o.pushContentShow=!1,t.show=!1,void o.setState({pushContent:t});(o.scrollTop+o.windowHeight-o.state.showHeaderTop>o.state.listOffsetTop||e)&&(t=o.state.isFollow?{show:!0,title:"\u5f00\u542f\u4e00\u6b21\u63d0\u9192\u901a\u77e5\uff01",type:"subscribe",btnText:"\u5f00\u542f"}:{show:!0,title:"\u559c\u6b22\u5c31\u5173\u6ce8\u4f5c\u8005\u5427\uff01",type:"follow",btnText:"\u5173\u6ce8"},o.pushContentShow=!0,o.setState({pushContent:t}))})),(0,u.Z)((0,l.Z)(o),"handleSubscribe",(function(e,t){if(console.log("handleSubscribe",o.state.isHost),"B"!==o.subscribeAB||o.state.isHost)return o.canShowSubscribeMsg=!1,void(t&&t());var i=(new Date).getTime(),s=_().getStorageSync("LP_DETAIL_SUBSCRIBEINFO")||"",a=[],n=(0,l.Z)(o);if(s&&s.length&&(a=JSON.parse(s)),console.log("handleSubscribe00",s,a),console.log("handleSubscribe001",n.state.author.clientAuth),"set"==e){var r=!1;a&&a.length&&a.map((function(e,t){e.clientAuth==n.state.author.clientAuth&&(r=!0,e.time=i)})),r||a.push({clientAuth:n.state.author.clientAuth,time:i}),_().setStorage({key:"LP_DETAIL_SUBSCRIBEINFO",data:JSON.stringify(a)}),n.canShowSubscribeMsg=!1}else if("get"==e){var c=_().getStorageSync("LP_DETAIL_SUBSCRIBEREJECT");if(c&&i-c<=864e5)return n.isRejectSubscribeMsg=!0,console.log("handleSubscribeReject",n.isRejectSubscribeMsg,c),void(t&&t());if(n.isRejectSubscribeMsg=!1,!n.state.author.clientAuth)return void(t&&t());if(a&&a.length){var d=!1;a.map((function(e,t){e.clientAuth==n.state.author.clientAuth&&(d=!0,i-e.time>864e5&&(n.canShowSubscribeMsg=!0,console.log("handleSubscribe12",n.canShowSubscribeMsg)))})),d||(n.canShowSubscribeMsg=!0,console.log("handleSubscribe13",n.canShowSubscribeMsg,n.state.author))}else n.canShowSubscribeMsg=!0,console.log("handleSubscribe14",n.canShowSubscribeMsg);console.log("handleSubscribe",n.isRejectSubscribeMsg,n.canShowSubscribeMsg,a),t&&t()}})),(0,u.Z)((0,l.Z)(o),"subscribeMsg",(function(){var e=!1,t=(0,l.Z)(o);console.log("subscribeMsg0",o.isRejectSubscribeMsg,o.canShowSubscribeMsg),!o.isRejectSubscribeMsg&&o.canShowSubscribeMsg&&"B"===o.subscribeAB&&(t.ubtTrace(134404,{actioncode:"o_gs_tripshoot_detail_push"}),_().requestSubscribeMessage({tmplIds:o.templateIdList,success:function(i){if(console.log("subscribeMsg1",i),"requestSubscribeMessage:ok"==i.errMsg){for(var o in i)"accept"==i[o]?(e=!0,t.ubtTrace(134405,{actioncode:"o_gs_tripshoot_detail_push_accept"})):"reject"==i[o]&&(t.ubtTrace(134407,{actioncode:"o_gs_tripshoot_detail_push_reject"}),_().setStorage({key:"LP_DETAIL_SUBSCRIBEREJECT",data:(new Date).getTime()}),t.isRejectSubscribeMsg=!0);e?(t.handleRequestSubScribe(),t.handleSubscribe("set")):console.log("\u8ba2\u9605\u4e0d\u6210\u529f")}else console.log("\u8ba2\u9605\u4e0d\u6210\u529f");t.hidePushContent()}}))})),(0,u.Z)((0,l.Z)(o),"handleRequestSubScribe",(function(){var e=o.state.author.clientAuth,t=o.cwx.cwx_mkt.openid,i={};i={clientAuth:e,openID:t},console.log("submitUserSubscribeTimesquest",i),oe.submitUserSubscribeTimes(i,(function(e){console.log("submitUserSubscribeTimes",e)}),(function(e){console.log("submitUserSubscribeTimeserr",e)}))})),(0,u.Z)((0,l.Z)(o),"hidePushContent",(function(){var e=o.state.pushContent;e.show=!1,o.setState({pushContent:e}),o.pushContentShow=!1})),(0,u.Z)((0,l.Z)(o),"quickReplyList",(function(){var e=(0,l.Z)(o),t=[],i=0,s={},a=!1;s={articleId:o.articleId,para:{pageIndex:1,pageSize:5,sortType:0},isContentEncode:!1,displayType:2,showCommentCount:!0,needHotelComment:!0,sortDirection:0,excludeCommentIds:[],levels:[0]},(0,f.ruleSortCommentList)(s,(function(s){if(k.Z.checkResponseAck(s)&&s.data.commentPhrases&&s.data.commentPhrases.length>0){t=s.data.comments,i=s.data.sceneTotalCount;var n=s.data.commentPhrases;i>5&&(a=!0);var r=s.data.hotelComment;if(r){var c,l;if(!o.hasExposeHotelComment)o.hasExposeHotelComment=!0,o.ubtTrace("o_gs_tripshoot_detail_hotelcomment",{articleId:o.articleId,poiID:null===r||void 0===r||null===(c=r.poiInfo)||void 0===c?void 0:c.poiId,commentId:r.commentId}),console.log("o_gs_tripshoot_detail_hotelcomment",{articleId:o.articleId,poiID:null===r||void 0===r||null===(l=r.poiInfo)||void 0===l?void 0:l.poiId,commentId:r.commentId});r.isHotelComment=!0}o.setState({replyList:n,replyListCopy:n,commentList:t,commentCount:i,showCommentListJump:a,hotelComment:r},(function(){e.firstObserveTimer=setInterval((function(){e.state.showDetail&&(clearInterval(e.firstObserveTimer),e.firstObserveTimer=null,e.observerQuickItem("common")),e.state.showError&&(clearInterval(e.firstObserveTimer),e.firstObserveTimer=null)}),100),e.getListOffsetTop()}))}}))})),(0,u.Z)((0,l.Z)(o),"getListOffsetTop",(function(){var e=(0,l.Z)(o),t=_().createSelectorQuery(),i=e.state.relevantList,s=e.state.showDetail,a=e.state.showRelevantList,n=0,r=e.state.showHeaderTop;s&&i&&0!=i.length&&i&&i.length&&a&&_().createSelectorQuery().selectViewport().scrollOffset((function(i){i&&(n=i.scrollTop||0,t.select("#relevant-list").boundingClientRect(),t.exec((function(t){var i=0;t&&t.length&&t[0]&&(i=t[0].top);var o=n+i;o-=r,e.setState({listOffsetTop:o})})))})).exec()})),(0,u.Z)((0,l.Z)(o),"observerQuickItem",(function(e){var t=(0,l.Z)(o);"common"!=e||t._observer||(t._observer=_().createIntersectionObserver(t,{observeAll:!0}),t._observer.relativeToViewport({bottom:0,top:0}).observe(".quickReplyObserverOne",(function(e){console.log(e);var i=e.dataset,o=i.idx,s=i.target;i.item;if(!t["".concat(s,"Export")][o]){t["".concat(s,"Export")][o]=!0;var a="";"replyList"==s&&(a="o_gs_tripshoot_detail_articlecomments_moduleReply"),"replyListCopy"==s&&(a="o_gs_tripshoot_detail_keyboardReply"),t.ubtTrace(a,{articleId:t.state.articleId}),console.log(a,{articleId:t.state.articleId},111)}}))),"fixed"!=e||t._observerTwo||(t._observerTwo=_().createIntersectionObserver(t,{observeAll:!0}),t._observerTwo.relativeToViewport({bottom:0,top:0}).observe(".quickReplyObserverTwo",(function(e){console.log(e);var i=e.dataset,o=i.idx,s=i.target;if(!t["".concat(s,"Export")][o]){t["".concat(s,"Export")][o]=!0;var a="";"replyList"==s&&(a="o_gs_tripshoot_detail_articlecomments_moduleReply"),"replyListCopy"==s&&(a="o_gs_tripshoot_detail_keyboardReply"),t.ubtTrace(a,{articleId:t.state.articleId}),console.log(a,{articleId:t.state.articleId},222)}})))})),(0,u.Z)((0,l.Z)(o),"getRelatedRecommend",(function(){var e=(0,l.Z)(o),t=o.articleId,i={},s=[];i={articleId:t},oe.relatedRecommend(i,(function(t){if(k.Z.checkResponseAck(t)&&!t.data.result){var i=t.data.recommendArticles;if(i&&i.length){var o=[];i.forEach((function(e,t){var i,s,a,n,r={};r.articleId=e.articleId;var c={},l=(null===e||void 0===e||null===(i=e.images)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.dynamicUrl)||"";c.url=null===(s=(0,f.dynamicImageUrl)({imageUrl:l,height:853,width:640,ext:{}}))||void 0===s?void 0:s.dynamicUrl,c.width=(null===e||void 0===e||null===(a=e.images)||void 0===a?void 0:a[0].width)||"",c.height=(null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n[0].height)||"",r.image=c;var d={};d.nickName=e.author?e.author.nickName:"",d.vIcon=e.author?e.author.vIcon:"",d.avatUrl=e.author.coverImage?e.author.coverImage.dynamicUrl:"",d.identityType=!!e.author.identityType&&e.author.identityType,r.author=d,r.tag=e.topics&&e.topics[0]?e.topics[0].topicName:"",r.poiName=e.pois&&e.pois[0]?e.pois[0].poiName:"",r.title=e.articleTitle,r.praiseCount=e.likeCount,r.isVideo=e.hasVideo?e.hasVideo:"",r.isVip=e.author.isVip?e.author.isVip:"",r.isLike=e.isLike,r.itemIndex=t,r.urls=e.urls,r.sourceInfo=e.sourceInfo,r.feedsArticleType=e.feedsArticleType,r.ext=e.ext,r.productType=e.sourceInfo===Be?Be:e.hasVideo?"CTP":"LVP",o.push(r)})),s=o}e.setState({relevantList:s},(function(){e.getWaterFallList()}))}}))})),(0,u.Z)((0,l.Z)(o),"getWarterFallPicHeight",(function(e,t){var i=0,o=0;return i=e>600?600:e<300?300:e,o=i+(t?0:134),o})),(0,u.Z)((0,l.Z)(o),"getWaterFallList",(function(){var e=(0,l.Z)(o),t=e.state.relevantList,i=[],s=[],a=0,r=0,c=341,d=300,p=[];t.forEach((function(e,t){var i,s;p.push(e);var a=_().getSystemInfoSync(),r=(a.windowWidth-24)/2-8,c={type:"ad",impId:"",image:{width:r,height:4*r/3},width:r,height:4*r/3,extension:[{name:"articleId",value:o.articleId},{name:"clientAuth",value:null===(i=o.state)||void 0===i||null===(i=i.author)||void 0===i?void 0:i.clientAuth},{name:"tag",value:null===(s=o.state)||void 0===s?void 0:s.tags}]};2==t&&p.push((0,n.Z)((0,n.Z)({},c),{},{impId:"01011TUOYRH01156BJOVLSBPUYLF"}))})),t=p,t.forEach((function(t){t.image.width||(t.image.width=c),t.image.height||(t.image.height=c);var o=c/t.image.width*t.image.height;o=parseInt(o),t.image.picWidth=c,t.image.picHeight=o,o<d&&(t.image.picHeight=d),a<=r?(i.push(t),a+=e.getWarterFallPicHeight(o,"ad"==t.type)):(s.push(t),r+=e.getWarterFallPicHeight(o,"ad"==t.type))})),e.setState({waterfallLeftList:i,waterfallRightList:s},(function(){e.getListOffsetTop()}))})),(0,u.Z)((0,l.Z)(o),"getOpenId",(function(){var e,t=(0,l.Z)(o),i="",s={},a=60;e=setInterval((function(){if(a--,a<0)clearInterval(e),console.log("\u6ca1\u6709\u83b7\u53d6\u5230 cwx.cwx_mkt.openid"),t.getTripShoot();else if(t.cwx.cwx_mkt.openid){console.log("\u5b9a\u65f6\u5668\u6a21\u5f0f"),clearInterval(e);var o=t.cwx.cwx_mkt.openid||"";s={code:o,appId:"wx0e6ed4f51db9d078"},oe.getWechatAppOpenID(s,(function(e){k.Z.checkResponseAck(e)?(i=e.data.openId,_().setStorage({key:"LP_DETAIL_OPENID",data:i}),t.setState({openId:i||""},(function(){t.getTripShoot()}))):t.getTripShoot()}))}}),100)})),(0,u.Z)((0,l.Z)(o),"renderPoiIcon",(function(e){var t="",i="https://pages.c-ctrip.com/you/livestream/";return t=1==e||50==e?i+"lvpai_detail_poihotel.png":2==e?i+"lvpai_detail_poifood.png":3==e?i+"lvpai_detail_poiscenic.png":5==e?i+"lvpai_detail_poishop.png":7==e?i+"lvpai_detail_poiairport.png":8==e?i+"lvpai_detail_poiport.png":9==e?i+"lvpai_detail_poitrain.png":10==e?i+"lvpai_detail_poibus.png":i+"lvpai_detail_destination.png",t})),(0,u.Z)((0,l.Z)(o),"modifyDetailInfo",(function(e){var t,i,o,s,a,r,c,l,d,p,u,m,h,g,f,v,w,_,x,I,T,y,b,k,C,S,j,Z,N,L,V,P;return e?{articleStatus:null===(t=e.summary)||void 0===t?void 0:t.articleStatus,title:(null===(i=e.summary)||void 0===i?void 0:i.title)||"",content:null===(o=e.summary)||void 0===o?void 0:o.content,isHost:null===(s=e.summary)||void 0===s?void 0:s.isHost,level:null===(a=e.summary)||void 0===a?void 0:a.level,ipLocatedName:null===(r=e.summary)||void 0===r?void 0:r.location,productType:null===(c=e.summary)||void 0===c?void 0:c.productType,publishStatus:null===(l=e.summary)||void 0===l?void 0:l.publishStatus,sourceType:null===(d=e.summary)||void 0===d?void 0:d.sourceType,publishTimeDisplay:null===(p=e.summary)||void 0===p?void 0:p.publishDisplayTime,shootTimeDisplay:null===(u=e.summary)||void 0===u?void 0:u.shootDisplayTime,firstPublishTimeDisplay:null===(m=e.summary)||void 0===m?void 0:m.firstPublishDisplayTime,topics:e.topics,loginUserClientAuth:null===(h=e.loginUser)||void 0===h?void 0:h.clientAuth,commentScore:null===(g=e.comment)||void 0===g?void 0:g.score,ruleExplain:null===(f=e.comment)||void 0===f?void 0:f.ruleExplain,author:(0,n.Z)((0,n.Z)({},e.author),{},{userTags:(null===(v=e.author)||void 0===v?void 0:v.tags)||[]}),isFollow:null===(w=e.author)||void 0===w?void 0:w.isFollowed,followStatus:null===(_=e.author)||void 0===_?void 0:_.followStatus,likeCount:null===(x=e.stats)||void 0===x?void 0:x.likeCount,isLike:null===(I=e.stats)||void 0===I?void 0:I.isLiked,isCollected:null===(T=e.stats)||void 0===T?void 0:T.isCollected,collectCount:null===(y=e.stats)||void 0===y?void 0:y.collectCount,userInfo:{nickName:"",headPhoto:null===(b=e.loginUser)||void 0===b||null===(b=b.avatar)||void 0===b?void 0:b.url,needAuth:null===(k=e.loginUser)||void 0===k||null===(k=k.avatar)||void 0===k?void 0:k.needAuth,clientAuth:null===(C=e.loginUser)||void 0===C?void 0:C.clientAuth,identityType:null===(S=e.loginUser)||void 0===S?void 0:S.identityType,identityTypeName:null===(j=e.loginUser)||void 0===j?void 0:j.identityName},likeInfo:{userLikes:((null===e||void 0===e?void 0:e.likes)||[]).map((function(e){var t,i;return{nickName:"",headPhoto:null===(t=e.avatar)||void 0===t?void 0:t.url,needAuth:null===(i=e.avatar)||void 0===i?void 0:i.needAuth,clientAuth:e.clientAuth,identityType:e.identityType,identityTypeName:e.identityName}})),totalLikeCount:null===(Z=e.stats)||void 0===Z?void 0:Z.likeCount,followNum:0,userFollows:[]},shareInfo:{imageUrl:null===(N=e.shareInfo)||void 0===N?void 0:N.imageUrl,shareTitle:null===(L=e.shareInfo)||void 0===L?void 0:L.title,shareContent:null===(V=e.shareInfo)||void 0===V?void 0:V.title,clientAuth:null===(P=e.shareInfo)||void 0===P?void 0:P.token},pois:(e.pois||[]).map((function(e){return{poiId:e.id,poiType:e.poiType,poiName:e.name,businessId:e.businessId,districtId:e.districtId,poiExt:e.urls}})),districtPois:e.districtPoiCollect||{},images:(e.images||[]).map((function(e){return{width:e.width,height:e.height,needAuth:e.needAuth,dynamicUrl:e.url,imageId:e.id}})),videos:(e.videos||[]).map((function(e){var t;return{width:e.width,height:e.height,videoId:e.id,vendorType:"",size:e.size,videoUrl:e.url,needAuth:e.needAuth,coverImageUrl:null===(t=e.coverImage)||void 0===t?void 0:t.url}})),attentionTips:e.attentionTips,foucsTips:e.foucsTips,eventRank:e.eventRank}:{articleStatus:3}})),(0,u.Z)((0,l.Z)(o),"showGuide",(function(){var e=setTimeout((function(){clearTimeout(e),o.state.isFollow||o.setState({showAttentionGuide:!0},(function(){setTimeout((function(){o.setState({showAttentionGuide:!1})}),5e3)}))}),1e4)})),(0,u.Z)((0,l.Z)(o),"weixinShare",(function(e){var t=o.initShareData(e);t&&k.Z.WeixinTwiceShare(t.title,t.content,t.shareUrl,t.shareImg)})),(0,u.Z)((0,l.Z)(o),"initShareData",(function(e){if(void 0!=e&&void 0!=e.shareInfo){var t=e.shareInfo,i=t.shareTitle,o=t.shareContent?t.shareContent:t.shareTitle,s=t.imageUrl,a=Ee.location.href,n={title:i,content:o,shareImg:s,shareUrl:a};return n}})),(0,u.Z)((0,l.Z)(o),"getTripShoot",(function(){var e=(0,l.Z)(o),t={},i=e.state.clientAuth,s=e.state.clientToken,a=e.state.articleId,n={},r="",c="",d=[],p=[],u=[],m=0,h=!1,g=0,f={},v=[],w={},x="",I="",T="",y=!1,b=!1,C={readCount:0,score:0},S=e.state.userInfo,j=!1,Z=!1,N=!1,L="",V=e.state.shareFlag,P=!1,R="",H=0,D={},F=!0,E=0,U=0,M=null,O="",B="",W=0,G=!1;t={action:"get",articleId:a,needParts:["CONTENT","AUTHOR","FOLLOW_STATUS","STAT_FOLLOW_COUNT","SHARE_INFO","STATS","ORDER_LOCK","GRUPPE","POI","ALBUM","RANK","ADVERTISE_CUSTOMER","TOPIC","LIKE","LOGIN_USER","IMAGE_POI","COMMENT","LOGIN_USER","TRAVEL","ATTENTION_TIPS","EVENT_RANK","DISTRICT_POI_COLLECT"],sharer:{clientAuth:i,token:s}},e.ubtTrace("c_gs_pc_windows_getTripShoot",{}),oe.tripShoot(t,(function(i){if(console.log("tripShoot",t),e.ubtTrace("o_gs_tripshoot_detail_tripshootRequest",{articleId:a,requestParam:JSON.stringify(t)}),k.Z.checkResponseAck(i)&&!i.data.result){e.ubtTrace("c_gs_pc_windows_tripShoot_success",{data:i.data.travelDto});var o=i.data,s=e.modifyDetailInfo(o.article),l=[],J="";if(e.isWeixin&&e.weixinShare(s),R=s.loginUserClientAuth||"",null!==s&&void 0!==s&&s.isHost||s&&2==s.articleStatus){var q,z;e.renderTDKFinal(s),c=s.title,c&&(c='<span style="font-weight: 600;">'.concat(c.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"</span><br>")),J=Oe.personalizedLabel(s),U=s.sourceType,M=s.travelDto,r=(s.content||"").replace(/<br>/g,"\n").replace(/<(?!ctag\b|poi\b|\/ctag>|\/poi>)/g,"&lt;").replace(/\n/g,"<br>"),r=c+(r||"");var Q="height: ".concat(e.rpxToPx(38),"; vertical-align: text-bottom; ");console.log("before processCemojiText+++++++++++++"),A(r,Q,(function(t){console.log("processCemojiText+++++++++++++"),e.setState({sortedActicleContent:Oe.sortArticleContent(t,a,e)},(function(){e.cardTimer=setInterval((function(){e.hasInt||(e.contentHasShow&&(e.hasInt=!0,clearInterval(e.cardTimer),e.cardTimer=null,console.log("~~~~~~cardTimer"),setTimeout((function(){e.initContent()}),50)),e.state.showError&&(clearInterval(e.cardTimer),e.cardTimer=null))}),100)}))})),d=s.topics,h=s.isFollow,g=s.followStatus,m=s.likeCount,x=s.publishTimeDisplay,I=s.shootTimeDisplay||"",T=s.firstPublishTimeDisplay||"",n=s.author,G="true"==e.options.isStarPlanet||s.author.isStarAccount||1==s.styleType,y=s.activitySwitch,b=s.isHost,j=s.isLike,Z=s.isCollected||!1,P=s.isShareHost,S=s.userInfo||S,H=s.collectCount,D=s.likeInfo,E=s.level,O=s.sourceName||"",B=s.ipLocatedName||"",W=s.productType||0,e.showLikeInfo(D),s.shareInfo&&(L=s.shareInfo),p=s.pois,u=s.districtPois;var X=u||{},K=X.districtNames,Y=void 0===K?[]:K,$=X.poiNames,ee=void 0===$?[]:$;if((null===(q=Object.keys(u))||void 0===q?void 0:q.length)>0){var te,ie,oe=Ve.formatDistrictPoiInfo(Y,p,"district"),se=Ve.formatDistrictPoiInfo(ee,p,"poi");p=[],(null===(te=Object.keys(oe))||void 0===te?void 0:te.length)>0&&(p.push(oe),oe.pressType&&e.ubtTrace("o_gs_tripshoot_detail_multi_articledest",{articleId:a})),(null===(ie=Object.keys(se))||void 0===ie?void 0:ie.length)>0&&p.push(se)}else if(p&&p.length){var ae=!1,ne={},re=!1,ce={},le=[];p.forEach((function(t){4==t.poiType||ae||(ne=t,ae=!0,ne.poiIcon=e.renderPoiIcon(t.poiType),ne.poiExt.tripshootCount=k.Z.formateNum(t.poiExt.tripshootCount)),4!=t.poiType||re||(ce=t,re=!0,ce.poiIcon="https://pages.c-ctrip.com/you/livestream/lvpai_detail_destination.png",ce.poiExt.tripshootCount=k.Z.formateNum(t.poiExt.tripshootCount))})),ae&&le.push(ne),re&&le.unshift(ce),p=le}if(P&&o.shareRewardInfo&&(C.readCount=k.Z.formateNum(o.shareRewardInfo.readCount),C.score=k.Z.formateNum(o.shareRewardInfo.score)),v=s.images||[],w=s.videos[0]||null,N=!!w,P&&1==V&&y){var de=_().getStorageSync("LP_DETAIL_HOSTHINT")||[],pe=de.length,ue=!1;if(de&&de.length&&de.forEach((function(e,t){a==e&&(ue=!0)})),!ue&&C.score){if(10==pe)de=de.slice(1);else if(pe>10){var me=pe-9;de=de.slice(me)}de.push(a),_().setStorage({key:"LP_DETAIL_HOSTHINT",data:de}),e.setState({hideVideo:!0});var he="\u5df2\u6709"+C.readCount+"\u4f4d\u597d\u53cb\u770b\u4e86\u4f60\u7684\u5206\u4eab\n\u5e2e\u4f60\u8d5a\u4e86"+C.score+"\u79ef\u5206";_().showModal({content:he,cancelText:"\u597d\u7684",cancelColor:"#0099F7",confirmText:"\u7ee7\u7eed\u5206\u4eab",confirmColor:"#0099F7",success:function(t){t.confirm?e.setState({showSbg:!0,listScroll:!1}):t.cancel&&e.setState({hideVideo:!1})}})}}s.isTaskFinished&&(e.actionDailogRef&&e.actionDailogRef.show({type:"share",title:s.miniProgramTitle,desc:s.miniProgramDesc,score:s.score,userTaskId:s.userTaskId,taskId:s.taskId||"",taskName:s.taskName}),e.ubtTrace("o_gs_tripshoot_taskfeedback_expose",{taskid:s.taskId,taskname:s.taskName}));var ge,fe=!1;if(9==W&&s.ruleExplain&&b){var ve=_().getStorageSync("hotel_tips_close_".concat(a));ve||(fe=!0)}if(null!==s&&void 0!==s&&null!==(z=s.eventRank)&&void 0!==z&&z.relatedId)e.ubtTrace("o_gs_tripshoot_detail_trendbanner",{topicId:null===s||void 0===s||null===(ge=s.eventRank)||void 0===ge?void 0:ge.relatedId});e.setState({author:n,showStartAccountStyle:G,acticleTitle:c,acticleContent:r,acticleEmojiContent:{text:r.replace(/\n/g,"<br>"),wrapperStyle:"\n                font-size: ".concat(e.rpxToPx(34),";\n                color: #222;\n                line-height: ").concat(e.rpxToPx(52),";\n                font-family: PingFangSC-Regular;\n                text-align: justify;\n              "),cemojiStyle:"\n                height: ".concat(e.rpxToPx(38),";\n                vertical-align: text-bottom;\n              ")},topics:d,pois:p,tags:s.tags,eventRank:s.eventRank,isFollow:h,followStatus:g,likeCount:m,showLikeCount:k.Z.formateNum(m),publishTime:x,shootTimeDisplay:I,firstPublishTimeDisplay:T,showError:!1,activitySwitch:y,isHost:b,shareRewardInfo:C,isCollected:Z,isLike:j,shareInfo:L,isShareHost:P,newClientAuth:R,userInfo:S,collectCount:H,showCollectCount:k.Z.formateNum(H),hasGotFirstLikeScore:F,articleLevel:E,sourceName:O,ipLocatedName:B,productType:W,sourceType:U,travelDto:M,identityTags:l,individualTag:J,showDetail:!0,hasVideo:N,commentScore:s.commentScore,ruleExplain:s.ruleExplain,showHotelTips:fe},(function(){if(N?w&&w.videoUrl&&e.videoSwiperRef&&e.videoSwiperRef.setVideoInfo(w,P):v&&e.imageSwiperRef&&e.imageSwiperRef.setSwiperList(v),e.productCardRef&&e.productCardRef.getProductsList(),e.voteRef&&e.voteRef.getVoteInfo(),console.log("ishost",e.state.isHost),e.handleSubscribe("get",(function(){e.handleFollowOrSubscribe()})),!h){var t,i,o;null!==(t=s.foucsTips)&&void 0!==t&&t.showTips&&(e.hasAttentionTips=!0,e.authorHeaderRef&&e.authorHeaderRef.setAttentionTips({button:s.foucsTips.buttonUrl}));var a=_().getStorageSync("attention_tips_".concat(null===(i=n)||void 0===i?void 0:i.uid)),r=!a||Date.now()-a>6048e5;null!==s&&void 0!==s&&null!==(o=s.attentionTips)&&void 0!==o&&o.tips&&r&&(e.authorHeaderRef&&e.authorHeaderRef.showAttentionTips(s.attentionTips),e.hasAttentionTips=!0)}})),e.traceTimes(),_().hideLoading()}else _().hideLoading(),3!=s.articleStatus&&1!=s.articleStatus||(f={url:"https://pages.c-ctrip.com/you/livestream/lvpai_you_img2.png",text:1==s.articleStatus?"\u8fd9\u6761\u7b14\u8bb0\u5185\u5bb9\u6b63\u5728\u51c6\u5907\u4e2d\uff0c\u7a0d\u540e\u518d\u6765\u5466...":"\u54ce\u5440\uff0c\u6ca1\u6709\u627e\u5230\u4f60\u60f3\u770b\u7684\u8fd9\u6761\u7b14\u8bb0\u5462\u2026"}),e.setState({showError:!0,errorInfo:f,showDetail:!1})}else e.ubtTrace("o_gs_tripshoot_detail_tripshootError",{articleId:e.state.articleId,errMsg:JSON.stringify(i)}),_().hideLoading(),f={url:"https://pages.c-ctrip.com/you/livestream/lvpai_you_img2.png",text:"\u54ce\u5440\uff0c\u51fa\u9519\u5566"},e.setState({showError:!0,errorInfo:f,showDetail:!1})}))})),(0,u.Z)((0,l.Z)(o),"handleContentShow",(function(){o.contentHasShow=!0})),(0,u.Z)((0,l.Z)(o),"initContent",(function(){var e=(0,l.Z)(o),t=e.windowWidth,i=_().createSelectorQuery();_().nextTick((function(){i.select("#lv-content").boundingClientRect(),i.exec((function(i){var o=Oe.contentCollapse(i&&i.length&&i[0]&&i[0].height,t,e.state.collapseLineNumConfig,e.state.collapseConfig);e.setState({isFold:o.isFold&&"true"!=e.options.showContent,needFold:o.needFold,collapseLineNumConfigCopy:o.needFold&&"true"!=e.options.showContent?"10":"unset"},(function(){}))}))}))})),(0,u.Z)((0,l.Z)(o),"showLikeInfo",(function(e){var t=(0,l.Z)(o),i=[],s="",a="",n={},r=0,c=!1;r=686/78,r=parseInt(r),e?(i=e.userLikes,i.length>r&&(i=i.slice(0,r-1),c=!0),s=e.followNum,n=e.userFollows,n.forEach((function(e,t){t>0&&(a+="\uff0c"),a+=e.nickName}))):e={totalLikeCount:0,userLikes:[],followNum:0,userFollows:[]},t.setState({praiseFollowNum:s,praiseList:i.slice(0,6),praiseFollowName:a,showPraiseListMore:c,likeInfo:e})})),(0,u.Z)((0,l.Z)(o),"doTrack",(function(e){o.ubtTrace(e,{articleId:o.state.articleId}),console.log(e,JSON.stringify({articleId:o.state.articleId}))})),(0,u.Z)((0,l.Z)(o),"toLogin",(function(){var e=(0,l.Z)(o);o.cwx.user.login({callback:function(t){t&&0==t.ReturnCode&&(e.getTripShoot(),e.setState({isLogin:!0}))}})})),(0,u.Z)((0,l.Z)(o),"refreshAfterLogin",(function(){o.getTripShoot(),o.setState({isLogin:!0})})),(0,u.Z)((0,l.Z)(o),"jumpToCommentPosition",(function(e){var t=0,i=(0,l.Z)(o);_().createSelectorQuery().select(".comment").boundingClientRect((function(o){console.log("jumpToComment",o),t=o.top+i.scrollTop-i.state.showHeaderTop-60,_().pageScrollTo({scrollTop:t,duration:300,success:function(t){console.log("pageScrollTo success",t),e&&e()},fail:function(t){console.log("pageScrollTo fail",t),e&&e()}})})).exec()})),(0,u.Z)((0,l.Z)(o),"getActionInfo",(function(e,t,i,s){var a=(0,l.Z)(o),n={},r=a.state.likeCount,c="",d=!1,p=a.state.relevantList,u=a.state.collectCount,m=!1;"article"==t&&(i=i||a.state.articleId),n={action:e,targetId:i,targetType:t},(0,f.action)(n,(function(o){var l,h;if(console.log("action",n,o),"article"==t){if(k.Z.checkResponseAck(o,(function(){a.getTripShoot()})))if(null!==o&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&null!==(l=l.result)&&void 0!==l&&l.result)if("like"==e||"cancel_like"==e){var g="",v="";if("like"==e){if("relatedArticle"==s)p.forEach((function(e,t){i==e.articleId&&(e.isLike=!0,e.praiseCount++,e.showAnimation=!0)})),a.setState({relevantList:p},(function(){a.getWaterFallList()}));else{r+=1,d=!0;var w=a.state.likeInfo,x=w.userLikes,I=a.state.userInfo,T=[];T.push(I),x=T.concat(x),w.userLikes=x,a.showLikeInfo(w),a.setState({isLike:!a.state.isLike,praiseFlag:d,likeCount:r,showLikeCount:k.Z.formateNum(r),showFirstGotPraise:!1,isLiking:!0,showShareGuide:!0},(function(){setTimeout((function(){a.setState({showShareGuide:!1})}),5e3)}))}g="\u70b9\u8d5e\u6210\u529f",o.data.message&&(g=k.Z.base64Decode(o.data.message)),v=o.data.rewardInfo,v&&v.message&&(g=g+"\r\n"+v.message),o.data.isTaskFinished&&(a.actionDailogRef&&a.actionDailogRef.show({type:e,title:o.data.miniProgramTitle,desc:o.data.miniProgramDesc,score:o.data.rewardInfo.score,userTaskId:o.data.userTaskId||"",taskId:o.data.taskId||"",taskName:o.data.taskName}),a.ubtTrace("o_gs_tripshoot_taskfeedback_expose",{taskid:o.data.taskId,taskname:o.data.taskName})),setTimeout((function(){if(m){var e=v.message,t=o.data.message;a.showFirstPraiseJump(e,t)}else _().showToast({title:g,icon:"none"})}),750)}else if("relatedArticle"==s)p.forEach((function(e,t){i==e.articleId&&(e.isLike=!1,e.praiseCount--,e.showAnimation=!1)})),a.setState({relevantList:p},(function(){a.getWaterFallList()}));else{r-=1,d=!1;var y=a.state.likeInfo,b=y.userLikes,C=a.state.userInfo,S=-1,j=[];b.forEach((function(e,t){e.clientAuth!=C.clientAuth?j.push(e):S=t})),S>-1&&(y.userLikes=j,a.showLikeInfo(y)),a.setState({isLike:!a.state.isLike,praiseFlag:d,likeCount:r,showLikeCount:k.Z.formateNum(r),showFirstGotPraise:!1,isLiking:!1})}}else"share"==e||"collect"==e&&(u++,a.setState({isCollected:!0,collectFlag:!0,collectCount:u,showCollectCount:k.Z.formateNum(u),showShareGuide:!0},(function(){setTimeout((function(){a.setState({showShareGuide:!1})}),5e3)})),_().showToast({title:"\u6536\u85cf\u6210\u529f",icon:"none"}));else"like"==e?c="\u70b9\u8d5e\u5931\u8d25":"collect"==e?c="\u6536\u85cf\u5931\u8d25":"cancel_like"==e&&(c="\u53d6\u6d88\u70b9\u8d5e\u5931\u8d25"),_().showToast({title:c,icon:"none"})}else if(k.Z.checkResponseAck(o))if(null!==o&&void 0!==o&&null!==(h=o.data)&&void 0!==h&&null!==(h=h.result)&&void 0!==h&&h.result){if("like"==e||"cancel_like"==e){a.commentListModalRef&&a.commentListModalRef.refreshComment(i,a.topCommentId);var Z="",N="";"like"==e?(Z="\u70b9\u8d5e\u6210\u529f",N=o.data.rewardInfo,N&&N.message&&(Z=Z+" "+N.message),setTimeout((function(){_().showToast({title:Z,icon:"none"})}),750)):Z="\u5df2\u53d6\u6d88\u70b9\u8d5e";var L=(0,f.handleDataAfterCommentPraise)(a.state.commentList,i,a.topCommentId);a.setState({commentList:L}),a.topCommentId=""}}else"like"==e?_().showToast({title:"\u70b9\u8d5e\u5931\u8d25",icon:"none"}):"cancel_like"==e&&_().showToast({title:"\u53d6\u6d88\u70b9\u8d5e\u5931\u8d25",icon:"none"})}))})),(0,u.Z)((0,l.Z)(o),"toAttention",(function(e){var t=(0,l.Z)(o),i=o.cwx.user.isLogin(),s=t.state.author.clientAuth,a={},n=0,r="",c=t.state.isFollow,d=0;i?c||(t.ubtTrace("c_gs_tripshoot_detail_followauthor",{articleId:t.state.articleId,authorId:t.state.author.clientAuth}),a={friendClientAuth:s},oe.attention(a,(function(i){var o;if((console.log("attention",i),k.Z.checkResponseAck(i,(function(){t.getTripShoot()})))&&(null!==i&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&null!==(o=o.result)&&void 0!==o&&o.result?(n=i.data.attentionType,i.data.isTaskFinished&&(t.actionDailogRef&&t.actionDailogRef.show({type:"attention",title:i.data.miniProgramTitle,desc:i.data.miniProgramDesc,score:(i.data.rewardInfo||{}).score,userTaskId:i.data.userTaskId,taskId:i.data.taskId||"",taskName:i.data.taskName}),t.ubtTrace("o_gs_tripshoot_taskfeedback_expose",{taskid:i.data.taskId,taskname:i.data.taskName}),console.log("o_gs_tripshoot_taskfeedback_expose",{taskid:i.data.taskId,taskname:i.data.taskName})),c=!0,1==n?(r="\u5173\u6ce8\u6210\u529f",d=1):(r="\u4f60\u4eec\u5df2\u76f8\u4e92\u5173\u6ce8\uff0c\u6210\u4e3a\u7b14\u8bb0\u597d\u53cb\uff5e",d=2),t.setState({isFollow:c,followStatus:d,showFollowHint:!1},(function(){t.state.pushContent.show&&t.handleSubscribe("get",(function(){t.handleFollowOrSubscribe(!0)}))}))):(c=!1,r="\u5173\u6ce8\u5931\u8d25",t.setState({isFollow:c,showFollowHint:!1})),!e)){if(c&&t.hasAttentionTips&&t.authorHeaderRef)return t.authorHeaderRef.hideAttentionTips(),t.authorHeaderRef.toggleAttentionLink(!0),void setTimeout((function(){t.authorHeaderRef.toggleAttentionLink(!1)}),5e3);_().showToast({title:r,icon:"none"})}})),e&&t.subscribeMsg()):t.toLogin()})),(0,u.Z)((0,l.Z)(o),"doCommentPraise",(function(e,t,i){o.topCommentId=i;var s=(0,l.Z)(o),a="",n=o.cwx.user.isLogin(),r="";t?(a="cancel_like",r="c_gs_tripshoot_detail_comment_cancellike"):(a="like",r="c_gs_tripshoot_detail_commentmodule_like"),s.ubtTrace(r,{articleId:s.state.articleId,authorId:s.state.author.clientAuth}),n?s.getActionInfo(a,"comment",e):s.toLogin()})),(0,u.Z)((0,l.Z)(o),"toInputFocus",(function(){var e=o.cwx.user.isLogin();if(e){var t=(0,l.Z)(o);o.jumpToCommentPosition((function(){setTimeout((function(){t.commentListModalRef&&t.commentListModalRef.showAll(),t.setState({commentInputShow:!0,commentModalVisible:!0},(function(){t.observerQuickItem("fixed")}))}),500)}))}else o.toLogin()})),(0,u.Z)((0,l.Z)(o),"jumpToHome",(function(e){var t,i,s=e.type,a=e.auth,n=e.position,r=void 0===n?0:n,c=(0,l.Z)(o),d="",p="",u={},m="";(m="otherhome"==s||"praiseList"==s?a:"myComment"==s?a||"":c.state.author.clientAuth,p="uat"===I().env.toLowerCase()?"https://m.uat.qa.nt.ctripcorp.com/webapp/you/tripshoot/user/":"https://m.ctrip.com/webapp/you/tripshoot/user/",d=p+"home?seo=0&isMini=2&autoawaken=close&popup=close&ishideheader=yes&clientAuth="+m,"header"==s)?(c.ubtTrace("c_gs_tripshoot_detail_author_top",{articleId:c.state.articleId,authorId:c.state.author.clientAuth}),null!==(t=c.state.author)&&void 0!==t&&null!==(t=t.urls)&&void 0!==t&&t.wxUrl&&(d=c.state.author.urls.wxUrl)):"myComment"==s?c.ubtTrace("c_gs_tripshoot_detail_comment_mypic",{articleId:c.state.articleId,authorId:c.state.author.clientAuth}):"praiseList"==s&&(r+=1,c.ubtTrace("c_gs_tripshoot_detail_likemodule_userphoto",{articleId:c.state.articleId,authorId:m,authorPosition:r.toString()}));if(null!==(i=c.state.author)&&void 0!==i&&i.isStarAccount)u={url:encodeURIComponent(d),needLogin:!1,isNavigate:!0},k.Z.jumpToWebview(u);else{var g="/pages/ugc/user/index?clientAuth="+m;h.cwx.navigateTo({url:g})}})),(0,u.Z)((0,l.Z)(o),"toCancelAttention",(function(){var e=(0,l.Z)(o),t=o.cwx.user.isLogin(),i=e.state.author.clientAuth,s={};t?(s={userClientAuth:i},oe.cancelAttention(s,(function(t){k.Z.checkResponseAck(t)&&0==t.data.ResultStatus&&(e.setState({isFollow:!1}),e.state.pushContent.show&&e.handleSubscribe("get",(function(){e.handleFollowOrSubscribe(!0)})),_().showToast({title:"\u5df2\u53d6\u6d88\u5173\u6ce8",icon:"none"}))}))):e.toLogin()})),(0,u.Z)((0,l.Z)(o),"jumpToRace",(function(e,t){var i=(0,l.Z)(o),s=e,a={},n="";i.setState({showRaceTopicToast:!1}),"header-race"==t?n="c_gs_tripshoot_detail_track_tips":"toast-race"==t&&(n="c_gs_tripshoot_detail_track_popup_enter"),i.ubtTrace(n,{articleId:i.state.articleId,topicID:i.state.raceTopicInfo.topicId}),s.startsWith("https")?(a={url:encodeURIComponent(s),needLogin:!1,isNavigate:!0},k.Z.jumpToWebview(a)):s.indexOf("pages/")>-1&&h.cwx.navigateTo({url:s})})),(0,u.Z)((0,l.Z)(o),"getRaceTopics",(function(){var e=(0,l.Z)(o),t={},i=e.state.hasRaceTopic,s=!1,a=!1,n=e.state.isShareHost,r=e.state.shareRewardInfo,c=e.state.activitySwitch,d=e.state.topics,p="",u=[],m=!1;if(d&&!(d&&d.length<=0)){try{d.forEach((function(i,o){if(i.isInMatch&&3==i.type)throw m=!0,t.name=i.topicName,t.topicId=i.topicId,i.image&&i.image.dynamicUrl&&(t.imageUrl=i.image.dynamicUrl),u=i.wxUrl.split(","),u.length>1?(t.topicUrl=u[0],t.toastUrl=u[1]):t.topicUrl=u[0],t.topicUrl&&t.topicUrl.length>4&&t.name&&(a=!0,e.ubtTrace("o_gs_tripshoot_detail_track_tips",{articleId:e.state.articleId,topicID:t.topicId})),"Jump out now!"}))}catch(e){}i&&m&&(t.imageUrl&&t.toastUrl&&t.toastUrl.length>4?(s=!0,e.ubtTrace("o_gs_tripshoot_detail_track_popup",{articleId:e.state.articleId,topicID:t.topicId})):(_().showToast({title:"\u53c2\u8d5b\u6210\u529f",icon:"none"}),setTimeout((function(){e.setState({showSbg:!0})}),1500))),a?p=n&&r&&r.score&&c?"all":"race-only":n&&r&&r.score&&c&&(p="share-only"),e.setState({raceTopicInfo:t,showRaceTopicToast:s,showHeaderTopic:a,headerClass:p})}})),(0,u.Z)((0,l.Z)(o),"showMore",(function(){var e=(0,l.Z)(o),t=e.state.isFold;t&&e.ubtTrace("c_gs_tripshoot_detail_viewall",{articleId:e.state.articleId}),e.setState({isFold:!t,collapseLineNumConfigCopy:t?"unset":o.state.collapseLineNumConfig},(function(){e.getListOffsetTop()}))})),(0,u.Z)((0,l.Z)(o),"toPraise",(function(e){var t=e.isLike,i=e.type,s=e.position,a=void 0===s?0:s,n=e.articleid,r=(0,l.Z)(o),c=o.cwx.user.isLogin(),d="",p="";d="relatedArticle"==i?n:r.state.articleId,1==t?(p="cancel_like","relatedArticle"==i?r.ubtTrace("c_gs_tripshoot_detail_relatedarticle_cancellike",{articleId:r.state.articleId,relatedArticleId:d.toString(),relatedArticlePosition:a.toString()}):"likemodule"==i?r.ubtTrace("c_gs_tripshoot_detail_likemodule_cancellike",{articleId:r.state.articleId}):r.ubtTrace("c_gs_tripshoot_detail_cancellike",{articleId:r.state.articleId,authorId:r.state.author.clientAuth})):(p="like","relatedArticle"==i?r.ubtTrace("c_gs_tripshoot_detail_relatedarticle_like",{articleId:r.state.articleId,relatedArticleId:d.toString(),relatedArticlePosition:a.toString()}):"likemodule"==i?r.ubtTrace("c_gs_tripshoot_detail_likemodule_like",{articleId:r.state.articleId}):r.ubtTrace("c_gs_tripshoot_detail_like",{articleId:r.state.articleId,authorId:r.state.author.clientAuth})),c?r.getActionInfo(p,"article",d,i):r.toLogin()})),(0,u.Z)((0,l.Z)(o),"handleClickQuickItem",(function(e){var t=o.cwx.user.isLogin();if(t){var i=(0,l.Z)(o);o.jumpToCommentPosition((function(){setTimeout((function(){o.commentListModalRef&&o.commentListModalRef.showAll(e)}),500)})),i.ubtTrace("c_gs_tripshoot_detail_articlecomments_moduleReply",{articleId:i.state.articleId}),console.log("c_gs_tripshoot_detail_articlecomments_moduleReply",{articleId:i.state.articleId})}else o.toLogin()})),(0,u.Z)((0,l.Z)(o),"hideRaceTopicMask",(function(e){var t=(0,l.Z)(o),i="";t.setState({showRaceTopicToast:!1}),i="button"==e?"c_gs_tripshoot_detail_track_popup_buttonclose":"c_gs_tripshoot_detail_track_popup_dissolve",t.ubtTrace(i,{articleId:t.state.articleId,topicID:t.state.raceTopicInfo.topicId})})),(0,u.Z)((0,l.Z)(o),"jumpToOther",(function(){h.cwx.switchTab({url:"/pages/lvpai/lvpaiHome/lvpaiHome"})})),(0,u.Z)((0,l.Z)(o),"_renderError",(function(){var e=o.state,t=e.errorInfo,i=void 0===t?{}:t,s=e.statusBarHeight,a=e.titleBarHeight,n=e.navbarData;return(0,se.jsxs)(f.View,{class:"detail-error",children:[(0,se.jsx)(ae,{options:o.options,ubtTrace:o.ubtTrace.bind((0,l.Z)(o)),doTrack:o.doTrack.bind((0,l.Z)(o)),cwx:o.cwx,statusBarHeight:s,titleBarHeight:a,navbarData:n}),(0,se.jsxs)(f.View,{class:"error-page",children:[(0,se.jsx)(f.Image,{class:"img",src:i.url}),(0,se.jsx)(f.View,{class:"error-text",children:i.text}),(0,se.jsx)(f.View,{class:"error-btn",onClick:o.jumpToOther,children:"\u53bb\u53d1\u73b0\u5176\u4ed6\u7cbe\u5f69"})]}),(0,se.jsx)(f.View,{className:"view-check",onAnimationEnd:function(){return o.viewReadyHandle()}})]})})),(0,u.Z)((0,l.Z)(o),"getBannerUrl",(function(e){var t="",i={position:parseInt(e)};oe.advertBannerInfo(i,(function(e){if(k.Z.checkResponseAck(e)&&e.data.Result){var i=e.data.Result;if(i&&i.length&&(t=i[0].URL,t.startsWith("https"))){var o={url:encodeURIComponent(t),needLogin:!1,isNavigate:!0};k.Z.jumpToWebview(o)}}}))})),(0,u.Z)((0,l.Z)(o),"traceTimes",(function(){var e=(0,l.Z)(o),t=2,i=1,s=1,a="",n=1,r=1,c="";e.riskTimmer&&clearTimeout(e.riskTimmer),e.riskTimmer=setTimeout((function(){oe.getRiskInfo({},(function(e){e&&e.data&&(t=e.data.isRisk,i=e.data.isInfoSecurityRisk,s=e.data.infoSecurityRiskLevel,a=e.data.requestId,n=e.data.isBusinessRisk,r=e.data.businessRiskLevel,c=e.data.eventId)}),(function(e){}))}),3e3),e.cgcContentTimmer&&clearTimeout(e.cgcContentTimmer),e.cgcContentTimmer=setTimeout((function(){e.ubtTrace("o_cgc_content_isValidView",{contentID:e.state.articleId,isRisk:t,IsInforSecurityRisk:i,InforSecurityRiskLever:s,requestId:a,IsBusinessRisk:n,BusinessRiskLever:r,eventId:c})}),5e3)})),(0,u.Z)((0,l.Z)(o),"showFirstPraiseJump",(function(e,t){var i={},o="";_().showModal({title:e,content:t,cancelText:"\u786e\u5b9a",cancelColor:"#0099F7",confirmText:"\u66f4\u591a\u4efb\u52a1",confirmColor:"#0099F7",success:function(e){e.confirm&&(o=k.Z.urlCommonPrefix()+"user/welfare?isHideHeader=true&isHideNavBar=YES&isMini=2",i={url:encodeURIComponent(o),needLogin:!0,isNavigate:!0},k.Z.jumpToWebview(i))}})})),(0,u.Z)((0,l.Z)(o),"_initShareBatch",(function(){var e=(0,l.Z)(o),t={channelCode:o.taskParams.channelCode,platform:"miniProgram",version:"1"};oe.userTaskList(t,(function(t){if(k.Z.checkResponseAck(t)){var i=t.data||{},o=i.todoTaskList,s=void 0===o?[]:o,a=i.finishTaskList,n=void 0===a?[]:a,r=s.concat(n).find((function(t){return t.id==e.taskParams.taskId}));if(r){var c=JSON.parse(r.eventDisplay);e.taskShareStr="&_mktTaskActivityId=317sqhb&taskinvite=".concat(c.taskinvite)}}}))})),(0,u.Z)((0,l.Z)(o),"batchReceiveResult",(function(e){var t;200==(null===e||void 0===e||null===(t=e.detail)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.code)&&(console.log("batchReceiveResult detail success",e),o._initShareBatch())})),(0,u.Z)((0,l.Z)(o),"closePop",(function(e){e.stopPropagation(),o.setState({closeDownLoadPop:!0})})),(0,u.Z)((0,l.Z)(o),"_renderScore",(function(){var e=o.state.commentScore,t=[{img:"https://pages.c-ctrip.com/you/livestream/gs-dianping-score-1b.png",text:"\u4e0d\u4f73"},{img:"https://pages.c-ctrip.com/you/livestream/gs-dianping-score-2b.png",text:"\u4e00\u822c"},{img:"https://pages.c-ctrip.com/you/livestream/gs-dianping-score-3b.png",text:"\u4e0d\u9519"},{img:"https://pages.c-ctrip.com/you/livestream/gs-dianping-score-4b.png",text:"\u6ee1\u610f"},{img:"https://pages.c-ctrip.com/you/livestream/gs-dianping-score-5b.png",text:"\u8d85\u68d2"}],i=e;e<=0&&(i=1);var s=t[Math.ceil(i)-1];return(0,se.jsx)(f.View,{className:"score-wrap",children:(0,se.jsxs)(f.View,{className:"comment-score",children:[(0,se.jsx)(f.Image,{className:"comment-img",src:s.img||""}),(0,se.jsxs)(f.View,{className:"text",children:[e,"\u5206"]}),(0,se.jsx)(f.View,{className:"text text-right",children:s.text})]})})})),(0,u.Z)((0,l.Z)(o),"_closeHotelTips",(function(){o.setState({showHotelTips:!1}),_().setStorageSync("hotel_tips_close_".concat(o.state.articleId),!0)})),(0,u.Z)((0,l.Z)(o),"_renderHotelTips",(function(){var e=o.state.ruleExplain;return(0,se.jsxs)(f.View,{className:"hotel-comment-tips",children:[(0,se.jsx)(f.Image,{className:"tips-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/warning-ccc.png"}),(0,se.jsx)(f.View,{className:"tips-text",children:e}),(0,se.jsx)(f.Image,{onClick:o._closeHotelTips,className:"tips-close-icon",src:"https://pages.c-ctrip.com/livestream/tripshoot/close-ccc.png"})]})})),(0,u.Z)((0,l.Z)(o),"commentSubmitNotify",(function(e,t){t.length})),(0,u.Z)((0,l.Z)(o),"praiseNotify",(function(e,t){var i=o.state.commentList;i.forEach((function(i,o){i.commentId==t&&("like"==e?(i.likeCount=(i.likeCount||0)+1,i.isLike=!0,i.showAnimation=!0):(i.likeCount=(i.likeCount||0)-1,i.isLike=!1,i.showAnimation=!1))})),o.setState({commentList:i})})),(0,u.Z)((0,l.Z)(o),"deleteCommentNotify",(function(e,t){o.setState({commentList:t,commentCount:o.state.commentCount-1})})),(0,u.Z)((0,l.Z)(o),"_renderEventRank",(function(){var e=o.state.eventRank,t=function(){o.ubtTrace("c_gs_tripshoot_detail_trendbanner",{topicId:null===e||void 0===e?void 0:e.relatedId}),k.Z.commonJump(e.jumpUrl,e.jumpUrl,e.jumpUrl)};return(0,se.jsxs)(f.View,{className:"event-rank-container",onClick:t,children:[(0,se.jsx)(f.Image,{className:"rank-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/HotList.png"}),(0,se.jsx)(f.Image,{className:"rank-line"}),(0,se.jsxs)(f.View,{className:"rank-title",children:[e.rankTitle," ",e.relatedName]}),(0,se.jsxs)(f.View,{className:"rank-more",children:[(0,se.jsx)(f.View,{className:"rank-more-text",children:"\u66f4\u591a\u70ed\u70b9"}),(0,se.jsx)(f.Image,{className:"rank-more-img",src:"https://pages.c-ctrip.com/livestream/tripshoot/FFFFFF.png"})]})]})})),o.checkPerformance=!0,o.isWeixin=!1,o.isAlipay=De.Nc(),o.pageId=Me(),o.options={},o.windowWidth=375,o.templateIdList=["linBOIzlaJXsvS2IMgm6OjaaX9_lTaWNwjd0RVaJ484"],o.isRejectSubscribeMsg=!1,o.canShowSubscribeMsg=!1,o.subscribeAB="A",o.pushContentShow=!1,o.scrollTop=0,o.windowHeight=0,o.commentListModalRef=null,o.imageSwiperRef=null,o.videoSwiperRef=null,o.productCardRef=null,o.authorHeaderRef=null,o.voteRef=null,o.floatCurrent=0,o.state={collapseConfig:!0,collapseLineNumConfig:10,collapseLineNumConfigCopy:"unset",statusBarHeight:0,titleBarHeight:0,navbarData:{showCapsule:0,showColor:0,navigationBarColor:"#fff",title:"\u643a\u7a0b\u793e\u533a"},pushContent:{show:!1},openId:"",author:{},individualTag:"",isShareHost:!1,activitySwitch:!1,isHost:!1,isFollow:!1,followStatus:0,showAttentionGuide:!1,showHeaderTopic:!1,raceTopicInfo:{},showHeaderTop:0,headerClass:"",isIphoneX:!1,isLike:!1,likeCount:0,showLikeCount:0,showPraiseGuide:!1,commentCount:0,isCollected:!1,enterType:"planB",commentNoticeItemSimple:"",collectCount:0,showCollectCount:0,commentTextStyle:{},commentModalVisible:!1,listOffsetTop:0,likeInfo:{},isLiking:!1,userInfo:{headPhoto:"https://pages.c-ctrip.com/you/livestream/lvpai_default_user.jpg",identityType:0},listScroll:!0,currentSwiperIndex:1,swiperList:[],swiperHeight:0,videoInfo:{},hasRaceTopic:!1,shareRewardInfo:{readCount:0,score:0},topics:[],topicsOffsetTop:[],pois:[],isFold:!0,needFold:!0,showStartAccountStyle:!1,hasProductsCard:!1,shootTimeDisplay:"",sourceName:"",ipLocatedName:"",productType:0,sourceType:0,travelDto:null,productsList:[],product:{},praiseList:[],waterfallLeftList:[],waterfallRightList:[],relevantList:[],showRelevantList:!0,commentScore:0,ruleExplain:"",moduleList:"",closefloatingwindow:!1,download_pop_img:"",showCodeCommandModal:!1,codeCommandModalImg:"",hasVideo:!1,closeDownLoadPop:!1,hideCustomHeader:["alipay","tt","swan"].includes("weapp"),showHotelTips:!1,eventRank:null,hotelComment:null},o.taskParams={tempid:(I().env.toLowerCase(),"317bjxqbd"),compid:"uat"===I().env.toLowerCase()?"103009":"184063",taskId:"uat"===I().env.toLowerCase()?"174":"1796",channelCode:"uat"===I().env.toLowerCase()?"Q82K91E872":"JR442JH832"},o.taskShareStr="",o}return(0,c.Z)(i,[{key:"setTDK",value:function(e){}},{key:"componentDidMount",value:function(){}},{key:"onShareAppMessage",value:function(){var e=this,t=e.state.newClientAuth,i=e.state.newClientToken||"",o=e.state.shareInfo,s=e.state.articleId,a=e.state.isRelateHidden,n=e.state.shareimageUrl,r="";return e.getActionInfo("share","article"),e.ubtTrace("c_gs_tripshoot_detail_share",{articleId:s}),e.ubtTrace("o_gs_tripshoot_detail_share_success"),r="/pages/ugc/lvpai/detail/detail?shareFlag=1&articleId="+s+"&clientAuth="+t+"&token="+i,console.log(r,"\u8be6\u60c5\u9875\u5206\u4eab"),a&&(r=r+"&isRelateHidden="+a),this.taskShareStr&&(r+=this.taskShareStr),{title:o.shareTitle,path:r,imageUrl:n||o.imageUrl}}},{key:"onLoad",value:function(e){V(),this.loadInitData(e)}},{key:"loadInitData",value:function(e){var t=this;this.articleId=e.articleId,b.on("pageState",(function(e,i){t.setState(e,i)})),_().showLoading({title:"\u52a0\u8f7d\u4e2d"}),this.ubtTrace("c_gs_pc_windows_onLoad",{});var i=this,o=e.articleId||0,n=e.clientAuth||"",r=e.token||"",c=e.shareFlag||0,l=e.showSbg||0,d=e.fromDetail||0,p=e.hasRaceTopic||"",u=i.state.enterType||"",m=!1,h="\u643a\u7a0b\u793e\u533a",g=e.scene,f=e.actId||0,v=e.isRelateHidden||0,w=!0;i.options=e,"true"===e.hideCustomHeader&&i.setState({hideCustomHeader:!0}),e.hideFloatWindow,console.log("options",e),l?(l=!0,m=!0):(l=!1,m=!1),1==c&&(h="\u643a\u7a0b\u793e\u533a"),_().setNavigationBarTitle({title:h}),g&&(g=decodeURIComponent(g),g=g.split("&"),console.log("scene",g),g.forEach((function(e,t){if(e.match("articleId")){var i=e.split("=");o=i[1]}}))),"yes"==p&&(p=!0),1==v&&(w=!1),i.setState({articleId:o,clientAuth:n,clientToken:r,shareFlag:c,isShowSbg:l,hideVideo:m,enterType:u,navigationBarTitle:h,fromDetail:d,hasRaceTopic:p,isRelateHidden:v,showRelevantList:w},(0,a.Z)((0,s.Z)().mark((function e(){var o,a,n,r,c,l,d,p,u;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=_().getStorageSync("LP_DETAIL_OPENID"),console.log("openID",o),o?i.setState({openId:o},(function(){i.getTripShoot()})):i.getOpenId(),f&&i.getBannerUrl(f),e.next=6,_().getSystemInfoSync();case 6:a=e.sent,n=a.platform,r=a.windowWidth,c=a.windowHeight,l=a.model,d=a.system,t.setEmojiStyle(d),i.windowWidth=r,i.windowHeight=c,p=Ue.globalData.statusBarHeight+Ue.globalData.titleBarHeight,"windows"==n&&(p=0),t.state.hideCustomHeader&&(p=0),u=p+40,i.setState({showHeaderTop:p,followHintTop:u,statusBarHeight:Ue.globalData.statusBarHeight,titleBarHeight:Ue.globalData.titleBarHeight,isIphoneX:l.indexOf("iPhone X")>-1||l.indexOf("iPhone 11")>-1||l.indexOf("iPhone 12")>-1||l.indexOf("iPhone13")>-1}),i.subscribeAB=t.cwx.ABTestingManager.valueForKeySync("200602_GS_lvpai"),console.log("subscribeAB",i.subscribeAB),i.randomComment();case 22:case"end":return e.stop()}}),e)}))))}},{key:"doClickPublishButton",value:function(){k.Z.openCtripUrl({url:"ctrip://wireless/destination/toWriteTravelPage"}),this.ubtTrace("c_gs_tripshoot_detail_post",{articleId:this.articleId,iswakeup:!1})}},{key:"componentDidShow",value:function(){this.handleShow()}},{key:"handleShow",value:function(){var e=this;b.trigger("detailShow");var t=this.cwx.user.isLogin();this.ubtTrace("c_gs_pc_windows_onShow",{}),this.quickReplyList(),this.getRelatedRecommend(),console.log("showHeaderTop",this.state.showHeaderTop),this.ubtTrace("o_gs_tripshoot_detail_onShow",{articleId:this.state.articleId}),this.handleSubscribe("get",(function(){e.handleFollowOrSubscribe()})),this.setState({isLogin:t,inputValue:""}),this.inputValueData="",this.requestGetShareImage()}},{key:"rpxToPx",value:function(e){var t=this.windowWidth/750*e;return t!==t&&(t=e/2),t+"px"}},{key:"setEmojiStyle",value:function(e){var t=this,i=e&&e.includes("Android "),o={wrapperStyle:"font-size: ".concat(t.rpxToPx(28),";color: #333;line-height: ").concat(t.rpxToPx(38),";font-weight: ").concat(i?"600":"normal",";"),cemojiStyle:"\n          height: ".concat(t.rpxToPx(34),";\n          vertical-align: text-bottom;\n      ")};this.setState({commentTextStyle:o,isAndroid:i})}},{key:"render",value:function(){var e=this,t=this.state,i=t.statusBarHeight,o=t.titleBarHeight,s=t.navbarData,a=t.author,r=t.individualTag,c=t.isShareHost,l=t.activitySwitch,d=t.shareRewardInfo,p=t.isHost,u=t.isFollow,h=t.followStatus,g=t.showAttentionGuide,v=t.showHeaderTopic,w=t.raceTopicInfo,_=t.showHeaderTop,x=t.headerClass,I=t.isIphoneX,T=t.isLike,y=t.likeCount,b=t.showLikeCount,k=t.showPraiseGuide,C=t.commentCount,S=t.isCollected,j=t.enterType,Z=t.commentNoticeItemSimple,N=t.collectCount,L=t.showCollectCount,V=t.articleId,P=t.shareInfo,A=t.shareimageUrl,R=t.commentTextStyle,H=t.commentModalVisible,D=t.isLiking,F=t.listScroll,E=t.relevantList,U=t.articleLevel,M=t.pois,O=t.isFold,B=t.needFold,W=t.sortedActicleContent,G=t.hasProductsCard,J=t.showStartAccountStyle,q=t.collapseLineNumConfigCopy,z=t.sourceType,Q=t.travelDto,X=t.shootTimeDisplay,K=t.sourceName,Y=t.ipLocatedName,$=t.productType,ee=t.publishTime,te=t.product,ie=t.productsList,oe=t.praiseList,ce=t.userInfo,le=t.commentList,ue=t.showCommentListJump,he=t.replyList,fe=t.showRelevantList,ve=t.waterfallLeftList,Te=t.waterfallRightList,ye=t.fromDetail,ke=t.showSbg,Ce=t.showRaceTopicToast,Se=t.showError,Ve=t.replyListCopy,Pe=t.showDetail,Ae=t.hideCustomHeader,Re=t.download_pop_img,Fe=t.hasVideo,Ee=t.tags,Ue=t.closeDownLoadPop,Me=t.showHotelTips,Oe=t.eventRank,Be=t.hotelComment;if(Se)return this._renderError();if(Pe){var We=He.labelUrl(U);return(0,se.jsxs)(f.View,{className:"container",children:[!Ae&&(0,se.jsx)(ae,{options:this.options,ubtTrace:this.ubtTrace.bind(this),doTrack:this.doTrack.bind(this),cwx:this.cwx,statusBarHeight:i,titleBarHeight:o,navbarData:s}),this.isWeixin&&this._renderOpenBtn(),(0,se.jsx)(re,{ref:function(t){return e.authorHeaderRef=t},cwx:this.cwx,author:a,individualTag:r,isShareHost:c,activitySwitch:l,shareRewardInfo:d,isHost:p,isFollow:u,followStatus:h,showAttentionGuide:g,showHeaderTopic:v,raceTopicInfo:w,showHeaderTop:_,headerClass:x,toAttention:this.toAttention,jumpToHome:this.jumpToHome.bind(this),toCancelAttention:this.toCancelAttention.bind(this),jumpToRace:this.jumpToRace.bind(this)}),(0,se.jsx)(ne,(0,n.Z)({ubtTrace:this.ubtTrace.bind(this),doTrack:this.doTrack.bind(this),cwx:this.cwx,toLogin:this.toLogin.bind(this),observerQuickItem:this.observerQuickItem.bind(this),jumpToCommentPosition:this.jumpToCommentPosition.bind(this),getActionInfo:this.getActionInfo.bind(this),toInputFocus:this.toInputFocus.bind(this),isIphoneX:I,isLike:T,likeCount:y,showLikeCount:b,showPraiseGuide:k,isHost:p,author:a,commentCount:C,isCollected:S,enterType:j,commentNoticeItemSimple:Z,collectCount:N,showCollectCount:L,articleId:V,shareInfo:P,shareimageUrl:A,isLiking:D,options:this.options},He)),(0,se.jsx)(f.CommentListModal,(0,n.Z)({ref:function(t){return e.commentListModalRef=t},cwx:this.cwx,commentTextStyle:R,ubtTrace:this.ubtTrace.bind(this),id:"commentListModal",commentSubmitNotify:this.commentSubmitNotify.bind(this),praiseNotify:this.praiseNotify.bind(this),deleteCommentNotify:this.deleteCommentNotify.bind(this),isVisible:H,articleId:V,clientAuth:this.state.author.clientAuth,replyList:Ve,isHost:p},He)),(0,se.jsx)(f.View,{className:"detail-normal ".concat(F?"":"scroll-lock"),children:(0,se.jsxs)(f.View,{className:"paipai-detail ".concat(I?"on":""),children:[(0,se.jsx)(de,{headerClass:x,ref:function(t){return e.imageSwiperRef=t},getListOffsetTop:this.getListOffsetTop.bind(this),getRaceTopics:this.getRaceTopics.bind(this),ubtTrace:this.ubtTrace.bind(this),articleId:V,author:a,pageId:this.pageId}),(0,se.jsx)(pe,{headerClass:x,ref:function(t){return e.videoSwiperRef=t},ubtTrace:this.ubtTrace.bind(this),articleId:V,getListOffsetTop:this.getListOffsetTop.bind(this),getRaceTopics:this.getRaceTopics.bind(this),author:a}),Oe&&this._renderEventRank(),"true"==this.options.hidePublishButton||this.isAlipay||this.isWeixin||De.eW()?null:(0,se.jsx)(f.View,{onClick:function(){return e.doClickPublishButton()},className:this.props.isRenderFooterAwaken?"awaken-publish-button":"publish-button"}),De.oO()&&"1"==!this.options.hideOpenCtrip&&(0,se.jsxs)(f.View,{className:"openCtrip_media",onClick:function(){return e._openCtrip("media")},children:["\u6253\u5f00\u643a\u7a0bApp\uff0c\u67e5\u770b",Fe?"\u9ad8\u6e05\u89c6\u9891":"\u9ad8\u6e05\u5927\u56fe"]}),De.oO()&&!this.isWeixin&&!Ue&&Re&&(0,se.jsxs)(f.View,{className:"download_pop",children:[(0,se.jsx)(f.Image,{className:"download_pop_img",onClick:function(){return e.ubtTrace("c_gs_tripshoot_detail_download_coupon",{})},src:Re}),(0,se.jsx)(f.View,{className:"close_view",onClick:function(t){return e.closePop(t)},children:(0,se.jsx)(f.Image,{src:"https://pages.c-ctrip.com/livestream/tripshoot/dest_tripshoot_task_close.png"})})]}),De.oO()&&this._renderCodeCommandModal(),(0,se.jsxs)(f.View,{className:"article-content-container",children:[p&&We&&9!==$?(0,se.jsx)(f.View,{className:"label-container",children:(0,se.jsx)(f.Image,{className:"label-image",src:We})}):null,(0,se.jsxs)(f.View,{className:"brief current",children:[(0,se.jsx)(me,(0,n.Z)((0,n.Z)({articleId:V,articleLevel:U,pois:M,isHost:p,productType:$},He),{},{ubtTrace:this.ubtTrace.bind(this)})),J&&(0,se.jsx)(we,{product:te,productsList:ie,showStartAccountStyle:J,articleId:V,ubtTrace:this.ubtTrace.bind(this),author:a,pageId:this.pageId,cwx:this.cwx,toLogin:function(){return e.toLogin()},refreshAfterLogin:function(){return e.refreshAfterLogin()},ref:function(t){e.productCardRef=t}}),(0,se.jsx)(f.View,{className:"brief-detail ".concat(G?"goods-fold":""," ").concat(J&&G?"":"article-top"," ").concat(B&&O?"":"umlimit"),children:(0,se.jsxs)(f.View,{id:"lv-content",style:{WebkitLineClamp:q},children:[(0,se.jsx)(ge,{acticleContent:W,articleId:V,needFold:B,isFold:O,handleContentShow:this.handleContentShow.bind(this),ubtTrace:this.ubtTrace.bind(this)}),B&&O&&(0,se.jsx)(f.View,{className:"showmoreImg",onClick:this.showMore,children:"\u5c55\u5f00"})]})}),Me&&this._renderHotelTips(),9==$&&this._renderScore(),(0,se.jsx)(f.Vote,{articleId:V,cwx:this.cwx,ubtTrace:this.ubtTrace.bind(this),toLogin:this.toLogin.bind(this),ref:function(t){e.voteRef=t},userInit:!0}),6==z&&Q&&Q.title&&(0,se.jsxs)(f.View,{className:"travel-container",children:[(0,se.jsx)(f.Text,{className:"travel-Text",children:"\u6765\u81ea\u6e38\u8bb0"}),(0,se.jsx)(f.Text,{className:"travel-symbol",children:"\u300a"}),(0,se.jsx)(f.Text,{className:"travel-title",children:Q.title}),(0,se.jsx)(f.Text,{className:"travel-symbol",children:"\u300b"})]}),(0,se.jsxs)(f.View,{className:"brief-time ".concat(G?"brief-time-pro":""),children:[(0,se.jsxs)(f.Text,{children:[ee,"\u53d1\u5e03",!!Y&&(0,se.jsxs)(f.Text,{className:"text-ipname",children:["IP:",Y]})]}),X&&(0,se.jsxs)(f.Text,{style:{marginLeft:"16px"},children:["\u62cd\u6444\u4e8e",X]}),(0,se.jsx)(f.Text,{children:K}),9==$&&(0,se.jsx)(f.View,{className:"hotel-real-wrap",children:(0,se.jsx)(f.View,{className:"real-text",children:"\u6d88\u8d39\u540e\u8bc4\u4ef7"})})]}),!J&&(0,se.jsx)(we,{product:te,productsList:ie,showStartAccountStyle:J,articleId:V,ubtTrace:this.ubtTrace.bind(this),author:a,pageId:this.pageId,cwx:this.cwx,toLogin:function(){return e.toLogin()},refreshAfterLogin:function(){return e.refreshAfterLogin()},ref:function(t){e.productCardRef=t}}),(0,se.jsx)(Le,{ubtTrace:this.ubtTrace.bind(this),articleId:V})]})]}),(0,se.jsx)(f.View,{className:"line"}),De.oO()&&!this.isAlipay&&(0,se.jsx)(be,{tagId:"content_bottom_ad",impId:"04GLUUZO04164QAHBNKAQMMZN",width:1536,height:1152,extension:[{name:"articleId",value:V},{name:"clientAuth",value:null===a||void 0===a?void 0:a.clientAuth},{name:"tag",value:Ee}]}),(0,se.jsx)(_e,(0,n.Z)((0,n.Z)({praiseList:oe},He),{},{likeCount:y,isLike:T,isLiking:D,articleId:V,showLikeCount:b,toPraise:this.toPraise.bind(this),ubtTrace:this.ubtTrace.bind(this)})),"true"!=this.options.hideComment&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ie,{replyList:he,handleClickQuickItem:this.handleClickQuickItem.bind(this),userInfo:ce,toInputFocus:this.toInputFocus.bind(this),toLogin:this.toLogin.bind(this),jumpToHome:this.jumpToHome.bind(this),commentCount:C}),(0,se.jsx)(xe,(0,n.Z)((0,n.Z)({hotelComment:Be,commentList:le,showCommentListJump:ue,commentCount:C,doCommentPraise:this.doCommentPraise.bind(this),articleId:V,ubtTrace:this.ubtTrace.bind(this),jumpToHome:this.jumpToHome.bind(this),commentTextStyle:R,commentModalVisible:H,commentListModalRef:this.commentListModalRef},He),{},{isHost:p,replyList:he,handleClickQuickItem:this.handleClickQuickItem.bind(this)}))]}),De.oO()&&"true"!=this.options.hideComment&&"1"!=this.options.hideOpenCtrip&&(0,se.jsx)(f.View,{className:"openCtrip_media",style:{marginBottom:"10px"},onClick:function(){return e._openCtrip("comment")},children:"\u6253\u5f00\u643a\u7a0bApp\uff0c\u67e5\u770b\u5168\u90e8\u8bc4\u8bba"}),(0,se.jsx)(je,(0,n.Z)((0,n.Z)({options:this.options,relevantList:E,showRelevantList:fe,waterfallLeftList:ve,waterfallRightList:Te,fromDetail:ye},He),{},{ubtTrace:this.ubtTrace.bind(this),toPraise:this.toPraise.bind(this),articleId:V,commentModalVisible:H})),De.oO()&&"1"==!this.options.hideOpenCtrip&&(0,se.jsx)(f.View,{className:"openCtrip_media openCtrip_Bottom",onClick:function(){return e._openCtrip(!0)},children:"\u6253\u5f00\u643a\u7a0bApp\uff0c\u67e5\u770b\u66f4\u591a\u7b14\u8bb0"})]})}),De.oO()&&this._renderFloatWindow(),(0,se.jsx)(Ze,{showSbg:ke,activitySwitch:l,showRaceTopicToast:Ce,raceTopicInfo:w,hideRaceTopicMask:this.hideRaceTopicMask.bind(this),jumpToRace:this.jumpToRace.bind(this)}),(0,se.jsx)(Ne,{top:_,cwx:this.cwx,ref:function(t){return e.actionDailogRef=t}}),(0,se.jsxs)(m.Fragment,{children:[(0,se.jsx)("task-count-down",{}),(0,se.jsx)("perinfo-protect-float",{}),(0,se.jsx)("taskAssist",{tempid:this.taskParams.tempid,compid:this.taskParams.compid,onBatchReceiveResult:this.batchReceiveResult})]}),(0,se.jsx)(f.View,{className:"view-check",onAnimationEnd:function(){return e.viewReadyHandle()}})]})}return null}}]),i}(T.Z),Ge={navigationBarTextStyle:"black",navigationBarBackgroundColor:"#ffffff",enablePullDownRefresh:!1,usingComponents:{"cemoji-converter":"@miniapp/cwx/component/cemojiConverter/cemojiConverter","task-count-down":"@miniapp/pages/market/directory/components/taskCountDown/index",taskAssist:"@miniapp/pages/market/directory/taskAssist","perinfo-protect-float":"@miniapp/cwx/component/perInfoProtectFloat/index","ad-sdk":"@miniapp/pages/market/advertiseNew/ad-sdk"},componentPlaceholder:{"task-count-down":"view",taskAssist:"view"},navigationStyle:"custom"};We.enableShareAppMessage=!0;Page((0,o.createPageConfig)(We,"pages/ugc/lvpai/detail/detail",{root:{cn:[]}},Ge||{}))},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[3040,2107,1216,8592],(function(){return t(16583)}));e.O()}]);
//# sourceMappingURL=detail.js.map