{"version":3,"file":"pages/tnt/business/booking/o2obooking/coupon/index.js","mappings":"AAAA,aACAA,QAAQ,2BAEPC,GAAG,oBAAsBA,GAAG,qBAAuB,IAAIC,KAAK,CAAC,CAAC,MAAM,CAE/D,MACA,SAAUC,EAAyBC,EAAsCC,GAI/E,IAAIC,EAAcD,EAAoB,OAElCE,EAAiBF,EAAoB,OAErCG,EAAOH,EAAoB,OAE3BI,EAAgBJ,EAAoB,KAIpCK,GAFQL,EAAoB,OAEVA,EAAoB,QAEtCM,EAAaN,EAAoB,OAEjCO,EAAqBP,EAAoB,OAEzCQ,EAAmBR,EAAoB,OAEvCS,EAAiBT,EAAoB,OAErCU,EAA4BV,EAAoB,OAEhDW,EAAMX,EAAoB,OAE1BY,EAAMZ,EAAoB,OAE1Ba,EAASb,EAAoB,OAE7Bc,EAAed,EAAoB,OAKNe,EAAa,SAAWC,EAASC,GAChE,IAAIC,GAA6B,OAAbD,QAAkC,IAAbA,OAAsB,EAASA,EAASC,eAAiB,GAC9FC,GAAO,EAAGN,EAAoBO,OAAS,CAAC,EAE1CC,GADaF,EAAKG,WACZH,EAAKE,KACbH,EAAaK,SAAQ,SAAUC,GAC7BA,EAAKC,SAAWD,EAAKE,WACdF,EAAKE,GACd,IACA,IAAIC,GAAS,EAAGb,EAA0Bc,GAAGZ,GAC7C,MAAO,CACLa,gBAAiB,CACfC,UAAW,CACTC,IAAK,OACLC,OAAQ,EACRC,WAAY,GAGdC,KAAM,CACJC,OAAQ,SAERC,SAAU,QACVC,YAAa,CACXnB,aAAcA,GAEhBoB,WAAY,EACZC,OAAQ,EACRC,OAAQC,QAAO,EAAG7B,EAAiB8B,OACnCC,OAAQ,QACRC,SAAU,MACVC,SAAUxB,EACVyB,YAAa,GACbC,eAAgB,CAAC,CACfC,IAAK,kBACLC,MAAO,WAIbC,KAAMvB,EAET,EASgCwB,EAAS,CACxCC,mBAAoB,SAA4BpC,EAASC,EAAUoC,GACjE,IAIEC,EAJEC,EAAY,CACdvC,QAASA,GAEPwC,GAAY,EAAG9C,EAAuCkB,GAAGyB,GAE7D,IACE,IAAKG,EAAUC,MAAOH,EAAQE,EAAUE,KAAKC,MAAO,CAClD,IAAIX,EAAMM,EAAML,MAChB,OAAQD,GACN,IAAK,cACHO,EAAUxC,WAAaA,EAAWC,EAASC,GAC3C,MACF,QACE,MAEN,CACF,CAAE,MAAO2C,GACPJ,EAAUK,EAAED,EACd,CAAE,QACAJ,EAAUM,GACZ,CAIA,OAHAP,EAAUvC,SAAU,EAAGZ,EAA2BwB,IAAG,EAAGxB,EAA2BwB,GAAG,CAAC,EAAGZ,GAAU,CAAC,EAAG,CACtG+C,QAAQ,IAEHR,CACT,EAEAS,iBAAkB,WAChB,OAAO,EAAGxD,EAA8BoB,IAAiB,EAAGrB,EAAgCqB,KAAKqC,MAAK,SAASC,IAC7G,IAAIC,EAAkBC,EAClBC,EAAUC,EAAQC,EAAKC,EAAMC,EAAKC,EAAMC,EAAMC,EAClD,OAAO,EAAGrE,EAAgCqB,KAAKiD,MAAK,SAAkBC,GACpE,MAAO,SAAWA,EAASC,KAAOD,EAASE,MACzC,KAAK,EAgBH,IAfA,EAAGpE,EAAoBqE,IAAI,CACzBjC,IAAK,gCACLC,OAAO,IAAIiC,MAAOC,UAClBC,IAAK,KACJ,YACHf,GAAW,EAAG1D,EAA4B0E,MAC1Cf,GAAuB,OAAbD,QAAkC,IAAbA,GAAgE,QAAxCF,EAAmBE,EAASiB,cAAyC,IAArBnB,OAA8B,EAASA,EAAiBG,SAAW,CAAC,EAC3KC,GAAoB,OAAbF,QAAkC,IAAbA,GAA4D,QAApCD,EAAiBC,EAASlE,YAAqC,IAAnBiE,OAA4B,EAASA,EAAemB,YAAc,IAClK,EAAG3E,EAAoBqE,IAAI,CACzBjC,IAAK,gCACLC,OAAO,IAAIiC,MAAOC,UAClBC,IAAK,KACJ,YACHZ,EAAOF,EAAOE,KAAMC,EAAMH,EAAOG,IAAKC,EAAOJ,EAAOI,KACpDC,EAAO,IACFF,EAAK,CACRK,EAASE,KAAO,GAChB,KACF,CAEA,OADAL,EAAO,GAAGa,OAAoB,OAAbnB,QAAkC,IAAbA,GAAiE,QAAzCO,EAAoBP,EAASiB,cAA0C,IAAtBV,OAA+B,EAASA,EAAkBa,KAAM,UAAUD,OAAOhB,EAAM,SAASgB,OAAOf,EAAK,UAAUe,OAAOd,GACrOI,EAASY,OAAO,SAAU,CAC/BC,QAASlB,EACTmB,UAAWlB,EACXmB,SAAUrB,EACVG,KAAMA,EACNZ,QAAQ,EACR+B,SAAS,EACTvB,IAAKA,IAET,KAAK,GACH,OAAOO,EAASY,OAAO,SAAU,CAC/B3B,QAAQ,EACRQ,IAAKA,IAET,KAAK,GACL,IAAK,MACH,OAAOO,EAASiB,OAEtB,GAAG7B,EACL,IA7CO,EA8CT,GAGE8B,EAAiBhG,EAAoB,OAErCiG,EAAcjG,EAAoB,OAElCkG,EAAalG,EAAoB,OAEjCsF,EAAStF,EAAoB,OAEAmG,EAAgB,SAAW7B,EAAQzD,GAClE,MAAO,CACLG,QAASoF,OAAOC,OAAO,CAAC,EAAGxF,EAAQyD,GACnCgC,UAAW,+DAEd,EAYGC,EAAqB,WACvB,SAASA,EAAMC,GACb,IAAIC,EAAQC,MACZ,EAAGV,EAA4BpE,GAAG8E,KAAMH,IACxC,EAAGrG,EAA4B0B,GAAG8E,KAAM,cAAU,GAClDA,KAAKF,OAASA,EACd,IAAIxF,EAAU0F,KAAKF,OAAOG,MAAM3F,QAC5BA,EAAQ2E,SACV,EAAGO,EAAwBtE,IAAG,SAAUgF,GAC4B,MAArD,OAARA,QAAwB,IAARA,OAAiB,EAASA,EAAIC,aACjDL,EAAOM,MAAMC,KAAK,yBAClBN,EAAMO,KAAKR,KAGX,EAAGlB,EAAgB2B,KAEvB,IAAG,EAAO,CACRC,4BAA4B,KAI9BV,EAAOW,WAAW,CAChBnG,SAAS,EAAGZ,EAA2BwB,IAAG,EAAGxB,EAA2BwB,GAAG,CAAC,EAAGZ,GAAU,CAAC,EAAG,CAC3F+C,QAAQ,EACR+B,SAAS,MAGbU,EAAOY,QAAQL,KAAK,CAClBM,MAAO,eACPC,QAAS,kFACTC,MAAO,CAAC,gBACRC,YAAa,CAAC,WACZhB,EAAO3G,KAAK,uBAAuB,EACrC,KAGN,CAwEA,OAvEA,EAAGoG,EAAyBrE,GAAG2E,EAAO,CAAC,CACrCvD,IAAK,OACLC,MAAO,WACL,IAAIwE,GAAQ,EAAGjH,EAA8BoB,IAAiB,EAAGrB,EAAgCqB,KAAKqC,MAAK,SAASC,EAAQsC,GAC1H,IAAIkB,EAAYC,EAAaC,EACzB5G,EAAS2E,EAAoCkC,EAAM5G,EAAUsC,EACjE,OAAO,EAAGhD,EAAgCqB,KAAKiD,MAAK,SAAkBC,GACpE,MAAO,SAAWA,EAASC,KAAOD,EAASE,MACzC,KAAK,EAOH,OANAhE,EAAUwF,EAAOG,MAAM3F,QACvB2E,EAAU3E,EAAQ2E,QAAqB3E,EAAQ4E,UAAsB5E,EAAQ6E,SAAiB7E,EAAQ2D,KACtGkD,EAAO,CAAC1B,EAAc,CACpB2B,QAASnC,GACRa,EAAO3F,SACViE,EAASE,KAAO,EACTwB,EAAOuB,KAAK,CACjBF,KAAMA,IAEV,KAAK,EAIH,GAHA5G,EAAW6D,EAASkD,KACpBxB,EAAOM,MAAMmB,OAEwB,QAA9BP,EAAazG,EAAS,UAA+B,IAAfyG,IAAyBA,EAAWQ,aAAe,CAC9FpD,EAASE,KAAO,GAChB,KACF,CAKA,OAJAwB,EAAOM,MAAMC,KAAK,0GAClBoB,YAAW,WACT3B,EAAO3G,KAAK,sCAAsC2F,OAAOvE,EAAS,GAAGiH,eAAe,EACtF,GAAG,MACIpD,EAASY,OAAO,UACzB,KAAK,GACH,GAAsC,QAA/BiC,EAAc1G,EAAS,UAAgC,IAAhB0G,IAA0BA,EAAYzG,cAAiBD,EAAS,GAAGC,aAAakH,OAAS,CACrItD,EAASE,KAAO,GAChB,KACF,CASA,OARAwB,EAAOY,QAAQL,KAAK,CAClBM,MAAO,eACPC,QAAS,yGACTC,MAAO,CAAC,gBACRC,YAAa,CAAC,WACZhB,EAAO3G,KAAK,uBAAwB,YACtC,KAEKiF,EAASY,OAAO,UACzB,KAAK,GAaH,OAZsC,QAA/BkC,EAAc3G,EAAS,UAAgC,IAAhB2G,GAA0BA,EAAY1G,cAClFsF,EAAOY,QAAQL,KAAK,CAClBM,MAAO,eACPC,QAAS,yGACTC,MAAO,CAAC,gBACRC,YAAa,CAAC,WACZhB,EAAO3G,KAAK,uBAAwB,YACtC,KAGJ0D,EAAYJ,EAAOC,mBAAmBpC,EAASC,EAAS,GAAI,CAAC,gBAC7DuF,EAAOW,WAAW5D,GACXuB,EAASY,OAAO,UACzB,KAAK,GACL,IAAK,MACH,OAAOZ,EAASiB,OAEtB,GAAG7B,EACL,KACA,SAAS8C,EAAKqB,GACZ,OAAOZ,EAAMa,MAAM5B,KAAM6B,UAC3B,CACA,OAAOvB,CACT,CAnEO,MAqEFT,CACT,CA7GyB,GAgHrBiC,EAAcxI,EAAoB,OAElCyI,EAAQzI,EAAoB,OAE5B0I,EAAS1I,EAAoB,OAa7B2I,EAAY,SAAmBC,GACjC,IAAIC,GAAa,EAAGpI,EAA8BqI,IAAIF,EAAOG,EAAiB,GAAIC,GAChFxC,EAASqC,EAAWrC,OACpBG,EAAQkC,EAAWlC,MACrB,MAAO,CACLA,MAAOA,EACPH,OAAQA,EACRyC,MAAOA,EACPC,eAAgBA,EAChBC,YAAaA,EACbC,cAAeA,EAEnB,EACIJ,EAAiB,SAAwBrC,GAC3C,IAAIxF,EAAOwF,GAAS,CAAC,EACnB5F,EAAaI,EAAKJ,WAClBsI,EAAYlI,EAAKkI,UACfC,EAAQvI,GAAc,CAAC,EACzBmC,EAAOoG,EAAMpG,KACXqG,EAAQrG,GAAQ,CAAC,EACnBsG,EAA0BD,EAAMC,wBAClC,GAAIzI,GAAcsI,EAAW,CAC3B,IAAII,GAAW,IAAIvE,MAAOC,UAAYkE,EAElCK,EAAYF,EAAwB,CACtCC,SAAUA,KAEZ,EAAG7I,EAAoBqE,IAAIyE,EAAUpF,OAAQoF,EAAUC,MACvDhD,EAAM0C,UAAY,CACpB,CACF,EAEID,EAAgB,SAAuB5C,EAAQtE,GACjDsE,EAAOM,MAAMC,KAAc,OAAT7E,QAA0B,IAATA,OAAkB,EAASA,EAAK0H,QACrE,EAEIT,EAAc,SAAqB3C,EAAQtE,GAChC,OAATA,QAA0B,IAATA,GAAmBA,EAAK2H,QAC3CrD,EAAOM,MAAMC,KAAK,gEAElBP,EAAOM,MAAMC,KAAK7E,EAAK0H,QAE3B,EAEIV,EAAiB,SAAwBhH,EAAMsE,GACjD,IAAIsD,EAAQtD,GAAU,CAAC,EACrBG,EAAQmD,EAAMnD,MAChB,IAAKzE,EAAK6H,WAAY,OAAOpD,EAAMqD,iBAAmB,GACtD,IAAIC,GAAkB,OAAT/H,QAA0B,IAATA,OAAkB,EAASA,EAAK6H,aAAe,CAAC,EAC5EG,EAAaD,EAAMC,WACnBC,EAAcF,EAAME,YACpBC,EAAgBH,EAAMG,cACtBC,EAAaJ,EAAMI,WACnBC,EAAkBL,EAAMK,gBACtBC,EAA4B,OAAlBH,QAA4C,IAAlBA,OAA2B,EAASA,EAAcI,MAAK,SAAUhJ,GACvG,OAAOA,EAAKiJ,GACd,IACIC,EAAsBH,EAAQG,oBAClC/D,EAAMgE,cAAgB,CACpBN,WAAYA,EACZC,gBAAiBA,GAEnB3D,EAAMqD,iBAAmB,CAAC,CACxBU,oBAAqBA,EACrBR,WAAYA,EACZC,YAAaA,EACbS,eAAgBnI,OAAO6H,IAE3B,EAEIvB,EAA+B,WACjC,IAAI8B,GAAQ,EAAGrK,EAA8BoB,IAAiB,EAAGrB,EAAgCqB,KAAKqC,MAAK,SAASC,EAAQsC,GAC1H,OAAO,EAAGjG,EAAgCqB,KAAKiD,MAAK,SAAkBC,GACpE,MAAO,SAAWA,EAASC,KAAOD,EAASE,MACzC,KAAK,EAOH,OANAwB,EAAOW,WAAa,SAAUjF,GAC5B,IAAI4I,EAAWtE,EAAOsE,SAClBC,GAAW,EAAG3K,EAA2BwB,GAAG,CAAC,EAAGM,GACpD4I,EAASC,EACX,EACAjG,EAASE,KAAO,EACT7B,EAAOa,mBAChB,KAAK,EAmBH,OAlBAc,EAASkG,GAAKlG,EAASkD,KACvBlD,EAASmG,GAAK,CAAC,EACfnG,EAASoG,IAAK,IAAIhG,MAAOC,UACzBqB,EAAOG,MAAQ,CACb3F,QAAS8D,EAASkG,GAClBjK,WAAY+D,EAASmG,GACrB5B,UAAWvE,EAASoG,KAGtB,EAAGtK,EAAoBqE,IAAI,CACzBzC,OAAQ,cACR+B,IAAKiC,EAAOG,MAAM3F,QAAQuD,IAC1BoB,QAASa,EAAOG,MAAM3F,QAAQ2E,SAC7B,OACH,EAAG/E,EAAmBuK,IAAI,CACxB3I,OAAQ,gBAEVgE,EAAO4E,MAAQ,IAAI7E,EAAMC,GAClB1B,EAASY,OAAO,SAAUc,EAAOG,OAC1C,KAAK,GACL,IAAK,MACH,OAAO7B,EAASiB,OAEtB,GAAG7B,EACL,KACA,OAAO,SAAyBmE,GAC9B,OAAOwC,EAAMvC,MAAM5B,KAAM6B,UAC3B,CACF,CAzCmC,GA0C/BU,EAAqB,WACvB,IAAIoC,GAAQ,EAAG7K,EAA8BoB,IAAiB,EAAGrB,EAAgCqB,KAAKqC,MAAK,SAASqH,EAAS9E,GAC3H,IAAIkB,EAAYC,EAAa4D,EAAaC,EACtCC,EAAezK,EAASgJ,EAAkBW,EAAehF,EAASC,EAAWC,EAAUlB,EAAM+G,EAAY3J,EAAKuC,EAAQC,EAAKsD,EAAM5G,EAAU2G,EAAa+D,EAC5J,OAAO,EAAGpL,EAAgCqB,KAAKiD,MAAK,SAAmB+G,GACrE,MAAO,SAAWA,EAAU7G,KAAO6G,EAAU5G,MAC3C,KAAK,EAIH,OAHAwB,EAAOM,MAAMC,KAAK,0CAAa,KAE/B6E,EAAU5G,KAAO,EACVyD,EAAyB7G,EAAEiK,MAAM,mBAC1C,KAAK,EAEH,OADAD,EAAU5G,KAAO,EACVyD,EAAyB7G,EAAEiK,MAAM,iBAC1C,KAAK,EAgBH,GAfAJ,EAAgBjF,EAAOG,MAAO3F,EAAUyK,EAAczK,QAASgJ,EAAmByB,EAAczB,iBAAkBW,EAAgBc,EAAcd,cAChJhF,EAAU3E,EAAQ2E,QAASC,EAAY5E,EAAQ4E,UAAWC,EAAW7E,EAAQ6E,SAAUlB,EAAO3D,EAAQ2D,KACtG+G,GAAa,EAAG7K,EAAoBO,MACpCW,EAAM2J,EAAWI,QACjBxH,EAAS,CACPqB,QAASA,EACTC,UAAWA,EACXC,SAAUA,EACVlB,KAAMA,EACNoH,WAAY,MACZC,QAAQ,EAAGpL,EAAiB8B,OAAS,cACrCuJ,WAAYvD,EAAwBwD,GAAGnK,IAEzCwC,EAAM,0EAEAyF,IAAoBA,EAAiB5B,OAAS,CAClDwD,EAAU5G,KAAO,GACjB,KACF,CAIA,OAHAV,EAAO6H,UAAYnC,EACnBzF,GAAO,oBACPqH,EAAU5G,KAAO,GACVyD,EAAuB7G,EAAEwK,IAAI,gBAAiBC,KAAKC,UAAU3B,IACtE,KAAK,GAGH,OAFA9C,EAAO,EAAC,EAAGW,EAAyB5G,GAAG0C,EAAQkC,EAAO3F,SACtD+K,EAAU5G,KAAO,GACVwB,EAAOuB,KAAK,CACjBF,KAAMA,IAEV,KAAK,GAGH,GAFA5G,EAAW2K,EAAU5D,KACrBxB,EAAOM,MAAMmB,OACNhH,EAAS,GAAGiB,MAA4K,QAApI,QAA9BwF,EAAazG,EAAS,UAA+B,IAAfyG,GAA4D,QAAlCA,EAAaA,EAAW6E,YAAiC,IAAf7E,OAAwB,EAASA,EAAW8E,QAAmB,CACpMZ,EAAU5G,KAAO,GACjB,KACF,CACA,OAAO4G,EAAUlG,OAAO,SAAUc,EAAOM,MAAMC,KAAK,sFACtD,KAAK,GACH,GAAsC,QAA/BY,EAAc1G,EAAS,UAAgC,IAAhB0G,GAA+D,QAApCA,EAAcA,EAAY4E,YAAkC,IAAhB5E,IAA0BA,EAAY6E,OAAS,CAClKZ,EAAU5G,KAAO,GACjB,KACF,CACA4G,EAAUZ,GAAqC,QAA/BpD,EAAc3G,EAAS,UAAgC,IAAhB2G,GAA+D,QAApCA,EAAcA,EAAY2E,YAAkC,IAAhB3E,OAAyB,EAASA,EAAY6E,QAC5Kb,EAAU5G,KAAwB,OAAjB4G,EAAUZ,GAAc,GAAK,GAC9C,MACF,KAAK,GAMH,OAJAxE,EAAOM,MAAMC,KAAK,0GAClBoB,YAAW,WACT3B,EAAO3G,KAAK,sCAAsC2F,OAAOvE,EAAS,GAAGiB,KAAKyD,UAAU,EACtF,GAAG,MACIiG,EAAUlG,OAAO,QAAS,IACnC,KAAK,GAkBH,OAjBAiG,EAAU,CACR,MAAO,uFACP,MAAO,6CACP,MAAO,6CACP,MAAO,2EACP,MAAO,gEACP,MAAO,iFACP,MAAO,2EACP,MAAO,8CAETnF,EAAOY,QAAQL,KAAK,CAClBO,QAASqE,EAAwC,QAA/BJ,EAActK,EAAS,UAAgC,IAAhBsK,GAA+D,QAApCA,EAAcA,EAAYgB,YAAkC,IAAhBhB,OAAyB,EAASA,EAAYkB,WAA6C,QAA/BjB,EAAcvK,EAAS,UAAgC,IAAhBuK,GAA+D,QAApCA,EAAcA,EAAYe,YAAkC,IAAhBf,OAAyB,EAASA,EAAYgB,SAAW,oFACnWjF,MAAO,CAAC,4BACRC,YAAa,CAAC,WACZhB,EAAO3G,KAAK,uBAAwB,YACtC,KAEK+L,EAAUlG,OAAO,QAAS,IACnC,KAAK,GACHkG,EAAU5G,KAAO,GACjB,MACF,KAAK,GAEH,OADA4G,EAAU5G,KAAO,GACVyD,EAAuB7G,EAAEwK,IAAI,kBAAmBC,KAAKC,UAAUrL,EAAS,KACjF,KAAK,GACHuF,EAAO3G,KAAK0E,GAAK,GACnB,KAAK,GACL,IAAK,MACH,OAAOqH,EAAU7F,OAEvB,GAAGuF,EACL,KACA,OAAO,SAAeoB,GACpB,OAAOrB,EAAM/C,MAAM5B,KAAM6B,UAC3B,CACF,CAvGyB,GAwGQoE,EAAS,EAEtCC,EAAgB5M,EAAoB,OAEpC6M,EAAe7M,EAAoB,OAEnC8M,EAAe9M,EAAoB,MAEnC+M,EAAe/M,EAAoB,OAEnCgN,EAAahN,EAAoB,OAKjCiN,EAAkBD,EAA+BE,GAAGC,IAAI,UAC1DC,EAAQH,EAAgBG,MACxBC,EAASJ,EAAgBI,OACvBC,EAAS,CACXC,OAAQ,CACNF,OAAQ,OACRG,QAAS,OACTC,cAAe,SACfC,gBAAiB,oBAEnBC,OAAQ,CACNC,SAAU,QACVC,OAAQ,EACRT,MAAOA,GAAQ,EAAGL,EAA4Be,IAAI,IAClDJ,gBAAiB,OACjBK,aAAa,EAAGhB,EAA4Be,IAAI,IAChDE,cAAc,EAAGjB,EAA4Be,IAAI,IACjDG,OAAQ,GACRZ,QAAQ,EAAGN,EAA4Be,IAAI,IAC3CN,QAAS,OACTU,WAAY,SACZC,UAAW,wCAEbC,aAAc,CACZC,WAAY,sEACZC,YAAY,EAAGvB,EAA4Be,IAAI,IAC/CS,eAAe,EAAGxB,EAA4Be,IAAI,IAClDU,UAAW,SACXC,cAAc,EAAG1B,EAA4Be,IAAI,GACjDV,MAAO,QAETsB,YAAa,CACXC,MAAO,OACPC,UAAU,EAAG7B,EAA4Be,IAAI,IAC7Ce,WAAY,QAEdC,gBAAiB,CACfzB,OAAQA,GAAS,EAAGN,EAA4Be,IAAI,IACpDJ,gBAAiB,WAEnBqB,UAAW,CACT1B,OAAQA,IAGqB2B,GAAS,EAAGlC,EAA0BlL,GAAG0L,GAEtE2B,EAAcjP,EAAoB,MAYtC,SAASkP,EAAOtG,GACd,IAAIuG,EAAaxC,EAAO/D,GAEtBpC,GADQ2I,EAAWxI,MACVwI,EAAW3I,QACpByC,EAAQkG,EAAWlG,MACnBC,EAAiBiG,EAAWjG,eAC5BkG,EAAeD,EAAWhG,YAC1BC,EAAgB+F,EAAW/F,cACzBjI,EAAOqF,EAAOG,OAAS,CAAC,EAC1B5F,EAAaI,EAAKJ,WAEhBuI,GADUnI,EAAKkI,UACPtI,GAAc,CAAC,GACzBc,EAAkByH,EAAMzH,gBACxBqB,EAAOoG,EAAMpG,KACXqG,EAAQrG,GAAQ,CAAC,EACnBmM,EAA0B9F,EAAM8F,wBAChCC,EAAyB/F,EAAM+F,uBACL/F,EAAMC,wBAClC,OAAOzI,GAA0B,EAAGkO,EAAYM,MAAMlP,EAA0BmP,GAAI,CAClFR,MAAOA,EAAMD,UACbU,SAAU,EAAc,EAAGR,EAAYS,KAAKrP,EAAgCsP,GAAI,CAC9EC,SAAS,EACTZ,MAAOA,EAAMF,gBACbe,YAAY,EACZJ,UAAuB,EAAGR,EAAYS,KAAKrP,EAA0BmP,GAAI,CACvEC,UAAuB,EAAGR,EAAYS,KAAKpP,EAAwBsB,GAAG,EAAGxB,EAA2BwB,IAAG,EAAGxB,EAA2BwB,GAAG,CAAC,EAAGC,GAAkB,CAAC,EAAG,CAChKiO,SAAU,SAAkB5N,GAC1B,OAAOgH,EAAehH,EAAMsE,EAC9B,EACAuJ,aAAa,EACbC,SAAS,EACTC,eAAe,EACf9G,YAAa,SAAqBjH,GAChC,OAAOkN,EAAa5I,EAAQtE,EAC9B,EACAgO,QAAS,SAAiBhO,GACxB,OAAOkH,EAAc5C,EAAQtE,EAC/B,UAGW,EAAG+M,EAAYS,KAAK9C,EAA2BhL,EAAG,CACjEuO,QAAS,WACP,OAAOlH,EAAMzC,EACf,EACAwI,MAAOA,EAAMrB,OACb/M,IAAKyO,EACLe,QAAQ,EAAGvD,EAA8BwD,IAAIf,EAAuBtM,IAAKsM,EAAuBhL,QAChGmL,UAAuB,EAAGR,EAAYS,KAAKrP,EAA0BmP,GAAI,CACvER,MAAOA,EAAMZ,aACbqB,UAAuB,EAAGR,EAAYS,KAAKrP,EAA0BiQ,GAAI,CACvEtB,MAAOA,EAAMN,YACbe,SAAU,8BAIb,IACP,CAC6B,IAAIc,EAAS,EAOTC,GAAe,EAAGrQ,EAAkByB,GAAG2O,GAAQ,EAAGrQ,EAA4B0B,GAAG,CAAC,EAAG8G,EAA2B+H,GAAGC,KAAM,kBAAmB,cAI5IC,EAAoB,EAGpBC,EAA4B,EAIzDC,EAAgB,CAAC,uBAAyB,qBAAM,uBAAyB,SAGlEC,MAAK,EAAG7Q,EAAY8Q,kBAAkBH,EAA2B,qDAAsD,CAACI,KAAK,CAACC,GAAG,KAAMJ,GAAiB,CAAC,GAK7J,EAED,MACA,SAAUK,GAEhBA,EAAOC,QAAUxR,QAAQ,4CAElB,EAED,MACA,SAAUuR,GAEhBA,EAAOC,QAAUxR,QAAQ,qCAElB,EAED,MACA,SAAUuR,GAEhBA,EAAOC,QAAUxR,QAAQ,4BAElB,EAED,MACA,SAAUuR,GAEhBA,EAAOC,QAAUxR,QAAQ,mCAElB,EAED,MACA,SAAUuR,GAEhBA,EAAOC,QAAUxR,QAAQ,4BAElB,GAGE,SAASK,GACT,IAAIoR,EAAmB,SAASC,GAAY,OAAOrR,EAAoBA,EAAoByD,EAAI4N,EAAW,EAC1GrR,EAAoBsR,EAAE,EAAG,CAAC,KAAK,KAAK,KAAK,OAAO,WAAa,OAAOF,EAAiB,MAAQ,IACnEpR,EAAoBsR,GAC9C","sources":["webpack://tarobaseproject/pages_tnt_business_booking_o2obooking_coupon_index.js"],"sourcesContent":["\"use strict\";\nrequire(\"../../../../taroCommon\");\n\n(wx[\"tripTaroGlobal30\"] = wx[\"tripTaroGlobal30\"] || []).push([[6174],{\n\n/***/ 98038:\n/***/ (function(__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) {\n\n\n// EXTERNAL MODULE: ./node_modules/@tarojs/runtime/dist/runtime.esm.js\nvar runtime_esm = __webpack_require__(32180);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(45023);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/common/page.tsx + 1 modules\nvar page = __webpack_require__(90134);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(298);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(90201);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/smart-component/index.ts + 25 modules\nvar smart_component = __webpack_require__(72747);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/common/component/ttd-marketing/use-coupon/index.tsx + 7 modules\nvar use_coupon = __webpack_require__(91501);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\nvar regeneratorRuntime = __webpack_require__(79301);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(95308);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/common/pure-component.ts\nvar pure_component = __webpack_require__(56034);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(90983);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/cwx/index.ts + 3 modules\nvar cwx = __webpack_require__(64571);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/log/index.ts + 1 modules\nvar log = __webpack_require__(61252);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/enviroment/header.ts\nvar header = __webpack_require__(99739);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/utils/metric.ts\nvar utils_metric = __webpack_require__(10395);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/tools/format/couponData.ts\n\n\n\n/* harmony default export */ var couponData = (function (request, response) {\n  var resourceList = (response === null || response === void 0 ? void 0 : response.resourceList) || [];\n  var _ref = (0,header/* default */.ZP)() || {},\n    enviroment = _ref.enviroment,\n    cid = _ref.cid;\n  resourceList.forEach(function (item) {\n    item.quantity = item.qty;\n    delete item.qty;\n  });\n  var metric = (0,utils_metric/* default */.Z)(request);\n  return {\n    useCouponParams: {\n      clientEnv: {\n        env: \"prod\",\n        ctType: 0,\n        clientType: 3 // H5 内嵌 APP 属于 APP 渠道\n      },\n\n      data: {\n        source: \"TICKET\",\n        //目前门票用券、玩乐领券\n        miniType: \"weapp\",\n        bookingInfo: {\n          resourceList: resourceList\n        },\n        allianceId: 0,\n        siteId: 0,\n        pageId: String((0,log/* getPgId */.dD)()),\n        locale: \"zh-CN\",\n        currency: \"CNY\",\n        clientId: cid,\n        saleChannel: 23,\n        extendInfoList: [{\n          key: \"needAutoReceive\",\n          value: \"true\"\n        }]\n      }\n    },\n    logs: metric\n  };\n});\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/tools/format/index.ts\n\n\n\n\n\n\n\n/* harmony default export */ var format = ({\n  getFormatByModules: function getFormatByModules(request, response, modules) {\n    var stateData = {\n      request: request\n    };\n    var _iterator = (0,createForOfIteratorHelper/* default */.Z)(modules),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var key = _step.value;\n        switch (key) {\n          case \"coupon-data\":\n            stateData.couponData = couponData(request, response);\n            break;\n          default:\n            break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    stateData.request = (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, request), {}, {\n      isShow: true\n    });\n    return stateData;\n  },\n  // 获取请求参数\n  getRequestParams: function getRequestParams() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee() {\n      var _instance$router, _instance$page;\n      var instance, params, url, code, oid, sign, from, _instance$router2;\n      return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            (0,log/* sendUbtLog */.Zz)({\n              key: \"menpiao_ticket_machine_metric\",\n              value: new Date().getTime(),\n              pos: \"3\"\n            }, \"devtrace\");\n            instance = (0,cwx/* getCurrentInstance */.FN)();\n            params = (instance === null || instance === void 0 || (_instance$router = instance.router) === null || _instance$router === void 0 ? void 0 : _instance$router.params) || {};\n            url = (instance === null || instance === void 0 || (_instance$page = instance.page) === null || _instance$page === void 0 ? void 0 : _instance$page.$taroPath) || \"\";\n            (0,log/* sendUbtLog */.Zz)({\n              key: \"menpiao_ticket_machine_metric\",\n              value: new Date().getTime(),\n              pos: \"4\"\n            }, \"devtrace\");\n            code = params.code, oid = params.oid, sign = params.sign; // 支付宝这里自动做了转码\n            from = \"\";\n            if (!oid) {\n              _context.next = 12;\n              break;\n            }\n            from = \"\".concat(instance === null || instance === void 0 || (_instance$router2 = instance.router) === null || _instance$router2 === void 0 ? void 0 : _instance$router2.path, \"?code=\").concat(code, \"&oid=\").concat(oid, \"&sign=\").concat(sign);\n            return _context.abrupt(\"return\", {\n              orderid: oid,\n              ordersign: sign,\n              salecode: code,\n              from: from,\n              isShow: false,\n              isError: false,\n              url: url\n            });\n          case 12:\n            return _context.abrupt(\"return\", {\n              isShow: false,\n              url: url\n            });\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n});\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(57042);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(24460);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/common/component/user-login/index.ts\nvar user_login = __webpack_require__(12232);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/router/index.ts\nvar router = __webpack_require__(28570);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/tools/fetch/getCouponData.ts\n/* harmony default export */ var getCouponData = (function (params, header) {\n  return {\n    request: Object.assign({}, header, params),\n    actionUrl: \"/restapi/soa2/15017/json/ticketMachineQueryTempOrderResource\"\n  };\n});\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/tools/fetch/index.ts\n\n\n\n\n\n\n\n\n\n\nvar Fetch = /*#__PURE__*/function () {\n  function Fetch(target) {\n    var _this = this;\n    (0,classCallCheck/* default */.Z)(this, Fetch);\n    (0,defineProperty/* default */.Z)(this, \"target\", void 0);\n    this.target = target;\n    var request = this.target.state.request;\n    if (request.orderid) {\n      (0,user_login/* default */.Z)(function (res) {\n        if ((res === null || res === void 0 ? void 0 : res.ReturnCode) == \"0\") {\n          target.toast.show(\"加载中...\");\n          _this.init(target);\n        } else {\n          // 页面返回到上一级\n          (0,router/* pop */.Sw)();\n        }\n      }, false, {\n        checkLoginStatusFromServer: true\n      } // 从服务端校验是否登录\n      );\n    } else {\n      target.afterFetch({\n        request: (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, request), {}, {\n          isShow: true,\n          isError: true\n        })\n      });\n      target.confirm.show({\n        title: \"提示\",\n        content: \"系统异常，请重新提交订单(10000)\",\n        btnOK: [\"确定\"],\n        btnCallBack: [function () {\n          target.push(\"pages/home/homepage\", true);\n        }]\n      });\n    }\n  }\n  (0,createClass/* default */.Z)(Fetch, [{\n    key: \"init\",\n    value: function () {\n      var _init = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(target) {\n        var _response$, _response$2, _response$3;\n        var request, orderid, ordersign, salecode, from, list, response, stateData;\n        return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              request = target.state.request;\n              orderid = request.orderid, ordersign = request.ordersign, salecode = request.salecode, from = request.from;\n              list = [getCouponData({\n                orderId: orderid\n              }, target.header)];\n              _context.next = 5;\n              return target.http({\n                list: list\n              });\n            case 5:\n              response = _context.sent;\n              target.toast.hide();\n              //订单已存在\n              if (!((_response$ = response[0]) !== null && _response$ !== void 0 && _response$.ctripOrderId)) {\n                _context.next = 11;\n                break;\n              }\n              target.toast.show(\"订单已生成，将自动跳转至订单详情页\");\n              setTimeout(function () {\n                target.push(\"/pages/ticket/order/detail?orderid=\".concat(response[0].ctripOrderId), true);\n              }, 1500);\n              return _context.abrupt(\"return\");\n            case 11:\n              if (!((_response$2 = response[0]) !== null && _response$2 !== void 0 && _response$2.resourceList && !response[0].resourceList.length)) {\n                _context.next = 14;\n                break;\n              }\n              target.confirm.show({\n                title: \"提示\",\n                content: \"订单已过期，请在机器上重新提交订单\",\n                btnOK: [\"确定\"],\n                btnCallBack: [function () {\n                  target.push(\"/pages/home/homepage\", \"switchTab\");\n                }]\n              });\n              return _context.abrupt(\"return\");\n            case 14:\n              if (!((_response$3 = response[0]) !== null && _response$3 !== void 0 && _response$3.resourceList)) {\n                target.confirm.show({\n                  title: \"提示\",\n                  content: \"订单已过期，请在机器上重新提交订单\",\n                  btnOK: [\"确定\"],\n                  btnCallBack: [function () {\n                    target.push(\"/pages/home/homepage\", \"switchTab\");\n                  }]\n                });\n              }\n              stateData = format.getFormatByModules(request, response[0], [\"coupon-data\"]);\n              target.afterFetch(stateData);\n              return _context.abrupt(\"return\");\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }]);\n  return Fetch;\n}();\n\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/booking/tools/fetch/createOrder.ts\nvar createOrder = __webpack_require__(73627);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/cache/index.ts\nvar cache = __webpack_require__(52066);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/enviroment/config.ts\nvar config = __webpack_require__(39140);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/action.ts\n\n\n\n\n\n\n\n\n\n\n\nvar useAction = function useAction(props) {\n  var _useTarget = (0,pure_component/* useTarget */.eG)(props, getInitialState, \"\", effectCallback),\n    target = _useTarget.target,\n    state = _useTarget.state;\n  return {\n    state: state,\n    target: target,\n    toPay: toPay,\n    onCouponSelect: onCouponSelect,\n    onAutoClaim: onAutoClaim,\n    onCouponError: onCouponError\n  };\n};\nvar effectCallback = function effectCallback(state) {\n  var _ref = state || {},\n    couponData = _ref.couponData,\n    startTime = _ref.startTime;\n  var _ref2 = couponData || {},\n    logs = _ref2.logs;\n  var _ref3 = logs || {},\n    act_tvmcoupon_load_time = _ref3.act_tvmcoupon_load_time;\n  if (couponData && startTime) {\n    var loadTime = new Date().getTime() - startTime;\n    //界面加载埋点\n    var meticdata = act_tvmcoupon_load_time({\n      loadTime: loadTime\n    });\n    (0,log/* sendUbtLog */.Zz)(meticdata.params, meticdata.type);\n    state.startTime = 0;\n  }\n};\n//惠惠券失败回调\nvar onCouponError = function onCouponError(target, data) {\n  target.toast.show(data === null || data === void 0 ? void 0 : data.message);\n};\n//自动领取回调\nvar onAutoClaim = function onAutoClaim(target, data) {\n  if (data !== null && data !== void 0 && data.success) {\n    target.toast.show(\"已为您自动领取优惠券\");\n  } else {\n    target.toast.show(data.message);\n  }\n};\n//优惠券选择\nvar onCouponSelect = function onCouponSelect(data, target) {\n  var _ref4 = target || {},\n    state = _ref4.state;\n  if (!data.couponInfo) return state.couponSelectData = [];\n  var _ref5 = (data === null || data === void 0 ? void 0 : data.couponInfo) || {},\n    couponCode = _ref5.couponCode,\n    promotionId = _ref5.promotionId,\n    deductionList = _ref5.deductionList,\n    couponName = _ref5.couponName,\n    deductionAmount = _ref5.deductionAmount;\n  var hitData = deductionList === null || deductionList === void 0 ? void 0 : deductionList.find(function (item) {\n    return item.hit;\n  });\n  var deductionStrategyId = hitData.deductionStrategyId;\n  state.couponDataNum = {\n    couponName: couponName,\n    deductionAmount: deductionAmount\n  };\n  state.couponSelectData = [{\n    deductionStrategyId: deductionStrategyId,\n    couponCode: couponCode,\n    promotionId: promotionId,\n    discountAmount: String(deductionAmount)\n  }];\n};\n// 初始化\nvar getInitialState = /*#__PURE__*/function () {\n  var _ref6 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee(target) {\n    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          target.afterFetch = function (data) {\n            var setState = target.setState;\n            var newState = (0,objectSpread2/* default */.Z)({}, data);\n            setState(newState);\n          };\n          _context.next = 3;\n          return format.getRequestParams();\n        case 3:\n          _context.t0 = _context.sent;\n          _context.t1 = {};\n          _context.t2 = new Date().getTime();\n          target.state = {\n            request: _context.t0,\n            couponData: _context.t1,\n            startTime: _context.t2\n          };\n          // 手动发送 pv\n          (0,log/* sendUbtLog */.Zz)({\n            pageId: \"10650080521\",\n            url: target.state.request.url,\n            orderid: target.state.request.orderid\n          }, \"pv\");\n          (0,log/* setParams */.PX)({\n            pageId: \"10650080521\"\n          });\n          target.fetch = new Fetch(target);\n          return _context.abrupt(\"return\", target.state);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getInitialState(_x) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar toPay = /*#__PURE__*/function () {\n  var _ref7 = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/(0,regeneratorRuntime/* default */.Z)().mark(function _callee2(target) {\n    var _response$, _response$2, _response$4, _response$5;\n    var _target$state, request, couponSelectData, couponDataNum, orderid, ordersign, salecode, from, headerInfo, env, params, url, list, response, _response$3, codeObj;\n    return (0,regeneratorRuntime/* default */.Z)().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          target.toast.show(\"正在创建订单...\", 1000);\n          //清空上次优惠信息\n          _context2.next = 3;\n          return cache/* default.clear */.Z.clear(\"ticketOrderData\");\n        case 3:\n          _context2.next = 5;\n          return cache/* default.clear */.Z.clear(\"couponDataNum\");\n        case 5:\n          _target$state = target.state, request = _target$state.request, couponSelectData = _target$state.couponSelectData, couponDataNum = _target$state.couponDataNum;\n          orderid = request.orderid, ordersign = request.ordersign, salecode = request.salecode, from = request.from;\n          headerInfo = (0,header/* default */.ZP)();\n          env = headerInfo.taroEnv;\n          params = {\n            orderid: orderid,\n            ordersign: ordersign,\n            salecode: salecode,\n            from: from,\n            payVersion: \"2.0\",\n            pageid: (0,log/* getPgId */.dD)() || \"10650000788\",\n            serverFrom: config/* serverfroms */.RN[env]\n          };\n          url = \"/pages/tnt/business/booking/o2obooking/booking/index?ishavecoupon=true\"; //支付页\n          //有优惠券场景\n          if (!(couponSelectData && couponSelectData.length)) {\n            _context2.next = 16;\n            break;\n          }\n          params.prominput = couponSelectData;\n          url += \"&isusecoupon=true\";\n          _context2.next = 16;\n          return cache/* default.set */.Z.set(\"couponDataNum\", JSON.stringify(couponDataNum));\n        case 16:\n          list = [(0,createOrder/* default */.Z)(params, target.header)];\n          _context2.next = 19;\n          return target.http({\n            list: list\n          });\n        case 19:\n          response = _context2.sent;\n          target.toast.hide();\n          if (!(!response[0].data || ((_response$ = response[0]) === null || _response$ === void 0 || (_response$ = _response$.head) === null || _response$ === void 0 ? void 0 : _response$.errmsg) === 1002)) {\n            _context2.next = 23;\n            break;\n          }\n          return _context2.abrupt(\"return\", target.toast.show(\"系统异常，请重新提交订单(10000-1)\"));\n        case 23:\n          if (!((_response$2 = response[0]) !== null && _response$2 !== void 0 && (_response$2 = _response$2.head) !== null && _response$2 !== void 0 && _response$2.errmsg)) {\n            _context2.next = 35;\n            break;\n          }\n          _context2.t0 = (_response$3 = response[0]) === null || _response$3 === void 0 || (_response$3 = _response$3.head) === null || _response$3 === void 0 ? void 0 : _response$3.errcode;\n          _context2.next = _context2.t0 === 1017 ? 27 : 30;\n          break;\n        case 27:\n          //重复下单\n          target.toast.show(\"订单已生成，将自动跳转至订单详情页\");\n          setTimeout(function () {\n            target.push(\"/pages/ticket/order/detail?orderid=\".concat(response[0].data.orderid), true);\n          }, 1500);\n          return _context2.abrupt(\"break\", 33);\n        case 30:\n          codeObj = {\n            20101: \"优惠券已被使用，本单无法使用\",\n            20102: \"超过了使用限制\",\n            20103: \"优惠券状态无效\",\n            20105: \"账户异常，优惠券不可使用\",\n            20108: \"优惠券异常,请稍后重试\",\n            20112: \"该优惠券当前时间段不可使用\",\n            20126: \"优惠券当前时间段不可使用\",\n            20133: \"优惠券尚未生效\"\n          };\n          target.confirm.show({\n            content: codeObj[(_response$4 = response[0]) === null || _response$4 === void 0 || (_response$4 = _response$4.head) === null || _response$4 === void 0 ? void 0 : _response$4.errcode] || ((_response$5 = response[0]) === null || _response$5 === void 0 || (_response$5 = _response$5.head) === null || _response$5 === void 0 ? void 0 : _response$5.errmsg) || \"系统异常，请重新提交订单(10000-1)\",\n            btnOK: [\"我知道了\"],\n            btnCallBack: [function () {\n              target.push(\"/pages/home/homepage\", \"switchTab\");\n            }]\n          });\n          return _context2.abrupt(\"break\", 33);\n        case 33:\n          _context2.next = 38;\n          break;\n        case 35:\n          _context2.next = 37;\n          return cache/* default.set */.Z.set(\"ticketOrderData\", JSON.stringify(response[0]));\n        case 37:\n          target.push(url, true);\n        case 38:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function toPay(_x2) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n/* harmony default export */ var action = (useAction);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/component/log-touchable/index.tsx + 1 modules\nvar log_touchable = __webpack_require__(59201);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/log/tools/exposure-log.ts\nvar exposure_log = __webpack_require__(50738);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/cwx/create-sheet.ts\nvar create_sheet = __webpack_require__(9353);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/style-format/index.ts + 20 modules\nvar style_format = __webpack_require__(17366);\n// EXTERNAL MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/base-component/system/tools/user-agent.ts\nvar user_agent = __webpack_require__(56569);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/style.ts\n\n\n\nvar _Dimensions$get = user_agent/* Dimensions.get */.Db.get(\"window\"),\n  width = _Dimensions$get.width,\n  height = _Dimensions$get.height;\nvar styles = {\n  m_main: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: \"rgb(239,239,239)\"\n  },\n  payBtn: {\n    position: \"fixed\",\n    bottom: 0,\n    width: width - (0,style_format/* scaleSize */.Vh)(32),\n    backgroundColor: \"#fff\",\n    paddingLeft: (0,style_format/* scaleSize */.Vh)(16),\n    paddingRight: (0,style_format/* scaleSize */.Vh)(16),\n    zIndex: 10,\n    height: (0,style_format/* scaleSize */.Vh)(60),\n    display: \"flex\",\n    alignItems: \"center\",\n    boxShadow: \"0px 6px 16px 2px rgba(0, 0, 0, 0.08)\"\n  },\n  payBtn_block: {\n    background: \"linear-gradient(90deg, rgb(255, 177, 20) 0%, rgb(255, 119, 0) 100%)\",\n    paddingTop: (0,style_format/* scaleSize */.Vh)(12),\n    paddingBottom: (0,style_format/* scaleSize */.Vh)(12),\n    textAlign: \"center\",\n    borderRadius: (0,style_format/* scaleSize */.Vh)(6),\n    width: \"100%\"\n  },\n  payBtn_font: {\n    color: \"#fff\",\n    fontSize: (0,style_format/* scaleSize */.Vh)(17),\n    fontWeight: \"bold\"\n  },\n  containerScroll: {\n    height: height - (0,style_format/* scaleSize */.Vh)(60),\n    backgroundColor: \"#f4f4f4\"\n  },\n  container: {\n    height: height\n  }\n};\n/* harmony default export */ var style = ((0,create_sheet/* default */.Z)(styles));\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2269);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/coupon.tsx\n\n\n\n\n\n\n\n\n\n\nfunction Coupon(props) {\n  var _useAction = action(props),\n    state = _useAction.state,\n    target = _useAction.target,\n    toPay = _useAction.toPay,\n    onCouponSelect = _useAction.onCouponSelect,\n    _onAutoClaim = _useAction.onAutoClaim,\n    onCouponError = _useAction.onCouponError;\n  var _ref = target.state || {},\n    couponData = _ref.couponData,\n    startTime = _ref.startTime;\n  var _ref2 = couponData || {},\n    useCouponParams = _ref2.useCouponParams,\n    logs = _ref2.logs;\n  var _ref3 = logs || {},\n    act_tvmcoupon_pay_click = _ref3.act_tvmcoupon_pay_click,\n    act_tvmcoupon_pay_expo = _ref3.act_tvmcoupon_pay_expo,\n    act_tvmcoupon_load_time = _ref3.act_tvmcoupon_load_time;\n  return couponData ? /*#__PURE__*/(0,jsx_runtime.jsxs)(smart_component/* View */.G7, {\n    style: style.container,\n    children: [/*#__PURE__*/(0,jsx_runtime.jsx)(smart_component/* ScrollView */.pf, {\n      scrollY: true,\n      style: style.containerScroll,\n      enableFlex: true,\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(smart_component/* View */.G7, {\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(use_coupon/* default */.Z, (0,objectSpread2/* default */.Z)((0,objectSpread2/* default */.Z)({}, useCouponParams), {}, {\n          onSelect: function onSelect(data) {\n            return onCouponSelect(data, target);\n          },\n          needPopover: false,\n          visible: true,\n          needCodeInput: false,\n          onAutoClaim: function onAutoClaim(data) {\n            return _onAutoClaim(target, data);\n          },\n          onError: function onError(data) {\n            return onCouponError(target, data);\n          }\n        }))\n      })\n    }), /*#__PURE__*/(0,jsx_runtime.jsx)(log_touchable/* default */.Z, {\n      onClick: function onClick() {\n        return toPay(target);\n      },\n      style: style.payBtn,\n      log: act_tvmcoupon_pay_click,\n      testID: (0,exposure_log/* exposureLog */.kI)(act_tvmcoupon_pay_expo.key, act_tvmcoupon_pay_expo.params),\n      children: /*#__PURE__*/(0,jsx_runtime.jsx)(smart_component/* View */.G7, {\n        style: style.payBtn_block,\n        children: /*#__PURE__*/(0,jsx_runtime.jsx)(smart_component/* Text */.xv, {\n          style: style.payBtn_font,\n          children: \"\\u53BB\\u652F\\u4ED8\"\n        })\n      })\n    })]\n  }) : null;\n}\n/* harmony default export */ var coupon = (Coupon);\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/page.tsx\n\n// import React from \"react\";\n\n\n\n/* harmony default export */ var coupon_page = ((0,page/* default */.Z)(coupon, (0,defineProperty/* default */.Z)({}, config/* EPlatform.Mini */.NX.Mini, \"ignore_page_pv\"), \"o2obooking\")); // 设置 pageid 为 ignore_page_pv 忽略掉框架发送 pv\n;// CONCATENATED MODULE: ./src/pages/tnt/xtaro-tnt-mini-bundle/common_module_dir/node_modules/@ctrip/taro-tnt/src/pages/tnt/booking/o2obooking/coupon/index.tsx\n\n\n/* harmony default export */ var o2obooking_coupon = (coupon_page);\n;// CONCATENATED MODULE: ./node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./src/pages/tnt/business/booking/o2obooking/coupon/index.tsx\n\n/* harmony default export */ var booking_o2obooking_coupon = (o2obooking_coupon);\n;// CONCATENATED MODULE: ./src/pages/tnt/business/booking/o2obooking/coupon/index.tsx\n\n\nvar coupon_config = {\"navigationBarTitleText\":\"优惠券\",\"navigationBarTextStyle\":\"black\"};\n\n\nvar inst = Page((0,runtime_esm.createPageConfig)(booking_o2obooking_coupon, 'pages/tnt/business/booking/o2obooking/coupon/index', {root:{cn:[]}}, coupon_config || {}))\n\n\n\n\n/***/ }),\n\n/***/ 79181:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../../../cwx/cpage/initNavigator\");\n\n/***/ }),\n\n/***/ 91783:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../../../cwx/cpage/ubt_wx\");\n\n/***/ }),\n\n/***/ 56884:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../../../cwx/cwx\");\n\n/***/ }),\n\n/***/ 65238:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../../../cwx/ext/global\");\n\n/***/ }),\n\n/***/ 33675:\n/***/ (function(module) {\n\nmodule.exports = require(\"../../../../../../cwx/cwx\");\n\n/***/ })\n\n},\n/******/ function(__webpack_require__) { // webpackRuntimeModules\n/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }\n/******/ __webpack_require__.O(0, [3177,2107,1216,8592], function() { return __webpack_exec__(98038); });\n/******/ var __webpack_exports__ = __webpack_require__.O();\n/******/ }\n]);;"],"names":["require","wx","push","__unused_webpack_module","__unused_webpack___webpack_exports__","__webpack_require__","runtime_esm","defineProperty","page","objectSpread2","smart_component","use_coupon","regeneratorRuntime","asyncToGenerator","pure_component","createForOfIteratorHelper","cwx","log","header","utils_metric","couponData","request","response","resourceList","_ref","ZP","cid","enviroment","forEach","item","quantity","qty","metric","Z","useCouponParams","clientEnv","env","ctType","clientType","data","source","miniType","bookingInfo","allianceId","siteId","pageId","String","dD","locale","currency","clientId","saleChannel","extendInfoList","key","value","logs","format","getFormatByModules","modules","_step","stateData","_iterator","s","n","done","err","e","f","isShow","getRequestParams","mark","_callee","_instance$router","_instance$page","instance","params","url","code","oid","sign","from","_instance$router2","wrap","_context","prev","next","Zz","Date","getTime","pos","FN","router","$taroPath","concat","path","abrupt","orderid","ordersign","salecode","isError","stop","classCallCheck","createClass","user_login","getCouponData","Object","assign","actionUrl","Fetch","target","_this","this","state","res","ReturnCode","toast","show","init","Sw","checkLoginStatusFromServer","afterFetch","confirm","title","content","btnOK","btnCallBack","_init","_response$","_response$2","_response$3","list","orderId","http","sent","hide","ctripOrderId","setTimeout","length","_x","apply","arguments","createOrder","cache","config","useAction","props","_useTarget","eG","getInitialState","effectCallback","toPay","onCouponSelect","onAutoClaim","onCouponError","startTime","_ref2","_ref3","act_tvmcoupon_load_time","loadTime","meticdata","type","message","success","_ref4","couponInfo","couponSelectData","_ref5","couponCode","promotionId","deductionList","couponName","deductionAmount","hitData","find","hit","deductionStrategyId","couponDataNum","discountAmount","_ref6","setState","newState","t0","t1","t2","PX","fetch","_ref7","_callee2","_response$4","_response$5","_target$state","headerInfo","codeObj","_context2","clear","taroEnv","payVersion","pageid","serverFrom","RN","prominput","set","JSON","stringify","head","errmsg","errcode","_x2","action","log_touchable","exposure_log","create_sheet","style_format","user_agent","_Dimensions$get","Db","get","width","height","styles","m_main","display","flexDirection","backgroundColor","payBtn","position","bottom","Vh","paddingLeft","paddingRight","zIndex","alignItems","boxShadow","payBtn_block","background","paddingTop","paddingBottom","textAlign","borderRadius","payBtn_font","color","fontSize","fontWeight","containerScroll","container","style","jsx_runtime","Coupon","_useAction","_onAutoClaim","act_tvmcoupon_pay_click","act_tvmcoupon_pay_expo","jsxs","G7","children","jsx","pf","scrollY","enableFlex","onSelect","needPopover","visible","needCodeInput","onError","onClick","testID","kI","xv","coupon","coupon_page","NX","Mini","o2obooking_coupon","booking_o2obooking_coupon","coupon_config","Page","createPageConfig","root","cn","module","exports","__webpack_exec__","moduleId","O"],"sourceRoot":""}