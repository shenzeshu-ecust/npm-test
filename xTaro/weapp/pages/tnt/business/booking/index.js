"use strict";require("../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[7370],{98746:function(e,t,n){var r=n(32180),o=n(45023),i=n(90134),a=n(39140),s=n(298),l=n(57042),c=n(24460),u=n(81876),d=n(21867),p=n(86066),h=n(90201),f=n(72747),g=n(22586),m=n(17366),v=n(9353),_=n(99739),y=n(56569),x=y.Db.get("window").height,b=(0,y.cY)()?(0,m.Vh)(88):(0,m.Vh)(64),Z=function(e){return{backgroundColor:e}},I={paddingLeft:(0,m.Vh)(8),paddingRight:(0,m.Vh)(8)},C=(0,_.ZP)(),k=C.taroEnv,w=k===_.fO.alipay?"100vh":"100%",T={m_booking_container:{width:"100%",height:w,display:"flex",flexDirection:"column",zIndex:1,flex:1},m_booking_view:{flexShrink:(0,m.i4)(1),height:"100%",overflow:"hidden"},m_booking_view_update:{borderTopWidth:1/(0,y.md)(),borderTopColor:"#d2d2d2",borderTopStyle:"solid"},blue_hold:{position:"absolute",top:(0,m.Vh)(-500),left:(0,m.Vh)(0),width:"100%",zIndex:0,height:(0,m.Vh)(700)},m_booking_content:{height:C.isSwan?x-b:"100%",overflow:[_.fO.weapp,_.fO.rn].includes(k)?"hidden":"auto",backgroundColor:"#EBEFF5",position:"relative"},m_content_color:Z,padd_left_right_8:I,m_booking_content_title_wrap:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_booking_content_title:{color:"#111",fontFamily:"PingFang SC",fontSize:(0,m.Vh)(17),fontWeight:"600",height:(0,m.Vh)(21)},m_sku_inner:(0,s.Z)((0,s.Z)({position:"relative"},(0,m.e6)((0,m.Vh)(12),(0,m.Vh)(12))),{},{borderRadius:(0,m.Vh)(8),overflow:"hidden"}),m_sku_topBorder:{width:"100%",height:(0,m.Vh)(0),borderWidth:(0,m.Vh)(1),borderColor:"#ddd",borderStyle:"dashed",borderRadius:(0,m.Vh)(.1),marginTop:(0,m.Vh)(-1)},m_sku_dot:{backgroundColor:"#EBEFF5",borderRadius:(0,m.Vh)(9),height:(0,m.Vh)(12),width:(0,m.Vh)(12),position:"absolute",top:(0,m.Vh)(-6),zIndex:1},left:{left:(0,m.Vh)(-6)},right:{right:(0,m.Vh)(-6)},calendar_container_hidden:{display:"none"},m_booking_scrollView:{height:(0,m.Vh)(8),backgroundColor:"transparent"},m_booking_clause_wrapper:{paddingLeft:(0,m.Vh)(16),paddingRight:(0,m.Vh)(16)},m_booking_login:{color:"#0066F6",fontSize:(0,m.Vh)(15),height:44,fontWeight:(0,m.Ue)("500"),lineHeight:(0,m.Nv)(44),width:"100%"},m_dis_contents:(0,s.Z)({},(0,m.o3)(0,(0,m.Vh)(12))),m_addition_wrapper:(0,s.Z)((0,s.Z)({position:"relative",backgroundColor:"#fff",borderRadius:(0,m.Vh)(8),overflow:"hidden",marginTop:(0,m.Vh)(12),backgroundSize:"100% ".concat((0,m.Vh)(58,{needPx:!0}),"px"),backgroundRepeat:"no-repeat",backgroundPosition:"right top"},(0,m.ix)("border-box")),{},{paddingTop:(0,m.Vh)(30)}),m_addition_img_style:{width:"100%",height:(0,m.Vh)(50)},m_booking_breath:{width:"100%",overflow:"hidden",display:"flex",flexDirection:"column",zIndex:1,height:w},m_footer_long:{paddingBottom:(0,m.Vh)(22)}},S=(0,v.Z)({risk_tips_container:{paddingLeft:(0,m.Vh)(28),paddingRight:(0,m.Vh)(28),paddingTop:(0,m.Vh)(12),paddingBottom:(0,m.Vh)(12),height:"auto"},risk_tips_label:{marginRight:0,fontWeight:"normal",fontSize:(0,m.Vh)(13)},risk_tips_banner_title:{fontSize:(0,m.Vh)(13),width:1},risk_tips_count:{fontSize:(0,m.Vh)(13)},risk_tips_forword_icon:{marginLeft:0}}),P=(0,v.Z)(T),L=n(48118),N={m_reservation_terms_breathe:(0,s.Z)((0,s.Z)({},(0,m.o3)((0,m.Vh)(12),(0,m.Vh)(28))),{},{backgroundColor:"#fff"})},j=(0,v.Z)(N),D={m_breathe_list_row_container:{display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",flexWrap:"nowrap"},m_element_breathe:{width:"100%",height:14,display:"flex",alignItems:"center",backgroundColor:"#f5f5fa",opacity:.9,borderRadius:2},breatLoading:(0,s.Z)({},(0,m.oQ)("skeleton-loading 1.5s ease infinite"))},V=(0,v.Z)(D),E=n(56034),R=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,l.Z)(this,n),r=t.call(this,e),(0,o.Z)((0,u.Z)(r),"state",void 0),r.state={opacityAnimates:new f.fS.Value(.9)},r}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"loopAnimated",value:function(){var e=this;f.fS.sequence([f.fS.timing(this.state.opacityAnimates,{toValue:.3,duration:500,easing:f.oY.linear,useNativeDriver:!0,isInteraction:!1}),f.fS.timing(this.state.opacityAnimates,{toValue:.6,duration:500,easing:f.oY.linear,useNativeDriver:!0,isInteraction:!1})]).start((function(){return e.loopAnimated()}))}}]),n}(E.ZP),A=n(64571),F=n(2269),M=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){this.state.opacityAnimates;var e=this.props,t=e.config,n=e.space,r=e.justify;return(0,F.jsx)(f.G7,{children:t.map((function(e,t){return(0,F.jsx)(f.G7,{style:(0,A.kg)({marginBottom:n}),children:(0,F.jsx)(f.G7,{style:(0,m.wh)([V.m_breathe_list_row_container,r?{justifyContent:r}:{}]),children:e.map((function(e,t){if(e)return(0,F.jsx)(f.G7,{style:(0,m.wh)([V.m_element_breathe,(0,A.kg)({width:e.width||"100%",height:e.height||14,background:e.background,backgroundColor:e.background||"#f5f5fa"}),V.breatLoading])},t)}))})},t)}))})}}]),n}(R),O=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e="#EBEFF5",t=19;return(0,F.jsx)(f.G7,{style:j.m_reservation_terms_breathe,children:(0,F.jsx)(M,{config:[[{width:"45%",height:t,background:e}],[{width:"100%",height:t,background:e}],[{width:"100%",height:t,background:e}]],space:(0,m.Vh)(8)})})}}]),n}(h.Component),B={m_sku_breathe:(0,s.Z)((0,s.Z)((0,s.Z)({},(0,m.o3)((0,m.Vh)(20),(0,m.Vh)(16),(0,m.Vh)(16))),{},{position:"relative",backgroundColor:"#fff"},(0,m.e6)((0,m.Vh)(12),(0,m.Vh)(12),0)),{},{borderRadius:(0,m.Vh)(8)}),m_breathe_space12:{height:(0,m.Vh)(12)},m_breathe_space:{display:"flex",height:(0,m.Vh)(8),backgroundColor:"transparent"}},G=(0,v.Z)(B),H=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e="#EBEFF5",t={width:"19%",height:(0,m.Vh)(73),background:e},n={width:"45%",height:(0,m.Vh)(19),background:e},r={width:"100%",height:(0,m.Vh)(19),background:e},o={width:"100%",height:(0,m.Vh)(1),background:e};return(0,F.jsxs)(f.G7,{style:G.m_sku_breathe,children:[(0,F.jsx)(M,{config:[[n],[t,t,t,t,t]],space:(0,m.Vh)(12)}),(0,F.jsx)(f.G7,{style:G.m_breathe_space}),(0,F.jsx)(M,{config:[[o]],space:(0,m.Vh)(20)}),(0,F.jsx)(M,{config:[[n],[r],[r]],space:(0,m.Vh)(8)}),(0,F.jsx)(f.G7,{style:(0,m.wh)([G.m_breathe_space,G.m_breathe_space12])}),(0,F.jsx)(M,{config:[[o]],space:(0,m.Vh)(20)}),(0,F.jsx)(M,{config:[[n],[r]],space:(0,m.Vh)(8)})]})}}]),n}(h.Component),z={m_passenger_breathe:(0,s.Z)((0,s.Z)({backgroundColor:"#fff"},(0,m.o3)((0,m.Vh)(20),(0,m.Vh)(16))),{},{margin:(0,m.Vh)(12),borderRadius:(0,m.Vh)(8)}),m_breathe_space:{display:"flex",height:16,backgroundColor:"transparent"}},U=(0,v.Z)(z),q=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n)}(E.ZP),W=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e="#EBEFF5",t={width:"45%",height:(0,m.Vh)(19),background:e},n={width:"81.5%",height:(0,m.Vh)(19),background:e};return(0,F.jsxs)(f.G7,{style:U.m_passenger_breathe,children:[(0,F.jsx)(M,{config:[[t]],space:(0,m.Vh)(12)}),(0,F.jsx)(M,{config:[[n]],space:(0,m.Vh)(12),justify:"flex-end"}),(0,F.jsx)(M,{config:[[t]],space:(0,m.Vh)(12)}),(0,F.jsx)(M,{config:[[n]],space:(0,m.Vh)(12),justify:"flex-end"}),(0,F.jsx)(f.G7,{style:U.m_breathe_space})]})}}]),n}(q),K={ReservationTermsBreathe:O,SkuComponentBreathe:H,PassengerBreathe:W},J=n(88592),X=n(59201),Q=function(e){return!1},$=n(70614),Y=n(72613),ee=n(40771),te=n(30492),ne=n(121),re=n(91652),oe=(0,Y.Z)("booking"),ie=(0,y.Z6)(),ae=te.Z,se=te.Z,le=te.Z,ce=te.Z,ue=te.Z,de=te.Z,pe=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var n;(0,l.Z)(this,r);var i=(0,ee.b6)("Loadjs");return i&&(oe.set("Loadjs",i),oe.recordEnd("Loadjs"),(0,ee.ku)("Loadjs")),n=t.call(this,e),(0,o.Z)((0,u.Z)(n),"panResponder",void 0),n.panResponder=f.Cf.create({onStartShouldSetPanResponder:function(e,t){return n.getUserOperationed(),!0}}),n}return(0,c.Z)(r,[{key:"renderBreath",value:function(){var e=this.state.request,t=this.pageConfig[$.g.themeColor]||"#EBEFF5";return(0,F.jsxs)(f.G7,{style:(0,m.wh)([P.m_content_color(t),P.m_booking_breath]),children:[(0,F.jsx)(K.ReservationTermsBreathe,{}),e&&!(e.originCount&&e.originCount.length)&&(0,F.jsx)(K.SkuComponentBreathe,{}),(0,F.jsx)(K.PassengerBreathe,{})]})}},{key:"renderBoby",value:function(){var e,t,r=this,o=this.state,i=o.passengerList,a=o.reservationTerms,l=o.sku,c=o.request,u=o.errorTips,d=o.isSaleOut,p=o.anchor,h=o.scrollAnchor,v=o.noticeTips,_=o.showPayingStep,y=o.passengerModal,x=o.warn_background,b=o.appendInfoList,Z=o.commonInfo,I=o.holiday,C=o.ABTest,k=o.retainTips,w=o.recommend,T=o.passengerCheckErr,L=o.isAgreeChild,N=o.clauseShowPosition,j=o.isClauseError,D=o.isAuthorizedOversea,V=void 0!==D&&D,E=o.coupon,R=o.isLogin,A=o.limitType,M=c&&c.stepMode,O=(!c.date||!c.optid.length)&&c.aggregation,B=this.pageConfig[$.g.themeColor]||"#EBEFF5",G=!(null===v||void 0===v||null===(e=v.content)||void 0===e||!e.length),H=c.isFromSku||!(null===(t=c.originCount)||void 0===t||!t.length)||"U"==(null===l||void 0===l?void 0:l.priceMode)||(null===a||void 0===a?void 0:a.isAllValid);H&&(ae=n(18403).Z),d&&(se=n(20225).Z),G&&(le=n(61470).Z),M&&(ce=n(35213).Z);var z=n(39328).Z,U=n(65549).Z,q=n(55478).Z;return(0,F.jsx)(f.pf,{ref:function(e){return r.scrollView_ref=e},style:(0,m.wh)([P.m_booking_view,P.m_booking_content]),scrollY:!0,scrollIntoView:h,scrollWithAnimation:this.fetchStatus>1,onScroll:function(e){e.persist&&e.persist(),r.onScroll(e)},keyboardShouldPersistTaps:"handled",onScrollBeginDrag:f.N1.dismiss,contentContainerStyle:{height:d?"100%":"auto"},scrollEventThrottle:16,keyboardDismissMode:"on-drag",children:(0,F.jsxs)(g.s.Provider,{value:{passengerError:u.errorTipsPassenger||[],contactError:u.errorTipsContact||[],insuranceError:u.errorTipsInsurance||[],appendInfoError:u.errorTipsAppendInfo||[],additionalPassengerError:u.errorTipsAdditionalPassenger||[]},children:[!d&&(0,F.jsxs)(F.Fragment,{children:[M?(0,F.jsx)(ce,{mode:M,step:_?3:2}):null,(0,F.jsx)(q,{name:"booking_head",show:G,aniStyle:P.m_content_color(B),AniComp:(0,F.jsx)(F.Fragment,{children:G?(0,F.jsx)(le,(0,s.Z)((0,s.Z)({logs:this.logData.globalTipsLog},v),{},{showIcon:!1,showCount:!0,iconSize:32,backgroundColor:"#fff",fstyle:S})):null}),Siblings:(0,F.jsxs)(F.Fragment,{children:[H&&(0,F.jsx)(ae,(0,s.Z)((0,s.Z)({logs:this.logData.reservationLog},a),{},{request:c,changeSkuData:this.changeSkuData.bind(this),priceMode:null===l||void 0===l?void 0:l.priceMode,refreshCount:this.refreshCount})),c&&!(c.originCount&&c.originCount.length)&&(0,F.jsx)(f.G7,{style:P.m_sku_inner,children:(0,F.jsx)(z,(0,s.Z)((0,s.Z)({setRef:this.setRef.bind(this)},l),{},{refreshSku:this.refreshSku,waitCalendar:this.waitCalendar,ticketInfo:{ticketTitle:H?"":a.title},logs:this.logData.skuLog,anchor:p,request:(0,ne.I8)(c),fetchStatus:this.fetchStatus,changeCalender:this.changeCalender.bind(this),changeCount:this.changeCount.bind(this),changeRecom:this.changeRecom.bind(this),handleErrorToast:O?this.handleErrorToast.bind(this):null,holiday:I,calendarTip:c.isNewNaquhua?"\u8bf7\u9009\u62e9\u65e5\u671f\uff0c\u9009\u4e2d\u540e\u5c55\u793a\u62ff\u53bb\u82b1\u4f18\u60e0":"",excitationTips:null===k||void 0===k?void 0:k.excitationTips}))}),(0,F.jsxs)(f.G7,{style:P.m_dis_contents,children:[(0,F.jsx)(U,{logs:this.logData.passengerLog,setRef:this.setRef.bind(this),passengerModal:y,passengerList:i,changeContact:this.changeContact.bind(this),changeMobilePop:this.changeMobilePop.bind(this),changePassenger:this.changePassenger.bind(this),addPassenger:this.addPassenger.bind(this),errorTips:x,limitType:A,appendInfoList:b,commonInfo:Z,onAppendInfoChange:this.onAppendInfoChange.bind(this),clearAppendInfoError:this.clearAppendInfoError.bind(this),onUpdatePassengerFromNewGuest:this.onUpdatePassengerFromNewGuest.bind(this),handleErrorToast:O?this.handleErrorToast.bind(this):null,showMask:O||!this.logInited,btnColor:this.pageConfig[$.g.passengerColor],request:c,ABTest:C,clearPassengerError:this.clearPassengerError.bind(this),recommend:w,showRecommendPop:this.showRecommendPop.bind(this),passengerCheckErr:T,isAgreeChild:L,onChangeAgree:this.onChangeAgreeChild.bind(this),isAuthorizedOversea:V,onChangeAuthorize:this.onChangeAuthorize.bind(this),clauseShowPosition:N,checkClauseShowPosition:this.checkClauseShowPosition.bind(this),isClauseError:j,clauseLogs:this.logData.clauseLog,couponItem:((null===E||void 0===E?void 0:E.discountDataList)||[])[0]||{},couponLog:this.logData.couponUserNameLog,anchor:p,forceRefreshCoupon:this.forceRefreshCoupon.bind(this),goLogin:this.goLogin.bind(this),isLogin:R}),2===this.fetchStatus&&this.renderSecondScreen()]}),(0,F.jsx)(f.G7,{style:P.m_booking_scrollView})]})})]}),d&&(0,F.jsx)(se,{})]})})}},{key:"renderSecondScreen",value:function(){var e,t,r,o,i,a=this,l=n(51706).Z,c=n(21825).Z,u=n(83427).Z,d=n(57129).Z,p=n(21184).Z,h=n(17476).Z,g=n(99840).Z,v=this.state,_=v.insurance,y=v.request,x=v.passengerList,b=v.isShowInsurancePoplayer,Z=v.coupon,I=v.bargain,C=v.overdraft,k=v.additionalSale,w=v.passengerModal,T=v.contract,S=v.anchor,N=v.isAgreeChild,j=v.crossCouponList,D=v.MindTourHide,V=v.ABTest,E=v.isShowFooterClause,R=v.clauseShowPosition,A=v.isClauseError,M=!!((null===Z||void 0===Z||null===(e=Z.couponParams)||void 0===e||null===(e=e.data)||void 0===e||null===(e=e.bookingInfo)||void 0===e||null===(e=e.resourceList)||void 0===e?void 0:e.length)>0),O=!y.date&&(null===_||void 0===_?void 0:_.isCancelInsurance)||this.pageConfig[$.g.insurance],B=this.isSelectChild();return(0,F.jsxs)(f.G7,{children:[null===_||void 0===_||!_.insuranceInfo||O||ie?null:(0,F.jsx)(f.Zy,{style:(0,m.wh)([P.m_addition_wrapper]),imageStyle:P.m_addition_img_style,url:y.insuranceId?"https://dimg04.c-ctrip.com/images/0AS1b12000a66crf85281.png_.webp":"https://dimg04.c-ctrip.com/images/0AS2d12000a69g8z1AE3B.png_.webp",children:null===_||void 0===_||!_.insuranceInfo||O||ie?null:(0,F.jsx)(l,(0,s.Z)((0,s.Z)({logs:this.logData.insuranceLog,setRef:this.setRef.bind(this)},_),{},{insuranceId:y&&y.insuranceId,resourceId:y&&y.optid&&y.optid[0],passengerList:x,passengerModal:w,isShowInsurancePoplayer:b,changeInsurance:this.changeInsurance.bind(this),changeInsuredPerson:this.changeInsuredPerson.bind(this),changeInsurancePassenger:this.changeInsurancePassenger.bind(this),addInsurance:this.addInsurance.bind(this),clearInsuranceError:this.clearInsuranceError.bind(this),isAgreeChild:N,onChangeAgree:this.onChangeAgreeChild.bind(this),ABTest:V,clauseShowPosition:R,checkClauseShowPosition:this.checkClauseShowPosition.bind(this),isClauseError:A,clauseLogs:this.logData.clauseLog}))}),!this.pageConfig[$.g.additionalSale]&&null!==k&&void 0!==k&&null!==(t=k.resources)&&void 0!==t&&t.length?(0,F.jsx)(f.Zy,{style:(0,m.wh)([P.m_addition_wrapper]),imageStyle:P.m_addition_img_style,url:"https://dimg04.c-ctrip.com/images/0AS1h12000a66csu9F19E.png_.webp",children:!this.pageConfig[$.g.additionalSale]&&k&&k.resources&&k.resources.length?(0,F.jsx)(p,{additionalSale:k,logs:this.logData.additionalSaleLog,passengerList:x,anchor:S,addPassenger:this.addAdditionPassenger.bind(this),changeAdditionalCount:this.changeAdditionalCount.bind(this),changeAdditionalPassenger:this.changeAdditionalPassenger.bind(this),changeAdditionalContact:this.changeAdditionalContact.bind(this),request:y,showBuyNoteDetail:this.showBuyNoteDetail.bind(this),setRef:this.setRef.bind(this),devTraceKeyData:this.devTraceKeyData,isAgreeChild:N,onChangeAgree:this.onChangeAgreeChild.bind(this),ABTest:V,clauseShowPosition:R,checkClauseShowPosition:this.checkClauseShowPosition.bind(this),isClauseError:A,clauseLogs:this.logData.clauseLog}):null}):null,((null===Z||void 0===Z||null===(r=Z.discountList)||void 0===r?void 0:r.length)>0||(null===Z||void 0===Z||null===(o=Z.cashBackList)||void 0===o?void 0:o.length)>0||(null===Z||void 0===Z||null===(i=Z.discountDataList)||void 0===i?void 0:i.length)>0||(null===j||void 0===j?void 0:j.length)>0)&&(0,F.jsx)(c,(0,s.Z)((0,s.Z)({},Z),{},{bargain:I,crossCouponList:j,logs:this.logData.couponLog,isSelectedDate:M,changeCoupon:this.changeDiscount.bind(this),openUseCoupon:this.openUseCoupon.bind(this),onShowCrossCoupon:this.onShowCrossCoupon})),!this.pageConfig[$.g.naquhua]&&C&&C.isUsable?(0,F.jsx)(d,(0,s.Z)((0,s.Z)({},C),{},{logs:this.logData.overdraftLog,onUpdateOverdraftTerm:this.changePayPeriodsInfo.bind(this)})):null,(V&&E||!V&&B)&&(0,F.jsx)(X.Z,{id:"clause",activeOpacity:1,ref:function(e){return a.setRef("clause",e)},style:P.m_booking_clause_wrapper,children:(0,F.jsx)(g,{isAgree:N,onChangeAgree:this.onChangeAgreeChild.bind(this),clauseText:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f",clickTraceLog:this.logData.footerLog.clauseClickTraceLog,isAtBottom:!0,fstyle:V?L.Ze:{},ABTest:V,isError:A})}),T?(0,F.jsx)(h,(0,s.Z)((0,s.Z)({},T),{},{bottomBorderHide:D||this.pageConfig[$.g.mindTour],traceLog:this.logData.footerLog.contractTraceLog})):null,!(D||this.pageConfig[$.g.mindTour])&&(0,F.jsx)(u,{traceLog:this.logData.footerLog.anxindingClickTraceLog,logs:this.logData.mindTourLog})]})}},{key:"renderCoupon",value:function(){var e,t=n(91501).Z,r=this.state,o=r.isSaleOut,i=r.coupon,a=r.couponPoplayer,l=!!((null===i||void 0===i||null===(e=i.couponParams)||void 0===e||null===(e=e.data)||void 0===e||null===(e=e.bookingInfo)||void 0===e||null===(e=e.resourceList)||void 0===e?void 0:e.length)>0),c=this.isH5;return(0,F.jsx)(F.Fragment,{children:l&&i&&i.couponParams&&!o&&(0,F.jsx)(t,(0,s.Z)((0,s.Z)({},i.couponParams),{},{visible:!(null===a||void 0===a||!a.visible),onClose:this.closeUseCoupon.bind(this),style:c?{zIndex:203}:{},onSelect:function(e,t){return function(n){e.onSelectCoupon(n,t,(null===a||void 0===a?void 0:a.visible)||e.isBookingRefresh),e.isBookingRefresh&&(e.isBookingRefresh=!1)}}(this,this.changeKey)}))})}},{key:"renderCrossCoupon",value:function(){var e=this,t=n(38780).Z,r=this.state,o=r.crossCouponParams,i=r.isShowCrossCoupon;this.platform==a.NX.RN||(this.platform,a.NX.H5);return o&&(0,F.jsx)(t,{data:o.data,visible:i,title:"\u8d60\u5238",onLoad:this.onLoadCrossCoupon,onClose:function(){e.onShowCrossCoupon(!1)},clientEnv:o.clientEnv,traceLogId:o.traceLogId})}},{key:"render",value:function(){var e,t=this,r=n(78942).Z,o=n(2348).Z,i=n(58013).Z,l=this.state,c=l.request,u=l.showPayingStep,d=l.footer,p=l.isSaleOut,h=l.footerTips,g=l.imInfo,v=l.userOperationed,_=l.isLogin,x=l.isHideHead,b=l.IMHide,Z=l.needUpdate,I=this.logData.imLog,C=I||{},k=C.imExposureLog,w=c&&c.stepMode,T=this.pageConfig[$.g.themeColor]||"transparent",S="#111111",L=h&&h.length&&h[0].text;L&&(ue=n(80842).Z);var N=g&&!(b||this.pageConfig[$.g.im]);return N&&(de=n(50570).Z),(0,F.jsxs)(f.G7,(0,s.Z)((0,s.Z)({style:P.m_booking_container},v?{}:this.panResponder.panHandlers),{},{className:"m_passenger_input_info_container",children:[!this.pageConfig[$.g.titlebar]&&(0,F.jsx)(r,{height:x?0:44,statusBarBg:T,barStyle:"dark-content",translucent:!0,logs:this.logData.headerLog,leftClick:function(){t.onBack()},leftIconColor:S,backgroundColor:T,renderLeftView:this.pageConfig[$.g.titlebarBack]?function(){return null}:void 0,renderCenterView:this.pageConfig[$.g.titlebarTitle]?void 0:function(){return Z?null:"resourcePage"===w?(0,F.jsx)(o,{step:u?3:2}):(0,F.jsx)(f.G7,{style:P.m_booking_content_title_wrap,children:(0,F.jsx)(f.xv,{style:P.m_booking_content_title,children:"\u8ba2\u5355\u586b\u5199"})})},renderRightView:this.pageConfig[$.g.titlebarLogin]?void 0:function(){var e=Q(c),n=e||_||void 0==_;return n?null:(0,F.jsx)(X.Z,{onClick:t.goLogin.bind(t),style:P.m_booking_login,activeOpacity:1,children:(0,F.jsx)(f.xv,{children:"\u767b\u5f55"})})}}),(0,F.jsx)(f.jy,{style:(0,m.wh)([P.m_booking_view,Z?P.m_booking_view_update:{}]),children:Z?(0,F.jsx)(re.Z,{}):0===this.fetchStatus?this.renderBreath():this.renderBoby()}),!p&&!Z&&(0,F.jsx)(i,(0,s.Z)((0,s.Z)((0,s.Z)({},d),this.logData.footerLog),{},{renderTips:function(){return L?(0,F.jsx)(ue,{onTimeOut:t.onTimeOut,tips:h[0],date:c.date,logs:t.logData.footerTipLog}):null},renderIM:function(){var e;return!g||b||t.pageConfig[$.g.im]?null:(0,F.jsx)(de,{fstyle:{m_im:{marginTop:0}},isShowIM:!0,log:function(){return(0,J.mD)("im-click",c&&c.optid&&c.optid[0]?{resourceid:c.optid[0]}:{})},exposure:k,imInfo:g,imTraceLog:null===(e=t.logData.footerLog)||void 0===e?void 0:e.imTraceLog})},ignoreIphoneX:this.platform==a.NX.H5&&!(0,y.CX)(),fstyle:{m_footer_long:{paddingBottom:(0,m.Vh)(22)},m_footer_left_price:{flexWrap:"wrap"}},imStyle:{flex:0},booking:this.handleBook.bind(this),linearGradientStyles:(null===(e=this.pageConfig[$.g.payBtnColor])||void 0===e?void 0:e.length)>1?{colors:this.pageConfig[$.g.payBtnColor]}:void 0})),this.fetchStatus>0&&this.isCustomData?this.renderCoupon():null,this.fetchStatus>1?this.renderCrossCoupon():null]}))}}]),r}(g.Z),he=(0,i.Z)(pe,(0,o.Z)((0,o.Z)((0,o.Z)({},a.NX.H5,10650051852),a.NX.Mini,10650054085),a.NX.RN,10650051850),"booking"),fe=he,ge=fe,me={};Page((0,r.createPageConfig)(ge,"pages/tnt/business/booking/index",{root:{cn:[]}},me||{}))},50221:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(93212),o=n(298),i=n(57042),a=n(24460),s=n(21867),l=n(86066),c=(n(90201),n(55039)),u=n(92954),d=n.n(u),p=n(32180)["document"],h=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;(0,i.Z)(this,n),r=t.call(this,e);var o=e.imageProps,a=o||{},s=a.onImagePress,l=a.onLinkPress,c=0;return d().options.html.transformElement=function(e){var t,n=e.getAttribute("href");if(l&&"text"===(null===e||void 0===e?void 0:e.nodeName)&&null!==(t=e.getAttribute("class"))&&void 0!==t&&t.includes("h5-a")&&n){var r,o,i=p.createElement("image");i.setAttribute("src","https://dimg04.c-ctrip.com/images/1o54912000apdevkz182D.png"),i.style.width="13px",i.style.height="13px",i.style["borderRadius"]="0px",i.style.position="relative",i.style.display="inline-block",i.style.bottom="-2px",i.style["marginLeft"]="2px",i.alt=e.innerHTML,e.nextSibling?null===(r=e.parentNode)||void 0===r||r.insertBefore(i,e.nextSibling):null===(o=e.parentNode)||void 0===o||o.appendChild(i),i.addEventListener("tap",(function(){null===l||void 0===l||l(n)})),e.addEventListener("tap",(function(){null===l||void 0===l||l(n)}))}if("image"===e.nodeName){e.setAttribute("mode","widthFix");var a=e.getAttribute("src");e.addEventListener("tap",(function(){var t=e.getAttribute("alt");t?null===l||void 0===l||l(t):s&&s(a,{index:c})}),!1),c++}return e},r}return(0,a.Z)(n)}(c.Z),f=n(72747),g=n(2269),m=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.baseFontStyle,i=e.fstyle,a=this.props.html;return(0,g.jsx)(f.G7,{style:(0,o.Z)((0,o.Z)({wordBreak:"break-word"},i||{}),"object"==(0,r.Z)(n)?n:{}),className:"taro_html ".concat(t),dangerouslySetInnerHTML:{__html:a}})}}]),n}(h)},63651:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(11104),c=n(22276),u=n(81876),d=n(45023),p=n(55039),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,u.Z)(o),"state",void 0),(0,d.Z)((0,u.Z)(o),"onChange",(function(e,t){var n=[],r=o.props,i=r.onChange,a=r.onCloseCallback,s=r.onConfirm;if("radio"===t)n=[e],o.setState({selectedList:n},(function(){var e=o.getSelectedItem();i&&i(e),s&&s(e),a&&a(e)}));else{var l=o.state.selectedList;n=(0,c.Z)(l);var u=n.indexOf(e);-1!==u?n.splice(u,1):n.push(e),o.setState({selectedList:n},(function(){var e=o.getSelectedItem();i&&i(e)}))}})),(0,d.Z)((0,u.Z)(o),"geIsSelected",(function(e){var t=o.state.selectedList;if(t&&t.length)return!!t.find((function(t){return t===e}))})),(0,d.Z)((0,u.Z)(o),"onConfirm",(function(){var e=o.props,t=e.onChange,n=e.onCloseCallback,r=e.onConfirm,i=o.getSelectedItem();t&&t(i),n&&n(i),r&&r(i)})),(0,d.Z)((0,u.Z)(o),"onCloseCallBack",(function(){var e=o.props.onCloseCallback,t=o.getSelectedItem();e&&e(t)})),(0,d.Z)((0,u.Z)(o),"getSelectedItem",(function(){var e=(o.props.selectList||[]).filter((function(e){return o.state.selectedList.includes(e.value)}));return e})),o.state={selectedList:o.props.selectedList||[]},o}return(0,o.Z)(n)}(p.Z),f=n(9353),g={m_half_screen_pop:{position:"relative",height:"100%"},m_poplayer_header_container:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",top:0,height:44,paddingRight:12,paddingLeft:12,borderRadius:6,backgroundColor:"#fff",zIndex:1},m_confirm_btn:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:44,height:44},m_confirm_btn_text:{color:"#0086f6",fontSize:17},m_half_screen_pop_content:{marginBottom:20,paddingBottom:44}},m=function(e){return(0,f.Z)({height:e})},v=(0,f.Z)(g),_=n(59201),y=n(56569),x=n(17366),b=n(2269),Z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.selectList,o=t.title,i=t.confirmTxt,a=void 0===i?"\u786e\u8ba4":i,c=t.closeIcon,u=void 0===c?{}:c,d=t.tip,p=t.popHeight,h="multiSelect"===n,f=p.substring(0,p.length-1)/100;return(0,b.jsxs)(s.G7,{style:v.m_half_screen_pop,children:[h&&(0,b.jsxs)(s.G7,{style:v.m_poplayer_header_container,children:[(0,b.jsx)(_.Z,{style:v.m_poplayer_close_btn,onClick:this.onCloseCallBack,children:(0,b.jsx)(s.JO,{type:u.iconType||"cancel",size:40})}),o?(0,b.jsx)(s.xv,{style:v.m_poplayer_title,children:o}):null,(0,b.jsx)(_.Z,{style:v.m_confirm_btn,onClick:this.onConfirm,children:(0,b.jsx)(s.xv,{style:v.m_confirm_btn_text,children:a})})]}),(0,b.jsxs)(s.pf,{style:(0,x.wh)([v.m_half_screen_pop_content,m(f*y.Db.get("window").height-44)]),scrollY:!0,children:[d?(0,b.jsx)(s.G7,{style:v.m_pop_content_tip,children:(0,b.jsx)(s.xv,{style:v.m_pop_content_tip_text,children:d})}):null,r&&r.map((function(t){return(0,b.jsx)(l.Z,{onChange:e.onChange,type:n,label:t.label,value:t.value,isSelected:e.geIsSelected(t.value)},t.value)}))]})]})}}]),n}(h)},11104:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(59201),c=n(81876),u=n(45023),d=n(55039),p=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,r.Z)(this,n),o=t.call(this,e),(0,u.Z)((0,c.Z)(o),"state",void 0),(0,u.Z)((0,c.Z)(o),"handleText",(function(e){var t=o.props.label,n=[];Array.isArray(t)?t.map((function(t){n.push(o.changeStringToArrayOnKeyword(t,e))})):n=o.changeStringToArrayOnKeyword(t,e),o.setState({textResult:n})})),(0,u.Z)((0,c.Z)(o),"changeStringToArrayOnKeyword",(function(e,t){var n=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),r=new RegExp("".concat(n),"gi"),o="-|-|-",i=e.replace(r,"".concat(o).concat(t).concat(o)).split(o);return i}));var i=e.label,a=Array.isArray(i)?i:[i];return o.state={textResult:a||[]},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.props.keyword&&this.handleText(this.props.keyword)}},{key:"componentWillReceiveProps",value:function(e){e.keyword&&e.keyword!==this.props.keyword&&this.handleText(e.keyword)}}]),n}(d.Z),h=n(298),f=n(9353),g=n(17366),m={m_select_item_container:(0,h.Z)({display:"flex",flexDirection:"row",marginLeft:16,marginRight:16},(0,g.Cg)({direction:"bottom",width:1,style:"solid",color:"#ececec"})),m_select_item_wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10,paddingBottom:10,color:"#333333",fontSize:16,width:"100%",lineHeight:(0,g.Nv)(30)},text_wrap:{display:"flex",flexDirection:"column",flex:1},highLight:{color:"#0086f6"},m_select_item_label:{color:"#ccc",fontSize:12,lineHeight:(0,g.Nv)(30)},selected:{color:"#0086f6"},multiLine:{display:"flex",flexDirection:"row",mariginBottom:4,flexWrap:"wrap"},m_select_item_label_0:{color:"#333333",fontSize:16,lineHeight:(0,g.Nv)(30)},m_select_item_icon:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",fontSize:24,width:24,height:24,color:"#0086f6",flex:0}},v=(0,f.Z)(m),_=n(2269),y=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.isSelected,r=e.value,o=e.onChange,i=e.keyword,a=e.label,c=this.state.textResult;return(0,_.jsx)(l.Z,{style:(0,g.wh)([v.m_select_item_container,v[t]]),onClick:function(){return o(r,t)},children:(0,_.jsxs)(s.G7,{style:(0,g.wh)([v.m_select_item_wrapper,v[t]]),children:[(0,_.jsx)(s.G7,{style:v.text_wrap,children:c.map((function(e,r){return e?Array.isArray(e)?(0,_.jsx)(s.G7,{style:(0,g.wh)([n&&t===v.radio?v.selected:{},v.multiLine]),children:e.map((function(e,t){return(0,_.jsx)(s.xv,{style:(0,g.wh)([v.m_select_item_label,v["m_select_item_label_".concat(r)],e===i?v.highLight:{}]),children:e},e+t)}))},r):(0,_.jsx)(s.xv,{style:(0,g.wh)([e===i?v.highLight:{},n&&t===v.radio?v.selected:{},Array.isArray(a)?v.multiLine:{},v.m_select_item_label,v["m_select_item_label_".concat(r)]]),children:e},e+r):null}))}),(0,_.jsxs)(s.G7,{style:v.m_select_item_icon,children:[n&&"radio"===t&&(0,_.jsx)(s.JO,{type:"radiocheck",size:36,color:"#0086f6"}),"multiSelect"===t?n?(0,_.jsx)(s.JO,{type:"selectedShape",size:34,color:"#0086f6"}):(0,_.jsx)(s.G7,{children:(0,_.jsx)(s.JO,{type:"unselected",size:34,color:"#f7f7f7"})}):(0,_.jsx)(s.G7,{})]})]})})}}]),n}(p)},75014:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(72747)),c=n(59201),u=n(81876),d=n(45023),p=n(55039),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,u.Z)(r),"state",void 0),r}return(0,i.Z)(n)}(p.Z),f=n(9353),g=n(17366),m={m_table:(0,r.Z)({borderRadius:(0,g.Vh)(6)},(0,g.Cg)({style:"solid",color:"#DDE4ED",width:g.WI})),m_row:{display:"flex",flexDirection:"row"},m_column:{display:"flex",flexDirection:"row"},m_td:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({position:"relative",paddingTop:(0,g.Vh)(12),paddingLeft:(0,g.Vh)(12),paddingRight:(0,g.Vh)(12),paddingBottom:(0,g.Vh)(7)},(0,g.Cg)({direction:"bottom",style:"solid",color:"#DDE4ED",width:g.WI})),(0,g.Cg)({direction:"top",style:"solid",color:"#DDE4ED",width:0})),(0,g.Cg)({direction:"right",style:"solid",color:"#DDE4ED",width:g.WI})),(0,g.Cg)({direction:"left",style:"solid",color:"#DDE4ED",width:0})),m_td_bottom:(0,r.Z)((0,r.Z)({},(0,g.Cg)({direction:"bottom",style:"solid",color:"#DDE4ED",width:0})),(0,g.Cg)({direction:"top",style:"solid",color:"#DDE4ED",width:0})),m_td_bottom_icon:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,g.Cg)({direction:"bottom",style:"solid",color:"#DDE4ED",width:0})),(0,g.Cg)({direction:"top",style:"solid",color:"#DDE4ED",width:0})),{},{display:"flex",justifyContent:"center",alignItems:"center"}),m_td_right:(0,r.Z)((0,r.Z)({},(0,g.Cg)({direction:"right",style:"solid",color:"#DDE4ED",width:0})),(0,g.Cg)({direction:"left",style:"solid",color:"#DDE4ED",width:0})),m_td_gray:{backgroundColor:"#F6F8FA"},m_td_row:(0,r.Z)((0,r.Z)({},g._),{},{justifyContent:"space-between"}),m_text:(0,r.Z)((0,r.Z)({fontSize:(0,g.Vh)(14),marginBottom:(0,g.Vh)(5),color:"#666666",lineHeight:(0,g.Nv)(20)},(0,g.lM)("break-all")),{},{display:"flex",flexShrink:1}),m_text_gray:{color:"#333333",fontWeight:"bold"},m_text_black:{color:"#333333"},m_extra:{marginBottom:(0,g.Vh)(5),display:"flex",zIndex:1},m_extra_text:{fontSize:(0,g.Vh)(14),color:"#0086F6",lineHeight:(0,g.Nv)(20)},m_img:{width:20,height:20,position:"relative",top:-2}},v=(0,f.Z)(m),_=n(2269),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tableData,n=e.CellExtra,o=e.CellPoplayer,i=e.fstyle,a=e.onPress,s=e.clickDevtraceData,u=(0,g.Ec)(v,i);return t&&t.length?(0,_.jsx)(l.G7,{className:"simple_table",style:u.m_table,children:t.map((function(e,i){return(0,_.jsx)(l.G7,{style:u.m_row,children:e&&e.length?e.map((function(d,p){var h;return d.row&&Array.isArray(d.row)?(0,_.jsx)(l.G7,{style:{width:d.width},children:d&&d.row.length?d.row.map((function(e,r){return(0,_.jsx)(l.G7,{style:u.m_column,children:e&&e.length?e.map((function(o,a){return(0,_.jsxs)(l.G7,{className:a==e.length-1&&i==t.length-1&&a==d.row.length-1?"":a==e.length-1?"simple_table_td_right":r==t.length-1?"simple_table_td_bottom":"simple_table_td",style:(0,g.wh)([u.m_td,u["m_td_".concat(o.styleType)],{width:o.width},a==e.length-1?u.m_td_right:{},r==t.length-1?u.m_td_bottom:{},i==t.length-1&&a==d.row.length-1?u.m_td_bottom:{},o.extraDirection?u["m_td_".concat(o.extraDirection)]:{},o.showExtra?u["m_td_extra"]:{}]),children:[o.content&&o.content.length?o.content.map((function(e){return(0,_.jsx)(l.xv,{style:(0,g.wh)([u.m_text,u["m_text_".concat(o.styleType)]]),children:e})})):null,o.showExtra&&n?(0,_.jsx)(n,{}):null]})})):null})})):null},p):d.icon?(0,_.jsx)(l.G7,{className:p==e.length-1&&i==t.length-1?"":p==e.length-1?"simple_table_td_right":i==t.length-1?"simple_table_td_bottom":"simple_table_td",style:(0,g.wh)([u.m_td,u.m_tds?u.m_tds:{},u["m_td_".concat(d.styleType)],{width:d.width},i==t.length-1?u.m_td_bottom_icon:{},p==e.length-1?u.m_td_right:{},d.extraDirection?u["m_td_".concat(d.extraDirection)]:{},d.showExtra?u["m_td_extra"]:{}]),children:d.icon?(0,_.jsx)(l.Ee,{url:d.icon,style:v.m_img}):null},p):(0,_.jsxs)(l.G7,{className:p==e.length-1&&i==t.length-1?"":p==e.length-1?"simple_table_td_right":i==t.length-1?"simple_table_td_bottom":"simple_table_td",style:(0,g.wh)([u.m_td,u["m_td_".concat(d.styleType)],{width:d.width},i==t.length-1?u.m_td_bottom:{},p==e.length-1?(0,r.Z)((0,r.Z)({},u.m_td_right),u.m_tds_right_center?u.m_tds_right_center:{}):{},d.extraDirection?u["m_td_".concat(d.extraDirection)]:{},d.showExtra?u["m_td_extra"]:{}]),children:[d.content&&d.content.length?d.content.map((function(e,t){return(0,_.jsx)(l.xv,{style:(0,g.wh)([u.m_text,u["m_text_".concat(d.styleType)],u.m_tds_right_text?u.m_tds_right_text:{},u.m_gray_text?u.m_gray_text:{}]),className:"m_text_gray_normal m_text_normal",children:e},"".concat(e,"_").concat(t))})):null,d.showExtra&&n?(0,_.jsx)(n,{}):null,d.poplayerDesc&&o?(0,_.jsx)(o,{poplayerDesc:d.poplayerDesc,poplayerTableData:d.poplayerTableData}):null,null!==(h=d.extraButton)&&void 0!==h&&h.text?(0,_.jsx)(c.Z,{style:u.m_extra,onClick:function(){return a&&a(d.extraButton)},devTraceData:s,children:(0,_.jsx)(l.xv,{style:u.m_extra_text,children:d.extraButton.text})}):null]},p)})):null},i)}))}):null}}]),n}(h)},70943:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=n(90201),c=n(72747),u=n(81876),d=n(45023),p=n(55039),h=n(58472),f=n(56569),g=function(e,t){e&&e.style&&Object.assign(e.style,t)},m=n(17366),v=n(40771),_=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i,a;(0,o.Z)(this,n),a=t.call(this,e),(0,d.Z)((0,u.Z)(a),"state",void 0),(0,d.Z)((0,u.Z)(a),"nodeRefs",void 0),(0,d.Z)((0,u.Z)(a),"nodeContentRefs",void 0),(0,d.Z)((0,u.Z)(a),"scrollRef",void 0),(0,d.Z)((0,u.Z)(a),"scrollRect",void 0),(0,d.Z)((0,u.Z)(a),"rects",void 0),(0,d.Z)((0,u.Z)(a),"contentRects",void 0),(0,d.Z)((0,u.Z)(a),"left",void 0),(0,d.Z)((0,u.Z)(a),"screenWidth",void 0),(0,d.Z)((0,u.Z)(a),"opacity",void 0),(0,d.Z)((0,u.Z)(a),"indicatorRef",void 0),(0,d.Z)((0,u.Z)(a),"setScrollLeft",void 0),(0,d.Z)((0,u.Z)(a),"panResponder",null),(0,d.Z)((0,u.Z)(a),"isIos",(0,f.gn)()),(0,d.Z)((0,u.Z)(a),"changeCurrent",(function(e){var t=a.props.hasIndictor;a.setState({current:e}),a.changeScrollDistance(e),t&&a.changeIndicatorPos(e)})),(0,d.Z)((0,u.Z)(a),"changeIndicatorPos",(function(e){if(a.rects[e]){var t=a.props.indictorWidth,n=a.contentRects[e]||{},o=n.width;c.fS.timing(a.left,{toValue:a.getLeft(e),duration:100,easing:c.oY.ease,useNativeDriver:!0,isInteraction:!1,H5Animation:(0,r.Z)((0,r.Z)({},(0,m.eR)("all .2s")||{}),(0,m.vs)("translateX(".concat(a.getLeft(e),"px)"))||{}),dom:a.indicatorRef}).start(),a.setState({indictorWidth:t||o})}})),(0,d.Z)((0,u.Z)(a),"changeScrollDistance",(function(e){var t,n,r=0,o=0;(0,u.Z)(a)&&a.scrollRect&&(r=a.scrollRect.left?a.scrollRect.left:r,o=a.scrollRect.width?a.scrollRect.width:o);var i=(null===(t=(0,u.Z)(a))||void 0===t||null===(t=t.rects)||void 0===t?void 0:t[e])||(null===(n=(0,u.Z)(a))||void 0===n||null===(n=n.contentRects)||void 0===n?void 0:n[e])||{},s=i.left,l=i.width,c=(o-(l||0))/2,d=e<0?0:s-r-c;a.setState({scrollDistance:d}),a.scrollRef&&a.scrollRef.scrollTo&&a.scrollRef.scrollTo({x:d,y:0,left:d,behavior:"smooth"})})),a.state={current:e.current||e.curIndex||0,width:0,showIndicator:!1,showArrow:!1,indictorWidth:e.indictorWidth||0,scrollDistance:0},a.left=new c.fS.Value(0),a.nodeRefs=[],a.nodeContentRefs=[],a.rects=[],a.scrollRect={left:0,width:0},a.contentRects=[],a.screenWidth=f.Db.get("screen").width;var s=null===(i=e.fstyle)||void 0===i||null===(i=i.m_wrap)||void 0===i?void 0:i.opacity;return a.opacity="number"===typeof s?s:1,a.setScrollLeft=void 0===(0,v.Rd)("isNfes"),a}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.updateLayout()}},{key:"componentDidUpdate",value:function(e){var t,n=this.props||{},r=n.tabs,o=n.isSkipUpdateLayout,i=void 0!==o&&o;(null===r||void 0===r?void 0:r.length)===(null===e||void 0===e||null===(t=e.tabs)||void 0===t?void 0:t.length)||i||this.updateLayout()}},{key:"componentWillReceiveProps",value:function(e){e.current!==this.props.current&&this.changeCurrent(e.current),e.curIndex&&this.props.curIndex!==e.curIndex&&(this.setState({current:e.curIndex}),this.onTabClick(e.curIndex))}},{key:"setScrollRef",value:function(e){this.scrollRef=e}},{key:"setOpacity",value:function(e){g(this.scrollRef,{opacity:e}),this.opacity=e}},{key:"setCurrent",value:function(e){this.changeCurrent(e)}},{key:"updateLayout",value:function(){var e=this,t=0,n=this.props,r=n.tabs,o=n.hasIndictor,i=function(){var n=e.state.current;t++,t==2*r.length+1&&(e.layoutCallback(n),e.changeScrollDistance(n),o&&e.changeIndicatorPos(n))};r&&r.length&&((r||[]).forEach((function(t,n){var r=e.nodeContentRefs[n];r&&(0,h.L6)(r,(function(t){e.contentRects[n]=t,i()}),!1,"",{interval:200});var o=e.nodeRefs[n];o&&(0,h.L6)(o,(function(t){e.rects[n]=t,i()}),!1,"",{interval:200})})),this.scrollRef&&(0,h.L6)(this.scrollRef,(function(t){e.scrollRect=t,i()}),!1,"",{interval:200}))}},{key:"layoutCallback",value:function(e){var t=this.props,n=t.indictorWidth,o=void 0===n?0:n,i=t.hasIndictor,a=this.contentRects[e]||{},s=(a.left,a.width),l=void 0===s?0:s;this.left.setValue(this.getLeft(e),{dom:this.indicatorRef,H5Animation:(0,r.Z)({},(0,m.vs)("translateX(".concat(this.getLeft(e),"px)")))});var c=(this.contentRects||[]).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.width)||0}),0),u=c>this.screenWidth;this.setState({showIndicator:i,showArrow:u,indictorWidth:o||l})}},{key:"onTabClick",value:function(e,t){var n,r=this.props,o=r.onChangeTab,i=r.tabs;this.changeCurrent(e),o&&o(i[e],e),null!==t&&void 0!==t&&t.cancelBubble&&(t.cancelBubble=!0),null===t||void 0===t||null===(n=t.stopPropagation)||void 0===n||n.call(t)}},{key:"getLeft",value:function(e){var t=0;this&&this.scrollRect&&this.scrollRect.left&&(t=this.scrollRect.left);var n=this.contentRects[e]||{},r=n.left,o=void 0===r?0:r,i=n.width,a=void 0===i?0:i,s=this.props.indictorWidth,l=void 0===s?0:s;return l?o+a/2-l/2-t:o}},{key:"onScroll",value:function(e){e.stopPropagation()}},{key:"onScrollLayout",value:function(){}},{key:"onContainerLayout",value:function(){}},{key:"onNodeLayout",value:function(){}},{key:"onNodeContentLayout",value:function(){}},{key:"getTransformStyle",value:function(){}}]),n}(p.Z),y=n(9353),x={m_container:{display:"flex",flexDirection:"row",alignItems:"center"},m_wrap:{display:"flex",position:"relative",flexDirection:"row"},m_inner:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1},m_node:{marginRight:9,marginLeft:9},m_text_bg:{position:"relative"},m_text:{fontSize:15,color:"#666666"},m_text_active:{color:"#333333"},m_indictor:{position:"absolute",bottom:0,height:2,backgroundColor:"#0086F6",left:0},r_arrow:{borderLeftWidth:1,borderColor:"#eee",width:44,height:20,alignItems:"center",justifyContent:"center",display:"flex"},rowDirection:{display:"flex",flexDirection:"row",width:"100%",whiteSpace:"nowrap"},m_indictor_linear:{width:"100%",height:"100%",borderRadius:20},m_indictor_linear_bg:{position:"absolute",left:0,bottom:10,width:"100%",height:10,borderRadius:20,zIndex:0},m_text_origin:{zIndex:1},m_indictor_view:{width:"100%",position:"absolute",bottom:-30,height:10,marginBottom:10,left:0,borderRadius:10,zIndex:0}},b=(0,y.Z)(x),Z=n(59201),I=n(50738),C=n(64571),k=n(2269),w=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.tabs,i=n.renderItem,a=n.fstyle,s=n.needRightArrow,u=n.onArrowClick,d=n.styleProps,p=void 0===d?{}:d,h=n.touchStyleProps,f=void 0===h?{}:h,g=n.touchTextStyleProps,v=void 0===g?{}:g,_=n.touchTextStyleCurProps,y=void 0===_?{}:_,x=n.touchStyleCurProps,w=void 0===x?{}:x,T=n.animatedStyleProps,S=void 0===T?{}:T,P=n.propKey,L=void 0===P?"":P,N=(n.curIndex,n.extraProps),j=n.from,D=n.itemStyle,V=n.textStyle,E=n.textActiveStyle,R=n.showBgIndicator,A=n.showBg,F=n.changeDevTraceData,M=n.sameLog,O=n.onTouchStart,B=n.needPanHandlers,G=n.isTabScroll,H=void 0===G||G,z=this.state,U=z.current,q=z.showIndicator,W=z.showArrow,K=z.indictorWidth,J=z.scrollDistance,X=(0,m.Ec)(b,a),Q=s?c.G7:l.Fragment,$={};s&&($.style=X.m_container);var Y=this.setScrollLeft?{scrollLeft:J}:{},ee=H?c.pf:c.G7;return o&&o.length?(0,k.jsxs)(Q,(0,r.Z)((0,r.Z)({},$),{},{children:[(0,k.jsxs)(ee,(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({style:(0,m.wh)([X.m_wrap,{opacity:this.opacity}]),scrollX:!0,bounces:!1,contentContainerStyle:X.m_inner,ref:function(e){return t.setScrollRef(e)},id:"".concat(j,"_contain"),showScrollbar:!1,onLayout:this.onScrollLayout.bind(this)},N||{}),{},{onScroll:null===(e=this.onScroll)||void 0===e?void 0:e.bind(this),className:"scrollHorizonal",scrollWithAnimation:!0},Y),{},{onTouchStart:O},B&&this.isIos&&this.panResponder?this.panResponder.panHandlers:{}),{},{children:[(0,k.jsx)(c.G7,{style:(0,m.wh)([b.rowDirection,p,H?{}:{width:"100%"},X.m_row_direction||{}]),onLayout:this.onContainerLayout.bind(this),className:"".concat(j,"_tab_rowDirection"),children:o.map((function(e,n){var r,a,s,l,u,d,p,h;return(0,k.jsx)(Z.Z,{style:(0,m.wh)([{display:"flex",alignItems:"center",justifyContent:"center"},H?{}:{flex:1},X.m_item_tab||{}]),onClick:function(e){return t.onTabClick(n,e)},ref:function(e){t.nodeRefs[n]=e},className:"".concat(j,"_item_").concat(n),log:e.log||("function"==typeof M?function(){return M(e,n)}:M),testID:(null===e||void 0===e?void 0:e.exposure)&&(0,I.kI)(null===e||void 0===e?void 0:e.exposure.key,null===e||void 0===e?void 0:e.exposure.params),onLayout:t.onNodeLayout.bind(t,n),devTraceData:e.devTraceData||F&&F(null!==(r=null!==(a=null===(s=o[U])||void 0===s?void 0:s.text)&&void 0!==a?a:null===(l=o[U])||void 0===l?void 0:l.name)&&void 0!==r?r:U,null!==(u=null!==(d=null===(p=o[n])||void 0===p?void 0:p.text)&&void 0!==d?d:null===(h=o[n])||void 0===h?void 0:h.name)&&void 0!==u?u:n),children:i?(0,k.jsx)(c.G7,{ref:function(e){return t.nodeContentRefs[n]=e},className:"".concat(j,"_content_").concat(n),onLayout:t.onNodeContentLayout.bind(t,n),style:null===X||void 0===X?void 0:X.m_itemWrapper,children:i(e,n,U)}):e&&(e.text||e[L])?(0,k.jsx)(Z.Z,{style:[(0,m.wh)([b.m_node,f,D,U==n?w:{}])],onClick:function(e){return t.onTabClick(n,e)},ref:function(e){return t.nodeContentRefs[n]=e},className:"".concat(j,"_content_").concat(n),onLayout:t.onNodeContentLayout.bind(t,n),log:e.log,devTraceData:e.devTraceData,children:A?(0,k.jsxs)(c.G7,{style:(0,m.wh)([b.m_text_bg]),children:[(0,k.jsx)(c.xv,{style:(0,m.wh)([b.m_text,v||{},V,A?b.m_text_origin:{},U==n?b.m_text_active:{},U==n?y:{},U==n?E:{}]),children:L?e[L]:e.text}),A&&U==n?(0,k.jsx)(c.o,{direction:90,start:{x:0,y:0},end:{x:1,y:0},colors:["rgba(0, 118, 246, 0.2)","rgba(0, 118, 246, 0)"],style:b.m_indictor_linear_bg}):null]}):(0,k.jsx)(c.xv,{numberOfLines:1,style:(0,m.wh)([b.m_text,X.m_text||{},v||{},V,A?b.m_text_origin:{},U==n?b.m_text_active:{},U==n?X.m_text_active:{},U==n?y:{},U==n?E:{}]),className:"".concat(U==n?"m_text_active_normal":""),children:L?e[L]:e.text})}):null},"".concat(n,"tabitem"))}))}),!R&&q?(0,k.jsx)(c.fS.View,{ref:function(e){return t.indicatorRef=e},style:(0,m.wh)([b.m_indictor,X.m_indictor||{},S,(0,C.kg)({width:K}),this.getTransformStyle()])}):null,R?(0,k.jsx)(c.fS.View,{style:(0,m.wh)([b.m_indictor_view,S,{width:K},{transform:[{translateX:this.left}]}]),children:(0,k.jsx)(c.o,{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(146, 207, 255)","#ffffff"],style:b.m_indictor_linear})}):null]})),s&&W?(0,k.jsx)(Z.Z,{style:X.r_arrow,onClick:u,children:(0,k.jsx)(c.JO,{isSvg:!0,size:20,type:"arrowdown",color:"eee"})}):null]})):null}}]),n}(_)},35512:function(e,t,n){var r=n(57113),o=n(45899),i=function(e){return!!r.Z.get(e||"")&&r.Z.get(e||"").assistComponent.props.isOpened};t["ZP"]={show:function(e){(0,o.E)();var t=e.props,n=t.name,a=void 0===n?"":n,s=t.isOpened;if(void 0!==s)return r.Z.change(a,e);i(a)?e.props.isOpened=!1:e.props.isOpened=!0,r.Z.change(a,e)},hide:function(e){e?(r.Z.get(e||"").assistComponent.props.isOpened=!1,r.Z.change(e||"")):(Object.keys(r.K).forEach((function(e){var t,n=null===(t=r.K[e])||void 0===t?void 0:t.assistComponent;n&&n.props&&n.props.isOpened&&(n.props.isOpened=!1)})),r.Z.destory(r.K)),(0,o.V)()}}},30892:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(298),o=(n(90201),n(17366)),i=n(72747),a=n(9353),s=n(99739),l=n(56569),c=(0,s.ZP)().taroEnv===s.fO.alipay?"fixed":"absolute",u=(l.Db.get("window").height,(0,o.Vh)(36),(0,o.Vh)(16),.6*l.Db.get("window").height),d={m_toastShow:{position:c,bottom:0,right:0,left:0,width:"100%",height:"100%",zIndex:200,overflow:"hidden",elevation:20},m_toastShow_mask_touch:{display:"flex",height:"100%",width:"100%",position:c,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:0},main:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)",height:"100%",position:"relative",zIndex:1},main_center:(0,r.Z)((0,r.Z)({maxHeight:u,width:(0,o.Vh)(281),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#FFFFFF",borderRadius:(0,o.Vh)(8)},(0,o.ix)("border-box")),(0,o.o3)((0,o.Vh)(16))),icon:{height:(0,o.Vh)(40.5),width:(0,o.Vh)(40.5),borderRadius:(0,o.Vh)(20.5),marginBottom:(0,o.Vh)(12)},icon_image:{height:(0,o.Vh)(40.5),width:(0,o.Vh)(40.5)},title:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title_text:{fontSize:(0,o.Vh)(17),color:"#111",lineHeight:(0,o.Nv)((0,o.Vh)(23)),fontWeight:"bold",height:(0,o.Vh)(23)},content:{display:"flex",flexDirection:"row",marginTop:(0,o.Vh)(8),marginBottom:(0,o.Vh)(12),flexWrap:"wrap",alignItems:"center",justifyContent:"center"},content_text:{fontSize:(0,o.Vh)(14),color:"#111",lineHeight:(0,o.Nv)((0,o.Vh)(20)),fontWeight:"400"},btn:{height:(0,o.Vh)(36),width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},btn_confirm:(0,r.Z)({height:(0,o.Vh)(36),width:(0,o.Vh)(118.5),borderRadius:(0,o.Vh)(4),display:"flex",alignItems:"center",justifyContent:"center"},(0,o.ix)("border-box")),btn_text:{fontSize:(0,o.Vh)(15),lineHight:(0,o.Nv)((0,o.Vh)(19))},m_html_base:{fontSize:(0,o.Vh)(14),color:"#111",lineHeight:(0,o.Nv)((0,o.Vh)(20))},m_html:(0,r.Z)((0,r.Z)({display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:(0,o.Vh)(12)},(0,o.ix)("border-box")),{},{maxHeight:u-(0,o.Vh)(91,{needPx:!0})}),m_html_view:{flexGrow:0,maxHeight:u-(0,o.Vh)(91,{needPx:!0}),width:(0,o.Vh)(249)}},p={fontSize:(0,o.Vh)(14),color:"#111",lineHeight:(0,o.Nv)((0,o.Vh)(20)),margin:0},h=(0,a.Z)({p:p,strong:(0,r.Z)({},p),h2:(0,r.Z)({},p),li:(0,r.Z)({},p),span:(0,r.Z)({},p)}),f=(0,a.Z)(d),g=n(64571),m=n(59201),v=n(35512),_=function(e){return e["orange"]="#FF5500",e["red"]="#F21502",e["green"]="#09A76F",e["black"]="#111111",e["#FF7700"]="#FF7700",e}({}),y=n(50221),x=n(2269),b=function(e){var t=e.name,n=e.isOpened,a=e.title,s=e.iconUrl,l=e.contents,c=e.btnLeft,u=e.btnRight,d=e.btnLeftFunc,p=e.btnRightFunc,b=e.fStyle,Z=void 0===b?{}:b,I=e.logs,C=void 0===I?{}:I,k=(e.isModal,e.isRichText),w=e.richText,T=e.isOneBtn,S=e.children;d=d||function(){v.ZP.hide(t)};var P=i.G7,L=C.leftLogs,N=C.rightLogs,j=C.exposureLogs;return n?(0,x.jsxs)(P,{style:(0,g.kg)((0,o.wh)([f.m_toastShow])),catchMove:!0,visible:n,animationType:"none",transparent:!0,statusBarTranslucent:!0,children:[(0,x.jsx)(i.Au,{style:(0,o.wh)([f.m_toastShow_mask_touch]),activeOpacity:1,disableScroll:!0}),(0,x.jsx)(i.G7,{style:f.main,children:(0,x.jsxs)(i.G7,{style:(0,o.wh)([f.main_center,k?{}:{minHeight:(0,o.Vh)(187.5)},Z.main_center]),children:[s&&(0,x.jsx)(i.G7,{style:f.icon,children:(0,x.jsx)(i.Ee,{url:s,style:f.icon_image})}),(0,x.jsxs)(i.G7,{style:f.title,children:[a&&(0,x.jsx)(i.xv,{style:(0,o.wh)([f.title_text,Z.title_text]),children:a}),k?(0,x.jsx)(i.G7,{style:f.m_html,children:(0,x.jsx)(i.pf,{scrollY:!0,style:f.m_html_view,overScrollMode:"never",showsVerticalScrollIndicator:!0,bounces:!1,children:(0,x.jsx)(y.Z,{html:w||"",baseFontStyle:f.m_html_base,tagsStyles:h})})}):l?(0,x.jsx)(i.G7,{style:f.content,children:l.map((function(e){return(0,x.jsxs)(i.xv,{style:(0,o.wh)([f.content_text,{color:_[e.key||"black"]},{fontWeight:"500"==e.fontWeight?"500":"400"},Z.content_text]),children:[e.value,e.subValue?(0,x.jsx)(i.xv,{style:(0,o.wh)([f.content_text,{color:_[e.subKey||"black"]},{fontWeight:"500"==e.fontWeight?"500":"400"},Z.content_text]),children:e.subValue}):null,e.suffixValue||""]})}))}):!!S&&(0,x.jsx)(i.G7,{children:S})]}),(0,x.jsx)(i.G7,{style:f.btn,children:T?(0,x.jsx)(m.Z,{onClick:p,style:(0,o.wh)([f.btn_confirm,{backgroundColor:"#006FF6",width:"100%"},Z.rightBtn]),log:N,children:(0,x.jsx)(i.xv,{style:(0,o.wh)([f.btn_text,{color:"#fff"},Z.rightBtn_text]),children:u})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{onClick:d,style:(0,o.wh)([f.btn_confirm,(0,r.Z)({},(0,o.Cg)({width:(0,o.Vh)(1),style:"solid",color:"#006FF6"})),Z.leftBtn]),log:L,testID:j,children:(0,x.jsx)(i.xv,{style:(0,o.wh)([f.btn_text,{color:"#006FF6"},Z.leftBtn_text]),children:c})}),(0,x.jsx)(m.Z,{onClick:p,style:(0,o.wh)([f.btn_confirm,{backgroundColor:"#006FF6"},Z.rightBtn]),log:N,children:(0,x.jsx)(i.xv,{style:(0,o.wh)([f.btn_text,{color:"#fff"},Z.rightBtn_text]),children:u})})]})})]})})]}):null},Z=b},87225:function(e,t,n){n.d(t,{M:function(){return r}});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.defaultVersion,t.testValue),r=void 0===n?"B":n;return r}},91044:function(e,t,n){n.d(t,{B:function(){return i}});var r=n(64571),o=n(32180)["window"],i={register:function(e,t,n){var i,a;n&&(null===r.ZP||void 0===r.ZP||null===(i=r.ZP.Observer)||void 0===i||i.addObserverForKey(e,(function(e){var n,r=null===e||void 0===e||null===(n=e.options)||void 0===n||null===(n=n.detail)||void 0===n?void 0:n.data;t&&t(Array.isArray(r)?null===r||void 0===r?void 0:r[0]:r)})),"undefined"!==typeof o&&(null===(a=o)||void 0===a||null===(a=a["CtripEvent"])||void 0===a||a.addEventListener(e,t)))},destroy:function(){},send:function(e,t){var n;console.log(e,t,"cwx.Observer.noti============"),null===r.ZP||void 0===r.ZP||null===(n=r.ZP.Observer)||void 0===n||n.noti(e,t)}}},22561:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(22276),o=function(e,t,n){t&&t.apply(void 0,(0,r.Z)(n))}},22586:function(e,t,n){n.d(t,{s:function(){return he},Z:function(){return xe}});var r=n(68277),o=n(298),i=n(79301),a=n(95308),s=n(57042),l=n(24460),c=n(4900),u=n(81876),d=n(21867),p=n(86066),h=n(45023),f=n(84578),g=n(86685),m=n(31431),v=n(90201),_=n(70501),y=n(61252),x=n(45039),b=n(79522),Z=n(2446),I=n(22276),C=n(56034),k=n(59415),w=n(33031),T=n(58472),S=n(83630),P=n(99739),L=function(){function e(){(0,s.Z)(this,e),(0,h.Z)(this,"resolves",void 0),(0,h.Z)(this,"tasks",void 0),(0,h.Z)(this,"isWaiting",[]),this.resolves=[],this.tasks=[]}return(0,l.Z)(e,[{key:"lock",value:function(e){var t=this,n=new Promise((function(e){return t.resolves.push(e)}));this.tasks.push({task:n,actionKey:e})}},{key:"waitPrev",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.tasks.pop(),t&&this.lock(n),r&&(n!=r.actionKey||this.isWaiting.length)){e.next=4;break}return e.abrupt("return");case 4:return this.isWaiting.push(""),e.next=7,r.task;case 7:this.isWaiting.pop();case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.tasks=[],this.resolves=[]}}]),e}(),N=function(e,t){var n=t.scheduler,r=t.actionKey,o=function(){return null};return(0,a.Z)((0,i.Z)().mark((function t(){var a,s,l,c,u,d,p=arguments;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this,t.next=3,n.waitPrev(!0,r);case 3:for(s=function(e){var t=n.resolves.shift()||o;t(),e&&n.reset()},t.prev=4,l=p.length,c=new Array(l),u=0;u<l;u++)c[u]=p[u];return t.next=8,e.apply(a,[s].concat(c));case 8:return d=t.sent,t.abrupt("return",d);case 12:t.prev=12,t.t0=t["catch"](4),s(!0),(0,y.gp)({type:"ttd_dev_scheduler_error",body:{actionKey:r,errorMsg:t.t0?t.t0["message"]:"\u65e0",errorStack:t.t0?t.t0["stack"]:"\u65e0"}});case 16:case"end":return t.stop()}}),t,this,[[4,12]])})))},j=n(56569),D=n(39140),V=n(53053),E=n(70873),R=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var n;return(0,s.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,u.Z)(n),"state",void 0),(0,h.Z)((0,u.Z)(n),"changeKey",0),(0,h.Z)((0,u.Z)(n),"initdTime",void 0),(0,h.Z)((0,u.Z)(n),"scheduler",void 0),(0,h.Z)((0,u.Z)(n),"setStateWrapper",void 0),(0,h.Z)((0,u.Z)(n),"scrollView_ref",void 0),(0,h.Z)((0,u.Z)(n),"pageRefs",{}),(0,h.Z)((0,u.Z)(n),"scrollTop",0),(0,h.Z)((0,u.Z)(n),"logData",{}),(0,h.Z)((0,u.Z)(n),"isBookingRefresh",!1),(0,h.Z)((0,u.Z)(n),"isNaquhuaNeedSys",!0),(0,h.Z)((0,u.Z)(n),"isNaquhuaNeedToast",!0),(0,h.Z)((0,u.Z)(n),"bookingOpenCoupon",!1),(0,w.z2)("BindInsuranceCallBack",(0,u.Z)(n)),n.scheduler=new L,n.setStateWrapper=function(e,t,r){return(0,g.K2)((0,u.Z)(n),e,0,void 0,t,r)},n}return(0,l.Z)(r,[{key:"setRef",value:function(e,t){this.pageRefs[e]=t}},{key:"changeInsurance",value:function(e,t){var n=(0,g.UI)(e,this.state);this.changeKey=Math.random(),(0,g.K2)(this,{key:"booking",value:n},this.changeKey,[],t)}},{key:"changeInsurancePassenger",value:function(e,t){var n,r=(0,g.Lg)(e,this.state);this.changeKey=Math.random(),(0,g.K2)(this,{key:"booking",value:r},this.changeKey);var o=null===r||void 0===r||null===(n=r.insurance)||void 0===n?void 0:n.policyholderGroup;o&&t&&t(o)}},{key:"addInsurance",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.addPassenger(t,r||"",n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"changeInsuredPerson",value:function(e){var t=(0,g.av)(e,this.state,this);this.changeKey=Math.random(),(0,g.K2)(this,{key:"booking",value:t},this.changeKey)}},{key:"addPassenger",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o,a,s,l){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t,n,r,o,i,a,s){return e.apply(this,arguments)}return t}()},{key:"onSelectCoupon",value:function(e,t,n){this.devTraceType="changeCoupon";var r=this.state.coupon,o=r||{},i=o.couponParams;(0,g.nh)(this,!1,t,e,n),(0,y.gp)({type:"booking_coupon_data",body:{title:"\u4f18\u60e0\u5238\u6570\u636e",type:"info",request:i}})}},{key:"forceRefreshCoupon",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;e&&f.Fs.saveToLocal(this.state),t&&(0,g.nh)(this,!0,void 0,void 0,void 0,{updateCouponCode:r}),n&&this.setAnchor("passenger")}},{key:"changeDiscount",value:function(e){this.devTraceType="changeDiscount",this.changeKey=Math.random();var t=(0,g.ex)(e,this.state);(0,g.K2)(this,(0,o.Z)({},t),this.changeKey,void 0,(function(){}),{isDiscountChange:!0})}},{key:"openUseCoupon",value:function(e){this.setStateWrapper({couponPoplayer:{visible:!0,index:e}})}},{key:"setAnchor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setStateWrapper({anchor:"",scrollAnchor:""},(function(){t.setStateWrapper({anchor:e,scrollAnchor:e,anchorMsg:n.message,anchorAligs:n.aligs,anchorKey:n.key,anchorValue:n.value}),t.clearAnchor(),(0,T.zT)(t.scrollView_ref,t.pageRefs[e],t)}))}},{key:"clearAnchor",value:function(){var e=this;((0,P.ZP)().isSwan||"H5"==this.platform)&&(this.timer=setTimeout((function(){e.setState({scrollAnchor:""})}),300))}},{key:"closeUseCoupon",value:function(){this.setStateWrapper({couponPoplayer:{visible:!1}});var e=this.state.coupon,t=(e.discountDataList||[]).find((function(e){return e.discountType==E.$i.COUPON}))||{},n=t.requireRealName;this.bookingOpenCoupon&&n&&this.setAnchor("passenger"),this.bookingOpenCoupon=!1}},{key:"booking",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,s,l,c=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(new Date).getTime(),r=n-this.initdTime,(0,y.gp)({type:"booking_page_stay",body:{title:"\u586b\u5199\u9875\u521b\u5355\u505c\u7559\u8ba1\u65f6",type:"info",time:r,timeLine:n}}),a=k.k.getQueue(),null===(t=this.state.passengerModal)||void 0===t||!t.isNewGuest||!a.length){e.next=18;break}return e.next=7,a[a.length-1];case 7:if(s=e.sent,!s.isSuccess){e.next=12;break}this.state=(0,o.Z)((0,o.Z)({},this.state),s.state),e.next=18;break;case 12:return e.next=14,this.addPassenger(s.passengerInfo,s.resourceId,S.r8.traveler,!0,void 0,!1,{isFromBooking:!0});case 14:if(l=e.sent,!0!==l){e.next=17;break}return e.abrupt("return");case 17:this.state=(0,o.Z)((0,o.Z)({},this.state),l);case 18:return e.next=20,(0,g.WX)(this,(function(e,t,n,r,o,i){c.setStateWrapper({errorTips:{errorTipsPassenger:e,errorTipsAdditionalPassenger:o,errorTipsContact:t,errorTipsAdditionalContact:i,errorTipsInsurance:n,errorTipsAppendInfo:r}})}),this.setAnchor.bind(this),(function(e){c.setStateWrapper({warn_background:e})}));case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleInsuranceAgent",value:function(){(0,w.Ps)(this)}},{key:"handleInsuranceConfirmClick",value:function(){var e=this;Z.ZP.hide("policyConfirmPoplayer");var t=this.state.insurance,n=t.insuranceInfo;this.changeInsurance(n.id,(function(){return e.booking()}))}},{key:"clearInsuranceError",value:function(){this.setStateWrapper((function(e){return(0,o.Z)((0,o.Z)({},e),{},{errorTips:(0,o.Z)((0,o.Z)({},e.errorTips),{},{errorTipsInsurance:[]})})}))}},{key:"clearPassengerError",value:function(e){for(var t,n=this.state.errorTips,r=void 0===n?{}:n,i=r.errorTipsPassenger||[],a=(0,I.Z)(i),s=0;s<a.length;s++)a[s].passengerId==e&&(t=s);a.splice(t,1),this.setStateWrapper({errorTips:(0,o.Z)((0,o.Z)({},r),{},{errorTipsPassenger:a})})}},{key:"clearAppendInfoError",value:function(e,t){for(var n=this.state.errorTips,r=void 0===n?{}:n,i=r.errorTipsAppendInfo||[],a=(0,I.Z)(i),s=0;s<=e;s++)a[s]=s!=e?a[s]||{}:{id:i&&i[e]&&i[e].id,tip:""};this.setStateWrapper({errorTips:(0,o.Z)((0,o.Z)({},r),{},{errorTipsAppendInfo:a})})}},{key:"showInsurancePop",value:function(){var e=this,t=this.state.insurance,r=t.desc,i=t.insuranceInfo,a=i||{},s=a.name,l=a.tags,c=a.price,u=n(78400).Z,d=n(93001).Z;Z.ZP.show({props:{name:"policyConfirmPoplayer",header:d,headerProps:{logs:this.logData.insurancePopLog,desc:r,linkUrl:"https://dimg04.c-ctrip.com/images/0AS0b120008lqjv8l0BE9.png_.webp",headerCloseClick:function(){Z.ZP.hide("policyConfirmPoplayer")}}},child:u,childProps:{name:s,tags:l,price:c,logs:this.logData.insurancePopLog,handleCancelClick:function(){Z.ZP.hide("policyConfirmPoplayer"),e.setStateWrapper({insurance:(0,o.Z)((0,o.Z)({},t),{},{hasRefuseComfirm:!0})},(function(){return e.booking()}))},handleConfirmClick:this.handleInsuranceConfirmClick}})}},{key:"getRecommendResult",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,g.rm)(this,t);case 2:if(n=e.sent,0!=n){e.next=7;break}return e.abrupt("return",!0);case 7:if(o=n.recommend,a=null===o||void 0===o||null===(r=o.recommendList)||void 0===r?void 0:r.find((function(e){var t,n=null===(t=s.state.recommend)||void 0===t||null===(t=t.recommendList)||void 0===t?void 0:t.find((function(t){return(null===e||void 0===e?void 0:e.showNos)&&(null===t||void 0===t?void 0:t.showNos)&&(null===t||void 0===t?void 0:t.showNos[0])==(null===e||void 0===e?void 0:e.showNos[0])}));return null===n||void 0===n?void 0:n.hasShown})),!a||!this.state.ABTest){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,this.showRecommendPop(n);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showRecommendPop",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,a,s,l,c=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.recommend,null===(r=this.state.recommend)||void 0===r||null===(r=r.recommendList)||void 0===r||r.forEach((function(e){e.showNos[0]==(null===a||void 0===a?void 0:a.recommendList[0].showNos[0])&&(e.hasShown=!0)})),s=j.Db.get("window").height,l=n(93350).Z,e.next=6,new Promise((function(e){var t;Z.ZP.show({props:{name:"RecommendPoplayer",isShowHeader:!1,maxHeight:.8*s,minHeight:.3*s,popHeight:c.platform==D.NX.Mini&&(null===a||void 0===a||null===(t=a.recommendList)||void 0===t?void 0:t.length)>1?"100%":"",scrollEnabled:!0,isScrollView:!1,conentStyles:{display:"flex",flexDirection:"column",overflow:"hidden"}},child:l,childProps:(0,o.Z)((0,o.Z)({},a),{},{logs:c.logData.recommendLog,onConfirm:function(){Z.ZP.hide("RecommendPoplayer"),e(!0)},onClose:function(){Z.ZP.hide("RecommendPoplayer"),e(!1)}})})}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePayPeriodsInfo",value:function(e){this.devTraceType="changePayPeriodsInfo",this.isNaquhuaNeedSys=!1;var t=(0,V.Z)(this.state,e);this.setStateWrapper(t)}},{key:"changeAdditionalCount",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,o=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.changeKey=Math.random(),n=this.changeKey,e.next=4,(0,g.N4)(t,this,(function(){o.setStateWrapper({footer:(0,m.RI)()})}));case 4:r=e.sent,n==this.changeKey&&(0,g.K2)(this,{key:"booking",value:r},n,["booking","coupon"]);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showBuyNoteDetail",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=["cost","usage","productIntroduction","refundRule","servicePeople","expiryDate","otherNote"],(0,g.Hd)(t,n,this);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeAdditionalPassenger",value:function(e,t){var n=(0,g.z6)(t,e,this.state);this.setStateWrapper((0,o.Z)({},n))}},{key:"changeAdditionalContact",value:function(e,t){var n,r=this.state,o=r.additionalSale,i=r.errorTips,a=null===o||void 0===o||null===(n=o.resources)||void 0===n?void 0:n.find((function(t){return t.resourceId==e}));if(null!==a&&void 0!==a&&a.passengerModal){var s=(0,g.$Z)(t,{errorTips:i,passengerModal:a.passengerModal});this.setStateWrapper({errorTipsContact:s})}}}]),r}(C.ZP),A=n(28570),F=n(8066),M=n(12232),O=n(9349),B=n(99765),G=n(49502),H=n(64571),z=n(40771),U=n(72613),q=n(28150),W=n(92954),K=n.n(W);function J(e){K().setNavigationBarTitle({title:e})}var X=n(57113),Q=n(30892),$=n(35512),Y=n(35409),ee=n(93065),te=n(78893),ne=function(e){var t,n=e.state,r=n.passengerList,i=n.passengerModal,a=n.insurance,s=n.additionalSale,l=n.clauseShowPosition,c=n.isClauseError,u=n.request,d=u||{},p=d.insuranceId,f=a||{},g=f.insuranceInfo,m={},v=0,_=!1,y=null===i||void 0===i||null===(t=i.group)||void 0===t?void 0:t.some((function(e){var t;return null===e||void 0===e||null===(t=e.dChoice)||void 0===t?void 0:t.some((function(e){var t=r.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}))}));if(y&&v++,m=(0,o.Z)((0,o.Z)({},m),{},{passenger:(0,o.Z)((0,o.Z)({},l.passenger||{}),{},{hasChild:!!y})}),null!==g&&void 0!==g&&g.id&&(null===g||void 0===g?void 0:g.id)===p){var x,b=null===a||void 0===a||null===(x=a.insuredGroup)||void 0===x||null===(x=x.dChoice)||void 0===x?void 0:x.some((function(e){var t=r.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));b&&v++,m=(0,o.Z)((0,o.Z)({},m),{},{insurance:(0,o.Z)((0,o.Z)({},l.insurance||{}),{},{hasChild:!!b})})}var Z=s||{},I=Z.resources,C=void 0===I?[]:I;C.forEach((function(e){var t,n=(null===(t=e.passengerModal)||void 0===t?void 0:t.group[0])||{},i=n.dChoice,a=void 0===i?[]:i,s=a.some((function(e){var t=r.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));s&&v++,m=(0,o.Z)((0,o.Z)({},m),{},(0,h.Z)({},e.resourceId,(0,o.Z)((0,o.Z)({},l[e.resourceId]||{}),{},{hasChild:s})))})),Object.keys(m).forEach((function(e){m[e].isShow=!!m[e].hasChild&&(!!m[e].isShow||1===v),_=_||m[e].isShow})),e.setState({isClauseError:v>0&&c,clauseShowPosition:m,isShowFooterClause:!_&&v>1})},re=function(e,t){var n,r=e.state,o=r.passengerList,i=r.passengerModal,a=r.additionalSale,s=r.insurance,l=r.request,c=l||{},u=c.insuranceId,d=s||{},p=d.insuranceInfo,h=null===i||void 0===i||null===(n=i.group)||void 0===n?void 0:n.some((function(e){var t;return null===e||void 0===e||null===(t=e.dChoice)||void 0===t?void 0:t.some((function(e){var t=o.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}))}));if(!t||h)return!!h;if(null!==p&&void 0!==p&&p.id&&(null===p||void 0===p?void 0:p.id)===u){var f,g=null===s||void 0===s||null===(f=s.insuredGroup)||void 0===f||null===(f=f.dChoice)||void 0===f?void 0:f.some((function(e){var t=o.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));if(g)return!0}var m=a||{},v=m.resources,_=void 0===v?[]:v,y=_.some((function(e){var t,n=(null===(t=e.passengerModal)||void 0===t?void 0:t.group[0])||{},r=n.dChoice,i=void 0===r?[]:r;return i.some((function(e){var t=o.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}))}));return y},oe=n(87225),ie=n(94765),ae=n(66956),se=n(99213),le=n(99728),ce=n(70614),ue=n(79239),de=n(32180)["window"],pe=["couponReduceInfo"],he=v.createContext({}),fe=(0,oe.M)("230129_VAC_jdzdl",{testValue:"A"}),ge=(0,U.Z)(q.X),me=0,ve=0,_e=0,ye=null,xe=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,l,d,p,v,Z,I,C,k,w;(0,s.Z)(this,n),J("\u8ba2\u5355\u586b\u5199"),w=t.call(this,e),(0,h.Z)((0,u.Z)(w),"fetch",void 0),(0,h.Z)((0,u.Z)(w),"timer",void 0),(0,h.Z)((0,u.Z)(w),"numCompare",0),(0,h.Z)((0,u.Z)(w),"wrapperState",void 0),(0,h.Z)((0,u.Z)(w),"isIOS",(0,j.gn)()),(0,h.Z)((0,u.Z)(w),"isRN",w.platform==D.NX.RN),(0,h.Z)((0,u.Z)(w),"isH5",w.platform==D.NX.H5),(0,h.Z)((0,u.Z)(w),"devTraceType",void 0),(0,h.Z)((0,u.Z)(w),"devTraceKeyData",[]),(0,h.Z)((0,u.Z)(w),"pageConfig",void 0),(0,h.Z)((0,u.Z)(w),"updateStatus",0),(0,h.Z)((0,u.Z)(w),"initialState",void 0),(0,h.Z)((0,u.Z)(w),"isCustomData",!1),(0,h.Z)((0,u.Z)(w),"refreshCount",0),(0,h.Z)((0,u.Z)(w),"refreshSku",0),(0,h.Z)((0,u.Z)(w),"logInited",!1),(0,h.Z)((0,u.Z)(w),"waitCalendar",!1),(0,h.Z)((0,u.Z)(w),"hasloadCaptcha",!1),(0,h.Z)((0,u.Z)(w),"recomProgress",[]),(0,h.Z)((0,u.Z)(w),"qconfig",void 0),(0,h.Z)((0,u.Z)(w),"changeCount",N(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o,s,l){var c,d,p,h,f,v;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"changeCalender"!=w.devTraceType&&(w.devTraceType="changeCount"),s||(w.changeKey=Math.random(),w.numCompare++),c=w.changeKey,d=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,g.pR)(n,(0,u.Z)(w),(function(){w.setStateWrapper({footer:(0,m.RI)()})}),r,o,l);case 2:if(a=e.sent,t!=w.numCompare){e.next=5;break}return e.abrupt("return",a);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),e.next=6,d(w.numCompare,n,r,o);case 6:if(p=e.sent,p){e.next=9;break}return e.abrupt("return",t());case 9:if(h=null===p||void 0===p?void 0:p.isWhiteChange,r){e.next=14;break}c==w.changeKey?(v=setTimeout((function(){t(h)}),2e3),(0,g.K2)((0,u.Z)(w),{key:"booking",value:p},c,null!==(f=w.state.request)&&void 0!==f&&f.date?["booking","coupon"]:["booking"],(function(){clearTimeout(v),t(h);var e=w.state.warn_background;if(e){for(var n=w.state.passengerModal,r=!0,o=0;o<n.length;o++)n[o].choice!=n[o].dChoice.length&&(r=!1);r&&w.setStateWrapper({warn_background:!1})}}))):t(h),e.next=16;break;case 14:return t(h),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}(),{scheduler:w.scheduler,actionKey:"changeCount"})),(0,h.Z)((0,u.Z)(w),"changePassenger",N(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,s,l,c,d=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]&&d[3],s=d.length>4?d[4]:void 0,l=d.length>5?d[5]:void 0,e.next=5,(0,g.ES)(n,r,(0,u.Z)(w),a,(function(e){}),l);case 5:c=e.sent,c?w.setStateWrapper((0,o.Z)({},c),(function(){t(),s&&s()})):t();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),{scheduler:w.scheduler,actionKey:"changePassenger"})),(0,h.Z)((0,u.Z)(w),"onScrollFunc",(function(e){var t,n,r=(null===e||void 0===e||null===(t=e.nativeEvent)||void 0===t||null===(t=t.contentOffset)||void 0===t?void 0:t.y)||(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.scrollTop);r&&(w.scrollTop=r),w.scrollTop>30&&!w.state.isShowFixedHeader?w.setState({isShowFixedHeader:!0}):w.scrollTop<=30&&w.state.isShowFixedHeader&&w.setState({isShowFixedHeader:!1})})),(0,h.Z)((0,u.Z)(w),"onScroll",(0,b.P2)(w.onScrollFunc.bind((0,u.Z)(w)),50)),(0,h.Z)((0,u.Z)(w),"onLoadCrossCoupon",(function(e){w.setState({crossCouponList:e})})),(0,h.Z)((0,u.Z)(w),"onShowCrossCoupon",(function(e){w.setState({isShowCrossCoupon:e})})),(0,x.z)(),(0,le.SR)(),w.pageConfig=(0,z.Rd)("formConfig")||{},ye=(0,u.Z)(w),w.timer=(new Date).getTime();var T=_.Z.getParamsFromUrl(n.ctx);w.initialState=(null===e||void 0===e?void 0:e.initialState)||{};var S=!!(0,j.ud)(null===(r=n.ctx)||void 0===r?void 0:r.userAgent)&&!(0,j.v8)(null===(l=n.ctx)||void 0===l?void 0:l.userAgent)&&!(0,j.Ae)(null===(d=n.ctx)||void 0===d?void 0:d.userAgent)&&!T.isNotCtripMini;S&&(w.initialState.state=null);var P=(null===(p=w.initialState)||void 0===p||null===(p=p.state)||void 0===p?void 0:p.request)||{};if(w.state=(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},n.getBaseState()),null===(v=w.initialState)||void 0===v?void 0:v.state),(0,j.rI)()?{}:{request:(0,o.Z)((0,o.Z)({},P),T)}),{},{ABTest:["B"].includes(fe),retainTips:{},isClauseError:!1,isAuthorizedOversea:!1,passengerCheckErr:[]}),null!==(Z=w.initialState)&&void 0!==Z&&Z.state&&w.setFetchStatus(!0),ve=null===(I=w.state.request)||void 0===I?void 0:I.spotid,_e=null===(C=w.state.request)||void 0===C?void 0:C.poiid,w.devTraceKeyData=[{key:"spotid",value:ve},{key:"poiid",value:_e},{key:"optid",value:null===(k=w.state.request)||void 0===k?void 0:k.originOptid.toString()}],O.ol&&(0,O.ol)({attrs:w.devTraceKeyData}),B.S&&(0,B.S)({attrs:w.devTraceKeyData}),S&&!(0,j.rI)()){var L;(0,y.gp)({body:{title:"taro_h5\u8df3\u539f\u751f\u5c0f\u7a0b\u5e8f"}});var V=(0,b.vn)(location.href),E=encodeURIComponent(V.token);return delete V.token,(0,c.Z)(w,null===(L=de["cmpBridge"])||void 0===L?void 0:L.redirectTo({url:"/pages/tnt/booking/index?token=".concat(E,"&").concat((0,b.RF)(V))}))}return w.onTimeOut=w.onTimeOut.bind((0,u.Z)(w)),w.handleInsuranceConfirmClick=w.handleInsuranceConfirmClick.bind((0,u.Z)(w)),w.backFun=w.backFun.bind((0,u.Z)(w)),"RN"==w.platform?w.fetch=new f.ZP((0,u.Z)(w)):setTimeout((function(){w.fetch=new f.ZP((0,u.Z)(w))}),100),w.wrapperState={},w}return(0,l.Z)(n,[{key:"afterFetch",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,l,c,u,d,p,h,f=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n||{},a=r.fetchIndex,s=r.cb,l=r.useCache,c=r.fromCache,u=1===a,l||(t.footer=(0,m.aS)((0,o.Z)((0,o.Z)({},this.state),t))),!c&&(this.isCustomData=!0),this.logInited=!0,this.setFetchStatus(u),u||(d=(0,te.ZP)((0,o.Z)((0,o.Z)({},this.state),t)),p=d.clauseShowPosition,h=d.isShowFooterClause,t.clauseShowPosition=p,t.isShowFooterClause=h),!this.hasloadCaptcha&&(this.hasloadCaptcha=(0,se.mR)()),this.setStateWrapper((0,o.Z)({},t),(function(){ee.Z.hide(),s&&s(),f.afterCb(a)}));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"afterCb",value:function(e){this.updateStatus=e;var t=(new Date).getTime();this.getRmsToken(),1!==e&&(this.initdTime=me=t)}},{key:"getRmsToken",value:function(){var e=this;de&&(de["__rmsbfi"]=de["__rmsbfi"]||[],de["__rmsbfi"].push(["_getRmsToken",function(t){var n=e.state.request;n.rmsToken=t,e.setState({request:n})}],!1))}},{key:"componentDidMount",value:function(){X.Z.add("retainTipsPopLayer",Q.Z,{props:{isOpened:!1}}),X.Z.add("bookingErrorMessage",Q.Z,{props:{isOpened:!1}}),X.Z.add("customCouponMessage",Q.Z,{props:{isOpened:!1}}),X.Z.add("clausePopLayer",Y.Z,{props:{isOpened:!1}})}},{key:"componentWillUnmount",value:function(){(0,ue.nI)(!1),Z.ZP.hide(),$.ZP.hide()}},{key:"onBack",value:function(){!this.isIOS&&(0,g.M1)(me,ve),this.backFun()}},{key:"refreshPage",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.changeKey=0;var t=H.ZP.user.isLogin();f.ZP.init(this.fetch,e,t)}},{key:"changeRecom",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,s,l,c,u,d,p,h,f,v,_,y;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.waitCalendar=!0,this.setStateWrapper({footer:(0,m.RI)()}),a=this.state,s=a.sku,l=a.request,c=null===s||void 0===s||null===(o=s.calendar)||void 0===o?void 0:o.findIndex((function(e){return e.date==t})),d=new Promise((function(e){u=e})),this.recomProgress.push(d),!(c>29&&l.aggregation)){e.next=16;break}return e.next=9,(0,F.Z)({date:t,token:l.token,isScanShelf:l.isScanShelf},this,null,!0);case 9:if(p=e.sent,p&&null!==p&&void 0!==p&&p.length){e.next=15;break}return this.handleSoldout(t),e.abrupt("return");case 15:r=p[0];case 16:return e.next=18,(0,g.xF)(t,n,r,this);case 18:if(h=e.sent,f=h.sku,v=h.resourceList,_=h.remindToast,y=h.request,null!==v&&void 0!==v&&v.length){e.next=26;break}return this.handleSoldout(t),e.abrupt("return");case 26:return this.state.sku=f,this.state.request=y,e.next=30,this.changeCalender(t,v,_,!0);case 30:u(),this.recomProgress.shift();case 32:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"handleSoldout",value:function(e){var t=this.state.sku;this.toast.show("\u6240\u9009\u65e5\u671f\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u65e5\u671f");var n=t.calendar.map((function(t){return t.date==e&&(t=(0,o.Z)((0,o.Z)({},t),{disableText:"\u5df2\u552e\u7f44"})),t}));this.waitCalendar=!1,this.setStateWrapper({sku:(0,o.Z)((0,o.Z)({},t),{},{calendar:n}),footer:(0,m.aS)((0,o.Z)((0,o.Z)({},this.state),{},{sku:(0,o.Z)((0,o.Z)({},t),{},{calendar:n})}))})}},{key:"changeCalender",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,o,a){var s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==n&&void 0!==n&&n.length){e.next=3;break}return this.handleSoldout(t),e.abrupt("return");case 3:if(s=0,a){e.next=8;break}return s=this.recomProgress.length,e.next=8,Promise.all(this.recomProgress);case 8:return this.changeKey=Math.random(),this.devTraceType="changeCalender",l=this.changeKey,this.waitCalendar=!0,this.setStateWrapper({footer:(0,m.RI)()}),e.next=15,(0,g.JY)(t,this,n);case 15:return c=e.sent,u=c.couponReduceInfo,d=(0,r.Z)(c,pe),p=Object.assign({},this.state,d),this.waitCalendar=!1,e.next=22,this.changeCount(n,p,u,!0,o);case 22:p=e.sent,d=Object.assign({},d,p),s&&(d.sku.dateRecord["random"]=Math.random()),l==this.changeKey&&(0,g.K2)(this,{key:"booking",value:d},l,["booking","coupon"]);case 26:case"end":return e.stop()}}),e,this)})));function t(t,n,r,o){return e.apply(this,arguments)}return t}()},{key:"addPassenger",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,s,l,c){var u,d=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,g.H4)(t,this,n,a,s,(function(e){d.setStateWrapper({warn_background:e})}),r,c);case 2:if(u=e.sent,!0!==u){e.next=5;break}return e.abrupt("return",!0);case 5:if("clear"!==u){e.next=7;break}return e.abrupt("return","clear");case 7:if(!l){e.next=9;break}return e.abrupt("return",u);case 9:return u&&this.setStateWrapper((0,o.Z)({},u)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r,o,i,a,s){return e.apply(this,arguments)}return t}()},{key:"addAdditionPassenger",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.state.additionalSale.resources,e.next=3,this.addPassenger(t,n,S.r8.additional,!0,(function(){}),!0);case 3:a=e.sent,a&&(s=r.find((function(e){return e.resourceId==n})),s.passengerModal.group.forEach((function(e){e.notFullList=(0,G.Iq)(null===a||void 0===a?void 0:a.passengerList,e.addPassenger,e.CardInfo,e.HkvisaInfo,e.resourceId)}))),a&&this.setStateWrapper((0,o.Z)({},a));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"changeContact",value:function(e){var t=(0,g.$Z)(e,this.state);this.setStateWrapper({errorTipsContact:t})}},{key:"changeMobilePop",value:function(){var e=(0,g.r$)(this.state);this.setStateWrapper({errorTipsContact:e})}},{key:"onAppendInfoChange",value:function(e,t,n,r){var o=(0,g.A6)(this,e,t,n,r);this.setStateWrapper({appendInfoList:o})}},{key:"onTimeOut",value:function(){var e=this;this.confirm.show({content:"\u6240\u9009\u65e5\u671f\u5df2\u4e0d\u53ef\u8ba2\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u65e5\u671f\u3002",btnOK:["\u77e5\u9053\u4e86"],btnCallBack:[function(){e.state.request.isFromSku?e.pop():(e.setStateWrapper({headerTips:void 0,noticeTips:void 0}),e.refreshPage())}]})}},{key:"goLogin",value:function(){var e=this,t=this.state,n=t.isLogin,r=t.request.isNotCtripMini;(0,M.Z)((function(t){"0"==(null===t||void 0===t?void 0:t.ReturnCode)&&e.refreshPage(!1)}),!1,{h5Overdue:this.isH5&&!n,ignoreMini:!!r})}},{key:"changeSkuData",value:function(e){var t=this,n=e.date,r=e.optid,i=e.salesPropertyIds,a=e.token,s=e.peopleId,l=e.isNewNaquhua,c=e.subResourceId,u=e.firstLevelIds,d=void 0===u?[]:u,p=this.state.request,h=p.date,f=p.productInfo,g=void 0===f?{}:f,v=p.additionOptid,_=p.optid,y=p.peopleId,x=p.count,b=p.boxMap,Z=this.state.passengerModal,I=n.split("|");if(c)b[r]=c.split("-").map((function(e,t){return{resourceId:e,date:I[t]||I[0]}}));else if(n==h&&r==_[0])return;null===v||void 0===v||v.forEach((function(e){return g[e]=null})),null===_||void 0===_||_.forEach((function(e){e!=r&&(g[e]=null)})),this.refreshCount++,this.setStateWrapper({request:(0,o.Z)((0,o.Z)((0,o.Z)({},this.state.request),{date:I[0],optid:[Number(r)],salesPropertyIds:i,token:a,peopleId:s,count:y!==s?[]:[x[0]],isNewNaquhua:l,firstLevelIds:d.join("|"),boxMap:b}),{},{additionCount:[],additionOptid:[],productInfo:g}),passengerModal:(0,o.Z)((0,o.Z)({},Z),{},{forceUpdateNewGuest:!1}),footer:(0,m.RI)()},(function(){ee.Z.show(),t.refreshPage(!1),n!==h&&t.toast.show("\u6240\u9009\u65e5\u671f\u8d2d\u4e70\u987b\u77e5\u6709\u53d8\u66f4, \u8bf7\u53ca\u65f6\u67e5\u770b")}))}},{key:"getUserOperationed",value:function(){this.setState({userOperationed:!0})}},{key:"isSelectChild",value:function(){return re(this,this.state.ABTest)}},{key:"checkClauseShowPosition",value:function(){ne(this)}},{key:"onChangeAgreeChild",value:function(e){var t=e.isAgree,n=void 0!==t&&t;this.setState({isAgreeChild:!!n||!this.state.isAgreeChild,isClauseError:!1})}},{key:"onChangeAuthorize",value:function(e){var t=e.isAgree,n=void 0!==t&&t;this.setState((function(e){return{isAuthorizedOversea:!!n||!e.isAuthorizedOversea}}))}},{key:"handleBook",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.devTraceType="booking",null===(t=this.state.request)||void 0===t||!t.isForceLoginH5||this.state.isLogin){e.next=10;break}return e.next=4,new Promise((function(e){r.confirm.show({content:"\u8be5\u5546\u54c1\u5b58\u5728\u643a\u7a0b\u8d26\u53f7\u9650\u8d2d\uff0c\u8bf7\u5148\u767b\u5f55\u518d\u9884\u8ba2",btnOK:["\u6682\u4e0d\u767b\u5f55","\u53bb\u767b\u5f55"],btnCallBack:[function(){e(!1)},function(){e(!0)}]})}));case 4:if(n=e.sent,!n){e.next=9;break}return e.abrupt("return",H.ZP.user.login({}));case 9:return e.abrupt("return");case 10:(0,g.DQ)(),this.booking();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCloseClausePop",value:function(e,t){Z.ZP.hide("clausePopLayer"),this.setState({isClauseError:!0}),t?(this.setAnchor("authorize"),this.toast.show("\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u4e2a\u4eba\u4fe1\u606f\u51fa\u5883\u6388\u6743\u58f0\u660e")):(this.setAnchor("clause"),this.toast.show("\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u201c\u672a\u6210\u5e74\u4eba\u201d\u4fe1\u606f\u534f\u8bae"))}},{key:"onAgree",value:function(e,t){Z.ZP.hide("clausePopLayer"),e&&t?this.setState({isAgreeChild:!0,isAuthorizedOversea:!0}):e?this.setState({isAgreeChild:!0}):this.setState({isAuthorizedOversea:!0})}},{key:"handleErrorToast",value:function(){this.toast.show("\u8bf7\u5148\u9009\u62e9\u4f7f\u7528\u65e5\u671f")}},{key:"onUpdatePassengerFromNewGuest",value:function(e){var t=this.state.passengerList,n=null===t||void 0===t?void 0:t.map((function(t){return String(t.PassengerID)===String(e.PassengerID)?(0,o.Z)((0,o.Z)({},t),e):t}));this.setState({passengerList:n})}},{key:"resetGlobalVar",value:function(){(0,ie.Wd)(),(0,ae.KN)()}},{key:"backFun",value:function(){var e,t,n=this;if(null===(e=this.state.retainTips)||void 0===e||null===(e=e.interveneTips)||void 0===e||!e.contents||null!==(t=this.state.retainFlag)&&void 0!==t&&t.isClose)this.resetGlobalVar(),(0,A.Sw)();else{var r=this.state.retainTips.interveneTips,o=r.contents.map((function(e){return e.value}));$.ZP.show({props:{isOpened:!0,title:r.title,iconUrl:r.icon,contents:r.contents,btnRightFunc:function(){$.ZP.hide("retainTipsPopLayer"),n.resetGlobalVar(),(0,A.Sw)()},name:"retainTipsPopLayer",btnLeft:"\u7acb\u5373\u62a2\u8d2d",btnRight:"\u72e0\u5fc3\u79bb\u5f00",logs:{leftLogs:this.logData.retainTipsLog.retainTipsClickLog({content:o.join(""),type:"\u5de6\u6309\u94ae"}),rightLogs:this.logData.retainTipsLog.retainTipsClickLog({content:o.join(""),type:"\u53f3\u6309\u94ae"}),exposureLogs:this.logData.retainTipsLog.retainTipsLogExposureLog({content:o.join("")})}}})}}}],[{key:"getBaseState",value:function(){var e,t=_.Z.getParamsFromUrl(n.ctx);return{request:t,footer:(0,m.aS)(),errorTips:{errorTipsPassenger:[],errorTipsContact:{},errorTipsInsurance:[],errorTipsAppendInfo:[]},warn_background:!1,limitType:ce.U.Null,anchor:"",showPayingStep:!1,showSecondScreen:!1,userOperationed:!1,isAgreeChild:!1,crossCouponList:[],isShowCrossCoupon:!1,isHideHead:!!(0,j.ud)(null===n||void 0===n||null===(e=n.ctx)||void 0===e?void 0:e.userAgent)&&!t.isNotCtripMini}}},{key:"getInitialState",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(0,j.Ae)(n.ctx.userAgent)||!(0,j.v8)(n.ctx.userAgent)||H.ZP.user.isLogin(n.ctx)){e.next=2;break}return e.abrupt("return",{});case 2:return t=function(){return null},e.next=5,n.getBaseInitialState(n,f.ZP,{setCacheData:t,fetchQconfig:t,target:{afterCb:t,changeInsurance:t,handleBook:t,confirm:{show:t},pop:t}});case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isSavePop",value:function(){return!0}},{key:"onBackAndroid",value:function(){(0,g.M1)(me,ve),Z.ZP.hide(),ye.backFun()}},{key:"pageWillDisappear",value:function(){(0,g.M1)(me,ve)}}]),n}(R);(0,h.Z)(xe,"timeRecorderName",q.X),(0,h.Z)(xe,"ssrTimeRecorder",ge)},21184:function(e,t,n){n.d(t,{Z:function(){return oe}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(56034),u=n(79522),d=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,r.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"state",void 0),o.cName="booking-additional-sale";var i=o.props.request;return o.state={resourceCount:o.initCounts(null===i||void 0===i?void 0:i.additionOptid,null===i||void 0===i?void 0:i.additionCount)},o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t,n,r,o=e.request,i=void 0===o?{}:o,a=!(0,u.uE)(i.additionCount,this.props.request.additionCount)||!(0,u.uE)(i.additionOptid,this.props.request.additionOptid);a&&this.setState({resourceCount:this.initCounts(i.additionOptid,i.additionCount)}),(null===(t=this.props.additionalSale)||void 0===t?void 0:t.onlyId)!==(null===(n=e.additionalSale)||void 0===n?void 0:n.onlyId)&&null!==(r=e.additionalSale)&&void 0!==r&&r.ifResourecesDiff&&this.toast.show("\u9009\u62e9\u4fe1\u606f\u53d8\u66f4\uff0c\u8d85\u503c\u6362\u8d2d\u5df2\u5237\u65b0~")}},{key:"onAdditionalSaleChange",value:function(e,t){var n=this.state.resourceCount;t?n[e]=t:n&&n[e]&&delete n[e];var r=Object.keys(n).map((function(e){return{id:e,count:n[e]}}));this.props.changeAdditionalCount&&this.props.changeAdditionalCount(r)}},{key:"initCounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t,r){n[e[r]]=t})),n}}]),n}(c.ZP),p=n(9353),h={m_additional_sale:{position:"relative"}},f=(0,p.Z)(h),g=n(78893),m=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"dayTourBuyNote",void 0),(0,l.Z)((0,s.Z)(o),"ticketBuyNote",void 0),(0,l.Z)((0,s.Z)(o),"buynoteStyle",void 0),(0,l.Z)((0,s.Z)(o),"imgRefInst",void 0),(0,l.Z)((0,s.Z)(o),"imgLock",void 0),o.cName="booking-additional-sale-resource",o.imgLock=!1,o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.checkClauseShowPosition;e.ABTest&&(0,g.DG)(this.props,e)&&t&&t()}},{key:"handleCountChange",value:function(e){var t=this.props,n=t.onAdditionalSaleChange,r=t.resource,o=r||{},i=o.resourceId;e!==this.props.count&&n&&n(i,e)}},{key:"stopPropagation",value:function(e){e&&e.stopPropagation&&e.stopPropagation()}},{key:"onChoiceDisabled",value:function(e){var t=this.props,n=t.resource,r=t.count,o=n.maxQuantity,i=n.minQuantity,a="",s=r+e;s<i?a="\u6700\u5c11\u9700\u9009\u62e9".concat(i,"\u4efd"):s>o&&(a="\u6700\u591a\u8d2d\u4e70".concat(o,"\u4efd")),a&&this.toast.show(a)}}]),n}(c.ZP),v=n(72747),_=n(298),y=n(17366),x=n(56569),b={m_add_sale_resource_wrapper:{borderRadius:(0,y.Vh)(10),padding:(0,y.Vh)(16),position:"relative"},m_add_sale_resource:{display:"flex",flexDirection:"row"},m_add_line_bottom:{position:"absolute",bottom:0,left:(0,y.Vh)(16),right:(0,y.Vh)(16),height:1/(0,x.md)(),backgroundColor:"#EBEFF5"},m_add_sale_resource_wrapper_last:{marginBottom:0},m_add_sale_img_row:{display:"flex",flexDirection:"row",justifyContent:"space-between",flex:1},m_add_sale_price_row:{display:"flex",flexDirection:"column",width:(0,y.Vh)(78),alignItems:"flex-end",justifyContent:"center"},m_add_sale_price:{display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-end",flexWrap:"wrap",marginBottom:(0,y.Vh)(8)},m_add_sale_reservation_item:{flexDirection:"row",display:"flex",justifyContent:"flex-end"},m_add_sale_reservation_item_plain:{marginTop:(0,y.Vh)(4),display:"flex"},m_add_sale_inventory_text:(0,_.Z)({display:"flex",flexDirection:"row",justifyContent:"flex-end",textAlign:"right",marginTop:(0,y.Vh)(2),marginBottom:(0,y.Vh)(2),fontSize:(0,y.Vh)(13),color:"#F2200C",letterSpacing:(0,y.Vh)(-.3),lineHeight:(0,y.Nv)((0,y.Vh)(19))},"android"==x.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_add_sale_price_del:{display:"flex",flexDirection:"row",justifyContent:"flex-end",color:"#555",fontSize:(0,y.Vh)(13),lineHeight:(0,y.Nv)((0,y.Vh)(17)),textAlign:"right",textDecorationLine:"line-through"},m_add_sale_final_price:(0,_.Z)((0,_.Z)({color:"#FF5500",fontSize:(0,y.Vh)(19)},"android"==x.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{lineHeight:(0,y.Nv)((0,y.Vh)(23))}),m_add_sale_price_sale:{display:"flex",flexDirection:"row",alignItems:"flex-end",marginLeft:(0,y.Vh)(2)},m_add_sale_price_free:{fontSize:(0,y.Vh)(17),fontWeight:"bold",color:"#FF5500"}},Z=(0,p.Z)(b),I=n(29509),C=n(83630),k=n(78277),w=n(3386),T=n(57113),S=n(35409),P=n(68983),L=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"editPassengerId",0),(0,l.Z)((0,s.Z)(o),"state",void 0),(0,l.Z)((0,s.Z)(o),"deletePassenger",(function(e,t){var n=o.props.changeAdditionalPassenger;n&&n(e,t)})),(0,l.Z)((0,s.Z)(o),"handleSelect",(function(e,t){t&&t();var n=o.props,r=n.changeAdditionalPassenger,i=n.resource;r&&r(i.resourceId,e)})),o.cName="booking-additional-fill",o.state={currentGroup:{resourceId:0}},o.handleToEdit=o.handleToEdit.bind((0,s.Z)(o)),o.handleToList=o.handleToList.bind((0,s.Z)(o)),o.onSavePassenger=o.onSavePassenger.bind((0,s.Z)(o)),o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){T.Z.add("passengerListPoplayer",S.Z,{props:{isOpened:!1}}),T.Z.add("passengerEditPoplayer",S.Z,{props:{isOpened:!1}}),T.Z.add("countrySelector",S.Z,{props:{isOpened:!1}})}},{key:"componentWillReceiveProps",value:function(e){if(this.editPassengerId&&(0,P.nK)(this.props.passengerList,e.passengerList,this.editPassengerId)){var t=this.state.currentGroup,n=this.props.resource,r=this.getNewGroupInfo(t,n.passengerModal);this.updatePassengerListPoplayer(e.passengerList,r)}}},{key:"updatePassengerListPoplayer",value:function(e,t){if(T.Z.get("passengerListPoplayer")){var n=T.Z.get("passengerListPoplayer").assistComponent,r=(0,_.Z)((0,_.Z)({},n.childProps),{},{plist:e,groupInfo:t});T.Z.change("passengerListPoplayer",(0,_.Z)((0,_.Z)({},n),{},{childProps:r}))}this.editPassengerId=0}},{key:"handleToList",value:function(e){this.setState({currentGroup:e});var t=this.props.passengerList;(0,k.Z)({currentGroup:e,passengerList:t,listType:C.r8.traveler,onSelect:this.handleSelect,handleToEdit:this.handleToEdit})}},{key:"handleToEdit",value:function(e,t,n){(0,w.Z)({groupInfo:e,passengerInfo:t,direction:n,listType:C.r8.traveler,onSave:this.onSavePassenger})}},{key:"onSavePassenger",value:function(e){var t=this.props,n=t.addPassenger,r=t.resource;n&&n(e,r.resourceId),this.editPassengerId=e.PassengerID||1}},{key:"changeContact",value:function(e){var t=this.props,n=t.changeAdditionalContact,r=t.resource;n&&n(r.resourceId,e)}},{key:"getNewGroupInfo",value:function(e,t){var n=null!==t&&void 0!==t&&t.group?t.group.find((function(t){return t.resourceId===e.resourceId})):{};return n}}]),n}(c.ZP),N={m_add_sale_fill:{backgroundColor:"#F8FAFC",paddingLeft:(0,y.Vh)(12),paddingRight:(0,y.Vh)(12),position:"relative",borderRadius:(0,y.Vh)(8),marginTop:(0,y.Vh)(12)},m_add_sale_fill_warn:{backgroundColor:"#fef3f2"},m_add_sale_fill_info:{paddingRight:(0,y.Vh)(12)}},j=(0,p.Z)(N),D=n(46499),V=n(7921),E=n(2269),R=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.resource,o=n.count,i=n.passengerList,a=n.anchor,s=r||{},l=s.passengerModal,c=(s.appendInfoList,l||{}),d=c.group,h=c.contactInfo,f=c.useMainPassen,g="additionalPassenger".concat(r.resourceId)==a&&(null===d||void 0===d?void 0:d.length)&&(null===(e=d[0].dChoice)||void 0===e?void 0:e.length)!==d[0].choice;return o>0&&!f&&(d&&d.length||h&&h.contact&&h.contact.length)?(0,E.jsxs)(v.G7,{style:(0,y.wh)([j.m_add_sale_fill]),children:[d&&d.length?(0,E.jsx)(D.Z,{errorTips:g,plist:i,group:d,changePassenger:this.deletePassenger,handleToList:this.handleToList,handleToEdit:function(e){t.handleToEdit(e,{},"bottom")},fstyle:(0,p.Z)({m_passenger_fill_label:{width:(0,y.Vh)(68)},m_passenger_fill_border_error:{borderBottomColor:"#ebeff5"},m_passenger_fill_first:{marginTop:0}}),errorKey:"additionalPassengerError"}):null,(0,E.jsx)(v.G7,{style:(0,u.gI)(j,"m_add_sale_fill_info"),children:h&&h.contact&&h.contact.length?(0,E.jsx)(V.Z,(0,_.Z)((0,_.Z)({},h),{},{changeContact:this.changeContact.bind(this)})):null})]}):null}}]),n}(L),A=n(37066),F=n(64156),M=n(2446),O=n(50221),B=n(54307),G=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"onLinkPress",value:function(e){B.Z.setString(e),this.toast.show("\u590d\u5236\u6210\u529f")}}]),n}(c.ZP),H=(0,p.Z)({m_shelf_group_detail:{display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"},m_shelf_group_detail_content:{minHeight:185},m_shelf_group_detail_item:{paddingLeft:16,paddingRight:16,marginTop:12,display:"flex",flexDirection:"column"},m_shelf_group_detail_item_first:{marginTop:0},m_shelf_group_detail_name:{fontSize:(0,y.Vh)(20),color:"#333333",fontWeight:"bold",marginBottom:8},m_shelf_group_detail_desc:{fontSize:14,color:"#666666",lineHeight:(0,y.Nv)(20),marginBottom:20},m_shelf_group_detail_detail:{},m_shelf_group_detail_seperator:{height:1,width:"100%",backgroundColor:"#eeeeee",marginVertical:12},m_shelf_group_detail_copy:{width:18,height:14,marginRight:0},m_shelf_group_detail_copy_icon:{width:18,height:13,marginLeft:1,marginRight:1}}),z={a:{color:"#006FF6",textDecorationLine:"none"},ol:{marginBottom:20,paddingLeft:0,color:"#666"},ul:{marginBottom:20,paddingLeft:0,color:"#666"},p:{marginTop:0,marginBottom:20,color:"#666"},h2:{fontSize:17,marginBottom:8,color:"#333"}},U=n(58013),q=n(59201),W=n(71557),K=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"formatData",value:function(e){var t=this,n=e.replace(/<img.*?>|\/>/g,""),r=n.match(/<a.*?>.*?<\/a>/g)||[],o="";return r.forEach((function(n){var r=e.indexOf(n);if(-1!==r){var i=e.slice(0,r);i&&(o+=t.formatDataStr(i)),e=e.slice(r+n.length,e.length),n=n.slice(0,2)+' style="color:#006FF6"'+n.slice(2,n.length),o+=n}})),e&&(o+=this.formatDataStr(e)),o}},{key:"formatDataStr",value:function(e){var t=e.replace(/<img.*?>|\/>/g,""),n=/((http|https):\/\/(\w+)+(\.(\w+)+)+(\.(\w+)+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g,r=t.match(n)||[],o=e.replace(n,(function(e){return r.indexOf(e)>-1?"<a href='".concat(e,"' style='color:#006FF6'>").concat(e,"</a>"):e}));return o}},{key:"render",value:function(){var e=this,t=this.props,n=t.details,r=t.onClickButton,o=t.isHasImg,i=t.ifNeedFooter,a=void 0===i||i,s=t.onImagePress,l=void 0===s?function(e,t){}:s,c=t.imageStyle,u=void 0===c?{}:c,d=t.nextTitle,p=t.linearType,h=t.ImgBreatheModule;x.Db.get("window").height;return n&&n.length?(0,E.jsxs)(v.G7,{style:(0,y.wh)([H.m_shelf_group_detail,"RN"==this.platform&&o?{paddingBottom:44}:{},o?{height:(0,y.yx)("100% - 44px")?(0,y.yx)("100% - 44px"):"100%"}:{}]),children:[(0,E.jsx)(v.pf,{scrollY:!0,className:"H5"!=this.platform||o?"":"poplayer_scroll",style:(0,y.wh)([H.m_shelf_group_detail_content,o?{height:(0,y.yx)("100% - 46px")?(0,y.yx)("100% - 46px"):"auto"}:{maxHeight:.7*x.Db.get("window").height-84,height:"auto"}]),children:n.map((function(t,r){return(0,E.jsxs)(v.G7,{style:(0,y.wh)([H.m_shelf_group_detail_item,0===r?H.m_shelf_group_detail_item_first:null]),children:[t&&t.name?(0,E.jsx)(v.xv,{style:H.m_shelf_group_detail_name,children:t.name}):null,t.desc?(0,E.jsx)(v.xv,{style:H.m_shelf_group_detail_desc,children:t.desc}):null,t&&t.detail?(0,E.jsx)(v.G7,{style:H.m_shelf_group_detail_detail,className:"shelf-detail-tips",children:(0,E.jsx)(O.Z,{html:e.formatData(t.detail),tagsStyles:z,className:"shelf-detail-tips"+r,imageProps:{onImagePress:l,imageStyle:u,ImgBreatheModule:h,onLinkPress:e.onLinkPress.bind(e)},renderers:{a:function(t,n,r){return(0,E.jsxs)(v.xv,{style:(0,y.wh)([r]),onPress:function(){e.onLinkPress(t.href)},children:[n,(0,E.jsx)(q.Z,{style:{paddingLeft:2},onClick:function(){e.onLinkPress(t.href)},children:(0,E.jsx)(W.Z,{type:"copyLine",size:24,color:"#006FF6"})})]})}}})}):null,r!=n.length-1?(0,E.jsx)(v.G7,{style:H.m_shelf_group_detail_seperator}):null]})}))}),a?(0,E.jsx)(U.Z,{nextTitle:d||"\u53bb\u8d2d\u7968",showPriceAres:!1,onlyBtn:!0,booking:r,linearGradientStyles:p,fstyle:{m_icons:{marginLeft:0}},notHigh:!0}):null]}):null}}]),n}(G),J=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"dayTourBuyNote",void 0),(0,l.Z)((0,s.Z)(o),"ticketBuyNote",void 0),(0,l.Z)((0,s.Z)(o),"buynoteStyle",void 0),o.cName="booking-additional-sale-resource",o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){T.Z.add("productBuyNote",S.Z,{props:{isOpened:!1}}),T.Z.add("additionalTipsPoplayer",S.Z,{props:{isOpened:!1}})}},{key:"handleOpenLightSpot",value:function(){var e,t=null===(e=this.props)||void 0===e?void 0:e.resource,n=t.details,r=void 0===n?[]:n;if(r[0].detail&&r[0].detail.length&&r[0].detail.length>0){var o=!1;r&&r.length>0&&(o=!!r.find((function(e){return(e.detail||"").indexOf("<img")>-1}))),M.ZP.show({props:{name:"additionalTipsPoplayer",title:"\u8d2d\u7968\u8d34\u58eb",popHeight:o?"80%":"70%",zIndex:1e3,isScrollView:!1,renderOnshow:o},child:K,childProps:{details:r,isHasImg:o,ifNeedFooter:!1,imageStyle:{width:x.Db.get("screen").width-32}}})}}},{key:"handleOpenBuyNote",value:function(){var e=this.props,t=e.resource,n=e.spotId,r=e.showBuyNoteDetail,o=e.devTraceKeyData,i=t.resourceId,a=t.productId,s=t.type;s===A.Z.ticket?(0,F.n)({spotId:n,resourceId:i,hideBottom:!0,devTraceKeyData:o}):r&&r(a)}}]),n}(c.ZP),X={m_add_sale_resource_content:{display:"flex",flexDirection:"column",width:(0,y.Vh)(233)},m_add_sale_resource_title:(0,_.Z)((0,_.Z)({},(0,y.Sf)(2)),{},{display:"flex",position:"relative",flexDirection:"row",marginBottom:(0,y.Vh)(8)}),m_add_sale_resource_title_text:{color:"#111",fontWeight:(0,y.Ue)("500"),fontSize:(0,y.Vh)(17),lineHeight:(0,y.Nv)((0,y.Vh)(21)),letterSpacing:(0,y.Vh)(-.5)},m_add_sale_empty_text:{color:"transparent",fontSize:(0,y.Vh)(11)},m_add_title_tagbody:(0,_.Z)((0,_.Z)({display:"flex",position:"absolute",top:0,backgroundColor:"#E9F5FF"},(0,y.E0)((0,y.Vh)(8.5),(0,y.Vh)(8.5),(0,y.Vh)(2))),(0,y.o3)(0,(0,y.Vh)(5),0,(0,y.Vh)(6))),m_add_sale_title_tag_wrapper:(0,_.Z)((0,_.Z)({},y._),{},{overFlow:"hidden",borderRadius:(0,y.Vh)(2),backgroundColor:"#ebeff5",marginRight:(0,y.Vh)(4),marginBottom:(0,y.Vh)(4)}),m_add_sale_title_tag:(0,_.Z)((0,_.Z)((0,_.Z)({height:(0,y.Vh)(16),lineHeight:(0,y.Nv)((0,y.Vh)(16)),color:"#0F4999",fontSize:(0,y.Vh)(11)},(0,y.o3)(0,(0,y.Vh)(2))),(0,y.Sf)(1)),{},{letterSpacing:(0,y.Vh)(-.1)}),m_pleft5:{paddingLeft:(0,y.Vh)(5)},oneline:(0,_.Z)({},(0,y.Sf)(1)),m_add_sale_selection_desc:(0,_.Z)((0,_.Z)({},y._),{},{marginBottom:(0,y.Vh)(5)}),m_add_sale_light_spot:(0,_.Z)((0,_.Z)({},y.xI),{},{alignItems:"flex-start",flexWrap:"wrap",marginBottom:(0,y.Vh)(1)}),m_add_sale_light_desc:(0,_.Z)({display:"flex",color:"#555",fontSize:(0,y.Vh)(13),letterSpacing:(0,y.Vh)(-.3),lineHeight:(0,y.Nv)((0,y.Vh)(17)),flexShrink:1},"android"==x.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_add_sale_tip_desc:(0,_.Z)({fontSize:(0,y.Vh)(11),lineHeight:(0,y.Nv)((0,y.Vh)(16)),color:"#0066F6"},(0,y.Sf)(1)),m_add_sale_tip_desc_wrapper:(0,_.Z)((0,_.Z)((0,_.Z)({},y._),(0,y.o3)((0,y.Vh)(0),(0,y.Vh)(4))),{},{backgroundColor:"#EBF3FF",marginBottom:(0,y.Vh)(4),borderRadius:(0,y.Vh)(2)}),m_add_sale_light_rtview:{display:"flex",paddingTop:(0,y.Vh)(1)},m_add_sale_tag_list:(0,_.Z)((0,_.Z)({},y.xI),{},{flexWrap:"wrap",alignItems:"center"}),m_add_sale_devider:(0,_.Z)((0,_.Z)({fontSize:(0,y.Vh)(12)},(0,y.oM)((0,y.Vh)(6))),{},{lineHeight:(0,y.Nv)(19),width:y.WI,height:(0,y.Vh)(12),backgroundColor:"#C5C5C5",position:"relative"}),m_add_sale_info_text:{color:"#555",fontSize:(0,y.Vh)(13),letterSpacing:(0,y.Vh)(-.3),lineHeight:(0,y.Nv)((0,y.Vh)(17))},m_add_sale_price_row_left:(0,_.Z)((0,_.Z)({},y._),{},{flexShrink:1}),m_add_sale_sale_info:(0,_.Z)({},y._),m_add_official_tag:{display:"flex",marginRight:(0,y.Vh)(4),paddingLeft:(0,y.Vh)(2),paddingRight:(0,y.Vh)(2),borderRadius:(0,y.Vh)(2)},m_add_official_text:{textAlign:"center",fontSize:(0,y.Vh)(10),lineHeight:(0,y.Nv)((0,y.Vh)(14)),color:"#805837",fontWeight:"600"},m_add_martop5:{display:"flex"},m_add_sale_info_text_explainer_desc:{flexShrink:1},m_add_sale_info_text_reservation:{flexShrink:1,lineHeight:(0,y.Nv)((0,y.Vh)(18))}},Q=(0,p.Z)(X),$=n(88592),Y=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.index,r=t.resource,o=r.tags,i=r.BookingSuccessCanUse,a=r.tipTtile,s=r.level1SaleUnitCategoryName,l=function(e,t){return(0,$.mD)("ticket_matchdetail",{keyid:"179558",positionid:e+1,attachproductid:t})};return(0,E.jsxs)(q.Z,{style:Q.m_add_sale_resource_content,activeOpacity:1,id:"add_sale_resource_content_".concat(n),children:[r.resourceName?(0,E.jsx)(v.G7,{style:Q.m_add_sale_resource_title,children:(0,E.jsx)(v.xv,{style:Q.m_add_sale_resource_title_text,numberOfLines:2,children:r.resourceName})}):null,a||s?(0,E.jsxs)(q.Z,{style:Q.m_add_sale_light_spot,onClick:this.handleOpenLightSpot.bind(this),children:[s?(0,E.jsx)(v.G7,{style:Q.m_add_sale_title_tag_wrapper,children:(0,E.jsx)(v.xv,{style:Q.m_add_sale_title_tag,numberOfLines:1,children:s})}):null,a?(0,E.jsxs)(v.G7,{style:Q.m_add_sale_tip_desc_wrapper,children:[(0,E.jsxs)(v.xv,{style:Q.m_add_sale_tip_desc,numberOfLines:1,children:['"',a,'"']}),(null===r||void 0===r||null===(e=r.details)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.detail)||void 0===e?void 0:e.length)>0?(0,E.jsx)(v.G7,{style:Q.m_add_sale_light_rtview,children:(0,E.jsx)(W.Z,{type:"forward",size:24,color:"#0066F6"})}):null]}):null]}):null,r.userSelectionDesc?(0,E.jsx)(v.G7,{style:Q.m_add_sale_selection_desc,children:(0,E.jsx)(v.xv,{style:Q.m_add_sale_light_desc,children:r.userSelectionDesc})}):null,r.playCountInfo?(0,E.jsx)(v.G7,{style:Q.m_add_martop5,children:(0,E.jsx)(v.xv,{style:Q.m_add_sale_info_text,children:r.playCountInfo})}):null,(0,E.jsxs)(v.G7,{style:Q.m_add_sale_tag_list,children:[i?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(v.xv,{style:(0,y.wh)([Q.m_add_sale_info_text]),children:i}),(0,E.jsx)(v.xv,{style:Q.m_add_sale_devider})]}):null,o.map((function(e){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(v.xv,{style:(0,y.wh)([Q.m_add_sale_info_text]),children:e.text}),(0,E.jsx)(v.xv,{style:Q.m_add_sale_devider})]})})),(0,E.jsxs)(q.Z,{style:Q.m_add_sale_price_row_left,onClick:this.handleOpenBuyNote.bind(this),log:function(){return l(n,null===r||void 0===r?void 0:r.productId)},testID:"open_addition_buynote_".concat(n),children:[(0,E.jsx)(v.xv,{style:(0,y.wh)([Q.m_add_sale_info_text]),children:"\u8d2d\u4e70\u987b\u77e5"}),(0,E.jsx)(W.Z,{type:"forward",size:32,color:"#555"})]})]})]})}}]),n}(J),ee=n(48118),te=n(30492),ne=te.Z,re=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(e){return(0,r.Z)(this,s),t.call(this,e)}return(0,o.Z)(s,[{key:"render",value:function(){var e=this.props,t=e.index,r=e.resource,o=e.isLast,i=e.count,a=e.setRef,s=e.showBuyNoteDetail,l=e.testID,c=e.passengerList,d=e.changeAdditionalPassenger,p=e.changeAdditionalContact,h=e.addPassenger,f=e.anchor,g=e.logData,m=e.devTraceKeyData,_=e.isAgreeChild,y=e.onChangeAgree,x=e.ABTest,b=e.showClause,C=e.isClauseError,k=e.clauseLogs,w=i>0,T=function(e,t,n){return(0,$.mD)(n,{keyid:"179557",positionid:e+1,attachproductid:t})},S=!(null===b||void 0===b||!b.isShow);return x&&S&&(ne=n(99840).Z),(0,E.jsxs)(v.G7,{style:(0,u.gI)(Z,"m_add_sale_resource_wrapper",[o?"last":"border"]),children:[(0,E.jsx)(v.G7,{style:Z.m_add_sale_resource,id:"additionalPassenger".concat(r.resourceId),ref:function(e){return a&&a("additionalPassenger".concat(r.resourceId),e)},testID:l,children:(0,E.jsxs)(v.G7,{style:Z.m_add_sale_img_row,children:[(0,E.jsx)(Y,{index:t,resource:r,count:i,showBuyNoteDetail:s,devTraceKeyData:m}),(0,E.jsxs)(v.Au,{activeOpacity:1,style:Z.m_add_sale_price_row,onPress:this.stopPropagation.bind(this),children:[w&&r.reservationInfo?(0,E.jsx)(v.G7,{style:(0,u.gI)(Z,"m_add_sale_reservation_item"),children:(0,E.jsx)(v.xv,{style:Z.m_add_sale_inventory_text,children:r.reservationInfo})}):null,(0,E.jsxs)(v.G7,{style:Z.m_add_sale_price,children:[r.marketPrice?(0,E.jsx)(v.xv,{style:Z.m_add_sale_price_del,children:"\xa5".concat(r.marketPrice)}):null,r.reducedPrice||0==r.reducedPrice?(0,E.jsx)(v.G7,{style:Z.m_add_sale_price_sale,children:0==r.reducedPrice?(0,E.jsx)(v.xv,{style:Z.m_add_sale_price_free,children:"\u514d\u8d39"}):(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(v.xv,{style:Z.m_add_sale_final_price,children:["\xa5",r.reducedPrice]})})}):null]}),(0,E.jsx)(I.Z,{index:t,id:"AdditionalSale",count:i,max:r.maxQuantity,min:0,start:r.minQuantity,onlyPlusWhenZero:!0,onChange:this.handleCountChange.bind(this),onChoiceDisabled:this.onChoiceDisabled.bind(this),useNewStyle:!0,minusLog:function(){return T(t,null===r||void 0===r?void 0:r.productId,"ticket_lessen")},plusLog:function(){return T(t,null===r||void 0===r?void 0:r.productId,"ticket_add")},traceData:g.changeTraceData,resourceName:"".concat(r.resourceName,"\uff08").concat(r.resourceId,"\uff09")}),r.inventoryTip&&i?(0,E.jsx)(v.xv,{style:Z.m_add_sale_inventory_text,children:r.inventoryTip}):null]})]})}),(0,E.jsx)(R,{anchor:f,resource:r,count:i,passengerList:c,addPassenger:h,changeAdditionalPassenger:d,changeAdditionalContact:p}),x&&S&&(0,E.jsx)(q.Z,{id:"clause",ref:function(e){return a&&a("clause",e)},children:(0,E.jsx)(ne,{isAgree:_,onChangeAgree:y,fstyle:x?ee.N1:{},clauseText:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f",ABTest:x,isError:C,logs:k,position:"\u642d\u552e"})}),!o&&(0,E.jsx)(v.G7,{style:Z.m_add_line_bottom})]})}}]),s}(m),oe=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.additionalSale,r=t.passengerList,o=t.request,i=t.showBuyNoteDetail,a=t.logs,s=t.setRef,l=t.addPassenger,c=t.changeAdditionalContact,u=t.changeAdditionalPassenger,d=t.anchor,p=t.devTraceKeyData,h=t.isAgreeChild,g=t.onChangeAgree,m=t.ABTest,v=t.clauseShowPosition,_=t.checkClauseShowPosition,y=t.isClauseError,x=t.clauseLogs,b=n||{},Z=b.resources,I=b.onlyId,C=this.state.resourceCount;return Z&&Z.length?(0,E.jsx)(q.Z,{activeOpacity:1,style:f.m_additional_sale,ref:function(e){return s&&s("additionalPassenger",e)},children:Z.length?Z.map((function(t,n){return(0,E.jsx)(re,{index:n,resource:t,anchor:d,isLast:n===Z.length-1,onAdditionalSaleChange:e.onAdditionalSaleChange.bind(e),passengerList:r,addPassenger:l,changeAdditionalPassenger:u,changeAdditionalContact:c,count:C[null===t||void 0===t?void 0:t.resourceId]||0,spotId:o.spotid,showBuyNoteDetail:i,testID:a.additionalExposureLog(n,null===t||void 0===t?void 0:t.productId),setRef:s,onlyId:I,logData:a,devTraceKeyData:p,isAgreeChild:h,onChangeAgree:g,ABTest:m,showClause:v[null===t||void 0===t?void 0:t.resourceId],checkClauseShowPosition:_,isClauseError:y,clauseLogs:x},String(I)+n)})):null}):null}}]),n}(d)},37066:function(e,t,n){n.d(t,{Z:function(){return r},h:function(){return o}});var r=function(e){return e["audio"]="audio",e["ticket"]="ticket",e}({}),o=function(e){return e["grey"]="grey",e["blue"]="blue",e["orange"]="orange",e}({})},63287:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=n(90201),c=n(81876),u=n(45023),d=n(56034),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,c.Z)(r),"props",void 0),r.state={showWeb:!!e.showWeb},r.changeWeb=r.changeWeb.bind((0,c.Z)(r)),r}return(0,i.Z)(n,[{key:"changeWeb",value:function(){this.setState((function(e){return{showWeb:!e.showWeb}}))}}]),n}(d.ZP),h=n(72747),f=n(9353),g=n(17366),m=n(56569),v=m.Db.get("window"),_=v.height,y=v.width,x={m_clause_container:{display:"flex",paddingRight:(0,g.Vh)(16),paddingLeft:(0,g.Vh)(16),paddingTop:(0,g.Vh)(12),paddingBottom:(0,g.Vh)(6),alignItems:"center",flexDirection:"column"},m_clause_header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",paddingBottom:(0,g.Vh)(12),borderBottomColor:"#EEEEEE",borderBottomWidth:g.WI,borderBottomStyle:"solid"},m_clause_header_back:{display:"flex",alighItems:"center",justifyContent:"center",position:"absolute",top:0,right:0,height:(0,g.Vh)(21)},m_clause_header_text_wrapper:{display:"flex",justifyContent:"center"},m_clause_header_text:{color:"#111",fontSize:(0,g.Vh)(17),fontWeight:(0,g.Ue)("500"),lineHeight:(0,g.Nv)((0,g.Vh)(21))},m_clause_text_wrapper:{marginTop:(0,g.Vh)(18)},m_clause_text:{color:"#111",fontSize:(0,g.Vh)(15),lineHeight:(0,g.Nv)((0,g.Vh)(22))},m_clause_btn_liner:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:(0,g.Vh)(28),borderRadius:(0,g.Vh)(8),height:(0,g.Vh)(44),width:"100%"},m_clause_btn:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:(0,g.Vh)(8),height:(0,g.Vh)(44),width:"100%"},m_clause_btn_text:{color:"#fff",fontWeight:(0,g.Ue)("500"),fontSize:(0,g.Vh)(17)},m_clause_sub_text:{color:"#006FF6",fontSize:(0,g.Vh)(15),lineHeight:(0,g.Nv)((0,g.Vh)(20))},m_clause_text_web:{height:.5*_},m_clause_text_webView:{fontSize:(0,g.Vh)(15),width:.9*y}},b={linearGradientStart:{x:1,y:0},linearGradientEnd:{x:0,y:0},linearGradientColor:["rgba(0,111,246, 1)","rgba(0,111,246,1)"]},Z=(0,f.Z)(x),I=n(59201),C=n(55039),k=h.kh,w=function(e){return null},T={m_vertical_items_container:{backgroundColor:"#fff",paddingLeft:16,paddingRight:16,marginTop:12,marginLeft:12,marginRight:12,borderRadius:8,paddingTop:16,paddingBottom:1}},S=(0,f.Z)(T),P=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,c.Z)(r),"state",void 0),(0,u.Z)((0,c.Z)(r),"props",void 0),r.state={opacityAnimates:e.noAnimated?1:new h.fS.Value(1)},r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){!this.props.noAnimated&&this.loopAnimated()}},{key:"loopAnimated",value:function(){var e=this;h.fS.sequence([h.fS.timing(this.state.opacityAnimates,{toValue:.3,duration:500,easing:h.oY.linear,useNativeDriver:!0,isInteraction:!1}),h.fS.timing(this.state.opacityAnimates,{toValue:.9,duration:500,easing:h.oY.linear,useNativeDriver:!0,isInteraction:!1})]).start((function(){return e.loopAnimated()}))}}]),n}(l.Component),L=n(64571),N=(0,f.Z)({skeleton_loading:(0,r.Z)({},(0,g.oQ)("skeleton-loading 1.5s ease infinite"))}),j=N,D=n(2269),V=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.opacityAnimates,n=e.noAnimated,r=n?h.G7:h.fS.View;return(0,D.jsx)(r,{style:(0,L.kg)((0,g.wh)([j.skeleton_loading,{width:"100%",opacity:t}])),children:this.props.children})}}]),n}(P),E={m_breathe_list_row_container:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between"},m_element_breathe:{width:"100%",height:19,display:"flex",alignItems:"center",backgroundColor:"#f0f2f9",borderRadius:2}},R=(0,f.Z)(E),A=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.space,r=e.rowSpace,o=void 0===r?0:r,i=e.colStyle,a=void 0===i?{}:i,s=e.rowStyle,l=void 0===s?{}:s,c=e.blockStyle,u=void 0===c?{}:c,d=e.noAnimated;return(0,D.jsx)(h.G7,{style:a,children:t.map((function(e,t){return(0,D.jsx)(h.G7,{style:{marginBottom:n,marginRight:o},children:(0,D.jsx)(V,{noAnimated:d,children:(0,D.jsx)(h.G7,{style:(0,g.wh)([R.m_breathe_list_row_container,l]),children:e.map((function(e,t){if(e)return(0,D.jsx)(h.G7,{style:(0,g.wh)([R.m_element_breathe,e.width?{width:e.width}:{},e.height?{height:e.height}:{},e.backgroundColor?{backgroundColor:e.backgroundColor}:{},e.borderRadius?{borderRadius:e.borderRadius}:{},u])},t)}))})})},t)}))})}}]),n}(l.Component),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=void 0===t?[[{width:"77%"},{width:"10%"}],[{width:"62%"},{width:"10%"}],[{width:"77%"},{width:"10%"}],[{width:"62%"},{width:"10%"}]]:t,r=e.space,o=void 0===r?16:r,i=e.fstyle,a=e.noAnimated;return(0,D.jsx)(h.G7,{style:(0,g.wh)([S.m_vertical_items_container,i]),children:(0,D.jsx)(A,{config:n,space:o,noAnimated:a})})}}]),n}(l.Component),M=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.showClose,n=e.onClose,o=e.style,i=e.closeIcon,a=e.containerStyle,s=e.setRef,l=e.renderLoading,c=e.useRnWebView,u=c?w:k;return(0,D.jsxs)(h.G7,{style:Object.assign({width:"100%",height:"100%"},a||{}),children:[(0,D.jsx)(u,(0,r.Z)((0,r.Z)({scrollEnabled:!0,scalesPageToFit:!0,automaticallyAdjustContentInsets:!0,startInLoadingState:!0,renderLoading:l||function(){return(0,D.jsx)(D.Fragment,{children:Array.from({length:4}).map((function(e){return(0,D.jsx)(F,{})}))})}},this.props),{},{style:(0,r.Z)({backgroundColor:"transparent",width:m.Db.get("window").width,height:.85*m.Db.get("window").height},o||{}),ref:function(e){return s&&s(e)}})),t?(0,D.jsx)(h.Au,{style:{position:"absolute",right:12,top:12},onClick:n,children:(0,D.jsx)(h.JO,(0,r.Z)({type:"iconCancel",size:44,color:"#333"},i||{}))}):null]})}}]),n}(C.Z),O=m.Db.get("window"),B=O.width,G=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onCloseClausePop,n=e.onAgree,o=e.cleasuText,i=void 0===o?"":o,a=e.title,s=void 0===a?"":a,l=e.webUrl,c=e.footerText,u=void 0===c?"\u540c\u610f\u5e76\u7ee7\u7eed\u652f\u4ed8":c,d=e.lineStyle,p=void 0===d?{}:d,f=e.subText,g=void 0===f?"":f,m=this.state.showWeb,v=(0,r.Z)((0,r.Z)({},b),p);return(0,D.jsxs)(h.G7,{style:Z.m_clause_container,children:[(0,D.jsxs)(h.G7,{style:Z.m_clause_header,children:[(0,D.jsx)(I.Z,{style:Z.m_clause_header_back,onClick:t,children:(0,D.jsx)(h.JO,{type:"xclosed",size:42,color:"#5C7080"})}),(0,D.jsx)(h.G7,{style:Z.m_clause_header_text_wrapper,children:(0,D.jsx)(h.xv,{style:Z.m_clause_header_text,children:s})})]}),!(!i&&!g)&&(0,D.jsx)(h.G7,{style:Z.m_clause_text_wrapper,children:(0,D.jsxs)(h.xv,{children:[!!i&&(0,D.jsx)(h.xv,{style:Z.m_clause_text,children:i}),!!g&&(0,D.jsx)(h.xv,{style:Z.m_clause_sub_text,onPress:this.changeWeb,children:g}),!!g&&(0,D.jsx)(h.JO,{type:m?"arrowup":"arrowdown",size:21,color:"#006FF6"})]})}),!!l&&(0,D.jsx)(h.G7,{style:m?Z.m_clause_text_web:{display:"none"},children:(0,D.jsx)(M,{style:Z.m_clause_text_webView,source:{uri:l+"&tangramIframeWidth=".concat(B)}})}),(0,D.jsx)(h.o,{start:v.linearGradientStart,end:v.linearGradientEnd,direction:-90,colors:v.linearGradientColor,style:Z.m_clause_btn_liner,children:(0,D.jsx)(I.Z,{style:Z.m_clause_btn,onClick:n,children:(0,D.jsx)(h.xv,{style:Z.m_clause_btn_text,children:u})})})]})}}]),n}(p)},4962:function(e,t,n){n.d(t,{Z:function(){return G}});var r,o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(72747)),c=n(79301),u=n(95308),d=n(81876),p=n(45023),h=n(64571),f=n(56034),g=function(e){return{request:Object.assign({},e),actionUrl:"/restapi/soa2/12687/GetCountryCode"}},m=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var n,r,o;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[g(t.header)],e.next=3,t.http({list:n,needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u83b7\u53d6\u56fd\u5bb6\u7801\u4fe1\u606f"}});case 3:if(r=e.sent,r&&r.length){e.next=6;break}return e.abrupt("return");case 6:return o=r[0]&&r[0].countryInfoList,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={},_=n(99739),y=n(61252),x=n(92300),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,e),(0,p.Z)((0,d.Z)(r),"state",void 0),(0,p.Z)((0,d.Z)(r),"innerMapInfo",void 0),(0,p.Z)((0,d.Z)(r),"ocrVisible",void 0),r.state={cuurentNameType:e.cuurentNameType||"cn"},r.onChange=r.onChange.bind((0,d.Z)(r)),r.onBlur=r.onBlur.bind((0,d.Z)(r)),r.onFocus=r.onFocus.bind((0,d.Z)(r)),r.onClickPhonecode=r.onClickPhonecode.bind((0,d.Z)(r)),r.onSwitch=r.onSwitch.bind((0,d.Z)(r)),r.onClickOCR=r.onClickOCR.bind((0,d.Z)(r)),r.onChangeDate=r.onChangeDate.bind((0,d.Z)(r)),r.onClickNationality=r.onClickNationality.bind((0,d.Z)(r));var i=[_.fO.tt,_.fO.swan,_.fO.h5],a=(0,_.ZP)().taroEnv;return r.ocrVisible=!i.includes(a),r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.getMap()}},{key:"componentWillReceiveProps",value:function(){var e=this.props.isNationality;e&&this.getNationalityName()}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"onBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e);var t=this.props.contactPhoneClickLog;if("function"==typeof t&&(t=t()),t){var n=t,r=n.params,o=n.type;(0,y.Zz)(r,o)}}},{key:"onClickPhonecode",value:function(){var e=this.props,t=e.phonecode,n=e.onChangePhonecode;h.ZP.component.areas({data:{selectedCode:t,selectedCn:this.SwichCountry(t,"Code2Cn"),countryInfoMap:this.innerMapInfo||r},immediateCallback:function(e){n&&n(e?e.code.toString():86)}})}},{key:"onSwitch",value:function(){var e=this.state.cuurentNameType,t=this.props.onSwitchName,n="cn";n="cn"===e?"en":"cn",this.setState({cuurentNameType:n}),t&&t(n)}},{key:"onClickOCR",value:function(){var e=this.props.onClickOCR;e&&e()}},{key:"onChangeDate",value:function(e){if(e.detail.value){var t=(0,x.l)(e.detail.value).format("YYYY-MM-DD");this.props.onChange&&this.props.onChange(t)}}},{key:"onChangeGender",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"onClickNationality",value:function(){var e=this.props,t=e.value,n=e.onChange,o=this;h.ZP.component.areas({data:{selectedCode:this.SwichCountry(t,"Country2Code"),selectedCn:this.SwichCountry(t,"Country2Cn"),countryInfoMap:this.innerMapInfo||r},immediateCallback:function(e){n&&n(e?o.SwichCountry(e.cn.toString(),"Cn2Country"):"CN")}})}},{key:"getMap",value:function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t,n,o,i;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.props,n=t.isNationality,o=t.showPhoneCode,!n&&!o){e.next=11;break}if(r){e.next=9;break}return e.next=5,m(this);case 5:i=e.sent,this.innerMapInfo=r=i,e.next=10;break;case 9:this.innerMapInfo=r;case 10:n&&this.getNationalityName();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getNationalityName",value:function(){var e=this.props,t=e.isNationality,n=e.value,o="\u4e2d\u56fd",i=this.innerMapInfo||r;if(t&&i){var a=i.find((function(e){return e.country==n}));a&&(o=a.cn)}this.setState({nationalityName:o})}},{key:"SwichCountry",value:function(e,t){var n=this.props,o=n.isNationality,i=n.showPhoneCode,a=this.innerMapInfo||r;if((o||i)&&a){var s=a.find((function(n){return"Cn2Country"===t?n.cn==e:"Country2Code"===t||"Country2Cn"===t?n.country==e:"Code2Cn"===t?n.code==e:void 0}));if(s){if("Cn2Country"===t)return String(s.country);if("Country2Code"===t)return String(s.code);if("Code2Cn"===t||"Country2Cn"===t)return String(s.cn)}}return""}},{key:"getAddressBook",value:function(){var e=this.props.contactsCallback,t=void 0===e?function(){}:e;v.selectContact&&v.selectContact((function(e){e&&e.phoneList&&e.phoneList.length&&t(Object.values(e.phoneList[0])[0])}))}}]),n}(f.ZP),Z=n(99105),I=n(298),C=n(9353),k=n(17366),w={m_input_com:(0,I.Z)((0,I.Z)({display:"flex",flexDirection:"row",alignItems:"center"},(0,k.Cg)({direction:"bottom",width:k.WI,style:"solid",color:"#ebeff5"})),{},{overflow:"hidden"}),m_stretch:{alignItems:"stretch",flexDirection:"column"},no_border:{borderBottomWidth:0},m_input_com_label:{width:(0,k.Vh)(80),display:"flex",flexDirection:"row",flexShrink:(0,k.i4)(0),letterSpacing:(0,k.Vh)(-.28),boxSizing:"border-box"},m_input_com_label2:{width:(0,k.Vh)(80),display:"flex",flexDirection:"row",flexShrink:(0,k.i4)(0),letterSpacing:(0,k.Vh)(-.28),boxSizing:"border-box",paddingRight:(0,k.Vh)(19.5)},m_input_com_phonecode_label:{width:(0,k.Vh)(80)},m_input_com_label_view:{display:"flex",flexDirection:"row",alignItems:"center"},m_input_com_label_view_text:{display:"flex",flexDirection:"column"},m_input_com_label_text:{fontSize:(0,k.Vh)(15),lineHeight:(0,k.Nv)((0,k.Vh)(19)),letterSpacing:(0,k.Vh)(-.28),color:"#111",display:"flex"},m_input_com_label_text_icon:{marginLeft:(0,k.Vh)(3),marginTop:(0,k.Vh)(2)},m_input_com_sublabel:{},m_input_com_sublabel_text:{color:"#111",fontSize:(0,k.Vh)(11),letterSpacing:(0,k.Vh)(-.28),lineHeight:(0,k.Nv)((0,k.Vh)(12))},m_input_com_context:(0,I.Z)((0,I.Z)({},(0,k.ix)("border-box")),{},{display:"flex",flexDirection:"column",paddingTop:(0,k.Vh)(16),paddingBottom:(0,k.Vh)(16),flex:1,justifyContent:"center",position:"relative"}),m_input_com_context_top:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},m_input_com_context_top_phonecode:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:(0,k.Vh)(8)},m_input_com_context_top_phonecode_text:{color:"#333",fontSize:(0,k.Vh)(15),marginRight:(0,k.Vh)(6)},m_input_com_icon:{marginTop:(0,k.Vh)(2)},m_split_line:{height:(0,k.Vh)(12),width:k.WI,backgroundColor:"#c5c5c5",marginLeft:(0,k.Vh)(11)},m_input_com_context_errorTips:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginTop:2},m_input_com_context_errorTips_icon:{marginRight:(0,k.Vh)(2),marginTop:(0,k.Vh)(2),flex:0},m_input_com_context_errorTips_text:{color:"#F21500",fontSize:(0,k.Vh)(15),lineHeight:(0,k.Nv)((0,k.Vh)(19)),flex:1},m_input_com_erro:(0,I.Z)({},(0,k.Cg)({direction:"bottom",width:k.WI,style:"solid",color:"#f5190a"})),m_input_com_normal:{border:"none"},m_input_com_input:{width:(0,k.Vh)(240)},m_name_switch:(0,I.Z)({display:"flex",flexDirection:"row",height:23,width:41,borderWidth:1,borderStyle:"solid",borderColor:"#111",borderRadius:22,justifyContent:"center",alignItems:"center",padding:(0,k.Vh)(1)},(0,k.ix)("border-box")),m_name_switch_cn:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:9},m_name_switch_cn_activity:{backgroundColor:"#111"},m_name_switch_cn_activity_none:{backgroundColor:"#fff"},m_name_switch_en:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:9},m_name_switch_text:{fontSize:(0,k.Vh)(11),color:"#111"},m_name_switch_text_activity:{fontSize:(0,k.Vh)(11),color:"#fff"},m_name_switch_en_activity:{backgroundColor:"#111"},m_ocr:{display:"flex",flexDirection:"row",alignItems:"center"},m_ocr_text:{color:"#111",fontSize:(0,k.Vh)(15),marginLeft:(0,k.Vh)(2),lineHeight:(0,k.Nv)((0,k.Vh)(17)),letterSpacing:(0,k.Vh)(-.24)},m_input_com_gender:{display:"flex",flexDirection:"row"},m_input_com_gender_item:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingRight:(0,k.Vh)(70)},m_input_com_gender_item_active:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingRight:(0,k.Vh)(70)},m_input_com_gender_item_active_icon:{color:"#111"},m_input_com_gender_gray:{color:"#c5c5c5"},m_input_com_gender_text_black:{color:"#111"},m_input_com_gender_item_margin:{marginLeft:(0,k.Vh)(4),fontSize:(0,k.Vh)(15),lineHeight:(0,k.Nv)((0,k.Vh)(24))},m_input_com_wrap:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:(0,k.Vh)(16),color:"#333",flex:1},m_input_com_nation_default:{color:"#c5c5c5",fontSize:(0,k.Vh)(15)},m_input_com_nation:{color:"#111",fontSize:(0,k.Vh)(15)},m_forward_wrap:{display:"flex",flexDirection:"row",alignItems:"center"},m_bottom_poptip:(0,I.Z)((0,I.Z)({width:(0,k.Vh)(262),height:(0,k.Vh)(42),position:"absolute",bottom:(0,k.Vh)(5),backgroundColor:"#fff",borderRadius:(0,k.Vh)(5),left:(0,k.Vh)(60)},(0,k.Wn)({hShadow:0,vShadow:(0,k.Vh)(2),blur:(0,k.Vh)(8),spread:(0,k.Vh)(1),color:"rgba(0, 0, 0, 0.09)",rnColor:"rgba(0,0,0)",opacity:.09})),(0,k.Cg)({width:k.WI,style:"solid",color:"#eee"})),m_bottom_poptip_error:{bottom:(0,k.Vh)(5)},show_pop_tip:{paddingBottom:(0,k.Vh)(45),overflow:"visible",position:"relative"},show_mobile_pop_tip:{paddingBottom:(0,k.Vh)(32),overflow:"visible",position:"relative"},show_pop_tip_error:{paddingBottom:(0,k.Vh)(55),overflow:"visible",position:"relative"},m_poptip_triangle:(0,I.Z)((0,I.Z)((0,I.Z)({width:(0,k.Vh)(8),height:(0,k.Vh)(8),backgroundColor:"#fff",position:"absolute",left:(0,k.Vh)(42),top:(0,k.Vh)(-4)},(0,k.pm)({rotate:"45deg"})),(0,k.Wn)({hShadow:0,vShadow:(0,k.Vh)(2),blur:(0,k.Vh)(8),spread:(0,k.Vh)(1),color:"rgba(0, 0, 0, 0.09)",rnColor:"rgba(0,0,0)",opacity:.09})),(0,k.Cg)({width:k.WI,style:"solid",color:"#eee"})),m_poptip_triangle_phonecode:{left:(0,k.Vh)(112)},m_bottom_poptip_content:(0,I.Z)((0,I.Z)({width:(0,k.Vh)(260),height:(0,k.Vh)(40),position:"absolute",left:0,top:0,backgroundColor:"#fff",borderRadius:(0,k.Vh)(5)},k._),{},{justifyContent:"space-between",paddingLeft:(0,k.Vh)(12),paddingRight:(0,k.Vh)(12)},(0,k.ix)("border-box")),m_poptip_left:(0,I.Z)({height:(0,k.Vh)(25),flex:1},k._),m_register_phone_label:{color:"#111",fontSize:(0,k.Vh)(12)},m_register_phone:(0,I.Z)((0,I.Z)({backgroundColor:"#f5f9ff",borderRadius:(0,k.Vh)(3),marginLeft:(0,k.Vh)(8)},(0,k.Cg)({width:k.WI,style:"solid",color:"#0066F6"})),{},{height:(0,k.Vh)(25),width:(0,k.Vh)(98)},k._7),m_register_phone_text:{color:"#0066f6",fontSize:(0,k.Vh)(12)},m_poptip_right:(0,I.Z)({height:(0,k.Vh)(20),width:(0,k.Vh)(20)},k._7),m_input_style:{fontSize:(0,k.Vh)(15),letterSpacing:(0,k.Vh)(-.28),color:"#111"},m_input_font14:{fontSize:(0,k.Vh)(14)},m_gender_icon_wrapper:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},T=(0,C.Z)(w),S=n(71557),P=n(59201),L=n(71515),N=L.Picker,j=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,p.Z)((0,d.Z)(r),"state",void 0),r}return(0,i.Z)(n)}(f.ZP),D={m_picker_selector:{width:"100%"},m_input_com_date:{color:"#111",fontSize:(0,k.Vh)(15),display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},m_input_com_date_picker:{width:"100%"},m_input_com_date_view_default:{color:"#c5c5c5",fontSize:(0,k.Vh)(15)},m_input_com_date_view:{flex:1,lineHeight:(0,k.Nv)((0,k.Vh)(22))},m_input_com_date_view_value:(0,I.Z)({color:"#111",fontSize:(0,k.Vh)(15)},(0,k.Sf)(2))},V=(0,C.Z)(D),E=n(2269),R=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,r=e.mode,o=e.defaultValue,i=e.placeholder,a=e.isPoplayer,s=e.renderContent,c=e.onClick,u=e.isBirthday,d=Array.isArray(t)?t[0]:t;return(0,E.jsx)(l.G7,{style:V.m_picker_selector,children:a?(0,E.jsx)(P.Z,{style:V.m_input_com_date,onClick:c,children:(0,E.jsx)(l.G7,{style:V.m_input_com_date_view,children:s||(d?(0,E.jsx)(l.xv,{style:V.m_input_com_date_view_value,numberOfLines:2,children:d}):(0,E.jsx)(l.xv,{style:V.m_input_com_date_view_default,children:i||"\u8bf7\u9009\u62e9"}))})}):(0,E.jsx)(l.G7,{style:V.m_input_com_date,children:(0,E.jsx)(N,{mode:r,onChange:n,value:t||o,style:V.m_input_com_date_picker,haveValue:!!t,isBirthday:u,children:(0,E.jsx)(l.G7,{style:V.m_input_com_date_view,children:t?(0,E.jsx)(l.xv,{style:V.m_input_com_date_view_value,children:t}):(0,E.jsx)(l.xv,{style:V.m_input_com_date_view_default,children:i||"\u8bf7\u9009\u62e9"})})})})})}}]),n}(j),A=function(e){return null},F=n(32545),M=n(50738),O=n(88592),B=n(39140),G=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.lable,n=e.value,r=e.placeholder,o=e.type,i=e.showPhoneCode,a=e.phonecode,s=e.errorTips,c=e.showTip,u=e.onShowTip,d=e.showNameSwitch,p=e.showOCR,h=e.subLable,f=e.isDate,g=e.isSelect,m=e.isCTlimit,v=e.isGender,_=e.isNationality,y=e.isMobile,x=e.inputStyle,b=e.maxLength,I=e.selectorMode,C=e.selectorDefaultValue,w=e.isPoplayerSelector,L=e.onSelect,N=e.isSelector,j=e.isBirthday,D=e.renderContent,V=e.contactsCallback,G=e.contentStyle,H=void 0===G?{}:G,z=e.inputTest,U=e.isLast,q=e.inputTraceLog,W=e.showClearIcon,K=e.poptipPhoneNumber,J=e.showPopTip,X=e.onHidePopTip,Q=e.onChoosePopTip,$=e.poptipExposureLog,Y=e.poptipClickLog,ee=e.switchTraceLog,te=e.phonecodeTraceLog,ne=e.addressBookTraceLog,re=e.contactBookClickLog,oe=e.isSmallLabel,ie=e.errorStyle,ae=e.fstyle,se=void 0===ae?{}:ae,le=e.renderMobilePop,ce=(0,k.Ec)(T,se),ue=this.state,de=ue.cuurentNameType,pe=ue.nationalityName,he=h&&c;return(0,E.jsxs)(l.G7,{style:(0,k.wh)([ce.m_input_com,U?ce.no_border:null,J?s?ce.show_pop_tip_error:ce.show_pop_tip:{},le?ce.show_mobile_pop_tip:null]),testID:"booking_input_component_".concat(t),children:[t?(0,E.jsxs)(P.Z,{style:(0,k.wh)([oe?he?ce.m_input_com_label:ce.m_input_com_label2:ce.m_input_com_label,i?ce.m_input_com_phonecode_label:{}]),onClick:function(){u&&u()},children:[(0,E.jsxs)(l.G7,{style:ce.m_input_com_label_view_text,children:[(0,E.jsx)(l.xv,{style:ce.m_input_com_label_text,children:t}),h?(0,E.jsx)(l.xv,{style:ce.m_input_com_sublabel_text,children:h}):null]}),(0,E.jsx)(l.G7,{style:ce.m_input_com_label_view,children:c?(0,E.jsx)(S.Z,{type:"help",size:30,color:"#111",style:ce.m_input_com_label_text_icon}):null})]}):null,(0,E.jsxs)(l.G7,{style:(0,k.wh)([ce.m_input_com_context,s?ce.m_input_com_erro:ce.m_input_com_normal,H]),children:[(0,E.jsxs)(l.G7,{style:ce.m_input_com_context_top,children:[i?(0,E.jsxs)(P.Z,{style:ce.m_input_com_context_top_phonecode,onClick:this.onClickPhonecode,devTraceData:te,children:[(0,E.jsxs)(l.xv,{style:ce.m_input_com_context_top_phonecode_text,children:["+",a]}),(0,E.jsx)(S.Z,{type:"arrowdown",size:24,color:"#111",style:ce.m_input_com_icon}),(0,E.jsx)(l.G7,{style:ce.m_split_line})]}):null,f||N?(0,E.jsx)(l.G7,{style:ce.m_input_com_wrap,children:(0,E.jsx)(R,{mode:I,defaultValue:j?"1990-01-01":m?(0,F.ie)(new Date,"yyyy-MM-dd"):C,value:n,placeholder:r,isPoplayer:w,onChange:f?this.onChangeDate:this.onChange,onClick:L,renderContent:D,isBirthday:j})}):v?(0,E.jsxs)(l.G7,{style:ce.m_input_com_gender,children:[(0,E.jsxs)(P.Z,{style:"M"==n?ce.m_input_com_gender_item_active:ce.m_input_com_gender_item,onClick:this.onChangeGender.bind(this,"M"),children:[(0,E.jsx)(S.Z,{type:"boy",size:42,color:"M"==n?"#111":"#c5c5c5"}),(0,E.jsx)(l.xv,{style:(0,k.wh)([ce.m_input_com_gender_item_margin,"M"==n?ce.m_input_com_gender_text_black:ce.m_input_com_gender_gray]),children:"\u7537"})]}),(0,E.jsxs)(P.Z,{style:"F"==n?ce.m_input_com_gender_item_active:ce.m_input_com_gender_item,onClick:this.onChangeGender.bind(this,"F"),children:[(0,E.jsx)(S.Z,{type:"girl",size:42,color:"F"==n?"#111":"#c5c5c5"}),(0,E.jsx)(l.xv,{style:(0,k.wh)([ce.m_input_com_gender_item_margin,"F"==n?ce.m_input_com_gender_text_black:ce.m_input_com_gender_gray]),children:"\u5973"})]})]}):_?(0,E.jsx)(P.Z,{style:ce.m_input_com_wrap,onClick:this.onClickNationality,children:n?(0,E.jsx)(l.xv,{style:ce.m_input_com_nation,children:pe}):(0,E.jsx)(l.xv,{style:ce.m_input_com_nation_default,children:"\u8bf7\u9009\u62e9"})}):(0,E.jsx)(l.G7,{style:(0,k.wh)([ce.m_input_com_wrap,this.platform==B.NX.Mini?ce.m_stretch:{}]),children:(0,E.jsx)(l.fV,{children:(0,E.jsx)(Z.Z,{testID:"".concat(z),value:n,onClear:W,iconDelayTime:100,onChange:this.onChange,placeholder:r,type:o,onBlur:this.onBlur,onFocus:this.onFocus,className:"input",style:(0,k.wh)([ce.m_input_style,p?ce.m_input_font14:{},x||{}]),maxLength:b,isMobile:y,devTraceData:q,placeholderTextColor:"#c5c5c5"})})}),p&&this.ocrVisible?(0,E.jsxs)(P.Z,{log:(0,O.sO)("tkt_ocr_trace",{keyid:"218423"}),testID:(0,M.ap)((0,O.CA)("tkt_ocr_exposure","218424")),style:ce.m_ocr,onClick:this.onClickOCR,children:[(0,E.jsx)(S.Z,{type:"camera2",size:40,color:"#111"}),(0,E.jsx)(l.xv,{style:ce.m_ocr_text,children:"\u62cd\u7167\u8bc6\u522b"})]}):null,g||N?(0,E.jsx)(l.G7,{style:ce.m_forward_wrap,children:(0,E.jsx)(S.Z,{type:"forward",size:30,color:"#111"})}):null,d?(0,E.jsxs)(P.Z,{style:ce.m_name_switch,onClick:this.onSwitch,devTraceData:ee&&ee("cn"===de?"\u82f1\u6587":"\u4e2d\u6587"),children:[(0,E.jsx)(l.G7,{style:(0,k.wh)([ce.m_name_switch_cn,"cn"===de?ce.m_name_switch_cn_activity:ce.m_name_switch_cn_activity_none]),children:(0,E.jsx)(l.xv,{style:"cn"===de?ce.m_name_switch_text_activity:ce.m_name_switch_text,children:"\u4e2d"})}),(0,E.jsx)(l.G7,{style:(0,k.wh)([ce.m_name_switch_en,"en"===de?ce.m_name_switch_en_activity:ce.m_name_switch_cn_activity_none]),children:(0,E.jsx)(l.xv,{style:"en"===de?ce.m_name_switch_text_activity:ce.m_name_switch_text,children:"\u82f1"})})]}):null,V?(0,E.jsx)(A,{addressBookTraceLog:ne,contactBookClickLog:re,getAddressBook:this.getAddressBook.bind(this)}):null]}),s?(0,E.jsx)(l.G7,{style:(0,k.wh)([ce.m_input_com_context_errorTips,ie||{}]),className:"m_input_com_context_errorTips_normal",children:(0,E.jsx)(l.xv,{style:ce.m_input_com_context_errorTips_text,className:"m_input_com_context_errorTips_text_normal",children:s})}):null]}),J?(0,E.jsxs)(l.G7,{style:(0,k.wh)([ce.m_bottom_poptip,s?ce.m_bottom_poptip_error:{}]),testID:$,children:[(0,E.jsx)(l.G7,{style:(0,k.wh)([ce.m_poptip_triangle,i?ce.m_poptip_triangle_phonecode:{}])}),(0,E.jsxs)(l.G7,{style:ce.m_bottom_poptip_content,children:[(0,E.jsxs)(P.Z,{log:Y,onClick:Q,style:ce.m_poptip_left,children:[(0,E.jsx)(l.xv,{style:ce.m_register_phone_label,children:"\u4f7f\u7528\u6ce8\u518c\u624b\u673a\u53f7"}),(0,E.jsx)(l.G7,{style:ce.m_register_phone,children:(0,E.jsx)(l.xv,{style:ce.m_register_phone_text,children:K})})]}),(0,E.jsx)(P.Z,{onClick:X,style:ce.m_poptip_right,children:(0,E.jsx)(S.Z,{type:"xclosed",size:30,color:"#666"})})]})]}):null,le&&le()]})}}]),n}(b)},26382:function(e,t,n){n.d(t,{ZP:function(){return L},L5:function(){return N}});var r=n(22276),o=n(79301),i=n(298),a=n(95308),s=n(45023),l=n(20297),c=n(56034),u=n(48501),d=n(61101),p=n(99739),h=function(e,t,n){return{request:Object.assign({},t,{RequestTypeList:[1,3,4]}),actionUrl:"/restapi/soa2/12448/GetUserCommonInfo",proxy:n}},f=n(48407),g=n(82015),m=n(79522),v=n(64571),_=n(75971),y=n(121),x=n(39140),b=n(46e3),Z=n(72613),I=n(28150),C=n(84578),k=(0,Z.Z)(I.X),w=(0,p.ZP)().isInServer,T=(0,p.ZP)().platform,S=(0,s.Z)((0,s.Z)((0,s.Z)({},x.NX.H5,10650051852),x.NX.Mini,10650054085),x.NX.RN,10650051850),P=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,s,u,p,m,v,_,y,x,Z,I,C;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.params,r=t.devTraceKeyData,a=t.http,s=t.isBooking,u=t.isLoginWithoutType,p=t.isFromPrefetch,e.prev=1,!n.skid||s){e.next=4;break}return e.abrupt("return");case 4:return _=(0,c.Pg)(),_.clientInfo.pageId=S[T],y=[],x={},x.getProductPriceCalendar=y.length,y.push((0,d.Z)((0,i.Z)((0,i.Z)({},n),null!==n&&void 0!==n&&n.aggregation?{}:{token:""}),_,null!==n&&void 0!==n&&n.aggregation?{tags:[{key:"callRecallPK",value:"pkOne"}],extension:[{name:"defaultHideWhitelistSaleProp",value:"true"}]}:{})),x.getScenicSpotInfo=y.length,y.push((0,l.Z)(_,(0,i.Z)({scenicSpotIds:n.spotid||n.poiid?[n.spotid]:[0],poiIds:[n.poiid],saleUnitParam:(0,i.Z)({resourceIds:n.optid},n.productId?{productIds:[n.productId]}:{}),needBasicInfo:!0},"RN"==T?{needBargainInfo:!0,needHotelCoupon:!0}:n.isscan?{needHotelCoupon:!0,tags:[{key:"isScan",value:"T"}]}:{}))),x.getUserCommonInfo=y.length,y.push(h(n,_,w&&!u?function(){return{Data:null}}:null)),x.getHoliday=y.length,y.push((0,b.Z)()),Z=["reservationTerms","sku","passengerList","params","passengerModal","holiday"],null!==n&&void 0!==n&&null!==(m=n.optid)&&void 0!==m&&m.length&&(x.getProductInfo=y.length,y.push((0,f.Z)(n,_,"booking","booking")),x.getCustomerTemplate=y.length,y.push((0,g.Z)(n,_)),Z=Z.concat(["productInfo","couponParams","imInfo","refundPolicy"])),null!==n&&void 0!==n&&null!==(v=n.optid)&&void 0!==v&&v.length&&null!==n&&void 0!==n&&n.aggregation&&(x.getProductPriceCalendarRecommend=y.length,y=y.concat([(0,d.Z)((0,i.Z)((0,i.Z)({},n),{},{type:"recommend"},{aggregation:!1,productId:"",token:""}),_)])),I={list:y,cachePolicy:{enableCache:!0,cacheExpireTime:15,cacheLocation:"MEM"}},r&&(I.needDevTrace=!0,I.devTraceData={attrs:r,scene:"[\u9996\u5c4f]"}),w&&(I.ssrTimeRecorder=k,I.isFirstScreenRequest=!0),p&&(I.isFromPrefetch=!0),e.next=25,a(I);case 25:return C=e.sent,console.log(s?"\u586b\u5199\u9875\u8bf7\u6c42":"\u9884\u8bf7\u6c42",n,y,C,x),e.abrupt("return",{response:C,modules:Z,indexMap:x});case 30:return e.prev=30,e.t0=e["catch"](1),e.abrupt("return",{});case 33:case"end":return e.stop()}}),e,null,[[1,30]])})));return function(t){return e.apply(this,arguments)}}(),L=P,N=function(e,t){var n={},o=!1;if(e)n=(0,m.vn)(e);else{var a=(0,v.FN)(t);o=a.router.isPushOpen,n=o?a.router.pushParams:a.router.params}var l=(0,y.I8)(n);C.Rv.save({originParamsUrl:l}),n.optid=n.optid||n.tid,n.optid=n.optid?decodeURIComponent(n.optid):void 0,n.count=n.count?decodeURIComponent(n.count):void 0,n.date=n.date?decodeURIComponent(n.date):"";var c=n.date?n.date.split("|"):[];n.subResourceId=n.subResourceId?decodeURIComponent(n.subResourceId):void 0;var d=v.ZP.mkt.getUnion(),p=(0,_._)(n,!1),h=(0,y.oG)(n.optid?n.optid.split("|"):[]),f=h[0]?(0,s.Z)({},h[0],(0,y.oG)(n.subResourceId?n.subResourceId.split("-"):[]).map((function(e,t){return{resourceId:e,date:c[t]||n.date,unitQuantity:1}}))):{},g=(0,i.Z)({spotid:n.spotid,poiid:n.poiid,optid:h,originOptid:h,boxMap:f,isCrossDate:c.length>1,date:c.length>1?c[0]:n.date||"",count:n.count?n.count.split("|"):[],originCount:n.count?n.count.split("|"):[],sid:(n.sid||String(d.sid||"")).trim(),aid:(n.aid||n.allianceid||String(d.allianceid||"")).trim(),isscan:"T"==n.isscan,isFromSku:(0,r.Z)(Object.values(u.pL)).includes(n.fromSkuType),fromSkuType:n.fromSkuType||"",useNative:"T"==n.usenative,usePage:u.zh.book,clientId:v.ZP.clientID||"",skid:Number(n.skid)||null,stepMode:"T"==n.isscan?"isscan":n.fromSkuType==u.pL.resource?"resourcePage":"",isShowChangeButton:[u.pL.skuPeople,u.pL.skuProduct,u.pL.skuResource].includes(n.fromSkuType),token:Array.isArray(n.token)?decodeURIComponent(n.token[0]):n.bookingMark||!n.token?"":decodeURIComponent(n.token),salesPropertyIds:decodeURIComponent(n.salesPropertyIds||""),extParams:p,aggregation:n.token&&n.productId&&(n.optid&&n.date||!n.optid&&!n.date),productId:n.productId||"",bookingMark:n.bookingMark,replayToken:Array.isArray(n.token)?n.token[1]:n.bookingMark?n.token:"",isNotCtripMini:n.isNotCtripMini||"",ctm_ref:n.ctm_ref,traceid:n.traceid,firstLevelIds:decodeURIComponent(n.firstLevelIds||""),isScanShelf:"true"==n.isScanShelf,isbbc:"true"==n.bbc,resultCode:Number(n.resultCode)||null},(0,_.n)(n));return g}},99840:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(56034),c=n(35409),u=n(2446),d=n(57113),p=n(63287),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),o.openDetail=o.openDetail.bind((0,s.Z)(o)),o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){d.Z.add("authorizePopLayer",c.Z,{props:{isOpened:!1}})}},{key:"openDetail",value:function(){u.ZP.show({props:{name:"authorizePopLayer",isShowHeader:!1,isScrollView:!1,isModal:!0},child:p.Z,childProps:{onAgree:this.onChangeAgree.bind(this),title:"\u4e2a\u4eba\u4fe1\u606f\u51fa\u5883\u6388\u6743\u58f0\u660e",footerText:"\u540c\u610f\u6388\u6743",onCloseClausePop:this.closePop.bind(this),webUrl:"https://m.ctrip.com/tangram/MzU1ODU=?ctm_ref=vactang_page_35585&isHideNavBar=YES&apppgid=10650051850&hidehead=1",showWeb:!0,lineStyle:{linearGradientColor:["rgba(255, 102, 0, 1)","rgba(255,136,0,1)"]}}})}},{key:"closePop",value:function(){u.ZP.hide("authorizePopLayer")}},{key:"onChangeAgree",value:function(){var e=this.props.onChangeAgree;this.closePop(),e&&e({agree:!0})}}]),n}(l.ZP),f=n(72747),g=n(71557),m=n(48118),v=n(59201),_=n(17366),y=n(45023),x=n(58472),b=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,y.Z)((0,s.Z)(o),"textRef",void 0),o.state={width:0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.dynamicCalcWidth()}},{key:"dynamicCalcWidth",value:function(){var e=this;(0,x.L6)(this.textRef,(function(t){t&&t.width&&e.setState({width:t.width+4})}))}}]),n}(l.ZP),Z=n(298),I=n(9353),C={m_tip_container:(0,Z.Z)({backgroundColor:"#000000",borderRadius:(0,_.Vh)(4),height:(0,_.Vh)(20),top:-(0,_.Vh)(24),left:-(0,_.Vh)(12),position:"absolute"},_._7),m_tip_text_wrapper:(0,Z.Z)({},_._7),m_tip_text:(0,Z.Z)({color:"#fff",fontSize:(0,_.Vh)(11),position:"absolute"},(0,_.WB)((0,_.Vh)(2))),m_tip_triangle_wrapper:(0,Z.Z)((0,Z.Z)({height:(0,_.Vh)(9),width:"100%",position:"absolute",left:0,bottom:-(0,_.Vh)(8)},_._7),{},{overflow:"hidden",alignItems:"flex-start",marginLeft:(0,_.Vh)(18)}),m_tip_triangle:(0,Z.Z)({width:(0,_.Vh)(8),height:(0,_.Vh)(8),backgroundColor:"#000000"},(0,_.pm)({translateY:-(0,_.Vh)(6),rotate:"45deg"})),m_tip_error:{backgroundColor:"#F21500"}},k=(0,I.Z)(C),w=n(2269),T=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.fstyle,o=void 0===r?{}:r,i=t.isError,a=this.state.width,s=(0,_.Ec)(k,o);return(0,w.jsxs)(f.G7,{style:(0,_.wh)([s.m_tip_container,{width:a},i?s.m_tip_error:{}]),children:[(0,w.jsx)(f.G7,{style:s.m_tip_triangle_wrapper,children:(0,w.jsx)(f.G7,{style:(0,_.wh)([s.m_tip_triangle,i?s.m_tip_error:{},a?{opacity:1}:{opacity:0}])})}),(0,w.jsx)(f.G7,{style:(0,_.wh)([s.m_tip_text_wrapper,a?{opacity:1}:{opacity:0}]),children:(0,w.jsx)(f.xv,{className:"tip",ref:function(t){return e.textRef=t},style:s.m_tip_text,children:n})})]})}}]),n}(b),S=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.isAgree,n=e.onChangeAgree,r=e.clauseText,o=void 0===r?"\u60a8\u5df2\u77e5\u6653\u60a8\u7684\u8eab\u4efd\u8bc1\u7b49\u4fe1\u606f\u5c06\u7528\u4e8e\u9884\u8ba2\u987b\u5b9e\u540d\u5236\u7684\u4ea7\u54c1\uff0c\u8bf7\u786e\u4fdd\u4fe1\u606f\u771f\u5b9e\u6709\u6548\u3002\u643a\u7a0b\u4ec5\u5728\u6709\u5177\u4f53\u4ea4\u6613\u65f6\u6388\u6743\u63d0\u4f9b\u7ed9\u7b2c\u4e09\u65b9":r,i=e.boldText,a=e.clickTraceLog,s=e.hideAgree,l=e.fstyle,c=void 0===l?{}:l,u=e.isAtBottom,d=void 0!==u&&u,p=e.isError,h=void 0!==p&&p,y=e.ABTest,x=e.logs,b=e.position,Z=e.tipText,I=e.authorize,C=(0,_.Ec)(m.ZP,c),k=x||{},S=k.clauseExposureLog,P=k.clauseClickLog;return(0,w.jsxs)(f.G7,{style:C.clause_view,testID:S&&S({position:b}),children:[!s&&!t&&y&&(0,w.jsx)(T,{text:Z||"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f",isError:h,fstyle:c},Z),(0,w.jsxs)(v.Z,{style:C.clause_view_wrapper,onClick:function(){n&&n({})},devTraceData:a&&a(t)||P&&P({position:b}),children:[s?null:(0,w.jsxs)(f.G7,{style:C.clause_view_tilte,children:[(0,w.jsx)(g.Z,{type:t?"selectedShape":"unselected",size:y?d?32:40:30,style:C.clause_view_tilte_icon,color:"#0066f6"}),!y&&(0,w.jsx)(f.xv,{style:C.clause_view_tilte_text,children:"\u9605\u8bfb\u5e76\u540c\u610f\u4ee5\u4e0b\u5185\u5bb9"})]}),(0,w.jsxs)(f.G7,{style:C.clause_view_content,children:[!!i&&!y&&(0,w.jsx)(f.xv,{style:C.clause_view_content_text_bold,children:i}),(0,w.jsxs)(f.xv,{style:s?C.clause_view_content_text_gray:C.clause_view_content_text,children:[y&&d&&(0,w.jsx)(f.xv,{style:C.clause_view_content_placeholder,children:"\u5360z"}),o,!!I&&(0,w.jsx)(f.xv,{style:C.clause_authorize_text_highLight,onPress:this.openDetail,children:"\u4e2a\u4eba\u4fe1\u606f\u51fa\u5883\u6388\u6743\u58f0\u660e"})]})]})]})]})}}]),n}(h)},48118:function(e,t,n){n.d(t,{zr:function(){return s},Le:function(){return l},N1:function(){return c},Ze:function(){return u}});var r=n(298),o=n(9353),i=n(17366),a={clause_view:{marginTop:(0,i.Vh)(18),lineHeight:(0,i.Nv)((0,i.Vh)(18)),marginBottom:(0,i.Vh)(-10)},clause_view_tilte:(0,r.Z)({marginBottom:(0,i.Vh)(10)},i._),clause_view_tilte_icon:{marginRight:(0,i.Vh)(6)},clause_view_tilte_text:{color:"#99AECA",fontSize:(0,i.Vh)(13),fontWeight:(0,i.Ue)("500"),lineHeight:(0,i.Nv)(17)},clause_view_content:{display:"flex",flexDirection:"column"},clause_view_content_text:{fontSize:(0,i.Vh)(13),color:"#99AECA",lineHeight:(0,i.Nv)((0,i.Vh)(17))},clause_view_content_text_gray:{fontSize:(0,i.Vh)(13),color:"#aaa",lineHeight:(0,i.Nv)((0,i.Vh)(19))},clause_view_content_text_bold:{fontWeight:(0,i.Ue)("500"),fontSize:(0,i.Vh)(13),color:"#999",lineHeight:(0,i.Nv)((0,i.Vh)(19))},clause_authorize_view:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItem:"center"},clause_authorize_text:{fontSize:(0,i.Vh)(13),color:"#888888",lineHeight:(0,i.Nv)((0,i.Vh)(19))},clause_authorize_text_highLight:{fontSize:(0,i.Vh)(13),color:"#006FF6",lineHeight:(0,i.Nv)((0,i.Vh)(19))}},s=(0,o.Z)({clause_view:{marginTop:(0,i.Vh)(12),marginBottom:(0,i.Vh)(12)},clause_view_wrapper:{flexDirection:"row"},clause_view_tilte:{flexDirection:"column",justifyContent:"flex-start"},clause_view_content:{flex:1},clause_view_content_text:{color:"#888"}}),l=(0,o.Z)({clause_view:{marginTop:(0,i.Vh)(12),marginBottom:0},clause_view_wrapper:{flexDirection:"row"},clause_view_tilte:{flexDirection:"column",justifyContent:"flex-start",marginTop:(0,i.Vh)(2)},clause_view_content:{flex:1},clause_view_content_text:{color:"#888"}}),c=(0,o.Z)({clause_view:{marginTop:(0,i.Vh)(12),marginBottom:0},clause_view_wrapper:{flexDirection:"row"},clause_view_tilte:{flexDirection:"column",justifyContent:"flex-start",marginTop:(0,i.Vh)(2)},clause_view_content:{flex:1},clause_view_content_text:{color:"#888"}}),u=(0,o.Z)({clause_view_tilte:{position:"absolute",top:(0,i.Vh)(1),zIndex:10},clause_view_content_placeholder:{fontSzie:(0,i.Vh)(13),color:"transparent"},m_tip_triangle_wrapper:{marginLeft:(0,i.Vh)(16)}});t["ZP"]=(0,o.Z)(a)},86434:function(e,t,n){n.d(t,{Z:function(){return K}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(298)),l=n(81876),c=n(45023),u=n(56034),d=n(121),p=n(83630),h=n(79301),f=n(95308),g=function(e,t){return{request:Object.assign({},t,(0,s.Z)({},e)),actionUrl:"/restapi/soa2/10220/json/ConvertPinyinQOC"}},m=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(t,n){var r,o,i;return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[g(t.header,{words:n})],e.next=3,t.http({list:r,needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u4e2d\u6587\u8f6c\u6362\u62fc\u97f3"}});case 3:if(o=e.sent,o&&o.length){e.next=6;break}return e.abrupt("return");case 6:return i=o[0]&&o[0].data&&o[0].data.pinyin||[],e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(64571),_=n(83692),y=n(9422),x=n(27868),b=n(59415),Z=n(75833),I={validateInfo:function(e,t,n){if("CountryCode"===n)return{};var r=this.state,o=r.defaultCardtype,i=r.passengerInfo,a="",s={};switch(e){case 1:a=(0,_.Du)(t),s={CNNameError:a};break;case 200:a=(0,_.k5)(t),s={EnglishLastNameError:a};break;case 201:a=(0,_.k5)(t),s={EnglishFirstNameError:a};break;case 4:a=(0,_.TM)(t)?"\u8bf7\u9009\u62e9\u56fd\u5bb6/\u5730\u533a":"",s={NationalityError:a};break;case 6:a=(0,_.nG)(t),s={genderError:a};break;case 7:a=(0,_.TM)(t)?"\u8bf7\u586b\u5199\u8bc1\u4ef6\u53f7":"",a||(1==(null===o||void 0===o?void 0:o.cardType)?a=(0,_.SB)(t):[20,32].includes(null===o||void 0===o?void 0:o.cardType)||(a=(0,_.SB)(t)?a:"\u60a8\u8f93\u5165\u7684\u662f\u8eab\u4efd\u8bc1\uff0c\u8bf7\u5207\u6362\u8bc1\u4ef6\u7c7b\u578b\u6216\u8f93\u5165".concat(o.name,"\u53f7"))),s={cardError:a};break;case 8:a=(0,_.Qk)(t),s={birthError:a};break;case 10:a=(0,_.TM)(t)?"\u8bf7\u9009\u62e9\u8bc1\u4ef6\u6709\u6548\u671f":"",s={CardTimelimitError:a};break;case 11:var l=(null===i||void 0===i?void 0:i.CountryCode)||"86";a=(0,_.my)(t,l),s={phoneError:a};break;case 500:a=(0,_.TM)(t)?"\u8bf7\u9009\u62e9\u8bc1\u4ef6\u7b7e\u53d1\u65e5\u671f":"",s={IssueDateError:a};break}return s},onChange:function(e,t,n){var r=t?t.trim():t;this.hasChanged=!0;var o=this.state,i=o.passengerInfo,a=o.defaultCardtype,l=this.validateInfo(n,r,e),c=(0,d.I8)(i),u=!1;if("CardNo"===e&&a&&a.cardType)this.changeCardNoAndTimeLimit("CardNo",r,c,a);else if(("CardTimelimit"===e||"IssueDate"===e)&&a&&a.cardType)this.changeCardNoAndTimeLimit(e,r,c,a);else if("MobilePhone"===e&&c.MobilePhone)r=String(r).replace(/[ -]/g,""),Object.assign(c,{MobilePhone:r});else if("CountryCode"===e&&c.CountryCode){u=!!this.logData.changePhonecodeTraceLog,c[e]=r;var p="86"===r?11:100;this.setState({MobileMaxLength:p})}else"CountryCode"===e&&(u=!!this.logData.changePhonecodeTraceLog),c[e]=r;c.isEdit=!0,u&&(0,x.Z)(this.logData.changePhonecodeTraceLog(c[e]||"86",r)),this.props.isFromNewGuest&&this.onChangeSave(c),this.setState((function(e){return{passengerInfo:c,errorTips:(0,s.Z)((0,s.Z)({},e.errorTips),l)}}))},onSave:function(e){var t=this;v.ZP.hideKeyboard(),setTimeout((0,f.Z)((0,h.Z)().mark((function n(){var r,o,i,a,l,c,u,d,f,g,m,v,_,b,I,C,k,w,T,S,P,L,N,j,D;return(0,h.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.props,i=o.onSave,a=o.onCloseEditPop,l=o.groupInfo,c=o.clearInsuranceError,u=o.listType,d=t.state,f=d.passengerInfo,g=d.addPassenger,m=d.defaultCardtype,v=d.isShowEnglish,_=d.isAgree,b=l.resourceIdList,I=l.resourceId,C=l.insuranceId,k=l.boxId,w=I||C,T=b||[w],_){n.next=8;break}return t.toast.show("\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u4e0b\u65b9\u6388\u6743\u5185\u5bb9"),n.abrupt("return");case 8:if(f.resourceCardInfo=f.resourceCardInfo||{},S=(0,Z.jX)(k,w),P=null===(r=f.resourceCardInfo[S])||void 0===r?void 0:r.CardType,m&&m.cardType&&f&&(0,Z.Zx)(T,f,null===m||void 0===m?void 0:m.cardType,k),L={},g&&g.map((function(e){var t=f?(0,y.Z)(e.itemId,f,l.CardInfo,w,k):{};t.isError&&Object.assign(L,t)})),!L||!L.isError){n.next=23;break}return N="tkt_3100010",u===p.r8.policyholder?N="tkt_3100014":u===p.r8.insured?N="tkt_3100015":u===p.r8.additional&&(N="tkt_3100016"),t.hasChanged&&(0,x.Z)(t.logData.saveErrorDevtraceLog&&t.logData.saveErrorDevtraceLog(N)),delete L.isError,(0,Z.Zx)(T,f,P,k),t.hasChanged=!1,t.setState((function(e){return{errorTips:(0,s.Z)((0,s.Z)({},e.errorTips),L)}})),n.abrupt("return");case 23:if(f.isShowEnglish=v,c&&c(),!i){n.next=35;break}return n.next=28,i(f);case 28:if(D=n.sent,!0!==D){n.next=33;break}return(0,Z.Zx)(T,f,P,k),e&&e({isSuccess:!1,passengerInfo:f,resourceId:l.resourceId}),n.abrupt("return");case 33:"clear"===D&&t.setState({passengerInfo:{}}),e&&e({isSuccess:!0,passengerInfo:(null===D||void 0===D||null===(j=D.passengerList)||void 0===j?void 0:j[0])||f,resourceId:l.resourceId,state:D});case 35:a&&a();case 36:case"end":return n.stop()}}),n)}))),200)},onClickOCR:function(){var e=this;v.ZP.component.ocr({bizType:"ACT",title:"\u8bc1\u4ef6\u8bc6\u522b"},(function(t){var n=e.state,r=n.passengerInfo,o=n.defaultCardtype,i=(0,d.I8)(r),a={CNNameError:""};t.name&&(i.CNName=t.name,a=e.validateInfo(1,t.name,"CNName"));var l=t.idCardNo,c=e.validateInfo(7,l,"CardNo");if(o&&o.cardType)if(i.CardSource&&i.CardSource[o.cardType]){i.CardSource[o.cardType]=(0,s.Z)((0,s.Z)({},i.CardSource[o.cardType]),{},{CardNo:l});var u=i.CommonPassengerCard.find((function(e){return e.CardType==o.cardType}));u.CardNo=l}else i.CardSource||(i.CardSource={}),i.CommonPassengerCard||(i.CommonPassengerCard=[]),i.CardSource[o.cardType]={CardType:o.cardType,CardNo:l,InfoID:i.PassengerID},i.CommonPassengerCard.push({CardType:o.cardType,CardNo:l,InfoID:i.PassengerID});e.props.isFromNewGuest&&e.onChangeSave(i),e.setState((function(e){return{passengerInfo:i,errorTips:(0,s.Z)((0,s.Z)((0,s.Z)({},e.errorTips),a),c)}}))}))},onInputChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state,r=n.defaultCardtype,o=n.passengerInfo;"CardNo"===e&&1===(null===r||void 0===r?void 0:r.cardType)&&18===t.length&&v.ZP.hideKeyboard(),"MobilePhone"!==e||"86"!=(null===o||void 0===o?void 0:o.CountryCode)&&null!==o&&void 0!==o&&o.CountryCode||11===t.length&&v.ZP.hideKeyboard()},changeCardNoAndTimeLimit:function(e,t,n,r){var o;"CardNo"===e?o={CardNo:t}:"CardTimelimit"===e?o={CardTimelimit:t}:"IssueDate"===e&&(o={IssueDate:t}),n.CardSource&&n.CardSource[r.cardType]?(n.CardSource[r.cardType]=(0,s.Z)((0,s.Z)({},n.CardSource[r.cardType]),o),n.CommonPassengerCard=n.CommonPassengerCard.map((function(e){return Number(e.CardType)==Number(r.cardType)&&(e=(0,s.Z)((0,s.Z)({},e),o)),e}))):(n.CardSource||(n.CardSource={}),n.CommonPassengerCard||(n.CommonPassengerCard=[]),n.CardSource[r.cardType]=(0,s.Z)({CardType:r.cardType,InfoID:n.PassengerID},o),n.CommonPassengerCard.push((0,s.Z)({CardType:r.cardType,InfoID:n.PassengerID},o)))},onChangeSave:function(e){var t=this,n=this.props.groupInfo,r=n.resourceIdList,o=n.boxId;e.resourceCardInfo=e.resourceCardInfo||{};var i=this.state.defaultCardtype;(0,Z.Zx)(r,e,i.cardType,o);var a=this.checkIsNeedUpdate(this.state.passengerInfo,e),s=this.props.editPassengerId;if(s&&String(null===e||void 0===e?void 0:e.PassengerID)!=String(s)&&(e.PassengerID=s),this.setState({passengerInfo:e}),a){var l=new Promise((function(e){t.onSave((function(t){e(t),b.k.done(l)}))}));b.k.add(l)}},checkIsNeedUpdate:function(e,t){var n=this.props.groupInfo,r=this.state.addPassenger;if((0,d.vZ)(e,t))return!1;var o={};return r&&r.map((function(e){var r=t?(0,y.Z)(e.itemId,t,n.CardInfo,n.resourceId,n.boxId):{};r.isError&&Object.assign(o,r)})),!o||!o.isError}},C=n(2446),k=n(72747),w=n(9353),T=n(17366),S={m_carditem_wrap:{paddingTop:0,paddingBottom:50,paddingLeft:20},m_carditem_content:(0,s.Z)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},(0,T.Cg)({direction:"bottom",width:T.WI,style:"solid",color:"#ededed"})),m_carditem_content_wrap:{display:"flex",flexDirection:"row",paddingTop:22,paddingBottom:22},m_carditem_content_text:{color:"#333",fontSize:16},m_carditem_content_text_active:{color:"#0066f6"},m_carditem_content_icon:{paddingRight:20}},P=(0,w.Z)(S),L=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(u.ZP),N=n(59201),j=n(71557),D=n(2269),V=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.groupInfo,n=e.defaultCardtype,r=e.onChangeCardType;return(0,D.jsx)(k.G7,{style:P.m_carditem_wrap,children:t.CardInfo?t.CardInfo.map((function(e){var t=String(null===n||void 0===n?void 0:n.itemId)===String(e.itemId);return(0,D.jsxs)(N.Z,{style:P.m_carditem_content,onClick:function(){r&&r(e)},children:[(0,D.jsx)(k.G7,{style:P.m_carditem_content_wrap,children:(0,D.jsx)(k.xv,{style:(0,T.wh)([P.m_carditem_content_text,t?P.m_carditem_content_text_active:{}]),children:e.name})}),t?(0,D.jsx)(k.G7,{style:P.m_carditem_content_icon,children:(0,D.jsx)(j.Z,{type:"radiocheck",size:38,color:"#0066f6"})}):null]})})):null})}}]),n}(L),E={m_traveler_name_explain:{paddingRight:16,paddingBottom:20,paddingLeft:16,overflow:"hidden"},explain_title:{marginBottom:4,marginTop:20},explain_title_text:{color:"#333",fontSize:14,fontWeight:"600",lineHeight:(0,T.Nv)(20)},explain_content_text:{color:"#333",fontSize:14,lineHeight:(0,T.Nv)(20)}},R=(0,w.Z)(E),A=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(u.ZP),F=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,D.jsxs)(k.G7,{style:R.m_traveler_name_explain,children:[(0,D.jsx)(k.G7,{style:R.explain_title,children:(0,D.jsx)(k.xv,{style:R.explain_title_text,children:"\u4e2d\u6587\u59d3\u540d\u586b\u5199"})}),(0,D.jsx)(k.G7,{children:(0,D.jsx)(k.xv,{style:R.explain_content_text,children:"\u59d3\u540d\u4e2d\u751f\u50fb\u5b57\u53ef\u7528\u62fc\u97f3\u4ee3\u66ff\uff0c\u5982\u201c\u738b\u9b33\u519b\u201d\u586b\u5199\u4e3a\u201c\u738byanjun\u201d\uff1b"})}),(0,D.jsx)(k.G7,{children:(0,D.jsx)(k.xv,{style:R.explain_content_text,children:"\u59d3\u540d\u4e2d\u6709\u201c\xb7\u201d\uff0c\u5982\u201d\u6c49\u7956\u7136\xb7\u4e70\u4e70\u63d0\u201c\uff0c\u8bf7\u5b8c\u6574\u8f93\u5165"})}),(0,D.jsx)(k.G7,{style:R.explain_title,children:(0,D.jsx)(k.xv,{style:R.explain_title_text,children:"\u82f1\u6587\u59d3\u540d\u586b\u5199"})}),(0,D.jsx)(k.G7,{children:(0,D.jsx)(k.xv,{style:R.explain_content_text,children:"\u4e2d\u56fd\u7c4d\u6e38\u5ba2\u82f1\u6587\u540d\u5373\u4e3a\u4e2d\u6587\u540d\u62fc\u97f3"})}),(0,D.jsx)(k.G7,{children:(0,D.jsx)(k.xv,{style:R.explain_content_text,children:"\u5916\u7c4d\u6e38\u5ba2\u5982\u6709Middle name\u8bf7\u586b\u5199\u5728Given name \u540e\uff0c\u5e76\u7528\u7a7a\u683c\u9694\u5f00\u3002"})})]})}}]),n}(A),M=n(35409),O=n(57113),B=n(99739),G=n(67903),H=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o,i;(0,r.Z)(this,n),i=t.call(this,e),(0,c.Z)((0,l.Z)(i),"state",void 0),(0,c.Z)((0,l.Z)(i),"spliceBri",void 0),(0,c.Z)((0,l.Z)(i),"ocrVisible",void 0),(0,c.Z)((0,l.Z)(i),"onChange",void 0),(0,c.Z)((0,l.Z)(i),"onSave",void 0),(0,c.Z)((0,l.Z)(i),"onClickOCR",void 0),(0,c.Z)((0,l.Z)(i),"onInputChange",void 0),(0,c.Z)((0,l.Z)(i),"logData",{}),(0,c.Z)((0,l.Z)(i),"onChangeSave",void 0),(0,c.Z)((0,l.Z)(i),"hasChanged",void 0);var a=i.handleData(i.props);i.state=(0,s.Z)({passengerInfo:e.passengerInfo,errorTips:{},MobileMaxLength:11,isShowEnglish:!(null===(o=e.passengerInfo)||void 0===o||!o.isShowEnglish),isAgree:!0},a),i.spliceBri=!1,Object.assign((0,l.Z)(i),I),i.onChangeSave=i.onChangeSave.bind((0,l.Z)(i)),i.onClickCardType=i.onClickCardType.bind((0,l.Z)(i)),i.onChange=i.onChange.bind((0,l.Z)(i)),i.onSave=i.onSave.bind((0,l.Z)(i)),i.onClickOCR=i.onClickOCR.bind((0,l.Z)(i)),i.onSwitchName=i.onSwitchName.bind((0,l.Z)(i)),i.onInputChange=i.onInputChange.bind((0,l.Z)(i)),i.onFocus=i.onFocus.bind((0,l.Z)(i)),i.onChnageAgree=i.onChnageAgree.bind((0,l.Z)(i)),i.hasChanged=!0;var u=[B.fO.tt,B.fO.swan,B.fO.h5],d=(0,B.ZP)().taroEnv;return i.ocrVisible=!u.includes(d),i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){if(this.handleSetData(this.props),this.addPopLayer(),!this.props.isFromNewGuest){var e=this.props,t=e.listType,n=e.passengerInfo,r="\u51fa\u884c\u4eba";t===p.r8.policyholder?r="\u6295\u4fdd\u4eba":t===p.r8.insured?r="\u88ab\u4fdd\u4eba":t===p.r8.additional&&(r="\u9644\u52a0\u552e\u5356\u51fa\u884c\u4eba"),this.logData=(0,G.r)(this.props.devTraceKeyData,null!==n&&void 0!==n&&n.PassengerID?"\u7f16\u8f91":"\u65b0\u589e",r)}}},{key:"componentWillReceiveProps",value:function(e){var t,n=this;if(this.props.isFromNewGuest){var r;if(e.passengerError&&(null===(r=e.passengerError)||void 0===r?void 0:r.length)>0&&e.passengerError!==this.props.passengerError){var o=e.passengerError.find((function(e){var t;if(e.passengerId==(null===(t=n.state.passengerInfo)||void 0===t?void 0:t.PassengerID))return!0}));o&&this.setState((function(e){return{errorTips:(0,s.Z)((0,s.Z)({},e.errorTips),o)}}))}return e.groupInfo&&!(0,d.vZ)(e.groupInfo.addPassenger,this.props.groupInfo.addPassenger)&&this.handleSetData(e),void(e.forceUpdate&&this.props.forceUpdate!==e.forceUpdate&&(this.handleSetData(e),this.setState({passengerInfo:e.passengerInfo})))}e.groupInfo&&((0,d.vZ)(e.groupInfo.addPassenger,this.props.groupInfo.addPassenger)||this.handleSetData(e)),!e.passengerInfo||null!==(t=this.state.passengerInfo)&&void 0!==t&&t.isEdit||(0,d.vZ)(e.passengerInfo,this.props.passengerInfo)||this.setState({passengerInfo:e.passengerInfo})}},{key:"handleSetData",value:function(e){var t=this.handleData(e);this.setState((0,s.Z)({},t))}},{key:"handleData",value:function(e){var t=e.listType,n=e.passengerInfo,r=e.groupInfo,o=r.addPassenger,i=void 0===o?[]:o,a=r.CardInfo,s=void 0===a?[]:a,l=r.resourceId,c=r.insuranceId,u=r.boxId,h=r.overseasPhoneNumber,f=this.state||{},g=f.defaultCardtype,m=void 0===g?{}:g,v=i.findIndex((function(e){return 5===e.itemId})),_=(0,d.I8)(i),y=l||c,x={},b={},I=!1,C=(0,Z.jX)(u,y);-1!==v&&(x=_.splice(v,1)[0],s&&s.length>1&&(I=!0),b=s.length?s.find((function(e){var t;return n.resourceCardInfo&&e.cardType===(null===(t=n.resourceCardInfo[C])||void 0===t?void 0:t.CardType)||e.cardType===m.cardType}))||s[0]:{});var k=_.findIndex((function(e){return 3===e.itemId})),w=!1;-1!==k&&(n.isShowEnglish?_.splice(k,1,{itemId:2,model:1,name:"\u82f1\u6587\u59d3\u540d",cardType:0}):_.splice(k,1,{itemId:1,model:1,name:"\u4e2d\u6587\u59d3\u540d",cardType:0}),w=!0);var T=_.findIndex((function(e){return 8===e.itemId})),S="text";return T>-1&&t===p.r8.traveler&&(this.spliceBri=!0),13===b.itemId?(S="idcard",T>-1&&_.splice(T,1)):-1==T&&p.yZ.includes(t)&&_.push({cardType:0,itemId:8,model:1,name:"\u51fa\u751f\u65e5\u671f"}),{cardTemp:x,addPassenger:_,defaultCardtype:b,showNameSwitch:w,cardInputType:S,needShowCardPop:I,overseasPhoneNumber:h}}},{key:"addPopLayer",value:function(){O.Z.add("cardTypePopLayer",M.Z,{props:{isOpened:!1}}),O.Z.add("nameDescPopLayer",M.Z,{props:{isOpened:!1}})}},{key:"onClickCardType",value:function(){var e=this.props.groupInfo,t=this.state,n=t.defaultCardtype,r=t.needShowCardPop;r&&C.ZP.show({props:{name:"cardTypePopLayer",title:"\u8bc1\u4ef6\u7c7b\u578b",popHeight:"80%",scrollHeight:"100%",zIndex:200},child:V,childProps:{groupInfo:e,defaultCardtype:n,onChangeCardType:this.onChangeCardType.bind(this)}})}},{key:"onShowTip",value:function(){C.ZP.show({props:{name:"nameDescPopLayer",title:"\u59d3\u540d\u586b\u5199\u8bf4\u660e",popHeight:"40%",scrollHeight:"100%",zIndex:101},child:F})}},{key:"onChangeCardType",value:function(e){var t="idcard";13!==e.itemId&&(t="text");var n=this.props.listType,r=this.state,o=r.addPassenger,i=r.passengerInfo,a=(0,d.I8)(o);if(p.yZ.includes(n)||this.spliceBri)if(1===e.cardType){var l=a.findIndex((function(e){return 8===e.itemId}));l>-1&&a.splice(l,1)}else{var c=a.findIndex((function(e){return 8===e.itemId}));-1==c&&a.push({cardType:0,itemId:8,model:1,name:"\u51fa\u751f\u65e5\u671f"})}this.setState((function(n){return{defaultCardtype:e,cardInputType:t,errorTips:(0,s.Z)((0,s.Z)({},n.errorTips),{},{cardError:""}),addPassenger:a,passengerInfo:(0,d.I8)(i)}})),C.ZP.hide("cardTypePopLayer")}},{key:"onSwitchName",value:function(e){var t=this.state,n=t.addPassenger,r=t.isShowEnglish,o=t.passengerInfo,i=this.props,a=i.onUpdatePassengerFromNewGuest,l=(i.isFromNewGuest,(0,d.I8)(n)),c={};if("cn"==e){c={EnglishLastNameError:"",EnglishFirstNameError:""};var u=l.findIndex((function(e){return 2===e.itemId}));-1!==u&&(r=!1,l.splice(u,1,{itemId:1,model:1,name:"\u4e2d\u6587\u59d3\u540d",cardType:0}))}else{c={CNNameError:""};var p=l.findIndex((function(e){return 1===e.itemId}));-1!==p&&(r=!0,l.splice(p,1,{itemId:2,model:1,name:"\u82f1\u6587\u59d3\u540d",cardType:0}))}this.props.isFromNewGuest&&null!==o&&void 0!==o&&o.PassengerID&&a&&a({PassengerID:o.PassengerID,isShowEnglish:r}),this.setState((function(e){return{isShowEnglish:r,addPassenger:l,errorTips:(0,s.Z)((0,s.Z)({},e.errorTips),c)}}))}},{key:"onFocus",value:function(){var e=this,t=this.state.passengerInfo&&this.state.passengerInfo.CNName;m(this,t).then((function(t){if(1==t.length){var n=(0,d.I8)(e.state.passengerInfo),r=t[0].split(" "),o=r.splice(0,1)[0];n.ENLastName||(n.ENLastName=o),n.ENFirstName||(n.ENFirstName=r.join("")),e.props.isFromNewGuest?e.onChangeSave(n):e.setState({passengerInfo:n})}}))}},{key:"onChnageAgree",value:function(){this.setState({isAgree:!this.state.isAgree})}}]),n}(u.ZP),z=n(4962),U=n(26481),q=n(88592),W=n(50738),K=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"renderOCR",value:function(){var e=this.props,t=e.isFromNewGuest,n=e.showWarnBackground;return(0,D.jsxs)(N.Z,{style:(0,T.wh)([U.Z.m_edit_ocr,t&&n?U.Z.m_edit_ocr_error:{}]),onClick:this.onClickOCR,log:(0,q.sO)("tkt_ocr_trace",{keyid:"218423"}),testID:(0,W.ap)((0,q.CA)("tkt_ocr_exposure","218424")),children:[(0,D.jsx)(k.G7,{children:(0,D.jsx)(j.Z,{type:"camera2",size:40,color:"#111"})}),(0,D.jsx)(k.xv,{style:U.Z.m_edit_ocr_inner_text,children:"\u62cd\u7167\u8bc6\u522b"}),(0,D.jsx)(k.Ee,{style:U.Z.m_ocr_shadow,url:"https://dimg04.c-ctrip.com/images/0AS18120009v3m5dzFF61.png_.webp"})]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.cardTemp,r=t.defaultCardtype,o=t.addPassenger,i=t.passengerInfo,a=t.showNameSwitch,s=t.errorTips,l=t.cardInputType,c=t.needShowCardPop,u=t.MobileMaxLength,d=t.isShowEnglish,p=t.overseasPhoneNumber,h=this.props,f=h.isFromNewGuest,g=h.showWarnBackground,m=i&&i.CardSource&&i.CardSource[String(null===r||void 0===r?void 0:r.cardType)]||{},v=(null===o||void 0===o?void 0:o.filter((function(e){return[1,2,7,10,500].indexOf(e.itemId)>-1})))||[],_=1===(null===r||void 0===r?void 0:r.cardType)&&!a,y=_?{marginRight:(0,T.Vh)(52)}:{},x=_?U.Z.m_input_error_tips:{},b={m_name_switch_cn_activity_none:g?U.Z.m_name_switch_cn_activity_none_error:U.Z.m_name_switch_cn_activity_none},Z=null===o||void 0===o?void 0:o.find((function(e){return 2===e.itemId}));return(0,D.jsxs)(D.Fragment,{children:[n&&n.name?(0,D.jsx)(N.Z,{style:U.Z.m_edit_card,onClick:this.onClickCardType,children:(0,D.jsxs)(k.G7,{style:U.Z.m_edit_card_content,children:[(0,D.jsx)(k.G7,{style:f?U.Z.m_edit_card_label2:U.Z.m_edit_card_label,children:(0,D.jsx)(k.xv,{style:U.Z.m_edit_card_label_text,children:n.name})}),(0,D.jsxs)(k.G7,{style:U.Z.m_edit_card_wrap,children:[(0,D.jsx)(k.G7,{style:U.Z.m_edit_card_value,children:(0,D.jsx)(k.xv,{style:U.Z.m_edit_card_value_text,children:null===r||void 0===r?void 0:r.name})}),c?(0,D.jsx)(k.G7,{style:U.Z.m_edit_card_icon,children:(0,D.jsx)(j.Z,{type:"forward",size:30,color:"#111"})}):null]})]})}):null,(0,D.jsxs)(k.G7,{style:U.Z.m_edit_view_one,children:[v&&v.length&&i?v.map((function(t){return 1===t.itemId?(0,D.jsx)(z.Z,{lable:t.name,placeholder:"\u4e0e\u8bc1\u4ef6\u59d3\u540d\u4e00\u81f4",onBlur:function(n){e.onChange("CNName",n,t.itemId)},cuurentNameType:d?"en":"cn",showTip:!0,type:"text",value:i.CNName,showNameSwitch:a,onSwitchName:e.onSwitchName,switchTraceLog:e.logData.switchNameDevtraceLog,onShowTip:function(){e.onShowTip()},errorTips:s.CNNameError,inputStyle:y,errorStyle:x,fstyle:b,isSmallLabel:f}):2===t.itemId?(0,D.jsxs)(k.G7,{style:U.Z.m_pin_yin_wrapper,children:[(0,D.jsx)(z.Z,{lable:"\u59d3(\u62fc\u97f3)",placeholder:"\u5982\u5f20\u660e\uff0c\u586b\uff1aZHANG",onBlur:function(n){e.onChange("ENLastName",n,+(t.itemId+"00"))},onFocus:e.onFocus,showTip:!0,type:"text",cuurentNameType:d?"en":"cn",value:i.ENLastName,showNameSwitch:a,onSwitchName:e.onSwitchName,switchTraceLog:e.logData.switchNameDevtraceLog,onShowTip:function(){e.onShowTip()},errorTips:s.EnglishLastNameError,subLable:"Surname",inputStyle:y,errorStyle:x,fstyle:b,isSmallLabel:f}),(0,D.jsx)(z.Z,{lable:"\u540d(\u62fc\u97f3)",placeholder:"\u5982\u5f20\u660e\uff0c\u586b\uff1aMING",onBlur:function(n){e.onChange("ENFirstName",n,+(t.itemId+"01"))},onFocus:e.onFocus,showTip:!0,type:"text",value:i.ENFirstName,onShowTip:function(){e.onShowTip()},errorTips:s.EnglishFirstNameError,subLable:"Given name",inputStyle:y,errorStyle:x,isSmallLabel:f}),_&&e.ocrVisible&&Z?e.renderOCR():null]}):7===t.itemId?(0,D.jsx)(z.Z,{lable:t.name,placeholder:"".concat((null===r||void 0===r?void 0:r.name)||"\u8bc1\u4ef6","\u53f7"),type:l,value:m.CardNo,onBlur:function(n){e.onChange("CardNo",n,t.itemId)},showOCR:1===(null===r||void 0===r?void 0:r.cardType)&&a,onClickOCR:e.onClickOCR,errorTips:s.cardError,inputStyle:y,errorStyle:x,onChange:function(t){e.onInputChange("CardNo",t)},isSmallLabel:f}):10===t.itemId||500===t.itemId?(0,D.jsx)(z.Z,{lable:t.name,value:500===t.itemId?m.IssueDate&&m.IssueDate.split(" ")[0]:m.CardTimelimit&&m.CardTimelimit.split(" ")[0],onChange:function(n){e.onChange(500===t.itemId?"IssueDate":"CardTimelimit",n,t.itemId)},errorTips:500===t.itemId?s.IssueDateError:s.CardTimelimitError,isDate:!0,isCTlimit:10===t.itemId,isSelect:!0,selectorMode:"date",isSmallLabel:f}):void 0})):null,_&&this.ocrVisible&&!Z?this.renderOCR():null]}),o&&o.length&&i?o.map((function(t){return 4===t.itemId?(0,D.jsx)(k.G7,{children:(0,D.jsx)(z.Z,{lable:t.name,onChange:function(n){e.onChange("Nationality",n,t.itemId)},value:i.Nationality,errorTips:s.NationalityError,isNationality:!0,isSelect:!0,isSmallLabel:f})}):6===t.itemId?(0,D.jsx)(k.G7,{children:(0,D.jsx)(z.Z,{lable:t.name,onChange:function(n){e.onChange("Gender",n,t.itemId)},value:i.Gender,errorTips:s.genderError,isGender:!0,isSmallLabel:f})}):8===t.itemId?(0,D.jsx)(k.G7,{children:(0,D.jsx)(z.Z,{lable:t.name,onChange:function(n){e.onChange("Birthday",n,t.itemId)},value:i.Birthday,isDate:!0,isSelect:!0,errorTips:s.birthError,selectorMode:"date",isBirthday:!0,isSmallLabel:f})}):11===t.itemId?(0,D.jsx)(k.G7,{children:(0,D.jsx)(z.Z,{isMobile:!0,lable:t.name,placeholder:"\u7528\u4e8e\u63a5\u6536\u884c\u7a0b\u4fe1\u606f",type:"number",value:i.MobilePhone,onBlur:function(n){e.onChange("MobilePhone",n,t.itemId)},onChange:function(t){e.onInputChange("MobilePhone",t)},errorTips:s.phoneError,showPhoneCode:p,phonecode:i.CountryCode||"86",onChangePhonecode:function(n){e.onChange("CountryCode",n,t.itemId)},maxLength:u,phonecodeTraceLog:e.logData.phonecodeTraceLog,isSmallLabel:f})}):void 0})):null]})}}]),n}(H)},77230:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(81876)),c=n(45023),u=n(56034),d=n(83630),p=n(67903),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,c.Z)((0,l.Z)(r),"state",void 0),(0,c.Z)((0,l.Z)(r),"logData",{}),(0,c.Z)((0,l.Z)(r),"editContentRef",void 0),r.state={isAgree:!0},r.onSave=r.onSave.bind((0,l.Z)(r)),r.onChnageAgree=r.onChnageAgree.bind((0,l.Z)(r)),r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.listType,n=e.passengerInfo,r="\u51fa\u884c\u4eba";t===d.r8.policyholder?r="\u6295\u4fdd\u4eba":t===d.r8.insured?r="\u88ab\u4fdd\u4eba":t===d.r8.additional&&(r="\u9644\u52a0\u552e\u5356\u51fa\u884c\u4eba"),this.logData=(0,p.r)(this.props.devTraceKeyData,null!==n&&void 0!==n&&n.PassengerID?"\u7f16\u8f91":"\u65b0\u589e",r)}},{key:"onChnageAgree",value:function(){this.setState({isAgree:!this.state.isAgree})}},{key:"onSave",value:function(){this.editContentRef.onSave()}}]),n}(u.ZP),f=n(72747),g=n(71557),m=n(26481),v=n(59201),_=n(17366),y=n(56569),x=n(99840),b=n(86434),Z=n(2269),I=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onCloseEditPop,o=t.configTitle,i=t.passengerInfo,a=null!==i&&void 0!==i&&i.PassengerID?"\u7f16\u8f91":"\u65b0\u589e";return(0,Z.jsx)(f.jy,{children:(0,Z.jsxs)(f.G7,{style:(0,_.wh)([m.Z.m_edit_wrap,m.Z.m_edit]),className:"m_passenger_input_info_container",children:[(0,Z.jsxs)(f.G7,{style:m.Z.m_edit_pop_header,children:[(0,Z.jsx)(v.Z,{style:m.Z.m_header_back,onClick:n,children:(0,Z.jsx)(g.Z,{type:"back",size:28,color:"#111"})}),(0,Z.jsx)(f.G7,{children:(0,Z.jsxs)(f.xv,{style:m.Z.m_header_content_text,children:[a,o]})}),(0,Z.jsx)(v.Z,{style:m.Z.m_header_button,onClick:this.onSave,devTraceData:this.logData.saveDevtraceLog,children:(0,Z.jsx)(f.xv,{style:m.Z.m_header_button_text,children:"\u4fdd\u5b58"})})]}),(0,Z.jsxs)(f.pf,{scrollY:!0,style:(0,_.wh)([m.Z.m_edit_edit_wrap,(0,m.Q)(.8*y.Db.get("window").height-((0,y.cY)()?79:45))]),keyboardShouldPersistTaps:"handled",children:[(0,Z.jsx)(b.Z,(0,r.Z)({ref:function(t){return e.editContentRef=t}},this.props)),(0,Z.jsx)(f.G7,{style:m.Z.m_clause_wrapper,children:(0,Z.jsx)(x.Z,{hideAgree:!0,onChnageAgree:this.onChnageAgree,boldText:"\u8bf7\u5728\u63d0\u4ea4\u8ba2\u5355\u524d\u4ed4\u7ec6\u9605\u8bfb\uff1a"})})]})]})})}}]),n}(h)},67903:function(e,t,n){n.d(t,{r:function(){return o}});var r=function(e,t,n){if(!e)return{};var r="".concat(t).concat(n,"\u4fe1\u606f");return{saveDevtraceLog:{action:"usr_click",attrs:e,scene:r,value:"\u4fdd\u5b58",module:"\u51fa\u884c\u4eba\u6a21\u5757"},switchNameDevtraceLog:function(t){return{action:"usr_change",attrs:e,scene:r,value:"\u5207\u6362\u4e2d\u82f1\u6587\u59d3\u540d\u8f93\u5165\u4e3a".concat(t),module:"\u51fa\u884c\u4eba\u6a21\u5757"}},saveErrorDevtraceLog:function(t){return{action:"sys_show",attrs:e,scene:r,value:"".concat(n,"\u4fe1\u606f\u4e0d\u5168\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684").concat(n,"\u4fe1\u606f"),module:"\u53ef\u8ba2\u963b\u65ad",key:t,jsonData:{value:"".concat(n,"\u4fe1\u606f\u4e0d\u5168\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684").concat(n,"\u4fe1\u606f")}}},phonecodeTraceLog:{action:"usr_click",attrs:e,scene:r,value:"\u56fd\u5bb6\u7801\u5207\u6362\u6309\u94ae",module:"\u51fa\u884c\u4eba\u6a21\u5757"},changePhonecodeTraceLog:function(t,n){return{action:"usr_change",attrs:e,scene:"\u5207\u6362\u56fd\u5bb6\u7801",value:n,before:t,module:"\u51fa\u884c\u4eba\u6a21\u5757"}}}},o=function(e,t,n){return r(e,t,n)}},3386:function(e,t,n){var r=n(2446);function o(e){var t=e.groupInfo,o=e.passengerInfo,a=e.direction,s=void 0===a?"bottom":a,l=e.listType,c=e.onSave,u=e.onCloseEditPop,d=void 0===u?i:u,p=e.name,h=void 0===p?"passengerEditPoplayer":p,f=e.configTitle,g=void 0===f?"":f,m=e.clearInsuranceError,v=void 0===m?null:m,_=e.devTraceKeyData,y=n(77230).Z;r.ZP.show({props:{name:h,popHeight:"80%",scrollHeight:"100%",isShowHeader:!1,isScrollView:!1,direction:s},child:y,childProps:{configTitle:g||t.name,passengerInfo:o,groupInfo:t,onCloseEditPop:function(){return d(h)},onSave:c,listType:l,clearInsuranceError:v,devTraceKeyData:_}})}function i(e){r.ZP.hide(e)}t["Z"]=o},26481:function(e,t,n){n.d(t,{Q:function(){return s}});var r=n(298),o=n(9353),i=n(17366),a={m_edit_wrap:{height:"100%",lineHeight:(0,i.Nv)((0,i.Vh)(12))},m_edit:{paddingBottom:(0,i.Vh)(0)},m_edit_edit_wrap:(0,r.Z)({paddingRight:(0,i.Vh)(16),paddingLeft:(0,i.Vh)(16)},(0,i.ix)("border-box")),m_edit_card:(0,r.Z)({},(0,i.Cg)({direction:"bottom",width:i.WI,style:"solid",color:"#ebeff5"})),m_edit_card_content:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:(0,i.Vh)(51),alignItems:"center"},m_edit_card_label:{width:(0,i.Vh)(80)},m_edit_card_label2:{width:(0,i.Vh)(80),marginRight:0},m_edit_card_label_text:{color:"#111",fontSize:(0,i.Vh)(15),letterSpacing:(0,i.Vh)(-.28)},m_edit_card_wrap:{display:"flex",flexDirection:"row",justifyContent:"space-between",flex:1},m_edit_card_value_text:{color:"#111",fontSize:(0,i.Vh)(15)},m_edit_pop_header:(0,r.Z)((0,r.Z)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:10,backgroundColor:"#fff",top:(0,i.Vh)(0),height:45},(0,i.Cg)({direction:"bottom",width:i.WI,style:"solid",color:"#ebeff5"})),{},{borderRadius:(0,i.Vh)(8)}),m_header_content_text:{color:"#111",fontSize:(0,i.Vh)(17),fontWeight:(0,i.Ue)("500")},m_header_button:{paddingRight:(0,i.Vh)(16)},m_header_button_text:{color:"#0066f6",fontSize:(0,i.Vh)(17)},m_header_back:{display:"flex",flexDirection:"row",alignItems:"center",height:(0,i.Vh)(30),width:(0,i.Vh)(30),paddingLeft:(0,i.Vh)(16)},m_input_com_context:{flex:1,marginRight:(0,i.Vh)(0)},m_input_com_context_top:{flex:1,alignItems:"center"},m_edit_ocr:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({position:"absolute",top:(0,i.Vh)(0),bottom:(0,i.Vh)(0),right:(0,i.Vh)(-16)},i.i3),i._7),{},{width:(0,i.Vh)(62),backgroundColor:"#fff"},(0,i.WB)((0,i.Vh)(15))),(0,i.ix)("border-box")),m_edit_ocr_error:{backgroundColor:"#ffeceb"},m_edit_ocr_inner:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:(0,i.Vh)(62),height:"100%"},m_edit_ocr_inner_text:{marginTop:(0,i.Vh)(4),color:"#111",fontSize:(0,i.Vh)(15),lineHeight:(0,i.Nv)(18),letterSpacing:(0,i.Vh)(-.24)},m_edit_view_one:{position:"relative"},m_clause_wrapper:{paddingBottom:(0,i.Vh)(10)},m_ocr_shadow:{position:"absolute",left:(0,i.Vh)(-15),height:"100%",width:(0,i.Vh)(15)},m_pin_yin_wrapper:{position:"relative"},m_input_error_tips:(0,r.Z)({paddingRight:(0,i.Vh)(52)},(0,i.ix)("border-box")),m_name_switch_cn_activity_none:{backgroundColor:"#fff"},m_name_switch_cn_activity_none_error:{backgroundColor:"#ffeceb"}},s=function(e){return(0,o.Z)({height:e})};t["Z"]=(0,o.Z)(a)},95782:function(e,t,n){n.d(t,{Z:function(){return J}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(79301)),l=n(22276),c=n(95308),u=n(298),d=n(81876),p=n(45023),h=n(56034),f=n(39935),g=function(e){return e?{listNewDevtraceLog:{action:"usr_click",attrs:e,scene:"\u51fa\u884c\u4eba\u5217\u8868\u70b9\u51fb\u65b0\u589e\u6e38\u5ba2",value:"\u65b0\u589e",module:"\u51fa\u884c\u4eba\u6a21\u5757"},selectPassengerDevtraceLog:function(t,n,r){return{action:"usr_change",attrs:e,scene:"\u51fa\u884c\u4eba\u5217\u8868".concat(r?"":"\u53d6\u6d88","\u9009\u62e9\u51fa\u884c\u4eba"),value:"\u59d3\u540d: ".concat(t,", infoid: ").concat(n),module:"\u51fa\u884c\u4eba\u6a21\u5757"}},editPassengerDevtraceLog:function(t,n){return{action:"usr_click",attrs:e,scene:"\u51fa\u884c\u4eba\u5217\u8868\u7f16\u8f91\u51fa\u884c\u4eba",value:"\u59d3\u540d: ".concat(t,", infoid: ").concat(n),module:"\u51fa\u884c\u4eba\u6a21\u5757"}},savePassengerDevtraceLog:{action:"usr_click",attrs:e,scene:"\u51fa\u884c\u4eba\u5217\u8868\u70b9\u51fb\u4fdd\u5b58",value:"\u4fdd\u5b58",module:"\u51fa\u884c\u4eba\u6a21\u5757"}}:{}},m=function(e){return g(e)},v=n(2723),_=n(75833),y=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,p.Z)((0,d.Z)(o),"state",void 0),(0,p.Z)((0,d.Z)(o),"logData",{}),o.state={dChoice:[],needCardInfo:!1,hasChange:!1},o.initData(e,!0),o.onChange=o.onChange.bind((0,d.Z)(o)),o.onSave=o.onSave.bind((0,d.Z)(o)),o.logData=m(o.props.devTraceKeyData),o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){this.initData(e,!0)}},{key:"initData",value:function(e,t){var n=e.groupInfo,r=this.state,o=r.hasChange,i=(r.dChoice,{});o||(i.dChoice=n.dChoice);var a=!1,s=n.addPassenger;s&&s.find((function(e){return 5===e.itemId}))&&(a=!0),i.needCardInfo=a,t?this.state=(0,u.Z)((0,u.Z)({},this.state),i):this.setState(i)}},{key:"componentWillUnmount",value:function(){this.setState({hasChange:!1})}},{key:"onChange",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,o,i,a,c,d,p,h,g,m,y,x,b,Z,I,C,k,w,T,S,P;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.props,r=n.onSelect,o=n.groupInfo,i=n.plist,a=n.onClosed,c=n.handleToEdit,d=n.insuranceType,p=n.changePassenger,h=o.choice,g=o.name,m=o.addPassenger,y=o.resourceId,x=o.boxId,b=o.insuranceId,Z=y||b,I=(0,_.jX)(x,Z),C=this.state.dChoice,1!==h){e.next=9;break}r&&r([t],(function(){a&&a()})),e.next=24;break;case 9:if(this.setState({hasChange:!0}),k=C.findIndex((function(e){return e===t})),!(k>-1)){e.next=17;break}w=(0,l.Z)(C),w.splice(k,1),this.setState({dChoice:w}),e.next=24;break;case 17:if(T=(0,l.Z)(C),S=!0,!p){e.next=23;break}return e.next=22,p(o.resourceId,[t],!1,null,{boxId:o.boxId,isFromList:!0});case 22:S=e.sent;case 23:S&&(T.push(t),P=!1,m.map((function(e){7==e.itemId&&(P=!0)})),T.length<=h?(0,f.SF)(T,i,I).isSame&&P?(0,v.Z)({name:d?"insuranceRepeatPoplayer":"repeateListPoplayer",currentGroup:(0,u.Z)((0,u.Z)({},o),{},{resourceId:Z}),repeateList:(0,f.SF)(T,i,I).repeateList,handleToEdit:function(e,t,n){c(e,t,n)}}):this.setState({dChoice:T}):this.toast.show("\u60a8\u53ea\u9700\u9009\u62e9".concat(h,"\u4f4d").concat(g)));case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onSave",value:function(){var e=this.props,t=e.onSelect,n=e.groupInfo,r=e.onClosed,o=n.choice,i=n.name,a=this.state.dChoice;a.length<o?this.toast.show("\u60a8\u8fd8\u9700\u9009\u62e9".concat(o-a.length,"\u4f4d").concat(i)):t&&t(a,(function(){r&&r()}))}}]),n}(h.ZP),x=n(72747),b=n(83630),Z=n(71557),I=n(59201),C=n(83692),k=n(32138),w=n(49502),T=n(96082),S=n(121),P=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,p.Z)((0,d.Z)(o),"state",void 0),o.onChange=o.onChange.bind((0,d.Z)(o)),o.state={passengerCheckErrItem:o.getPassengerCheckErr(e)},o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.getPassengerCheckErr(e);(0,S.vZ)(t,this.state.passengerCheckErrItem)||this.setState({passengerCheckErrItem:t})}},{key:"getPassengerCheckErr",value:function(e){var t=e.passengerCheckErr,n=void 0===t?[]:t,r=e.itemInfo,o=void 0===r?{}:r,i=e.groupInfo,a=void 0===i?{}:i;return n.find((function(e){return(null===e||void 0===e?void 0:e.errMsg)&&e.passengerId==o.PassengerID&&e.resourceId==a.resourceId}))}},{key:"isNotFullInfo",value:function(e){var t=this.props.groupInfo,n=t.resourceId||t.insuranceId;return(0,w.Mh)(e,t,n)}},{key:"onChange",value:function(e){var t=this.props,n=t.listType,r=t.insuranceType,o=t.itemInfo,i=t.notFull,a=t.isDisabled;if(n==b.r8.traveler&&(i||this.isNotFullInfo(o))||b.yZ.includes(n)&&this.isNotFullInfo(o))this.props.handleToEdit&&this.props.handleToEdit();else if(r==k.u.Insured&&a)this.toast.show("\u88ab\u4fdd\u4eba\u9700\u4e0e\u51fa\u884c\u4eba\u4e00\u81f4");else if(r!=k.u.policyHolder||(0,C.e8)(o))if(n==b.r8.traveler&&this.state.passengerCheckErrItem){var s=this.state.passengerCheckErrItem;(0,T.P)(s,{leftCb:this.props.handleToEdit})}else this.props.onSelect&&this.props.onSelect(e);else this.toast.show("\u6295\u4fdd\u4eba\u987b\u6ee118\u5468\u5c81")}}]),n}(h.ZP),L=function(e){return e["mobile"]="mobile",e["landline"]="landline",e["email"]="email",e["idNumber"]="idNumber",e["idCard"]="idCard",e["bankCard"]="bankCard",e["address"]="adress",e["name"]="name",e}(L||{});function N(e,t){return t?e===L.mobile||e===L.landline?j(t):e===L.email?D(t):e===L.idNumber?V(t):e===L.idCard?E(t):e===L.bankCard?R(t):e===L.address?A(t):F(t):t}function j(e){if(!e)return e;var t=e.length;return t?t<5?e:t<11?"".concat(e.slice(0,t-5)).concat("*".repeat(3)).concat(e.slice(-2)):"".concat(e.slice(0,t-8)).concat("*".repeat(4)).concat(e.slice(-4)):e}function D(e){if(!e)return e;var t=e.replace(/@(.+)/,""),n=e.replace(/(.+?)@/,"");return t=F(t),"".concat(t,"@").concat(n)}function V(e){return e&&e.length?e.length<7?e:"".concat(e.slice(0,4)).concat("*".repeat(e.length-7)).concat(e.slice(-3)):e}function E(e){if(!e||!e.length)return e;if(e.length<=3)return F(e);var t=Math.floor(e.length/3);return"".concat(e.slice(0,t)).concat("*".repeat(e.length-t-2)).concat(e.slice(-2))}function R(e){return e&&e.length?e.length<10?void 0:"".concat(e.slice(0,6)).concat("*".repeat(e.length-10)).concat(e.slice(-4)):e}function A(e){if(!e||!e.length)return e;var t="",n="",r=e;if(["\u533a","\u5e02","\u7701"].forEach((function(o){if(!n){var i=e.indexOf(o);i>=0&&(n=e[i],t=e.slice(0,i),r=e.slice(i+1))}})),console.log("pos",t,n,r),r.length>=e.length/2)return"".concat(t).concat(n).concat(F(r));var o=Math.floor(e.length/2);return"".concat(e.slice(0,o)).concat(F(e.slice(o)))}function F(e){if(!e||!e.length)return e;var t=e.length;if(t<=3)return"".concat(e.slice(0,1)).concat("*".repeat(t-1));var n=Math.floor(t/3);return"".concat(e.slice(0,n)).concat("*".repeat(n+1)).concat(e.slice(2*n+1-t))}var M=n(9353),O=n(17366),B={m_traveler_item:(0,u.Z)({marginLeft:17,marginRight:17,display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"},(0,O.Cg)({direction:"bottom",width:O.WI,style:"solid",color:"#eee"})),item_icon_wrap:{display:"flex",flexDirection:"row",marginTop:21,marginRight:10,alignItems:"center",justifyContent:"center"},item_content:{display:"flex",flexDirection:"row",flex:1,width:0,paddingTop:20,paddingBottom:20},item_content_name:{width:0,flex:1,overflow:"hidden",whiteSpace:"nowrap"},item_content_wrap:{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",alignItems:"center",width:0},item_content_title:{color:"#333",fontSize:16,width:"100%"},item_content_info:{display:"flex",flexDirection:"row",marginTop:10},item_content_info_text:{marginRight:14,color:"#999",fontSize:14,lineHeight:(0,O.Nv)(16)},item_icon_single:{width:17,height:17,borderWidth:1,borderStyle:"solid",borderColor:"#0066f6",opacity:.8,borderRadius:17,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},item_icon_single_circle:{width:7,height:7,borderRadius:7,backgroundColor:"#0066f6",opacity:.2},item_icon_single_active:{borderWidth:1,borderStyle:"solid",borderColor:"#0066f6",opacity:1},item_icon_single_circle_active:{backgroundColor:"#0066f6",opacity:1},item_icon_single_disabled:{borderWidth:1,borderStyle:"solid",borderColor:"#aaaaaa",opacity:.8},item_icon_single_circle_disabled:{backgroundColor:"#aaaaaa",opacity:.2},item_content_error:{marginTop:10},item_content_error_text:{color:"#ff0000",fontSize:14,lineHeight:(0,O.Nv)(20)},item_edit:{width:42,display:"flex",flexDirection:"row-reverse",height:55,alignItems:"center"}},G=(0,M.Z)(B),H=n(2269),z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.chiose,r=t.itemInfo,o=t.defaultCardInfo,i=void 0===o?{}:o,a=t.isActive,s=t.handleToEdit,l=t.needCardInfo,c=t.currentCard,u=void 0===c?{}:c,d=t.notFull,p=t.isDisabled,h=t.index,f=t.clickLog,g=t.selectDevtraceLog,m=t.editDevtraceLog,v=this.isNotFullInfo(r),_=this.state.passengerCheckErrItem;return(0,H.jsxs)(I.Z,{style:G.m_traveler_item,onClick:function(){e.onChange(r.PassengerID)},testID:"traveler_item_select_".concat(h),log:f,devTraceData:g&&g(r.CNName||"".concat(r.ENLastName,"/").concat(r.ENFirstName),r.InfoID,1==n||!a),children:[(0,H.jsx)(x.G7,{style:G.item_icon_wrap,children:1==n?(0,H.jsx)(x.G7,{style:(0,O.wh)([G.item_icon_single,a?G.item_icon_single_active:{},d||v||_?G.item_icon_single_disabled:{}]),children:(0,H.jsx)(x.G7,{style:(0,O.wh)([G.item_icon_single_circle,a?G.item_icon_single_circle_active:{},d||v||_?G.item_icon_single_circle_disabled:{}])})}):a?(0,H.jsx)(Z.Z,{type:"selectedShape",size:34,color:p?"#cccccc":"#0066f6"}):(0,H.jsx)(x.G7,{children:(0,H.jsx)(Z.Z,{type:"unselected",size:34,color:d||v||_?"#f7f7f7":"#0066f6"})})}),(0,H.jsxs)(x.G7,{style:G.item_content_wrap,children:[(0,H.jsx)(x.G7,{style:G.item_content,children:(0,H.jsxs)(x.G7,{style:G.item_content_name,children:[(0,H.jsx)(x.xv,{style:G.item_content_title,numberOfLines:1,children:"".concat(r.CNName?r.CNName:"").concat(r.CNName&&r.ENFirstName&&r.ENLastName?" ":"").concat(r.ENFirstName&&r.ENLastName?"".concat(r.ENLastName,"/").concat(r.ENFirstName):"")}),i&&i.CardNo&&l?(0,H.jsxs)(x.G7,{style:G.item_content_info,children:[(0,H.jsx)(x.xv,{style:G.item_content_info_text,children:u.name}),(0,H.jsx)(x.xv,{style:G.item_content_info_text,children:N(1==i.CardType?L.idNumber:L.idCard,i.CardNo)})]}):null,v||_?(0,H.jsx)(x.G7,{style:G.item_content_error,children:(0,H.jsx)(x.xv,{style:G.item_content_error_text,children:v||"".concat(_.errMsg,"\u4e0d\u7b26\u5408\u9002\u7528\u4eba\u7fa4\u9650\u5236")})}):null]})}),(0,H.jsx)(I.Z,{style:G.item_edit,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation(),s()},testID:"traveler_item_edit_".concat(h),devTraceData:m&&m(r.CNName||"".concat(r.ENLastName,"/").concat(r.ENFirstName),r.InfoID),children:(0,H.jsx)(Z.Z,{type:"editWord",size:34,color:"#0066f6"})})]})]})}}]),n}(P),U={m_traveler_list:{postion:"relative",backgroundColor:"#f4f4f4",borderTopLeftRadius:(0,O.Vh)(8),borderTopRightRadius:(0,O.Vh)(8)},m_traveler_list_tips:{paddingLeft:(0,O.Vh)(16),paddingRight:(0,O.Vh)(16),backgroundColor:"#fff8f2",height:35,display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},m_traveler_list_tips_view:{display:"flex",flexDirection:"row"},m_traveler_list_tips_text:{color:"#666",fontSize:12},m_traveler_list_tips_text_highlight:{color:"#ff7700",fontSize:12},m_traveler_list_header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:44,paddingLeft:(0,O.Vh)(12),paddingRight:(0,O.Vh)(12),borderTopLeftRadius:(0,O.Vh)(8),borderTopRightRadius:(0,O.Vh)(8),backgroundColor:"#fff"},m_traveler_list_header_icon:{display:"flex",flexDirection:"row",alignItems:"center",height:(0,O.Vh)(30),width:(0,O.Vh)(30)},m_traveler_list_header_icon_title:{},m_traveler_list_header_title_text:{color:"#111",fontSize:(0,O.Vh)(17),fontWeight:(0,O.Ue)("500")},m_traveler_list_header_button:{},m_traveler_list_header_button_text:{color:"#0066f6",fontSize:(0,O.Vh)(17)},m_traveler_list_desc:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:(0,O.Vh)(40),backgroundColor:"#f4f4f4"},m_traveler_list_desc_text:{fontSize:(0,O.Vh)(12),color:"#666"},m_traveler_add:{},m_traveler_add_wrap:{margin:(0,O.Vh)(16),backgroundColor:"#fff",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:(0,O.Vh)(6),height:(0,O.Vh)(44)},m_traveler_add_text:{color:"#666",fontSize:(0,O.Vh)(17),marginLeft:(0,O.Vh)(8)},m_traveler_item_list:{backgroundColor:"#fff"},m_insurance_item_list:{backgroundColor:"#fff",paddingBottom:(0,O.Vh)(50)}},q=function(e){return(0,M.Z)({height:e})},W=(0,M.Z)(U),K=n(56569),J=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.groupInfo,r=t.plist,o=t.listType,i=t.handleToEdit,a=t.typeText,s=t.insuranceType,l=t.onClosed,c=t.clickLog,u=t.passengerCheckErr,d=n||{},p=d.choice,h=d.CardInfo,f=d.notFullList,g=d.name,m=d.resourceId,v=d.insuranceId,y=d.boxId,C=m||v,w=(0,_.jX)(y,C),T=a||"";o==b.r8.traveler&&(T=g);var S=this.state,P=S.dChoice,L=S.needCardInfo;return(0,H.jsxs)(x.G7,{style:W.m_traveler_list,children:[o==b.r8.traveler||s===k.u.Insured?(0,H.jsxs)(x.G7,{style:W.m_traveler_list_header,children:[(0,H.jsx)(I.Z,{style:W.m_traveler_list_header_icon,onClick:function(){l&&l()},children:(0,H.jsx)(Z.Z,{type:"iconCancel",size:36,color:"#333"})}),(0,H.jsx)(x.G7,{style:W.m_traveler_list_header_title,children:(0,H.jsxs)(x.xv,{style:W.m_traveler_list_header_title_text,children:["\u9009\u62e9",a]})}),(0,H.jsx)(I.Z,{style:W.m_traveler_list_header_button,onClick:this.onSave,devTraceData:this.logData.savePassengerDevtraceLog,children:(0,H.jsx)(x.xv,{style:W.m_traveler_list_header_button_text,children:"\u4fdd\u5b58"})})]}):null,p>0?(0,H.jsx)(x.G7,{style:W.m_traveler_list_tips,children:(0,H.jsx)(x.G7,{style:W.m_traveler_list_tips_view,children:s==k.u.policyHolder?(0,H.jsx)(x.xv,{style:W.m_traveler_list_tips_text_highlight,children:"\u8bf7\u9009\u62e91\u4e2a\u6ee118\u5468\u5c81\u7684\u6295\u4fdd\u4eba(".concat(P.length,"/1)")}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x.xv,{style:W.m_traveler_list_tips_text,children:"\u8bf7\u9009\u62e9\uff1a"}),(0,H.jsxs)(x.xv,{style:W.m_traveler_list_tips_text_highlight,children:[p,"\u4e2a"]}),(0,H.jsxs)(x.xv,{style:W.m_traveler_list_tips_text,children:[T,"(",P.length,"/",p,")"]})]})})}):null,(0,H.jsxs)(x.pf,{scrollY:!0,style:q(.8*K.Db.get("window").height-((0,K.cY)()?34:0)-(p>0?35:0)-(o==b.r8.traveler?44:0)),keyboardShouldPersistTaps:"handled",children:[(0,H.jsxs)(I.Z,{id:"traveler_add",onClick:function(){i(n,{})},style:W.m_traveler_add_wrap,testID:"traveler_add",devTraceData:this.logData.listNewDevtraceLog,children:[(0,H.jsx)(Z.Z,{type:"addcirclefill",size:36,color:"#0066f6"}),(0,H.jsxs)(x.xv,{style:W.m_traveler_add_text,children:["\u65b0\u589e",a]})]}),r&&r.length?(0,H.jsx)(x.G7,{style:b.yZ.includes(o)?W.m_insurance_item_list:W.m_traveler_item_list,children:r.map((function(t,r){var a,l=t.resourceCardInfo&&(null===(a=t.resourceCardInfo[w])||void 0===a?void 0:a.CardType),d=(t.CommonPassengerCard||[]).find((function(e){return Number(e.CardType)===Number(l)})),g={};d&&h&&h.length&&(g=h.find((function(e){return e.cardType==d.CardType}))),g||(d={});var m=(f||[]).includes(t.PassengerID),v=!1;if(s===k.u.Insured){var _=n||{},y=_.syncChoice;v=(y||[]).find((function(e){var n=e.id;return String(n)==String(t.PassengerID)}))}var b=!!P.find((function(e){return String(e)==String(t.PassengerID)})),Z=b||!m;return(0,H.jsx)(x.G7,{children:(0,H.jsx)(z,{index:r,itemInfo:t,groupInfo:n,chiose:p,notFull:m,defaultCardInfo:d,isActive:b,onSelect:e.onChange,handleToEdit:function(){i(n,t)},needCardInfo:L,currentCard:g,listType:o,insuranceType:s,isDisabled:v,clickLog:c&&Z?function(){return c({applytype:"click",seq:r+1})}:null,selectDevtraceLog:e.logData.selectPassengerDevtraceLog,editDevtraceLog:e.logData.editPassengerDevtraceLog,passengerCheckErr:u})},r)}))}):(0,H.jsx)(x.G7,{}),o==b.r8.traveler&&r&&r.length?(0,H.jsx)(x.G7,{style:W.m_traveler_list_desc,children:(0,H.jsx)(x.xv,{style:W.m_traveler_list_desc_text,children:"\u5df2\u5c55\u793a\u6240\u6709\u5e38\u7528\u51fa\u884c\u4eba"})}):null]})]})}}]),n}(y)},78277:function(e,t,n){var r=n(2446);function o(e){var t=e.currentGroup,o=e.passengerList,a=e.listType,s=e.onSelect,l=e.handleToEdit,c=e.typeText,u=void 0===c?"":c,d=e.name,p=void 0===d?"passengerListPoplayer":d,h=e.insuranceType,f=e.title,g=void 0===f?"":f,m=e.isShowHeader,v=void 0!==m&&m,_=e.clickLog,y=void 0===_?null:_,x=e.devTraceKeyData,b=e.passengerCheckErr,Z=void 0===b?[]:b,I=e.changePassenger,C=n(95782).Z,k=n(18427).Z;r.ZP.show({props:{name:p,popHeight:"80%",scrollHeight:"100%",isShowHeader:v,isScrollView:!1,title:g,renderOnshow:o.length>20,Breath:k},child:C,childProps:{plist:o,groupInfo:t,listType:a,onSelect:s,handleToEdit:function(e,t){l(e,t,"right")},onClosed:function(){return i(p)},typeText:u,insuranceType:h,clickLog:y,devTraceKeyData:x,passengerCheckErr:Z,changePassenger:I}})}function i(e){r.ZP.hide(e)}t["Z"]=o},51041:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(81876)),l=n(45023),c=n(56034),u=n(68924),d=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,s.Z)(o),"logData",{}),(0,l.Z)((0,s.Z)(o),"onClose",(function(){var e=o.props.onClosed;e&&e()})),o}return(0,o.Z)(n,[{key:"getNames",value:function(e){var t=this;return e.map((function(e){return t.getName(e)}))}},{key:"getName",value:function(e){var t=this.props.groupInfo,n=(0,u.v_)(e,t);return null===n||void 0===n?void 0:n.name}}]),n}(c.ZP),p=n(72747),h=n(49502),f=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"isNotFullInfo",value:function(e){var t=this.props.groupInfo;return(0,h.Mh)(e,t,t.resourceId)}}]),n}(c.ZP),g=n(71557),m=n(298),v=n(9353),_=n(17366),y={m_traveler_item_noborder:{border:"none"},m_traveler_item:(0,m.Z)({marginLeft:(0,_.Vh)(16),marginRight:(0,_.Vh)(16),display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"},(0,_.Cg)({direction:"bottom",width:_.WI,style:"solid",color:"#EBEFF5"})),item_content:(0,m.Z)({display:"flex",flexDirection:"row",flex:1,width:0},(0,_.o3)((0,_.Vh)(16),0)),item_content_wrap:{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",alignItems:"center",width:0},item_edit:{display:"flex",flexDirection:"row-reverse",alignItems:"center"}},x=(0,v.Z)(y),b=n(59201),Z=n(35639),I=n(2269),C=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.itemInfo,n=e.handleToEdit,r=e.index,o=e.clickLog,i=e.groupInfo,a=e.passengerInfo,s=e.isLast,l=this.isNotFullInfo(t);return(0,I.jsx)(b.Z,{style:(0,_.wh)([x.m_traveler_item,s?x.m_traveler_item_noborder:{}]),testID:"traveler_item_select_".concat(r),log:o,children:(0,I.jsxs)(p.G7,{style:x.item_content_wrap,children:[(0,I.jsx)(p.G7,{style:x.item_content,children:(0,I.jsx)(Z.Z,{groupInfo:i,passengerInfo:a,passengerId:String(t.PassengerID),passenger:t,errorMsg:l})}),(0,I.jsx)(b.Z,{style:x.item_edit,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation(),n()},children:(0,I.jsx)(g.Z,{type:"editWord",size:42,color:"#111"})})]})})}}]),n}(f),k={m_traveler_list:{postion:"relative",backgroundColor:"#fff",borderTopLeftRadius:(0,_.Vh)(8),borderTopRightRadius:(0,_.Vh)(8)},m_traveler_desc_wrapper:(0,m.Z)((0,m.Z)({},(0,_.o3)((0,_.Vh)(16))),(0,_.Cg)({direction:"top",width:(0,_.Vh)(1),color:"#eee",style:"solid"})),m_traveler_desc:{color:"#111",fontSize:(0,_.Vh)(15),lineHeight:(0,_.Nv)((0,_.Vh)(19))},m_traveler_item_list:{backgroundColor:"#fff"},m_traveler_footer:(0,m.Z)((0,m.Z)((0,m.Z)({},(0,_.o3)((0,_.Vh)(8),(0,_.Vh)(16))),(0,_.Wn)({hShadow:-16,vShadow:-16,blur:16,spread:2,color:"rgba(0, 0, 0, 0.05)",rnColor:"rgba(0,0,0)",opacity:.05})),{},{elevation:16}),m_traveler_known_btn:(0,m.Z)((0,m.Z)({backgroundColor:"#0066F6",height:(0,_.Vh)(44)},_._7),{},{borderRadius:(0,_.Vh)(8)}),m_traveler_known:{fontSize:(0,_.Vh)(17),color:"#fff",fontWeight:(0,_.Ue)("500")}},w=(0,v.Z)(k),T=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.groupInfo,n=e.plist,r=e.handleToEdit,o=this.getNames(n);return(0,I.jsx)(p.G7,{style:w.m_traveler_list,children:(0,I.jsxs)(p.G7,{children:[(0,I.jsx)(p.G7,{style:w.m_traveler_desc_wrapper,children:(0,I.jsxs)(p.xv,{style:w.m_traveler_desc,children:["\u6e38\u5ba2",o.map((function(e){return"\u201c".concat(e,"\u201d")})).join("\u3001"),"\u8bc1\u4ef6\u53f7\u91cd\u590d\uff0c\u8bf7\u6838\u5bf9\u4fee\u6539"]})}),n&&n.length?(0,I.jsx)(p.G7,{style:w.m_traveler_item_list,children:n.map((function(e,o){var i=(0,u.v_)(e,t);return(0,I.jsx)(p.G7,{children:(0,I.jsx)(C,{index:o,itemInfo:e,groupInfo:t,isLast:o==n.length-1,passengerInfo:i,handleToEdit:function(){r(t,e)}})},o)}))}):(0,I.jsx)(p.G7,{}),(0,I.jsx)(p.G7,{style:w.m_traveler_footer,children:(0,I.jsx)(b.Z,{style:w.m_traveler_known_btn,onClick:this.onClose,children:(0,I.jsx)(p.xv,{style:w.m_traveler_known,children:"\u77e5\u9053\u4e86"})})})]})})}}]),n}(d)},2723:function(e,t,n){var r=n(2446),o=n(39140),i=n(99739),a=n(17366),s=n(56569),l=n(83630),c=n(3386),u=(0,i.ZP)();function d(e){var t=e.currentGroup,i=e.repeateList,d=e.onSave,h=void 0===d?null:d,f=e.handleToEdit,g=void 0===f?null:f,m=e.name,v=void 0===m?"repeateListPoplayer":m,_=e.title,y=void 0===_?"\u8bc1\u4ef6\u53f7\u91cd\u590d":_,x=e.isShowHeader,b=void 0===x||x,Z=e.clickLog,I=void 0===Z?null:Z,C=n(51041).Z,k=(0,a.Vh)(340)-((0,s.cY)()?u.taroEnv==o.fO.h5?30:0:24);r.ZP.show({props:{name:v,popHeight:k,scrollHeight:"100%",isShowHeader:b,title:y,isScrollView:!0,conentStyles:{paddingBottom:u.isInMini?44:0}},child:C,childProps:{plist:i,groupInfo:t,handleToEdit:function(e,n){g?g(e,n,"bottom"):h&&(0,c.Z)({groupInfo:e,passengerInfo:n,direction:"bottom",listType:"traver",onSave:function(e){h(e,t.resourceId,l.r8.traveler,!1)},configTitle:"\u6e38\u5ba2",devTraceKeyData:null}),p(v)},onClosed:function(){return p(v)},clickLog:I}})}function p(e){r.ZP.hide(e)}t["Z"]=d},17476:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(59201)),l=n(72747),c=n(17366),u=n(81876),d=n(45023),p=n(56034),h=n(57113),f=n(35409),g=n(2446),m=n(50221),v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),o.onRiskClick=o.onRiskClick.bind((0,u.Z)(o)),o}return(0,o.Z)(n,[{key:"onRiskClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.push(e)}}]),n}(p.ZP),_=n(9353),y={m_contract_detail:{padding:(0,c.Vh)(16),paddingBottom:(0,c.Vh)(100)}},x=(0,_.Z)(y),b=n(2269),Z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this;return(0,b.jsx)(l.G7,{style:x.m_contract_detail,children:(0,b.jsx)(m.Z,{html:this.props.contractDetail,renderers:{a:function(t,n,r,o){var i=t||{},a=i.href;return(0,b.jsx)(l.xv,{onPress:function(){return e.onRiskClick(a)},children:n})}}})})}}]),n}(v),I=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,u.Z)(o),"cName",void 0),(0,d.Z)((0,u.Z)(o),"state",void 0),o.cName="contract",o.openDetail=o.openDetail.bind((0,u.Z)(o)),o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){h.Z.add("contractDetailPopLayer",f.Z,{props:{isOpened:!1}})}},{key:"openDetail",value:function(){var e=this.props,t=e.hyperlinkText,n=e.contractDetail;g.ZP.show({props:{name:"contractDetailPopLayer",title:t,scrollHeight:"100%",popHeight:"90%"},child:Z,childProps:{contractDetail:n}})}}]),n}(p.ZP),C={m_contract:{position:"relative",display:"flex",flexDirection:"column",paddingLeft:(0,c.Vh)(16),paddingRight:(0,c.Vh)(16),paddingTop:(0,c.Vh)(20),paddingBottom:(0,c.Vh)(10)},m_contract_content:{marginBottom:(0,c.Vh)(10),display:"flex"},m_contract_text:{lineHeight:(0,c.Nv)((0,c.Vh)(17)),fontSize:(0,c.Vh)(13),color:"#99AECA"},m_contract_hyperlink:{lineHeight:(0,c.Nv)((0,c.Vh)(17)),fontSize:(0,c.Vh)(13),color:"#0066F6",fontWeight:(0,c.Ue)("500")},m_contract_tip:{marginBottom:(0,c.Vh)(10),lineHeight:(0,c.Nv)((0,c.Vh)(17)),fontSize:(0,c.Vh)(13),color:"#99AECA"}},k=(0,_.Z)(C),w=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=["\u4e3a\u652f\u4ed8\u7eff\u8272\u73af\u4fdd\uff0c\u9700\u7406\u89e3\u5e76\u540c\u610f\u7535\u5b50\u5408\u540c\u7684\u6709\u6548\u6027\u3002\u5982\u9700\u8981\u7b7e\u7f72\u7eb8\u8d28\u5408\u540c\uff0c\u8bf7\u81f4\u7535\u5ba2\u670d","\u4ea4\u6613\u6b3e\u9879\u7531\u643a\u7a0b\u65d7\u4e0b\u5b50\u516c\u53f8\u7edf\u4e00\u6536\u53d6"],t=this.props,n=t.hyperlinkText,r=t.bottomBorderHide,o=t.traceLog;return(0,b.jsxs)(l.G7,{style:(0,c.wh)([k.m_contract,r?{borderBottomWidth:0}:null]),children:[(0,b.jsx)(s.Z,{style:k.m_contract_content,onClick:this.openDetail,devTraceData:o,children:(0,b.jsxs)(l.aA,{style:k.m_contract_text,children:["\u8bf7\u60a8\u5728\u63d0\u4ea4\u8ba2\u5355\u524d\u4ed4\u7ec6\u9605\u8bfb",(0,b.jsx)(l.xv,{style:k.m_contract_hyperlink,children:" ".concat(n)}),"\u3002"]})}),(e||[]).map((function(e){return(0,b.jsx)(l.xv,{style:k.m_contract_tip,children:e},e)}))]})}}]),n}(I)},21825:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(298),o=n(22276),i=n(57042),a=n(24460),s=n(21867),l=n(86066),c=(n(90201),n(72747)),u=n(9353),d=n(17366),p={m_coupon:(0,r.Z)((0,r.Z)({backgroundColor:"#fff"},(0,d.o3)((0,d.Vh)(16),(0,d.Vh)(16),0)),{},{display:"flex",flexDirection:"column",marginTop:(0,d.Vh)(12),borderRadius:(0,d.Vh)(8)}),m_coupon_title:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:(0,d.Vh)(4)},m_coupon_title_text:{marginRight:(0,d.Vh)(8),color:"#111",fontSize:(0,d.Vh)(17),lineHeight:(0,d.Nv)(21),fontWeight:(0,d.Ue)("500"),letterSpacing:(0,d.Vh)(-.5)},m_coupon_sub_title_text:{color:"#f70",fontSize:(0,d.Vh)(12),fontWeight:"400"}},h=(0,u.Z)(p),f=n(81876),g=n(45023),m=n(56034),v=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,g.Z)((0,f.Z)(r),"state",void 0),(0,g.Z)((0,f.Z)(r),"props",void 0),r.onChangeCoupon=r.onChangeCoupon.bind((0,f.Z)(r)),r}return(0,a.Z)(n,[{key:"openUseCoupon",value:function(e){var t=this.props,n=t.isSelectedDate,r=t.openUseCoupon;n?r&&r(e):this.toast.show("\u8bf7\u5148\u9009\u62e9\u4f7f\u7528\u65e5\u671f")}},{key:"onChangeCoupon",value:function(e,t){var n=e.discountType,r=e.discountId,o=e.resourceId,i=this.props.changeCoupon;i&&i({discountType:n,discountId:r,resourceId:o}),t&&t()}}]),n}(m.ZP),_=n(56569),y={m_coupon_cross:(0,r.Z)((0,r.Z)((0,r.Z)({},d._),{},{justifyContent:"space-between"},(0,d.o3)((0,d.Vh)(16),0)),(0,d.Cg)({direction:"top",style:"solid",color:"#ebeff5",width:d.WI})),m_coupon_title:{width:(0,d.Vh)(72),fontSize:(0,d.Vh)(15),fontWeight:"400",color:"#111"},m_coupon_content:(0,r.Z)((0,r.Z)({},d._),{},{justifyContent:"space-between",flex:1}),m_coupon_tags:(0,r.Z)((0,r.Z)({},d._),{},{flex:1,flexWrap:"wrap",overflow:"hidden",height:(0,d.Vh)(20)}),m_coupon_tag_item_wrapper:(0,r.Z)((0,r.Z)((0,r.Z)({borderRadius:(0,d.Vh)(2)},d._),{},{marginRight:(0,d.Vh)(4),marginBottom:(0,d.Vh)(2)},(0,d.o3)(0,(0,d.Vh)(4))),{},{backgroundColor:"#fff4eb",height:(0,d.Vh)(19)}),m_coupon_tag_item:(0,r.Z)({lineHeight:(0,d.Nv)(16),fontSize:(0,d.Vh)(11),color:"#FF5500"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_coupon_num:(0,r.Z)({color:"#111",fontSize:(0,d.Vh)(15),fontWeight:"400"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"})},x=(0,u.Z)(y),b=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,g.Z)((0,f.Z)(r),"onShowCrossCouponCallBack",(function(){var e=r.props.onShowCrossCoupon;e&&e(!0)})),r}return(0,a.Z)(n)}(m.ZP),Z=n(71557),I=n(59201),C=n(2269),k=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.crossCouponList,n=e.logs,r=t.length,o=n.crossEntryTraceLog,i=n.crossCouponLog,a=void 0===i?{}:i,s=a.crossCouponExposureLog,l=a.crossClickLog;return(0,C.jsxs)(I.Z,{style:x.m_coupon_cross,onClick:this.onShowCrossCouponCallBack,log:l,testID:s,devTraceData:o,children:[(0,C.jsx)(c.xv,{style:x.m_coupon_title,children:"\u8d60\u5238"}),(0,C.jsxs)(c.G7,{style:x.m_coupon_content,children:[(0,C.jsx)(c.G7,{style:x.m_coupon_tags,children:t.map((function(e){var t=e.promotionLabel;return(0,C.jsx)(c.G7,{style:x.m_coupon_tag_item_wrapper,children:(0,C.jsx)(c.xv,{style:x.m_coupon_tag_item,children:t})})}))}),r>1&&(0,C.jsx)(c.xv,{style:x.m_coupon_num,children:"".concat(r,"\u5f20")})]}),(0,C.jsx)(Z.Z,{type:"forward",color:"#111",size:32})]})}}]),n}(b),w={m_coupon_card_item:(0,r.Z)({display:"flex",flexDirection:"row"},(0,d.Cg)({direction:"bottom",style:"solid",color:"#eee",width:(0,d.Vh)(.5)})),no_border_bottom:{borderBottomWidth:0}},T=(0,u.Z)(w),S={start:{x:0,y:0},end:{x:1,y:0},locations:[0,1],colors:["rgb(251, 217, 195)","rgb(241, 192, 159)"]},P=90,L={m_coupon_card:(0,r.Z)((0,r.Z)({},(0,d.o3)((0,d.Vh)(16),0)),{},{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flex:1}),m_coupon_card_left:{display:"flex",flexDirection:"row",alignItems:"center",flex:1},m_coupon_card_main_title:{width:(0,d.Vh)(72),color:"#111",fontSize:(0,d.Vh)(15),fontWeight:"400",lineHeight:(0,d.Nv)(19),flexShrink:0},m_coupon_card_desc:{flex:1,display:"flex",flexDirection:"column"},m_coupon_row:{display:"flex",flexDirection:"row",maxWidth:(0,d.Vh)(176)},m_coupon_card_desc_wrapper:(0,r.Z)((0,r.Z)({},d._),{},{borderRadius:(0,d.Vh)(2),overflow:"hidden"}),m_coupon_card_desc_cont:{color:"#111",fontSize:(0,d.Vh)(15),lineHeight:(0,d.Nv)(19),fontWeight:"400"},m_coupon_card_desc_tip:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:(0,d.Vh)(4),lineHeight:(0,d.Nv)((0,d.Vh)(17))},m_coupon_card_desc_tip_text:{color:"#F21500",fontSize:(0,d.Vh)(13)},m_coupon_desctext:{fontSize:(0,d.Vh)(15),lineHeight:(0,d.Nv)((0,d.Vh)(19)),color:"#111"},m_coupon_card_radio:{display:"flex"},m_coupon_tag_text:{color:"#7b3e29",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)((0,d.Vh)(17)),fontWeight:"normal"},tipBar:(0,r.Z)((0,r.Z)({display:"flex",justifyContent:"center",alignItems:"center",marginRight:(0,d.Vh)(6),marginLeft:(0,d.Vh)(4)},(0,d.o3)((0,d.Vh)(1),(0,d.Vh)(4))),{},{borderRadius:(0,d.Vh)(2)}),m_coupon_amount_wrapper:{display:"flex",marginRight:(0,d.Vh)(4)},m_coupon_amount:(0,r.Z)({fontSize:(0,d.Vh)(15),color:"#FF5500"},"android"==_.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"})},N=(0,u.Z)(L),j=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,g.Z)((0,f.Z)(r),"onCouponClick",(function(){var e=r.props,t=e.isInvalidCashBack,n=e.onCouponClick;t||n&&n()})),r}return(0,a.Z)(n)}(m.ZP),D=n(70873),V=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.discountTitle,n=e.discountDesc,o=e.discountTip,i=e.isSelect,a=e.color,s=e.discountType,l=e.isInvalidCashBack,u=e.clickLog,p=e.isSuperVipCoupon,h=e.index,f=e.devTraceLog,g=e.limitName,m=e.amount,v=e.discountName,_=s==D.$i.COUPON?"coupon":s==D.$i.DISCOUNT?"discount":"rebate",y=n;return s==D.$i.DISCOUNT&&g&&(y="".concat(n,"\uff0c").concat(g)),s==D.$i.COUPON&&v&&!p&&(y="\u3010".concat(v,"\u3011").concat(n)),(0,C.jsxs)(I.Z,{style:N.m_coupon_card,onClick:this.onCouponClick,log:u,testID:"".concat(_,"_").concat(h),devTraceData:f,children:[(0,C.jsxs)(c.G7,{style:N.m_coupon_card_left,children:[(0,C.jsx)(c.xv,{style:N.m_coupon_card_main_title,children:t}),(0,C.jsxs)(c.G7,{style:N.m_coupon_card_desc,children:[(0,C.jsxs)(c.G7,{style:N.m_coupon_row,children:[p?(0,C.jsx)(c.o,(0,r.Z)((0,r.Z)({},S),{},{direction:P,style:N.tipBar,"hover-class":"none",plain:!0,children:(0,C.jsx)(c.xv,{style:N.m_coupon_tag_text,children:"\u8d85\u7ea7\u4f1a\u5458"})})):null,(0,C.jsx)(c.G7,{style:N.m_coupon_card_desc_wrapper,children:(0,C.jsx)(c.xv,{style:(0,d.wh)([N.m_coupon_card_desc_cont,s==D.$i.COUPON&&m>0?N.m_coupon_desctext:{},a?{color:a}:null]),children:y})})]}),!!o&&(0,C.jsx)(c.G7,{style:N.m_coupon_card_desc_tip,children:(0,C.jsx)(c.xv,{style:N.m_coupon_card_desc_tip_text,children:o})})]})]}),[D.$i.DISCOUNT,D.$i.COUPON].includes(s)&&m>0?(0,C.jsx)(c.G7,{style:N.m_coupon_amount_wrapper,children:(0,C.jsxs)(c.xv,{style:N.m_coupon_amount,children:["-\xa5",m]})}):null,s!=D.$i.COUPON?!l&&(0,C.jsx)(Z.Z,{type:i?"selectedShape":"unselected",size:48,color:"#0066F6"}):(0,C.jsx)(Z.Z,{type:"forward",color:"#111",size:32})]})}}]),n}(j),E=n(88592),R=function(e){var t=e.item,n=e.index,o=e.dataListLength,i=e.counponEntryTraceLog,a=e.openUseCoupon,s=e.onChangeCoupon,l=t.discountType==D.$i.COUPON?i:null;return(0,C.jsx)(c.G7,{style:(0,d.wh)([T.m_coupon_card_item,n==o-1?T.no_border_bottom:null]),children:(0,C.jsx)(V,(0,r.Z)((0,r.Z)({},t),{},{index:n,devTraceLog:l,onCouponClick:t.discountType==D.$i.COUPON?a:function(){s({discountType:D.$i.REBATE,discountId:t.discountId,resourceId:t.resourceId},t.onCouponClick)},clickLog:t.discountType==D.$i.COUPON?function(){return(0,E.mD)("coupon-select",{strategyid:t.discountId})}:function(){return(0,E.mD)("info-coupon",{strategyid:t.discountId})}}))},"discount_".concat(n))},A={m_coupon_card_item:(0,r.Z)({display:"flex",flexDirection:"row"},(0,d.Cg)({direction:"bottom",style:"solid",color:"#eee",width:(0,d.Vh)(.5)})),no_border_bottom:{borderBottomWidth:0}},F=(0,u.Z)(A),M=function(e){var t=e.item,n=e.index,o=e.changeDiscountTraceLog,i=e.onChangeCoupon,a=o&&o(t.isSelect?"\u53d6\u6d88\u9009\u4e2d":"\u9009\u4e2d","".concat(t.discountDesc,"(").concat(t.discountId,")"));return(0,C.jsx)(c.G7,{style:(0,d.wh)([F.m_coupon_card_item]),children:(0,C.jsx)(V,(0,r.Z)((0,r.Z)({},t),{},{index:n,devTraceLog:a,onCouponClick:function(){i({discountType:D.$i.DISCOUNT,discountId:t.discountId,resourceId:t.resourceId},t.onCouponClick)},clickLog:function(){return(0,E.mD)("info-coupon",{strategyid:t.discountId})}}))},"discount_".concat(n))},O=function(){return null},B=function(e){var t=e.title,n=e.subTitle;return(0,C.jsxs)(c.G7,{style:h.m_coupon_title,children:[(0,C.jsx)(c.xv,{style:h.m_coupon_title_text,children:t}),(0,C.jsx)(c.xv,{style:h.m_coupon_sub_title_text,children:n})]})},G=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,i=t.subTitle,a=t.discountList,s=t.cashBackList,l=t.discountDataList,u=t.crossCouponList,d=t.onShowCrossCoupon,p=t.logs,f=t.bargain,g=p.changeDiscountTraceLog,m=p.counponEntryTraceLog,v=(null===a||void 0===a?void 0:a.length)>0||(null===s||void 0===s?void 0:s.length)>0||(null===l||void 0===l?void 0:l.length)>0||(null===u||void 0===u?void 0:u.length)>0,_=[].concat((0,o.Z)(s||[]),(0,o.Z)(l||[]));return(0,C.jsx)(C.Fragment,{children:v&&(0,C.jsxs)(c.G7,{style:h.m_coupon,children:[(0,C.jsx)(B,{title:n,subTitle:i}),null===a||void 0===a?void 0:a.map((function(t,n){return(0,C.jsx)(M,{item:t,index:n,changeDiscountTraceLog:g,onChangeCoupon:e.onChangeCoupon})})),null===_||void 0===_?void 0:_.map((function(t,n,r){return(0,C.jsx)(R,{item:t,index:n,dataListLength:r.length,counponEntryTraceLog:m,openUseCoupon:e.openUseCoupon.bind(e,n),onChangeCoupon:e.onChangeCoupon})})),(null===u||void 0===u?void 0:u.length)>0?(0,C.jsx)(k,{crossCouponList:u,logs:p,onShowCrossCoupon:d}):null,f&&(0,C.jsx)(O,(0,r.Z)({},f))]})})}}]),n}(v)},70873:function(e,t,n){n.d(t,{$i:function(){return r},GD:function(){return o}});var r=function(e){return e["DISCOUNT"]="\u7acb\u51cf",e["REBATE"]="\u8fd4\u73b0",e["COUPON"]="\u4f18\u60e0\u5238",e}({}),o=function(e){return e[e["Use"]=1]="Use",e[e["NotUse"]=2]="NotUse",e[e["NotAvailble"]=3]="NotAvailble",e}({})},80842:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(298),c=n(17366),u=n(9353),d=(0,u.Z)({m_footer_tip_view_wrapper:{backgroundColor:"#fff",fontSize:0,position:"relative",zIndex:1},m_footer_tip_view:(0,l.Z)({display:"flex",flexDirection:"row",backgroundColor:"#FFFAF5",alignItems:"center",justifyContent:"flex-start"},(0,c.o3)((0,c.Vh)(12),(0,c.Vh)(16))),m_footer_tip_view_icon:{marginRight:(0,c.Vh)(5),marginTop:(0,c.Vh)(2)},m_footer_tip_view_item:{flex:1},m_footer_tip_view_text:{fontSize:(0,c.Vh)(13),color:"#FF7700",lineHeight:(0,c.Nv)(17)}}),p=n(81876),h=n(45023),f=n(56034),g=n(32545),m=n(79522),v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,h.Z)((0,p.Z)(o),"state",void 0),(0,h.Z)((0,p.Z)(o),"props",void 0),(0,h.Z)((0,p.Z)(o),"timer",null),(0,h.Z)((0,p.Z)(o),"showTip",!0),o.state={tip:o.setData({data:e.tips,date:e.date}),times:0},o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){(0,m.uE)(e.tips,this.props.tips)&&this.props.date===e.date||(clearInterval(this.timer),this.timer=null,this.setState({tip:this.setData({data:e.tips,date:e.date})}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"setData",value:function(e){var t,n=this,r=e.data,o=e.date,i=r.text,a=(null===(t=this.state)||void 0===t?void 0:t.times)||0;if(o&&o.replace(/-/g,"/")!==r.date?this.showTip=!1:this.showTip=!0,r.time){var s=r.time-1e3*a;i=i.replace("{time}",s>0?(0,g.VV)(s):"0\u79d2"),s<=0?(clearInterval(this.timer),this.timer=null,this.showTip&&this.props.onTimeOut&&this.props.onTimeOut()):this.timer||(this.timer=setInterval((function(){n.setState({tip:n.setData({data:r,date:o}),times:a++})}),1e3))}return(0,l.Z)((0,l.Z)({},r),{},{text:i})}}]),n}(f.ZP),_=n(2269),y=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.state.tip,t=e.content,n=this.props.logs.footerTipCountdownExposureLog;return this.showTip?(0,_.jsx)(s.G7,{style:d.m_footer_tip_view_wrapper,testID:n({content:t}),children:(0,_.jsx)(s.G7,{style:d.m_footer_tip_view,children:(0,_.jsx)(s.G7,{style:d.m_footer_tip_view_item,children:(0,_.jsx)(s.xv,{style:d.m_footer_tip_view_text,children:e.text})})})}):null}}]),n}(v)},2348:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=n(90201),l=n(72747),c=n(9353),u=n(17366),d={step_content:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:(0,u.Vh)(10),paddingBottom:(0,u.Vh)(10)},step_item:{fontSize:(0,u.Vh)(15),textAlign:"center",color:"#ccc",letterSpacing:-.48,fontWeight:(0,u.Ue)("500")},step_item_right:{marginRight:(0,u.Vh)(15)},step_item_active:{fontSize:(0,u.Vh)(17),opacity:1,color:"#111"},step_image:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",textAlign:"center",width:(0,u.Vh)(35)}},p=(0,c.Z)(d),h=n(33392),f=n(2269),g=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.step;return(0,f.jsxs)(l.G7,{style:p.step_content,children:[(0,f.jsx)(l.xv,{style:(0,u.wh)([p.step_item,1==e?p.step_item_active:{}]),children:"\u9009\u7968\u9884\u8ba2"}),(0,f.jsx)(h.Z,{url:"https://dimg04.c-ctrip.com/images/0AS6l120009u6ml1m67AB.png_.webp",style:p.step_image,width:20,height:20}),(0,f.jsx)(l.xv,{style:(0,u.wh)([p.step_item,2==e?p.step_item_active:{}]),children:"\u586b\u5199\u4fe1\u606f"}),(0,f.jsx)(h.Z,{url:"https://dimg04.c-ctrip.com/images/0AS6l120009u6ml1m67AB.png_.webp",style:p.step_image,width:20,height:20}),(0,f.jsx)(l.xv,{style:(0,u.wh)([p.step_item,3==e?p.step_item_active:{}]),children:"\u53bb\u652f\u4ed8"})]})}}]),n}(s.Component)},35213:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=n(90201),l=n(33392),c=n(2348),u=n(2269),d=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.step,n=e.mode;return n?"resourcePage"===n?(0,u.jsx)(c.Z,{step:t}):"isscan"===n?(0,u.jsx)(l.Z,{width:"100%",height:60,url:"https://dimg04.c-ctrip.com/images/0AS45120009w4x1nn4885.png_.webp"}):void 0:null}}]),n}(s.Component)},33031:function(e,t,n){n.d(t,{Ps:function(){return _},qm:function(){return v},HR:function(){return y},z2:function(){return x}});var r=n(79301),o=n(95308),i=function(e,t){return{request:Object.assign({},e,t),actionUrl:"/restapi/soa2/20534/json/buildInsuranceParam"}},a=n(84578),s=n(91044),l=n(68924),c=function(e){return""},u=function(e){var t=e.state,n=e.header,r=t.insurance,o=void 0===r?{}:r,i=o.insuranceInfo,s=void 0===i?{}:i,u=o.policyholderGroup,d=void 0===u?{}:u,p=o.insuredGroup,h=void 0===p?{}:p,f=o.isCancelInsurance,g=void 0!==f&&f,m=t.passengerList,v=void 0===m?[]:m,_=t.request;a.Fs.save({insuranceBefore:JSON.stringify({id:_.insuranceId,passenger:d.dChoice,count:_.count})}),a.Fs.saveToLocal(t);var y=[{insuranceId:"".concat(s.id),title:s.originName||s.name,subtitle:s.insuranceCompany,priceNoteList:[{priceText:"\xa5".concat(s.price,"/").concat(g?"\u5355":"\u4efd")}],hasInsureds:!1}],x=d||{},b=x.dChoice,Z=b&&b.length?v.find((function(e){return e.PassengerID==b[0]}))||{}:null,I=(0,l.JV)(Z,["name","cardNo","CardType","Birthday"],s.id),C=I.name,k=I.cardNo,w=I.CardType,T=I.Birthday,S=Z?{name:C,idCardType:w,idCardNo:k,birthday:T}:null,P=h||{},L=P.dChoice,N=[];(L||[]).forEach((function(e){var t=(0,l.ly)(e,v),n=(0,l.JV)(t,["name","cardNo","CardType","Birthday","ageType","PassengerID"],s.id),r=n.name,o=n.cardNo,i=n.CardType,a=n.Birthday,c=n.ageType,u=n.PassengerID;N.push({name:r,idCardNo:o,idCardType:i,birthday:a,ageType:c,insuredId:"".concat(u),needPolicyHolder:S?"T":"F"})}));var j=N&&N.length>0?N.map((function(e){return{insuranceId:"".concat(s.id),insuredId:"".concat(e.insuredId)}})):[{insuranceId:"".concat(s.id),insuredId:""}],D=["FAT","dev"].includes(n.enviroment);return{bizCode:"601",confirmNotifyUrl:c(_),insuranceInfoCallUrl:"http://webapi.soa".concat(D?".fws.qa.nt":"",".ctripcorp.com/api/12236/getInsuranceBasicInfo"),insuranceList:y,insuredList:N,selectedInsuranceList:j,policyHolder:S,policyHolderEditable:!1,channel:"RN"==e.platform?"App":"H5",callbackType:"mini"==e.platform?4:"RN"==e.platform?1:2}},d=function(e,t){var n=t[0];if(n&&n.token&&n.confirmUrl){var r=n.confirmUrl+"&eventName=BindInsuranceCallBack"+("mini"==e.platform?"&hideBack=1":"");e.push(r,void 0,{isNewWebview:!0},void 0,void 0,!1,{observerKey:"BindInsuranceCallBack"})}else h(e)},p=2,h=function(e){var t=p>0?"\u83b7\u53d6\u4fdd\u9669\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5":"\u83b7\u53d6\u4fdd\u9669\u4fe1\u606f\u5931\u8d25\uff0c\u6682\u65e0\u6cd5\u8d2d\u4e70\u4fdd\u9669";e.toast.show(t),p--},f=function(e,t){var n=t.state.request;if(0==e.status&&m()){var r=e.data,o=void 0===r?{}:r;n.replayToken=o.replayToken,n.hasForgoInsurance=!1,o.selectedInsuranceList.length||(n.hasForgoInsurance=!0);var i=function(){t.setStateWrapper({request:n},(function(){t.booking()}))};n.hasForgoInsurance?t.changeInsurance("",i):i()}},g=!1,m=function(){return g},v=function(e,t){if(!e.insuranceId||!t)return!1;var n=e.insuranceId,r=e.replayToken;if(n)if(r){var o=JSON.stringify({id:e.insuranceId,passenger:t.policyholderGroup.dChoice,count:e.count}),i=a.Fs.load("insuranceBefore");g=o!==i}else g=!0;else g=!1;return g},_=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u(t),o=[i(t.header,n)],e.next=4,t.http({list:o});case 4:a=e.sent,d(t,a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.state,n=t.request,r=t.insurance;return!!v(n,r)&&(e.handleInsuranceAgent(),!0)},x=function(e,t){s.B.register(e,(function(e){f(e,t)}),!0)}},51706:function(e,t,n){n.d(t,{Z:function(){return we}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(72747)),c=n(71557),u=n(59201),d=n(9353),p=n(17366),h=n(56569),f={m_insurance_card:(0,r.Z)((0,r.Z)({paddingLeft:(0,p.Vh)(16),paddingRight:(0,p.Vh)(16)},p._),{},{justifyContent:"space-between"}),m_ic_content:(0,r.Z)((0,r.Z)({},p._),{},{justifyContent:"space-between"}),m_content_left:(0,r.Z)((0,r.Z)({},p.i3),{},{maxWidth:(0,p.Vh)(240)}),m_content_title:(0,r.Z)({},p._),m_content_row:(0,r.Z)((0,r.Z)({},p._),{},{flexWrap:"wrap",justifyContent:"flex-end"}),m_content_marg_8:{marginBottom:(0,p.Vh)(4)},m_content_right:(0,r.Z)((0,r.Z)({},p.i3),{},{alignItems:"flex-end",flex:1}),m_content_name:(0,r.Z)((0,r.Z)({},(0,p.Sf)(1)),{},{fontSize:(0,p.Vh)(17),fontWeight:(0,p.Ue)("500"),color:"#111",lineHeight:(0,p.Nv)((0,p.Vh)(21)),letterSpacing:(0,p.Vh)(-.5)}),m_content_currency:(0,r.Z)((0,r.Z)({fontSize:(0,p.Vh)(19)},"android"==h.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{color:"#FF5500",lineHeight:(0,p.Nv)((0,p.Vh)(23))}),m_content_price:(0,r.Z)((0,r.Z)({fontSize:(0,p.Vh)(19)},"android"==h.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{color:"#FF5500",lineHeight:(0,p.Nv)((0,p.Vh)(23))}),m_content_priceUnitTxt:{fontSize:(0,p.Vh)(15),color:"#111",lineHeight:(0,p.Nv)((0,p.Vh)(23))},m_ic_tags:{display:"flex",flexDirection:"row",flexWrap:"wrap",overflow:"hidden",marginTop:(0,p.Vh)(5)},m_tag:(0,r.Z)((0,r.Z)({},p._),{},{marginBottom:(0,p.Vh)(4)}),m_separate:{marginRight:(0,p.Vh)(6),width:p.WI,height:(0,p.Vh)(12),backgroundColor:"#C5C5C5"},m_tag_text:(0,r.Z)((0,r.Z)({},p._),{},{marginRight:(0,p.Vh)(6),lineHeight:(0,p.Nv)((0,p.Vh)(17)),fontSize:(0,p.Vh)(13),color:"#555",letterSpacing:(0,p.Vh)(-.3)},"android"==h.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_tag_highlight:{color:"#0F4999"},m_ic_tip:(0,r.Z)((0,r.Z)({},p._),{},{marginTop:(0,p.Vh)(1)}),m_tip_txt:{fontSize:(0,p.Vh)(13),color:"#555",letterSpacing:(0,p.Vh)(-.3),lineHeight:(0,p.Nv)((0,p.Vh)(17))}},g=(0,d.Z)(f),m=n(56034),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n)}(m.ZP),_=n(88592),y=n(2269),x=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.insuranceName,n=e.tags,r=e.price,o=e.baseUnitTxt,i=e.countUnitTxt,a=e.cancelTip,s=e.isChecked,d=e.handleCheck,h=e.handleOpenDetail,f=e.logOptions,m=void 0===f?{}:f,v=e.clickTraceLog;return(0,y.jsxs)(l.G7,{style:g.m_insurance_card,children:[(0,y.jsxs)(l.G7,{style:g.m_content_left,children:[(0,y.jsxs)(u.Z,{style:g.m_content_title,log:function(){return(0,_.sO)("tkt_insurance_matchdetail_click",m)},testID:"open_insurance_detail",onClick:h,children:[(0,y.jsx)(l.xv,{style:g.m_content_name,numberOfLines:1,testID:"insurance_title",children:t}),(0,y.jsx)(c.Z,{type:"forward",size:32,color:"#111"})]}),(0,y.jsx)(u.Z,{style:g.m_ic_tags,log:function(){return(0,_.sO)("tkt_insurance_assurance_click",m)},onClick:d,devTraceData:v&&v(s?"\u53d6\u6d88\u9009\u4e2d":"\u9009\u4e2d",t),children:(n||[]).map((function(e,t){var r=e.text,o=e.highLight;return(0,y.jsxs)(l.G7,{style:g.m_tag,children:[(0,y.jsx)(l.xv,{style:(0,p.wh)([g.m_tag_text,o?g.m_tag_highlight:null]),children:r.replace("\uffe5","\xa5")}),t!=n.length-1?(0,y.jsx)(l.xv,{style:g.m_separate}):null]},t)}))}),s?(0,y.jsx)(l.G7,{style:g.m_ic_tip,children:(0,y.jsx)(l.xv,{style:g.m_tip_txt,children:a})}):null]}),(0,y.jsxs)(u.Z,{style:g.m_content_right,log:function(){return(0,_.sO)("tkt_insurance_assurance_click",m)},onClick:d,testID:"insurance_".concat(s?"checked":"uncheck"),devTraceData:v&&v(s?"\u53d6\u6d88\u9009\u4e2d":"\u9009\u4e2d",t),children:[(0,y.jsxs)(l.G7,{style:(0,p.wh)([g.m_content_row,g.m_content_marg_8]),children:[(0,y.jsxs)(l.G7,{style:g.m_content_row,children:[(0,y.jsx)(l.xv,{style:g.m_content_currency,children:"\xa5"}),(0,y.jsx)(l.xv,{style:g.m_content_price,children:r}),(0,y.jsx)(l.xv,{style:g.m_content_priceUnitTxt,children:o})]}),(0,y.jsx)(l.xv,{style:g.m_content_priceUnitTxt,children:i})]}),(0,y.jsx)(c.Z,{type:s?"selectedShape":"unselected",size:48,color:"#0066F6"})]})]})}}]),n}(v),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n)}(m.ZP),Z={m_passenger_info:(0,r.Z)((0,r.Z)({position:"relative",flexDirection:"row",justifyContent:"space-between"},(0,p.o3)((0,p.Vh)(12),0,(0,p.Vh)(12))),{},{flex:1}),m_passenger_main:{flexDirection:"row",alignItems:"flex-end",display:"flex",flexWrap:"wrap"},m_passenger_name:{marginBottom:(0,p.Vh)(2),fontSize:(0,p.Vh)(15),marginRight:(0,p.Vh)(2),color:"#111",lineHeight:(0,p.Nv)(19)},m_passenger_nametips:{marginBottom:(0,p.Vh)(2),fontSize:(0,p.Vh)(15),color:"#888",lineHeight:(0,p.Nv)(19)},m_passenger_subs:(0,r.Z)({marginTop:(0,p.Vh)(2)},p.i3),m_passenger_sub:{fontSize:(0,p.Vh)(15),lineHeight:(0,p.Nv)(19),marginBottom:(0,p.Vh)(2),color:"#111"},m_passenger_edit:{justifyContent:"center"},info_style:{marginTop:(0,p.Vh)(0)}},I=(0,d.Z)(Z),C=n(22586),k=n(50141),w=n(32138),T=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.policyInfo,n=e.type;return(0,y.jsx)(l.G7,{style:I.m_passenger_info,children:(0,y.jsxs)(l.G7,{style:I.m_passenger_left,children:[(0,y.jsxs)(l.G7,{style:I.m_passenger_main,numberOfLines:2,children:[(0,y.jsx)(l.xv,{style:I.m_passenger_name,children:t.name}),t.isFromPassenger?(0,y.jsx)(l.xv,{style:I.m_passenger_nametips,children:"(\u88ab\u4fdd\u4eba\u9700\u4e0e\u51fa\u884c\u4eba\u4e00\u81f4)"}):null]}),(0,y.jsx)(l.G7,{style:I.m_passenger_subs,children:t.subTextArr.map((function(e){return(0,y.jsx)(l.xv,{style:I.m_passenger_sub,children:e},e)}))}),(0,y.jsx)(C.s.Consumer,{children:function(e){var r=(e.insuranceError||[]).find((function(e){if(e.passengerId==(null===t||void 0===t?void 0:t.PassengerID))return!0}));return n===w.u.Insured&&t.isDefect&&(r={text:"\u4fe1\u606f\u4e0d\u5168, \u70b9\u51fb\u8865\u5145"}),(0,y.jsx)(k.Z,{errorInfo:r,from:"policy",info_style:I.info_style,noLine:!0})}})]})})}}]),n}(b),S=n(22276),P=n(81876),L=n(45023),N=n(68924),j=function(e){return 18!==(null===e||void 0===e?void 0:e.length)?e:"".concat(e.slice(0,6)," ").concat(e.slice(6,14)," ").concat(e.slice(14))},D=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,L.Z)((0,P.Z)(i),"formatPolicyInfo",(function(e,t){if(!t)return null;var n=e.CardInfo,o=e.insuranceId,i={};Array.isArray(n)&&(i=n.reduce((function(e,t){var n=t.cardType,o=t.name;return(0,r.Z)((0,r.Z)({},e),{},(0,L.Z)({},n,o))}),{}));var a=(0,N.JV)(t||{},["cardNo","name","CardType","Birthday","PassengerID"],o),s=a.cardNo,l=a.name,c=a.CardType,u=a.Birthday,d=a.PassengerID,p=[];return i[c]&&s&&(p=[].concat((0,S.Z)(p),["".concat(i[c]," ").concat(j(s))])),"1"!==String(c)&&u&&(p=[].concat((0,S.Z)(p),["\u751f\u65e5 ".concat(u)])),{name:l,subTextArr:p,PassengerID:d}})),i}return(0,i.Z)(n)}(m.ZP),V={m_policy_holder:(0,r.Z)((0,r.Z)({},p._),{},{justifyContent:"space-between",backgroundColor:"#F8FAFC",paddingRight:(0,p.Vh)(12)}),m_ph_left:(0,r.Z)((0,r.Z)({},p._),{},{justifyContent:"space-between",paddingLeft:(0,p.Vh)(12),flex:1}),m_left_name:(0,r.Z)({marginRight:(0,p.Vh)(15),color:"#111"},(0,p.o3)((0,p.Vh)(16),0)),m_font_15:{fontSize:(0,p.Vh)(15)},m_left_txt:{color:"#C5C5C5",lineHeight:(0,p.Nv)(18)},m_flex:(0,r.Z)({},p.i3)},E=(0,d.Z)(V),R=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tipInfo,n=e.passengerInfo,r=e.policyholderGroup,o=e.handleOpenPolicyholder,i=e.logOptions,a=void 0===i?{}:i,s=this.formatPolicyInfo(r,n);return(0,y.jsxs)(u.Z,{style:E.m_policy_holder,onClick:o,log:function(){return(0,_.sO)("tkt_insurance_insdtl_edit_click",a)},children:[(0,y.jsxs)(l.G7,{style:E.m_ph_left,children:[(0,y.jsx)(l.xv,{style:(0,p.wh)([E.m_left_name,E.m_font_15]),children:"\u6295\u4fdd\u4eba"}),s?(0,y.jsx)(T,{policyInfo:s}):(0,y.jsx)(l.G7,{style:E.m_flex,children:(0,y.jsx)(C.s.Consumer,{children:function(e){var n,r;return null!==e&&void 0!==e&&null!==(n=e.insuranceError)&&void 0!==n&&n[0]?(0,y.jsx)(k.Z,{errorInfo:null===e||void 0===e||null===(r=e.insuranceError)||void 0===r?void 0:r[0],noLine:!0,from:"policy",line_style:{bottom:-9},info_style:{marginTop:0}}):(0,y.jsx)(l.xv,{style:(0,p.wh)([E.m_left_txt,E.m_font_15]),children:t})}})})]}),(0,y.jsx)(c.Z,{type:"forward",size:32,color:"#111"})]})}}]),n}(D),A=n(9422),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"judgeHide",value:function(e){var t=e.needRealName,n=e.insuredGroup,r=e.policyholderGroup,o=e.insuredInfos;if(t){var i,a=n.choice,s=n.dChoice,l=n.insuranceId;if(s.length<a)return!0;if((o||[]).some((function(e){return(0,A.y)(e,l)})))return!0;if((s||[]).includes(null===r||void 0===r||null===(i=r.dChoice)||void 0===i?void 0:i[0]))return!0}return!1}}]),n}(m.ZP),M={m_insurance_extra:{paddingLeft:(0,p.Vh)(16),paddingRight:(0,p.Vh)(16),marginTop:(0,p.Vh)(12)},m_insurance_partner:(0,r.Z)((0,r.Z)((0,r.Z)({},p._),{},{backgroundColor:"#f8fafd",height:(0,p.Vh)(34)},(0,p.Cg)({direction:"top",width:(0,p.Vh)(.5),color:"rgba(184,198,217,0.3)",style:"solid"})),{},{paddingLeft:(0,p.Vh)(12)}),m_insurance_partner_text:{color:"#00b87a",fontSize:(0,p.Vh)(12),marginLeft:(0,p.Vh)(5)},m_insurance_marginTop:{marginTop:(0,p.Vh)(12)},m_insurance_radius:{borderRadius:(0,p.Vh)(4),overflow:"hidden"},m_insurance_separator:{marginTop:(0,p.Vh)(16),backgroundColor:"#EBEFF5",height:1/(0,h.md)(),width:"100%"},m_insurance_clause_container:{paddingLeft:(0,p.Vh)(16),paddingRight:(0,p.Vh)(16)}},O=(0,d.Z)(M),B=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"handleEdit",value:function(e){var t=this.props.handleEditInsured;t&&t(null,e,w.u.Insured)}},{key:"convertInsuredInfo",value:function(e,t,n){var r=t.CardInfo,o=t.syncChoice;if(!e)return e;var i=(0,N.JV)(e,["cardNo","name","CardType","Birthday","PassengerID"],n),a=i.cardNo,s=i.name,l=i.CardType,c=i.Birthday,u=i.PassengerID,d=o.find((function(e){var t=e.id;return t==u}))||{},p=d.isFromPassenger,h=d.isDefect,f=(0,A.y)(e,n),g=[],m=r.find((function(e){return e.cardType==l}));return m&&a&&(g=["".concat(m.name," ").concat(j(a))]),"1"!=l&&c&&(g=[].concat((0,S.Z)(g),["\u751f\u65e5 ".concat(c)])),{name:s,subTextArr:g,isDefect:f,isFromPassenger:p,isInitDefect:h,PassengerID:u}}}]),n}(m.ZP),G={m_insured_person:{borderRadius:(0,p.Vh)(4),backgroundColor:"#F8FAFC"},m_ip_top:(0,r.Z)({},p._),m_ip_left:(0,r.Z)((0,r.Z)({},p._),{},{justifyContent:"space-between"},(0,p.o3)((0,p.Vh)(16),0,(0,p.Vh)(16),(0,p.Vh)(12))),m_ip_right:{flexDirection:"column",flex:1,justifyContent:"center"},m_left_name:{marginRight:(0,p.Vh)(15),color:"#111",lineHeight:(0,p.Nv)(19)},m_font_15:{fontSize:(0,p.Vh)(15)},m_left_txt:{color:"#bbb"},m_ip_passenger:(0,r.Z)((0,r.Z)({},p._),{},{alignItems:"center",justifyContent:"space-between",paddingRight:(0,p.Vh)(8)}),m_border:(0,r.Z)({},(0,p.Cg)({direction:"bottom",style:"solid",color:"rgba(184,198,217,0.3)",width:(0,p.Vh)(.5)})),m_ip_change_button:(0,r.Z)({justifyContent:"space-around",textAlign:"center",color:"#0066F6",fontSize:(0,p.Vh)(15),fontWeight:(0,p.Ue)("500"),flex:1,lineHeight:(0,p.Nv)(19)},(0,p.o3)((0,p.Vh)(12),0,(0,p.Vh)(16))),m_ip_bottom_container:(0,r.Z)((0,r.Z)((0,r.Z)({},p._),{},{alignItems:"center",justifyContent:"space-between"},(0,p.o3)((0,p.Vh)(15),(0,p.Vh)(12),(0,p.Vh)(15),0)),(0,p.Cg)({direction:"top",style:"solid",color:"#eee",width:(0,p.Vh)(.5)})),m_ip_add_container:(0,r.Z)((0,r.Z)({},p._),{},{backgroundColor:"#fff",borderWidth:(0,p.Vh)(.5),borderColor:"#2698F7",borderStyle:"solid",borderRadius:(0,p.Vh)(4),width:(0,p.Vh)(103),height:(0,p.Vh)(36),alignItems:"center",justifyContent:"center"}),m_ip_change_button_wrapper:(0,r.Z)((0,r.Z)({},p._),(0,p.Cg)({direction:"top",width:.5,style:"solid",color:"rgba(184,198,217,0.3)"})),m_ip_add_button:{marginLeft:2,alignItems:"center",lineHeight:(0,p.Nv)(18),color:"#0066f6",fontSize:13},error_info:(0,r.Z)((0,r.Z)({},p._),{},{justifyContent:"space-between",paddingRight:(0,p.Vh)(12)}),error_icon:{marginRight:(0,p.Vh)(4)},error_text:{color:"#F21500",fontSize:(0,p.Vh)(13),lineHeight:(0,p.Nv)(17),letterSpacing:(0,p.Vh)(-.3)},m_passenger_edit:(0,r.Z)({},p._)},H=(0,d.Z)(G),z=n(91325),U=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tipInfo,r=t.insuredGroup,o=t.handleOpenInsured,i=t.insuredInfos,a=t.passengerModal,s=t.logOptions,d=r.choice,h=r.dChoice,f=r.syncChoice,g=r.CardInfo,m=r.insuranceId,v=(0,N.Q4)(a),x=v.list,b=v.count,Z=(0,z.O)(a),I=d-x.length>0&&Z,S=d-((null===h||void 0===h?void 0:h.length)||0),P=f.length>=x.length;return(0,y.jsxs)(l.G7,{style:H.m_insured_person,children:[(0,y.jsxs)(l.G7,{style:H.m_ip_top,children:[(0,y.jsx)(l.G7,{style:H.m_ip_left,children:(0,y.jsx)(l.xv,{style:(0,p.wh)([H.m_left_name,H.m_font_15]),children:"\u88ab\u4fdd\u4eba"})}),(0,y.jsxs)(l.G7,{style:H.m_ip_right,children:[i&&i.length>0?i.map((function(t,n){var r=e.convertInsuredInfo(t,{CardInfo:g,syncChoice:f},m),o=r.isFromPassenger,a=r.isInitDefect,d=!o||a;return(0,y.jsxs)(u.Z,{style:n!==i.length-1?(0,p.wh)([H.m_ip_passenger,H.m_border]):H.m_ip_passenger,onClick:d?e.handleEdit.bind(e,t):function(){},log:function(){return(0,_.sO)("tkt_insurance_infoflow_edit_click",s)},children:[(0,y.jsx)(T,{policyInfo:r,type:w.u.Insured}),d?(0,y.jsx)(l.G7,{style:H.m_passenger_edit,children:(0,y.jsx)(c.Z,{type:"edit",size:42,color:"#111"})}):null]},t.PassengerID)})):b>0?(0,y.jsx)(l.G7,{style:H.error_info,children:(0,y.jsx)(l.xv,{style:H.error_text,children:"".concat(n)})}):null,P&&I&&S?(0,y.jsxs)(u.Z,{style:H.m_ip_bottom_container,onClick:o,log:function(){return(0,_.sO)("tkt_insurance_button_edit_click",s)},children:[(0,y.jsx)(l.G7,{style:H.m_ip_error_container,children:(0,y.jsx)(C.s.Consumer,{children:function(e){return(0,y.jsx)(k.Z,{errorInfo:{err:"\u8bf7\u8865\u5145".concat(S,"\u4e2a\u88ab\u4fdd\u4eba")},from:"policy",line_style:{height:0},info_style:{marginTop:0}})}})}),(0,y.jsx)(c.Z,{type:"forward",size:32,color:"#111"})]}):null]})]}),P&&I&&!S?(0,y.jsx)(u.Z,{style:H.m_ip_change_button_wrapper,onClick:o,log:function(){return(0,_.sO)("tkt_insurance_button_edit_click",s)},children:(0,y.jsx)(l.xv,{style:H.m_ip_change_button,children:"\u66f4\u6362\u88ab\u4fdd\u4eba"})}):null]})}}]),n}(B),q=n(48118),W=n(30492),K=W.Z,J=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e,t=this.props,r=t.policyInfo,o=t.policyholderGroup,i=t.policyHolderTip,a=t.count,s=t.resourceCount,c=t.insuredGroup,d=t.insuredInfos,h=t.insuredTip,f=t.needRealName,g=t.passengerModal,m=t.handleOpenPolicyholder,v=t.handleOpenInsured,_=t.handleEditInsured,x=t.logOptions,b=t.isAgreeChild,Z=t.onChangeAgree,I=t.ABTest,C=t.clauseShowPosition,k=t.isClauseError,w=t.setRef,T=t.clauseLogs,S=this.judgeHide({needRealName:f,insuredGroup:c,policyholderGroup:o,insuredInfos:d}),P=!(null===C||void 0===C||null===(e=C.insurance)||void 0===e||!e.isShow);return I&&P&&(K=n(99840).Z),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(l.G7,{style:O.m_insurance_extra,children:[f?(0,y.jsx)(U,{insuredGroup:c,insuredInfos:d,tipInfo:h,needCount:a,passengerModal:g,handleOpenInsured:v,handleEditInsured:_,logOptions:x}):null,S?null:(0,y.jsxs)(l.G7,{style:(0,p.wh)([f?O.m_insurance_marginTop:{},O.m_insurance_radius]),children:[(0,y.jsx)(R,{policyholderGroup:o,passengerInfo:r,tipInfo:i,handleOpenPolicyholder:m,logOptions:x}),s>1&&(0,y.jsxs)(l.G7,{style:O.m_insurance_partner,children:[(0,y.jsx)(l.JO,{type:"information",size:26,color:"#00B87A"}),(0,y.jsx)(l.xv,{style:O.m_insurance_partner_text,children:"\u4fdd\u5355\u9002\u7528\u4e8e\u540c\u884c".concat(s,"\u4eba")})]})]})]}),I&&P&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.G7,{style:O.m_insurance_separator}),(0,y.jsx)(u.Z,{id:"clause",ref:function(e){return w&&w("clause",e)},style:O.m_insurance_clause_container,children:(0,y.jsx)(K,{isAgree:b,onChangeAgree:Z,fstyle:I?q.Le:{},clauseText:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f",ABTest:I,isError:k,logs:T,position:"\u4fdd\u9669"})})]})]})}}]),r}(F),X=n(2446),Q=n(57113),$=n(35409),Y=n(79301),ee=n(95308),te=n(50221),ne=n(75014),re=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),r.jumpUrl=r.jumpUrl.bind((0,P.Z)(r)),r}return(0,i.Z)(n,[{key:"jumpUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.push(e)}}]),n}(m.ZP),oe=n(28570),ie=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,L.Z)((0,P.Z)(r),"handleClickUrl",(function(e){(0,oe.VF)(e)})),r}return(0,i.Z)(n)}(m.ZP),ae={m_detail_link_wrapper:{color:"#333",marginTop:(0,p.Vh)(16),fontSize:(0,p.Vh)(14)},m_link:{color:"#0066f6"},flex_inline:(0,r.Z)((0,r.Z)({},p._),{},{flexWrap:"wrap"})},se=(0,d.Z)(ae),le=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.name,o=t.detailUrl,i=t.clauseUrl;return o||i?(0,y.jsxs)(l.G7,{className:"m_detail_link_wrapper ".concat(n||""),style:(0,p.wh)([se.m_detail_link_wrapper]),children:[o&&(0,y.jsxs)(l.G7,{style:se.flex_inline,children:[(0,y.jsx)(l.xv,{children:"\u8be6\u7ec6\u4fe1\u606f\u8bf7\u89c1"}),(0,y.jsx)(l.Au,{onClick:function(){return e.handleClickUrl(o)},children:(0,y.jsx)(l.xv,{style:se.m_link,children:r})})]}),i&&(0,y.jsxs)(l.G7,{style:se.flex_inline,children:[(0,y.jsx)(l.xv,{children:"\u8bf7\u4ed4\u7ec6\u9605\u8bfb"}),(0,y.jsx)(l.Au,{onClick:function(){return e.handleClickUrl(i)},children:(0,y.jsx)(l.xv,{style:se.m_link,children:" \u4fdd\u9669\u6761\u6b3e\uff08\u53ca\u5907\u6848\u53f7)"})}),(0,y.jsx)(l.xv,{children:"\u548c\u5176\u4e2d\u7684\u514d\u9664\u8d23\u4efb\u3002"})]})]}):null}}]),n}(ie),ce={m_insurance_detail_poplayer:{marginBottom:(0,p.Vh)(40),paddingTop:(0,p.Vh)(22),paddingRight:(0,p.Vh)(12),paddingBottom:(0,p.Vh)(25),paddingLeft:(0,p.Vh)(12)},m_detail_desc:{marginBottom:(0,p.Vh)(25)},m_desc_title:{marginBottom:(0,p.Vh)(12),fontSize:(0,p.Vh)(16),fontWeight:"700",color:"#333",display:"flex"},m_desc_table:{width:"100%"},m_desc_link:{marginTop:(0,p.Vh)(16),color:"#333",fontSize:(0,p.Vh)(14)},m_rules_title:{marginBottom:(0,p.Vh)(12),fontSize:(0,p.Vh)(16),fontWeight:"700",color:"#333"},m_rules_list:{marginBottom:(0,p.Vh)(25),width:(0,p.Vh)(350),color:"#333",fontSize:(0,p.Vh)(14)},m_text:{fontSize:(0,p.Vh)(14),lineHeight:(0,p.Nv)((0,p.Vh)(21)),marginBottom:(0,p.Vh)(8),color:"#333"}},ue=(0,d.Z)(ce),de=(0,d.Z)({p:{marginTop:(0,p.Vh)(0),marginBottom:(0,p.Vh)(8)},a:{color:"#007FE9",textDecorationLine:"none"},strong:{fontWeight:"600"}}),pe=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.insuranceInfo,n=t||{},r=n.coverageList,o=n.detailUrl,i=n.clauseUrl,a=n.insuranceRules,s=n.name,c=(0,h.cY)()?{paddingBottom:20}:{};return(0,y.jsxs)(l.G7,{style:ue.m_insurance_detail_poplayer,children:[(0,y.jsxs)(l.G7,{style:ue.m_detail_desc,children:[(0,y.jsx)(l.xv,{style:ue.m_desc_title,children:"\u4fdd\u9669\u9879\u76ee\u548c\u4fdd\u9669\u9650\u989d"}),(0,y.jsx)(l.G7,{style:ue.m_desc_table,children:(0,y.jsx)(ne.Z,{tableData:r,fstyle:{m_text:ue.m_text}})}),(0,y.jsx)(le,{style:ue.m_desc_link,name:s,detailUrl:o,clauseUrl:i})]}),(0,y.jsxs)(l.G7,{style:(0,p.wh)([c]),children:[(0,y.jsx)(l.xv,{style:ue.m_rules_title,children:"\u6295\u4fdd\u89c4\u5219"}),(0,y.jsx)(l.G7,{style:ue.m_rules_list,children:(0,y.jsx)(te.Z,{baseFontStyle:ue.m_text,tagsStyles:de,html:a,renderers:{a:function(t,n){var r=t||{},o=r.href;return(0,y.jsx)(l.xv,{onPress:function(){return e.jumpUrl(o)},children:n})}}})})]})]})}}]),n}(re),he=n(3386),fe=n(78277),ge=n(83630),me=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,L.Z)((0,P.Z)(i),"editId",void 0),(0,L.Z)((0,P.Z)(i),"handleCheck",(function(){var e=i.props,t=e.insuranceInfo,n=void 0===t?{}:t,r=e.changeInsurance,o=e.insuranceId,a=n.id;o?r():r(a)})),(0,L.Z)((0,P.Z)(i),"handleOpenDetail",(function(){var e=i.props.insuranceInfo;X.ZP.show({props:{name:"policyDetailPopLayer",title:"\u4fdd\u9669\u8be6\u60c5",scrollHeight:"100%",popHeight:"70%"},child:pe,childProps:{insuranceInfo:e}})})),(0,L.Z)((0,P.Z)(i),"handleOpenPersonPoplayer",(function(e){var t=i.props,n=t.passengerList,o=t.policyholderGroup,a=t.insuredGroup,s=e===w.u.Insured,l=s?w.u.Insured:w.u.policyHolder;(0,fe.Z)({currentGroup:(s?(0,r.Z)((0,r.Z)({},a),{},{name:"\u88ab\u4fdd\u4eba"}):o)||{},passengerList:n,listType:s?ge.r8.insured:ge.r8.policyholder,onSelect:s?i.handleSelectInsured:i.handleSelect,handleToEdit:function(e,t){i.handleToEdit(e,t,l)},typeText:s?"\u88ab\u4fdd\u4eba":"\u6295\u4fdd\u4eba",name:s?"insuredPopLayer":"policyHolderPopLayer",insuranceType:l,title:s?"\u9009\u62e9\u88ab\u4fdd\u4eba":"\u9009\u62e9\u6295\u4fdd\u4eba",isShowHeader:!s})})),(0,L.Z)((0,P.Z)(i),"handleToEdit",(function(e,t,n){var r=i.props,o=r.clearInsuranceError,a=r.policyholderGroup,s=r.insuredGroup,l=n===w.u.Insured;(0,he.Z)({groupInfo:(l?s:a)||{},passengerInfo:t||{},listType:l?ge.r8.insured:ge.r8.policyholder,onSave:l?i.handleSaveInsuredEditPoplayer:i.handleSaveEditPoplayer,name:l?"insuredEditPage":"policyEditPage",direction:"right",configTitle:l?"\u88ab\u4fdd\u4eba":"\u6295\u4fdd\u4eba",clearInsuranceError:o}),i.setState({editInfo:t})})),(0,L.Z)((0,P.Z)(i),"goToList",(function(){var e=i.props.passengerList;e&&e.length?i.handleOpenPersonPoplayer(w.u.policyHolder):i.handleToEdit(null,{},w.u.policyHolder)})),(0,L.Z)((0,P.Z)(i),"handleOpenInsured",(function(){var e=i.props.passengerList;e&&e.length?i.handleOpenPersonPoplayer(w.u.Insured):i.handleToEdit(null,null,w.u.Insured)})),(0,L.Z)((0,P.Z)(i),"handleCloseEditPopLayer",(function(){X.ZP.hide("policyEditPage")})),(0,L.Z)((0,P.Z)(i),"handleCloseInsurancePoplayer",(function(){X.ZP.hide("policyConfirmPoplayer"),i.props.handleInsurancePoplayer&&i.props.handleInsurancePoplayer(!1)})),(0,L.Z)((0,P.Z)(i),"handleSaveEditPoplayer",function(){var e=(0,ee.Z)((0,Y.Z)().mark((function e(t){var n,r,o,a,s,l;return(0,Y.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.props,r=n.policyholderGroup,o=n.addInsurance,a=r&&r.dChoice[0],s=r&&r.insuranceId||"",i.editId=t&&t.PassengerID&&String(t.PassengerID)||1,!o){e.next=10;break}return e.next=7,o(t,ge.r8.policyholder,s);case 7:if(l=e.sent,!0!==l){e.next=10;break}return e.abrupt("return",!0);case 10:String(t&&t.PassengerID)===String(a)&&i.setState({policyholderInfo:t}),i.handleCloseEditPopLayer();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,L.Z)((0,P.Z)(i),"handleSaveInsuredEditPoplayer",function(){var e=(0,ee.Z)((0,Y.Z)().mark((function e(t){var n,r,o,a,s,l;return(0,Y.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.props,r=n.addInsurance,o=n.insuredGroup,a=void 0===o?{}:o,i.editId=t&&t.PassengerID&&String(t.PassengerID)||1,!r){e.next=9;break}return s=a.insuranceId,e.next=6,r(t,ge.r8.insured,s);case 6:if(l=e.sent,!0!==l){e.next=9;break}return e.abrupt("return",!0);case 9:X.ZP.hide("insuredEditPage");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.editId="",i}return(0,i.Z)(n,[{key:"handleSelect",value:function(e){}},{key:"handleSelectInsured",value:function(e){}}]),n}(m.ZP),ve=n(68983),_e=n(88327),ye=n(83692),xe=n(78893),be=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,L.Z)((0,P.Z)(i),"cName",void 0),(0,L.Z)((0,P.Z)(i),"state",void 0),(0,L.Z)((0,P.Z)(i),"getPolicyInfo",(function(e,t){var n=(e||[]).find((function(e){return String(e.PassengerID)===String(t)}));return n})),(0,L.Z)((0,P.Z)(i),"handleSelect",(function(e){var t=i.props.passengerList,n=String(e[0]);i.setState({policyholderInfo:i.getPolicyInfo(t,n)}),i.props.changeInsurancePassenger&&i.props.changeInsurancePassenger(n),X.ZP.hide("policyHolderPopLayer")})),(0,L.Z)((0,P.Z)(i),"handleSelectInsured",(function(e){var t=i.props.passengerList;i.setState({insuredInfos:i.getInsuredInfos(t,e)}),i.props.changeInsuredPerson&&i.props.changeInsuredPerson(e),X.ZP.hide("insuredPopLayer")})),(0,L.Z)((0,P.Z)(i),"resetPolicyholder",(function(e,t){var n=i.props.changeInsurancePassenger;n&&n(e,(function(e){return i.updatePopLayer((0,r.Z)((0,r.Z)({},t),{},{policyholderGroup:e}))}))})),i.cName="insurance",i.state={isShowTravelerEdit:!1,policyholderInfo:null,editInfo:null,insuredInfos:null},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){Q.Z.add("policyDetailPopLayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("insuredPopLayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("insuredEditPage",$.Z,{props:{isOpened:!1}}),Q.Z.add("policyHolderPopLayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("policyEditPage",$.Z,{props:{isOpened:!1}}),Q.Z.add("policyConfirmPoplayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("insuranceRepeatPoplayer",$.Z,{props:{isOpened:!1}})}},{key:"componentWillReceiveProps",value:function(e){var t=e.passengerList,n=e.policyholderGroup,r=e.insuredGroup,o=e.needRealName,i=e.insuranceId,a=e.checkClauseShowPosition,s=n&&n.dChoice[0],l=r&&r.dChoice,c=this.getPolicyInfo(t,s),u=(0,N.JV)(c,["birth"]),d=u.birth;if(c&&d&&!(0,ye.uo)(d)){var p;if(o){var h=(0,_e.td)(t,{insuredGroup:r});p=h[0]}this.resetPolicyholder(p,e)}else this.setState({policyholderInfo:c,insuredInfos:this.getInsuredInfos(t,l)});this.editId&&(0,ve.nK)(this.props.passengerList,e.passengerList,this.editId)&&this.updatePopLayer(e),this.props.ABTest&&(this.props.insuranceId!==i||(0,xe.tR)(this.props,e))&&a&&a()}},{key:"getInsuredInfos",value:function(e,t){var n=[];return(t||[]).forEach((function(t){var r=(0,N.ly)(t,e);r&&n.push(r)})),n}},{key:"updatePopLayer",value:function(e){var t="policyHolderPopLayer",n="insuredPopLayer",o=e.passengerList,i=e.policyholderGroup,a=e.insuredGroup,s=function(e,t){var n=Q.Z.get(e).assistComponent,i=(0,r.Z)((0,r.Z)({},n.childProps),{},{plist:o,groupInfo:t||{}});Q.Z.change(e,(0,r.Z)((0,r.Z)({},n),{},{childProps:i}))};Q.Z.get(t)&&s(t,i),Q.Z.get(n)&&s(n,a),this.editId=""}}]),n}(me),Ze={m_insurance:{paddingBottom:(0,p.Vh)(12),paddingTop:(0,p.Vh)(16)},m_traveler_list:{paddingTop:(0,p.Vh)(0)}},Ie=(0,d.Z)(Ze),Ce=n(73435),ke=function(e){var t,n,r,o=e||{},i=o.isCancelInsurance,a=o.needRealName,s=o.insuranceInfo,l=o.resourceId;return i?(r="\u53d6\u6d88\u9669",t=(null===s||void 0===s?void 0:s.price)||0,n=1):a?(r="\u9694\u79bb",t=(0,Ce.dC)((null===s||void 0===s?void 0:s.price)||0,(null===s||void 0===s?void 0:s.count)||0),n=(null===s||void 0===s?void 0:s.count)||0):(r="\u610f\u5916\u9669",t=(0,Ce.dC)((null===s||void 0===s?void 0:s.price)||0,(null===s||void 0===s?void 0:s.count)||0),n=(null===s||void 0===s?void 0:s.count)||0),{insuranceprice:t,insurancenumber:n,insuranceId:r,resourceId:l}},we=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.insuranceInfo,n=e.cancelTip,o=e.policyHolderTip,i=e.policyholderGroup,a=e.setRef,s=e.insuranceId,c=e.logs,d=void 0===c?{}:c,p=e.insuredGroup,h=e.insuredTip,f=e.needRealName,g=e.passengerModal,m=e.passengerList,v=e.isCancelInsurance,b=e.resourceId,Z=e.isAgreeChild,I=e.onChangeAgree,C=e.ABTest,k=e.clauseShowPosition,w=e.isClauseError,T=e.clauseLogs,S=t||{},P=S.name,L=S.tags,N=S.price,j=S.countUnitTxt,D=S.baseUnitTxt,V=S.count,E=S.resourceCount,R=this.state,A=R.policyholderInfo,F=R.insuredInfos,M=ke({isCancelInsurance:v,needRealName:f,insuranceInfo:t,resourceId:b}),O=d.clickTraceLog;return t?(0,y.jsx)(u.Z,{activeOpacity:1,log:function(){return(0,_.sO)("tkt_wri_bx_card_click",(0,r.Z)({keyid:"190736"},M))},testID:d.insuranceExposureLog(M),ref:function(e){return a&&a("insurance",e)},children:(0,y.jsxs)(l.G7,{style:Ie.m_insurance,id:"insurance",children:[(0,y.jsx)(x,{insuranceName:P,tags:L,price:N,countUnitTxt:j,baseUnitTxt:D,cancelTip:n,isChecked:t.id==s,handleCheck:this.handleCheck,handleOpenDetail:this.handleOpenDetail,logOptions:M,clickTraceLog:O}),t.id==s&&(0,y.jsx)(J,{count:V,resourceCount:E,needRealName:f,insuredInfos:F,insuredGroup:p||{},insuredTip:h,policyInfo:A,policyholderGroup:i||{},policyHolderTip:o,passengerModal:g,handleOpenPolicyholder:this.goToList,handleOpenInsured:this.handleOpenInsured,handleEditInsured:this.handleToEdit,logOptions:M,isAgreeChild:Z,onChangeAgree:I,ABTest:C,clauseShowPosition:k,isClauseError:w,setRef:a,passengerList:m,clauseLogs:T})]})}):null}}]),n}(be)},32138:function(e,t,n){n.d(t,{u:function(){return r}});var r=function(e){return e[e["Insured"]=1]="Insured",e[e["policyHolder"]=2]="policyHolder",e}({})},93001:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(298),c=n(9353),u=n(17366),d={m_header:{position:"relative",width:"100%"},m_desc:{position:"absolute",top:(0,u.Vh)(36),left:(0,u.Vh)(20),lineHeight:(0,u.Nv)((0,u.Vh)(20)),fontSize:(0,u.Vh)(18),fontWeight:(0,u.Ue)("500"),letterSpacing:1,color:"#20a678"},m_close_btn:(0,l.Z)({position:"absolute",right:(0,u.Vh)(18),top:(0,u.Vh)(11),width:(0,u.Vh)(24),height:(0,u.Vh)(24)},u._)},p=(0,c.Z)(d),h=n(56034),f=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(h.ZP),g=n(33392),m=n(71557),v=n(59201),_=n(88592),y=n(2269),x=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.headerCloseClick,n=e.linkUrl,r=e.desc;e.logs;return(0,y.jsxs)(s.G7,{style:p.m_header,children:[(0,y.jsx)(g.Z,{url:n,height:88,width:"100%"}),(0,y.jsx)(s.xv,{style:p.m_desc,children:r}),(0,y.jsx)(v.Z,{style:p.m_close_btn,log:function(){return(0,_.mD)("assuranceclose-click")},onClick:t,children:(0,y.jsx)(m.Z,{type:"iconCancel",size:40,color:"#8a8a8e"})})]})}}]),n}(f)},78400:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(298),c=n(9353),u=n(17366),d={m_header:{position:"relative",width:"100%"},m_close_btn:(0,l.Z)({position:"absolute",right:(0,u.Vh)(17),top:(0,u.Vh)(11),width:(0,u.Vh)(24),height:(0,u.Vh)(24)},u._),m_content:{paddingRight:(0,u.Vh)(16),paddingLeft:(0,u.Vh)(16),backgroundColor:"#fff",display:"flex",flexDirection:"column",alignItems:"center"},m_title:{display:"flex",color:"#333333",fontSize:(0,u.Vh)(20),fontWeight:"600",marginTop:(0,u.Vh)(12),textAlign:"center"},m_ic_tags:{display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",overflow:"hidden",marginTop:(0,u.Vh)(3),height:(0,u.Vh)(18)},m_tag:(0,l.Z)({},u._),m_separate:{marginRight:(0,u.Vh)(8),width:(0,u.Vh)(.5),height:(0,u.Vh)(11),backgroundColor:"#ccc"},m_tag_text:(0,l.Z)((0,l.Z)({},u._),{},{marginRight:(0,u.Vh)(8),height:(0,u.Vh)(18),lineHeight:(0,u.Nv)((0,u.Vh)(18)),fontSize:(0,u.Vh)(12),color:"#666"}),m_tag_highlight:{color:"#0066f6"},m_price:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"baseline",marginTop:(0,u.Vh)(10),marginBottom:(0,u.Vh)(28)},m_price_symbol:{marginRight:(0,u.Vh)(4),fontSize:(0,u.Vh)(12),color:"#ff6600",fontWeight:(0,u.Ue)("500")},m_price_content:{fontSize:(0,u.Vh)(22),color:"#ff6600",fontWeight:(0,u.Ue)("500")},m_price_unit:{marginLeft:(0,u.Vh)(4),fontSize:(0,u.Vh)(12),fontWeight:"300",color:"#666"},m_btns:(0,l.Z)((0,l.Z)({},u._),{},{justifyContent:"space-between",paddingTop:(0,u.Vh)(8),paddingRight:(0,u.Vh)(16),paddingBottom:(0,u.Vh)(20),paddingLeft:(0,u.Vh)(16)},(0,u.Wn)({hShadow:6,vShadow:6,blur:16,spread:2,color:"rgba(0, 0, 0, 0.08)"})),m_btn:(0,l.Z)((0,l.Z)({borderRadius:(0,u.Vh)(6),height:(0,u.Vh)(44),flex:1},u._),{},{justifyContent:"center"}),m_btn_no:(0,l.Z)((0,l.Z)({},(0,u.Cg)({width:(0,u.Vh)(.5),style:"solid",color:"#0066f6"})),{},{backgroundColor:"#fff"}),m_btn_no_color:{color:"#0066f6",fontSize:(0,u.Vh)(17),fontWeight:"600"},m_btn_yes:{backgroundColor:"#0066f6",marginLeft:(0,u.Vh)(11)},m_btn_yes_color:{color:"#fff",fontSize:(0,u.Vh)(17),fontWeight:"600"}},p=(0,c.Z)(d),h=n(56034),f=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(h.ZP),g=n(59201),m=n(88592),v=n(2269),_=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.tags,r=e.price,o=e.handleCancelClick,i=e.handleConfirmClick,a=e.logs,l=void 0===a?{}:a;return(0,v.jsxs)(s.G7,{className:"confirm_poplayer",testID:l.insurancePopExposureLog,children:[(0,v.jsxs)(s.G7,{style:p.m_content,children:[(0,v.jsx)(s.xv,{style:p.m_title,children:"\u6dfb\u52a0\u300c".concat(t||[],"\u300d")}),(0,v.jsx)(s.G7,{style:p.m_ic_tags,children:(n||[]).map((function(e,t){var n=e.text,r=e.highLight;return(0,v.jsxs)(s.G7,{style:p.m_tag,children:[t?(0,v.jsx)(s.xv,{style:p.m_separate}):null,(0,v.jsx)(s.xv,{style:(0,u.wh)([p.m_tag_text,r?p.m_tag_highlight:null]),children:n})]})}))}),(0,v.jsxs)(s.G7,{style:p.m_price,children:[(0,v.jsx)(s.xv,{style:p.m_price_symbol,children:"\xa5"}),(0,v.jsx)(s.xv,{style:p.m_price_content,children:r}),(0,v.jsx)(s.xv,{style:p.m_price_unit,children:"/\u4eba"})]})]}),(0,v.jsxs)(s.G7,{style:p.m_btns,children:[(0,v.jsx)(g.Z,{style:(0,u.wh)([p.m_btn,p.m_btn_no]),onClick:o,log:function(){return(0,m.mD)("needassurance-click",{yes_or_no:"no"})},children:(0,v.jsx)(s.xv,{style:p.m_btn_no_color,children:"\u5426"})}),(0,v.jsx)(g.Z,{style:(0,u.wh)([p.m_btn,p.m_btn_yes]),onClick:i,log:function(){return(0,m.mD)("needassurance-click",{yes_or_no:"yes"})},children:(0,v.jsx)(s.xv,{style:p.m_btn_yes_color,children:"\u662f"})})]})]})}}]),n}(f)},70614:function(e,t,n){n.d(t,{U:function(){return r},g:function(){return o}});var r=function(e){return e["PassengerMobile"]="PassengerMobile",e["ContactMobile"]="ContactMobile",e["Null"]="Null",e}({}),o=function(e){return e["titlebarBack"]="titlebarBack",e["titlebarTitle"]="titlebarTitle",e["titlebarLogin"]="titlebarLogin",e["titlebar"]="titlebar",e["themeColor"]="themeColor",e["payBtnColor"]="payBtnColor",e["insurance"]="insurance",e["additionalSale"]="additionalSale",e["im"]="im",e["mindTour"]="mindTour",e["passengerColor"]="passengerColor",e["naquhua"]="naquhua",e}({})},83427:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(56034)),c=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"onClick",value:function(){this.push("https://m.ctrip.com/webapp/sp/serviceensure?bu=travel&sub=tickets")}}]),n}(l.ZP),u=n(33392),d=n(59201),p=n(88592),h=n(56569),f=n(17366),g=n(9353),m={m_mind_tour:(0,r.Z)((0,r.Z)((0,r.Z)({height:(0,f.Vh)(120)},f._7),(0,f.e6)(0,(0,f.Vh)(-12))),{},{marginBottom:(0,f.Vh)(12)})},v=(0,g.Z)(m),_=n(2269),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.logs,n=e.traceLog,o=e.imageHeight;return(0,_.jsx)(d.Z,{onClick:this.onClick.bind(this),log:t||function(){return(0,p.mD)("security-click")},testID:"mindtour",devTraceData:n,style:v.m_mind_tour,className:"m_mind_tour_normal",children:(0,_.jsx)(u.Z,{style:(0,r.Z)((0,r.Z)({},f._7),{},{width:"100%"}),width:h.Db.get("window").width,height:o||(0,f.Vh)(120),url:"https://dimg04.c-ctrip.com/images/0AS0i12000a6czkzc8B31.png_.webp"})})}}]),n}(c)},57129:function(e,t){t["Z"]=function(){return null}},58902:function(e,t,n){n.d(t,{Z:function(){return oe}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=n(90201),l=n(72747),c=n(71557),u=n(4962),d=n(298),p=n(81876),h=n(45023),f=n(2446),g=n(56034),m=n(79214),v=n(59201),_=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(g.ZP),y=n(9353),x=n(17366),b={m_append_radio_item:(0,d.Z)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:12,paddingRight:16,paddingBottom:12,borderBottomWidth:2,borderBottomColor:"#ececec"},(0,x.Cg)({direction:"bottom",style:"solid"})),m_append_radio_item_text:{color:"#333",fontSize:16,lineHeight:(0,x.Nv)(40)},m_append_radio_item_text_selected:{color:"#00f"}},Z=(0,y.Z)(b),I=n(2269),C=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.label,r=e.isSelected;e.item;return(0,I.jsxs)(v.Z,{style:Z.m_append_radio_item,onClick:function(){},children:[(0,I.jsx)(l.xv,{style:(0,x.wh)([Z.m_append_radio_item_text,r?Z.m_append_radio_item_text_selected:null]),children:n}),"radio"===t&&r?(0,I.jsx)(c.Z,{type:"radiocheck",size:32,color:"#0066f6"}):null]})}}]),n}(_),k=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,h.Z)((0,p.Z)(o),"getHotelList",(function(e){var t=o.props.hotelInfo.labelList,n=void 0===t?[]:t,r=n.find((function(e){return e.id==m.o.hotelName}));return e.map((function(e){var t=r?e[m.o.hotelName]:e[m.o.enHotelName],n=r?e[m.o.enHotelName]:e[m.o.hotelName];return(0,d.Z)((0,d.Z)({},e),{},{renderHotelName:"".concat(t||n).concat(t&&n?"(".concat(n,")"):"")})}))})),o}return(0,o.Z)(n)}(g.ZP),w={m_hotel_list:{paddingRight:(0,x.Vh)(16),paddingLeft:(0,x.Vh)(16),paddingBottom:(0,x.Vh)(26)},m_hotel_add_wrap:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:(0,x.Vh)(44),borderRadius:(0,x.Vh)(6),borderWidth:(0,x.Vh)(2),borderStyle:"solid",borderColor:"#0066f6",backgroundColor:"#fff"},m_hotel_add_text:{marginLeft:(0,x.Vh)(8),fontSize:(0,x.Vh)(17),color:"#666"},m_append_hotel_poplayer_subtittle:{fontSize:(0,x.Vh)(14),color:"#999",marginTop:(0,x.Vh)(16),marginBottom:(0,x.Vh)(4)}},T=(0,y.Z)(w),S=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.type,e.hotelInfo),n=e.groupCode,r=e.onClickCallback,o=t||{},i=o.bookingHotelList,a=o.searchHotelList;return(0,I.jsxs)(l.G7,{style:T.m_hotel_list,children:[(0,I.jsxs)(v.Z,{style:T.m_hotel_add_wrap,id:"hotel_add",onClick:r,children:[(0,I.jsx)(c.Z,{type:"addcirclefill3",size:36,color:"#0066f6"}),(0,I.jsx)(l.xv,{style:T.m_hotel_add_text,children:"starthotelinfo"===n?"\u6dfb\u52a0\u51fa\u53d1\u9152\u5e97":"\u6dfb\u52a0\u5230\u8fbe\u9152\u5e97"})]}),(0,I.jsxs)(l.G7,{children:[a&&a.length?(0,I.jsx)(l.xv,{style:T.m_append_hotel_poplayer_subtittle,children:"\u60a8\u67e5\u8be2\u8fc7\u7684\u9152\u5e97\uff1a"}):null,a?this.getHotelList(a).map((function(e,t){return(0,I.jsx)(C,{type:"radio",label:e.renderHotelName,value:e.id+t,item:e},e.id)})):null,i&&i.length?(0,I.jsx)(l.xv,{style:T.m_append_hotel_poplayer_subtittle,children:"\u60a8\u5df2\u9884\u8ba2\u7684\u9152\u5e97\uff1a"}):null,i?this.getHotelList(i).map((function(e,t){return(0,I.jsx)(C,{type:"radio",label:e.renderHotelName,value:e.id+t,item:e},e.id)})):null]})]})}}]),n}(k),P=n(79301),L=n(22276),N=n(95308),j=n(79522),D=function(e,t,n){return{request:Object.assign({},e,t),actionUrl:"/restapi/soa2/14580/json/getHotelAndRangeInfo?_fxpcqlniredt=".concat(n)}};function V(e,t){if(!e||e&&!e.length)return[];var n=[],r=0;e=e.filter((function(e){var t=e.localtionType,n=e.id;return!t||!n||"TOPHOTEL"===t&&!!n}));var o={},i=[];e.map((function(e){var t=e.id;o[t]&&t||(t&&(o[t]=!0),i.push(e))}));var a=t?20:10;return n=i.slice(0,a).reduce((function(e,t){return r++,e.push((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({},m.o.hotelName,t.namecn||t.name),m.o.enHotelName,t.nameEn),m.o.hotelAddress,t.address),m.o.enHotelAddress,t.address),"id",t.id?t.id:r),"positions",t.position||{})),e}),[]),n}var E=function(){var e=(0,N.Z)((0,P.Z)().mark((function e(t,n){var r,o,i,a,s,l,c,u;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.keyWord,o=void 0===r?"":r,i=n.destcityids,a=[D(t.header,{searchType:2,keyWord:o,siteId:i?"1_".concat(i):null},Math.random())],e.next=4,t.http({list:a,needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u67e5\u8be2\u9152\u5e97\u5217\u8868"}});case 4:if(s=e.sent,s&&s.length){e.next=7;break}return e.abrupt("return");case 7:return l=s[0].data,c=l.locationInfos,u=V(c),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,h.Z)((0,p.Z)(o),"state",void 0),(0,h.Z)((0,p.Z)(o),"onSubmit",(function(){var e=o.props,t=e.labelList,n=e.onSubmit,r=o.state.selectedList,i=[],a=!0;t.forEach((function(e,t){i[t]=r[t]?"":"\u8bf7\u586b\u5199".concat(e.name),a&&!r[t]&&(a=!1)})),a?n&&n(r,!0):o.setState({errorList:i})})),(0,h.Z)((0,p.Z)(o),"handleHotelRangeInfo",(function(e,t){var n=t.label,r=n.id==m.o.hotelName,i=Array.isArray(e)?e.map((function(e){var t=r?e[m.o.hotelName]:e[m.o.enHotelName],n=r?e[m.o.enHotelName]:e[m.o.hotelName];return(0,d.Z)((0,d.Z)({},e),{},{renderHotelName:["".concat(t||n).concat(t&&n?"(".concat(n,")"):""),e.hotelAddress||""]})})):[];o.setState({isShowPlayer:!0,hotelList:i})})),(0,h.Z)((0,p.Z)(o),"onSelectHotel",(function(e){var t=o.props,n=t.labelList,r=(t.tips,t.area,n.map((function(t){return e[t.id]}))),i=o.state.errorList,a=-1;r.forEach((function(e,t){e?i[t]="":a<0&&(a=t)})),r.push("null"),o.setState({selectedList:r,errorList:i,isShowPlayer:!1})})),o.state={isShowPlayer:!1,tipsHeight:0,hotelList:[],selectedList:e.value||[],errorList:[],keyword:"",tips:"",currentIndex:0},o}return(0,o.Z)(n,[{key:"setRangeTips",value:function(e){var t=e.isNeedVerify,n=e.selectedList,r=e.tips,o=n&&n.length?n[n.length-1]:null,i="";return t&&"false"==o?i=r:!t||o&&"null"!=o||(i="\u672c\u4ea7\u54c1\u4ec5\u63a5\u9001\u90e8\u5206\u6307\u5b9a\u7684\u9152\u5e97\u3002\u5982\u60a8\u5165\u4f4f\u7684\u9152\u5e97\u4e0d\u5728\u6b64\u8303\u56f4\u5185\uff0c\u8bf7\u5c31\u8fd1\u9009\u62e9\u3002"),i}},{key:"onHotelChange",value:function(){var e=(0,N.Z)((0,P.Z)().mark((function e(t,n,r){var o,i,a,s,l,c,u,d,p,h,f=this;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=this.state,i=o.selectedList,a=o.errorList,s=(0,L.Z)(i),l=(0,L.Z)(a),s[n]=r,r&&(l[n]=""),c=this.props,u=c.labelList,d=c.tips,p=c.isNeedVerify,u.length==i.length&&i.push(null),this.setState({selectedList:s,errorList:a,keyword:r,currentIndex:n,tips:this.setRangeTips({isNeedVerify:p,tips:d,selectedList:i})}),t.isHotelName&&r?(h=this.props.destcityids,(0,j.Ds)((0,N.Z)((0,P.Z)().mark((function e(){var n;return(0,P.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(f,{keyWord:r,destcityids:h});case 2:n=e.sent,f.handleHotelRangeInfo(n,{label:t});case 4:case"end":return e.stop()}}),e)}))),100)()):this.setState({isShowPlayer:!1});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),n}(g.ZP),A={m_append_add_hotel_input_hotel_name:{position:"relative",marginLeft:(0,x.Vh)(15),marginRight:(0,x.Vh)(15)},m_append_add_hotel_button:{display:"flex",flexDirection:"row",height:(0,x.Vh)(44),backgroundColor:"#0066f6",justifyContent:"center",alignItems:"center",borderRadius:(0,x.Vh)(6),marginTop:(0,x.Vh)(25),marginRight:(0,x.Vh)(15),marginLeft:(0,x.Vh)(15),color:"#fff"},m_append_add_hotel_button_text:{fontSize:(0,x.Vh)(17),fontWeight:(0,x.Ue)("500"),color:"#fff"},m_append_add_hotel_list:{width:"100%",zIndex:10,overflow:"scroll",backgroundColor:"#fff",paddingBottom:(0,x.Vh)(44)},m_select_item_container:{paddingLeft:(0,x.Vh)(0)},m_select_item_label:{lineHeight:(0,x.Nv)((0,x.Vh)(20))}},F=(0,y.Z)(A),M=n(11104),O=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.labelList,n=this.state,r=n.isShowPlayer,o=n.hotelList,i=n.keyword,a=n.selectedList,s=n.tips,c=n.errorList,d=n.currentIndex,p=r&&o&&o.length>0,h=null,f=!!t&&!!t.length&&t.map((function(t,n){return(0,I.jsx)(l.G7,{style:F.m_append_add_hotel_input_hotel_name,children:(0,I.jsx)(u.Z,{lable:t.name,placeholder:"\u8bf7\u586b\u5199",value:a[n]||"",onChange:e.onHotelChange.bind(e,t,n),errorTips:c[n],showClearIcon:!0})},t.id)}));if(p){var g=(0,I.jsx)(l.G7,{style:F.m_append_add_hotel_list,children:o.map((function(t){return(0,I.jsx)(M.Z,{onChange:e.onSelectHotel.bind(e,t),type:"",label:t.renderHotelName,value:t.id,isSelected:!1,keyword:i},t.id)}))});h=f.slice(0,d+1).concat(g)}else h=f;return(0,I.jsxs)(l.G7,{style:(0,x.wh)([F.m_hotel_edit,p?{width:"100%",overflow:"scroll"}:{}]),children:[!!s&&(0,I.jsx)(l.G7,{style:F.m_append_add_hotel_tips,children:(0,I.jsx)(l.xv,{style:F.m_append_add_hotel_tips_text,children:s})}),(0,I.jsx)(l.G7,{style:F.m_append_add_hotel_content,children:(0,I.jsx)(l.G7,{style:F.m_append_add_hotel_input_content,children:h})}),p?null:(0,I.jsx)(v.Z,{style:F.m_append_add_hotel_button,onClick:this.onSubmit,children:(0,I.jsx)(l.xv,{style:F.m_append_add_hotel_button_text,children:"\u5b8c\u6210"})})]})}}]),n}(R),B=function(e,t){if(!e||!e.length||!t||!t.length)return[];var n=[];return e.forEach((function(e){-1!=t.indexOf(e.value)&&n.push(e)})),n},G=function(e,t){var n=e||{},r=n.selectList,o=n.type;if(o==m.H.radio||o==m.H.multiSelect){var i=B(r,t);return(i||[]).map((function(e){return e.label})).join(" ")}if(o==m.H.hotelText){var a=e.hotelInfo||{},s=a.labelList,l=[];return s.forEach((function(e,n){t&&t[n]&&(!t[n-1]||t[n-1]&&t[n-1]!=t[n])&&l.push({name:t[n],isHotelName:e.isHotelName})})),l.length?l:null}return t};function H(e){var t=e.type,r=e.title,o=e.poplayerProps,i=void 0===o?{}:o,a=n(63651).Z,s=n(18427).Z;f.ZP.show({props:(0,d.Z)({name:"selectPoplayer",title:r,isShowHeader:"multiSelect"!==t,isScrollView:"multiSelect"!==t,renderOnshow:!0,Breath:s},i),child:a,childProps:(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},{title:"",closeIcon:{iconType:"iconCancel",isSvg:!0,size:24},onClickButton:function(){f.ZP.hide()},type:"radio",selectList:[],selectedList:[],onChange:function(){}}),e),i),{},{onCloseCallback:function(t){e.onCloseCallback&&e.onCloseCallback(t),f.ZP.hide(i.name||"selectPoplayer")}})})}var z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,r.Z)(this,n),o=t.call(this,e),(0,h.Z)((0,p.Z)(o),"state",void 0),(0,h.Z)((0,p.Z)(o),"onSelect",(function(){var e=o.props.appendInfo,t=e||{},n=t.type,r=t.hotelInfo,i=r||{},a=i.bookingHotelList,s=i.searchHotelList,l=i.hotelRange;"hotelList"===l?o.onClickHotelList(e):n!=m.H.hotelText||a&&a.length||s&&s.length?n==m.H.hotelText?o.handleOpenHotelListPopLayer():n!=m.H.multiSelect&&n!=m.H.radio||o.handleOpenSelect(e):o.handleOpenHotelEditPopLayer()})),(0,h.Z)((0,p.Z)(o),"handleOpenHotelEditPopLayer",(function(){var e=o.props.appendInfo,t=e||{},n=(t.type,t.groupCode,t.hotelInfo),r=t.value,i=n.labelList,a="\u6dfb\u52a0"+e.popLayerTitle||0;f.ZP.hide("hotelListPoplayer"),f.ZP.show({props:{name:"hotelEditPoplayer",title:a,popHeight:"90%"},child:O,childProps:{title:a,labelList:i,value:r,onSubmit:function(e){o.onChange(e),f.ZP.hide("hotelEditPoplayer")}}})})),(0,h.Z)((0,p.Z)(o),"onChange",(function(e){var t=o.props,n=t.appendInfo,r=void 0===n?{}:n,i=t.onChange,a=r.type;if(a===m.H.date||a===m.H.time){var s,l=null===(s=e.detail)||void 0===s?void 0:s.value;o.setState({value:l}),i&&i(l)}else{var c=G(o.props.appendInfo,e);o.setState({value:c}),i&&i(e)}}));var i=e.appendInfo,a=i||{},s=a.value,l=void 0===s?[]:s;return o.state={value:G(i,l)},o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.appendInfo,n=t||{},r=n.value,o=void 0===r?[]:r;this.setState({value:G(t,o)})}},{key:"isSelect",value:function(e){return[m.H.date,m.H.time,m.H.radio,m.H.multiSelect,m.H.hotelText].includes(e)}},{key:"isPoplayerSelector",value:function(e){return[m.H.radio,m.H.multiSelect,m.H.hotelText].includes(e)}},{key:"handleOpenHotelListPopLayer",value:function(){var e=this.props.appendInfo,t=e||{},n=t.type,r=t.hotelInfo,o=t.groupCode,i=t.popLayerTitle;f.ZP.show({props:{name:"hotelListPoplayer",title:i},child:S,childProps:{hotelInfo:r,type:n,groupCode:o,onClickCallback:this.handleOpenHotelEditPopLayer}})}},{key:"handleOpenSelect",value:function(e){var t=this,n=e||{},r=n.type,o=n.selectList,i=n.value,a=n.popLayerTitle,s=o&&o.length;if(!(s<2)){var l=s>10,c=l?{popHeight:"90%"}:{popHeight:"30%"};H({popType:"half",type:r,title:a,selectList:o,selectedList:i,onConfirm:function(e){var n=t.onClickSelectCallback(e);t.onChange(n)},onChange:function(e){if(r!=m.H.multiSelect&&e&&e.length){var n=t.onClickSelectCallback(e);t.onChange(n)}},fclass:"m_poplayer_append_select",poplayerProps:(0,d.Z)({name:"selectPoplayer"},c)})}}},{key:"onClickSelectCallback",value:function(e){var t=[];return(e||[]).forEach((function(e){e&&e.value&&t.push(e.value)})),t}},{key:"onClickHotelList",value:function(e){var t=e||{},n=(t.title,t.type,t.hotelInfo),r=t.value,o=n||{},i=o.selectHotelList,a=o.labelList,s=[];r&&r.length&&i.forEach((function(e,t){var n=a.filter((function(t,n){return e[t.id]==r[n]}));n.length==a.length&&s.push("hotel_"+t)}))}}]),n}(g.ZP),U={m_append_item:(0,d.Z)({},(0,x.o3)(0,(0,x.Vh)(16))),m_append_item_remark:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:(0,x.Vh)(8),marginBottom:(0,x.Vh)(3)},m_append_item_remark_last:{marginBottom:(0,x.Vh)(14)},m_append_item_remark_text:{fontSize:(0,x.Vh)(12),color:"#666",marginLeft:(0,x.Vh)(6)},m_input_select_content_hotel:{display:"flex",flexDirection:"row",color:"#111"}},q={m_input_com:{display:"flex",flexDirection:"column",alignItems:"flex-start"},m_input_com_label2:{width:"100%",paddingTop:(0,x.Vh)(16)},m_input_com_context:{paddingTop:(0,x.Vh)(8),flex:0,width:"100%"}},W=(0,y.Z)(U),K=n(32545),J=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.appendInfo,n=e.isLast,r=e.errorTip,o=(e.id,e.nameIsUp),i=t||{},a=i.type,s=i.title,d=i.placeholder,p=i.remark,h=this.state.value,f=void 0===h?"":h,g=this.isSelect(a),_=this.isPoplayerSelector(a),y="";return a==m.H.date&&(y=(0,K.ie)(new Date,"yyyy-MM-dd")),(0,I.jsxs)(v.Z,{style:W.m_append_item,id:"appendinfo",activeOpacity:1,children:[(0,I.jsx)(u.Z,{type:a,lable:s,placeholder:d,value:Array.isArray(f)?f[0]:f,isSelector:g,isPoplayerSelector:_,selectorMode:a,errorTips:r,onSelect:this.onSelect,onChange:this.onChange,selectorDefaultValue:y,renderContent:a==m.H.hotelText&&Array.isArray(f)&&f.length?(0,I.jsx)(I.Fragment,{children:f.map((function(e){return(0,I.jsx)(l.xv,{style:W.m_input_select_content_hotel,children:e.name})}))}):null,showClearIcon:!0,isSmallLabel:!0,fstyle:o?q:{}}),!!p&&(0,I.jsxs)(l.G7,{style:(0,x.wh)([W.m_append_item_remark,n?W.m_append_item_remark_last:null]),children:[(0,I.jsx)(c.Z,{type:"information",size:24,color:"#666666"}),(0,I.jsx)(l.xv,{style:W.m_append_item_remark_text,children:p})]})]})}}]),n}(z),X=n(22586),Q=n(57113),$=n(35409),Y=n(121),ee=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,h.Z)((0,p.Z)(o),"onChange",(function(e,t,n,r){var i=o.props.appendInfoList,a=void 0===i?[]:i,s=(0,L.Z)(a),l=s[e];if(Array.isArray(r)||(r=[r]),l&&l.list&&l.list[t]){if((0,Y.vZ)(l.list[t].value,r))return;l.list[t].value=r;var c=o.props,u=c.onAppendInfoChange,d=c.clearAppendInfoError,p=l.resourcesId,h=l.list[t],f=h.appendInfoId;h.title,h.placeholder;u&&(u(p,f,r,{valueType:n,needValidate:!0,appendInfoList:s}),r.length>0&&r[0]&&d&&d(t))}})),o.state={nameIsUp:!1},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){Q.Z.add("selectPoplayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("hotelListPoplayer",$.Z,{props:{isOpened:!1}}),Q.Z.add("hotelEditPoplayer",$.Z,{props:{isOpened:!1}});var e=this.props.appendInfoList,t=Array.isArray(e)&&e.some((function(e){var t=e.list;return Array.isArray(t)&&t.some((function(e){var t=e.title,n=void 0===t?"":t;return n.length>8}))}));this.setState({nameIsUp:t})}}]),n}(g.ZP),te={m_append_info:{},m_append_ticket_wrapper:(0,d.Z)((0,d.Z)({},x._),{},{paddingLeft:(0,x.Vh)(16),height:(0,x.Vh)(27)}),m_append_item_ticket_name:{color:"#111",fontWeight:(0,x.Ue)("500"),fontSize:(0,x.Vh)(15),lineHeight:(0,x.Nv)((0,x.Vh)(19)),overflow:"hidden"}},ne=(0,y.Z)(te),re=n(17094),oe=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.appendInfoList,r=t.setRef,o=this.state.nameIsUp;return(0,I.jsx)(X.s.Consumer,{children:function(t){return t=t.appendInfoError,(0,I.jsx)(l.G7,{style:ne.m_append_info,children:Array.isArray(n)&&n.map((function(i,a){var l=i.list,c=i.resourcesId,u=i.ticketName;return(0,I.jsxs)(s.Fragment,{children:[!!(n.length>1&&u&&l&&l.length)&&(0,I.jsx)(re.Z,{labelName:u}),Array.isArray(l)&&l.map((function(n,i){var s=n.title,u=n.type,d=Array.isArray(t)&&t.find((function(e){return e.id=="id_".concat(n.appendInfoId,"_").concat(c)}))||{},p=d.tip,h=d.id;return(0,I.jsx)(J,{id:h,ref:function(e){return r&&r(h,e)},appendInfo:n,isLast:i===l.length-1,onChange:function(t){return e.onChange(a,i,u,t)},errorTip:p||"",nameIsUp:o},s)}))]},c)}))})}})}}]),n}(ee)},7921:function(e,t,n){n.d(t,{Z:function(){return L}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=n(90201),l=n(81876),c=n(45023),u=n(56034),d=n(64571),p=n(27868),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,l.Z)(o),"state",void 0),(0,c.Z)((0,l.Z)(o),"onCloseMobilePop",(function(){o.setState({showMoblePop:!1})})),(0,c.Z)((0,l.Z)(o),"onClickMobileText",(function(){o.onCloseMobilePop();var e=o.props.changeMobilePop;e()})),o.onChange=o.onChange.bind((0,l.Z)(o)),o.onInputChange=o.onInputChange.bind((0,l.Z)(o)),o.state={showPopTip:!1,showMoblePop:!0},o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){e.mobilePopTip&&this.props.mobilePopTip!=e.mobilePopTip&&this.setState({showMoblePop:!0})}},{key:"componentDidMount",value:function(){this.tooglePopTip(!0)}},{key:"tooglePopTip",value:function(e){this.setState({showPopTip:e})}},{key:"onChange",value:function(){var e=this.props.changeContact;e()}},{key:"onBlur",value:function(e,t){var n=this.props,r=n.changeContact,o=n.areaCode,i=n.logs;if("areaCode"==e){var a=i.contryCodeSelectTraceLog;(0,p.Z)(a&&a(o,t))}r((0,c.Z)({},e,t))}},{key:"onChoosePopTip",value:function(){var e=this.props.commonInfo;this.tooglePopTip(!1),this.onBlur("mobile",null===e||void 0===e?void 0:e.mobile)}},{key:"onInputChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.areaCode;"86"!=t&&void 0!=t||11===e.length&&d.ZP.hideKeyboard()}},{key:"inputChange",value:function(e,t){this.onBlur(e,t)}}]),n}(u.ZP),f=n(72747),g=n(4962),m=n(22586),v=n(9353),_=n(17366),y={m_passenger_input_text_style:{},m_input_com_context_style:{display:"flex",flexDirection:"column",flexWrap:"nowrap",paddingTop:(0,_.Vh)(16),paddingBottom:(0,_.Vh)(16),flex:1,justifyContent:"center"},m_input_com_erro_poptip:{paddingBottom:(0,_.Vh)(4)}},x=(0,v.Z)(y),b=n(59201),Z=n(71557),I=n(298),C={m_bottom_poptip:(0,I.Z)((0,I.Z)({height:(0,_.Vh)(32),position:"absolute",bottom:0,right:0,paddingLeft:(0,_.Vh)(12),backgroundColor:"#444",borderRadius:(0,_.Vh)(5),left:(0,_.Vh)(60)},_.xI),{},{justifyContent:"space-between"},(0,_.ix)("border-box")),m_left_text_wrap:(0,I.Z)({maxWidth:(0,_.Vh)(218),flex:1,height:(0,_.Vh)(32),display:"flex"},_._),m_left_text:{fontSize:(0,_.Vh)(13),color:"#fff"},m_poptip_right:(0,I.Z)((0,I.Z)({width:(0,_.Vh)(32)},_._),{},{justifyContent:"center"}),m_bottom_poptip_error:{bottom:(0,_.Vh)(5)},m_poptip_triangle:(0,I.Z)({width:(0,_.Vh)(8),height:(0,_.Vh)(8),backgroundColor:"#444",position:"absolute",left:(0,_.Vh)(30),top:(0,_.Vh)(-4)},(0,_.pm)({rotate:"45deg"}))},k=(0,v.Z)(C),w=n(79239),T=n(2269),S=function(e){var t=e.text,n=e.onClose,r=e.onClickText,o=e.exposureLog,i=w.Az==t;return(0,T.jsxs)(f.G7,{style:k.m_bottom_poptip,testID:o,children:[(0,T.jsx)(f.G7,{style:k.m_poptip_triangle}),(0,T.jsx)(b.Z,{style:k.m_left_text_wrap,onClick:i?null:r,children:(0,T.jsx)(f.xv,{style:k.m_left_text,numberOfLines:1,children:t})}),(0,T.jsx)(b.Z,{onClick:n,style:k.m_poptip_right,children:(0,T.jsx)(Z.Z,{type:"xclosed",size:30,color:"#fff"})})]})},P=(0,s.memo)(S),L=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.contact,r=t.mobile,o=t.email,i=t.areaCode,a=t.setRef,s=t.logs,l=t.commonInfo,c=t.mobilePopTip,u=t.isLimitMobile,d=t.isLimitPassenMobile,p=this.state,h=p.showPopTip,v=p.showMoblePop,y=s.contactChangeTraceLog,Z=s.contackPopTipExposureLog,I=s.clickContactPopTipLog,C=s.addressBookTraceLog,k=s.contryCodeClickTraceLog,w=s.contactPhoneClickLog,S=s.contactBookClickLog,L=s.contackMobilePopTipExposureLog,N="86"!=i&&i?100:11,j=h&&!(null===l||void 0===l||!l.mobile),D=c&&v&&!u&&!d?function(){return(0,T.jsx)(P,{text:c,exposureLog:L,onClose:e.onCloseMobilePop,onClickText:e.onClickMobileText})}:null,V="\u8054\u7cfb\u624b\u673a\u53f7\u9650\u8d2d\uff0c\u5efa\u8bae\u66f4\u6362\u624b\u673a\u53f7\u7801\u6216\u9009\u62e9\u5176\u4ed6\u4ea7\u54c1";return(0,T.jsx)(m.s.Consumer,{children:function(t){return t=t.contactError,(0,T.jsx)(f.G7,{children:(0,T.jsx)(b.Z,{id:"contact",ref:function(e){return a&&a("contact",e)},children:n&&n.length?n.map((function(n,a){var s,c,d=!1;switch(n.mode){case 2:return(0,T.jsx)(g.Z,{isMobile:!0,showPopTip:j,onHidePopTip:e.tooglePopTip.bind(e,!1),renderMobilePop:D,poptipPhoneNumber:null===l||void 0===l?void 0:l.mobile,onChoosePopTip:e.onChoosePopTip.bind(e),poptipExposureLog:Z,poptipClickLog:I,isLast:d,lable:n.name||"\u8054\u7cfb\u624b\u673a",type:"number",placeholder:"\u7528\u4e8e\u751f\u6210\u8ba2\u5355",value:r||"",inputTest:"contact_mobile",errorTips:u?V:t?t.mobileError:"",showClearIcon:!0,onChange:function(t){e.onInputChange(t)},onBlur:function(t){e.onBlur("mobile",t)},maxLength:N,contactsCallback:e.inputChange.bind(e,"mobile"),inputStyle:x.m_passenger_input_text_style,contentStyle:(0,_.wh)([x.m_input_com_context_style,j&&null!==(s=t)&&void 0!==s&&s.mobileError?x.m_input_com_erro_poptip:{}]),inputTraceLog:y&&y(n.name),addressBookTraceLog:C,contactPhoneClickLog:w,contactBookClickLog:S,isSmallLabel:!0});case 3:case 4:return(0,T.jsx)(g.Z,{isLast:d,lable:n.name||"Email",type:"text",placeholder:3===n.mode?"\u63a5\u6536\u786e\u8ba4\u5355":"\u63a5\u6536\u786e\u8ba4\u5355(\u9009\u586b)",value:o||"",inputTest:"contact_email",errorTips:t?t.emailError:"",onChange:function(){},onBlur:function(t){e.onBlur("email",t)},showClearIcon:!0,inputStyle:x.m_passenger_input_text_style,inputTraceLog:y&&y(n.name),isSmallLabel:!0});case 6:return(0,T.jsx)(g.Z,{isMobile:!0,showPopTip:j,onHidePopTip:e.tooglePopTip.bind(e,!1),renderMobilePop:D,poptipPhoneNumber:null===l||void 0===l?void 0:l.mobile,onChoosePopTip:e.onChoosePopTip.bind(e),poptipExposureLog:Z,poptipClickLog:I,isLast:d,lable:n.name||"\u8054\u7cfb\u624b\u673a",type:"number",placeholder:"\u7528\u4e8e\u751f\u6210\u8ba2\u5355",value:r||"",inputTest:"contact_area_mobile",errorTips:u?V:t?t.mobileError:"",onChange:function(t){e.onInputChange(t)},showPhoneCode:!0,phonecode:i,onBlur:function(t){e.onBlur("mobile",t)},onChangePhonecode:function(t){e.onBlur("areaCode",t)},maxLength:N,contactsCallback:e.inputChange.bind(e,"mobile"),showClearIcon:!0,inputStyle:x.m_passenger_input_text_style,contentStyle:(0,_.wh)([x.m_input_com_context_style,j&&null!==(c=t)&&void 0!==c&&c.mobileError?x.m_input_com_erro_poptip:{}]),inputTraceLog:y&&y(n.name),addressBookTraceLog:C,contactPhoneClickLog:w,contactBookClickLog:S,phonecodeTraceLog:k,isSmallLabel:!0});default:break}})):null})})}})}}]),n}(h)},6376:function(e,t,n){n.d(t,{BH:function(){return f},iw:function(){return g},ip:function(){return m}});var r=n(79301),o=n(95308),i=n(28570),a=n(99739),s=n(64571),l=n(84578),c=n(121),u=n(79522),d=n(56569),p=n(52066),h=(0,a.ZP)(),f=function(e){var t=e.forceRefreshCoupon,n=e.couponCode,r=e.goLogin,o=e.isLogin,i=function(){g(t,n,r,o)};return{gotoAuth:i}},g=function(e,t,n,r){if(h.taroEnv==a.fO.weapp){var o=s.ZP.getCurrentPage(),d={pageSource:"ctripwechatmini_ticketpromotion_realname",isNavBack:!0};o.navigateTo({url:"/pages/wallet/setrealname/index",data:d,callback:function(n){var r=n.realNamed;r?e(!1,!0,!1,t):e(!1,!1,!0)},success:function(){},fail:function(e){}})}else{if(!r)return void(n&&n());e(!0,!1,!1);var f=(0,c.I8)(l.Rv.load("originParamsUrl"));delete f.resultCode;var g=(0,u.RF)(f),m="https://secure.ctrip.com/webapp/paywallet/realname?onlyneedresultcode=1",v="https://m.ctrip.com/webapp/tnt/booking?";"FAT"!=h.enviroment&&"dev"!=h.enviroment||(m="https://secure.fat18.qa.nt.ctripcorp.com/webapp/paywallet/realname?onlyneedresultcode=1",v="https://m.fws.qa.nt.ctripcorp.com/webapp/tnt/booking?"),v+=g,v=encodeURIComponent(v),h.taroEnv===a.fO.alipay&&(v=encodeURIComponent(v)),p.Z.set("coupon-real-name",t,3600),(0,i.VF)("".concat(m,"&sceneid=ctrip_ticketpromotion_realname&backpage=").concat(v,"&forwardpage=").concat(v),!0,void 0,void 0,l.Rv.clear)}},m=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i,s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(h.taroEnv===a.fO.weapp||(0,d.rI)()){e.next=11;break}return n=t.state.request,o=void 0===n?{}:n,e.next=4,p.Z.get("coupon-real-name");case 4:if(i=e.sent,s=o.resultCode,!i||"string"!=typeof i){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},26758:function(e,t,n){n.d(t,{Z:function(){return f}});n(90201);var r=n(72747),o=n(59201),i=n(17366),a=n(298),s=n(9353),l={coupon_name_text:{color:"#FF7700"},coupon_text:{color:"#555",fontSize:(0,i.Vh)(13),fontWeight:(0,i.Ue)("400"),lineHeight:(0,i.Nv)((0,i.Vh)(19))},coupon_wrapper:(0,a.Z)((0,a.Z)((0,a.Z)({},(0,i.o3)((0,i.Vh)(12))),(0,i.oM)((0,i.Vh)(16))),{},{marginBottom:(0,i.Vh)(12),borderRadius:(0,i.Vh)(4),display:"flex",flexDirection:"row",flexWrap:"wrap",backgroundColor:"#FFF8F2"}),coupon_auth:{display:"flex",flexDirection:"row",justifyContent:"space-between",position:"relative"},coupon_auth_left:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},coupon_auth_right:{display:"flex",flexDirection:"column-reverse"},coupon_goto_auth:(0,a.Z)((0,a.Z)({height:(0,i.Vh)(24),width:(0,i.Vh)(52),borderRadius:(0,i.Vh)(12)},(0,i.Cg)({width:(0,i.Vh)(1),style:"solid",color:"#FF7700"})),{},{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}),coupon_goto_auth_text:{color:"#FF7700",fontSize:(0,i.Vh)(12),fontWeight:(0,i.Ue)("500"),lineHeight:(0,i.Nv)((0,i.Vh)(15)),height:(0,i.Vh)(15)},coupon_auth_dash:{position:"absolute",left:(0,i.Vh)(6),bottom:(0,i.Vh)(35),top:(0,i.Vh)(16),zIndex:1,opacity:.61,backgroundColor:"#555555",width:(0,i.Vh)(1)},coupon_auth_dash_booking:{position:"absolute",left:(0,i.Vh)(6),bottom:(0,i.Vh)(38),top:(0,i.Vh)(17),zIndex:1,opacity:.61,backgroundColor:"#555555",width:(0,i.Vh)(1)},coupon_wrapper_toast:{paddingTop:(0,i.Vh)(8),paddingBottom:(0,i.Vh)(12),display:"flex",flexDirection:"row",flexWrap:"wrap"},coupon_text_toast:{color:"#111",fontSize:(0,i.Vh)(14),fontWeight:(0,i.Ue)("400"),lineHeight:(0,i.Nv)((0,i.Vh)(20))},coupon_sub_text_toast:{color:"#111",fontSize:(0,i.Vh)(13),fontWeight:(0,i.Ue)("400"),lineHeight:(0,i.Nv)((0,i.Vh)(17)),paddingTop:(0,i.Vh)(4)},coupon_number_image:{height:(0,i.Vh)(13),width:(0,i.Vh)(13),marginRight:(0,i.Vh)(4.5),zIndex:100,backgroundColor:"#FFF8F2"},coupon_number_image_booking:{backgroundColor:"#ffffff"},coupon_auth_tips:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},c=(0,s.Z)(l),u=n(6376),d=n(82901),p=n(2269),h=function(e){var t=e.couponTitle,n=void 0===t?"":t,a=e.couponUserName,s=e.couponCode,l=e.couponLog,h=e.forceRefreshCoupon,f=e.isFromBooking,g=void 0!==f&&f,m=e.goLogin,v=e.isLogin,_=l||{},y=_.couponUserTipsExposureLog,x=(0,u.BH)({forceRefreshCoupon:h,couponCode:s,goLogin:m,isLogin:v}),b=x.gotoAuth,Z=g?r.G7:d.Z;return(0,p.jsx)(Z,{children:(0,p.jsx)(r.G7,{style:(0,i.wh)([g?c.coupon_wrapper_toast:c.coupon_wrapper]),testID:y,children:a?(0,p.jsxs)(r.xv,{style:g?c.coupon_text_toast:c.coupon_text,children:["\u672c\u4ea7\u54c1\u53ef\u4eab",(0,p.jsx)(r.xv,{style:c.coupon_name_text,children:"".concat(n)}),"\uff0c",(0,p.jsx)(r.xv,{style:c.coupon_name_text,children:"".concat(a)}),"\u9700\u4f5c\u4e3a\u51fa\u884c\u6e38\u5ba2\u3002\u82e5".concat(a,"\u4e0d\u7b26\u5408\u8d2d\u4e70\u6761\u4ef6\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u4f18\u60e0\u5238")]}):(0,p.jsxs)(r.G7,{style:{width:"100%"},children:[(0,p.jsx)(r.G7,{style:c.coupon_auth,children:(0,p.jsxs)(r.xv,{style:g?c.coupon_text_toast:c.coupon_text,children:["\u672c\u4ea7\u54c1\u53ef\u4eab",(0,p.jsx)(r.xv,{style:c.coupon_name_text,children:"".concat(n)}),"\uff0c\u4f7f\u7528\u8981\u6c42\u5982\u4e0b\uff1a"]})}),(0,p.jsxs)(r.G7,{style:c.coupon_auth,children:[(0,p.jsx)(r.G7,{style:g?c.coupon_auth_dash_booking:c.coupon_auth_dash}),(0,p.jsxs)(r.G7,{style:c.coupon_auth_left,children:[(0,p.jsxs)(r.G7,{style:c.coupon_auth_tips,children:[(0,p.jsx)(r.Ee,{url:"https://dimg04.c-ctrip.com/images/1o55612000cetzvp0EA3B.png",style:(0,i.wh)([c.coupon_number_image,g?c.coupon_number_image_booking:{}])}),(0,p.jsxs)(r.xv,{style:g?c.coupon_sub_text_toast:c.coupon_text,children:["\u8bf7\u5148\u5b8c\u6210\u8d26\u6237",(0,p.jsx)(r.xv,{style:c.coupon_name_text,children:"\u5b9e\u540d\u8ba4\u8bc1"})]})]}),(0,p.jsxs)(r.G7,{style:c.coupon_auth_tips,children:[(0,p.jsx)(r.Ee,{url:"https://dimg04.c-ctrip.com/images/1o52912000cetzy2vA887.png",style:(0,i.wh)([c.coupon_number_image,g?c.coupon_number_image_booking:{}])}),(0,p.jsxs)(r.xv,{style:g?c.coupon_sub_text_toast:c.coupon_text,children:[(0,p.jsx)(r.xv,{style:c.coupon_name_text,children:"\u8ba4\u8bc1\u4eba"}),"\u9700\u4f5c\u4e3a\u51fa\u884c\u6e38\u5ba2"]})]}),(0,p.jsx)(r.xv,{style:g?c.coupon_sub_text_toast:c.coupon_text,children:"* \u4e0d\u4f7f\u7528\u5f53\u524d\u4f18\u60e0\u5238\u5219\u65e0\u9700\u8ba4\u8bc1"})]}),g?null:(0,p.jsx)(r.G7,{style:c.coupon_auth_right,children:(0,p.jsx)(o.Z,{style:c.coupon_goto_auth,onClick:b,children:(0,p.jsx)(r.xv,{style:c.coupon_goto_auth_text,children:"\u53bb\u8ba4\u8bc1"})})})]})]})})})},f=h},17094:function(e,t,n){n.d(t,{Z:function(){return d}});n(90201);var r=n(298),o=n(9353),i=n(17366),a={label_wrapper:(0,r.Z)((0,r.Z)({minHeight:(0,i.Vh)(27)},i._),{},{paddingLeft:(0,i.Vh)(16),paddingRight:(0,i.Vh)(16)}),label_text:{color:"#111",fontSize:(0,i.Vh)(15),fontWeight:(0,i.Ue)("500"),lineHeight:(0,i.Nv)((0,i.Vh)(19))}},s=(0,o.Z)(a),l=n(72747),c=n(2269),u=function(e){var t=e.labelName;return(0,c.jsx)(l.o,{start:{x:1,y:1},end:{x:0,y:1},direction:-90,colors:["rgba(238, 238, 238, 0)","rgba(245, 247, 250, 1)"],style:s.label_wrapper,children:(0,c.jsx)(l.xv,{style:s.label_text,children:t})})},d=u},65549:function(e,t,n){n.d(t,{Z:function(){return ye}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=n(90201),c=n(72747),u=n(9353),d=n(17366),p={passenger:{backgroundColor:"#fff",borderRadius:(0,d.Vh)(8),position:"relative"},passenger_pure:{paddingTop:(0,d.Vh)(16)},warn_background:{backgroundColor:"#ffeceb"},passenger_title:{display:"flex",flexDirection:"row",paddingBottom:(0,d.Vh)(6)},passenger_title_old:{paddingBottom:(0,d.Vh)(16)},passenger_title_wrap:{display:"flex",flexDirection:"row",alignItems:"center"},passenger_title_text:{fontSize:(0,d.Vh)(17),fontWeight:(0,d.Ue)("500"),color:"#111",lineHeight:(0,d.Nv)((0,d.Vh)(21)),letterSpacing:(0,d.Vh)(-.5)},passenger_title_subtitle:(0,r.Z)((0,r.Z)({paddingLeft:(0,d.Vh)(8),paddingRight:(0,d.Vh)(8),height:(0,d.Vh)(21),marginLeft:(0,d.Vh)(6),backgroundColor:"#f5f7fa"},(0,d.E0)((0,d.Vh)(10),(0,d.Vh)(10),(0,d.Vh)(10),0)),d._7),passenger_title_subtitle_error:{backgroundColor:"#fff6f5"},passenger_title_subtitle_text:{fontSize:(0,d.Vh)(13),color:"#111",letterSpacing:-(0,d.Vh)(.2)},passenger_title_subtitle_text_highlight:{color:"#ff7700",letterSpacing:-(0,d.Vh)(.2),fontSize:(0,d.Vh)(13)},passenger_title_subtitle_text_highlight_error:{},passenger_title_subtitle_text_no_background_wrap:(0,r.Z)({marginLeft:(0,d.Vh)(6),height:(0,d.Vh)(19)},d._7),passenger_title_subtitle_text_no_background:{fontSize:(0,d.Vh)(13),color:"#555555",letterSpacing:-(0,d.Vh)(.2),fontWeight:(0,d.Ue)("400")},error_color:{fontSize:(0,d.Vh)(13),fontWeight:(0,d.Ue)("500"),color:"#f21500"},light_color:{fontSize:(0,d.Vh)(12),color:"#FF7700"},passengerMask:{position:"absolute",left:0,top:0,right:0,bottom:0},section_padding:{paddingRight:(0,d.Vh)(16),paddingLeft:(0,d.Vh)(16)},error_translateX:(0,r.Z)({},(0,d.oQ)("error-translate 0.6s linear 0.2s 3"))},h=(0,u.Z)({clause_view:{marginTop:(0,d.Vh)(20),marginBottom:(0,d.Vh)(0),paddingBottom:(0,d.Vh)(20)}}),f=(0,u.Z)(p),g=n(48118),m=n(79301),v=n(95308),_=n(81876),y=n(45023),x=n(56034),b=n(83630),Z=n(57113),I=n(35409),C=n(78277),k=n(3386),w=n(68983),T=n(30892),S=n(96082),P=n(32500),L=n(78893),N=n(121),j=n(75833),D=n(70873),V=function(e){},E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r,i;return(0,o.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,_.Z)(i),"cName",void 0),(0,y.Z)((0,_.Z)(i),"state",void 0),(0,y.Z)((0,_.Z)(i),"listRef",void 0),(0,y.Z)((0,_.Z)(i),"editPassengerId",0),(0,y.Z)((0,_.Z)(i),"passengerAniValue",void 0),(0,y.Z)((0,_.Z)(i),"handleSelect",(function(e,t){if(!i.state.currentGroup)return t&&t();var n=i.state.currentGroup,r=n.resourceId,o=n.boxId,a=i.props.changePassenger;a&&i.changePassenger(r,e,!0,t,{boxId:o})})),(0,y.Z)((0,_.Z)(i),"changePassenger",function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t,n,r,o,a){var s,l,c,u,d,p,h,f,g,v,y,x,b,Z,I,C,k,w,T,L,N,D,V,E,R;return(0,m.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=i.props,u=c.changePassenger,d=c.passengerModal,p=c.request,h=c.passengerList,f=c.ABTest,g=a||{},v=g.boxId,y=g.isFromList,x=null===d||void 0===d||null===(s=d.group)||void 0===s?void 0:s.find((function(e){return e.resourceId==t&&e.boxId==v})),!(x&&(null===x||void 0===x||null===(l=x.dChoice)||void 0===l?void 0:l.length)<=(null===n||void 0===n?void 0:n.length)&&f)){e.next=19;break}return C=1==(null===x||void 0===x?void 0:x.fillInNumberLimit)?null===p||void 0===p||null===(b=p.count)||void 0===b?void 0:b[((null===p||void 0===p?void 0:p.optid)||[]).findIndex((function(e){return e==t||e==x.boxId}))]:1,k=(null===p||void 0===p?void 0:p.date)||(null===p||void 0===p?void 0:p.minDate)||"",w=null===h||void 0===h?void 0:h.find((function(e){return e.PassengerID==n[n.length-1]})),T=(0,j.jX)(v,t),L=(0,P.W)(w,T),N=x.resourceIdList.map((function(e){return{quanty:C||1,useDate:k,resourceId:e,passengers:L,parentResourceId:null!==x&&void 0!==x&&x.boxId?x.boxId:null}})),e.next=12,(0,S.Z)([N],(null===d||void 0===d||null===(Z=d.contactInfo)||void 0===Z?void 0:Z.mobile)||"",(null===d||void 0===d||null===(I=d.contactInfo)||void 0===I?void 0:I.email)||"");case 12:if(D=e.sent,V=(0,P.Z)(n,D,[],t),!D||0!=D[0].result){e.next=19;break}if(V.length&&null!==(E=V[0])&&void 0!==E&&E.errMsg?(0,S.P)(V[0],{leftCb:i.handleToEdit.bind((0,_.Z)(i))},{leftParams:[x||[],w,"bottom"]}):i.toast.show(null===(R=V[0])||void 0===R?void 0:R.errorMessage),!y){e.next=18;break}return e.abrupt("return",!1);case 18:return e.abrupt("return");case 19:if(!y){e.next=21;break}return e.abrupt("return",!0);case 21:u&&u(t,n,r,o,{boxId:v});case 22:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}()),i.cName="passenger",i.state={currentPassenger:{},currentGroup:{resourceId:0},currentGroupFromEdit:{},direction:"bottom",needChangeChoise:!0,showCouponLabel:(null===(r=e.couponItem)||void 0===r?void 0:r.requireRealName)||!1,couponTitle:"",couponUserName:""},i.passengerAniValue=new c.fS.Value(0),i.handleToEdit=i.handleToEdit.bind((0,_.Z)(i)),i.handleToList=i.handleToList.bind((0,_.Z)(i)),i.onSavePassenger=i.onSavePassenger.bind((0,_.Z)(i)),i.changePassenger=i.changePassenger.bind((0,_.Z)(i)),i.changeChildAndAuthorize=i.changeChildAndAuthorize.bind((0,_.Z)(i)),i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){Z.Z.add("passengerListPoplayer",I.Z,{props:{isOpened:!1}}),Z.Z.add("repeateListPoplayer",I.Z,{props:{isOpened:!1}}),Z.Z.add("passengerEditPoplayer",I.Z,{props:{isOpened:!1}}),Z.Z.add("countrySelector",I.Z,{props:{isOpened:!1}}),Z.Z.add("RecommendPoplayer",I.Z,{props:{isOpened:!1}}),Z.Z.add("passengerErrMsg",T.Z,{props:{isOpened:!1}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.currentGroup,n=e.checkClauseShowPosition,r=e.anchor,o=e.errorTips;if(!(0,N.vZ)(e.passengerModal,this.props.passengerModal)&&t&&t.resourceId){var i=this.getNewGroupInfo(t,e);this.setState({currentGroup:i})}if(this.editPassengerId&&(0,w.nK)(this.props.passengerList,e.passengerList,this.editPassengerId)&&t&&t.resourceId){var a=this.getNewGroupInfo(t,e);this.updatePassengerListPoplayer(e.passengerList,a,e.passengerCheckErr)}if(e.ABTest&&(0,L.Ns)(e.passengerModal,e.passengerList,this.props.clauseShowPosition)&&n&&n(),!(0,N.vZ)(this.props.couponItem,e.couponItem)&&e.couponItem.discountType==D.$i.COUPON){var s=e.couponItem,l=void 0===s?{}:s,c=l.requireRealName,u=l.discountName,d=l.receiverName,p=l.couponCode;this.setState({showCouponLabel:c,couponTitle:u,couponUserName:d,couponCode:p})}"passenger"!==this.props.anchor&&"passenger"==r&&o&&V(this.passengerAniValue)}},{key:"handleToEdit",value:function(e,t,n){var r=this.props.logs;n?"right"===n?this.setState({needChangeChoise:!1}):this.setState({needChangeChoise:!0}):(n="bottom",this.setState({needChangeChoise:!0})),this.setState({currentPassenger:t,currentGroupFromEdit:e,direction:n}),(0,k.Z)({groupInfo:e,passengerInfo:t,direction:n,listType:b.r8.traveler,configTitle:"\u6e38\u5ba2",onSave:this.onSavePassenger,devTraceKeyData:r.devTraceKeyData})}},{key:"handleToList",value:function(e){this.setState({currentGroup:e});var t=this.props,n=t.passengerList,r=t.logs,o=t.passengerCheckErr;(0,C.Z)({currentGroup:e,passengerList:n,listType:b.r8.traveler,onSelect:this.handleSelect,handleToEdit:this.handleToEdit,clickLog:null===r||void 0===r?void 0:r.selectClickLog,typeText:"\u6e38\u5ba2",devTraceKeyData:r.devTraceKeyData,passengerCheckErr:o,changePassenger:this.changePassenger.bind(this)})}},{key:"onSavePassenger",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var n,r,o,i,a,s,l,c,u=this;return(0,m.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.props,r=n.addPassenger,o=n.clearPassengerError,n.passengerModal,n.request,n.ABTest,i=this.state,a=i.needChangeChoise,s=i.currentGroup,l=i.currentGroupFromEdit,this.editPassengerId=t.PassengerID||1,o(this.editPassengerId),e.next=6,r(t,l&&l.resourceId,b.r8.traveler,a||s&&1===s.choice,(function(e){u.listRef&&u.listRef.onChange(e)}),!1,{boxId:l.boxId});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onSaveNewGuest",value:function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t,n){var r,o,i,a=this;return(0,m.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.props,o=r.addPassenger,r.passengerModal,this.editPassengerId=n.PassengerID||1,e.next=4,o(n,t.resourceId,b.r8.traveler,!0,(function(e){a.listRef&&a.listRef.onChange(e)}),!1,{isSaveNewGuest:!0,boxId:t.boxId});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updatePassengerListPoplayer",value:function(e,t,n){if(Z.Z.get("passengerListPoplayer")){var o=Z.Z.get("passengerListPoplayer").assistComponent,i=(0,r.Z)((0,r.Z)({},o.childProps),{},{plist:e,groupInfo:t,passengerCheckErr:n});Z.Z.change("passengerListPoplayer",(0,r.Z)((0,r.Z)({},o),{},{childProps:i}))}this.editPassengerId=0}},{key:"getNewGroupInfo",value:function(e,t){var n,r=null!==(n=t.passengerModal)&&void 0!==n&&n.group?t.passengerModal.group.find((function(t){return t.resourceId===e.resourceId&&t.boxId===e.boxId})):{};return r}},{key:"changeChildAndAuthorize",value:function(e){var t,n,r=this.props,o=r.onChangeAgree,i=r.onChangeAuthorize,a=r.clauseShowPosition,s=r.request,l=r.isAuthorizedOversea,c=r.isAgreeChild,u=e.agree,d=void 0!==u&&u;null!==a&&void 0!==a&&null!==(t=a.passenger)&&void 0!==t&&t.isShow&&null!==s&&void 0!==s&&s.overseas&&!d&&(d=!(l&&c)),null!==a&&void 0!==a&&null!==(n=a.passenger)&&void 0!==n&&n.isShow&&o&&o({isAgree:d}),null!==s&&void 0!==s&&s.overseas&&i&&i({isAgree:d})}}]),n}(x.ZP),R=n(7921),A=n(68924),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,y.Z)((0,_.Z)(r),"getButtonType",(function(e){var t=r.props,n=t.group,o=t.passengerCheckErr;if(n&&1===n.length){var i=n&&n[0],a=i.dChoice,s=n[0].notFullList.includes(null===e||void 0===e?void 0:e.PassengerID);if(s)return b.rU.incomplete;if(null!==o&&void 0!==o&&o.length&&null!==o&&void 0!==o&&o.find((function(t){var r;return(null===t||void 0===t?void 0:t.errMsg)&&(null===t||void 0===t?void 0:t.passengerId)==(null===e||void 0===e?void 0:e.PassengerID)&&n&&(null===t||void 0===t?void 0:t.resourceId)==(null===(r=n[0])||void 0===r?void 0:r.resourceId)})))return b.rU.err;if(!a||!a.length)return b.rU.normal;var l=a.find((function(t){return t==e.PassengerID}));return l?b.rU.selected:b.rU.normal}})),(0,y.Z)((0,_.Z)(r),"getErrMsg",(function(e,t){var n=r.props,o=n.passengerCheckErr,i=n.group;if(t==b.rU.err){var a=o.find((function(t){var n;return(null===t||void 0===t?void 0:t.passengerId)==e.PassengerID&&i&&(null===t||void 0===t?void 0:t.resourceId)==(null===(n=i[0])||void 0===n?void 0:n.resourceId)}));return a.errMsg||""}return""})),r}return(0,i.Z)(n,[{key:"buttonClick",value:function(e,t,n){var r=this.props,o=r.group,i=r.plist,a=r.handleToEdit,s=r.passengerCheckErr,l=o&&o[0],c=l||{},u=c.choice,d=c.dChoice,p=void 0===d?[]:d,h=c.resourceId,f=c.boxId,g=(0,A.ly)(n,i);if(t===b.rU.only)a(l,{});else if(t===b.rU.incomplete)a(l,g);else if(t===b.rU.normal)if(1===u)this.handleSingleSelect({resourceId:h,id:n,boxId:f});else{if(u===p.length)return this.toast.show("\u60a8\u53ea\u9700\u9009\u62e9".concat(u,"\u4f4d\u6e38\u5ba2"));this.handlePassengerChange({resourceId:h,id:n,boxId:f})}else if(t===b.rU.selected)this.handlePassengerChange({resourceId:h,id:n,boxId:f});else if(t===b.rU.err){var m=s.find((function(e){return(null===e||void 0===e?void 0:e.passengerId)==n}));m.errMsg?(0,S.P)(m,{leftCb:a.bind(this)},{leftParams:[l,g]}):this.toast.show(m.errorMessage)}else{var v=i&&i.length||0;v<=3?a&&a(l,{}):this.handleGoToSelect({currentGroup:l})}}},{key:"handleGoToSelect",value:function(e){var t=e.currentGroup,n=this.props,r=n.plist,o=n.handleToList;r&&r.length&&o&&o(t)}},{key:"handleSingleSelect",value:function(e){var t=e.resourceId,n=e.id,r=e.boxId,o=this.props.changePassenger;o&&o(t,[n],void 0,void 0,{boxId:r})}},{key:"handlePassengerChange",value:function(e){var t=e.resourceId,n=e.id,r=e.boxId,o=this.props,i=o.group,a=o.changePassenger,s=i&&i.find((function(e){return e.resourceId==t&&e.boxId==r})),l=s||{},c=l.dChoice,u=-1,d=[];(c||[]).forEach((function(e,t){var r=e||"";r&&(r==n&&(u=t),d.push(r))})),-1==u?d.push(n):d.splice(u,1),a&&a(t,d,void 0,void 0,{boxId:r})}}]),n}(x.ZP),M={m_traveler_layout:{},m_traveler_layout_only:{},m_traveler_button_list:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}},O=(0,u.Z)(M),B=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,y.Z)((0,_.Z)(r),"checkImg",void 0),r.checkImg="https://dimg04.c-ctrip.com/images/0AS4g1200088jik9s4268.png_.webp",r.onClick=r.onClick.bind((0,_.Z)(r)),r}return(0,i.Z)(n,[{key:"onClick",value:function(e,t,n){this.props.click(e,t,n)}}]),n}(x.ZP),G=n(79522),H=n(59201),z=n(56569),U=(z.Db.get("window").width,function(e){return(0,d.Vh)(e,{ignorePage:!0})}),q={m_traveler_button:(0,r.Z)({height:U(40),width:U(73),borderWidth:1,borderStyle:"solid",borderColor:"#EBEFF5",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:U(4),marginLeft:U(6.5),position:"relative",paddingLeft:U(7),paddingRight:U(7),display:"flex",backgroundColor:"#f5f7fa"},(0,d.ix)("border-box")),m_traveler_button_0:{marginLeft:(0,d.Vh)(0)},m_traveler_button_selected:{backgroundColor:"#EBF3FF",borderColor:"#0066F6",position:"relative"},m_traveler_button_selected_icon:{position:"absolute",bottom:U(-1),right:U(-1),fontSize:(0,d.Vh)(0)},m_traveler_button_operation:{width:U(80),paddingLeft:0,paddingRight:0},m_traveler_button_only:{height:U(40),marginBottom:U(8),width:"100%",marginLeft:U(0),backgroundColor:"#f5f7fa",borderRadius:U(4)},m_traveler_button_err:{flexDirection:"column",alignItems:"center",justifyContent:"center",paddingLeft:U(1),paddingRight:U(1)},m_traveler_text:(0,r.Z)((0,r.Z)((0,r.Z)({fontSize:(0,d.Vh)(13),color:"#111",lineHeight:(0,d.Nv)(U(18))},(0,d.lM)("break-all")),(0,d.Sf)(1)),{},{width:(0,d.Vh)(57),textAlign:"center"}),m_traveler_text_operation:{fontSize:(0,d.Vh)(13),letterSpacing:-U(.21),lineHeight:(0,d.Nv)(U(17)),color:"#0066F6",paddingLeft:(0,d.Vh)(2),width:(0,d.Vh)(60)},m_traveler_text_incomplete:{maxWidth:U(52)},m_traveler_text_only:{color:"#0066f6",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)(U(17)),marginLeft:U(4)},m_traveler_text_err:{fontSize:(0,d.Vh)(13),color:"#111",lineHeight:(0,d.Nv)(U(17)),marginLeft:U(4)},m_traveler_text_errMsg:{fontSize:(0,d.Vh)(11),color:"#F21500",lineHeight:(0,d.Nv)(U(12)),marginTop:U(2)}},W=(0,u.Z)(q),K=n(71557),J=n(2269),X=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.buttonText,r=t.type,o=t.id,i=t.index,a=t.clickLog,s=t.exposureLog,l=t.selectTraceLog,u=t.buttonColor,p=t.errMsg;return(0,J.jsxs)(H.Z,{onClick:function(){return e.onClick("traveler_button_".concat(void 0===i?"add":i),r,o)},style:(0,d.wh)([(0,G.gI)(W,"m_traveler_button",[r,i]),u?{backgroundColor:u}:{}]),log:a,testID:s,devTraceData:l,children:[r==b.rU.only?(0,J.jsx)(K.Z,{type:"addcirclefill3",size:32,color:"#0066f6"}):null,(0,J.jsx)(c.xv,{style:(0,G.gI)(W,"m_traveler_text",[r]),numberOfLines:1,children:n}),r==b.rU.err?(0,J.jsx)(c.xv,{style:W.m_traveler_text_errMsg,children:p+"\u4e0d\u7b26\u5408"}):null,r==b.rU.operation?(0,J.jsx)(K.Z,{type:"forward",size:24,color:W.m_traveler_text_operation.color}):null,r==b.rU.incomplete?(0,J.jsx)(K.Z,{type:"editWord",size:24,color:"#0066F6"}):null]})}}]),n}(B),Q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n)}(x.ZP),$=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"handleDeletePassenger",value:function(e){var t=this.props,n=t.passengerId,r=t.onPassengerChange,o=t.groupItem;r&&r({resourceId:o.resourceId,id:n,boxId:o.boxId})}}]),n}(x.ZP),Y=n(35639),ee={m_traveler_ticket:{display:"flex",flexDirection:"row",justifyContent:"space-between"},m_traveler_ticket_right:(0,r.Z)((0,r.Z)({display:"flex",flexDirection:"column",justifyContent:"space-between",borderBottomWidth:1/(0,z.md)(),borderBottomColor:"#ebeff5"},(0,d.Cg)({direction:"bottom",style:"solid"})),{},{paddingBottom:(0,d.Vh)(4),flex:1}),m_traveler_ticket_name:{display:"flex",flexDirection:"row",width:(0,d.Vh)(70),marginRight:(0,d.Vh)(10),alignItems:"center"},m_traveler_ticket_name_icon:{display:"flex",flexDirection:"row",height:"100%",alignItems:"center",marginTop:(0,d.Vh)(-1)},m_traveler_ticket_name_text_wrap:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:(0,d.Vh)(3),width:"100%",height:"100%"},m_traveler_ticket_name_text:{color:"#111",fontSize:(0,d.Vh)(15),lineHeight:(0,d.Nv)((0,d.Vh)(21))},m_traveler_ticket_info:{display:"flex",flexDirection:"row",alignItems:"center",flex:1,width:(0,d.Vh)(0)},m_traveler_ticket_opera:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:(0,d.Vh)(36),fontSize:(0,d.Vh)(24)},m_traveler_ticket_margin:{borderBottomLeftRadius:(0,d.Vh)(10),marginBottom:(0,d.Vh)(4)},m_traveler_ticket_recommendTips:(0,r.Z)((0,r.Z)({},d._),{},{paddingLeft:(0,d.Vh)(10),paddingTop:(0,d.Vh)(4),paddingBottom:(0,d.Vh)(4),height:(0,d.Vh)(25)}),m_traveler_ticket_recommendTips_text:{color:"#555",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)((0,d.Vh)(17)),letterSpacing:(0,d.Vh)(-.16),height:(0,d.Vh)(17)},m_traveler_ticket_recommendTips_detail:{color:"#111",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)((0,d.Vh)(17)),height:(0,d.Vh)(17),marginLeft:(0,d.Vh)(6),letterSpacing:(0,d.Vh)(-.16)}},te={linearGradientStart:{x:1,y:0},linearGradientEnd:{x:0,y:0},linearGradientColor:["rgba(255, 255, 255, 0.5)","rgba(235, 239, 244, 0.56)"]},ne=(0,u.Z)(ee),re=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.index,o=t.passenger,i=t.passengerInfo,a=t.showPassenger,s=void 0===a||a,l=t.handleToEdit,u=t.passengerId,p=t.deleteClickLog,h=t.editClickLog,f=t.selectTraceLog,g=t.editTraceLog,m=t.ABTest,v=t.recommend,_=t.showRecommendPop,y=t.groupItem,x=y.dChoice,b=y.resourceId,Z=x&&x.length>1?n+1:null,I=null===v||void 0===v||null===(e=v.recommendList)||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.showNos)&&(null===e||void 0===e?void 0:e.showNos[0])==(null===i||void 0===i?void 0:i.CardNo)&&(null===e||void 0===e?void 0:e.resourceId)==b}));return o&&o.PassengerID?(0,J.jsxs)(c.G7,{style:ne.m_traveler_ticket,children:[s?(0,J.jsxs)(c.G7,{style:ne.m_traveler_ticket_name,children:[(0,J.jsx)(H.Z,{id:"traveler_ticket_delete_".concat(n),style:ne.m_traveler_ticket_name_icon,onClick:this.handleDeletePassenger.bind(this,"traveler_ticket_delete_".concat(n)),log:p,testID:"traveler_single_delete_".concat(n),devTraceData:f&&f("\u53d6\u6d88\u9009\u4e2d".concat(i.name).concat(o.PassengerID),"\u53d6\u6d88\u51fa\u884c\u4eba\u6309\u94ae"),children:(0,J.jsx)(K.Z,{type:"minus",size:40,color:"#111"})}),(0,J.jsx)(c.G7,{id:"traveler_ticket_edit_".concat(n),style:ne.m_traveler_ticket_name_text_wrap,children:(0,J.jsx)(c.xv,{style:ne.m_traveler_ticket_name_text,children:"\u6e38\u5ba2".concat(Z||"")})})]}):null,(0,J.jsxs)(c.G7,{style:ne.m_traveler_ticket_right,children:[(0,J.jsxs)(c.G7,{style:ne.m_traveler_ticket,children:[(0,J.jsx)(H.Z,{id:"traveler_ticket_edit_".concat(n),style:ne.m_traveler_ticket_info,onClick:l,log:h,testID:"traveler_single_editline_".concat(n),devTraceData:g&&g(i.name),children:(0,J.jsx)(Y.Z,{passengerInfo:i,passengerId:u})}),(0,J.jsx)(H.Z,{id:"traveler_ticket_opera_".concat(n),style:ne.m_traveler_ticket_opera,onClick:l,log:h,testID:"traveler_single_editicon_".concat(n),devTraceData:g&&g(i.name),children:(0,J.jsx)(K.Z,{type:"editWord",size:40,color:"#0066F6"})})]}),m&&I?(0,J.jsx)(c.o,{direction:-90,colors:te.linearGradientColor,start:te.linearGradientStart,end:te.linearGradientEnd,style:ne.m_traveler_ticket_margin,children:(0,J.jsxs)(H.Z,{onClick:function(){_&&_({recommend:Object.assign({},(0,r.Z)({},v),{recommendList:[I]})})},style:ne.m_traveler_ticket_recommendTips,children:[(0,J.jsx)(c.xv,{style:ne.m_traveler_ticket_recommendTips_text,children:"\u8be5\u6e38\u5ba2\u53ef\u4ee5\u4e70"}),(0,J.jsx)(c.xv,{style:(0,d.wh)([ne.m_traveler_ticket_recommendTips_text,{color:"#FF5500"}]),children:"\u66f4\u4fbf\u5b9c"}),(0,J.jsx)(c.xv,{style:ne.m_traveler_ticket_recommendTips_text,children:"\u7684\u7968\uff01"}),(0,J.jsx)(c.xv,{style:ne.m_traveler_ticket_recommendTips_detail,children:"\u8be6\u60c5"}),(0,J.jsx)(K.Z,{type:"forward",size:24,color:"#000"})]})}):null]})]}):null}}]),n}($),oe=n(46499),ie=n(88592),ae=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.group,n=e.plist,r=e.onPassengerChange,o=e.handleToEdit,i=e.handleToList,a=e.changePassenger,s=e.logs,l=e.ABTest,u=e.recommend,d=e.showRecommendPop,p=e.errorTips,h=function(){return(0,ie.mD)("passager-del")},f=function(){return(0,ie.mD)("passager-collect")},g=s.selectTraceLog,m=s.editTraceLog,v=s.toPListTraceLog;return t&&t.length?(0,J.jsxs)(c.G7,{children:[1===t.length&&t[0].dChoice?t[0].dChoice.map((function(e,i){var a=(0,A.ly)(e,n),s=(0,A.v_)(a,t[0]||{});return(0,J.jsx)(re,{onPassengerChange:r,index:i,passengerId:e,passenger:a,passengerInfo:s,deleteClickLog:h,editClickLog:f,handleToEdit:function(){o(t[0],a)},selectTraceLog:g,editTraceLog:m,ABTest:l,recommend:u,showRecommendPop:d,groupItem:t[0]},e)})):null,t.length>1?(0,J.jsx)(oe.Z,{plist:n,group:t,changePassenger:a,handleToList:i,deleteClickLog:h,handleToEdit:function(e){o(e,{})},selectTraceLog:g,toPListTraceLog:v,ABTest:l,recommend:u,showRecommendPop:d,errorTips:p}):null]}):null}}]),n}(Q),se=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.group,r=t.plist,o=t.showList,i=t.changePassenger,a=t.handleToEdit,s=t.handleToList,l=t.logs,u=void 0===l?{}:l,d=t.btnColor,p=t.errorTips,h=t.ABTest,f=t.recommend,g=t.showRecommendPop,m=(t.passengerCheckErr,u.addOrSelectExposureLog),v=u.addButtonExposureLog,_=u.selectClickLog,y=u.selectTraceLog,x=u.clickAddButtonTraceLog;return n&&n.length?(0,J.jsxs)(c.G7,{style:!r||!r.length&&n&&1==n.length?O.m_traveler_layout_only:O.m_traveler_layout,children:[1===n.length?(0,J.jsxs)(c.G7,{style:O.m_traveler_button_list,children:[o&&o.length?o.map((function(t,o){var i=(0,A.ly)(t,r),a=(0,A.X0)(n[0],i),s=e.getButtonType(i),l=e.getErrMsg(i,s);return i&&i.PassengerID&&a?(0,J.jsx)(X,{buttonText:a,type:s,id:i.PassengerID,index:o,click:e.buttonClick.bind(e),exposureLog:"showList_".concat(o,"_").concat(s==b.rU.selected?"selected":"unselect"),clickLog:s===b.rU.incomplete?function(){return(0,ie.mD)("passager-edit")}:function(){return _({applytype:s===b.rU.normal?"click":"uncheck",seq:o+1})},selectTraceLog:y&&y(a),buttonColor:p?"#fff":"",errMsg:l},i.PassengerID):null})):null,r&&0===r.length?(0,J.jsx)(X,{buttonText:"\u65b0\u589e\u6e38\u5ba2",type:b.rU.only,click:this.buttonClick.bind(this),exposureLog:v,clickLog:function(){return(0,ie.mD)("passager-click")},selectTraceLog:x&&x("\u65b0\u589e\u6e38\u5ba2"),buttonColor:d},"add1"):(0,J.jsx)(X,{buttonText:r&&r.length<=3?"\u65b0\u589e":"\u9009\u62e9/\u65b0\u589e",type:b.rU.operation,click:this.buttonClick.bind(this),exposureLog:r&&r.length<=3?v:m,clickLog:r&&r.length<=3?function(){return(0,ie.mD)("passager-click")}:function(){return(0,ie.mD)("passager-add")},selectTraceLog:x&&x(r&&r.length<=3?"\u65b0\u589e":"\u9009\u62e9/\u65b0\u589e"),buttonColor:p?"#fff":""},"add2")]}):null,(0,J.jsx)(c.G7,{children:(0,J.jsx)(ae,{group:n,plist:r,changePassenger:i,onPassengerChange:this.handlePassengerChange.bind(this),handleToEdit:a,handleToList:s,logs:u,ABTest:h,recommend:f,showRecommendPop:g,errorTips:p})})]}):null}}]),n}(F),le=n(30492),ce=n(26758),ue=n(70614),de={underLine:(0,r.Z)({},(0,d.Cg)({width:1,style:"solid",direction:"bottom",color:"#f5190a"})),wrap:(0,r.Z)({display:"flex"},(0,d.o3)((0,d.Vh)(8),(0,d.Vh)(16))),m_limit_text:{color:"red",display:"flex",fontSize:(0,d.Vh)(15)}},pe=(0,u.Z)(de),he=function(e){var t=e.text,n=e.underLine,r=void 0===n||n;return(0,J.jsx)(c.G7,{style:(0,d.wh)([r?pe.underLine:null,pe.wrap]),children:(0,J.jsx)(c.xv,{style:pe.m_limit_text,children:t})})},fe=(0,l.memo)(he),ge=le.Z,me=le.Z,ve=le.Z,_e=le.Z,ye=function(e){(0,a.Z)(l,e);var t=(0,s.Z)(l);function l(){return(0,o.Z)(this,l),t.apply(this,arguments)}return(0,i.Z)(l,[{key:"render",value:function(){var e,t,o,i,a,s,l,u,p,m,v,_=this,y=this.props,x=y.passengerModal,Z=y.passengerList,I=y.changeContact,C=(y.changePassenger,y.errorTips),k=y.appendInfoList,w=y.onAppendInfoChange,T=y.clearAppendInfoError,S=y.setRef,P=y.logs,L=void 0===P?{}:P,N=y.btnColor,j=y.commonInfo,D=y.request,V=y.recommend,E=y.showRecommendPop,A=y.ABTest,F=y.passengerCheckErr,M=y.isAgreeChild,O=(y.onChangeAgree,y.clauseShowPosition),B=y.isClauseError,G=y.clauseLogs,z=y.showMask,U=y.handleErrorToast,q=y.isAuthorizedOversea,W=y.couponLog,K=void 0===W?{}:W,X=y.anchor,Q=y.forceRefreshCoupon,$=y.goLogin,Y=y.isLogin,ee=y.changeMobilePop,te=y.limitType,ne=this.state,re=ne.showCouponLabel,oe=ne.couponTitle,ie=ne.couponUserName,ae=ne.couponCode,le=1===(null===x||void 0===x||null===(e=x.group)||void 0===e?void 0:e.length)&&1===(null===x||void 0===x||null===(t=x.group)||void 0===t?void 0:t[0].choice)&&(null===x||void 0===x?void 0:x.isNewGuest),de=null===F||void 0===F?void 0:F.find((function(e){return null===Z||void 0===Z?void 0:Z.find((function(t){return(null===e||void 0===e?void 0:e.passengerId)==(null===t||void 0===t?void 0:t.PassengerID)}))})),pe=de&&de.errMsg?de.errMsg+"\u4e0d\u7b26\u5408":"",he=pe&&le?pe:(Z&&Z.length?"\u8bf7\u9009\u62e9":"\u8bf7\u586b\u5199")||"",ye=(x&&x.group?x.group[0]:{})||{},xe=ye.choice,be=void 0===xe?0:xe,Ze=ye.dChoice,Ie=void 0===Ze?[]:Ze,Ce=1===(null===x||void 0===x||null===(o=x.group)||void 0===o?void 0:o.length)&&!U,ke=Ce&&1===(null===x||void 0===x||null===(i=x.group)||void 0===i?void 0:i[0].choice)&&x.isNewGuest,we=D.overseas,Te=void 0!==we&&we,Se=!(null===O||void 0===O||null===(a=O.passenger)||void 0===a||!a.isShow);Array.isArray(k)&&k.length>0&&(ge=n(58902).Z),ke&&(ve=n(17094).Z),((null===x||void 0===x?void 0:x.isNewGuest)||A&&Se||Te)&&(me=n(99840).Z),le&&(_e=n(89247).Z);var Pe=te==ue.U.PassengerMobile;return x?(0,J.jsxs)(c.G7,{style:(0,d.wh)([f.passenger]),children:[(0,J.jsxs)(c.G7,{style:(0,d.wh)([C||te==ue.U.PassengerMobile?f.warn_background:{},f.passenger_pure]),children:[(0,J.jsx)(c.G7,{style:(0,d.wh)([f.passenger_title,f.section_padding,le?{}:f.passenger_title_old]),children:(0,J.jsx)(c.G7,{style:f.passenger_title_wrap,testID:"passenger_title_wrap",id:"passenger",ref:function(e){return S&&S("passenger",e)},children:Ce&&2!=(null===x||void 0===x||null===(s=x.group)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.fillInNumberLimit)?null!==D&&void 0!==D&&D.date?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(c.xv,{style:f.passenger_title_text,children:"".concat((null===D||void 0===D||null===(l=D.count)||void 0===l?void 0:l[0])>1&&1==(null===x||void 0===x||null===(u=x.group)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.fillInNumberLimit)?"\u4ec5\u9700\u586b1\u4f4d\u6e38\u5ba2":"\u9700\u586b".concat(be,"\u4f4d\u6e38\u5ba2"))}),be?Ie.length?Ie.length==be?(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(c.G7,{style:f.passenger_title_subtitle_text_no_background_wrap,children:(0,J.jsx)(c.xv,{style:(0,d.wh)([f.passenger_title_subtitle_text_no_background,C?f.error_color:{}]),children:1==(null===x||void 0===x||null===(p=x.group)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.fillInNumberLimit)&&(null===D||void 0===D||null===(m=D.count)||void 0===m?void 0:m[0])>1?"\u5176\u4f59\u6e38\u5ba2\u65e0\u9700\u586b\u5199":null})})}):(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(c.fS.View,{style:(0,d.wh)([f.passenger_title_subtitle,C?f.passenger_title_subtitle_error:{},{transform:[{translateX:this.passengerAniValue}]},"passenger"==X&&C?f.error_translateX:{}]),children:(0,J.jsxs)(c.G7,{style:f.passenger_title_wrap,children:[(0,J.jsx)(c.xv,{style:(0,d.wh)([f.passenger_title_subtitle_text,C?f.error_color:{}]),children:"\u8fd8\u9700\u9009"}),(0,J.jsx)(c.xv,{style:(0,d.wh)([f.passenger_title_subtitle_text_highlight,C?f.error_color:{}]),children:be-Ie.length}),(0,J.jsx)(c.xv,{style:(0,d.wh)([f.passenger_title_subtitle_text,C?f.error_color:{}]),children:"\u4f4d"})]})})}):de&&!pe?null:(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(c.fS.View,{style:(0,d.wh)([f.passenger_title_subtitle,C?f.passenger_title_subtitle_error:{},{transform:[{translateX:this.passengerAniValue}]},"passenger"==X&&C?f.error_translateX:{}]),children:(0,J.jsx)(c.G7,{style:f.passenger_title_wrap,children:(0,J.jsx)(c.xv,{style:(0,d.wh)([f.passenger_title_subtitle_text,C?f.error_color:{}]),children:he})})})}):null]}):(0,J.jsx)(c.xv,{style:f.passenger_title_text,children:"\u9700\u586b1\u4f4d\u6e38\u5ba2"}):(0,J.jsx)(c.xv,{style:f.passenger_title_text,children:"\u51fa\u884c\u4fe1\u606f"})})}),re?(0,J.jsx)(ce.Z,{couponTitle:oe,couponUserName:ie,couponLog:K,couponCode:ae,forceRefreshCoupon:Q,goLogin:$,isLogin:Y},oe+ie):null,ke?(0,J.jsx)(ve,{labelName:"\u6e38\u5ba2"}):null,(0,J.jsx)(c.G7,{style:f.section_padding,children:le?(0,J.jsx)(_e,{groupInfo:ye,passengerInfo:(null===Z||void 0===Z?void 0:Z[0])||{},editPassengerId:null===Z||void 0===Z||null===(v=Z[0])||void 0===v?void 0:v.PassengerID,onSave:function(e){return _.onSaveNewGuest(ye,e)},listType:b.r8.traveler,showWarnBackground:C,onUpdatePassengerFromNewGuest:this.props.onUpdatePassengerFromNewGuest,logs:L,forceUpdate:null===x||void 0===x?void 0:x.forceUpdateNewGuest}):(0,J.jsx)(se,{group:x?x.group:[],plist:Z,showList:x?x.showList:[],changePassenger:this.changePassenger,handleToList:this.handleToList,handleToEdit:this.handleToEdit,logs:L,btnColor:N,errorTips:C,ABTest:A,recommend:V,showRecommendPop:E,passengerCheckErr:F})}),Pe?(0,J.jsx)(fe,{text:"\u6e38\u5ba2\u624b\u673a\u53f7\u9650\u8d2d\uff0c\u5efa\u8bae\u66f4\u6362\u624b\u673a\u53f7\u7801\u6216\u9009\u62e9\u5176\u4ed6\u4ea7\u54c1",underLine:!0}):null]}),ke?(0,J.jsx)(ve,{labelName:"\u8054\u7cfb\u4eba"}):null,(0,J.jsx)(c.G7,{style:f.section_padding,children:(0,J.jsx)(R.Z,(0,r.Z)((0,r.Z)({},x.contactInfo),{},{commonInfo:j,changeContact:I,changeMobilePop:ee,setRef:S,logs:L,isLimitMobile:te==ue.U.ContactMobile,isLimitPassenMobile:Pe}))}),(0,J.jsx)(ge,{setRef:S,appendInfoList:k,onAppendInfoChange:w,clearAppendInfoError:T}),(null===x||void 0===x?void 0:x.isNewGuest)&&(0,J.jsx)(c.G7,{style:f.section_padding,children:(0,J.jsx)(me,{hideAgree:!0,fstyle:h,boldText:"\u8bf7\u5728\u63d0\u4ea4\u8ba2\u5355\u524d\u4ed4\u7ec6\u9605\u8bfb\uff1a"})}),(A&&Se||Te)&&(0,J.jsx)(H.Z,{id:Te?"authorize":"clause",style:f.section_padding,ref:function(e){return S&&S(Te?"authorize":"clause",e)},children:(0,J.jsx)(me,{isAgree:Te?A&&Se?q&&M:q:M,onChangeAgree:this.changeChildAndAuthorize,fstyle:A?g.zr:{},clauseText:Te?A&&Se?"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u3002\u67e5\u770b":"\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f":"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f",ABTest:A,isError:B,logs:A&&Se?G:void 0,position:"\u51fa\u884c\u4eba",tipText:A&&Se?"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f":"\u8bf7\u52fe\u9009",authorize:!!Te})}),!!z&&(0,J.jsx)(c.Au,{style:f.passengerMask,onClick:function(){return U&&U()},activeOpacity:1})]}):null}}]),l}(E)},79214:function(e,t,n){n.d(t,{H:function(){return r},o:function(){return o}});var r=function(e){return e["text"]="text",e["number"]="number",e["date"]="date",e["time"]="time",e["radio"]="radio",e["multiSelect"]="multiSelect",e["hotelText"]="hotelText",e}({}),o=function(e){return e["hotelName"]="hotelName",e["hotelAddress"]="hotelAddress",e["enHotelName"]="enHotelName",e["enHotelAddress"]="enHotelAddress",e}({})},83630:function(e,t,n){n.d(t,{rU:function(){return r},r8:function(){return o},yZ:function(){return i}});var r=function(e){return e["selected"]="selected",e["normal"]="normal",e["operation"]="operation",e["incomplete"]="incomplete",e["only"]="only",e["err"]="err",e}({}),o=function(e){return e["traveler"]="traveler",e["policyholder"]="policyholder",e["insured"]="insured",e["additional"]="additional",e}({}),i=[o.policyholder,o.insured]},19524:function(e,t,n){n.d(t,{$:function(){return r}});var r=function(e){return e[e["contact"]=1]="contact",e[e["mobile"]=2]="mobile",e[e["mustfillEmail"]=3]="mustfillEmail",e[e["email"]=4]="email",e[e["areaCodeMobile"]=6]="areaCodeMobile",e}({})},89247:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(56034)),c=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),r.state={},r}return(0,i.Z)(n)}(l.ZP),u=n(86434),d=n(22586),p=n(2269),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this;return(0,p.jsx)(d.s.Consumer,{children:function(t){return t=t.passengerError,(0,p.jsx)(u.Z,(0,r.Z)((0,r.Z)({},e.props),{},{isFromNewGuest:!0,passengerError:t}))}})}}]),n}(c)},46499:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(56034)),l=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.ZP),c=n(298),u=n(22276),d=n(81876),p=n(45023),h=n(68924),f=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,r.Z)(this,n),o=t.call(this,e),(0,p.Z)((0,d.Z)(o),"state",void 0);var i=o.props,a=i.plist,s=i.groupItem,l=i.recommend;return o.state={passengers:o.getPassengers(a,s,l)},o.goToList=o.goToList.bind((0,d.Z)(o)),o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.plist,n=e.groupItem,r=e.recommend;this.setState({passengers:this.getPassengers(t,n,r)})}},{key:"getPassengers",value:function(e,t,n){if(!e||!e.length||!t)return[];var r=t.dChoice;if(!r||!r.length)return[];var o=Array();return(e||[]).forEach((function(e){r.forEach((function(r,i){if(r&&r==e.PassengerID){var a,s=(0,h.v_)(e,t)||{},l=null===n||void 0===n||null===(a=n.recommendList)||void 0===a?void 0:a.find((function(e){return(null===e||void 0===e?void 0:e.showNos)&&(null===e||void 0===e?void 0:e.showNos[0])==(null===s||void 0===s?void 0:s.CardNo)&&(null===e||void 0===e?void 0:e.resourceId)==(null===t||void 0===t?void 0:t.resourceId)}));if(s){var u={passengerInfo:(0,c.Z)({passengerId:e.PassengerID,recommend:l},s)};o[i]=u}}}))})),o.filter(Boolean)}},{key:"getCardStr",value:function(e){var t=e||{},n=t.passengerInfo,r=n||{},o=r.CardName,i=r.CardNo;return o&&i?"".concat(o," ").concat(i):""}},{key:"getLeftCount",value:function(){var e=this.props.groupItem,t=e||{},n=t.choice,r=this.state.passengers;return r&&r.length?n-r.length:n}},{key:"handleDelete",value:function(e){var t=this.state.passengers,n=this.props,r=n.changePassenger,o=n.groupItem,i=o.resourceId,a=o.boxId;if(t.length&&t[e]){var s=[].concat((0,u.Z)(t.slice(0,e)),(0,u.Z)(t.slice(e+1))),l=s.map((function(e){return e.passengerInfo&&e.passengerInfo.passengerId}));r&&r(i,l,void 0,void 0,{boxId:a})}}},{key:"goToList",value:function(){var e=this.props,t=e.plist,n=e.handleToList,r=e.groupItem,o=e.handleToEdit;t&&t.length?n&&n(r):o(r)}}]),n}(s.ZP),g=n(71557),m=n(59201),v=n(72747),_=n(22586),y=n(50141),x=n(9353),b=n(17366),Z={m_passenger_fill:{display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"nowrap"},m_passenger_fill_first:{marginTop:(0,b.Vh)(-13)},m_passenger_fill_border:(0,c.Z)({},(0,b.Cg)({direction:"bottom",style:"solid",width:b.WI,color:"#eee"})),m_passenger_fill_label:{width:(0,b.Vh)(80),display:"flex",flexDirection:"row",alignItems:"center",boxSizing:"border-box",paddingRight:(0,b.Vh)(19)},m_passenger_fill_label_up:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center"},m_passenger_fill_label_text:{color:"#111",fontSize:(0,b.Vh)(15),paddingTop:(0,b.Vh)(13),paddingBottom:(0,b.Vh)(13),letterSpacing:(0,b.Vh)(-.24),width:"100%"},m_passenger_fill_label_text_up:{color:"#111",fontSize:(0,b.Vh)(15),paddingTop:(0,b.Vh)(13),paddingBottom:(0,b.Vh)(1)},m_passenger_fill_content_main_up:{display:"flex",flexDirection:"row",justifyContent:"space-between"},m_passenger_fill_content_main:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},m_passenger_fill_content:{display:"flex",flexDirection:"column",justifyContent:"center",minWidth:(0,b.Vh)(0)},m_passenger_fill_content_row:{position:"relative",paddingTop:(0,b.Vh)(15),paddingBottom:(0,b.Vh)(15),width:"100%"},m_passenger_fill_content_row_nameIsUp:{flexDirection:"row",justifyContent:"space-between",position:"relative",paddingTop:(0,b.Vh)(8),paddingBottom:(0,b.Vh)(12),width:"100%"},m_passenger_fill_content_row_border:(0,c.Z)({},(0,b.Cg)({direction:"bottom",style:"solid",width:b.WI,color:"#eee"})),m_passenger_fill_filled:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},m_passenger_fill_filled_main:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},m_passenger_fill_delete:{paddingTop:(0,b.Vh)(5),paddingRight:(0,b.Vh)(8),paddingBottom:(0,b.Vh)(5),color:"#bbb",fontSize:(0,b.Vh)(17)},m_passenger_fill_filled_info:(0,c.Z)((0,c.Z)({},b.i3),{},{flex:1,width:(0,b.Vh)(0)}),m_passenger_fill_name:{marginBottom:(0,b.Vh)(2)},m_passenger_fill_name_text:(0,c.Z)({fontSize:(0,b.Vh)(15),color:"#111",width:"100%"},(0,b.Sf)(1)),m_passenger_fill_info_text:(0,c.Z)((0,c.Z)({},(0,b.Sf)(1)),{},{color:"#555",fontSize:(0,b.Vh)(12),marginTop:(0,b.Vh)(4)}),m_passenger_fill_empty:{display:"flex",flexDirection:"row"},m_passenger_fill_empty_text:{display:"flex",alignItems:"center",flexDirection:"column"},m_passenger_fill_text:{color:"#bbb",fontSize:(0,b.Vh)(15)},m_passenger_fill_text_error:{color:"#f5190a",fontSize:(0,b.Vh)(15)},m_passenger_left_text:{fontSize:(0,b.Vh)(15),color:"#ff7700"},m_passenger_fill_forward:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:(0,b.Vh)(20),flex:0},m_traveler_ticket_margin:{marginTop:(0,b.Vh)(8),borderBottomLeftRadius:(0,b.Vh)(10)},m_traveler_ticket_recommendTips:(0,c.Z)((0,c.Z)({},b._),{},{paddingLeft:(0,b.Vh)(10),paddingTop:(0,b.Vh)(4),paddingBottom:(0,b.Vh)(4),height:(0,b.Vh)(25)}),m_traveler_ticket_recommendTips_text:{color:"#555",fontSize:(0,b.Vh)(13),lineHeight:(0,b.Nv)((0,b.Vh)(17)),letterSpacing:(0,b.Vh)(-.16),height:(0,b.Vh)(17)},m_traveler_ticket_recommendTips_detail:{color:"#111",fontSize:(0,b.Vh)(13),lineHeight:(0,b.Nv)((0,b.Vh)(17)),height:(0,b.Vh)(17),marginLeft:(0,b.Vh)(6),letterSpacing:(0,b.Vh)(-.16)},m_passenger_fill_errorTips_line:{width:(0,b.Vh)(303),height:(0,b.Vh)(1),backgroundColor:"#f5190a",position:"absolute",bottom:(0,b.Vh)(-9),left:(0,b.Vh)(0)},m_passenger_fill_errorTips_line_width:{width:(0,b.Vh)(206)}},I={linearGradientStart:{x:1,y:0},linearGradientEnd:{x:0,y:0},linearGradientColor:["rgba(255, 255, 255, 0.5)","rgba(235, 239, 244, 0.56)"]},C=(0,x.Z)(Z),k=n(2269),w=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"renderFarword",value:function(){var e=this.props,t=e.errorKey,n=e.groupIndex,r=e.toPListTraceLog,o=e.groupItem,i=e.fstyle,a=(0,b.Ec)(C,i);return(0,k.jsx)(m.Z,{style:a.m_passenger_fill_forward,onClick:this.goToList,testID:"".concat(t,"_listarrow_group").concat(n),devTraceData:r&&r(o.name),children:(0,k.jsx)(g.Z,{type:"forward",size:32,color:"#111"})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.groupItem,r=t.plist,o=t.deleteClickLog,i=t.errorKey,a=void 0===i?"passengerError":i,s=t.groupIndex,l=(t.noBorder,t.selectTraceLog),u=t.toPListTraceLog,d=t.ABTest,p=t.recommend,h=t.showRecommendPop,f=t.fstyle,x=t.nameIsUp,Z=t.errorTips,w=this.state.passengers,T=(0,b.Ec)(C,f);return n?(0,k.jsxs)(v.G7,{style:(0,b.wh)([T.m_passenger_fill,x?{flexDirection:"column"}:{},!s&&T.m_passenger_fill_first,T.m_passenger_fill_border]),children:[(0,k.jsx)(v.G7,{style:x?T.m_passenger_fill_label_up:T.m_passenger_fill_label,children:(0,k.jsx)(v.xv,{style:x?T.m_passenger_fill_label_text_up:T.m_passenger_fill_label_text,children:n.ticketName||n.name})}),(0,k.jsxs)(v.G7,{style:x?T.m_passenger_fill_content_main_up:T.m_passenger_fill_content_main,children:[(0,k.jsxs)(v.G7,{style:(0,b.wh)([T.m_passenger_fill_content,x?{flex:1}:{}]),children:[w&&w.length?w.map((function(t,r){return t&&t.passengerInfo?(0,k.jsxs)(v.G7,{style:(0,b.wh)([T.m_passenger_fill_content_row,r!=n.choice-1&&e.getLeftCount()>0||r!=w.length-1?T.m_passenger_fill_content_row_border:{}]),children:[(0,k.jsxs)(v.G7,{style:T.m_passenger_fill_filled_main,children:[(0,k.jsxs)(v.G7,{style:(0,b.wh)([T.m_passenger_fill_filled,x?{justifyContent:"space-between"}:{}]),children:[(0,k.jsx)(m.Z,{style:T.m_passenger_fill_delete,onClick:function(){return e.handleDelete(r)},log:o,testID:"".concat(a,"_delete_group").concat(s,"_passen").concat(r),devTraceData:l&&l("\u53d6\u6d88\u9009\u4e2d".concat(t.passengerInfo.name).concat(t.passengerInfo.PassengerID),"\u53d6\u6d88\u51fa\u884c\u4eba\u6309\u94ae"),children:(0,k.jsx)(g.Z,{type:"minus",size:40,color:"#111"})}),(0,k.jsxs)(m.Z,{style:T.m_passenger_fill_filled_info,onClick:e.goToList,testID:"".concat(a,"_list_group").concat(s,"_passen").concat(r),devTraceData:u&&u(n.name),children:[t.passengerInfo.name?(0,k.jsx)(v.G7,{style:T.m_passenger_fill_name,children:(0,k.jsx)(v.xv,{style:T.m_passenger_fill_name_text,numberOfLines:1,children:t.passengerInfo.name})}):null,e.getCardStr(t)?(0,k.jsx)(v.xv,{style:T.m_passenger_fill_info_text,children:e.getCardStr(t)}):null,t.passengerInfo.mobile?(0,k.jsx)(v.xv,{style:T.m_passenger_fill_info_text,children:"\u624b\u673a\u53f7  ".concat(t.passengerInfo.mobile)}):null]})]}),t.passengerInfo.recommend&&d?(0,k.jsx)(v.o,{direction:-90,colors:I.linearGradientColor,start:I.linearGradientStart,end:I.linearGradientEnd,style:T.m_traveler_ticket_margin,children:(0,k.jsxs)(m.Z,{onClick:function(){h&&h({recommend:Object.assign({},(0,c.Z)({},p),{recommendList:[t.passengerInfo.recommend]})})},style:T.m_traveler_ticket_recommendTips,children:[(0,k.jsx)(v.xv,{style:T.m_traveler_ticket_recommendTips_text,children:"\u8be5\u6e38\u5ba2\u53ef\u4ee5\u4e70"}),(0,k.jsx)(v.xv,{style:(0,b.wh)([T.m_traveler_ticket_recommendTips_text,{color:"#FF5500"}]),children:"\u66f4\u4fbf\u5b9c"}),(0,k.jsx)(v.xv,{style:T.m_traveler_ticket_recommendTips_text,children:"\u7684\u7968\uff01"}),(0,k.jsx)(v.xv,{style:T.m_traveler_ticket_recommendTips_detail,children:"\u8be6\u60c5"}),(0,k.jsx)(g.Z,{type:"forward",size:24,color:"#000"})]})}):null]}),(0,k.jsx)(_.s.Consumer,{children:function(e){var n=e[a]&&e[a].find((function(e){if(e.passengerId==t.passengerInfo.passengerId)return!0}));return(0,k.jsx)(y.Z,{errorInfo:n,from:"group"})}})]}):null})):null,this.getLeftCount()>0?(0,k.jsx)(m.Z,{style:(0,b.wh)([T.m_passenger_fill_content_row,x?T.m_passenger_fill_content_row_nameIsUp:{}]),onClick:this.goToList,testID:"".concat(a,"_listfill_group").concat(s),children:(0,k.jsx)(v.G7,{style:T.m_passenger_fill_empty,children:(0,k.jsxs)(v.G7,{style:T.m_passenger_fill_empty_text,children:[(0,k.jsxs)(v.aA,{style:(0,b.wh)([T.m_passenger_fill_text,Z?T.m_passenger_fill_text_error:{}]),children:["".concat(w&&w.length?"\u8fd8":""),"\u9700",r&&r.length?"\u9009\u62e9":"\u586b\u5199",this.getLeftCount(),"\u4f4d",n.name]}),Z?(0,k.jsx)(v.G7,{style:(0,b.wh)([T.m_passenger_fill_errorTips_line,x?{}:T.m_passenger_fill_errorTips_line_width])}):null]})})}):null]}),x&&this.renderFarword()]}),!x&&this.renderFarword()]}):null}}]),n}(f),T=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.group,n=e.plist,r=e.changePassenger,o=e.handleToList,i=e.handleToEdit,a=e.deleteClickLog,s=e.errorKey,l=e.selectTraceLog,c=e.toPListTraceLog,u=e.ABTest,d=e.recommend,p=e.showRecommendPop,h=e.fstyle,f=void 0===h?{}:h,g=e.errorTips,m=t&&t.some((function(e){return e.name.length>8||(e.ticketName||"").length>8}));return t&&t.length?t.map((function(e,h){return(0,k.jsx)(w,{plist:n,group:t,groupItem:e,groupIndex:h,changePassenger:r,handleToList:o,handleToEdit:i,deleteClickLog:a,errorKey:s,noBorder:t.length-1==h,selectTraceLog:l,toPListTraceLog:c,ABTest:u,recommend:d,showRecommendPop:p,fstyle:f,nameIsUp:m,errorTips:g},h)})):null}}]),n}(l)},35639:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(56034)),l=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.ZP),c=n(72747),u=n(298),d=n(9353),p=n(17366),h={m_traveler_info:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",position:"relative",paddingTop:(0,p.Vh)(12),paddingBottom:(0,p.Vh)(8)},m_traveler_info_content:{display:"flex",flexDirection:"row"},m_traveler_info_detail:{display:"flex",flexDirection:"column",justifyContent:"center",flex:1,width:(0,p.Vh)(0)},m_traveler_info_name:(0,u.Z)({fontSize:(0,p.Vh)(15),color:"#111",lineHeight:(0,p.Nv)((0,p.Vh)(19))},(0,p.Sf)(1)),m_traveler_info_name_other:{fontSize:(0,p.Vh)(13),color:"#555",marginTop:(0,p.Vh)(4),lineHeight:(0,p.Nv)((0,p.Vh)(17))},m_traveler_ticket_margin:{marginTop:(0,p.Vh)(8),borderBottomLeftRadius:(0,p.Vh)(10)},m_traveler_ticket_recommendTips:(0,u.Z)((0,u.Z)({},p._),{},{paddingLeft:(0,p.Vh)(10),paddingTop:(0,p.Vh)(4),paddingBottom:(0,p.Vh)(4),height:(0,p.Vh)(25)}),m_traveler_ticket_recommendTips_text:{color:"#555",fontSize:(0,p.Vh)(13),lineHeight:(0,p.Nv)((0,p.Vh)(17)),letterSpacing:(0,p.Vh)(-.16),height:(0,p.Vh)(17),width:(0,p.Vh)(156)},m_traveler_ticket_recommendTips_detail:{color:"#111",fontSize:(0,p.Vh)(13),lineHeight:(0,p.Nv)((0,p.Vh)(17)),height:(0,p.Vh)(17),marginLeft:(0,p.Vh)(1),letterSpacing:(0,p.Vh)(-.16)}},f=(0,d.Z)(h),g=n(50141),m=n(22586),v=n(2269),_=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.passengerInfo,n=e.passengerId;return t?(0,v.jsxs)(c.G7,{style:f.m_traveler_info,children:[(0,v.jsx)(c.G7,{style:f.m_traveler_info_content,children:(0,v.jsxs)(c.G7,{style:f.m_traveler_info_detail,children:[t.name?(0,v.jsx)(c.xv,{style:f.m_traveler_info_name,numberOfLines:1,children:t.name}):null,t.CardName&&t.CardNo?(0,v.jsxs)(c.xv,{style:f.m_traveler_info_name_other,children:[t.CardName," ",t.CardNo]}):null,t.mobile?(0,v.jsxs)(c.xv,{style:f.m_traveler_info_name_other,children:["\u624b\u673a\u53f7 ",t.mobile]}):null]})}),(0,v.jsx)(m.s.Consumer,{children:function(e){if(e&&e.passengerError){var t=e.passengerError.find((function(e){if(e.passengerId==n)return!0}));return(0,v.jsx)(g.Z,{errorInfo:t,from:"single"})}}})]}):null}}]),n}(l)},50141:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(56034)),l=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"getFirstError",value:function(){var e=this.props.errorInfo,t=Object.keys(e).find((function(t){return"passengerId"!=t&&"resid"!=t&&e[t]}));return e[t]}}]),n}(s.ZP),c=n(72747),u=n(71557),d=n(9353),p=n(17366),h={traveler_error:{position:"relative"},error_info:{display:"flex",flexDirection:"row",marginTop:(0,p.Vh)(5.5),alignItems:"center"},error_icon:{marginRight:(0,p.Vh)(5)},error_text:{color:"#f5190a",fontSize:(0,p.Vh)(12)},error_line:{width:"100%",height:(0,p.Vh)(1),backgroundColor:"#f5190a",position:"absolute",bottom:(0,p.Vh)(-9)}},f=(0,d.Z)(h),g=n(2269),m=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.errorInfo,n=(e.from,e.noLine),r=e.line_style,o=e.info_style,i={bottom:-18};return t&&Object.keys(t).length?(0,g.jsxs)(c.G7,{style:f.traveler_error,children:[(0,g.jsxs)(c.G7,{style:(0,p.wh)([f.error_info,o]),children:[(0,g.jsx)(u.Z,{type:"warn-shape",size:32,color:"#f5190b",style:f.error_icon}),(0,g.jsx)(c.xv,{style:f.error_text,children:this.getFirstError()})]}),n?null:(0,g.jsx)(c.G7,{style:(0,p.wh)([f.error_line,i,r])})]}):null}}]),n}(l)},68924:function(e,t,n){n.d(t,{ly:function(){return s},Q4:function(){return l},X0:function(){return c},v_:function(){return u},JV:function(){return d}});var r=n(90983),o=n(22276),i=n(75833),a=n(83692);function s(e,t){var n=(t||[]).find((function(t){return t.PassengerID==e}))||{};return n}function l(e,t,n){var r=0,a=[];return((null===e||void 0===e?void 0:e.group)||[]).forEach((function(e){var s=e.choice,l=e.dChoice,c=void 0===l?[]:l,u=e.resourceId,d=e.boxId,p=(0,i.jX)(d,u);t&&n&&c.forEach((function(e){var r,o=t.find((function(t){return t.PassengerID==e})),a=null===o||void 0===o||null===(r=o.resourceCardInfo[p])||void 0===r?void 0:r.CardType;a&&(0,i.Zx)([n],o,a)})),r+=s,a=[].concat((0,o.Z)(a),(0,o.Z)(c))})),{count:r,list:Array.from(new Set(a))}}function c(e,t){if(!e)return"";var n=e.addPassenger,r=Array();null===n||void 0===n||n.forEach((function(e){1===e.itemId?r.unshift(t.CNName):2===e.itemId?t.ENFirstName&&t.ENLastName&&r.push(t.ENLastName+"/"+t.ENFirstName):3===e.itemId&&(t.CNName&&t.ENFirstName&&t.ENLastName?t.isShowEnglish?r[0]=t.ENLastName+"/"+t.ENFirstName:r[0]=t.CNName:t.CNName?r[0]=t.CNName:t.ENFirstName&&t.ENLastName&&(r[0]=t.ENLastName+"/"+t.ENFirstName))}));var o="";return r=r.filter((function(e){return!!e})),o=r.length>1?r.join("/"):r[0],o||(o=t.CNName||t.ENLastName+"/"+t.ENFirstName||""),o}function u(e,t){var n=t||{},r=n.addPassenger,o=n.CardInfo,a=n.resourceId,s=n.boxId,l=(0,i.jX)(s,a);if(r&&r.length&&e){var u={name:c(t,e),CardName:"",CardNo:"",mobile:""};if(r&&r.length){if((r||[]).forEach((function(t){t&&11==t.itemId&&e.MobilePhone&&(u.mobile=e.MobilePhone)})),e.CommonPassengerCard){var d=e.CommonPassengerCard.find((function(t){var n;return Number(t.CardType)===Number(null===(n=e.resourceCardInfo[l])||void 0===n?void 0:n.CardType)}));if(d){var p=o.find((function(e){return e.cardType==d.CardType}));d&&d.CardNo&&(u.CardNo=d.CardNo),p&&p.name&&(u.CardName=p.name)}}return u}}}function d(e,t,n){var o;e||(e={});var i,s={},l=function(){var t,n=s["idCard"]||(null===(t=e)||void 0===t||null===(t=t.CardSource)||void 0===t||null===(t=t[1])||void 0===t?void 0:t.CardNo),r=!(0,a.SB)(n)&&(0,a.QF)(n);return r||e.Birthday},c=e.resourceCardInfo&&n&&(null===(o=e.resourceCardInfo[n])||void 0===o?void 0:o.CardType),u=(0,r.Z)(t);try{for(u.s();!(i=u.n()).done;){var d=i.value;switch(d){case"name":s["name"]=e.CNName||"".concat(e.ENFirstName&&e.ENLastName?e.ENLastName+"/"+e.ENFirstName:"");break;case"idCard":var p;s["idCard"]=null===(p=e)||void 0===p||null===(p=p.CardSource)||void 0===p||null===(p=p[1])||void 0===p?void 0:p.CardNo;break;case"birth":s["birth"]||(s["birth"]=l());break;case"cardNo":var h,f=e,g=f.CardSource;s["cardNo"]=(null===g||void 0===g||null===(h=g[c])||void 0===h?void 0:h.CardNo)||"";break;case"ageType":s["birth"]||(s["birth"]=l());var m=s["birth"];s["ageType"]=(0,a.uo)(m)?"ADU":"CHI";break;case"isIdCard":s["isIdCard"]=1==c;break;case"CardType":s["CardType"]=c;break;default:s[d]=e[d]}}}catch(e){u.e(e)}finally{u.f()}return s}},93350:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(298),o=n(57042),i=n(24460),a=n(21867),s=n(86066),l=(n(90201),n(72747)),c=n(81876),u=n(45023),d=n(56569),p=n(56034),h=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,c.Z)(r),"height",void 0),r.height=d.Db.get("window").height,r}return(0,i.Z)(n)}(p.ZP),f=n(9353),g=n(39140),m=n(99739),v=n(17366),_=(0,m.ZP)().platform==g.NX.RN,y={m_list_item:(0,r.Z)((0,r.Z)({backgroundColor:"#fff"},(0,v.e6)(0,(0,v.Vh)(12),(0,v.Vh)(10))),{},{borderRadius:(0,v.Vh)(8),padding:(0,v.Vh)(20)}),m_desc_wrap:{marginBottom:(0,v.Vh)(12)},m_text:{fontSize:(0,v.Vh)(14),lineHeight:(0,v.Nv)(20),color:"#666",letterSpacing:_?-.5:0},m_text_center:(0,r.Z)((0,r.Z)({},v._7),(0,v.o3)((0,v.Vh)(12),0)),m_center:{textAlign:"center"},m_black_bold:{fontWeight:"bold",color:"#333",fontSize:(0,v.Vh)(14),lineHeight:(0,v.Nv)(20)},m_orange:{color:"#FF6600"},m_suit_wrap:(0,r.Z)((0,r.Z)({backgroundColor:"#F6F7F9"},(0,v.o3)(0,(0,v.Vh)(16))),{},{borderRadius:(0,v.Vh)(8)}),m_suit_desc:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,v.o3)((0,v.Vh)(12),0)),(0,v.Cg)({direction:"top",width:v.WI,color:"#DDE4ED"})),{},{display:"flex"}),m_arrow_icon:{marginLeft:(0,v.Vh)(4)},m_font_small:{fontSize:(0,v.Vh)(12),color:"#333",marginLeft:1,lineHeight:(0,v.Nv)(19)},m_price:(0,r.Z)((0,r.Z)({},"android"==d.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{color:"#FF6600",fontSize:(0,v.Vh)(17),lineHeight:(0,v.Nv)(20)},d.t4.select({android:{marginBottom:(0,v.Vh)(-1.5)},ios:{marginBottom:(0,v.Vh)(1)}})),m_from:{color:"#FF6600",fontSize:(0,v.Vh)(14),marginLeft:1,lineHeight:(0,v.Nv)(20)},m_single_wrap:(0,r.Z)((0,r.Z)((0,r.Z)({backgroundColor:"#F3F9FF",borderRadius:(0,v.Vh)(4)},v._7),(0,v.o3)((0,v.Vh)(13))),{},{marginTop:(0,v.Vh)(-2)}),m_two_card_wrap:(0,r.Z)({},v.xI),m_ticket_card:{width:(0,v.Vh)(120),borderRadius:(0,v.Vh)(8),display:"flex",flexDirection:"column"},m_gray:{backgroundColor:"#F6F7F9"},m_blue:{backgroundColor:"#F3F9FF"},m_middle:(0,r.Z)((0,r.Z)({width:(0,v.Vh)(70)},v._7),v.i3),m_card_top:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},(0,v.o3)((0,v.Vh)(10),(0,v.Vh)(6),0)),v._7),(0,v.ix)("border-box")),{},{height:"100%",flex:1}),m_card_top_wrap:(0,r.Z)((0,r.Z)((0,r.Z)({},v.xI),v._7),{},{flex:1}),m_card_split:(0,r.Z)((0,r.Z)({height:(0,v.Vh)(12)},v._7),{},{position:"relative",overflow:"hidden"}),m_line:{height:v.WI,backgroundColor:"#DAE2EB",width:(0,v.Vh)(88)},m_line_reco:{backgroundColor:"#CAE5FE"},m_flex_center:(0,r.Z)({},v._7),m_disflex:{display:"flex"},m_card_bottom:(0,r.Z)((0,r.Z)((0,r.Z)({},(0,v.o3)(0,(0,v.Vh)(6),(0,v.Vh)(9))),v.xI),{},{alignItems:"flex-end",justifyContent:"center"}),m_dot:{height:(0,v.Vh)(12),width:(0,v.Vh)(12),backgroundColor:"#fff",borderRadius:(0,v.Vh)(12),position:"absolute",top:"50%",marginTop:(0,v.Vh)(-6)},dot_left:{left:(0,v.Vh)(-6)},dot_right:{right:(0,v.Vh)(-6)},m_color_999:{color:"#999"},m_color_333:{color:"#333"},m_free_text:{color:"#FF6600",fontSize:(0,v.Vh)(14),fontWeight:"bold",lineHeight:(0,v.Nv)(20)},m_font_bold:{fontWeight:"bold"},m_arrow_image:{width:(0,v.Vh)(36),height:(0,v.Vh)(14),marginBottom:(0,v.Vh)(3)},m_flex_row_end:(0,r.Z)((0,r.Z)({},v._),{},{alignItems:"flex-end"})},x=(0,f.Z)(y),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,c.Z)(r),"state",void 0),(0,u.Z)((0,c.Z)(r),"refArr",[]),(0,u.Z)((0,c.Z)(r),"heights",[]),r.state={collapse:!0},r}return(0,i.Z)(n,[{key:"toggle",value:function(){var e=this.state.collapse;this.setState({collapse:!e})}}]),n}(p.ZP),Z=n(59201),I=n(2269),C=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"getSwitchText",value:function(e,t){switch(e){case 1:return"\u8d2d\u4e70".concat(t,":");case 2:return"\u9884\u7ea6".concat(t,":");case 3:return(0,I.jsx)(l.xv,{style:(0,v.wh)([x.m_orange,x.m_font_bold]),children:"\u514d\u8d39\u5165\u56ed\uff0c\u65e0\u9700\u8d2d\u7968"})}}},{key:"renderByType",value:function(){var e=this.props,t=e.RecommendType,n=e.SelectedInfo;return 3==t?this.renderSuitButton():n?this.renderTwoCard():this.renderSiggleButton()}},{key:"renderTwoCard",value:function(){var e=this.props,t=e.SelectedInfo,n=e.RecommendInfo;return(0,I.jsxs)(l.G7,{style:x.m_two_card_wrap,children:[this.renderCard(t,!1),(0,I.jsxs)(l.G7,{style:x.m_middle,children:[(0,I.jsx)(l.Ee,{url:"https://dimg04.c-ctrip.com/images/0AS1c120009ir7xahAD24.png".concat((0,m.ZP)().supportWebp?"_.webp":""),style:x.m_arrow_image}),(0,I.jsx)(l.xv,{style:(0,v.wh)([x.m_text,x.m_color_333]),children:"\u53ef\u6539\u4e3a"})]}),this.renderCard(n,!0)]})}},{key:"renderCard",value:function(e,t){var n=this,r=this.props,o=r.RecommendType,i=r.index,a=e.TicketName,s=e.SubName,c=e.SelectNumber,u=e.Price,d=e.ShowFrom,p=t?"m_color_333":"m_color_999";return(0,I.jsxs)(l.G7,{style:(0,v.wh)([x.m_ticket_card,x[t?"m_blue":"m_gray"]]),children:[(0,I.jsx)(Z.Z,{style:(0,v.wh)([x.m_card_top]),className:"m_card_top"+i,ref:function(e){return n.refArr[t?0:1]=e},activeOpacity:1,children:(0,I.jsx)(l.G7,{style:x.m_card_top_wrap,children:(0,I.jsxs)(l.xv,{style:(0,v.wh)([x.m_text,x.m_font_bold,x.m_center,x[p]]),children:[a+(s?"(".concat(s,")"):""),"\xd7",c,"\u5f20"]})})}),(0,I.jsxs)(l.G7,{style:x.m_card_split,children:[(0,I.jsx)(l.G7,{style:(0,v.wh)([x.m_dot,x.dot_left])}),(0,I.jsx)(l.G7,{style:(0,v.wh)([x.m_line,t?x.m_line_reco:{}])}),(0,I.jsx)(l.G7,{style:(0,v.wh)([x.m_dot,x.dot_right])})]}),(0,I.jsxs)(l.G7,{style:x.m_card_bottom,children:[(0,I.jsxs)(l.xv,{style:(0,v.wh)([x.m_price,t?null:x[p]]),children:["\xa5",u]}),d&&(0,I.jsx)(l.xv,{style:(0,v.wh)([x.m_from,x[p]]),children:"\u8d77"}),c>1&&(2!=o||!t)?(0,I.jsx)(l.xv,{style:(0,v.wh)([x.m_font_small,x[p]]),children:"/\u5f20"}):null,2==o&&t?(0,I.jsx)(l.xv,{style:x.m_free_text,children:"\u514d\u8d39\u9884\u7ea6"}):null]})]})}},{key:"renderSiggleButton",value:function(){var e=this.props,t=e.RecommendInfo,n=e.RecommendType,r=t.TicketName,o=t.SubName,i=t.Price,a=t.ShowFrom;return(0,I.jsx)(l.G7,{style:x.m_single_wrap,children:(0,I.jsxs)(l.G7,{style:(0,v.wh)([x.m_text,x.m_flex_row_end]),children:[(0,I.jsx)(l.xv,{style:x.m_black_bold,children:r+(o?"(".concat(o,")"):"")}),(0,I.jsx)(l.xv,{style:x.m_font_small,children:"\u4ef7\u683c:"}),(0,I.jsxs)(l.xv,{style:x.m_price,children:["\xa5",i]}),2==n?(0,I.jsx)(l.xv,{style:x.m_free_text,children:"\u514d\u8d39\u9884\u7ea6"}):(0,I.jsxs)(I.Fragment,{children:[a&&(0,I.jsx)(l.xv,{style:x.m_from,children:"\u8d77"}),(0,I.jsx)(l.xv,{style:x.m_font_small,children:"/\u5f20"})]})]})})}},{key:"renderSuitButton",value:function(){var e=this.props,t=e.SuitDesc,n=e.RecommendInfo,r=n.TicketName,o=n.SubName,i=this.state.collapse;return t?(0,I.jsxs)(l.G7,{style:x.m_suit_wrap,children:[(0,I.jsx)(Z.Z,{style:x.m_text_center,onClick:this.toggle.bind(this),children:(0,I.jsxs)(l.aA,{style:x.m_text,children:["\u67e5\u770b",(0,I.jsxs)(l.xv,{style:x.m_black_bold,children:[" ",r+(o?"(".concat(o,")"):"")," "]}),"\u9002\u7528\u6761\u4ef6",(0,I.jsx)(l.JO,{style:x.m_arrow_icon,type:i?"arrowdown":"arrowup",size:20})]})}),!i&&(0,I.jsx)(l.G7,{style:x.m_suit_desc,children:(0,I.jsx)(l.xv,{style:x.m_text,children:t})})]}):null}},{key:"render",value:function(){var e=this.props,t=e.showNames,n=e.RecommendType,r=e.RecommendInfo;return(0,I.jsxs)(l.G7,{style:x.m_list_item,children:[(0,I.jsx)(l.G7,{style:x.m_desc_wrap,children:(0,I.jsxs)(l.aA,{style:x.m_text,children:["\u6e38\u5ba2",(0,I.jsxs)(l.xv,{style:x.m_black_bold,children:[" ",t.join("\u3001")," "]}),"\u7b26\u5408",3==n?r.TicketName:"","\u4f18\u5f85\u653f\u7b56\uff0c\u53ef\u4ee5",this.getSwitchText(n,r.TicketName)]})}),this.renderByType()]})}}]),n}(b),k={m_recommend_wrapper:(0,r.Z)((0,r.Z)((0,r.Z)({position:"relative",zIndex:10,backgroundColor:"#EEF1F6",paddingTop:(0,v.Vh)(66),paddingBottom:(0,v.Vh)(60),backgroundSize:"".concat((0,v.Vh)(375,{needPx:!0}),"px ").concat((0,v.Vh)(150,{needPx:!0}),"px"),backgroundRepeat:"no-repeat",backgroundPosition:"right top"},(0,v.ix)("border-box")),{},{display:"flex",flexDirection:"column",height:"100%"},(0,v.E0)((0,v.Vh)(8),(0,v.Vh)(8),0,0)),{},{overflow:"hidden"}),m_img_style:{width:(0,v.Vh)(375),height:(0,v.Vh)(150)},m_scroll_wrap:{flex:1,height:"100%"},m_btns:(0,r.Z)((0,r.Z)((0,r.Z)({position:"absolute",bottom:-1,left:0,right:0},(0,v.o3)((0,v.Vh)(8),(0,v.Vh)(16))),v._),{},{justifyContent:"space-between",backgroundColor:"#fff"}),m_btn:(0,r.Z)((0,r.Z)({width:(0,v.Vh)(163),height:(0,v.Vh)(44),borderRadius:(0,v.Vh)(6)},v._7),(0,v.ix)("border-box")),m_empty:(0,r.Z)({},(0,v.Cg)({width:(0,v.Vh)(1),color:"#2698F7"})),m_btn_text:{fontSize:(0,v.Vh)(17),fontWeight:(0,v.Ue)("500")},m_color_blue:{color:"#0066f6"},m_full:{},m_color_white:{color:"#fff"},m_list_wrap:{paddingBottom:1},m_close_icon:{width:(0,v.Vh)(22),height:(0,v.Vh)(22),position:"absolute",right:(0,v.Vh)(13),top:(0,v.Vh)(13)},m_btn_know:(0,r.Z)((0,r.Z)({width:"100%",height:(0,v.Vh)(44),borderRadius:(0,v.Vh)(6),backgroundColor:"#006FF6"},v._7),(0,v.ix)("border-box")),m_btn_know_text:{fontSize:(0,v.Vh)(17),fontWeight:"bold",color:"#FFFFFF",lineHeight:(0,v.Nv)((0,v.Vh)(21)),height:(0,v.Vh)(21)}},w={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},linearGradientColor:["rgba(255, 165, 10, 1)","rgba(255, 119, 0,1)"]},T=(0,f.Z)(k),S=n(88592),P=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.onConfirm,o=e.recommendList,i=void 0===o?[]:o,a=e.isStopBuy,s=e.total,c=e.logs,u=e.optid,d=i.map((function(e){var t=e.RecommendInfo,n=t||{},r=n.TicketName,o=n.SubName;return r+(o?"(".concat(o,")"):"")})),p=function(e){return(0,S.sO)("tkt_conditioncheck_trace",(0,r.Z)((0,r.Z)({},e),{},{keyid:215874,resourceid:u,suitcrowd:d}))};return(0,I.jsxs)(l.Zy,{url:"https://dimg04.c-ctrip.com/images/0AS2a120009ir7v5s2FB0.png_.webp",style:(0,v.wh)([T.m_recommend_wrapper]),imageStyle:T.m_img_style,children:[(0,I.jsx)(Z.Z,{style:T.m_close_icon,log:function(){return p({type:"close"})},onClick:t,testID:c.recommendExposureLog({type:a?2:1,resourceid:u,suitcrowd:d}),children:(0,I.jsx)(l.JO,{type:"iconCancel",size:44,color:"#333"})}),(0,I.jsx)(l.pf,{style:T.m_scroll_wrap,scrollY:!0,scrollWithAnimation:!0,children:(0,I.jsx)(l.G7,{style:T.m_list_wrap,children:i.map((function(e,t){return(0,I.jsx)(C,(0,r.Z)({index:t},e),t)}))})}),(0,I.jsx)(l.G7,{style:T.m_btns,children:s?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Z.Z,{style:(0,v.wh)([T.m_btn,T.m_empty]),onClick:t,log:function(){return p({type:"left"})},children:(0,I.jsx)(l.xv,{style:(0,v.wh)([T.m_btn_text,T.m_color_blue]),children:a?"\u6682\u505c\u8d2d\u4e70":"\u56de\u9000\u91cd\u65b0\u8d2d\u4e70"})}),(0,I.jsx)(Z.Z,{style:(0,v.wh)([T.m_btn,T.m_full]),onClick:n,log:function(){return p({type:"right"})},children:(0,I.jsx)(l.o,{start:w.linearGradientStart,end:w.linearGradientEnd,direction:90,colors:w.linearGradientColor,style:(0,v.wh)([T.m_btn]),"hover-class":"none",plain:!0,children:(0,I.jsxs)(l.xv,{style:(0,v.wh)([T.m_btn_text,T.m_color_white]),children:["\u7ee7\u7eed\u652f\u4ed8\xa5",s]})})})]}):(0,I.jsx)(Z.Z,{style:T.m_btn_know,onClick:t,children:(0,I.jsx)(l.xv,{style:T.m_btn_know_text,children:"\u6211\u77e5\u9053\u4e86"})})})]})}}]),n}(h)},18403:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(57042),o=n(24460),i=n(21867),a=n(86066),s=(n(90201),n(72747)),l=n(298),c=n(9353),u=n(17366),d={m_reservation_wrapper:{paddingTop:(0,u.Vh)(12),paddingLeft:(0,u.Vh)(28),paddingRight:(0,u.Vh)(28),paddingBottom:(0,u.Vh)(8),backgroundColor:"#fff",position:"relative"},m_reservation_wrapper_bottom:{paddingBottom:(0,u.Vh)(16)},m_reservation_title:{fontSize:0,marginBottom:(0,u.Vh)(5)},m_reservation_title_text:{color:"#111",fontSize:(0,u.Vh)(17),fontWeight:(0,u.Ue)("500"),lineHeight:(0,u.Nv)((0,u.Vh)(21))},m_reservation_content:(0,l.Z)({},u._),m_reservation_alignbottom:{alignItems:"flex-end"},m_reservation_aligntop:{alignItems:"flex-start"},m_reservation_content_left:{flex:1,display:"flex",flexDirection:"column"},m_reservation_content_right:{flexShrink:0},m_reservation_text:{fontSize:(0,u.Vh)(13),color:"#111",lineHeight:(0,u.Nv)(18),fontFamily:"PingFang SC"},m_reservation_label:{fontWeight:(0,u.Ue)("500")},m_reservation_renderitem:{marginBottom:(0,u.Vh)(5),fontSize:0},m_reservation_renderitem_high:{marginBottom:(0,u.Vh)(7)},m_reservation_renderitem_last:{marginBottom:1},m_reservation_option_text:{color:"#111",fontFamily:"PingFang SC",fontSize:(0,u.Vh)(13),lineHeight:(0,u.Nv)((0,u.Vh)(18)),flexWrap:"wrap"},m_font_400:{fontWeight:"400"},m_reservation_option_text_split:{color:"#ccc",fontSize:(0,u.Vh)(12),fontWeight:(0,u.Ue)("200"),marginTop:(0,u.Vh)(0),marginBottom:(0,u.Vh)(0),fontFamily:"PingFang SC"},flex:(0,l.Z)((0,l.Z)({},u._),{},{flexWrap:"wrap"}),m_more_btn:(0,l.Z)((0,l.Z)((0,l.Z)({},u._),(0,u.o3)(0,(0,u.Vh)(4),0,(0,u.Vh)(12))),{},{height:(0,u.Vh)(18),justifyContent:"flex-end"}),m_reservation_option:{maxWidth:(0,u.Vh)(264)},m_reservation_date_change:{color:"#0066F6",lineHeight:(0,u.Nv)(17),textAlign:"right",fontSize:(0,u.Vh)(13),marginLeft:(0,u.Vh)(8),flexShrink:(0,u.i4)(0)},m_reservation_change_btn:(0,l.Z)((0,l.Z)({},u._),{},{width:(0,u.Vh)(56),justifyContent:"flex-end"}),m_reservation_split:{position:"absolute",bottom:0,left:(0,u.Vh)(28),right:(0,u.Vh)(28),height:u.WI,backgroundColor:"#EBEFF5"},m_max_line_two:{maxHeight:36,overflow:"hidden"}},p={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:.5,y:0},linearGradientColor:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"]},h=(0,c.Z)(d),f=n(81876),g=n(45023),m=n(56034),v=n(2446),_=n(56569),y=n(57113),x=n(35409),b=n(61252),Z=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(e){var n;return(0,r.Z)(this,s),n=t.call(this,e),(0,g.Z)((0,f.Z)(n),"poplayerHeight",.8*_.Db.get("window").height-_.iO),(0,g.Z)((0,f.Z)(n),"state",void 0),n.state={finishIndex:{}},n}return(0,o.Z)(s,[{key:"componentDidMount",value:function(){y.Z.add("skuPopLayer",x.Z,{props:{isOpened:!1}})}},{key:"componentWillReceiveProps",value:function(e){e.refreshCount!=this.props.refreshCount&&this.setState({finishIndex:{}})}},{key:"onChangeClick",value:function(){var e=this,t=this.props,r=t.request,o=t.from,i=void 0===o?"booking":o,a=n(39328).Z;this.props.onClickCallback&&this.props.onClickCallback();var s=r.isCrossDate,l=r.boxMap,c=r.optid,u=r.firstLevelIds,d=r.naquhuaLabel,p=[];s&&(p=l[c[0]].map((function(e){return e.date}))),v.ZP.show({props:{name:"skuPopLayer",popHeight:this.poplayerHeight,isScrollView:!1,isShowHeader:!1},child:a,childProps:{pageId:(0,b.dD)(),request:{date:p.length?p.join("|"):r.date,token:decodeURIComponent(r.token),optid:"resource"==i?r.optid:[r.optid[0]],usePage:"detail",aggregation:!0,spotid:r.spotid,peopleId:r.peopleId,isUseInBooking:!0,label:d,firstLevelIds:u?u.split("|"):null,isScanShelf:r.isScanShelf},otherParams:{salesPropertyIds:r.salesPropertyIds?r.salesPropertyIds.split("|"):void 0,showPoplayerTime:Date.now()},onNextCallBack:function(t){e.props.changeSkuData&&e.props.changeSkuData(t),v.ZP.hide()},onClose:function(){v.ZP.hide()},hasAssistCompRender:!0}})}},{key:"onLayoutFinish",value:function(e){var t=this.state.finishIndex;t[e]=!0,this.setState({finishIndex:t})}}]),s}(m.ZP),I=n(36472),C=n(59201),k=n(2269),w=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"renderMoreButton",value:function(e){var t=this.props.logs,n=void 0===t?{}:t,r=n.validUnfoldExposureLog;return(0,k.jsx)(s.o,{direction:90,colors:p.linearGradientColor,start:p.linearGradientStart,end:p.linearGradientEnd,style:h.m_more_btn,children:(0,k.jsx)(s.xv,{testID:r,style:{display:"flex"},children:(0,k.jsx)(s.JO,{type:e?"arrowdown":"arrowup",size:(0,u.Vh)(24),color:"#006FF6"})})})}},{key:"rednerChangeBtn",value:function(){var e=this.props.logs,t=void 0===e?{}:e,n=t.changeTraceLog;return(0,k.jsx)(s.G7,{style:h.m_reservation_change_btn,children:(0,k.jsxs)(C.Z,{activeOpacity:1,onClick:this.onChangeClick.bind(this),devTraceData:n,style:h.flex,testID:"sku_change_btn",children:[(0,k.jsx)(s.xv,{style:h.m_reservation_date_change,children:"\u4fee\u6539"}),(0,k.jsx)(s.JO,{type:"forward",size:32,color:"#0066F6"})]})})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.title,o=n.request,i=void 0===o?{}:o,a=i.isShowChangeButton,l=void 0!==a&&a,c=i.boxMap,d=void 0===c?{}:c,p=i.optid,f=void 0===p?[]:p,g=n.logs,m=void 0===g?{}:g,v=n.priceMode,_=n.bottomWider,y=void 0===_||_,x=n.renderLine,b=void 0===x?[]:x,Z=n.refreshCount,C=m.validUnfoldClickLog,w=m.validUnfoldExposureLog,T=this.state.finishIndex,S=null===(e=d[f[0]])||void 0===e?void 0:e.length;return(0,k.jsxs)(s.G7,{style:(0,u.wh)([h.m_reservation_wrapper,y?h.m_reservation_wrapper_bottom:{}]),children:[!!r&&(0,k.jsx)(s.G7,{style:h.m_reservation_title,children:(0,k.jsx)(s.xv,{style:h.m_reservation_title_text,children:r})}),(0,k.jsxs)(s.G7,{style:(0,u.wh)([h.m_reservation_content,"U"!=v||S?h.m_reservation_aligntop:h.m_reservation_alignbottom]),children:[(0,k.jsx)(s.G7,{style:h.m_reservation_content_left,children:b.map((function(e,n){var r=e.text,o=e.longText,i=e.label,a=e.salepropsList,l=b[n+1],c=o?s.G7:s.aA;return(0,k.jsxs)(c,{style:(0,u.wh)([h.m_reservation_renderitem,i?h.m_reservation_renderitem_high:{},n==b.length-1||null!==l&&void 0!==l&&l.longText?h.m_reservation_renderitem_last:{},!o||T[n]?{}:h.m_max_line_two]),children:[i?(0,k.jsx)(s.xv,{style:(0,u.wh)([h.m_reservation_label,h.m_reservation_text]),children:i}):null,r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(s.xv,{style:h.m_reservation_text,children:r}),!(null===a||void 0===a||!a.length)&&(0,k.jsx)(s.xv,{style:h.m_reservation_option_text_split,children:"  |  "})]}):null,o?(0,k.jsx)(I.Z,{message:o,logs:{clickDownLog:C,clickDownExposureLog:w},lineHeight:18,lineNum:2,fstyle:{m_textcollapse:{marginTop:0},m_textcollapse_content_text:{color:"#111",fontSize:(0,u.Vh)(13)}},onLayoutFinish:function(){return t.onLayoutFinish(n)},renderMoreButton:t.renderMoreButton.bind(t)}):null,a&&a.map((function(e,t){return(0,k.jsxs)(s.aA,{style:(0,u.wh)([h.m_reservation_option]),children:[(0,k.jsx)(s.xv,{style:(0,u.wh)([h.m_reservation_option_text,h.m_font_400]),children:e}),t!=a.length-1&&(0,k.jsx)(s.xv,{style:h.m_reservation_option_text_split,children:"  |  "})]},"key_".concat(t))}))]},n+"-".concat(o))}))}),l&&(0,k.jsx)(s.G7,{style:h.m_reservation_content_right,children:this.rednerChangeBtn()})]}),!y&&(0,k.jsx)(s.G7,{style:h.m_reservation_split})]},Z)}}]),n}(Z)},28150:function(e,t,n){n.d(t,{X:function(){return r}});var r="booking-ssr"},35184:function(e,t,n){n.d(t,{m:function(){return i},k:function(){return a}});var r=n(79301),o=n(95308),i=function(){return!0},a=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"skip"});case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},64065:function(e,t,n){var r=n(298);t["Z"]=function(e,t){var n=e.date,o=e.optid,i=e.spotid,a=o.map((function(e,t){return{id:e,idType:0==t?3:5}})),s={searchParams:a,useDate:n,scenicSpotId:i,bizLineType:4,tags:[{key:"addsale",value:"displayOptimize"},{key:"addsale",value:"bi"},{key:"customerTemplate",value:"nolimit"}]},l=(0,r.Z)({},t.head);return{request:Object.assign({},(0,r.Z)((0,r.Z)({},t),{},{head:l}),s),actionUrl:"/restapi/soa2/21052/searchAdditionalResource"}}},56991:function(e,t){t["Z"]=function(e,t){var n,r,o=null===e||void 0===e||null===(n=e.optid)||void 0===n?void 0:n[0],i=(null===e||void 0===e?void 0:e.productId)||(null===e||void 0===e||null===(r=e.productInfo)||void 0===r||null===(r=r[o])||void 0===r?void 0:r.productId);return{request:Object.assign({},{productId:Number(i)||0},t),actionUrl:"/restapi/soa2/21052/getContractInfo"}}},82015:function(e,t,n){var r=n(121);t["Z"]=function(e,t){var n;t=(0,r.I8)(t);var o=[];e.optid.forEach((function(e){o.push({id:e,idType:3})}));var i=[{name:"needSignDateTemplate",value:"true"}];return null!==(n=t.clientInfo)&&void 0!==n&&n.extension?t.clientInfo.extension.push({name:"needSignDateTemplate",value:"true"}):t.clientInfo?t.clientInfo.extension=i:t.clientInfo={extension:i},{request:Object.assign({},t,{needInsuranceTemplates:!0,searchParams:o}),actionUrl:"/restapi/soa2/21052/getCustomerTemplate"}}},66e3:function(e,t,n){var r=n(64708);t["Z"]=function(e,t,n){var o,i=[];e.boxMap&&e.boxMap[e.optid[0]]&&e.boxMap[e.optid[0]].length?e.boxMap[e.optid[0]].map((function(t){var o=(0,r.TO)(t.resourceId,n),a=o.subProductId;i.push({resourceId:t.resourceId,useStartDate:t.date,useEndDate:t.date,quantity:e.count[0],productId:a})})):i.push({resourceId:e.optid[0],useStartDate:e.date,useEndDate:e.endDate?e.endDate:e.date,quantity:e.count[0],productId:e.productInfo?null===(o=e.productInfo[e.optid[0]])||void 0===o?void 0:o.productId:""});return{request:Object.assign({},t,{resourceInfos:i,shoppingId:(new Date).getTime().toString()}),actionUrl:"/restapi/soa2/25848/firstCanBooking"}}},31097:function(e,t,n){var r=n(298);t["Z"]=function(e,t,n,o,i){var a,s=null===n||void 0===n||null===(a=n.calendar[0])||void 0===a?void 0:a.date,l=e.date||s,c={queryCancelFlag:!1};o&&(c=(0,r.Z)({queryCancelFlag:!0},i));var u=(0,r.Z)((0,r.Z)({},t),{},{head:{extension:[{name:"serverVersion",value:"1.0"}]}});return{request:Object.assign({},u,{searchParams:function(){var t=[];return e.optid.map((function(e){t.push({id:e,idType:4})})),t}(),tagInfos:[{key:"version",value:"B"}],useDate:l,scenicSpotId:e.spotid},c),actionUrl:"/restapi/soa2/21052/searchInsurance"}}},68909:function(e,t,n){var r=n(121);t["Z"]=function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2",i=(0,r.I8)(t);return i.clientInfo.extension=[{name:"nocache"},{name:"productId",value:e.productId||(null===(n=e.productInfo)||void 0===n||null===(n=n[String(e.optid[0])])||void 0===n?void 0:n.productId)}],{request:Object.assign({},i,{pageType:o},{tags:[{key:"commonNotice",value:"newLogic"}]}),actionUrl:"/restapi/soa2/14580/noticeInfoGet"}}},47045:function(e,t){t["Z"]=function(e,t,n){return{request:Object.assign({},n,{useDate:e.date,resourceIds:t}),actionUrl:"/restapi/soa2/21052/getOrderExtendInfo"}}},47391:function(e,t){t["Z"]=function(e,t){return{request:Object.assign({},t,e),actionUrl:"/restapi/soa2/21052/checkSaleLimit",timeout:200}}},84578:function(e,t,n){n.d(t,{Fs:function(){return be},ZP:function(){return Ie},Rv:function(){return Ze}});var r=n(298),o=n(57042),i=n(24460),a=n(45023),s=n(79301),l=n(95308),c=n(70501),u=n(12232),d=n(82015),p=function(e,t){return{request:Object.assign({},t,{ParameterList:[{Key:"BizType",Value:"TTD"}]}),actionUrl:"/restapi/soa2/15486/getCommonInfo"}},h=function(e,t,n){return{request:Object.assign({},e,t),actionUrl:"/restapi/ttd/bff/qconfig",proxy:n}},f=n(22276),g=n(64571),m=function(e,t){var n;if(null!==e&&void 0!==e&&e.isscan){var o,i=g.ZP.mkt.getUnion(),a=i.allianceid,s=i.sid;t.head=(0,r.Z)((0,r.Z)({},t.head),{},{extension:[].concat((0,f.Z)((null===(o=t.head)||void 0===o?void 0:o.extension)||[]),[{name:"aid",value:String(a)},{name:"sid",value:String(s)}])})}var l={};return null!==e&&void 0!==e&&null!==(n=e.optid)&&void 0!==n&&n.length&&(l.resourceIds=e.optid,l.configType=1),{request:Object.assign((0,r.Z)({hideForScan:{needHide:!0}},l),t),actionUrl:"/restapi/soa2/21052/getConfig"}},v=n(31097),_=n(47045),y=n(68909),x=n(15318),b=n(64065),Z=n(99728),I=n(88592),C=n(56991),k=n(58465),w=function(e){return!1},T=n(52066),S=n(61252),P=n(99739),L=n(28570),N=n(56569),j=n(72613),D=n(39140),V=n(25311),E=n(26382),R=n(32180)["window"],A=function(e){return e["key"]="ttd_dev_ssr_lcp",e[e["id"]=221844]="id",e["type"]="devtrace",e}(A||{}),F=function(){return R},M=function(e){return F().ssrTimeRecorders[e]},O=function(e,t){var n=t.domainLookupStart,r=t.fetchStart;e.setRecord("cacheTime",r,n)},B=function(e,t){var n=t.domainLookupEnd,r=t.domainLookupStart;e.setRecord("dnsTime",r,n)},G=function(e,t){var n=t.connectEnd,r=t.connectStart;e.setRecord("tcpTime",r,n)},H=function(e,t){e.setRecord("htmlRenderTime",t.responseEnd,F()._beginTime)},z=function(e,t){e.setRecord("htmlResolveTime",t.responseEnd,F().resolveHtmlTime)},U=function(e,t){e.setRecord("serverStartTime",t.navigationStart,F().__serverStart)},q=function(e,t){0!==t.redirectStart?e.setRecord("gapInStartAndRedirect",t.navigationStart,t.redirectStart):e.setRecord("gapInStartAndRedirect",0,0)},W=function(e,t){e.setRecord("redirectTime",t.redirectStart,t.redirectEnd)},K=function(e,t){0!==t.redirectEnd?e.setRecord("gapInRedirectAndFetch",t.redirectEnd,t.fetchStart):e.setRecord("gapInRedirectAndFetch",t.navigationStart,t.fetchStart)},J=function(e,t){var n=t.navigationStart,r=t.redirectEnd,o=(t.redirectStart,t.fetchStart);0!==r?e.setRecord("startToFetchStartTime",r,o):e.setRecord("startToFetchStartTime",n,o)},X=function(e,t){e.setRecord("requestTime",t.requestStart,t.responseStart)},Q=function(e,t){e.setRecord("responseTime",t.responseStart,t.responseEnd)},$=function(e,t){e.setRecord("connectToRequest",t.connectEnd,t.requestStart)},Y=function(e,t){e.setRecord("httpTime",t.navigationStart,t.requestStart)},ee=function(e){var t=(0,j.Z)(e);if(Object.assign(t,M(e)),F().performance&&F().performance.timing){var n=F().performance.timing;q(t,n),W(t,n),K(t,n),J(t,n),O(t,n),B(t,n),G(t,n),$(t,n),Y(t,n),X(t,n),Q(t,n),H(t,n),z(t,n),U(t,n)}setTimeout((function(){(0,V.fU)((0,r.Z)((0,r.Z)({key:A.key,id:A.id},t.viewAllRecords()),{},{jsonData:{timestamp:(0,r.Z)({},t.getRecordStamps())}}),A.type)}),0)},te=n(28150),ne=n(66e3),re=n(55242),oe=n(92481),ie=n(64708),ae=n(14830),se=n(99213),le=n(75833),ce=n(93065),ue=n(91410),de=n(86685),pe=n(91044),he=n(6376),fe=n(79239),ge=(0,j.Z)(te.X),me=(0,j.Z)("booking"),ve={},_e={},ye=(0,P.ZP)(),xe=ye.platform==D.NX.RN,be={save:function(e){Object.assign(ve,e)},load:function(e){return ve[e]},clear:function(){ve&&(ve={})},saveToLocal:function(e){T.Z.set("booking-cache",ve,3600),T.Z.set("booking-state",e,3600)},restoreFromLocal:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.Z.get("booking-cache");case 2:return t=e.sent,e.next=5,T.Z.get("booking-state");case 5:return n=e.sent,T.Z.clear("booking-state"),ve=t,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Ze={save:function(e){Object.assign(_e,e)},load:function(e){return _e[e]},clear:function(){_e&&(_e={})}},Ie=function(){function e(t){var n,r,i=this;if((0,o.Z)(this,e),(0,a.Z)(this,"target",void 0),(0,a.Z)(this,"timer",void 0),(0,a.Z)(this,"nonMemberLogin",void 0),(0,a.Z)(this,"hasSendSecond",!1),(0,a.Z)(this,"updateCoupon",!1),be.clear(),this.target=t,this.timer=(new Date).getTime(),this.nonMemberLogin=void 0,!(0,N.rI)())if("H5"!=this.target.platform||ye.isInApp||(0,N.ud)()&&(null===(n=t.state)||void 0===n||null===(n=n.request)||void 0===n||!n.isNotCtripMini)||t.pageConfig.wxh5Pay)(0,u.Z)((function(t){if("0"==(null===t||void 0===t?void 0:t.ReturnCode)){var n,r=null===(n=i.target.state)||void 0===n?void 0:n.request,o=!r.aggregation;e.init(i,o)}else{var a=xe&&!(0,N.gn)()?300:0;setTimeout((function(){return(0,L.Sw)()}),a)}}),!1,{ignoreMini:!(null===(r=t.state)||void 0===r||null===(r=r.request)||void 0===r||!r.isNotCtripMini),checkLoginStatusFromServer:ye.isInMini});else{var s,l=g.ZP.user.isLogin();l||g.ZP.user.isNonUser()||(this.nonMemberLogin=new Promise((function(e){return g.ZP.user.nonMemberLogin({callback:function(t){e(t),"0"!=(null===t||void 0===t?void 0:t.returncode)?(0,S.gp)({type:"booking_nonMember_fail",body:{title:"\u521d\u59cb\u5316\u533f\u540d\u767b\u5f55, \u9519\u8bef\u7801\uff1a".concat((null===t||void 0===t?void 0:t.returncode)||"")}}):i.hasSendSecond&&(i.updateCoupon=!0)}})})));var c=null===(s=this.target.state)||void 0===s?void 0:s.request,d=!(null!==c&&void 0!==c&&c.aggregation);e.init(this,d,l)}}return(0,i.Z)(e,[{key:"second",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n,o,i,a,l){var u,h,f,g,I,k,w,S,P,L,j,E,R,A,F,M,O,B,G,H,z,U,q,W,K,J,X,Q,$,Y=this;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.target.state.ABTest){e.next=3;break}return e.next=3,this.setPassengerInfo(t,o,a);case 3:return I=this.target.header,k=t.sku,w=t.coupon,S=t.request,P=t.passengerModal,L=t.passengerList,j=be.load("cacheState"),E=be.load("secondCacheData"),R={},A=[],R.getContractInfo=A.length,A.push((0,C.Z)(S,I)),F=["coupon","crossCouponParams","contract"],null!==(u=S)&&void 0!==u&&null!==(u=u.optid)&&void 0!==u&&u.length&&(R.getNoticeInfo=A.length,A.push((0,y.Z)(S,this.target.header,"2")),S.isCrossDate||(R.getInsurance=A.length,A.push((0,v.Z)(S,I,k))),F=F.concat(["insurance","headertips","bargain"])),S&&(S.date||S.isCrossDate)&&(this.hasSendSecond=!0,R.getOrderExtendInfo=A.length,A.push((0,_.Z)(S,null===(M=S)||void 0===M?void 0:M.optid,this.target.header)),F.push("appendInfo"),R.getSalesPromotion=A.length,A.push((0,x.Z)(S,I,k,null===j||void 0===j?void 0:j.additionalSale)),null!==(O=S.boxMap[S.optid[0]])&&void 0!==O&&O.length||(R.getAdditionalSale=A.length,A.push((0,b.Z)(S,I)),F.push("additionalSale")),null!==E&&void 0!==E&&null!==(B=E.additionOptid)&&void 0!==B&&B.length&&(R.getCustomerTemplate=A.length,A.push((0,d.Z)({optid:null===E||void 0===E?void 0:E.additionOptid},this.target.header))),G=k||{},H=G.calendar,z=void 0===H?[]:H,U=z.find((function(e){var t;return e.date===(null===(t=S)||void 0===t?void 0:t.date)})),!this.target.state.ABTest||U&&U.hasReservation||(R.getFirstCanBooking=A.length,A.push((0,ne.Z)(S,I,k)))),"H5"==this.target.platform&&(R.getConfig=A.length,F.push("config"),A.push(m(S,I))),!l||null!==(h=P)&&void 0!==h&&null!==(h=h.contactInfo)&&void 0!==h&&h.mobile||(R.getCommonInfo=A.length,F.push("commonInfo"),A.push(p(S,I))),me.record("Secondreq"),e.next=20,this.target.http({list:A,needDevTrace:!0,devTraceData:{attrs:this.target.devTraceKeyData,scene:"[\u6b21\u5c4f]"}});case 20:if(q=e.sent,me.recordEnd("Secondreq"),q){e.next=24;break}return e.abrupt("return");case 24:if(!1!==(null===(f=q[R.getFirstCanBooking])||void 0===f||null===(f=f.canBookingResult)||void 0===f?void 0:f.isSuccess)){e.next=28;break}return(0,Z.LK)(),this.target.confirm.show({content:null===(W=q[R.getFirstCanBooking])||void 0===W||null===(W=W.canBookingResult)||void 0===W?void 0:W.message,btnCallBack:[function(){Y.target.pop()}],btnOK:["\u77e5\u9053\u4e86"]}),e.abrupt("return");case 28:return this.target.updateStatus>0&&(S=this.target.state.request,P=this.target.state.passengerModal,L=this.target.state.passengerList,w=this.target.state.coupon),K={getInsurance:q[R.getInsurance],getCustomerTemplate:function(e){var t;q[R.getCustomerTemplate]&&q[R.getCustomerTemplate].customerTemplates&&(null===E||void 0===E||null===(t=E.additionOptid)||void 0===t||t.map((function(e,t){q[R.getCustomerTemplate].customerTemplates[t].resourceId=e})));return(n||[]).concat((null===q||void 0===q||null===(e=q[R.getCustomerTemplate])||void 0===e?void 0:e.customerTemplates)||[])}(),getProductInfo:o,getScenicSpotInfo:i,getNoticeInfo:null===q||void 0===q||null===(g=q[R.getNoticeInfo])||void 0===g?void 0:g.riskPolicyInfos,getContractInfo:q[R.getContractInfo],getOrderExtendInfo:q[R.getOrderExtendInfo]&&q[R.getOrderExtendInfo].resourceOrderExtendInfos,getSalesPromotion:q[R.getSalesPromotion],getAdditionalSale:q[R.getAdditionalSale],getConfig:q[R.getConfig],getCommonInfo:q[R.getCommonInfo]},be.save({getCustomerTemplate:K.getCustomerTemplate}),K.getSalesPromotion&&be.save({getSalesPromotion:K.getSalesPromotion}),K.getOrderExtendInfo&&be.save({getOrderExtendInfo:K.getOrderExtendInfo}),K.getScenicSpotInfo&&be.save({getScenicSpotInfo:K.getScenicSpotInfo}),K.getNoticeInfo&&be.save({getNoticeInfo:K.getNoticeInfo}),J=c.Z.getFormatByModules(S,K,F,{passengerList:L,passengerModal:P,sku:k,header:I,coupon:w}),J.request=S,J.passengerModal=P,J.passengerList=L,j&&(this.timer=(new Date).getTime(),J=(0,Z.hD)(j,J),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u7f13\u5b58+\u6b21\u5c4f\u6570\u636e\u5408\u5e76\u8017\u65f6:".concat((new Date).getTime()-this.timer,"ms"),"color:yellow"),(0,Z.LK)(),be.save({cacheState:null})),e.next=42,T.Z.get("TTD_BOOKING_CACHE_RETAIN_FLAG");case 42:return X=e.sent,Q=(new Date).getTime(),$={isClose:!1},null!==X&&void 0!==X&&X.time&&Math.floor((Q-X.time)/1e3)<86400&&($.isClose=!0),this.target.devTraceType="secondInit",me.record("Seconrender"),this.target.afterFetch((0,r.Z)((0,r.Z)({},J),{},{retainFlag:$,isLogin:l}),{fetchIndex:2,cb:function(){me.recordEnd("Seconrender"),xe?(0,V.fU)((0,r.Z)((0,r.Z)({key:"ttd_dev_pageload_render",id:220287},me.viewRecords(["Loadjs","Firstreq","Firstrender","Secondreq","Seconrender"])),{},{jsonData:{timestamp:me.getRecordStamps()}}),"devtrace"):ye.platform==D.NX.H5&&(0,N.vY)()&&ee(te.X),Y.target.afterCb(2)}}),e.next=51,this.nonMemberLogin;case 51:this.third((0,r.Z)((0,r.Z)({},this.target.state),J));case 52:case"end":return e.stop()}}),e,this)})));function t(t,n,r,o,i,a){return e.apply(this,arguments)}return t}()},{key:"third",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,o;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.request,r=n.additionCount,o=void 0===r?[]:r,o.length||this.updateCoupon){e.next=4;break}return e.abrupt("return");case 4:this.target.changeKey=Math.random(),(0,de.nh)(this.target,!0,void 0,void 0,!1,{state:t});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchQconfig",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t,n,r,o;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.Z.get("ttd-booking-qconfig");case 2:return t=e.sent,t&&(this.target.qconfig=t),e.next=6,this.target.http({list:[h(this.target.header,{params:{keys:["booking_block_trace_code_mapping"]}})],needDevTrace:!0,devTraceData:{attrs:this.target.devTraceKeyData,scene:"[qconfig]"}});case 6:n=e.sent,r={getQconfig:n[0].Response},o=c.Z.getFormatByModules(this.target.state.request,r,["qconfig"]),this.target.qconfig=o.qconfig,T.Z.set("ttd-booking-qconfig",this.target.qconfig,86400);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPassengerInfo",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n,o){var i,a,l,c,u,d,p,h,f,g,m,v,_,y,x;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=t.request,d=t.passengerModal,p=t.passengerList,!this.target.state.ABTest||1!=(null===d||void 0===d||null===(i=d.group)||void 0===i?void 0:i.length)||null!==d&&void 0!==d&&null!==(a=d.group[0].dChoice)&&void 0!==a&&a.length||null===u||void 0===u||null===(l=u.optid)||void 0===l||!l.length){e.next=8;break}return e.next=4,(0,re.h)(u,{getProductInfo:n,getUserCommonInfo:o},d,null===(h=this.target.state)||void 0===h?void 0:h.passengerCheckErr);case 4:f=e.sent,d.group[0].dChoice=null===f||void 0===f?void 0:f.dChoice,(0,fe.zu)(d,p),null!==u&&void 0!==u&&u.date&&(t.passengerCheckErr=f.passengerCheckErrList);case 8:if(!(this.target.state.ABTest&&null!==d&&void 0!==d&&d.group&&null!==d&&void 0!==d&&d.group[0]&&null!==(c=d.group[0].dChoice)&&void 0!==c&&c.length)){e.next=17;break}if(g=d.group[0],m=g.resourceId,v=g.boxId,_=(0,le.jX)(v,m),y=(0,ue.ji)(p,d.group[0].dChoice,m,_),!y.length){e.next=17;break}return e.next=15,(0,oe.Z)(this.target,{passengers:y},m);case 15:x=e.sent,x&&((0,ue.Qn)(x,this.target),t.recommend=x.recommend);case 17:this.target.afterFetch((0,r.Z)({},t),{fetchIndex:1});case 18:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setCacheData",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,o,i,a,l,c,u,d,p,h,f,g,m,v,_,y,x,b,C=this;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.lJ)((0,r.Z)((0,r.Z)({},this.target.state),{},{isLogin:t}));case 2:if(a=e.sent,!a||null!==(n=this.target.state)&&void 0!==n&&null!==(n=n.request)&&void 0!==n&&n.date&&(null===a||void 0===a||null===(o=a.request)||void 0===o?void 0:o.date)!=(null===(i=this.target.state)||void 0===i||null===(i=i.request)||void 0===i?void 0:i.date)){e.next=26;break}if(d={},p=["reservationTerms","sku","passengerList","passengerModal","qconfig","request","holiday"],h=["insuranceId","additionCount","additionOptid"],f={},p.map((function(e){if(a[e]){if("request"===e&&a.request){var t=a.request;h.forEach((function(e){f[e]=t[e],delete t[e]}))}d[e]=a[e]}})),be.save({secondCacheData:f}),g=(null===(l=this.target.state)||void 0===l?void 0:l.request)||{},m=g.isNewNaquhua,v=g.fromSkuType,_=g.isFromSku,y=g.isShowChangeButton,x=g.spotid,b=g.token,d.request=(0,r.Z)((0,r.Z)({},d.request),{},{token:b,isNewNaquhua:m,fromSkuType:v,isFromSku:_,isShowChangeButton:y}),x&&(d.request.spotid=x),a.sku){e.next=15;break}return e.abrupt("return");case 15:a.sku.showDefault=!(null===(c=this.target.state)||void 0===c||null===(c=c.request)||void 0===c||!c.date),a.sku.defaultDate=d.request.date||"",null!==(u=a.request)&&void 0!==u&&u.replayToken&&(a.request.replayToken=""),be.save({originRequest:this.target.state.request,cacheState:a}),(0,I.Bz)(this.target,(0,r.Z)((0,r.Z)({},this.target.state),d)),this.target.devTraceType="cache",this.target.state=(0,r.Z)((0,r.Z)((0,r.Z)({},this.target.state),d),{},{isLogin:t}),this.target.afterFetch((0,r.Z)((0,r.Z)((0,r.Z)({},this.target.state),d),{},{isLogin:t}),{fetchIndex:1,fromCache:!0},(function(){return C.target.afterCb(1)})),(0,S.gp)({type:"ttd_dev_common_cache",body:{title:"\u586b\u5199\u9875\u547d\u4e2d\u7f13\u5b58"}}),e.next=28;break;case 26:(0,Z.LK)(),be.save({cacheState:null});case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"init",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,o,i,a,l,u,d,p,h,f,m,v,_,y,x,b,C,S,P,j,D,V,R,A,F,M,O,B,G,H,z,U,q,W,K,J,X,Q=arguments;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C=!(Q.length>1&&void 0!==Q[1])||Q[1],S=!(Q.length>2&&void 0!==Q[2])||Q[2],e.next=4,w(t.target);case 4:return P=e.sent,e.next=7,(0,he.ip)(t.target);case 7:if(j=e.sent,!C||P||j){e.next=13;break}return me.record("LoadCache"),e.next=12,t.setCacheData(S);case 12:me.recordEnd("LoadCache");case 13:if(D=function(){t.target.handleBook()},!P&&0!==j&&1!==j){e.next=26;break}return e.next=17,be.restoreFromLocal();case 17:return R=e.sent,A=T.Z.get("coupon-real-name"),T.Z.clear("coupon-real-name"),R.request=(0,r.Z)((0,r.Z)({},R.request),{},{hasForgoInsurance:!0,replayToken:null===(V=t.target.state)||void 0===V||null===(V=V.request)||void 0===V?void 0:V.replayToken}),R.sku.defaultDate=R.request.date||"",R.coupon&&R.coupon.couponParams&&(R.coupon.couponParams.initCouponCode=A||null),(0,I.Bz)(t.target,(0,r.Z)({},R)),t.target.afterFetch((0,r.Z)((0,r.Z)({},R),{},{isLogin:S}),{fetchIndex:2,cb:function(){0===j?t.target.setAnchor("passenger"):1===j||(null!==P&&void 0!==P&&P.status?D():t.target.changeInsurance("",D)),t.target.afterCb(2)},useCache:!0}),e.abrupt("return");case 26:return F=t.target.state.request,t.timer=(new Date).getTime(),me.record("Firstreq"),ge.record("firstRequestTime"),e.next=32,(0,E.ZP)({params:F,http:t.target.http,devTraceKeyData:t.target.devTraceKeyData,isBooking:!0,isLoginWithoutType:null===(n=t.target)||void 0===n||null===(n=n.ctx)||void 0===n?void 0:n.isLoginWithoutType});case 32:if(M=e.sent,O=M.response,B=M.modules,G=M.indexMap,me.recordEnd("Firstreq"),ge.recordEnd("firstRequestTime"),O){e.next=40;break}return e.abrupt("return");case 40:if(t.target.devTraceType="firstInit",!(!0===(null===O||void 0===O||null===(o=O[G.getProductInfo])||void 0===o?void 0:o.__hasSendLogError)||null!==F&&void 0!==F&&null!==(i=F.optid)&&void 0!==i&&i.length&&!0===(null===(a=O[G.getCustomerTemplate])||void 0===a?void 0:a.__hasSendLogError)||!0===(null===(l=O[G.getProductPriceCalendar])||void 0===l?void 0:l.__hasSendLogError))){e.next=43;break}return e.abrupt("return",Ce(t,!0));case 43:if((null!==O&&void 0!==O&&null!==(u=O[G.getProductInfo])&&void 0!==u&&u.productInfos&&!O[G.getProductInfo].productInfos.some((function(e){return!e.resourceInfos||!e.resourceInfos.length}))||null===F||void 0===F||null===(d=F.optid)||void 0===d||!d.length)&&O[G.getProductPriceCalendar].data&&O[G.getProductPriceCalendar].data.resourceInfos&&null!==(p=O[G.getProductPriceCalendar].data.priceAndStockInfos)&&void 0!==p&&p.length&&O[G.getProductPriceCalendar].data.packageInfos&&!O[G.getProductPriceCalendar].data.packageInfos.some((function(e){return!e.salesProperties}))&&(null===F||void 0===F||null===(h=F.optid)||void 0===h||!h.length||null!==(f=O[G.getCustomerTemplate])&&void 0!==f&&null!==(f=f.customerTemplates)&&void 0!==f&&f.length)){e.next=45;break}return e.abrupt("return",Ce(t));case 45:if(null!==O&&void 0!==O&&O[G.getProductPriceCalendarRecommend]&&(0,k.O)(O[G.getProductPriceCalendar].data,O[G.getProductPriceCalendarRecommend].data,!0),H={getProductInfo:(0,se.ck)(null===O||void 0===O||null===(m=O[G.getProductInfo])||void 0===m?void 0:m.productInfos),getCustomerTemplate:function(e){return O[G.getCustomerTemplate]&&O[G.getCustomerTemplate].customerTemplates&&O[G.getCustomerTemplate].customerTemplates.length&&F.optid.map((function(e,t){O[G.getCustomerTemplate].customerTemplates[t]&&!O[G.getCustomerTemplate].customerTemplates[t].resourceId&&(O[G.getCustomerTemplate].customerTemplates[t].resourceId=e)})),null===O||void 0===O||null===(e=O[G.getCustomerTemplate])||void 0===e?void 0:e.customerTemplates}(),getProductPriceCalendar:O[G.getProductPriceCalendar].data,getScenicSpotInfo:O[G.getScenicSpotInfo].scenicSpotInfos,getUserCommonInfo:O[G.getUserCommonInfo].Data,getHoliday:O[G.getHoliday]},O[G.getUserCommonInfo].nfesOverdue&&(S=!1),be.save({getCustomerTemplate:H.getCustomerTemplate,getUserCommonInfo:H.getUserCommonInfo,getProductPriceCalendar:H.getProductPriceCalendar,getProductInfo:H.getProductInfo}),t.timer=(new Date).getTime(),me.record("FirstFormat"),z=!1,H.getProductPriceCalendar.entendInfos&&H.getProductPriceCalendar.entendInfos.length&&(z=H.getProductPriceCalendar.entendInfos.find((function(e){return!("needUpdateAppVersion"!==e.key||!e.value)}))),!z&&H.getCustomerTemplate&&H.getCustomerTemplate.flags&&H.getCustomerTemplate.flags.length&&(z=H.getCustomerTemplate.flags.find((function(e){return"needUpdateAppVersion"===e}))),!z){e.next=57;break}return t.target.afterFetch({needUpdate:!0}),e.abrupt("return");case 57:if(!(0,ie.xc)(F,H.getProductPriceCalendar,null===O||void 0===O||null===(v=O[G.getProductInfo])||void 0===v?void 0:v.productInfos,t.target.refreshCount)||(0,N.rI)()){e.next=61;break}return ce.Z.hide(),(0,ae.td)(F),e.abrupt("return");case 61:if(U=c.Z.getFormatByModules(t.target.state.request,H,B,void 0,void 0,"firstInit"),me.recordEnd("FirstFormat"),!(U.isSaleOut||null!==(_=U.sku)&&void 0!==_&&_.isSaleOut||null!==(y=U.request)&&void 0!==y&&y.isSaleOut)){e.next=65;break}return e.abrupt("return",Ce(t));case 65:if(!(null!==(x=U.request)&&void 0!==x&&x.isForceLogin||null!==(b=U.request)&&void 0!==b&&b.isForceLoginH5)||S){e.next=76;break}return W=null!==(q=U.request)&&void 0!==q&&q.isForceLogin?"\u672c\u4ea7\u54c1\u8d2d\u4e70\u524d\u9700\u8981\u8fdb\u884c\u767b\u5f55\u548c\u8ba4\u8bc1\uff0c\u672a\u767b\u5f55\u65e0\u6cd5\u8ba4\u8bc1\uff0c\u8bf7\u5148\u5b8c\u6210\u767b\u5f55":"\u8be5\u5546\u54c1\u5b58\u5728\u643a\u7a0b\u8d26\u53f7\u9650\u8d2d\uff0c\u8bf7\u5148\u767b\u5f55\u518d\u9884\u8ba2",e.next=69,new Promise((function(e){t.target.confirm.show({content:W,btnOK:["\u8fd4\u56de","\u53bb\u767b\u5f55"],btnCallBack:[function(){e(!1)},function(){e(!0)}]})}));case 69:if(K=e.sent,!K){e.next=74;break}return e.abrupt("return",g.ZP.user.login({}));case 74:if(null===(J=U.request)||void 0===J||!J.isForceLogin){e.next=76;break}return e.abrupt("return",(0,L.Sw)());case 76:console.log("%c\u6027\u80fd\u68c0\u6d4b-\u9996\u5c4f\u6570\u636e\u8f6c\u6362\u8017\u65f6:".concat((new Date).getTime()-t.timer,"ms"),"color:yellow"),X=be.load("cacheState"),X&&(t.timer=(new Date).getTime(),U=(0,Z.qd)(t.target.state,U,t.target,H),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u7f13\u5b58+\u9996\u5c4f\u6570\u636e\u5408\u5e76\u8017\u65f6:".concat((new Date).getTime()-t.timer,"ms"),"color:yellow"),(0,Z.LK)()),(0,fe.zu)(U.passengerModal,U.passengerList),(0,I.Bz)(t.target,(0,r.Z)({},U)),me.record("Firstrender"),ge.record("firstRenderTime"),t.target.afterFetch((0,r.Z)((0,r.Z)({},U),{},{isLogin:S}),{fetchIndex:1,cb:function(){me.recordEnd("Firstrender"),ge.recordEnd("firstRenderTime"),t.target.afterCb(1)}}),t.second(U,H.getCustomerTemplate,H.getProductInfo,H.getScenicSpotInfo,H.getUserCommonInfo,S),t.fetchQconfig();case 86:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ce=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r=arguments;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t.target.afterFetch({isSaleOut:!0,notSendDevTrace:n}),e.abrupt("return",t.target.confirm.show({delayTime:500,content:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",btnCallBack:[function(){(0,Z.LK)();var e=t.target.state.request;e.skid&&pe.B.send("tnt_bookingSkidSoldout_notice",{skid:e.skid,optid:e.optid,soldout:!0}),t.target.pop()}]}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},45803:function(e,t,n){n.d(t,{Z:function(){return m},C:function(){return v}});var r=n(84578),o=n(64708),i=n(298),a=n(79214),s={84:a.o.hotelName,85:a.o.enHotelName,86:a.o.hotelAddress,87:a.o.hotelName,88:a.o.enHotelName,89:a.o.hotelAddress,143:a.o.enHotelAddress,144:a.o.enHotelAddress,145:a.o.enHotelName,146:a.o.enHotelAddress,870:a.o.hotelName,871:a.o.enHotelName,872:a.o.hotelAddress,873:a.o.enHotelAddress,1417:a.o.hotelName,1418:a.o.enHotelName,1419:a.o.hotelAddress,1420:a.o.enHotelAddress,2338:a.o.hotelAddress,2314:a.o.hotelName,2315:a.o.hotelAddress},l=function(e){return(e||[]).reduce((function(e,t){var n=t.id,r=t.orderExtendInfoId,o=t.name,i=t.groupCode,l=t.remark,c=s[r];return e.push({templateId:n,id:c,name:o,isHotelName:c===a.o.hotelName||c===a.o.enHotelName,typeId:r,groupCode:i,remark:l}),e}),[])},c=function(e){var t=e.productinfo,n=void 0===t?{}:t,r=e.saleProperties,o=e.groupCode,i=e.title,a=e.groupInfo,s=void 0===a?[]:a,c=null,u=[],d=[],p=[],h={isNeedVerify:!1,hotelRange:"noRange",searchHotelList:d,bookingHotelList:p,popLayerTitle:i,labelList:l(s)},f="starthotelinfo"===o?"\u4e0a\u95e8\u63a5":"desthotelinfo"===o?"\u8fd4\u7a0b\u9001\u56de":"";if(f&&n.itinerary&&r.length){var g=n.itinerary,m=void 0===g?{}:g,v=m.itineraryGroup,_=void 0===v?{}:v,y=m.itineraryInfos,x=void 0===y?[]:y,b=_.groupItems,Z=void 0===b?[]:b,I=r.find((function(e){return!!e&&!!e.saleProperty&&98==e.saleProperty.id})),C="";if(I&&I.salePropertyValues&&I.salePropertyValues.length&&I.salePropertyValues[0].id&&(C=I.salePropertyValues[0].id),C&&Z.length&&x.length){var k=null,w=[];Z.map((function(e){e.groups&&!k&&(k=e.groups.find((function(e){return!!e&&!!e.itemInfo&&e.itemInfo.salesPropertyValueId==C})))})),k&&k.itineraryItemIds&&(w=k.itineraryItemIds,x.map((function(e){-1!=w.indexOf(e.itineraryItemId)&&e.gatherInfo&&e.gatherInfo.modeName&&e.gatherInfo.modeName==f&&(c=e.gatherInfo.pickupIinfo),-1!=w.indexOf(e.itineraryItemId)&&e.dismissInfo&&e.dismissInfo.modeName&&e.dismissInfo.modeName==f&&(c=e.dismissInfo.sendBack)})))}}if(c&&f){var T=c,S=T.pickUpRange,P=T.dropOffRange,L=S||P;if(!L||!L.rangeTemplateInfo)return{hotelInfo:h};var N=L.overRangeDesc,j=L.overRangeType,D=L.rangeTemplateInfo,V=D.templateId,E=D.templateType;3===E?h={tips:"\u672c\u4ea7\u54c1\u4ec5\u63a5\u9001\u90e8\u5206\u6307\u5b9a\u7684\u9152\u5e97\u3002\u5982\u60a8\u5165\u4f4f\u7684\u9152\u5e97\u4e0d\u5728\u6b64\u8303\u56f4\u5185\uff0c\u8bf7\u5c31\u8fd1\u9009\u62e9",isNeedVerify:!1,hotelRange:"hotelList",templateId:V,selectHotelList:u,popLayerTitle:i,labelList:l(s)}:1!==E&&2!==E||1!==j||(h={tips:"\u9152\u5e97\u4e0d\u5728".concat(f,"\u8303\u56f4\u5185\uff0c").concat(N),isNeedVerify:!0,hotelRange:"range",searchHotelList:d,templateId:V,bookingHotelList:p,popLayerTitle:i,labelList:l(s),area:[]})}return{hotelInfo:h}},u={starthotelinfo:"\u51fa\u53d1\u9152\u5e97\u4fe1\u606f",desthotelinfo:"\u5230\u8fbe\u9152\u5e97\u4fe1\u606f",hotelinfo:"\u9152\u5e97\u4fe1\u606f",islandhotelinfo:"\u5c9b\u4e0a\u9152\u5e97\u4fe1\u606f"},d=function(e){var t=e.type,n=e.code;return 13===t?a.H.text:11===t?"ExpressDelivery"===n?null:a.H.radio:12===t?a.H.multiSelect:14===t?a.H.number:15===t?a.H.time:16===t?a.H.date:17===t||18===t?a.H.hotelText:void 0},p=function(e,t,n){return(17===n||18===n)&&t&&u[t]?u[t]:e},h=function(e){var t=d(e);return t===a.H.number?"\u8bf7\u8f93\u5165":t===a.H.text||t===a.H.hotelText?"\u8bf7\u586b\u5199":"\u8bf7\u9009\u62e9"},f=function(e){var t=e.orderExtendItems,n=void 0===t?[]:t,r=e.type;if(!n.length||11!==r&&12!==r)return[];var o=n.reduce((function(e,t){return e.push({label:t.content,value:t.itemId}),e}),[]);return o},g=function(e){var t=e.orderExtendInfos,n=e.productinfo,r=e.saleProperties,o=[];if(t&&t.length){var s=[],l={};t=t.reduce((function(e,t){return 17!=t.type&&18!=t.type||t.groupCode||(t.groupCode="hotelinfo"),t&&t.groupCode?-1===s.indexOf(t.groupCode)?(e.push(t),u[t.groupCode]&&s.push(t.groupCode),l[t.groupCode]=[t]):l[t.groupCode].push(t):e.push(t),e}),[]),t.map((function(e,t){var s=d(e);if(s){var u=p(e.name,e.groupCode,e.type),g=f(e),m={appendInfoId:e.id,title:u,type:s,value:1==g.length?[g[0].value]:null,placeholder:h(e),remark:e.remark,selectList:g,popLayerTitle:u,typeId:e.orderExtendInfoId,groupCode:e.groupCode};if(s===a.H.hotelText){var v=c({productinfo:n,saleProperties:r,title:u,groupCode:e.groupCode,groupInfo:l[e.groupCode]});m=Object.assign({},(0,i.Z)((0,i.Z)({},m),v))}o.push(m)}}))}return o},m=function(e,t,n,o){n.appendInfoList||(n.appendInfoList=[]);var i=o||{},a=i.appendInfoList,s=i.sku,l=t.getProductInfo,c=t.getCustomerTemplate,u=t.getOrderExtendInfo,d=t.getProductPriceCalendar;u||(u=r.Fs.load("getOrderExtendInfo")),l||(l=r.Fs.load("getProductInfo")),c||(c=r.Fs.load("getCustomerTemplate")),d||(d=r.Fs.load("getProductPriceCalendar"));var p=d||{},h=p.firstLevelInfos,f=void 0===h?[]:h,m=f.length>1,_=e.optid,y=void 0===_?[]:_,x=e.boxMap,b=void 0===x?{}:x,Z={};y.forEach((function(e){b[e]?b[e].map((function(e){Z[e.resourceId]=v(e.resourceId,m,n.sku||s)})):Z[e]=v(e,m,n.sku||s)}));var I={itinerary:{itineraryGroup:[],itineraryInfos:{}}},C=[];Array.isArray(u)&&u.forEach((function(e){y.forEach((function(t){var n;if(t==e.resourceId||null!==(n=b[t])&&void 0!==n&&n.find((function(t){return t.resourceId==e.resourceId}))){var r=(a||[]).findIndex((function(t){var n=t.resourcesId;return e.resourceId===n}));if(r>-1)C.push(a[r]);else{var o,i=e.resourceId,s=e.orderExtendInfos,c=null===(o=l)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.cityInfo)||void 0===o||null===(o=o.departureInfos)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.districtId;C.push({list:g({orderExtendInfos:s,productinfo:I,saleProperties:[]}),destcityids:c,ticketName:(null===Z||void 0===Z?void 0:Z[i])||"",resourcesId:i})}}}))})),n.appendInfoList=C},v=function(e,t,n){var r=(0,o.TO)(e,n),i=r.firstLevelName,a=r.resourceName;return t?i+"\xb7"+a:a}},78893:function(e,t,n){n.d(t,{Ns:function(){return a},tR:function(){return s},DG:function(){return l}});var r=n(45023),o=n(298),i=function(e){var t,n=e.passengerList,i=void 0===n?[]:n,a=e.passengerModal,s=e.additionalSale,l=e.insurance,c=e.request,u=c||{},d=u.insuranceId,p=l||{},h=p.insuranceInfo,f={},g=0,m=!1,v=null===a||void 0===a||null===(t=a.group)||void 0===t?void 0:t.some((function(e){var t;return null===e||void 0===e||null===(t=e.dChoice)||void 0===t?void 0:t.some((function(e){var t=i.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}))}));if(v&&g++,f=(0,o.Z)((0,o.Z)({},f),{},{passenger:{hasChild:!!v,isShow:!1}}),null!==h&&void 0!==h&&h.id&&(null===h||void 0===h?void 0:h.id)===d){var _,y=null===l||void 0===l||null===(_=l.insuredGroup)||void 0===_||null===(_=_.dChoice)||void 0===_?void 0:_.some((function(e){var t=i.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));y&&g++,f=(0,o.Z)((0,o.Z)({},f),{},{insurance:{hasChild:!!y,isShow:!1}})}var x=s||{},b=x.resources,Z=void 0===b?[]:b;return Z.forEach((function(e){var t,n=(null===(t=e.passengerModal)||void 0===t?void 0:t.group[0])||{},a=n.dChoice,s=void 0===a?[]:a,l=s.some((function(e){var t=i.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));l&&g++,f=(0,o.Z)((0,o.Z)({},f),{},(0,r.Z)({},e.resourceId,{hasChild:l,isShow:!1}))})),Object.keys(f).forEach((function(e){1===g&&f[e].hasChild&&(f[e].isShow=!0),m=m||f[e].isShow})),{clauseShowPosition:f,isShowFooterClause:!m&&g>1}},a=function(e,t,n){var r=((null===e||void 0===e?void 0:e.group)||[]).some((function(e){var n;return null===e||void 0===e||null===(n=e.dChoice)||void 0===n?void 0:n.some((function(e){var n=null===t||void 0===t?void 0:t.find((function(t){return t.PassengerID==e}));return n&&!!n.Child}))})),o=n||{},i=o.passenger;return!!i&&i.hasChild!==r},s=function(e,t){var n=e.clauseShowPosition,r=n||{},o=r.insurance,i=t.insuredGroup,a=t.passengerList,s=((null===i||void 0===i?void 0:i.dChoice)||[]).some((function(e){var t=a.find((function(t){return t.PassengerID==e}));return t&&!!t.Child}));return!!o&&o.hasChild!==s},l=function(e,t){var n,r=e.showClause,o=(null===(n=t.resource)||void 0===n||null===(n=n.passengerModal)||void 0===n?void 0:n.group[0])||{},i=o.dChoice,a=void 0===i?[]:i,s=a.some((function(e){var n,r=null===(n=t.passengerList)||void 0===n?void 0:n.find((function(t){return t.PassengerID==e}));return r&&!!r.Child}));return!r||r.hasChild!==s};t["ZP"]=i},75807:function(e,t,n){var r=n(70873);t["Z"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.every((function(n){if(n.discountType==r.$i.COUPON){var o=n.availableNum||0,i=n.amount||0;return o>0?i>0&&(n.isTopOne||n.amount==t):1!=e.length}return n.isSelect}))}},72126:function(e,t,n){n.d(t,{m:function(){return y}});var r=n(39140),o=n(99739),i=n(61252),a=n(298),s=n(73435),l=n(22276),c=n(45023),u=n(32545),d=((0,o.ZP)(),function(e){for(var t=e.date,n=e.endDate,r=e.calendar,o=e.optid,i=e.count,a=e.additionalResources,s=[],c=(r||[]).findIndex((function(e){return e.date==t})),d=(0,u.gw)(t,n),f=(r||[]).slice(c,c+d),g=0;g<d;g++){var m=new Date(new Date(t.replace(/-/g,"/")).getTime()+24*g*60*60*1e3),v=(0,u.fh)(m),_=f[g]||{},y=_.resources,x=p(y),b=h(o,i,x,a);s=[].concat((0,l.Z)(s),[{date:v,price:b}])}return s}),p=function(e){return(e||[]).reduce((function(e,t){var n=t||{},r=n.resourceId,o=n.salePrice,i=n.resourceName;return(0,a.Z)((0,a.Z)({},e),{},(0,c.Z)({},r,{resourceName:i,salePrice:o}))}),{})},h=function(e,t,n,r){var o=(e||[]).reduce((function(e,r,o){var i=n[r].salePrice;if(i&&t[o]){var a=(0,s.dC)(i,t[o]);e=(0,s.IH)(e,a)}return e}),0);return r.forEach((function(e){var t=e.price;o=(0,s.IH)(o,t)})),o};(0,o.ZP)();function f(e,t,n,r,o,i,l,c){for(var u=0,p=0,h=function(){var h;p=t[f];var g=r.find((function(e){return e.resourceId==p})),m=c&&(null===(h=c[p])||void 0===h?void 0:h.length);if(g){var v=n[f],_={resourceId:p,quantity:Number(v),price:g.salePrice,date:o};if(i&&(_.priceCalendarList=d({date:o,endDate:l||o,calendar:i,optid:[p],count:[1]}),_.price=_.priceCalendarList.reduce((function(e,t){return(0,s.IH)(e||0,t.price)}),0)),m){_.relationKey=String(p);var y=c[p].filter((function(e){return 0==e.priceMode})),x=c[p].filter((function(e){return 1==e.priceMode})),b=Array.from(new Set(y.map((function(e){return e.date}))));b.forEach((function(t){e.push((0,a.Z)((0,a.Z)({},_),{},{date:t}))})),x.length&&e.push((0,a.Z)((0,a.Z)({},_),{},{date:null}))}else e.push(_);u=(0,s.IH)(u,_.price)}},f=0;f<t.length;f++)h();return u}var g=n(39625),m=n(56569),v=n(97142),_=(0,o.ZP)(),y=function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"use",a=arguments.length>3?arguments[3]:void 0,l={};if("use"===o){var c,u=e.count||[1],d=u.reduce((function(e,t){return e+t}),0),p=e.optid||[],h=p.length;if(0==h)return null;var y=e.date,x=((null===t||void 0===t?void 0:t.calendar)||[]).find((function(e){return e.date==y})),b=(null===x||void 0===x?void 0:x.resources)||[],Z=[],I=f(Z,p,u,b,y,void 0,void 0,e.boxMap),C=I;if(null!==a&&void 0!==a&&null!==(c=a.additionalSale)&&void 0!==c&&c.resources){var k=e.additionOptid||[],w=e.additionCount||[],T=w.reduce((function(e,t){return e+t}),0),S=f(Z,k,w,a.additionalSale.resources,y,void 0,void 0,e.boxMap);C=(0,s.IH)(C,S),d+=T}l={productId:null!==t&&void 0!==t&&t.productId?Number(t.productId):0,quantity:Number(d),priceCalendar:[{date:(null===x||void 0===x?void 0:x.date)||"",price:C||0}],resourceList:Z}}var P=_.platform,L={RN:1,H5:2,mini:3},N=null===(n=_.enviroment)||void 0===n?void 0:n.toLowerCase();return{visible:!1,clientEnv:{env:"dev"===N?"fat":N,ctType:0,clientType:L[P]||3},data:{source:"use"===o?"TICKET":"THINGS_TODO",saleChannel:_.isZXAPP?20092:(0,m.ud)()?21:r.RX[P],allianceId:Number(e.aid)||0,siteId:Number(e.sid)||0,clientId:e.clientId,pageId:(0,i.dD)(),locale:"zh-CN",currency:"CNY",bookingInfo:l,productId:"use"===o?"":null===t||void 0===t?void 0:t.productId},kmInfo:{ubtKey:"km_ticket_trace_log",organizationId:"42",attrs:(0,g.pS)()},traceLogId:v.K1.TICKET}}},70501:function(e,t,n){n.d(t,{Z:function(){return Se}});var r=n(298),o=n(64708),i=n(65516),a=n(79239),s=n(49502),l=function(e,t,n){var r,o=t.getUserCommonInfo;n.isNewGuest=!(null!==o&&void 0!==o&&null!==(r=o.CommonPassengerInfo)&&void 0!==r&&null!==(r=r.CommonPassengerList)&&void 0!==r&&r.length)},c=function(e,t,n,r){n.passengerModal||(n.passengerModal={forceUpdateNewGuest:!0}),(0,s.ZP)(e,t,n.passengerModal,n.sku,r),(0,i.Z)(e,t,n.passengerModal),(0,a.ZP)(e,t,n.passengerModal),l(e,t,n.passengerModal)},u=n(68983),d=n(88327),p=n(99739),h=n(39140),f=(0,p.ZP)(),g=f.platform==h.NX.RN,m=function(e,t,n){var r,o=t.getProductInfo,i=t.getScenicSpotInfo,a=t.getProductPriceCalendar;e.scenicSpotName="",e.destcid=2;var s,l=!(null===a||void 0===a||null===(r=a.boxProductInfos)||void 0===r||!r.length);if(o&&o.length&&o[0].resourceInfos&&o[0].resourceInfos.length){var c=o[0].resourceInfos[0].basicInfo||{};e.payMode=c.payMode,e.isForceLogin=1==c.authType||2==c.authType}(o&&o.length&&o[0].cityInfo&&o[0].cityInfo.departureInfos&&o[0].cityInfo.departureInfos.length&&(e.destcid=o[0].cityInfo.departureInfos[0].districtId||e.destcid),o&&o.length&&o[0].basicInfo&&o[0].basicInfo.flags&&o[0].basicInfo.flags.length&&(e.overseas=!!g&&!o[0].basicInfo.flags.find((function(e){return"domestic"==e}))),i&&i.length&&i[0].basicInfo)&&(e.scenicSpotName=l?null===(s=i[0].saleUnitInfo)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.ticketGroupName:i[0].basicInfo.scenicSpotName||"",e.poiid=i[0].basicInfo.poiId||"");if(i&&i.length&&i[0].saleUnitInfo){var u=i[0].saleUnitInfo;e.ticketGroupId=u&&u[0]&&u[0].ticketGroupId}if(o&&o.length&&o[0].relatedPackageLimitSaleInfos&&o[0].relatedPackageLimitSaleInfos.length){for(var d=o[0].relatedPackageLimitSaleInfos,p=!1,h=0;h<d.length;h++){var f,m=null===(f=d[h].resourceIds)||void 0===f?void 0:f.find((function(t){var n;return null===(n=e.optid)||void 0===n?void 0:n.includes(t)}));if(m){var v=d[h].productLimitSales,_=d[h].oldProductLimitSale;p=(null===v||void 0===v?void 0:v.some((function(e){return 8==(null===e||void 0===e?void 0:e.limitType)})))||8==(null===_||void 0===_?void 0:_.limitType)}}e.isForceLoginH5=p}if(null!==a&&void 0!==a&&a.resourceMinPriceInfo){var y,x,b;if(!e.date)e.minDate=(null===a||void 0===a||null===(x=a.resourceMinPriceInfo)||void 0===x?void 0:x.date)||"";if(null===(y=e.optid)||void 0===y||!y.length)e.resourceId=(null===a||void 0===a||null===(b=a.resourceMinPriceInfo)||void 0===b?void 0:b.resourceId)||""}n.request=e},v=n(61252),_=function(e,t,n,r,o){var i=t.getProductInfo;return i&&n?(e.productInfo&&!r||(e.productInfo={}),i.map((function(t,n){var r=t.subProductInfos;y(t,e.productInfo),null!==r&&void 0!==r&&r.length&&r.map((function(t){y(t,e.productInfo)}))}))):(o&&"firstInit"===o.scene&&(e.isSaleOut=!0),(0,v.gp)({body:{title:"productInfo\u5904\u7406\u5f02\u5e38",data:{getProductInfo:i,optId:n,mainResouceChange:r,request:e}}})),e},y=function(e,t){var n=e.resourceInfos,r=void 0===n?[]:n;r.forEach((function(n,r){var o,i,a,s=null===n||void 0===n?void 0:n.resourceId;s&&(t[s]={productName:e.basicInfo.productName,priceMode:e.basicInfo.priceMode,productId:e.productId,flags:e.resourceInfos&&(null===(o=e.resourceInfos[r])||void 0===o||null===(o=o.basicInfo)||void 0===o?void 0:o.flags)||[],useType:null===(i=e.usageTimeLimit)||void 0===i?void 0:i.useType,localTime:e.basicInfo.localTime,startDate:null===(a=e.usageTimeLimit)||void 0===a?void 0:a.startDate})}))},x=n(12175),b=function(e){return e[e["downTime"]=1]="downTime",e[e["enterTime"]=2]="enterTime",e[e["risk"]=3]="risk",e[e["resource"]=4]="resource",e[e["student"]=5]="student",e[e["doctor"]=6]="doctor",e[e["limit"]=7]="limit",e}({}),Z=n(32545),I=function(e,t,n,r){var o,i,a=e.date.replace(/-/g,"/"),s=null===r||void 0===r||null===(o=r.calendar)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.date)||void 0===o?void 0:o.replace(/-/g,"/"),l=a;if(e&&n&&l&&l==s){var c=t.priceMode,u=t.localTime;u=u.replace(/-/g,"/");var d=n.advancedBookingDays,p=n.advancedBookingTime;if(void 0!=c&&(2===c||0===c)){var h=k(l,d,p),f=h-new Date(u).getTime();if(f<=354e4&&f>0){var g=l.split("/")[1],m=l.split("/")[2];return i={text:"\u4ec5\u5269{time}\u53ef\u8d2d\u4e70".concat(g,"\u6708").concat(m,"\u65e5\u4ea7\u54c1\uff0c\u8bf7\u5c3d\u5feb\u8d2d\u4e70"),type:b.downTime,time:f,date:l,content:"\u9884\u8ba2"},i}}}},C=function(e,t,n,r,o){var i;if(t&&t.localTime&&r&&n&&n.ticketInfo&&n.ticketInfo.ticketEnterTimes&&n.ticketInfo.ticketExchangeTimes){var a=n.ticketInfo,s=a.ticketEnterTimes[0]&&a.ticketEnterTimes[0].timeInfos&&a.ticketEnterTimes[0].timeInfos.length&&a.ticketEnterTimes[0].timeInfos[0].endTime?a.ticketEnterTimes[0].timeInfos[0].endTime:null,l=a.ticketExchangeTimes[0]&&a.ticketExchangeTimes[0].timeInfos&&a.ticketExchangeTimes[0].timeInfos.length&&a.ticketExchangeTimes[0].timeInfos[0].endTime?a.ticketExchangeTimes[0].timeInfos[0].endTime:null;if((s||l)&&0===o.useType&&!e.isFromSku&&t.localTime){var c=t.localTime;c=c.replace(/-/g,"/");var u=c.split(" ")[0],d=s?k(u,0,"".concat(s,":00")):null,p=l?k(u,0,"".concat(l,":00")):null,h=0;!p&&d?h=d:p&&!d?h=p:p&&d&&(h=d>p?p:d);var f=r.advancedBookingDays,g=r.advancedBookingTime,m=k(u,f,g),v=h-new Date(c).getTime();if(h&&h===m&&v<=18e5&&v>0){var _="\u666f\u533a\u4eca\u65e5\u7968\u4ec5\u5269{time}\u53ef\u53d6\u7968",y="\u53d6\u7968";if(p&&d)return p>d?(_="\u666f\u533a\u4eca\u65e5\u7968\u4ec5\u5269{time}\u53ef\u5165\u56ed",y="\u5165\u56ed"):p==d&&(_="\u666f\u533a\u4eca\u65e5\u7968\u4ec5\u5269{time}\u53ef\u53d6\u7968/\u5165\u56ed"),i={text:_,type:b.enterTime,time:v,date:u,content:y},i}}}},k=function(e,t,n){var r=new Date(Date.parse(e.replace(/-/g,"/"))),o=(0,Z.fh)(r.setDate(r.getDate()-t)),i="".concat(o," ").concat(n).replace(/-/g,"/"),a=new Date(i).getTime();return a},w=n(3965),T=function(e,t){var n,o=e||[],i=[],a=!1,s=t||{},l=s.resourceDescInfo,c=s.educationInfo,u=s.rbasicInfo,d=s.currentLimitDesc,p=s.getScenicSpotInfo,h=s.needTabs,f=void 0===h||h,g=[],m=[],v=1==(null===u||void 0===u?void 0:u.authType),_=2==(null===u||void 0===u?void 0:u.authType),y=[];o&&o.length>0&&o.map((function(e,t){var n=e.tabTitle,r=e.policies,o=void 0===r?[]:r,s=[],l={title:n,chirdren:s};0!=(null===e||void 0===e?void 0:e.tabType)&&(a=!0),o.map((function(e){var t=e.title,n=e.urgencyLevel,r=e.policyText,o=e.tags,i=e.ctripCreateTime,a=e.content,l="student"==e.type,u="doctor"==e.type,d="risk"==e.type,p=S(n),h=function(e){var s={policyText:"".concat(l?P(c,r):r),title:t,urgencyLevel:n,type:e,content:l?P(c,a):a,tags:o,ctripCreateTime:i,urgencyLV:p};return s};l?_&&s.push(h(w.K.student)):u?v&&s.push(h(w.K.doctor)):s.push(h(d?w.K.risk:w.K.other))})),s.sort((function(e,t){return e.urgencyLV&&t.urgencyLV?e.urgencyLV-t.urgencyLV:0})),s.length&&(y.push(l),i.push({text:e.tabTitle,key:t,tabType:e.tabType}))})),l&&l.title&&g.push((0,r.Z)((0,r.Z)({},l),{},{policyText:l.richText,type:w.K.resource,urgencyLV:S(l.urgencyLevel)})),null!==p&&void 0!==p&&null!==(n=p[0])&&void 0!==n&&null!==(n=n.basicInfo)&&void 0!==n&&null!==(n=n.flags)&&void 0!==n&&n.length&&p[0].basicInfo.flags.indexOf("limitCapacity")>-1&&m.push({title:"\u666f\u533a\u9650\u6d41\u63d0\u793a",type:w.K.limit,content:d,policyText:"<p>".concat(d,"</p>"),urgencyLevel:"B"});var x=y.find((function(e){return"\u9884\u8ba2\u63d0\u9192"==e.title}));return x?x.chirdren=x.chirdren.concat([].concat(g,m)):((null===g||void 0===g?void 0:g.length)||(null===m||void 0===m?void 0:m.length))&&y.push({title:"\u9884\u8ba2\u63d0\u9192",chirdren:[].concat(g,m)}),{isDisclaimer:a,tabs:f?i:[],content:y}},S=function(e){return"S"===e?1:"A"===e?2:3},P=function(e,t){if(!e)return t;var n=e||{},r=n.educationType,o=void 0===r?[]:r,i=n.education,a=void 0===i?[]:i,s=o.map((function(e){return e.value})),l=a.map((function(e){return e.value}));return t?t.replace("{0}",s.join("\u3001")).replace("{1}",l.join("\u3001")):""},L=function(e,t,n,r){var o=r||{},i=o.sku,a=t.getProductInfo,s=t.getNoticeInfo,l=t.getScenicSpotInfo;if(a&&a[0]){var c=a[0],u=c.basicInfo,d=c.packageInfos,p=void 0===d?[]:d,h=c.usageTimeLimit,f=c.resourceInfos,g=f[0].basicInfo,m=f[0].educationInfo,v=[],_=I(e,u,p[0],i),y={},x=C(e,u,f[0],p[0],h);x||(x=_),x&&v.push(x),g&&g.orderNoticeInfo&&(y=g.orderNoticeInfo);var b=T(s,{resourceDescInfo:y,educationInfo:m,rbasicInfo:g,currentLimitDesc:"\u8be5\u666f\u533a\u6709\u9650\u6d41\u653f\u7b56\uff0c\u4f59\u7968\u7d27\u5f20\uff0c\u8bf7\u60a8\u5c3d\u5feb\u4e0b\u5355",getScenicSpotInfo:l,needTabs:!1});n.noticeTips=b,n.footerTips=v}},N=n(38507),j=n(45803),D=n(22276),V=n(70873),E=function(e,t){var n=t.countLimit,r=t.countLeft;return 0===n?e:Math.min(r,e)},R=n(75807),A=n(84578),F=function(e){var t={};return(e||[]).forEach((function(e){var n=e.itemId,r=e.salespromotionList;t[n]=r})),t},M=n(73435),O=function(e,t,n,o){var i,a,s,l=e.optid||[],c=l.length;if(0!=c||e.aggregation){var u=e.count||[1],d={};d=null!==t&&void 0!==t&&t.getSalesPromotion?null===t||void 0===t?void 0:t.getSalesPromotion:A.Fs.load("getSalesPromotion")||{};var p=(null===(i=d)||void 0===i?void 0:i.itemList)||[],h=F(p),f=(null===o||void 0===o?void 0:o.couponRefreshInfo)||{},g=f.couponData,m=f.isBookingRefresh,v=f.beforeCoupon,_=f.updateCouponCode,y=[];v&&(y=v.discountList),g&&A.Fs.save({couponData:g});var x=e.date,b=o.sku,Z=((null===b||void 0===b?void 0:b.calendar)||[]).find((function(e){return e.date==x})),I=(null===Z||void 0===Z?void 0:Z.resources)||[],C=e.additionOptid,k=e.additionCount,w=o.additionalSale,T=(null===w||void 0===w?void 0:w.resources)||[],S={title:"\u4f18\u60e0",subTitle:"",discountList:[],cashBackList:[],discountDataList:[]};H(l,u,I,S,h,y),C&&C.length>0&&H(C,k,T,S,h,y);var P=(null===o||void 0===o?void 0:o.couponParams)||(null===o||void 0===o||null===(a=o.coupon)||void 0===a?void 0:a.couponParams),L=B(g,l,x);S.bestCouponNumber=L.isTopOne?L.amount:null===v||void 0===v?void 0:v.bestCouponNumber,S.discountDataList.push(L);var N=(0,R.Z)([].concat((0,D.Z)(S.discountList),(0,D.Z)(S.cashBackList),(0,D.Z)(S.discountDataList)),S.bestCouponNumber);if(S.subTitle=N?"\u5df2\u9009\u62e9\u6700\u4f18\u60e0\u7ec4\u5408":"",S.couponParams=P||null,S.couponParams&&(S.couponParams.initCouponCode=_||null),m&&null!==(s=S.couponParams)&&void 0!==s&&s.data){var j=S.couponParams.data;S.couponParams.data=(0,r.Z)((0,r.Z)({},j),{},{forceReloadTimestamp:(new Date).getTime()})}n.coupon=S}},B=function(e,t,n){e||(e=A.Fs.load("couponData"));var r=e||{},o=r.availableCount,i=r.couponInfo,a=r.useStatus,s=(r.selectedBy,r.isTopOne),l=i||{},c=l.promotionId,u=l.couponCode,d=l.couponName,p=l.deductionAmount,h=l.deductionList,f=l.extendInfo,g=l.requireRealName,m=l.receiverName,v={discountType:V.$i.COUPON,discountTitle:"\u4f18\u60e0\u5238",discountDesc:n?"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238":"\u8bf7\u5148\u9009\u62e9\u4f7f\u7528\u65e5\u671f",discountId:c||0,amount:p||0,availableNum:o||0,isTopOne:s,discountName:d||"",isSuperVipCoupon:!!((null===f||void 0===f?void 0:f.userFilter.indexOf(101))>-1),requireRealName:g,receiverName:m,couponCode:u};if(a===V.GD.NotUse&&o>0)v.discountDesc="".concat(o,"\u5f20\u53ef\u7528");else if(a===V.GD.Use){var _;v.discountDesc="\u51cf\xa5".concat(p),v.isSelect=!0;var y=(null===(_=(h||[]).find((function(e){return e.hit})))||void 0===_?void 0:_.id)||0;v.createParams={ccode:u,matchitem:y,promid:c,redamt:"".concat(p),resids:t}}return v},G=function(e){var t=e;return"string"===typeof e&&"/"==e[0]&&(t=parseInt(e.substring(6))),t},H=function(e,t,n,r,o,i){for(var a=0,s=function(){a=e[l];var s=n.find((function(e){return e.resourceId==a})),c=t[l];if(s){var u=s.cashBackInfo,d=void 0===u?{}:u,p=s.salePrice,h=void 0===p?0:p,f=s.cashBackAmount,g=void 0===f?0:f,m=E(c,d),v={},_=(0,M.dC)(g,m),y=_>0&&0==d.countLimit&&d.countLeft>=0,x=g>h;y&&(v={discountType:V.$i.REBATE,discountTitle:"\u8fd4\u73b0",discountDesc:x?"\u5f53\u524d\u8ba2\u5355\u91d1\u989d\uff08\u4e0d\u542b\u4fdd\u9669\u3001\u53d1\u7968\u914d\u9001\u8d39\u548c\u62bc\u91d1\uff09\u4f4e\u4e8e\u6216\u7b49\u4e8e\u5956\u52b1\u91d1\u989d\uff0c\u4e0d\u4eab\u53d7\u4f18\u60e0":"\u51fa\u884c\u540e30\u5929\u5185\u5728\u624b\u673a\u5ba2\u6237\u7aef\u4e0a\u53d1\u8868\u70b9\u8bc4\uff0c\u5ba1\u6838\u901a\u8fc7\u540e\u53ef\u83b7\u5f97\xa5".concat(_,"\u73b0\u91d1\u5956\u52b1"),discountTip:"\u9009\u62e9\u8fd4\u73b0\u5219\u4e0d\u53ef\u4f7f\u7528\u793c\u54c1\u5361\u652f\u4ed8",discountId:s.resourceId,resourceId:s.resourceId,isSelect:!0,amount:x?0:_,isInvalidCashBack:x});var b=v.amount,I=!1,C=[],k=0;if(o[a]){var w=s.resourceName?"\u3010".concat(s.resourceName,"\u3011"):"",T=o[a];T.forEach((function(e){var t,n=e.deductionAmount,r=e.salespromotionId,o=e.displayName,s=e.scheduleLimit,l=(e.startTime,e.endTime,e.limitName),c=e.deductionList;k=(0,M.IH)(k,n);var u=i&&i.find((function(e){return e.discountId==r})),d=(null===(t=(c||[]).find((function(e){return e.hit})))||void 0===t?void 0:t.deductionId)||0,p="",h=s.scheduleStartTime,f=s.scheduleEndTime,g=s.type;if(1==g){var m=G(h),v=G(f);p="*".concat((0,Z.fh)(Number(m)),"\u81f3").concat((0,Z.fh)(Number(v)),"\u51fa\u884c\u53ef\u4eab\uff0c\u5546\u54c1\u5177\u4f53\u53ef\u4eab\u4f18\u60e0\u4f1a\u968f\u6240\u9009\u65e5\u671f\u7b49\u53d1\u751f\u53d8\u52a8\uff0c\u8bf7\u4ee5\u652f\u4ed8\u9875\u4e3a\u51c6\u3002")}var _={discountType:V.$i.DISCOUNT,discountId:r,resourceId:a,discountTitle:"\u7acb\u51cf",discountDesc:"".concat(w).concat(o),limitName:l,discountSubDesc:p,isSelect:!u||u.isSelect,amount:n,createParams:{ccode:"",matchitem:d,promid:r,redamt:"".concat(n),resids:[a]}};C.push(_)})),k>0&&(I=!0)}I&&y?k>=b?r.discountList=[].concat((0,D.Z)(r.discountList),C):r.cashBackList=[].concat((0,D.Z)(r.cashBackList),[v]):(I&&(r.discountList=[].concat((0,D.Z)(r.discountList),C)),y&&(r.cashBackList=[].concat((0,D.Z)(r.cashBackList),[v])))}},l=0;l<e.length;l++)s()},z=function(e,t,n){},U=n(72126),q=function(e,t,n){t.coupon||(t.coupon={});var o=n||t,i=o.sku;i||(i=n);var a=(0,U.m)(e,i,"use",t);t.coupon=(0,r.Z)((0,r.Z)({},t.coupon),{},{couponParams:a||null})},W=function(e,t,n,r){return null},K=function(e,t,n){var o=(null===t||void 0===t?void 0:t.getScenicSpotInfo[0])||{},i=o.hotelCouponInfo;if(i){var a=i||{},s=a.type,l=a.deductionLimit;if(s&&l){var c=[{type:"black",desc:"".concat(1==s?"\u9152\u5e97\u65b0\u5ba2":"\u9152\u5e97\u7279\u60e0","\u6700\u9ad8")},{type:"orange",desc:"\u51cf".concat(l,"\u5143")}],u=(0,r.Z)({contents:c},i);n.hotelCoupon=u}}},J=function(e,t,n,r){if((0,p.ZP)().platform==h.NX.Mini)return{};var o=t.getProductInfo;if(o&&o[0]){var i=e.optid,a=null===o||void 0===o?void 0:o[0],s=a.basicInfo,l=a.vendorInfo,c=a.productId,u=a.guideInfo,d=s||{},f=d.beijingTime,g=d.productName,m=void 0===g?"":g,_=d.bizLineType,y=2==_||3==_,x={type:null!==i&&void 0!==i&&i[0]?"ticket":y?"guide":"act",iqCode:n,pageId:(0,v.dD)(),productId:c,resourceId:null!==i&&void 0!==i&&i[0]?String(i[0]):"",beijingTime:f,agreementType:null===l||void 0===l?void 0:l.agreementType,brandSupply:null===l||void 0===l?void 0:l.brandSupply,saleService:null===l||void 0===l?void 0:l.saleService,serviceTimeDesc:null===l||void 0===l?void 0:l.serviceTimeDesc,guideInfo:u,productName:m,bizLineType:_,destId:(null===e||void 0===e?void 0:e.cityId)||""};return r?(r.imInfo=x,r):x}},X=n(37066),Q=function(e){var t,n;if(e){var r=e.productInfo,o=e.voiceInfo,i=e.resourceInfo,a=r||{},s=a.productId,l=a.priceMode,c=a.productName,u=i||{},d=u.inventoryNum,p=u.resourceId,h=u.resourceName,f=u.minQuantity,g=u.maxQuantity,m=u.userSelectionDesc,v=u.tipTtile,_=u.tipDesc,y=u.level1SaleUnitCategoryName,x=o||{},b=(x.voiceMode,x.mediaCount),Z=b?"".concat(b,"\u5904\u8bb2\u89e3"):"",I=re(e),C=I.type,k=I.viewTag,w=I.emptyText,T=te(e),S=T.saleCount,P=Y(e),L=$(e,{type:C}),N=L.tags,j=(null===i||void 0===i||null===(t=i.tags)||void 0===t?void 0:t.find((function(e){return"Reservation"==e.code})))||{},D=null===(n=j.tagItems)||void 0===n?void 0:n.find((function(e){return"BookingSuccessCanUse"==e.code})),V=ne(e),E=V.salePrice,R=V.marketPrice,A=V.reducedPrice,F={level1SaleUnitCategoryName:y,BookingSuccessCanUse:null===D||void 0===D?void 0:D.name,productId:s,resourceName:h,emptyText:w,type:C,resourceId:p,productName:c,userSelectionDesc:m,details:[{name:v,detail:_}],tipTtile:v,maxQuantity:Math.min(d||Number.MAX_SAFE_INTEGER,g||Number.MAX_SAFE_INTEGER),minQuantity:f||0,inventoryNum:d,salePrice:E,reducedPrice:A,marketPrice:R,tags:N,saleCount:S,inventoryTip:d<=10&&d>0?"\u4ec5\u5269".concat(d,"\u4efd"):"",reservationInfo:P,priceMode:l,viewTag:k,playCountInfo:Z};return F}};function $(e,t){var n,r=t.type,o=e.resourceInfo,i=o||{},a=i.tags,s=[],l={Apply:X.h.grey,Refund:X.h.orange,ValidPeriod:X.h.blue};return(a||[]).forEach((function(e){if(e){var t=e||{},o=t.tagItems,i=t.code;("Refund"==i||r==X.Z.ticket&&"Apply"==i)&&(o||[]).forEach((function(e){e&&("OverdueRefund"===e.code||"RefundAnyTime"===e.code?!n&&(n={code:e.code,color:l[i],text:e.name}):s.push({color:l[i],text:e.name}))}))}})),n&&s.unshift(n),{tags:s}}function Y(e){var t=e.resourceInfo,n=t||{},r=n.minQuantity,o=n.maxQuantity;return ee(r,o)}function ee(e,t){var n=parseInt(e),r=parseInt(t);return n===r?"\u9650\u8d2d".concat(n,"\u4efd"):1==n&&r<=10?"\u6700\u591a".concat(r,"\u4efd"):n>1&&r<=10?"\u9650\u8d2d".concat(n,"-").concat(r,"\u4efd"):n>1&&r>10?"".concat(n,"\u4efd\u8d77\u8ba2"):""}function te(e){var t=e||{},n=t.productInfo,r=n.annualSales;return{saleCount:r}}function ne(e){var t=e||{},n=t.resourceInfo,o=t.promotionInfo,i=n||{},a=i.price,s=i.marketPrice,l=o||{},c=l.minusAmount,u=parseFloat(a),d=u;if(s=parseFloat(s),u||0===u){var p=parseFloat(c)&&c||0,h=(0,M.lu)(a,p||0);d=Math.max(h,0),s&&s>d||(s=u>d?u:0)}return(0,r.Z)({salePrice:u,reducedPrice:d},s?{marketPrice:s}:{})}var re=function(e){for(var t=e.productInfo,n=e.resourceInfo,r=t.viewTags,o=t.bizLineType,i=5==o?X.Z.audio:X.Z.ticket,a={},s=0;s<(r||[]).length;s++)if(0!=r[s].parentId){a=r[s];break}var l="";return n.level1SaleUnitCategoryName&&(l=new Array(n.level1SaleUnitCategoryName.length+2).join("\u6e38")+"_"),{emptyText:l,type:i,viewTag:a}},oe=function(e,t,n,o){var i,a=o.additionalSale,s=e.additionOptid,l=e.additionCount,c=t.getAdditionalSale,u=(null===c||void 0===c?void 0:c.productAdditionalSales)||[],d=(null===a||void 0===a?void 0:a.resources)||[],p=[];u.map((function(e){for(var t=e||{},n=t.searchParam,o=null===n||void 0===n?void 0:n.id,i=e.additionalSales,a=function(){var e,t=i[s];if(!t)return 1;var n=null===t||void 0===t||null===(e=t.resourceInfo)||void 0===e?void 0:e.resourceId,a=null===d||void 0===d?void 0:d.find((function(e){return n==e.resourceId})),l=Q(t);l&&p.push((0,r.Z)((0,r.Z)({},l),{},{passengerModal:null===a||void 0===a?void 0:a.passengerModal,mainResourceIds:[o]}))},s=0;s<(i||[]).length;s++)a()}));var h=[],f=[],g=(null===l||void 0===l||null===(i=l.filter((function(e){return e})))||void 0===i?void 0:i.length)||0,m=0;(null===s||void 0===s?void 0:s.length)>0&&(p||[]).forEach((function(e){if(null!==e&&void 0!==e&&e.resourceId){var t=s.indexOf(null===e||void 0===e?void 0:e.resourceId);t>-1&&(h.push(e.resourceId),f.push(l[t]),m++)}})),e.additionCount=f,e.additionOptid=h,n.additionalSale={title:"\u8d85\u503c\u8d2d",subTitle:"\u5e2e\u4f60\u83b7\u5f97\u8d85\u597d\u6e38\u73a9\u4f53\u9a8c",resources:p,ifResourecesDiff:g!=m,onlyId:(new Date).getTime()+""}},ie=function(e,t,n,r){var o=t.getContractInfo,i=t.getProductInfo,a=o||{},s=a.templateId,l=a.content;if(s&&l){var c=ae(null===i||void 0===i?void 0:i[0]);n.contract={templateId:s,contractDetail:l,hyperlinkText:c}}},ae=function(e){var t,n="",r=null===e||void 0===e||null===(t=e.vendorInfo)||void 0===t?void 0:t.contractSupply;return n=2==r?"\u96f6\u552e\u5e73\u53f0\u9884\u8ba2\u987b\u77e5":"\u9884\u8ba2\u6761\u6b3e",n},se=function(e,t,n){var r,o=t.getCommonInfo,i=null===o||void 0===o||null===(r=o.commonContacts)||void 0===r?void 0:r[0];i&&(n.commonInfo={mobile:i.mobilePhone||i.mobilePhoneForeign,areaCode:i.countryCode||i.countryCodeForeign})},le=n(68277);n(1089),n(59001),n(89983),n(45116),n(19132),n(662);try{var ce=n(33675);ce&&ce.cwx}catch(e){console.log("%c ".concat(e),"color:red;")}var ue=21,de=n(97142),pe=["poiId","spotId","shownewuserpromo"],he=(0,p.ZP)(),fe=function(e){var t=(0,p.ZP)(),n=t.language,o=t.currency,i=t.cid,a=he.enviroment.toLowerCase()||"prod",s="dev"===a?"fat":a,l=e||{},c=(l.poiId,l.spotId,l.shownewuserpromo,(0,le.Z)(l,pe));return(0,r.Z)({env:s,saleChannel:ue,clientId:i||"",locale:n||"zh-CN",currency:o||"CNY",pageId:(0,v.dD)(),sceneParam:me((0,r.Z)((0,r.Z)({},e),{},{env:c.env||s}))},c)},ge={fat:"5w5f77k93fax",prod:"29zavd6trf87"},me=function(e){var t=e||{},n=t.poiId,r=t.spotId,o=t.shownewuserpromo,i=t.env,a=t.isscan,s=[];n&&s.push({type:3008,value:String(n)}),r&&s.push({type:3009,value:String(r)});var l=[],c=a?5013:5014;return l.push({type:c,value:String(c)}),{sceneCode:ge[i],filters:[{filterSubId:2003,filterValueList:[{type:2007,value:"use-poiid-query"}]},{filterSubId:3006,filterValueList:s},{filterSubId:5002,filterValueList:l}],shownewuserpromo:o||!1}},ve=function(){var e=(0,p.ZP)(),t=e.isInMini,n=e.platform,r=e.enviroment,o=r.toLowerCase()||"prod";return{env:"dev"==o||"fat"==o?de.vw.Fat:de.vw.Prod,ctType:de.Yw.CTRIP,clientType:t?de.AH.MiniProgram:n==h.NX.RN?de.AH.NATIVE:de.AH.H5}},_e=function(e,t){t.crossCouponParams||(t.crossCouponParams={});var n=e||{},r=n.spotid,o=n.isscan,i=fe({spotId:r,isscan:o}),a=ve();t.crossCouponParams={data:i,clientEnv:a,traceLogId:de.K1.TICKET}},ye=_e,xe=n(91410),be=n(21705),Ze=n(26382),Ie=n(60594),Ce=n(87225),ke=function(e,t,n){var r=(null===t||void 0===t?void 0:t.getConfig)||{},o=r.hideForScan,i=void 0===o?{}:o;if(e.isscan){var a=!!i.needHide;n.MindTourHide=a,n.IMHide=a,n.payComToOrder=a}},we=n(22561),Te=(0,Ce.M)("230129_VAC_jdzdl",{testValue:"A"}),Se={getParamsFromUrl:function(e){var t=(0,Ze.L5)(void 0,e);return A.Fs.save({originParams:t}),t},getFormatByModules:function(e,t,n,r,o,i){var a,s={};try{n.forEach((function(n){a=n,s=Pe(n,s,e,t,r,o,"firstInit"===i&&["B"].includes(Te)?i:"")}))}catch(t){(0,we.T)(t,be.Uj,[t]),(0,v.gp)({type:"booking_format_fail",body:{currentMd:a,request:e,modules:n,other:r,optid:o,scene:i,value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",errorMsg:t?t.message:"\u65e0",errorStack:t?t.stack:"\u65e0"}}),"firstInit"===i&&(s.isSaleOut=!0)}return s}},Pe=function(e,t,n,i,a,s,l){switch(e){case"reservationTerms":(0,o.ZP)(n,i,t);break;case"passengerModal":c(n,i,t,{scene:l});break;case"passengerList":(0,u.ZP)(n,i,t,a);break;case"insurance":(0,d.ZP)(n,i,t,a);break;case"holiday":t.holiday=(0,Ie.Z)(i);break;case"sku":t.sku=(0,N.nc)(n,i);break;case"qconfig":t.qconfig=(0,r.Z)((0,r.Z)({},t.qconfig),i.getQconfig);break;case"params":m(n,i,t);break;case"productInfo":t.request=_(n,i,s||n.optid,null===a||void 0===a?void 0:a.mainResouceChange,{scene:l});break;case"refundPolicy":(0,x.Z)(n,i,t,a);break;case"headertips":L(n,i,t,a);break;case"appendInfo":(0,j.Z)(n,i,t,a);break;case"coupon":O(n,i,t,a);break;case"bargain":z(n,i,t);break;case"couponParams":q(n,t,a);break;case"crossCouponParams":ye(n,t);break;case"naquhua":W(n,i,t,a);break;case"hotelCoupon":K(n,i,t);break;case"imInfo":J(n,i,"3dr876s9he4oo",t);break;case"additionalSale":oe(n,i,t,a);break;case"contract":ie(n,i,t,a);break;case"commonInfo":se(n,i,t);break;case"recommend":(0,xe.ZP)(n,i,t,a,s);break;case"config":ke(n,i,t);break}return t}},88327:function(e,t,n){n.d(t,{Wy:function(){return m},td:function(){return v},A2:function(){return _},rY:function(){return y}});var r=n(90983),o=n(49502),i=n(83692),a=n(84578),s=n(68924),l=n(9422),c=n(73435),u=n(75833),d=n(61252),p=function(e){var t="",n=[];return e.map((function(e,r){var o=e.detailDesc,i=e.structureDetails;o&&(t+=o),i&&i.length&&(n=n.concat(h(i)))})),{coverageList:n,description:t}},h=function(e){return e.length>0?e.map((function(e){var t=e.subName,n=e.subDetails,r=void 0===n?[]:n;if(r&&r.length>1)return[{content:["".concat(t)],size:"small",width:"30%"},{row:f(r),width:"70%"}];var o=r[0]||{},i=o.desc,a=o.limitAmt;return[{row:[[{content:["".concat(t)],size:"small",width:"30%"},{content:["".concat(i)],size:"small",width:"50%"},{content:["".concat(a)],size:"small",width:"20%"}]],width:"100%"}]})):[]},f=function(e){return e.map((function(e){var t=e.desc,n=e.limitAmt;return[{content:["".concat(t)],size:"small",width:"65%"},{content:["".concat(n)],size:"small",width:"35%"}]}))},g=function(e,t,n){var r=p(t.detailInfos),o=r.coverageList,i=r.description,a=m(e);return{isChecked:!1,name:t.sceneName||t.name,tags:function(){var e=[],n=t.salePoints||[];return n.map((function(n,r){e.push({text:n,highLight:0==r&&t.highLight})})),e}(),id:t.id,price:t.price,baseUnitTxt:n?"/\u5355":"/\u4eba",countUnitTxt:n?"":1==a?"/\u4efd":"x".concat(a,"\u4efd"),count:n?1:a,resourceCount:a,coverageList:o,clauseUrl:t.clauseUrl,detailUrl:t.detailUrl,insuranceRules:i,insuranceCompany:t.insuranceCompany}},m=function(e){var t=e.count,n=void 0===t?[]:t,r=e.optid,i=void 0===r?[]:r;e.boxMap;return n.reduce((function(e,t,n){var r=(0,c.dC)(t,(0,o.Lm)(i[n]));return(0,c.IH)(e,r)}),0)||1},v=function(e,t){var n,o=[],a=t||{},l=a.passengerModal,c=a.insuredGroup,u=[];if(null!==c&&void 0!==c&&c.dChoice)u=c.dChoice;else{var d=c||{},p=d.insuranceId,h=(0,s.Q4)(l,e,p),f=h.list;u=f}if((null===(n=u)||void 0===n?void 0:n.length)>0){var g,m=(0,r.Z)(u);try{var v=function(){var t=g.value,n=e.find((function(e){return e.PassengerID==t})),r=(0,s.JV)(n,["birth"]),a=r.birth;if((0,i.uo)(a))return o=[t],1};for(m.s();!(g=m.n()).done;)if(v())break}catch(e){m.e(e)}finally{m.f()}}return o},_=function(e,t,n){var r={list:[],syncList:[]};if(null==e||null==e.group||0==e.group.length)return r;for(var o=e.group,i=0;i<o.length;i++)for(var a=o[i],c=a.resourceId,p=a.boxId,h=(0,u.jX)(p,c),f=0;f<o[i].dChoice.length;f++){var g,m=o[i].dChoice[f];r.list.push(m);var v=(0,s.ly)(m,t),_=null===(g=v.resourceCardInfo)||void 0===g||null===(g=g[h])||void 0===g?void 0:g.CardType;v.resourceCardInfo||(0,d.gp)({body:{title:"resourceCardInfo\u4e3aundefined",passengerList:t,passengerModal:e}}),_&&(0,u.Zx)([n],v,_),r.syncList.push({id:m,isDefect:(0,l.y)(v,c,p),isFromPassenger:!0})}return r};t["ZP"]=function(e,t,n,r){var i=t.getInsurance,s=t.getCustomerTemplate;s||(s=a.Fs.load("getCustomerTemplate"));var l=r.passengerList,c=r.passengerModal;if(i){var u=i.descInfo,d=i.insuranceInfos,p=i.needCancelInsurance;if(u&&d&&d.length>0){var h,f=null===(h=d[0])||void 0===h?void 0:h.needRealName,y=n.insurance={},x=u.sceneRender,b=u.warnMessage;if(x&&(y.desc=x.desc||"",y.subDesc=x.subDesc||""),y.insuranceInfo=g(e,d[0],p),y.insuredTip="\u8bf7\u5148\u9009\u62e9\u51fa\u884c\u4eba",y.policyHolderTip="\u9700\u586b\u51991\u540d\u6ee118\u5468\u5c81\u6295\u4fdd\u4eba\u4fe1\u606f",y.needRealName=f,y.isCancelInsurance=p,s&&s[0]){var Z=s[0].insuranceTemplates,I=(0,o.YG)(Z),C=function(){return(Z||[]).filter((function(e){return 2===e.model}))||[]}();if(f){var k=_(c,l,y.insuranceInfo.id),w=k.list,T=k.syncList,S=m(e);y.insuredGroup={insuranceId:y.insuranceInfo.id,choice:S,dChoice:w.slice(0,S),syncChoice:T,addPassenger:I,CardInfo:C},y.policyholderGroup={insuranceId:y.insuranceInfo.id,choice:1,dChoice:v(l,{insuredGroup:y.insuredGroup}),addPassenger:I,CardInfo:C}}else y.policyholderGroup={insuranceId:y.insuranceInfo.id,choice:1,dChoice:v(l,{passengerModal:c}),addPassenger:I,CardInfo:C}}y.cancelTip=b||""}}};var y=function(e,t){var n,r=e||{},o=r.insurance;return(null===t||void 0===t?void 0:t.insuranceId)!=(null===o||void 0===o||null===(n=o.insuranceInfo)||void 0===n?void 0:n.id)?"":null===t||void 0===t?void 0:t.insuranceId}},68983:function(e,t,n){n.d(t,{nK:function(){return i},rC:function(){return s}});var r=n(121),o=n(75833),i=function(e,t,n){if((null===t||void 0===t?void 0:t.length)!=(null===e||void 0===e?void 0:e.length))return!0;var o=null===t||void 0===t?void 0:t.find((function(e){if(e.PassengerID==n)return e})),i=null===e||void 0===e?void 0:e.find((function(e){if(e.PassengerID==n)return e}));return!(0,r.vZ)(o,i)},a=function(e,t,n,r,i,a){var s=(0,o.jX)(n,t);if(!e[s]){var l=(0,o.Y3)(t,i,r,a);e[s]={CardType:l}}},s=function(e,t,n,r,o){e.map((function(e){var i=e.CardSource,s=void 0===i?{}:i;e.resourceCardInfo=e.resourceCardInfo||{},r&&r.forEach((function(r){var o;null!==(o=n[r])&&void 0!==o&&o.length?n[r].forEach((function(n){a(e.resourceCardInfo,n.resourceId,r,s,t)})):a(e.resourceCardInfo,r,void 0,s,t)})),o&&o.forEach((function(n){a(e.resourceCardInfo,n,void 0,s,t,!0)}))}))};t["ZP"]=function(e,t,n,r){var o=r||{},i=o.passengerList;n.passengerList||(n.passengerList=[]);var a=t.getUserCommonInfo,l=t.getCustomerTemplate,c=void 0===l?[]:l,u=e.optid,d=void 0===u?[]:u,p=e.boxMap;if(a&&a.CommonPassengerInfo&&a.CommonPassengerInfo.CommonPassengerList||i){var h=i||a.CommonPassengerInfo.CommonPassengerList;n.passengerList=h,n.passengerList&&n.passengerList.map((function(e){e.CardSource={},e.CommonPassengerCard&&e.CommonPassengerCard.map((function(t){e.CardSource[t.CardType]=t})),s([e],c,p,d)}))}}},32500:function(e,t,n){n.d(t,{W:function(){return r}}),t["Z"]=function(e,t,n,r){if(null!==t&&void 0!==t&&t.length&&null!==e&&void 0!==e&&e.length){var i=["V0007","V0006","V0008","V0009"],a=[];t.forEach((function(t,n){null!==t&&void 0!==t&&t.result||!i.includes(t.errorCode)?null!==t&&void 0!==t&&t.result||i.includes(t.errorCode)||""===t.data||a.push({errorMessage:t.errorMessage,passengerId:e[n],errMsg:"",resourceId:r||""}):a.push({errorMessage:t.errorMessage,passengerId:e[n],errMsg:o[t.errorCode],resourceId:r||""})}));var s=n||[];return s.forEach((function(t){e.includes(null===t||void 0===t?void 0:t.passengerId)||a.push(t)})),a}return[]};var r=function(e,t){var n;if(!e)return[];var r=e.resourceCardInfo&&(null===(n=e.resourceCardInfo[t])||void 0===n?void 0:n.CardType),o=[{cname:e.CNName||"",eName:"".concat(e.ENLastName,"/").concat(e.ENFirstName),cardType:r,cardNo:function(){var t=((null===e||void 0===e?void 0:e.CommonPassengerCard)||[]).find((function(e){return Number(e.CardType)==r}));return t&&t.CardNo||""}(),birthDate:e.Birthday,contactMobile:e.MobilePhone}];return o},o=function(e){return e["V0006"]="\u6027\u522b",e["V0007"]="\u5e74\u9f84",e["V0008"]="\u6240\u5728\u5730",e["V0009"]="\u751f\u65e5",e}(o||{})},79239:function(e,t,n){n.d(t,{zu:function(){return s},nI:function(){return c},Az:function(){return d}});var r=n(19524),o=n(121),i=function(e,t){var n=[],r=e.boxMap,o=void 0===r?{}:r,i=!0;return t.map((function(t){e.optid.map((function(e){var r;if(e==Number(t.resourceId)||null!==(r=o[e])&&void 0!==r&&r.find((function(e){return e.resourceId==Number(t.resourceId)}))){var a=t.contactTemplates;i=t.overseasPhoneNumber&&i,a.map((function(e){var t=n.find((function(t){return t.type==e.type}));t||n.push(e)}))}}))})),{list:n,overseasPhoneNumber:i}};t["ZP"]=function(e,t,n,a){var s=t.getCustomerTemplate,l=t.getUserCommonInfo,c=a||{},u=c.passengerList,d={},p={};try{d=t.getUserCommonInfo.ContactInfo.CommonContactList[0]}catch(e){}e.commonContactID=d.InfoID;var h={};try{u||l.CommonPassengerInfo.CommonPassengerList,h=l.CommonPassengerInfo.CommonPassengerList[0]}catch(e){}if(s){var f=i(e,s),g=f.list,m=f.overseasPhoneNumber;if(g){n&&n.contactInfo&&(p=(0,o.I8)(n.contactInfo)),n.contactInfo={};var v=n.contactInfo.contact=[],_=g.find((function(e){return 1==e.type}));_&&(n.contactInfo.name=d.ContactName||"",v.push({mode:r.$.contact,name:_.name}));var y=g.find((function(e){return 2==e.type}));if(y){var x=null;m&&(n.contactInfo.areaCode=p.areaCode||d.CountryCodeForeign||h.CountryCodeForeign||"86",n.contactInfo.mobile=p.mobile||d.MobilePhoneForeign||h.MobilePhoneForeign||"",x={mode:r.$.areaCodeMobile,name:y.name},v.push(x)),n.contactInfo.mobile||(n.contactInfo.mobile=p.mobile||d.Moblie||h.MobilePhone||"",n.contactInfo.areaCode=p.areaCode||h.CountryCode||"86",x||v.push({mode:r.$.mobile,name:y.name}))}var b=g.find((function(e){return 3==e.type||4==e.type}));if(b){var Z;n.contactInfo.email=p.email||d.Email,n.contactInfo.emailType=b.type;var I=null===(Z=p)||void 0===Z||null===(Z=Z.contact)||void 0===Z?void 0:Z.some((function(e){return 3==e.mode}));v.push({mode:I?3:b.type,name:b.name})}}}else e.aggregation&&(n.contactInfo={areaCode:h.CountryCode||"86",mobile:d.Moblie||h.MobilePhone||"",contact:[{mode:r.$.mobile,name:"\u8054\u7cfb\u624b\u673a"}]})};var a=function(e){var t=/^(\d{0,3})(\d{0,4})(\d*)$/;return"".concat(e).replace(/\s+/g,"").replace(t,"$1 $2 $3").trim()},s=function(e,t){var n=p(e,t);return e.contactInfo.mobilePopTip=n,n},l=!1,c=function(e){l=e},u=function(){return l},d="\u8bf7\u6ce8\u610f\u6b64\u53f7\u7801\u4f5c\u4e3a\u8ba2\u5355\u8054\u7cfb\u624b\u673a",p=function(e,t){var n=e.contactInfo,o=e.group,i=n||{},s=i.mobile,l=i.contact,c=void 0===l?[]:l;if(u()||!s)return"";if(null===o||void 0===o||!o.length)return d;var p=o.every((function(e){var t;return e.choice==(null===(t=e.dChoice)||void 0===t?void 0:t.length)}));if(!p)return"";if(1==o.length&&1==o[0].choice){var h=o[0].dChoice,f=t.find((function(e){return e.PassengerID==h[0]})),g=f||{},m=g.ENLastName,v=g.isShowEnglish,_=g.MobilePhone,y=g.ENFirstName,x=g.CNName,b=g.CountryCode;if(!_)return d;if(_==s)return"";var Z=c.some((function(e){return e.mode==r.$.areaCodeMobile}));return"\u66ff\u6362\u6210\uff1a".concat(Z&&b?"+"+b+" ":"").concat(a(_)," ").concat(v?m+"/"+y:x)}var I=o.reduce((function(e,t){return e.concat(t.dChoice)}),[]),C=!1;return I.map((function(e){var n=t.find((function(t){return t.PassengerID==e}));s==(null===n||void 0===n?void 0:n.MobilePhone)&&(C=!0)})),C?"":d}},75833:function(e,t,n){n.d(t,{Y3:function(){return r},Zx:function(){return o},jX:function(){return i}});var r=function(e,t,n,r){if(n||(n={}),r){var o=(t||[])[0];if(o)for(var i=o.insuranceTemplates,a=void 0===i?[]:i,s=o.templates,l=void 0===s?[]:s,c=l.concat(a),u=0;u<c.length;u++)if(2==c[u].model&&n[c[u].cardType])return c[u].cardType}else{var d=(t||[]).find((function(t){return t.resourceId==e}));if(d)for(var p=d.templates,h=void 0===p?[]:p,f=0;f<h.length;f++)if(2==h[f].model&&n[h[f].cardType])return h[f].cardType}return 1},o=function(e,t,n,r){t.resourceCardInfo=t.resourceCardInfo||{},e.forEach((function(e){var o=i(r,e);t.resourceCardInfo[o]={CardType:n}}))},i=function(e,t){return e?""+t+e:""+t}},49502:function(e,t,n){n.d(t,{ZP:function(){return C},YG:function(){return T},Iq:function(){return b},Lm:function(){return Z},Mh:function(){return I},hU:function(){return P}});var r=n(45023),o=n(298),i=n(22276),a=n(90983),s=n(9422),l=n(121),c=n(84578),u=n(75833),d=n(45803),p=function(e,t){var n=e.getProductInfo,r=e.request;if(n){var o,i=r.optid,s=!1,l=(0,a.Z)(n);try{var c=function(){var e=o.value;if(!i.find((function(t){return t==e.resourceInfos[0].resourceId})))return 1;var t=e.basicInfo&&e.basicInfo.flags;Array.isArray(t)&&t.includes("useSaleUnitLimitSettings")&&(s=!0)};for(l.s();!(o=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}if(!s)return;for(var u,d=function(e){var r=n.find((function(t){return t.resourceInfos[0].resourceId==i[e]}));if(r&&r.resourceInfos&&r.resourceInfos[0]&&r.resourceInfos[0].basicInfo){var o=r.resourceInfos[0].basicInfo.peopleApplicableInfo;if(0==o.rangeType&&(0!=o.rangeMax||0!=o.rangeMin))return null==t?{v:!0}:{v:0!=o.rangeMax&&t>o.rangeMax||0!=o.rangeMin&&t<o.rangeMin}}},p=0;p<i.length;p++)if(u=d(p),u)return u.v;return!1}},h=function(e,t,n,r){for(var o=c.Fs.load("getProductInfo"),i={noBox:[]},a=0;a<e.length;a++){var s=e[a];s.boxId?(i[s.boxId]||(i[s.boxId]=[]),i[s.boxId].push(s)):i["noBox"].push(s)}var h=Object.keys(i),m=[];return h.forEach((function(e){var t=i[e];if(t.length)for(var a,s=(0,l.I8)(t[0]),c=s.isCrossMerge,h=t.map((function(e){return e.resourceId})),m=s.dChoice,v=s.notFullList,_=s.resourceIdList,y=s.resourceChoice,x=Z(s.boxId),b=function(){var a,b,Z,C,k=t[I];if((1!=k.fillInNumberLimit||p({getProductInfo:o,request:{optid:h}}))&&(!c||1!=x))return c?t.forEach((function(e){e.ticketName=(0,d.C)(e.resourceId,!0,r)})):s.boxId&&t.forEach((function(e){e.ticketName=g(e.boxId,r)+"\xb7"+e.name})),{v:void 0};s.fillInNumberLimit=k.fillInNumberLimit&&s.fillInNumberLimit;var w=(s.addPassenger||[]).filter((function(e){return[1,2,3].includes(e.itemId)})),T=((null===k||void 0===k?void 0:k.addPassenger)||[]).filter((function(e){return[1,2,3].includes(e.itemId)})),S=(s.addPassenger||[]).filter((function(e){return![1,2,3].includes(e.itemId)})),P=[];if(!c&&3!=(null===(a=T[0])||void 0===a?void 0:a.itemId)&&3!=(null===(b=w[0])||void 0===b?void 0:b.itemId)&&!(0,l.vZ)(T,w))return{v:void 0};if(T.forEach((function(e){if(1==e.itemId)s.needCName=f(s.needCName,s.needEName,k.resourceId,s.resourceIdList);else if(2==e.itemId)s.needEName=f(s.needEName,s.needCName,k.resourceId,s.resourceIdList);else{var t,n,r;null!==(t=s.needCName)&&void 0!==t&&t.length?s.needCName.push(k.resourceId):null!==(n=s.needEName)&&void 0!==n&&n.length&&(null===(r=s.needEName)||void 0===r||r.push(k.resourceId))}})),P=(0,l.I8)(w),T.forEach((function(e){P.every((function(t){return t.itemId!=e.itemId}))&&P.push(e)})),P.sort((function(e,t){return e.itemId-t.itemId})),P.length>1){var L=P.findIndex((function(e){return 3==e.itemId}));-1!=L&&P.splice(L,1)}var N=((null===k||void 0===k?void 0:k.addPassenger)||[]).filter((function(e){return![1,2,3].includes(e.itemId)&&!S.find((function(t){return t.itemId===e.itemId}))}));s.addPassenger=P.concat(S,N);var j,D=s.CardInfo,V=((null===k||void 0===k?void 0:k.CardInfo)||[]).filter((function(e){return null===D||void 0===D?void 0:D.find((function(t){return t.itemId===e.itemId}))}));return s.choice=Math.max(s.choice,k.choice),!V.length&&null!==(Z=s.CardInfo)&&void 0!==Z&&Z.length&&null!==(C=k.CardInfo)&&void 0!==C&&C.length?{v:void 0}:(s.CardInfo=V.length?V:null!==(j=s.CardInfo)&&void 0!==j&&j.length?s.CardInfo:k.CardInfo,m=m.concat(k.dChoice),v=v.concat(k.notFullList),_=_.concat(k.resourceIdList),y[k.resourceId]=k.resourceChoice[k.resourceId],I==t.length-1?(s.notFullList=Array.from(new Set(v)),s.resourceIdList=Array.from(new Set(_)),m=Array.from(new Set(m)),s.dChoice=m.filter((function(e){return!s.notFullList.find((function(t){return t==e}))})),s.resourceChoice=y,s.boxId&&(s.name=g(s.boxId,r)),i[e]=[s],n.forEach((function(e){var t,n,r=(null===(t=s.CardInfo)||void 0===t?void 0:t.length)&&s.CardInfo[0].cardType,o=((null===(n=s.CardInfo)||void 0===n?void 0:n.find((function(t){return e.CardSource[t.cardType]})))||{}).cardType;r=o||r,r&&(0,u.Zx)(s.resourceIdList,e,r,s.boxId)})),{v:void 0}):void 0)},I=0;I<t.length;I++)if(a=b(),a)return a.v})),h.forEach((function(e){for(var t=i[e],n=0;n<t.length;n++)m.push(t[n])})),1==m.length&&(m[0].name="\u6e38\u5ba2",m[0].desc=""),m},f=function(e,t,n,r){return e.length||t.length?(e||[]).concat([n]):e.concat(r)},g=function(e,t,n){var r="";if(t&&t.resources){var o=t.resources.find((function(t){return t.mixedIds.find((function(t){return t==e}))}));return r=(o||{}).resourceName||"",r}n||(n=c.Fs.load("getProductPriceCalendar"));var i=n||{},a=i.resourceInfos,s=void 0===a?[]:a,l=s.find((function(t){return t.mixedIds.find((function(t){return t==e}))}));return r=(l||{}).resourceName||"",r},m=n(83692),v=n(94765),_=n(32500),y=n(56569),x=n(73435),b=function(e,t,n,r,o,i){var a=[];if(e&&e.length){for(var l=t.concat(n,r),c=function(t){var r=!1;l.map((function(a){var l=(0,s.Z)(a.itemId,e[t],n,o,i);l.isError&&(r=!0)})),r&&a.push(e[t].PassengerID)},u=0;u<e.length;u++)c(u);return a}return[]},Z=function(e,t){var n;t||(t=c.Fs.load("getProductPriceCalendar"));var r=t||{},o=r.packageInfos,i=void 0===o?[]:o,a=i.find((function(t){return t.resourceInfos[0].resourceId==e}));return(null===a||void 0===a||null===(n=a.resourceInfos[0])||void 0===n?void 0:n.unitSaleCount)||1},I=function(e,t,n){var r=t.addPassenger,o=t.CardInfo,i=void 0===o?[]:o,c=t.HkvisaInfo,u=void 0===c?[]:c,d=t.boxId,p={1:"\u4e2d\u6587\u59d3\u540d",2:"\u82f1\u6587\u59d3\u540d",3:"\u59d3\u540d",4:"\u56fd\u5bb6/\u5730\u533a",6:"\u6027\u522b",7:"\u8bc1\u4ef6\u4fe1\u606f",8:"\u51fa\u751f\u65e5\u671f",10:"\u8bc1\u4ef6\u6709\u6548\u671f",11:"\u8054\u7cfb\u65b9\u5f0f",500:"\u8bc1\u4ef6\u7b7e\u53d1\u65e5\u671f"},h="",f=(0,l.I8)(r);f=f.concat(i,u);var g,m=(0,a.Z)(f);try{for(m.s();!(g=m.n()).done;){var v=g.value,_=e?(0,s.Z)(v.itemId,e,i,n,d):{};if(_.isError){h="\u8bf7\u8865\u5145"+p[v.itemId];break}}}catch(e){m.e(e)}finally{m.f()}return h},C=function(e,t,n,r,o){var i,a,s=t.getProductPriceCalendar,l=void 0===s?{}:s,c=t.getCustomerTemplate,u=t.getUserCommonInfo,d=o||{},p=d.passengerList,f=d.isAddition,g=d.scene,m=e.optid,v=void 0===m?[]:m,_=e.boxMap,y=p||(null===u||void 0===u||null===(i=u.CommonPassengerInfo)||void 0===i?void 0:i.CommonPassengerList)||[];if(l&&c){for(var b,Z=[],I=0==e.count.length?[1]:e.count,C=function(e){var r,i=v[e];null!==(r=_[i])&&void 0!==r&&r.length?_[i].map((function(r){w(t,r.resourceId,Z,n,y,o,(0,x.dC)(I[e],r.unitQuantity),i)})):w(t,i,Z,n,y,o,I[e])},T=0;T<I.length;T++)C(T);Z=h(Z,e,y,r),n.group=k(Z,e,r),1!=(null===(b=n.group)||void 0===b?void 0:b.length)||n.group[0].dChoice.length||f||"firstInit"==g||(n.group[0].dChoice=S(e,t,n.group[0].notFullList))}else!l||!e.aggregation||null!==e&&void 0!==e&&null!==(a=e.optid)&&void 0!==a&&a.length||(n.group=[{dChoice:[],notFullList:[]}])},k=function(e,t,n){if(!n)return e;var r=[],o=n&&n.calendar&&n.calendar.length?n.calendar.find((function(e){return e.date==t.date})):null;if(!o)return e;var i=o.resources,a=n.resources,s=t.boxMap,l=void 0===s?{}:s;return a.map((function(t){for(var n=function(n){if(t.mixedIds.includes(e[n].boxId||e[n].resourceId)){var o=i.find((function(t){var r;return null!==(r=l[t.resourceId])&&void 0!==r&&r.length?t.resourceId==e[n].boxId:t.resourceId==e[n].resourceId}));return o&&(e[n].boxId?e.forEach((function(t){return t.boxId==e[n].boxId&&r.push(t)})):r.push(e[n])),1}},o=0;o<e.length;o++)if(n(o))break})),r},w=function(e,t,n,a,s,l,c,d){for(var p,h,f=l||{},g=f.name,m=f.groupItems,_=void 0===m?[]:m,y=f.isAddition,x=(f.scene,e.getProductPriceCalendar),C=void 0===x?{}:x,k=e.getCustomerTemplate,w=C.packageInfos,S=void 0===w?[]:w,P=C.firstLevelInfos,L=void 0===P?[]:P,N=L.length>1,j=0;j<S.length;j++){var D,V=null===(D=S[j].resourceInfos)||void 0===D?void 0:D.find((function(e){return e.resourceId==t}));if(V){h=V;break}}var E=k.find((function(e){return e.resourceId==t})),R=null===a||void 0===a||null===(p=a.group)||void 0===p?void 0:p.find((function(e){return e.resourceId==t&&e.boxId==d}));if(E&&2!=E.fillInNumberLimit){var A,F=h||{},M=F.peopleApplicableInfo,O=void 0===M?{}:M,B=F.resourceName,G=E.templates,H=E.overseasPhoneNumber,z=T(G),U=(G||[]).filter((function(e){return 2===e.model}))||[],q=(G||[]).filter((function(e){return 3===e.model}))||[],W=1==E.fillInNumberLimit,K=_.reduce((function(e,t){return Array.from(new Set([].concat((0,i.Z)(e),(0,i.Z)(t.dChoice))))}),[]),J=1;if(y){var X=_.find((function(e){return 0==e.fillInNumberLimit}));if(W){var Q=s.find((function(e){var t;return e.PassengerID==(null===(t=_[0])||void 0===t?void 0:t.dChoice[0])}));if(Q){var $=(0,u.Y3)(t,[E],Q.CardSource),Y=!I((0,o.Z)((0,o.Z)({},Q),{},{resourceCardInfo:(0,r.Z)({},t,{CardType:$})}),{addPassenger:z,CardInfo:U,HkvisaInfo:q},t);X||Y&&(a.useMainPassen=!0)}}else J=Math.min(K.length,Number(c))}var ee=b(s,z,U,q,t,d),te=W?1:Number(c)*Z(t,C),ne=[],re=null===a||void 0===a||null===(A=a.peopleChoice)||void 0===A?void 0:A.find((function(e){return e.peoplePropertyId===h.peoplePropertyId&&e.boxId==d}));if(null!==R&&void 0!==R&&R.dChoice)ne=R.dChoice.filter((function(e){return s.find((function(t){return t.PassengerID==e}))})).slice(0,te);else if(re){var oe=(0,i.Z)(re.dChoice).filter((function(e){return!ee.includes(e)&&s.find((function(t){return t.PassengerID==e}))}));ne=oe.slice(0,te)}if(y&&!(0,v.js)(t)){var ie=0;ne=[];for(var ae=function(e){var n=s.find((function(t){return t.PassengerID==K[e]})),i=(0,u.Y3)(t,[E],n.CardSource),a=!I((0,o.Z)((0,o.Z)({},n),{},{resourceCardInfo:(0,r.Z)({},t,{CardType:i})}),{addPassenger:z,CardInfo:U,HkvisaInfo:q},t);if(ie>=J)return 1;a&&(ne.push(K[e]),ie++)},se=0;se<K.length;se++)if(ae(se))break}var le={fillInNumberLimit:E.fillInNumberLimit,resourceId:t,overseasPhoneNumber:H,resourceIdList:[t],name:g||B||"",desc:O.resourceDesc||"",choice:te,dChoice:ne,addPassenger:z,CardInfo:U,HkvisaInfo:q,peopleapplicableinfo:{maxage:O.rangeMax,minage:O.rangeMin,serialnumber:O.serialNumber,targetdesc:O.resourceDesc},notFullList:ee,boxId:d||void 0,needEName:[],needCName:[],isCrossMerge:N,ticketName:"",resourceChoice:(0,r.Z)({},t,te)};n.push(le)}},T=function(e){var t=(e||[]).sort((function(e,t){return e.itemId-t.itemId})),n=[],r=[],o=[];return t.map((function(e){1==e.model&&([1,2,3].includes(e.itemId)?(3!=e.itemId||3==e.itemId&&0==n.length)&&n.push(e):[4,5,7,10].includes(e.itemId)?r.push(e):o.push(e))})),[].concat(n,r,o)},S=function(e,t,n){if((0,y.rI)())return[];var r=t.getUserCommonInfo,o=t.getProductInfo;if(r&&r.CommonPassengerInfo&&r.CommonPassengerInfo.CommonPassengerList){var i=r.CommonPassengerInfo.CommonPassengerList,a=Math.min(i.length,3),s=[];e.optid.forEach((function(t){var n;return null!==(n=e.boxMap[t])&&void 0!==n&&n.length?e.boxMap[t].forEach((function(e){return s.push(e.resourceId)})):s.push(t)}));for(var l=0;l<a;l++)if(!p({getProductInfo:o,request:{optid:s}},(0,m.Ay)({birthday:i[l].Birthday}))&&!n.includes(i[l].PassengerID))return[i[l].PassengerID]}return[]},P=function(e,t,n){if(t.length){var r=n.showList,o=void 0===r?[]:r,i=n.group,a=void 0===i?[]:i,s=a[0]||{},l=s.notFullList,c=void 0===l?[]:l,d=t.filter((function(e){return o.includes(e.PassengerID)&&!c.includes(e.PassengerID)}));d.sort((function(e,t){return o.indexOf(e.PassengerID)-o.indexOf(t.PassengerID)}));var p,h=d.length,f=[],g=e.optid[0],m=""+g;e.boxMap[e.optid[0]]&&e.boxMap[e.optid[0]].length&&(g=e.boxMap[e.optid[0]][0].resourceId,p=e.optid[0],m=(0,u.jX)(e.optid[0],g));for(var v=function(){var t,r=(0,_.W)(d[y],m),o=null===n||void 0===n||null===(t=n.group)||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.resourceId)==g&&(null===e||void 0===e?void 0:e.boxId)==p})),i=1==(null===o||void 0===o?void 0:o.fillInNumberLimit)?e.count[0]:1,a=null===o||void 0===o?void 0:o.resourceIdList.map((function(t){return{quanty:i||1,useDate:e.date||e.minDate||"",resourceId:t,passengers:r,parentResourceId:null!==o&&void 0!==o&&o.boxId?o.boxId:null}}));a&&f.push(a)},y=0;y<h;y++)v();if(f.length)return f}return[]}},65516:function(e,t,n){var r=n(22276);t["Z"]=function(e,t,n,o){var i=t.getUserCommonInfo,a=t.getCustomerTemplate,s=i&&i.CommonPassengerInfo&&i.CommonPassengerInfo.CommonPassengerList;if(s||o&&o.length){var l=s?i.CommonPassengerInfo.CommonPassengerList:o;n.showList=[];var c=(a||[]).filter((function(e){return 2==e.fillInNumberLimit}));if(0==c.length||c.length!=(null===a||void 0===a?void 0:a.length))for(var u=0;u<l.length&&u<3;u++)n.showList.push(l[u].PassengerID);if(n.group&&1===n.group.length){if(n.group[0].notFullList.length){var d=n.group[0].notFullList||[];n.showList.map((function(e,t){d.includes(e)&&(n.showList.splice(t,1),n.showList.push(e))}))}n.group[0].dChoice&&(n.showList=Array.from(new Set([].concat((0,r.Z)(n.group[0].dChoice),(0,r.Z)(n.showList)))),n.showList.splice(3))}}}},91410:function(e,t,n){n.d(t,{ji:function(){return r},Qn:function(){return o}}),t["ZP"]=function(e,t,n,r,o){var i=t.getRecommendProduct,a=r.createParams,s=i.map((function(e){var t=e.idCardNo,n=void 0===t?[]:t,r=e.applicableCondition,i=e.selectedInfo,s=e.recommendInfo,l=void 0===s?{}:s,c=e.recommendType,u=n.reduce((function(e,t){var n=a.passengers.find((function(e){return e.cardno==t}));return n&&e.push(n.name||n.ename),e}),[]),d=n.reduce((function(e,t){var n=a.passengers.find((function(e){return e.cardno==t}));return n&&e.push(n.cardno),e}),[]),p=i?{TicketName:i.peopleName,SelectNumber:i.selectNumber,Price:i.price,SubName:i.subPeopleName,ShowFrom:2==i.priceType}:null,h={TicketName:l.peopleName,SelectNumber:l.selectNumber,Price:l.price,SubName:l.subPeopleName,ShowFrom:2==l.priceType};return{showNos:d,showNames:u,RecommendType:c,SelectedInfo:p,RecommendInfo:h,SuitDesc:r,hasShown:!1,resourceId:o}}));n.recommend={isStopBuy:i.every((function(e){return 3==e.recommendType})),total:a.amt,recommendList:s,optid:e.optid}};var r=function(e,t,n,r){var o=e.filter((function(e){return t.includes(e.PassengerID)&&e.CommonPassengerCard&&e.CommonPassengerCard.length>0&&e.CommonPassengerCard.find((function(t){var n;return e.resourceCardInfo&&Number(t.CardType)==(null===(n=e.resourceCardInfo[r])||void 0===n?void 0:n.CardType)}))}));if(o.length){var i=o.map((function(e){return{cardtype:e.resourceCardInfo[r].CardType,cardno:(e.CommonPassengerCard.find((function(t){return Number(t.CardType)==e.resourceCardInfo[r].CardType}))||{}).CardNo,phone:e.MobilePhone,resid:n}}));return i}return[]},o=function(e,t){var n;null===(n=e.recommend.recommendList)||void 0===n||n.forEach((function(e){var n;e.hasShown=null===(n=t.state.recommend)||void 0===n||null===(n=n.recommendList)||void 0===n||null===(n=n.find((function(t){return e.showNos&&t.showNos[0]==e.showNos[0]})))||void 0===n?void 0:n.hasShown}))}},12175:function(e,t,n){n.d(t,{z:function(){return o}});var r=n(121);t["Z"]=function(e,t,n,o){var i=t.getRefundPolicy,a=t.getProductInfo;if(i||(i=a),i&&i.length){var s=o||n,l=s.sku,c=(0,r.I8)(l);c.refundPolicys=c.refundPolicys||{},i.map((function(t,n){var r,o;2==(null===t||void 0===t||null===(r=t.refundPolicy)||void 0===r?void 0:r.refundType)&&null!==t&&void 0!==t&&null!==(o=t.refundPolicy)&&void 0!==o&&o.refundShowText&&(c.refundPolicys[e.date+"|"+t.productId]||(c.refundPolicys[e.date+"|"+t.productId]={costType:t.refundPolicy.costType,refundShowText:t.refundPolicy.refundShowText}))})),n.sku=c}};var o=function(e){var t=e.request,n=e.sku,r=t.date,o=t.optid;if(!r)return!1;for(var i,a=function(e){var t=n.calendar.find((function(e){return e.date==r}));if(t&&(t=t.resources.find((function(t){return t.resourceId==o[e]}))),t&&null==n.refundPolicys[r+"|"+t.productId])return{v:!1}},s=0;s<o.length;s++)if(i=a(s),i)return i.v;return!0}},64708:function(e,t,n){n.d(t,{TO:function(){return m},xc:function(){return v}});var r=n(22276),o=n(48501),i=n(32545),a=n(14830),s=n(64571),l=n(84578);t["ZP"]=function(e,t,n){var s,l;n.reservationTerms||(n.reservationTerms={title:""});var c=[];n.reservationTerms.renderLine=c;var u=t.getScenicSpotInfo,f=t.getProductInfo,m=t.getProductPriceCalendar,v=e.isFromSku||e.originCount.length,_="",y=null===f||void 0===f||null===(s=f[0])||void 0===s||null===(s=s.basicInfo)||void 0===s?void 0:s.subTemplate,x=h(m,e.optid[0],e.aggregation,y),b=!(null===m||void 0===m||null===(l=m.boxProductInfos)||void 0===l||!l.length),Z="";if(u&&u.length>0&&u[0].saleUnitInfo&&u[0].saleUnitInfo.length>0){var I=u[0].saleUnitInfo.find((function(t){return t.resourceId==e.optid[0]||t.productId==e.productId}))||{};e.fromSkuType==o.pL.skuPeople&&I&&(e.peopleId=I.subTicketGroupId);var C=I.ticketGroupAlias,k=I.ticketGroupName,w=I.subTicketGroupName,T=I.subTicketGroupSubName,S=I.ticketGroupPreferred;Z="".concat(w||"").concat(T||""),e.IsCtripPreferred=S?"ctripPreferred":"",n.reservationTerms.title=k,v||(n.reservationTerms.title+=x.length&&!b?"(".concat(x.join("-"),")"):""),"resource"==n["pageName"]&&(n.reservationTerms.title=(C||k||"")+(e.peopleId?"":Z))}if(b&&f){var P,L=m.boxProductInfos,N=void 0===L?[]:L,j=m.firstLevelInfos,D=void 0===j?[]:j,V=m.packageInfos,E=void 0===V?[]:V,R=m.productInfos,A=void 0===R?[]:R,F=N.every((function(e){return 1==e.packingUseDateSame})),M=null===D||void 0===D||null===(P=D[0])||void 0===P?void 0:P.id,O=D.every((function(e){return e.id==M})),B=d(e.optid[0],N),G=p(e,N,A);e.boxMap[e.optid[0]]=G;var H=!0,z=!1;B.map((function(e){var t=A.find((function(t){return e.subProductId==t.productId}));t&&1==t.priceMode?z=!0:H=!1})),n.reservationTerms.isAllValid=H;var U=f.find((function(t){return t.resourceInfos.find((function(t){return t.resourceId==e.optid[0]}))})),q="",W="",K="",J="",X=[],Q=!1;if(F&&!z&&e.date&&(Q=!0,c.push({text:e.date+" \u5468".concat((0,i.q7)(e.date||""))||""})),B.length){var $=[],Y=[];G.forEach((function(t,s){var l=B.find((function(e){return e.subResourceId==t.resourceId}));if(l){var u="",d=A.find((function(e){return l.subProductId==e.productId}));d&&(u=1==d.priceMode?"U":"S");var p,h=t.date+" \u5468".concat((0,i.q7)(t.date||"")),f=D.find((function(e){return e.peopleGroupInfos.find((function(e){return e.productIds.includes(l.subProductId)}))})),v=0;if(U)null===(p=U.subProductInfos)||void 0===p||p.map((function(e){l.subProductId==e.productId&&("U"==u&&(q="".concat((0,a.S5)(e.usageTimeLimit,{priceMode:u})),W=(0,a.Nq)(e.usageTimeLimit)),v=e.basicInfo.subTemplate)}));if(f){var _;K=f.name;var y=f.saleProperties;null!==(_=y)&&void 0!==_&&_.length||(y=m.saleProperties),X=g(E,y,u,l.subResourceId,v)}if(E.find((function(e){var n=e.resourceInfos.find((function(e){return e.resourceId==t.resourceId}));return!!n&&(J=n.resourceName,!0)})),F&&O&&!z);else{var x,b=K,Z="";(O||"resource"==n["pageName"]&&e.fromSkuType!=o.pL.skuPeople)&&(b+="\xb7".concat(J)),"S"==u?!Q&&(Z=h):"U"==u&&(Z=q),(Z||null!==(x=X)&&void 0!==x&&x.length)&&c.push({label:b+="\uff1a ",text:Z,salepropsList:"S"!=u||F&&O&&z?[]:X}),"U"==u&&(W&&c.push({longText:W}),(!F||!O)&&X.length&&c.push({salepropsList:X}))}Y.push.apply(Y,(0,r.Z)(X)),0!=s&&O||$.push.apply($,(0,r.Z)(X))}})),v||H||(n.reservationTerms.title+=$.length?"(".concat($.join("-"),")"):""),F&&O&&!z&&Y.length&&c.push({salepropsList:Array.from(new Set(Y))}),F&&O&&z&&X.length&&c.unshift({salepropsList:X}),"resource"==n["pageName"]&&e.fromSkuType==o.pL.skuPeople&&c.unshift({text:Z})}}else{var ee=[];if(m){var te=m.resourceInfos,ne=m.basicInfo;_=null===ne||void 0===ne?void 0:ne.priceMode;var re,oe,ie=v&&e.date+" \u5468".concat((0,i.q7)(e.date||""))||"",ae="";if("U"==_&&f&&m)ie="\u4f7f\u7528\u6709\u6548\u671f\uff1a".concat((0,a.S5)(null===f||void 0===f||null===(re=f[0])||void 0===re?void 0:re.usageTimeLimit,null===m||void 0===m?void 0:m.basicInfo)),ae=(0,a.Nq)(null===f||void 0===f||null===(oe=f[0])||void 0===oe?void 0:oe.usageTimeLimit);ie&&c.push({text:ie}),ae&&c.push({longText:ae}),v&&x.length&&c.push({salepropsList:x}),e.originCount.map((function(t,n){if(te&&te.length)for(var r=0;r<te.length;r++){var o=te[r],i=o.mixedIds,a=o.resourceName;if(i.indexOf(Number(e.optid[n]))>-1){ee.push("".concat(a," x ").concat(e.originCount[n]));break}}})),ee.length>0&&c.push({text:ee.join(", ")}),"resource"==n["pageName"]&&e.fromSkuType==o.pL.skuPeople&&Z&&c.unshift({text:Z})}}};var c=null,u=function(e){return c=c||{},e.map((function(e){e.pack3ResourceInfos.map((function(e){c[e.resourceId]=e.subResourceInfos}))})),c},d=function(e,t){return c&&c[e]||u(t)[e]||[]},p=function(e,t,n){var r,o=e.optid,i=e.boxMap,a=d(o[0],t);return null!==(r=i[o[0]])&&void 0!==r&&r.length?(i[o[0]]||[]).map((function(e){var t,r={},o=a.find((function(t){return e.resourceId==t.subResourceId&&(r=n.find((function(e){return e.productId==t.subProductId})),!0)}))||{};return{resourceId:o.subResourceId,date:e.date||"",unitQuantity:o.unitQuantity,priceMode:(null===(t=r)||void 0===t?void 0:t.priceMode)||0}})):a.map((function(t){var r=n.find((function(e){return e.productId==t.subProductId}));return{resourceId:t.subResourceId,date:e.date||"",unitQuantity:t.unitQuantity,priceMode:(null===r||void 0===r?void 0:r.priceMode)||0}}))},h=function(e,t,n,r){var o,i=[];if(e&&(t||n)){var a=e.packageInfos,s=e.saleProperties,l=e.basicInfo;o=null===l||void 0===l?void 0:l.priceMode,i=g(a,s,o,t,r)}return i},f=function(e,t){return 207==e.salesProperty.salesPropertyId&&1917==e.salesPropertyValues[0].salesPropertyId&&1==t},g=function(e,t,n,r,o){var i=[];if(e&&e.length>0){var a=e.find((function(e){return e.resourceInfos[0].resourceId==r}));if(a){var s=a&&a.salesProperties||[];s.forEach((function(e){var r=t.find((function(t){return e.salesProperty.salesPropertyId==t.salesProperty.salesPropertyId}))||{},a=(r.salesPropertyValues||[]).filter((function(e){return e.hide})).map((function(e){return e.salesPropertyId}));if(r.salesProperty&&(!r.salesProperty.hide||"U"==n)&&!f(r,o)){var s=e.salesPropertyValues[0];a.includes(s.salesPropertyId)||i.push(s.salesPropertyName)}}))}else{var l=t.filter((function(e){return e.salesProperty&&!e.salesProperty.hide}));if(1===l.length&&l[0].salesPropertyValues&&l[0].salesProperty&&1===l[0].salesPropertyValues.length&&!f(l[0],o)){var c=l[0];i.push(c.salesPropertyValues[0].salesPropertyName)}}}return i=i.filter((function(e){return"\u6807\u51c6\u4ef7"!==e})),i},m=function(e,t,n){if(t&&t.subResFullInfo&&t.subResFullInfo[e])return t.subResFullInfo[e];n||(n=l.Fs.load("getProductPriceCalendar"));var r=n||{},o=r.firstLevelInfos,i=void 0===o?[]:o,a=r.packageInfos,s=void 0===a?[]:a,c=r.boxProductInfos,u=void 0===c?[]:c,d="";s.find((function(t){return t.resourceInfos.find((function(t){return t.resourceId==e&&(d=t.resourceName,!0)}))}));var p="";u.find((function(t){t.pack3ResourceInfos.find((function(t){return t.subResourceInfos.find((function(t){return t.subResourceId==e&&(p=t.subProductId,!0)}))}))}));var h="",f="";return i.find((function(e){return e.peopleGroupInfos.find((function(t){return!!t.productIds.includes(p)&&(h=e.name,f=e.id,!0)}))})),{subProductId:p,firstLevelName:h,firstLevelId:f,resourceName:d}},v=function(e,t,n,r){var o;if(r)return!1;var i=t.boxProductInfos,a=void 0===i?[]:i,l=t.firstLevelInfos,c=t.productInfos,u=e.optid;if(!a.length)return!1;var d=!1,p=!1,h=(0,s.FN)(),f=(null===(o=h.router)||void 0===o?void 0:o.params)||{};if(!f.subResourceId&&u[0]){var g,m=[];if(a.find((function(e){var t=e.pack3ResourceInfos.find((function(e){return e.resourceId==u[0]}));t&&(p=!0,d=0==e.packingUseDateSame,m=t.subResourceInfos)})),!p)return!1;var v=!1,_=!1,y=!0;m.map((function(e){var t=c.find((function(t){return t.productId==e.subProductId}));1==(null===t||void 0===t?void 0:t.priceMode)?_=!0:(y=!1,v=!0)}));var x=null===n||void 0===n||null===(g=n[0])||void 0===g||null===(g=g.basicInfo)||void 0===g?void 0:g.subTemplate;if(y)return 1!=x;if(_&&v||d)return!0;var b=l.every((function(e){return e.saleProperties.every((function(e){return 1==e.salesPropertyValues.length||e.salesProperty.hide}))}));return!b}return!1}},39625:function(e,t,n){n.d(t,{Sl:function(){return l},CA:function(){return c},mD:function(){return u},sO:function(){return d},pS:function(){return f},et:function(){return g}});var r,o=n(298),i={},a="",s=[],l=function(e,t){var n,l=e.platform,c=e.header,u=t.request,d=t.sku,p={RN:5,mini:21,H5:7};i=(0,o.Z)((0,o.Z)({},i),{biztype:"ticket",productId:(null===d||void 0===d?void 0:d.productId)||u.productId,channelid:p[l],viewspotid:u.spotid,resourcetype:null===d||void 0===d?void 0:d.resourcetype,poiid:u.poiid}),String(u.ticketGroupId),u.clientId,a="tkt-".concat(null===(n=c.clientInfo)||void 0===n?void 0:n.pageId,"-"),s=e.devTraceKeyData,r=u.traceid},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{key:e,params:(0,o.Z)((0,o.Z)({},p()),{},{key:e,keyid:t},n)}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d("".concat(h()).concat(e),t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"click",params:(0,o.Z)((0,o.Z)({key:e},p()),t)}},p=function(){return i},h=function(){return a},f=function(){return s},g=function(){return r}},21705:function(e,t,n){n.d(t,{Ye:function(){return s},d7:function(){return c},Uj:function(){return u}});var r,o=n(298),i=n(61252),a=n(84578),s=function(){return r||[]};t["ZP"]=function(e,t){var n,o;r||(r=e.devTraceKeyData);var s,c,u="sys_change",d="",p="saleOut",h="",f="",g="",m=e.state,v=[],_=[];t.passengerModal&&(null!==(s=m.passengerModal)&&void 0!==s&&null!==(s=s.group)&&void 0!==s&&s.length&&m.passengerModal.group.forEach((function(e){v.push({groupName:e.name,list:e.dChoice})})),null!==(c=t.passengerModal.group)&&void 0!==c&&c.length&&t.passengerModal.group.forEach((function(e){_.push({groupName:e.name,list:e.dChoice})})));var y="",x="",b=[],Z=[];if(t.coupon){var I,C,k,w,T,S,P;if(null!==(I=m.coupon)&&void 0!==I&&null!==(I=I.discountDataList)&&void 0!==I&&I.length)y=null===(T=m.coupon)||void 0===T||null===(T=T.discountDataList)||void 0===T||null===(T=T[0])||void 0===T?void 0:T.discountName;if(null!==(C=t.coupon.discountDataList)&&void 0!==C&&C.length)x=null===(S=t.coupon.discountDataList)||void 0===S||null===(S=S[0])||void 0===S?void 0:S.discountName;if(null!==(k=m.coupon)&&void 0!==k&&null!==(k=k.discountList)&&void 0!==k&&k.length)null===(P=m.coupon)||void 0===P||P.discountList.forEach((function(e){e.isSelect&&b.push("".concat(e.discountDesc,"\uff08").concat(e.discountId,"\uff09"))}));null!==(w=t.coupon.discountList)&&void 0!==w&&w.length&&t.coupon.discountList.forEach((function(e){e.isSelect&&Z.push("".concat(e.discountDesc,"\uff08").concat(e.discountId,"\uff09"))}))}var L=[];if("cache"==e.devTraceType){var N,j,D,V,E;if(t.request)(null===(D=m.request)||void 0===D?void 0:D.date)!=t.request.date&&L.push("date"),JSON.stringify(null===(V=m.request)||void 0===V?void 0:V.optid)!==JSON.stringify(t.request.optid)&&L.push("resource"),JSON.stringify(null===(E=m.request)||void 0===E?void 0:E.count)!==JSON.stringify(t.request.count)&&L.push("count");JSON.stringify(v)!=JSON.stringify(_)&&L.push("passenge"),JSON.stringify(null===(N=m.passengerModal)||void 0===N?void 0:N.contactInfo)!==JSON.stringify(null===(j=t.passengerModal)||void 0===j?void 0:j.contactInfo)&&L.push("contactInfo")}var R,A,F,M,O,B,G=a.Fs.load("originParams");if("firstInit"==e.devTraceType){var H,z,U,q,W,K,J,X,Q;if((0,i.Vg)({attrs:r,action:"sys_pageinfo",desc:"\u57fa\u672c\u4fe1\u606f",contents:[{key:"PageId",value:e.header.clientInfo.pageId},{key:"\u4e3b\u8d44\u6e90id",value:null===(H=t.request)||void 0===H?void 0:H.optid.toString()},{key:"\u4e3b\u8d44\u6e90\u540d\u79f0",value:null===(z=t.reservationTerms)||void 0===z?void 0:z.title},{key:"\u6e20\u9053\u5e73\u53f0",value:"app"},{key:"\u7248\u672c",value:e.header.clientInfo.version},{key:"\u662f\u5426\u5730\u63a8",value:"\u5426"},{key:"\u662f\u5426\u5408\u96c6\u76f4\u843d",value:null!==(U=t.request)&&void 0!==U&&U.aggregation?"\u662f":"\u5426"},{key:"\u662f\u5426\u975e\u5408\u96c6\u95e8\u7968\u8d44\u6e90",value:null!==(q=t.request)&&void 0!==q&&q.aggregation?"\u5426":"\u662f"}]}),t.isSaleOut&&!t.notSendDevTrace&&L.push("bookingBlock"),t.request)((null===(J=m.request)||void 0===J?void 0:J.date)!=t.request.date||null!==G&&void 0!==G&&G.date&&"U"!==t.sku.priceMode)&&L.push("date"),JSON.stringify(null===(X=m.request)||void 0===X?void 0:X.optid)!==JSON.stringify(t.request.optid)&&L.push("resource"),JSON.stringify(null===(Q=m.request)||void 0===Q?void 0:Q.count)!==JSON.stringify(t.request.count)&&L.push("count");JSON.stringify(v)!=JSON.stringify(_)&&L.push("passenge"),JSON.stringify(null===(W=m.passengerModal)||void 0===W?void 0:W.contactInfo)!==JSON.stringify(null===(K=t.passengerModal)||void 0===K?void 0:K.contactInfo)&&L.push("contactInfo")}"secondInit"==e.devTraceType&&(y!=x&&L.push("coupon"),JSON.stringify(b)!=JSON.stringify(Z)&&L.push("discount"),(null!==(R=t.request)&&void 0!==R&&R.insuranceId||null!==(A=m.request)&&void 0!==A&&A.insuranceId)&&L.push("insurance"));if("changeDiscount"==e.devTraceType&&JSON.stringify(b)!=JSON.stringify(Z)&&L.push("discount"),"changeCoupon"==e.devTraceType&&y!=x&&L.push("coupon"),"changeCalender"==e.devTraceType){var $,Y,ee,te;if(t.request)JSON.stringify(null===($=m.request)||void 0===$?void 0:$.optid)!==JSON.stringify(t.request.optid)&&L.push("resource"),JSON.stringify(null===(Y=m.request)||void 0===Y?void 0:Y.count)!==JSON.stringify(t.request.count)&&L.push("count");if(JSON.stringify(v)!=JSON.stringify(_))L.push("passenge"),(null!==(ee=t.request)&&void 0!==ee&&ee.insuranceId||null!==(te=m.request)&&void 0!==te&&te.insuranceId)&&L.push("insurance");y!=x&&L.push("coupon"),JSON.stringify(b)!=JSON.stringify(Z)&&L.push("discount")}if("changeCount"==e.devTraceType){var ne,re;if(JSON.stringify(v)!=JSON.stringify(_))L.push("passenge"),(null!==(ne=t.request)&&void 0!==ne&&ne.insuranceId||null!==(re=m.request)&&void 0!==re&&re.insuranceId)&&L.push("insurance");y!=x&&L.push("coupon"),JSON.stringify(b)!=JSON.stringify(Z)&&L.push("discount")}if("editPassenger"==e.devTraceType){u="usr_change";var oe=m.passengerList,ie=t.passengerList;if(null!==oe&&void 0!==oe&&oe.length&&null!==ie&&void 0!==ie&&ie.length)for(var ae=0;ae<oe.length;ae++)if(JSON.stringify(oe[ae])!==JSON.stringify(ie[ae])){L.push("editPassenger"),F=oe[ae],M=ie[ae];break}}if("addPassenger"==e.devTraceType){u="usr_change";var se,le,ce=t.passengerList;if(null!==ce&&void 0!==ce&&ce.length&&(L.push("addPassenger"),M=ce[0]),JSON.stringify(v)!=JSON.stringify(_))L.push("passenge"),(null!==(se=t.request)&&void 0!==se&&se.insuranceId||null!==(le=m.request)&&void 0!==le&&le.insuranceId)&&L.push("insurance")}"changePassenger"==e.devTraceType&&(u="usr_change",JSON.stringify(v)!=JSON.stringify(_)&&(L.push("passenge"),(null!==(O=t.request)&&void 0!==O&&O.insuranceId||null!==(B=m.request)&&void 0!==B&&B.insuranceId)&&L.push("insurance")));var ue=null===(n=t.request)||void 0===n?void 0:n.optid.map((function(e){var n,r=null===(n=t.sku)||void 0===n?void 0:n.resources.find((function(t){var n;return null===t||void 0===t||null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e)}));return r})),de=null===(o=m.request)||void 0===o?void 0:o.optid.map((function(e){var t,n=null===(t=m.sku)||void 0===t?void 0:t.resources.find((function(t){var n;return null===t||void 0===t||null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e)}));return n}));"booking"==e.devTraceType&&t.anchor&&(L.push("bookingBlock"),p=t.anchorAligs||t.anchor,h=t.anchorMsg,f=t.anchorKey,g=t.anchorValue||t.anchorMsg),"changePayPeriodsInfo"==e.devTraceType&&m.overdraft.currentSelectedNum!==t.overdraft.currentSelectedNum&&L.push("overdraft"),null!==t&&void 0!==t&&t.request&&t.request.date&&!t.request.prodcutInfo&&m.request.prodcutInfo&&(0,i.gp)({type:"rn_ttd_taro_booking_error",body:{devTraceType:e.devTraceType,action:u,needSendModule:L,request:t.request,prerequest:m.request}}),L.forEach((function(n){var o,a,s,c,I,C,k,w,T="",S="";switch(n){case"date":var P;if("cache"==e.devTraceType&&(d="\u7f13\u5b58\u66f4\u65b0"),"firstInit"==e.devTraceType)d="\u9996\u5c4f\u8bf7\u6c42",(null===G||void 0===G?void 0:G.date)==(null===(P=t.request)||void 0===P?void 0:P.date)&&(d="\u524d\u5e8f\u5e26\u5165");(0,i.Vg)({attrs:r,action:u,module:"\u4ef7\u683c\u65e5\u5386",scene:d,value:(null===(o=t.request)||void 0===o?void 0:o.date)||"\u65e0",before:(null===G||void 0===G?void 0:G.date)==(null===(a=t.request)||void 0===a?void 0:a.date)?"\u65e0":null===(s=m.request)||void 0===s?void 0:s.date});break;case"resource":"cache"==e.devTraceType&&(d="\u7f13\u5b58\u66f4\u65b0"),"firstInit"==e.devTraceType&&(d="\u9996\u5c4f\u8bf7\u6c42"),"changeCalender"==e.devTraceType&&(d="\u4fee\u6539\u65e5\u671f"),ue.forEach((function(e,n){var r;e&&(T+="".concat(e.resourceName,":").concat(null===(r=t.request)||void 0===r?void 0:r.count[n],"\u4efd\uff1b"))})),de.forEach((function(e,t){var n;e&&(S+="".concat(e.resourceName,":").concat(null===(n=m.request)||void 0===n?void 0:n.count[t],"\u4efd\uff1b"))})),(0,i.Vg)({attrs:r,action:u,module:"\u8d44\u6e90\u9009\u62e9",scene:d,value:(null===(c=t.request)||void 0===c?void 0:c.optid)||"\u65e0",before:(null===(I=m.request)||void 0===I?void 0:I.optid)||"\u65e0"});break;case"count":"cache"==e.devTraceType&&(d="\u7f13\u5b58\u66f4\u65b0"),"firstInit"==e.devTraceType&&(d="\u9996\u5c4f\u8bf7\u6c42"),"changeCalender"==e.devTraceType&&(d="\u4fee\u6539\u65e5\u671f"),ue.forEach((function(e,n){var r;e&&(T+="".concat(e.resourceName,":").concat(null===(r=t.request)||void 0===r?void 0:r.count[n],"\u4efd\uff1b"))})),de.forEach((function(e,t){var n;e&&(S+="".concat(e.resourceName,":").concat(null===(n=m.request)||void 0===n?void 0:n.count[t],"\u4efd\uff1b"))})),(0,i.Vg)({attrs:r,action:u,module:"\u8d44\u6e90\u9009\u62e9",scene:d,value:T||"\u65e0",before:S||"\u65e0"});break;case"passenge":"cache"==e.devTraceType&&(d="\u7f13\u5b58\u66f4\u65b0"),"firstInit"==e.devTraceType&&(d="\u9996\u5c4f\u8bf7\u6c42"),"changeCalender"==e.devTraceType&&(d="\u4fee\u6539\u65e5\u671f"),"changeCount"==e.devTraceType&&(d="\u4fee\u6539\u4efd\u6570");var L=[],N=[];_.forEach((function(e){var n,r=v.find((function(t){return t.groupName===e.groupName}));(e.list&&r&&r.list&&JSON.stringify(e.list)!==JSON.stringify(r.list)||!r)&&(d+="".concat(e.groupName,"\u9009\u4e2d\u51fa\u884c\u4eba\u53d8\u66f4"),e.list.forEach((function(e){var n=t.passengerList.find((function(t){return t.PassengerID==e}));n&&L.push("".concat(n.CNName||n.ENLastName+"/"+n.ENFirstName,"(").concat(e,")"))})),null===r||void 0===r||null===(n=r.list)||void 0===n||n.forEach((function(e){var t=m.passengerList.find((function(t){return t.PassengerID==e}));t&&N.push("".concat(t.CNName||t.ENLastName+"/"+t.ENFirstName,"(").concat(e,")"))})))})),(L.length||N.toString())&&(0,i.Vg)({attrs:r,action:u,module:"\u51fa\u884c\u4eba\u6a21\u5757",scene:d,value:L.length?L.toString():"\u65e0",before:N.toString()||"\u65e0"});break;case"contactInfo":var j=null===(C=m.passengerModal)||void 0===C?void 0:C.contactInfo,D=null===(k=t.passengerModal)||void 0===k?void 0:k.contactInfo;D&&D.contact&&D.contact.forEach((function(t){2===t.mode&&D.mobile!==(null===j||void 0===j?void 0:j.mobile)&&(0,i.Vg)({attrs:r,action:u,module:"\u8054\u7cfb\u4fe1\u606f\u6a21\u5757",scene:"".concat("cache"==e.devTraceType?"\u7f13\u5b58":"\u521d\u59cb\u5316","\u66f4\u65b0\u8054\u7cfb\u624b\u673a"),value:D.mobile||"\u65e0",before:(null===j||void 0===j?void 0:j.mobile)||"\u65e0"}),3!==t.mode&&4!==t.mode||D.email!==(null===j||void 0===j?void 0:j.email)&&(0,i.Vg)({attrs:r,action:u,module:"\u8054\u7cfb\u4fe1\u606f\u6a21\u5757",scene:"".concat("cache"==e.devTraceType?"\u7f13\u5b58":"\u521d\u59cb\u5316","\u66f4\u65b0\u8054\u7cfb\u90ae\u7bb1"),value:D.email||"\u65e0",before:(null===j||void 0===j?void 0:j.email)||"\u65e0"})}));break;case"coupon":"secondInit"==e.devTraceType&&(d="\u6b21\u5c4f\u8bf7\u6c42"),"changeCalender"==e.devTraceType&&(d="\u4fee\u6539\u65e5\u671f"),"changeCount"==e.devTraceType&&(d="\u4fee\u6539\u4efd\u6570"),"changeCoupon"==e.devTraceType&&(d="\u56de\u8c03\u66f4\u65b0"),y!=x&&(0,i.Vg)({attrs:r,action:u,module:"\u4f18\u60e0",scene:d,value:x||"\u65e0",before:y||"\u65e0"});break;case"discount":"secondInit"==e.devTraceType&&(d="\u6b21\u5c4f\u8bf7\u6c42"),"changeDiscount"==e.devTraceType&&(d="\u7528\u6237\u4fee\u6539\u7acb\u51cf",u="usr_change"),"changeCalender"==e.devTraceType&&(d="\u4fee\u6539\u65e5\u671f"),"changeCount"==e.devTraceType&&(d="\u4fee\u6539\u4efd\u6570"),JSON.stringify(b)!=JSON.stringify(Z)&&(0,i.Vg)({attrs:r,action:u,module:"\u4f18\u60e0",scene:d,value:Z.length?Z.toString():"\u65e0",before:b.length?b.toString():"\u65e0"});case"editPassenger":M&&(0,i.Vg)({attrs:r,action:"usr_change",module:"\u51fa\u884c\u4eba\u6a21\u5757",scene:"\u7f16\u8f91\u51fa\u884c\u4eba",value:"".concat(M.CNName||M.ENLastName+"/"+M.ENFirstName),jsonData:{"\u7f16\u8f91\u524d":F,"\u7f16\u8f91\u540e":M}});break;case"addPassenger":M&&(0,i.Vg)({attrs:r,action:"usr_change",module:"\u51fa\u884c\u4eba\u6a21\u5757",scene:"\u65b0\u589e\u51fa\u884c\u4eba",value:"".concat(M.CNName||M.ENLastName+"/"+M.ENFirstName),jsonData:{"\u51fa\u884c\u4eba\u4fe1\u606f":M}});break;case"bookingBlock":(0,i.Vg)(l({blockType:p,attrs:r,action:"sys_show",value:h,key:f,outValue:g,optid:null===(w=t.request)||void 0===w?void 0:w.optid}));break;case"overdraft":(0,i.Vg)({attrs:r,action:"usr_change",module:"\u62ff\u53bb\u82b1\u6a21\u5757",scene:"\u9009\u62e9\u53d6\u6d88\u62ff\u53bb\u82b1\u4fe1\u606f",value:"number"===typeof t.overdraft.currentSelectedNum?"".concat(t.overdraft.currentSelectedNum,"\u671f"):"\u65e0",before:"number"===typeof m.overdraft.currentSelectedNum?"".concat(m.overdraft.currentSelectedNum,"\u671f"):"\u65e0"});break;case"insurance":if(t.insurance){var V,E,R,A;if(t.insurance.insuranceInfo&&"secondInit"==e.devTraceType){var O=t.insurance.insuranceInfo;(0,i.Vg)({attrs:r,action:u,module:"\u4fdd\u9669\u6a21\u5757",scene:"\u7f13\u5b58\u66f4\u65b0\u4fdd\u9669\u4fe1\u606f\u9009\u62e9",value:"".concat(O.name,"\uff08").concat(O.id,"\uff09"),before:"\u65e0"})}var B=[];null===(V=m.insurance)||void 0===V||null===(V=V.insuredGroup.dChoice)||void 0===V||V.forEach((function(e){var t=m.passengerList.find((function(t){return t.PassengerID==e}));B.push(t.CNName||t.ENLastName+"/"+t.ENFirstName)}));var H=[];null===(E=t.insurance)||void 0===E||E.insuredGroup.dChoice.forEach((function(e){var n=t.passengerList.find((function(t){return t.PassengerID==e}));H.push(n.CNName||n.ENLastName+"/"+n.ENFirstName)})),JSON.stringify(B)!==JSON.stringify(H)&&(0,i.Vg)({attrs:r,action:u,module:"\u4fdd\u9669\u6a21\u5757",scene:("secondInit"==e.devTraceType?"\u7f13\u5b58":"")+"\u66f4\u65b0\u4fdd\u9669\u88ab\u4fdd\u4eba",value:H.toString()||"\u65e0",before:B.toString()||"\u65e0"});var z=[];null===(R=m.insurance)||void 0===R||null===(R=R.policyholderGroup.dChoice)||void 0===R||R.forEach((function(e){var t=m.passengerList.find((function(t){return t.PassengerID==e}));z.push(t.CNName||t.ENLastName+"/"+t.ENFirstName)}));var U=[];null===(A=t.insurance)||void 0===A||A.policyholderGroup.dChoice.forEach((function(e){var n=t.passengerList.find((function(t){return t.PassengerID==e}));U.push(n.CNName||n.ENLastName+"/"+n.ENFirstName)})),JSON.stringify(z)!==JSON.stringify(U)&&(0,i.Vg)({attrs:r,action:u,module:"\u4fdd\u9669\u6a21\u5757",scene:("secondInit"==e.devTraceType?"\u7f13\u5b58":"")+"\u66f4\u65b0\u4fdd\u9669\u6295\u4fdd\u4eba",value:U.toString()||"\u65e0",before:z.toString()||"\u65e0"})}break;default:break}})),L.length&&(e.devTraceType="")};var l=function(e){var t=e.blockType,n=e.attrs,r=e.action,i=e.value,a=e.key,s=e.outValue,l=e.optid,c=(0,o.Z)({attrs:n,action:r||"sys_show",module:"\u53ef\u8ba2\u963b\u65ad"},d[t]||{});return i&&(c.value=s),a&&(c.key=a),c.jsonData={value:i||c.value,optid:l||[]},c},c=function(e){var t=e.errcode,n=e.errmsg,a=e.errorMessageMap,s=e.optid,l=e.confirm;try{var c={attrs:r,action:"sys_show",module:"\u53ef\u8ba2\u963b\u65ad"},u=a[t];c=u&&u.key?(0,o.Z)((0,o.Z)({},c),{},{scene:-1!=u.key.indexOf("tkt_2")?"\u8d44\u6e90\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09":-1!=u.key.indexOf("tkt_3")?"\u7528\u6237\u8f93\u5165\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09":"\u4e1a\u52a1\u7cfb\u7edf\u5f02\u5e38\uff08\u670d\u52a1\u8fd4\u56de\uff09",value:n,key:u.key,jsonData:{code:t,value:u.msg,optid:s||[],confirm:(null===l||void 0===l?void 0:l.errorCode)||t}}):(0,o.Z)((0,o.Z)({},c),{},{scene:"\u8d44\u6e90\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09",value:"\u670d\u52a1\u8fd4\u56de",key:"tkt_22".concat(t),jsonData:{code:t,value:"\u670d\u52a1\u7aef\u672a\u8fd4\u56de\u5206\u7c7b",optid:s||[]}}),(0,i.Vg)(c)}catch(e){console.log(e,"sendBookingBlock")}},u=function(e,t){try{(0,i.Vg)({attrs:r,action:"sys_show",module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",key:"tkt_1100001",value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",jsonData:{value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38".concat(t?"-\u521b\u5355format":""),errorMsg:e?e.message:"\u65e0",errorStack:e?e.stack:"\u65e0"}})}catch(e){}},d={saleOut:{scene:"\u521d\u59cb\u5316",value:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",key:"tkt_2100001"},bookingNot:{scene:"\u8d44\u6e90\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09",key:"tkt_20002"},tab_calendar:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u8bf7\u9009\u62e9\u65e5\u671f",key:"tkt_3100001"},select_quantity:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u9884\u8ba2\u4efd\u6570\u6821\u9a8c\u672a\u901a\u8fc7",key:"tkt_3100002"},passenger:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u51fa\u884c\u4eba\u6821\u9a8c\u4e0d\u901a\u8fc7",key:"tkt_3100003"},contact:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u8054\u7cfb\u4fe1\u606f\u4e0d\u5168\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8054\u7cfb\u4fe1\u606f",key:"tkt_3100004"},insurance:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u4fdd\u9669\u4fe1\u606f\u6821\u9a8c\u672a\u901a\u8fc7",key:"tkt_3100005"},additionalPassenger:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u9644\u52a0\u552e\u5356\u51fa\u884c\u4eba\u6570\u91cf\u6709\u8bef",key:"tkt_3100013"},clause:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u4e0b\u65b9\u6388\u6743\u5185\u5bb9",key:"tkt_3100007"},bookingInput:{scene:"\u7528\u6237\u8f93\u5165\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09",key:"tkt_30008"},authorize:{scene:"\u70b9\u51fb\u9884\u8ba2",value:"\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u4e0b\u65b9\u6388\u6743\u5185\u5bb9",key:"tkt_3100007"}}},88592:function(e,t,n){n.d(t,{mD:function(){return o.mD},sO:function(){return o.sO},pS:function(){return o.pS},CA:function(){return o.CA},Bz:function(){return c}});var r=n(298),o=n(39625),i=n(50738),a=function(){return{detailExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_fee_trans","177895")),detailTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u67e5\u770b\u660e\u7ec6",module:"footer\u5e95\u90e8\u6a21\u5757",value:"\u660e\u7ec6"},detailClickLog:function(){return(0,o.mD)("fee-click")},imTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u5ba2\u670d",module:"footer\u5e95\u90e8\u6a21\u5757",value:"\u5ba2\u670d"},btnExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_order_trans","177897")),btnClickLog:function(){return(0,o.mD)("order-click",{traceid:(0,o.et)()})},btnTraceData:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65",module:"footer\u5e95\u90e8\u6a21\u5757",value:"\u53bb\u652f\u4ed8"},clauseClickTraceLog:function(e){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u9605\u8bfb\u5e76\u6388\u6743",module:"footer\u5e95\u90e8\u6a21\u5757",before:e?"\u52fe\u9009":"\u672a\u52fe\u9009",value:e?"\u672a\u52fe\u9009":"\u52fe\u9009"}},anxindingClickTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u5b89\u5fc3\u8ba2",module:"footer\u5e95\u90e8\u6a21\u5757",value:"\u5b89\u5fc3\u8ba2"},contractTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u9884\u8ba2\u6761\u6b3e",module:"footer\u5e95\u90e8\u6a21\u5757",value:"\u9884\u8ba2\u6761\u6b3e"}}},s=function(){return{dateClickLog:function(e){return function(e){e.cdate;return(0,o.mD)("date-click")}},tabExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_henghua_trans","177786")),moreButtonExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_datemore_trans","177788")),moreButtonClickLog:function(){return(0,o.mD)("datemore-click")},unfoldExposure:(0,i.ap)((0,o.CA)("tkt_fillin_basic_trans","177782")),unfoldLog:function(){return(0,o.mD)("basic-click")},collapseLog:function(){return(0,o.mD)("basic-less")},resourceDescTraceData:function(e){return function(t){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u8d44\u6e90\u4fe1\u606f\u67e5\u770b",module:"\u8d44\u6e90\u6a21\u5757",value:"".concat(t).concat(e,"\u9002\u7528\u4eba\u7fa4\u4fe1\u606f")}}},validUnfoldExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_valid_spread","177789")),validUnfoldClickLog:function(){return(0,o.mD)("valid-spread")},validCollapseExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_valid_less","177886")),validCollapseClickLog:function(){return(0,o.mD)("valid-less")},addCountLog:function(){return(0,o.mD)("selectionBox-add")},reduceCountLog:function(){return(0,o.mD)("selectionBox-less")},buyMoreExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_pkgmore_trans","177887")),buyMoreClickLog:function(){return(0,o.mD)("pkgmore-click")},buyMoreDevtraceLog:function(e){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u540c\u65f6\u8d2d\u4e70\u67e5\u770b",module:"\u8d44\u6e90\u6a21\u5757",value:e}},productNoticeExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_notice_trans","177783")),noticeClickLog:function(){return(0,o.mD)("notice-click")},calendarTraceData:function(e,t){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u9009\u62e9\u65e5\u671f",before:e||"\u65e0",value:t||"\u65e0",module:"\u51fa\u884c\u65e5\u671f\u6a21\u5757"}},countTraceData:function(e,t,n){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u4fee\u6539".concat(n,"\u4efd\u6570"),before:e+"\u4efd",value:t+"\u4efd",module:"\u8d44\u6e90\u6a21\u5757"}},buyNoteTraceData:function(e){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u8d2d\u4e70\u987b\u77e5\u67e5\u770b",module:"\u8d44\u6e90\u6a21\u5757",value:"".concat(e,"\u8d2d\u4e70\u987b\u77e5")}},clickMoreTraceData:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u5f39\u51fa\u65e5\u671f\u6d6e\u5c42",module:"\u51fa\u884c\u65e5\u671f\u6a21\u5757",value:"\u67e5\u770b\u66f4\u591a"},skuShowTraceData:function(e,t,n){return{action:"sys_show",attrs:(0,o.pS)(),scene:"\u8d44\u6e90\u9009\u62e9",value:n,module:"\u53ef\u8ba2\u963b\u65ad",key:t,jsonData:{value:"add"===e?"\u8be5\u4ea7\u54c1\u6700\u591a\u9884\u8ba2X\u4efd":"\u8be5\u4ea7\u54c1\u81f3\u5c11\u9884\u8ba2X\u4efd"}}},excitationTipsExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_impelling_exposure","228145",(0,r.Z)({},e)))}}},l=function(){return{footerLog:(0,r.Z)({},a()),footerTipLog:{footerTipCountdownExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_countdown_exposure","224620",(0,r.Z)({},e)))}},globalTipsLog:{exposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_hint_trans","177780")),devTraceLog:function(e){return{action:"usr_click",attrs:(0,o.pS)(),module:"\u516c\u544a\u6a21\u5757",value:"\u516c\u544a".concat(e?"\u3010".concat(e,"\u3011"):"")}},clickLog:function(){return(0,o.mD)("hint-click")}},retainTipsLog:{retainTipsLogExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_intervention_exposure","228143",(0,r.Z)({},e)))},retainTipsClickLog:function(e){return(0,o.sO)("tkt_intervention_trace",(0,r.Z)((0,r.Z)({},e),{},{keyid:"228144"}))}},headerLog:{headerLeftClickLog:(0,o.mD)("top-click"),headerLeftDevtraceLog:{action:"usr_click",attrs:(0,o.pS)(),module:"\u5934\u90e8\u6a21\u5757",value:"\u8fd4\u56de\u6309\u94ae"},loginDevTraceLog:{action:"usr_click",attrs:(0,o.pS)(),module:"\u5934\u90e8\u6a21\u5757",value:"\u767b\u5f55\u6309\u94ae"}},imLog:{imExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_im_trans","177896"))},insurancePopLog:{insurancePopExposureLog:(0,i.ap)((0,o.CA)("tkt_popup_assurance_expv","179555"))},insuranceLog:{insuranceExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_module_assurance_exp","179554",(0,r.Z)({},e)))},insuranceTipExposureLog:(0,i.ap)((0,o.CA)("tkt_wri_bx_guide_view","190734")),clickTraceLog:function(e,t){return{action:"usr_click",attrs:(0,o.pS)(),scene:"".concat(e,"\u4fdd\u9669"),module:"\u4fdd\u9669",value:t}}},overdraftLog:{overdraftExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_naquhua_trans","177894"))},passengerLog:{devTraceKeyData:(0,o.pS)(),addOrSelectExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_passager_trans","177888")),addButtonExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_passagernew_trans","177889")),selectClickLog:function(e){return(0,o.sO)("tkt_fillin_click_passager_select",(0,r.Z)((0,r.Z)({},e),{},{actioncode:"tkt_fillin_click_passager_select",keyid:"205402"}))},selectTraceLog:function(e,t){return{action:"usr_click",attrs:(0,o.pS)(),scene:t||"\u70b9\u51fb\u51fa\u884c\u4eba\u9732\u51fa\u6309\u94ae",value:e,module:"\u51fa\u884c\u4eba\u6a21\u5757"}},clickAddButtonTraceLog:function(e){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb".concat(e,"\u6309\u94ae"),module:"\u51fa\u884c\u4eba\u6a21\u5757",value:e}},editTraceLog:function(e){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u6253\u5f00\u3010".concat(e,"\u3011\u7f16\u8f91\u6d6e\u5c42"),module:"\u51fa\u884c\u4eba\u6a21\u5757"}},toPListTraceLog:function(e){return{action:"usr_click",attrs:(0,o.pS)(),scene:"\u6253\u5f00\u3010".concat(e,"\u3011\u51fa\u884c\u4eba\u9009\u62e9\u5217\u8868"),module:"\u51fa\u884c\u4eba\u6a21\u5757"}},contactChangeTraceLog:function(e){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u4fee\u6539".concat(e),module:"\u8054\u7cfb\u4fe1\u606f"}},contackPopTipExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_getphonenr_trans")),contackMobilePopTipExposureLog:(0,i.ap)((0,o.CA)("tkt_contactremark_expo_expo")),clickContactPopTipLog:(0,o.mD)("getphonenr_click"),addressBookTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u901a\u8baf\u5f55\u6309\u94ae",module:"\u8054\u7cfb\u4fe1\u606f\u6a21\u5757",value:"\u901a\u8baf\u5f55\u6309\u94ae"},contactPhoneClickLog:(0,o.sO)("tkt_contacttelinput_trace",{keyid:"224621"}),contactBookClickLog:(0,o.sO)("tkt_teldirectorybutton_trace",{keyid:"224622"}),contryCodeClickTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u9009\u62e9\u533a\u53f7\u6309\u94ae",module:"\u8054\u7cfb\u4fe1\u606f\u6a21\u5757",value:"\u533a\u53f7"},contryCodeSelectTraceLog:function(e,t){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u5207\u6362\u533a\u53f7",before:e,value:t,module:"\u8054\u7cfb\u4fe1\u606f\u6a21\u5757"}}},reservationLog:{validUnfoldExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_valid_spread","177789")),validUnfoldClickLog:function(){return(0,o.mD)("valid-spread")},changeTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u70b9\u51fb\u4fee\u6539\u65e5\u671f",module:"\u9884\u8ba2\u56de\u663e",value:"\u4fee\u6539"}},skuLog:(0,r.Z)({},s()),additionalSaleLog:{additionalExposureLog:function(e,t){return(0,i.ap)((0,o.CA)("tkt_write_additional_exp","179559",{positionid:e+1,attachproductid:t}))},changeTraceData:function(e,t,n){return{action:"usr_change",attrs:(0,o.pS)(),scene:"\u4fee\u6539".concat(n,"\u5206\u6570"),before:e+"\u4efd",value:t+"\u4efd",module:"\u8d85\u503c\u8d2d\u4e70\u6a21\u5757"}}},couponLog:{crossCouponLog:{crossCouponExposureLog:(0,i.ap)((0,o.CA)("tkt_fillin_freeget_trans","210655")),crossClickLog:function(){return(0,o.mD)("tkt_fillin_freeget_click",{keyid:"210657"})}},changeDiscountTraceLog:function(e,t){return{action:"usr_click",attrs:(0,o.pS)(),scene:"".concat(e,"\u7acb\u51cf").concat(t),module:"\u4f18\u60e0\u5238\u6a21\u5757"}},counponEntryTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u9009\u4e2d\u66f4\u6539\u4f18\u60e0\u5238\u4fe1\u606f",module:"\u4f18\u60e0\u5238\u6a21\u5757",value:"\u4f18\u60e0\u5238\u6d6e\u5c42\u5165\u53e3"},crossEntryTraceLog:{action:"usr_click",attrs:(0,o.pS)(),scene:"\u5c55\u793a\u8d60\u5238\u4fe1\u606f",module:"\u4f18\u60e0\u5238\u6a21\u5757",value:"\u8d60\u5238\u6d6e\u5c42\u5165\u53e3"}},recommendLog:{recommendExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_conditioncheck_exposure","215873",(0,r.Z)({},e)))}},clauseLog:{clauseExposureLog:function(e){return(0,i.ap)((0,o.CA)("tkt_privacystatement_reminder_expo","230249",(0,r.Z)({},e)))},clauseClickLog:function(e){return(0,o.sO)("tkt_privacystatement_reminder_click",(0,r.Z)({keyid:"230250"},e))}},repeatBookingLog:{repeatBookingeExposureLog:(0,i.ap)((0,o.CA)("tkt_sameorder_reminder_expo","230247",{})),repeatBookingClickLog:function(e){return(0,o.sO)("tkt_sameorder_reminder_click",(0,r.Z)({keyid:"230248"},e))}},couponUserNameLog:{couponUserClickLog:function(e){return(0,o.sO)("tkt_requirerealnamealert_click_click",(0,r.Z)({keyid:"250419"},e))},couponUserExposureLog:(0,i.ap)((0,o.CA)("tkt_requirerealnamealert_expo_expo","250418",{})),couponUserTipsExposureLog:(0,i.ap)((0,o.CA)("tkt_requirerealname_expo_expo","250417",{}))}}},c=function(e,t){(0,o.Sl)(e,t),e.logData=l()}},59415:function(e,t,n){n.d(t,{k:function(){return L},Z:function(){return R}});var r=n(22276),o=n(79301),i=n(90983),a=n(298),s=n(95308),l=n(57042),c=n(24460),u=n(45023),d=function(e,t,n){return{request:Object.assign({},t,e),actionUrl:"/restapi/soa2/14606/save",useLast:n||!1}},p=n(121),h=n(61252),f=n(83630),g=n(39935),m=n(49502),v=function(e){return[]},_=n(32545),y=n(2723),x=n(27868),b=n(47391),Z=n(32500),I=n(35512),C=n(68983),k=n(84578),w=n(75833),T=n(79239),S=n(70614),P=function(){function e(){(0,l.Z)(this,e),(0,u.Z)(this,"_queue",[])}return(0,c.Z)(e,[{key:"add",value:function(e){this._queue.push(e)}},{key:"done",value:function(e){this._queue=this._queue.filter((function(t){return t!==e}))}},{key:"getQueue",value:function(){return this._queue}}]),e}(),L=new P,N=function(e,t,n,r){if(n===f.r8.traveler){var o,i=(null===(o=e.state.passengerModal)||void 0===o?void 0:o.group)||[],a=i.find((function(e){return e.resourceId==t&&e.boxId==r}));return null===a||void 0===a?void 0:a.addPassenger}var s,l;if(n===f.r8.insured)return null===(s=e.state.insurance)||void 0===s||null===(s=s.insuredGroup)||void 0===s?void 0:s.addPassenger;if(n===f.r8.policyholder)return null===(l=e.state.insurance)||void 0===l||null===(l=l.policyholderGroup)||void 0===l?void 0:l.addPassenger;if(n===f.r8.additional){var c,u,d=(null===(c=e.state.additionalSale)||void 0===c?void 0:c.resources)||[],p=d.find((function(e){return e.resourceId==t}));return null===p||void 0===p||null===(u=p.passengerModal)||void 0===u||null===(u=u.group)||void 0===u?void 0:u[0].addPassenger}},j={1:["CNName"],2:["ENFirstName","ENLastName"],3:["CNName","ENFirstName","ENLastName"],4:["Nationality"],6:["Gender"],8:["Birthday"],11:["MobilePhone","CountryCode"]},D={5:"CardType",7:"CardNo",10:"CardTimelimit",500:"IssueDate"},V=function(e){return"".concat(e.slice(0,2).toLowerCase()).concat(e.slice(2))},E=function(e,t,n,r,o,i){var a=N(e,n,r,i),s={accessToken:"ec586916-d652-4275-b803-e907f687b933",isCipher:0},l={};if(t&&a&&a.length>0){var c;t["PassengerID"]&&(l.id=String(t["PassengerID"]));var u=void 0,d={},p=t.resourceCardInfo&&(null===(c=t.resourceCardInfo[o])||void 0===c?void 0:c.CardType);t["CommonPassengerCard"]&&p&&(u=t["CommonPassengerCard"].find((function(e){return e.CardType==p}))),a.forEach((function(e){var n=Number(null===e||void 0===e?void 0:e.itemId);if(D[n]&&u){var r=D[n];d[V(r)]=10===n?(0,_.ie)(String(u[r]),"yyyy-MM-dd"):String(u[r])}else{var o;if(j[n])null===(o=j[n])||void 0===o||o.forEach((function(e){if((3!=n||!(t.isShowEnglish&&"CNName"==e||!t.isShowEnglish&&["ENFirstName","ENLastName"].includes(e)))&&t[e]){var r="".concat(e.slice(0,2).toLowerCase()).concat(e.slice(2));l[r]="Birthday"===e?(0,_.ie)(t[e],"yyyy-MM-dd"):t[e]}}))}})),d.cardNo&&d.cardType&&(l.cards=[d],"1"==d.cardType&&(l.birthday&&delete l.birthday,l.gender&&delete l.gender))}return s.passenger=l,s},R=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,l){var c,u,_,x,P,L,N,j,D,V,R,F,M,O,B,G,H,z,U,q,W,K,J,X,Q,$,Y,ee,te,ne,re,oe,ie,ae,se,le,ce,ue,de,pe,he,fe,ge,me,ve,_e,ye,xe,be,Ze,Ie,Ce,ke,we,Te,Se,Pe,Le,Ne,je,De,Ve,Ee,Re,Ae,Fe,Me,Oe,Be,Ge,He,ze,Ue,qe,We,Ke,Je,Xe,Qe,$e,Ye,et,tt,nt=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(_=!(nt.length>3&&void 0!==nt[3])||nt[3],x=nt.length>4?nt[4]:void 0,P=nt.length>5?nt[5]:void 0,L=nt.length>6?nt[6]:void 0,N=nt.length>7&&void 0!==nt[7]?nt[7]:{},j=n.header,D=n.state,V=n.devTraceKeyData,R=!!t.PassengerID,F=null===N||void 0===N?void 0:N.boxId,M=(0,w.jX)(F,l),O=!1,B=E(n,t,l,L,M,F),!B.passenger.id&&R&&(0,h.gp)({body:{title:"\u7f16\u8f91\u573a\u666f\u65e0\u51fa\u884c\u4ebaid",passenger:t}}),G=400,H=null===N||void 0===N?void 0:N.isSaveNewGuest,z=null===N||void 0===N?void 0:N.isFromBooking,U=null===N||void 0===N?void 0:N.limitChecked,q=D.passengerList,W=D.passengerModal,K=D.insurance,J=1===(null===W||void 0===W||null===(c=W.group)||void 0===c?void 0:c.length)&&1===(null===W||void 0===W||null===(u=W.group)||void 0===u?void 0:u[0].choice)&&(null===W||void 0===W?void 0:W.isNewGuest),X=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r,s,l,c,u,p,h,f,g,m,v,_,y,x=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=x.length>0&&void 0!==x[0]?x[0]:[],e.next=3,n.http({list:[d((0,a.Z)((0,a.Z)({},B),{},{confirmedCodes:c}),j,!!H)],needDevTrace:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4fdd\u5b58\u51fa\u884c\u4eba"},lock:H?void 0:"addPassenger",getDelayUnlockTime:H?void 0:function(){return G}});case 3:if(u=e.sent,u&&u[0]){e.next=13;break}if(!z){e.next=12;break}return e.next=8,new Promise((function(e){n.confirm.show({title:"\u6e29\u99a8\u63d0\u793a",btnOK:["\u786e\u8ba4"],content:"\u8bf7\u6c42\u5931\u8d25\u8bf7\u91cd\u8bd5",btnCallBack:[function(){return e(!0)}]})}));case 8:return e.sent,e.abrupt("return",X(c));case 12:return e.abrupt("return",!0);case 13:if(p=null===u||void 0===u||null===(t=u[0])||void 0===t||null===(t=t.checkResult)||void 0===t?void 0:t.blockIssues,h=null===u||void 0===u||null===(r=u[0])||void 0===r||null===(r=r.checkResult)||void 0===r?void 0:r.skipIssues,!(p&&p.length>0)){e.next=19;break}return 9101!=(null===(f=p[0])||void 0===f?void 0:f.code)&&A({response:u[0],target:n}),n.confirm.show({content:null===(g=p[0])||void 0===g?void 0:g.msg,btnOK:["\u53bb\u4fee\u6539"]}),e.abrupt("return",!0);case 19:if(!(h&&h.length>0)){e.next=41;break}G=0,m=(0,i.Z)(h),e.prev=22,_=(0,o.Z)().mark((function e(){var t,r,i;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=v.value,r="9401"==(null===t||void 0===t?void 0:t.code),!O&&r&&(O=!0),e.next=5,new Promise((function(e){n.confirm.show({title:r?"\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u6388\u6743\u786e\u8ba4":"",btnOK:r?[J?"\u6e05\u7a7a\u4fe1\u606f":"\u6682\u7f13","\u5df2\u6388\u6743"]:["\u53bb\u4fee\u6539","\u786e\u8ba4\u65e0\u8bef"],content:(null===t||void 0===t?void 0:t.msg)||"",btnCallBack:[function(){return e(!(!J||!r)&&"clear")},function(){return e(!0)}]})}));case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return",{v:!0});case 8:if("clear"!==i){e.next=10;break}return e.abrupt("return",{v:"clear"});case 10:c.push(null===t||void 0===t?void 0:t.code);case 11:case"end":return e.stop()}}),e)})),m.s();case 25:if((v=m.n()).done){e.next=32;break}return e.delegateYield(_(),"t0",27);case 27:if(y=e.t0,!y){e.next=30;break}return e.abrupt("return",y.v);case 30:e.next=25;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](22),m.e(e.t1);case 37:return e.prev=37,m.f(),e.finish(37);case 40:return e.abrupt("return",X(c));case 41:if(G=400,"0"==u[0].resultCode&&null!==(s=u[0])&&void 0!==s&&null!==(s=s.saveResult)&&void 0!==s&&s.passengerId||null!==(l=u[0])&&void 0!==l&&l.__isDiscard){e.next=51;break}if(!z){e.next=48;break}return e.next=46,new Promise((function(e){n.confirm.show({title:"\u6e29\u99a8\u63d0\u793a",btnOK:["\u786e\u8ba4"],content:"\u8bf7\u6c42\u5931\u8d25\u8bf7\u91cd\u8bd5",btnCallBack:[function(){return e(!0)}]})}));case 46:return e.sent,e.abrupt("return",X(c));case 48:return n.toast.show(u[0].resultMsg||"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),A({response:u[0],target:n}),e.abrupt("return",!0);case 51:return e.abrupt("return",u);case 52:case"end":return e.stop()}}),e,null,[[22,34,37,40]])})));return function(){return e.apply(this,arguments)}}(),Q=D.isLogin,$=v(L),!Q){e.next=27;break}return e.next=24,X($);case 24:e.t0=e.sent,e.next=28;break;case 27:e.t0=[{resultCode:"0",saveResult:{passengerId:(new Date).getTime()}}];case 28:if(Y=e.t0,!0!==Y){e.next=31;break}return e.abrupt("return",!0);case 31:if("clear"!==Y){e.next=33;break}return e.abrupt("return","clear");case 33:if(ee=[{result:!0}],te=!1,ne=!1,re=D.passengerCheckErr,oe=Y,!oe||!oe[0]){e.next=85;break}if(null===(ie=oe[0])||void 0===ie||!ie.__isDiscard){e.next=41;break}return e.abrupt("return",!0);case 41:if(ae=K,se=(0,p.I8)(q),le=(0,p.I8)(W),t.Child=O,ce=se.find((function(e,n){return e.PassengerID==t.PassengerID})),ce||(R=!1),R||(t.PassengerID=Number(null===(ue=oe[0])||void 0===ue||null===(ue=ue.saveResult)||void 0===ue?void 0:ue.passengerId)),!n.isCustomData&&(t.isOperated=!0),de=D.request,pe=de.count,he=void 0===pe?[]:pe,fe=de.optid,ge=void 0===fe?[]:fe,me=de.boxMap,ve=void 0===me?{}:me,!D.ABTest||L!=f.r8.traveler){e.next=74;break}return be=(0,Z.W)(t,M),Ze=null===W||void 0===W||null===(_e=W.group)||void 0===_e?void 0:_e.find((function(e){return(null===e||void 0===e?void 0:e.resourceId)==l&&e.boxId==F})),Ie=1==(null===Ze||void 0===Ze?void 0:Ze.fillInNumberLimit)?null===he||void 0===he?void 0:he[(ge||[]).findIndex((function(e){return e==l}))]:1,Ce=Ze.resourceIdList.map((function(e){var t,n;return{quanty:Ie||1,useDate:(null===(t=D.request)||void 0===t?void 0:t.date)||(null===(n=D.request)||void 0===n?void 0:n.minDate)||"",resourceId:e,passengers:be,parentResourceId:null!==Ze&&void 0!==Ze&&Ze.boxId?Ze.boxId:null}})),e.next=57,n.http({list:[(0,b.Z)({resourcePassengers:Ce,contactMobile:(null===W||void 0===W||null===(ye=W.contactInfo)||void 0===ye?void 0:ye.mobile)||"",email:(null===W||void 0===W||null===(xe=W.contactInfo)||void 0===xe?void 0:xe.email)||""},j)],isHideErrorConfirm:!0,needDevTrace:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u9009\u62e9\u51fa\u884c\u4eba\u524d\u6821\u9a8c\u9650\u8d2d\u4fe1\u606f"},timeout:200});case 57:if(ee=e.sent,te=ee&&ee[0].hasOwnProperty("data")&&""==ee[0].data,ne=ee&&ee[0].hasOwnProperty("data")&&ee[0].data.code,re=(0,Z.Z)([t.PassengerID],ee,D.passengerCheckErr,l),!ee||0!=ee[0].result){e.next=74;break}if(we=re.find((function(e){return e.passengerId==t.PassengerID})),Te=W.group.find((function(e){return e.resourceId==l&&e.boxId==F})),Se=Te.dChoice.indexOf(t.PassengerID),!(-1!=Se||null!==W&&void 0!==W&&null!==(ke=W.showList)&&void 0!==ke&&ke.includes(t.PassengerID)||null!==W&&void 0!==W&&W.isNewGuest)){e.next=74;break}if(-1!=Se&&Te.dChoice.splice(Se,1),U){e.next=74;break}return(0,h.Vg)({attrs:V,module:"\u53ef\u8ba2\u963b\u65ad",action:"sys_show",scene:"\u9009\u62e9\u51fa\u884c\u4eba",key:"tkt_3100017",value:we.errorMessage,jsonData:{value:"\u51fa\u884c\u4eba\u9650\u8d2d"}}),e.next=71,new Promise((function(e){we.errMsg?I.ZP.show({props:{isOpened:!0,isRichText:!0,richText:we.errorMessage,btnRightFunc:function(){I.ZP.hide("passengerErrMsg"),e(!1)},btnLeftFunc:function(){I.ZP.hide("passengerErrMsg"),e(!0)},name:"passengerErrMsg",btnRight:"\u6211\u77e5\u9053\u4e86",btnLeft:"\u4fee\u6539\u6e38\u5ba2\u4fe1\u606f",isOneBtn:!(null===W||void 0===W||!W.isNewGuest),title:we.errMsg+"\u4e0d\u7b26\u5408",fStyle:{content_text:{textAlign:"center"},main_center:{minHeight:0}}}}):(n.toast.show(we.errorMessage),e(!1))}));case 71:if(Pe=e.sent,!Pe){e.next=74;break}return e.abrupt("return",Pe);case 74:return Le={hasRepeatCardPassenger:!1},n.devTraceType=R?"editPassenger":"addPassenger",R?(je=0,se.find((function(e,n){if(e.PassengerID==t.PassengerID)return je=n,!0})),se.splice(je,1),se.unshift(t),Le.hasRepeatCardPassenger=null===W||void 0===W||null===(Ne=W.group)||void 0===Ne?void 0:Ne.some((function(e){var n=(0,g.SF)(Array.from(new Set([].concat((0,r.Z)(e.dChoice),[t.PassengerID]))),se,(0,w.jX)(e.boxId,e.resourceId)),o=n.isSame,i=n.repeateList;return Le.repeateList=i,Le.groupItem=e,!!o})),1===W.group.length&&W.showList&&W.showList.includes(t.PassengerID)&&(ee[0].result||te||ne)&&L==f.r8.traveler&&(Le.hasRepeatCardPassenger||(1===W.group[0].choice?le.group[0].dChoice=[t.PassengerID]:W.group[0].choice>1&&W.group[0].choice>W.group[0].dChoice.length&&-1==W.group[0].dChoice.indexOf(t.PassengerID)&&le.group[0].dChoice.push(t.PassengerID),De=(0,g.xC)(n,K,se,le),Ve=De.cNewInsurance,Ee=De.newPassengerModal,Re=De.cNewPassengerList,ae=Ve,le=Ee,se=Re))):(Me=k.Fs.load("getCustomerTemplate"),t.CardSource||(t.CardSource={}),(0,C.rC)([t],Me,ve,ge,null!==(Ae=ae)&&void 0!==Ae&&null!==(Ae=Ae.insuranceInfo)&&void 0!==Ae&&Ae.id?[ae.insuranceInfo.id]:void 0),le&&le.contactInfo&&!le.contactInfo.mobile&&t.MobilePhone&&(le.contactInfo.mobile=t.MobilePhone,le.contactInfo.areaCode=t.CountryCode||"86"),t.CommonPassengerCard&&t.CommonPassengerCard.length&&(Be=t.resourceCardInfo,Ge=void 0===Be?{}:Be,null!==(Oe=Ge[M])&&void 0!==Oe&&Oe.CardType||(t.resourceCardInfo[M]={CardType:Number(t.CommonPassengerCard[0].CardType)})),He=se.findIndex((function(e){return e.PassengerID==t.PassengerID})),-1!=He&&se.splice(He,1),se.unshift(t),W.showList=W.showList||[],Array.isArray(le.showList)||(le.showList=[]),Le.hasRepeatCardPassenger=null===W||void 0===W||null===(Fe=W.group)||void 0===Fe?void 0:Fe.some((function(e){var n=(0,g.SF)(Array.from(new Set([].concat((0,r.Z)(e.dChoice),[t.PassengerID]))),se,(0,w.jX)(e.boxId,e.resourceId)),o=n.isSame,i=n.repeateList;return Le.repeateList=i,Le.groupItem=e,!!o})),_&&W.group.length&&1==W.group.length&&(ee[0].result||te||ne)&&L==f.r8.traveler&&(Le.hasRepeatCardPassenger||(0==W.group[0].dChoice.length?le.group[0].dChoice=[t.PassengerID]:(le.group[0].dChoice=W.group[0].dChoice,W.group[0].choice>W.group[0].dChoice.length&&le.group[0].dChoice.push(t.PassengerID)),ze=(0,g.xC)(n,K,se,le),Ue=ze.cNewInsurance,qe=ze.newPassengerModal,We=ze.cNewPassengerList,ae=Ue,le=qe,se=We)),Ke=le.group.find((function(e){return e.resourceId==l&&e.boxId==F})),W.group.length>1&&_&&(ee[0].result||te||ne)&&L==f.r8.traveler&&(Le.hasRepeatCardPassenger||0==(null===Ke||void 0===Ke?void 0:Ke.dChoice.length)&&(Ke.dChoice.push(t.PassengerID),Je=(0,g.xC)(n,K,se,le),Xe=Je.cNewInsurance,Qe=Je.newPassengerModal,$e=Je.cNewPassengerList,ae=Xe,le=Qe,se=$e)),W.showList.length<3?le.showList.push(t.PassengerID):le.group.length&&(le.showList=(0,g.tV)(W.showList,le.group[0].dChoice,{needFilter:!0})),(null===Ke||void 0===Ke?void 0:Ke.dChoice.length)<(null===Ke||void 0===Ke?void 0:Ke.choice)&&!_&&x&&x(t.PassengerID),!H&&le.isNewGuest&&(le.isNewGuest=!1)),le.group.map((function(e){e.notFullList=(0,m.Iq)(se,e.addPassenger,e.CardInfo,e.HkvisaInfo,e.resourceId,e.boxId)})),le.group&&1===le.group.length&&le.group[0].dChoice&&le.group[0].choice&&le.group[0].dChoice.length===le.group[0].choice&&P(!1),Le.hasRepeatCardPassenger&&(0,y.Z)({currentGroup:Le.groupItem,repeateList:Le.repeateList,onSave:function(e){null===n||void 0===n||n.addPassenger(e,l,f.r8.traveler,!1,void 0,!1,N)}}),ee&&0==ee[0].result&&(Ye=le.group.find((function(e){return e.resourceId==l&&e.boxId==F})),et=Ye.dChoice.indexOf(t.PassengerID),-1!=et&&Ye.dChoice.splice(et,1)),(0,T.zu)(le,se),tt=D.limitType,(tt=S.U.PassengerMobile)&&(tt=S.U.Null),e.abrupt("return",{limitType:tt,passengerList:se,passengerModal:le,insurance:ae,passengerCheckErr:re});case 85:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(e){var t=e.response,n=e.target;if(t&&"0"!=t.resultCode){var r=t.ResponseStatus,o=void 0===r?{}:r,i=t.__hasSendLogError,a=(o.Errors||[]).some((function(e){return"AccountsMobileRequestFilterException"==e.ErrorCode})),s=i&&!t.ResponseStatus,l=["104"].includes(t.resultCode);!a&&!s&&!l&&(0,x.Z)({attrs:n.devTraceKeyData,action:"sys_show",module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u65b0\u589e\u51fa\u884c\u4eba",key:"tkt_1100005",value:"\u5e38\u65c5\u4fdd\u5b58\u5931\u8d25",jsonData:{value:"\u5e38\u65c5\u4fdd\u5b58\u5931\u8d25",errorMsg:t&&t.resultMsg||""}})}}},45039:function(e,t,n){n.d(t,{z:function(){return Te},Z:function(){return Le}});var r=n(79301),o=n(298),i=n(93212),a=n(95308),s=n(64571),l=n(99739),c=(0,l.ZP)(),u=function(e,t,n){var r=e.commonContactID,o=n.phonecode,i=n.phone;if(!o||!i)return null;var a="86"==o?{CountryCode:"86",MobilePhone:i}:{OverseasCountryCode:o,MobilePhoneForeign:i};return r&&(a.ID=Number(r)),{request:Object.assign({},t,{ParameterList:[{Key:"BizType",Value:"TTD"},{Key:"BookingType",Value:"RN"==c.platform?"A":"H"}],CommonContact:a}),actionUrl:"/restapi/soa2/11676/json/saveCommonContact"}},d=n(9422),p=n(61252),h=n(73435),f=function(e,t,n,r,o,i,a,s,l,c,u){var d=a||i;n.map((function(n){var i=r.find((function(e){return e.PassengerID==n}));if(!i)throw(0,p.gp)({body:{title:"\u9009\u4e2d\u51fa\u884c\u4eba\u4e0d\u5728\u51fa\u884c\u4eba\u5217\u8868\u91cc",content:n}}),new Error("\u9009\u4e2d\u51fa\u884c\u4eba\u4e0d\u5728\u51fa\u884c\u4eba\u5217\u8868\u91cc");g(i,d,o,e,t,s,l,c,u)}))},g=function(e,t,n,r,o,i,a,s,l){var c={infoid:e.InfoID,resid:t},u={passengerId:e.PassengerID,resid:t};n.map((function(n){var r=(0,d.Z)(n.itemId,e,i,t,l,a,s),o=r.isError;delete r.isError,o?Object.assign(u,r):Object.assign(c,r)})),l&&(c["parentOptionId"]=l),Object.keys(u).length>2?o.push(u):r.push(c)},m=function(e){var t=e.passengerModal,n=(e.optid,e.count,e.passengerList),r=(e.spotid,e.passengerCheckErr),o="",i=[],a=[],s=0,l=t.group,c=t.isNewGuest;return l&&l.map((function(e){var t=e.dChoice,u=e.addPassenger,d=e.resourceId,p=e.choice,g=e.CardInfo,m=(e.fillInNumberLimit,e.resourceIdList),v=e.needCName,_=void 0===v?[]:v,y=e.needEName,x=void 0===y?[]:y,b=e.resourceChoice,Z=e.boxId;if(t.length==p)t.length>0&&u.length>0&&m.map((function(e){var r=b[e];f(i,a,t.slice(0,r),n,u,d,e,g,_,x,Z)}));else{s=(0,h.IH)(s,p-t.length);var I=r.find((function(e){return n.find((function(t){return(null===t||void 0===t?void 0:t.PassengerID)==(null===e||void 0===e?void 0:e.passengerId)}))}));o=c&&1==(null===l||void 0===l?void 0:l.length)&&1==l[0].choice?I||"\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f":"\u8fd8\u9700\u9009\u62e9"+s+"\u4f4d\u6e38\u5ba2"}})),{passengerToast:o,plist:i,elist:a}},v=function(e,t){var n,r=e.passengerList,o=e.request,i=e.additionalSale,a=o.spotid,s=o.additionOptid,l=o.additionCount,c=(t.passengers,[]),u=[];return s&&s.length&&s.forEach((function(e,t){var o=i.resources.find((function(t){return t.resourceId==e})),s=m({passengerModal:o.passengerModal,optid:[e],count:[l[t]],passengerList:r,spotid:a,passengerCheckErr:[]}),d=s.plist,p=s.elist,h=s.passengerToast;c=c.concat(d),u=u.concat(p),!n&&h&&(n={text:h,id:e})})),n||(u.length?u:c)},_=function(e){var t=e.passengerList,n=e.passengerModal,r=e.request,o=e.passengerCheckErr,i=e.ABTest,a=r.optid,s=r.count,l=r.spotid,c=m({passengerModal:n,optid:a,count:s,passengerList:t,spotid:l,passengerCheckErr:i?o:[]}),u=c.plist,d=c.elist,p=c.passengerToast;return p||(d.length?d:u)},y=n(83692),x=function(e,t,n){var r;switch(t.email=n,e){case 3:r=(0,y.oP)(t.email);break;case 4:r=t.email?(0,y.oP)(t.email):"";break}return r},b=function(e){var t=e.request,n=e.additionalSale,r=t.additionOptid,o={};if(r&&r.length)for(var i,a=function(e){var t=n.resources.find((function(t){return t.resourceId==r[e]})),i=Z(t,void 0,o);if(i.isContactError)return{v:i}},s=0;s<r.length;s++)if(i=a(s),i)return i.v;return o},Z=function(e,t,n){var r=e.passengerModal,o=r.contactInfo||{},i=o.contact,a=o.areaCode,s=o.email,l=o.mobile,c=o.name,u=n||{},d={};return i&&i.map((function(n){switch(n.mode){case 1:t&&t[0]&&(u.name=t[0].name||t[0].ename||""),u.name=u.name||c||"\u643a\u7a0b\u7528\u6237";break;case 2:case 6:u.phone=String(l).replace(/-| /g,""),u.phonecode=a,d.mobileError=(0,y.my)(u.phone,u.phonecode);break;case 3:case 4:var r=x(n.mode,u,s);r&&(d.emailError=r,d.resid=null===e||void 0===e?void 0:e.resourceId);break}})),d.mobileError||d.emailError?(d.isContactError=!0,d):(d.isContactError=!1,u)},I=Z,C=n(88327),k=function(e){var t={},n=e.request,r=e.insurance,i=e.passengerList;if(!r)return{insurextends:[],insurpros:[]};if(!n.insuranceId)return{insurextends:[],insurpros:[]};var a=r.needRealName,s=r.isCancelInsurance,l=r.insuranceInfo,c=function(){var e=r.policyholderGroup,t=e.addPassenger,n=e.dChoice,o=e.choice,a=e.CardInfo;if(n.length<o)return"\u9700\u586b\u51991\u540d\u6ee118\u5468\u5c81\u6295\u4fdd\u4eba\u4fe1\u606f";var s=[],c=[];return f(s,c,n,i,t,l.id,void 0,a),c.length?c:s}(),u=[{type:0,insuranceType:1,insid:l.id,insuprice:String(l.price)}];return t=a||s?{insurpros:c,insurs:w(n,r,i,c,u)}:{insurpros:c,insurextends:[(0,o.Z)((0,o.Z)({},u[0]),{},{instotalnumber:(0,C.Wy)(n)})]},t},w=function(e,t,n,r,i){var a,s=t.needRealName,l=t.isCancelInsurance,c=t.insuranceInfo;if(l){var u=(null===r||void 0===r?void 0:r[0])||{};a=[(0,o.Z)((0,o.Z)((0,o.Z)({},u),{},{birthDay:u.birth},i[0]),{},{resid:0})]}else if(s){var d=t.insuredGroup,p=d.choice,h=d.dChoice,g=d.addPassenger,m=d.CardInfo;if(h.length<p)return"\u8bf7\u8865\u5145\u88ab\u4fdd\u4eba";var v=[],_=[];f(v,_,h,n,g,c.id,void 0,m),a=_.length?_:v,a=a.map((function(e){return(0,o.Z)((0,o.Z)((0,o.Z)({},e),{},{birthDay:e.birth},i[0]),{},{resid:0})}))}return a},T=n(64708),S=n(79214),P=function(e){var t=e||{},n=t.resourcesId,r=[],o={isAppendInfoError:!1,appendInfoErrorList:[]};return e&&Array.isArray(e.list)&&e.list.length&&e.list.forEach((function(e){var t={roeid:e.appendInfoId,roeitems:[]};switch(e.type){case S.H.radio:case S.H.multiSelect:Array.isArray(e.value)&&e.value.length>0?(e.value.forEach((function(e){e&&t.roeitems.push({itemid:e})})),o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:""})):(o.isAppendInfoError=!0,o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:"".concat(e.placeholder).concat(e.title)}));break;case S.H.date:case S.H.number:case S.H.text:case S.H.time:Array.isArray(e.value)&&e.value.length>0&&e.value[0]?(e.value.forEach((function(e){e&&t.roeitems.push({itemid:0,content:e})})),o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:""})):(o.isAppendInfoError=!0,o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:"".concat(e.placeholder).concat(e.title)}));break;case S.H.hotelText:e.hotelInfo&&e.hotelInfo.labelList&&e.hotelInfo.labelList.length&&Array.isArray(e.value)&&e.value.length>0?(e.hotelInfo.labelList.forEach((function(t,n){r.push({roeid:t.templateId,roeitems:[{itemid:0,content:Array.isArray(e.value)?e.value[n]:""}]})})),o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:""})):(o.isAppendInfoError=!0,o.appendInfoErrorList.push({id:"id_".concat(e.appendInfoId,"_").concat(n),tip:"".concat(e.placeholder).concat(e.title)}));break;default:break}e.type!==S.H.hotelText&&r.push(t)})),{roeinfos:r,appendInfoError:o}},L=function(e){var t=e.optid,n=e.count,r=e.date,o=e.calendar,i="";return t.forEach((function(e,t){var a=o.find((function(e){return e.date==r})),s=a.resources;if(s.length>0){var l=s.find((function(r){return r.resourceId==e&&n[t]>Math.min(r.inventoryNum,r.maxQuantity)}));i=l?l.resourceName+"\u4ec5\u5269"+Math.min(l.inventoryNum,l.maxQuantity)+"\u4efd":""}})),i},N=function(e){var t=e.optid,n=e.productInfo,r=e.sku,i=e.date,a=e.appendInfoList,s=e.destcid,l=e.count,c=e.spotid,u=e.extraInfo,d=void 0===u?{}:u,p=e.contractTemplateId,f=e.boxMap,g=void 0===f?{}:f,m={},v=[],_=function(e){var t=(a||[]).find((function(t){return Number(e)===Number(t.resourcesId)})),n=P(t),r=n.roeinfos,o=n.appendInfoError;return(null===o||void 0===o?void 0:o.isAppendInfoError)&&(m=o),r},y=function(e,t){return t?(0,T.TO)(e,r):r.resources.find((function(t){return t.mixedIds.indexOf(e)>-1}))},x=function(e,t,n,r,o){return{destcid:s,pid:e.productId,pname:e.productName,pricemode:0===e.priceMode?"S":1===e.priceMode?"U":"M",quantity:t,spotid:Number(c),tid:n,tname:null===r||void 0===r?void 0:r.resourceName,ttype:"",roeinfos:o}};return t.map((function(e,t){var a,s=n[e],c=y(e,!1),u=null,f=r.calendar.find((function(e){return e.date==i}));f&&(u=f.resources.find((function(t){return t.resourceId==e})));var m=!(null===(a=g[e])||void 0===a||!a.length),b=_(e);d&&d.relationOptionType&&(d=(0,o.Z)((0,o.Z)({},d),{},{frontCategoryId:u.viewTag?u.viewTag.id:0,frontCategoryName:u.viewTag?u.viewTag.name:0}));var Z={};if(p&&0===t&&(Z={contractTemplateId:p}),c&&u){var I=x(s,l[t],e,c,b);v.push((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},I),{},{price:String(u.salePrice)},m?{packageType:2}:{consdate:i}),d),Z))}m&&g[e].map((function(r){var i=r.resourceId,a=r.date,s=r.unitQuantity,c=void 0===s?1:s,u=n[i],d=y(i,!0),p=_(i),f=x(u,(0,h.dC)(l[t],c),i,d,p);v.push((0,o.Z)((0,o.Z)({},f),{},{consdate:a,ptid:e,packageType:0}))}))})),{list:v,appendInfoError:m}},j=function(e){var t=e.additionOptid,n=e.additionalSale,r=[],o={},i=[];return t&&t.length&&t.forEach((function(e){var t=n.resources,a=t.find((function(t){return t.resourceId==e}));r.push({resourceId:a.resourceId,inventoryNum:a.inventoryNum,maxQuantity:a.maxQuantity,salePrice:a.salePrice,viewTag:a.viewTag}),i.push({mixedIds:[a.resourceId],resourceName:a.resourceName}),o[e]={productId:a.productId,productName:a.productName,priceMode:a.priceMode}})),{needResInfo:r,addResProductInfo:o,addResResources:i}},D=function(e){var t=e.request,n=e.sku,r=e.appendInfoList,o=e.additionalSale,i=e.contract,a=t.optid,s=t.date,l=t.productInfo,c=t.count,u=t.spotid,d=t.destcid,p=t.additionOptid,h=t.additionCount,f=t.boxMap,g=[],m={},v=n.calendar,_=j({additionOptid:p,additionalSale:o}),y=_.needResInfo,x=_.addResProductInfo,b=_.addResResources,Z=L({optid:a,count:c,date:s,calendar:v});if(!Z&&y.length&&(Z=L({optid:p,count:h,date:s,calendar:[{date:s,resources:y}]})),Z)return{tickets:Z};var I=N({optid:a,productInfo:l,sku:n,date:s,appendInfoList:r,destcid:d,count:c,spotid:u,contractTemplateId:null===i||void 0===i?void 0:i.templateId,boxMap:f}),C=I.list,k=I.appendInfoError;if(y.length){var w=N({optid:p,productInfo:x,sku:{resources:b,calendar:[{date:s,resources:y}]},date:s,appendInfoList:[],destcid:d,count:h,spotid:u,extraInfo:{relationOptionType:1}}),T=w.list;C=C.concat(T)}return g=C,m=k,{tickets:g,appendInfoError:m}},V=n(56569),E=n(39140),R=n(79522),A=function(e){return"/pages/ticket/order/detail?orderid=".concat(e)},F=n(32180)["window"],M=function(e,t){var n=[];e.split(".").map((function(e){n.push(parseInt(e,10))}));for(var r=n.length;r<t;r++)n.push("0");return parseInt(n.join(""),10)},O=function(){if(F&&F["Internal"]&&F["Internal"]["appVersion"])return F["Internal"]["appVersion"];var e,t,n;if(F&&F.navigator){var r=F.navigator.userAgent||"";n=null!=(e=r.split("_"))&&(t=e.indexOf("CtripWireless"))>=0&&e.length>t&&e[t+1]}return n||"0.0.0"},B=function(e,t){var n=Math.max(e.split(".").length,t.split(".").length);return M(e,n)>=M(t,n)},G=(0,l.ZP)(),H=function(e,t){var n,r,i,a=e.footer,l=e.request,c=e.insurance,u=e.payComToOrder;if(a.total&&a.footPop&&!isNaN(a.total)){var d=String(a.total).replace("\xa5",""),f=l.optid,g=l.productInfo,m=s.ZP.mkt.getUnion(),v=s.ZP.mkt.getWakeUnion()||{},_=(0,s.FN)();a.naquhuaAmt&&(d=String((0,h.IH)(d,a.naquhuaAmt)));var y={ver:G.version,pageid:(0,p.dD)(),contentType:"json",amt:d,chargetype:1==l.payMode?1:0,ispayisc:!!l.insuranceId,rebate:!1,title:l.scenicSpotName,insurs:[],prominput:[],ostype:(0,V.gn)()?1:2,from:G.platform==E.NX.H5?location.href:"".concat(null===_||void 0===_||null===(n=_.router)||void 0===n?void 0:n.path,"?").concat((0,R.RF)(null===_||void 0===_||null===(r=_.router)||void 0===r?void 0:r.params)),skid:l.skid?l.skid:0,replayToken:l.replayToken,extraParams:{isRepeatOrderCheck:"mini"==t.platform?"2":"1",IsSupportRemind:"1",IsRemindCheck:"1",IsSupportMedicalsRemind:"1",IsSupportStudentRemind:"1",IsSupportReservoirOrder:"1",hasRemindPopup:l.hasForgoInsurance?"1":"0",hasAdditionalSale:"0",needAdditionalSaleRemind:"0",hasInsurance:l.insuranceId?"1":"0",isSupportPeopleRemind:"1",needInsuranceRemind:c&&c.hasRefuseComfirm?"0":null!==(i=g[f[0]])&&void 0!==i&&null!==(i=i.flags)&&void 0!==i&&i.includes("insuranceTips")&&z(e)?"1":"0",IsSupportRemindHtml:G.platform==E.NX.RN&&(0,R.nW)(G.version)>="854004"?"1":"0",needSignDateTemplate:"1",needExtendOrderDuration:"1"},alliance:{aid:String(m.allianceid||""),sid:String(m.sid||""),ouId:String(m.ouid||""),ext:[]},marketinfo:JSON.stringify(v),payVersion:"2.0",rmsToken:l.rmsToken};return(G.platform==E.NX.RN&&B(G.version,"8.47.0")||G.isInApp&&B(O(),"8.47.0"))&&(y.tags=[{key:"platformTrade",value:"supportBooking"}]),y.extraParams=(0,o.Z)((0,o.Z)({},y.extraParams),{},{ordersource:JSON.stringify((0,o.Z)((0,o.Z)({},l.extParams),{},{IsCtripPreferred:l.IsCtripPreferred}))}),l.isscan&&(y.extraParams=(0,o.Z)((0,o.Z)({},y.extraParams),{},{isscan:"T"})),u&&(y.sback=A()),y}},z=function(e){var t,n=e.passengerList,r=e.passengerModal,o=!1;return null!==(t=r.group)&&void 0!==t&&t.length&&r.group.forEach((function(e){var t;null===(t=e.dChoice)||void 0===t||t.forEach((function(e){var t=n.find((function(t){return Number(t.PassengerID)===Number(e)})),r=null===t||void 0===t?void 0:t.Birthday;(0,y.uo)(r)&&(o=!0)}))})),o},U=function(e){var t=[],n=!1,r=e.coupon,o=void 0===r?{}:r,i=o.discountDataList,a=void 0===i?[]:i,s=o.discountList,l=void 0===s?[]:s,c=o.cashBackList,u=void 0===c?[]:c;return a.forEach((function(e){(e.isTopOne||e.isSelect)&&e.createParams&&t.push(e.createParams)})),l.forEach((function(e){e.isSelect&&e.createParams&&t.push(e.createParams)})),u.forEach((function(e){e.isSelect&&(n=!0)})),{prominput:t,rebate:n}},q=n(33031),W=function(e,t,n){},K=n(90983),J=n(22276),X={WECHATMINIAPP:"weapp",ALIPAYAPP:"alipay",BAIDUAPP:"swan",TOUTIAOAPP:"tt",KUAISHOUAPP:"kwai",KUAISHOWAPP:"kwai",OLDQUICKAPP:"quick",NEWQUICKAPP:"quick"},Q=X[(0,V.ud)()],$=function(e,t){var n,r=e.state.request,i=(0,l.ZP)(),a={};return t.head=(0,o.Z)((0,o.Z)({},t.head),{},{sid:"8888",extension:[].concat((0,J.Z)((null===(n=t.head)||void 0===n?void 0:n.extension)||[]),[{name:"protocal",value:"https"}])}),E.yB[Q]&&(0,V.CX)()&&(a.serverfrom=E.yB[Q],Q&&t.head.extension.push({name:"appId",value:E.iI[Q]})),r.isbbc&&t.head.extension.push({name:"bbcId",value:"bbcdistribution"}),i.serverfrom&&(a.serverfrom=i.serverfrom),{request:Object.assign(a,e.header,t),actionUrl:"/restapi/soa2/14921/CreateTicketOrder"}},Y=n(62878),ee=n(25311),te=function(e,t){e.setStateWrapper({showPayingStep:t})};function ne(e){var t=e.oid;return"/pages/ticket/order/detail?orderid=".concat(t)}var re=n(93065),oe=n(21705);function ie(e,t,n){var r,o="".concat((0,l.wU)("m.ctrip.fat466.qa.nt.ctripcorp.com"),"/webapp/h5myinfo/studentinfo?autoawaken=close&popup=close&from=").concat(encodeURIComponent(null===(r=location)||void 0===r?void 0:r.href));e.push(o)}var ae=n(35512),se=n(17366),le=n(28570),ce=n(35184),ue=n(70873),de=n(6376),pe=n(26758),he=n(70614),fe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var o,i,a,c,u,d,p,h,f,g,m,v,_,y,x,b,Z,I,C,k,w,T,S,P,L,N,j,D,V,R,F,M,O,B,G;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return re.Z.show(),ee.Jn&&ee.Jn.callNative&&ee.Jn.callNative("Device","logInstalledAppList"),te(n,!0),e.next=5,n.http({list:[$(n,t)],needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u521b\u5efa\u8ba2\u5355\u8bf7\u6c42"},timeout:3e4});case 5:if(o=e.sent,re.Z.hide(),setTimeout((function(){Te()}),500),!(o&&o[0]&&o[0].head&&o[0].data)){e.next=94;break}if(c=o[0],u=c.head,d=c.data,p=c.refresh,h=c.refreshType,f=u.errcode,g=u.errmsg,m=d.requestid,v=d.oid,_=d.payToken,y=d.confirms,x=d.payLink,b=d.merchantId,Z=d.cashierJumpUrl,I=d.requestPayId,te(n,!f),0!==f&&(0,oe.d7)({errcode:f,errmsg:g,errorMessageMap:(null===(i=n.qconfig)||void 0===i?void 0:i.booking_block_trace_code_mapping)||{},optid:null===(a=n.state.request)||void 0===a?void 0:a.optid,confirm:y&&(y||[])[0]}),0!=f){e.next=24;break}if(s.ZP.mkt.sendUnionTrace(s.ZP.sendUbtByPage,v,"TTD"),C=ne({oid:v,title:t.title,amt:t.amt}),!(1===t.chargetype||Number(t.amt)<=0)){e.next=19;break}return e.abrupt("return",n.push(C,!1,{},null,(function(){Te(),(0,Y.Z)(n,!0)})));case 19:k={requestId:I||m,orderId:v,payToken:_,payLink:Z||x,busType:7,merchantId:b,isNewPay:!!Z,sBackUrl:A(v),eBackUrl:A(v)},(0,l.ZP)().platform===E.NX.Mini&&Z&&(k={payLink:Z}),s.ZP.payment.callPay2({serverData:k,sbackCallback:function(e){n.push(C,!1,{},null,(function(){Te(),(0,Y.Z)(n,!0)}))},rbackCallback:function(e){(0,Y.Z)(n,!0)},ebackCallback:function(e){(0,Y.Z)(n,!0)}}),e.next=92;break;case 24:if(![1015,1016].includes(f)){e.next=28;break}1016===f&&n.showInsurancePop(),e.next=92;break;case 28:if(90001!=f||!y||!y.length){e.next=53;break}w=!0,T=t.amt>0?"\u7ee7\u7eed\u652f\u4ed8":"\u7ee7\u7eed\u9884\u7ea6",S=(0,K.Z)(y||[]),e.prev=32,L=(0,r.Z)().mark((function e(){var o,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=P.value,i=o,1e4!=i.errorCode){e.next=10;break}if(w){e.next=5;break}return e.abrupt("return",{v:void 0});case 5:return e.next=7,new Promise((function(e){var t,r,o,a=i.extraInfo.repeatOrderId;ae.ZP.show({props:{isOpened:!0,richText:i.customerErrorMessage,isRichText:!0,btnLeftFunc:function(){ae.ZP.hide("bookingErrorMessage"),n.push(A(a)),e(!1)},btnRightFunc:function(){ae.ZP.hide("bookingErrorMessage"),e(!0)},name:"bookingErrorMessage",btnLeft:"\u67e5\u770b\u8ba2\u5355",btnRight:T,logs:{exposureLogs:null===(t=n.logData)||void 0===t||null===(t=t.repeatBookingLog)||void 0===t?void 0:t.repeatBookingeExposureLog,leftLogs:null===(r=n.logData)||void 0===r||null===(r=r.repeatBookingLog)||void 0===r?void 0:r.repeatBookingClickLog({type:"\u5de6\u6309\u94ae"}),rightLogs:null===(o=n.logData)||void 0===o||null===(o=o.repeatBookingLog)||void 0===o?void 0:o.repeatBookingClickLog({type:"\u53f3\u6309\u94ae"})}}})}));case 7:w=e.sent,e.next=40;break;case 10:if(2e4!=i.errorCode){e.next=18;break}if(w){e.next=13;break}return e.abrupt("return",{v:void 0});case 13:return e.next=15,new Promise((function(e){ae.ZP.show({props:{isOpened:!0,richText:i.customerErrorMessage,isRichText:!0,title:"\u666f\u533a\u63d0\u793a",fStyle:{title_text:{marginBottom:(0,se.Vh)(8)}},btnLeftFunc:function(){ae.ZP.hide("bookingErrorMessage"),e(!1)},btnRightFunc:function(){ae.ZP.hide("bookingErrorMessage"),e(!0)},name:"bookingErrorMessage",btnLeft:"\u6682\u505c\u9884\u8ba2",btnRight:T}})}));case 15:w=e.sent,e.next=40;break;case 18:if(3e4!=i.errorCode){e.next=25;break}if(w){e.next=21;break}return e.abrupt("return",{v:void 0});case 21:w=!1,ae.ZP.show({props:{isOpened:!0,richText:"\u8be5\u4ea7\u54c1\u9700\u8ba4\u8bc1\u533b\u751f\u6216\u62a4\u58eb\u8eab\u4efd\u540e\u65b9\u53ef\u8d2d\u4e70",isRichText:!0,btnLeftFunc:function(){ae.ZP.hide("bookingErrorMessage")},btnRightFunc:function(){var e=t.tickets&&t.tickets.length?t.tickets[0]:{};ae.ZP.hide("bookingErrorMessage"),me(n,{resid:e.tid,spotid:e.spotid,passengers:t.passengers})},name:"bookingErrorMessage",btnLeft:"\u53d6\u6d88",btnRight:"\u53bb\u8ba4\u8bc1"}}),e.next=40;break;case 25:if(4e4!=i.errorCode&&5e4!=i.errorCode){e.next=32;break}if(w){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:w=!1,ae.ZP.show({props:{isOpened:!0,richText:i.customerErrorMessage,isRichText:!0,btnLeftFunc:function(){ae.ZP.hide("bookingErrorMessage")},btnRightFunc:function(){ae.ZP.hide("bookingErrorMessage"),ie(n,t.passengers[0].infoid,(function(){return ge(t,n)}))},name:"bookingErrorMessage",btnLeft:"\u53d6\u6d88",btnRight:"\u53bb\u8ba4\u8bc1"}}),e.next=40;break;case 32:if(6e4!=i.errorCode){e.next=40;break}if(w){e.next=35;break}return e.abrupt("return",{v:void 0});case 35:return e.next=37,n.getRecommendResult(t);case 37:w=e.sent,e.next=40;break;case 40:case"end":return e.stop()}}),e)})),S.s();case 35:if((P=S.n()).done){e.next=42;break}return e.delegateYield(L(),"t0",37);case 37:if(N=e.t0,!N){e.next=40;break}return e.abrupt("return",N.v);case 40:e.next=35;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e["catch"](32),S.e(e.t1);case 47:return e.prev=47,S.f(),e.finish(47);case 50:w&&ge(t,n),e.next=92;break;case 53:if(![99013,99014].includes(f)){e.next=57;break}n.toast.show("\u4e0d\u7b26\u5408\u8d2d\u4e70\u8981\u6c42"),e.next=92;break;case 57:if(![20137,20136].includes(f)){e.next=66;break}R=n.state.coupon,F=(R.discountDataList||[]).find((function(e){return e.discountType==ue.$i.COUPON}))||{},M=F.receiverName,O=F.discountName,B=F.couponCode,ae.ZP.show({props:{title:"\u4f18\u60e0\u5238\u4f7f\u7528\u8981\u6c42",isOpened:!0,btnLeftFunc:function(){n.openUseCoupon(),n.bookingOpenCoupon=!0,ae.ZP.hide("customCouponMessage")},btnRightFunc:function(){20137==f?n.setAnchor("passenger"):(0,de.iw)(n.forceRefreshCoupon.bind(n),B,n.goLogin.bind(n),n.state.isLogin),ae.ZP.hide("customCouponMessage")},name:"customCouponMessage",btnLeft:"\u66f4\u6539\u4f18\u60e0\u9009\u62e9",btnRight:20137==f?"\u8fd4\u56de\u66f4\u6539\u6e38\u5ba2":"\u524d\u5f80\u8ba4\u8bc1",logs:{exposureLogs:null===(j=n.logData)||void 0===j||null===(j=j.couponUserNameLog)||void 0===j?void 0:j.couponUserExposureLog,leftLogs:null===(D=n.logData)||void 0===D||null===(D=D.couponUserNameLog)||void 0===D?void 0:D.couponUserClickLog({type:"\u5de6\u6309\u94ae"}),rightLogs:null===(V=n.logData)||void 0===V||null===(V=V.couponUserNameLog)||void 0===V?void 0:V.couponUserClickLog({type:"\u53f3\u6309\u94ae"})}},child:pe.Z,childProps:{couponTitle:O,couponUserName:M,isFromBooking:!0}}),e.next=92;break;case 66:if(!n.state.ABTest||1!=h){e.next=72;break}return n.toast.show(g),(0,Y.Z)(n,!0),e.abrupt("return");case 72:if(!n.state.ABTest||2!=h){e.next=78;break}return n.toast.show(g),n.refreshPage(!0),e.abrupt("return");case 78:if(!n.state.ABTest||3!=h){e.next=83;break}return n.confirm.show({btnOK:["\u77e5\u9053\u4e86"],content:g,btnCallBack:[function(){(0,le.Sw)()}]}),e.abrupt("return");case 83:if(!p){e.next=88;break}return n.confirm.show({btnOK:["\u597d\u7684"],content:g,btnCallBack:[function(){(0,Y.Z)(n,!0)}]}),e.abrupt("return");case 88:n.toast.show(g||"\u62b1\u6b49\uff0c\u4e0b\u5355\u5931\u8d25\uff0c\u8bf7\u6838\u5b9e\u4fe1\u606f\u540e\u91cd\u8bd5"),G=he.U.Null,12104==f?G=he.U.PassengerMobile:12101==f&&(G=he.U.ContactMobile),G!=he.U.Null&&n.setStateWrapper({limitType:G});case 92:e.next=96;break;case 94:te(n,!1),n.toast.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5");case 96:case"end":return e.stop()}}),e,null,[[32,44,47,50]])})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.extraParams.isRepeatOrderCheck="2",t.extraParams.IsRemindCheck="0",!t.verifyInfo){e.next=10;break}return e.next=5,(0,ce.k)(n,t.tickets,!0);case 5:if(o=e.sent,console.log("checkVerify1",o),!["error","fail","close"].includes(o.type)){e.next=9;break}return e.abrupt("return");case 9:["success"].includes(o.type)&&(t.verifyInfo={vtoken:o.token,vversion:o.version});case 10:return e.abrupt("return",fe(t,n));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function me(e,t){var n=t.resid,r=t.spotid,o=t.passengers,i="https://m.ctrip.com";"FAT"===e.header.enviroment&&(i="https://m.ctrip.fat334.qa.nt.ctripcorp.com");var a=o.map((function(e){return e.infoid})),s="".concat(i,"/webapp/ticket/healthcare?passenger=").concat(a.join(","),"&resid=").concat(n,"&spotid=").concat(r,"&cardid=").concat(o.some((function(e){return 1==e.cardtype})).toString(),"&passengertype=\u51fa\u884c\u4eba");return e.push(s)}var ve=fe,_e=n(91510),ye="kVWeSJZEoEQr5gbUyeh-gMfDDhivyuH4GiVBCtBBsc0",xe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,o,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.request,n.isscan){e.next=3;break}return e.abrupt("return");case 3:return o={},o.isscan="T",e.prev=5,e.next=8,_e.Z.requestSubscribeMessage({tmplIds:[ye]});case 8:i=e.sent,"accept"===(null===i||void 0===i?void 0:i[ye])&&(o.authBenArriveId=ye),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](5);case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),be=n(99213),Ze=n(22561),Ie=n(2446),Ce=function(e,t){var r,o=!(null===(r=e.state.request)||void 0===r||!r.overseas)&&!e.state.isAuthorizedOversea,i=e.isSelectChild();if(o){var a=n(63287).Z;Ie.ZP.show({props:{name:"clausePopLayer",isShowHeader:!1,minHeight:i&&!e.state.isAgreeChild?(0,se.Vh)(247):(0,se.Vh)(194),maxHeight:"100%",isScrollView:!1,isModal:!0,onClosed:function(){t(!1)}},child:a,childProps:{cleasuText:i&&!e.state.isAgreeChild?"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f\u3002\u67e5\u770b":"",title:"\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u4ee5\u4e0b\u5185\u5bb9",onCloseClausePop:function(){t(!1),e.onCloseClausePop(i,o)},onAgree:function(){t(!0),e.onAgree(i,o)},lineStyle:{linearGradientColor:["rgba(255, 102, 0, 1)","rgba(255,136,0,1)"]},subText:"\u4e2a\u4eba\u4fe1\u606f\u51fa\u5883\u6388\u6743\u58f0\u660e",webUrl:"https://m.ctrip.com/tangram/MzU1ODU=?ctm_ref=vactang_page_35585&isHideNavBar=YES&apppgid=10650051850&hidehead=1"}})}else if(o||!i||e.state.isAgreeChild)t(!0);else if(e.state.ABTest){var s=n(63287).Z;Ie.ZP.show({props:{name:"clausePopLayer",isShowHeader:!1,minHeight:(0,se.Vh)(247),onClosed:function(){t(!1)}},child:s,childProps:{cleasuText:"\u672c\u4eba\u662f\u8ba2\u5355\u4e2d\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\u6216\u5df2\u5f81\u5f97\u5176\u76d1\u62a4\u4eba\u540c\u610f\uff0c\u5141\u8bb8\u5e73\u53f0\u4ee5\u63d0\u4f9b\u4ea7\u54c1\u6216\u670d\u52a1\u4e3a\u76ee\u7684\uff0c\u5904\u7406\u672a\u6210\u5e74\u4eba\u4fe1\u606f",title:"\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f\u4ee5\u4e0b\u5185\u5bb9",onCloseClausePop:function(){t(!1),e.onCloseClausePop(i,o)},onAgree:function(){t(!0),e.onAgree(i,o)}}})}else e.setState({isClauseError:!0}),e.setAnchor("clause"),e.toast.show("\u8bf7\u9605\u8bfb\u5e76\u540c\u610f\u4e0b\u65b9\u6388\u6743\u5185\u5bb9"),t(!1)},ke=(0,l.ZP)().platform==E.NX.H5,we=!1,Te=function(){we=!1},Se=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,s,l){var c,u,d,p,h,f,g,m,v,_,y,x,b,Z,I,C,k,w,T,S,P,L=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=L.length>5&&void 0!==L[5]?L[5]:{},d={},p=[],h=[],f=[],g=[],"string"!==typeof n.tickets){e.next=10;break}return s("select_quantity",{message:"\u4ec5\u5269X\u4efd",value:n.tickets}),t.toast.show(n.tickets),e.abrupt("return",!1);case 10:if("string"!=typeof n.passengers){e.next=17;break}return l(!0),s("passenger",{message:"\u8fd8\u9700\u9009\u62e9X\u4f4d\u6e38\u5ba2",value:n.passengers}),t.toast.show(n.passengers),e.abrupt("return",!1);case 17:if("object"!=(0,i.Z)(n.passengers)||null===(c=n.passengers)||void 0===c||!c.errorMessage){e.next=24;break}return l(!0),s("passenger",{message:"\u51fa\u884c\u4eba\u6821\u9a8c\u4e0d\u901a\u8fc7",value:n.passengers}),ae.ZP.show({props:{isOpened:!0,richText:(null===(m=n.passengers)||void 0===m?void 0:m.errorMessage)||"",isRichText:!0,btnRightFunc:function(){ae.ZP.hide("passengerErrMsg")},name:"passengerErrMsg",btnRight:"\u6211\u77e5\u9053\u4e86",isOneBtn:!0,title:null!==(v=n.passengers)&&void 0!==v&&v.errMsg?(null===(_=n.passengers)||void 0===_?void 0:_.errMsg)+"\u4e0d\u7b26\u5408":"",fStyle:{content_text:{textAlign:"center"},main_center:{minHeight:0}}}}),e.abrupt("return",!1);case 24:if(l(!1),!n.passengers.length||!n.passengers[0].passengerId){e.next=30;break}return p=n.passengers,s("passenger",{message:"\u51fa\u884c\u4eba\u4fe1\u606f\u4e0d\u5168\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u51fa\u884c\u4eba\u4fe1\u606f",key:"tkt_3100010"}),a(p,d,f),e.abrupt("return",!1);case 30:if(Array.isArray(n.additionalPassenger)){e.next=36;break}return s("additionalPassenger".concat(null===(y=n.additionalPassenger)||void 0===y?void 0:y.id),{aligs:"additionalPassenger"}),t.toast.show(null===(x=n.additionalPassenger)||void 0===x?void 0:x.text),e.abrupt("return",!1);case 36:if(!n.additionalPassenger.length||!n.additionalPassenger[0].passengerId){e.next=41;break}return h=n.additionalPassenger,s("additionalPassenger".concat(null===(b=n.additionalPassenger[0])||void 0===b?void 0:b.resid),{aligs:"additionalPassenger",message:"\u9644\u52a0\u552e\u5356\u51fa\u884c\u4eba\u4fe1\u606f\u6709\u8bef",key:"tkt_3100006"}),a(p,d,f,g,h),e.abrupt("return",!1);case 41:if(n.passengers=Array.isArray(n.passengers)?n.passengers.concat(n.additionalPassenger):[],delete n.additionalPassenger,!n.contact||!n.contact.isContactError){e.next=51;break}return s("contact"),d=n.contact,Z=!1,d.mobileError&&(t.toast.show(d.mobileError),Z=!0),d.emailError&&!Z&&t.toast.show(d.emailError),a(p,d,f),e.abrupt("return",!1);case 51:if(!n.additionalContact||!n.additionalContact.isContactError){e.next=59;break}return s("additionalPassenger".concat(null===(I=n.additionalContact)||void 0===I?void 0:I.resid)),d=n.additionalContact,d.emailError&&t.toast.show(d.emailError),a(p,d,f),e.abrupt("return",!1);case 59:n.contact=(0,o.Z)((0,o.Z)({},n.contact),n.additionalContact),delete n.additionalContact;case 61:if(!(u&&u.appendInfoError&&u.appendInfoError.isAppendInfoError)){e.next=68;break}return g=u.appendInfoError.appendInfoErrorList||[],C=g.find((function(e){var t=e.tip;return""!==t})),k=C.id,w=C.tip,w&&t.toast.show(w),s(k),a(p,d,f,g),e.abrupt("return",!1);case 68:if(!n.insurs||"string"!=typeof n.insurs){e.next=74;break}return s("insurance",{message:"\u9700\u8981\u88ab\u4fdd\u4eba",key:"tkt_3100012"}),t.toast.show(n.insurs),e.abrupt("return",!1);case 74:if(T=n.insurs,S=!1,T&&(S=T.some((function(e){return!!e.passengerId}))),!S){e.next=80;break}return s("insurance",{message:"\u9700\u8981\u88ab\u4fdd\u4eba",key:"tkt_3100012"}),e.abrupt("return",!1);case 80:if("string"!=typeof n.insurpros){e.next=88;break}return s("insurance",{message:"\u9700\u8981\u6295\u4fdd\u4eba"}),t.toast.show(n.insurpros),f=[{noPolicyHolderError:"\u9700\u586b\u51991\u540d\u6ee118\u5468\u5c81\u6295\u4fdd\u4eba\u4fe1\u606f"}],a(p,d,f),e.abrupt("return",!1);case 88:if(!n.insurpros.length||!n.insurpros[0].passengerId){e.next=93;break}return f=n.insurpros,s("insurance",{message:"\u9700\u8981\u6295\u4fdd\u4eba"}),a(p,d,f),e.abrupt("return",!1);case 93:return e.next=95,new Promise((function(e){Ce(t,e)}));case 95:if(P=e.sent,P){e.next=98;break}return e.abrupt("return",P);case 98:return e.abrupt("return",!0);case 99:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),Pe=function(e,t){var n=t.state.request,r=e.phonecode,o=e.phone;if(!r||!o)return null;t.http({list:[u(n,t.header,e)],needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u4e0b\u5355\u66f4\u65b0\u8054\u7cfb\u4fe1\u606f"}})},Le=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,i,a){var l,c,u,d,h,f,g,m,y,x,Z,C,w,T,S;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!we){e.next=2;break}return e.abrupt("return");case 2:if(we=!0,c=null,e.prev=4,l=H(t.state,t),l){e.next=10;break}return t.state.request.date||(i("tab_calendar"),t.toast.show("\u8bf7\u9009\u62e9\u65e5\u671f")),we=!1,e.abrupt("return");case 10:return l.passengers=_(t.state),l.additionalPassenger=v(t.state,l),l.contact=I(t.state,l.passengers),l.additionalContact=b(t.state),d=D(t.state),h=d.tickets,f=d.appendInfoError,l.tickets=h,g=k(t.state),m=g.insurextends,y=g.insurpros,x=g.insurs,l.insurpros=y,x&&(l.insurs=x),m&&(l.insurextends=m),Z=U(t.state),C=Z.prominput,w=Z.rebate,l.prominput=C,l.rebate=w,null!==(u=s.ZP.cwx_mkt)&&void 0!==u&&u.openid&&(l.openId=s.ZP.cwx_mkt.openid),e.next=26,Se(t,l,n,i,a,{appendInfoError:f});case 26:c=e.sent,e.next=36;break;case 29:return e.prev=29,e.t0=e["catch"](4),(0,Ze.T)(e.t0,oe.Uj,[e.t0,!0]),we=!1,(0,be.FC)(),(0,p.gp)({type:"booking_create_fail",body:{currentRequest:t.state.request,createParams:l,value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38-\u521b\u5355format",errorMsg:e.t0?e.t0.message:"\u65e0",errorStack:e.t0?e.t0.stack:"\u65e0"}}),e.abrupt("return");case 36:if(!c){e.next=62;break}if(we=!(0,q.HR)(t),we){e.next=40;break}return e.abrupt("return");case 40:return e.next=42,xe(t.state);case 42:return T=e.sent,T&&(l.extraParams=(0,o.Z)((0,o.Z)({},l.extraParams),T)),W(l,["installment","bargainCutId","orderSummary"],t.state),Pe(l.contact,t),e.next=48,(0,ce.k)(t,l.tickets);case 48:if(S=e.sent,console.log("checkVerify",S),!["error","fail","close"].includes(S.type)){e.next=53;break}return we=!1,e.abrupt("return");case 53:if(["success"].includes(S.type)&&(l.verifyInfo={vtoken:S.token,vversion:S.version}),!(!ke||t.state.isLogin||s.ZP.user.isNonUser&&s.ZP.user.isNonUser())){e.next=59;break}return e.next=57,ve(l,t);case 57:e.next=60;break;case 59:s.ZP.user.nonMemberLogin&&s.ZP.user.nonMemberLogin({callback:function(e){"0"==(null===e||void 0===e?void 0:e.returncode)?ve(l,t):((0,p.gp)({type:"booking_nonMember_fail",body:{title:"\u521b\u5355\u533f\u540d\u767b\u5f55, \u9519\u8bef\u7801\uff1a".concat((null===e||void 0===e?void 0:e.returncode)||"")}}),we=!1)}});case 60:e.next=63;break;case 62:we=!1;case 63:case"end":return e.stop()}}),e,null,[[4,29]])})));return function(t,n,r,o){return e.apply(this,arguments)}}()},9422:function(e,t,n){n.d(t,{y:function(){return l}});var r=n(298),o=n(68924),i=n(75833),a=n(83692),s=function(e){var t={},n=(0,a.k5)(e.ENFirstName),r=(0,a.k5)(e.ENLastName);return n&&n.length||r&&r.length?t={isError:!0,EnglishFirstNameError:n,EnglishLastNameError:r}:t.ename="".concat(e.ENLastName,"/").concat(e.ENFirstName),t},l=function(e,t,n){var r=!1;if(!e)return!0;var s=(0,o.JV)(e,["isIdCard","cardNo","Birthday","CNName","name"],(0,i.jX)(n,t)),l=s.isIdCard,c=s.cardNo,u=s.Birthday,d=s.CNName,p=s.name;return r=l?!!(0,a.Du)(d)||!!(0,a.SB)(c):!!(0,a.Qk)(u)||!!(0,a.uD)(c)||!!(0,a.Du)(d)&&!!(0,a.k5)(p),r};t["Z"]=function(e,t,n,o,l,c,u){var d,p=t.CardSource,h=t.isShowEnglish,f=(0,i.jX)(l,o),g=null===(d=t.resourceCardInfo[f])||void 0===d?void 0:d.CardType,m=n.filter((function(e){return 2===e.model})),v={isError:!1},_="";switch(+e>12&&500!==+e&&(e=7),[1,2,3].includes(e)&&(null!==c&&void 0!==c&&c.find((function(e){return e==o}))&&null!==u&&void 0!==u&&u.find((function(e){return e==o}))||(e=null!==c&&void 0!==c&&c.includes(o)?1:e,e=null!==u&&void 0!==u&&u.includes(o)?2:e)),e){case 1:if(_=(0,a.Du)(t.CNName),_&&_.length){v.isError=!0,v.CNNameError=_;break}v.name=t.CNName;break;case 2:var y=s(t);y.isError?v=(0,r.Z)({},y):v.ename=y.ename;break;case 3:if("boolean"!==typeof h)if(t.CNName){if(_=(0,a.Du)(t.CNName),_&&_.length){v.isError=!0,v.CNNameError=_;break}v.name=t.CNName}else{var x=s(t);x.isError?v=(0,r.Z)({},x):v.ename=x.ename}else if(h){var b=s(t);b.isError?v=(0,r.Z)({},b):v.ename=b.ename}else{if(_=(0,a.Du)(t.CNName),_&&_.length){v.isError=!0,v.CNNameError=_;break}v.name=t.CNName}break;case 4:(0,a.TM)(t.Nationality)&&(v.isError=!0,v.NationalityError="\u8bf7\u9009\u62e9\u56fd\u5bb6/\u5730\u533a"),v.nat=t.Nationality;break;case 5:v.cardtype=g;break;case 6:if(_=(0,a.nG)(t.Gender),_&&_.length){v.isError=!0,v.genderError=_;break}v.gen="M"==t.Gender?0:1;break;case 7:var Z=p&&p[g],I=(m||[]).find((function(e){return e.cardType==g}));if(Z&&I){_=(0,a.TM)(Z.CardNo)?"\u8bf7\u586b\u5199\u8bc1\u4ef6\u53f7":"",_||1===g&&(_=(0,a.SB)(Z.CardNo)),_?(v.isError=!0,v.cardError=_):(v.isError=!1,v.cardno=Z.CardNo);break}v.isError=!0,v.cardError="\u8bf7\u586b\u5199\u8bc1\u4ef6\u53f7";break;case 8:if(1===g){var C=p&&p[g]&&p[g].CardNo;if(""==(0,a.SB)(C)){v.birth=(0,a.QF)(C);break}}if(_=(0,a.Qk)(t.Birthday),_&&_.length){v.isError=!0,v.birthError=_;break}v.birth=t.Birthday;break;case 9:v=(0,r.Z)((0,r.Z)({},v),{},{birthplace:t.BirthPlace,birthcity:t.BirthPlace});break;case 10:(0,a.TM)(t.CardSource&&t.CardSource[g]&&t.CardSource[g].CardTimelimit)&&(v.isError=!0,v.CardTimelimitError="\u8bf7\u9009\u62e9\u8bc1\u4ef6\u6709\u6548\u671f"),v=(0,r.Z)((0,r.Z)({},v),{},{ictl:t.CardSource&&t.CardSource[g]&&t.CardSource[g].CardTimelimit||""});break;case 11:if(_=(0,a.my)(t.MobilePhone,t.CountryCode),_&&_.length){v.isError=!0,v.phoneError=_;break}v=(0,r.Z)((0,r.Z)({},v),{},{phone:t.MobilePhone?String(t.MobilePhone).replace(/-| /g,""):"",phonecode:String(t.CountryCode||"")});break;case 500:(0,a.TM)(t.CardSource&&t.CardSource[g]&&t.CardSource[g].IssueDate)&&(v.isError=!0,v.IssueDateError="\u8bf7\u9009\u62e9\u8bc1\u4ef6\u7b7e\u53d1\u65e5\u671f"),v=(0,r.Z)((0,r.Z)({},v),{},{issueDate:t.CardSource&&t.CardSource[g]&&t.CardSource[g].IssueDate||""});break}return v}},83692:function(e,t,n){n.d(t,{TM:function(){return o},Qk:function(){return i},SB:function(){return a},uD:function(){return s},oP:function(){return l},my:function(){return c},Du:function(){return u},k5:function(){return d},nG:function(){return p},QF:function(){return h},uo:function(){return f},Ay:function(){return g},e8:function(){return m}});var r=n(68924),o=function(e){return!e||""===e.trim()},i=function(e){if(o(e))return"\u8bf7\u9009\u62e9\u751f\u65e5";var t=function(e){return/^\d{4}(-)(1[0-2]|0?\d)\1([0-2]\d|\d|30|31)$/.test(e)},n=t(e);return n?"":"\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f"},a=function(e,t){if(o(e))return"\u8bf7\u586b\u5199\u8bc1\u4ef6\u53f7";var n=e.toLowerCase().match(/\w/g);if(e.match(/^\d{17}[\dx]$/i)){for(var r=0,i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=0;a<17;a++)r+=parseInt(n[a])*i[a];return"10x98765432".charAt(r%11)!=n[17]?"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801":!t&&/^8[123]/.test(e)?"\u60a8\u8f93\u5165\u7684\u662f\u6e2f\u6fb3\u53f0\u5c45\u6c11\u5c45\u4f4f\u8bc1\uff0c\u8bf7\u4fee\u6539\u8bc1\u4ef6\u7c7b\u578b":e.replace(/^\d{6}(\d{4})(\d{2})(\d{2}).+$/,"$1-$2-$3")?"":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"}return"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"},s=function(e){return o(e)?"\u8bf7\u586b\u5199\u8bc1\u4ef6\u53f7":""},l=function(e){if(o(e))return"\u8bf7\u586b\u5199Email";var t=/^[A-Za-z0-9-_=_+\\.]{1,50}@[A-Za-z0-9]+[A-Za-z0-9-_+]*[\\.]([A-Za-z0-9-_+]+[\\.]?[A-Za-z0-9-_+]*)*[A-Za-z0-9]+#?$/.test(e)&&e.length<=60;return t?"":"\u8bf7\u586b\u5199\u6b63\u786e\u7684Email"},c=function(e,t){if(o(e))return"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u7801";var n=+t,r=e?String(e).replace(/-| /g,""):"",i=!isNaN(+e);if(t&&86!==n)return i?852===n||853===n?8===r.length?"":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801":886===n?9===r.length||10===r.length?"":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801":r.length>=6&&r.length<=12?"":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801";var a=11===r.length&&/^1[3456789]\d{9}$/.test(r);return a?"":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"},u=function(e){var t=function(e){return/^([\u4E00-\u9FEF\u3400-\u4DB5])+[a-zA-Z\u4E00-\u9FEF\u3400-\u4DB5\xb7]*$/.test(e)},n="";return o(e)?n="\u8bf7\u586b\u5199\u4e2d\u6587\u59d3\u540d":t(e)?e.length<2?n="\u4e2d\u6587\u59d3\u540d\u4e0d\u53ef\u5c11\u4e8e2\u4e2a\u6c49\u5b57":e.length>20&&(n="\u4e2d\u6587\u59d3\u540d\u4e0d\u53ef\u591a\u4e8e20\u4e2a\u6c49\u5b57"):n="\u59d3\u540d\u9664\u53ef\u5305\u542b\u4e00\u4e2a\xb7\u5916\uff0c\u4e0d\u53ef\u5305\u542b\u5176\u4ed6\u7279\u6b8a\u5b57\u7b26",n},d=function(e){var t=function(e){return/^[A-Za-z ]+$/.test(e)},n=function(e){return/^ .*?$/.test(e)||/^.*? $/.test(e)},r="";return o(e)?r="\u8bf7\u586b\u5199\u82f1\u6587\u59d3\u540d":t(e)?n(e)?r="\u82f1\u6587\u59d3\u540d\u4e2d\u7684\u7a7a\u683c\u4ec5\u5141\u8bb8\u5728\u5b57\u6bcd\u4e2d\u95f4":e.length>40&&(r="\u82f1\u6587\u59d3\u540d\u957f\u5ea6\u5fc5\u987b\u5c11\u4e8e40\u4e2a\u5b57\u7b26"):r="\u82f1\u6587\u59d3\u540d\u4e0d\u80fd\u586b\u5199\u4e2d\u6587\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26",r},p=function(e){return o(e)?"\u8bf7\u9009\u62e9\u6027\u522b":["F","M"].includes(e)?"":"\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6027\u522b"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=15===e.length?"19"+e.substr(6,6):e.substr(6,8);return t=t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2),t},f=function(e){if(!e)return!1;var t=new Date(e);return t.setFullYear(t.getFullYear()+18),t.getTime()<(new Date).getTime()},g=function(e){var t=e.birthday;if(!t)return null;t=t.split("-");var n=new Date,r=[n.getFullYear(),n.getMonth()+1,n.getDate()],o=r.map((function(e,n){return e-t[n]}));if(o[2]<0){var i=new Date(r[0],r[1],0);o[1]--,o[2]+=i.getDate()}return o[1]<0&&(o[0]--,o[1]+=12),o[0]},m=function(e){var t=!1;if(e){var n=(0,r.JV)(e,["birth"]),o=n.birth;if(!o)return!1;t=f(o)}return t}},94765:function(e,t,n){n.d(t,{js:function(){return i},Wd:function(){return a}});var r=n(121),o={},i=function(e){return o[e]||!1},a=function(){o={}};t["ZP"]=function(e,t,n){var i,a,s=n.additionalSale,l=n.anchor,c=(0,r.I8)(s),u=null===c||void 0===c||null===(i=c.resources)||void 0===i?void 0:i.findIndex((function(e){return e.resourceId==t})),d=null===c||void 0===c?void 0:c.resources[u];return null!==d&&void 0!==d&&null!==(a=d.passengerModal)&&void 0!==a&&null!==(a=a.group)&&void 0!==a&&a.length&&(o[t]=!0,d.passengerModal.group[0].dChoice=e,c.resources[u]=d,e.length==d.passengerModal.group[0].choice&&l.search("additionalPassenger")>-1&&(l="")),{additionalSale:c,anchor:l}}},66956:function(e,t,n){n.d(t,{av:function(){return a},In:function(){return l},KN:function(){return c}});var r=n(298),o=n(121),i=n(39935),a=function(e,t,n){var o=(0,r.Z)({},t);return(0,i.Lg)(o,n,{dChoiceList:e}),o},s=!1,l=function(){return s},c=function(){s=!1};t["ZP"]=function(e,t){var n=t.insurance;s=!0;var r=(0,o.I8)(n);return r.policyholderGroup.dChoice=e?[e]:[],{insurance:r}}},95372:function(e,t,n){n.d(t,{Tt:function(){return f}});var r=n(79301),o=n(95308),i=n(22276),a=n(31097),s=n(31431),l=n(70501),c=n(70873),u=n(68983),d=n(84578);t["ZP"]=function(e,t){var n=d.Fs.load("getCustomerTemplate");return(0,u.rC)(t.passengerList,n,{},void 0,[Number(e)]),t.request.insuranceId=e,{footer:(0,s.aS)(t)}};var p=function(e,t){var n=e.count||[1],r=e.optid||[],o=r.length;if(0==o)return null;for(var i=e.date,a=((null===t||void 0===t?void 0:t.calendar)||[]).find((function(e){return e.date==i})),s=(null===a||void 0===a?void 0:a.resources)||[],l=0,c=[],u=0;u<o;u++){l=r[u];var d=s.find((function(e){return e.resourceId==l}));if(d){var p=n[u],h={id:l,idType:0==u?4:5,quantity:Number(p),price:d.salePrice};c.push(h)}}return c},h=function(e){var t=e||{},n=t.discountList,r=t.cashBackList,o=t.discountDataList,a=([].concat((0,i.Z)(n),(0,i.Z)(r),(0,i.Z)(o))||[]).filter((function(e){var t=e.isSelect,n=e.discountId,r=t&&n;return r})).map((function(e){return{code:"".concat(e.discountId),idType:e.discountType==c.$i.COUPON?1:2,amount:e.amount}}));return a},f=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,i,s,c,u,d,f,g,m,v,_;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.header,i=t.request,s=t.passengerList,c=t.passengerModal,u=t.sku,d=t.coupon,f={resourcePrices:p(i,u),discountPrices:h(d)},g=[(0,a.Z)(i,o,u,!0,f)],e.next=6,n.http({list:g,needDevTrace:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4ef7\u683c\u53d8\u52a8\u89e6\u53d1\u4fdd\u9669\u91cd\u65b0\u67e5\u8be2"}});case 6:if(m=e.sent,m){e.next=9;break}return e.abrupt("return");case 9:return v={getInsurance:m[0]},_=l.Z.getFormatByModules(i,v,["insurance"],{passengerList:s,passengerModal:c}),e.abrupt("return",_);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},53053:function(e,t,n){var r=n(298),o=n(9349),i=n(61252),a=n(88592),s=n(31431);t["Z"]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e.overdraft,c=e.request,u=e.footer,d=t,p={overdraft:(0,r.Z)((0,r.Z)({},l),{},{currentSelectedNum:d}),footer:u};if(c.isNewNaquhua){if(null==t&&u.naquhuaAmt){o.ZP.show("\u4e0d\u4f7f\u7528\u62ff\u53bb\u82b1\u4ed8\u6b3e\uff0c\u65e0\u6cd5\u4eab\u7acb\u51cf");var h=(0,a.sO)("tkt_cancelnqhtoast_trace",{keyid:"223103"}),f=h.params,g=h.type;(0,i.Zz)(f,g)}else if(n){o.ZP.show("\u60a8\u5f53\u524d\u9009\u62e9\u7684\u662f\u62ff\u53bb\u82b1\u4e0d\u5206\u671f\u4ed8\u6b3e,\u4eab\xa5".concat(l.details[0].discountAmt,"\u7acb\u51cf"));var m=(0,a.sO)("tkt_selectnqhtoast_trace",{keyid:"223102"}),v=m.params,_=m.type;(0,i.Zz)(v,_)}else{var y,x=(null===(y=l.details)||void 0===y?void 0:y.find((function(e){return e.installmentIndexNum===d})))||{};if(!x.discountAmt&&u.naquhuaAmt){o.ZP.show("\u8be5\u5206\u671f\u65b9\u5f0f\u6682\u4e0d\u652f\u6301\u62ff\u53bb\u82b1\u4f18\u60e0");var b=(0,a.sO)("tkt_cancelnqhtoast_trace",{keyid:"223103"}),Z=b.params,I=b.type;(0,i.Zz)(Z,I)}}u=(0,s.F5)((0,r.Z)((0,r.Z)({},e),p))}return u=(0,s.b0)((0,r.Z)((0,r.Z)((0,r.Z)({},e),p),{},{footer:u})),(0,r.Z)((0,r.Z)({},p),{},{footer:u})}},39935:function(e,t,n){n.d(t,{tV:function(){return C},Lg:function(){return T},SF:function(){return P},xC:function(){return D}});var r=n(298),o=n(79301),i=n(95308),a=n(22276),s=n(47391),l=n(121),c=n(66956),u=n(94765),d=n(88327),p=n(49502),h=n(61252),f=n(25311),g=n(2723),m=n(92481),v=n(32500),_=n(84578),y=n(73435),x=n(75833),b=n(91410),Z=n(79239),I=n(70614),C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.from(new Set([].concat((0,a.Z)(t),(0,a.Z)(e)))),o=n,i=o.needFilter;if(i){var s=3;r.splice(s)}return r},k=function(e,t){var n=[];return t.map((function(t){var r=e.find((function(n,r){if(n.PassengerID==t)return e.splice(r,1),!0}));r&&n.push(r)})),[].concat(n,(0,a.Z)(e))},w=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t,n,r,i,a){var c,u,d,p,g,m,_,b,Z,I,w,T,S,P,L,N,j,D,V,E,R,A,F;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=r.header,u=r.state,d=r.devTraceKeyData,p=a||{},g=p.boxId,m=u.request,_=u.passengerModal,b=u.passengerList,Z=m.count,I=m.optid,w=m.date,T=m.minDate,S=_.group,P=_.contactInfo,L=P.mobile,N=P.email,j=(0,x.jX)(g,t),D=(0,l.I8)(_),V=(0,l.I8)(b),E=D.group.find((function(e){return e.resourceId==t&&g==e.boxId})),E){e.next=12;break}return e.abrupt("return",null);case 12:if(!(""==w||0==Z.length||0==I.length||n.length<E.dChoice.length)){e.next=16;break}return E.dChoice=n,i&&(D.showList=C(D.showList,n,{needFilter:!0})),e.abrupt("return",{passengerModal:D,passengerList:k(V,n)});case 16:return R={contactMobile:L||"",email:N||"",resourcePassengers:function(){var e=S.find((function(e){return e.resourceId==t&&g==e.boxId}));if(e){var r,o=e.boxId&&(null===m||void 0===m||null===(r=m.boxMap[e.boxId].find((function(e){return(null===e||void 0===e?void 0:e.resourceId)==t})))||void 0===r?void 0:r.unitQuantity)||1,i=(0,y.dC)((null===Z||void 0===Z?void 0:Z[(I||[]).findIndex((function(n){return n==t||n==e.boxId}))])||1,o),a=n.length<i?n.length:i;return e.resourceIdList.map((function(t){return{resourceId:t,quanty:a||1,useDate:w||T,passengers:function(){var e=[];return n.slice(0,E.choice).map((function(t){var n=b.find((function(e){return e.PassengerID==t}));if(!n)return[];var r=(0,v.W)(n,j);e=e.concat(r)})),e}(),parentResourceId:e.boxId?e.boxId:null}}))}return[]}()},e.next=19,r.http({list:[(0,s.Z)(R,c)],timeout:200,lock:"saleLimit",needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:r.devTraceKeyData,scene:"[Action]\u9009\u62e9\u51fa\u884c\u4eba\u6821\u9a8c\u9650\u8d2d\u4fe1\u606f"}});case 19:if(A=e.sent,A){e.next=23;break}return(0,f.fU)({key:"rn_ttd_taro_booking_limit_timeout",value:"\u9650\u8d2d\u63a5\u53e3\u4e3a\u7a7a"},"devTrace"),e.abrupt("return");case 23:if(0!=A[0].result){e.next=29;break}return r.toast.show(A[0].errorMessage),(0,h.Vg)({attrs:d,module:"\u53ef\u8ba2\u963b\u65ad",action:"sys_show",scene:"\u9009\u62e9\u51fa\u884c\u4eba",key:"tkt_3100017",value:A[0].errorMessage,jsonData:{value:"\u51fa\u884c\u4eba\u9650\u8d2d"}}),e.abrupt("return",null);case 29:return F=D.group.find((function(e){return e.resourceId==t&&g==e.boxId})),F.dChoice=n.slice(0,E.choice),i&&(D.showList=C(D.showList,n,{needFilter:!0})),e.abrupt("return",{passengerModal:D,passengerList:k(V,n)});case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),T=function(e,t,n){var o;if(null!==t&&void 0!==t&&null!==(o=t.state)&&void 0!==o&&o.insurance||null!==e&&void 0!==e&&e.insurance){var i=(0,r.Z)((0,r.Z)({},null===t||void 0===t?void 0:t.state),e),a=i.insurance,s=i.passengerList,u=i.passengerModal,p=(0,l.I8)(a);if(n&&n.dChoiceList&&null!==p&&void 0!==p&&p.insuredGroup&&(p.insuredGroup.dChoice=n.dChoiceList),null!==p&&void 0!==p&&p.policyholderGroup&&!(0,c.In)()){var h=(0,d.td)(s,{passengerModal:u,insuredGroup:p.insuredGroup});p.policyholderGroup.dChoice=h}return e.insurance=p,e.insurance}},S=function(e,t){var n,r,o=t.state,i=o.additionalSale,s=o.request,c=s.additionCount,d=void 0===c?[]:c,h=s.additionOptid,f=void 0===h?[]:h,g=e||{},m=g.passengerList,v=g.passengerModal,_=(null===v||void 0===v||null===(n=v.group)||void 0===n?void 0:n.reduce((function(e,t){return Array.from(new Set([].concat((0,a.Z)(e),(0,a.Z)(t.dChoice))))}),[]))||[];if(m&&v&&null!==i&&void 0!==i&&null!==(r=i.resources)&&void 0!==r&&r.length){var y=(0,l.I8)(i),x=y.resources;x.forEach((function(e){var t;if(!(0,u.js)(e.resourceId)&&null!==(t=e.passengerModal)&&void 0!==t&&null!==(t=t.group)&&void 0!==t&&t.length){for(var n,r=f.findIndex((function(t){return t==e.resourceId})),o=null===(n=e.passengerModal.group[0])||void 0===n?void 0:n.fillInNumberLimit,i=1==o?1:Math.min(d[r],_.length),a=0,s=[],l=function(t){var n=m.find((function(e){return e.PassengerID==_[t]})),r=!(0,p.Mh)(n,e.passengerModal.group[0]||{},e.resourceId);if(a>=i)return 1;r&&(s.push(_[t]),a++)},c=0;c<_.length;c++)if(l(c))break;e.passengerModal.group[0].dChoice=s,!s.length&&e.passengerModal.useMainPassen&&(e.passengerModal.useMainPassen=!1),s.length&&!1===e.passengerModal.useMainPassen&&(e.passengerModal.useMainPassen=!0);var h=y.resources.findIndex((function(t){return t.resourceId==e.resourceId}));y.resources[h]=e}})),e.additionalSale=y}},P=function(e,t,n){var r=[],o={};for(var i in e.map((function(e){var r=t.find((function(t){return t.PassengerID==Number(e)}));if(r){var i,a,s=r.CardSource,l=r.resourceCardInfo,c=void 0===l?{}:l,u=null===(i=c[n])||void 0===i?void 0:i.CardType,d=null===s||void 0===s||null===(a=s[u])||void 0===a?void 0:a.CardNo;s&&u&&d&&(o[d]?o[d].push(r.PassengerID):o[d]=[r.PassengerID])}})),o)o[i].length>1&&(r=r.concat(o[i]));return r=Array.from(new Set(r)),{isSame:r.length>1,repeateList:t.filter((function(e){return r.includes(e.PassengerID)}))}},L=function(e,t){var n=!0;if(e){var r=e.passengerModal;if(r){var o=r.group;o&&o.map((function(e){var t=e.dChoice,r=e.choice;t.length!=r&&(n=!1)}))}}n&&(e&&(e.warn_background=!1),t(!1))},N=function(e,t){var n=(0,r.Z)((0,r.Z)({},t.state),e),o=n.insurance;if(o){var i=e.passengerModal,s=e.passengerList;s||(s=t.state.passengerList);var c=(0,d.A2)(i,s,o.insuranceInfo.id),u=c.list,p=c.syncList;if(e.insurance=(0,l.I8)(o),e.insurance&&e.insurance.insuredGroup){var h=e.insurance.insuredGroup.dChoice||[],f=e.insurance.insuredGroup.syncChoice||[],g=f.map((function(e){var t=e.id;return t})),m=h.filter((function(e){return!g.includes(e)}));return e.insurance.insuredGroup.syncChoice=p,h.length>e.insurance.insuredGroup.choice&&m.length>0&&m.pop(),e.insurance.insuredGroup.dChoice=Array.from(new Set([].concat((0,a.Z)(u),(0,a.Z)(m)))).slice(0,e.insurance.insuredGroup.choice),e.insurance}}},j=function(e,t){var n,r=t,o=_.Fs.load("getProductPriceCalendar"),i=o||{},a=i.packageInfos,s=void 0===a?[]:a;return null!==t&&void 0!==t&&null!==(n=t.group)&&void 0!==n&&n.length&&t.group.forEach((function(e){for(var n,r,o=0;o<s.length;o++){var i,a=null===(i=s[o].resourceInfos)||void 0===i?void 0:i.find((function(t){return t.resourceId==e.resourceId}));if(a){n=a;break}}if(n&&n.peoplePropertyId)if(null!==t&&void 0!==t&&null!==(r=t.peopleChoice)&&void 0!==r&&r.length){var l=t.peopleChoice.find((function(e){return e.peoplePropertyId===n.peoplePropertyId}));l?l.dChoice=e.dChoice:t.peopleChoice.push({peoplePropertyId:n.peoplePropertyId,dChoice:e.dChoice,boxId:e.boxId})}else t.peopleChoice=[{peoplePropertyId:n.peoplePropertyId,dChoice:e.dChoice,boxId:e.boxId}]})),r},D=function(e,t,n,r){var o=t,i=j(e,r),a=n;return t&&(null!==t&&void 0!==t&&t.needRealName&&(o=N({insurance:t,passengerList:a,passengerModal:i},e)),o=T({insurance:o,passengerList:a,passengerModal:i},e)),{cNewInsurance:o,newPassengerModal:i,cNewPassengerList:a}};t["ZP"]=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t,n,r,i,a,s){var l,c,u,d,p,h,f,v,_,y,C,k,T,N;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=!1,u=s||{},d=u.boxId,p=null===(l=r.state.passengerModal)||void 0===l||null===(l=l.group)||void 0===l?void 0:l.find((function(e){return e.resourceId==t&&e.boxId==d})),h=(0,x.jX)(d,t),p&&p.addPassenger.map((function(e){7==e.itemId&&(c=!0)})),!c||!P(n,r.state.passengerList,h).isSame){e.next=8;break}return(0,g.Z)({currentGroup:p,repeateList:P(n,r.state.passengerList,h).repeateList,onSave:function(e,t,n){r.addPassenger(e,t,n)}}),e.abrupt("return");case 8:return r.devTraceType="changePassenger",e.next=11,w(t,n,r,i,s);case 11:if(f=e.sent,L(f,a),!f){e.next=33;break}if((0,Z.zu)(f.passengerModal,f.passengerList),S(f,r),v=D(r,r.state.insurance,f.passengerList,f.passengerModal),_=v.cNewInsurance,y=v.newPassengerModal,C=v.cNewPassengerList,f.insurance=_,f.passengerModal=y,f.passengerList=C,k=r.state.limitType,(k=I.U.PassengerMobile)&&(k=I.U.Null),f.limitType=k,!r.state.ABTest){e.next=32;break}if(T=(0,b.ji)(f.passengerList,n,t,h),!T.length){e.next=30;break}return e.next=28,(0,m.Z)(r,{passengers:T},t);case 28:N=e.sent,N&&((0,b.Qn)(N,r),f.recommend=N.recommend);case 30:e.next=33;break;case 32:f.recommend={};case 33:return e.abrupt("return",f);case 34:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}()},58465:function(e,t,n){n.d(t,{O:function(){return g}});var r=n(79301),o=n(45023),i=n(22276),a=n(298),s=n(95308),l=n(61101),c=n(84578),u=n(55029),d=n(14830),p=n(37814),h=n(44434),f=n(121);t["Z"]=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n,s,m){var v,_,y,x,b,Z,I,C,k,w,T,S,P,L,N,j,D,V,E,R,A;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _=m.state,y=_.request,x=_.sku,b=(0,f.I8)(x),Z=(0,a.Z)({},y),Z.date=t,Z.optid=(0,i.Z)(y.optid),Z.optid[0]=s,I=[(0,l.Z)((0,a.Z)((0,a.Z)({},Z),{},{type:"recommend"},{aggregation:!1,productId:"",token:""}),m.header)],e.next=9,m.http({list:I,needDevTrace:!0,devTraceData:{attrs:m.devTraceKeyData,scene:"[Action]\u4fee\u6539\u65e5\u671f\u8bf7\u6c42\u5171\u540c\u552e\u5356"}});case 9:if(C=e.sent,k=c.Fs.load("getProductPriceCalendar"),w=C[0].data||{},T=w.packageInfos,S=w.priceAndStockInfos,w.extendInfos,P=w.resourceInfos,L=void 0===P?[]:P,w.basicInfo,S&&null!==S&&void 0!==S&&S.length&&null!==L&&void 0!==L&&L.length&&k){e.next=14;break}return e.abrupt("return",{resourceList:[]});case 14:if(g(k,C[0].data,Z.aggregation),N=(0,u.eJ)((0,a.Z)((0,a.Z)({},c.Fs.load("getProductPriceCalendar")),{},{priceAndStockInfos:S,packageInfos:T,aggregations:!1}),Z),j=N.calendar,b.subResFullInfo=(0,d.GJ)(c.Fs.load("getProductPriceCalendar"),b),D=(0,p.Bt)((null===(v=c.Fs.load("getProductPriceCalendar"))||void 0===v?void 0:v.boxProductInfos)||[]),V=D.boxResIdMapSubResId,b.boxResIdMapSubResId=V,E=b.calendar.findIndex((function(e){return e.date==t})),!j.length){e.next=24;break}b.calendar[E]=j.find((function(e){return e.date==t})),e.next=25;break;case 24:return e.abrupt("return",{resourceList:[]});case 25:return Z.aggregation?b.resources=(0,d.jh)((0,a.Z)({},c.Fs.load("getProductPriceCalendar")),Z):L.map((function(e,t){e.mixedIds.forEach((function(e){b.resources[t]&&!b.resources[t].mixedIds.includes(e)&&b.resources[t].mixedIds.push(e)}))})),R=(0,h.Z)({chioceDateData:j[0],countArr:n,resources:b.resources,aggregation:Z.aggregation}),A=[],b.resources.forEach((function(e,t){var r=j.length&&j[0].resources.find((function(t){return e.mixedIds.includes(t.resourceId)}));r&&n[t]&&(A.push({id:r.resourceId,count:n[t],productId:r.productId}),R||r.resourceId==Z.optid[t]||(R="\u6240\u9009\u65e5\u671f\u4e0b\u4ea7\u54c1\u6709\u66f4\u65b0\uff0c\u8bf7\u53ca\u65f6\u67e5\u770b\u8d2d\u4e70\u987b\u77e5"))})),b.dateRecord=(0,a.Z)((0,a.Z)({},b.dateRecord),{},(0,o.Z)({},t,!0)),A.length&&(y.date=t),e.abrupt("return",{sku:b,resourceList:A,remindToast:R,request:y});case 32:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}();var g=function(e,t,n){var r,o=t||{},s=o.packageInfos,l=void 0===s?[]:s,u=o.priceAndStockInfos,d=void 0===u?[]:u,p=o.cashBackInfos,h=void 0===p?[]:p,f=o.resourceInfos,g=void 0===f?[]:f,v=o.basicInfo,_=o.productInfos,y=void 0===_?[]:_,x=o.boxProductInfos,b=void 0===x?[]:x,Z=o.firstLevelInfos,I=void 0===Z?[]:Z,C=e||{},k=C.packageInfos,w=C.priceAndStockInfos,T=C.cashBackInfos,S=void 0===T?[]:T,P=C.resourceInfos,L=void 0===P?[]:P,N=C.basicInfo,j=void 0===N?{}:N,D=C.productInfos,V=void 0===D?[]:D,E=C.boxProductInfos,R=void 0===E?[]:E,A=C.firstLevelInfos,F=void 0===A?[]:A;l.forEach((function(e){var t=null===k||void 0===k?void 0:k.findIndex((function(t){return t.packageId==e.packageId}));t<0?k.push(e):k[t]=(0,a.Z)((0,a.Z)({},k[t]),e)})),y.forEach((function(e){var t=V.some((function(t){return t.productId==e.productId}));!t&&V.push(e)})),b.forEach((function(e){var t=R.some((function(t){return t.productId==e.productId}));!t&&R.push(e)})),I.forEach((function(e){var t=F.find((function(t){return t.id==e.id}));t?e.peopleGroupInfos.map((function(e){var n=t.peopleGroupInfos.find((function(t){return t.peopleGroupId==e.peopleGroupId}));n?n.productIds=Array.from(new Set([].concat((0,i.Z)(n.productIds),(0,i.Z)(e.productIds)))):t.peopleGroupInfos.push(e)})):F.push(e)}));var M=w.findIndex((function(e){var t;return e.date==(null===(t=d[0])||void 0===t?void 0:t.date)}));-1!=M&&(w[M]=d[0]),h.forEach((function(e){S.every((function(t){return t.resourceId!=e.resourceId}))&&S.push(e)})),null!==L&&void 0!==L&&null!==(r=L[0])&&void 0!==r&&null!==(r=r.mixedIds)&&void 0!==r&&r.length?m(g,L,n):e.resourceInfos=g,Object.assign(j,v),c.Fs.save({getProductPriceCalendar:e})},m=function(e,t,n){e.forEach((function(e,r){if(0!=r&&n){if(e.peoplePropertyId){var o=t.find((function(t){return t.peoplePropertyId==e.peoplePropertyId}));o?o.mixedIds=Array.from(new Set(o.mixedIds.concat(e.mixedIds||[]))):t.push(e)}}else e.mixedIds.forEach((function(e){t[r]&&!t[r].mixedIds.includes(e)&&(t[r].mixedIds=t[r].mixedIds.concat([e]))}))}))}},91325:function(e,t,n){n.d(t,{Z:function(){return C},O:function(){return w}});var r=n(79301),o=n(45023),i=n(298),a=n(95308),s=n(86685),l=n(31431),c=n(70501),u=n(99728),d=n(95372),p=n(84578),h=n(21705),f=n(9349),g=n(53053),m=function(e,t,n,r){},v=n(52066),_=function(e,t,n,r){t.excitationTips={},t.interveneTips={};var o=null===e||void 0===e?void 0:e.tips;if(o)for(var i=0;i<o.length;i++){var a=o[i];if(1==a.type){var s,l=a;l.color=null===(s=a.contents[0])||void 0===s?void 0:s.key,t.excitationTips=Object.assign({},t.excitationTips,l)}else if(2==a.type&&"B"==r&&!n.isClose){for(var c=a,u=0;u<a.contents.length;u++)"black"==a.contents[u].key?c.contents[u].fontWeight="400":c.contents[u].fontWeight="500";n.time=(new Date).getTime(),v.Z.set("TTD_BOOKING_CACHE_RETAIN_FLAG",n),t.interveneTips=Object.assign({},t.interveneTips,c)}}},y=_,x=n(87225),b=n(25311),Z=n(121),I=(0,x.M)("221207_VAC_lydtd"),C=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,c,h,v){var _,x,C,w,S,P,L,N,j,D,V,E,R,A,F,M,O,B,G,H,z,U,q,W,K,J;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(_=a?a.toString():"",!(c&&c.length>1)){e.next=18;break}t.wrapperState[_]=(0,i.Z)((0,i.Z)({},t.wrapperState[_]||{}),{},(0,o.Z)({},n.key,n.value)),_&&!t.wrapperState[_].callback&&(t.wrapperState[_].callback=[]),_&&h&&t.wrapperState[_].callback.push(h),C=0;case 6:if(!(C<c.length)){e.next=16;break}if(t.wrapperState[_][c[C]]){e.next=11;break}return e.abrupt("return");case 11:"coupon"==c[C]&&(t.wrapperState[_].coupon=T(t.wrapperState[_].coupon,t.wrapperState[_].booking,t.state)),x=(0,i.Z)((0,i.Z)({},x),t.wrapperState[_][c[C]]);case 13:C++,e.next=6;break;case 16:e.next=20;break;case 18:_&&h&&(t.wrapperState[_]={callback:[h]}),x=n.value?n.value:n;case 20:if(w=v||{},S=w.isFirstInitCoupon,P=w.isDiscountChange,2==t.fetchStatus&&p.Fs.save({isSecondState:!0}),S&&p.Fs.save({isFirstInitCouponState:!0}),L=p.Fs.load("isSecondState")&&p.Fs.load("isFirstInitCouponState"),_||P||L){e.next=30;break}N=(0,i.Z)((0,i.Z)({},t.state),x),k(t,(0,i.Z)({},x),h),(0,u.K7)(N),e.next=63;break;case 30:if(D=(0,i.Z)((0,i.Z)({},t.state),x),V=D.insurance,E=D.request,R=V||{},A=R.isCancelInsurance,j=(0,l.aS)((0,i.Z)((0,i.Z)({},t.state),x)),F=function(e){var n,r=t.wrapperState[_]&&(null===(n=t.wrapperState[_])||void 0===n?void 0:n.callback);k(t,(0,i.Z)({},e),(function(){null!==r&&void 0!==r&&r.length&&r.forEach((function(e){return e&&e()}))})),t.wrapperState[_]&&(t.wrapperState[_]={}),(0,u.K7)(e)},!(A&&null!==E&&void 0!==E&&E.date&&(c&&c.length>1||P||L))){e.next=42;break}return F((0,i.Z)((0,i.Z)((0,i.Z)({},t.state),x),{},{footer:j})),e.next=39,(0,d.Tt)((0,i.Z)((0,i.Z)({},t.state),x),t);case 39:M=e.sent,x=(0,i.Z)((0,i.Z)({},x),M),j=(0,l.aS)((0,i.Z)((0,i.Z)({},t.state),x));case 42:if(L&&p.Fs.save({isFirstInitCouponState:!1,isSecondState:!1}),O=(0,i.Z)((0,i.Z)((0,i.Z)({},t.state),x),{},{footer:j}),F(O),2!=t.fetchStatus){e.next=63;break}return e.next=48,(0,s.xV)(null===(B=j)||void 0===B?void 0:B.total,t);case 48:if(G=e.sent,H=Object.assign({},O.retainTips),z=O.retainFlag?O.retainFlag:{},E.isNewNaquhua&&(null!==(U=G.overdraft)&&void 0!==U&&null!==(U=U.details)&&void 0!==U&&null!==(U=U[0])&&void 0!==U&&U.discountAmt?t.isNaquhuaNeedSys?(G=(0,g.Z)((0,i.Z)((0,i.Z)({},O),{},{overdraft:G.overdraft}),0,!0),t.isNaquhuaNeedSys=!1):j=(0,l.F5)((0,i.Z)((0,i.Z)({},O),G)):(t.isNaquhuaNeedToast||j.naquhuaAmt)&&(f.ZP.show("\u8be5\u8ba2\u5355\u6682\u4e0d\u652f\u6301\u62ff\u53bb\u82b1\u4f18\u60e0"),t.isNaquhuaNeedToast=!1,j.naquhuaAmt&&(j=(0,l.F5)((0,i.Z)((0,i.Z)({},O),G))))),j=(0,l.b0)((0,i.Z)((0,i.Z)((0,i.Z)({},O),G),{},{footer:j})),!(E.poiid&&t.isRN&&["B","E"].includes(I))){e.next=62;break}return q=[m(E,t.header,j,t.state.crossCouponList)],W=(new Date).getTime(),e.next=58,t.http({list:q,isHideErrorConfirm:!0,needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u83b7\u53d6\u4ea7\u54c1\u63a8\u8350\u6587\u6848"}});case 58:K=e.sent,J=(new Date).getTime()-W,(0,b.fU)({key:"ttd_booking_getProductRetainTips_Newtime",id:228949,time:J.toString()},"devtrace"),y(K[0],H,z,I);case 62:(!a||a==t.changeKey&&(0,Z.vZ)(O.request,t.state.request))&&(k(t,(0,i.Z)((0,i.Z)({footer:j},G),{},{retainTips:H})),(0,u.K7)((0,i.Z)((0,i.Z)({},O),{},{footer:j},G)));case 63:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}(),k=function(e,t,n){try{(0,h.ZP)(e,t)}catch(e){console.log(e,"devTrace error")}e.setState(t,n)},w=function(e){for(var t=e||{},n=t.group,r=void 0===n?[]:n,o=0,i=r.length;o<i;o++)if(r[o].choice>r[o].dChoice.length)return!1;return!0},T=function(e,t,n){var r,o=c.Z.getFormatByModules(null===t||void 0===t?void 0:t.request,null,["coupon"],{sku:(null===t||void 0===t?void 0:t.sku)||(null===n||void 0===n?void 0:n.sku),header:null===n||void 0===n?void 0:n.header,couponParams:null===n||void 0===n||null===(r=n.coupon)||void 0===r?void 0:r.couponParams,couponRefreshInfo:{isBookingRefresh:!1,couponData:e},additionalSale:null===n||void 0===n?void 0:n.additionalSale});return o}},92481:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(79301),o=n(95308),i=function(e,t){var n={};return e.map((function(e){var r=e||{},o=r.resid,i=r.cardtype,a=r.cardno,s=r.phone,l={idCardType:i,idCardNo:a,contactMobile:s};t.optid.includes(o)&&(n[o]?n[o].push(l):n[o]=[l])})),Object.keys(n).map((function(e){return{resourceId:e,passengerList:n[e]}}))},a=function(e,t,n){var r=n.passengers,o=i(r,e);return{request:Object.assign({},t,{ScenicSpotId:e.spotid,TravelInfos:o,useDate:e.date,needRecommendationDetails:!0}),actionUrl:"/restapi/soa2/21052/searchRecommendProduct"}},s=n(70501),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){var i,l,c,u,d,p,h;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.state.request,e.next=3,t.http({list:[a(t.state.request,t.header,n)],needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u83b7\u53d6\u662f\u5426\u6709\u66f4\u63a8\u8350\u7684\u4ea7\u54c1"}});case 3:if(c=e.sent,u=[],null!==c&&void 0!==c&&null!==(i=c[0])&&void 0!==i&&i.recommendationDetails&&(u=c[0].recommendationDetails.filter((function(e){return e.recommendationExists}))),u.length){e.next=8;break}return e.abrupt("return",!1);case 8:return d=["recommend"],p={getRecommendProduct:u},h=s.Z.getFormatByModules(l,p,d,{createParams:n},o),e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},96082:function(e,t,n){n.d(t,{P:function(){return p}});var r=n(22276),o=n(79301),i=n(95308),a=n(35512),s=n(97912),l=n(61252),c=n(56034),u=n(47391),d=n(21705);t["Z"]=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,l;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(0,c.Pg)(),a=t.map((function(e){return(0,u.Z)({resourcePassengers:e,contactMobile:n,email:r},i)})),e.next=4,(0,s.d)({list:a,timeout:200,isHideErrorConfirm:!0,lock:"saleLimit"});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var p=function(e,t,n){var o=t||{},i=o.leftCb,s=o.rightCb,c=n||{},u=c.leftParams,p=void 0===u?[]:u,h=c.rightParams,f=void 0===h?[]:h,g=(0,d.Ye)();(0,l.Vg)({attrs:g,module:"\u53ef\u8ba2\u963b\u65ad",action:"sys_show",scene:"\u9009\u62e9\u51fa\u884c\u4eba",key:"tkt_3100017",value:e.errorMessage,jsonData:{value:"\u51fa\u884c\u4eba\u9650\u8d2d"}}),a.ZP.show({props:{isOpened:!0,isRichText:!0,richText:e.errorMessage,btnRightFunc:function(){a.ZP.hide("passengerErrMsg"),s&&s.apply(void 0,(0,r.Z)(f))},btnLeftFunc:function(){a.ZP.hide("passengerErrMsg"),i&&i.apply(void 0,(0,r.Z)(p))},name:"passengerErrMsg",btnLeft:"\u4fee\u6539\u6e38\u5ba2\u4fe1\u606f",btnRight:"\u6211\u77e5\u9053\u4e86",title:e.errMsg?e.errMsg+"\u4e0d\u7b26\u5408":"",fStyle:{content_text:{textAlign:"center"},main_center:{minHeight:0}}}})}},86685:function(e,t,n){n.d(t,{H4:function(){return W.Z},WX:function(){return ne.Z},N4:function(){return se},z6:function(){return ct.ZP},A6:function(){return ht},JY:function(){return C},$Z:function(){return X},pR:function(){return U},ex:function(){return te},UI:function(){return q.ZP},av:function(){return Q.av},Lg:function(){return Q.ZP},r$:function(){return gt},ES:function(){return N.ZP},xV:function(){return oe},xF:function(){return r.Z},K2:function(){return ie.Z},M1:function(){return ut},Hd:function(){return lt},rm:function(){return O.Z},DQ:function(){return dt},nh:function(){return re.Z}});var r=n(58465),o=n(79301),i=n(298),a=n(95308),s=n(31431),l=n(31097),c=n(70501),u=n(84578),d=n(12175),p=n(48407),h=n(15318),f=n(72126),g=function(e,t,n){var r=n.state,o=r.coupon,a=r.additionalSale,s=(0,f.m)(e,t,"use",{additionalSale:a});return n.setStateWrapper({coupon:(0,i.Z)((0,i.Z)({},o),{},{couponParams:s})}),s},m=n(64065),v=n(47045),_=n(88327),y=n(66e3),x=n(49502),b=n(47391),Z=n(32500),I=n(64708),C=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,f,I,C,w,T,S,P,L,N,j,D,V,E,R,A,F,M,O,B,G,H,z,U,q,W,K,J,X,Q,$,Y,ee,te,ne,re,oe,ie,ae,se,le;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.header,f=n.state,I=n.devTraceKeyData,C=f.request,w=f.passengerList,T=f.passengerModal,S=f.sku,P=f.anchor,L=f.additionalSale,k(C,r,S,t),N=(0,i.Z)({},C),N.date=t,j=!1,r[0].id!=N.optid[0]&&(j=!0),D="tab_calendar"==P?"":P,j){e.next=43;break}return N.count=[],N.optid=[],r.map((function(e){N.count.push(Number(e.count)),N.optid.push(Number(e.id))})),A=g(N,S,n),F=u.Fs.load("getCustomerTemplate"),M=(0,x.hU)(N,w,T),O={},B=[(0,h.Z)(N,a,S,L),(0,v.Z)(N,N.optid,a)],G=S.calendar,H=void 0===G?[]:G,z=H.find((function(e){return e.date===t})),f.ABTest&&!z.hasReservation&&(O.getFirstCanBooking=B.length,B.push((0,y.Z)(N,a,S))),N.isCrossDate||(O.getInsurance=B.length,B.push((0,l.Z)(N,a,S))),null!==(V=N.boxMap[C.optid[0]])&&void 0!==V&&V.length||(O.getAdditionalSale=B.length,B.push((0,m.Z)(N,a))),(0,d.z)({request:N,sku:S})||(O.getProductInfo=B.length,B.push((0,p.Z)(N,a))),O.checkLimitIndex=B.length,n.state.ABTest&&M.length&&1==(null===(E=T.group)||void 0===E?void 0:E.length)&&M.forEach((function(e){var t,n;B.push((0,b.Z)({resourcePassengers:e,contactMobile:(null===T||void 0===T||null===(t=T.contactInfo)||void 0===t?void 0:t.mobile)||"",email:(null===T||void 0===T||null===(n=T.contactInfo)||void 0===n?void 0:n.email)||""},a))})),e.next=27,n.http({list:B,needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:I,scene:"[Action]\u5207\u6362\u65e5\u671f\u89e6\u53d1"}});case 27:if(U=e.sent,!U[O.getFirstCanBooking]||0!=(null===(R=U[O.getFirstCanBooking].canBookingResult)||void 0===R?void 0:R.isSuccess)||!n.state.ABTest){e.next=31;break}return n.confirm.show({content:null===(q=U[O.getFirstCanBooking])||void 0===q||null===(q=q.canBookingResult)||void 0===q?void 0:q.message,btnOK:["\u77e5\u9053\u4e86"],btnCallBack:[function(){n.pop()}]}),e.abrupt("return");case 31:return W={getCustomerTemplate:F,getInsurance:U[O.getInsurance],getSalesPromotion:U[0],getOrderExtendInfo:U[1].resourceOrderExtendInfos,getAdditionalSale:U[O.getAdditionalSale],getRefundPolicy:U[O.getProductInfo]&&U[O.getProductInfo].productInfos,getProductInfo:u.Fs.load("getProductInfo"),getNoticeInfo:u.Fs.load("getNoticeInfo"),getScenicSpotInfo:u.Fs.load("getScenicSpotInfo")},W.getSalesPromotion&&u.Fs.save({getSalesPromotion:W.getSalesPromotion}),K=[],U[O.checkLimitIndex]&&(J=T.group,X=void 0===J?[]:J,Q=X[0]||{},$=Q.notFullList,Y=void 0===$?[]:$,ee=Q.resourceId,K=(0,Z.Z)(T.showList.filter((function(e){return!Y.includes(e)})),U.slice(O.checkLimitIndex),[],ee)),te=c.Z.getFormatByModules(N,W,["insurance","refundPolicy","additionalSale","appendInfo","headertips"],{passengerList:w,passengerModal:T,sku:S,additionalSale:L}),ne=N.additionCount,re=void 0===ne?[]:ne,oe=N.additionOptid,ie=void 0===oe?[]:oe,ae=(0,_.rY)(te,N),te.request=(0,i.Z)((0,i.Z)({},C),{},{additionCount:re,additionOptid:ie,date:t,insuranceId:ae}),te.passengerCheckErr=K,te.passengerModal=T,K.length&&te.passengerModal.group&&te.passengerModal.group.length&&(se=K.find((function(e){return te.passengerModal.group[0].dChoice.includes(null===e||void 0===e?void 0:e.passengerId)})),le=te.passengerModal.group[0].dChoice.indexOf(null===se||void 0===se?void 0:se.passengerId),-1!=le&&te.passengerModal.group[0].dChoice.splice(le,1)),e.abrupt("return",(0,i.Z)((0,i.Z)({footer:(0,s.aS)((0,i.Z)((0,i.Z)({},f),te))},te),{},{anchor:D,couponReduceInfo:{useCouponList:[],couponParams:A,getSalesPromotion:U[0]}}));case 43:return e.abrupt("return",{request:N,anchor:D,couponReduceInfo:null});case 44:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(e,t,n,r){var o=e.boxMap,i=void 0===o?{}:o,a=e.isCrossDate,s=e.optid,l={};return a&&i[s[0]].map((function(e){var t=(0,I.TO)(e.resourceId,n),r=t.firstLevelId;l[r]=e})),t.map((function(t){var o;if(null!==(o=i[t.id])&&void 0!==o&&o.length)i[t.id].map((function(t){t.date=a?t.date:r||e.date}));else if(n.boxResIdMapSubResId&&n.boxResIdMapSubResId[t.id]){var s=n.boxResIdMapSubResId[t.id];i[t.id]=s.map((function(o){var i,s=null===(i=n.subResFullInfo)||void 0===i?void 0:i[o],c=l[null===s||void 0===s?void 0:s.firstLevelId];return{resourceId:o,date:a?c.date:r||e.date,unitQuantity:null===s||void 0===s?void 0:s.unitQuantity[t.id],priceMode:(null===s||void 0===s?void 0:s.priceMode)||0}}))}})),e},w=n(22276),T=n(121),S=n(82015),P=n(79239),L=n(65516),N=n(39935),j=n(68909),D=n(56991),V=n(68983),E=n(99213),R=n(73435),A=n(55242),F=n(75833),M=n(91410),O=n(92481),B=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r,a,s,l,c){var d,p,h,f,g,m,v,_,y,b,Z,I,C,k,w,S,N,j,D;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(f=c.state,g=f.passengerCheckErr,m=f.passengerModal,v=f.sku,_=f.passengerList,y={getProductPriceCalendar:u.Fs.load("getProductPriceCalendar"),getCustomerTemplate:function(){var e=u.Fs.load("getCustomerTemplate");return a?e=n:n&&(e=e.concat(n)),u.Fs.save({getCustomerTemplate:e}),e}(),getUserCommonInfo:u.Fs.load("getUserCommonInfo"),getProductInfo:function(){var e=u.Fs.load("getProductInfo");return a?e=t:t&&(e=e.concat(t)),u.Fs.save({getProductInfo:e}),e}()},b=(0,T.I8)(m),Z=(0,T.I8)(g),I={},(0,x.ZP)(r,y,b,v,{passengerList:_,scene:s&&l?"firstInit":""}),!s||1!=(null===(d=b.group)||void 0===d?void 0:d.length)||null!==(p=b.group[0].dChoice)&&void 0!==p&&p.length||null===(h=r.optid)||void 0===h||!h.length){e.next=20;break}return e.next=9,(0,A.h)(r,{getProductInfo:y.getProductInfo,getUserCommonInfo:y.getUserCommonInfo},b,Z);case 9:if(C=e.sent,b.group[0].dChoice=C.dChoice,r.date&&(Z=C.passengerCheckErrList),k=b.group[0],w=k.resourceId,S=k.boxId,N=(0,F.jX)(S,w),j=(0,M.ji)(_,b.group[0].dChoice,w,N),!j.length){e.next=20;break}return e.next=18,(0,O.Z)((0,i.Z)((0,i.Z)({},c),{},{state:(0,i.Z)((0,i.Z)({},c.state),{},{request:r})}),{passengers:j},w);case 18:D=e.sent,D&&((0,M.Qn)(D,c),I=D.recommend);case 20:return 1==b.group.length?((0,L.Z)(r,y,b,_),b.group[0].notFullList=(0,x.Iq)(_,b.group[0].addPassenger,b.group[0].CardInfo,b.group[0].HkvisaInfo,b.group[0].resourceId,b.group[0].boxId)):b.showList=[],(0,P.ZP)(r,y,b,{passengerList:_}),e.abrupt("return",{cPassengerModal:b,cPassengerCheckErr:Z,recommend:I});case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a,s){return e.apply(this,arguments)}}(),G=function(e,t){var n,r=e.group,o=t.group,i=[],a=[];return null===r||void 0===r||r.forEach((function(e){i=i.concat(e.dChoice||[])})),null===o||void 0===o||o.forEach((function(e){a=a.concat(e.dChoice||[])})),i.length<a.length||!(null===(n=a)||void 0===n||!n.some((function(e){var t;return!(null!==(t=i)&&void 0!==t&&t.includes(e))})))},H=function(e,t,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=null,a=u.Fs.load("getCustomerTemplate")||[],s=function(s){if(e[s]!=t[s]){var l,c,u=n[s],d=[{resourceId:u}],p=void 0;null!==(l=o[u])&&void 0!==l&&l.length&&(d=o[u],p=u);var h=r(u),f=h.passengerModal,g=h.passengerList;i=f,null===(c=i)||void 0===c||null===(c=c.group)||void 0===c||c.forEach((function(e){if(d.find((function(t){return t.resourceId==e.resourceId&&p==e.boxId}))&&0==e.fillInNumberLimit){var n=e.resourceIdList.map((function(n){var r,o,i=null===(r=d.find((function(e){return e.resourceId==n})))||void 0===r?void 0:r.unitQuantity,l=(0,R.dC)((0,R.dC)(t[s],i||1),(0,x.Lm)(n));return 0==(null===(o=a.find((function(e){return e.resourceId==n})))||void 0===o?void 0:o.fillInNumberLimit)&&(e.resourceChoice[n]=l),l}));e.choice=Math.max.apply(Math,(0,w.Z)(n)),e.dChoice=e.dChoice.filter((function(e){return g.find((function(t){return t.PassengerID==e}))})).slice(0,e.choice)}}))}},l=0;l<t.length;l++)s(l);return i},z=function(e,t){var n;if(e){var r=(0,_.Wy)(t);n=(0,T.I8)(e),e.isCancelInsurance||(n.insuranceInfo.countUnitTxt=1==r?"/\u4efd":"x".concat(r,"\u4efd")),n.insuranceInfo.count=r,n.insuredGroup&&(n.insuredGroup.choice=r)}return n},U=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r,a,d,f){var y,x,b,Z,I,C,L,R,A,F,M,O,U,q,W,K,J,X,Q,$,Y,ee,te,ne,re,oe,ie,ae,se,le,ce,ue,de,pe,he,fe,ge,me,ve,_e,ye,xe,be,Ze,Ie,Ce,ke,we,Te,Se,Pe,Le,Ne,je;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y=n.header,a=a||n.state,x=a,b=x.request,Z=x.insurance,I=x.sku,C=x.passengerList,L=x.appendInfoList,R=x.additionalSale,A=x.ABTest,F=(0,T.I8)(a.passengerModal),k(b,t,I),M=(0,i.Z)({},b),M.count=[],M.optid=[],O=[],t.map((function(e){var t;M.count.push(Number(e.count)),M.optid.push(Number(e.id)),null!==(t=b.productInfo)&&void 0!==t&&t[e.id]||O.push(e.id)})),U=!1,q=!1,(null===b||void 0===b?void 0:b.optid.indexOf(M.optid[0]))<0&&(U=!0,b.aggregation&&(q=!0,M.productId=null===(W=t[0])||void 0===W?void 0:W.productId)),K=z(Z,M),b.optid.length==M.optid.length&&b.optid.every((function(e){return M.optid.includes(e)}))){e.next=55;break}return r(),ee=g(M,I,n),te={},ne=[],b.isCrossDate||(te.getInsurance=ne.length,ne.push((0,l.Z)(M,y,I))),null!==(J=b.boxMap[b.optid[0]])&&void 0!==J&&J.length||(te.getAdditionalSale=ne.length,ne.push((0,m.Z)(M,y))),re=["insurance","refundPolicy","coupon","appendInfo","additionalSale"],(U||O.length)&&(oe=U?M:{optid:O,date:b.date},te.getOrderExtendInfo=ne.length,ne.push((0,v.Z)(M,M.optid,y)),te.getProductInfo=ne.length,ne.push((0,p.Z)(oe,y,"booking","booking")),te.getCustomerTemplate=ne.length,ne.push((0,S.Z)(oe,y)),te.getSalesPromotion=ne.length,ne.push((0,h.Z)(M,y,I,R)),re.push("productInfo")),q&&(te.getNoticeInfo=ne.length,te.getContractInfo=ne.length+1,ne=ne.concat([(0,j.Z)(M,y,"2"),(0,D.Z)(M,y)]),re=re.concat(["imInfo","params","headertips","bargain","contract"])),e.next=26,n.http({list:ne,needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4fee\u6539\u4efd\u6570\u89e6\u53d1"}});case 26:if(ie=e.sent,(!te.getProductInfo||null!==ie&&void 0!==ie&&null!==(X=ie[te.getProductInfo])&&void 0!==X&&X.productInfos&&!ie[te.getProductInfo].productInfos.some((function(e){return!e.resourceInfos||!e.resourceInfos.length})))&&(!te.getCustomerTemplate||null!==ie&&void 0!==ie&&null!==(Q=ie[te.getCustomerTemplate])&&void 0!==Q&&null!==(Q=Q.customerTemplates)&&void 0!==Q&&Q.length)){e.next=32;break}return n.refreshSku++,n.toast.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),g(b,I,n),e.abrupt("return",a);case 32:return ae={getInsurance:ie[te.getInsurance],getAdditionalSale:ie[te.getAdditionalSale],getOrderExtendInfo:ie[te.getOrderExtendInfo]?ie[te.getOrderExtendInfo].resourceOrderExtendInfos:null,getProductInfo:(0,E.ck)(null===ie||void 0===ie||null===($=ie[te.getProductInfo])||void 0===$?void 0:$.productInfos),getCustomerTemplate:function(){var e=ie[te.getCustomerTemplate];return e&&e.customerTemplates&&(U?M.optid:O).map((function(t,n){e.customerTemplates[n].resourceId||(e.customerTemplates[n].resourceId=t)})),e?e.customerTemplates:null}(),getSalesPromotion:ie[te.getSalesPromotion],getNoticeInfo:null===ie||void 0===ie||null===(Y=ie[te.getNoticeInfo])||void 0===Y?void 0:Y.riskPolicyInfos,getContractInfo:ie[te.getContractInfo],getScenicSpotInfo:u.Fs.load("getScenicSpotInfo")},ae.getSalesPromotion&&u.Fs.save({getSalesPromotion:ae.getSalesPromotion}),ae.getOrderExtendInfo&&u.Fs.save({getOrderExtendInfo:ae.getOrderExtendInfo}),ae.getNoticeInfo&&u.Fs.save({getNoticeInfo:ae.getNoticeInfo}),se=c.Z.getFormatByModules(M,ae,re,{sku:I,request:b,appendInfoList:L,couponParams:ee,additionalSale:R,mainResouceChange:U},(0,w.Z)(U?M.optid:O)),le=(0,_.rY)(se,M),ce=!(null===M||void 0===M||!M.insuranceId)&&!le,se.request=(0,i.Z)((0,i.Z)({},M),{},{insuranceId:le}),(0,V.rC)(C,ae.getCustomerTemplate,b.boxMap,M.optid,le?[le]:void 0),e.next=43,B(ae.getProductInfo,ae.getCustomerTemplate,M,U,A,q,(0,i.Z)((0,i.Z)({},n),{},{state:a}));case 43:return ue=e.sent,de=ue.cPassengerModal,pe=ue.cPassengerCheckErr,he=ue.recommend,fe=(0,N.xC)(n,se.insurance,C,de),ge=fe.cNewInsurance,me=fe.newPassengerModal,ve=fe.cNewPassengerList,K=ge,de=me,q&&b.optid.length?(ye="\u6240\u9009\u65e5\u671f\u4e0b\u4ea7\u54c1\u6709\u66f4\u65b0\uff0c\u8bf7\u53ca\u65f6\u67e5\u770b\u8d2d\u4e70\u987b\u77e5",null!==se&&void 0!==se&&null!==(_e=se.additionalSale)&&void 0!==_e&&_e.ifResourecesDiff||G(de,F)||ce?n.toast.show("\u6240\u9009\u65e5\u671f\u4e0b\u4ea7\u54c1\u6709\u66f4\u65b0\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"):f?n.toast.show(f):n.toast.show(ye),se.additionalSale&&(se.additionalSale.ifResourecesDiff=!1)):f&&n.toast.show(f),(0,P.zu)(de,ve),e.abrupt("return",(0,i.Z)((0,i.Z)({footer:(0,s.aS)((0,i.Z)((0,i.Z)({},a),se))},se),{},{insurance:K,passengerModal:de,passengerList:ve,isWhiteChange:U,passengerCheckErr:pe,recommend:he}));case 55:if(be={},Ze={},Ie={},!M.date){e.next=74;break}if(f&&n.toast.show(f),d){e.next=71;break}return r(),Ze=g(M,I,n),Ce=[(0,h.Z)(M,y,I,R)],e.next=66,n.http({list:Ce,needDevTrace:!0,isHideErrorConfirm:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4fee\u6539\u4efd\u6570\u89e6\u53d1"}});case 66:ke=e.sent,be=ke[0],be&&u.Fs.save({getSalesPromotion:be}),e.next=73;break;case 71:be=d.getSalesPromotion,Ze=d.couponParams;case 73:Ie=c.Z.getFormatByModules(M,{getSalesPromotion:be},["coupon"],{sku:I,couponParams:Ze});case 74:return H(b.count,M.count,M.optid,(function(){return{passengerModal:F,passengerList:C}}),b.boxMap),Ie.request=M,we=(0,N.xC)(n,K,C,F),Te=we.cNewInsurance,Se=we.newPassengerModal,Pe=we.cNewPassengerList,K=Te,K&&null!==(Le=K.insuranceInfo)&&void 0!==Le&&Le.resourceCount&&(Ne=(0,_.Wy)(M),K.insuranceInfo.resourceCount=Ne),je=Se,je&&je.isNewGuest&&1==(null===(xe=je.group)||void 0===xe?void 0:xe.length)&&1==je.group[0].choice&&C.length&&!A&&(je.group[0].dChoice=[C[0].PassengerID]),(0,P.zu)(je,Pe),e.abrupt("return",(0,i.Z)({footer:(0,s.aS)((0,i.Z)((0,i.Z)({},a),Ie)),insurance:K,passengerModal:je||F,passengerList:Pe},Ie));case 83:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}(),q=n(95372),W=n(59415),K=n(70614),J=n(83692),X=function(e,t){var n=t.passengerModal,r=t.passengerList;e.mobile&&(e.mobile=e.mobile.replace(/\s/g,""),e.mobile=e.mobile.replace(/-/g,""),(0,P.nI)(!0),t.limitType==K.U.ContactMobile&&(t.limitType=K.U.Null));var o=t.errorTips;if(n&&n.contactInfo){Object.assign(n.contactInfo,e);var i={},a=n.contactInfo.contact;a&&a.length&&a.map((function(e){switch(e.mode){case 2:case 6:i.mobileError=(0,J.my)(n.contactInfo.mobile,n.contactInfo.areaCode);break;case 3:i.emailError=(0,J.oP)(n.contactInfo.email);break;case 4:i.emailError=n.contactInfo.email?(0,J.oP)(n.contactInfo.email):"";break}})),i.mobileError||i.emailError?i.isContactError=!0:i.isContactError=!1,(0,P.zu)(n,r),Object.assign(o.errorTipsContact,i)}},Q=n(66956),$=function(e,t){var n=e||{},r=n.useStatus,o=n.couponInfo,i=void 0===o?null:o,a=n.isTopOne,s=n.availableCount;if(i){var l=i.deductionAmount||0;if(l>0&&1==r){var c,u=i.deductionList||[],d=(null===(c=u.find((function(e){return e.hit})))||void 0===c?void 0:c.id)||0,p={availableNum:s,discountDesc:"\u51cf\xa5".concat(l),discountId:i.promotionId,amount:l,isTopOne:a,discountName:i.couponName,isSelect:!0,createParams:{ccode:i.couponCode,matchitem:d,promid:i.promotionId,redamt:"".concat(l),resids:t}};return p}}else if(s>0){var h={discountDesc:"".concat(s,"\u5f20\u53ef\u7528"),availableNum:s,discountId:i&&i.promotionId,amount:0,isTopOne:!1,discountName:i&&i.couponName};return h}return null},Y=n(70873),ee=n(75807),te=function(e,t){var n=t.coupon,r=t.request,o=e.discountType,a=e.discountId,l=e.resourceId,c=r.optid,u=(0,T.I8)(n),d=u.discountList,p=u.cashBackList,h=u.discountDataList,f=[];f=o==Y.$i.REBATE?p:o==Y.$i.DISCOUNT?d:h;var g=f.findIndex((function(e){return e.resourceId==l&&e.discountId==a})),m=f[g],v=m.discountType;if(v==Y.$i.DISCOUNT){var _=!m.isSelect;d[g]=(0,i.Z)((0,i.Z)({},m),{},{isSelect:_})}if(v==Y.$i.REBATE){var y=!m.isSelect;p[g]=(0,i.Z)((0,i.Z)({},m),{},{isSelect:y,discountTip:y?"\u9009\u62e9\u8fd4\u73b0\u5219\u4e0d\u53ef\u4f7f\u7528\u793c\u54c1\u5361\u652f\u4ed8":""})}if(v==Y.$i.COUPON){var x=$(e,c);h[g]=x?(0,i.Z)((0,i.Z)({},m),x):{discountType:Y.$i.COUPON,discountTitle:"\u4f18\u60e0\u5238",discountDesc:"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238",discountId:0,amount:0,availableNum:0,isTopOne:!1}}var b=(0,ee.Z)([].concat((0,w.Z)(d),(0,w.Z)(p),(0,w.Z)(h)),n.bestCouponNumber);return u.subTitle=b?"\u5df2\u9009\u62e9\u6700\u4f18\u60e0\u7ec4\u5408":"",{footer:(0,s.aS)((0,i.Z)((0,i.Z)({},t),{},{coupon:u})),coupon:u}},ne=n(45039),re=n(62878),oe=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=n(91325),ae=function(e,t,n){var r,o=n.resources,i=n.passengerModal,a=n.minusResource,s=n.passengerList,l=(0,T.I8)(i);if(a.length&&a.forEach((function(e){var t,n=o.findIndex((function(t){return t.resourceId==e})),r=o[n];r.passengerModal=void 0;var i,a=o.some((function(e){var t;return null===(t=e.passengerModal)||void 0===t||null===(t=t.contactInfo)||void 0===t||null===(t=t.contact)||void 0===t?void 0:t.some((function(e){return 3==e.mode}))})),s=null===l||void 0===l||null===(t=l.contactInfo)||void 0===t?void 0:t.emailType;!a&&s&&(null===l||void 0===l||null===(i=l.contactInfo)||void 0===i||null===(i=i.contact)||void 0===i||i.forEach((function(e){3!=e.mode&&4!=e.mode||(e.mode=s)})))})),null!==(r=t.optid)&&void 0!==r&&r.length){var c,d=null===l||void 0===l||null===(c=l.contactInfo)||void 0===c||null===(c=c.contact)||void 0===c?void 0:c.some((function(e){return 4==e.mode})),p={getCustomerTemplate:function(t){var n=u.Fs.load("getCustomerTemplate");return null!==(t=e.getCustomerTemplate)&&void 0!==t&&t.length&&(n=n.concat(e.getCustomerTemplate)),u.Fs.save({getCustomerTemplate:n}),n}(),getUserCommonInfo:u.Fs.load("getUserCommonInfo"),getProductInfo:function(t){var n=u.Fs.load("getProductInfo");return 1===(null===(t=e.getProductInfo)||void 0===t?void 0:t.length)&&n.push(e.getProductInfo[0]),u.Fs.save({getProductInfo:n}),n}()};t.optid.forEach((function(e,n){var r,i=o.findIndex((function(t){return t.resourceId==e})),a=o[i],c=a.passengerModal||{};if((0,x.ZP)({optid:[e],count:[t.count[n]],boxMap:{}},p,c,null,{groupItems:l.group,name:"\u6e38\u5ba2",isAddition:!0,passengerList:s}),(0,P.ZP)({optid:[e],count:[t.count[n]]},p,c),null!==(r=c.contactInfo)&&void 0!==r&&r.contact){var u,h,f,g=(null===(u=c.contactInfo.contact)||void 0===u?void 0:u.filter((function(e){return![1,2,6].includes(e.mode)})))||[];if(g=g.filter((function(e){return 3!==e.mode&&4!==e.mode})),d&&null!==c&&void 0!==c&&null!==(h=c.contactInfo)&&void 0!==h&&null!==(h=h.contact)&&void 0!==h&&h.some((function(e){return 3==e.mode})))null===l||void 0===l||null===(f=l.contactInfo)||void 0===f||null===(f=f.contact)||void 0===f||f.forEach((function(e){4==e.mode&&e.mode}));c.contactInfo.contact=g}a.passengerModal=c,o[i]=a}))}return{resources:o,CpassengerModal:l}},se=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,l,d,f,m,v,_,y,x,b,Z,I,C,k,w,P,L,N,j,D,E,R,A,F,M,O,B,G,z;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.header,l=n.state,d=l.request,f=l.passengerModal,m=l.sku,v=l.passengerList,_=l.additionalSale,y=(0,i.Z)({},d),y.additionCount=[],y.additionOptid=[],x=[],t.map((function(e){y.additionCount.push(Number(e.count)),y.additionOptid.push(Number(e.id)),d.productInfo[e.id]||x.push(e.id)})),!d.additionCount&&(d.additionCount=[]),!d.additionOptid&&(d.additionOptid=[]),b=d.additionOptid.filter((function(e){return!y.additionOptid.includes(e)})),d.additionOptid.length==y.additionOptid.length&&d.additionOptid.every((function(e){return y.additionOptid.includes(e)}))){e.next=32;break}return r(),Z=g(y,m,n),I=[],x.length&&(C={optid:x,date:d.date},I.push((0,p.Z)(C,a,"booking","booking")),I.push((0,S.Z)(C,a)),I.push((0,h.Z)(y,a,m,_))),e.next=17,n.http({list:I,needDevTrace:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4fee\u6539\u9644\u52a0\u552e\u5356\u4efd\u6570\u89e6\u53d1"}});case 17:return k=e.sent,w={getProductInfo:k[0]?k[0].productInfos:null,getCustomerTemplate:function(){return k[1]&&k[1].customerTemplates&&x.map((function(e,t){k[1].customerTemplates[t].resourceId=e})),k[1]?k[1].customerTemplates:null}(),getSalesPromotion:k[2]},w.getSalesPromotion&&u.Fs.save({getSalesPromotion:w.getSalesPromotion}),P=c.Z.getFormatByModules(y,w,["productInfo","coupon"],{sku:m,request:d,couponParams:Z,additionalSale:_},[].concat(x)),(0,V.rC)(v,w.getCustomerTemplate,{},y.additionOptid),L=(0,T.I8)(_),N=ae(w,{count:y.additionCount,optid:y.additionOptid},{passengerModal:f,passengerList:v,resources:L.resources,minusResource:b}),j=N.resources,D=N.CpassengerModal,L.resources=j,P.request=y,P.passengerModal=D,P.additionalSale=L,P.passengerList=v,e.abrupt("return",(0,i.Z)({footer:(0,s.aS)((0,i.Z)((0,i.Z)({},l),P))},P));case 32:return E={},R={},r(),R=g(y,m,n),A=[(0,h.Z)(y,a,m,_)],e.next=39,n.http({list:A,needDevTrace:!0,devTraceData:{attrs:n.devTraceKeyData,scene:"[Action]\u4fee\u6539\u9644\u52a0\u552e\u5356\u4efd\u6570\u89e6\u53d1"}});case 39:return F=e.sent,E=F[0],E&&u.Fs.save({getSalesPromotion:E}),M=c.Z.getFormatByModules(y,{getSalesPromotion:E},["coupon"],{sku:m,couponParams:R,additionalSale:_}),H(d.additionCount,y.additionCount,y.additionOptid,(function(e){var t=_.resources.find((function(t){return t.resourceId==e}));return{passengerModal:null===t||void 0===t?void 0:t.passengerModal,passengerList:v}}),{}),O=(0,T.I8)(_),B=ae({},{count:y.additionCount,optid:y.additionOptid},{passengerModal:f,passengerList:v,resources:O.resources,minusResource:b}),G=B.resources,z=B.CpassengerModal,O.resources=G,M.passengerModal=z,M.additionalSale=O,M.request=y,e.abrupt("return",(0,i.Z)({footer:(0,s.aS)((0,i.Z)((0,i.Z)({},l),M))},M));case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),le=function(e,t,n,r,o,a){var s=r&&r()||{},l=s.photographMedia,c=s.photographHeader,u=s.serviceTag,d=s.comment,p=s.productFeature,h=s.relationPoi,f=s.graphDetail,g=s.cost,m=s.addInfos,v=s.refundRule,_=s.vendorShop,y=s.ctripSale,x=s.vendorIntro,b=s.otherNote,Z=s.servicePeople,I=s.merchantRecommend,C=s.recommend,k=s.guarantee,w=s.media,T=s.productInfo,S=s.itinerary,P=s.proIntroSafeTip,L=s.guideInfov2,N=(s.driverInfo,s.driverInfov2),j=s.teamAndDriver,D=s.pickUpAddress,V=(s.deposit,s.device),E=s.usage,R=s.productIntro,A=s.travelNotes,F=s.travelGuide,M=s.bookingRestrictions,O=s.showMedia,B=s.dateInfo,G=s.addressInfo,H=s.riskTip,z=s.pickUpRange,U=s.guidePackage,q=s.floatBar,W=s.tutorialArticle,K=s.productIntroV2,J=s.brandBanner,X=s.poiWindow,Q=s.productNameCamping,$=s.recommendActivity,Y=s.viatorItinerary,ee=s.guideFormwork,te=s.bigMainPicAndTitle,ne=s.priceAndTag,re=s.simpleComment,oe=s.tabmainpic,ie=s.namepricetag,ae={};return null===n||void 0===n||n.forEach((function(n){var r;switch(n){case"photographMedia":r=l()(t,o);break;case"bigmainpic":r=l()(t,o);break;case"bigmainpicandtitle":r=te()(t,o);break;case"priceandtag":r=ne()(t,o);break;case"simplecomment":r=re()(e,t,o);break;case"productname":r=T()(e,t,o);break;case"poiwindow":r=X()(e,t,o);break;case"productnamecamping":r=Q()(e,t,o);break;case"photographHeader":case"guideHeader":case"guideTitleHeader":r=c()(e,t,o);break;case"serviceTag":r=u()(e,t,o);break;case"tutorialArticle":r=W()(e,t,o);break;case"comment":r=d()(e,t,o);break;case"productFeature":r=p()(t);break;case"graphDetail":r=f()(t,o);break;case"cost":r=g()(e,t,a);break;case"expiryDate":r=m()(e,t,"EffectiveDate");break;case"usage":r=E()(t,a);break;case"serviceLang":r=m()(e,t,"ServerLocale");break;case"refundRule":r=v()(t);break;case"vendorShop":r=_()(e,t);break;case"ctripSale":r=y()(t);break;case"vendorIntro":r=x()(t);break;case"otherNote":r=b()(t);break;case"safeTip":case"proIntroSafeTip":r=P()(t);break;case"servicePeople":r=Z()(t);break;case"merchantRecommend":r=I()(t);break;case"recommend":r=C()(e,t);break;case"guarantee":r=k()(o);break;case"productIntroduction":r=m()(e,t,"ProductIntroduction");break;case"productIntro":r=R()(t,a);break;case"media":r=w()(e,t);break;case"newindex":r=(0,i.Z)((0,i.Z)((0,i.Z)({},w()(e,t)),T()(e,t,o)),u()(e,t,o));break;case"productInfo":r=T()(e,t,o);break;case"itinerary":r=S()(t,e,a,o);break;case"relationPoi":r=h()(t);break;case"guideInfoV2":r=L()(t,o);break;case"driverInfoV2":r=N()(t);break;case"teamanddriver":r=j()(t);break;case"pickUpAdr":r=D()(t);break;case"device":r=V()(t);break;case"deposit":r=m()(e,t,"DepositInfo");break;case"travelNotes":r=A()(t,a);break;case"travelGuide":r=F()(t,a);break;case"bookingRestrictions":r=M()(t,a);break;case"showMedia":r=O()(e,t);break;case"dateInfo":r=B()(e,t);break;case"addressInfo":r=G()(e,t);break;case"riskTip":r=H()(t);break;case"pickUpRange":r=z()(t,e);break;case"package":r=U()(t,e,o,a);break;case"guideFormwork":r=ee()(t,e,o,a);break;case"floatBar":r=q()(t,e);break;case"productIntroV2":r=K()(t,e,o,a);break;case"banner":r=J()(t,e,o,a);break;case"recommendActivity":r=$()(t,e,o,a);break;case"viatoritinerary":r=Y()(t,o);break;case"tabmainpic":r=oe()(t,o);break;case"namepricetag":r=ie()(t,o);break}r&&Object.keys(r).length&&(ae[n]=r)})),ae},ce=n(56569),ue=n(2446),de=n(57042),pe=n(24460),he=n(21867),fe=n(86066),ge=(n(90201),n(56034)),me=n(72747),ve=n(81876),_e=n(45023),ye=n(57113),xe=n(35409),be=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){return(0,de.Z)(this,n),t.apply(this,arguments)}return(0,pe.Z)(n)}(ge.ZP),Ze=n(9353),Ie=n(17366),Ce=ce.Db.get("window"),ke=ce.Db.get("window"),we=ke.height,Te=(Ce.height,{m_module_header:{zIndex:0},m_module_header_product_info:{zIndex:101},m_banner_icon:{right:12,marginTop:-6},m_bg:{width:"100%",zIndex:0},m_header:{display:"flex",flexDirection:"column",zIndex:1,height:"auto"},diamond_bg:{background:"linear-gradient(-269.99deg, rgb(255, 239, 214) 0%, rgb(245, 215, 166) 100%)"},m_p_1:{marginRight:0,marginTop:-1},m_h_txt:{marginRight:0,alignSelf:"auto"},m_h_symbol:{marginTop:3,lineHeight:(0,Ie.Nv)(10)},m_header_b:{display:"flex",lineHeight:(0,Ie.Nv)(10),marginTop:5},m_tag_item:{borderStyle:"solid",lineHeight:15,border:"none"},m_title_area:{paddingBottom:1},m_header_t:{display:"flex",height:19},m_info_t:{display:"flex"}}),Se=((0,Ie.Vh)(13),(0,ce.NS)()&&(0,ce.cY)()?(0,Ie.Vh)(84):(0,Ie.Vh)(70),(0,Ie.Nv)((0,Ie.Vh)(12)),(0,Ie.Nv)(12),{m_title:{flexShrink:0}}),Pe={m_table:{borderWidth:0},m_td:{flexDirection:"column",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0},m_time:{top:-4,zIndex:10},m_help:{position:"relative",top:3}},Le=((0,Ie.Nv)(47),(0,i.Z)({width:320,textAlign:"center"},(0,Ie.Sf)(1)),{m_wrap:{marginRight:12,marginLeft:12,marginBottom:55},m_item:{display:"flex",marginTop:16,flexDirection:"row",alignItems:"flex-start"},m_title:(0,i.Z)({color:"#666666",fontSize:13,width:68,lineHeight:19},Se.m_title),m_desc:{color:"#333333",fontSize:13,flexShrink:1,lineHeight:19},m_tip:{display:"flex",color:"#999999",fontSize:12,marginTop:17}}),Ne=(0,Ze.Z)(Le),je=n(2269),De=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){return(0,de.Z)(this,n),t.apply(this,arguments)}return(0,pe.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.contents,n=e.tip;return t&&t.length?(0,je.jsxs)(me.G7,{style:Ne.m_wrap,children:[t.map((function(e){return(0,je.jsxs)(me.G7,{style:Ne.m_item,children:[e.title?(0,je.jsx)(me.xv,{style:Ne.m_title,children:e.title}):null,e.desc?(0,je.jsx)(me.xv,{style:Ne.m_desc,children:e.desc}):null]})})),(0,je.jsx)(me.xv,{style:Ne.m_tip,children:n})]}):null}}]),n}(be),Ve=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){return(0,de.Z)(this,n),t.apply(this,arguments)}return(0,pe.Z)(n)}(ge.ZP),Ee={m_wrap:{marginRight:12,marginLeft:12,marginBottom:55},m_item:{display:"flex",marginTop:16,flexDirection:"row",alignItems:"flex-start"},m_title:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},m_title_icon:{width:48,height:48},m_title_text:{marginLeft:-48,fontSize:18,fontWeight:"700",color:"#333"},m_title_text_left:{marginLeft:0},m_table_container:{},m_table_title:{color:"#333",fontSize:16,fontWeight:"700"},m_table_content:{marginTop:20,marginBottom:20},m_table_content_top:{marginTop:10},m_gray_text:{fontSize:13}},Re=(0,Ze.Z)(Ee),Ae=n(75014),Fe=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){return(0,de.Z)(this,n),t.apply(this,arguments)}return(0,pe.Z)(n,[{key:"render",value:function(){var e=this.props.contents;return e&&e.length?(0,je.jsx)(me.G7,{style:Re.m_wrap,children:e.map((function(e){var t;return(0,je.jsxs)(je.Fragment,{children:[(0,je.jsxs)(me.G7,{style:Re.m_title,children:[e.icon?(0,je.jsx)(me.Ee,{url:e.icon,style:Re.m_title_icon}):null,e.title?(0,je.jsx)(me.xv,{style:(0,i.Z)((0,i.Z)({},Re.m_title_text),e.icon?{}:Re.m_title_text_left),children:e.title}):null]}),null===e||void 0===e||null===(t=e.tableList)||void 0===t?void 0:t.map((function(e){return(0,je.jsxs)(me.G7,{style:Re.m_table_container,children:[(0,je.jsx)(me.xv,{style:Re.m_table_title,children:e.tableTitle}),(0,je.jsx)(me.G7,{style:(0,i.Z)((0,i.Z)({},Re.m_table_content),Re.m_table_content_top),children:(0,je.jsx)(Ae.Z,{tableData:e.tableData,fstyle:{m_gray_text:Re.m_gray_text}})})]})}))]})}))}):null}}]),n}(Ve),Me=n(64571),Oe=function(){},Be=n(61252),Ge=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(e){var r;return(0,de.Z)(this,n),r=t.call(this,e),(0,_e.Z)((0,ve.Z)(r),"state",void 0),r.onChangeTab=r.onChangeTab.bind((0,ve.Z)(r)),r.state={currentKey:"normal"},r}return(0,pe.Z)(n,[{key:"onLinkPress",value:function(e,t){var n=Me.ZP.user.isLogin();n?t&&this.push(t):Me.ZP.user.login({})}},{key:"bindDepositInfoLinkEvent",value:function(){Oe.apply(this)}},{key:"componentDidMount",value:function(){this.registerPoplayer()}},{key:"registerPoplayer",value:function(){ye.Z.add("localTime",xe.Z,{props:{isOpened:!1}}),ye.Z.add("tablePoplayer",xe.Z,{props:{isOpened:!1}})}},{key:"onLocalTime",value:function(e){var t=e||{},n=t.tableData,r=n||{},o=r.localTime;this.onShowPop(o)}},{key:"onShowPop",value:function(e){var t=e||{},n=t.contents,r=t.title,o=ce.Db.get("window").height;ue.ZP.show({props:{name:"localTime",title:r,minHeight:.4*o,maxHeight:.8*o,scrollHeight:"100%",zIndex:200},child:De,childProps:{contents:(n||[]).map((function(e){return{desc:e&&e.text}}))}})}},{key:"showPoplayer",value:function(e){var t=e||{},n=t.contents,r=t.title,o=ce.Db.get("window").height;ue.ZP.show({props:{name:"tablePoplayer",title:r,minHeight:.4*o,maxHeight:.8*o,scrollHeight:"100%"},child:Fe,childProps:{contents:n}})}},{key:"onClickMore",value:function(){var e=this.props.onRefundPop;e&&e()}},{key:"onClickAppend",value:function(e){var t,n=this.props.appendTextLog,r=void 0===n?[]:n,o=e||{},i=o.url,a=o.poplayerData,s=o.logType;s&&(t=null===r||void 0===r?void 0:r.find((function(e){return e.type===s}))),t&&t.log&&this.sendLog(t.log),a?this.onShowPop(a):i&&this.push(i)}},{key:"sendLog",value:function(e){if("function"==typeof e&&(e=e()),e){var t=e,n=t.params,r=t.type;(0,Be.Zz)(n,r)}}},{key:"onChangeTab",value:function(e){this.setState({currentKey:e.name})}}]),n}(ge.ZP),He={m_module_white:{marginLeft:12,marginRight:12,marginBottom:12,borderRadius:8,overflow:"hidden",backgroundColor:"#ffffff"},m_module_gray:{marginBottom:12},m_module_no:{},m_module_header:(0,i.Z)({marginBottom:12},Te.m_module_header),m_module_header_product_info:(0,i.Z)({marginBottom:12},Te.m_module_header_product_info),m_module_header_h5:{zIndex:6},m_detail_container:{paddingLeft:12,paddingRight:12,paddingBottom:6},m_detail_title:{fontWeight:"bold",color:"#333333",fontSize:18,height:46,lineHeight:(0,Ie.Nv)(46)}},ze=(0,Ze.Z)(He),Ue={m_d_title:{display:"flex",flexDirection:"row",alignItems:"center"},m_img:{width:12,height:12,marginRight:6},m_icon:{marginRight:6},m_subTitle:{fontSize:14,color:"#333333",fontWeight:"bold",marginBottom:8,lineHeight:(0,Ie.Nv)(20)},m_item:{marginBottom:8,display:"flex",flexDirection:"column"},m_item_last:{marginBottom:0},m_table:{marginBottom:10},m_container:{marginBottom:8},m_text:{fontSize:14,lineHeight:(0,Ie.Nv)(21),marginBottom:8},m_t_title:{fontWeight:"bold",color:"#333333"},m_t_content:{color:"#333333"},m_t_lightContent:{color:"#666666"},m_time:(0,i.Z)({flexDirection:"row",top:-2},Pe.m_time),m_time_text:{fontSize:14,color:"#999999"},m_desc_text:{fontSize:14,color:"#0086F6"},m_app:{display:"flex",flexDirection:"row"},m_app_t:{color:"#007FE9"},m_help:(0,i.Z)({top:1,marginLeft:1},Pe.m_help),m_detail_title_click_wrapper:{}},qe=(0,Ze.Z)({p:{marginTop:0,marginBottom:8,fontSize:14,lineHeight:(0,Ie.Nv)(20),color:"#333333"},a:{color:"#007FE9",textDecorationLine:"none"}}),We=(0,Ze.Z)({m_table:(0,i.Z)({},Pe.m_table),m_td_extra:{display:"flex",flexDirection:"row",alignItems:"center",flex:1},m_td:(0,i.Z)({display:"flex",boxSizing:"border-box"},Pe.m_td)}),Ke=(0,Ze.Z)({m_wrap:{paddingBottom:(0,Ie.Vh)(12)}}),Je=(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},(0,Ie.yp)((0,Ie.Vh)(6))),(0,Ie.WB)((0,Ie.Vh)(10))),(0,Ie.E0)(4)),(0,Ie.Cg)({width:(0,Ie.Vh)(.5),color:"#f2f8fe"})),{},{minWidth:(0,Ie.Vh)(45),backgroundColor:"#f2f8fe",marginLeft:0,marginRight:(0,Ie.Vh)(12),display:"flex",justifyContent:"center"}),Xe={color:"#333",fontSize:(0,Ie.Vh)(13)},Qe={color:"#0086f6"},$e=(0,Ze.Z)(Ue),Ye=n(50738),et=n(86865),tt=n(50221),nt=n(70943),rt=n(59201),ot=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){var e;(0,de.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,_e.Z)((0,ve.Z)(e),"openCompare",!0),e}return(0,pe.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.list,o=t.fstyle,i=void 0===o?{}:o,a=t.imgUrl,s=t.icon,l=t.logD,c=t.needTitle,u=void 0===c||c,d=t.specialList,p=t.tabList,h=t.clickText,f=t.useIcon,g=l||{},m=g.expo,v=void 0===m?{}:m,_=(0,Ie.Ec)($e,i),y=this.state.currentKey;return r&&r.length?(0,je.jsxs)(me.G7,{style:(0,Ie.wh)([ze.m_detail_container,_.m_detail_container]),testID:(0,Ye.kI)(v.key,v.params),children:[u&&n?(0,je.jsxs)(me.G7,{style:_.m_d_title,children:[a&&!f?(0,je.jsx)(me.Ee,{url:a,style:_.m_img}):s?(0,je.jsx)(me.JO,{type:s||"hook",color:"#0086f6",className:"icon",size:28,style:_.m_icon}):null,(0,je.jsx)(me.xv,{style:(0,Ie.wh)([ze.m_detail_title,_.m_detail_title]),children:n}),!!h&&(0,je.jsx)(rt.Z,{style:_.m_detail_title_click_wrapper,onClick:this.onClickMore.bind(this),children:(0,je.jsx)(me.xv,{style:(0,Ie.wh)([ze.m_detail_title,_.m_detail_title,_.m_detail_title_click]),children:h})})]}):null,null!==d&&void 0!==d&&d.length?(0,je.jsx)(nt.Z,{tabs:p,fstyle:Ke,itemStyle:Je,textStyle:Xe,textActiveStyle:Qe,onChangeTab:this.onChangeTab}):null,("normal"===y?r:d).map((function(t,n){return t&&t.contents&&t.contents?(0,je.jsxs)(me.G7,{style:(0,Ie.wh)([_.m_item,_[n==r.length-1?"m_item_last":""]]),children:[t.title?(0,je.jsx)(me.xv,{style:_.m_subTitle,children:t.title}):null,t.contents.map((function(t){return t?t.type==et.g.table?e.renderTable(t):e.renderDesc(t):null}))]}):null}))]}):null}},{key:"renderTable",value:function(e){var t=this,n=this.props.fstyle,r=(0,Ie.Ec)($e,n),o=e||{},i=o.tableData,a=i||{},s=a.data;return s?(0,je.jsx)(me.G7,{style:r.m_table,children:(0,je.jsx)(Ae.Z,{tableData:s,fstyle:We,CellExtra:function(){return(0,je.jsxs)(me.Au,{style:r.m_time,onClick:t.onLocalTime.bind(t,e),children:[(0,je.jsx)(me.xv,{style:r.m_time_text,children:"(\u5f53\u5730\u65f6\u95f4)"}),(0,je.jsx)(me.JO,{type:"help",color:"#0086F6",size:32,style:r.m_help})]})},CellPoplayer:function(e){var n=e.poplayerTableData,o=e.poplayerDesc;return(0,je.jsx)(me.Au,{style:r.m_time,onClick:t.showPoplayer.bind(t,n),children:(0,je.jsx)(me.xv,{style:r.m_desc_text,children:o})})}})}):null}},{key:"renderDesc",value:function(e){var t=this.props.fstyle,n=(0,Ie.Ec)($e,t),r=e||{},o=r.descData,a=o||{},s=a.content,l=a.isHtml,c=a.appendText;return s?l?(0,je.jsx)(me.G7,{style:n.m_container,children:(0,je.jsx)(tt.Z,{html:s,baseFontStyle:(0,i.Z)((0,i.Z)({},n.m_text),n["m_t_".concat(o.styleType||"content")]),tagsStyles:qe,onLinkPress:this.onLinkPress.bind(this),ignoredStyles:["line-height","font-size","font-family","width","height"],listsPrefixesRenderers:{ul:function(){return null}},className:"buy-note ".concat(o.styleType||"content"),bindExtraEvent:this.bindDepositInfoLinkEvent.bind(this)})}):(0,je.jsxs)(me.G7,{style:n.m_app,children:[(0,je.jsxs)(me.aA,{style:(0,Ie.wh)([n.m_text,n["m_t_".concat(o.styleType||"content")]]),children:[(0,je.jsx)(me.xv,{children:s}),null!==c&&void 0!==c&&c.text?(0,je.jsx)(me.aA,{onPress:this.onClickAppend.bind(this,c),onClick:this.onClickAppend.bind(this,c),children:(0,je.jsx)(me.xv,{style:n.m_app_t,children:c.text})}):null]}),null!==c&&void 0!==c&&c.icon?(0,je.jsx)(me.Au,{onClick:this.onClickAppend.bind(this,c),children:(0,je.jsx)(me.JO,{type:c.icon,color:"blue"==(null===c||void 0===c?void 0:c.styleType)?"#0086F6":"#666666",size:26,style:{marginLeft:3,top:4}})}):null]}):null}}]),n}(Ge),it=function(e){(0,he.Z)(n,e);var t=(0,fe.Z)(n);function n(){return(0,de.Z)(this,n),t.apply(this,arguments)}return(0,pe.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.module,n=e.data;return(0,je.jsx)(me.G7,{children:t.map((function(e){if(e&&n[e])return(0,je.jsx)(ot,(0,i.Z)({},n[e]))}))})}}]),n}(ge.ZP),at=.8*ce.Db.get("window").height-ce.iO,st=function(){return{addInfos:function(){return n(6714).Z},cost:function(){return n(5824).ZP},refundRule:function(){return n(88747).Z},servicePeople:function(){return n(96360).Z},otherNote:function(){return n(88334).Z},usage:function(){return n(49100).ZP}}},lt=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,l,c,u,d,h;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.header,s=r.state,l=s.request,c=[(0,p.Z)({productId:t,needParams:["needAddInfos","needBasicInfo"]},a,"detail")],e.next=5,r.http({list:c,needDevTrace:!0,devTraceData:{attrs:r.devTraceKeyData,scene:"[Action]\u83b7\u53d6\u9644\u52a0\u552e\u5356\u8d2d\u4e70\u987b\u77e5\u4fe1\u606f"}});case 5:u=e.sent,d={getProductInfo:null===(i=u[0])||void 0===i?void 0:i.productInfos},h=le(l,d,n,st),ue.ZP.show({props:{name:"productBuyNote",title:"\u8d2d\u4e70\u987b\u77e5",maxHeight:at,scrollHeight:at-44},child:it,childProps:{module:n,data:h}});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ct=n(94765),ut=function(e,t){},dt=function(){},pt=n(79214),ht=function(e,t,n,r,o){var i=[],a=o.valueType,s=o.appendInfoList;if(a===pt.H.radio||s)i=s;else{var l=e.state.appendInfoList;i=l}return i},ft=n(19524),gt=function(e){var t=e.passengerModal,n=e.passengerList,r=t.contactInfo,o=t.group,i=r||{},a=i.contact,s=void 0===a?[]:a;if(1==o.length&&1==o[0].choice){var l=n.find((function(e){return e.PassengerID==o[0].dChoice[0]})),c=l||{},u=c.MobilePhone,d=c.CountryCode,p=c.ContactEmail,h=s.some((function(e){return e.mode==ft.$.areaCodeMobile})),f={mobile:u};p&&(f.email=p),h&&d&&(f.areaCode=d);var g=X(f,e);return g}}},62878:function(e,t,n){var r=n(79301),o=n(95308),i=n(70501),a=n(15318),s=n(84578),l=n(86685);t["Z"]=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o,c,u,d){var p,h,f,g,m,v,_,y,x,b,Z,I,C,k;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isBookingRefresh=n,p=!o&&!n,!p){e.next=8;break}if(!t.changeKey){e.next=7;break}return e.abrupt("return");case 7:t.changeKey=Math.random();case 8:if(h=d||{},f=h.state,g=h.updateCouponCode,m=f||t.state,v=m.request,_=m.sku,y=m.coupon,x=m.additionalSale,b=t.header,Z=[],!n){e.next=18;break}return I=[(0,a.Z)(v,t.header,_,x)],e.next=16,t.http({list:I,needDevTrace:!0,devTraceData:{attrs:t.devTraceKeyData,scene:"[Action]\u83b7\u53d6\u4fc3\u9500\u7acb\u51cf"}});case 16:Z=e.sent,Z[0]&&s.Fs.save({getSalesPromotion:Z[0]});case 18:!o||u?(k=(null===y||void 0===y?void 0:y.couponParams)||{},C=i.Z.getFormatByModules(v,{getSalesPromotion:Z[0]},["coupon"],{sku:_,header:b,couponParams:k,couponRefreshInfo:{isBookingRefresh:n,couponData:c,beforeCoupon:y,updateCouponCode:g},additionalSale:x})):C=c,o&&o!=t.changeKey||(0,l.K2)(t,{key:"coupon",value:C},o||t.changeKey,o&&!u?["booking","coupon"]:["coupon"],(function(){}),{isFirstInitCoupon:p});case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}()},55242:function(e,t,n){n.d(t,{h:function(){return l}});var r=n(79301),o=n(95308),i=n(32500),a=n(75833),s=n(96082),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o,l){var c,u,d,p,h,f,g,m,v,_,y,x,b,Z,I,C,k,w,T,S;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=n.getUserCommonInfo,n.getProductInfo,d=o.showList,p=o.contactInfo,h=o.group,f=void 0===h?[]:h,g=null===(c=f[0])||void 0===c?void 0:c.notFullList,m=l,!(u&&u.CommonPassengerInfo&&u.CommonPassengerInfo.CommonPassengerList&&f[0])){e.next=34;break}v=u.CommonPassengerInfo.CommonPassengerList.filter((function(e){return d.includes(e.PassengerID)})),v.sort((function(e,t){return d.indexOf(e.PassengerID)-d.indexOf(t.PassengerID)})),_=v.length,y=[],x=[],b=t.optid[0],Z=""+b,t.boxMap[t.optid[0]]&&t.boxMap[t.optid[0]].length&&(b=t.boxMap[t.optid[0]][0].resourceId,Z=(0,a.jX)(t.optid[0],b)),I=(0,r.Z)().mark((function e(){var n,o,a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==g&&void 0!==g&&g.includes(d[C])||(n=(0,i.W)(v[C],Z),o=1==f[0].fillInNumberLimit?t.count[0]:1,a=f[0].resourceIdList.map((function(e){return{quanty:o||1,useDate:t.date||t.minDate||"",resourceId:e,passengers:n,parentResourceId:f[0].boxId?f[0].boxId:null}})),y.push(a),x.push(v[C].PassengerID));case 1:case"end":return e.stop()}}),e)})),C=0;case 15:if(!(C<_)){e.next=20;break}return e.delegateYield(I(),"t0",17);case 17:C++,e.next=15;break;case 20:if(!y.length){e.next=34;break}return e.next=23,(0,s.Z)(y,(null===p||void 0===p?void 0:p.mobile)||"",(null===p||void 0===p?void 0:p.email)||"");case 23:k=e.sent,m=(0,i.Z)(x,k,l,b),w=0;case 26:if(!(w<y.length)){e.next=34;break}if(T=k&&k[w].hasOwnProperty("data")&&""==k[w].data,S=k&&k[w].hasOwnProperty("data")&&k[w].data.code,!(k&&k[w].result||T||S)){e.next=31;break}return e.abrupt("return",{dChoice:[x[w]],passengerCheckErrList:m});case 31:w++,e.next=26;break;case 34:return e.abrupt("return",{dChoice:[],passengerCheckErrList:m});case 35:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},31431:function(e,t,n){n.d(t,{aS:function(){return p},RI:function(){return d},b0:function(){return h},F5:function(){return f}});var r=n(298),o=n(88327),i=n(73435),a=function(e,t,n,r){var o=0,a=0,l=0,c=0,u="",d={total:{name:"\u4f18\u60e0",price:""},items:[]},p={name:"",price:""},h=0,f=e||{},g=f.discountDataList,m=void 0===g?[]:g,v=f.discountList,_=void 0===v?[]:v,y=f.cashBackList,x=void 0===y?[]:y;if(!m.length&&!_.length&&!x.length&&!n.length&&!r.length)return{price:o,deductDesc:u,popItems:d,bottom:p};n.forEach((function(e){var t=e.price;t>0&&(o=(0,i.IH)(o,t),h=(0,i.IH)(h,t),d.items.push({name:e.name,price:"-\xa5".concat(t),isDiscount:!0}))})),r.forEach((function(e){var t=e.price;t>0&&(o=(0,i.IH)(o,t),h=(0,i.IH)(h,t),d.items.push({name:e.name,price:"-\xa5".concat(t),isDiscount:!0}))})),m.forEach((function(e){c=e.amount,c>0&&(o=(0,i.IH)(o,c),d.items.push({name:e.discountName||"\u4f18\u60e0\u5238",price:"-\xa5".concat(c),isDiscount:!0}))})),_.forEach((function(e){e.isSelect&&(l=(0,i.IH)(l,e.amount),o=(0,i.IH)(o,e.amount),d.items.push({name:e.discountDesc||"\u7acb\u51cf",price:"-\xa5".concat(e.amount),descs:e.discountSubDesc?[e.discountSubDesc]:[],isDiscount:!0}))})),x.forEach((function(e){e.isSelect&&(a=(0,i.IH)(a,e.amount),a>0&&(p={name:"\u53ef\u4eab\u70b9\u8bc4\u5956\u52b1",price:"\xa5".concat(a)}))}));var b=s(t,a,l,c,h);u=b.deductDesc;var Z=b.disPrice;return o>0&&(d.total.price="-\xa5".concat(o)),{price:Math.min(t,o),deductDesc:u,popItems:d,bottom:p,deductAmount:(0,i.IH)(l,c),rebateAmount:a,reduceAmount:h,disPrice:Z}};function s(e,t,n,r,o){var a="",s=Math.min(Math.max((0,i.IH)((0,i.IH)(n,r),o),0),e);return t>0&&s>0?a="\u5df2\u4f18\u60e0\xa5".concat(s,",\u53ef\u4eab\u8fd4\u73b0\xa5").concat(t):t>0&&s<=0?a="\u53ef\u4eab\u8fd4\u73b0\xa5".concat(t):t<=0&&s>0&&(a="\u5df2\u4f18\u60e0\xa5".concat(s)),{deductDesc:a,disPrice:s}}var l=n(33031),c=n(61252),u=function(e){return{currency:"\xa5",total:"--",nextTitle:e||"\u53bb\u652f\u4ed8"}},d=function(e){return{nextTitle:e||"\u53bb\u652f\u4ed8"}},p=function(e){if(null==e||e.isSaleOut)return u();var t=e.request,n=e.sku,r=e.insurance,s=e.reservationTerms,d=e.coupon,p=e.additionalSale;if(n||(0,c.gp)({body:{title:"\u8ba1\u7b97\u4ef7\u683c\u65f6 sku \u4e3a\u7a7a",type:"info",request:t}}),!t||!n)return u();if((null===t||void 0===t||!t.date)&&n&&"S"===n.priceMode){var h=u(n.reservation?"\u53bb\u9884\u7ea6":"\u53bb\u652f\u4ed8");return t.date||(h.otherDesc="\u8bf7\u9009\u62e9\u4f7f\u7528\u65e5\u671f",h.otherDescColor="#111"),h}var f=t.count,g=t.date,m=t.optid,v=t.additionOptid,_=t.additionCount;if(0==f.length||""==g){var y=u(null!==n&&void 0!==n&&n.reservation?"\u53bb\u9884\u7ea6":"\u53bb\u652f\u4ed8");""==g&&(y.otherDesc="\u8bf7\u9009\u62e9\u4f7f\u7528\u65e5\u671f",y.otherDescColor="#111")}var x=0,b=0,Z=0,I=[],C=[],k=[],w=[],T=null,S={},P=(0,l.qm)(t,r)&&!t.needMark,L={currency:"\xa5",total:function(){var e=0,s=n.calendar.find((function(e){return e.date==g})),l=s||{},c=l.resources,u=void 0===c?[]:c,h=n.resources,y=!0;if(h.map((function(t){for(var n=function(n){if(t.mixedIds.includes(m[n])){var r=u.find((function(e){return e.resourceId==m[n]}));if(r){y=!1;var o=Number(r.marketPrice),a=Number(r.salePrice),s=(0,i.lu)(o,a),l=s>0?s:0,c=(0,i.dC)(f[n]||0,l);I.push({name:r.resourceName,price:"\xa5".concat(a," x").concat(f[n]),marketPrice:l?"\xa5".concat(o," x").concat(f[n]):""}),e=(0,i.IH)(e,(0,i.dC)(f[n]||0,Number(o||a))),l&&C.push({name:"\u3010".concat(r.resourceName,"\u3011\u643a\u7a0b\u9884\u8ba2\u6bcf\u4efd\u51cf\xa5").concat(l),price:c})}return 1}},r=0;r<m.length;r++)if(n(r))break})),y)return"--";x=e,(v||[]).forEach((function(e,t){var n,r=null===p||void 0===p||null===(n=p.resources)||void 0===n?void 0:n.find((function(t){return t.resourceId==e}));if(r){var o=Number(r.marketPrice||0),a=Number(r.salePrice),s=(0,i.lu)(o,a),l=s>0?s:0,c=(0,i.dC)(_[t]||0,l);w.push({name:r.resourceName,price:"\xa5".concat(a," x").concat(_[t]),marketPrice:l?"\xa5".concat(o," x").concat(_[t]):""}),Z=(0,i.IH)(Z,(0,i.dC)(_[t]||0,Number(o||a))),l&&k.push({name:"\u3010".concat(r.resourceName,"\u3011\u643a\u7a0b\u9884\u8ba2\u6bcf\u4efd\u51cf\xa5").concat(l),price:c})}})),e=(0,i.IH)(e,Z),S=a(d,e,C,k);var P=(0,i.lu)(e,S.price);if(t.insuranceId&&r){var L=r||{},N=L.isCancelInsurance,j=N?1:(0,o.Wy)(t);b=(0,i.dC)(j,Number(r.insuranceInfo.price)),P=(0,i.IH)(P,b),T={total:{name:"\u4fdd\u9669",price:"\xa5"+b},items:[{name:r.insuranceInfo.name,price:"\xa5".concat(r.insuranceInfo.price," x").concat(j)}]}}return e=P>0?P:0,"".concat(e)}(),deductDesc:S.deductDesc,deductAmount:S.price,rebateAmount:S.rebateAmount,disPrice:S.disPrice,reduceAmount:S.reduceAmount,nextTitle:P?"\u4e0b\u4e00\u6b65":null!==n&&void 0!==n&&n.reservation?"\u53bb\u9884\u7ea6":"\u53bb\u652f\u4ed8",nextDesc:P?"\u6838\u5bf9\u4fdd\u9669+\u652f\u4ed8":""};return L.footPop={title:"\u91d1\u989d\u660e\u7ec6",content:function(){var e=[],t={total:{name:(null===s||void 0===s?void 0:s.title)||"",price:"\xa5"+x},items:I};return e.push(t),w.length>0&&e.push({total:{name:"\u8d85\u503c\u642d\u914d",price:"\xa5"+Z},items:w}),T&&e.push(T),S.price>0&&e.push(S.popItems),e}(),bottom:S.bottom||{},minHeightRatio:.4},L},h=function(e){var t,n=e.overdraft,r=void 0===n?{}:n,o=e.footer,i=void 0===o?{}:o;i.footPop=i.footPop||{};var a=null===(t=r.details)||void 0===t?void 0:t.find((function(e){return e.installmentIndexNum===r.currentSelectedNum}));return a?(i.otherDescList=["\u62ff\u53bb\u82b1","\u4fe1\u7528\u8d2d\u4ed8\u6b3e"],i.footPop.overdraftTips={title:"\u62ff\u53bb\u82b1",titleSuffix:"\u4fe1\u7528\u8d2d\u4ed8\u6b3e",titleTips:a.termNoSuperscript,fundDescInfo:a.fundDescInfo,firstRepayDay:a.firstRepayDay,repayAmountDesc:a.repayAmountDesc,feeDesc:a.feeDesc}):(i.otherDescList=[],i.footPop.overdraftTips=null),i},f=function(e){var t,n=e.overdraft,o=void 0===n?{}:n,a=e.footer,l=void 0===a?{}:a,c=(null===(t=o.details)||void 0===t?void 0:t.find((function(e){return e.installmentIndexNum===o.currentSelectedNum})))||{},u=l.footPop.content;l.naquhuaAmt&&u.pop(),c.discountAmt&&u.push({total:{name:"\u62ff\u53bb\u82b1\uff08\u65b0\u5ba2\u518d\u51cf\xa5".concat(c.discountAmt,"\uff09"),price:"-\xa5"+c.discountAmt,descs:["0\u9996\u4ed8,".concat(c.firstRepayDay||"","\u5f00\u59cb\u8fd8\u6b3e"),"\u8fd8\u6b3e\u65b9\u6848\uff1a".concat(c.repayAmountDesc,"\uff08").concat(c.feeDesc,"\uff09"),c.fundDescInfo||""]}});var d=(0,i.IH)(l.total||0,l.naquhuaAmt||0),p=s(l.total,l.rebateAmount,c.discountAmt||0,l.deductAmount,l.reduceAmount),h=(0,r.Z)((0,r.Z)({},l),{},{total:(0,i.lu)(d||0,c.discountAmt||0),deductDesc:p.deductDesc,disPrice:p.disPrice,footPop:(0,r.Z)((0,r.Z)({},l.footPop),{},{content:u}),naquhuaAmt:c.discountAmt});return h}},99728:function(e,t,n){n.d(t,{SR:function(){return _},qd:function(){return w},hD:function(){return T},K7:function(){return b},lJ:function(){return Z},LK:function(){return I}});var r=n(298),o=n(22276),i=n(79301),a=n(95308),s=n(45023),l=n(52066),c=n(84578),u=n(121),d=n(72126),p=n(70501),h=n(68983),f=n(64571),g="",m="",v=!1,_=function(){v=!1},y=function(){var e;if(v)return"".concat(g,"-").concat(m);v=!0;var t=(0,f.FN)(),n=(null===(e=t.router)||void 0===e?void 0:e.params)||{};return g=decodeURIComponent(n.subResourceId||""),m=decodeURIComponent(n.date||""),"".concat(g,"-").concat(m)},x=function(e){var t=(null===e||void 0===e?void 0:e.request)||{},n=t.originOptid,r=void 0===n?[]:n,o=t.sid,i=t.aid,a=t.skid,s=t.originCount,l=void 0===s?[]:s;return"".concat(r.join("|"),"-").concat(l.join("|"),"-").concat(e.isLogin,"-").concat(i,"-").concat(o,"-").concat(a,"-").concat(y())},b=function(e){var t=null===e||void 0===e?void 0:e.request,n=t.originOptid;if(null!==n&&void 0!==n&&n.length){var r=(0,s.Z)({},x(e),e);console.log("setCache",r),l.Z.set("TTD_BOOKING_CACHE_DATA",r,3600)}},Z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=x(t),e.next=3,l.Z.get("TTD_BOOKING_CACHE_DATA");case 3:return r=e.sent,e.abrupt("return",r?r[n]:null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){l.Z.clear("TTD_BOOKING_CACHE_DATA")},C=function(e,t){e||(e={});var n={};return t.map((function(t){return n[t]=e[t]})),n},k=function(e,t){var n,r,o=e.request,i=e.passengerModal,a=t.sku,s=t.passengerModal,l=t.passengerList;if(o.date){var c,d=o.optid,p=o.count,h=o.date,f=null===a||void 0===a?void 0:a.calendar.find((function(e){return e.date==h}));if(null===f||void 0===f||null===(c=f.resources)||void 0===c||!c.length)return!1;for(var g,m=function(e){var t=f.resources.find((function(t){return t.resourceId==d[e]}));if(!t||t.inventoryNum<p[e])return{v:!1}},v=0,_=d.length;v<_;v++)if(g=m(v),g)return g.v}if(!i||!s)return!1;if((null===i||void 0===i||null===(n=i.group)||void 0===n?void 0:n.length)!==(null===s||void 0===s||null===(r=s.group)||void 0===r?void 0:r.length))return!1;for(var y,x=function(){for(var e,t=i.group[b].dChoice,n=s.group[b].notFullList,r=function(e){var r=l.findIndex((function(n){return t[e]==n.PassengerID}));return r<0||n.includes(t[e])?{v:{v:!1}}:void 0},o=0;o<t.length;o++)if(e=r(o),e)return e.v;i.group[b].dChoice=[],s.group[b].dChoice=[]},b=0;b<(null===i||void 0===i?void 0:i.group.length);b++)if(y=x(),y)return y.v;var Z=["group"];return!!(0,u.vZ)(C(i,Z),C(s,Z))},w=function(e,t,n,i){var a,l=(e.passengerList||[]).filter((function(e){return e.isOperated}));if(l.forEach((function(e){return delete e.isOperated})),(a=t.passengerList).push.apply(a,(0,o.Z)(l)),k((0,u.I8)(e),(0,u.I8)(t))){var h,f,g,m=e.passengerModal,v=t.passengerModal,_=t.passengerList,y=t.request;if(m.isNewGuest=v.isNewGuest,m)if(m.contactInfo)m.contactInfo.contact=null===v||void 0===v||null===(f=v.contactInfo)||void 0===f?void 0:f.contact,m.contactInfo.mobile=null===v||void 0===v||null===(g=v.contactInfo)||void 0===g?void 0:g.mobile;else m.contactInfo=null===v||void 0===v?void 0:v.contactInfo;var x=null===m||void 0===m?void 0:m.showList,b=[];if(x&&(x.map((function(e){var t=_.findIndex((function(t){return e==t.PassengerID}));t>-1&&b.push(e)})),b.length<3&&(b=Array.from(new Set([].concat((0,o.Z)(b),(0,o.Z)(v.showList||[])))).slice(0,3))),m.showList=b,null===y||void 0===y||null===(h=y.originCount)||void 0===h||!h.length){var Z={};y.optid.forEach((function(e){var t;null!==(t=y.boxMap[e])&&void 0!==t&&t.length&&y.boxMap[e].forEach((function(e){return Z[e.resourceId]=y.productInfo[e.resourceId]})),Z[e]=y.productInfo[e]})),y.productInfo=Z}var I=c.Fs.load("cacheState"),C=(0,r.Z)((0,r.Z)((0,r.Z)({},e),{sku:t.sku,passengerList:t.passengerList,reservationTerms:t.reservationTerms,request:t.request,imInfo:t.imInfo,holiday:t.holiday,coupon:t.coupon}),{},{footer:I.footer});return c.Fs.save({cacheState:(0,r.Z)((0,r.Z)({},I),C)}),C}var w,T=c.Fs.load("originRequest"),S={couponParams:(0,d.m)(T,t.sku)},P=t.request.productInfo;1==T.optid.length&&(P=(0,s.Z)({},T.optid[0],t.request.productInfo[T.optid[0]]),null!==(w=t.request.boxMap[t.request.optid[0]])&&void 0!==w&&w.length&&t.request.boxMap[t.request.optid[0]].forEach((function(e){return P[e.resourceId]=t.request.productInfo[e.resourceId]})));var L=(0,r.Z)((0,r.Z)((0,r.Z)({},t.request),{count:T.count,date:T.date,optid:T.optid}),{},{productInfo:P}),N=p.Z.getFormatByModules(L,i,["sku","passengerModal"]);return c.Fs.save({cacheState:null}),n.toast.show("\u4ea7\u54c1\u4fe1\u606f\u53d1\u751f\u53d8\u66f4\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),(0,r.Z)((0,r.Z)({},t),{},{coupon:S,request:L},N)},T=function(e,t){var n,o,i,a,s=e.insurance,l=e.appendInfoList,u=e.additionalSale,d=e.request,p=c.Fs.load("getCustomerTemplate"),f=c.Fs.load("secondCacheData"),g=t.insurance,m=t.appendInfoList,v=void 0===m?[]:m,_=t.passengerList;if(null!==s&&void 0!==s&&null!==(n=s.insuranceInfo)&&void 0!==n&&n.id&&s.insuranceInfo.id==(null===g||void 0===g||null===(o=g.insuranceInfo)||void 0===o?void 0:o.id)&&(null===f||void 0===f?void 0:f.insuranceId)==s.insuranceInfo.id){var y,x;t.request.insuranceId=null===f||void 0===f?void 0:f.insuranceId,(0,h.rC)(_||[],p,d.boxMap||{},void 0,[Number(null===f||void 0===f?void 0:f.insuranceId)]);var b=null===s||void 0===s||null===(y=s.policyholderGroup)||void 0===y?void 0:y.dChoice;if(b&&b.length>0){var Z=null===_||void 0===_?void 0:_.findIndex((function(e){return b[0]==e.PassengerID}));Z>-1&&(g.policyholderGroup.dChoice=b)}var I=null===(x=s.insuredGroup)||void 0===x?void 0:x.dChoice;if(I&&g.insuredGroup){var C=I.filter((function(e){var t=null===_||void 0===_?void 0:_.findIndex((function(t){return e==t.PassengerID}));return t>-1}));C.length&&(g.insuredGroup.dChoice=C)}}else t.request.insuranceId="";t.insurance=g,t.appendInfoList=v.map((function(e,t){var n;return l&&l[t]&&e.resourcesId==(null===(n=l[t])||void 0===n?void 0:n.resourcesId)&&e.list.map((function(e,n){var r;null!==(r=l[t])&&void 0!==r&&r.list[n]&&(e.value=l[t].list[n].value||"")})),e}));var k=null===t||void 0===t||null===(i=t.additionalSale)||void 0===i?void 0:i.resources,w=[],T=[];return null!==f&&void 0!==f&&null!==(a=f.additionOptid)&&void 0!==a&&a.length&&k&&(f.additionOptid.forEach((function(e,t){var n=k.find((function(t){return t.resourceId==e}));if(n){var r;w.push(e),T.push((null===f||void 0===f||null===(r=f.additionCount)||void 0===r?void 0:r[t])||1);var o=null===u||void 0===u?void 0:u.resources.find((function(t){return t.resourceId==e}));if(o&&o.passengerModal){var i;n.passengerModal=o.passengerModal;var a=null===o||void 0===o||null===(i=o.passengerModal)||void 0===i||null===(i=i.group)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.dChoice;a&&a.length&&_.findIndex((function(e){return a[0]==e.PassengerID}))<0&&(n.passengerModal.group[0].dChoice=[])}}})),(0,h.rC)(_||[],p,d.boxMap||{},w),t.request=(0,r.Z)((0,r.Z)({},t.request),{},{additionOptid:w,additionCount:T})),t}},99213:function(e,t,n){n.d(t,{FC:function(){return s},ck:function(){return l},mR:function(){return a.m}});var r=n(99765),o=n(28570),i=n(99728),a=n(35184),s=function(e){r.Z.show({content:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u9000\u51fa\u540e\u91cd\u8bd5\u3002",btnOK:["\u77e5\u9053\u4e86"],btnCallBack:[function(){(0,i.LK)(),e&&e(),(0,o.Sw)()}]})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null!==e&&void 0!==e&&e.length){var t=[];return e.map((function(e){e.subProductInfos&&(t=t.concat(e.subProductInfos))})),e.concat(t)}return null}},61470:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(90201),o=n(59201),i=n(72747),a=n(17366),s=n(9353),l=n(99739),c="RN"===(0,l.ZP)().platform,u=(0,s.Z)({risk_tips_container:{height:34,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",fontWeight:"normal",fonFamily:"PingFangSC-Regular",paddingLeft:12,paddingRight:12},m_header_dot:{width:(0,a.Vh)(4),height:(0,a.Vh)(4),borderRadius:(0,a.Vh)(4),marginRight:8},risk_tips_content:{display:"flex",flexDirection:"row",flex:1,alignItems:"center",width:"100%"},risk_tips_label:{fontWeight:"bold",fontSize:12,whiteSpace:"nowrap",marginRight:4},risk_tips_info_icon:{marginRight:4},risk_tips_banner_title:{flex:1,fontSize:12},risk_tips_count:{fontSize:12},risk_tips_forword_icon:{marginLeft:4},risk_tips_radius:{borderRadius:8}});c||(u.risk_tips_count.whiteSpace="nowrap");var d=u,p=n(2446),h=n(57113),f=n(35409),g=n(298),m=n(70943),v=n(56569),_="RN"===(0,l.ZP)().platform,y=((0,l.ZP)().platform,{color:"#666666",fontSize:13,lineHeight:(0,a.Nv)(17),marginTop:0,marginBottom:0}),x=(0,s.Z)({a:{color:"#007fe9"},p:y}),b=(0,s.Z)({m_shadow:{position:"absolute",height:(0,a.Vh)(8),width:"100%",top:89,left:0,zIndex:1},m_shadows:{height:(0,a.Vh)(8),width:"100%"},m_title:{flexDirection:"row",justifyContent:"center",marginTop:12,height:21,alignItems:"center",marginBottom:12,position:"relative",display:"flex"},m_title_center:{fontSize:(0,a.Vh)(17),fontWeight:"bold"},m_title_Left:{position:"absolute",left:12},m_title_right:(0,g.Z)((0,g.Z)({alignItems:"center",paddingLeft:12,paddingRight:2,backgroundColor:"rgb(244,244,244)",height:27},(0,a.E0)((0,a.Vh)(25),0,0,(0,a.Vh)(25))),{},{flexDirection:"row",display:"flex",position:"absolute",right:0}),m_title_right_font:{color:"rgb(102,102,102)"},m_bottom:(0,g.Z)((0,g.Z)({position:"absolute",bottom:0,paddingLeft:16,paddingRight:16,paddingTop:8,paddingBottom:8,flex:1,flexDirection:"row",display:"flex",backgroundColor:"#ffffff"},(0,a.Wn)({hShadow:(0,a.Vh)(-5),vShadow:(0,a.Vh)(2),blur:(0,a.Vh)(4),spread:(0,a.Vh)(1),color:"rgba(0, 0, 0, 0.1)",rnColor:"rgba(0,0,0)",opacity:.05})),{},{elevation:16}),m_bottom_btn:{backgroundColor:"rgb(0,134,246)",borderRadius:6,width:"100%",alignItems:"center",marginTop:8,marginBottom:8,display:"flex"},m_bottom_btn_font:{color:"#fff",fontSize:(0,a.Vh)(17),paddingTop:11,paddingBottom:11,fontWeight:"bold"},m_risk:{height:"100%",position:"relative",paddingBottom:76,minHeight:325,maxHeight:.85*v.Db.get("window").height},m_content_item:{paddingBottom:8},m_content_item_title:{fontSize:14,color:"rgb(51,51,51)",lineHeight:(0,a.Nv)((0,a.Vh)(34)),fontWeight:"bold"},m_content_item_container:{backgroundColor:"rgb(248,250,253)",padding:8,borderRadius:2},m_content_item_container_font:{color:"rgb(102,102,102)",fontSize:(0,a.Vh)(13),lineHeight:(0,a.Nv)((0,a.Vh)(17))},m_content:{paddingLeft:16,paddingRight:16,position:"relative"},m_content_tag_item:(0,g.Z)({paddingLeft:4,paddingRight:4,marginRight:4,paddingTop:2,paddingBottom:2,borderRadius:2,marginBottom:4,display:"flex",maxWidth:"100%"},(0,a.ix)("border-box")),m_content_tag_item_1:(0,g.Z)({},(0,a.Cg)({style:"solid",color:"rgb(255,220,191)",width:a.WI})),m_content_tag_item_2:(0,g.Z)({},(0,a.Cg)({style:"solid",color:"rgb(191,237,221)",width:a.WI})),m_content_tag_item_font:{fontSize:(0,a.Vh)(11),lineHeight:(0,a.Nv)(14)},m_content_tag_item_font_1:{color:"rgb(255,119,0)"},m_content_tag_item_font_2:{color:"rgb(0,184,122)"},m_content_tag:{flexDirection:"row",flexWrap:"wrap",marginBottom:4,display:"flex"},m_content_item_container_item:{marginBottom:8,flexDirection:"row",alignItems:"center",display:"flex"},m_content_item_container_item_font:{fontSize:14,paddingLeft:3},m_content_item_container_time:{color:"rgb(153,153,153)",fontSize:(0,a.Vh)(13),marginBottom:8},Disclaimer:{color:"#FF7700",fontSize:(0,a.Vh)(12),lineHeight:(0,a.Nv)((0,a.Vh)(15)),display:"flex"},m_des_con:{paddingBottom:16},tabStyle:{color:"rgb(0,134,246)",fontWeight:"bold",fontSize:(0,a.Vh)(15)},m_content_item_container_item_font_0:{color:"red"},m_content_item_container_item_font_1:{color:"rgb(255,119,0)"},m_content_item_container_item_font_2:{color:"rgb(51,51,51)"},m_text:y}),Z=(0,s.Z)({m_wrap:{height:44,maxHeight:44,minHeight:44},m_inner:{justifyContent:"space-around",height:44,maxHeight:44},m_text_active:{},m_item_tab:{paddingLeft:4,paddingRight:4,maxWidth:"33%"},m_indictor:{borderRadius:2},m_row_direction:{paddingLeft:4,paddingRight:4},m_text:{color:"#333333"}});_||(b.m_content.height=.85*v.Db.get("window").height-160+"px",b.m_content.boxSizing="border-box",b.m_content.m_content_tag_item="border-box",b.m_bottom.width="100%",b.m_bottom.backgroundColor="#fff",b.m_bottom_btn.justifyContent="center",b.m_bottom.boxSizing="border-box",b.m_bottom.boxShadow="rgb(0 0 0 / 5%) -2px -3px 5px 1px",b.m_content.flex=1,b.m_risk={height:"100%",position:"relative",paddingBottom:"76px",display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:.85*v.Db.get("window").height+"px",minHeight:"325px"});var I=b,C=n(90129),k=n(28570),w=n(58472),T=n(79522),S=function(e){var t=(0,r.useRef)(),n=(0,r.useRef)(),o=(0,r.useRef)([]),i=(0,r.useRef)(!1),a=(0,r.useRef)(0),s=(0,r.useRef)(!1),l=(0,r.useRef)([]),c=(0,r.useRef)(0),u=(0,r.useRef)([]),d=(0,r.useRef)(0),p=(0,r.useRef)(0),h=(0,r.useState)(!1),f=(0,C.Z)(h,2),g=f[0],m=f[1],v=(0,r.useState)(0),_=(0,C.Z)(v,2),y=_[0],x=_[1],b=(0,r.useState)(!1),Z=(0,C.Z)(b,2),I=Z[0],S=Z[1],P=e.content,L=function(e,t,n){var r=n.nativeEvent.layout.height;r&&r>0&&(l.current[e]=parseInt(r)+4)},N=function(e){var t=e.nativeEvent.layout.height;p.current=t,l.current.length==P.length&&l.current.forEach((function(e,t){a.current+=e,u.current[t]=a.current}))},j=(0,T.Ds)((function(e,n){var r,o,i=0!==n&&l.current.length?u.current[n-1]:0;(null===t||void 0===t||null===(r=t.current)||void 0===r||null===(o=r.scrollTo)||void 0===o?void 0:o.call(r,{y:i,top:i,behavior:"smooth"}))||x(i),s.current=!0,setTimeout((function(){s.current=!1}),300)}),200),D=function(e){t.current=e},V=function(e,t){o.current[t]=e},E=function(e){n.current=e},R=function(e,t,n){for(var r=0,o=0;o<n&&n<=e.length;o++)o>=t&&(r+=e[o]);return r},A=function(e,t){var r,o;if(e){var a=(null===t||void 0===t||null===(r=t.nativeEvent)||void 0===r||null===(r=r.contentOffset)||void 0===r?void 0:r.y)||(null===t||void 0===t||null===(o=t.detail)||void 0===o?void 0:o.scrollTop)||0;if(l.current.length>=2){if(a<u.current[0]&&R(l.current,1,l.current.length)>p.current||a<=0||R(l.current,1,l.current.length)<p.current&&a<=u.current[0]-p.current)d.current=0;else{var h=u.current.findIndex((function(e,t){return a<e}));d.current=h,d.current==u.current.length-2&&a>u.current[u.current.length-1]-p.current-1&&l.current[l.current.length-1]<p.current&&(d.current=l.current.length-1)}!i.current&&a>0?(m(!0),i.current=!0):i.current&&(a<=0||!a)&&(m(!1),i.current=!1),c.current===d.current||s.current||(n.current&&n.current.setCurrent(d.current),c.current=d.current)}}},F=function(e){(0,k.VF)(e)},M=function(){var e=t.current;e&&(0,w.L6)(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.height&&N({nativeEvent:{layout:{height:e.height}}})}),!1)},O=function(){a.current=0,setTimeout((function(){var e;null===(e=o.current)||void 0===e||e.forEach((function(e,t){var n=o.current[t];n&&(0,w.L6)(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.height&&(L(t,P,{nativeEvent:{layout:{height:e.height}}}),t==P.length-1&&M())}),!1)}))}),100)};return(0,r.useEffect)((function(){O()}),[]),{onChangeTab:j,moduleList:l.current,setRef:D,scrollContent:A,setRefTab:E,onRiskClick:F,isScroll:g,scrollTop:y,setScrollConRef:V,onGroupLayout:L,onScrollViewLayout:N,getContentHeight:O,layoutFinish:I,setLayoutFinish:S}},P=S,L=n(36472),N=n(50221),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/<img.*?>|\/>/g,""),n=t.match(/<a.*?>.*?<\/a>/g)||[],r="";return n.forEach((function(t){var n=e.indexOf(t);if(-1!==n){var o=e.slice(0,n);o&&(r+=D(o)),e=e.slice(n+t.length,e.length),t=t.slice(0,2)+' style="color:#006FF6"'+t.slice(2,t.length),r+=t}})),e&&(r+=D(e)),r},D=function(e){var t=e.replace(/<img.*?>|\/>/g,""),n=/((http|https):\/\/(\w+)+(\.(\w+)+)+(\.(\w+)+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g,r=t.match(n)||[],o=e.replace(n,(function(e){return r.indexOf(e)>-1?"<a href='".concat(e,"' style='color:#006FF6'>").concat(e,"</a>"):e}));return o},V=n(2269),E=void 0,R=function(e){var t=e.tabs,n=e.content,r=e.closeCallback,s=e.btnCallback,c=e.isDisclaimer,u=P(e),d=u.onChangeTab,p=u.setRef,h=u.scrollContent,f=u.setRefTab,_=u.onRiskClick,y=u.isScroll,b=u.scrollTop,C=u.setScrollConRef,k=u.onGroupLayout,w=u.onScrollViewLayout,T=u.getContentHeight,S=u.layoutFinish,D=u.setLayoutFinish;return(0,V.jsxs)(i.G7,{style:I.m_risk,className:"m_risk_pop_detail",children:[(0,V.jsxs)(i.G7,{style:I.m_title,children:[(0,V.jsx)(o.Z,{style:I.m_title_Left,onClick:r,children:(0,V.jsx)(i.JO,{type:"xclosed",size:40,color:"rgb(102,102,102)"})}),(0,V.jsx)(i.xv,{style:I.m_title_center,className:"m_title_center_normal",children:"\u516c\u544a\u8be6\u60c5"})]}),(null===t||void 0===t?void 0:t.length)>1?(0,V.jsx)(m.Z,{hasIndictor:!0,fstyle:Z,ref:function(e){f(e)},setRefTab:!0,styleProps:Z.m_inner,onChangeTab:d,tabs:t,textActiveStyle:I.tabStyle,isTabScroll:!1}):null,(null===t||void 0===t?void 0:t.length)>1?(0,V.jsx)(i.o,{style:I.m_shadow,start:{x:0,y:0},end:{x:0,y:1},colors:y?["rgba(0,0,0,0.08)","rgba(0,0,0,0)"]:["transparent","transparent"],children:(0,V.jsx)(i.G7,{style:I.m_shadows})}):null,(0,V.jsxs)(i.pf,(0,g.Z)((0,g.Z)({scrollEventThrottle:160,style:I.m_content,ref:function(e){p(e)},onScroll:h.bind(E,!0),scrollY:!0,showScrollbar:!1,enhanced:!0},"mini"===(0,l.ZP)().platform?{scrollTop:b}:{}),{},{onLayout:w.bind(E),children:[null===n||void 0===n?void 0:n.map((function(e,t){var r;return(0,V.jsxs)(i.G7,{ref:function(e){C(e,t)},onLayout:k.bind(t,n,E),id:"risk-tip-pop-view"+t,style:(0,a.wh)([I.m_content_item,t===n.length-1?{marginBottom:0}:{},0==t?{marginTop:8}:{}]),children:[e.title?(0,V.jsx)(i.xv,{style:I.m_content_item_title,children:e.title}):null,null===e||void 0===e||null===(r=e.chirdren)||void 0===r?void 0:r.map((function(e){var t,n;return(0,V.jsx)(i.G7,{children:(0,V.jsxs)(i.G7,{style:I.m_content_item_container,children:[(0,V.jsxs)(i.G7,{style:I.m_content_item_container_item,children:[(0,V.jsx)(i.JO,{type:"information",size:29,color:e.urgencyLevel&&0==e.urgencyLevel?"red":"rgb(255,119,0)"}),e.title?(0,V.jsx)(i.xv,{style:(0,a.wh)([I.m_content_item_container_item_font,I["m_content_item_container_item_font_".concat(e.urgencyLevel)]]),children:e.title}):null]}),null!==e&&void 0!==e&&null!==(t=e.tags)&&void 0!==t&&t.length?(0,V.jsx)(i.G7,{style:I.m_content_tag,children:null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.map((function(e){return(0,V.jsx)(i.G7,{style:(0,a.wh)([I.m_content_tag_item,I["m_content_tag_item_".concat(e.tagLevel)]]),children:(0,V.jsx)(i.xv,{numberOfLines:1,ellipsizeMode:"tail",style:(0,a.wh)([I.m_content_tag_item_font,I["m_content_tag_item_font_".concat(e.tagLevel)]]),children:e.name})})}))}):null,e.ctripCreateTime?(0,V.jsxs)(i.xv,{style:I.m_content_item_container_time,children:["\u66f4\u65b0\u65f6\u95f4\uff1a",e.ctripCreateTime.split(" ")[0]]}):null,e.policyText?(0,V.jsx)(L.Z,{message:(0,V.jsx)(N.Z,{html:"".concat(j(e.policyText)),baseFontStyle:I.m_text,tagsStyles:x,renderers:{a:function(e,t){var n=e||{},r=n.href;return(0,V.jsx)(i.xv,{onPress:function(){return _(r)},children:t})}},banLink:null===v.NS||void 0===v.NS?void 0:(0,v.NS)()}),lineHeight:17,lineNum:10,ishtml:!0,isForbiddenHide:!0,showMoreText:{arrowdown:"\u5c55\u5f00\u66f4\u591a"},showMoreIcon:!0,fstyle:{m_button:{width:"100%",position:"absolute",right:0,bottom:0},m_button_linear:{height:34,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",bottom:-6},m_button_text:{display:"flex",color:"#666666",fontSize:13},m_textcollapse:S||"RN"===(0,l.ZP)().platform?{position:"relative",marginTop:0}:{position:"relative",marginTop:0,height:170,overflow:"scroll"}},linearStyle:{linearGradientStart:{x:0,y:0},linearGradientEnd:{x:0,y:.2},linearGradientColor:["rgba(248, 250, 253, 0.5)","rgba(248, 250, 253, 1) 20%"],direction:180},openCallBack:function(){null===T||void 0===T||T()},onLayoutFinish:function(){D(!0)}}):null]})})}))]})})),c?(0,V.jsx)(i.G7,{style:I.m_des_con,children:(0,V.jsx)(i.xv,{style:I.Disclaimer,children:"*\u9274\u4e8e\u76ee\u7684\u5730\u3001\u7ecf\u505c\uff08\u8f6c\uff09\u5730\u7684\u5165\u5883\u653f\u7b56\u53ca\u75ab\u60c5\u9632\u63a7\u653f\u7b56\u7684\u968f\u65f6\u53ef\u80fd\u8c03\u6574\uff0c\u9875\u9762\u4fe1\u606f\u53ef\u80fd\u5b58\u5728\u6ede\u540e\u6027\uff0c\u8bf7\u60a8\u5728\u51fa\u884c\u524d\u4ed4\u7ec6\u67e5\u9605\u5165\u5883\u8981\u6c42\u53ca\u6700\u65b0\u75ab\u60c5\u9632\u63a7\u89c4\u5b9a\uff0c\u5408\u7406\u5b89\u6392\u60a8\u7684\u51fa\u884c\u3002"})}):null]})),(0,V.jsx)(o.Z,{style:I.m_bottom,onClick:s,children:(0,V.jsx)(i.G7,{style:I.m_bottom_btn,children:(0,V.jsx)(i.xv,{style:I.m_bottom_btn_font,className:"m_bottom_btn_font_normal",children:"\u6211\u77e5\u9053\u4e86"})})})]})},A=R,F=n(3965),M=function(e){(0,r.useEffect)((function(){h.Z.add("listRiskTips",f.Z,{props:{isOpened:!1}})}),[]);var t=e.showIcon,n=void 0===t||t,o=e.showCount,i=void 0!==o&&o,a=e.content,s=e.tabs,l=e.isDisclaimer,c=e.fstyle,u=e.backgroundColor,d=e.logs,g=void 0===d?{}:d,m=e.iconSize,v=void 0===m?26:m,_=e.isModal,y="",x=[],b=0,Z=!1;(null===a||void 0===a?void 0:a.length)&&a.forEach((function(e){var t=e.chirdren;null!==t&&void 0!==t&&t.length&&t.forEach((function(e){null!==e&&void 0!==e&&e.title&&(x.push(e),"0"==(null===e||void 0===e?void 0:e.urgencyLevel)&&(Z=!0))}))}));var I,C=function(e){var t="\u516c\u544a\uff1a";return 1==e.length&&(e[0].type==F.K.resource&&(t="\u6ce8\u610f\u4e8b\u9879\uff1a"),e[0].type==F.K.student&&(t="\u5b66\u751f\u8ba4\u8bc1\u63d0\u793a\uff1a"),e[0].type==F.K.doctor&&(t="\u533b\u62a4\u8ba4\u8bc1\u63d0\u793a\uff1a"),e[0].type==F.K.limit&&(t="\u666f\u533a\u9650\u6d41\u63d0\u793a\uff1a")),t},k=C(x);(y=x.map((function(e){return null===e||void 0===e?void 0:e.title})).join(" | "),n||1!=(null===x||void 0===x?void 0:x.length)||x[0].type==F.K.risk)||(y=null===x||void 0===x||null===(I=x[0])||void 0===I?void 0:I.content);b=x.length;var w=function(){p.ZP.show({props:{name:"listRiskTips",isShowHeader:!1,containerIsFull:!0,maxHeight:650,minHeight:300,isScrollView:!1,isModal:_},child:A,childProps:{content:a,tabs:s,isDisclaimer:l,btnCallback:function(){return p.ZP.hide()},closeCallback:function(){return p.ZP.hide()}}})};return{bannerLabel:k,bannerTitle:y,titleCount:b,isShowRedTip:Z,handleClick:w,showIcon:n,showCount:i,fstyle:c,backgroundColor:u,logs:g,iconSize:v}},O=M,B=function(e){var t=O(e),n=t.bannerLabel,r=t.bannerTitle,s=t.titleCount,l=t.isShowRedTip,c=t.handleClick,u=t.showIcon,p=t.showCount,h=t.fstyle,f=t.backgroundColor,g=t.logs,m=t.iconSize,v=l?"#FEF3F2":"#FFF8F2",_=l?"#F5190A":"#FF7700",y=(0,a.Ec)(d,h),x=g.exposureLog,b=g.devTraceLog,Z=g.clickLog,I=e.needRadius,C=void 0!==I&&I;return(0,V.jsxs)(o.Z,{onClick:c,style:(0,a.wh)([y.risk_tips_container,{backgroundColor:f||v,zIndex:1},C?y.risk_tips_radius:{}]),testID:x,log:Z,devTraceData:b&&b(n),children:[(0,V.jsxs)(i.G7,{style:(0,a.wh)([y.risk_tips_content]),children:[u?(0,V.jsx)(i.JO,{type:"information",color:_,size:m,style:y.risk_tips_info_icon}):(0,V.jsx)(i.G7,{style:(0,a.wh)([y.m_header_dot,{backgroundColor:_}])}),(0,V.jsx)(i.xv,{style:(0,a.wh)([y.risk_tips_label,{color:_}]),children:n}),r?(0,V.jsx)(i.xv,{style:(0,a.wh)([{color:_},y.risk_tips_banner_title]),numberOfLines:1,children:r}):null]}),p&&s?(0,V.jsx)(i.xv,{style:(0,a.wh)([{color:_},y.risk_tips_count]),children:1==s?"\u67e5\u770b":"".concat(s,"\u6761")}):null,(0,V.jsx)(i.JO,{type:"forward",color:_,size:m,style:y.risk_tips_forword_icon})]})},G=B},3965:function(e,t,n){n.d(t,{K:function(){return r}});var r=function(e){return e[e["downTime"]=1]="downTime",e[e["enterTime"]=2]="enterTime",e[e["risk"]=3]="risk",e[e["resource"]=4]="resource",e[e["student"]=5]="student",e[e["doctor"]=6]="doctor",e[e["limit"]=7]="limit",e[e["other"]=8]="other",e}({})},38780:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(79301),o=n(95308),i=n(298),a=n(90129),s=n(90201),l=n(71515),c=n(92954),u=n.n(c),d=n(1089),p=n(19132),h=n(89983),f=n(59001),g=n(47297),m=n(45116);function v(e){var t=e.logTrace,n=e.data,l=e.logMetric,c=e.logUbtDevTrace,u=e.hasError,p=e.fetch,v=e.onClose,_=e.onLoad,y=e.traceLogId,x=e.visible,b=e.compVersion,Z=e.componentType,I=e.miniType,C=e.firstDidAmount,k=e.onVisibleChange,w=e.expandPromotionId,T=e.clientEnv,S=(0,s.useState)(w),P=(0,a.Z)(S,2),L=P[0],N=P[1],j=(0,s.useState)(x),D=(0,a.Z)(j,2),V=D[0],E=D[1],R=(0,s.useState)([]),A=(0,a.Z)(R,2),F=A[0],M=A[1],O=(0,s.useState)({}),B=(0,a.Z)(O,2),G=B[0],H=B[1],z=(0,s.useMemo)((function(){return(0,h.Ze)()}),[]);(0,s.useEffect)((function(){N(w)}),[w]);var U=(0,s.useMemo)((function(){return{pageId:n.pageId,componentId:g.CE.CROSS_COUPON.id,componentName:g.CE.CROSS_COUPON.name,componentVersion:b}}),[]),q=(0,s.useMemo)((function(){return{channelId:n.saleChannel,clientId:n.clientId,utcOffset:z.offset,locale:n.locale,currency:n.currency,rmsToken:n.rmsToken,outOpenId:n.outOpenId,requestScene:d.NT.CrossCoupon,version:b,componentType:Z,miniType:I}}),[e.data,z]);(0,s.useEffect)((function(){E(x)}),[x]),(0,s.useEffect)((function(){k&&k(V)}),[V]),(0,s.useEffect)((function(){return C&&C(),function(){k&&k(!1)}}),[]),(0,s.useEffect)((function(){V&&$(n.orderId?g.NG.CROSS_AFTERBOOKING_EXPOSURE:g.NG.CROSS_BEFOREBOOKING_EXPOSURE)}),[V]),(0,s.useEffect)((function(){K()}),[JSON.stringify(n),u]),(0,s.useEffect)((function(){X()}),[n.locale]);var W=(0,s.useMemo)((function(){return{env:(null===T||void 0===T?void 0:T.env)||n.env,client:null===T||void 0===T?void 0:T.clientType,ctType:null===T||void 0===T?void 0:T.ctType,fetch:p,logTrace:t,logMetric:l,logUbtDevTrace:c,cid:n.clientId}}),[e]);function K(){return J.apply(this,arguments)}function J(){return J=(0,o.Z)((0,r.Z)().mark((function e(){var t,o,a,s,l,c,d,p,h;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={baseInfo:q},n.orderId?t.businessId=n.orderId:n.sceneParam&&(t.sceneParam={sceneCode:null===(o=n.sceneParam)||void 0===o?void 0:o.sceneCode,filterList:null===(a=n.sceneParam)||void 0===a?void 0:a.filters,shownewuserpromo:null===(s=n.sceneParam)||void 0===s?void 0:s.shownewuserpromo}),l=(0,i.Z)((0,i.Z)({},W),{},{api:m.o.bl.CROSS_COUPON,variables:t,componentInfo:U,traceLogId:y}),e.next=8,(0,f.v)(l);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:c=e.t0,d=c.list,p=d||[],M(p),h=p.map((function(e){var t={promotionId:e.promotionId,displayName:e.displayName,couponCode:e.couponCode,couponStartDate:e.couponStartDate,couponDisableDate:e.couponDisableDate,promotionLabel:e.promotionLabel,businessLineType:e.businessLineType,customerNewOrOldName:e.customerNewOrOldName,businessLineName:e.businessLineName,deductionAmountLabel:e.deductionAmountLabel,toUseLink:e.toUseLink};return t})),_&&_(h),$(m.o.NG.CROSS_ONLOAD,h),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](2),Q(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20]])}))),J.apply(this,arguments)}var X=(0,s.useCallback)((0,o.Z)((0,r.Z)().mark((function e(){var t,o,a,s,l;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={sharkLocale:n.locale,baseInfo:q},o=(0,i.Z)((0,i.Z)({},W),{},{api:m.o.bl.SHARK,variables:t,componentInfo:U,traceLogId:y}),e.prev=2,e.next=5,(0,f.v)(o);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:a=e.t0,s=a.data,l=void 0===s?{}:s,H(l),e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](2),Q(e.t1);case 17:case"end":return e.stop()}}),e,null,[[2,14]])}))),[n.locale,n.env]);function Q(e){console.error(e),$(g.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}var $=function(r,o){var a;if(t){var s={compId:U.componentName,ttdVer:U.componentVersion,state:{visible:V,expandId:L},props:(0,i.Z)((0,i.Z)({},e.data),{},{visible:e.visible,title:e.title})};n.orderId?s.orderId=n.orderId:s.sceneCode=null===(a=n.sceneParam)||void 0===a?void 0:a.sceneCode;try{t({key:r,value:o?(0,i.Z)((0,i.Z)({},o),s):s})}catch(e){console.error(e)}}};function Y(e,t){$(n.orderId?g.NG.CROSS_AFTERBOOKING_CLICK:g.NG.CROSS_BEFOREBOOKING_CLICK,{module:e,strategyid:t})}function ee(){console.log("invoke handleClose"),E(!1),Y("CloseByX"),v&&v()}return{modelState:{visible:V,expandId:L,couponList:F,sharkData:G,componentInfo:U},modelAction:{setExpandId:N},ctrl:{handleClose:ee,handleTraceClick:Y}}}var _=v,y=n(2269),x=s.useEffect,b=s.forwardRef,Z=s.useState,I=(s.useCallback,b((function(e,t){var n=Z(""),h=(0,a.Z)(n,2),f=h[0],g=h[1],v=Z(!1),b=(0,a.Z)(v,2),I=b[0],C=b[1],k=Z(!1),w=(0,a.Z)(k,2),T=w[0],S=w[1],P=e.data,L=e.title,N=e.style,j=e.popoverLevel,D=void 0===j?1:j,V=(0,i.Z)((0,i.Z)({},e),{},{compVersion:p.Ke,componentType:d.Lm.Taro,miniType:(0,p.H9)(),showToast:function(e){u().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:p.qn,logUbtDevTrace:p.q6,logMetric:p.HR,auth:p.Y8&&p.Y8.user.auth||(0,p.v0)(),fetch:p.jJ,ensureUbtHasAttached:null,ref:t,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec crossCoupon firstDidAmount","color:yellow"),e.next=3,(0,p.So)();case 3:t=e.sent,t&&t.safeArea&&t.safeArea.top&&t.safeArea.top>20&&(C(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),E=_(V),R=E.modelState,A=E.modelAction,F=E.ctrl,M=R.couponList,O=R.sharkData,B=R.visible,G=R.expandId,H=A.setExpandId,z=F.handleClose,U=F.handleTraceClick,q=function(e){(0,p.tv)(e)};x((function(){B?(console.log("show"),g(""),u().nextTick((function(){S(!0)}))):(console.log("hide"),S(!1),setTimeout((function(){g("displayNone")}),100))}),[B]),(0,c.useDidShow)((function(){})),(0,c.useDidHide)((function(){})),(0,c.usePullDownRefresh)((function(){}));var W=P.orderId?d.Qo.AfterBooking:d.Qo.BeforeBooking,K=s.useCallback((function(){var e={};return D>1?e.top=0:M&&0!=M.length||(e.top=320),null!==N&&void 0!==N&&N.top?e.top=N.top:D>1&&(e.borderRadius=0),null!==N&&void 0!==N&&N.zIndex&&(e.zIndex=N.zIndex+1),e}),[N,M]),J=s.useMemo((function(){return K()}),[K]);return(0,y.jsxs)(l.View,{className:"ttd_mkt_layout ".concat(T?"shown":"hidden"),children:[(0,y.jsx)(l.View,{className:"ttdmkt_crs_cover ".concat(f),onClick:function(){z(),U("CloseByX")},catchMove:!0}),(0,y.jsxs)(l.View,{className:"ttdmkt_crs_main ".concat(f),catchMove:!0,style:J,children:[(0,y.jsxs)(l.View,{className:"crs_header",children:[(0,y.jsx)(l.View,{className:"crs_header_close ".concat(D>1?"crs_back_icon":"crs_close_icon"),hoverClass:"crs_close_active",onClick:function(){z()}}),(0,y.jsx)(l.View,{className:"crs_header_title",children:L||"".concat(O[m.m.CROSS_TITLE]||"\u8d60\u5238")}),(0,y.jsx)(l.View,{className:"crs_header_right"})]}),(0,y.jsxs)(l.ScrollView,{className:"crs_body",scrollY:!0,scrollWithAnimation:!0,style:I?{paddingBottom:20}:{},children:[(0,y.jsx)(l.View,{className:"crs_tips_body",children:W==d.Qo.AfterBooking?(0,y.jsx)(l.Text,{className:"crs_tips_text",children:"".concat(O[m.m.CROSS_AFTERBOOKING_SUBTITLE]||"\u4f18\u60e0\u5238\u5df2\u5230\u8d26\uff0c\u53ef\u5728\u201c\u6211\u7684\u201d>\u201c\u4f18\u60e0\u5238\u201d\u4e2d\u67e5\u770b")}):(0,y.jsx)(l.Text,{className:"crs_tips_text",children:"".concat(O[m.m.CROSS_BEFOREBOOKING_SUBTITLE]||"*\u652f\u4ed8\u6210\u529f\u540e\uff0c\u4ee5\u4e0b\u4f18\u60e0\u5238\u5c06\u81ea\u52a8\u53d1\u653e\u81f3\u60a8\u7684\u8d26\u6237")})}),null===M||void 0===M?void 0:M.map((function(e,t){var n,r,o;if(!e.promotionLabel)return null;var i=W===d.Qo.AfterBooking&&e.toUseLink,a=e.promotionId==G;return(0,y.jsxs)(l.View,{className:"crs_block",children:[(0,y.jsxs)(l.View,{className:"crs_block_hd",children:[(0,y.jsxs)(l.View,{className:"crs_block_hd_name",onClick:function(){H(a?null:e.promotionId),U("Detail",e.promotionId)},children:[(0,y.jsx)(l.Image,{className:"crs_block_hd_img",src:e.iconImageUrl}),(0,y.jsxs)(l.View,{className:"crs_block_hd_tag ".concat(i?"withTouse":""),children:[(0,y.jsxs)(l.View,{children:[(0,y.jsx)(l.Text,{className:"crs_block_hd_p1",children:"".concat(null!==(n=e.businessLineName)&&void 0!==n?n:"").concat(null!==(r=e.customerNewOrOldName)&&void 0!==r?r:"")}),(0,y.jsx)(l.Text,{className:"crs_block_hd_p2",children:e.deductionAmountLabel})]}),i&&(0,y.jsxs)(l.View,{className:"crs_op_detail withTouse",onClick:function(){H(a?null:e.promotionId),U("Detail",e.promotionId)},children:[(0,y.jsx)(l.Text,{className:"crs_op_detail_txt",children:"".concat(O[m.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,y.jsx)(l.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,y.jsx)(l.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]})]}),i?(0,y.jsx)(l.View,{className:"crs_op_touse",onClick:function(){q(e.toUseLink),U("ToUse",e.promotionId)},children:(0,y.jsx)(l.Text,{className:"crs_op_touse_text",children:"".concat(O[m.m.POP_TOUSE]||"\u53bb\u4f7f\u7528")})}):(0,y.jsxs)(l.View,{className:"crs_op_detail",onClick:function(){H(a?null:e.promotionId),U("Detail",e.promotionId)},children:[(0,y.jsx)(l.Text,{className:"crs_op_detail_txt",children:"".concat(O[m.m.CROSS_DETAIL]||"\u8be6\u7ec6\u8bf4\u660e")}),a?(0,y.jsx)(l.View,{className:"crs_op_detail_icon",children:"\ue946"}):(0,y.jsx)(l.View,{className:"crs_op_detail_icon",children:"\ue945"})]})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.View,{className:"crs_cutting_line  ".concat(i?"with_touse":"")}),(0,y.jsxs)(l.View,{className:"crs_block_bd",children:[W===d.Qo.AfterBooking&&(0,y.jsxs)(l.View,{className:"crs_block_bd_item",children:[(0,y.jsx)(l.Text,{className:"crs_block_bd_item_title",children:"".concat(O[m.m.CROSS_VALIDPERIOD_TIITLE]||"\u4f7f\u7528\u6709\u6548\u671f")}),(0,y.jsx)(l.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,y.jsx)(l.Text,{className:"crs_block_bd_item_content",children:e.useDateShown||""})})]}),(0,y.jsxs)(l.View,{className:"crs_block_bd_item",children:[(0,y.jsx)(l.Text,{className:"crs_block_bd_item_title",children:e.displayName}),(0,y.jsx)(l.View,{className:"crs_block_bd_item_content_row_wrap",children:(0,y.jsxs)(l.View,{className:"crs_block_bd_item_content_row",children:[(0,y.jsx)(l.View,{className:"crs_block_bd_item_content_dot"}),(0,y.jsx)(l.Text,{className:"crs_block_bd_item_content",children:e.shortRemark})]})})]}),(0,y.jsxs)(l.View,{className:"crs_block_bd_item",children:[(0,y.jsx)(l.Text,{className:"crs_block_bd_item_title",children:"".concat(O[m.m.CROSS_USEDETAIL]||"\u4f7f\u7528\u89c4\u5219")}),(0,y.jsx)(l.View,{className:"crs_block_bd_item_content_row_wrap",children:null===(o=e.detailRemark)||void 0===o?void 0:o.map((function(e){return(0,y.jsxs)(l.View,{className:"crs_block_bd_item_content_row",children:[(0,y.jsx)(l.View,{className:"crs_block_bd_item_content_dot"}),(0,y.jsx)(l.Text,{className:"crs_block_bd_item_content",children:e})]})}))})]})]})]})]})}))]})]})]})}))),C=I,k=C},97142:function(e,t,n){n.d(t,{vw:function(){return r.vw},Yw:function(){return r.Yw},AH:function(){return r.AH},K1:function(){return r.K1}});var r=n(662)},15318:function(e,t,n){var r=n(298),o=n(99739),i=n(39140),a=(0,o.ZP)();t["Z"]=function(e,t,n,r){for(var o,l=e.optid,c=void 0===l?[]:l,u=e.count,d=void 0===u?[]:u,p=e.date,h=void 0===p?new Date:p,f=e.additionOptid,g=void 0===f?[]:f,m=e.additionCount,v=void 0===m?[]:m,_=e.endDate,y=e.isAct,x=(e.isCrossDate,e.boxMap),b=void 0===x?{}:x,Z=n||{},I=Z.calendar,C=void 0===I?[]:I,k=Z.priceMode,w=Z.productId,T=(null===(o=C.find((function(e){return e.date==h})))||void 0===o?void 0:o.resources)||[],S=[],P=T.find((function(e){return e.resourceId==c[0]})),L=w||(null===P||void 0===P?void 0:P.productId),N=(C||[]).findIndex((function(e){return e.date==h})),j=(C||[]).findIndex((function(e){return e.date==(_||h)})),D=(C||[]).slice(N,j+1),V=0,E=D.length;V<E;V++){var R=D[V],A=R.date,F=R.resources;s(S,c,d,F,"U"==k?null:A,1,"",b)}return r&&s(S,g,v,r.resources||[],"U"==k?null:h,10,L,b),{request:Object.assign({},t,{baseInfo:{channelId:i.RX[a.platform],allianceId:Number(e.aid)||0,siteId:Number(e.sid)||0,businessLine:y?"ACTIVITY":"TICKET"},isNeedBest:!0,bookingInfo:{resourceList:S}}),actionUrl:"/restapi/soa2/24749/json/searchBookingSalesPromotionRestful"}};var s=function(e,t,n,o,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};t.map((function(t,c){var u=o.find((function(e){return e.resourceId==t}));if(u){var d,p=null===(d=l[t])||void 0===d?void 0:d.length,h={resourceId:t,productId:10==a?s:u.productId,quantity:Number(n[c]),resourceType:a,price:Number(u.salePrice)||0};if(p){h.relationKey=String(t);var f=l[t].filter((function(e){return 0==e.priceMode})),g=l[t].filter((function(e){return 1==e.priceMode})),m=Array.from(new Set(f.map((function(e){return e.date}))));m.forEach((function(t){e.push((0,r.Z)((0,r.Z)({},h),{},{date:t}))})),g.length&&e.push((0,r.Z)({},h))}else i&&(h.date=i),e.push(h)}}))}},72613:function(e,t){var n={};t["Z"]=function(e){return n[e]||(n[e]={_tmpTimeMap:{},_recordTimeMap:{},_recordTimeStamp:{},set:function(e,t){},setRecord:function(e,t,n){},record:function(e){},recordEnd:function(e){},viewRecords:function(e){return{}},viewAllRecords:function(){return{}},getRecordStamps:function(){return{}},clearRecord:function(){}}),n[e]}},86865:function(e,t,n){n.d(t,{g:function(){return r}});var r=function(e){return e["table"]="table",e["desc"]="desc",e}({})},6714:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(86865),o=n(5824);t["Z"]=function(e,t,n){var a,s,l=t.getProductInfo,c=void 0===l?[]:l,u=null===c||void 0===c?void 0:c[0],d=u.addInfos,p=void 0===d?[]:d,h=u.basicInfo,f=void 0===h?{}:h,g=u.depositInfo,m=void 0===g?{paylaterDescs:[]}:g,v=f.flags,_=void 0===v?[]:v,y=f.beijingTime,x=f.localTime,b=null===p||void 0===p?void 0:p.filter((function(e){return e.code===n}));if(null!==b&&void 0!==b&&b.length){var Z,I,C=null===b||void 0===b||null===(a=b[0])||void 0===a?void 0:a.title,k=[],w=[];if("ProductIntroduction"==n&&(null===b||void 0===b||null===(s=b[0])||void 0===s||null===(s=s.structureContents)||void 0===s?void 0:s.length)>0){var T,S=[];return null===(T=b[0].structureContents)||void 0===T||T.forEach((function(e){var t,n=[];null===e||void 0===e||null===(t=e.items)||void 0===t||t.forEach((function(e){n.push(e.value)})),S.push([{content:[e.title],width:"30%",styleType:"gray"},{row:[[{content:n,width:"100%",styleType:"white"}]],width:"70%"}])})),k=[{type:r.g.table,tableData:{data:S}}],w.push({title:"",icon:"",contents:k}),{title:C,list:w}}if("EffectiveDate"!==n||_.includes("inChina"))if("DepositInfo"===n){var P;w.push({title:"",icon:"",contents:(0,o.oT)(null===b||void 0===b||null===(P=b[0])||void 0===P?void 0:P.contents)});var L=m.paylaterDescs,N=void 0===L?[]:L,j=[];null===N||void 0===N||N.forEach((function(e){var t=e.replace(/<a/i,'<a href="https://www.ctrip.com" ');t=t.replace("js_go_signin","js_go_signin depositInfo_js_go_signin"),Z={isHtml:!0,content:t,styleType:"content"},j.push({type:r.g.desc,descData:Z})})),j.length>0&&w.push({title:"\u5148\u7528\u540e\u4ed8\u514d\u62bc\u91d1",icon:"",contents:j})}else{var D;null===b||void 0===b||null===(D=b[0])||void 0===D||null===(D=D.contents)||void 0===D||D.forEach((function(e){Z={isHtml:!1,content:e.value,styleType:"content"},k.push({type:r.g.desc,descData:Z})})),w.push({title:"",icon:"",contents:k})}else I={isHtml:!1,content:"\u4e0a\u8ff0\u65f6\u95f4\u5747\u4e3a\u5f53\u5730\u65f6\u95f4",styleType:"content",appendText:{styleType:"blue",icon:"help",poplayerData:i(y,x)}},k.push({type:r.g.desc,descData:I});return{title:C,list:w}}};var i=function(e,t){var n={title:"\u65f6\u5dee\u8bf4\u660e",contents:[]},r=a(e,t),o=Math.floor(Math.abs(r)/60),i=Math.abs(r)%60;return 0===r?n.contents.push({text:"\u5f53\u5730\u4e0e\u5317\u4eac\u6ca1\u6709\u65f6\u5dee\uff0c\u5f53\u524d\u5f53\u5730\u65f6\u95f4\u4e3a"+t+"\u3002"}):(n.contents.push({text:"\u5f53\u5730\u65f6\u95f4\u6bd4\u5317\u4eac\u65f6\u95f4"+(r>0?"\u5feb":"\u6162")+(o>0?o+"\u4e2a\u5c0f\u65f6":"")+(i>0?i+"\u5206\u949f":"")}),n.contents.push({text:"\u5f53\u524d\u5f53\u5730\u65f6\u95f4\u4e3a"+t}),n.contents.push({text:"\u5317\u4eac\u65f6\u95f4\u4e3a"+e+"\u3002"})),n},a=function(e,t){return e&&t?(e=new Date(e.replace(/-/g,"/")),t=new Date(t.replace(/-/g,"/")),(t-e)/1e3/60):0}},5824:function(e,t,n){n.d(t,{oT:function(){return i},Sx:function(){return p}});var r=n(298),o=n(86865);t["ZP"]=function(e,t,n){var s=t.getProductInfo,c=void 0===s?[]:s,u=null===c||void 0===c?void 0:c[0],d=u.addInfos,h=void 0===d?[]:d,f=u.itineraryClauseInfos,g=u.servicePeople,m="\u8d39\u7528\u8bf4\u660e",v=[],_=[],y=!!f&&f.length>0,x={};if(y)x=Object.assign({},x,(0,r.Z)((0,r.Z)({},p(c,n)),{},{itineraryClauseInfos:a(f,g)}));else{var b=h.filter((function(e){return"FeeInclude"===e.code||"FeeExclude"===e.code}));if(null===b||void 0===b||!b.length)return{};var Z={};null===b||void 0===b||b.forEach((function(e){var t=l(null===e||void 0===e?void 0:e.structureContents),n=e.title,r=e.code,a=i(e.contents,"2");t.length?v=[{type:o.g.table,tableData:{data:t}}]:a.length&&(v=a),Z[r]={title:"FeeExclude"===r?"\u8d39\u7528\u81ea\u7406":n,icon:"",contents:v}})),Z["FeeInclude"]&&_.push(Z["FeeInclude"]),Z["FeeExclude"]&&_.push(Z["FeeExclude"])}return{title:m,list:_,isNew:y,customData:x}};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return e.forEach((function(e){var o=e.value||e;n||(o=o.replace(/<br\/>/gi,"\n"));var i="0"===t||"0"===e.key?"content":"title";r.push({type:"desc",descData:{isHtml:n,content:o,styleType:i}})})),r},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[];return n=e.map((function(e){var n=e.salePropId,r=e.salePropValId,o=e.clauseInfos,i=null===e||void 0===e?void 0:e.peopleClauseInfos,a=!!i&&i.length>0,l=[],c={salePropId:n,salePropValId:r,showSerPeopleTab:a,list:[]};if(a)i.forEach((function(e,n){var r;null===t||void 0===t||null===(r=t.targets)||void 0===r||r.forEach((function(t){if(e.targetPeopleCode===t.code){var r=e.targetPeopleCode,o=e.diff,i=e.clauseInfos,a=void 0===i?[]:i,c={code:r,name:t.name,desc:t.targetDesc,diff:!!o,index:n,list:s(a)};l.push(c)}}))})),c.servicePeopleTabs=l;else{var u=o.filter((function(e){return"FeeInclude"===e.code||"FeeExclude"===e.code}));c.list=s(u)}return c})),n},s=function(e){if(!e)return[];var t=[],n={};return e.forEach((function(e){var t=e.code,r=e.title,i=e.clauseContents,a=l(i),s=[];a.length&&(s=[{type:o.g.table,tableData:{data:a}}]),n[t]={title:"FeeExclude"===t?"\u8d39\u7528\u81ea\u7406":r,icon:"",contents:s}})),n["FeeInclude"]&&t.push(n["FeeInclude"]),n["FeeExclude"]&&t.push(n["FeeExclude"]),t},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return null===e||void 0===e||e.forEach((function(e){var n,r,o=[];null===e||void 0===e||e.items.forEach((function(e){var t=e.value||e;t=t.replace(/<br\/>/gi,"\n"),o.push(t)}));var i="".concat(e.diff?"* ":"").concat(e.title),a={title:null===e||void 0===e||null===(n=e.linkInfo)||void 0===n?void 0:n.title,contents:c(e)},s=[{content:[i],width:"24%",styleType:"gray"},{content:o,styleType:"black",width:"76%",poplayerDesc:null===e||void 0===e||null===(r=e.linkInfo)||void 0===r?void 0:r.linkText,poplayerTableData:a}];t.push(s)})),t},c=function(e){var t;return null===e||void 0===e||null===(t=e.linkInfo)||void 0===t||null===(t=t.linkDatas)||void 0===t?void 0:t.map((function(e,t){return{title:null===e||void 0===e?void 0:e.title,icon:null===e||void 0===e?void 0:e.iconUrl,tableList:u(null===e||void 0===e?void 0:e.tableInfos)}}))},u=function(e){return null===e||void 0===e?void 0:e.map((function(e,t){return{tableTitle:null===e||void 0===e?void 0:e.title,tableData:d(null===e||void 0===e?void 0:e.rows)}}))},d=function(e){var t=null===e||void 0===e?void 0:e.map((function(e,t){var n,o,i=(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.length)||0;return i&&(null===e||void 0===e||null===(o=e.columns)||void 0===o?void 0:o.map((function(e,n){return(0,r.Z)((0,r.Z)({content:[e||""]},0===t?{styleType:"gray"}:{}),{},{width:0===n&&2===i?"34%":1===n&&2===i?"66%":100/i+"%"})})))}));return t},p=function(){var e,t,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=null===o||void 0===o?void 0:o[0],s=a.itineraryClauseInfos,l=a.itinerary,c=l||{},u=c.itineraryGroup,d=void 0===u?{}:u,p=d||{},h=p.summaryInfos,f=void 0===h?[]:h,g=i.externalReceive?null===f||void 0===f||null===(e=f[0])||void 0===e||null===(e=e.itineraryInfo)||void 0===e?void 0:e.salesPropertyId:null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.salePropId,m=i.externalReceive?null===f||void 0===f||null===(n=f[0])||void 0===n||null===(n=n.itineraryInfo)||void 0===n?void 0:n.salesPropertyValueId:null===s||void 0===s||null===(r=s[0])||void 0===r?void 0:r.salePropValId;return{initSalePropId:g,initSalePropValId:m}}},88334:function(e,t,n){var r=n(22276),o=n(86865);t["Z"]=function(e){var t=e.getProductInfo,n=void 0===t?[]:t,i=null===n||void 0===n?void 0:n[0],a=i.addInfos,s=(null===a||void 0===a?void 0:a.filter((function(e){return"Attention"===e.code})))||[],l=(null===a||void 0===a?void 0:a.filter((function(e){return"InvoiceDesc"===e.code})))||[],c=(null===a||void 0===a?void 0:a.filter((function(e){return"GiftCard"===e.code})))||[],u=[].concat((0,r.Z)(s),(0,r.Z)(c),(0,r.Z)(l));if(null!==u&&void 0!==u&&u.length){var d,p=[],h="\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",f=["\u9910\u98df\u987b\u77e5","\u6e38\u89c8\u987b\u77e5","\u8d2d\u7269\u987b\u77e5","\u6e29\u99a8\u63d0\u793a","\u51fa\u884c\u6307\u5357\u53ca\u6cd5\u89c4"];return null===u||void 0===u||u.forEach((function(e){var t,n=[];null===e||void 0===e||null===(t=e.contents)||void 0===t||t.forEach((function(t){f.indexOf(t.value)>-1||n.push({type:o.g.desc,descData:{isHtml:"\u6ce8\u610f\u4e8b\u9879"===(null===e||void 0===e?void 0:e.title),content:"\u6ce8\u610f\u4e8b\u9879"===(null===e||void 0===e?void 0:e.title)?t.value.replace(/<p><br><\/p>/g,""):t.value,styleType:0==t.key?"content":"title"}})})),d={title:"".concat(null===e||void 0===e?void 0:e.title,":"),contents:n},p.push(d)})),{title:h,list:p}}}},88747:function(e,t,n){var r=n(86865),o=n(5824),i=n(6714);t["Z"]=function(e){var t,n,r=e.getProductInfo,i=void 0===r?[]:r,s=null===i||void 0===i?void 0:i[0],l=s.refundPolicy,c=void 0===l?{}:l,u=s.basicInfo,d=void 0===u?{}:u,p="\u9000\u6539\u89c4\u5219",h=[],f=[],g=[];if(c&&0!==Object.keys(c).length){var m;if(null!==c&&void 0!==c&&null!==(t=c.structureContents)&&void 0!==t&&t.length)h=a(null===c||void 0===c?void 0:c.structureContents,d),null!==c&&void 0!==c&&null!==(m=c.specialStructureContents)&&void 0!==m&&m.length&&(g=[{name:"normal",text:"\u5e73\u65e5"},{name:"special",text:"\u7279\u6b8a\u65e5\u671f"}],f=a(null===c||void 0===c?void 0:c.specialStructureContents,d));else if(null!==c&&void 0!==c&&null!==(n=c.contents)&&void 0!==n&&n.length){var v=(0,o.oT)(null===c||void 0===c?void 0:c.contents,"1");h.push({title:"",contents:v})}return{title:p,list:h,specialList:f,tabList:g}}};var a=function(e,t){var n,o=[],a=[],s=[],l=[],c=[],u=t.flags,d=void 0===u?[]:u,p=t.beijingTime,h=t.localTime;return null===e||void 0===e||e.forEach((function(e){var t;if(null===e||void 0===e||null===(t=e.items)||void 0===t||t.forEach((function(t,n){"\u7528\u6237\u53d6\u6d88"===e.title?(c=[{content:[t.key],width:"75%",styleType:0===n?"gray":"",showExtra:0===n&&!d.includes("inChina")},{content:[t.value],width:"25%",styleType:0===n?"gray":""}],s.push(c)):"\u5546\u5bb6\u53d6\u6d88"===e.title&&(c=[{content:[t.key],width:"55%",styleType:0===n?"gray":"",showExtra:0===n&&!d.includes("inChina")},{content:[t.value],width:"45%",styleType:0===n?"gray":""}],l.push(c))})),"\u7528\u6237\u53d6\u6d88"===e.title){var u;o=[{type:r.g.table,tableData:{data:s,localTime:{title:"\u5f53\u5730\u65f6\u95f4",contents:(0,i.v)(p,h).contents}}}],a.push({title:e.title,contents:o});var f=[];null===e||void 0===e||null===(u=e.bottomDescs)||void 0===u||u.forEach((function(e,t){n={isHtml:!1,content:e,styleType:"lightContent"},f.push({type:r.g.desc,descData:n})})),a.push({title:"",contents:f})}else if("\u5546\u5bb6\u53d6\u6d88"===e.title){var g,m=[];null===e||void 0===e||null===(g=e.topDescs)||void 0===g||g.forEach((function(e,t){n={isHtml:!1,content:e,styleType:"content"},m.push({type:r.g.desc,descData:n})})),a.push({title:e.title,contents:m}),o=[{type:r.g.table,tableData:{data:l,localTime:{title:"\u5f53\u5730\u65f6\u95f4",contents:(0,i.v)(p,h).contents}}}],a.push({title:"",contents:o})}})),a}},96360:function(e,t,n){var r=n(86865);t["Z"]=function(e){var t=e.getProductInfo,n=void 0===t?[]:t,o=null===n||void 0===n?void 0:n[0],i=o.servicePeople,a=void 0===i?{}:i,s=o.itineraryClauseInfos,l=a.peopleApplicableRemark,c=void 0===l?"":l,u=a.targets,d=void 0===u?[]:u,p=!!s&&s.length>0;if(!p){var h="\u4eba\u7fa4\u8bf4\u660e",f=[],g=[],m=[],v=[];if(!Object.keys(a).length||!c&&(null===d||void 0===d||!d.length))return{title:"",list:[]};f=[[{content:["\u4eba\u7fa4"],width:"20%",styleType:"gray"},{row:[[{content:["\u6807\u51c6\u53ca\u8bf4\u660e"],width:"100%",styleType:"gray"}]],width:"80%"}]],null===d||void 0===d||d.forEach((function(e){f.push([{content:[e.name],width:"20%",styleType:"gray"},{row:[[{content:[e.targetDesc],width:"100%",styleType:"white"}]],width:"80%"}])})),null!==d&&void 0!==d&&d.length&&(g=[{type:r.g.table,tableData:{data:f}}],v.push({title:"",icon:"",contents:g}));var _={isHtml:!0,content:c,styleType:"lightContent"};return m.push({type:r.g.desc,descData:_}),v.push({title:"",icon:"",contents:m}),{title:h,list:v}}}},49100:function(e,t,n){n.d(t,{ZP:function(){return a}});var r=n(298),o=n(5824),i={returnAddress:"\u5feb\u9012\u8fd8\u4ef6\u5730\u5740"},a=function(e,t){var n=e.getProductInfo,a=void 0===n?[]:n,l=null===a||void 0===a?void 0:a[0],u=l.addInfos,d=void 0===u?[]:u,p=l.itineraryClauseInfos,h=[],f=!!p&&p.length>0,g={},m="\u4f7f\u7528\u65b9\u6cd5";if(f){var v=(0,o.Sx)(a,t);if(!c(p,v,"HowToUse"))return;g=Object.assign({},g,(0,r.Z)((0,r.Z)({},v),{},{itineraryClauseInfos:s(p,"HowToUse")}))}else{var _,y,x,b,Z=null===d||void 0===d?void 0:d.filter((function(e){return"HowToUse"===e.code}));if(null===Z||void 0===Z||!Z.length)return{};if(m=null===Z||void 0===Z||null===(_=Z[0])||void 0===_?void 0:_.title,null!==Z&&void 0!==Z&&null!==(y=Z[0])&&void 0!==y&&null!==(y=y.structureContents)&&void 0!==y&&y.length)null===Z||void 0===Z||null===(b=Z[0])||void 0===b||null===(b=b.structureContents)||void 0===b||b.forEach((function(e){e.title!==i.returnAddress&&h.push({title:e.title,icon:"",contents:(0,o.oT)(null===e||void 0===e?void 0:e.items)})}));else if(null!==Z&&void 0!==Z&&null!==(x=Z[0])&&void 0!==x&&null!==(x=x.contents)&&void 0!==x&&x.length){var I,C=(0,o.oT)(null===Z||void 0===Z||null===(I=Z[0])||void 0===I?void 0:I.contents,"1");h.push({title:"",contents:C})}}return{title:m,list:h,isNew:f,customData:g}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return r=e.map((function(e){var r,o=e.salePropId,i=e.salePropValId,a=e.clauseInfos,s={salePropId:o,salePropValId:i,data:{}},c=a.filter((function(e){return e.code===t}));return s.data={title:null===(r=c[0])||void 0===r?void 0:r.title,list:l(c[0],n)},s})),r},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];var n=[],r=e.clauseContents;return null===r||void 0===r||r.forEach((function(e){var r=e.title,i=(0,o.oT)(null===e||void 0===e?void 0:e.items,"0",t);n.push({title:r,icon:"",contents:i})})),n},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=null===t||void 0===t?void 0:t.initSalePropId,o=null===t||void 0===t?void 0:t.initSalePropValId;if(r&&o){var i,a,s=null===(i=e[0])||void 0===i||null===(i=i.clauseInfos)||void 0===i?void 0:i.filter((function(e){return e.code===n}));if(null===s||void 0===s||null===(a=s[0])||void 0===a||null===(a=a.clauseContents)||void 0===a||!a.length)return}return!0}},79181:function(e){e.exports=require("../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../cwx/ext/global")},33675:function(e){e.exports=require("../../../../cwx/cwx")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[3177,2107,1216,8592],(function(){return t(98746)}));e.O()}]);
//# sourceMappingURL=index.js.map