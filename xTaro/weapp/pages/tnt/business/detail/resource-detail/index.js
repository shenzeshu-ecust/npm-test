"use strict";require("../../../taroCommon"),(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[5026],{31616:function(e,t,n){var i,r=n(32180),a=n(45023),o=n(63228),s=n(79301),l=n(95308),d=n(298),c=n(57042),u=n(24460),_=n(81876),m=n(21867),h=n(86066),p=n(90201),x=n(95360),g=n(27415),v=n(68285),f=n(99876),w=n(97798),j=n(36115),b=n(27969),S=n(10081),Z=n(31137),k=n(97613),y=n(3164),I=n(26593),N=n(24239),C=n(86648),T=n(90664),V=n(209),B=n(63362),P=(0,y.Z)("resource-detail"),L=Z.hj.isInServer(),D=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n,i,r){var a,o,l,c,u,_,m,h,p,x,v,y,D,R,A,E,F,q,K,O,U;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=i.request,u=t.header,_=[(0,w.Z)(c,u),(0,f.Z)(c,u),(0,b.Z)(c,u)],m=["header-image","share-info","bottom-info","poplayer-content","button-infos","inventory-tip-info","mindTour-hide","price-info"],h=null===i||void 0===i||null===(a=i.request)||void 0===a?void 0:a.isSecKill,h&&(_.push((0,j.Z)(c,u)),m.push("bottom-button")),P.record("Secondreq"),e.next=9,t.http(_,null,null,null,null,{afterWaitPromList:r});case 9:if(p=e.sent,x=(0,g.Z)(p),v=x[0],y=x[1],D=x[2],R=x.slice(3),p){e.next=13;break}return e.abrupt("return");case 13:return P.recordEnd("Secondreq"),A={resourceGraphicDetailList:null===v||void 0===v||null===(o=v.data)||void 0===o?void 0:o.resourceGraphicDetailList,getPriceInfo:null===y||void 0===y?void 0:y.data,viewSpotImages:null===D||void 0===D?void 0:D.data},R.forEach((function(e){"getConfig"===e.__API_NAME__&&(A.getConfig=e),"resourceReserveCalendar"===e.__API_NAME__&&(A.resourceReserveCalendar=null===e||void 0===e?void 0:e.data),"resourceSecKillInfo"===e.__API_NAME__&&(A.resourceSecKillInfo=e)})),A.resourceReserveCalendar&&m.push("reserve-calendar"),h&&(T.F.save({resourceSecKillInfo:A.resourceSecKillInfo}),F=void 0,F=((null===p||void 0===p?void 0:p[3].extInfos)||[]).find((function(e){return"rateLimitMessage"===e.key})),null!==(E=F)&&void 0!==E&&E.value&&V.Z.show({content:F.value,btnOK:["\u8fd4\u56de\u4e0a\u9875"],btnCallBack:[function(){B.ZP.navigateBack()}]})),e.next=20,(0,C.g)(A.resourceSecKillInfo,null===n||void 0===n?void 0:n.resourceAddInfo);case 20:q=e.sent,P.record("SecondResponseFormat"),K=S.Z.getFormatByModules(c,(0,d.Z)((0,d.Z)({},n),{},{secKillEventStatus:q},A),m),P.recordEnd("SecondResponseFormat"),O=null===i||void 0===i||null===(l=i.request)||void 0===l?void 0:l.isPreSale,P.record("Seconrender"),L&&(0,k.vY)()?t.afterFetch((0,d.Z)((0,d.Z)({},i),K),{cb:function(){}}):(U=(0,N.b6)("Preload"),t.afterFetch((0,d.Z)((0,d.Z)({},i),K),!0,h||O,(function(){P.recordEnd("Seconrender"),Z.hj.isApp()&&(0,I.f)((0,d.Z)((0,d.Z)({key:"ttd_dev_pageload_render",id:220287},P.viewRecords(["Loadjs","Firstreq","Firstrender","Secondreq","Seconrender"])),{},{jsonData:{timestamp:(0,d.Z)({},P.getRecordStamps()),preloadData:U||{}}}),"devtrace")})));case 27:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),R=function(){function e(t){(0,c.Z)(this,e),(0,a.Z)(this,"target",void 0),this.target=t,(0,v.Z)(t,D,S.Z,["spot-list","price-info","bottom-button"])}return(0,u.Z)(e,null,[{key:"init",value:function(e){return(0,v.Z)(e.target,D,S.Z,["spot-list","price-info","bottom-button"])}}]),e}(),A=n(71515),E=n(72027),F=function(e){var t=e.imgData,n=e.preloadImage;return{imgUrl:null===t||void 0===t?void 0:t[0],preloadImage:n}},q=F,K={m_header_swiper:"index-module_Lx9Q0",m_image:"index-module_EIP1H"},O=n(92954),U=n.n(O),H=n(2269),M=Z.hj.isInServer(),G=Z.hj.isH5(),Q=Z.hj.isApp(),W=function(e){var t=q(e),n=t.imgUrl,i=t.preloadImage;return M&&i&&i.base64Url&&i.sourceImageUrl.includes(n)&&(n=i.base64Url),(0,H.jsx)(A.View,{className:(0,Z.AK)(K.m_header_swiper,"lcpContainer"),children:(0,H.jsx)(Z.Y,{src:n,showDefaultImg:!0,className:K.m_image,style:{width:G?"100%":Q?U().getSystemInfoSync().windowWidth:U().getSystemInfoSync().windowWidth+"px"},mode:"widthFix"})})},Y=W,z=function(e){return 45},X=n(34134),J=function(e,t){var n=(0,p.useRef)();n.current=e;var i=(0,p.useCallback)((function(){if("guide-detail"===t){var i,r={dataList:[{shareType:"WeixinFriend",imageUrl:(null===e||void 0===e||null===(i=e.imageUrl)||void 0===i?void 0:i.split("_C_")[0])+"_C_300_240_Q90.jpg",title:(null===e||void 0===e?void 0:e.title)||"",desc:(null===e||void 0===e?void 0:e.desc)||"",path:((null===e||void 0===e?void 0:e.path)||"")+"ctm_ref=vdc_ctm_5160&allianceid=263382&sid=1520352",miniProgramPath:"pages/market/web/index?from=".concat(null!==e&&void 0!==e&&e.path?encodeURIComponent(e.path):"")},{shareType:"Default",imageUrl:(null===e||void 0===e?void 0:e.imageUrl)||"",title:(null===e||void 0===e?void 0:e.title)||"",desc:(null===e||void 0===e?void 0:e.desc)||"",path:(null===e||void 0===e?void 0:e.path)||""}],businessCode:"sss"};Z.ft.customShare(r)}else{var a=(0,d.Z)((0,d.Z)({},n.current||{}),{},{shareType:"Default"});Z.ft.share(a)}}),[e]);return i},$=function(e){var t=e.shareInfo,n=e.opacity,i=e.scene,r=e.from,a=e.noData,o=J(t,i),s=(0,p.useCallback)((function(){if(r)return B.ZP.navigateTo({url:r,isUseHerf:!0});B.ZP.navigateBack()}),[]),l=n<.8&&!a?"light-content":"dark-content";return{handleShare:o,handleBack:s,statusBarStyle:l}},ee=$,te={m_margin:"index-module_n5eLK",m_header:"index-module_Rmbt_",m_header_nodata:"index-module_LsNxA",m_header_backimg:"index-module_I0jli",m_header_btn:"index-module_mFCg1",m_no_background:"index-module_BB11R",m_right_view_wrapper:"index-module_Ir6EQ",m_header_div:"index-module_Kwge4",m_header_div_content:"index-module_vkLn6"},ne=n(73921),ie=function(e){var t=e.handleBack,n=e.devtraceLog;return(0,H.jsx)(Z.En,{className:(0,Z.AK)(te.m_header_btn,te.m_margin),onClick:t,devTraceData:n,children:(0,H.jsx)(ne.m,{style:{fontSize:22,color:"#fff"},type:"back"})})},re=function(e){var t=e.handleShare,n=e.shareClickLog,i=e.devtraceLog;return(0,H.jsx)(Z.En,{className:te.m_header_btn,onClick:t,log:n,devTraceData:i,children:(0,H.jsx)(ne.m,{type:"share",style:{fontSize:22,color:"#fff"}})})},ae=function(e){return(0,H.jsx)(Z.En,{className:(0,Z.AK)(te.m_header_btn,te.m_margin,te.m_no_background),devTraceData:e.devtraceLog,children:(0,H.jsx)(X.Z,{styleType:5,size:44})})},oe=function(e){var t=e.title,n=e.opacity;return(0,H.jsx)(A.View,{className:te.m_header_div,style:{opacity:n},children:(0,H.jsx)(A.Text,{numberOfLines:1,className:te.m_header_div_content,children:t||"\u4ea7\u54c1\u8be6\u60c5"})})},se=function(e){var t=e.noData,n=e.shareClickLog,i=e.isShowShareBtn,r=e.title,a=e.logs,o=e.ishideshare,s=e.opacity,l=a||{},d=l.backClickDevtrace,c=l.shareClickDevtrace,u=l.messageClickDevtrace,_=ee(e),m=_.handleShare,h=_.handleBack,x=_.statusBarStyle,g=(0,p.useCallback)((function(){return(0,H.jsx)(oe,{title:r,opacity:s})}),[s]),v=(0,p.useCallback)((function(){return(0,H.jsx)(ie,{handleBack:h,devtraceLog:d})}),[h]),f=(0,p.useCallback)((function(){return t||!i?null:(0,H.jsxs)(A.View,{className:te.m_right_view_wrapper,children:[!o&&(0,H.jsx)(re,{handleShare:m,shareClickLog:n,devtraceLog:c}),(0,H.jsx)(ae,{devtraceLog:u})]})}),[t,m]);return(0,H.jsxs)(A.View,{className:(0,Z.AK)(te.m_header,t?te.m_header_nodata:"","ootd_header"),style:{height:z(!0)+1,borderBottomWidth:t?2/(U().getSystemInfoSync().pixelRatio||1):0},children:[(0,H.jsx)(Z.AF.View,{className:te.m_header_backimg,style:{height:z(!0),backgroundColor:"rgba(255, 255, 255, ".concat(s,")")}}),(0,H.jsx)(A.View,{style:{position:"absolute",width:"100%"},children:(0,H.jsx)(Z.sR,{leftViewWidth:44,rightViewWidth:88,backgroundColor:"transparent",renderCenterView:g,renderLeftView:v,renderRightView:f,statusBarProps:{translucent:Z.hj.isApp()||Z.hj.isInApp()&&!(0,k.Ry)(),barStyle:x,backgroundColor:"transparent",hidden:Z.hj.isInApp()}})})]})},le=se,de={m_spot_list_wrapper:"index-module_A8Ed7",m_spot_card_container:"index-module_QfZ6g",m_spot_card_list_wrapper:"index-module_WQMZW",m_spot_list_dot:"index-module_gOime",m_related_spot_label:"index-module_RHGbe",m_related_spot_label_icon:"index-module_Opef4",m_related_spot_label_text:"index-module_B1Frq",m_pagination_dots:"index-module_aYE0f",m_pagination_dot_item:"index-module__Y2P2",m_pagination_dot_item_active:"index-module_iHGZN",m_bg_needswiper:"index-module_AYrBt",m_bg:"index-module_qhpys",m_bg_common:"index-module_gI7oz",m_swiper_item:"index-module_L4UVq"},ce={m_related_spot_info:"index-module_el0y4",m_info_name_text:"index-module_TpNv9",m_info_center_wrapper:"index-module_IZFXb",m_info_score:"index-module_v1JB6",m_info_score_num:"index-module_Q6OeQ",m_info_score_unit:"index-module_EdBxy",m_info_review:"index-module_yvEcl",m_info_review_text:"index-module_FuyIp",m_info_address:"index-module_nGtws",m_info_address_text:"index-module_m2DjP"},ue=function(e){var t=e.spotInfo;return(0,H.jsxs)(A.View,{className:ce.m_related_spot_info,children:[(0,H.jsx)(A.View,{className:ce.m_info_name,children:(0,H.jsx)(Z.X_,{numberOfLines:1,className:ce.m_info_name_text,children:null===t||void 0===t?void 0:t.spotName})}),(0,H.jsx)(A.View,{className:ce.m_info_center_wrapper,children:null!==t&&void 0!==t&&t.cmtScore?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(A.View,{className:ce.m_info_score,children:[(0,H.jsx)(A.View,{children:(0,H.jsx)(A.Text,{className:ce.m_info_score_num,children:null===t||void 0===t?void 0:t.cmtScore})}),(0,H.jsx)(A.View,{children:(0,H.jsx)(A.Text,{className:ce.m_info_score_unit,children:"\u5206"})})]}),(0,H.jsx)(A.View,{className:ce.m_info_review,children:(0,H.jsx)(A.Text,{className:ce.m_info_review_text,children:"".concat(null===t||void 0===t?void 0:t.commentCount,"\u6761\u70b9\u8bc4")})})]}):(0,H.jsx)(A.View,{children:(0,H.jsx)(A.Text,{className:ce.m_info_review_text,children:"\u6682\u65e0\u70b9\u8bc4"})})}),(0,H.jsx)(A.View,{className:ce.m_info_address,children:(0,H.jsx)(Z.X_,{numberOfLines:1,className:ce.m_info_address_text,children:null===t||void 0===t?void 0:t.address})})]})},_e=ue,me={m_spot_card_item_wrapper:"index-module_vkHSY",m_next_card_arrow:"index-module_OGJgq",m_next_card_arrow_icon:"index-module_dUBsg",m_related_spot_img_wrapper:"index-module_zzFiX",m_distance_label:"index-module_RTF1n",m_distance_text:"index-module_ECiI3"},he=function(e){var t=e.spotInfo,n=t||{},i=n.url,r=(0,p.useCallback)((function(){B.ZP.navigateTo({url:i,needNewContainer:!0,isUseHybridgeMini:!0})}),[i]);return{handleClick:r}},pe=he,xe=n(4277),ge=function(e){var t,n=e.spotInfo,i=null===n||void 0===n||null===(t=n.imgUrls)||void 0===t?void 0:t[0];return(0,H.jsxs)(A.View,{className:me.m_related_spot_img_wrapper,children:[(0,H.jsx)(Z.Y,{style:{width:"100%",height:"100%"},src:i}),!(null===n||void 0===n||!n.distance)&&(0,H.jsx)(A.View,{style:me.m_distance_label,children:(0,H.jsx)(A.Text,{style:me.m_distance_text,children:"\u8ddd\u6211".concat(null===n||void 0===n?void 0:n.distance)})})]})},ve=function(){return(0,H.jsx)(A.View,{className:me.m_next_card_arrow,children:(0,H.jsx)(ne.m,{type:"forward",className:me.m_next_card_arrow_icon})})},fe=function(e){var t=e.spotInfo,n=pe(e),i=n.handleClick,r=(0,p.useContext)(xe._),a=r["tkt_resourcedetail_relatedspot_trans"]({viewspotid:null===t||void 0===t?void 0:t.spotId}),o=r["tkt-pageid-spot-click"]({viewspotid:null===t||void 0===t?void 0:t.spotId});return(0,H.jsxs)(Z.En,{className:me.m_spot_card_item_wrapper,onClick:i,testID:{ubtKey:a.actioncode,data:a,pageId:a.pageId},log:o,devTraceData:r["spotClickDevtrace"]&&r["spotClickDevtrace"]("".concat(null===t||void 0===t?void 0:t.spotName,"\uff08").concat(null===t||void 0===t?void 0:t.spotId,"\uff09")),children:[(0,H.jsx)(ge,{spotInfo:t}),(0,H.jsx)(_e,{spotInfo:t}),(0,H.jsx)(ve,{})]})},we=fe,je=n(90129),be=function(e){var t,n=e.relatedSpot,i=null===n||void 0===n?void 0:n.length,r=(null===n||void 0===n?void 0:n.length)>1,a=null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.relatedScenicSpotTitle,o=(0,p.useState)(1),s=(0,je.Z)(o,2),l=s[0],d=s[1],c=(0,p.useCallback)((function(e){d(e+1)}),[]);return{handleChange:c,currentPage:l,totalPage:i,needSwiper:r,relatedScenicSpotTitle:a}},Se=be,Ze=function(e){var t=e.relatedScenicSpotTitle;return(0,H.jsxs)(A.View,{className:de.m_related_spot_label,children:[(0,H.jsx)(ne.m,{type:"spot",className:de.m_related_spot_label_icon}),(0,H.jsx)(A.Text,{className:de.m_related_spot_label_text,children:t||"\u76f8\u5173\u666f\u70b9"})]})},ke=function(e){var t=e.currentPage,n=e.datas,i=e.spotClassName,r=void 0===i?"":i,a=e.spotStyle,o=void 0===a?{}:a;return(0,H.jsx)(A.View,{className:(0,Z.AK)(de.m_pagination_dots,r),style:o,children:n.map((function(e,n){var i=t===n+1;return(0,H.jsx)(A.View,{className:(0,Z.AK)(de.m_pagination_dot_item,i?de.m_pagination_dot_item_active:"")},n)}))})},ye=function(e){var t=e.style,n=void 0===t?"":t,i=e.relatedSpot,r=Se(e),a=r.handleChange,o=r.needSwiper,s=r.currentPage,l=r.totalPage,d=r.relatedScenicSpotTitle;return(0,H.jsxs)(A.View,{className:(0,Z.AK)(de.m_spot_list_wrapper,n),children:[(0,H.jsx)(Z.hQ,{src:o?"https://dimg04.c-ctrip.com/images/0AS0s1200092vgkxrBEF9.png_.webp":"https://dimg04.c-ctrip.com/images/0AS261200092vgis82ED5.png_.webp",className:(0,Z.AK)(de.m_bg_common,o?de.m_bg_needswiper:de.m_bg),children:(0,H.jsxs)(A.View,{className:de.m_spot_card_container,children:[(0,H.jsx)(Ze,{relatedScenicSpotTitle:d}),(0,H.jsx)(A.View,{className:de.m_spot_card_list_wrapper,children:o?(0,H.jsx)(A.Swiper,{current:s-1,onChange:function(e){a(e.detail.current)},children:i.map((function(e,t){return(0,H.jsx)(A.SwiperItem,{className:Z.hj.isApp()?"":de.m_swiper_item,children:(0,H.jsx)(we,{spotInfo:e},t)},t)}))}):(0,H.jsx)(we,{spotInfo:null===i||void 0===i?void 0:i[0]})})]})}),o&&(0,H.jsx)(ke,{currentPage:s,totalPage:l,datas:i,spotClassName:de.m_spot_list_dot})]})},Ie=ye,Ne=n(9156),Ce=n(96343),Te=(0,y.Z)("resource-detail"),Ve=function(e){Be();var t=e||{},n=t.target,i=void 0===n?{}:n,r=i.state.request,a=(0,p.useState)(0),o=(0,je.Z)(a,2),s=o[0],l=o[1],d=(0,p.useCallback)((function(e){var t=Pe(e);l(t)}),[l]),c=(0,p.useCallback)((function(e){(0,Ce.Z)(i,r,e)}),[i,r]);return{target:i,state:i.state,opacity:s,onPageScroll:d,changeBottomCallback:c}},Be=function(){var e=(0,N.b6)("Loadjs");e&&(Te.set("Loadjs",e),Te.recordEnd("Loadjs"),(0,N.ku)("Loadjs"))},Pe=function(e){var t=0;return t=e<200?e<0?0:e/200:1,t},Le=Ve,De={m_head:"index-module_xygIn",m_nodata:"index-module_HFM5V",m_img:"index-module_Tx706",m_img_snapshot:"index-module_DEQ2l",m_snapshot_font:"index-module_eOp3A",m_resource_font:"index-module_EVAvr"},Re={m_content_breathe:"index-module_Qe0c3",m_service_titlebox:"index-module_fRBae"},Ae=new Array(2).fill(0),Ee=function(e){(0,m.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"render",value:function(){var e=this.props.topConfig,t=void 0===e?[{width:"100%",height:15},{width:"100%",height:15},{width:"62%",height:15}]:e;return(0,H.jsx)(A.View,{className:Re.m_content_breathe,children:Ae.map((function(e,n){return(0,H.jsx)(A.View,{className:Re.m_service_titlebox,children:t.map((function(e,t){return(0,H.jsx)(A.View,{style:{marginBottom:16},children:(0,H.jsx)(A.View,{style:{width:e.width||"100%",height:e.height||16,backgroundColor:e.backgroundColor||"#f0f2f9",borderRadius:e.borderRadius||2}})},"item_".concat(t))}))},n)}))})}}]),n}(p.Component),Fe={m_header_breathe:"index-module_fTfl3",m_header_breathe_container:"index-module_SI3Ba",m_header_breathe_item:"index-module_ImIlp"},qe=function(e){(0,m.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"render",value:function(){return(0,H.jsxs)(A.View,{className:Fe.m_header_breathe,children:[(0,H.jsx)(A.Image,{src:"https://dimg04.c-ctrip.com/images/0AS1j120008xavs4z0574.png.webp",style:{width:50,height:56}}),(0,H.jsx)(A.View,{className:Fe.m_header_breathe_container,children:(0,H.jsx)(A.View,{className:Fe.m_header_breathe_item})})]})}}]),n}(p.Component),Ke={m_card_breathe:"index-module_ZtvFQ",m_card_breathe_l:"index-module_FzGwQ",m_card_breathe_l_item:"index-module_v5d5z",m_card_breathe_r:"index-module_uFoK7"},Oe=function(e){(0,m.Z)(n,e);var t=(0,h.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"render",value:function(){var e=this.props.rightConfig,t=void 0===e?[{width:150,height:25},{width:170,height:25},{width:170,height:25}]:e;return(0,H.jsxs)(A.View,{className:Ke.m_card_breathe,children:[(0,H.jsx)(A.View,{className:Ke.m_card_breathe_l,children:(0,H.jsx)(A.View,{className:Ke.m_card_breathe_l_item})}),(0,H.jsx)(A.View,{style:{marginLeft:15},children:t.map((function(e,t){return(0,H.jsx)(A.View,{className:Ke.m_card_breathe_r,children:(0,H.jsx)(A.View,{style:{width:e.width||"100%",height:e.height||16,backgroundColor:e.backgroundColor||"#f0f2f9",borderRadius:e.borderRadius||2}})},t)}))})]})}}]),n}(p.Component),Ue=n(36165),He={m_duty_desc_font:"index-module_o9rKL",m_duty_desc:"index-module_De_7r",m_duty_desc_see:"index-module_TWtKa",m_see_font:"index-module_FkgKu"},Me=function(e){var t=e.resourceId,n=function(){if(Z.hj.isH5()){var e="/webapp/ticket/dest/r".concat(t,".html?isHideNavBar=YES");B.ZP.navigateTo({url:e})}else if(Z.hj.isMini()){var n="/pages/tnt/business/detail/resource-detail/index?resourceid=".concat(t);B.ZP.navigateTo({url:n})}else B.ZP.navigateTo({url:"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=resourceDetail&resourceid=".concat(t)})};return{toDetail:n}},Ge=Me,Qe=function(e){var t=e.title,n=Ge(e),i=n.toDetail;return(0,H.jsxs)(A.View,{className:He.m_duty_desc,children:[(0,H.jsx)(A.Text,{className:He.m_duty_desc_font,children:t}),(0,H.jsx)(Z.En,{onClick:i,className:He.m_duty_desc_see,children:(0,H.jsx)(A.Text,{className:He.m_see_font,children:"\u70b9\u51fb\u67e5\u770b\u6700\u65b0\u5546\u54c1\u8be6\u60c5"})})]})},We=Qe,Ye={container:"index-module__ZJVn",img:"index-module___wRB",tip:"index-module_KtqRd",btn:"index-module_OiTEK",btnText:"index-module_UpO7a"},ze=function(e){return(0,H.jsxs)(A.View,{className:Ye.container,children:[(0,H.jsx)(A.Image,{src:"https://dimg04.c-ctrip.com/images/0AS4e12000amicivdAE29.png_.webp",className:Ye.img}),(0,H.jsx)(A.Text,{className:Ye.tip,children:"App\u7248\u672c\u8fc7\u4f4e\uff0c\u6682\u4e0d\u652f\u6301\u9884\u8ba2\u3002\u8bf7\u66f4\u65b0\u81f3\u6700\u65b0\u7248\u643a\u7a0bApp\u9884\u8ba2\u54e6"}),(0,H.jsx)(Z.En,{className:Ye.btn,onClick:function(){B.ZP.navigateBack()},children:(0,H.jsx)(A.Text,{className:Ye.btnText,children:"\u8fd4\u56de\u4e0a\u4e00\u9875"})})]})},Xe=ze,Je=function(e){return!Z.hj.isH5()||!e},$e=(0,x.RI)((function(e){var t=e.headerImages,n=e.spotList,i=e.titleInfoProps,r=e.isbbc,a=e.onShowSecondPoplayer,o=e.preloadImage,s=e.dutyDesc,l=e.resourceId,c=e.snapshotId,u=Je(r);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Y,{imgData:t,preloadImage:o}),(0,H.jsxs)(A.View,{className:De.m_head,children:[(0,H.jsx)(A.View,{children:(0,H.jsx)(Ne.Z,(0,d.Z)((0,d.Z)({snapshotId:c},i),{},{onShowSubtitlesPoplayer:a}))}),s?(0,H.jsx)(We,{title:s,resourceId:l}):null,u&&n.length?(0,H.jsx)(Ie,{relatedSpot:n}):null]})]})})),et=p.forwardRef((function(e,t){var n=Le(e),i=n.target,r=n.state,a=n.opacity,o=n.onPageScroll,s=n.changeBottomCallback;(0,p.useImperativeHandle)(t,(function(){return{changeBottom:s}}));var l=r.spotList,c=r.headerImages,u=r.shareInfo,_=r.isLoading,m=r.contentList,h=r.noData,x=r.request,g=r.preloadImage,v=r.dutyDesc,f=x||{},w=f.isbbc,j=f.isH5,b=f.from,S=f.isInMini,k=f.ishideshare,y=f.snapshotId,I=f.resourceId,N=f.needUpdate,C=Z.hj.isMini(),T=(0,p.useCallback)((function(e){return(0,H.jsx)($e,(0,d.Z)((0,d.Z)({isbbc:w,spotList:l,headerImages:c},e),{},{preloadImage:g,dutyDesc:v,resourceId:I,snapshotId:y}))}),[$e,l,c]),V=(0,Ue.O)(i);switch(!0){case _:return(0,H.jsxs)(A.View,{style:{backgroundColor:"#fff",height:C?"100vh":"100%"},children:[(0,H.jsx)(qe,{}),(0,H.jsx)(A.View,{style:{marginLeft:16},children:(0,H.jsx)(Oe,{})}),(0,H.jsx)(Ee,{})]});case N:return(0,H.jsxs)(H.Fragment,{children:[S?null:(0,H.jsx)(le,{opacity:a,shareInfo:u,noData:_||N,shareClickLog:V["tkt_spotdetail_share_click"],isShowShareBtn:!j,logs:V,from:b,ishideshare:k,title:y?"\u8d44\u6e90\u5feb\u7167":"\u4ea7\u54c1\u8be6\u60c5"}),(0,H.jsx)(Xe,{})]});case!h&&(null===m||void 0===m?void 0:m.length)>0:return(0,H.jsxs)(H.Fragment,{children:[S?null:(0,H.jsx)(le,{opacity:a,shareInfo:u,noData:_,shareClickLog:V["tkt_spotdetail_share_click"],isShowShareBtn:!j,logs:V,from:b,ishideshare:k,title:y?"\u8d44\u6e90\u5feb\u7167":"\u4ea7\u54c1\u8be6\u60c5"}),(0,H.jsx)(E.Z,(0,d.Z)((0,d.Z)({target:i},r),{},{onPageScroll:o,ResourcePageHeadComp:T,changeBottomCallback:s}))]});default:return(0,H.jsxs)(H.Fragment,{children:[S?null:(0,H.jsx)(le,{opacity:1,shareInfo:null,noData:h,logs:V,title:y?"\u8d44\u6e90\u5feb\u7167":"\u4ea7\u54c1\u8be6\u60c5"}),(0,H.jsxs)(A.View,{className:De.m_nodata,style:{height:C?"100vh":"100%"},children:[(0,H.jsx)(A.Image,{src:y?"https://dimg04.c-ctrip.com/images/0AS1012000a2ejox15B8B.png?20200924162334.webp":"https://dimg04.c-ctrip.com/images/1o54312000bywu4qq34C7.png?20200924162334.webp",className:y?De.m_img_snapshot:De.m_img}),y?(0,H.jsx)(A.Text,{className:De.m_snapshot_font,children:"\u5f53\u524d\u9875\u9762\u672a\u627e\u5230"}):(0,H.jsx)(A.Text,{className:De.m_resource_font,children:"\u672c\u4ea7\u54c1\u5df2\u6682\u505c\u552e\u5356"})]})]})}})),tt=(0,x.RI)(et),nt=n(99135),it=Z.hj.isInServer(),rt=function(e){(0,m.Z)(n,e);var t=(0,h.Z)(n);function n(e){var i,r;return(0,c.Z)(this,n),r=t.call(this,e),(0,a.Z)((0,_.Z)(r),"state",void 0),(0,a.Z)((0,_.Z)(r),"initialState",void 0),(0,a.Z)((0,_.Z)(r),"resourceDetailRef",void 0),r.initialState=(null===e||void 0===e?void 0:e.initialState)||{},r.resourceDetailRef=null,r.state=(0,d.Z)((0,d.Z)((0,d.Z)({},n.getBaseState()),null===(i=r.initialState)||void 0===i?void 0:i.state),{},{request:S.Z.getRequestParams(n.ctx)}),setTimeout((function(){var e;Z.HG.setNavigationBarTitle({title:null!==(e=r.state.request)&&void 0!==e&&e.snapshotId?"\u8d44\u6e90\u5feb\u7167":"\u4ea7\u54c1\u8be6\u60c5"})}),10),!Z.hj.isInServer()&&new R((0,_.Z)(r)),nt.B.register("tnt_bookingSkidSoldout_notice",(function(){var e;console.log("tnt_bookingSkidSoldout_notice======="),null===(e=r.resourceDetailRef)||void 0===e||e.changeBottom()}),!0),nt.B.register("ottdSecKillSoldOut",(function(e){var t,n;null!==e&&void 0!==e&&e.resourceId&&e.resourceId==(null===(t=r.state.request)||void 0===t?void 0:t.resourceId)&&(null===(n=r.resourceDetailRef)||void 0===n||n.changeBottom({useReq:!1,soldOut:!0,description:""}))}),!0),r}return(0,u.Z)(n,[{key:"afterFetch",value:function(e,t,n,i){var r=(0,d.Z)((0,d.Z)({},e),{},{isLoading:!1});this.setState(r,i)}},{key:"pageDidAppear",value:function(){}},{key:"componentWillUnmount",value:function(){nt.B.destroy("tnt_bookingSkidSoldout_notice",(function(){})),nt.B.destroy("ottdSecKillSoldOut",(function(){}))}},{key:"render",value:function(){var e=this;return(0,H.jsx)(tt,{target:this,ref:function(t){return e.resourceDetailRef=t}})}}],[{key:"getBaseState",value:function(){return{request:S.Z.getRequestParams(n.ctx),isLoading:!it,noData:!1}}}]),n}(x.ZP);i=rt,(0,a.Z)(rt,"getInitialState",(0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.getBaseInitialState(i,R);case 2:return t=e.sent,t.state.isLoading||(t.state.isLoading=!1),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))));var at=(0,o.Z)(rt,(0,a.Z)((0,a.Z)((0,a.Z)({},Z.GI.PLATFORM_TYPE.H5,10650003173),Z.GI.PLATFORM_TYPE.Mini,10650097514),Z.GI.PLATFORM_TYPE.CRN,10650055126),"resource-detail"),ot=at,st={navigationBarTitleText:"\u4ea7\u54c1\u8be6\u60c5",usingComponents:{},navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",backgroundColor:"#eeeeee",backgroundTextStyle:"light",rnPageName:"resource-detail"};Page((0,r.createPageConfig)(ot,"pages/tnt/business/detail/resource-detail/index",{root:{cn:[]}},st||{}))},79181:function(e){e.exports=require("../../../../../cwx/cpage/initNavigator")},91783:function(e){e.exports=require("../../../../../cwx/cpage/ubt_wx")},56884:function(e){e.exports=require("../../../../../cwx/cwx")},65238:function(e){e.exports=require("../../../../../cwx/ext/global")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[3177,2107,1216,8592],(function(){return t(31616)}));e.O()}]);
//# sourceMappingURL=index.js.map