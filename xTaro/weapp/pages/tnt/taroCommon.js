(wx["tripTaroGlobal30"]=wx["tripTaroGlobal30"]||[]).push([[3177],{6148:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var i=n(92954),o=n.n(i),r=function(e){var t=375,n=o().getSystemInfoSync().windowWidth;return e*n/t}},26040:function(e,t){"use strict";var n={isEventExistPromise:function(e){return Promise.resolve(1)},addEventPromise:function(e){return Promise.resolve(1)}};t["Z"]=n},209:function(e,t,n){"use strict";var i=n(31137),o=n(92954),r=n.n(o),a={show:function(e){if(e){var t="",n="",o=!(!e.btnOK||2!=e.btnOK.length),a=function(){},s=function(){};if(e.btnOK&&e.btnOK.length>0){var c=e.btnOK;1===c.length?n=c[0]:(t=c[0],n=c[1])}if(e.btnCallBack&&e.btnCallBack.length>0){var l=e.btnCallBack;1===l.length?s=l[0]:(a=l[0],s=l[1])}r().showModal({title:e.title||"",content:e.content||"",cancelText:o||i.hj.isMini()?t||"\u53d6\u6d88":null,confirmText:n||"\u786e\u8ba4",showCancel:o,success:function(e){i.hj.isAlipay()?e.confirm?s():a():e.confirm?s():e.cancel&&a()}})}}};t["Z"]=a},99135:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var i=n(31137),o=n(32180)["window"],r={register:function(e,t,n){var r,a;n&&(null===i.Y8||void 0===i.Y8||null===(r=i.Y8.Observer)||void 0===r||r.addObserverForKey(e,(function(e){var n;if(console.log(e,"addObserverForKey============"),null!==e&&void 0!==e&&null!==(n=e.options)&&void 0!==n&&null!==(n=n.detail)&&void 0!==n&&n.data){var i,o=null===e||void 0===e||null===(i=e.options)||void 0===i||null===(i=i.detail)||void 0===i?void 0:i.data;t&&t(Array.isArray(o)?null===o||void 0===o?void 0:o[0]:o)}else t&&t(e)})),"undefined"!==typeof o&&(null===(a=o)||void 0===a||null===(a=a["CtripEvent"])||void 0===a||a.addEventListener(e,t)))},destroy:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"resize",n=arguments.length>1?arguments[1]:void 0;console.log("destroy============="),null===i.Y8||void 0===i.Y8||null===(e=i.Y8.Observer)||void 0===e||e.removeObserverForKey(t,n)},send:function(e,t){var n;null===i.Y8||void 0===i.Y8||null===(n=i.Y8.Observer)||void 0===n||n.noti(e,t)}}},39720:function(e,t,n){"use strict";var i=n(31137),o=n(24239),r=function(){return{clientInfo:{currency:"CNY",locale:"zh-CN",pageId:(0,o.dD)().toString(),channelId:"",version:"8.2.2",appPlatform:"",extension:[],syscode:"30",cid:""},enviroment:i.GI.getDevEnv()}};t["Z"]=r},24239:function(e,t,n){"use strict";n.d(t,{ku:function(){return m},Rd:function(){return v},b6:function(){return f},dD:function(){return u},FD:function(){return h},PX:function(){return c},bw:function(){return p}});var i=function(){return""},o=n(31137),r=n(32180)["window"],a=new Map,s="",c=function(e){var t=e.pageId,n=String(Math.ceil(1e8*Math.random()));l(t),d(n)},l=function(e){return s=e},u=function(){return s},d=function(e){return e},p={targetRef:"",setRef:function(e){e=void 0===e?null===i||void 0===i?void 0:i():e,this.targetRef=e},getRef:function(){return this.targetRef}},h=function(e,t){a.set(e,t)},f=function(e){return a.get(e)},m=function(e){a.delete(e)},v=function(e){if(!o.hj.isInServer()){if(r.__middleware)return r.__middleware[e];var t=r.__web_data__?JSON.parse(decodeURIComponent(r.__web_data__)):{};return t[e]}}},93081:function(e,t,n){"use strict";n.d(t,{Gx:function(){return y},Zw:function(){return g},FN:function(){return _},eV:function(){return v}});var i=n(79301),o=n(95308),r=n(39720),a=n(97613),s=n(31137),c=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l={weapp:"WAP/WECHATAPP",alipay:"WAP/ALIPAYAPP",tt:"WAP/TOUTIAOAPP",swan:"WAP/BAIDUAPP",kwai:"WAP/KUAISHOUAPP",quick:"WAP/QUICKAPP"},u=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var i={PROD:"https://sec-m.ctrip.com",FAT:"http://gateway.m.fws.qa.nt.ctripcorp.com"}[s.GI.getDevEnv()],o={url:"".concat(i,"/restapi/soa2/12530/json/crawlerScripting"),fixedParams:t,getScriptFromRsp:function(e){return e&&e.data&&e.data.data&&e.data.data.script},head:(0,r.Z)(),callback:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fingerprintKeys,o=n.crawlerKey;"string"!==typeof t&&(t="");var r={crawlerKey:t,MiniType:s.hj.isBaidu()?l.swan:"WAP/WECHATAPP"};i&&o&&(r={fingerprintKeys:i,crawlerKey:o}),e(r)}};s.Y8&&s.Y8.createAntiSpiderRequest?s.Y8.createAntiSpiderRequest(o):n(null)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=s.hj.isBaidu,p=s.hj.isInApp,h=(0,r.Z)(),f={appid:"wx0e6ed4f51db9d078"};(d()||(0,a.CX)()||p())&&(f.head={syscode:h.clientInfo.syscode});var m=[],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m=e},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/");return t=t.pop(),t=t.split("?"),t=t.pop(),m.indexOf(t)>-1},g=function(){c(f)},y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(f);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},18866:function(e,t,n){"use strict";n.d(t,{B2:function(){return f}});var i=n(22276),o=n(90129),r=n(93212),a=n(79301),s=n(298),c=n(95308),l=n(31137),u=n(30194),d=n(93081),p=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n,p,f,m,v){var _,g,y,x,k,b,Z,I,w,S,P,T,C,D,R,j,N,V,L,E;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _=v||{},g=_.beforeWaitPromList,y=void 0===g?[]:g,x=_.afterWaitPromList,k=void 0===x?[]:x,b=function(e){var t,n=[];if(e.forEach((function(e){"function"!==typeof e&&null!==e&&void 0!==e&&e.__SEND_LOG_ERROR__&&n.push(null===e||void 0===e?void 0:e.__SEND_LOG_ERROR__)})),!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],c=[];n.forEach((function(e){var t;s.push({url:e.url,type:e.type,stack:null===(t=e.data)||void 0===t?void 0:t.stack}),c.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(c)}catch(e){console.log("get response tostring stack msg error",e)}var l={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,u.Vg)(l)}catch(e){}}},Z=[],I={},w={},S=0,P=t.every((function(e){return!!e.__isNotCoreApi})),t.forEach((function(e){if(l.hj.isInServer()&&l.hj.isH5())if("dev"===process.env.CURRENT_DEV_ENV){var t=l.GI.getDevEnv(f);t===l.GI.DEV_ENV_TYPE.FAT?void 0===e.isSOAAgent&&(e.isSOAAgent=!0,e.useAutoParseSoaParams=!0):(e.isSOAAgent=!1,e.useAutoParseSoaParams=!1)}else void 0===e.isSOAAgent&&(e.isSOAAgent=!0,e.useAutoParseSoaParams=!0);l.hj.isApp()&&e.data.head&&e.data.head.extension&&(e.others={extension:e.data.head.extension},delete e.data.head),e.beforeHandleData=function(){var t=(0,c.Z)((0,a.Z)().mark((function t(n){var i,o;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(0,d.FN)(e.url)){t.next=14;break}return t.prev=1,t.next=4,(0,d.Gx)();case 4:i=t.sent,o=[],i&&i.crawlerKey&&(o=[{name:"crawlerKey",value:i.crawlerKey}],i.fingerprintKeys&&o.push({name:"fingerprintKeys",value:i.fingerprintKeys}),i.MiniType&&o.push({name:"MiniType",value:i.MiniType})),n.head=(0,s.Z)((0,s.Z)({},n.head),{},{extension:n.head&&n.head.extension?n.head.extension.concat(o):o}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0,"\u53cd\u722c\u62a5\u9519");case 13:return t.abrupt("return",n);case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();var i=e.isFromPrefetch,o=function(e,t,n){if(!i)return{url:e,data:t,type:n}};e.afterHandleData&&"function"===typeof e.afterHandleData||(e.afterHandleData=function(t){var n,i,a=null===t||void 0===t?void 0:t.data,s=!t.isSuccess||"Success"!==(null===(n=a)||void 0===n||null===(n=n.ResponseStatus)||void 0===n?void 0:n.Ack)&&"Success"!==(null===(i=a)||void 0===i||null===(i=i.responseStatus)||void 0===i?void 0:i.Ack),c=e.timeout,l=!a||"string"===typeof a;return s&&!e.isFromPrefetch&&a&&!c&&"object"===(0,r.Z)(a)&&(a.__hasSendLogError=!0),l&&(a={__invalidResponse:a,__hasSendLogError:!0}),!s||e.isFromPrefetch||c||(a.__SEND_LOG_ERROR__=o(e.url,t,t.isSuccess?"tnt_SOA_Ack_Fail_detail":"tnt_SOA_Network_Fail_detail")),a.__API_NAME__=e.__API_NAME__||e.url,a});var u="".concat(e.url,"__").concat(Math.random(),"__").concat(Date.now());if(P||l.hj.isH5()||!e.__isNotCoreApi)S++,Z.push(e.__delay__>0?new Promise((function(t){setTimeout((function(){l.x.request(e,n,p,f).then((function(e){return t(null===e||void 0===e?void 0:e[0]),null===e||void 0===e?void 0:e[0]})).finally((function(){S--,0===S&&Object.keys(w).forEach((function(e){var t=w[e];I[e]&&I[e]((function(){return t})),delete I[e],delete w[e]}))}))}),e.__delay__)})):l.x.request(e,n,p,f).then((function(e){return null===e||void 0===e?void 0:e[0]})).finally((function(){S--,0===S&&Object.keys(w).forEach((function(e){var t=w[e];I[e]&&I[e]((function(){return t})),delete I[e],delete w[e]}))})));else{Z.push(new Promise((function(e){I[u]=function(t){console.log("notCoreRequestResolveMap",u,t),e(t)}})));var h=null;h=e.__delay__>0?new Promise((function(t,i){setTimeout((function(){l.x.request(e,n,p,f).then((function(e){return I[u]&&I[u](null===e||void 0===e?void 0:e[0]),delete I[u],delete w[u],t(null===e||void 0===e?void 0:e[0]),null===e||void 0===e?void 0:e[0]})).catch((function(e){return I[u]&&I[u](null),delete I[u],delete w[u],i(e),e}))}),e.__delay__)})):l.x.request(e,n,p,f).then((function(e){return I[u]&&I[u](null===e||void 0===e?void 0:e[0]),delete I[u],delete w[u],null===e||void 0===e?void 0:e[0]})).catch((function(e){return I[u]&&I[u](null),delete I[u],delete w[u],e})),w[u]=h}})),T=Promise.all(y),C=Promise.all(k),D=Promise.all(Z),e.next=13,Promise.all([T,D,C]);case 13:return R=e.sent,j=(0,o.Z)(R,3),N=j[0],V=j[1],L=j[2],E=[].concat((0,i.Z)(N),(0,i.Z)(V),(0,i.Z)(L)),m&&h(t,E,m),b(E),e.abrupt("return",E);case 22:case"end":return e.stop()}}),e)})));return function(t,n,i,o,r,a){return e.apply(this,arguments)}}(),h=function(e,t,n){try{n.needDevTrace&&t.map((function(t,i){var o,r,a;if("function"!==typeof t){var c=null===t||void 0===t||null===(o=t.ResponseStatus)||void 0===o||null===(o=o.Extension)||void 0===o?void 0:o.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));c&&(0,u.Vg)((0,s.Z)((0,s.Z)({rootMessageId:c.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},null===n||void 0===n?void 0:n.devTraceData),{},{scene:"".concat((null===(r=n.devTraceData)||void 0===r?void 0:r.scene)||""," ").concat(null===e||void 0===e||null===(a=e[i])||void 0===a?void 0:a.url)}))}}))}catch(e){}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=e.map((function(e){if("function"!==typeof e)return e;t.push(e())}));return[n,t]};t["ZP"]=p},30194:function(e,t,n){"use strict";n.d(t,{Vg:function(){return u},gp:function(){return c},Zz:function(){return l}});var i=n(298),o=(n(92954),n(26593)),r=n(38696),a="",s=function(){return{}},c=function(e){e.body instanceof Array==0&&(e.body=(0,i.Z)((0,i.Z)({},e.body),{},{traceId:a,isTaroTnt:!0},s())),e.type=e.type?e.type:"common_other";var t=0==e.type.indexOf("ttd_dev_")?e.type:"ttd_dev_".concat(e.type);e.body.length?e.body.forEach((function(e){(0,o.f)((0,i.Z)((0,i.Z)({},e),{},{key:t}),"devTrace")})):(0,o.f)((0,i.Z)((0,i.Z)({},e.body),{},{key:t}),"devTrace")},l=function(e,t){console.log("sendUbtLog",e,t),e&&t&&(e.method&&"function"===typeof e.method&&(e=e.method()),(0,o.f)(e,t))},u=r.Z},38696:function(e,t,n){"use strict";var i=n(298),o=n(24239),r=n(26593);t["Z"]=function(e){try{var t,n=(0,i.Z)({devKey:"km_ticket_trace_log"},e);!n.key||null!==(t=n.jsonData)&&void 0!==t&&t.value?n.jsonData=(0,i.Z)((0,i.Z)({},n.jsonData),{pageId:String((0,o.dD)()||"")}):(n.key="tkt_5200001",n.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38",pageId:String((0,o.dD)()||"")}),(0,r.f)(n,"devtrace")}catch(e){console.log(e,"devTrace error")}}},26593:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var i=n(31137),o=function(e,t){t=t&&t.toLocaleLowerCase();try{"devtrace"==t?i.hS.logDevTrace(e.devKey||e.key,{data:JSON.stringify(e)}):"pv"==t?i.hS.logSendPV(e):i.hS.logTrace(e.key,e)}catch(e){console.log(e)}}},32768:function(e,t,n){"use strict";var i=n(94262),o={create:function(e){return(0,i.Z)(e),{panHandlers:{}}}};t["Z"]=o},63362:function(e,t,n){"use strict";var i=n(298),o=n(31137),r=n(30194),a=n(24239),s=function(){(0,r.gp)({type:"ttd_dev_pagenext_click",body:{pageId:(0,a.dD)()}})},c=function(e){o.Px.navigateTo((0,i.Z)((0,i.Z)({},e),{},{beforeRouteChange:s}))};t["ZP"]={navigateTo:c,redirectTo:o.Px.redirectTo,navigateBack:o.Px.navigateBack}},3164:function(e,t){"use strict";var n={};t["Z"]=function(e){return n[e]||(n[e]={_tmpTimeMap:{},_recordTimeMap:{},_recordTimeStamp:{},set:function(e,t){this._tmpTimeMap[e]=t},setRecord:function(e,t,n){this._recordTimeMap[e]=n-t,this._recordTimeStamp[e]={startTime:t,endTime:n}},record:function(e){this._tmpTimeMap[e]=(new Date).getTime(),this._recordTimeStamp[e]={startTime:this._tmpTimeMap[e]}},recordEnd:function(e){var t=0,n=(new Date).getTime();return this._tmpTimeMap[e]&&(t=n-this._tmpTimeMap[e]),this._recordTimeMap[e]=t,this._recordTimeStamp[e]={startTime:this._tmpTimeMap[e],endTime:n},t},viewRecords:function(e){var t=this,n={};return e.forEach((function(e){n[e]=t._recordTimeMap[e]||0})),n},viewAllRecords:function(){var e=this,t={},n=Object.keys(this._recordTimeMap)||[];return n.length&&n.forEach((function(n){t[n]=e._recordTimeMap[n]||0})),t},getRecordStamps:function(){return this._recordTimeStamp},clearRecord:function(){n[e]=null}}),n[e]}},61466:function(e,t,n){"use strict";n.d(t,{ZP:function(){return h}});var i=n(298),o=n(92954),r=n.n(o),a=n(209),s=n(31137),c=function(e){try{var t,n=(0,i.Z)({devKey:"km_ticket_trace_log"},e);!n.key||null!==(t=n.jsonData)&&void 0!==t&&t.value||(n.key="tkt_5200001",n.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38"}),s.hS.logDevTrace(n.devKey||n.key,{data:JSON.stringify(n)})}catch(e){console.log(e,"devTrace error")}},l=1500,u=null,d=function(e){if(""===e||null===e||void 0===e)return!1;var t=(e.match(/[\x00-\xff]/g)||[]).length,n=e.length,o=t+2*(n-t);return o>40&&(u&&c((0,i.Z)((0,i.Z)({},u),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),a.Z.show({content:e,btnOK:["\u77e5\u9053\u4e86"]}),!0)},p={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;d(e)||(u&&c((0,i.Z)((0,i.Z)({},u),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),r().showToast({title:e||"",duration:t,icon:"none"}))},hide:function(e){}},h=p},97613:function(e,t,n){"use strict";n.d(t,{CX:function(){return s},Ry:function(){return c},vY:function(){return l},Z6:function(){return u}});var i=n(31137),o=n(29053),r=n(24239),a=n(32180)["window"],s=(n(32180)["document"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i.hj.isInMini(e)){var t,n=i.hj.isInServer()?{}:(0,o.vn)((null===(t=location)||void 0===t?void 0:t.href)||"");return"H5"!==n.isNotCtripMini}return!1}),c=function(){if(i.GI.getPlatform()!==i.GI.PLATFORM_TYPE.H5)return!1;if(i.hj.isInServer())return!1;var e=a&&a.navigator&&a.navigator.userAgent||"";return/CBP_Wireless/.test(e)},l=function(){return i.GI.getPlatform()===i.GI.PLATFORM_TYPE.H5&&(i.hj.isInServer()||!!(0,r.Rd)("isNfes"))};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i.GI.getPlatform()!==i.GI.PLATFORM_TYPE.H5)return!1;var t,n=!1;i.hj.isInServer()?n=/CoreInside/i.test(e):n=(null===(t=a)||void 0===t?void 0:t.navigator)&&/CoreInside/i.test(a.navigator.userAgent);return n}},34134:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(80830),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return null}}]),n}(s.Z)},86648:function(e,t,n){"use strict";n.d(t,{Z:function(){return T},g:function(){return S}});var i=n(57042),o=n(24460),r=n(79301),a=n(298),s=n(27415),c=n(95308),l=n(45023),u=n(68285),d=n(99876),p=n(97798),h=n(36115),f=n(27480),m=n(27969),v=n(31137),_=n(26040),g=n(30194),y=n(33697),x={},k=x,b=n(78144),Z=(0,l.Z)((0,l.Z)((0,l.Z)({},v.GI.PLATFORM_TYPE.CRN,10650086419),v.GI.PLATFORM_TYPE.H5,10650097502),v.GI.PLATFORM_TYPE.Mini,10650097504),I=v.GI.getPlatform(),w=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n,i,o){var c,l,u,v,_,g,y,x,k,b,w,P,T,C,D,R;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=(null===i||void 0===i?void 0:i.request)||t.state.request,v=t.header,v.clientInfo.pageId=Z[I],_=[(0,p.Z)(u,v),(0,d.Z)(u,v),(0,m.Z)(u,v)],g=["poplayer-content","button-infos","bottom-info","share-info","inventory-tip-info","price-info"],y=null===i||void 0===i||null===(c=i.request)||void 0===c?void 0:c.isSecKill,y&&(_.push((0,h.Z)(u,v)),g.push("bottom-button")),e.next=9,t.http(_,null,null,null,null,{afterWaitPromList:o});case 9:if(x=e.sent,x){e.next=12;break}return e.abrupt("return");case 12:return k=(0,s.Z)(x),b=k[0],w=k[1],P=k[2],T=k.slice(3),C={resourceGraphicDetailList:null===b||void 0===b||null===(l=b.data)||void 0===l?void 0:l.resourceGraphicDetailList,getPriceInfo:null===w||void 0===w?void 0:w.data,viewSpotImages:null===P||void 0===P?void 0:P.data},T.forEach((function(e){"getConfig"===e.__API_NAME__&&(C.getConfig=e),"resourceReserveCalendar"===e.__API_NAME__&&(C.resourceReserveCalendar=null===e||void 0===e?void 0:e.data),"resourceSecKillInfo"===e.__API_NAME__&&(C.resourceSecKillInfo=e)})),C.getConfig&&g.push("mindTour-hide"),C.resourceReserveCalendar&&g.push("reserve-calendar"),e.next=19,S(C.resourceSecKillInfo,null===n||void 0===n?void 0:n.resourceAddInfo);case 19:D=e.sent,R=f.Z.getFormatByModules(u,(0,a.Z)((0,a.Z)({},n),{},{secKillEventStatus:D},C),g),t.afterFetch((0,a.Z)((0,a.Z)({},i),R),!0,y,(function(){}));case 22:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),S=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n){var i,o,a,s,c,l,u,d,p,h,f,m,v,x=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=!(x.length>2&&void 0!==x[2])||x[2],a={},s=(null===t||void 0===t||null===(i=t.ResponseStatus)||void 0===i?void 0:i.Timestamp)||(0,y.bp)()||"",o&&(0,y.lD)(s),!t||!n){e.next=18;break}return u=(null===(c=t.seckills)||void 0===c?void 0:c[0])||{},d=u.seckillbegtime,p=(0,b.XU)(d),h=(null===(l=n.resources)||void 0===l?void 0:l[0])||{},f=h.name,e.next=10,P();case 10:if(m=e.sent,!m){e.next=18;break}if(v={title:f,start:p+"",end:p+1e3+"",hasAlarm:!0,remindMinutes:"10"},!v){e.next=17;break}return e.next=16,_.Z.isEventExistPromise(v);case 16:a=e.sent;case 17:(0,g.gp)({body:{title:"\u8d2d\u4e70\u987b\u77e5/\u8d44\u6e90\u8be6\u60c5\u9875\u79d2\u6740\u65e5\u5386\u63d0\u9192\u72b6\u6001",secKillEvent:v,secKillEventStatus:a}});case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){return new Promise((function(e){try{k.checkPermissions({functions:["readcalendar"]},(function(t){var n="1"===(null===t||void 0===t?void 0:t.readcalendar);e(n)}))}catch(t){console.log(t),e(!1)}}))},T=function(){function e(t){(0,i.Z)(this,e),(0,l.Z)(this,"target",void 0),(0,l.Z)(this,"state",void 0),this.target=t,(0,u.Z)(t,w,f.Z,["price-info","bottom-button"])}return(0,o.Z)(e,null,[{key:"init",value:function(e){return(0,u.Z)(e.target,w,f.Z,["price-info","bottom-button"])}}]),e}()},76914:function(e,t,n){"use strict";n.d(t,{Z:function(){return H},N:function(){return M}});var i=n(79301),o=n(22276),r=n(298),a=n(90129),s=n(95308),c=n(45023),l=n(8356),u=n(92954),d=n(31137),p={WECHAT:{extension:{name:"appId",value:"wx0e6ed4f51db9d078"}},BAIDU:{extension:{name:"appId",value:"11048657"}},BBC:{extension:{name:"bbcId",value:"bbcdistribution"}}},h=function(e,t){var n=e.isbbc;if(d.hj.isInMini()||n){var i=n?"BBC":d.hj.isBaidu()?"BAIDU":"WECHAT";t.head&&Array.isArray(t.head.extension)?t.head.extension.push(p[i].extension):t=(0,r.Z)((0,r.Z)({},t),{},{head:(0,r.Z)((0,r.Z)({},t.head),{},{extension:[p[i].extension]})})}return t},f=function(e,t){var n=e.productId,i=e.spotId,o=e.resourceId,a=e.seckillid,s=e.snapshotId,c=e.filters,l=void 0===c?[]:c,u=e.subFilters,p=void 0===u?[]:u,f=e.isResourcePage,m=(0,r.Z)((0,r.Z)({},t),{},{resids:[+o],viewid:+i||0,productId:+n||0,extInfo:[],tags:[{key:"addinfo",value:"structureTicketexchanges"},{key:"refundRules",value:"newLogic"}]});f&&m.tags.push({key:"needRateLimit",value:"T"}),a&&(m=(0,r.Z)((0,r.Z)({},m),{},{seckillid:a}));var v={name:"serverVersion",value:"1.0"};m.head&&Array.isArray(m.head.extension)?m.head.extension.push(v):m=(0,r.Z)((0,r.Z)({},m),{},{head:(0,r.Z)((0,r.Z)({},m.head),{},{extension:[v]})}),s&&(m.snapshotId=s),m=h(e,m),f||(m.filters=l||[],m.subResourceList=p||[]);var _=d.GI.getDevEnv()==d.GI.DEV_ENV_TYPE.FAT;return{data:Object.assign({},m),url:"/restapi/soa2/12530/json/resourceAddInfo".concat(_?"?subEnv=fat29":"")}},m=n(39860),v=function(e,t){var n=e.resourceId,i=e.isResourcePage,o=e.seckillid,a=e.poiId,s=e.snapshotId,c=e.filters,l=void 0===c?[]:c,u=e.isFromShelf,d=void 0!==u&&u,p=e.aid,f=void 0===p?"":p,v=e.sid,_=void 0===v?"":v,g={resourceId:+n};o&&(g=(0,r.Z)((0,r.Z)({},g),{},{seckillid:o})),i?(g.allianceID=+f||0,g.siteID=+_||0,g.tags=[{key:"needRateLimit",value:"T"}]):g.filters=l||[];var y=(0,m.I8)(t||{clientInfo:{extension:{}}});return y.clientInfo.extension=[{name:"poiId",value:String(a)},{name:"needPackagingVersion3",value:"true"}],d&&a&&"undefined"!==a&&y.clientInfo.extension.push({name:"minPriceDaysPoiId",value:String(a)}),s&&(g.snapshotId=s),g=h(e,g),{data:Object.assign({},y,g),url:"/restapi/soa2/12530/json/resourceDetails"}},_=function(e,t){var n=e.resourceId;return{data:Object.assign({},t,{ids:"boolean"!=typeof n&&n?[n]:[]}),url:"/restapi/soa2/21052/json/checkStructure"}},g=d.Y8.mkt.getUnion(),y=g||{},x=y.allianceid,k=y.sid,b=function(e,t){var n=Object.assign({},(0,r.Z)((0,r.Z)({},t),{},{head:{extension:[{name:"aid",value:String(x||"")},{name:"sid",value:String(k||"")}]}}),{hideForScan:{needHide:!0}});return e.snapshotId&&(n.snapshotId=e.snapshotId),{data:Object.assign({},t,n),url:"/restapi/soa2/21052/json/getConfig",__isNotCoreApi:!0,__API_NAME__:"getConfig"}},Z=n(99876),I=n(68277),w=n(93212),S=["resourceAddInfoQOC"],P=function(e){var t,n=e.resourceAddInfoQOC,i=(0,I.Z)(e,S),o=(0,r.Z)({},n);o.resources=n.ress;var a=(null===n||void 0===n||null===(t=n.ress)||void 0===t?void 0:t[0])||{},s=a.highRisk,c=a.exchangeWay,l=a.sameAddressWithTicketExchange,u=a.sameTimeWithTicketExchange,d=a.resourceSaleType,p=a.isNew,h=a.annualSales,f=a.id,m=a.name,v=a.rainfos,_=a.productId,g=a.vendorinfo,y=a.ticketRefundRule,x=a.graphicDetailFlag,k=a.ticketRefundRuleDTO,b=a.ticketexchanges,Z={highRisk:s,exchangeWay:c,isNew:p,annualSales:h,resourceSaleType:d,sameAddressWithTicketExchange:l,sameTimeWithTicketExchange:u};return o.resources[0]&&"object"==(0,w.Z)(o.resources[0])&&(o.resources[0]=(0,r.Z)((0,r.Z)({},o.resources[0]),{},{extInfo:Z,vendorInfo:g,id:f,name:m,productId:_,rainfos:v,ticketRefundRule:y,graphicDetailFlag:x,ticketRefundRuleDTO:k,ticketexchanges:b})),(0,r.Z)((0,r.Z)({},i),{},{resourceAddInfo:o})},T=P,C=function(e,t){var n=e.productId,i=e.spotId,o=e.resourceId,a=e.inChina;return{data:(0,r.Z)((0,r.Z)({},t),{},{resids:["".concat(o)],viewid:+i||0,productId:+n||0,inchina:a,ver:"8.25.2"}),url:"/restapi/soa2/12530/json/resourceAddInfoQOC"}},D=function(e,t){var n=e.resourceId;return{data:(0,r.Z)((0,r.Z)({},t),{},{resourceId:n}),url:"/restapi/soa2/12530/json/resourceReserveCalendar",__isNotCoreApi:!0,__API_NAME__:"resourceReserveCalendar"}},R=n(18866),j=["request","header","resourceDetails","cachePolicy","ssrTimeRecorder","isFromPrefetch","isFirstScreenRequest"],N=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var o,s,c,l,u,d,p,h,f,m,v,_,g,y,x,k,b;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=n.request,u=n.header,d=n.resourceDetails,p=n.cachePolicy,n.ssrTimeRecorder,h=n.isFromPrefetch,n.isFirstScreenRequest,f=(0,I.Z)(n,j),m=[C((0,r.Z)((0,r.Z)({},l),{},{spotId:null===d||void 0===d||null===(o=d.relatedScenicSpots)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.spotId,inChina:null===d||void 0===d?void 0:d.inChina}),u),D(l,u)],m.forEach((function(e){e.cachePolicy=p,e.isFromPrefetch=h})),e.next=5,t.http(m);case 5:if(v=e.sent,_=(0,R.B2)(v),g=(0,a.Z)(_,2),y=g[0],x=g[1],y){e.next=9;break}return e.abrupt("return");case 9:return k=(0,r.Z)((0,r.Z)({},f),{},{resourceDetails:(0,r.Z)({},d),resourceAddInfoQOC:null===(s=y[0])||void 0===s?void 0:s.data,resourceReserveCalendar:null===(c=y[1])||void 0===c?void 0:c.data}),b=T((0,r.Z)({},k)),e.abrupt("return",{presaleDataSource:b,notCoreAPIPromiseListPreSale:x});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=n(39720),L=n(209),E=n(63362),A=d.hj.isIOS(),F=d.hj.isInServer(),M=function(e,t){var n={};if(e)n=(0,l.v)(e);else{var i=(0,u.getCurrentInstance)(t);n=i.router.params}var o=n,r=o.spotId,a=o.resourceId,s=o.hideBottom,c=o.buttonthininfo,d=o.productId,p=o.buyNoteShareClickLog,h=o.seckillid,f=o.date,m=o.isResource,v=void 0===m||m,_=o.poiId,g=void 0===_?"":_,y=o.isFromShelf,x=void 0!==y&&y,k=o.groupType,b=o.inventoryTip,Z=o.inventoryTipType,I=o.subIds,w=void 0===I?"":I,S=o.subDates,P=void 0===S?"":S,T="";try{c&&(T=JSON.parse(decodeURIComponent(c))),p&&(p=JSON.parse(decodeURIComponent(p)))}catch(e){}var C=[],D=w.split("|"),R=P.split("|");D.forEach((function(e,t){e&&R[t]&&C.push({subResourceId:e,date:R[t]})}));var j={spotId:Number(r),resourceId:Number(a),hideBottom:"true"==s,isResource:v,buttonInfo:T,productId:d?Number(d):null,buyNoteShareClickLog:p,seckillid:h,poiId:String(g),isFromShelf:x,groupType:k,inventoryTip:b,inventoryTipType:Z,filters:f?[{type:"DateFilter",filterItems:[{key:"Date",value:f}]}]:[],subFilters:C};return j},O=(0,c.Z)((0,c.Z)((0,c.Z)({},d.GI.PLATFORM_TYPE.CRN,10650086419),d.GI.PLATFORM_TYPE.H5,10650097502),d.GI.PLATFORM_TYPE.Mini,10650097504),B=(0,c.Z)((0,c.Z)((0,c.Z)({},d.GI.PLATFORM_TYPE.H5,10650003173),d.GI.PLATFORM_TYPE.Mini,10650097514),d.GI.PLATFORM_TYPE.CRN,10650055126),z=d.GI.getPlatform(),H=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s,c,l,u,p,h,m,g,y,x,k,I,w,S,P,T,C,D,j,M,H,U,G,q,W,K,Y,X,Q,J,$,ee,te,ne;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params,s=t.http,c=t.isFromPrefetch,l=void 0!==c&&c,u=n,e.prev=2,w=(0,V.Z)(),S=u||{},P=S.isResourcePage,T=S.snapshotId,w.clientInfo.pageId=P?B[z]:O[z],C=A?null:{enableCache:!0,cacheExpireTime:15,cacheLocation:"MEM"},D={},j=["request","title-info","mindTour-hide"],M=[f(u,w),v(u,w),_(u,w),b(u,w)],T&&(j.push("dutyDesc"),M.push((0,Z.Z)(u,w,"DISCLAIMER_STATEMENT"))),M.forEach((function(e){e.cachePolicy=C,e.isFromPrefetch=l})),e.next=14,s(M);case 14:if(H=e.sent,U=(0,R.B2)(H),G=(0,a.Z)(U,2),q=G[0],W=G[1],q){e.next=18;break}return e.abrupt("return",{noData:!0});case 18:if(K=null===(p=q[0])||void 0===p?void 0:p.__hasSendLogError,D={resourceAddInfo:null===(h=q[0])||void 0===h?void 0:h.data,resourceDetails:null===(m=q[1])||void 0===m?void 0:m.data,isNewStructure:null===q||void 0===q||null===(g=q[2])||void 0===g||null===(g=g.structures)||void 0===g||null===(g=g[0])||void 0===g?void 0:g.newStructure,getConfig:q[3]},T&&(D.dutyDesc=null===(y=q[4])||void 0===y||null===(y=y.data)||void 0===y?void 0:y.value),!P){e.next=28;break}if(Q=void 0,Q=((null===(Y=q[0])||void 0===Y?void 0:Y.extInfos)||[]).find((function(e){return"rateLimitMessage"===e.key})),Q||(Q=((null===(J=q[1])||void 0===J?void 0:J.extInfos)||[]).find((function(e){return"rateLimitMessage"===e.key}))),null===(X=Q)||void 0===X||!X.value){e.next=28;break}return d.hj.isInServer()||L.Z.show({content:Q.value,btnOK:["\u8fd4\u56de\u4e0a\u9875"],btnCallBack:[function(){E.ZP.navigateBack()}]}),e.abrupt("return",{isLimit:!0});case 28:if(!P||null!==(x=D.resourceDetails)&&void 0!==x&&x.resourceId&&null!==(k=D.resourceAddInfo)&&void 0!==k&&k.resources){e.next=30;break}return e.abrupt("return",{noData:!0,hasSendErrorLog:K});case 30:if($=1==(null===(I=D.resourceDetails)||void 0===I?void 0:I.buyType),!$){e.next=44;break}return e.next=34,N({http:s},(0,r.Z)((0,r.Z)({request:u,header:w},D),{},{cachePolicy:C,isFromPrefetch:l,isFirstScreenRequest:F}));case 34:if(ee=e.sent,te=ee.presaleDataSource,ne=ee.notCoreAPIPromiseListPreSale,te){e.next=39;break}return e.abrupt("return",{noData:!0,hasSendErrorLog:K});case 39:ne&&(W=[].concat((0,o.Z)(W||[]),(0,o.Z)(ne))),D=(0,r.Z)((0,r.Z)({},D),te),j.push("content-list-presale","reserve-calendar"),e.next=45;break;case 44:j.push("content-list");case 45:return e.abrupt("return",{ds:D,initModules:j,notCoreAPIPromiseList:W});case 48:throw e.prev=48,e.t0=e["catch"](2),new Error(e.t0);case 51:case"end":return e.stop()}}),e,null,[[2,48]])})));return function(t){return e.apply(this,arguments)}}()},27480:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(90983),o=n(9723);t["Z"]={getFormatByModules:function(e,t,n){var r,a={request:e},s=(0,i.Z)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;(0,o.L)(e,t,c,a)}}catch(e){s.e(e)}finally{s.f()}return a}};var r=function(e){var t=e||{},n=t.isResource,i=void 0===n||n,o=t.spotId,r=t.resourceId,a=t.productId,s=t.seckillid,c=t.traceid,l=t.devTraceKeyData,u=t.filters,d=t.poiId,p=void 0===d?"":d,h=t.isFromShelf,f=void 0!==h&&h,m=t.groupType,v=t.inventoryTip,_=t.inventoryTipType,g=t.subFilters,y=void 0===g?[]:g;return{isResource:i,spotId:o,resourceId:r,productId:a,seckillid:s,traceid:c,filters:u,devTraceKeyData:l||[{key:"resourceId",value:r}],poiId:p,isFromShelf:f,groupType:m,inventoryTip:v,inventoryTipType:isNaN(_)?void 0:Number(_),subFilters:y}}},72027:function(e,t,n){"use strict";n.d(t,{Z:function(){return At}});var i,o=n(298),r=n(90201),a=n(88967),s=n(71515),c=n(31137),l=n(4277),u={m_button:"index-module_wAfk0",m_text:"index-module_kqbt_"},d=n(2269),p=function(e){var t=e.text,n=e.onShowSecondPoplayer,i=e.code,o=(0,r.useContext)(l._);return(0,d.jsx)(c.En,{className:u.m_button,onClick:n,devTraceData:"Supplier"===i?o["supplierClickDevtrace"]:"SafetyNotice"===i?o["safetyNoteClickDevtrace"]:o["supplierClickDevtrace"],children:(0,d.jsx)(s.Text,{className:u.m_text,children:t})})},h=p,f=n(57042),m=n(24460),v=n(21867),_=n(86066),g=n(81876),y=n(45023),x=n(80830),k=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){var i;return(0,f.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"state",void 0),i}return(0,m.Z)(n)}(x.Z),b={m_table:"index-module_nTvNV",m_row:"index-module_kDlXM",m_column:"index-module_j35hm",m_td:"index-module_Pho7Y",m_td_bottom:"index-module_r5RGr",m_td_right:"index-module_LfvmF",m_td_gray:"index-module_ALyws",m_td_row:"index-module_BmGPe",m_text:"index-module_UtDWK",m_text_gray:"index-module_aL7oa",m_text_black:"index-module_mkQL6",m_extra:"index-module_eLHAL",m_extra_text:"index-module_R9NoS"},Z=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.tableData,n=(e.CellExtra,e.CellPoplayer,e.onPress),i=e.clickDevtraceData,o=e.tableStyle,r=(e.tdStyle,e.textStyle);return t&&t.length?(0,d.jsx)(s.View,{className:b.m_table,style:o,children:t.map((function(e,o){return(0,d.jsx)(s.View,{className:b.m_row,children:e&&e.length?e.map((function(a,l){var u;return(0,d.jsxs)(s.View,{className:(0,c.AK)(b.m_td,b["m_td_".concat(a.styleType)],o==t.length-1?b.m_td_bottom:"",l==e.length-1?b.m_td_right:"",a.extraDirection?b["m_td_".concat(a.extraDirection)]:""),style:{width:a.width},children:[a.content&&a.content.length?a.content.map((function(e,t){return(0,d.jsx)(s.Text,{className:(0,c.AK)(b.m_text,b["m_text_".concat(a.styleType)]),style:r,children:e},"".concat(e,"_").concat(t))})):null,null!==(u=a.extraButton)&&void 0!==u&&u.text?(0,d.jsx)(c.En,{className:b.m_extra,onClick:function(){return n&&n(a.extraButton)},devTraceData:i,children:(0,d.jsx)(s.Text,{className:b.m_extra_text,children:a.extraButton.text})}):null]},l)})):null},o)}))}):null}}]),n}(k),I={m_table_item:"index-module__Z3Dp",m_table_tip:"index-module_FrjqO"},w=n(30194),S=n(63362),P=function(e){i=(0,r.useContext)(l._);var t=(0,r.useCallback)((function(e){return T(e)}),[]);return{handleExtraButtonClick:t}},T=function(e){var t=e||{},n=t.url,o=t.albumParams;if(n)S.ZP.navigateTo({url:n});else if(Array.isArray(o)){(0,w.Zz)(i["tkt_sightdetail_list_picture_sight_detail"].params,"click"),o.forEach((function(e){e.url=e.imageUrl}));var r={items:o,showPhotoIndex:0,meta:{buChanel:"activity",galleryTitle:"resourceMap",businessCode:"share_from_home"}};c.JO.show(r)}},C=P,D=function(e){var t=e.table,n=e.tableTip,i=e.beforeItem,o=e.afterItem,a=C(e),c=a.handleExtraButtonClick,u=(0,r.useContext)(l._),p=!i,h=8,f=12;return p&&(h=0),1===(null===i||void 0===i?void 0:i.descType)&&(h=0),0===(null===o||void 0===o?void 0:o.descType)&&o.bold&&(f=6),(0,d.jsxs)(s.View,{className:I.m_table_item,style:{marginTop:h,marginBottom:f},children:[(0,d.jsx)(Z,{tableData:t,onPress:c,clickDevtraceData:u["mapClickDevtrace"],tableStyle:{},tdStyle:{margin:12,marginBottom:7},textStyle:{fontSize:14}}),!!n&&(0,d.jsx)(s.Text,{className:I.m_table_tip,children:n})]})},R=D,j={m_desc:"index-module_E4E3v"},N=n(92954),V=n.n(N),L=["Refund","ConditionalRefund","NonRefundable","LossyRefund","AutomaticRefund","Rescheduling"],E=["AppointmentRequired","NotNeedTicket","NeedTicket","AirPort","AggregateUse","NotScenicSpot"],A=function(e){return"OtherNotes"===e?"tkt_spotdetail_qtxz_click_sight_detail":"AppointmentRequired"===e?"tkt_spotdetail_yy_click_sight_detail":L.includes(e)?"tkt_spotdetail_tg_click_sight_detail":E.includes(e)?"tkt_spotdetail_sy_click_sight_detail":void 0},F=22,M=function(e){var t=e.data,n=e.reserveCalendar,i=e.subCode,o=e.isFirst,a=void 0===o||o,s=A(i),c=(0,r.useMemo)((function(){return z(t,i,a)}),[t]),l=(0,r.useCallback)((function(){n&&O(n)}),[n]);return{html:c,lineHeight:F,onShowData:l,metricName:s}},O=function(e){c.GQ.showCalendar((0,o.Z)((0,o.Z)({},e),{},{title:"\u53ef\u7ea6\u4f7f\u7528\u65e5\u671f",tips:"\u8be5\u65e5\u5386\u4ec5\u53ef\u67e5\u770b\uff0c\u4e0d\u53ef\u9009\u62e9",showConfirm:!0,className:"ticket_resourceDetail_calendar",configuration:{tipsColorType:"default",isUnChangeSelectedState:!0,isUnSelectedClose:!0,toastMessage:"\u8be5\u65e5\u5386\u4ec5\u53ef\u67e5\u770b\uff0c\u4e0d\u53ef\u9009\u62e9"}}),(function(){c.hj.isApp()||V().showToast({title:"\u8be5\u65e5\u5386\u4ec5\u53ef\u67e5\u770b\uff0c\u4e0d\u53ef\u9009\u62e9",icon:"none"})}))},B=function(e,t,n){var i=e.desc,r=e.textType,a=e.isHighlight,s=e.bold,c=e.bacStyleType,l=e.tagType,u={color:"#FF7700",globalColor:"#333333",backgroundColor:"#FFFFFF",fontWeight:"normal",marginTop:0,textAlign:l?"center":"left",hasTag:!!l};if("gold"===r&&(u.globalColor="#B7904B"),s&&(u.fontWeight="bold",n||(u.marginTop=6)),"orange"===c&&(u.backgroundColor="#fff8f2"),"blue"==l&&(u.backgroundColor="#e8f7ff",u.globalColor="#19a0f0"),"orange"==l&&(u.backgroundColor="#fff7e7",u.globalColor="#ff7700"),s&&"FeeInclude"===t&&(u.globalColor="#111111",u.fontWeight="bold"),a){var d=[];i=i.replace(/\u3010(.*?)\u3011/g,"%E3%80%90\u3010$1\u3011%E3%80%90");for(var p=i.split("%E3%80%90"),h=0;h<p.length;h++)""!==p[h]&&("\u3010"===p[h][0]&&"\u3011"===p[h][p[h].length-1]?d.push((0,o.Z)((0,o.Z)({},u),{},{desc:p[h].substring(1,p[h].length-1),highlight:!0})):d.push((0,o.Z)((0,o.Z)({},u),{},{desc:p[h]})));return[d]}return[(0,o.Z)((0,o.Z)({},u),{},{desc:i})]},z=function(e,t,n){return Array.isArray(e)?e.reduce((function(e,n,i){return e.push(B(n,t,0===i)),e}),[]):B(e,t,n)},H=M,U={m_cal:"index-module_gHNDn",m_cal_text:"index-module_fJFLR",m_collapse_button:"index-module_yMhoC",m_collapse_button_up:"index-module_Zcka7",m_collapse_button_linear:"index-module_wq_6_",m_collapse_button_text:"index-module_Pmswj"},G=n(73921),q=function(e){var t=c.hj.isApp()&&c.hj.isIOS();return(0,d.jsx)(s.View,{className:e?U.m_collapse_button:U.m_collapse_button_up,style:{bottom:t?2:-1},children:(0,d.jsx)(c.cn,{direction:0,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},className:U.m_collapse_button_linear,children:(0,d.jsx)(s.Text,{className:U.m_collapse_button_text,children:e?"\u5c55\u5f00":"\u6536\u8d77"})})})},W=function(e){var t,n,i=e.info,r=void 0===i?{}:i,a=c.hj.isH5()?{display:r.hasTag?"inline-block":"inline"}:{},l=c.hj.isApp()?{}:{wordBreak:"break-all"},u=r.hasTag?{width:c.hj.isApp()?Math.max(58,12*(null===(t=r.desc)||void 0===t?void 0:t.length)):"".concat(Math.max(58,12*(null===(n=r.desc)||void 0===n?void 0:n.length)),"px")}:{};return(0,d.jsx)(s.Text,{style:(0,o.Z)((0,o.Z)((0,o.Z)({color:r.highlight?r.color:r.globalColor,backgroundColor:r.backgroundColor,lineHeight:c.hj.isApp()?22:"22px",fontSize:14,fontWeight:r.fontWeight,marginTop:c.hj.isApp()?r.marginTop:"".concat(r.marginTop,"px"),textAlign:c.hj.isApp()?"left":r.textAlign},a),l),u),children:r.desc})},K=function(e){var t=e.html,n=c.hj.isApp()?s.Text:s.View;return(0,d.jsx)(s.View,{style:{fontSize:14,textAlign:"left"},children:t.map((function(e){return Array.isArray(e)?(0,d.jsx)(n,{style:{fontSize:14},children:e.map((function(e){return(0,d.jsx)(W,{info:e})}))}):(0,d.jsx)(W,{info:e})}))})},Y=function(e){var t=e.needExpand,n=e.calendarInfo,i=(e.keyValue,H(e)),o=i.html,a=(i.lineHeight,i.onShowData),u=i.metricName,p=(0,r.useContext)(l._),h=(0,r.useRef)(null),f=c.hj.isApp()&&c.hj.isIOS();return(0,r.useEffect)((function(){c.hj.isApp()||setTimeout((function(){h.current&&h.current.refreshCollapseHeight()}),600)}),[o]),t?(0,d.jsx)(c.fG,{renderContent:function(){return(0,d.jsx)(K,{html:o})},collapseHeight:c.hj.isH5()?86:f?90:88,ref:h,offset:f?5:0,logs:{clickDownLog:u&&p[u]({status:"\u5c55\u5f00"}),clickUpLog:u&&p[u]({status:"\u6536\u8d77"}),devtraceLog:p["textClickDevtrace"]},renderMoreButton:q}):(0,d.jsxs)(s.View,{children:[(0,d.jsx)(K,{html:o}),!(null===n||void 0===n||!n.text)&&(0,d.jsxs)(c.En,{className:U.m_cal,onClick:a,children:[(0,d.jsx)(s.Text,{className:U.m_cal_text,children:n.text}),(0,d.jsx)(G.m,{type:"forward",style:{fontSize:15,color:"#0086F6"}})]})]})},X=Y,Q=function(e){var t=e.descType,n=e.table,i=e.needExpand,o=e.desc,r=e.isHighlight,a=e.bacStyleType,c=e.tagType,l=e.textType,u=e.calendarInfo,p=e.reserveCalendar,h=e.bold,f=e.subCode,m=e.keyValue,v=e.extraStyle,_=void 0===v?{}:v,g=e.isFirst,y=e.beforeItem,x=e.afterItem;return(0,d.jsx)(s.View,{className:j.m_desc,style:_,children:1==t?(0,d.jsx)(R,{table:n,beforeItem:y,afterItem:x}):(0,d.jsx)(X,{keyValue:m,subCode:f,needExpand:i,data:{desc:o,isHighlight:r,bacStyleType:a,tagType:c,textType:l,bold:h},calendarInfo:u,reserveCalendar:p,isFirst:g})})},J=Q,$={m_desclist:"index-module_bZmcf",m_name:"index-module_x9jfe",m_name_orange:"index-module_xPvY9",m_name_blue:"index-module_zssvp",m_name_text:"index-module_u02cX",m_name_text_orange:"index-module_cpEvG",m_name_text_blue:"index-module_fgSz6",m_sub:"index-module_YU3wG"},ee=c.hj.isApp(),te=c.hj.isH5(),ne=function(e){var t=e.needExpand,n=e.subName,i=e.descList,r=e.reserveCalendar,a=e.tagType,l=e.bacStyleType,u=e.bold,p=e.subCode,h=e.isFirst;return(0,d.jsxs)(s.View,{className:$.m_desclist,children:[!!n&&(0,d.jsx)(s.View,{className:(0,c.AK)($.m_name,$["m_name_".concat(a)]),style:{marginTop:ee?1:"FeeInclude"===p?.5:te?1.5:1},children:(0,d.jsx)(s.Text,{className:(0,c.AK)($.m_name_text,$["m_name_text_".concat(a)]),children:n})}),(0,d.jsx)(s.View,{className:$.m_sub,children:t?(0,d.jsx)(X,{needExpand:t,data:i,subCode:p,keyValue:"".concat(p,"key"),isFirst:h}):(0,d.jsx)(s.View,{children:(i||[]).map((function(e,t){return(0,d.jsx)(J,(0,o.Z)((0,o.Z)({subCode:p,bold:u},e),{},{reserveCalendar:r,bacStyleType:l,keyValue:"".concat(p).concat(t),isFirst:0===t,beforeItem:0===t?null:i[t-1],afterItem:t===i.length?null:i[t+1]}),t)}))})})]})},ie=ne,oe={m_color:"index-module_gA8CP",m_color_blue:"index-module_GlOR5",m_color_orange:"index-module_wEHfe",m_img:"index-module_GeaRS",m_item:"index-module_JZ0nK"},re=function(e){var t=e.subType,n=e.secondEnterList,i=e.overdueRefundList,r=2==t?i:n,a=2==t?"blue":"orange";return(0,d.jsxs)(s.View,{className:(0,c.AK)(oe.m_color,oe["m_color_".concat(a)]),children:[(0,d.jsx)(s.View,{className:oe.m_img,children:(0,d.jsx)(s.Image,{src:2==t?"https://dimg04.c-ctrip.com/images/0AS3k120008q3q4ec3598.png_.webp":"https://dimg04.c-ctrip.com/images/0AS0t120008q3q0rm7AAD.png_.webp",style:{width:48,height:18}})}),(r||[]).map((function(e,t){return(0,d.jsx)(s.View,{className:oe.m_item,children:(0,d.jsx)(ie,(0,o.Z)((0,o.Z)({},e),{},{tagType:a,bacStyleType:a}))},t)}))]})},ae=re,se={m_tabletitle_w:"index-module_NKQh0",m_tabletitle_text:"index-module_LdN2B",m_tabletitle_right_w:"index-module_R7Ahv",m_tabletitle_right_text:"index-module_J66BK"},ce=function(e){var t=e.subResourceId,n=e.subResourceName,i=e.rightButton,o=e.clickRightButton;return(0,d.jsxs)(s.View,{className:se.m_tabletitle_w,children:[(0,d.jsx)(s.Text,{className:se.m_tabletitle_text,children:n}),!(null===i||void 0===i||!i.text)&&(0,d.jsx)(c.En,{onClick:function(){o&&o(t)},className:se.m_tabletitle_right_w,style:{marginTop:c.hj.isApp()?2:0},children:(0,d.jsx)(s.Text,{className:se.m_tabletitle_right_text,children:i.text})})]})},le=ce,ue={m_content:"index-module_Ux27L",m_content_no_border:"index-module_m93iU",m_title:"index-module_ego0V",m_name:"index-module_ERflv",m_right_text:"index-module_xNbiT"},de=function(e){var t=e.code,n=e.onShowSecondPoplayer,i=function(e){switch(e){case"ReservationNotice":return"orange";case"":return"blue";default:return""}}(t),o=(0,r.useCallback)((function(e){n&&n({text:"\u56fe\u6587\u7248\u4f7f\u7528\u8bf4\u660e",code:"PictureText",resourceId:e})}),[n]);return{tagType:i,clickRightButton:o}},pe=de,he=function(e){var t=e.name,n=e.rightButton,i=e.list,a=e.index,u=e.reserveCalendar,p=e.setRef,h=e.code,f=pe(e),m=f.tagType,v=f.clickRightButton,_=(0,r.useContext)(l._);return(0,d.jsxs)(s.View,{className:ue["".concat(0===a?"m_content_no_border":"m_content")],id:h,ref:function(e){p&&p(e)},children:[(0,d.jsxs)(s.View,{className:ue.m_title,children:[(0,d.jsx)(s.Text,{className:ue.m_name,children:t}),!(null===n||void 0===n||!n.text)&&(0,d.jsx)(c.En,{onClick:v,log:"\u67e5\u770b\u56fe\u6587\u7248"===(null===n||void 0===n?void 0:n.text)?_["tkt_sightdetail_list_instruction_sight_detail"]:{},devTraceData:"\u67e5\u770b\u56fe\u6587\u7248"===(null===n||void 0===n?void 0:n.text)?_["graphicsClickDevtrace"]:null,children:(0,d.jsx)(s.Text,{className:ue.m_right_text,children:null===n||void 0===n?void 0:n.text})})]}),(0,d.jsx)(s.View,{children:(i||[]).map((function(e,t){var n=e.subType,i=e.table,r=e.tableTip;switch(n){case 0:return(0,d.jsx)(ie,(0,o.Z)((0,o.Z)({tagType:m},e),{},{reserveCalendar:u,isFirst:0===t}),t);case 1:case 2:return(0,d.jsx)(ae,(0,o.Z)({},e),t);case 4:return(0,d.jsx)(R,{table:i,tableTip:r},t);case 5:return(0,d.jsx)(le,(0,o.Z)((0,o.Z)({},e),{},{clickRightButton:v}),t);default:}}))})]})},fe=he,me=n(95360),ve=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,m.Z)(n,[{key:"onClick",value:function(){S.ZP.navigateTo({url:"https://m.ctrip.com/webapp/sp/serviceensure?bu=travel&sub=tickets"})}}]),n}(me.ZP),_e={m_mind_tour:"index-module_UHFtd"},ge=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.logs,e.traceLog);return(0,d.jsx)(c.En,{onClick:this.onClick.bind(this),testID:"mindtour",devTraceData:t,className:_e.m_mind_tour,children:(0,d.jsx)(c.Y,{style:{width:V().getSystemInfoSync().windowWidth,height:c.hj.isBaidu()?120:"100%"},src:"https://dimg04.c-ctrip.com/images/0AS0i12000a6czkzc8B31.png_.webp"})})}}]),n}(ve),ye={m_scroll_buynotes:"index-module_VsXQ9",m_main:"index-module_ionr6",m_scroll:"index-module_CXJ1X",m_buttons:"index-module_N1DdD"},xe=n(90129),ke=function(e){var t=(0,r.useRef)([]),n=(0,r.useRef)(),i=(0,r.useState)(0),o=(0,xe.Z)(i,2),a=o[0],s=o[1],l=e.anchor;return(0,r.useEffect)((function(){var e;null!==t&&void 0!==t&&null!==(e=t.current)&&void 0!==e&&e["".concat(l,"Ref")]&&setTimeout((function(){c.c0.getBoundingClientRect({node:t.current["".concat(l,"Ref")]}).then((function(e){var t;e&&e.top&&(null!==n&&void 0!==n&&null!==(t=n.current)&&void 0!==t&&t.scrollTo?n.current.scrollTo({y:e.top-V().getSystemInfoSync().statusBarHeight-60}):s(e.top-(c.hj.isMini()?10:60)))}))}))}),[]),{refList:t,scrollRef:n,scrollTop:a}},be=ke,Ze=function(e){var t=e.contentList,n=e.reserveCalendar,i=e.buttonInfos,a=e.isResourcePage,u=e.titleInfoProps,p=e.ResourcePageHeadComp,f=e.onShowSecondPoplayer,m=e.onPageScroll,v=e.isHideMindTour,_=e.snapshotId,g=e.isBuyNotesPageMini,y=e.TitleComp,x=(0,r.useContext)(l._),k=be(e),b=k.refList,Z=k.scrollRef,I=k.scrollTop;return(0,d.jsxs)(c.AF.ScrollView,{className:(0,c.AK)(ye.m_scroll,a?"":ye.m_scroll_buynotes),style:{height:"100%",backgroundColor:_?"#fff":""},scrollY:!0,onScroll:m,scrollEventThrottle:200,ref:Z,scrollTop:I,children:[a&&!!p&&(0,d.jsx)(p,{titleInfoProps:u,onShowSecondPoplayer:f}),!a&&g&&!!y&&(0,d.jsx)(y,{titleInfoProps:u,onShowSubtitlesPoplayer:f,style:{backgroundColor:"#fff"}}),(0,d.jsxs)(s.View,{className:ye.m_main,children:[(null===t||void 0===t?void 0:t.length)>0&&(0,d.jsx)(s.View,{children:t.map((function(e,t){return(0,d.jsx)(fe,(0,o.Z)((0,o.Z)({},e),{},{index:t,reserveCalendar:n,onShowSecondPoplayer:f,setRef:function(t){b.current["".concat(e.code,"Ref")]=t}}),e.code)}))}),(null===i||void 0===i?void 0:i.length)>0&&(0,d.jsx)(s.View,{className:ye.m_buttons,children:i.map((function(e){return(0,d.jsx)(h,(0,o.Z)((0,o.Z)({},e),{},{onShowSecondPoplayer:function(){return f(e)}}),e.code)}))})]}),(0,d.jsx)(s.View,{className:ye.m_mind_tour,style:{width:"100%"},children:v?null:(0,d.jsx)(ge,{logs:x["tkt_sightdetail_list_guarantee_sight_detail"],traceLog:x["mindTourClickDevtrace"]})})]})},Ie=Ze,we={m_buynotes:"index-module_bY8sR",m_buynotes_resource:"index-module_ZpJvf"},Se=n(70245),Pe=function(){var e,t=(0,r.useState)({poplayerProps:{visiable:!1}}),n=(0,xe.Z)(t,2),i=n[0],a=n[1],s=(0,r.useCallback)((function(){a((0,o.Z)((0,o.Z)({},i),{},{poplayerProps:(0,o.Z)((0,o.Z)({},(null===i||void 0===i?void 0:i.poplayerProps)||{}),{},{visible:!1})}))}),[a,i]);return{poplayerProps:i,setPoplayerProps:a,onPoplayerClose:s,visible:null===i||void 0===i||null===(e=i.poplayerProps)||void 0===e?void 0:e.visible}},Te=function(e){var t=(0,me.eG)(e,null),n=t.target,i=e.request,o=e.bottomButton,a=e.priceInfo,s=e.extraButtonInfo,c=e.onPageScroll,l=e.bottomHeight,u=void 0===l?"0px":l,d=Pe(),p=d.poplayerProps,h=d.setPoplayerProps,f=d.onPoplayerClose,m=d.visible,v=(0,r.useRef)(),_=(0,r.useCallback)((function(e){var t,n,i;if("number"===typeof(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.scrollTop))return n=null===e||void 0===e||null===(i=e.detail)||void 0===i?void 0:i.scrollTop,void(c&&c(n));var o=null===e||void 0===e?void 0:e.nativeEvent,r=o||{},a=r.contentOffset;n=null===a||void 0===a?void 0:a.y,c&&c(n)}),[c]),g=null!==i&&void 0!==i&&i.groupType||null!==i&&void 0!==i&&i.isResourcePage||null===s||void 0===s||!s.text?o:s,y=(0,r.useCallback)((function(t){return Ce(t,e,n,h,m,u)}),[e,m]);return{bookingButtonInfo:g,bookingPriceInfo:a,onShowSecondPoplayer:y,onScroll:_,poplayerProps:p,onPoplayerClose:f,tipRef:v}},Ce=function(e,t,i,r,a,s){var l,u,d=e||{},p=d.label,h=d.labelTips,f=d.text,m=d.code,v=d.resourceId,_={Supplier:"tkt_spotdetail_gys_click_sight_detail",PriceNotice:"tkt_spotdetail_jgsm_click_sight_detail",SafetyNotice:"tkt_sightdetail_list_safe_sight_detail"},g={},y={},x={},k=c.hj.isApp(),b=k?V().getSystemInfoSync().windowHeight-V().getSystemInfoSync().statusBarHeight:V().getSystemInfoSync().windowHeight,Z=m;(p&&h&&(Z="subTitle"),t.metricData&&t.metricData[_[Z]])&&(0,w.Zz)(null===(u=t.metricData[_[Z]])||void 0===u?void 0:u.params,"click");if("SafetyNotice"!=Z){switch(Z){case"payment":var I=(null===e||void 0===e?void 0:e.poplayerProps)||{};g=I.poplayerProps,l=I.child,y=I.childProps;break;case"subTitle":var P=(0,c.vw)((function(){return Promise.resolve().then((function(){return(0,Se.Z)(n(38393))}))}));g={name:"subTitlePoplayer",title:p,style:{height:Math.floor(.5*b)}},l=P,y={list:h};break;case"Supplier":var T,C,D=(0,c.vw)((function(){return Promise.resolve().then((function(){return(0,Se.Z)(n(21058))}))}));g={name:"supplierPoplayer",title:f,hideIphoneXAdapter:!0,contentStyle:{overflow:"hidden"}},l=D,y={supplierContent:null===t||void 0===t||null===(T=t.poplayerContent)||void 0===T?void 0:T.supplierContent,isPack3:null===t||void 0===t||null===(C=t.poplayerContent)||void 0===C?void 0:C.isPack3},x={height:"100%"};break;case"PriceNotice":var R,j=(0,c.vw)((function(){return Promise.resolve().then((function(){return(0,Se.Z)(n(38393))}))}));g={name:"priceNoticePoplayer",title:f},l=j,y={list:null===t||void 0===t||null===(R=t.poplayerContent)||void 0===R?void 0:R.priceNotesList};break;case"PictureText":var N,L,E=(0,c.vw)((function(){return Promise.resolve().then((function(){return(0,Se.Z)(n(34320))}))})),A=(null===t||void 0===t||null===(N=t.poplayerContent)||void 0===N?void 0:N.pictureTextList)||[],F=(null===(L=A[0])||void 0===L?void 0:L.list)||[];v&&A.some((function(e){return e.resourceId===v&&(F=e.list,!0)})),g={name:"pictureTextPoplayer",title:f,contentStyle:{overflow:"hidden"}},l=E,y={list:F},x={height:"100%"};break}r({poplayerProps:(0,o.Z)({visible:!a,showCloseButton:!0,style:{height:c.hj.isH5()?"calc(80vh - ".concat(isNaN(s)?s:s+"px",")"):Math.floor(.9*b)},zIndex:103,crnModalProps:{coverStatusBar:!0},isScrollView:!0},g),child:l,childProps:y,scrollStyle:x,showFooter:"payment"==Z})}else{var M,O=(null===t||void 0===t||null===(M=t.poplayerContent)||void 0===M?void 0:M.highRiskContent)||{},B=O.openUrl;B&&S.ZP.navigateTo({url:B})}},De=Te,Re=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){var i;return(0,f.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"state",void 0),(0,y.Z)((0,g.Z)(i),"toCamping",(function(){i.push(i.props.poiUrl)})),i.state={isIPhoneX:!i.props.ignoreIphoneX&&c.hj.isIPhoneX()},i}return(0,m.Z)(n,[{key:"componentDidMount",value:function(){var e=this;if(!c.hj.isInServer()){var t=this.state.isIPhoneX;this.setState({isIPhoneX:!t},(function(){return e.setState({isIPhoneX:t})}))}}},{key:"goVendorShop",value:function(e){this.push(e)}},{key:"booking",value:function(){this.props.booking()}}]),n}(me.ZP),je={m_wrapper:"index-module_PNMv1",m_footer:"index-module_Gxwjb",m_footer_long:"index-module_qIB3k",m_icons:"index-module_GKDqb",m_footer_btn_wrap:"index-module_iMv6_",m_footer_btn:"index-module_lDXog",m_footer_btn_box:"index-module_jXw1z",m_footer_btn_title_box:"index-module_RvHoJ",m_footer_btn_text:"index-module_Pk1My",m_next_desc:"index-module_qUsJI",m_header_price_view_wrapper:"index-module_cU7wM"},Ne=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"footerIconRender",value:function(e){var t=e.orderList,n=void 0===t?["im","fav"]:t,i=e.renderIM,o=e.renderFav;return n.length>0?(0,d.jsx)(s.View,{className:je.m_icons,children:null===n||void 0===n?void 0:n.map((function(e){switch(e){case"im":return i?i(e):null;case"fav":return o?o(e):null}}))}):null}},{key:"render",value:function(){var e=this.props,t=e.ConfigTipComp,n=e.customStyles,i=void 0===n?{}:n,o=e.notHigh,r=e.renderPrice,a=e.renderLeftButton,l=e.linearGradientStyles,u=void 0===l?{}:l,p=e.nextTitle,h=e.nextDesc,f=e.btnClickLog,m=this.state.isIPhoneX;return(0,d.jsxs)(s.View,{className:(0,c.AK)("ottd-footer",je.m_wrapper),children:[t?(0,d.jsx)(t,{}):null,(0,d.jsxs)(s.View,{className:(0,c.AK)(je.m_footer,m&&!o?je.m_footer_long:""),style:i.m_footer||{},catchMove:!0,children:[(0,d.jsx)(s.View,{className:je.m_header_price_view_wrapper,style:{maxWidth:.35*V().getSystemInfoSync().windowWidth},children:!!r&&r()}),(0,d.jsxs)(s.View,{style:{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",alignItems:"center"},children:[this.footerIconRender(this.props),a?a():null,(0,d.jsx)(c.En,{onClick:this.booking.bind(this),log:f,className:je.m_footer_btn_wrap,activeOpacity:.8,withFeedback:!0,testID:"footer_btn",onPressIn:function(){Keyboard.dismiss()},children:(0,d.jsx)(c.cn,{start:u.start||{x:0,y:0},end:u.end||{x:1,y:0},direction:0,colors:u.colors||["rgba(255, 165, 10, 1)","rgba(255, 119, 0,1)"],className:je.m_footer_btn,"hover-class":"none",children:(0,d.jsx)(s.View,{className:je.m_footer_btn_box,style:i.m_footer_btn_box||{},children:(0,d.jsxs)(s.View,{className:je.m_footer_btn_title_box,children:[(0,d.jsx)(s.Text,{className:je.m_footer_btn_text,style:i.m_footer_btn_text||{},children:p}),!!h&&(0,d.jsx)(s.Text,{className:je.m_next_desc,children:h})]})})})})]})]}),o?(0,d.jsx)(s.View,{style:{backgroundColor:"#fff"},children:(0,d.jsx)(c.iY.Bottom,{})}):null]})}}]),n}(Re),Ve=n(79301),Le=n(95308),Ee=function(e,t){var n,i,o=t.productId,r=t.beijingTime,a=t.agreementType,s=t.saleService,c=t.serviceTimeDesc,l=t.isdomestic,u=t.onlyShowOnline,d=t.bizLineType,p=t.guideInfo,h=void 0===p?{}:p,f=t.isSkipPoplayer,m=(null===e||void 0===e?void 0:e[0])||{},v=m.imList,_=void 0===v?[]:v,g=m.phoneList,y=void 0===g?[]:g,x=2===s,k=!(null===_||void 0===_||!_.length),b=!f&&(!(null===y||void 0===y||!y.length)&&(x||!l)),Z=u?k:!(!k&&!b),I=2===s&&9===a,w=!u&&(b&&(I||1==s&&!l)),S={},P=[],T=2==d,C=3==d,D=k&&b&&w?"\u54a8\u8be2":b&&I?"\u7535\u8bdd\u54a8\u8be2":k?"\u5728\u7ebf\u54a8\u8be2":"\u5ba2\u670d";if(!Z)return S;if(k){var R=null===_||void 0===_?void 0:_[0],j=R.url,N=T?"\u5728\u7ebf\u54a8\u8be2\u5411\u5bfc":"\u5728\u7ebf\u5ba2\u670d";i={text:N,url:j,tips:"\u6e29\u99a8\u63d0\u793a\uff1a\u4e3a\u4e86\u8282\u7ea6\u60a8\u7684\u65f6\u95f4\uff0c\u5efa\u8bae\u60a8\u4f18\u5148\u9009\u62e9".concat(N)}}if(b){var V=Ae({beijingtime:r,servicetime:c});null===y||void 0===y||y.forEach((function(e){P.push({label:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?"\u5883\u5185\u62e8\u6253":"\u5168\u7403\u62e8\u6253",index:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?1:2,phoneNumber:e.displayNumber,disabled:!V,serverTimeDeclare:e.description.substring(0,16),tips:"\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5".concat(T?"\u5411\u5bfc":"\u5ba2\u670d","\u4ea7\u54c1\u7f16\u53f7\uff1a").concat(o)}),P.sort((function(e,t){return e.index-t.index})),l&&(P=P.slice(0,1)),n={title:T?"\u62e8\u6253\u5411\u5bfc\u7535\u8bdd":"\u7535\u8bdd\u5ba2\u670d",phoneInfoLists:P}}))}var L=2!==s||9!==a||T?"":"*\u672c\u4ea7\u54c1\u7531\u96f6\u552e\u5546\u76f4\u8425\uff0c\u5e76\u63d0\u4f9b\u54a8\u8be2/\u9884\u8ba2/\u552e\u540e\u670d\u52a1";return S={productId:o,isRetail:x,fixedVerbal:L,isShowTelConsult:b,isShowOnlineService:k,onlineService:i,phoneService:n,isShowIM:Z,ticketShowPoplayer:w,imText:D,isGuide:T,isTeamLeader:C,guideStatus:Me(h.status)},S},Ae=function(e){var t=/(?:19|20|21)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1]))/g,n=/(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]/g,i=e.beijingtime,o=e.servicetime,r=null===i||void 0===i?void 0:i.match(t),a=null===i||void 0===i?void 0:i.match(n),s=null===o||void 0===o?void 0:o.match(n);if(!r||!a||!s)return!0;var c=Fe(r[0],a[0]),l=Fe(r[0],s[0]),u=Fe(r[0],s[1]);return c>l&&c<u},Fe=function(e,t){var n="".concat(e," ").concat(t);return new Date(n).getTime()},Me=function(e){var t="";switch(e){case 0:t="\u79bb\u7ebf";break;case 2:t="\u5fd9\u788c";break;default:t="";break}return t},Oe={platformId:c.GI.getPlatform()===c.GI.PLATFORM_TYPE.CRN?0:1},Be=function(e){return"https://m.ctrip.com/webapp/taro/pages/tnt/detail/product-detail/index/?productId=".concat(e)},ze=n(97613),He=n(39720),Ue=function(e){var t,n=e.type,i=e.productId,o=e.iqCode,r=e.pageId,a=e.resourceId,s=e.guideInfo,c=e.productName,l=e.spotid,u=[];u.push({resourceId:String(i),idType:"PRODUCT",resourceType:"2"}),"ticket"===n&&(u.push({resourceId:String(a),idType:"RESOURCE",resourceType:"2"}),t={Type:1,spotid:l}),"guide"===n&&(u.push({resourceId:null===s||void 0===s?void 0:s.uid,idType:"GuideUID",resourceType:"2"}),t={textTitle:c||"",productName:c||"",toJumpUrl:"https://m.ctrip.com/webapp/things-to-do/detail/".concat(i,"?isHideNavBar=YES"),fromJumpUrl:Be(i)});var d={isPreSale:1,iqCode:o,pageId:r,timeZone:0-(new Date).getTimezoneOffset()/60,version:(0,He.Z)().version?(0,He.Z)().version.split(".").join("")+"00":"830000",platformId:Oe.platformId,resourceList:u};return t&&(d.ext=JSON.stringify(t)),d},Ge=function(){var e=(0,Le.Z)((0,Ve.Z)().mark((function e(t){var n,i,r,a,s,c,l,u,d,p=arguments;return(0,Ve.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},i=p.length>2?p[2]:void 0,r=t.header,a=t.ctx,e.next=5,qe(a);case 5:return s=e.sent,c=(0,o.Z)((0,o.Z)({},Ue(n)),{},{position:s}),l=[{data:Object.assign({},r,c),url:"/restapi/soa2/15529/json/getInQueryInfo"}],e.next=10,i(l);case 10:u=e.sent,Object.assign(n,{isdomestic:"domestic"===s}),d=Ee(u,n),t.afterFetch(d);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=(0,Le.Z)((0,Ve.Z)().mark((function e(t){var n,i,o;return(0,Ve.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="domestic",!(0,ze.Z6)(null===t||void 0===t?void 0:t.userAgent)){e.next=3;break}return e.abrupt("return",i);case 3:if(o="TTD_T",c.hj.isMini()&&(c.hj.isWechat()?o="tnt-lbs":c.hj.isAlipay()?o="tnt-alipay-lbs":c.hj.isTouTiao()?o="tnt-tt-lbs":c.hj.isBaidu()&&(o="ticket-lbs")),null===(n=c.Y8.locate)||void 0===n||!n.startGetCtripCity){e.next=9;break}return e.next=8,new Promise((function(e,t){c.Y8.locate.startGetCtripCity((function(n){n.data?e(n):t(n)}),o,"gcj02",1e4)})).then((function(e){var t,n=e.data,o=e.isOverSea;return i=void 0!==(null===n||void 0===n||null===(t=n.gpsInfo)||void 0===t?void 0:t.locationCountryType)?0===n.gpsInfo.locationCountryType?"domestic":"oversea":void 0!==o?o?"oversea":"domestic":"unknow"})).catch((function(e){return i="unknow"}));case 8:i=e.sent;case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){var t=e.isShowOnlineService,n=e.isShowTelConsult,i=e.phoneService,o=e.fixedVerbal,r=i&&i.phoneInfoLists?i.phoneInfoLists:[],a=0;return a+=44,a+=o?44:0,a+=t?100:0,n&&(a+=1===r.length?190:0,a+=2===r.length?310:0),a},Ke=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){var i;return(0,f.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"state",void 0),i.state={imInfoData:{},isShowIM:i.props.isShowIM,isShowTelConsult:!1,ticketShowPoplayer:!1,imText:"\u5ba2\u670d",isGuide:!1,poplayerVisible:!1,wrapperHeight:0},i.init(i.props.imInfo),i.openUrl=i.openUrl.bind((0,g.Z)(i)),i}return(0,m.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t,n;(null===e||void 0===e||null===(t=e.imInfo)||void 0===t?void 0:t.resourceId)!=(null===(n=this.props)||void 0===n||null===(n=n.imInfo)||void 0===n?void 0:n.resourceId)&&this.init(e.imInfo)}},{key:"init",value:function(e){Ge(this,e,n.http)}},{key:"afterFetch",value:function(e){var t=e.isShowIM,n=e.isShowTelConsult,i=e.ticketShowPoplayer,o=e.imText,r=e.isGuide;this.setState({imInfoData:e,isShowIM:t,isShowTelConsult:n,ticketShowPoplayer:i,imText:o,isGuide:r})}},{key:"toggleImCb",value:function(e){if("0"===(null===e||void 0===e?void 0:e.ReturnCode)){var t=this.state,n=t.isShowTelConsult,i=t.ticketShowPoplayer,o=this.props.imInfo.type,r=this.state.imInfoData,a=void 0===r?{}:r,s=a.onlineService,c=void 0===s?{}:s,l=c.url;"act"===o||"guide"===o?n?this.showPoplayer(a):l&&S.ZP.navigateTo({url:l}):"ticket"===o&&(i?this.showPoplayer(a):l&&S.ZP.navigateTo({url:l}))}}},{key:"onClick",value:function(){var e=this,t=this.props.isSkipLogin,n=c.Y8.user.isLogin();n||t?this.toggleImCb({ReturnCode:"0"}):c.Y8.user.login({callback:function(t){var n,i=!(null===t||void 0===t||null===(n=t.data)||void 0===n||!n.UserID),o="-1",r="\u8fd4\u56de";i&&(o="0",r="\u76f4\u63a5\u767b\u5f55\u6210\u529f"),e.toggleImCb({ReturnCode:o,Message:r})}})}},{key:"showPoplayer",value:function(e){var t=We(e);this.setState({poplayerVisible:!0,wrapperHeight:t})}},{key:"closePoplayer",value:function(){this.setState({poplayerVisible:!1})}},{key:"openUrl",value:function(e,t){var n;null===t||void 0===t||null===(n=t.stopPropagation)||void 0===n||n.call(t),e&&this.push(e)}}]),n}(me.ZP),Ye={m_im:"index-module_mJIMB",m_im_text:"index-module_whzcs",m_im_btn_text:"index-module_hSsTi",m_im_guide:"index-module_HNUzs",m_im_guide_text:"index-module_U8GPj",m_footer_btn_wrap:"index-module_qzAEx",m_footer_btn_box_guide:"index-module_lcPjx",m_footer_btn_box_guide_text:"index-module_eHhRT",m_footer_btn:"index-module_vjXOC",m_im_btn:"index-module_uX_D8"},Xe=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,e)}return(0,m.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.isShowIM,n=e.imText,i=this.props,o=i.log,r=i.exposure,a=i.showImText,l=i.customImText,u=i.imTraceLog,p=i.renderIcon;return t?(0,d.jsx)(c.En,{onClick:this.onClick.bind(this),log:o,devTraceData:u,testID:r,children:(0,d.jsxs)(s.View,{className:Ye.m_im,children:[p?p():null,(0,d.jsx)(s.Text,{className:Ye.m_im_text,children:l||(a?n:"\u5ba2\u670d")})]})}):null}}]),n}(Ke),Qe=function(e){return e["judge"]="judge",e["add"]="add",e["remove"]="remove",e}({}),Je={judge:"/restapi/soa2/10108/json/ismyfavorites",add:"/restapi/soa2/10108/json/myfavoritesadd",remove:"/restapi/soa2/10108/json/myfavoritesdelete"};function $e(e,t){var n=t.type,i=t.pId,o=t.bizType,r=t.favoriteId,a="ACT_GUIDE"===o?"ACT_GUIDE_SERVICE":"";switch(n){case"judge":return{QueryList:[{BizType:o,ProductID:i,ProductType:a}]};case"add":return{FavoriteList:[{BizType:o,ProductID:i,ProductType:a}],Channel:c.GI.getPlatform()==c.GI.PLATFORM_TYPE.CRN?3:2,Version:null};case"remove":return{FavoriteIdList:[r]}}}var et=function(){var e=(0,Le.Z)((0,Ve.Z)().mark((function e(t,n){var i,o,r,a,s,c,l,u;return(0,Ve.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.type,o=n.pId,r=n.bizType,a=n.favoriteId,s=t.http,c=t.header,l=[{data:Object.assign({},c,$e(t,{type:i,pId:o,bizType:r,favoriteId:a})),url:Je[i]}],e.next=5,s(l);case 5:u=e.sent,t.afterFetch(u&&u[0],i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tt={judge:"/restapi/soa2/20500/json/isFavoriteAdded",add:"/restapi/soa2/20500/addFavorite",remove:"/restapi/soa2/20500/json/deleteFavorite"};function nt(e,t,n,i){switch(e){case"judge":return{productList:[{bizType:n,productId:t,contextData:null}],userType:i};case"add":return{productId:t,bizType:n,contextData:{},userType:i};case"remove":return{productList:[{bizType:n,productId:t,contextData:null}],userType:i}}}var it,ot=function(){var e=(0,Le.Z)((0,Ve.Z)().mark((function e(t,n){var i,o,r,a,s,c,l,u;return(0,Ve.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.type,o=n.productId,r=n.bizType,a=n.userType,s=t.http,c=t.header,l=[{data:Object.assign({},c,nt(i,o,r,a)),url:tt[i]}],e.next=5,s(l);case 5:u=e.sent,t.guideAfterFetch(u&&u[0],i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rt=function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(e){var i;(0,f.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"state",void 0),(0,y.Z)((0,g.Z)(i),"favoriteId",void 0),i.state={isFavorite:!1},i.favoriteId=0;var o=e.bizType,r=e.pId;return"GuideGuiderNew"===o&&i.guideinit(),r&&i.init(),i}return(0,m.Z)(n,[{key:"init",value:function(){var e=this.props,t=e.pId,n=e.bizType,i=c.Y8.user.isLogin();i&&et(this,{type:Qe.judge,pId:t,bizType:n,favoriteId:null})}},{key:"toggleFavoriteCb",value:function(){var e=this.state.isFavorite,t=this.props,n=t.pId,i=t.bizType,o=t.productId,r=t.userType;"GuideGuiderNew"===i?ot(this,{type:e?Qe.remove:Qe.add,productId:o,bizType:i,userType:r}):et(this,{type:e?Qe.remove:Qe.add,pId:n,bizType:i,favoriteId:this.favoriteId})}},{key:"toggleFavorite",value:function(){var e=this,t=c.Y8.user.isLogin();t?this.toggleFavoriteCb():c.Y8.user.login({callback:function(t){var n=t||{},i=n.data,o=!(null===i||void 0===i||!i.UserID);o&&e.toggleFavoriteCb()}})}},{key:"afterFetch",value:function(e,t){var n=this,i=e||{},o=i.ResultCode,r=(i.ResultMessage,i.ResultList),a=i.FavoriteIdList,s=void 0===a?[]:a;switch(t){case Qe.judge:Array.isArray(r)&&r.length>0&&r.some((function(e){return Number(e.ProductID)===Number(n.props.pId)}))?(this.favoriteId=r[0].FavoriteID,this.setState({isFavorite:!0})):this.setState({isFavorite:!1});break;case Qe.add:0===o?(this.setState({isFavorite:!0}),this.favoriteId=s[0],V().showToast({title:"\u6536\u85cf\u6210\u529f",icon:"none"})):V().showToast({title:"\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",icon:"none"});break;case Qe.remove:0===o?(this.setState({isFavorite:!1}),V().showToast({title:"\u5df2\u53d6\u6d88\u6536\u85cf",icon:"none"})):V().showToast({title:"\u53d6\u6d88\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",icon:"none"});break;default:break}}},{key:"guideinit",value:function(){var e=this.props,t=e.productId,n=e.bizType,i=e.userType;ot(this,{type:Qe.judge,productId:t,bizType:n,userType:i})}},{key:"guideAfterFetch",value:function(e,t){var n=this,i=(e.message,e.returnCode),o=e.queryResultList,r=e.deleteResultList,a=e.extensionData;switch(t){case Qe.judge:0===i&&o&&o.length&&o.some((function(e){return Number(e.productId)===Number(n.props.productId)&&1===e.status}))?this.setState({isFavorite:!0}):this.setState({isFavorite:!1});break;case Qe.add:0===i&&a&&a.favoriteId?this.setState({isFavorite:!0},(function(){V().showToast({title:"\u6536\u85cf\u6210\u529f",icon:"none"})})):V().showToast({title:"\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",icon:"none"});break;case Qe.remove:0===i&&r&&r.length&&r.some((function(e){return Number(e.productId)===Number(n.props.productId)}))?this.setState({isFavorite:!1},(function(){V().showToast({title:"\u5df2\u53d6\u6d88\u6536\u85cf",icon:"none"})})):V().showToast({title:"\u53d6\u6d88\u6536\u85cf\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",icon:"none"});break;default:break}}}]),n}(me.ZP),at={m_fav:"index-module_hShK9",m_fav_text:"index-module_DYSC6"},st=(c.hj.isH5(),function(e){(0,v.Z)(n,e);var t=(0,_.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,m.Z)(n,[{key:"render",value:function(){var e=this.state.isFavorite,t=this.props,n=t.log,i=void 0===n?{}:n,o=(t.expo,t.devtraceLog),r=t.customData,a=t.renderIcon;i.params&&(i.params.actiontype=e?"N":"Y");var l=r||{},u=l.customName;return(0,d.jsxs)(c.En,{className:at.m_fav,onClick:this.toggleFavorite.bind(this),log:i,devTraceData:o,children:[a?a(e):null,(0,d.jsx)(s.Text,{className:at.m_fav_text,children:u||"\u6536\u85cf"})]})}}]),n}(rt)),ct={reducePrice:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 127, 81)","rgb(246, 59, 46)"]},booking:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgb(255,162,0)","rgb(255,119,0)"]},comming:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(255, 238, 236, 0.5)","rgba(255, 243, 241, 0.5)"]},comming_new:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"]},disabled:{start:{x:0,y:0},end:{x:1,y:0},colors:["#dddddd","#dddddd"]},panicBuy:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgb(251, 92, 71)","rgb(255, 53, 39)"]}},lt=n(60984),ut=n(78144),dt=n(33697),pt=function(e){var t=e.inventoryTipInfo,n=e.isSecKill,i=e.target,o=e.request,a=e.changeBottom,s=t||{},l=s.description,u=s.needHaveCountdown,d=s.endTime,p=s.lackTip,h=s.serverSideTime,f=s.isTimeReminder,m=s.isPreStart,v=s.canShowCountdown,_=Math.max((0,c.lu)(d,h),1),g=(0,r.useCallback)((function(e){a(e)}),[i,o]),y=ft({endTime:d,initLeftTime:e.initLeftTime?e.initLeftTime:_,needHaveCountdown:u,callback:g,isTimeReminder:f,isResourcePage:(null===o||void 0===o?void 0:o.isResourcePage)||!1,isPreStart:m,canShowCountdown:v}),x=y.leftTime,k=function(){return x},b=(0,r.useMemo)((function(){return ht(l,x)}),[l,x]);return{isSecKill:n,tipText:b,lackTip:p,getLeftTime:k}},ht=function(e,t){return(e||"").replace("{0}",(0,ut.$q)(t)||"00:00:00")},ft=function(e){var t=e.initLeftTime,n=e.interval,i=void 0===n?1e3:n,o=e.needHaveCountdown,a=e.callback,s=e.endTime,c=e.isTimeReminder,l=e.isResourcePage,u=e.isPreStart,d=e.canShowCountdown,p=(0,r.useState)(t),h=(0,xe.Z)(p,2),f=h[0],m=h[1],v=(0,r.useState)(!1),_=(0,xe.Z)(v,2),g=_[0],y=_[1];return(0,r.useEffect)((function(){m(f)}),[t]),(0,r.useEffect)((function(){if(o){var e=setInterval((function(){if(!d&&u&&l&&f<18e5)a&&a({isTimeReminder:!0,useReq:!1});else if(c&&u&&f<6e5)l?a&&a({isTimeReminder:!0,useReq:!1}):a&&a();else if(f>0){var e=(new Date).getTime()+(0,dt.bZ)(),t=s-e;t<i&&(t=0),m(t)}}),i);return function(){return clearInterval(e)}}}),[o,f,i,c,u,l]),(0,r.useEffect)((function(){g||0!==f||(l&&u?a&&a({useReq:!1,description:"\u5df2\u5f00\u552e"}):a&&a(),y(!0))}),[g,f,a,u]),{leftTime:f}},mt=pt,vt={m_footer_tip_view:"index-module_yQClf",m_tag:"index-module_ORV0R",m_footer_tip_view_text:"index-module_AMzhA",m_left:"index-module_rcPiH",m_tag_text:"index-module_DNcIE",m_footer_tip_view_item:"index-module_T9aLk",m_line:"index-module_G_ZyV",m_lack:"index-module_X5DaN"},_t=r.forwardRef((function(e,t){var n=mt(e),i=n.isSecKill,o=n.tipText,a=n.lackTip,c=n.getLeftTime;return(0,r.useImperativeHandle)(t,(function(){return{getLeftTime:c}})),o?(0,d.jsxs)(s.View,{className:vt.m_footer_tip_view,children:[(0,d.jsxs)(s.View,{className:vt.m_left,children:[i&&(0,d.jsx)(s.View,{className:vt.m_tag,children:(0,d.jsx)(s.Text,{className:vt.m_tag_text,children:"\u79d2\u6740"})}),(0,d.jsx)(s.View,{className:vt.m_footer_tip_view_item,children:(0,d.jsx)(s.Text,{className:vt.m_footer_tip_view_text,children:o})})]}),!!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.View,{className:vt.m_line}),(0,d.jsx)(s.View,{className:vt.m_lack,children:(0,d.jsx)(s.Text,{className:vt.m_footer_tip_view_text,children:a})})]})]}):null})),gt=_t,yt=n(93212),xt=n(8356),kt=n(26040),bt=n(26593),Zt=n(61466),It=function(e){var t=e||{},n=t.title,i=t.seckillbegtime,o=t.seckillid,r=t.callback,a=(0,ut.XU)(i),s={title:n,start:a+"",end:a+1e3+"",hasAlarm:!0,remindMinutes:"10"};kt.Z.isEventExistPromise(s).then((function(e){var t,n;e&&0==(null===(t=e.status)||void 0===t?void 0:t.status)?null!==(n=e.result)&&void 0!==n&&n.isExist?Zt.ZP.show("\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",3e3):kt.Z.addEventPromise(s).then((function(e){var t,n,i,a;0==(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.status)?(Zt.ZP.show("\u5f00\u62a2\u524d10\u5206\u949f\uff0c\u60a8\u5c06\u6536\u5230\u65e5\u5386\u63d0\u9192",3e3),c.N9.setSync("shelf-seckillid-".concat(o),s,void 0,"ottd"),r&&r(),(0,bt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u6210\u529f",code:"success",seckillid:o},"devtrace")):(-1==(null===e||void 0===e||null===(n=e.result)||void 0===n||null===(n=n.errorCode)||void 0===n?void 0:n.indexOf("201"))&&-1==(null===e||void 0===e||null===(i=e.result)||void 0===i||null===(i=i.errorCode)||void 0===i?void 0:i.indexOf("202"))&&Zt.ZP.show("\u7cfb\u7edf\u6709\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5",3e3),(0,bt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u5931\u8d25",code:null===e||void 0===e||null===(a=e.result)||void 0===a?void 0:a.errorCode,seckillid:o},"devtrace"))})):(0,bt.f)({key:"o_sightdetail_poi_addclock",title:"\u79d2\u6740\u6dfb\u52a0\u65e5\u5386\u63d0\u9192\u5931\u8d25",code:e,seckillid:o},"devtrace")}))},wt=function(e){var t=e.bookingButtonInfo,n=e.target,i=e.request,a=e.pop,s=e.push,l=e.toast,u=e.changeBottom,d=i.isResourcePage,p=(0,r.useCallback)((function(){m(t,d,i)}),[t,d,i]),h=(0,r.useCallback)((function(e){u(n,i,e)}),[n,i]),f=(0,y.Z)((0,y.Z)((0,y.Z)({},c.GI.PLATFORM_TYPE.CRN,"/rn_ttd_xtaro/_crn_config?CRNModuleName=rn_ttd_xtaro&CRNType=1&initialPage=queue"),c.GI.PLATFORM_TYPE.Mini,"/pages/tnt/business/detail/queue/index"),c.GI.PLATFORM_TYPE.H5,"/webapp/xtnt/queue"),m=function(e,t,n){var i=e.canJump,r=e.url,u=e.toast,d=e.canAddReminder,p=e.resourceName,m=e.seckillid,v=e.seckillbegtime,_=n.isSecKill,g=n.resourceId,y=n.spotId;if(i)if(_&&t){var x={resourceId:g,spotId:y,seckillid:m};c.hj.isApp()?x.jumpUrl=encodeURIComponent("/rn_ttd_taro/_crn_config?"+(0,xt.R)(r)):c.N9.setSync("QUEUE_PAGE_JUMP_URL",{jumpUrl:encodeURIComponent(r||"")}),s({url:f[c.GI.getPlatform()],data:x})}else if("object"===(0,yt.Z)(r))s({url:"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=booking",data:(0,o.Z)({},r)});else if(r&&"undefined"!==r){var k=(0,xt.v)(r),b=r.split("?")[0];k&&k.token&&(k.token=encodeURIComponent(k.token)),r=b+"?"+(0,xt.R)(k),s({url:r,needLogin:!0,needNewContainer:!r.startsWith("/pages/"),isUseHybridgeMini:!0})}else a();else d?It({title:p,seckillid:m,seckillbegtime:v,callback:h}):u&&l.show(u,3e3)};return{booking:p}},St=wt,Pt=function(e){var t=e.imInfo;return t?(0,d.jsx)(Xe,{imInfo:t,showImText:!0,iconSize:45,onlyShowOnline:!0,imTraceLog:it["imClickDevtrace"],log:it["tkt_im_click"],exposure:it["tkt_im_expo"],renderIcon:function(){return(0,d.jsx)(G.m,{type:"im",style:{fontSize:25,color:"#333",height:25}})}}):null},Tt=function(e){return(0,d.jsx)(G.m,{type:e?"fav":"addFav",style:{fontSize:22,color:e?"#f5190a":"#333",height:25}})},Ct=function(e){var t=e.favoriteInfo;return t?(0,d.jsx)(st,(0,o.Z)((0,o.Z)({},t||{}),{},{log:it["tkt_sightdetail_list_collect_sight_detail"],devtraceLog:it["favClickDevtrace"],renderIcon:function(e){return Tt(e)}})):null},Dt=function(e){var t=e.priceInfo,n=e.isFree,i=e.isResourcePage,o=e.onShowSecondPoplayer;return t?(0,d.jsx)(lt.Z,{priceInfo:t,isFree:n,needWrapped:!0,isResourcePage:i,onShowSubtitlesPoplayer:o}):null},Rt=function(e){var t=e.bottomInfo,n=e.bookingPriceInfo,i=e.isSecKill,a=e.isFree,s=e.inventoryTipInfo,c=e.bookingButtonInfo,u=e.target,p=e.request,h=e.changeBottom,f=e.isResourcePage,m=e.onShowSecondPoplayer,v=e.tipRef,_=e.initLeftTime,g=t||{},y=g.imInfo,x=g.favoriteInfo,k=St(e),b=k.booking;it=(0,r.useContext)(l._);var Z=(0,r.useCallback)((function(){return(0,d.jsx)(Pt,{imInfo:y},"im")}),[y]),I=(0,r.useCallback)((function(){return(0,d.jsx)(Ct,{favoriteInfo:x},"fav")}),[x]),w=(0,r.useCallback)((function(e){return(0,d.jsx)(Dt,(0,o.Z)((0,o.Z)({},e),{},{isFree:a,priceInfo:n,isResourcePage:!!f,onShowSecondPoplayer:m}))}),[Dt,n,a,s]),S=(0,r.useCallback)((function(){return s?(0,d.jsx)(gt,{target:u,request:p,isSecKill:i,inventoryTipInfo:s,changeBottom:h,ref:v,initLeftTime:_}):null}),[i,u,p,s,h]);return c?(0,d.jsx)(Ne,(0,o.Z)((0,o.Z)({customStyles:{m_footer_btn_box:"comming"==c.type?{height:"100%",width:"100%",borderRadius:6,borderStyle:"solid",borderWidth:1,borderColor:"#f54336"}:{},m_footer_btn_text:"comming"==c.type?{color:"#f54336"}:{}},linearGradientStyles:ct[c.type],nextTitle:c.text},n),{},{booking:b,renderPrice:w,ConfigTipComp:S,renderIM:Z,renderFav:I,orderList:c&&"\u4e0b\u4e00\u6b65"===c.text?[""]:["fav","im"],btnClickLog:it["tkt_sightdetail_list_bookbut_sight_detail"](),notHigh:!f})):null},jt=(0,me.RI)(Rt),Nt=n(36165),Vt=function(e){var t=e.poplayerProps,n=e.childProps,i=e.child,r=e.onClose,a=void 0===r?function(){}:r,l=e.showFooter,u=void 0!==l&&l,p=e.children,h=e.scrollStyle,f=void 0===h?{}:h;return(0,d.jsxs)(c.H5,(0,o.Z)((0,o.Z)({},t||{}),{},{onClose:a,children:[i&&(0,d.jsx)(s.ScrollView,{scrollY:!0,style:f,showsVerticalScrollIndicator:!1,children:(0,d.jsx)(i,(0,o.Z)({},n||{}))}),!!u&&p]}))},Lt=n(32180)["document"],Et=function(e){var t,n=e.target,i=e.request,r=e.titleInfo,u=e.shareInfo,p=e.contentList,h=e.buttonInfos,f=e.hideBottom,m=e.bottomInfo,v=e.inventoryTipInfo,_=e.reserveCalendar,g=e.buyNoteShareClickLog,y=e.TitleComp,x=e.ResourcePageHeadComp,k=e.onClose,b=e.changeBottomCallback,Z=e.stocktype,I=e.isHideMindTour,w=e.isBuyNotesPageMini,S=r||{},P=S.resourceName,T=S.subTitle,C=i||{},D=C.isFree,R=C.isHotSale,j=C.isSecKill,N=C.snapshotId,V=C.isResourcePage,L=C.anchor,E=(0,Nt.O)(n,{stocktype:Z}),A=De((0,o.Z)((0,o.Z)({},e),{},{metricData:E})),F=A.bookingButtonInfo,M=A.bookingPriceInfo,O=A.onShowSecondPoplayer,B=A.onScroll,z=A.poplayerProps,H=A.onPoplayerClose,U=A.tipRef,G={isFree:D,isResourcePage:V,subTitle:T,name:P,isHotSale:R,shareInfo:u,priceInfo:M,buyNoteShareClickLog:g||E["tkt_spotdetail_share_click"]},q=function(){var e;return(0,d.jsx)(Vt,(0,o.Z)((0,o.Z)({},z),{},{onClose:H,children:!N&&!f&&(0,d.jsx)(jt,{isResourcePage:V,isSecKill:j,isFree:D,bottomInfo:m,inventoryTipInfo:v,bookingPriceInfo:M,bookingButtonInfo:F,target:n,request:i,changeBottom:b,onShowSecondPoplayer:O,initLeftTime:null===(e=U.current)||void 0===e?void 0:e.getLeftTime()})}))};return(0,d.jsxs)(l._.Provider,{value:E,children:[(0,d.jsxs)(s.View,{className:(0,c.AK)(we.m_buynotes,V?we.m_buynotes_resource:we.m_buynotes_top),style:{height:c.hj.isMini()?"100vh":"100%"},children:[!V&&!w&&!!y&&(0,d.jsx)(y,{titleInfoProps:G,onShowSubtitlesPoplayer:O,onClosePoplayer:k}),(0,d.jsx)(s.View,{style:{flex:1,height:0},children:(0,d.jsx)(Ie,{contentList:p,reserveCalendar:_,buttonInfos:h,isResourcePage:V,titleInfoProps:G,ResourcePageHeadComp:x,TitleComp:y,onTitleCompClose:k,onShowSecondPoplayer:O,isHideMindTour:I,onPageScroll:B,snapshotId:N,isBuyNotesPageMini:w,anchor:L})}),!N&&!f&&(0,d.jsx)(jt,{isResourcePage:V,isSecKill:j,isFree:D,bottomInfo:m,inventoryTipInfo:v,bookingPriceInfo:M,bookingButtonInfo:F,target:n,request:i,changeBottom:b,onShowSecondPoplayer:O,tipRef:U})]}),!c.hj.isH5()||c.hj.isInServer()||V?q():(0,a.createPortal)(q(),null===(t=Lt.getElementsByTagName("body"))||void 0===t?void 0:t[0])]})},At=r.memo(Et)},34320:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(71515)),c=n(95360),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(c.ZP),u={m_picture_wrapper:"index-module_rPh8X"},d={m_timeline_item:"index-module_gPe_B",m_timeline_item_left:"index-module_nx9x8",m_timeline_item_left_end:"index-module_X0bHQ",m_timeline_item_right:"index-module_OQVsh",m_timeline_item_line_wrapper:"index-module_doyOL",m_timeline_item_line:"index-module_TL0cJ",m_timeline_item_node:"index-module_ItM0B",m_timeline_item_time_txt:"index-module_dfIXi"},p=n(31137),h=n(2269),f=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isEndNode,i=e.nodeName;return(0,h.jsxs)(s.View,{className:d.m_timeline_item,children:[(0,h.jsxs)(s.View,{className:(0,p.AK)(d.m_timeline_item_left,n?d.m_timeline_item_left_end:""),children:[(0,h.jsx)(s.View,{className:d.m_timeline_item_line_wrapper,children:(0,h.jsx)(s.View,{className:d.m_timeline_item_line})}),(0,h.jsx)(s.View,{className:d.m_timeline_item_node,children:(0,h.jsx)(s.Text,{className:d.m_timeline_item_time_txt,children:i})})]}),(0,h.jsx)(s.View,{className:d.m_timeline_item_right,children:t})]})}}]),n}(c.ZP),m=n(92954),v=n.n(m),_={m_item_wrapper:"index-module_Gifmg",m_item_title:"index-module_CMmBP",m_item_content:"index-module_OyQLj",m_item_text:"index-module_OgNXj",m_item_tips:"index-module_zmG2X"},g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=void 0===t?[]:t,i=e.title;return(0,h.jsxs)(s.View,{className:_.m_item_wrapper,children:[!!i&&(0,h.jsx)(s.Text,{className:_.m_item_title,children:i}),!!n.length&&n.map((function(e,t){return(0,h.jsx)(s.View,{className:_.m_item_content,children:!!e.type&&("image"==e.type?(0,h.jsx)(p.Y,{src:e.text,style:{width:v().getSystemInfoSync().windowWidth-58},mode:"widthFix"}):(0,h.jsx)(s.Text,{className:(0,p.AK)(_.m_item_text,_["m_item_".concat(e.type)]),children:e.text}))},t)}))]})}}]),n}(c.ZP),y=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.list;return(0,h.jsx)(s.View,{className:u.m_picture_wrapper,children:!!e&&e.map((function(t,n){return t?(0,h.jsx)(f,{nodeName:n+1,isEndNode:n===e.length-1,children:(0,h.jsx)(g,{content:t.content,title:t.title})},n):null}))})}}]),n}(l)},38393:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(92954)),c=n.n(s),l=n(71515),u=n(95360),d=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(u.ZP),p={m_note_wrapper:"index-module_uFasV",m_note_content:"index-module_DcOLL",m_note_dot_content:"index-module_tRMQD",m_note_text:"index-module_UfJLX"},h=n(2269),f=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return(0,h.jsx)(l.View,{className:p.m_note_wrapper,children:!!t.length&&t.map((function(e,t){return(0,h.jsxs)(l.View,{className:p.m_note_content,children:["dotted"===e.type&&(0,h.jsx)(l.View,{className:p.m_note_dot_content}),(0,h.jsx)(l.Text,{className:p.m_note_text,style:"dotted"===e.type?{maxWidth:c().getSystemInfoSync().windowWidth-44}:{},children:e.text})]},"note".concat(t))}))})}}]),n}(d)},21058:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(90201),o=n(92954),r=n.n(o),a=n(71515),s=n(31137),c=n(22276),l=n(90129),u=function(e){var t="\u672c\u4ef6\u4ec5\u7528\u4e8e\u5c55\u793a \u4ee5\u8bc1\u660e\u516c\u53f8\u8d44\u8d28\u4e8b\u5b9c",n=(0,i.useState)((function(){return e.map((function(e,t){return{imgLoaded:!1,imgSuccess:!1,isPreLoaded:0===t}}))})),o=(0,l.Z)(n,2),r=o[0],a=o[1],s=(0,i.useCallback)((function(e,t){return function(){if(!r[e].imgLoaded){var n=(0,c.Z)(r);n[e].imgLoaded=!0,"load"===t&&(n[e].imgSuccess=!0);for(var i=1;i<n.length;i++)n[i-1].isPreLoaded&&n[i-1].imgLoaded&&!n[i].isPreLoaded&&(n[i].isPreLoaded=!0);a(n)}}}),[]),u=function(e){return e&&"string"===typeof e?(e.indexOf("http")>=0&&e.indexOf("webp")<0&&(e+="_.webp"),e):""};return{tipText:t,imagesTipList:r,onImageLoad:s,getWebp:u}},d=u,p={m_supp_wrapper:"index-module_XyO_A",m_supp_name:"index-module_izSLV",m_supp_lice:"index-module_IA7lc",m_supp_service_desc:"index-module_OnwbC",m_supp_img:"index-module_b3sk_",m_supp_img_wrapper:"index-module_YaxJq",m_supp_img_text_wrapper:"index-module_rU2lH",m_supp_img_text:"index-module_KqUGq",m_resource_wrapper:"index-module_L0ELg",m_resource_name:"index-module_Hx5ri",m_resource_split:"index-module_mw_0d"},h=n(2269),f=function(e){var t=e.supplierContent,n=e.isPack3,o=t.reduce((function(e,t){return t.images?e.concat(t.images):e}),[]),c={};o.map((function(e,t){return c[e]=t}));var l=d(o),u=l.tipText,f=l.imagesTipList,m=l.onImageLoad,v=l.getWebp;return(0,h.jsxs)(h.Fragment,{children:[t.map((function(e,o){return(0,h.jsxs)(i.Fragment,{children:[n&&t.length>1&&(0,h.jsxs)(s.cn,{start:{x:0,y:0},end:{x:0,y:1},colors:["rgba(238, 241, 246, 1)","rgba(255, 255, 255, 0)"],className:p.m_resource_wrapper,children:[(0,h.jsxs)(a.Text,{className:p.m_resource_name,children:["".concat(e.productName," "),"\u7531\u4e0b\u65b9\u4f9b\u5e94\u5546\u63d0\u4f9b\uff1a"]}),(0,h.jsx)(a.View,{className:p.m_resource_split})]}),(0,h.jsxs)(a.View,{className:p.m_supp_wrapper,children:[e.supplierName?(0,h.jsx)(a.Text,{className:p.m_supp_name,children:e.supplierName}):null,e.licenceNo?(0,h.jsx)(a.Text,{className:p.m_supp_lice,children:e.licenceNo}):null,e.serviceDesc?(0,h.jsx)(a.Text,{className:p.m_supp_service_desc,children:e.serviceDesc}):null,(e.images||[]).map((function(e){var t,n,i;return e?(0,h.jsxs)(a.View,{className:p.m_supp_img_wrapper,style:null!==f&&void 0!==f&&null!==(t=f[c[e]])&&void 0!==t&&t.isPreLoaded&&null!==f&&void 0!==f&&null!==(n=f[c[e]])&&void 0!==n&&n.imgSuccess?{}:{height:1,opacity:0},children:[(0,h.jsx)(a.View,{className:p.m_supp_img,children:(0,h.jsx)(s.Y,{src:v(e),style:{width:r().getSystemInfoSync().windowWidth-32},mode:"widthFix",onLoad:m(c[e],"load"),onError:m(c[e],"fail")})}),!!u&&(null===f||void 0===f||null===(i=f[c[e]])||void 0===i?void 0:i.imgSuccess)&&(0,h.jsx)(s.cn,{start:{x:0,y:0},end:{x:0,y:1},colors:["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.5)"],className:p.m_supp_img_text_wrapper,style:{width:r().getSystemInfoSync().windowWidth-32},children:(0,h.jsx)(a.Text,{className:p.m_supp_img_text,children:u})})]},e):null}))]})]},o)})),(0,h.jsx)(s.iY.Bottom,{})]})},m=f},90664:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var i={},o={save:function(e){Object.assign(i,e)},load:function(e){return i[e]},clear:function(){i&&(i={})}}},99876:function(e,t){"use strict";t["Z"]=function(e,t,n){var i=e||{},o=i.resourceId,r=i.snapshotId,a={key:n||"PRICE_DESCRIBE",resourceIds:[o]};return r&&(a.snapshotId=r),{data:Object.assign({},t,a),url:"/restapi/soa2/12530/json/applicationConfig?v=PRICE_DESCRIBE"}}},68285:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(79301),o=n(22276),r=n(298),a=n(95308),s=n(90664),c=n(31137),l=function(e,t){var n=t.resourceAddInfo,i=t.resourceDetails,o=(0,r.Z)({},e);if(i){var a,s=i||{},c=s.flags,l=s.isSamsale,d=s.price,p=s.inChina,h=s.isSecKill,f=s.relatedScenicSpots,m=s.terminals,v=s.type,_=s.buyType,g=e.spotId||(null===f||void 0===f||null===(a=f[0])||void 0===a?void 0:a.spotId),y=(c||[]).includes("hotSale"),x=(c||[]).includes("needUpdateAppVersion"),k=(c||[]).includes("minPriceFlag"),b=(c||[]).includes("isPackageV3Resource"),Z=l&&0==d,I=u({terminals:m,type:v}),w=I.isSale,S=I.isView,P=1==_;o=(0,r.Z)((0,r.Z)({},o),{},{spotId:g,isHotSale:y,isFree:Z,inChina:p,isSecKill:h,isSale:w,isView:S,isPreSale:P,needUpdate:x,showPriceFrom:k?1:0,isPack3:b})}if(n){var T,C=(null===n||void 0===n||null===(T=n.resources)||void 0===T?void 0:T[0])||{},D=C.extInfo,R=D||{},j=R.secondsEnter,N=R.overdueRefund;o=(0,r.Z)((0,r.Z)({},o),{},{isSecondsEnter:j,isOverdueRefund:N})}return o},u=function(e){var t=e.terminals,n=e.type;if(!t)return{};if(5===n)return{isSale:!0,isView:!0};var i={H5:7,RN:5,MiniProgram:21},o=c.hj.isMini()||c.hj.isInMini()?i.MiniProgram:c.hj.isH5()?i.H5:i.RN,r=(t||[]).find((function(e){return e&&e.tmalid==o}));return r?{isSale:r.issale,isView:r.isview}:{}},d=n(36165),p=n(38696),h=n(63362),f=n(76914),m=n(3164),v=n(8356),_=c.hj.isInServer(),g=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var u,g,y,x,k,b,Z,I,w,S,P,T,C,D,R,j,N,V,L,E,A,F=arguments;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y=F.length>3&&void 0!==F[3]?F[3]:[],x=F.length>4?F[4]:void 0,k=t.state.request,b=k||{},Z=b.isResourcePage,I=b.devTraceKeyData,!(Z&&c.hj.isInMini(null===(u=t.ctx)||void 0===u?void 0:u.userAgent)&&c.hj.isInWechat(null===(g=t.ctx)||void 0===g?void 0:g.userAgent))){e.next=7;break}return c.hj.isInServer()?t.afterFetch({isLoading:!0}):(w=(0,v.v)(location.href),h.ZP.redirectTo({url:"/pages/xtnt/business/detail/resource-detail/index",data:w,isUseHybridgeMini:!0})),e.abrupt("return");case 7:return S=(0,d.V)(I),P=(0,m.Z)(Z?"resource-detail":"buy-notes"),P.record("Firstreq"),e.next=12,(0,f.Z)({http:t.http,params:k});case 12:if(T=e.sent,C=T.ds,D=T.initModules,R=T.noData,j=T.hasSendErrorLog,N=T.notCoreAPIPromiseList,V=T.isLimit,!R){e.next=23;break}return t.afterFetch({noData:!0}),j||(0,p.Z)(S.saleoutDevtrace),e.abrupt("return");case 23:if(!V){e.next=26;break}return c.hj.isInServer()&&t.afterFetch({isLoading:!0}),e.abrupt("return");case 26:if(C){e.next=28;break}return e.abrupt("return");case 28:if(P.recordEnd("Firstreq"),s.F.save((0,r.Z)({},C)),L=x||[].concat((0,o.Z)(D),(0,o.Z)(y)),E=l(k,C),!E.needUpdate){e.next=35;break}return t.afterFetch({request:E}),e.abrupt("return");case 35:A={},e.prev=36,P.record("FirstResponseFormat"),A=a.getFormatByModules(E,C,L),P.recordEnd("FirstResponseFormat"),e.next=47;break;case 42:return e.prev=42,e.t0=e["catch"](36),A={noData:!0},(0,p.Z)(S.formatErrorDevtrace&&S.formatErrorDevtrace(e.t0)),e.abrupt("return");case 47:P.record("Firstrender"),_||t.afterFetch((0,r.Z)({noData:!1},A),void 0,void 0,(function(){Z&&P.recordEnd("Firstrender")})),n&&n(t,C,A,N);case 50:case"end":return e.stop()}}),e,null,[[36,42]])})));return function(t,n,i){return e.apply(this,arguments)}}(),y=g},97798:function(e,t){"use strict";t["Z"]=function(e,t){var n=e.resourceId,i=e.snapshotId,o={resourceIds:[n]};return i&&(o.snapshotId=i),{data:Object.assign({},t,o),url:"/restapi/soa2/12530/json/resourceGraphicDetail"}}},36115:function(e,t,n){"use strict";var i=n(298);t["Z"]=function(e,t){var n=e.resourceId,o=e.spotId,r=e.seckillid,a=e.isResourcePage,s={resourceId:+n,spotid:o,tags:[{key:"seckill",value:"newSeckill"}]};return a&&(s.tags.push({key:"needRateLimit",value:"T"}),s.updateSecKill=!0),r&&(s=(0,i.Z)((0,i.Z)({},s),{},{seckillid:r})),{data:Object.assign({},t,s),url:"/restapi/soa2/12530/json/resourceSecKillInfo",__API_NAME__:"resourceSecKillInfo"}}},27969:function(e,t){"use strict";t["Z"]=function(e,t){var n=e.spotId,i=e.resourceId,o={imagesizes:["C_640_360"],id:+n,count:1,resourceId:i};return{data:Object.assign({},t,o),url:"/restapi/soa2/12530/json/viewSpotImages"}}},9723:function(e,t,n){"use strict";n.d(t,{L:function(){return Ue}});var i=function(e){var t=(null===e||void 0===e?void 0:e.poplayerContent)||{},n=t.supplierContent,i=t.highRiskContent,o=t.priceNotesList,r=[];return n&&r.push({text:"\u4f9b\u5e94\u5546\u4fe1\u606f",code:"Supplier"}),i&&r.push({text:"\u5b89\u5168\u987b\u77e5",code:"SafetyNotice"}),null!==o&&void 0!==o&&o.length&&r.push({text:"\u4ef7\u683c\u8bf4\u660e",code:"PriceNotice"}),r},o=n(298),r=n(22276),a=["InvoiceDescription","FeeInclude","OtherNotes"],s=["TodayCanBook","TomorrowCanBook","ReadyToUse","CanBookDate","AvailableAfterOpening","BookingDate"],c={0:"\u53d6\u7968",1:"\u53d6\u7968",2:"\u5165\u56ed",3:"\u53d6\u7968",4:"\u53d6\u7968",5:"\u4f7f\u7528",6:"\u96c6\u5408",7:"\u96c6\u5408"},l={0:"\u5165\u56ed",1:"\u5165\u56ed",2:"\u5165\u56ed",3:"\u5165\u56ed",4:"\u4f7f\u7528",5:"\u4f7f\u7528",6:"\u5165\u56ed",7:"\u4f7f\u7528"},u={0:"",1:"",2:"\u300c\u673a\u573a\u53d6\u7968\u300d",3:"\u300c\u975e\u666f\u533a\u53d6\u7968\u300d"},d=function(e,t){return""},p=function(e,t){var n=e||{},i=n.titleKey,r=n.titleValue,a=n.tips,s=n.ticketexchanges,c=n.graphicDetailFlag,l=n.subResourceId,u=n.subResourceName,p={subResourceId:l,subResourceName:u};"AdmissionPlace"===t&&c&&(p.rightButton={text:"\u67e5\u770b\u56fe\u6587\u7248"});var f=(i||"").slice(0,2),m=(s||[]).map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{title:f})})),v=!1;if("AdmissionPlace"===t){v=(s||[]).find((function(e){return!!e.geos&&e.geos.length}));var _=[];m.forEach((function(e){e.geos&&e.geos.length&&e.geos.forEach((function(t){var n=(0,o.Z)((0,o.Z)({},e),{},{geo:t,address:t.poiName||e.address});_.push(n)}))})),m=_}else v=(s||[]).find((function(e){return!!e.geo}));var g=d(v,m),y=[],x="";return"AdmissionPlace"==t&&a?x=a:y=h({ticketInfos:s,titleKey:i,titleValue:r,mapUrl:g,isExistMap:v}),{tableTip:x,table:y,info:p}},h=function(e){var t=e.ticketInfos,n=e.titleKey,i=e.titleValue,o=e.mapUrl,r=(e.isExistMap,(n||"").slice(0,2)),a=[[{content:["".concat(n)],size:"large",width:"65%",styleType:"gray",extraButton:{text:o?"\u67e5\u770b\u5730\u56fe":"",url:o},extraDirection:"row"},{content:["".concat(i)],size:"medium",width:"35%",styleType:"gray"}]];return(t||[]).forEach((function(e){var t=e.imgs,n=e.address,i=e.pickUpPoint,s=e.localaddress,c=e.enaddress,l=e.opentimes,d=!o&&!(null===t||void 0===t||!t[0]),p=d?t.map((function(e){return{name:r||"",thumbnailURL:e.smallurl,imageDescription:e.remark,imageUrl:e.bigurl}})):[],h=n?["".concat(u[i]||"").concat(n)]:[];s&&h.push(s),c&&h.push(c);var f=(l||[]).map((function(e){return e.content})).join(" ");a.push([{content:h,size:"large",width:"65%",extraButton:{text:d?"\u5b9e\u666f\u56fe":"",albumParams:p},extraDirection:"bottom"},{content:[f],size:"medium",width:"35%"}])})),a},f=function(e){var t=e.ticketRefundRuleInfos,n=e.inChina;return(null===t||void 0===t?void 0:t.length)>0?[{descType:1,table:[[{content:["\u53d6\u6d88\u65f6\u95f4".concat(n?"\uff08\u5f53\u5730\u65f6\u95f4\uff09":"")],size:"medium",width:"65%",styleType:"gray"},{content:["\u635f\u5931\u8d39\u7528"],size:"medium",width:"35%",styleType:"gray"}]].concat((0,r.Z)(t.map((function(e){var t=e.refundTime,n=e.refundCost;return[{content:[t],size:"large",width:"65%"},{content:[n],size:"medium",width:"35%"}]}))))}]:[]},m=function(e,t){return"6666"==e?["\u53d6\u6d88\u65f6\u95f4".concat(t?"\uff08\u5f53\u5730\u65f6\u95f4\uff09":""),"\u635f\u5931\u8d39\u7528"]:"1111"===e?["\u8d44\u6e90\u540d\u79f0","\u539f\u59cb\u5356\u4ef7"]:["",""]},v=function(e){var t=e.rowInfoList,n=e.detailCode,i=e.inChina;if((null===t||void 0===t?void 0:t.length)>0){var o=m(n,i);return[{descType:1,table:[[{content:[o[0]],size:"medium",width:"65%",styleType:"gray"},{content:[o[1]],size:"medium",width:"35%",styleType:"gray"}]].concat((0,r.Z)(t.map((function(e){var t=e.cellList||[];return[{content:[t[0]||""],size:"large",width:"65%"},{content:[t[1]||""],size:"medium",width:"35%"}]}))))}]}return[]},_=n(31137),g=function(e,t,n){var i,r=e.tcode,a=e.subttype,s=e.subtitle,c=e.subtcode,l=e.desclist,u=e.structureTicketexchanges,d=(null===t||void 0===t||null===(i=t.resources)||void 0===i?void 0:i[0])||{},h=d.extInfo,f=d.ticketRefundRule,m=d.ticketRefundRuleVersion3,v=n||{},_=v.isSecondsEnter,g=v.isOverdueRefund,x=v.inChina,k=v.isPack3,b=a,Z=y({subtitle:s,subtcode:c,desclist:l,extInfo:h,ticketRefundRule:f,ticketRefundRuleVersion3:m,inChina:x,isPack3:k});if(_&&1==b)return{subType:b,secondEnterList:[Z]};if(g&&2==b)return{subType:b,overdueRefundList:[Z]};if("UseIntroduction"==r){var I=[];if(Array.isArray(u))for(var w=0;w<u.length;w++){var S=p(u[w],c),P=S.table,T=S.tableTip,C=S.info;I.push((0,o.Z)({subType:4,subCode:c,subName:s,table:P,tableTip:T},C))}return I}return 0==b?(0,o.Z)({subType:b},Z):void 0},y=function(e){var t=e.subtitle,n=e.subtcode,i=e.desclist,o=e.extInfo,r=e.ticketRefundRule,a=e.ticketRefundRuleVersion3,s=e.inChina,c=e.isPack3;return{subCode:n,subName:t,needExpand:"OtherNotes"==n,descList:x({subtcode:n,desclist:i,extInfo:o,ticketRefundRule:r,ticketRefundRuleVersion3:a,inChina:s,isPack3:c})}},x=function e(t,n){var i=t.subtcode,o=t.desclist,c=t.extInfo,l=t.ticketRefundRule,u=t.inChina,d=t.isPack3,p=t.ticketRefundRuleVersion3,h=[];if(d&&p&&["Refund","ConditionalRefund","AutomaticRefund","NonRefundable","LossyRefund","Rescheduling"].includes(i)){var m=p||{},g=m.optionAddInfoTypeList,y=void 0===g?[]:g,x=[];y.forEach((function(e){var t=e.optionAddInfoItemTypeList||[];x.push.apply(x,(0,r.Z)(t))}));var k=[];return x.forEach((function(e){if(0==e.contentType&&!e.descDetail)return!1;var t;0==e.contentType&&k.push({descType:0,bold:"8888"==e.detailCode,desc:(null===(t=e.descDetail)||void 0===t?void 0:t.trim())||"",needExpand:!0,isHighlight:!1,extraStyle:{}});1==e.contentType&&k.push.apply(k,(0,r.Z)(v({rowInfoList:e.rowInfoList||[],inChina:u,detailCode:e.detailCode})))})),k}if("ConditionalRefund"!=i||1!=(null===c||void 0===c?void 0:c.refundRuleTextType)||n){var b=(o||[]).filter((function(e){return!!e.desc}));h=b.map((function(e,t){var n,o=e.desc;return{descType:0,bold:99999991===e.destype||8888===e.destype,desc:o.trim(),needExpand:!a.includes(i),isHighlight:s.includes(i),extraStyle:"FeeInclude"===i?8888===e.destype?{marginTop:0===t?0:8,marginBottom:b[t+1]?8:0,lineHeight:_.hj.isApp()?22:"22px",fontSize:14,fontWeight:"bold"}:{marginBottom:b[t+1]&&8888!==(null===(n=b[t+1])||void 0===n?void 0:n.destype)?2:0,lineHeight:_.hj.isApp()?22:"22px",fontSize:14}:{}}}))}else{var Z=l||{},I=Z.ticketRefundRuleInfos,w=Z.desclist,S=Z.specialTicketRefundRuleInfos,P=Z.ticketRefundRuleIDescList,T=[],C=[].concat((0,r.Z)(f({ticketRefundRuleInfos:I,inChina:u})),(0,r.Z)(e({subtcode:i,desclist:P,extInfo:c,ticketRefundRule:l,inChina:u,isPack3:d,ticketRefundRuleVersion3:p},!0)));(S&&S.length>0||w&&w.length>0)&&T.push({descType:0,desc:"\u4ee5\u4e0b\u4e3a\u7279\u6b8a\u65e5\u671f\u9000\u6539\u89c4\u5219\uff1a",bold:!0}),S&&S.length>0&&(T=[].concat((0,r.Z)(T),(0,r.Z)(f({ticketRefundRuleInfos:S,inChina:u})))),h=[].concat((0,r.Z)(C),(0,r.Z)(T),(0,r.Z)(e({subtcode:i,desclist:w,extInfo:c,ticketRefundRule:l,inChina:u,isPack3:d,ticketRefundRuleVersion3:p},!0)))}return h},k=function(e,t){var n,i,a,s=t.resourceAddInfo,c=(null===s||void 0===s||null===(n=s.resources)||void 0===n?void 0:n[0])||{},l=c.extInfo,u=c.addInfos,d=c.ticketRefundRule,p=e||{},h=p.isSecondsEnter,f=p.isOverdueRefund,m=p.inChina,v=p.isPack3,_=void 0!==v&&v,x={},k=(u||[]).reduce((function(t,n){var c=n.title,u=n.tcode,p=n.subttype,v=x[u];if(null==v)x[u]=t.length,t.push({code:u,name:c,rightButton:_?void 0:b({tcode:u,graphicDetailFlag:null===l||void 0===l?void 0:l.graphicDetailFlag}),list:[g(n,s,e)]}),h&&1==p?i=0:f&&2==p&&(a=0);else{var k,Z=t[v].list;if(h&&1==p)if(null==i)i=Z.length,t[v].list=[].concat((0,r.Z)(Z),[g(n,s,e)]);else null===Z||void 0===Z||null===(k=Z[i])||void 0===k||k.secondEnterList.push(y((0,o.Z)((0,o.Z)({},n),{},{extInfo:l,ticketRefundRule:d,inChina:m})));else if(f&&2==p){var I;if(null==a)a=Z.length,t[v].list=[].concat((0,r.Z)(Z),[g(n,s,e)]);else null===Z||void 0===Z||null===(I=Z[a])||void 0===I||I.overdueRefundList.push(y((0,o.Z)((0,o.Z)({},n),{},{extInfo:l,ticketRefundRule:d,inChina:m})))}else{var w=g(n,s,e);w&&(t[v].list=[].concat((0,r.Z)(Z),[w]))}}return t}),[]),I=x["UseIntroduction"];if(void 0!==I){var w=Z(k[I].list,_);k[I].list=w,5!==w[0].subType&&w[0].rightButton&&(k[I].rightButton=w[0].rightButton)}return k},b=function(e){var t=e.tcode,n=e.graphicDetailFlag;if("UseIntroduction"==t&&n)return{text:"\u67e5\u770b\u56fe\u6587\u7248"}},Z=function(e,t){var n=[],i={},o=e.reduce((function(e,t){return e.concat(t)}),[]);if(!t)return o;for(var r=0;r<o.length;r++)void 0==i[o[r].subResourceId]?(i[o[r].subResourceId]=n.length,n.push([{subType:5,rightButton:o[r].rightButton,subResourceId:o[r].subResourceId,subResourceName:o[r].subResourceName},o[r]])):(o[r].rightButton&&(n[i[o[r].subResourceId]][0].rightButton=o[r].rightButton),n[i[o[r].subResourceId]].push(o[r]));if(1===n.length){var a=n[0].shift();a.rightButton&&(n[0][0].rightButton=a.rightButton)}return n.reduce((function(e,t){return e.concat(t)}),[])},I=function(e){var t,n=e.resourceAddInfo,i=null===n||void 0===n||null===(t=n.resources)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.extInfo)||void 0===t?void 0:t.highRisk;if(i)return{type:"text",openUrl:"https://m.ctrip.com/webapp/vacations/tour/notes/4939.html",text:"\u8be5\u9879\u76ee\u5b58\u5728\u4e00\u5b9a\u98ce\u9669\uff0c\u4e3a\u4fdd\u969c\u60a8\u7684\u51fa\u884c\u5b89\u5168\uff0c\u8bf7\u60a8\u9884\u8ba2\u3001\u51fa\u884c\u524d\u52a1\u5fc5\u4ed4\u7ec6\u9605\u8bfb\u300a{\u5b89\u5168\u6307\u5357\u53ca\u8b66\u793a}\u300b\u3002"}},w=function(e){var t=e.resourceAddInfo,n=e.resourceGraphicDetailList,i=e.isPack3;if(null===n||void 0===n||!n.length)return null;var o=[];if(n)for(var r=0;r<n.length;r++)o.push({resourceId:n[r].id,list:S({resourceAddInfo:t,resourceGraphicDetailInfo:n[r],isPack3:i})});return o},S=function(e){var t,n,i=e.resourceAddInfo,o=e.resourceGraphicDetailInfo,r=e.isPack3,a=o||{},s=a.operatingProcesses,l=a.resourceUseStep,u=a.sameAddressWithTicketExchange,d=a.sameTimeWithTicketExchange;r?t=(o||{}).exchangeWay:t=((null===i||void 0===i||null===(n=i.resources)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.extInfo)||{}).exchangeWay;var p=u&&d,h=[];return(s||[]).map((function(e,n){if(0===e.customStepId){var i=c[t],o="\u5165\u56ed/\u4f7f\u7528\u5730\u5740\u3001\u5165\u56ed/\u4f7f\u7528\u65f6\u95f4\u4e0e".concat(i,"\u5730\u5740\u3001").concat(i,"\u65f6\u95f4\u76f8\u540c"),r=[];switch(e.builtInStepType){case"reservationStep":var a=l.reservationStep,s=a.time,u=a.contact,d=a.reservationNotice;h.push({title:e.title,tag:n+1,content:[{text:"".concat(s?"\u9700\u63d0\u524d".concat(s,"\u5c0f\u65f6\u9884\u7ea6\uff1b"):"").concat(u?"\u8054\u7cfb\u65b9\u5f0f\uff1a".concat(u,"\uff1b"):"").concat(d?"\u9884\u7ea6\u8bf4\u660e\uff1a".concat(d):""),type:"text"}]});break;case"exchangeProofStep":var f=l.exchangeProofStep,m=f.getExchangeProofName,v=f.imageList;r=[],m&&r.push({text:"\u5151\u6362\u51ed\u8bc1\u4e3a".concat(m),type:"text"}),(v||[]).forEach((function(e){e.smallImageUrl&&r.push({text:e.smallImageUrl,type:"image"}),e.description&&r.push({text:e.description,type:"tips"})})),h.push({title:e.title,tag:n+1,content:r});break;case"pickupTicketStep":case"useTicketStep":var _=l[e.builtInStepType],g="useTicketStep"==e.builtInStepType;r=[],g&&p?r.push({text:o,type:"text"}):(_||[]).forEach((function(e,t){r.push({text:"".concat(g?"\u5165\u56ed/\u4f7f\u7528":i,"\u5730\u5740").concat(_.length>1?t+1:"",":").concat(P(e.address,e.enAddress,e.localAddress)),type:"text"}),e.ticketUseTimeList&&e.ticketUseTimeList.length&&r.push({text:"".concat(g?"\u5165\u56ed/\u4f7f\u7528":i,"\u65f6\u95f4").concat(_.length>1?t+1:"",":").concat(T(e.ticketUseTimeList)),type:"text"}),(e.imageList||[]).forEach((function(e){e.originalImageUrl&&r.push({text:e.originalImageUrl,type:"image"}),e.description&&r.push({text:e.description,type:"tips"})}))})),h.push({title:e.title,tag:n+1,content:r});break}}else{var y=e.customStepId,x=l.customStepList||[],k=x.find((function(e){return e.customStepId===y})),b=[],Z=k.stepDescription,I=k.imageList;Z&&b.push({text:Z,type:"text"}),(I||[]).forEach((function(e){e.originalImageUrl&&b.push({text:e.originalImageUrl,type:"image"}),e.description&&b.push({text:e.description,type:"tips"})})),h.push({title:e.title,tag:n+1,content:b})}})),h},P=function(e,t,n){var i="";return i+=e,e&&(t||n)&&(i+="\uff1b"),i+=t,t&&n&&(i+="\uff1b"),i+=n,i},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(n,i){t+=(n.startTime&&n.endTime?n.startTime+"~"+n.endTime+(n.remark?"("+n.remark+")":""):n.remark)+(e.length===i+1?"":"\uff1b")})),t},C=function(e){var t=e.priceTip;if(t){var n=JSON.parse((null===t||void 0===t?void 0:t.value)||"{}"),i=n.desc,o=(i||[]).map((function(e){return{type:"text",text:e}}));return o}},D=function(e){var t,n=e.resourceAddInfo,i=e.isPack3,o=e.resourceId,r=(null===n||void 0===n||null===(t=n.resources)||void 0===t?void 0:t[0])||{},a=r.vendorInfo,s=r.vendorInfos,c=[],l=[],u=[];c=i?(s||[]).filter((function(e){return e.resourceId!=o})):[a];for(var d=0;d<c.length;d++){var p=c[d]||{},h=p.brandCompanyName,f=p.name,m=p.licenceNo,v=p.rawLicencePicUrl,_=p.rawLicencePicUrlList,g=p.licenceType,y=p.serviceDesc,x=p.resourceId,k=p.productName,b=p.vendorId,Z=_||[v];(h||f)&&(u.includes(b)?l[u.indexOf(b)].productName+="\u3001".concat(k):(l.push({supplierName:h||f,licenceNo:m?"".concat(0==g?"\u8bb8\u53ef\u8bc1":"\u8425\u4e1a\u6267\u7167","\u7f16\u53f7\uff1a").concat(m):"",image:v||"",images:Z,buttonName:0==g?"\u7ecf\u8425\u8bb8\u53ef\u8bc1":"\u8425\u4e1a\u6267\u7167",serviceDesc:y,resourceId:x,productName:k}),u.push(b)))}return l},R=function(e,t){var n=t||{},i=n.resourceAddInfo,o=n.resourceGraphicDetailList,r=n.getPriceInfo,a=e.isPack3,s=void 0!==a&&a,c=e.resourceId,l=w({resourceAddInfo:i,resourceGraphicDetailList:o,isPack3:s}),u=D({resourceAddInfo:i,isPack3:s,resourceId:c}),d=C({priceTip:r}),p=I({resourceAddInfo:i});return{pictureTextList:l,supplierContent:u,isPack3:s,priceNotesList:d,highRiskContent:p}},j=function(e,t,n){var i=t.resourceDetails,o=t.viewSpotImages,r=e.isResource,a=e.resourceId,s=(e.spotId,((null===o||void 0===o?void 0:o.imgs)||[]).map((function(e){var t;return(null===e||void 0===e||null===(t=e.imgsizes)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||""})));if(r&&!_.hj.isH5()){var c=i||{},l=c.priceInfo,u=c.price,d=c.name,p=u||(null===l||void 0===l?void 0:l.price)||0,h="".concat(d,"\uff0c").concat(p,"\u5143\u8d77"),f="\u6211\u5728\u643a\u7a0b\u65c5\u884c\u4e0a\u53d1\u73b0".concat(d,"\u5f88\u4e0d\u9519\uff0c").concat(p,"\u5143\u8d77\uff0c\u5feb\u53bb\u770b\u770b\u5427\uff01"),m="https://m.ctrip.com",v="".concat(m,"/webapp/ticket/dest/r").concat(a,".html?isHideNavBar=YES"),g={title:h,desc:f,path:v,imageUrl:null===s||void 0===s?void 0:s[0]};return g}};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"W",n="",i=parseInt(e);if(!i||i<0?n="":i<100&&(n=String(i)),"K"===t)n=0===i?"":i<=100&&i?String(i):i<=1e3&&i?"".concat(100*Math.floor(i/100),"+"):i<1e7&&i?"".concat(Math.floor(i/1e3),"K+"):"9999K+";else if(i>=100&&i<1e4){var o=Math.pow(10,i.toString().length-1),r=!/^\d{1}0{2,3}$/g.test(i.toString());n=Math.floor(i/o)*o+"".concat(r?"+":"")}else i>=1e4&&(n=1e4===i?"1\u4e07":Math.floor(i/1e3)/10+"\u4e07+");return n||""}var V=function(e){var t,n=e.resourceAddInfo,i="",o=!1,r=[{type:"text",text:"\u7531\u5b98\u65b9\u4f9b\u5e94\u5546\u63d0\u4f9b\u7684\u5546\u54c1"}],a=(null===n||void 0===n||null===(t=n.resources)||void 0===t?void 0:t[0])||{},s=a.vendorInfo,c=a.extInfo,l=null===c||void 0===c?void 0:c.resourceSaleType;return s.name&&!s.usevendorname&&(i=s.name),2==s.toCPreSaleService&&8==s.agreementType&&(i="\u643a\u7a0b\u4ee3\u7406"),1===l&&(i="\u5b98\u65b9",o=!0),{label:i,labelTips:o?r:[]}},L=function(e,t){var n,i,o=t.resourceAddInfo,r=t.resourceDetails,a=(null===o||void 0===o||null===(n=o.resources)||void 0===n?void 0:n[0])||{},s=a.id,c=a.name,l=a.extInfo,u=l||{},d=u.isNew,p=u.annualSales,h=e.isPreSale,f=e.isFree,m=e.isSecKill,v=e.snapshotId;i=h?V({resourceAddInfo:o}):E({resourceAddInfo:o,resourceDetails:r});var _=i,g=_.label,y=_.labelTips,x=[];return g&&x.push({label:g,labelTips:y}),d&&x.push({label:"\u65b0\u54c1"}),!p||m||v||x.push({label:"".concat(f?"\u5df2\u7ea6":"\u5df2\u552e").concat(N(p))}),{resourceId:s,resourceName:c,subTitle:x}},E=function(e){var t,n,i,o=e.resourceAddInfo,r=e.resourceDetails,a=null===o||void 0===o||null===(t=o.resources)||void 0===t?void 0:t[0],s=null===a||void 0===a||null===(n=a.extInfo)||void 0===n?void 0:n.resourceSaleType,c=null===a||void 0===a?void 0:a.vendorInfo,l=null===r||void 0===r?void 0:r.taginfos,u=c||{},d=u.usevendorname,p=u.agreementType,h=u.saletype,f=u.name,m=u.vendorId,v=(l||[]).filter((function(e){return"specialTag"==e.tagtype})),_=null===v||void 0===v||null===(i=v[0])||void 0===i||null===(i=i.tags)||void 0===i?void 0:i[0],g="",y=!1,x=[{type:"text",text:"\u7531\u5b98\u65b9\u4f9b\u5e94\u5546\u63d0\u4f9b\u7684\u5546\u54c1"}];if(m)if(1==s)g="\u5b98\u65b9",y=!0;else{var k=d;1==h&&8==p&&(g="\u643a\u7a0b\u4ee3\u7406",k=!1),f&&!k&&("\u643a\u7a0b\u4ee3\u7406"==f&&_?(g=_.tname,y=!0,x=[{type:"text",text:_.simpledescription}]):g=f)}return{label:g,labelTips:y?x:[]}},A=function(e,t,n){var i,a,s,u,d=(null===e||void 0===e||null===(i=e.resources)||void 0===i?void 0:i[0])||{},p=d.ticketexchanges,h=(null===e||void 0===e||null===(a=e.resources)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.extInfo)||{},f=h.exchangeWay,m=h.sameAddressWithTicketExchange,v=h.sameTimeWithTicketExchange,g=(p||[]).map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{title:1==e.type?c[f]:l[f]})})),y=(p||[]).find((function(e){return!!e.geo}))&&_.hj.isApp(),x=y?"/rn_ttd/_crn_config?CRNModuleName=rn_ttd&CRNType=1&initialPage=mapfortaketicket&ticketSpots=".concat(JSON.stringify(g)):"",k=[],b="",Z=[],I=[],w=!1;if(n?("128"==t&&(Z=(p||[]).filter((function(e){return 1==e.type}))),"119"==t&&(x="",I=(p||[]).filter((function(e){return 2==e.type})),w=m&&v)):(Z=(p||[]).filter((function(e){return 1==e.type})),I=(p||[]).filter((function(e){return 2==e.type})),w=m&&v),null!==(s=Z)&&void 0!==s&&s.length){var S=c[f];k=F({ticketInfos:Z,exchange:S,mapUrl:x,isExistMap:y}),x=""}if(w){var P=c[f],T=l[f];b="".concat(T,"\u5730\u5740\u3001").concat(T,"\u65f6\u95f4\u4e0e").concat(P,"\u5730\u5740\u3001").concat(P,"\u65f6\u95f4\u76f8\u540c")}else if(null!==(u=I)&&void 0!==u&&u.length){var C=l[f],D=F({ticketInfos:I,exchange:C,mapUrl:x,isExistMap:y});k=[].concat((0,r.Z)(k),(0,r.Z)(D))}return{tableTip:b,table:k}},F=function(e){var t=e.ticketInfos,n=e.exchange,i=e.mapUrl,o=e.isExistMap,r=[[{content:["".concat(n,"\u5730\u5740").concat((null===t||void 0===t?void 0:t.length)>1?"(\u4efb\u9009\u5176\u4e00)":"")],size:"large",width:"65%",styleType:"gray",extraButton:{text:i?"\u67e5\u770b\u5730\u56fe":"",url:i},extraDirection:"row"},{content:["".concat(n,"\u65f6\u95f4")],size:"medium",width:"35%",styleType:"gray"}]];return(t||[]).forEach((function(e){var t=e.imgs,a=e.address,s=e.pickUpPoint,c=e.localaddress,l=e.enaddress,d=e.opentimes,p=!o&&!i&&!(null===t||void 0===t||!t[0]),h=p?t.map((function(e){return{name:n||"",thumbnailURL:e.smallurl,imageDescription:e.remark,imageUrl:e.bigurl}})):[],f=a?["".concat(u[s]||"").concat(a)]:[];c&&f.push(c),l&&f.push(l);var m=(d||[]).map((function(e){return e.content})).join(" ");r.push([{content:f,size:"large",width:"65%",extraButton:{text:p?"\u5b9e\u666f\u56fe":"",albumParams:h},extraDirection:"bottom"},{content:[m],size:"medium",width:"35%"}])})),r},M=["128","119","120"],O=function(e){var t=e.itemAddInfo,n=e.resourceAddInfo,i=e.isMulTables,o=t.tcode,r=t.subtitle,a=t.subtcode,s=t.desclist;if("113"==o&&M.includes(a)){var c=A(n,a,i),l=c.table,u=c.tableTip;return{subType:4,subCode:a,subName:r,table:l,tableTip:u}}return{subType:0,subCode:a,subName:r,descList:B({tcode:o,subtcode:a,desclist:s}),bold:!r||""}},B=function(e){var t=e.tcode,n=e.subtcode,i=e.desclist,o=(i||[]).filter((function(e){return!!e.desc})).map((function(e){var i=e.desc,o=e.destype,r=e.color,a="";1!=o&&8!=o||(a=2==r?"orange":"blue");var s={descType:0,desc:i.trim(),isHighlight:!0,tagType:a,textType:3==r?"gold":"",destype:o,color:r};return"113"==t&&"10002"==n&&(s["calendarInfo"]={text:"\u67e5\u770b\u53ef\u7ea6\u4f7f\u7528\u65e5\u671f"}),s}));return o},z=function(e,t){var n=e.tcode,i=e.title,o=e.subtcode,a=e.subtitle,s=e.desclist,c=e.ticketRefundRuleDTO,l=e.inChina,u=H({tcode:n,subtcode:o,desclist:s,ticketRefundRuleDTO:c,inChina:l}),d=u.uplist,p=u.downlist,h=[{subType:0,subCode:o,subName:a,descList:d}];null!==p&&void 0!==p&&p.length&&h.push({subType:0,subCode:o,descList:p});var f=[].concat((0,r.Z)(t),[{code:n,name:i,list:h}]);return f},H=function(e){var t=e.desclist,n=e.tcode,i=e.subtcode,o=e.ticketRefundRuleDTO,a=e.inChina,s=B({tcode:n,subtcode:i,desclist:t}),c=[],l=o||{},u=l.upDescList,d=l.ticketRefundRuleInfos,p=l.desclist,h=(null===p||void 0===p?void 0:p.length)>0?s.filter((function(e){return 8==e.destype})):s;null!==d&&void 0!==d&&d.length&&(c=U({ticketRefundRuleInfos:d,inChina:a}));var f=B({desclist:u,tcode:n,subtcode:i}),m=B({desclist:h,tcode:n,subtcode:i}),v=B({desclist:p,tcode:n,subtcode:i});return{uplist:[].concat((0,r.Z)(f),(0,r.Z)(m)),downlist:[].concat((0,r.Z)(c),(0,r.Z)(v))}},U=function(e){var t=e.ticketRefundRuleInfos,n=e.inChina;return(null===t||void 0===t?void 0:t.length)>0?[{descType:1,table:[[{content:["\u53d6\u6d88\u65f6\u95f4".concat(n?"\uff08\u5f53\u5730\u65f6\u95f4\uff09":"")],size:"medium",width:"65%",styleType:"gray"},{content:["\u635f\u5931\u8d39\u7528"],size:"medium",width:"35%",styleType:"gray"}]].concat((0,r.Z)(t.map((function(e){var t=e.refundTime,n=e.refundCost;return[{content:[t],size:"large",width:"65%"},{content:[n],size:"medium",width:"35%"}]}))))}]:[]},G=["-1001","-2001","-3001","-4005"],q=function(e,t){var n,i=t.resourceAddInfo,o=(null===i||void 0===i||null===(n=i.resources)||void 0===n?void 0:n[0])||{},a=o.rainfos,s=o.graphicDetailFlag,c=o.ticketRefundRuleDTO,l=e||{},u=l.inChina,d={},p=(a||[]).filter((function(e){return M.includes(e.subtcode)})),h=p.length>1,f=(a||[]).reduce((function(e,t,n){var o=t.title,l=t.tcode,p=t.subtcode,f=t.subtitle,m=t.desclist;if(""===l&&G.indexOf(p)<0||G.indexOf(t.subtcode)>-1)return e;var v=d[l];if(null==v){if(d[l]=e.length,"74"==p){var _=z({tcode:l,title:o,subtcode:p,subtitle:f,desclist:m,ticketRefundRuleDTO:c,inChina:u},e);return _}e.push({code:l,name:o,rightButton:W({tcode:l,graphicDetailFlag:s}),list:[O({itemAddInfo:t,resourceAddInfo:i,isMulTables:h})]})}else{var g,y=e[v].list,x=O({itemAddInfo:t,resourceAddInfo:i,isMulTables:h});x&&(e[v].list=[].concat((0,r.Z)(y),[x])),"113"!=l||u||null!==a&&void 0!==a&&a[n+1]&&l==(null===a||void 0===a||null===(g=a[n+1])||void 0===g?void 0:g.tcode)||e[v].list.push({subType:0,subCode:"tcode113",subName:"",descList:[{descType:0,desc:"*\u4ee5\u4e0a\u6240\u6709\u65e5\u671f\u5747\u4e3a\u5f53\u5730\u65f6\u95f4",textType:"gold",isHighlight:!1}]})}return e}),[]);return f},W=function(e){var t=e.tcode,n=e.graphicDetailFlag;if("113"==t&&n)return{text:"\u56fe\u6587\u6307\u5357"}},K=function(e){var t=e.resourceReserveCalendar,n=t||{},i=n.reserveCalendarList,o=null;if(null!==i&&void 0!==i&&i.length){var r=i[0].date,a=i[i.length-1].date,s={};i.forEach((function(e){var t=e.date,n=e.status,i=e.stock;if(t){var o=t,r="",a=!0;switch(n){case 0:r="\u4e0d\u53ef\u7ea6",a=!0;break;case 1:r=i>0?"\u53ef\u7ea6":"\u7ea6\u6ee1",a=!(i>0);break;case 2:r="\u7ea6\u6ee1",a=!0}s[o]={title:r,disable:a,titleColor:"\u53ef\u7ea6"===r?"#000":"#ccc"}}})),o={beginDate:r,currentDate:r,endDate:a,info:s}}return o},Y=function(e){var t=e.isResource,n=e.type,i=e.resourceId,o=e.isSecKill;return t&&3!=n&&!o?{pId:+i,bizType:"TICKET_RESOURCE",productId:+i,favoriteListUrl:"/favorite/index.html#index?tagid=TICKET&from_native_page=1"}:null},X=Y,Q=n(24239),J=function(e){var t,n,i,o=e.resourceAddInfo,r=e.resourceDetails,a=e.spotId,s=e.isPack3,c=e.resourceId,l=r||{},u=l.relatedScenicSpots,d=(l.flags,(null===o||void 0===o||null===(t=o.resources)||void 0===t?void 0:t[0])||{}),p=d.vendorInfo,h=d.vendorInfos,f=d.productId;if(!p&&!h)return null;i=s?h.find((function(e){return e.resourceId==c})):p;var m=i||{},v=m.agreementType,_=m.saleService,g=m.brandSupply,y=m.serviceTimeDesc;return{type:"ticket",iqCode:"buf8duf4ht09j",pageId:(0,Q.dD)()||10650055126,resourceId:c,productId:f,agreementType:v,saleService:_,brandSupply:g,serviceTimeDesc:y,spotid:a||(null===u||void 0===u||null===(n=u[0])||void 0===n?void 0:n.spotId)}},$=J,ee=function(e,t){var n=t.resourceAddInfo,i=t.resourceDetails,o=e.isResource,r=e.resourceId,a=e.isFree,s=e.seckillid,c=e.isSecKill,l=e.spotId,u=e.isPack3,d=void 0!==u&&u,p=i||{},h=p.type,f=X({isResource:o,type:h,resourceId:r,isSecKill:c||!!s}),m=$({resourceAddInfo:n,resourceDetails:i,spotId:l,isPack3:d,resourceId:r});return{isFree:a,favoriteInfo:f,imInfo:m}},te=ee,ne=n(93212),ie=function(e){return e["booking"]="booking",e["panicBuy"]="panicBuy",e["comming"]="comming",e["comming_new"]="comming_new",e["disabled"]="disabled",e}({}),oe=function(e){return e["booking"]="\u9884\u8ba2",e["coming"]="\u672a\u5f00\u552e",e["disable"]="\u8ba2\u5b8c",e["freeBooking"]="\u9884\u7ea6",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["panicBuy"]="\u62a2\u8d2d",e["select"]="\u9009\u8d2d",e["inPlacePay"]="\u5230\u573a\u4ed8",e["freeComing"]="\u672a\u5f00\u59cb",e}({}),re=function(e){return e["inPlacePay"]="\u5230\u573a\u4ed8",e["coming"]="\u672a\u5f00\u552e",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["freeBooking"]="\u514d\u8d39",e["freeComing"]="\u672a\u5f00\u59cb",e}({}),ae=function(e){return e["booking"]="\u53bb\u9884\u8ba2",e["coming"]="\u672a\u5f00\u552e",e["disable"]="\u8ba2\u5b8c",e["freeBookig"]="\u53bb\u9884\u7ea6",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["panicBuy"]="\u53bb\u62a2\u8d2d",e["freeComing"]="\u672a\u5f00\u59cb",e["select"]="\u53bb\u9009\u8d2d",e}({}),se={seckill:"seckill",reommend:"reommend",shopScence:"shopScence"},ce=n(78144),le=n(33697),ue=function(e){var t=e||{},n=t.inventoryTipType,i={normal:0,limited:1,panic:2};return[1,3,5,7].includes(n)?i.panic:[2,4,6,8,9,10,11].includes(n)?i.limited:i.normal},de=function(e){var t=(0,ce.XU)(e),n=(0,le.bp)(),i=(0,_.lu)(t,n);return i>6e5&&_.hj.isApp()},pe=function(e){var t=(0,ce.XU)(e),n=(0,le.bp)(),i=(0,_.lu)(t,n);return t>n&&i<1801e3},he=function(e){return 6==e||8==e||9==e||10==e},fe=n(29053);var me=function(e,t,n){return _.hj.isInApp()?ye("booking",t,{},n):"/webapp/ticket/tnt/".concat(e,"?").concat((0,fe.Xh)(t))};function ve(e,t){return _.hj.isInApp()?ge(e,t):"/webapp/ticket/".concat(e,"?").concat((0,fe.Xh)(t))}function _e(e,t){if(_.hj.isMini()&&!_.hj.isInQuick()&&!_.hj.isInKuaiShou())return"/pages/tnt/booking/index?".concat((0,fe.Xh)(t));var n="/webapp/ticket/tnt/".concat(e,"?").concat((0,fe.Xh)(t));return _.GI.getDevEnv()!==_.GI.DEV_ENV_TYPE.FAT&&_.GI.getDevEnv()!==_.GI.DEV_ENV_TYPE.DEV||(n+="&env=fat"),n}function ge(e,t){return"/ticket/index.html#/".concat(e,"?").concat((0,fe.Xh)(t))}function ye(e,t,n,i){var o=n.newStructure,r=void 0!==o&&o,a=n.isNew,s=void 0!==a&&a,c="/rn_ttd/_crn_config?CRNModuleName=rn_ttd&CRNType=1&initialPage=".concat(e,"&").concat((0,fe.Xh)(t));return"booking"===e&&(c=xe(c),s&&r&&(c="/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=".concat(e,"&").concat((0,fe.Xh)(t),"&newBooking=true&reuseInstance=2")),i&&(c+="&".concat((0,fe.Xh)(i)))),c}var xe=function(e){for(var t=e.split("?")[1].split("&"),n={},i=0;i<t.length;i++){var o=t[i].split("=");""!=o[0]&&(n[o[0]]=o[1])}var r={optid:{newKey:"tid",newValue:function(e){return e}},count:{newKey:"resourceCount",newValue:function(e){return e}},date:{newKey:"currentSelectDate",newValue:function(e){var t=JSON.stringify({date:decodeURIComponent(e)});return t}}},a={};Object.keys(n||{}).forEach((function(e){r[e]?a[r[e].newKey]=r[e].newValue(n[e]):a[e]=n[e]}));var s=e.split("?")[0],c=Object.keys(a).reduce((function(e,t){return e+"".concat(t,"=").concat(a[t],"&")}),s+"?").slice(0,-1);return c},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=_.GI.getDevEnv();switch(t){case _.GI.DEV_ENV_TYPE.DEV:case _.GI.DEV_ENV_TYPE.FAT:return e?"https://".concat(e):"https://m.fws.qa.nt.ctripcorp.com";case _.GI.DEV_ENV_TYPE.PROD:return"https://m.ctrip.com";default:return"https://m.ctrip.com"}},be=function(e){var t=e.type,n=e.params,i=e.isNewStructure,r="";return 2==t?r=ve("booking",(0,o.Z)((0,o.Z)({},n),{},{old:1})):i?r=_e("booking",(0,o.Z)({},n)):(r=ke()+me("booking",n),r+="&isminiprogram=true"),r},Ze=function(e,t,n){var i,o=n.groupType,r=e.type,a=e.id,s=e.resourceId,c=e.token,l=e.formatedFlags,u=e.formatedExtInfos,d=e.name,p=e.isNewStructure,h=e.spotid,f=e.poiId,m=t.filters,v=void 0===m?[]:m,g=t.extParams,y=t.spotId,x=t.poiId,k=t.traceid,b=t.aid,Z=t.sid,I=t.shelfFilter,w=t.isbbc,S=t.isNewNaquhua,P="",T="";v&&v.length&&(T=(null===(i=v[0])||void 0===i||null===(i=i.filterItems)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.value)||I.filterItems[I.fdefault].value||"");t.date&&t.isAggregationPage&&(T=t.date);var C={spotid:h||y,spotname:"",ext:"source_gonglue","ext-shelfType":se[o],"ext-IsCtripPreferred":"","ext-shelfPage":"",random:Math.floor(1e4*Math.random()),poiId:f||x,label:S?"newNaquhua":""};return t.ctm_ref&&(C.ctm_ref=t.ctm_ref),t.isscan&&(C.isscan=t.isscan),T&&(C.date=encodeURIComponent(T)),C.optid=s||a,c&&(C.token=encodeURIComponent(c)),w&&(C=Object.assign(C,{bbc:!0,allianceid:b,sid:Z,isminiprogram:_.hj.isMini()||_.hj.isInMini()})),P=be({type:r,formatedExtInfos:u,params:C,id:a,spotid:h,requestSpotId:y,date:T,name:d,formatedFlags:l,extParams:g,isNewStructure:p,aid:b,sid:Z}),k&&(P+="&traceid=".concat(k)),{url:P}},Ie=function(e,t,n){var i=n.groupType,r=e.terInfo,a=e.stockstatus,s=e.isZeroPrice,c=e.payMode,l=(e.type,e.inventoryTip),u=e.qconfig,d=e.seckills,p=void 0===d?[]:d,h=e.isPreSale,f=e.reservation,m=e.buyType,v=r&&r.isSale,_=2==a,g="P"==c,y="O"==c,x={canJump:!0},k=Ze((0,o.Z)((0,o.Z)({},e),{},{qconfig:u}),t,{groupType:i}),b=k.url,Z=p.length>0||h||1==m;return x.url=b,v&&_?(x.type=ie.disabled,x.canJump=!1,s?(x.text=oe.bookingFill,x.desc=re.bookingFill,x.layerText=ae.bookingFill):(x.text=oe.disable,x.layerText=ae.disable,Z&&(x.toast="\u5df2\u8ba2\u5b8c\uff0c\u8bf7\u9009\u62e9\u5176\u4ed6\u5546\u54c1\uff5e"))):v&&!_?s&&(g||f)?(x.type=ie.booking,x.text=oe.freeBooking,x.layerText=ae.freeBookig):(x.type=ie.booking,x.text=oe.booking,x.layerText=ae.booking,he(i)&&(x.type=ie.panicBuy),y?x.text=oe.inPlacePay:l&&2==ue(e)&&(x.type=ie.panicBuy,x.text=oe.panicBuy,x.layerText=ae.panicBuy)):3!=a&&v||(x.canJump=!1,x.type=ie.comming,s?(x.text=oe.freeComing,x.desc=re.freeComing,x.toast="\u8fd8\u6ca1\u5230\u5f00\u59cb\u65f6\u95f4\u54e6",x.layerText=ae.freeComing):(x.text=oe.coming,x.desc=re.coming,x.toast="\u8fd8\u6ca1\u5230\u5f00\u552e\u65f6\u95f4\u54e6",x.layerText=ae.coming)),x},we=_.Y8.mkt.getUnion(),Se=we.allianceid,Pe=we.sid,Te=function(e,t){var n,i,r,a=t.resourceAddInfo,s=t.resourceDetails,c=t.resourceSecKillInfo,l=t.isNewStructure,u=t.secKillEventStatus,d=a||{},p=d.forceLogin,h=(null===a||void 0===a||null===(n=a.resources)||void 0===n?void 0:n[0])||{},f=h.name,m=e||{},v=m.isFree,_=m.isView,g=m.isSale,y=m.isPreSale,x=m.ctm_ref,k=m.inventoryTip,b=m.inventoryTipType,Z=s||{},I=Z.mprice,w=void 0===I?0:I,S=Z.mocurrency,P=Z.moprice,T=Z.price,C=Z.currency,D=Z.stockStatus,R=Z.isSecKill,j=Z.reservation,N={price:P,currency:S},V={price:w,currency:C},L={price:T,currency:C},E=(0,o.Z)((0,o.Z)({},s),{},{marketOriginPriceInfo:N,marketPriceInfo:V,priceInfo:L,stockstatus:D,seckills:null===c||void 0===c?void 0:c.seckills,terInfo:{isSale:g,isView:_},isZeroPrice:v,inventoryTip:k||(null===s||void 0===s?void 0:s.inventoryTip),inventoryTipType:b}),A=E.flags,F=E.isSamsale,M=A||[];F||M.push("minPriceFlag"),p&&M.push("memRequire");var O=e.spotId||(null===(i=E.relatedScenicSpots)||void 0===i?void 0:i[0].spotId),B=Ce((0,o.Z)((0,o.Z)((0,o.Z)({},E),{flags:M}),{},{isNewStructure:l,isPreSale:y,reservation:j}),O,e.extParams||{},R,{ctm_ref:x,traceid:e.traceid,request:e});if(E.button=B,null!==E&&void 0!==E&&null!==(r=E.seckills)&&void 0!==r&&r.length){var z=De((0,o.Z)((0,o.Z)({},E),{},{isNewStructure:l}),{qconfig:{},spotId:O,resourceSecKillInfo:c,resourceName:f,secKillEventStatus:u},{ctm_ref:x},e);B=z}return B},Ce=function(e,t,n,i,r){r.ctm_ref;var a=r.traceid,s=r.request,c=(0,o.Z)({},e);i&&(c.terInfo={isSale:!0},c.stockstatus=2);var l=s.isbbc,u=s.groupType,d=Ie(c,{spotId:t,filters:[],extParams:n,traceid:a,aid:Se,sid:Pe,isbbc:l},{groupType:u});return d},De=function(e,t,n,i){var o,r=t.qconfig,a=t.spotId,s=t.resourceSecKillInfo,c=t.resourceName,l=t.secKillEventStatus,u=n.ctm_ref,d=(null===s||void 0===s||null===(o=s.seckills)||void 0===o?void 0:o[0])||{},p=d.inventory,h=d.seckillid,f=d.status,m=d.seckillbegtime,v={isBegin:+f>1,isHasInventory:p>0,secKillstatus:f,seckillbegtime:m},_=i.isbbc,g=Re(e,{status:v,qconfig:r,spotId:a,seckillid:h,aid:Se,sid:Pe,isbbc:_,resourceName:c,secKillEventStatus:l},{ctm_ref:u});return g},Re=function(e,t,n){var i=t.status,r=t.qconfig,a=t.spotId,s=t.seckillid,c=t.isbbc,l=t.resourceName,u=t.secKillEventStatus,d=e.isZeroPrice,p=!1;if(p=null!==i&&void 0!==i&&i.secKillstatus?2==i.secKillstatus&&(null===i||void 0===i?void 0:i.isHasInventory):null===i||void 0===i?void 0:i.isHasInventory,i.isBegin){if(p){var h=Ze((0,o.Z)((0,o.Z)({},e),{},{qconfig:r}),{spotId:a,ctm_ref:null===n||void 0===n?void 0:n.ctm_ref,aid:Se,sid:Pe,isbbc:c},{groupType:"seckill"}),f=h.url,m=f;return"object"===(0,ne.Z)(f)?m.skid=s:m="".concat(f,"&skid=").concat(s),{type:ie.panicBuy,text:d?"\u9884\u7ea6":"\u62a2\u8d2d",desc:"",layerText:d?"":"\u53bb\u62a2\u8d2d",canJump:!0,url:m,seckillid:s}}return{type:ie.disabled,text:d?"\u9884\u7ea6":"\u62a2\u5149",layerText:d?"":"\u62a2\u5149",desc:d?"\u5df2\u7ea6\u6ee1":"",canJump:!1,toast:"\u5df2\u62a2\u5149\uff0c\u4e0b\u6b21\u65e9\u70b9\u6765\u54e6"}}var v,g,y=i.seckillbegtime,x=de(y);return x?u&&0==(null===(v=u.status)||void 0===v?void 0:v.status)&&null!==(g=u.result)&&void 0!==g&&g.isExist?{type:ie.comming_new,text:d?"\u9884\u7ea6":"\u5df2\u6dfb\u52a0\u63d0\u9192",desc:d?"\u672a\u5f00\u59cb":"\u5df2\u6dfb\u52a0\u63d0\u9192",layerText:d?"":"\u5df2\u6dfb\u52a0\u63d0\u9192",canJump:!1,canAddReminder:!1,toast:"\u672a\u5230\u5f00\u62a2\u65f6\u95f4"}:{type:ie.comming,text:d?"\u9884\u7ea6":"\u6dfb\u52a0\u63d0\u9192",desc:d?"\u672a\u5f00\u59cb":"\u6dfb\u52a0\u63d0\u9192",layerText:d?"":"\u6dfb\u52a0\u63d0\u9192",canJump:!1,canAddReminder:!0,resourceName:l,seckillbegtime:y,seckillid:s}:{type:_.hj.isApp()?ie.comming_new:ie.comming,text:d?"\u9884\u7ea6":"\u672a\u5f00\u62a2",desc:d?"\u672a\u5f00\u59cb":"\u672a\u5f00\u62a2",layerText:d?"":"\u672a\u5f00\u62a2",canJump:!1,toast:"\u672a\u5230\u5f00\u62a2\u65f6\u95f4"}},je=Te,Ne=function(e,t){var n=t.resourceDetails,i=t.getPriceInfo,r=void 0===i?{}:i,a=n||{},s=a.mprice,c=void 0===s?0:s,l=a.price,u=a.selfPromotion,d=a.promotionInfos,p=a.minustype,h=a.minusamount,f=a.promotionstatus,m=a.returnCash,v=a.peopleProperty,g=(d||[]).map((function(e){return{type:e.promotionType,reductionMode:1,minustype:p,amount:h,promotionstatus:f,descriptions:e.couponLabel,startAmount:null}}));u&&g.push((0,o.Z)((0,o.Z)({},u),{},{type:3,descriptions:u.promotionDesc}));var y=Ve(g,{price:l}),x=y.minusAmount,k=void 0===x?0:x,b=y.promotionInfo,Z=b||{},I=Z.selfPromData,w=Math.max(parseFloat("".concat((0,_.lu)(l,k||0))),0)||0,S="",P=!1;if(I&&!I.canUse)S=I.show,P=!0;else if(m){var T=m||{},C=T.cashBackAmount,D=T.maxCashBackAmount,R=T.cbType;(D||C)&&(S=1==R?"\u6700\u9ad8\u53ef\u8fd4".concat(D):"\u8fd4".concat(C),P=!0)}var j="",N="",V=(0,_.lu)(c,l),L=V>0?V:0;c&&c>l&&l>w?(j="".concat(c),N="".concat(w),S="\u5df2\u4f18\u60e0\xa5".concat((0,_.lu)(c,w)),P=!0):c&&c>l&&l==w?(j="".concat(c),N="".concat(w),S=l>0?"\u5df2\u4f18\u60e0\xa5".concat(L):"",P=!0):(!c||c<=l)&&l>w?(N="".concat(w),S="\u5df2\u4f18\u60e0\xa5".concat((0,_.lu)(l,w)),P=!0):(!c||c<=l)&&l==w&&(N="".concat(w));var E="",A=null!==r&&void 0!==r&&r.value?JSON.parse(r.value):{desc:[]};((null===A||void 0===A?void 0:A.desc)||[]).forEach((function(e,t){E+=e,t!=A.desc.length-1&&(E+="\n")}));var F=Le({promotionInfo:b,price:N,delPrice:j,sprice:l,peopleProperty:v,reducePrice:L,priceTipList:E}),M={currency:"\xa5",total:"".concat(N),marketPrice:"".concat(j),otherDesc:S,footPop:F,hasPriceLayer:P,subPriceDes:1==e.showPriceFrom};if(!_.hj.isInServer())return M},Ve=function(e,t){if(!e||!e.length)return{};var n={},i={},o={};(e||[]).forEach((function(e){if(e){var r=e.minustype,a=e.promotionstatus,s=e.amount,c=e.reductionMode,l=e.startAmount,u=e.descriptions,d=e.promotionDescs;if(1==e.type)1==r&&0==a?(n.amount=s,n.name="\u7acb\u51cf"):5==r&&0==a&&(n.amount=s,n.name="\u9650\u65f6\u7acb\u51cf"),n.priceInfo=[{isShowMinus:!0,price:n.amount}],n.info=u||d;else if(3==e.type){if(1==c)i.amount=s,i.name="\u7528\u5238\u51cf\xa5".concat(s);else if(2==c){var p=(0,_.dC)((0,_.lu)(1,Number(s)),100),h=p%10>0?p:(0,_.dC)(p,.1);i.name="\u7528\u5238".concat(1===s?"\u5168\u514d":"\u4eab"+h+"\u6298"),i.amount=l}else if(3==c){var f=t.price;i.canUse=f&&Number(l)<=f;var m="\u6ee1".concat(l,"\u51cf").concat(s);i.name=m,i.show=m,i.canUse?i.amount=s:i.name="".concat(i.name,"(\u672a\u6ee1\u8db3\u4f7f\u7528\u95e8\u69db)")}i.amount&&(i.priceInfo=[{isShowMinus:!0,price:i.amount}]),i.info=u||d}else 4==e.type&&(o.amount=s,o.name="\u673a\u7968\u4e13\u4eab",o.info=u||d,o.amount&&(o.priceInfo=[{isShowMinus:!0,price:o.amount}]))}}));var r=0;return o.amount&&n.amount?o.amount<n.amount?(n.name="".concat(n.name,"(\u4e0e\u673a\u7968\u4e13\u4eab\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528)"),r=(0,_.IH)(r,n.amount),delete o.priceInfo):(o.name="".concat(o.name,"(\u4e0e\u7acb\u51cf\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528)"),r=(0,_.IH)(r,o.amount),delete n.priceInfo):r=(0,_.IH)(r,o.amount||n.amount||0),i.amount&&(r=(0,_.IH)(r,i.amount)),{minusAmount:r,promotionInfo:{reducedData:n,selfPromData:i,airTicketData:o}}},Le=function(e){var t=e.promotionInfo,n=e.price,i=e.delPrice,r=e.sprice,a=e.peopleProperty,s=e.reducePrice,c=e.priceTipList,l=t||{},u=l.reducedData,d=l.selfPromData,p=l.airTicketData,h={title:"\u4f18\u60e0\u8bf4\u660e",totleContent:{price:"\xa5"+"".concat(n)}},f=[{total:{name:a||"\u6807\u51c6\u4ef7",marketPrice:i?"\xa5".concat(i):"",price:"\xa5".concat(r)}}];return s&&f.push({total:{name:"\u643a\u7a0b\u9884\u8ba2\u4f18\u60e0",price:"-\xa5".concat(s),isDiscount:!0}}),[p,u,d].forEach((function(e){null!==e&&void 0!==e&&e.amount&&f.push({total:{name:e.name,info:e.info,price:"-\xa5".concat(e.amount),items:(e.priceInfo||[]).map((function(t){return{name:e.info,price:"-\xa5".concat(t.price)}})),isDiscount:!0}})})),(0,o.Z)((0,o.Z)({},h),{},{content:f,priceTipList:c})},Ee=Ne,Ae={notStart:0,show:1,underway:2,finish:3},Fe=function(e,t){var n,i=t.resourceDetails,o=t.resourceAddInfo,r=t.resourceSecKillInfo,a=e||{},s=a.isPreSale,c=a.isSecKill,l=a.isResourcePage;switch(!0){case c:n=Be({resourceSecKillInfo:r,isResourcePage:l});break;case s:n=Me({request:e,resourceDetails:i,resourceAddInfo:o});break;default:n=ze({request:e,resourceDetails:i})}return n},Me=function(e){var t,n=e.request,i=e.resourceDetails,o=e.resourceAddInfo,r=i||{},a=r.inventoryTip,s=r.stockStatus,c=n||{},l=c.isSale,u=2==s,d=(null===o||void 0===o||null===(t=o.resources)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.marketingInfo)||{},p=d.countdown,h=d.desc,f=d.endDate,m=d.startDate,v=!l||l&&p,_=l?f:m,g=new Date((_||"").replace(/-/g,"/")).getTime(),y=l&&!u?a:"";return{description:h,needHaveCountdown:v,endTime:g,lackTip:y}},Oe=function(e){return"string"===typeof e&&"/"==e[0]?parseInt(e.substr(6))||Date.now():e},Be=function(e){var t,n,i=e.resourceSecKillInfo,o=e.isResourcePage,r=null===i||void 0===i||null===(t=i.seckills)||void 0===t?void 0:t.length,a=(null===i||void 0===i||null===(n=i.ResponseStatus)||void 0===n?void 0:n.Timestamp)||(0,le.bp)()||Date.now();if(r>0){var s,c=(null===i||void 0===i||null===(s=i.seckills)||void 0===s?void 0:s[0])||{},l=c.seckillbegtime,u=c.seckillendtime,d=c.description,p=c.needCountdown,h=c.inventoryTip,f=c.status,m=c.inventory,v="\u8ddd\u79bb\u5f00\u552e\u4ec5\u5269{0}",g=o&&(f==Ae.notStart||f==Ae.show)&&pe(l),y=g||f==Ae.show||f==Ae.underway&&p,x=f==Ae.show?l:u,k=(0,ce.XU)(x),b=f==Ae.underway&&m>0?h:"",Z=de(l);return{description:g?v:d,needHaveCountdown:y,endTime:k,serverSideTime:_.hj.isInServer()?Oe(a):(0,le.bp)(),lackTip:b,isTimeReminder:Z,isPreStart:f==Ae.show,canShowCountdown:g}}},ze=function(e){var t=e.request,n=e.resourceDetails,i=t||{},o=i.isFree,r=i.isSale,a=n||{},s=a.inventoryTip,c=",",l=o?"\u5373\u5c06\u7ea6\u6ee1".concat(c).concat(s):"\u5373\u5c06\u552e\u7f44".concat(c).concat(s);return{description:s&&r?l:""}},He=Fe;function Ue(e,t,n,o){var r;switch(n){case"title-info":o.titleInfo=L(e,t);break;case"content-list":o.contentList=k(e,t);break;case"content-list-presale":o.contentList=q(e,t);break;case"reserve-calendar":o.reserveCalendar=K(t);break;case"poplayer-content":o.poplayerContent=R(e,t);break;case"button-infos":o.buttonInfos=i(o);break;case"share-info":o.shareInfo=j(e,t,o);break;case"bottom-info":o.bottomInfo=te(e,t);break;case"bottom-button":o.bottomButton=je(e,t);break;case"price-info":o.priceInfo=Ee(e,t);break;case"inventory-tip-info":o.inventoryTipInfo=He(e,t);break;case"mindTour-hide":o.isHideMindTour=(null===t||void 0===t||null===(r=t.getConfig)||void 0===r||null===(r=r.hideForScan)||void 0===r?void 0:r.needHide)||e.snapshotId;case"dutyDesc":o.dutyDesc=null===t||void 0===t?void 0:t.dutyDesc}}},33697:function(e,t,n){"use strict";n.d(t,{lD:function(){return a},bp:function(){return u},bZ:function(){return c}});var i=0,o=null,r=0;function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i="string"===typeof e&&"/"==e[0]?parseInt(e.substr(6))||(new Date).getTime():e,t||s(i-(new Date).getTime()),o||(o=l())}function s(e){r=e}function c(){return r}function l(){return setTimeout((function(){i+=1e3,o=l()}),1e3)}function u(){return i}},36165:function(e,t,n){"use strict";n.d(t,{O:function(){return a},V:function(){return s}});var i=n(298),o=n(31137),r=n(39720),a=function(e,t){var n,a,s,l=o.hj.isApp()?5:7,u=(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.request)||{},d=u.resourceId,p=u.spotId,h=u.traceid,f=u.devTraceKeyData,m=u.productId,v=u.poiId,_=t||{},g=_.stocktype,y=c(null===e||void 0===e||null===(a=e.state)||void 0===a?void 0:a.request),x=(0,r.Z)(),k=(null===e||void 0===e||null===(s=e.state)||void 0===s||null===(s=s.spotList)||void 0===s?void 0:s[0])||{},b={biztype:"ticket",viewspotid:p?String(p):"",channelid:l?String(l):"",resourceid:d,poiid:v||k.poiId,productid:m};return{tkt_resourcedetail_relatedspot_trans:function(e){return(0,i.Z)({key:"tkt_resourcedetail_relatedspot_trans",actioncode:"tkt_resourcedetail_relatedspot_trans",resourceid:d,channelid:l,pageId:x.clientInfo.pageId},e)},tkt_im_expo:{ubtKey:"tkt_im_expo",data:(0,i.Z)({key:"tkt_im_expo",actioncode:"tkt_im_expo"},b)},tkt_im_click:{key:"tkt_im_click",params:(0,i.Z)({actiontype:"click",key:"tkt_im_click",actioncode:"tkt_im_click"},b)},"tkt-pageid-spot-click":function(e){return{key:"tkt-pageid-spot-click",params:(0,i.Z)({key:"tkt-pageid-spot-click",actioncode:"tkt-pageid-spot-click",resourceid:d,channelid:l},e)}},tkt_sightdetail_list_instruction_sight_detail:{key:"tkt_sightdetail_list_instruction_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_instruction_sight_detail",actioncode:"tkt_sightdetail_list_instruction_sight_detail",resourcetype:y,resourceid:d}},tkt_sightdetail_list_picture_sight_detail:{key:"tkt_sightdetail_list_picture_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_picture_sight_detail",actioncode:"tkt_sightdetail_list_picture_sight_detail",resourcetype:y,resourceid:d}},tkt_spotdetail_jgsm_click_sight_detail:{key:"tkt_spotdetail_jgsm_click_sight_detail",params:{actiontype:"click",key:"tkt_spotdetail_jgsm_click_sight_detail",actioncode:"tkt_spotdetail_jgsm_click_sight_detail",resourceid:d}},tkt_sightdetail_list_discounticon_sight_detail:{key:"tkt_sightdetail_list_discounticon_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_discounticon_sight_detail",actioncode:"tkt_sightdetail_list_discounticon_sight_detail",resourceid:d}},tkt_sightdetail_list_bookbut_sight_detail:function(e){return{key:"tkt_sightdetail_list_bookbut_sight_detail",params:(0,i.Z)({actiontype:"click",key:"tkt_sightdetail_list_bookbut_sight_detail",actioncode:"tkt_sightdetail_list_bookbut_sight_detail",resourceid:d,traceid:h,stocktype:g},e)}},tkt_sightdetail_list_collect_sight_detail:{key:"tkt_sightdetail_list_collect_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_collect_sight_detail",actioncode:"tkt_sightdetail_list_collect_sight_detail",resourceid:d}},tkt_spotdetail_yy_click_sight_detail:function(e){return{key:"tkt_spotdetail_yy_click_sight_detail",params:(0,i.Z)({actiontype:"click",key:"tkt_spotdetail_yy_click_sight_detail",actioncode:"tkt_spotdetail_yy_click_sight_detail",resourceid:d},e)}},tkt_spotdetail_sy_click_sight_detail:function(e){return{key:"tkt_spotdetail_sy_click_sight_detail",params:(0,i.Z)({actiontype:"click",key:"tkt_spotdetail_sy_click_sight_detail",actioncode:"tkt_spotdetail_sy_click_sight_detail",resourceid:d},e)}},tkt_spotdetail_tg_click_sight_detail:function(e){return{key:"tkt_spotdetail_tg_click_sight_detail",params:(0,i.Z)({actiontype:"click",key:"tkt_spotdetail_tg_click_sight_detail",actioncode:"tkt_spotdetail_tg_click_sight_detail",resourceid:d},e)}},tkt_spotdetail_qtxz_click_sight_detail:function(e){return{key:"tkt_spotdetail_qtxz_click_sight_detail",params:(0,i.Z)({actiontype:"click",key:"tkt_spotdetail_qtxz_click_sight_detail",actioncode:"tkt_spotdetail_qtxz_click_sight_detail",resourceid:d},e)}},tkt_spotdetail_jqzc_click_sight_detail:{key:"tkt_spotdetail_jqzc_click_sight_detail",params:{actiontype:"click",key:"tkt_spotdetail_jqzc_click_sight_detail",actioncode:"tkt_spotdetail_jqzc_click_sight_detail",resourceid:d,resourcetype:y}},tkt_spotdetail_gys_click_sight_detail:{key:"tkt_spotdetail_gys_click_sight_detail",params:{actiontype:"click",key:"tkt_spotdetail_gys_click_sight_detail",actioncode:"tkt_spotdetail_gys_click_sight_detail",resourceid:d,resourcetype:y}},tkt_sightdetail_list_safe_sight_detail:{key:"tkt_sightdetail_list_safe_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_safe_sight_detail",actioncode:"tkt_sightdetail_list_safe_sight_detail",resourceid:d,resourcetype:y}},tkt_sightdetail_list_guarantee_sight_detail:{key:"tkt_sightdetail_list_guarantee_sight_detail",params:{actiontype:"click",key:"tkt_sightdetail_list_guarantee_sight_detail",actioncode:"tkt_sightdetail_list_guarantee_sight_detail",resourceid:d,resourcetype:y}},tkt_spotdetail_share_click:{key:"tkt_spotdetail_share_click",params:{actiontype:"click",key:"tkt_spotdetail_share_click",actioncode:"tkt_spotdetail_share_click",resourceid:d,viewspotid:p}},shareClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5206\u4eab\u6309\u94ae",module:"\u5934\u90e8\u6a21\u5757",value:"\u5206\u4eab"},backClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u8fd4\u56de\u6309\u94ae",module:"\u5934\u90e8\u6a21\u5757",value:"\u8fd4\u56de"},messageClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u6d88\u606f\u6309\u94ae",module:"\u5934\u90e8\u6a21\u5757",value:"\u6d88\u606f"},spotClickDevtrace:function(e){return{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u67e5\u770bpoi",module:"\u76f8\u5173\u666f\u70b9\u6a21\u5757",value:e}},textClickDevtrace:function(e){return{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5177\u4f53\u4fe1\u606f\u4e2d\u7684\u5c55\u5f00/\u6536\u8d77",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:e}},officialClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5b98\u65b9\u6309\u94ae",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u5b98\u65b9"},graphicsClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u67e5\u770b\u56fe\u6587\u7248",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u67e5\u770b\u56fe\u6587"},mapClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u67e5\u770b\u5730\u56fe",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u67e5\u770b\u5730\u56fe"},supplierClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u4f9b\u5e94\u5546\u4fe1\u606f",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u4f9b\u5e94\u5546\u4fe1\u606f"},priceDesClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u4ef7\u683c\u8bf4\u660e",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u4ef7\u683c\u8bf4\u660e"},safetyNoteClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5b89\u5168\u987b\u77e5",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u5b89\u5168\u987b\u77e5"},mindTourClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5b89\u5fc3\u8ba2",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u5b89\u5fc3\u8ba2"},priceDetailsClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u4ef7\u683c\u660e\u7ec6\u6309\u94ae",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u4ef7\u683c\u660e\u7ec6"},favClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u6536\u85cf\u6309\u94ae",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u6536\u85cf"},imClickDevtrace:{action:"usr_click",attrs:f,scene:"\u70b9\u51fb\u5728\u7ebf\u54a8\u8be2\u6309\u94ae",module:"\u8d2d\u4e70\u987b\u77e5\u6a21\u5757",value:"\u5728\u7ebf\u54a8\u8be2"}}},s=function(e){return{saleoutDevtrace:{attrs:e,action:"sys_show",module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u8d44\u6e90\u4e0d\u53ef\u8ba2\uff08\u670d\u52a1\u8fd4\u56de\uff09",value:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",key:"tkt_2100002",jsonData:{value:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427"}},formatErrorDevtrace:function(t){return{attrs:e,action:"sys_show",module:"\u53ef\u8ba2\u963b\u65ad",scene:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",key:"tkt_1100002",jsonData:{value:"\u4e3b\u63a5\u53e3\u6570\u636e\u5f02\u5e38",errorMsg:t?t.message:"\u65e0",errorStack:t?t.stack.slice(0,400):"\u65e0"}}}}},c=function(e){var t=e||{},n=t.isPreSale;return n?"\u9884\u552e":"\u666e\u901a"}},73921:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(298),o=(n(90201),n(31137)),r=n(2269),a={forward:"&#xe944;",back:"&#xe943;",cancel:"&#xe93f;",share:"&#xe939;",help:"&#xe931;",spot:"&#xed65;",addFav:"&#xeeb7;",fav:"&#xe958;",im:"&#xf00d6;",arrowup:"&#xe32b;",arrowdown:"&#xe32c;"},s=function(e){if("string"!=typeof e)return e;var t=e.replace(/&#x([0-9a-fA-F]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))}));return t},c=function(e){return(0,r.jsx)(o.rD,(0,i.Z)((0,i.Z)({fontFamily:"crn_font_resource_detail"},e),{},{children:s(a[e.type])}))}},60984:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(90201),o=n(71515),r=n(31137),a=n(70245),s=n(92954),c=n.n(s),l=n(73921),u={m_reduce_help_icon_wrapper_bottom:"index-module_uYgZG",m_header_price_view:"index-module_BqtQ7",m_second_section:"index-module_iJpKC",m_wrapped_second_section:"index-module_HdD5Y",m_wrapped_view:"index-module_rJmY8",m_free_first_section:"index-module_cAClQ",m_first_section:"index-module_UMS0o",m_reduce_desc_wrapper:"index-module_nMHu5",m_reduce_desc:"index-module_XppBZ",m_reduce_help_icon_wrapper:"index-module_c7yls",m_reduce_help_icon:"index-module_V6gXj",m_first_section_del_wrapper:"index-module_Ix0LA",m_arrow_icon:"index-module_FFkjb"},d=n(2269),p=function(e){var t=e.priceInfo,n=e.isResourcePage,o=e.onShowSubtitlesPoplayer,r=!!t.otherDesc,a=!!t.hasPriceLayer,s=(0,i.useCallback)((function(){a&&h(t,n,o)}),[a,t]);return{handleClick:s,hasReduceInfo:r,hasPriceLayer:a}},h=function(e,t,i){var o=e.footPop,s=void 0===o?{}:o,p=s.title,h=s.content,f=s.totleContent,m=s.bottom,v=s.priceTipList,_=(0,r.vw)((function(){return Promise.resolve().then((function(){return(0,a.Z)(n(91278))}))})),g=r.hj.isApp()||r.hj.isMini();r.hj.isIPhoneX(),c().getSystemInfoSync().windowHeight;(r.hj.isInApp()||r.hj.isInMini())&&r.hj.isIPhoneX();var y={poplayerProps:{name:"paymentPopLayer",title:p,hideIphoneXAdapter:!0,crnModalProps:{coverStatusBar:!0},zIndex:99,style:{maxHeight:"100%"},headerStyles:{m_poplayer_title:{color:"#111"},closeColor:"#555",closeIcon:"xclosed"},showCloseButton:!0},child:_,childProps:{content:h,totleContent:f,bottom:m,priceTipList:v,renderCollapseIcon:function(e){return(0,d.jsx)(l.m,{type:e?"arrowdown":"arrowup",className:u.m_arrow_icon})}}};i&&i({code:"payment",poplayerProps:y})},f=p,m=n(298),v=n(57042),_=n(24460),g=n(21867),y=n(86066),x=n(45023),k=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(e){var i;return(0,v.Z)(this,n),i=t.call(this,e),i.state={},i}return(0,_.Z)(n)}(i.Component);(0,x.Z)(k,"defaultProps",{});var b={u_price_start_text:"index-module_XzJND",u_price_icon:"index-module_DJnvB",u_price_icon_linethrough:"index-module_LZQQC",u_price_currency:"index-module_VPrIA",u_price_price:"index-module_aWU9Q",u_price_price_linethrough:"index-module_k0edi",u_price_currency_linethrough:"index-module_eAsfW",u_price:"index-module_nEsiJ",u_price_wrapper:"index-module_XQCRe",u_price_symbol:"index-module_wHzqy",u_price_linethrough:"index-module_egJ_Q",u_price_free:"index-module_wLOEM",u_price_box:"index-module_AAMoF"},Z=function(e){(0,g.Z)(n,e);var t=(0,y.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,_.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.currency,e.value),n=e.reverse,i=void 0===n||n,a=e.lineThrough,s=e.free,c=e.isShowStart,l=e.priceWrappperClassName,u=void 0===l?"":l,p=e.priceWrappperStyle,h=void 0===p?{}:p,f=e.customStyles,v=void 0===f?{}:f,_=a?b.u_price_icon_linethrough:b.u_price_icon,g=a?v.u_price_icon_linethrough:v.u_price_icon,y=(a?b.u_price_currency_linethrough:b.u_price_currency,a?b.u_price_price_linethrough:b.u_price_price),x=a?v.u_price_price_linethrough:v.u_price_price,k=[],Z=r.hj.isBaidu()?o.View:o.Text;return c&&k.push((0,d.jsx)(o.Text,{className:b.u_price_start_text,style:v.u_price_start_text||{},children:"\u8d77"},"startText")),k.push((0,d.jsxs)(Z,{className:(0,r.AK)(b.u_price_wrapper,a?b.u_price_linethrough:"",s?b.u_price_free_wrapper:"",u),style:h,children:[!s&&(0,d.jsx)(o.Text,{className:(0,r.AK)(b.u_price_symbol,_),style:(0,m.Z)((0,m.Z)({},v.u_price_icon||{}),g||{}),children:"\xa5"}),s?(0,d.jsx)(o.Text,{className:b.u_price_free,style:v.u_price_free||{},children:"\u514d\u8d39"}):(0,d.jsx)(o.Text,{className:(0,r.AK)(y),style:(0,m.Z)((0,m.Z)({},v.u_price_price||{}),x||{}),children:t||0})]},2)),i&&k.reverse(),(0,d.jsx)(o.View,{className:b.u_price,children:(0,d.jsx)(o.View,{className:b.u_price_box,style:v.u_price_box||{},children:k})})}}]),n}(k),I={m_price_view:"index-module_bFXkF",m_price_desc:"index-module_nW3jP",m_del_price_view:"index-module_Isd8j",m_price_wrapper:"index-module_ZNe3j",m_price_box:"index-module_DjeDC"},w=function(e){var t=e.priceInfo,n=void 0===t?{}:t,i=e.isFree,a=r.hj.isApp();return(0,d.jsx)(o.View,{className:I.m_price_view,children:!!n.total&&(0,d.jsx)(Z,{value:n.total,currency:n.currency,free:i,priceWrappperClassName:I.m_price_wrapper,boxClassName:I.m_price_box,customStyles:{u_price_box:{alignItems:"flex-end",height:"100%"},u_price_icon:{position:"relative",top:"auto",fontWeight:"bold",marginRight:2,marginBottom:r.hj.isApp()?0:2},u_price_price:{fontSize:22,fontWeight:"bold",color:"#ff6600",fontFamily:"20TH bold",lineHeight:a?24:"24px"},u_price_free:{fontSize:22,fontWeight:"bold",color:"#FF6600"}},isShowStart:!i&&!!n.subPriceDes})})},S=function(e){var t=e.priceInfo,n=e.isFree,i=r.hj.isApp(),a=r.hj.isMini();return(0,d.jsx)(o.View,{className:I.m_del_price_view,style:{marginBottom:r.hj.isMini()||r.hj.isAndroid()&&!r.hj.isH5()?5:1},children:(0,d.jsx)(Z,{lineThrough:!0,free:n,value:"".concat(t.marketPrice),priceWrappperClassName:I.m_price_wrapper,customStyles:{u_price_box:{marginBottom:i?r.hj.isAndroid()?-4:1:0,lineHeight:i?24:a?"12px":"22px"},u_price_icon_linethrough:{lineHeight:i?15:a&&r.hj.isAndroid()?"10px":"15px",height:i?15:a&&r.hj.isAndroid()?"10px":"15px",textDecorationLine:"line-through"},u_price_price_linethrough:{lineHeight:i?15:a&&r.hj.isAndroid()?"10px":"15px",marginRight:4,textDecorationLine:"line-through"}}})})},P=n(4277),T=function(e){var t=e.priceInfo;return(0,d.jsx)(r.cn,{start:{x:0,y:0},end:{x:1,y:0},direction:0,colors:["rgb(255, 127, 81)","rgb(246, 59, 46)"],className:u.m_reduce_desc_wrapper,children:(0,d.jsx)(o.Text,{className:u.m_reduce_desc,children:null===t||void 0===t?void 0:t.otherDesc})})},C=function(e){var t=e.isBottom;return(0,d.jsx)(o.View,{className:(0,r.AK)(u.m_reduce_help_icon_wrapper,t?u.m_reduce_help_icon_wrapper_bottom:""),children:(0,d.jsx)(l.m,{type:"help",className:u.m_reduce_help_icon})})},D=function(e){var t=e.priceInfo,n=void 0===t?{}:t,a=e.isFree,s=e.needWrapped,c=e.isResourcePage,l=(0,i.useContext)(P._),p=f(e),h=p.handleClick,m=p.hasPriceLayer,v=p.hasReduceInfo;return(0,d.jsx)(r.En,{onClick:h,log:l["tkt_sightdetail_list_discounticon_sight_detail"],devTraceData:l["priceDetailsClickDevtrace"],children:(0,d.jsxs)(o.View,{className:(0,r.AK)(u.m_header_price_view,s?u.m_wrapped_view:""),children:[(0,d.jsxs)(o.View,{className:(0,r.AK)(u.m_first_section,a?u.m_free_first_section:""),children:[(0,d.jsx)(w,{priceInfo:n,isFree:a,isResourcePage:c}),(0,d.jsxs)(o.View,{className:u.m_first_section_del_wrapper,children:[!a&&!!n.marketPrice&&(0,d.jsx)(S,{priceInfo:n,isFree:a}),m&&!v&&(0,d.jsx)(C,{})]})]}),!a&&(v||m&&v)?(0,d.jsxs)(o.View,{className:(0,r.AK)(u.m_second_section,s?u.m_wrapped_second_section:""),children:[v&&(0,d.jsx)(T,{priceInfo:n}),m&&v&&(0,d.jsx)(C,{isBottom:!0})]}):null]})})},R=D},9156:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var i=n(90201),o=n(71515),r=n(60984),a={m_title_info_wrapper:"index-module_LdNSl",m_title_box_tip:"index-module_xOv3x",m_title_box_tip_text:"index-module_vAkoc"},s=n(31137),c={m_title_info_wrapper:"index-module_UKkM_",m_title_info_view:"index-module_yoLnl",m_title_info_text:"index-module_GBknt",m_placeholder:"index-module_B2UnA",m_info_title_close:"index-module_YaX2b",m_hot_sale_icon:"index-module_SmgXe",m_hot_sale_icon_img:"index-module_h0eKf"},l=n(73921),u=n(2269),d=function(){return(0,u.jsx)(o.View,{className:c.m_hot_sale_icon,children:(0,u.jsx)(s.Y,{className:c.m_hot_sale_icon_img,src:"https://dimg04.c-ctrip.com/images/0AS4h1200083d6ofb4AB3.png_.webp"})})},p=function(e){var t=e.isHotSale,n=e.name,i=e.isResourcePage,r=e.onClose;return(0,u.jsxs)(o.View,{className:c.m_title_info_wrapper,children:[t&&(0,u.jsx)(d,{}),(0,u.jsx)(o.View,{className:c.m_title_info_view,children:(0,u.jsxs)(o.Text,{className:c.m_title_info_text,children:[t&&(0,u.jsx)(o.Text,{className:c.m_placeholder,children:"\u9650\u65f6\u62a2\u8d2d"}),n]})}),!!r&&!i&&(0,u.jsx)(s.En,{onClick:r,className:c.m_info_title_close,children:(0,u.jsx)(l.m,{type:"cancel",style:{fontSize:20}})})]})},h=p,f={m_sub_title_list_wrapper:"index-module__Cf_r",m_sub_title_list_wrapper_buynotes:"index-module_lsBuq",m_sub_title_item_wrapper:"index-module_NYvIp",m_sub_title_item_inner:"index-module_WKzrI",m_sub_title_text:"index-module_Hepot",m_sub_title_icon_wrapper:"index-module_xuedr",m_sub_title_icon:"index-module_fT2kQ",m_split_line:"index-module_Z3USZ"},m=function(e){var t=e.onShowSubtitlesPoplayer,n=(0,i.useCallback)((function(e){t&&t(e)}),[t]);return{handleClick:n}},v=m,_=n(4277),g=function(){return(0,u.jsx)(o.View,{className:f.m_split_line})},y=function(e){var t=e.subTitles,n=e.isResourcePage,r=v(e),a=r.handleClick,c=(0,i.useContext)(_._);return(0,u.jsx)(o.View,{className:(0,s.AK)(f.m_sub_title_list_wrapper,n||null!==t&&void 0!==t&&t.length?"":f.m_sub_title_list_wrapper_buynotes),children:t.map((function(e,n){var i,r=!(null===e||void 0===e||null===(i=e.labelTips)||void 0===i||!i.length),d=n===t.length-1;return(0,u.jsxs)(o.View,{className:f.m_sub_title_item_wrapper,children:[(0,u.jsxs)(s.En,{className:f.m_sub_title_item_inner,onClick:r?function(){return a(e)}:void 0,activeOpacity:r?.8:1,withFeedback:!0,log:r?c["tkt_spotdetail_jqzc_click_sight_detail"]:{},devTraceData:r?c["officialClickDevtrace"]:null,children:[(0,u.jsx)(o.Text,{className:f.m_sub_title_text,children:e.label}),!!r&&(0,u.jsx)(o.View,{className:f.m_sub_title_icon_wrapper,children:(0,u.jsx)(l.m,{type:"help",className:f.m_sub_title_icon})})]},"item.text".concat(n)),!d&&(0,u.jsx)(g,{})]},n)}))})},x=y,k=function(e){return null},b=k,Z=function(e){var t=e.isFree,n=e.isResourcePage,i=e.priceInfo,s=e.subTitle,c=void 0===s?[]:s,l=e.name,d=e.isHotSale,p=e.shareInfo,f=e.buyNoteShareClickLog,m=e.snapshotId,v=e.onClose,_=e.onShowPaymentPoplayer,g=e.onShowSubtitlesPoplayer;return(0,u.jsxs)(o.View,{className:a.m_title_info_wrapper,children:[!m&&n&&(0,u.jsx)(r.Z,{priceInfo:i||{},isFree:t,needWrapped:!1,onShowPaymentPoplayer:_,isResourcePage:n,onShowSubtitlesPoplayer:g}),(0,u.jsx)(h,{isHotSale:d,name:l,isResourcePage:n,onClose:v}),(0,u.jsx)(x,{subTitles:c,onShowSubtitlesPoplayer:g,isResourcePage:n}),!n&&(0,u.jsx)(b,{shareInfo:p,buyNoteShareClickLog:f})]})},I=Z},4277:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var i=n(90201),o=(0,i.createContext)({})},10081:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(90983),o=n(92954),r=n(9723),a=n(31137),s=a.hj.isInServer(),c=function(e,t){var n=e.viewSpotImages,i=null===n||void 0===n?void 0:n.imgs;if(null!==i&&void 0!==i&&i.length){var o=i.map((function(e){var t;return(null===e||void 0===e||null===(t=e.imgsizes)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||""}))[0];return o&&o.indexOf("http")>=0&&o.indexOf("webp")<0&&(o+="_.webp"),s&&o&&o.length&&(t.preloadImage={sourceImageUrl:o,base64Url:""}),i.map((function(e){var t;return(null===e||void 0===e||null===(t=e.imgsizes)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url)||""}))}},l=n(298),u=n(97613),d=a.GI.getDevEnv()===a.GI.DEV_ENV_TYPE.FAT?"https://m.ctrip.fat325.qa.nt.ctripcorp.com":"https://m.ctrip.com",p=function(e,t){var n,i=e.ctm,o=e.isbbc,r=e.hideScenicSpot;if(o||r)return[];var s=t||{},c=s.resourceDetails,p=s.resourceAddInfo,h=c||{},f=h.relatedScenicSpots,m=null===p||void 0===p||null===(n=p.resources)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.extInfo)||void 0===n?void 0:n.relatedScenicSpotTitle,v=(f||[]).map((function(e){var t=e.distance,n="";switch(!0){case"number"!==typeof t:n=t;break;case t>=1e5:n=">100\u516c\u91cc";break;case t<1e5&&t>=1e3:n="".concat((+t/1e3).toFixed(1),"\u516c\u91cc");break;case t<1e3&&t>=100:n=Math.round(t)+"\u7c73";break;case t<100:n="<100\u7c73";break;default:n=t}var o,r=e.spotId;return o=a.hj.isApp()?"/rn_destination_poi/index.main.js?CRNModuleName=rn_destination_poi&CRNType=1&initialPage=sightDetail&businessId=".concat(r).concat(i?"&ctm=".concat(i):""):a.hj.isInMini()&&!a.hj.isInQuick()&&!a.hj.isInKuaiShou()||a.hj.isMini()?"/pages/gs/sight/newDetail?sightId=".concat(r).concat(i?"&ctm=".concat(i):""):"".concat(d,"/webapp/you/gspoi/sight/0/").concat(r,".html?seo=0&isHideNavBar=YES").concat(i?"&ctm=".concat(i):"").concat((0,u.Ry)()?"&scene=welfare":""),(0,l.Z)((0,l.Z)({},e),{},{distance:n,url:o,relatedScenicSpotTitle:m})}));return v},h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object.keys(e||{}).filter((function(e){return-1!==e.indexOf("ext-")})),i={};return n.forEach((function(n){var o=n;t||(o=n.replace(/^ext-(.*)$/,"$1")),e[n]&&(i[o]=e[n])})),i},f={getFormatByModules:function(e,t,n){var o,a={request:e},s=(0,i.Z)(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;switch(l){case"header-image":a.headerImages=c(t,a);break;case"spot-list":a.spotList=p(e,t);break;default:(0,r.L)(e,t,l,a)}}}catch(e){s.e(e)}finally{s.f()}return a},getRequestParams:function(e,t){var n,i=t?{}:(0,o.getCurrentInstance)(e),r=t||(null===i||void 0===i||null===(n=i.router)||void 0===n?void 0:n.params),s=r.resourceid,c=r.seckillid,l=r.ctm,u=r.ctm_ref,d=r.allianceid,p=r.sid,f=r.spotId,m=r.traceid,v=r.from,_=r.ishideshare,g=r.bbc,y=r.poiId,x=r.snapshotId,k=r.anchor,b=r.hideScenicSpot,Z=h(r),I=a.hj.isH5();return{isResource:!0,isResourcePage:!0,resourceId:s,seckillid:c,extParams:Z,ctm:l,ctm_ref:u,isbbc:!(a.hj.isApp()||!g),aid:d,sid:p,spotId:f,isH5:I,traceid:m,devTraceKeyData:[{key:"resourceId",value:s}],isInMini:a.hj.isInMini()||a.hj.isMini(),from:v?decodeURIComponent(v):"",ishideshare:1==_,poiId:y,snapshotId:x,anchor:k,hideScenicSpot:"true"==b}}}},96343:function(e,t,n){"use strict";var i=n(298),o=n(79301),r=n(95308),a=n(90664),s=n(36115),c=n(68285),l=n(10081),u=n(86648),d=n(33697),p=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.header,a=n.isPreSale,s=n.isSecKill,s?h(t,{request:n,header:r},i):a&&f(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t,n,r){var c,p,h,f,m,v,_,g,y,x,k,b,Z,I,w,S,P,T,C,D,R,j,N;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(p=n.request,h=n.header,f=r||{},m=f.isTimeReminder,v=f.useReq,_=void 0===v||v,g=f.soldOut,y=f.description,x=f.refresh,k=[(0,s.Z)(p,h)],!_){e.next=11;break}return e.next=6,t.http(k);case 6:if(b=e.sent,b){e.next=9;break}return e.abrupt("return");case 9:e.next=14;break;case 11:b=[a.F.load("resourceSecKillInfo")],x||(m||null!==(S=b)&&void 0!==S&&null!==(S=S[0])&&void 0!==S&&null!==(S=S.seckills)&&void 0!==S&&null!==(S=S[0])&&void 0!==S&&S.status&&(b[0].seckills[0].status=2),g&&null!==(I=b)&&void 0!==I&&null!==(I=I[0])&&void 0!==I&&null!==(I=I.seckills)&&void 0!==I&&null!==(I=I[0])&&void 0!==I&&I.status&&(b[0].seckills[0].status=3,b[0].seckills[0].inventory=0),void 0!==y&&null!==(w=b)&&void 0!==w&&null!==(w=w[0])&&void 0!==w&&null!==(w=w.seckills)&&void 0!==w&&null!==(w=w[0])&&void 0!==w&&w.description&&(b[0].seckills[0].description=y)),null!==(Z=b)&&void 0!==Z&&null!==(Z=Z[0])&&void 0!==Z&&null!==(Z=Z.ResponseStatus)&&void 0!==Z&&Z.Timestamp&&(b[0].ResponseStatus.Timestamp=null,(0,d.lD)((new Date).getTime()+(0,d.bZ)(),!0));case 14:return P=a.F.load("resourceAddInfo"),T=a.F.load("resourceDetails"),C=a.F.load("isNewStructure"),D=a.F.load("getConfig"),R={resourceSecKillInfo:null===(c=b)||void 0===c?void 0:c[0],resourceAddInfo:P,resourceDetails:T,isNewStructure:C,getConfig:D},e.next=21,(0,u.g)(R.resourceSecKillInfo,P,_);case 21:j=e.sent,N=l.Z.getFormatByModules(p,(0,i.Z)({secKillEventStatus:j},R),["bottom-button","inventory-tip-info"]),t.afterFetch((0,i.Z)({},N),!1,!0,(function(){}));case 24:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:(0,c.Z)(t,void 0,l.Z,[],["inventory-tip-info","bottom-button","reserve-calendar"]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["Z"]=p},96174:function(e,t,n){"use strict";var i=n(65542);t["Z"]=i.Z},80830:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(57042),o=n(24460),r=n(81876),a=n(21867),s=n(86066),c=n(45023),l=n(90201),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,r.Z)(o),"openCompare",!1),o}return(0,o.Z)(n,[{key:"shouldComponentUpdate",value:function(){if(!this.openCompare)return!0;var e=!0;return e}}]),n}(l.Component)},63228:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(298),o=n(79301),r=n(95308),a=n(57042),s=n(24460),c=n(81876),l=n(21867),u=n(86066),d=n(45023),p=n(90201),h=n(71515),f=n(31137),m=n(96174),v=p.Fragment,_=n(24239),g=n(93081),y=n(97442),x=n(2269),k=f.hj.isInServer(),b=function(e,t,b){var Z,I=arguments.length>3&&void 0!==arguments[3]&&arguments[3],w=arguments.length>4?arguments[4]:void 0;return Z=function(Z){(0,l.Z)(S,Z);var I=(0,u.Z)(S);function S(i){var o,r,s;(0,a.Z)(this,S),"resource-detail"!==b&&(0,_.ku)("Loadjs"),s=I.call(this,i),(0,d.Z)((0,c.Z)(s),"pageId",void 0),(0,d.Z)((0,c.Z)(s),"count",0),(0,d.Z)((0,c.Z)(s),"componentRef",void 0),(0,d.Z)((0,c.Z)(s),"autoExpose",!0),(0,d.Z)((0,c.Z)(s),"isViewPort",void 0),(0,d.Z)((0,c.Z)(s),"state",{}),(0,d.Z)((0,c.Z)(s),"props",void 0),(0,d.Z)((0,c.Z)(s),"targetPageRef",void 0),s._appendAttrs(w),_.bw.setRef(s.targetPageRef);var l=f.GI.getPlatform();if(s.pageId=t[l],s.setParams(),s.isViewPort="vacation"!==(null===(o=s.props)||void 0===o||null===(o=o.app)||void 0===o||null===(o=o.urlQuery)||void 0===o?void 0:o.sourceFrom),console.log(s.isViewPort,"this.isViewPort"),(0,g.Zw)(),!k&&(0,g.eV)(["getProductPriceCalendar","CreateTicketOrder","SearchBookingReducetools","searchBookingSalesPromotionRestful","getProductShelf","searchAdditionalResource","getActPreferenceInfo","resourceDetails","getShelfResourceList","getShopScenes","getTicketGroupInfo"]),null!==(r=n.g)&&void 0!==r&&r.__crnpages&&!(0,_.b6)("pageNames")&&s.isViewPort){var u,p=null===(u=n.g)||void 0===u||null===(u=u.__crnpages)||void 0===u?void 0:u.map((function(e){var t=e.name;return t}));(0,_.FD)("pageNames",p)}return e.stopRenderCheck&&e.stopRenderCheck()&&m.Z.stopRenderCheck&&m.Z.stopRenderCheck(),s}return(0,s.Z)(S,[{key:"_appendAttrs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=["autoExpose","exposeThreshold","exposeDuration","getExposeData"];n.forEach((function(n){"undefined"!==typeof t[n]&&(e[n]=t[n])}))}},{key:"renderCheckInfo",value:function(){return e.renderCheckInfo?e.renderCheckInfo():{top:.2,bottom:.1}}},{key:"getInitialState",value:function(){var t=(0,r.Z)((0,o.Z)().mark((function t(n){var i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("getInitialState start >>>",n),null===e||void 0===e||!e.getInitialState){t.next=10;break}if(null===e||void 0===e||e.setContext(n),console.log("getInitialState setContext done >>>",n),!f.hj.isInServer()){t.next=10;break}return console.log("getInitialState isInServer start >>>",n),t.next=8,e.getInitialState();case 8:return i=t.sent,t.abrupt("return",{initialState:i});case 10:return t.abrupt("return",{});case 11:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"onBackAndroid",value:function(){e.onBackAndroid?e.onBackAndroid():this.pop()}},{key:"componentDidCatch",value:function(){}},{key:"pageWillAppear",value:function(){e.pageWillAppear&&(e.pageWillAppear(),this.setParams())}},{key:"pageDidAppear",value:function(){var t;console.log("pageDidAppear >>>>>>"),this.targetPageRef?_.bw.setRef(this.targetPageRef):_.bw.setRef(void 0),m.Z.enableJSHandleBackEvent&&m.Z.enableJSHandleBackEvent(),e.pageDidAppear&&e.pageDidAppear(),null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.pageDidAppear&&this.componentRef.pageDidAppear()}},{key:"pageWillDisappear",value:function(){var t;console.log("pageWillDisappear >>>>>>"),e.pageWillDisappear&&e.pageWillDisappear(),null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.pageWillDisappear&&this.componentRef.pageWillDisappear()}},{key:"pageDidDisappear",value:function(){console.log("pageDidDisappear >>>>>>"),_.bw.setRef("")}},{key:"getPageId",value:function(){var t,n,i,o,r;return e.isIgnorePagePv&&e.isIgnorePagePv()||null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.isIgnorePagePv&&null!==this&&void 0!==this&&null!==(n=this.componentRef)&&void 0!==n&&n.isIgnorePagePv()?"ignore_page_pv":null!==this&&void 0!==this&&null!==(i=this.componentRef)&&void 0!==i&&i.getInitPageId&&null!==this&&void 0!==this&&null!==(o=this.componentRef)&&void 0!==o&&o.getInitPageId()?null===this||void 0===this||null===(r=this.componentRef)||void 0===r?void 0:r.getInitPageId():this.pageId}},{key:"setParams",value:function(){console.log("setParams >>>>",this.pageId),(0,_.PX)({pageId:this.pageId})}},{key:"componentDidShow",value:function(){var e;null!==this&&void 0!==this&&null!==(e=this.componentRef)&&void 0!==e&&e.componentDidShow&&this.componentRef.componentDidShow()}},{key:"componentDidHide",value:function(){var e;null!==this&&void 0!==this&&null!==(e=this.componentRef)&&void 0!==e&&e.componentDidHide&&this.componentRef.componentDidHide()}},{key:"rendContent",value:function(){var t=this,n=this.state.initialState,o=f.hj.isMini(),r=o?h.View:p.Fragment,a=o?{className:"__xtaro__root__ xtaro_border_box"}:{};return(0,x.jsx)(r,(0,i.Z)((0,i.Z)({},a),{},{children:(0,x.jsx)(e,(0,i.Z)((0,i.Z)({},this.props),{},{initialState:n,count:this.count++,ref:function(e){return t.componentRef=e}}))}))}},{key:"render",value:function(){var t=e.useFragment?p.Fragment:v,n={flex:1,backgroundColor:e.useFragment?"transparent":"#fff",height:"100%"},i=f.hj.isApp()&&f.hj.isAndroid();return(0,x.jsx)(y.f6,{children:this.isViewPort?(0,x.jsx)(t,{children:i?(0,x.jsx)(h.View,{style:n,children:this.rendContent()}):(0,x.jsx)(p.Fragment,{children:this.rendContent()})}):(0,x.jsx)(h.View,{style:{flex:1},children:this.rendContent()})})}}]),S}(m.Z),(0,d.Z)(Z,"isForceRender",I),Z},Z=b},95360:function(e,t,n){"use strict";n.d(t,{ZP:function(){return D},eG:function(){return R},RI:function(){return j}});var i=n(90129),o=n(79301),r=n(298),a=n(68277),s=n(95308),c=n(57042),l=n(24460),u=n(81876),d=n(21867),p=n(86066),h=n(45023),f=n(90201),m=n(31137),v=n(80830),_=n(61466),g=n(209),y=n(18866),x=n(39720),k=n(63362),b=n(97442),Z=n(2269),I=n(32180)["window"],w=["target"],S=k.ZP.navigateTo,P=k.ZP.navigateBack,T=k.ZP.redirectTo,C={http:y.ZP,toast:_.ZP,confirm:g.Z,push:S,pop:P,redirect:T},D=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,h.Z)((0,u.Z)(i),"http",void 0),(0,h.Z)((0,u.Z)(i),"header",void 0),(0,h.Z)((0,u.Z)(i),"cName",void 0),(0,h.Z)((0,u.Z)(i),"timer",void 0),(0,h.Z)((0,u.Z)(i),"platform",void 0),(0,h.Z)((0,u.Z)(i),"fetchStatus",0),(0,h.Z)((0,u.Z)(i),"ctx",void 0),(0,h.Z)((0,u.Z)(i),"toast",_.ZP),(0,h.Z)((0,u.Z)(i),"confirm",g.Z),(0,h.Z)((0,u.Z)(i),"push",S),(0,h.Z)((0,u.Z)(i),"pop",P),(0,h.Z)((0,u.Z)(i),"redirect",T),i.cName="",i.timer=(new Date).getTime(),i.http=y.ZP,i.header=(0,x.Z)(),i.platform=m.GI.getPlatform(),i.ctx=n.ctx,i}return(0,l.Z)(n,[{key:"setFetchStatus",value:function(e){this.fetchStatus=e?1:2}},{key:"componentDidMount",value:function(){this.cName&&console.log("%c\u6027\u80fd\u68c0\u6d4b-".concat(this.cName,"\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u8017\u65f6:").concat((new Date).getTime()-this.timer,"ms"),"color:red")}}],[{key:"setContext",value:function(e){var t,i=(null===e||void 0===e?void 0:e.req)||{};n.ctx={url:i.url,query:i.query,cid:i.clientId,middleware:i.__middleware,isLogin:i.isLogin,isLoginWithoutType:i.isLoginWithoutType,userAgent:null===(t=i.headers)||void 0===t?void 0:t["user-agent"],cookies:i.cookies,isUseSkuModel:i.isUseSkuModel,parsedUrl:i._parsedUrl},n.__req__=i,m.hj.isInServer()?n.http=function(e,t,i,o,r){return(0,y.ZP)(e,t,i,n.__req__,o,r)}:n.ctx.middleware=I["__middleware"]}},{key:"getBaseInitialState",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,s,c,l,u,d,p,h,f,m,v=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=v.length>2&&void 0!==v[2]?v[2]:{},c=new Promise((function(e){s=e})),l=t.getBaseState?t.getBaseState():{},l||(l={}),u=i||{},d=u.target,p=void 0===d?{}:d,h=(0,a.Z)(u,w),f=(0,r.Z)({state:l,header:t.header(),http:t.http,ctx:t.ctx,platform:t.platform,afterFetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ds,i=t.cb;s&&s({state:Object.assign(l,e),ds:n}),i&&i()}},p),n.init((0,r.Z)((0,r.Z)((0,r.Z)({second:function(){}},p),h),{},{target:f})),e.next=9,c;case 9:return m=e.sent,e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(v.Z);(0,h.Z)(D,"http",y.ZP),(0,h.Z)(D,"header",x.Z),(0,h.Z)(D,"platform",m.GI.getPlatform()),(0,h.Z)(D,"__req__",void 0),(0,h.Z)(D,"ctx",void 0),(0,h.Z)(D,"contextType",b.Ni);var R=function(e,t,n,o){var a=(0,f.useMemo)((function(){return{http:y.ZP,header:(0,x.Z)(),platform:m.GI.getPlatform(),toast:_.ZP,confirm:g.Z,push:S,pop:P,props:e,ref:n,state:{}}}),[e]),s=(0,f.useState)((function(){return("function"==typeof t?t(a,e):t)||{}})),c=(0,i.Z)(s,2),l=c[0],u=c[1];return Object.assign(a,{state:l,setState:function(e){u((0,r.Z)((0,r.Z)({},a.state||{}),e||{}))}}),(0,f.useEffect)((function(){o&&o(l)}),[l]),{target:a,state:l,setState:u}},j=function(e){return"function"!==typeof e?e:f.forwardRef((function(t,n){return(0,Z.jsx)(e,(0,r.Z)((0,r.Z)((0,r.Z)({},C),t),{},{ref:n}))}))}},63297:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(57042),o=n(24460),r=n(81876),a=n(21867),s=n(86066),c=n(45023),l=(n(90201),n(56884)),u=n.n(l),d=n(92954),p=n(96174),h={"pages/tnt/booking/index":"/pages/tnt/business/booking/index","pages/tnt/detail/product-sku/index":"/pages/tnt/business/detail/product-sku/index","pages/tnt/booking/o2obooking/booking/index":"/pages/tnt/business/booking/o2obooking/booking/index","pages/tnt/booking/o2obooking/coupon/index":"/pages/tnt/business/booking/o2obooking/coupon/index","pages/xtnt/business/detail/resource-detail/index":"/pages/tnt/business/detail/resource-detail/index","pages/xtnt/business/detail/queue/index":"/pages/tnt/business/detail/queue/index","pages/xtnt/business/detail/resource-detail/buy-notes/index":"/pages/tnt/business/detail/resource-detail/buy-notes/index","pages/xtnt/business/detail/ticket-detail/index":"/pages/tnt/business/detail/ticket-detail/index"},f=h,m=n(2269),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,r.Z)(e),"onLoad",(function(e){var t,n=(null===(t=(0,d.getCurrentInstance)())||void 0===t?void 0:t.router)||{},i=n["path"]||"",o=n["$taroPath"]||"",r=Object.keys(f).find((function(e){return i.includes(e)})),a="mini_reidrect=980",s="weapp".toUpperCase()==d.ENV_TYPE.SWAN;try{if(r){var c=f[r];if(o.includes("?")&&!s){var l=o.split("?"),p=l[1]||"";c=p?"".concat(c,"?").concat(p,"&").concat(a):"".concat(c,"?").concat(a)}else{var h=Object.keys(e),m=h.map((function(t){return s&&"token"===t?"".concat(t,"=").concat(encodeURIComponent(e[t])):"".concat(t,"=").concat(e[t])})),v=m.join("&");c=v?"".concat(c,"?").concat(v,"&").concat(a):"".concat(c,"?").concat(a)}u().redirectTo({url:c})}else u().switchTab({url:"/pages/home/homepage"})}catch(e){u().switchTab({url:"/pages/home/homepage"})}})),e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return(0,m.jsx)(m.Fragment,{})}}]),n}(p.Z)},97442:function(e,t,n){"use strict";n.d(t,{Ni:function(){return d},f6:function(){return p}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(45023),c=n(90201),l=function(e){return e["dark"]="dark",e["light"]="light",e}({}),u=n(2269),d=c.createContext("light"),p=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,u.jsx)(u.Fragment,{children:this.props.children})}}]),n}(c.PureComponent);(0,s.Z)(p,"theme",l.light)},91278:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=n(45023),l=n(90201),u=n(71515),d=n(92954),p=n.n(d),h=n(31137),f=n(99135),m=n(95360),v={linear_orange:{start:{x:0,y:0},end:{x:1,y:0},colors:["rgb(255, 165, 10)","rgb(255, 119, 0)"],locations:[0,1]},linear_lightred:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"],locations:[0,1]},grey:{start:{x:0,y:0},end:{x:1,y:0},colors:["#d5d5d5","#d5d5d5"],locations:[0,1]},linear_red:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgb(255,110,56)","rgb(255,68,32)"],locations:[0,1]},red_border_add:{start:{x:0,y:0},end:{x:1,y:0},colors:["#rgba(255, 238, 236,0.5)","#rgba(255, 243, 241,0.5)"],locations:[0,1]}},_=function(e){return e["booking"]="linear_orange",e["panicBuy"]="linear_red",e["comming"]="linear_lightred",e["disabled"]="grey",e["hasClock"]="linear_lightred",e["addClock"]="red_border_add",e}({}),g=function(e){return e["coming"]="\u672a\u5f00\u552e",e["freeComing"]="\u672a\u5f00\u59cb",e["panicComing"]="\u672a\u5f00\u62a2",e["booking"]="\u53bb\u9884\u8ba2",e["freeBookig"]="\u53bb\u9884\u7ea6",e["panicBuy"]="\u53bb\u62a2\u8d2d",e["select"]="\u53bb\u9009\u8d2d",e["disable"]="\u8ba2\u5b8c",e["bookingFill"]="\u5df2\u7ea6\u6ee1",e["snappedUp"]="\u62a2\u5149",e["hasClock"]="\u5df2\u6dfb\u52a0\u63d0\u9192",e["addClock"]="\u6dfb\u52a0\u63d0\u9192",e}({}),y=(h.GI.getPlatform(),h.GI.PLATFORM_TYPE,h.hj.isIOS,h.hj.isAndroid,h.hj.isApp);function x(){return!!y()}var k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),i.state={buttonInfo:i.props.buttonInfo},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this;f.B.register("ottd_shelf_price_secclock_timeup",(function(t){var n;if((null===t||void 0===t?void 0:t.seckillid)==(null===(n=e.props.buttonInfo)||void 0===n?void 0:n.seckillid)){var o=null!==t&&void 0!==t&&t.layerText?t:{layerText:null!==t&&void 0!==t&&t.isZeroPrice?g.freeComing:g.panicComing,type:_.comming,buttonLinear:{start:{x:0,y:0},end:{x:1,y:1},colors:["rgba(251, 91, 71, 0.5)","rgba(255, 53, 39, 0.5)"],locations:[0,1]}};e.setState({buttonInfo:(0,i.Z)((0,i.Z)((0,i.Z)({},e.props.buttonInfo),t),{},{buttonLinear:v[o.type]})})}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return x()?t:e}}]),n}(m.ZP),b={m_payment_item:"index-module_Zg1id",m_item_left:"index-module_s7AmE",m_item_right:"index-module_pcGy_",m_margin_bottom:"index-module_X57kY",m_item_total:"index-module_Ov2xF",m_item_transparent:"index-module_MyOAE",m_item_discount:"index-module_V9nrD",m_item_text:"index-module_B6UAz",m_item_detail:"index-module_x8XAC",m_item_detail_light:"index-module_mzaj7",m_payment_item_desc:"index-module_NRRdt",m_payment_item_desc_1:"index-module_Z37S7",m_payment_item_descs:"index-module_sSnUm",m_payment_row_left:"index-module_du50M",m_discount_text_wrapper:"index-module_kwvB9",m_discount_text:"index-module_NyiWI",m_payment_row_right:"index-module_bcPOr",m_payment_row_between:"index-module_BHzqh",m_item_linedot:"index-module_nTH1t",m_item_border_dashed:"index-module_W5Es0",m_item_extra_price:"index-module_flXKX"},Z=function(){},I=n(30901),w=n(2269),S=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.price,i=e.type,o=void 0===i?2:i,r=e.marketPrice,a=e.descs,s=void 0===a?[]:a,c=e.discountText,l=e.isDiscount,d=e.isNoDash,p=e.extraPrice,f=e.isReturnCash,m=e.theme,v=void 0===m?"light":m;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.View,{className:(0,h.AK)(b.m_payment_item,2===o?b.m_margin_bottom:""),children:(0,w.jsxs)(u.View,{className:b.m_payment_row_between,children:[(0,w.jsxs)(u.View,{className:b.m_payment_row_left,children:[!!c&&(0,w.jsx)(u.View,{className:b.m_discount_text_wrapper,children:(0,w.jsx)(u.Text,{className:b.m_discount_text,children:c})}),(0,w.jsx)(u.Text,{className:(0,h.AK)(b.m_item_text,b.m_item_left,1===o?b.m_item_total:b.m_item_detail,f?b.m_item_transparent:"",1===o&&l?b.m_item_discount:""),style:Z(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:t}),1==o&&!d&&(0,w.jsx)(u.View,{className:b.m_item_linedot,style:{height:I.Z},children:(0,w.jsx)(u.View,{className:b.m_item_border_dashed})})]}),(0,w.jsx)(u.View,{className:b.m_payment_row_right,children:r?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Text,{space:"nbsp",className:(0,h.AK)(b.m_item_text,b.m_item_right,1===o?b.m_item_total:b.m_item_detail),style:Z(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:"\u95e8\u5e02\u4ef7 "}),(0,w.jsx)(u.Text,{space:"nbsp",className:(0,h.AK)(b.m_item_text,b.m_item_right,1===o?b.m_item_total:b.m_item_detail),style:Z(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:r}),p&&p.currency?(0,w.jsx)(u.View,{children:(0,w.jsx)(u.Text,{className:b.m_item_extra_price,style:Z(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:"(\u2248".concat(p.currency).concat(p.price,")")})}):null]}):(0,w.jsx)(u.Text,{space:"nbsp",className:(0,h.AK)(b.m_item_text,b.m_item_right,1===o?b.m_item_total:b.m_item_detail,f?b.m_item_transparent:"",l?b.m_item_detail_light:{}),style:Z(v,[{key:"color",value:"black"},{key:"backgroundColor",value:"white"}]),children:n})})]})}),s.length?(0,w.jsx)(u.View,{className:(0,h.AK)(b.m_payment_item_descs),children:s.map((function(e){return(0,w.jsx)(u.Text,{className:(0,h.AK)(b.m_payment_item_desc),children:e})}))}):null]})}}]),n}(l.Component),P={m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0},title:{marginBottom:6}},T={m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0,marginBottom:20}},C={outermost:"index-module_tUrXG",m_payment_poplayer:"index-module_QhJU9",scroll_view_style:"index-module_BneLq",m_payment_cont:"index-module_a5I45",m_payment_cont_no_padding_bottom:"index-module_vhM4h",m_payment_bottom:"index-module_hkgDm",m_payment_bottom_text:"index-module_p9eGW",m_payment_total:"index-module_jjdwH",m_payment_total_text:"index-module_AVoZi",m_payment_total_text_ios:"index-module_GV8GD",m_payment_bottom_placeholder:"index-module_jToer",m_payment_return_crash_info:"index-module_bXQWz",m_payment_extra_corner:"index-module_Xlt8a",m_payment_extra_corner_view:"index-module__Cc7G",m_payment_extra_content:"index-module_TbHK_",m_payment_tips_content:"index-module_UReh9",line:"index-module_zq7Jm",m_payment_desctips:"index-module_m9tso",tips_footer:"index-module_c_Wb6",tips_footer_btn:"index-module_hKY_3",tips_footer_btn_red_border:"index-module_qFhvg",tips_footer_btn_txt:"index-module_t0CSh",tips_footer_btn_txt_red:"index-module_ssIGD"},D=n(81876),R=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,c.Z)((0,D.Z)(i),"state",void 0),(0,c.Z)((0,D.Z)(i),"collapseRef",void 0),(0,c.Z)((0,D.Z)(i),"onLayoutFinish",(function(){i.setState({layoutFinish:!0})})),i.state={layoutFinish:!1},i.collapseRef=l.createRef(),i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.refreshCollapse()}},{key:"componentDidUpdate",value:function(){this.refreshCollapse()}},{key:"refreshCollapse",value:function(){var e=this;this.props.priceTipList&&h.GI.getPlatform()!==h.GI.PLATFORM_TYPE.CRN&&setTimeout((function(){e.collapseRef.current&&e.collapseRef.current.refreshCollapseHeight()}),600)}}]),n}(m.ZP),j={collapse_button:"index-module_Gb6bk",collapse_button_up:"index-module_VxMAg",button_linear:"index-module_I9YWH",button_linear_up:"index-module_vOUuo",button_text:"index-module_w6A9b",m_arrow_icon:"index-module__NYg6",m_payment_tips:"index-module_mgQdE",title:"index-module_oBndj",m_collapse_text:"index-module_MU9mr"},N={edit:"&#xe93b;",info:"&#xe010;",tick:"&#xf00ca;",help:"&#xe931;","arrow-right":"&#xf0a8;","warn-shape":"&#xef39;",iconCancel:"&#xe93f;",confirm:"&#xef83;",arrowupsink:"&#xeaec;",selectedShape:"&#xed1e;",addcirclefill3:"&#xec6b;",forward:"&#xe944;",editWord:"&#xe93b;",cancel:"&#xe93f;",addcirclefill:"&#xed0d;",camera:"&#xef87;",back:"&#xe371;",girl:"&#xf22c;",boy:"&#xf22b;",arrowdown:"&#xe32c;",arrowup:"&#xe32b;",arrowupcircle:"&#xe7bc;",arrowdowncircle:"&#xe7bd;",arrowrighttriangle:"&#xe4b9;",information:"&#xe010;",unselected:"&#xee35;",radiocheck:"&#xf00ca;",calendar:"&#xe94c;",group:"&#xe9dc;",hook:"&#xe93d;",sback:"&#xe943;",im:"&#xf00d6;",shop:"&#xf001b;",addFav:"&#xeeb7;",fav:"&#xe958;",toTop:"&#xf00b;",plus:"&#xec6b;",minus:"&#xed0b;",share:"&#xe939;",message:"&#xe0c3;",phone:"&#xe952;",vendor:"&#xebba;",video:"&#xf0a4;","video-player":"&#xf8ef;",bookmap:"&#xe06c;",contacts:"&#xe950;",diamond:"&#xf030;",time:"&#xe930;",collected:"&#xe958;",people:"&#xe94f;",pepoplenum:"&#xf6fe;",luggage:"&#xf6fd;",hot:"&#xeb86;",check:"&#xf1c8;",emptyhot:"&#xf095b;",smalltips:"&#xf095c;",route:"&#xf0864;",date:"&#xf0863;",emptylocate:"&#xe933;",member:"&#xe105;",spcright:"&#xf09b;",coupon:"&#xecb5;",search:"&#xead0;",location:"&#xe257;",close:"&#xe235;",xclosed:"&#xe004;",unchecked:"&#xe178;",checked:"&#xe179;",imgs:"&#xf0963;",history:"&#xe8d1;",dropup:"&#xe948;",dropdown:"&#xe949;",zan:"&#xf053d;",closecircle:"&#xe235;",nearbyRec:"&#xf0a1b;",hotPro:"&#xe96e;",guidedEscorts:"&#xf70a;",customCharter:"&#xf632;",guidedTour:"&#xf70b;",bookingService:"&#xf640;",down:"&#xeaee;",dArrowDown:"&#xf37e;",dArrowUp:"&#xf37d;",up:"&#xeb7c;",attractions:"&#xed65;",male:"&#xe3d5;",female:"&#xe3d4;",flight:"&#xe9c2;",zan2:"&#xeabc;",clock:"&#xeeb3;",svip:"&#xf073f;",hotel:"&#xf0968;",discount:"&#xf312;",discount2:"&#xefd9;",diamond2:"&#xf8d2;",consult:"&#xe0fe;",copyLine:"&#xf15b;",star:"&#xf418;",promotion:"&#xf0ba0;",arrowleft:"&#xf0ba5;",serverTel:"&#xe01f;",diamond3:"&#xf0bfe;",carrental:"&#xf097f;",sendgift:"&#xf2e7;",driver:"&#xe1e1;",boldhelp:"&#xf825;",notice:"&#xef8d;",add:"&#xe93e;",contacts2:"&#xf0e4d;",camera2:"&#xf02f5;",editWord2:"&#xe007;",user:"&#xf014;",forwardfill:"&#xef8c;",saygood:"&#xe956;",liked:"&#xeb91;",clock2:"&#xf108b;",coupon2:"&#xf42f;",show:"&#xf701;",share2:"&#xf0167;",collected2:"&#xe019;",message2:"&#xec78;",order:"&#xef2f;",broadcast:"&#xef69;",roundCheck:"&#xecf5;"},V=function(e){if("string"!=typeof e)return e;var t=e.replace(/&#x([0-9a-fA-F]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))}));return t},L=function(e){return(0,w.jsx)(h.rD,(0,i.Z)((0,i.Z)({fontFamily:"crn_font_ttd_mini"},e),{},{children:V(N[e.type])}))},E=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"renderMoreButton",value:function(e){var t=this.props.theme,n=void 0===t?"light":t;return(0,w.jsx)(u.View,{className:e?j.collapse_button:j.collapse_button_up,children:(0,w.jsxs)(h.cn,{direction:0,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},className:(0,h.AK)(j.button_linear,e?"":j.button_linear_up),children:[(0,w.jsx)(u.Text,{className:(0,h.AK)(j.button_text),style:Z(n,{key:"color",value:"black"}),children:e?"\u67e5\u770b\u66f4\u591a":"\u6536\u8d77"}),(0,w.jsx)(L,{type:e?"arrowdown":"arrowup",className:j.m_arrow_icon})]})})}},{key:"render",value:function(){var e=this.props,t=e.priceTipList,n=e.fstyle,o=void 0===n?{}:n,r=e.theme,a=void 0===r?"light":r,s=e.prefixCls;return(0,w.jsxs)(u.View,{className:j.m_payment_tips,style:o.m_payment_tips||{},children:[(0,w.jsx)(u.Text,{className:j.title,style:(0,i.Z)((0,i.Z)({},o.title||{}),Z(a,{key:"color",value:"black"})||{}),children:"\u4ef7\u683c\u8bf4\u660e"}),(0,w.jsx)(u.View,{children:(0,w.jsx)(h.fG,{ref:this.collapseRef,renderContent:function(){return(0,w.jsx)(u.View,{children:(0,w.jsx)(h.t_,{html:t,baseFontStyle:{color:"#aaa",fontSize:12,lineHeight:h.GI.getPlatform()!==h.GI.PLATFORM_TYPE.CRN?"16px":16}})})},collapseHeight:64,renderMoreButton:this.renderMoreButton.bind(this),prefixCls:s})})]})}}]),n}(R),A=n(97442),F=252,M=.75*p().getSystemInfoSync().screenHeight-64,O=h.GI.getPlatform()===h.GI.PLATFORM_TYPE.CRN,B=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.totleContent,o=e.bottom,r=e.priceTipList,a=void 0===r?"":r,s=e.from,c=e.extraList,d=e.descTips,p=e.callback,f=e.hasMargin,m=void 0===f||f,v=e.prefixCls,_=e.renderCollapseIcon,g=this.state.buttonInfo,y=this.context||"light",x=g?u.View:l.Fragment,k=g?u.ScrollView:u.View;return(0,w.jsxs)(x,{className:g?(0,h.AK)(C.outermost):"",children:[(0,w.jsxs)(k,{className:(0,h.AK)(C.m_payment_poplayer,g?C.scroll_view_style:null,"m_payment"),scrollY:!0,style:(0,i.Z)({minHeight:F,maxHeight:M,marginBottom:O&&h.hj.isIOS()&&!m?-44:0},Z(y,{key:"backgroundColor",value:"white"})||{}),children:[(0,w.jsx)(u.View,{children:!(null===t||void 0===t||!t.length)&&t.map((function(e,i){var r=e.total||null;return(0,w.jsxs)(u.View,{className:(0,h.AK)(C.m_payment_cont,i!=t.length-1||(null!==n&&void 0!==n&&n.price||null!==o&&void 0!==o&&o.name||!a)&&(null===n||void 0===n||!n.price||"ticket"!=s)?{}:C.m_payment_cont_no_padding_bottom),children:[!!r&&(0,w.jsx)(S,{name:r.name,price:r.price,marketPrice:r.marketPrice,type:1,descs:r.descs,isDiscount:r.isDiscount||!!r.discountText,discountText:r.discountText,isNoDash:r.isNoDash,extraPrice:r.extraPrice,theme:y}),e.items&&!!e.items.length&&e.items.map((function(e,t){return(0,w.jsx)(u.View,{children:(0,w.jsx)(S,{name:e.name,descs:e.descs,price:e.price,marketPrice:e.marketPrice,isDiscount:e.isDiscount||!!e.discountText,discountText:e.discountText,theme:y})},"content_item_".concat(t))}))]},"content".concat(i))}))}),d&&d.length?(0,w.jsxs)(u.View,{className:C.m_payment_desctips,children:[(0,w.jsx)(u.Text,{className:C.m_payment_tips_content,children:"\u6e29\u99a8\u63d0\u793a"}),d.map((function(e){return(0,w.jsx)(u.Text,{className:C.m_payment_tips_content,children:e},e)}))]}):null,(null===n||void 0===n?void 0:n.price)&&"ticket"==s&&(0,w.jsx)(u.View,{className:C.line,style:{backgroundColor:"dark"===y?"#666666":"#f0f0f0"}}),(null===n||void 0===n?void 0:n.price)&&(0,w.jsxs)(u.View,{className:C.m_payment_total,children:[(0,w.jsx)(u.Text,{className:(0,h.AK)(C.m_payment_total_text,h.hj.isIOS()?C.m_payment_total_text_ios:""),children:n.price}),null!==n&&void 0!==n&&n.info?(0,w.jsx)(u.Text,{className:C.m_payment_return_crash_info,children:n.info}):null]}),c&&c.length?(0,w.jsxs)(u.View,{children:[(0,w.jsx)(u.View,{className:C.m_payment_extra_corner,children:(0,w.jsx)(u.View,{className:C.m_payment_extra_corner_view})}),(0,w.jsx)(u.View,{className:C.m_payment_extra_content,children:c.map((function(e,t){return(0,w.jsx)(u.View,{children:(0,w.jsx)(S,{name:e.name,descs:e.descs,price:e.price,isDiscount:!0,type:1,isNoDash:!0,isReturnCash:!0,theme:y})},"extra".concat(t))}))})]}):null,!(null===o||void 0===o||!o.name)&&(0,w.jsx)(u.View,{className:C.m_payment_bottom,children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.Text,{className:C.m_payment_bottom_text,children:o.name}),(0,w.jsx)(u.Text,{className:C.m_payment_bottom_text,children:o.price})]})}),a?(0,w.jsx)(E,{priceTipList:a,prefix:".m_payment",renderCollapseIcon:_,fstyle:g?T:P,prefixCls:v}):null,(0,w.jsx)(u.View,{className:(0,h.AK)(C.m_payment_bottom_placeholder)})]}),!!g&&(0,w.jsx)(h.En,{onClick:p,className:(0,h.AK)(C.tips_footer,C.tips_footer_shadow),style:(0,i.Z)({shadowOffset:{height:-16,width:-16},shadowOpacity:.05,shadowRadius:16,shadowColor:"rgba(0,0,0)"},Z(y,{key:"backgroundColor",value:"white"})||{}),activeOpacity:.8,children:(0,w.jsx)(h.cn,(0,i.Z)((0,i.Z)({},g.buttonLinear),{},{className:(0,h.AK)(C.tips_footer_btn,"red_border_add"==g.type?C.tips_footer_btn_red_border:null),hover_class:"none",children:(0,w.jsx)(u.Text,{className:(0,h.AK)(C.tips_footer_btn_txt,"red_border_add"==g.type?C.tips_footer_btn_txt_red:null),children:g?g.layerText:""})}))})]})}}]),n}(k);(0,c.Z)(B,"contextType",A.Ni)},25158:function(e,t,n){"use strict";var i=n(90201);function o(e){var t=(0,i.useRef)(e);t.current=(0,i.useMemo)((function(){return e}),[e]);var n=(0,i.useRef)();return n.current||(n.current=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.current.apply(null,n)}),n.current}t["Z"]=o},30901:function(e,t){"use strict";t["Z"]=1},78144:function(e,t,n){"use strict";n.d(t,{$q:function(){return o},XU:function(){return a}});var i=function(e){return e<10?"0".concat(e):"".concat(e)},o=function(e){if(e&&Number(e)){e=r(e);var t=Number(e)/1e3,n=Math.floor(t/3600),o=Math.floor((t-60*n*60)/60),a=Math.floor(t-60*n*60-60*o);return"".concat(i(n),":").concat(i(o),":").concat(i(a))}},r=function(e){return e&&"string"===typeof e?e.replace(/-/g,"/"):e};function a(e){var t=(new Date).getTimezoneOffset(),n=new Date(r(e)).getTime(),i=60*(-t/60-8)*60*1e3+n;return i}},8356:function(e,t,n){"use strict";n.d(t,{R:function(){return o},v:function(){return r}});var i=n(93212),o=function(e,t){var n=[];if(e)for(var o in e)t&&"object"===(0,i.Z)(e[o])||n.push("".concat(o,"=").concat(e[o]));return n.join("&")},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?decodeURIComponent(e).split("?"):e.split("?"),i={};if(2==n.length){var o=n[1],r=o.split("&");r.forEach((function(e){var t=e.search("=");t>0&&(i[e.slice(0,t)]=e.slice(t+1))}))}return i}},39860:function(e,t,n){"use strict";n.d(t,{I8:function(){return o},oG:function(){return r}});var i=n(93212),o=function(e){return a(e)?JSON.parse(JSON.stringify(e)):e},r=function(e){var t=[];return e.map((function(e){t.push(Number(e))})),t};function a(e){return null!=e&&"object"===(0,i.Z)(e)}},29053:function(e,t,n){"use strict";n.d(t,{vn:function(){return o},Xh:function(){return r}});var i=n(93212),o=function(e){var t=decodeURIComponent(e).split("?"),n={};if(2==t.length){var i=t[1],o=i.split("&");o.forEach((function(e){var t=e.search("=");t>0&&(n[e.slice(0,t)]=e.slice(t+1))}))}return n},r=function(e){return e=e||{},Object.keys(e).reduce((function(t,n){return"undefined"==typeof e[n]&&null!==e[n]||(t+="object"===(0,i.Z)(e[n])?"".concat(n,"=").concat(JSON.stringify(e[n]),"&"):"".concat(n,"=").concat(e[n],"&")),t}),"").slice(0,-1)}},29509:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(45023),l=n(55039),u=n(72747),d=n(99739),p=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,s.Z)(o),"state",void 0),(0,c.Z)((0,s.Z)(o),"inputRef",void 0),(0,c.Z)((0,s.Z)(o),"timer",void 0),(0,c.Z)((0,s.Z)(o),"isFouse",!1),(0,c.Z)((0,s.Z)(o),"isAlipay",void 0),(0,c.Z)((0,s.Z)(o),"isNumberDisable",(function(){return!(!o.disabledCompute(-1)||!o.disabledCompute(1))})),(0,c.Z)((0,s.Z)(o),"onBlur",(function(e){o.isFouse=!1;var t=o.state.count,n=o.props,i=n.getFocusCount,r=n.type;if(i&&i(r,!1),e=String(e).replace(/ /g,""),e!==String(t)){var a=Math.floor(e)-t;0==a||isNaN(a)?o.setVal(t):a<0?o.onMinus(a,!0):o.onPlus(a,!0)}})),(0,c.Z)((0,s.Z)(o),"onFocus",(function(){o.isFouse=!0})),o.state={count:e.count||0},o.disabledCompute=o.disabledCompute.bind((0,s.Z)(o)),o.onPlus=o.onPlus.bind((0,s.Z)(o)),o.onMinus=o.onMinus.bind((0,s.Z)(o)),o.keyboardDidHide=o.keyboardDidHide.bind((0,s.Z)(o)),o.isAlipay=(0,d.ZP)().taroEnv===d.fO.alipay,o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){this.state.count!==e.count&&this.setState({count:e.count})}},{key:"componentDidMount",value:function(){u.N1.addListener("keyboardDidHide",this.keyboardDidHide)}},{key:"componentWillUnmount",value:function(){u.N1.removeListener("keyboardDidHide",this.keyboardDidHide),clearTimeout(this.timer)}},{key:"keyboardDidHide",value:function(){var e,t=null===(e=this.inputRef)||void 0===e?void 0:e.getRef();null===t||void 0===t||t.blur()}},{key:"disabledCompute",value:function(e){var t=this.props,n=t.count,i=t.min,o=t.max,r=t.start;return e<0&&n+e<i||e>0&&(o<n+e||0===n&&n+r>o)}},{key:"onMinus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,i=n.max,o=n.start,r=n.count;if(!this.isDisable(e,t)&&!this.isFouse){var a=o&&r+e<o?0:i<r+e?i:r+e;this.showInputToast(e,t),this.onChange(a)}}},{key:"onPlus",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.props,o=i.start,r=i.count;this.isDisable(t,n)||this.isFouse||(e=r+t<o?o:r+t,this.showInputToast(t,n),this.onChange(e))}},{key:"showInputToast",value:function(e,t){var n=this.props,i=n.start,o=n.count,r=n.onChoiceDisabled;t&&o+e<i&&r&&r(e,t)}},{key:"isDisable",value:function(e,t){var n=this.props,i=n.onChoiceDisabled,o=n.min,r=n.max,a=n.beforeChoice;if(a&&a())return!0;if(this.disabledCompute(e)){if(i&&i(e,t),t){var s=e<0?o:r;this.onChange(s)}return!0}return!1}},{key:"onChange",value:function(e){this.setVal(e);var t=this.props.onChange;t&&t(e)}},{key:"setVal",value:function(e){var t=this,n=this.state.count;n==e?this.setState({count:""},(function(){t.timer=setTimeout((function(){return t.setState({count:e})}))})):this.setState({count:e})}}]),n}(l.Z),h=n(298),f=n(9353),m=n(17366),v=n(56569),_=function(e){return(0,v.gn)()?{}:{position:e}},g={zIndex:100,display:(0,v.gn)()?"none":"block",position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"transparent"},y={m_choice_options:{display:"flex",flexDirection:"row",alignItems:"center"},m_choice_options_content:{display:"flex",flexDirection:"row",justifyContent:"center",width:(0,m.Vh)(30),overflow:"hidden"},m_choice_options_content_text:{fontSize:(0,m.Vh)(14),color:"#333",textAlign:"center"},option_icon:{marginTop:5},option:(0,h.Z)({display:"flex",flexDirection:"row"},_("relative")),m_input_view_alipay:{width:10,margin:"auto"},m_hold_left:(0,h.Z)((0,h.Z)({},g),{},{right:-5}),m_hold_right:(0,h.Z)((0,h.Z)({},g),{},{left:-5})},x=(0,f.Z)({m_choice_options_content_text:(0,h.Z)((0,h.Z)({},m._),{},{fontSize:(0,m.Vh)(19),lineHeight:(0,m.Nv)((0,m.Vh)(23)),height:(0,m.Vh)(23),color:"#111",textAlign:"center"})}),k=(0,f.Z)(y),b=n(59201),Z=n(71557),I=n(99105),w=n(2269),S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.state.count,n=this.props,i=n.minusLog,o=n.plusLog,r=n.onlyPlusWhenZero,a=n.useInput,s=void 0===a||a,c=n.size,l=n.prefixTest,d=void 0===l?"":l,p=n.traceData,h=n.resourceName,f=n.useNewStyle,v=n.activeColor,_=void 0===v?"#0086F6":v,g=k,y=c||44;f&&(y=c||48,_="#0066F6",g=(0,m.Ec)(k,x));var S=this.isNumberDisable(),P=(0,m.wh)([g.m_choice_options_content_text,this.isAlipay?g.m_input_view_alipay:null]),T=this.disabledCompute(-1),C=this.disabledCompute(1);return(0,w.jsxs)(u.G7,{style:g.m_choice_options,children:[0==t&&r?null:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(b.Z,{onClick:function(){return e.onMinus(-1)},style:g.option,log:i,testID:"".concat(d,"minus"),devTraceData:p&&!T&&p(t,t-1,h),children:[(0,w.jsx)(Z.Z,{type:"minus",color:T?"#D5D5D5":_,size:y}),(0,w.jsx)(u.G7,{style:g.m_hold_left})]}),(0,w.jsx)(u.G7,{style:(0,m.wh)([g.m_choice_options_content]),children:S||!s?(0,w.jsx)(u.xv,{style:g.m_choice_options_content_text,children:t}):(0,w.jsx)(I.Z,{ref:function(t){return e.inputRef=t},style:P,returnKeyType:"done",type:"number",placeholder:"",maxLength:4,value:t.toString(),onBlur:this.onBlur,onFocus:this.onFocus})})]}),(0,w.jsxs)(b.Z,{onClick:function(){return e.onPlus(1)},style:g.option,log:o,testID:"".concat(d,"plus"),devTraceData:p&&!C&&p(t,t+1,h),children:[(0,w.jsx)(Z.Z,{type:"plus",color:C?"#D5D5D5":_,size:y}),(0,w.jsx)(u.G7,{style:g.m_hold_right})]})]})}}]),n}(p)},54307:function(e,t,n){"use strict";var i=n(92954),o=n.n(i);t["Z"]={setString:function(e){o().setClipboardData({data:e})}}},99765:function(e,t,n){"use strict";n.d(t,{S:function(){return d}});var i=n(79301),o=n(298),r=n(95308),a=n(91510),s=n(99739),c=n(61252),l=n(79522),u=null,d=function(e){u=e};t["Z"]={show:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,d,p,h,f,m;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(!t.delayTime){e.next=4;break}return e.next=4,(0,l._v)(t.delayTime);case 4:n="",r="",d=!(!t.btnOK||2!=t.btnOK.length),p=function(){},h=function(){},t.btnOK&&t.btnOK.length>0&&(f=t.btnOK,1===f.length?r=f[0]:(n=f[0],r=f[1])),t.btnCallBack&&t.btnCallBack.length>0&&(m=t.btnCallBack,1===m.length?h=m[0]:(p=m[0],h=m[1])),u&&(0,c.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:"".concat(t.title?"[".concat(t.title,"]:"):"").concat(t.content?t.content:"")})),a.Z.showModal({title:t.title||"",content:t.content||"",cancelText:d?n||"\u53d6\u6d88":"",confirmText:r||"\u786e\u8ba4",showCancel:d,success:function(e){(0,s.ZP)().taroEnv!==s.fO.alipay?e.confirm?(u&&(0,c.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:r||"\u786e\u8ba4"})),h()):e.cancel&&(u&&(0,c.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:n||"\u53d6\u6d88"})),p()):e.confirm?(h(),u&&(0,c.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:r||"\u786e\u8ba4"}))):(u&&(0,c.Vg)((0,o.Z)((0,o.Z)({},u),{},{action:"usr_click",module:"\u5f39\u7a97\u6a21\u5757",value:n||"\u53d6\u6d88"})),p())}});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},78942:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(55039),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.Z),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return null}}]),n}(c)},99105:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(298)),c=n(81876),l=n(45023),u=n(55039),d=n(79522),p=n(99739),h=n(61252),f=n(39140),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,c.Z)(o),"state",void 0),(0,l.Z)((0,c.Z)(o),"inputRefs",void 0),(0,l.Z)((0,c.Z)(o),"isAlipay",void 0),(0,l.Z)((0,c.Z)(o),"getRef",(function(){return o.inputRefs})),o.state={showClearIcon:!1,currentValue:o.props.value,focus:!1},o.onFocus=o.onFocus.bind((0,c.Z)(o)),o.onBlur=o.onBlur.bind((0,c.Z)(o)),o.onClear=o.onClear.bind((0,c.Z)(o)),e.noChangeDebounce?o.onChange=o.onChange.bind((0,c.Z)(o)):o.onChange=(0,d.Ds)(o.onChange.bind((0,c.Z)(o)),200),o.isAlipay=(0,p.ZP)().taroEnv===p.fO.alipay,o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({currentValue:e.value})}},{key:"cutOffPhoneNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^(\d{0,3})(\d{0,4})(\d*)$/;return this.clearSpace(e).replace(t,"$1 $2 $3").trim()}},{key:"clearSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="".concat(e);return t.replace(/\s+/g,"")}},{key:"onFocus",value:function(e,t){this.setState({showClearIcon:!0}),this.props.onFocus&&this.props.onFocus(e,t)}},{key:"onBlur",value:function(e){var t,n=this,i=this.props,o=i.onClear,r=i.iconDelayTime,a=void 0===r?0:r;o&&setTimeout((function(){n.setState({showClearIcon:!1})}),a);var s=null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.value;this.props.isMobile&&(s=this.clearSpace(s)),this.sendDevTrace(s),this.props.onBlur&&this.props.onBlur(s)}},{key:"onClear",value:function(e){var t=this;e&&e.stopPropagation&&e.stopPropagation(),setTimeout((function(){var e;(t.setState({currentValue:""}),t.props.onChange&&t.props.onChange(""),(0,p.ZP)().platform==f.NX.RN)?null===(e=t.inputRefs)||void 0===e||e.focus():t.props.onBlur&&t.props.onBlur("")}),(0,p.ZP)().platform==f.NX.Mini?50:0)}},{key:"onChange",value:function(e,t,n){var i,o=null===e||void 0===e||null===(i=e.detail)||void 0===i?void 0:i.value;this.props.isMobile&&(o=this.clearSpace(o)),this.setState({currentValue:o}),this.props.onChange&&this.props.onChange(o,t,n)}},{key:"sendDevTrace",value:function(e){var t=this.props,n=t.devTraceData,i=t.value;null!==n&&void 0!==n&&n.attrs&&(0,h.Vg)((0,s.Z)((0,s.Z)({},n),{},{before:i,value:e}))}}]),n}(u.Z),v=n(72747),_=n(9353),g=n(17366),y=(0,p.ZP)().platform,x={m_input:{position:"relative",flex:1,display:"flex",flexDirection:"row",alignItems:"center"},m_input_view:{fontSize:(0,g.Vh)(16),width:"100%",height:22,color:"#333",flex:1,backgroundColor:"transparent"},m_input_close:{marginRight:10,padding:"RN"==y?3:5,display:"flex"},m_input_view_alipay:{width:10,margin:"auto"}},k=(0,_.Z)(x),b=n(71557),Z=n(59201),I=n(2269),w=(0,p.ZP)().platform,S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,i=t.placeholder,o=t.style,r=t.maxLength,a=t.returnKeyType,s=t.readOnly,c=t.placeholderTextColor,l=t.prefixContent,u=t.wrapperStyle,d=t.autoFocus,p=t.onClear,h=t.onSubmitEditing,f=t.cleanDevtrace,m=t.isMobile,_=this.state,y=_.showClearIcon,x=_.currentValue,S=(_.focus,m?"RN"==w?this.cutOffPhoneNumber(x):this.clearSpace(x):x);return(0,I.jsxs)(v.G7,{style:(0,g.wh)([k.m_input,u]),children:[!!l&&l,(0,I.jsx)(v.II,{ref:function(t){return e.inputRefs=t},type:n,placeholder:i,value:S,onInput:this.onChange,placeholderStyle:"color: #ccc",onBlur:this.onBlur,onFocus:this.onFocus,style:(0,g.wh)([k.m_input_view,o,this.isAlipay?k.m_input_view_alipay:null]),confirmType:"done",maxlength:m?void 0:r,cursorSpacing:20,disabled:s,returnKeyType:a,placeholderTextColor:c||"#ccc",onSubmitEditing:h,autoFocus:d,onConfirm:h,cursor:S?S.length:0,className:"m_input_view_normal"}),y&&p&&x?(0,I.jsx)(Z.Z,{style:k.m_input_close,onClick:function(t){e.onClear(t)},devTraceData:f,children:(0,I.jsx)(b.Z,{type:"closecircle",size:28,color:"#cccccc"})}):null]})}}]),n}(m)},93065:function(e,t,n){"use strict";var i=n(91510),o=n(64571);t["Z"]={show:function(){i.Z.showLoading({title:"\u5373\u5c06\u5448\u73b0",mask:!0})},hide:function(){o.ZP.hideLoading()}}},59201:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(55039),l=n(61252),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),o.onClick=o.onClick.bind((0,s.Z)(o)),o.sendLog=o.sendLog.bind((0,s.Z)(o)),o}return(0,o.Z)(n,[{key:"sendLog",value:function(){var e=this.props.log;if("function"==typeof e&&(e=e()),e){var t=e,n=t.params,i=t.type;(0,l.Zz)(n,i)}}},{key:"onClick",value:function(e){var t=this.props.onClick;this.sendLog(),this.sendDevTrace(),t&&t(e)}},{key:"sendDevTrace",value:function(){var e=this.props.devTraceData;null!==e&&void 0!==e&&e.attrs&&(0,l.Vg)(e)}}]),n}(c.Z),d=n(99433),p=n(2269),h=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,i=e.activeOpacity,o=void 0===i?.8:i,r=e.testID,a=e.onLayout,s=e.onPressIn,c=e.id;return(0,p.jsx)(d.Z,{id:c,onClick:this.onClick,className:t,style:n,testID:r,activeOpacity:o,onLayout:a,onPressIn:s,children:this.props.children})}}]),n}(u)},2446:function(e,t,n){"use strict";n.d(t,{ZP:function(){return u},mz:function(){return l},sg:function(){return c}});var i=n(57113),o=n(45899),r=function(){},a=function(){},s=function(){},c=function(e){return!!i.Z.get(e||"")&&i.Z.get(e||"").assistComponent.props.isOpened},l=function(){return Object.keys(i.K).some((function(e){return!!c(e)}))},u={show:function(e){(0,o.E)(),r();var t=e.props,n=t.name,a=void 0===n?"":n,l=t.isOpened;if(void 0!==l)return i.Z.change(a,e);c(a)?e.props.isOpened=!1:e.props.isOpened=!0,i.Z.change(a,e),s("none")},hide:function(e){s(""),a(),e?(i.Z.get(e||"").assistComponent.props.isOpened=!1,i.Z.change(e||"")):(Object.keys(i.K).forEach((function(e){var t,n=null===(t=i.K[e])||void 0===t?void 0:t.assistComponent;n&&n.props&&n.props.isOpened&&(n.props.isOpened=!1)})),i.Z.destory(i.K)),l()||(0,o.V)()}}},35409:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(45023),o=n(298),r=n(57042),a=n(24460),s=n(21867),c=n(86066),l=n(90201),u=n(81876),d=n(55039),p=n(79522),h=n(2446),f=n(72747),m=n(40771),v=n(99739),_=n(39140),g=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,i.Z)((0,u.Z)(o),"modelEl",void 0),(0,i.Z)((0,u.Z)(o),"startObj",void 0),(0,i.Z)((0,u.Z)(o),"timer",void 0),(0,i.Z)((0,u.Z)(o),"state",void 0),(0,i.Z)((0,u.Z)(o),"initAnimation",void 0),(0,i.Z)((0,u.Z)(o),"fadeAnimation",void 0),(0,i.Z)((0,u.Z)(o),"slideFromBottomAnimation",void 0),(0,i.Z)((0,u.Z)(o),"slideFromRightAnimation",void 0),o.fadeAnimation=new f.fS.Value(0),o.slideFromBottomAnimation=new f.fS.Value(0),o.slideFromRightAnimation=new f.fS.Value(0),o.state={isShow:e.isOpened,isAnimation:!1,opened:!1},o.startObj={x:0,y:0},o.setAnimation(e.isOpened),o.setOpen(e.isOpened),!e.isOpened&&null!==e&&void 0!==e&&e.onClosed&&(0,m.b6)("isComponent")&&e.onClosed(),o.onOpen=(0,p.Ds)(o.onOpen.bind((0,u.Z)(o)),20),o.modelEl=l.createRef(),o}return(0,a.Z)(n,[{key:"componentWillReceiveProps",value:function(e){if(e.isOpened!==this.props.isOpened||e.needSave!=this.props.needSave){var t=e.isOpened;t?this.onOpen():(this.onClose(!0),!e.needSave&&this.setState({opened:!1}))}}},{key:"setOpen",value:function(e){var t=this;setTimeout((function(){!t.state.opened&&e&&t.setState({opened:!0})}),500)}},{key:"onClose",value:function(e){var t=this;this.setState({isAnimation:!1},(function(){t.timer=setTimeout((function(){t.state.isShow&&(0,v.ZP)().platform==_.NX.Mini&&(t.setState({isShow:!1}),t.props.name&&h.ZP.hide(t.props.name),t.props.onClosed&&t.props.onClosed())}),350)})),this.state.isShow&&(0,v.ZP)().platform==_.NX.H5&&(e||this.props.isCloseAnimation)&&(this.setState({isShow:!1}),this.props.name&&h.ZP.hide(this.props.name),this.props.onClosed&&this.props.onClosed()),this.setRnAnimation(!1)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"onOpen",value:function(){this.setState({isShow:!0}),this.setAnimation(!0)}},{key:"onTransitionEnd",value:function(){var e=this.state,t=e.isShow,n=e.isAnimation;t&&!n?(this.setState({isShow:!1,opened:!!this.props.needSave}),this.props.name&&h.ZP.hide(this.props.name),this.props.onClosed&&this.props.onClosed()):this.setState({opened:!0})}},{key:"setSyncAnimation",value:function(e){this.setState({isAnimation:e}),this.setRnAnimation(e)}},{key:"setAnimation",value:function(e){var t=this;if(e)var n=setTimeout((function(){t.setSyncAnimation(e),clearTimeout(n)}),20)}},{key:"setRnAnimation",value:function(e){var t=this,n=this.props.direction,i=void 0===n?"bottom":n;f.fS.parallel(["fadeAnimation","".concat("bottom"==i?"slideFromBottomAnimation":"slideFromRightAnimation")].map((function(n){return f.fS.timing(t[n],{toValue:e?1:0,duration:300,easing:f.oY.ease,useNativeDriver:!0})}))).start((function(){e?t.setState({opened:!0}):(t.props.name&&h.ZP.hide(t.props.name),t.setState({isShow:!1,opened:!!t.props.needSave}),t.props.onClosed&&t.props.onClosed())}))}},{key:"touchMoveStart",value:function(e){if(null!==e&&void 0!==e&&e.touches){var t=e.touches[0],n=t.pageX,i=t.pageY;this.startObj={x:n,y:i}}}},{key:"touchMove",value:function(e){var t,n=null===(t=this.modelEl)||void 0===t?void 0:t.current;if(n&&null!==e&&void 0!==e&&e.touches){var i=n.clientHeight,o=n.scrollHeight,r=n.scrollTop,a=this.startObj,s=(a.x,a.y),c=e.touches[0],l=(c.pageX,c.pageY),u=l-s;(0===r&&u>0||r+i+1>=o&&u<0)&&e.preventDefault()}}}]),n}(d.Z),y=n(71557),x=n(17366),k=n(9353),b={m_poplayer_content:{},m_poplayer:{},m_poplayer_mask_touch:{},m_poplayer_content_padding:{paddingBottom:(0,x.Vh)(24)}},Z=(0,v.ZP)().taroEnv===v.fO.alipay?"fixed":"absolute",I={m_poplayer:(0,o.Z)({position:Z,bottom:0,right:0,left:0,width:"100%",height:"100%",zIndex:200,overflow:"hidden",elevation:20},b.m_poplayer),m_poplayer_mask_touch:(0,o.Z)({display:"flex",height:"100%",width:"100%",position:Z,top:0,left:0,right:0},b.m_poplayer_mask_touch),m_poplayer_mask:{flex:1,backgroundColor:"rgba(0, 0, 0, .6)",opacity:0},m_poplayer_content:(0,o.Z)({overflow:"hidden",width:"100%",minHeight:300,maxHeight:"100%",borderTopLeftRadius:8,borderTopRightRadius:8,backgroundColor:"#fff",position:Z,right:0,left:0},b.m_poplayer_content),m_poplayer_transition:(0,x.eR)("all .2s"),m_poplayer_transition_body:(0,x.eR)("all 0.2s"),m_poplayer_content_bottom:(0,x.vs)("translate3d(0, 100%, 0)"),m_poplayer_content_right:(0,x.vs)("translate3d(100%, 0, 0)"),m_poplayer_content_top:(0,o.Z)((0,o.Z)({},(0,x.vs)("translate3d(0, -100%, 0)")),{},{borderTopLeftRadius:0,borderTopRightRadius:0}),m_poplayer_content_in:(0,x.vs)("translate3d(0, 0, 0)"),m_poplayer_header:{width:"100%",height:44,flexShrink:0,borderTopLeftRadius:8,borderTopRightRadius:8,borderColor:"#999",textAlign:"center",position:"relative"},m_poplayer_title:{textAlign:"center",lineHeight:(0,x.Nv)(44),fontWeight:"700",fontSize:18,color:"#333"},m_poplayer_close_btn:{width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",position:Z,top:0,right:4}},w=(0,k.Z)(I),S=n(56569),P=n(64571),T=n(78942),C=n(2269),D=200,R=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e,t=this.state,n=t.isShow,r=t.isAnimation,a=t.opened,s=this.props,c=s.name,l=s.title,u=s.children,d=s.scrollHeight,p=s.bottomHeight,h=s.zIndex,m=s.header,_=void 0===m?null:m,g=s.popHeight,k=s.direction,Z=void 0===k?"bottom":k,I=s.style,R=void 0===I?{}:I,j=s.headerProps,N=s.isShowHeader,V=void 0===N||N,L=s.isScrollView,E=void 0===L||L,A=s.renderOnshow,F=void 0!==A&&A,M=s.needSave,O=void 0!==M&&M,B=s.Breath,z=void 0===B?null:B,H=s.maxHeight,U=s.contentMaxHeight,G=s.conentStyles,q=void 0===G?{}:G,W=s.minHeight,K=s.bounces,Y=s.isHasImg,X=s.animationTop,Q=s.fullHeader,J=s.animation,$=void 0===J||J,ee=s.isFullScreen,te=(s.isModal,s.contentClassName),ne=s.headerStyles,ie=void 0===ne?{}:ne,oe=s.containerIsFull,re=s.isTransparent,ae=void 0!==re&&re,se=!1;Y&&(0,v.ZP)().isSwan&&(se=!0);var ce=_,le=(0,x.wh)([g?(0,P.kg)({height:g}):{},H||W?(0,P.kg)({maxHeight:H||"100%",minHeight:W||300}):{},ee?{height:"100%",maxHeight:"100%"}:{}]),ue=(0,P.kg)((0,o.Z)({position:"relative",height:d||"100%",maxHeight:U||"100%",boxSizing:"border-box",paddingBottom:(0,S.cY)()&&!p&&"top"!=Z?null===b||void 0===b||null===(e=b.m_poplayer_content_padding)||void 0===e?void 0:e.paddingBottom:0},q)),de="bottom"==Z?"slideFromBottomAnimation":"slideFromRightAnimation",pe=this[de].interpolate({inputRange:[0,1],outputRange:"top"==Z?[-(X||400),0]:[900,0]}),he="bottom"==Z||"top"==Z?(0,P.kg)({translateY:pe}):(0,P.kg)({translateX:pe});r&&(n=!0);var fe=O?{zIndex:n?h||D:-D,elevation:n?h||D:-D,opacity:n?1:0}:{};O&&(n=!0);var me=f.G7;return n?(0,C.jsxs)(me,(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({className:"m_poplayer_mask_touch_fix",style:(0,P.kg)((0,x.wh)([w.m_poplayer,(0,o.Z)({bottom:p||0,zIndex:h||100},fe),R])),catchMove:!0},"className","ottd-detail-poplayer"),"visible",n),"animationType","none"),"transparent",!0),"statusBarTranslucent",!0),"children",[(0,C.jsx)(f.Au,{onClick:this.onClose.bind(this),style:(0,x.wh)([w.m_poplayer_mask_touch]),activeOpacity:1,testID:"".concat(c,"_mask"),disableScroll:!0,children:(0,C.jsx)(f.fS.View,{style:(0,x.wh)([w.m_poplayer_mask,w.m_poplayer_transition,{opacity:this.fadeAnimation.interpolate({inputRange:[0,1],outputRange:[0,1]})},(0,x.Nm)([{key:"opacity",value:r?(0,x.Oh)(1):(0,x.Oh)(0)}])]),onTransitionEnd:this.onTransitionEnd.bind(this)})}),(0,C.jsxs)(f.fS.View,{className:te,style:(0,P.kg)((0,x.wh)([w.m_poplayer_content,w.m_poplayer_transition_body,"top"==Z||Q?{top:0,borderTopLeftRadius:0,borderTopRightRadius:0}:{bottom:0},{transform:[he]},le,"right"===Z?w.m_poplayer_content_right:w.m_poplayer_content_bottom,r?w.m_poplayer_content_in:"right"===Z?w.m_poplayer_content_right:"bottom"===Z?w.m_poplayer_content_bottom:w.m_poplayer_content_top,$?{}:w.m_poplayer_content_in,ee?{borderTopLeftRadius:0,borderTopRightRadius:0}:{},ae?{backgroundColor:"transparent"}:{}])),children:[_?(0,C.jsx)(ce,(0,o.Z)({},j)):V?ee?(0,C.jsx)(T.Z,{translucent:!0,statusBarBg:"transparent",barStyle:"light-content",backgroundColor:"#fff",title:l,titleColor:"#333",leftIconColor:"#666",leftClick:this.onClose.bind(this)}):(0,C.jsxs)(f.G7,{style:w.m_poplayer_header,disableScroll:!0,children:[(0,C.jsx)(f.xv,{style:(0,x.wh)([w.m_poplayer_title,ie.m_poplayer_title]),children:l}),(0,C.jsx)(f.Au,{style:w.m_poplayer_close_btn,onClick:this.onClose.bind(this),testID:"".concat(c,"_close_btn"),children:(0,C.jsx)(y.Z,{type:ie.closeIcon?ie.closeIcon:"iconCancel",size:44,color:ie.closeColor?ie.closeColor:"#333"})})]}):null,E?(0,C.jsx)(f.pf,{style:ue,scrollY:!0,bounces:K,ref:this.modelEl,contentContainerStyle:oe?{flexGrow:1}:{},onTouchStart:this.touchMoveStart.bind(this),onTouchMove:this.touchMove.bind(this),children:se?u:F&&!a?z&&(0,C.jsx)(z,{}):u}):(0,C.jsx)(f.G7,{style:ue,children:se?u:F&&!a?z&&(0,C.jsx)(z,{}):u})]})])):null}}]),n}(g)},9349:function(e,t,n){"use strict";n.d(t,{ol:function(){return l}});var i=n(298),o=n(91510),r=n(99765),a=n(61252),s=1500,c=null,l=function(e){c=e},u=function(e){if(""===e||null===e||void 0===e)return!1;var t=(e.match(/[\x00-\xff]/g)||[]).length,n=e.length,i=t+2*(n-t);return i>40&&(r.Z.show({content:e,btnOK:["\u77e5\u9053\u4e86"]}),!0)};t["ZP"]={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;u(e)||(c&&(0,a.Vg)((0,i.Z)((0,i.Z)({},c),{},{action:"sys_show",module:"\u5f39\u7a97\u6a21\u5757",value:e})),o.Z.showToast({title:e||"",duration:t,icon:"none"}))},hide:function(e){o.Z.hideToast(e)}}},63306:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(298),o=n(71515),r=n(17366),a=n(9353),s=(0,a.Z)({backgroundPosition:"50%",backgroundSize:"cover",position:"absolute",left:0,top:0,right:0,bottom:0}),c=s,l=(n(90201),n(99739)),u=n(2269),d=(0,l.ZP)().supportWebp,p=function(e){var t,n=e.url,a=e.style,s=void 0===a?{}:a;return d||(n=null===(t=n)||void 0===t?void 0:t.replace(/(jpg|png)_\.webp/,"$1")),(0,u.jsx)(o.View,(0,i.Z)((0,i.Z)({},e),{},{url:"",style:(0,r.wh)([{backgroundImage:"url(".concat(n,")")},c,s])}))},h=p},72747:function(e,t,n){"use strict";n.d(t,{fS:function(){return K},fV:function(){return xe},oY:function(){return X},JO:function(){return P},Ee:function(){return L},Zy:function(){return oe.Z},II:function(){return ae},N1:function(){return ue},jy:function(){return ce},o:function(){return J},Cf:function(){return he},k0:function(){return ge},pf:function(){return A},Xn:function(){return z},aA:function(){return _e},xv:function(){return y},Au:function(){return U.Z},G7:function(){return r},JD:function(){return H},$e:function(){return s},kh:function(){return me}});var i=n(71515),o=i.View,r=o,a=i.View,s=a,c=n(298),l=n(68277),u=n(9353),d=n(17366),p=n(50738),h=n(90201),f=n(2269),m=["numberOfLines","style","children","testID","className","onPress","onClick"],v=function(e){var t=e.numberOfLines,n=void 0===t?0:t,o=e.style,r=e.children,a=e.testID,s=e.className,u=e.onPress,h=e.onClick,v=(0,l.Z)(e,m),_=o;(0,p.HP)(a,v);var y=(0,p.a7)(a);switch(n){case 0:break;case 1:_=(0,d.wh)([g.one_line,_]);break;default:_=(0,d.wh)([(0,d.Sf)(n),_])}return u&&!h&&(v.onClick=u),(0,f.jsx)(i.Text,(0,c.Z)((0,c.Z)({},v),{},{style:(0,d.wh)([g.default_style,_||{}]),className:"".concat(y," ").concat(s),children:r}))};v.displayName="Text";var _=v,g=(0,u.Z)({one_line:{display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all"},default_style:{whiteSpace:"pre-wrap"}}),y=_,x=n(93212),k=n(64241),b=n(64571),Z=n(56569),I={},w=function(){var e,t;if(I.hasOwnProperty("isTaroTnt"))return I["isTaroTnt"];if((0,Z.rI)())return I["isTaroTnt"]="object"==("undefined"===typeof n.g?"undefined":(0,x.Z)(n.g))&&!(null===(t=n.g)||void 0===t||!t.__isTNT),I["isTaroTnt"];var i=(0,b.FN)(),o=null===(e=i.router)||void 0===e?void 0:e.path;return!!o&&(I["isTaroTnt"]=/.*webapp\/tnt/.test(o)||/.*pages\/tnt/.test(o),I["isTaroTnt"])},S=function(e){var t=e.type,n=e.size,o=e.color,r=e.style,a=void 0===r?{}:r,s=e.usePx,c=(0,k.ly)(n),l=w()?"ottdpage":"ottd";return(0,f.jsx)(i.Text,{className:"".concat(l," ottd-").concat(t),style:(0,d.wh)([a,(0,u.Z)({color:o||a["color"],fontSize:s?a["fontSize"]:c?"".concat(Number(n.replace("rem",""))/2,"rem"):"".concat(n,"rpx")})])})},P=S,T=n(57042),C=n(24460),D=n(21867),R=n(86066),j=n(99739),N=(0,j.ZP)().supportWebp,V=function(e){(0,D.Z)(n,e);var t=(0,R.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.style,o=void 0===n?{}:n,r=t.url,a=t.mode,s=t.onError,c=void 0===s?function(){}:s,l=t.useSwan,u=t.onLoad,d=void 0===u?function(){}:u;return N||(r=null===(e=r)||void 0===e?void 0:e.replace(/(jpg|png)_\.webp/,"$1")),(0,f.jsx)(i.Image,{className:(0,j.ZP)().isSwan&&l?"image_swan":"",src:r,style:o,mode:a,webp:!0,onError:c,onLoad:d})}}]),n}(h.Component),L=V,E=i.ScrollView,A=E,F=n(56034),M=function(e){(0,D.Z)(n,e);var t=(0,R.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,C.Z)(n)}(F.ZP),O=function(e){(0,D.Z)(n,e);var t=(0,R.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,C.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.forwardedRef,o=e.stickySectionHeadersEnabled,r=e.renderItem,a=e.renderSectionHeader,s=e.ListFooterComponent,c=e.style,l=e.scrollTop,u=e.sections,d=e.showLength;return(0,f.jsx)(i.ScrollView,{className:t,style:c,scrollY:!0,ref:n,scrollTop:l,children:(0,f.jsxs)(i.View,{children:[u&&u.length&&u.slice(0,d||u.length).map((function(e){return(0,f.jsxs)(i.View,{className:"m_comp_section",children:[(0,f.jsx)(i.View,{className:"m_comp_section_header ".concat(o?"m_comp_section_header_sticky":""),children:a({section:e})}),(0,f.jsx)(i.View,{className:"m_comp_section_content",children:e.data&&e.data.length&&e.data.map((function(t,n){return r({item:t,index:n,section:e})}))})]})})),s]})})}}]),n}(M),B=h.forwardRef((function(e,t){return(0,f.jsx)(O,(0,c.Z)((0,c.Z)({},e),{},{forwardedRef:t}))})),z=B,H=h.Fragment,U=n(99433),G=n(45023),q=function(){function e(t){(0,T.Z)(this,e),(0,G.Z)(this,"interpolate",(function(e){return"0"}))}return(0,C.Z)(e,[{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dom,i=void 0===n?{}:n,o=t.H5Animation,r=void 0===o?{}:o;null!==i&&void 0!==i&&i.style&&Object.assign(i.style,r)}}]),e}(),W={View:i.View,Value:q,ScrollView:i.ScrollView,Image:L,Text:i.Text,parallel:function(e){return{start:function(e){}}},timing:function(e,t){return{start:function(e){var n=t||{},i=n.dom,o=n.H5Animation;null!==i&&void 0!==i&&i.style&&Object.assign(i.style,o),e&&e()}}},sequence:function(e){return{start:function(e){}}},createAnimatedComponent:function(e){},event:function(){var e;return(null===(e=arguments.length<=1?void 0:arguments[1])||void 0===e?void 0:e.listener)||function(){}}},K=W,Y={ease:"",linear:function(e){return e}},X=Y,Q=function(e){var t=e.direction,n=e.colors,o=e.style,r=e.children,a=e.className;return(0,f.jsx)(i.View,{style:(0,b.kg)((0,c.Z)({backgroundImage:t||0===t?"linear-gradient(".concat(t,"deg, ").concat(n[0],", ").concat(n[1],")"):"linear-gradient(".concat(n[0],", ").concat(n[1],")")},o)),className:a,children:r})},J=Q,$=n(90129),ee=Z.Db.get("window"),te=ee.width;te=Math.min(te,540);var ne=(0,j.ZP)().isInServer,ie=function(e){var t=e.data,n=void 0===t?[]:t,i=e.current,o=void 0===i?0:i,a=e.scrollEnabled,s=void 0!==a&&a,l=e.renderItem,u=e.onSwiperChange,p=void 0===u?function(){}:u,m=e.duration,v=void 0===m?300:m,_=e.level,g=void 0===_?10:_,y=(0,h.useRef)(null),x=n.length,k=(0,h.useRef)(0),b=(0,h.useRef)(0),Z=(0,h.useState)(-1),I=(0,$.Z)(Z,2),w=I[0],S=I[1],P=(0,h.useState)(!1),T=(0,$.Z)(P,2),C=T[0],D=T[1],R=(0,h.useState)(te),j=(0,$.Z)(R,2),N=j[0],V=j[1],L=(0,h.useState)(ne?{transform:"translate3d(".concat(-(o>=x?x-1:o)*(0,d.Vh)(N).split("rem")[0],"rem, 0px, 0)"),transitionDuration:"0ms"}:{}),E=(0,$.Z)(L,2),A=E[0],F=E[1],M=function(e){var t=w+e,n=-t*N;B(n,t,0!==e)},O=function(e,t){var n=-e*N;D(!0),B(n,e,!0,t)},B=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;F((0,c.Z)((0,c.Z)({},A),{transform:"translate3d(".concat(e,"px, 0px, 0)"),transitionDuration:i+"ms"})),setTimeout((function(){C&&D(!1),n&&(p(t),S(t))}),i)},z=function(e){if(s){var t=e.targetTouches[0];k.current=t.pageX,b.current=t.pageY,D(!0)}},H=function(e){if(s&&C){var t=e.targetTouches[0],n=t.pageX-k.current,i=t.pageY-b.current;if(Math.abs(n)>Math.abs(i)){var o=t.pageX-k.current-w*N;F((0,c.Z)((0,c.Z)({},A),{transform:"translate3d(".concat(o,"px, 0px, 0)"),transitionDuration:v+"ms"}))}}},U=function(e){if(s){var t=e.changedTouches[0],n=t.pageX-k.current,i=t.pageY-b.current;if(Math.abs(n)>Math.abs(i)){var o=n>0&&w>0||n<0&&w<x-1,r=Math.abs(n*g)>N&&o;M(n<0&&r?1:n>0&&r?-1:0)}}};return(0,h.useEffect)((function(){var e=o>=x?x-1:o;O(e,-1===w||Math.abs(e-w)>1?0:v)}),[o]),(0,h.useEffect)((function(){V(y.current.offsetWidth)}),[]),(0,f.jsx)(r,{ref:y,onTouchStart:z,onTouchMove:H,onTouchEnd:U,style:(0,c.Z)({position:"relative",display:"flex",flexDirection:"row",height:"100%",transitionDuration:"0ms",transitionTimingFunction:"ease",transform:"translate3d(".concat(o*N,"px, 0px, 0)")},A),children:n.map((function(e,t){return(0,f.jsx)(r,{style:{overflow:"hidden",flexShrink:0,width:"100%",height:"100%",cursor:"default"},children:l({item:e,index:t})},e.id||t)}))})},oe=(h.Component,n(63306)),re=i.Input,ae=re,se=function(e){var t=e.style,n=void 0===t?{}:t,o=e.children;return(0,f.jsx)(i.View,{style:(0,c.Z)({display:"contents"},n),children:o})},ce=se,le={},ue={dismiss:function(){b.ZP.hideKeyboard(),(le["keyboardDidHide"]||[]).forEach((function(e){return e()}))},addListener:function(e,t){"function"===typeof t&&(le[e]?le[e].push(t):le[e]=[t])},removeListener:function(e,t){var n=le[e]||[];le[e]=n.filter((function(e){return e!==t}))},removeAllListeners:function(e){le[e]=[]}},de=n(94262),pe={create:function(e){return(0,de.Z)(e),{panHandlers:{}}}},he=pe,fe=i.WebView,me=fe,ve=(0,j.ZP)().isSwan?function(e){return(0,f.jsx)(r,{style:(0,c.Z)({display:"inline"},e.style),children:e.children})}:y,_e=ve,ge=r,ye=i.CustomWrapper,xe=ye;(0,u.Z)({container:{backgroundColor:"#DFDFDF",alignSelf:"center"},horizontal:{height:d.WI,width:"100%",marginVertical:8},vertical:{width:d.WI,height:12,marginHorizontal:5}})},99433:function(e,t,n){"use strict";var i=n(298),o=(n(90201),n(71515)),r=n(2269),a=function(e){return(0,r.jsx)(o.View,(0,i.Z)((0,i.Z)({},e),{},{onClick:function(t){e.onPressIn&&e.onPressIn(t),e.onClick&&e.onClick(t),e.onPressOut&&e.onPressOut(t)}}))};t["Z"]=a},55039:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(57042),o=n(24460),r=n(81876),a=n(21867),s=n(86066),c=n(45023),l=n(90201),u=function(e,t,n){var i=!0;try{i=!0,i="props"===n?!(JSON.stringify(e,(function(e,t){return t&&"function"===typeof t?"":t}))==JSON.stringify(t,(function(e,t){return t&&"function"===typeof t?"":t}))):!(JSON.stringify(e)==JSON.stringify(t))}catch(e){i=!0}return i},d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,r.Z)(o),"openCompare",!1),o}return(0,o.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){if(!this.openCompare)return!0;var n=!0;return n=u(e,this.props,"props"),n||(n=u(t,this.state)),n}}]),n}(l.Component)},57113:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(121),o={},r=null,a={isSetBodyFixed:!0},s=o;t["Z"]={add:function(e,t,n){Array.isArray(e)?e.forEach((function(e){o[e]={component:t,assistComponent:(0,i.I8)(n)}})):o[e]={component:t,assistComponent:n}},get:function(e){return e?o[e]:o},change:function(e,t){o[e]&&(t&&(t.uniqueKey=(new Date).getTime(),Object.assign(o[e].assistComponent,t)),r&&r.setState({assistComponent:o}))},register:function(e){r=e},destory:function(e){r&&r.setState({assistComponent:e})},getTarget:function(){return r},getPoplayerGlobal:function(){return a},setPoplayerGlobal:function(e,t){e&&(a[e]=t)}}},52066:function(e,t,n){"use strict";var i=n(91510),o=function(e,t,n){try{var o=(new Date).getTime();n&&"[object Object]"===Object.prototype.toString.call(t)&&(t.timeout=Date.now()+1e3*n);var r=function(){console.log("%c\u6027\u80fd\u68c0\u6d4b- setStorage \u8017\u65f6:".concat((new Date).getTime()-o,"ms"),"color:green")};i.Z.setStorage({key:e,data:t,complete:r})}catch(e){console.log(e)}},r=function(e){try{var t=(new Date).getTime(),n=i.Z.getStorageSync(e);return n.timeout&&Date.now()>n.timeout?"":(console.log("%c\u6027\u80fd\u68c0\u6d4b- getStorage \u8017\u65f6:".concat((new Date).getTime()-t,"ms"),"color:green"),n.data?n.data:n)}catch(e){return""}},a=function(e){try{var t=(new Date).getTime();i.Z.removeStorageSync(e),console.log("%c\u6027\u80fd\u68c0\u6d4b- removeStorage \u8017\u65f6:".concat((new Date).getTime()-t,"ms"),"color:green")}catch(e){console.log(e)}};t["Z"]={set:o,get:r,clear:a}},9353:function(e,t){"use strict";var n=function(e){return e};t["Z"]=n},64571:function(e,t,n){"use strict";n.d(t,{nh:function(){return u},kg:function(){return c.Z},ZP:function(){return _},pW:function(){return v},FN:function(){return h},Yy:function(){return m},Ki:function(){return p}});var i,o=n(56884),r=n.n(o),a=n(65238),s=n.n(a),c=n(9353),l=n(65542),u=l.Z,d=n(92954),p=function(e){},h=d.getCurrentInstance,f=function(e){},m=function(){var e,t=s().env;switch("undefined"!==typeof process&&"development"===(null===(e=process)||void 0===e||null===(e=e.env)||void 0===e?void 0:"production")&&(t="dev"),t){case"dev":return"dev";case"fat":return"FAT";case"prd":return"PROD";default:return"PROD"}},v=function(){return""};r().mkt.getWakeUnion=null===r()||void 0===r()||null===(i=r().mkt)||void 0===i?void 0:i.getUnion,r().cancelRequest=f,r().preloadCRNInstanceForBusiness=function(){},null!==r()&&void 0!==r()&&r().hideKeyboard||(r().hideKeyboard=function(){});var _=r()},58472:function(e,t,n){"use strict";n.d(t,{L6:function(){return a},zT:function(){return s},pX:function(){return c}});var i=n(92954),o=n.n(i),r=(n(64571),n(99739)),a=((0,r.ZP)().taroEnv,r.fO.swan,function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";void 0!==e&&setTimeout((function(){if("string"!==typeof e){var n,a,s,c,l,u=(e.className||(null===(n=e.props)||void 0===n?void 0:n.className)||(null===(a=e.props)||void 0===a?void 0:a.class)||"").split(" ").map((function(e,t){return 0==t?"".concat(e):0==e.indexOf(".")?" ".concat(e):".".concat(e)})).join(""),d=(null===(s=e)||void 0===s?void 0:s.uid)||(null===(c=e)||void 0===c||null===(c=c.props)||void 0===c?void 0:c.id)||(null===(l=e)||void 0===l?void 0:l.id);e=d?"#".concat(d):u?".".concat(u):""}var p=[r.fO.swan,r.fO.alipay,r.fO.h5],h=(0,r.ZP)().taroEnv;i&&!p.includes(h)&&(e="".concat(i," >>> ").concat(e)),o().createSelectorQuery().select(e).boundingClientRect().exec((function(e){e&&e.length?t&&t(e[0]):t&&t(e)}))}),n?0:600)}),s=function(e,t,n,i,o){},c=function(e){return 8*e}},39140:function(e,t,n){"use strict";n.d(t,{NX:function(){return i},fO:function(){return o},iI:function(){return r},yB:function(){return a},RN:function(){return s},RX:function(){return c}});var i=function(e){return e["RN"]="RN",e["Mini"]="mini",e["H5"]="H5",e}({}),o=function(e){return e["weapp"]="weapp",e["swan"]="swan",e["alipay"]="alipay",e["tt"]="tt",e["rn"]="rn",e["h5"]="h5",e}({}),r={weapp:"wx0e6ed4f51db9d078",alipay:"2017081708237081",tt:"ttaf70d9cd305a16cb",swan:"11048657",kwai:"ks650488671226027404",quick:"100252857"},a={weapp:"WAP/WECHATAPP",alipay:"WAP/ALIPAYAPP",tt:"WAP/TOUTIAOAPP",swan:"WAP/BAIDUAPP",kwai:"WAP/KUAISHOUAPP",quick:"WAP/QUICKAPP"},s={weapp:"WECHATAPP",alipay:"ALIPAYAPP",tt:"TOUTIAO",swan:"BAIDUAPP"},c={RN:5,H5:7,mini:21}},99739:function(e,t,n){"use strict";n.d(t,{Z0:function(){return s},fO:function(){return r.fO},yB:function(){return c},wU:function(){return d}});var i,o=n(64571),r=n(39140),a="weapp",s=function(){return!1},c=r.yB,l={},u=null===o.ZP||void 0===o.ZP||null===(i=o.ZP.mkt)||void 0===i?void 0:i.getUnion();t["ZP"]=function(e,t,n,i){var s,d,p;u||(u=null===o.ZP||void 0===o.ZP||null===(p=o.ZP.mkt)||void 0===p?void 0:p.getUnion());var h="".concat(e,"_").concat(t,"_").concat(n,"_").concat(null===(s=u)||void 0===s?void 0:s.allianceid,"_").concat(null===(d=u)||void 0===d?void 0:d.sid,"_header");if(!l[h]){var f=o.ZP.clientID||"";l[h]={cid:e||f,url:t,language:"zh-CN",currency:"CNY",isMiniProgram:!0,isInMini:!0,platform:r.NX.Mini,enviroment:(0,o.Yy)(),channel:"ctrip",log_version:"2021-07-1 00:00:00",syscode:"30",pageId:n,channelId:"",netState:"",taroEnv:a,extensions:[{name:"MiniType",value:c[a]},{name:"AppId",value:r.iI[a]}],version:"8.2.2",serverfrom:r.RN[a],supportWebp:a!==r.fO.tt,isSwan:a===r.fO.swan,allianceId:u.allianceid,siteId:u.sid,isInApp:!1,isInServer:!1}}return l[h]};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.Yy)();switch(t){case"dev":case"FAT":return e?"https://".concat(e):"https://m.fws.qa.nt.ctripcorp.com";case"PROD":return"https://m.ctrip.com";default:return"https://m.ctrip.com"}}},40771:function(e,t,n){"use strict";n.d(t,{FD:function(){return a},b6:function(){return s},ku:function(){return c},Rd:function(){return l}});var i=n(56569),o=n(32180)["window"],r=new Map,a=function(e,t){r.set(e,t)},s=function(e){return r.get(e)},c=function(e){r.delete(e)},l=function(e){if(!(0,i.rI)()){if(o.__middleware)return o.__middleware[e];var t=o.__web_data__?JSON.parse(decodeURIComponent(o.__web_data__)):{};return t[e]}}},97912:function(e,t,n){"use strict";n.d(t,{d:function(){return L}});var i=n(79301),o=n(95308),r=n(93212),a=n(22276),s=n(57042),c=n(24460),l=n(45023),u=n(298),d=n(64571),p=d.ZP,h=n(38915),f=n(61252),m=n(99739),v=n(99765),_=n(93065),g=n(9349),y=n(56569),x=n(25311),k=n(79522),b=n(28570),Z=3,I=(0,m.Z0)(),w=(0,m.ZP)(),S=(0,k.Ds)((function(e){v.Z.show((0,u.Z)({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5"},e&&!(0,y.rI)()?{btnOK:["\u786e\u5b9a"],btnCallBack:[function(){(0,b.Sw)()}]}:{}))}),2e3),P=((0,y.rI)(),function(){function e(){(0,s.Z)(this,e),(0,l.Z)(this,"lockMap",{}),(0,l.Z)(this,"timer",void 0),(0,l.Z)(this,"retryTime",0),(0,l.Z)(this,"useLastMap",{}),(0,l.Z)(this,"__logErrorMap",{})}return(0,c.Z)(e,[{key:"next",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var r,a,s,c,l,u,d,m=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="".concat(Math.random(),"_").concat(Date.now()),!t.lock||o){e.next=5;break}if(!this.lockMap[t.lock]){e.next=4;break}return e.abrupt("return");case 4:this.lockMap[t.lock]=!0;case 5:return a=[],t.list.forEach((function(e){e.useLast&&!o&&(m.useLastMap[e.actionUrl]?m.useLastMap[e.actionUrl]++:m.useLastMap[e.actionUrl]=1,e.__lastKey=m.useLastMap[e.actionUrl]),e.sequenceId=Math.random(),a.push(m.send(e,t,r))})),t.isShowLoad&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){_.Z.show(!0,(function(){return t.list.forEach((function(e){p.cancelRequest(e)})),null}))}),100)),s=a.length,e.next=11,Promise.all(a);case 11:c=e.sent,t.isShowLoad&&_.Z.hide(),this.timer&&clearTimeout(this.timer),l=!1,u=0;case 16:if(!(u<c.length)){e.next=23;break}if(!(!c[u]||c[u].errMsg||null!==(d=c[u])&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.message)){e.next=20;break}return l=!0,e.abrupt("break",23);case 20:u++,e.next=16;break;case 23:if(!l){e.next=40;break}if(!t.needRetry){e.next=37;break}if(!(this.retryTime<Z)){e.next=34;break}return e.next=28,this.sendAgain();case 28:return this.retryTime++,e.next=31,this.next(t,n);case 31:c=e.sent,e.next=35;break;case 34:g.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5");case 35:e.next=38;break;case 37:t.needToast&&g.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5");case 38:e.next=41;break;case 40:this.retryTime=0;case 41:if(t.lock&&(t.delayUnlockTime&&t.delayUnlockTime>0?setTimeout((function(){delete m.lockMap[t.lock]}),t.delayUnlockTime):t.getDelayUnlockTime?setTimeout((function(){var e=0,n=t.getDelayUnlockTime();n&&n>0&&(e=n),setTimeout((function(){delete m.lockMap[t.lock]}),e)}),0):delete this.lockMap[t.lock]),this.sendDevTrace(t,c),(0,f.ZP)(t,c),this.sendCollectLogError(r),n&&n(c),!(0,h.eE)(c,s)||t.isHideErrorConfirm){e.next=50;break}throw S(t.isPopWhenNetworkError),(0,x.fU)({key:"ttd_network_error",id:231304,response:c},"devtrace"),new Error("\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5");case 50:return e.abrupt("return",c);case 51:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"sendAgain",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){v.Z.show({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5",btnCallBack:[(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)})))]})})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var s,c,l,d,f,m,v,_,g,x,k,b,Z,S,P,T,C,D,R=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=n.timeout,l=n.cachePolicy,d=n.cid,f=n.req,m=n.isFirstScreenRequest,v=n.ssrTimeRecorder,_=n.isFromPrefetch,c=t.timeout||c,!t.proxy||"function"!=typeof t.proxy){e.next=4;break}return e.abrupt("return",t.proxy());case 4:if(g=this,!g.isNeedDiscardElement(t)){e.next=7;break}return e.abrupt("return",{__isDiscard:!0});case 7:if(!(0,h.FN)(t.actionUrl)){e.next=16;break}return x=p.__crawlerStartTime=(new Date).getTime(),e.next=11,(0,h.Gx)(t.request.head);case 11:k=e.sent,b=(new Date).getTime(),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u53cd\u722c\u603b\u4f53\u8017\u65f6:".concat(b-x,"ms"),"color:yellow"),Z=(null===k||void 0===k?void 0:k.extensions)||[],t.request.head=(0,u.Z)((0,u.Z)({},t.request.head),{},{extension:t.request.head&&t.request.head.extension?t.request.head.extension.concat(Z):Z});case 16:return t.request.head&&(T=null===(S=t)||void 0===S||null===(S=S.request)||void 0===S||null===(S=S.head)||void 0===S?void 0:S.extension,T||(t.request.head.extension=[]),(P=t.request.head.extension).push.apply(P,(0,a.Z)(w.extensions))),C=(null===(s=t.request)||void 0===s?void 0:s.head)||{},(w.isSwan||(0,y.CX)()||I)&&C&&!C.syscode&&(t.request.head=Object.assign({},C,{syscode:w.syscode})),D=function(e,t,n){_||R.collectLogError(o,e,t,n)},e.abrupt("return",new Promise((function(e){var n=(new Date).getTime();t=R.ssrAddOptions(t,{cid:d});var i={};(0,y.rI)()&&(i.req=f),m&&(null===v||void 0===v||v.record(t.actionUrl)),p.request((0,u.Z)({url:t.actionUrl,method:t.method||"POST",data:t.request,cachePolicy:l,success:function(i){var o,a;t.timeLine=(new Date).getTime(),t.time=t.timeLine-n,m&&(null===v||void 0===v||v.recordEnd(t.actionUrl));var s=i.data;if(g.isNeedDiscardElement(t))e({__isDiscard:!0});else{var c="Success"!==(null===s||void 0===s||null===(o=s.ResponseStatus)||void 0===o?void 0:o.Ack)&&"Success"!==(null===s||void 0===s||null===(a=s.responseStatus)||void 0===a?void 0:a.Ack);c&&s&&"object"===(0,r.Z)(s)&&(s.__hasSendLogError=!0),e(s),c&&D(t.actionUrl,s,"tnt_SOA_Ack_Fail_detail")}},fail:function(n){var i=n;if(m&&(null===v||void 0===v||v.recordEnd(t.actionUrl)),g.isNeedDiscardElement(t))e({__isDiscard:!0});else{var o=!i||"string"===typeof i;!c&&i&&"object"===(0,r.Z)(i)&&(i.__hasSendLogError=!0),o&&(i={__invalidResponse:i,__hasSendLogError:!0}),e(i),c||D(t.actionUrl,i,"tnt_SOA_Network_Fail_detail")}},timeout:c||15e3,sequenceId:t.sequenceId},i))})));case 21:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"isNeedDiscardElement",value:function(e){return!(!e.useLast||e.__lastKey===this.useLastMap[e.actionUrl])}},{key:"sendDevTrace",value:function(e,t){try{e.needDevTrace&&t.map((function(t,n){var i,o,r,a=null===t||void 0===t||null===(i=t.ResponseStatus)||void 0===i||null===(i=i.Extension)||void 0===i?void 0:i.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));a&&(0,f.Vg)((0,u.Z)((0,u.Z)({rootMessageId:a.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},e.devTraceData),{},{scene:"".concat((null===(o=e.devTraceData)||void 0===o?void 0:o.scene)||""," ").concat(null===(r=e.list)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.actionUrl)}))}))}catch(e){}}},{key:"ssrAddOptions",value:function(e,t){var n=t.cid;return n&&(e.request.cid=n),e}},{key:"collectLogError",value:function(e,t,n,i){this.__logErrorMap[e]||(this.__logErrorMap[e]=[]),this.__logErrorMap[e].push({url:t,data:n,type:i})}},{key:"clearLogError",value:function(e){this.__logErrorMap[e]&&delete this.__logErrorMap[e]}},{key:"sendCollectLogError",value:function(e){var t,n=this.__logErrorMap[e]||[];if(!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],c=[];n.forEach((function(e){s.push({url:e.url,type:e.type,stack:e.data.stack}),c.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(c)}catch(e){console.log("get response tostring stack msg error",e)}var l={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,f.Vg)(l)}catch(e){}this.clearLogError(e)}}}],[{key:"next",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,o){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.instance||(e.instance=new e),t.next=3,e.instance.next(n,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}());(0,l.Z)(P,"instance",void 0);var T=n(90129),C=(0,m.Z0)(),D="H5"==(0,m.ZP)().platform,R=(0,m.ZP)(),j=(0,k.Ds)((function(e){v.Z.show((0,u.Z)({content:"\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5"},e&&!(0,y.rI)()?{btnOK:["\u786e\u5b9a"],btnCallBack:[function(){(0,b.Sw)()}]}:{}))}),2e3),N=((0,y.rI)(),function(){function e(){(0,s.Z)(this,e),(0,l.Z)(this,"lockMap",{}),(0,l.Z)(this,"timer",void 0),(0,l.Z)(this,"retryTime",0),(0,l.Z)(this,"useLastMap",{}),(0,l.Z)(this,"__logErrorMap",{})}return(0,c.Z)(e,[{key:"next",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var r,s,c,l,d,p,m,v,_,y,k,b,Z,I,w,S,P,C,R,N,V,L,E,A,F,M,O,B,z,H=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="".concat(Math.random(),"_").concat(Date.now()),[],s=t||{},c=s.beforeWaitPromList,l=void 0===c?[]:c,d=s.afterWaitPromList,p=void 0===d?[]:d,m=[],v={},_={},y=0,k=t.list.every((function(e){return!!e.__isNotCoreApi})),b=!!t.__OPEN_API_DOWN_LEVEL__,Z=!D&&b&&!k,t.list.forEach((function(e){e.sequenceId=Math.random();var n="".concat(e.actionUrl,"__").concat(Math.random(),"__").concat(Date.now());if(Z&&e.__isNotCoreApi){m.push(new Promise((function(e){v[n]=function(t){console.log("notCoreRequestResolveMap",n,t),e(t)}})));var i=null;i=e.__delay__>0?new Promise((function(i,o){setTimeout((function(){H.send(e,t,r).then((function(e){return v[n]&&v[n](e),delete v[n],delete _[n],i(e),e})).catch((function(e){return v[n]&&v[n](null),delete v[n],delete _[n],o(e),e}))}),e.__delay__)})):H.send(e,t,r).then((function(e){return v[n]&&v[n](e),delete v[n],delete _[n],e})).catch((function(e){return v[n]&&v[n](null),delete v[n],delete _[n],e})),_[n]=i}else y++,m.push(e.__delay__>0?new Promise((function(n){setTimeout((function(){H.send(e,t,r).then((function(e){return n(e),e})).finally((function(){y--,0===y&&Object.keys(_).forEach((function(e){var t=_[e];v[e]&&v[e]((function(){return t})),delete v[e],delete _[e]}))}))}),e.__delay__)})):H.send(e,t,r).then((function(e){return e})).finally((function(){y--,0===y&&Object.keys(_).forEach((function(e){var t=_[e];v[e]&&v[e]((function(){return t})),delete v[e],delete _[e]}))})))})),I=Promise.all(l),w=Promise.all(p),S=Promise.all(m),e.next=16,Promise.all([I,S,w]);case 16:P=e.sent,C=(0,T.Z)(P,3),R=C[0],N=C[1],V=C[2],L=[].concat((0,a.Z)(R),(0,a.Z)(N),(0,a.Z)(V)),E=null===R||void 0===R?void 0:R.map((function(e){return null===e||void 0===e?void 0:e.__ORIGIN_REQUEST_PARAMS__})),A=null===V||void 0===V?void 0:V.map((function(e){return null===e||void 0===e?void 0:e.__ORIGIN_REQUEST_PARAMS__})),F=(0,u.Z)((0,u.Z)({},t),{},{list:[].concat((0,a.Z)(E),(0,a.Z)(t.list),(0,a.Z)(A))}),M=F.length,O=!1,B=0;case 28:if(!(B<L.length)){e.next=37;break}if("function"!==typeof L[B]){e.next=31;break}return e.abrupt("continue",34);case 31:if(!(!L[B]||L[B].errMsg||null!==(z=L[B])&&void 0!==z&&null!==(z=z.data)&&void 0!==z&&z.message)){e.next=34;break}return O=!0,e.abrupt("break",37);case 34:B++,e.next=28;break;case 37:if(O&&g.ZP.show("\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e\u540e\u91cd\u8bd5"),this.sendDevTrace(L),(0,f.ZP)(F,L),this.sendCollectLogError(L),n&&n(L),!(0,h.eE)(L,M)||F.isHideErrorConfirm){e.next=46;break}throw j(F.isPopWhenNetworkError),(0,x.fU)({key:"ttd_network_error",id:231304,response:L},"devtrace"),new Error("\u5f53\u524d\u7f51\u7edc\u60c5\u51b5\u4e0d\u4f73\uff0c\u8bf7\u91cd\u8bd5");case 46:return e.abrupt("return",L);case 47:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){var s,c,l,d,f,m,v,_,g,x,k,b,Z,I,w,S,P,T,D,j=this;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=n.timeout,l=n.cachePolicy,d=n.cid,f=n.req,m=n.isFirstScreenRequest,v=n.ssrTimeRecorder,_=n.isFromPrefetch,g=n.needDevTrace,x=n.devTraceData,c=t.timeout||c,!t.proxy||"function"!=typeof t.proxy){e.next=4;break}return e.abrupt("return",Promise.resolve(t.proxy()));case 4:if(!(0,h.FN)(t.actionUrl)){e.next=13;break}return k=p.__crawlerStartTime=(new Date).getTime(),e.next=8,(0,h.Gx)(t.request.head);case 8:b=e.sent,Z=(new Date).getTime(),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u53cd\u722c\u603b\u4f53\u8017\u65f6:".concat(Z-k,"ms"),"color:yellow"),I=(null===b||void 0===b?void 0:b.extensions)||[],t.request.head=(0,u.Z)((0,u.Z)({},t.request.head),{},{extension:t.request.head&&t.request.head.extension?t.request.head.extension.concat(I):I});case 13:return t.request.head&&(P=null===(w=t)||void 0===w||null===(w=w.request)||void 0===w||null===(w=w.head)||void 0===w?void 0:w.extension,P||(t.request.head.extension=[]),(S=t.request.head.extension).push.apply(S,(0,a.Z)(R.extensions))),T=(null===(s=t.request)||void 0===s?void 0:s.head)||{},(R.isSwan||(0,y.CX)()||C)&&T&&!T.syscode&&(t.request.head=Object.assign({},T,{syscode:R.syscode})),D=function(e,t,n){if(!_)return{url:e,data:t,type:n}},e.abrupt("return",new Promise((function(e){var n=(new Date).getTime();t=j.ssrAddOptions(t,{cid:d});var i={};(0,y.rI)()&&(i.req=f),m&&(null===v||void 0===v||v.record(t.actionUrl)),p.request((0,u.Z)({url:t.actionUrl,method:t.method||"POST",data:t.request,cachePolicy:l,success:function(i){var o,a;t.timeLine=(new Date).getTime(),t.time=t.timeLine-n,m&&(null===v||void 0===v||v.recordEnd(t.actionUrl));var s=i.data,c="Success"!==(null===(o=s)||void 0===o||null===(o=o.ResponseStatus)||void 0===o?void 0:o.Ack)&&"Success"!==(null===(a=s)||void 0===a||null===(a=a.responseStatus)||void 0===a?void 0:a.Ack);c&&s&&"object"===(0,r.Z)(s)&&(s.__hasSendLogError=!0);var l=!s||"string"===typeof s;l&&(s={__invalidResponse:s,__hasSendLogError:!0}),s.__API_NAME__=t.__API_NAME__||t.actionUrl,s.__ORIGIN_REQUEST_PARAMS__=t,s.__ORIGIN_REQUEST_ENV__={needDevTrace:g,devTraceData:x},c&&(s.__SEND_LOG_ERROR__=D(t.actionUrl,s,"tnt_SOA_Ack_Fail_detail")),e(s)},fail:function(n){var i=n;m&&(null===v||void 0===v||v.recordEnd(t.actionUrl));var o=!i||"string"===typeof i;!c&&i&&"object"===(0,r.Z)(i)&&(i.__hasSendLogError=!0),o&&(i={__invalidResponse:i,__hasSendLogError:!0}),i.__API_NAME__=t.__API_NAME__||t.actionUrl,i.__ORIGIN_REQUEST_PARAMS__=t,i.__ORIGIN_REQUEST_ENV__={needDevTrace:g,devTraceData:x},c||(i.__SEND_LOG_ERROR__=D(t.actionUrl,i,"tnt_SOA_Network_Fail_detail")),e(i)},timeout:c||15e3,sequenceId:t.sequenceId},i))})));case 18:case"end":return e.stop()}}),e)})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"sendDevTrace",value:function(e){try{e.map((function(e,t){var n,i,o;if("function"!==typeof e){var r=null===e||void 0===e||null===(n=e.__ORIGIN_REQUEST_ENV__)||void 0===n?void 0:n.needDevTrace,a=null===e||void 0===e||null===(i=e.__ORIGIN_REQUEST_ENV__)||void 0===i?void 0:i.devTraceData,s=null===e||void 0===e||null===(o=e.__ORIGIN_REQUEST_PARAMS__)||void 0===o?void 0:o.actionUrl;if(r&&a){var c,l=null===e||void 0===e||null===(c=e.ResponseStatus)||void 0===c||null===(c=c.Extension)||void 0===c?void 0:c.find((function(e){return"RootMessageId"==e.Id||"RootMessageId"==e.ContentType}));l&&(0,f.Vg)((0,u.Z)((0,u.Z)({rootMessageId:l.Value,module:"\u63a5\u53e3\u8bf7\u6c42"},a),{},{scene:"".concat((null===a||void 0===a?void 0:a.scene)||""," ").concat(s)}))}}}))}catch(e){}}},{key:"ssrAddOptions",value:function(e,t){var n=t.cid;return n&&(e.request.cid=n),e}},{key:"sendCollectLogError",value:function(e){var t,n=[];if(e.forEach((function(e){"function"!==typeof e&&null!==e&&void 0!==e&&e.__SEND_LOG_ERROR__&&n.push(null===e||void 0===e?void 0:e.__SEND_LOG_ERROR__)})),!(n.length<=0)){var i,o,r=n.map((function(e){return e.url||""})).join("|"),a=null===(t=n[0])||void 0===t?void 0:t.type;try{var s=[],c=[];n.forEach((function(e){s.push({url:e.url,type:e.type,stack:e.data.stack}),c.push({url:e.url,type:e.type,data:"tnt_SOA_Ack_Fail_detail"==e.type?"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef":"\u7f51\u7edc\u9519\u8bef"})})),i=JSON.stringify(s),o=JSON.stringify(c)}catch(e){console.log("get response tostring stack msg error",e)}var l={devType:"logError",pageName:a,message:r,errorType:a,ex:{message:o,stack:i}};try{(0,f.Vg)(l)}catch(e){}}}}],[{key:"next",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n,o){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.instance||(e.instance=new e),t.next=3,e.instance.next(n,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}());function V(e,t){return e}(0,l.Z)(N,"instance",void 0);var L=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,o){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=V(t,o),!t.__USE_NEW_REQUEST__){e.next=5;break}return e.next=4,N.next(t,n);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,P.next(t,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()},38915:function(e,t,n){"use strict";n.d(t,{eV:function(){return l},FN:function(){return u},Gx:function(){return d},eE:function(){return p}});var i=n(64571),o=n(99739),r=n(56569),a=[],s=(0,o.ZP)().syscode,c=(0,o.Z0)(),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a=e},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/");return t=t.pop(),t=t.split("?"),t=t.pop(),a.indexOf(t)>-1},d=function(e){var t={appid:"wx0e6ed4f51db9d078"};return((0,o.ZP)().isSwan||(0,r.CX)()||c)&&(t.head={syscode:s}),new Promise((function(n,r){var a={PROD:"https://sec-m.ctrip.com",FAT:"http://gateway.m.fws.qa.nt.ctripcorp.com"}[(0,i.Yy)()],s={url:"".concat(a,"/restapi/soa2/12530/json/crawlerScripting"),fixedParams:t,getScriptFromRsp:function(e){return e&&e.data&&e.data.data&&e.data.data.script},head:e,callback:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.fingerprintKeys,r=t.crawlerKey;"string"!==typeof e&&(e=""),n({extensions:i&&r?[{name:"fingerprintKeys",value:i},{name:"crawlerKey",value:r}]:[{name:"crawlerKey",value:e},{name:"MiniType",value:(0,o.ZP)().isSwan?o.yB[o.fO.swan]:"WAP/WECHATAPP"}]})}};i.ZP&&i.ZP.createAntiSpiderRequest?i.ZP.createAntiSpiderRequest(s):r(null)})).catch((function(e){return null}))},p=function(e,t){return!1}},61252:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m},Vg:function(){return k},dD:function(){return y},gp:function(){return _},v5:function(){return b},Zz:function(){return x},PX:function(){return g},bw:function(){return l}});var i=n(298),o=n(64571),r=n(79522),a=n(25311),s=n(99739),c=n(27868),l={targetRef:"",setRef:function(e){e=void 0===e?null===o.pW||void 0===o.pW?void 0:(0,o.pW)():e,this.targetRef=e},getRef:function(){return this.targetRef}},u="",d="",p="",h="",f=function(){return(0,s.ZP)(d,h,p)},m=function(e,t){try{if(!1===e.log)return;if(!h){var n=(0,o.FN)();h="".concat(n.router.path,"?").concat((0,r.RF)(n.router.params))}var a={body:[]},c=e.list||[];c.map((function(e,n){var o,r,c;d||(d=(null===e||void 0===e||null===(c=e.request)||void 0===c||null===(c=c.head)||void 0===c?void 0:c.cid)||(0,s.ZP)().cid);if("function"!==typeof t[n]){var l=(null===(o=t[n])||void 0===o||null===(o=o.ResponseStatus)||void 0===o?void 0:o.Extension)||[],h=null===(r=l.filter((function(e){return"RootMessageId"===e.Id}))[0])||void 0===r?void 0:r.Value;e.actionUrl.indexOf("CreateTicketOrder")>0&&v((0,i.Z)((0,i.Z)({},e),{},{rootMessageId:h}),t[n]),a.body.push((0,i.Z)({title:"\u7f51\u7edc\u8bf7\u6c42",actionUrl:-1==e.actionUrl.indexOf("https:")?"https://m.ctrip.com".concat(e.actionUrl):e.actionUrl,apiUrl:function(){var t=e.actionUrl.split("/");return t[t.length-1]+"/"+t[t.length-2]}(),pageId:p,request:e.request,rootMessageId:h,time:e.time,timeLine:e.timeLine,type:"info",traceId:u},f()))}})),_((0,i.Z)((0,i.Z)({},a),{},{type:"common_req_res"}))}catch(e){console.log(e,"ex")}},v=function(e,t){var n;if(0!=(null===t||void 0===t||null===(n=t.head)||void 0===n?void 0:n.errcode)){var o={};o.body=(0,i.Z)({title:"\u521b\u5355\u62a5\u9519",errorcode:t.head.errcode,request:e.request,rootMessageId:e.rootMessageId},f()),_((0,i.Z)((0,i.Z)({},o),{},{type:"booking_creatorder_fail"}))}},_=function(e){e.body instanceof Array==0&&(e.body=(0,i.Z)((0,i.Z)({},e.body),{},{traceId:u,isTaroTnt:!0},f())),e.type=e.type?e.type:"common_other";var t=0==e.type.indexOf("ttd_dev_")?e.type:"ttd_dev_".concat(e.type);e.body.length?e.body.forEach((function(e){(0,a.fU)((0,i.Z)((0,i.Z)({},e),{},{key:t}),"devTrace")})):(0,a.fU)((0,i.Z)((0,i.Z)({},e.body),{},{key:t}),"devTrace")},g=function(e){var t=e.pageId;p=t,u=String(Math.ceil(1e8*Math.random()))},y=function(){return p},x=function(e,t){console.log("sendUbtLog",e,t),e&&t&&(e.method&&"function"===typeof e.method&&(e=e.method()),(0,a.fU)(e,t))},k=c.Z,b=function(){_({type:"ttd_dev_pagenext_click",body:{pageId:y()}})}},27868:function(e,t,n){"use strict";var i=n(298),o=n(61252),r=n(79522),a=n(25311),s=(0,r.P2)((function(){a.fU.apply(void 0,arguments)}),1e3);t["Z"]=function(e){try{var t,n,r=(0,i.Z)({devKey:"km_ticket_trace_log"},e);if(!r.key||null!==(t=r.jsonData)&&void 0!==t&&t.value?r.jsonData=(0,i.Z)((0,i.Z)({},r.jsonData),{pageId:String((0,o.dD)()||"")}):(r.key="tkt_5200001",r.jsonData={value:"\u524d\u7aef\u57cb\u70b9\u5f02\u5e38",pageId:String((0,o.dD)()||"")}),0===(null===(n=r.key)||void 0===n?void 0:n.indexOf("tkt_"))||"logError"==r.devType)return s(r,"devtrace");(0,a.fU)(r,"devtrace")}catch(e){console.log(e,"devTrace error")}}},50738:function(e,t,n){"use strict";n.d(t,{kI:function(){return i},ap:function(){return o},HP:function(){return r},a7:function(){return a}});var i=function(e,t){},o=function(e){},r=function(e,t){},a=function(e){}},25311:function(e,t,n){"use strict";n.d(t,{fU:function(){return r},Jn:function(){return a}});var i=n(33675),o=n.n(i),r=function(e,t){t=t&&t.toLocaleLowerCase();try{"devtrace"==t?o().sendUbtByPage.ubtDevTrace(e.devKey||e.key,{data:JSON.stringify(e)}):"pv"==t?o().sendUbtByPage.ubtSendPV(e):o().sendUbtByPage.ubtTrace(e.key,e)}catch(e){console.log(e)}},a={}},28570:function(e,t,n){"use strict";n.d(t,{z2:function(){return a},VF:function(){return s},Sw:function(){return c}});var i=n(298),o=n(64571),r=n(61252),a=function(e,t){return""},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>4?arguments[4]:void 0,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6?arguments[6]:void 0,c="switchTab"===t?t:t?"redirectTo":"navigateTo";if(e&&e.startsWith("/pages/"))return(0,r.v5)(),void o.ZP[c]({url:e,success:function(){n&&n()}});if(e&&e.indexOf("//")>-1){(0,r.v5)();var l="/cwx/component/cwebview/cwebview";o.ZP[c]({url:"".concat(l,"?data=").concat(JSON.stringify((0,i.Z)({url:encodeURIComponent(e),needLogin:a,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},s||{}))),success:function(){n&&n()}})}else console.log("\u8f93\u5165\u7684url\u6709\u8bef",e)},c=function(e){o.ZP.navigateBack()}},17366:function(e,t,n){"use strict";n.d(t,{oQ:function(){return f},pm:function(){return m},Cg:function(){return s},E0:function(){return F},Wn:function(){return d},ix:function(){return R},yx:function(){return A},Ec:function(){return N},P_:function(){return P},_7:function(){return Z},i3:function(){return b},H7:function(){return w},xI:function(){return k},_:function(){return I},i4:function(){return S},Ue:function(){return B},WI:function(){return L},Sf:function(){return y},Nv:function(){return p},e6:function(){return i.ZP},oM:function(){return i.oM},dX:function(){return i.dX},wh:function(){return D},Oh:function(){return _},o3:function(){return a},WB:function(){return o},yp:function(){return r},Vh:function(){return T.ZP},Nm:function(){return g},vs:function(){return v},eR:function(){return h},lM:function(){return E}});var i=n(36957),o=function(e){return{paddingLeft:e,paddingRight:e}},r=function(e){return{paddingTop:e,paddingBottom:e}},a=function(e,t,n,i){var o={paddingTop:e,paddingRight:e,paddingBottom:e,paddingLeft:e};return"undefined"===typeof t?o:(o.paddingLeft=o.paddingRight=t,"undefined"===typeof n?o:(o.paddingBottom=n,"undefined"===typeof i||(o.paddingLeft=i),o))},s=function(e){var t=e.direction,n=void 0===t?"":t,i=e.width,o=e.style,r=void 0===o?"solid":o,a=e.color,s={},l="border".concat(c(n));return(i||0===i)&&(s["".concat(l,"Width")]=i),r&&(s["".concat(l,"Style")]=r),a&&(s["".concat(l,"Color")]=a),s},c=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},l=n(64241),u=function(e){var t=e.hShadow,n=e.vShadow,i=e.blur,o=e.spread,r=e.color,a=(e.rnColor,[]);return a.push((0,l.ly)(t)?t:"".concat(t,"px")),a.push((0,l.ly)(n)?n:"".concat(n,"px")),(i||0==i)&&i>=0&&a.push((0,l.ly)(i)?i:"".concat(i,"px")),(o||0==o)&&a.push((0,l.ly)(o)?o:"".concat(o,"px")),r&&a.push("".concat(r)),{boxShadow:a.join(" ")}},d=u,p=function(e){return(0,l.ly)(e)?e:"".concat(e,"px")},h=function(e){return{transition:"".concat(e)}},f=function(e){return{animation:"".concat(e)}},m=function(e){var t=Object.keys(e).map((function(t){return"number"===typeof e[t]?"".concat(t,"(").concat((0,l.ly)(e[t])?e[t]:"".concat(e[t],"px"),")"):"".concat(t,"(").concat(e[t],")")})).join(" ");return{transform:t}},v=function(e){return{transform:"".concat(e)}},_=function(e){return"".concat(e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach((function(e){t[e.key]=e.value})),t},y=function(e){return 1===e?{display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"".concat(e),textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all"}},x=n(298),k={display:"flex",flexDirection:"row"},b={display:"flex",flexDirection:"column"},Z={display:"flex",alignItems:"center",justifyContent:"center"},I=(0,x.Z)((0,x.Z)({},k),{},{alignItems:"center"}),w=function(e){return String(e)},S=function(e){return String(e)},P=function(e){return(0,l.ly)(e)?e:"".concat(e,"px")},T=n(91599),C=function e(t){var n={};return t.forEach((function(t){t&&(Array.isArray(t)&&(t=e(t)),n=(0,x.Z)((0,x.Z)({},n),t))})),n},D=C,R=function(e){return{boxSizing:e}},j=function(e,t){if(!t)return e;var n=(0,x.Z)({},e);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=n[i];n[i]=r?Object.assign({},r,o):o}return n},N=j,V=1,L=V,E=function(e){return{wordBreak:e}},A=function(e){return"calc(".concat(e,")")},F=function(e,t,n,i){var o={borderTopLeftRadius:e,borderTopRightRadius:e,borderBottomRightRadius:e,borderBottomLeftRadius:e};return"undefined"===typeof t?o:(o.borderTopRightRadius=o.borderBottomLeftRadius=t,"undefined"===typeof n?o:(o.borderBottomRightRadius=n,"undefined"===typeof i||(o.borderBottomLeftRadius=i),o))},M=n(56569),O=(0,M.gn)(),B=function(e){return Number(e)<500||O?e:"bold"}},36957:function(e,t,n){"use strict";n.d(t,{oM:function(){return i},dX:function(){return o}});var i=function(e){return{marginLeft:e,marginRight:e}},o=function(e){return{marginTop:e,marginBottom:e}};t["ZP"]=function(e,t,n,i){var o={marginTop:e,marginRight:e,marginBottom:e,marginLeft:e};return"undefined"===typeof t?o:(o.marginLeft=o.marginRight=t,"undefined"===typeof n?o:(o.marginBottom=n,"undefined"===typeof i||(o.marginLeft=i),o))}},91599:function(e,t,n){"use strict";n.d(t,{HT:function(){return a}});var i=n(61252),o=n(56569),r=o.Db.get("window").width,a=o.Db.get("window").height;t["ZP"]=function(e,t){var n=(0,i.dD)(),o=500,a=t||{},s=a.ignorePage;"10650051850"!==String(n)||s||(o=400);var c=r;return r>o&&(c=o),e*(c/375)}},91510:function(e,t,n){"use strict";var i=n(92954),o=n.n(i);t["Z"]=o()},73435:function(e,t,n){"use strict";n.d(t,{IH:function(){return i},lu:function(){return o},dC:function(){return r}});var i=function(e,t){var n,i,o;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),Number(((e*o+t*o)/o).toFixed(Math.max(n,i)))},o=function(e,t){var n,i,o,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),r=n>=i?n:i,Number(((e*o-t*o)/o).toFixed(r))},r=function(e,t){var n=0,i=e.toString(),o=t.toString();try{n+=i.split(".")[1].length}catch(e){}try{n+=o.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)}},32545:function(e,t,n){"use strict";n.d(t,{ie:function(){return r},fh:function(){return a},XV:function(){return c},q7:function(){return l},VV:function(){return u},gw:function(){return d},FD:function(){return h},Ht:function(){return f},qu:function(){return m}});var i=n(92300),o=function(e){return e<10?"0".concat(e):"".concat(e)},r=function(e,t){var n=new Date(p(e)),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),S:n.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=s(e),i=n.year,r=n.month,a=n.day;return i+t+o(r)+t+o(a)},s=function(e){var t=new Date(p(e));return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},c=function(e){var t=new Date(e.replace(/-/g,"/")),n=new Date(a(new Date,"/")),i=(t.valueOf()-n.valueOf())/864e5;return i},l=function(e){var t=(0,i.l)(e),n=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];return n[t.day()]},u=function(e){if(e&&Number(e)){var t=Number(e)/1e3,n=Math.floor(t/60);return n<1?Math.floor(t)+"\u79d2":n+"\u5206\u949f"}},d=function(e,t){return Math.round(new Date(p(t)).getTime()-new Date(p(e)).getTime())/864e5+1},p=function(e){return e&&"string"===typeof e?e.replace(/-/g,"/"):e},h=function(e,t,n){e=p(e),t=p(t);var i=new Date(e).getTime(),o=t?new Date(t).getTime():(new Date).getTime();if(n?o>i:o>=i)return n?-1:0;var r=i-o;return Math.ceil(r/864e5)},f=function(e,t){var n=s(e),i=n.year,o=n.month,r=s(t),a=r.year,c=r.month;return 12*(a-i)+c-o+1},m=function(e,t){if(!e||!t)return 0;var n=new Date(p(e)).getTime(),i=new Date(p(t)).getTime();return n==i?2:n>i?1:0}},92300:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var i=n(96069),o=n.n(i),r=n(49527),a=n.n(r);o().extend(a()),o().tz.setDefault("PRC");var s=o()},45899:function(e,t,n){"use strict";n.d(t,{E:function(){return i},V:function(){return o}});var i=function(){},o=function(){}},64241:function(e,t,n){"use strict";n.d(t,{ly:function(){return i}});Object.prototype.toString;function i(e){return String(e).includes("rem")}},121:function(e,t,n){"use strict";n.d(t,{I8:function(){return o},oG:function(){return r},vZ:function(){return a}});var i=n(93212),o=function(e){return s(e)?JSON.parse(JSON.stringify(e)):e},r=function(e){var t=[];return e.map((function(e){t.push(Number(e))})),t};function a(e,t){if(!s(e)||!s(t))return e===t;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++){var r=n[o],c=e[r],l=t[r],u=s(c)&&s(l);if(!t.hasOwnProperty(r)||u&&!a(c,l)||!u&&c!==l)return!1}return!0}function s(e){return null!=e&&"object"===(0,i.Z)(e)}},56569:function(e,t,n){"use strict";n.d(t,{cY:function(){return a},iO:function(){return s},gn:function(){return c},Db:function(){return l},md:function(){return u},t4:function(){return d},NS:function(){return p},Z6:function(){return h},ud:function(){return f},v8:function(){return m},Ae:function(){return v},CX:function(){return _},rI:function(){return g},vY:function(){return y},yF:function(){return x},o6:function(){return k}});var i=n(91510),o=n(99739),r=i.Z.getSystemInfoSync(),a=function(){var e=r.model,t="alipay"==(0,o.ZP)().taroEnv,n=t?/iPhone(\d{0,3}),(\d{0,3})/i:/iPhone (X|\d{0,3})/,i=e.match(n)||[],a=t?Number(i[1])>10||10==Number(i[1])&&(3==Number(i[2])||6==Number(i[2])):"X"==i[1]||Number(i[1])>10;return a},s=a()?24:0,c=function(){return"ios"==r.platform},l={get:function(e){var t={};switch(e){case"window":t={width:r.windowWidth,height:r.windowHeight};break;case"screen":t={width:r.screenWidth,height:r.screenHeight};break}return t}},u=function(){return r.pixelRatio},d={select:function(e){return{}},OS:""},p=function(){return!1};function h(e){return!1}var f=function(e){return""},m=function(e){return!1},v=function(e){return!1},_=function(){return!1},g=function(){return!1},y=function(){return!1},x=function(){return!1},k=function(){return!1}},79522:function(e,t,n){"use strict";n.d(t,{Ds:function(){return s},_v:function(){return c},RF:function(){return l},vn:function(){return u},uE:function(){return d},P2:function(){return p},gI:function(){return h},Xh:function(){return f},nW:function(){return v}});var i=n(298),o=n(93212),r=n(79301),a=n(95308);function s(e,t){var n;return(0,a.Z)((0,r.Z)().mark((function i(){var o,a,s,c,l=arguments;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(o=l.length,a=new Array(o),s=0;s<o;s++)a[s]=l[s];c=this,clearTimeout(n),n=setTimeout((function(){e.apply(c,a)}),t);case 4:case"end":return i.stop()}}),i,this)})))}var c=function(e){return new Promise((function(t){setTimeout((function(){t()}),e||0)}))},l=function(e,t){var n=[];if(e)for(var i in e)t&&"object"===(0,o.Z)(e[i])||n.push("".concat(i,"=").concat(e[i]));return n.join("&")},u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?decodeURIComponent(e).split("?"):e.split("?"),i={};if(2==n.length){var o=n[1],r=o.split("&");r.forEach((function(e){var t=e.search("=");t>0&&(i[e.slice(0,t)]=e.slice(t+1))}))}return i},d=function(e,t){return JSON.stringify(e)==JSON.stringify(t)};function p(e,t,n){var i,o,r,a=0;n||(n={});var s=function(){a=!1===n.leading?0:(new Date).getTime(),i=null,e.apply(o,r),i||(o=r=null)},c=function(){var c=(new Date).getTime();a||!1!==n.leading||(a=c);var l=t-(c-a);o=this,r=arguments,l<=0||l>t?(i&&(clearTimeout(i),i=null),a=c,e.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(s,l))};return c.cancel=function(){clearTimeout(i),a=0,i=null},c}var h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o={};return o=e[t],n.forEach((function(n){o=(0,i.Z)((0,i.Z)({},o),e[t+"_"+n])})),o};var f=function(e){return e=e||{},Object.keys(e).reduce((function(t,n){return"undefined"==typeof e[n]&&null!==e[n]||(t+="object"===(0,o.Z)(e[n])?"".concat(n,"=").concat(JSON.stringify(e[n]),"&"):"".concat(n,"=").concat(e[n],"&")),t}),"").slice(0,-1)},m=function(e,t){var n=t-e.length,i="";return n>0&&(i=new Array(n).fill(0).join("")),"".concat(i).concat(e)},v=function(e){if(!e)return e;var t=e.split(".").slice(0,3),n=t[0]||"0",i=t[1]||"0",o=t[2]||"0";return"".concat(n).concat(m(i,2)).concat(m(o,3))}},71557:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(72747)),l=n(55039),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n)}(l.Z),d=n(2269),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,d.jsx)(c.JO,(0,i.Z)({},this.props))}}]),n}(u)},33392:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(298),o=n(57042),r=n(24460),a=n(81876),s=n(21867),c=n(86066),l=n(45023),u=(n(90201),n(72747)),d=n(55039),p=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"onError",value:function(){this.setState({ready:!1})}}]),n}(d.Z),h=n(64571),f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALwAAADOBAMAAAB2jXVSAAAAHlBMVEVHcEzR0dHR0dHR0dHKysrQ0NDPz8/Q0NDQ0NDR0dFmmqz0AAAACXRSTlMA472XEXEpVkAcWA5eAAAIx0lEQVR42rVcz1/aSBSPEALHCuo2N1zbtbkh1q65EbW1R6yLLTddW5Ubtdtabmz1o8sx8BHMf7sE8mOSzLx5Mwlz6edT4OvLm/e+79dMFEVyqVff1x3H3vj5Wcl+XR5PsefL3viRNfiWE1kvTzMEf1934mv4T1bg6q3uJJf9Jht07cihLvt1FuiHhsNYdjM9+lvdYa5h6v09B9Ad5/lC0R2nmwp9n4PuPC5K7+nFLxpcdOdJ3t4R6I4tazzqkYNZVUn4axS6M5E0Ghy6Yzdk0Es6Et6RYQbVxKI7KxLwf6PRZZRf0PHww4xVU2m1IpHxNFPV7LrfuE3BC0VINa/m3/kV/k9NEL4NoI8aSqnVuiP19yxDh6q5NGpPFZSXtEyQyYbux8O++73ga2Mh+DNI+DX349fR742zY4OaajgjpVjuEtoRgu/B7F5wdd1x9a3pEgGxwPFQy93dzkxiX/n2dqvVuk9vlK6g04frK3uzIBL9aoWVc767+t5qfbxv8IWf0pfpErx600iq0f6LRi+X9eX5x+WdO57w08BthvFjwM/ZImm7vfGNmxcYIYUNklYbE/2DAPH60gcUNuBQc2nLEVyzra0yrSDCnSVDFH3qUZ0wPJlgUqKZwujTbc0HmZOaVCzpv0eOxGq6vvobywEnUsE6kha41r75+eDO9V92vlzUpeBH8x8uL3cpqifg247c6irn7j9vqP49wTEXXC98qW+c0Jl1nFZ4P5bQI2Y1rfA+cx3qUKnSc1Lg/3l/9U2H8jVNdxaxfErLLQTd7megG34NrS5EN0E0KWQCZ7D6F9mo/scWo7vTyUbV6nWoZPskkSmVf19Phd9VDuu6lwWQUXymtcqPBqOLhWbPacrw7uHm5udFtPZ0H2Zz/l/nacRfpZe0ujM8Sc9trgaoZdUtoap8Olvf5TRk07rYKqfmN1Ohc5uxafinfMLNuAcpiL+RshoB9XKXvl5IoxclUj8K6WUT2STSpMz9BFuq5TNzVuqSIGesYqS8yt4VaSAIy/6HSA0urHqx1paw6sVa3sJOJdT3E6djIenFMx4h+Nxi4cXZWEj35kLhJQKtyDCjKE4440X6rFjT0hKHFxmVSMTZ2kINR2SUIZOhCTTrSxIxfKGM44wWyjhCXsW3y+FOXd4uuYQ2Oo1MMQRnYLxQNRsDRMxLaILHyf+8QtiUpWMdlXIMJFWv4eJSh5wOZEbHQfukI6mbAi4b68jZDcz2w0bSfEVcluO0Lyjm+0II3kIJH5rvUGxs3UEJX5IUHuIEQtCcpPBQKFyjMIfoYZ82MFwLfU+XMhsw0k6S+293s4MP0wHVkKl5YMIkNtF3vVUlO/i1xBNWGhnCN+O0VDlVsoMfxjzPfilzyoSZRBFJ8P7y8mxSyV6Xx9ufGkLBiqRd9QAW8QNTdyzpRcL1EWBXeuribB/Im1nS4wuEwOeojKGzOs8S8aiJNUwB1bfBkstIqXpyfjTEwuNVH0kF+kjGJIygIRCra0h4ojleFYh2K7hoRShxUBOIF084eGJnjT4entLZHMBcX+SZqAF3Njtw1b00QhM6dUZgwXTZm2Dh6Qd6l2DDMcZYp22iU1ibKC54DtYj0xb16r/P/AR8RIRZXqXTITjw7XoiaBZBu1ziFgtW+BPvyO8qr7YaE7J1cXxcJY6yveDEkxVi405RlObmo/9S2dyAzN7gEn/B3y2CmaswK9TCR+P2Vgq+Oi16tBgAXlXit9KLvrwmvfK1APgCP6Eveb/QGEkSxa/64b4h4ftR/1kB6+Z++KcfUfBTA1hi8L4GUI6FhY8x7yOY6QTwZ/wGQsmLbj1Ws81kJzkdPnzRg+uxRjdJyyQ6CWj4NgveYkvf48MXaPA22HI5DT2aC5/3trLHgi9B8FzLydF0b4N5oAi85UnPVE6S1PrhJ1yv7dDgh2Cy0A3huZTW8+BNJnyeSWkIeJMLrzH5vs2tI+bBbhLbwBGYJVeJJz/FEOY4FlNHYJ75jPigiQm1KzENPIKp1JgwixomD6nF8pkncL7xFDIm79h+zzO1PDQ2MxhplMUdsBkeSeWg0mzAKE5yvBqx6O9kBxpP5BmUmedN3XO+MnvQ2ExjsEKR105v+8IaYE1v0v1K4zS8PWvvxuRLiGQxDF+HZw15f6vy8DGGIsMyTXhI1fO/bXFaBga9fuiBe+tdwKjFOT0p0RnddCxqoyCqUvcigc4ZmxXojJ+DBj1eo2iS+DW3r1Ml9oQZzfcCMzvjzlvPqKThPjWL8j3h3WawwT3/UqTvrckeXf8d8EsRcYrBpD7fgDk/9U6/uy50hhiI7lH9NsdqrPlXrdbIXiBQn0cPVY9JndHEuQ79P49q89FzXIPeoDwnBgZt1AGSAtXye9TH9S/RuSdhC8gzEiYt4OQoJKJ9IIe5bVaOBzVHRpE4TNqm+iU4WvyGkmCP+N1gUgjTV4Ki3V9cXD2E7wyYXwc02UMRuqNEtWMFWxi7vjM/WbeHP+ARsc1hxJ1nEyuNxJ/f3EpcioNi8xlNDDOwEUW99TRjb8yHGcl7oCvIfnNgvxY5XFAvj7e3dz76La2v7JKb1xH25+R+DreZ/PovwdZ55HLkWqx6iR/BVK+FDwbtUfKJgFMqkemStgVOAum2b1LEN8NDx0EgUm8NcD6t8JnHF3+PPO3y8+Lg4N3V8brkTIQ0hue0QGwvL+vc4To7eSGw/PEv8ogQapC+T7Ez3Okv3CkA8v7ba2bLSvrIFGn8vm99RZz3auLgI+9/eGwk/Y2+XqGHUb+Sv+K+m2AkPiMNQhKVX6KqwU8Zo87rXZmF3wsh+K6ViPXP8cH7mqInGMgXcHgXkYDbpq8UJQW+x8XMu7K7ipIOf87F9LfcSL5DJyLsnItpt5uk3wAUFdbece9tl+qxPzDsKtIrdlOxvLFz8xC9Ci11tCNYh/BdMtSdGdDBvgGHBisZvHjpPetiePlTQ8livadEVruSEfjMhh7q68Qz2OWdeyXbpV48HM8crbyDeBvY/4UjXDmIhvMrAAAAAElFTkSuQmCC",m=n(2269),v=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,a.Z)(i),"state",void 0),i.state={ready:!0},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.width,o=e.height,r=e.classWrap,a=e.radius,s=e.style,c=e.fstyle,l=void 0===c?{}:c,d=e.isDynamicHeight,p=e.mode,v=e.showDefaultImg,_=void 0!==v&&v,g=e.resizeMode,y=e.headerImg,x=void 0!==y&&y,k=e.defaultImgStyle,b=e.showHeaderDefaultImg,Z=void 0===b||b,I=e.onLoad,w=void 0===I?function(){}:I,S=e.hideOnError,P=void 0!==S&&S,T=this.state.ready||!_?t:f;return(0,m.jsx)(u.G7,{className:r,style:s,children:x?Z?(0,m.jsx)(u.Zy,{url:T!==f?f:"",imageStyle:{top:"50%",left:"50%",transform:[{translateX:-n/10},{translateY:-n/5/188*103}],backgroundPosition:"center",width:n/5,height:n/5/188*206},style:(0,i.Z)({width:n,height:o,backgroundRepeat:"no-repeat",backgroundSize:"".concat(n/5).concat("number"==typeof n?"px":""," ").concat(n/5/188*206).concat("number"==typeof o?"px":"")},k||{}),children:(0,m.jsx)(u.Ee,{url:T,style:(0,h.kg)((0,i.Z)({width:n,height:o,borderRadius:a},l)),webp:!0,isDynamicHeight:d,showDefaultImg:_,onError:this.onError.bind(this),resizeMode:g})}):(0,m.jsx)(u.Ee,{url:t,style:(0,h.kg)((0,i.Z)({width:n,height:o,borderRadius:a},l)),webp:!0,isDynamicHeight:d,showDefaultImg:!1,onError:this.onError.bind(this),resizeMode:g}):(0,m.jsx)(u.Ee,{url:T,style:(0,h.kg)((0,i.Z)({width:P&&!this.state.ready?10:n,height:P&&!this.state.ready?10:o,borderRadius:a},l)),mode:p||"aspectFit",webp:!0,isDynamicHeight:d,showDefaultImg:_,onError:this.onError.bind(this),resizeMode:g,onLoad:w})})}}]),n}(p)},51614:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),c=n(81876),l=n(45023),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,c.Z)(o),"getFromTranslate",(function(){return"\u8d77"})),(0,l.Z)((0,c.Z)(o),"priceFormat",(function(e,t,n){return t})),o.state={},o}return(0,o.Z)(n)}(s.Component);(0,l.Z)(u,"defaultProps",{});var d=n(72747),p=n(298),h=n(9353),f={v_color_font:"#333333",v_color_gray:"#666666",v_color_gray_weak:"#999999",v_color_white:"#ffffff",v_color_border_gray_weak:"#eeeeee",v_color_transparent:"transparent",v_color_tag_border_warn:"#ffb278",v_color_border_default:"#E2E2E2",v_color_font_bg_GrayBlue:"#b5c7df",v_color_origin_dark:"#ff6f00",v_color_blue_dark:"#0F294D",v_color_indecator_bg:"#0086F6",v_color_holiday_red:"#F5190A",v_color_tag_blue_weak:"#06AEBD",v_color_score_bg_blue:"#4978CE",v_color_tag_color_warn:"#ff6d00",v_color_filter_text_active:"#0086F6"},m=n(17366),v=n(56569),_={u_price_wrapper:{},u_price_icon_linethrough:{height:(0,m.Nv)(18)}},g=(0,h.Z)({u_price_icon:{color:f.v_color_origin_dark,fontSize:11},u_price_icon_linethrough:{color:"#666666",fontSize:12},u_price_currency:{color:f.v_color_origin_dark,fontSize:18},u_price_currency_linethrough:{color:f.v_color_gray_weak,fontSize:12},u_price_price:(0,p.Z)({color:f.v_color_origin_dark,fontSize:18,lineHeight:(0,m.Nv)(22)},"android"==v.t4.OS?{fontFamily:"Roboto",lineHeight:(0,m.Nv)(22),fontWeight:"bold"}:{}),u_price_price_linethrough:(0,p.Z)({color:f.v_color_gray_weak,fontSize:12},"android"==v.t4.OS?{fontFamily:"Roboto"}:{})}),y=(0,h.Z)({u_price_currency_linethrough:{color:"#77879B",fontSize:13},u_price_price_linethrough:{color:"#77879B",fontSize:13}}),x=(0,h.Z)({u_price_symbol:{fontFamily:"20TH_bold",fontSize:11,fontWeight:"bold"},u_price_symbol_hj:{fontFamily:"20TH_bold",fontSize:14,fontWeight:"bold"},price_classes:(0,p.Z)((0,p.Z)({fontWeight:"bold"},"android"==v.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{fontSize:16,lineHeight:(0,m.Nv)(20),color:"#f60"}),price_classes_hj:(0,p.Z)((0,p.Z)({fontWeight:"bold"},"android"==v.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{fontSize:22,lineHeight:(0,m.Nv)(24),color:"#f60"}),u_price_free:{fontSize:13,fontWeight:"bold",color:"#f60"},price_classes_del:(0,p.Z)({color:"#999",fontSize:11},"android"==v.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),u_price_symbol_del:(0,p.Z)({color:"#999",fontSize:11,fontWeight:"normal"},"android"==v.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),u_price_start_text:(0,p.Z)({},"android"==v.t4.OS?{top:-1}:{})}),k=(0,m.Ec)(g,y),b=(0,h.Z)({u_price_start_text:{top:-1},u_price:{display:"flex",flexDirection:"row",alignItems:"baseline",justifyContent:"flex-end"},u_price_wrapper:(0,p.Z)({color:f.v_color_origin_dark},_.u_price_wrapper),u_price_symbol:(0,p.Z)({position:"relative"},null===_||void 0===_?void 0:_.u_price_icon_linethrough),u_price_linethrough:{textDecorationLine:"line-through",color:f.v_color_gray_weak},u_price_from:{marginRight:5,color:f.v_color_gray_weak},u_price_from_reverse:{marginRight:0,marginLeft:5,fontFamily:"PingFangSC-Light"},u_price_pre:{marginRight:2,marginBottom:1,fontFamily:"PingFangSC-Light",fontSize:11,color:"#666"},u_price_free:{fontFamily:"PingFangSC-Light",fontSize:11,color:"#666"},u_price_box:{display:"flex",alignItems:"baseline",flexDirection:"row"},u_price_icon_box:(0,p.Z)({display:"flex",marginLeft:2,height:12,alignItems:"center"},"android"==v.t4.OS?{marginBottom:1}:{})}),Z=(0,p.Z)({},b),I=n(2269),w=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.currency,e.value),n=e.from,i=e.reverse,o=void 0===i||i,r=e.lineThrough,a=e.fstyle,s=void 0===a?{}:a,c=e.free,l=e.preText,u=e.isShowMinus,p=e.isShowStart,h=e.prefixStyle,f=e.suffixStyle,v=e.style,_=e.isTicketHome,g=e.hasIcon,y=void 0!==g&&g,b=e.isZero,w=void 0!==b&&b,S=e.isHJCard,P=e.isShowCurrency,T=void 0===P||P,C=(0,m.Ec)(Z,s),D=(0,m.Ec)(k,s),R=r?D["u_price_icon_linethrough"]:D["u_price_icon"],j=r?D["u_price_currency_linethrough"]:D["u_price_currency"],N=r?D["u_price_price_linethrough"]:D["u_price_price"],V=[];return y&&V.push((0,I.jsx)(d.G7,{style:C["u_price_icon_box"],children:(0,I.jsx)(d.JO,{type:"help",size:S?22:20,color:S?"#666":"#999",className:"iconText"})})),n&&!c&&V.push((0,I.jsx)(d.xv,{className:"u_price_from_reverse_fix",style:(0,m.wh)([C["u_price_from"],o?C["u_price_from_reverse"]:null,f]),children:"boolean"===typeof n?this.getFromTranslate():n},0)),p&&V.push((0,I.jsx)(d.xv,{style:(0,m.wh)([C["u_price_start_text"],_&&x.u_price_start_text]),children:"\u8d77"},"startText")),V.push((0,I.jsxs)(d.aA,{style:(0,m.wh)([C["u_price_wrapper"],r?C["u_price_linethrough"]:null,c?C["u_price_free_wrapper"]:null,_&&{top:0}]),children:[!c&&u&&(0,I.jsx)(d.xv,{style:(0,m.wh)([j]),children:"- "}),!c&&!w&&T&&(0,I.jsx)(d.xv,{style:(0,m.wh)([C["u_price_symbol"],R,_?S?x.u_price_symbol_hj:x.u_price_symbol:null,_&&r&&x.u_price_symbol_del]),children:"\xa5"}),c?(0,I.jsx)(d.xv,{style:(0,m.wh)([C["u_price_free"],_&&x.u_price_free]),children:"\u514d\u8d39"}):(0,I.jsx)(d.xv,{style:(0,m.wh)([N,_&&r&&x.price_classes_del,_&&!r?S?x.price_classes_hj:x.price_classes:null,w?{fontSize:15}:{}]),children:t||0})]},2)),l&&!c&&V.push((0,I.jsx)(d.xv,{style:(0,m.wh)([C["u_price_pre"],h]),children:l},3)),o&&V.reverse(),(0,I.jsx)(d.G7,{style:(0,m.wh)([C["u_price"],v]),children:(0,I.jsx)(d.G7,{style:(0,m.wh)([C["u_price_box"]]),children:V})})}}]),n}(u)},20225:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(56034)),c=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.ZP),l=n(72747),u=n(9353),d=n(17366),p={saleout:{height:"100%"},saleout_wrap:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},saleout_text:{fontSize:(0,d.Vh)(15),color:"#666"},saleout_img:{width:180,height:180}},h=(0,u.Z)(p),f=n(2269),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(l.G7,{className:"saleout",style:h.saleout,children:(0,f.jsxs)(l.G7,{className:"saleout_wrap",style:h.saleout_wrap,children:[(0,f.jsx)(l.Ee,{url:"https://dimg04.c-ctrip.com/images/0AS6j120008r0zil35026.png_.webp",style:h.saleout_img}),(0,f.jsx)(l.xv,{className:"saleout_text",style:h.saleout_text,children:"\u5df2\u552e\u7f44"})]})})}}]),n}(c)},73627:function(e,t){"use strict";t["Z"]=function(e,t){return{request:Object.assign({},t,e),actionUrl:"/restapi/soa2/14921/json/o2ocreateorder"}}},10395:function(e,t,n){"use strict";var i=n(298),o=n(99739);t["Z"]=function(e){var t=e.orderid,n=(0,o.ZP)(),r=n.cid;return{act_tvmcoupon_pay_expo:{key:"act_tvmcoupon_pay_expo",params:{}},act_tvmcoupon_pay_click:{type:"click",params:{actiontype:"click",key:"act_tvmcoupon_pay_click"}},act_tvmcoupon_load_time:function(e){return{type:"click",params:(0,i.Z)({key:"act_tvmcoupon_load_time",temporderid:t,cid:r},e)}},act_tvmpay_load_time:function(e){return{type:"click",params:(0,i.Z)({key:"act_tvmpay_load_time",temporderid:t,cid:r},e)}}}}},61101:function(e,t,n){"use strict";var i=n(298),o=n(99739),r=n(39140),a=(0,o.ZP)(),s={default:["needBasicInfo","needSaleProperties","needUnavailableSaleDates"]};t["Z"]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.extension,c=n.tags,l=void 0===c?[]:c,u=e.needParams,d=e.type,p=void 0===d?"default":d,h=e.isFromSku,f=e.date,m=e.optid,v=(e.usePage,e.isCrossDate),_=e.boxMap,g={};(u||s[p]||[]).map((function(e){g[e]=!0}));var y=a.platform==r.NX.Mini;l.push({key:"relatedResource",value:"newLogic"}),(e.poiid||e.spotid)&&(l.push({key:"needReturnUnavailableDate",value:"true"}),l.push({key:"needPackingVersion3",value:"true"}),l.push({key:"needCalcTicketPriceCalendar",value:"true"}),l.push({key:"needReservationMark",value:"true"}));var x=[];if(v){f="";var k=_[m[0]]||[];x=k.map((function(e){return{useDate:e.date,subResourceId:e.resourceId}}))}return y||(l=l.concat([{key:"seckill",value:"newSeckill"}])),h||l.push({key:"needResourceMinPriceInfo",value:"true"}),{request:Object.assign({},(0,i.Z)((0,i.Z)({},t),{},{head:{extension:o||[]}}),{scenicSpotId:e.spotid,poiId:e.poiid,bizLineType:e.bizLineType||4,id:e.productId||"",filter:{recommendScan:e.isscan,beginDate:(h||"recommend"==p)&&f?f:"",endDate:(h||"recommend"==p)&&f?f:"",resourceIds:"recommend"==p?[m[0]]:void 0},token:e.token||"",needAggregations:!!e.aggregation&&!(!e.token&&!e.productId),tags:l,seckillId:null===e||void 0===e?void 0:e.skid},x.length?{subResourceInfos:x}:{},m&&m[0]?{mainResourceIds:[m[0]]}:{},f?{useDate:f}:{},(0,i.Z)({},g)),actionUrl:"/restapi/soa2/14580/getProductPriceCalendar"}}},48501:function(e,t,n){"use strict";n.d(t,{pL:function(){return i},zh:function(){return o},kQ:function(){return r}});var i=function(e){return e["skuPeople"]="skuPeople",e["skuResource"]="skuResource",e["skuProduct"]="skuProduct",e["resource"]="resource",e["commonSku"]="commonSku",e}({}),o=function(e){return e["book"]="book",e["sku"]="sku",e["detail"]="detail",e["dayplay"]="dayplay",e["actSku"]="actSku",e["actSkuInline"]="actSkuInline",e}({}),r={10650062146:o.sku,10650054085:o.book}},55478:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(72747),c=n(81876),l=n(45023),u=n(56034),d=n(58472),p=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,l.Z)((0,c.Z)(o),"state",void 0),(0,l.Z)((0,c.Z)(o),"selfRef",void 0),(0,l.Z)((0,c.Z)(o),"random","RN"==o.platform?"":String(Math.random()).slice(2,7)),(0,l.Z)((0,c.Z)(o),"opacity",new s.fS.Value(0)),(0,l.Z)((0,c.Z)(o),"aniHeight",new s.fS.Value(0)),(0,l.Z)((0,c.Z)(o),"noFirstAni",void 0),(0,l.Z)((0,c.Z)(o),"defaultHeight",void 0),(0,l.Z)((0,c.Z)(o),"slideDirection",void 0),(0,l.Z)((0,c.Z)(o),"isRN","RN"==o.platform),o.state={isShow:e.show,selfHeight:0,isAnimation:!1,animationEnd:!0},o.noFirstAni=!!e.noFirstAni,o.defaultHeight=e.defaultHeight||0,o.slideDirection=o.props.slideDirection||"bottom",o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.props.show&&(this.props.onOpen&&this.props.onOpen(),this.getHeight())}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.selfHeight,n=e.isShow;!t&&n&&this.getHeight()}},{key:"onOpen",value:function(){this.setState({isShow:!0}),this.state.selfHeight?this.setAnimation(!0):this.getHeight()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.delay,i=e.collectAniFun,o=void 0===i?function(){}:i,r=e.changeData;e.show!==this.props.show&&(e.show?n?o((function(){return t.onOpen()})):this.onOpen():(this.noFirstAni=!1,n?o((function(){return t.setAnimation(!1)})):this.setAnimation(!1))),r!=this.props.changeData&&this.getHeight()}},{key:"onTransitionEnd",value:function(){var e=this.state,t=e.isShow,n=e.isAnimation;t&&!n?(this.setState({isShow:!1}),this.props.onClose&&this.props.onClose()):this.props.onOpen&&this.props.onOpen(),this.setState({animationEnd:!0})}},{key:"getHeight",value:function(){var e=this,t=this.props,n=t.prefix,i=t.defaultHeight,o=t.delay,r=function(t){t&&t.height&&e.setState({selfHeight:t.height},(function(){t&&t.height&&e.props.show&&e.setAnimation(!0)}))};this.selfRef&&(i?o?r({height:i}):setTimeout((function(){return r({height:i})})):(0,d.L6)(this.selfRef,r,"RN"==this.platform,n))}},{key:"setAnimation",value:function(e){var t=this,n=setTimeout((function(){clearTimeout(n),t.setState({isAnimation:e}),t.isRN&&t.setRnAnimation(e)}),50)}},{key:"setRnAnimation",value:function(e){var t=this,n=this.state.selfHeight;this.setState({animationEnd:!1});var i=this.props.transformDuration||(0,d.pX)(n),o=this.props.opacityDuration||(0,d.pX)(n/2),r="top"==this.slideDirection?-1:1;s.fS.parallel([s.fS.timing(this.aniHeight,{toValue:e?r*n:0,duration:i,easing:s.oY.ease,useNativeDriver:!0}),s.fS.timing(this.opacity,{toValue:e?1:0,duration:o,easing:s.oY.ease,useNativeDriver:!0})]).start((function(){t.setState({animationEnd:!0}),e?t.props.onOpen&&t.props.onOpen():(t.setState({isShow:!1}),t.props.onClose&&t.props.onClose())}))}}]),n}(u.ZP),h=(n(90201),n(9353)),f=n(17366),m={wraper:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},m_wrapper:{top:(0,f.Vh)(0),left:(0,f.Vh)(-99999),width:"100%",position:"absolute",overflow:"hidden",opacity:0},m_sibling_wrapper:{},m_wrapper_ani:function(e){return(0,f.eR)("opacity ".concat(e,"s ease"))},m_wrapper_transition:function(e){return(0,f.eR)("transform ".concat(e,"s ease"))}},v=(0,h.Z)(m),_=n(2269),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.noFirstAni,n=this.defaultHeight,i=this.state,o=i.selfHeight,r=i.isAnimation,a=i.animationEnd,c=this.props,l=c.Siblings,u=c.AniComp,p=c.style,m=c.siblingStyle,g=c.aniStyle,y=c.show,x=(this.props.opacityDuration||0)/1e3||(0,d.pX)(o/2)/1e3,k=(this.props.transformDuration||0)/1e3||(0,d.pX)(o)/1e3;"function"==typeof g&&(g=g(o));var b="top"==this.slideDirection?-1:1,Z=(0,f.vs)("translate3d(0, ".concat(t&&y?b*(o||n):r?b*o:0,"px, 0)")),I={transform:[{translateY:t&&y?b*(o||n):this.aniHeight}]};return(0,_.jsxs)(s.G7,{style:(0,f.wh)([v.wraper,p]),children:[(0,_.jsx)(s.fS.View,{className:"m_animate_expand_wrapper_".concat(this.random),style:(0,h.Z)((0,f.wh)([v.m_wrapper,t?o||n?{}:{position:"relative"}:v.m_wrapper_ani(x),{opacity:t?1:this.opacity,left:r||t?0:-9999},"top"==this.slideDirection?I:{},"top"==this.slideDirection?Z:{},"top"==this.slideDirection?v.m_wrapper_transition(k):{},(0,f.Nm)([{key:"opacity",value:t||r?(0,f.Oh)(1):(0,f.Oh)(0)}]),g])),ref:function(t){e.selfRef=t},onTransitionEnd:this.onTransitionEnd.bind(this),children:u}),(0,_.jsx)(s.fS.View,{style:(0,h.Z)((0,f.wh)([v.m_sibling_wrapper,t?o||n?{}:{position:"relative"}:v.m_wrapper_transition(k),{paddingBottom:r&&a||t?o:0},"bottom"==this.slideDirection?I:{},"bottom"==this.slideDirection?Z:{},m])),children:l})]})}}]),n}(p)},49451:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(56034)),l=n(2269),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props.assistComponent;return(0,l.jsx)(l.Fragment,{children:Object.keys(e).map((function(t,n){var o=e[t].component,r=e[t].assistComponent.props,a=e[t].assistComponent.child,s=e[t].assistComponent.childProps;return(0,l.jsx)(o,(0,i.Z)((0,i.Z)({},r),{},{children:a&&(0,l.jsx)(a,(0,i.Z)({},s))}),n)}))})}}]),n}(c.ZP)},64156:function(e,t,n){"use strict";n.d(t,{R:function(){return r},n:function(){return a}});var i=n(79522),o=n(28570),r=function(e){},a=function(e){var t,n=e.buttonInfo,r=void 0===n?"":n,a=e.buyNoteShareClickLog,s=void 0===a?"":a,c=e.spotId,l=void 0===c?"":c,u=e.resourceId,d=void 0===u?"":u,p=e.bottomHeight,h=void 0===p?"":p,f=e.hideBottom,m=void 0===f?"":f,v=e.isBox,_=void 0===v?"":v,g=e.productId,y=void 0===g?"":g,x=e.seckillid,k=void 0===x?"":x,b=e.filters,Z=void 0===b?[]:b,I=e.poiId,w=e.isFromShelf,S=void 0!==w&&w,P=(e.priceInfo,e.subFilters),T=void 0===P?[]:P,C="",D=null===Z||void 0===Z||null===(t=Z[0])||void 0===t||null===(t=t.filterItems)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value;try{if(r){var R,j=r.type,N=r.text,V=r.canJump,L=r.url,E=r.toast,A=null===(R=r.clickLog)||void 0===R||null===(R=R.params)||void 0===R?void 0:R.stocktype;C={type:j,text:N,canJump:V,url:L,toast:E,clickLog:{params:{stocktype:A}}},C=encodeURIComponent(JSON.stringify(C))}s&&(s=encodeURIComponent(JSON.stringify(s)))}catch(e){}var F=T.map((function(e){return e.subResourceId})).join("|"),M=T.map((function(e){return e.date})).join("|"),O=(0,i.RF)({spotId:l,resourceId:d,bottomHeight:h,hideBottom:m,isBox:_,productId:y,seckillid:k,buttonthininfo:C,buyNoteShareClickLog:s,poiId:I,isFromShelf:S,date:D,subIds:F,subDates:M},!0),B="/pages/xtnt/business/detail/resource-detail/buy-notes/index?".concat(O);(0,o.VF)(B,!1,{isNewWebview:!0})}},45116:function(e,t,n){"use strict";n.d(t,{o:function(){return i},m:function(){return o}});var i=n(47297),o={TITLE:"key.couponcenter.receivedetailspage.title",USECODELIST_TITLE:"key.couponcenter.usecodelist.title",PROMOTIONCODE_PLACEHOLDER:"key.couponcenter.usecodelist.promocode_placeholder",USECODELIST_USE:"key.couponcenter.usecodelist.use",VALIDATY_TIMEZONE:"key.couponcenter.common.validitytimezone",AVAILABLECODES_TITLE:"key.couponcenter.usecodelist.availablecodes_title",DONOTUSECODE:"key.couponcenter.usecodelist.donotusecode",AVAILABLE_CURRENCY_AMOUNT:"key.couponcenter.usecodelist.availablecurrencyamount",UNAVAILABLE_REASON:"key.couponcenter.usecodelist.unavailablereason",USECODELIST_NOCODE:"key.couponcenter.usecodelist.nocode",POPUP_CLAIM:"key.couponcenter.popup.claimall",RECEIVESTATUS_RECEIVED:"key.couponcenter.common.receivestatus_received",POPUP_CLAIMED:"key.couponcenter.popup.claimed",POP_TOUSE:"key.couponcenter.popup.touse",TERMS_CONDITIONS:"key.couponcenter.common.termsandconditions",COMMON_DETAILS:"key.couponcenter.common.details",CURRENCYAMOUNT_TIERS:"key.couponcenter.common.currencyamount_tiers",PERCENTAGE_TIERS:"key.couponcenter.common.percentage_tiers",POPUP_OUTOFSTOCK:"key.couponcenter.popup.outofstock",NEWUSER_ONLY:"key.couponcenter.common.receivestatus_newuseronly",CURRENCYAMOUNT_OFF:"key.couponcenter.common.currencyamount_off",FAILURE_NOTICE:"key.couponcenter.popup.failurenotice",SUCCESS_NOTICE:"key.couponcenter.popup.successnotice",PROMOTIONCODE:"key.couponcenter.common.promocode",VALIDITY:"key.couponcenter.common.validity",RECEIVE:"key.couponcenter.common.receive",USECODES_PROMPT:"key.couponcenter.receivedetailspage.usablecodes_prompt",RECEIVABLECODES_TITLE:"key.couponcenter.receivedetailspage.receivablecodes_title",USEABLECODES_TITLE:"key.couponcenter.receivedetailspage.usablecodes_title",USEABLECODES_SUBTITLES:"key.couponcenter.receivedetailspage.usablecodes_subtitle",CANNOT_RECEIVE:"key.couponcenter.common.receivestatus_cannotreceive",NULL_ERROR:"key.couponcenter.popup.failurenotice.nullerror",CROSS_TITLE:"key.couponcenter.crosscouponlist.title",CROSS_BEFOREBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.beforebooking.subtitle",CROSS_AFTERBOOKING_SUBTITLE:"key.couponcenter.crosscouponlist.afterbooking.subtitle",CROSS_DETAIL:"key.couponcenter.crosscouponlist.promodetail",CROSS_VALIDPERIOD_TIITLE:"key.couponcenter.crosscouponlist.promovalidperiod.titile",CROSS_USEDETAIL:"key.couponcenter.crosscouponlist.promousedetail",CROSS_BULINE_USER_PROMO:"key.couponcenter.crosscouponlist.businesslineuserpromo",CROSS_BULINE_USER:"key.couponcenter.crosscouponlist.businesslineuser",DETAILS_REALNAME_CONFIRM:"key.couponcenter.receivedetailspage.realnameconfirm",DETAILS_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",DETAILS_REALNAME_CONFIRM_AUTH:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",DETAILS_REALNAME_CLAIM_FAIL:"key.couponcenter.receivedetailspage.claimfailure.realname",POPUP_REALNAME_CONFIRM:"key.couponcenter.receivepopup.realnameconfirm",POPUP_REALNAME_CONFIRM_GIVEUP:"key.couponcenter.receivepopup.realnameconfirm.giveup"}},47297:function(e,t,n){"use strict";n.d(t,{o7:function(){return r},mE:function(){return a},MY:function(){return s},sH:function(){return c},CE:function(){return l},NG:function(){return u},bl:function(){return d}});var i=n(45023),o=n(1089),r=1,a=1e4,s=5e3,c=(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},o.m5.TICKET,"tkt"),o.m5.THINGS_TODO,"act"),o.m5.TOUR,"grp"),o.m5.CRUISE,"cru"),l={ORDER_USE_COUPON:{id:1,name:"order_usecodelist"},RECEIVEDETAIL:{id:2,name:"detail_claimcoupon"},POPCOUPON:{id:3,name:"popup"},SHOP_COUPON:{id:4,name:"storedetailreceive"},CROSS_COUPON:{id:5,name:"crocsscouponlist"}},u={EXPOSURE:"vac_couponlist_exposure",CLICK:"vac_couponlist_click",POPUP_EXPOSURE:"vac_couponpopup_exposure",POP_CLICK:"vac_couponpopup_click",CROSS_BEFOREBOOKING_EXPOSURE:"vac_crocsscouponlist_beforebooking_exposure",CROSS_BEFOREBOOKING_CLICK:"vac_crocsscouponlist_beforebooking_click",CROSS_AFTERBOOKING_EXPOSURE:"vac_crocsscouponlist_afterbooking_exposure",CROSS_AFTERBOOKING_CLICK:"vac_crocsscouponlist_afterbooking_click",CROSS_ONLOAD:"ttd_marketing_crosscoupon_onload",CLAIMCOUPON_INVOKE_SHOW:"ttd_marketing_claimcoupon_invokeshow",CLAIMCOUPON_INVOKE_HIDE:"ttd_marketing_claimcoupon_invokehide",CLAIMCOUPON_CLOSE:"ttd_marketing_claimcoupon_close",USECOUPON_LOAD:"ttd_marketing_usecoupon_load",USECOUPON_CLOSE:"ttd_marketing_usecoupon_close",USECOUPON_INVOKE_SHOW:"ttd_marketing_usecoupon_invokeshow",USECOUPON_INVOKE_HIDE:"ttd_marketing_usecoupon_invokehide",USECOUPON_ONSELECT:"ttd_marketing_usecoupon_onselect",USECOUPN_BESTSELECT_VALIDATEFAIL:"ttd_marketing_usecoupon_bestselect_validate_fail",POPUP_LOAD:"ttd_marketing_popcoupon_load",JSERROR:"ttd_marketing_jserror",POST_EXCEPTION:"ttdmkt_post_expection",BFF_EXTENSION:"ttd_marketing_bffextensions",DHT_KEY:"o_tour_marketing_coupon",REALNAME_DETAIL_EXPO:"ctrip_realname_detailpage_expo",REALNAME_DETAIL_REFUSE_CLICK:"ctrip_realname_detailpagerefuse_click",REALNAME_DETAIL_VERIFY_CLICK:"ctrip_realname_detailpageverify_click",REALNAME_POPUPALL_EXPO:"ctrip_realname_popupall_expo",REALNAME_POPUPALL_REFUSE_CLICK:"ctrip_realname_popupallrefuse_click",REALNAME_POPUPALL_VERIFY_CLICK:"ctrip_realname_popupallverify_click",REALNAME_POPUPSOME_EXPO:"ctrip_realname_popupsome_expo",REALNAME_POPUPSOME_REFUSE_CLICK:"ctrip_realname_popupsomerefuse_click",REALNAME_POPUPSOME_VERIFY_CLICK:"ctrip_realname_popupsomeverify_click",O_TICKET_RENAME_AUTH_START:"ttd_marketing_rename_auth_start",O_TICKET_RENAME_AUTH_CALLBACK:"ttd_marketing_rename_auth_callback"},d={RECEIVE_PROMOTION:"getByRelationId",PROMOTION_TAG:"getPromotionTag",SHARK:"getShark",CLAIM:"claimCoupon",CROSS_COUPON:"getCrossCouponList",SCENE_CONFIG:"getSceneConfig",POP_COUPON:"getByScenesCode",SHOP_COUPON:"getShopCouponList",USE_COUPON:"getUseCouponList",VALIDATE:"validateCoupon",SERVER_TIME:"getServeTime"}},59001:function(e,t,n){"use strict";n.d(t,{v:function(){return v}});var i,o=n(79301),r=n(298),a=n(95308),s=n(45023),c=n(1089),l=n(45116),u=n(47297);try{var d=n(19132).ES;i=d&&"function"==typeof d.getInstance?d.getInstance():{}}catch(e){console.warn("can't resolve '../../utils/index'")}var p=(0,s.Z)((0,s.Z)({},c.Yw.CTRIP,{dev:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",fat:"gateway.m.fws.qa.nt.ctripcorp.com/restapi",uat:"gateway.m.uat.qa.nt.ctripcorp.com/restapi",prod:"m.ctrip.com/restapi"}),c.Yw.TRIP,{dev:"uk.fat1.qa.nt.tripqate.com/restapi",fat:"uk.fat1.qa.nt.tripqate.com/restapi",uat:"uk.fat1.qa.nt.tripqate.com/restapi",prod:"www.trip.com/restapi"}),h={dev:"offline.fx.fws.qa.nt.ctripcorp.com",fat:"offline.fx.fws.qa.nt.ctripcorp.com",uat:"offline.fx.uat.qa.nt.ctripcorp.com",prod:"offline.fx.ctripcorp.com"};function f(e,t,n){var o,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s=r?h[e]:p[n][e],l=null===(o=i)||void 0===o?void 0:o.inApp;"prod"!==e&&(t==c.AH.NATIVE||"function"==typeof l&&l())&&n==c.Yw.TRIP&&(s=p[c.Yw.CTRIP][e]);var u=m(t),d="".concat(u).concat(s,"/soa2/28181/json/").concat(a);return d}function m(e){return e==c.AH.NATIVE||e==c.AH.MiniProgram?"https://":"//"}function v(e){return _.apply(this,arguments)}function _(){return _=(0,a.Z)((0,o.Z)().mark((function e(t){var n,i,a,s,d,p,h,m,v,_,y,x,k,b,Z,I,w,S,P,T,C,D;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.env,i=t.client,a=t.api,s=t.variables,d=t.fetch,p=t.isOffline,h=t.logUbtDevTrace,m=t.ctType,v=void 0===m?c.Yw.CTRIP:m,_=t.apiPost,y=void 0!==_&&_,x=t.componentInfo,k=void 0===x?{}:x,b=t.traceLogId,e.prev=1,w={cid:t.cid},S={"x-ctx-Locale":s.baseInfo.locale,"x-ctx-Currency":s.baseInfo.currency},P=f(n,i,v,p,a),i!=c.AH.MiniProgram){e.next=13;break}return T={url:P,data:(0,r.Z)((0,r.Z)({},s),{},{head:(0,r.Z)((0,r.Z)({},w),{},{miniAuth:"82E962A110D92E1B58E8FB03B15FC60D4720855F333886095B968C3977D945F4"})}),method:"POST",timeout:l.o.mE},e.next=9,d(T);case 9:C=e.sent,Z=C.data||{},e.next=24;break;case 13:if(i!=c.AH.NATIVE){e.next=20;break}return I={body:(0,r.Z)((0,r.Z)({},s),{},{head:w}),headers:S},e.next=17,d(P,I);case 17:Z=e.sent,e.next=24;break;case 20:return I=(0,r.Z)((0,r.Z)({},s),{},{head:w}),e.next=23,d(P,I,{headers:S,timeout:l.o.mE});case 23:Z=e.sent;case 24:return D={response:Z,api:a,apiPost:y,componentInfo:k,traceLogId:b,ctType:v,baseInfo:null===s||void 0===s?void 0:s.baseInfo},g(h,D),e.abrupt("return",Z);case 29:e.prev=29,e.t0=e["catch"](1),console.log(e.t0.stack),h&&h({key:u.NG.POST_EXCEPTION,value:{error:e.t0,funName:"post",errStack:null===e.t0||void 0===e.t0?void 0:e.t0.stack,api:a,apiPost:y,componentInfo:k,traceLogId:b,ctType:v,baseInfo:null===s||void 0===s?void 0:s.baseInfo}});case 33:case"end":return e.stop()}}),e,null,[[1,29]])}))),_.apply(this,arguments)}function g(e,t){if(e){var n=t.response,i=t.api,o=t.apiPost,r=t.componentInfo,a=t.traceLogId,s=t.ctType,c=t.baseInfo;try{var l;e({key:u.NG.BFF_EXTENSION,value:{api:i,extensions:null===n||void 0===n||null===(l=n.ResponseStatus)||void 0===l?void 0:l.Extension,apiPost:o,componentInfo:r,traceLogId:a,ctType:s,baseInfo:c}})}catch(t){var d;e({key:u.NG.POST_EXCEPTION,value:{error:t,funName:"logTraceCatMsgId",errStack:null===t||void 0===t?void 0:t.stack,api:i,extensions:null===n||void 0===n||null===(d=n.ResponseStatus)||void 0===d?void 0:d.Extension,apiPost:o,componentInfo:r,traceLogId:a,ctType:s,baseInfo:c}})}}}},1089:function(e,t,n){"use strict";n.d(t,{Yw:function(){return d},AH:function(){return l},Lm:function(){return c},NT:function(){return a},Qo:function(){return i},De:function(){return s},vw:function(){return u},Y8:function(){return m},_1:function(){return p},Gi:function(){return h},so:function(){return r},m5:function(){return f},K1:function(){return v},GD:function(){return o}});var i=function(e){return e[e["BeforeBooking"]=0]="BeforeBooking",e[e["AfterBooking"]=1]="AfterBooking",e}({}),o=function(e){return e[e["Use"]=1]="Use",e[e["NotUse"]=2]="NotUse",e[e["NotAvailable"]=3]="NotAvailable",e}({}),r=function(e){return e[e["Default"]=1]="Default",e[e["UserSelect"]=2]="UserSelect",e[e["UserInput"]=3]="UserInput",e}({}),a=function(e){return e[e["OrderUse"]=1]="OrderUse",e[e["DetailClaim"]=2]="DetailClaim",e[e["PopClaim"]=3]="PopClaim",e[e["ShopClaim"]=4]="ShopClaim",e[e["DetailClaim_Useable"]=5]="DetailClaim_Useable",e[e["Tangram"]=6]="Tangram",e[e["CrossCoupon"]=7]="CrossCoupon",e}({}),s=function(e){return e["TIMEOUT"]="TIMEOUT",e["JSERROR"]="JSERROR",e}({}),c=function(e){return e[e["H5"]=1]="H5",e[e["PC"]=2]="PC",e[e["RN"]=3]="RN",e[e["MiniProgram"]=4]="MiniProgram",e[e["Taro"]=5]="Taro",e}({}),l=function(e){return e[e["PC"]=0]="PC",e[e["NATIVE"]=1]="NATIVE",e[e["H5"]=2]="H5",e[e["MiniProgram"]=3]="MiniProgram",e}({}),u=function(e){return e["Fat"]="fat",e["Uat"]="uat",e["Prod"]="prod",e}({}),d=function(e){return e[e["CTRIP"]=0]="CTRIP",e[e["TRIP"]=1]="TRIP",e}({}),p=function(e){return e[e["Ctrip_Online"]=2]="Ctrip_Online",e[e["Ctrip_App"]=5]="Ctrip_App",e[e["Ctrip_H5"]=7]="Ctrip_H5",e[e["Ctrip_Mina"]=21]="Ctrip_Mina",e[e["Trip_Online"]=24]="Trip_Online",e[e["Trip_App"]=25]="Trip_App",e[e["Trip_H5"]=26]="Trip_H5",e[e["Offline"]=3]="Offline",e[e["CompanyShop"]=110]="CompanyShop",e[e["BestonShop"]=111]="BestonShop",e[e["QunarShop"]=112]="QunarShop",e[e["LvJing"]=113]="LvJing",e}({}),h=function(e){return e[e["Ctrip_Online"]=114]="Ctrip_Online",e[e["Ctrip_App"]=115]="Ctrip_App",e[e["Ctrip_H5"]=116]="Ctrip_H5",e[e["Ctrip_Mina"]=117]="Ctrip_Mina",e[e["Trip_Online"]=118]="Trip_Online",e[e["Trip_App"]=119]="Trip_App",e[e["Trip_H5"]=120]="Trip_H5",e[e["Offline"]=121]="Offline",e[e["CompanyShop"]=502]="CompanyShop",e[e["BestonShop"]=503]="BestonShop",e[e["QunarShop"]=504]="QunarShop",e[e["LvJing"]=505]="LvJing",e[e["TencentTravel"]=23173]="TencentTravel",e}({}),f=function(e){return e["TICKET"]="TICKET",e["THINGS_TODO"]="THINGS_TODO",e["TOUR"]="TOUR",e["CRUISE"]="CRUISE",e["CUS"]="CUS",e["VISA"]="VISA",e}({}),m=function(e){return e["MINI_WECHAT"]="MINI_WECHAT",e["ALI_PAY"]="ALI_PAY",e["BYTE_DANCE"]="BYTE_DANCE",e["BAIDU"]="BAIDU",e["QQ"]="QQ",e}({}),v=function(e){return e["TICKET"]="TICKET",e["THINGS_TODO"]="THINGS_TODO",e["TOUR"]="TOUR",e["VISA"]="VISA",e["CRUISE"]="CRUISE",e["CUS"]="CUS",e["TANGRAM"]="TANGRAM",e["RENT_CAR"]="RENT_CAR",e["GUIDE"]="GUIDE",e["OTHER"]="OTHER",e}({})},89983:function(e,t,n){"use strict";n.d(t,{Ze:function(){return o}});n(90201),n(32180)["window"];function i(e,t){var n=Math.abs(e),i=t-(n+"").length;return(e<0?"-":"")+"0".repeat(i<0?0:i)+n}function o(){var e=(new Date).getTimezoneOffset(),t=Math.abs(e/60),n=Math.abs(e%60),o="".concat(e>0?"-":"+").concat(i(Math.floor(t),2),":").concat(i(n,2));return{desc:o,offset:e}}},662:function(e,t,n){"use strict";n.d(t,{Yw:function(){return i.Yw},AH:function(){return i.AH},vw:function(){return i.vw},Y8:function(){return i.Y8},K1:function(){return i.K1}});var i=n(1089)},19132:function(e,t,n){"use strict";n.d(t,{Ke:function(){return b},ES:function(){return h},yo:function(){return w},Y8:function(){return v},v0:function(){return Z},So:function(){return R},tv:function(){return P},HR:function(){return D},qn:function(){return T},q6:function(){return C},H9:function(){return I},jJ:function(){return g}});var i=n(79301),o=n(95308),r=n(92954),a=n.n(r),s=(n(1089),n(662)),c=(n(45116),n(57042)),l=n(24460),u=n(45023),d=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,null,[{key:"getInstance",value:function(){return null==this.singleInstance?new e:this.singleInstance}}]),e}();(0,u.Z)(d,"singleInstance",null);var p,h=d,f=n(298);try{var m=n(33675);p=m&&m.cwx}catch(e){console.log("%c ".concat(e),"color:red;")}var v,_=r.request,g=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t.data.head.auth=p&&p.user.auth||r.getStorageSync("auth")}catch(e){}if(p){e.next=5;break}return e.next=4,_(t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",new Promise((function(e,n){p&&p.request((0,f.Z)((0,f.Z)({},t),{success:function(t){e(t)},fail:function(e){n(e)}}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();try{var y=n(33675);v=y&&y.cwx,y&&y.__global}catch(e){console.log("%c ".concat(e),"color:red;")}var x=null;try{var k=n(91192);x=k.compVerison}catch(e){console.error("\u8bfb\u53d6\u7248\u672c\u53f7\u5f02\u5e38!")}var b=x;function Z(){var e="";try{e=a().getStorageSync("auth")}catch(e){}return e}function I(){var e=a().getEnv();switch(e){case r.ENV_TYPE.WEAPP:return s.Y8.MINI_WECHAT;case r.ENV_TYPE.SWAN:return s.Y8.BAIDU;case r.ENV_TYPE.TT:return s.Y8.BYTE_DANCE;case r.ENV_TYPE.ALIPAY:return s.Y8.ALI_PAY;case r.ENV_TYPE.QQ:return s.Y8.QQ;default:return s.Y8.MINI_WECHAT}}function w(e,t){if(e.length<=0||t<=0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}function S(e){var t=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==t}function P(e){if(e)if(S(e)){var t={url:encodeURIComponent(e),needLogin:!1,doRefreshWhileBack:!1,hideShareMenu:!1,isNavigate:!0,loginErrorUrl:e};v&&v.navigateTo({url:"/cwx/component/cwebview/cwebview?data="+JSON.stringify(t)})}else v&&v.navigateTo({url:e})}function T(e){try{v&&v.sendUbtByPage.ubtTrace(e.key,e.value)}catch(e){}}function C(e){try{v&&v.sendUbtByPage.ubtDevTrace(e.key,e.value)}catch(e){}}function D(e){try{v&&v.sendUbtByPage.ubtMetric(e)}catch(e){}}function R(){return j.apply(this,arguments)}function j(){return j=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a().getSystemInfo());case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},96069:function(e,t,n){var i,o,r=n(66371)["default"];!function(a,s){"object"==r(t)?e.exports=s():(i=s,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))}(0,(function(){"use strict";var e=1e3,t=6e4,n=36e5,i="millisecond",o="second",a="minute",s="hour",c="day",l="week",u="month",d="quarter",p="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+g(i,2,"0")+":"+g(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(i,u),r=n-o<0,a=t.clone().add(i+(r?-1:1),u);return+(-(i+(n-o)/(r?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:p,w:l,d:c,D:h,h:s,m:a,s:o,ms:i,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},x="en",k={};k[x]=_;var b="$isDayjsObject",Z=function(e){return e instanceof P||!(!e||!e[b])},I=function e(t,n,i){var o;if(!t)return x;if("string"==typeof t){var r=t.toLowerCase();k[r]&&(o=r),n&&(k[r]=n,o=r);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var s=t.name;k[s]=t,o=s}return!i&&o&&(x=o),o||!i&&x},w=function(e,t){if(Z(e))return e.clone();var n="object"==r(t)?t:{};return n.date=e,n.args=arguments,new P(n)},S=y;S.l=I,S.i=Z,S.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function r(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var _=r.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(m);if(i){var o=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(t)}(e),this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return S},_.isValid=function(){return!(this.$d.toString()===f)},_.isSame=function(e,t){var n=w(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return w(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<w(e)},_.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,i=!!S.u(t)||t,r=S.p(e),d=function(e,t){var o=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?o:o.endOf(c)},f=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,v=this.$M,_=this.$D,g="set"+(this.$u?"UTC":"");switch(r){case p:return i?d(1,0):d(31,11);case u:return i?d(1,v):d(0,v+1);case l:var y=this.$locale().weekStart||0,x=(m<y?m+7:m)-y;return d(i?_-x:_+(6-x),v);case c:case h:return f(g+"Hours",0);case s:return f(g+"Minutes",1);case a:return f(g+"Seconds",2);case o:return f(g+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,r=S.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[c]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[p]=l+"FullYear",n[s]=l+"Hours",n[a]=l+"Minutes",n[o]=l+"Seconds",n[i]=l+"Milliseconds",n)[r],f=r===c?this.$D+(t-this.$W):t;if(r===u||r===p){var m=this.clone().set(h,1);m.$d[d](f),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[S.p(e)]()},_.add=function(i,r){var d,h=this;i=Number(i);var f=S.p(r),m=function(e){var t=w(h);return S.w(t.date(t.date()+Math.round(e*i)),h)};if(f===u)return this.set(u,this.$M+i);if(f===p)return this.set(p,this.$y+i);if(f===c)return m(1);if(f===l)return m(7);var v=(d={},d[a]=t,d[s]=n,d[o]=e,d)[f]||1,_=this.$d.getTime()+i*v;return S.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),r=this.$H,a=this.$m,s=this.$M,c=n.weekdays,l=n.months,u=n.meridiem,d=function(e,n,o,r){return e&&(e[n]||e(t,i))||o[n].slice(0,r)},p=function(e){return S.s(r%12||12,e,"0")},h=u||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(v,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return s+1;case"MM":return S.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,l,3);case"MMMM":return d(l,s);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,c,2);case"ddd":return d(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(r);case"HH":return S.s(r,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(r,a,!0);case"A":return h(r,a,!1);case"m":return String(a);case"mm":return S.s(a,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(i,r,h){var f,m=this,v=S.p(r),_=w(i),g=(_.utcOffset()-this.utcOffset())*t,y=this-_,x=function(){return S.m(m,_)};switch(v){case p:f=x()/12;break;case u:f=x();break;case d:f=x()/3;break;case l:f=(y-g)/6048e5;break;case c:f=(y-g)/864e5;break;case s:f=y/n;break;case a:f=y/t;break;case o:f=y/e;break;default:f=y}return h?f:S.a(f)},_.daysInMonth=function(){return this.endOf(u).$D},_.$locale=function(){return k[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=I(e,t,!0);return i&&(n.$L=i),n},_.clone=function(){return S.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},r}(),T=P.prototype;return w.prototype=T,[["$ms",i],["$s",o],["$m",a],["$H",s],["$W",c],["$M",u],["$y",p],["$D",h]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,P,w),e.$i=!0),w},w.locale=I,w.isDayjs=Z,w.unix=function(e){return w(1e3*e)},w.en=k[x],w.Ls=k,w.p={},w}))},49527:function(e,t,n){var i,o,r=n(66371)["default"];!function(a,s){"object"==r(t)?e.exports=s():(i=s,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))}(0,(function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(n,i,o){var r,a=function(e,n,i){void 0===i&&(i={});var o=new Date(e),r=function(e,n){void 0===n&&(n={});var i=n.timeZoneName||"short",o=e+"|"+i,r=t[o];return r||(r=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),t[o]=r),r}(n,i);return r.formatToParts(o)},s=function(t,n){for(var i=a(t,n),r=[],s=0;s<i.length;s+=1){var c=i[s],l=c.type,u=c.value,d=e[l];d>=0&&(r[d]=parseInt(u,10))}var p=r[3],h=24===p?0:p,f=r[0]+"-"+r[1]+"-"+r[2]+" "+h+":"+r[4]+":"+r[5]+":000",m=+t;return(o.utc(f).valueOf()-(m-=m%1e3))/6e4},c=i.prototype;c.tz=function(e,t){void 0===e&&(e=r);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString("en-US",{timeZone:e}),s=Math.round((i-new Date(a))/1e3/60),c=o(a,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-s,!0);if(t){var l=c.utcOffset();c=c.add(n-l,"minute")}return c.$x.$timezone=e,c},c.offsetName=function(e){var t=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return n&&n.value};var l=c.startOf;c.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return l.call(this,e,t);var n=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return l.call(n,e,t).tz(this.$x.$timezone,!0)},o.tz=function(e,t,n){var i=n&&t,a=n||t||r,c=s(+o(),a);if("string"!=typeof e)return o(e).tz(a);var l=function(e,t,n){var i=e-60*t*1e3,o=s(i,n);if(t===o)return[i,t];var r=s(i-=60*(o-t)*1e3,n);return o===r?[i,o]:[e-60*Math.min(o,r)*1e3,Math.max(o,r)]}(o.utc(e,i).valueOf(),c,a),u=l[0],d=l[1],p=o(u).utcOffset(d);return p.$x.$timezone=a,p},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(e){r=e}}}))},30492:function(e,t,n){"use strict";n(90201);var i=n(2269);t["Z"]=function(e){return(0,i.jsx)(i.Fragment,{})}},58013:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(59201),l=n(81876),u=n(45023),d=n(56034),p=n(56569),h=n(2446),f=n(35409),m=n(57113),v=n(17366),_=n(39140),g=function(e){(0,r.Z)(s,e);var t=(0,a.Z)(s);function s(e){var n;return(0,i.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"state",void 0),(0,u.Z)((0,l.Z)(n),"toCamping",(function(){n.push(n.props.poiUrl)})),n.state={isIPhoneX:!n.props.ignoreIphoneX&&(0,p.cY)(),isOpen:!1},n}return(0,o.Z)(s,[{key:"componentDidMount",value:function(){var e=this;if(m.Z.add("paymentPopLayer",f.Z,{props:{isOpened:!1}}),(0,p.yF)()&&!(0,p.rI)()){var t=this.state.isIPhoneX;this.setState({isIPhoneX:!t},(function(){return e.setState({isIPhoneX:t})}))}}},{key:"triggleOpen",value:function(){var e=this,t=this.props,i=t.footPop,o=void 0===i?{}:i,r=t.notHigh,a=o.title,s=o.content,c=o.totleContent,l=o.bottom,u=o.priceTipList,d=void 0===u?"":u,f=o.minHeightRatio,m=o.overdraftTips,g=n(5046).Z,y=[_.NX.RN,_.NX.Mini].includes(this.platform),x=(0,v.Vh)(!this.state.isIPhoneX||r&&!y?61:86),k=p.Db.get("window").height,b=.8*k-x-p.iO,Z=f?k*f-x-p.iO:void 0;(0,h.sg)("paymentPopLayer")||this.setState({isOpen:!0}),h.ZP.show({props:{name:"paymentPopLayer",title:a,maxHeight:b,contentMaxHeight:b-44,bottomHeight:x,zIndex:1200,style:{height:k},onClosed:function(){e.setState({isOpen:!1})},headerStyles:{m_poplayer_title:{color:"#111"},closeColor:"#555",closeIcon:"xclosed"},minHeight:Z},child:g,childProps:{content:s,totleContent:c,bottom:l,priceTipList:d,overdraftTips:m}})}},{key:"goVendorShop",value:function(e){this.push(e)}},{key:"booking",value:function(){this.props.booking(),(0,h.sg)("paymentPopLayer")&&h.ZP.hide("paymentPopLayer")}}]),s}(d.ZP),y=n(71557),x=n(298),k=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(d.ZP),b=n(9353),Z={m_part_loading:{display:"flex",flexDirection:"row",width:(0,v.Vh)(13),height:(0,v.Vh)(13),marginRight:(0,v.Vh)(8)},m_image_background:{width:"100%",height:"100%",backgroundSize:"100% 100%"}},I=(0,b.Z)(Z),w=n(2269),S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e="https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png_.webp";return(0,w.jsx)(s.G7,{className:"m_part_loading",style:I.m_part_loading,children:(0,w.jsx)(s.G7,{style:(0,x.Z)({backgroundImage:"url(".concat(e,")")},I.m_image_background)})})}}]),n}(k),P=n(98384),T={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},linearGradientColor:["rgba(255, 165, 10, 1)","rgba(255, 119, 0,1)"]},C={linearGradientColor:["rgba(221,221,221, 1)","rgba(221,221,221, 1)"]},D=90,R={m_footer:{width:"100%",height:(0,v.Vh)(64),zIndex:202,backgroundColor:"#ffffff",display:"flex",flexDirection:"row",flexShrink:(0,v.i4)(0),bottom:(0,v.Vh)(0),left:(0,v.Vh)(0),alignItems:"center",justifyContent:"space-between"},m_footer_shadow:(0,x.Z)((0,x.Z)({},(0,v.Wn)({hShadow:-16,vShadow:-16,blur:16,spread:2,color:"rgba(0, 0, 0, 0.05)",rnColor:"rgba(0,0,0)",opacity:.05})),{},{elevation:16}),m_footer_long:(0,x.Z)({height:(0,v.Vh)(88)},(0,v.ix)("border-box")),m_footer_left:{display:"flex",flexDirection:"column",justifyContent:"flex-start",paddingTop:(0,v.Vh)(4),paddingRight:(0,v.Vh)(4),paddingBottom:(0,v.Vh)(4),paddingLeft:(0,v.Vh)(16),flexGrow:(0,v.H7)(0),flexShrink:(0,v.i4)(1)},m_footer_left_box:{display:"flex",flexDirection:"row"},m_footer_left_total:{display:"flex",flexDirection:"row",alignItems:"flex-end"},m_footer_left_title:{color:"#333",fontSize:(0,v.Vh)(14),fontWeight:"bold",lineHeight:(0,v.Nv)((0,v.Vh)(22)),marginRight:(0,v.Vh)(4)},m_footer_left_price:{display:"flex",flexDirection:"row",fontFamily:"20TH_bold",alignItems:"center"},m_footer_currency:(0,x.Z)({fontSize:(0,v.Vh)(15),color:"#FF5500",lineHeight:(0,v.Nv)((0,v.Vh)(24)),marginRight:(0,v.Vh)(2)},"android"==p.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_footer_left_price_text:(0,x.Z)({fontWeight:"500",color:"#FF5500",fontSize:(0,v.Vh)(22),lineHeight:(0,v.Nv)((0,v.Vh)(27))},"android"==p.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_footer_price_from:{fontSize:(0,v.Vh)(12),color:"#666",fontWeight:"300",marginLeft:(0,v.Vh)(2),lineHeight:(0,v.Nv)((0,v.Vh)(24))},m_footer_left_desc:{color:"#f70",fontSize:(0,v.Vh)(13),lineHeight:(0,v.Nv)((0,v.Vh)(17)),marginTop:(0,v.Vh)(2)},m_footer_right:(0,x.Z)((0,x.Z)({},v._),{},{justifyContent:"space-between"},P.Mv.m_footer_right),m_footer_left_detail:(0,x.Z)((0,x.Z)({height:(0,v.Vh)(24),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},P.Mv.m_footer_left_detail),{},{width:(0,v.Vh)(42)}),detail_text:{color:"#111",fontSize:(0,v.Vh)(13)},detail_icon:{display:"flex",marginLeft:(0,v.Vh)(2)},m_footer_btn:{width:(0,v.Vh)(90),height:(0,v.Vh)(44),borderRadius:(0,v.Vh)(6),textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginRight:(0,v.Vh)(16)},onlyBtnStyle:{marginLeft:"auto",marginRight:"auto",width:"90%"},m_footer_btn_gray:{backgroundColor:"#ddd",color:"#999"},mFooterBtnText:{fontSize:(0,v.Vh)(17),color:"#fff",fontWeight:"bold"},mFooterBtnGray:{color:"#999"},mFooterBtnTextGray:{color:"#999"},mFooterPriceFrom:{fontSize:(0,v.Vh)(12),color:"#666",fontWeight:"300",marginLeft:(0,v.Vh)(3)},mFooterPosition:{width:"100%",height:(0,v.Vh)(64),backgroundColor:"transparent"},mFooterLong:{height:(0,v.Vh)(88)},m_icons:{flexDirection:"row",display:"flex"},m_vendor:{width:(0,v.Vh)(54),alignItems:"center",marginTop:8},m_vendor_h5:{display:"flex",flexDirection:"column"},m_vendor_text:{marginTop:(0,v.Vh)(7),color:"#111",fontSize:(0,v.Vh)(12)},m_next_desc:{fontSize:(0,v.Vh)(10),color:"#fff"},m_footer_tip_view:{display:"flex",flexDirection:"row",backgroundColor:"#fff8f2",alignItems:"center",justifyContent:"flex-start",height:(0,v.Vh)(34),paddingTop:(0,v.Vh)(0),paddingRight:(0,v.Vh)(8),paddingBottom:(0,v.Vh)(0),paddingLeft:(0,v.Vh)(8)},m_footer_tip_view_icon:{marginLeft:(0,v.Vh)(6),fontWeight:"400"},m_footer_tip_view_item:{paddingTop:(0,v.Vh)(8),paddingRight:(0,v.Vh)(0),paddingBottom:(0,v.Vh)(8),paddingLeft:(0,v.Vh)(5)},m_footer_tip_view_text:{fontSize:(0,v.Vh)(12),color:"#f70"},m_footer_btn_box:{display:"flex",justifyContent:"center",alignItems:"center"},m_footer_btn_title_box:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},m_footer_btn_price_box:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_footer_btn_price:{color:"#fff",fontWeight:"bold",fontSize:(0,v.Vh)(12)},m_footer_btn_discount:{color:"#fff",fontSize:(0,v.Vh)(12),fontWeight:"bold"},m_footer_price_linethrough:{textDecorationLine:"line-through",fontSize:(0,v.Vh)(13),color:"#555",lineHeight:(0,v.Nv)((0,v.Vh)(17))},m_footer_total_wraper:(0,x.Z)((0,x.Z)({},v.xI),{},{alignItems:"flex-end",marginRight:(0,v.Vh)(3)}),arrow:{display:"flex",marginLeft:(0,v.Vh)(3)},m_footer_left_deduct_esc_container:{backgroundColor:"#FFF4EB",display:"flex",borderRadius:(0,v.Vh)(2)},m_footer_left_deduct_esc:(0,x.Z)((0,x.Z)({},(0,v.o3)((0,v.Vh)(1),(0,v.Vh)(3))),{},{lineHeight:(0,v.Nv)((0,v.Vh)(17)),color:"#FF5500",fontSize:(0,v.Vh)(13)}),m_footer_btn_wrap:{marginLeft:(0,v.Vh)(6)},m_vendor_icon:{width:(0,v.Vh)(24),height:(0,v.Vh)(24)},m_otherDescList:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_otherDescList_desc:{color:"#888888",fontSize:(0,v.Vh)(13),lineHeight:(0,v.Nv)((0,v.Vh)(17)),marginTop:(0,v.Vh)(2)},m_otherDescList_gap:{marginLeft:(0,v.Vh)(6),marginRight:(0,v.Vh)(6),marginTop:(0,v.Vh)(2),backgroundColor:"#D5D5D5",width:(0,v.Vh)(.5),height:(0,v.Vh)(10)}},j=(0,b.Z)(R),N=n(99739),V=n(50738),L="H5"===(0,N.ZP)().platform,E=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"shopIconRender",value:function(e,t,n){var i=e.vendorShopInfo,o=(e.isCtripSale,e.vendorLog),r=n||{},a=r.customName,l=r.icon;return i&&i.url&&!i.isCtripSale?(0,w.jsx)(c.Z,{onClick:this.goVendorShop.bind(this,i.url),log:o,children:(0,w.jsxs)(s.G7,{style:t.m_vendor,children:[l?(0,w.jsx)(s.Ee,{url:l,style:L?{width:26,height:26}:{width:24,height:24}}):(0,w.jsx)(y.Z,{type:"shop",color:"#333",size:t.m_vendor_icon&&t.m_vendor_icon.size||48}),(0,w.jsx)(s.xv,{style:t.m_vendor_text,children:a||"\u5e97\u94fa"})]})}):null}},{key:"renderOther",value:function(e,t){var n,i,o=e||{},r=o.customName,a=o.icon,l=this.props.campIconPoiId,u=this.props.footerCampingIconLog;return l&&u&&(n=null===u||void 0===u?void 0:u.expo({poiid:l}),i=null===u||void 0===u?void 0:u.click({poiid:l})),(0,w.jsx)(c.Z,{onClick:this.toCamping,testID:n,log:i,children:(0,w.jsxs)(s.G7,{style:t.m_vendor,children:[(0,w.jsx)(s.Ee,{url:a,style:L?{width:26,height:26}:{width:24,height:24}}),(0,w.jsx)(s.xv,{style:t.m_vendor_text,children:r||"\u9732\u8425\u5730"})]})})}},{key:"footerIconRender",value:function(e,t){var n=this,i=e.footerConfig,o=e.orderList,r=void 0===o?["im","vendor","fav"]:o,a=e.renderIM,c=e.renderFav,l=e.renderOther;return i&&i.length?(0,w.jsx)(s.G7,{style:t.m_icons,children:null===i||void 0===i?void 0:i.map((function(i){if(!i.selected)return null;switch(i.category){case"service":return a?a("custom",void 0,i):null;case"shop":return n.shopIconRender(e,t,i);case"favorite":return c?c(i):null;case"poi":return n.renderOther(i,t)}}))}):r.length>0?(0,w.jsx)(s.G7,{style:t.m_icons,children:null===r||void 0===r?void 0:r.map((function(i){switch(i){case"im":return a?a(i):null;case"vendor":return n.shopIconRender(e,t);case"fav":return c?c(i):null;case"poi":return l?l(i):null}}))}):null}},{key:"render",value:function(){var e=this.state,t=e.isIPhoneX,n=e.isOpen,i=this.props,o=i.total,r=i.otherDesc,a=i.deductDesc,l=i.nextTitle,u=i.footPop,d=void 0===u?{}:u,p=i.currency,h=i.isGrayBtn,f=i.subPriceDes,m=i.btnClickLog,_=i.detailClickLog,g=i.btnExposureLog,x=i.detailExposureLog,k=i.showPriceAres,b=void 0===k||k,Z=i.vendorShopInfo,I=void 0===Z?{}:Z,P=i.otherDescColor,R=i.notHigh,N=(i.clearTextbtn,i.onlyBtn),L=i.nextDesc,E=i.fstyle,F=void 0===E?{}:E,M=i.linearGradientStyles,O=void 0===M?{}:M,B=i.tipText,z=i.hideTipIcon,H=i.renderTips,U=(i.vendorLog,i.renderIM,i.renderLeftButton),G=(i.renderFav,i.imStyle),q=i.comingStyle,W=void 0===q?{}:q,K=i.price,Y=i.discount,X=i.marketPrice,Q=i.hideShadow,J=i.ConfigPriceComp,$=i.ConfigTipComp,ee=i.btnTraceData,te=i.className,ne=void 0===te?"":te,ie=i.renderGuideFooter,oe=i.renderGuidePackageTab,re=i.showPriceByBtn,ae=i.detailTraceLog,se=i.onLayout,ce=i.renderPayBtn,le=i.moduleExpoLog,ue=i.otherDescList,de=(I.isCtripSale,(0,v.Ec)(j,F));return(0,w.jsxs)(s.G7,{style:de.m_wrapper,className:"ottd-footer ".concat(ne),children:[oe?oe():null,H?H():B?(0,w.jsxs)(s.G7,{style:de.m_footer_tip_view,children:[!z&&(0,w.jsx)(y.Z,{type:"info",size:26,color:"#f70",style:de.m_footer_tip_view_icon}),(0,w.jsx)(s.G7,{style:de.m_footer_tip_view_item,children:(0,w.jsx)(s.xv,{style:de.m_footer_tip_view_text,children:B})})]}):$?(0,w.jsx)($,{}):null,ie?(0,w.jsx)(s.G7,{className:"m_footer_shadow_fix",style:(0,v.wh)([de.m_footer,t&&!R?de.m_footer_long:null,Q?null:de.m_footer_shadow]),catchMove:!0,disableScroll:!0,onLayout:se,children:ie?ie():null}):(0,w.jsxs)(s.G7,{style:(0,v.wh)([de.m_footer,t&&!R?de.m_footer_long:null,Q?null:de.m_footer_shadow]),catchMove:!0,disableScroll:!0,className:"m-footer-shadow",testID:(null===le||void 0===le?void 0:le.key)&&(0,V.kI)(le.key,le.params)||"",children:[!!J&&(0,w.jsx)(J,{}),J||!b&&!r?null:(0,w.jsxs)(s.G7,{style:de.m_footer_left,children:[b?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.G7,{style:de.m_footer_left_box,children:(0,w.jsx)(s.G7,{style:de.m_footer_left_total,children:o?(0,w.jsxs)(s.G7,{style:de.m_footer_left_price,children:[(0,w.jsxs)(s.G7,{style:de.m_footer_total_wraper,children:[p?(0,w.jsx)(s.xv,{style:de.m_footer_currency,children:p}):null,(0,w.jsx)(s.xv,{style:de.m_footer_left_price_text,children:o}),f?(0,w.jsx)(s.xv,{style:de.m_footer_price_from,children:f}):null]}),!!a&&(0,w.jsx)(s.G7,{style:de.m_footer_left_deduct_esc_container,children:(0,w.jsx)(s.xv,{style:de.m_footer_left_deduct_esc,children:a})})]}):(0,w.jsx)(S,{})})})}):null,r?(0,w.jsx)(s.xv,{style:Object.assign({},de.m_footer_left_desc,P?{color:P}:null),children:r}):X?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.xv,{style:(0,v.wh)([de.m_footer_price_linethrough]),children:[p,X]})}):ue&&ue.length?(0,w.jsx)(A,{otherDescList:ue}):null]}),(0,w.jsxs)(s.G7,{style:(0,v.wh)([{display:"flex",flexDirection:"row",flex:1,justifyContent:"space-between",alignItems:"center"},,G]),children:[!J&&!!d.content&&(0,w.jsxs)(c.Z,{style:de.m_footer_left_detail,onClick:this.triggleOpen.bind(this),log:_,testID:"footer_detail",devTraceData:ae,children:[(0,w.jsx)(s.G7,{testID:x,children:(0,w.jsx)(s.xv,{style:de.detail_text,children:"\u660e\u7ec6"})}),(0,w.jsx)(s.G7,{style:(0,v.wh)([de.arrow]),children:(0,w.jsx)(y.Z,{type:n?"arrowdown":"arrowup",size:20,color:"#111",className:"detail_icon"})})]}),this.footerIconRender(this.props,de),U?U():null,ce?ce():(0,w.jsx)(c.Z,{onClick:this.booking.bind(this),log:!h&&m,style:(0,v.wh)([N?{width:"100%"}:de.m_footer_btn_wrap]),activeOpacity:h?1:.8,testID:"footer_btn",onPressIn:function(){s.N1.dismiss()},devTraceData:ee,children:(0,w.jsx)(s.o,{start:O.start||T.linearGradientStart,end:O.end||T.linearGradientEnd,direction:D,colors:O.colors||(h?C.linearGradientColor:T.linearGradientColor),style:(0,v.wh)([de.m_footer_btn,N?de.onlyBtnStyle:null]),"hover-class":"none",plain:!0,children:(0,w.jsxs)(s.G7,{style:de.m_footer_btn_box,children:[(0,w.jsxs)(s.G7,{style:(0,v.wh)([de.m_footer_btn_title_box,W.m_footer_btn_title_box]),children:[(0,w.jsx)(s.xv,{testID:g,style:(0,v.wh)([de.mFooterBtnText,W.mFooterBtnText,h?de.mFooterBtnTextGray:null]),children:l}),!!L&&(0,w.jsx)(s.xv,{style:de.m_next_desc,children:L})]}),void 0!==K&&"0"!==re?(0,w.jsxs)(s.G7,{style:de.m_footer_btn_price_box,children:[(0,w.jsx)(s.xv,{style:de.m_footer_btn_price,children:"\xa5".concat(K)}),Y?(0,w.jsx)(s.xv,{style:de.m_footer_btn_discount,children:"(\u5df2\u51cf\xa5".concat(Y,")")}):null]}):null]})})})]})]})]})}}]),n}(g),A=function(e){var t=e.otherDescList,n=t.length-1,i=(0,v.Ec)(j);return(0,w.jsx)(s.G7,{style:i.m_otherDescList,children:t.map((function(e,t){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.xv,{style:i.m_otherDescList_desc,children:e}),t!=n?(0,w.jsx)(s.G7,{style:i.m_otherDescList_gap}):null]})}))})}},82901:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(298),o=n(90201),r=n(72747),a=n(17366),s=n(90129),c=n(58472),l=n(99739),u=n(39140),d=(0,l.ZP)(),p=function(e){var t=(0,o.useState)(!1),n=(0,s.Z)(t,2),i=n[0],a=n[1],l=(0,o.useRef)(!1),p=d.platform!=u.NX.RN?0:(0,o.useRef)(new r.fS.Value(0)).current,h=d.platform!=u.NX.RN?0:(0,o.useRef)(new r.fS.Value(0)).current,f=(0,o.useRef)(null);return(0,o.useEffect)((function(){(0,c.L6)(f.current,(function(t){if(t&&t.height){var n=t.height;if(!l.current){var i=e.duration,o=e.delay;a(!0),l.current=!0,setTimeout((function(){r.fS.timing(h,{toValue:1,duration:i||200,dom:f.current,H5Animation:{opacity:1}}).start(),r.fS.timing(p,{toValue:n,duration:i||200,easing:r.oY.linear,dom:f.current,H5Animation:{height:n+"px"}}).start()}),"number"==typeof o?o:100)}}}),!1)})),{heightAnim:p,opacity:h,isServiceTagLayout:i,wrapRef:f}},h=p,f=n(2269),m=function(e){var t=e.children,n=e.duration,o=h(e),s=o.heightAnim,c=o.opacity,l=o.isServiceTagLayout,u=o.wrapRef;return(0,f.jsx)(r.fS.View,{style:(0,a.wh)([{position:l?"static":"absolute",opacity:c,height:l?s:"auto"},l?(0,i.Z)({},(0,a.eR)("all ".concat(n?n/1e3:"0.2","s linear"))):{}]),ref:u,children:t})},v=m},38194:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(59201),l=n(81876),u=n(45023),d=n(56034),p=n(54307),h=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,u.Z)((0,l.Z)(o),"imPoplayer",void 0),(0,u.Z)((0,l.Z)(o),"bridge",void 0),o}return(0,o.Z)(n,[{key:"goIM",value:function(e){this.push(e)}},{key:"mackCall",value:function(e,t){if(!t&&this.bridge){var n=this.props.clickPhoneCallBack;n&&n(),this.bridge.callNative("Call","makeCall",{phoneNumber:e})}}},{key:"copyPhoneNum",value:function(e){p.Z.setString(e),this.toast.show("\u590d\u5236\u6210\u529f")}}]),n}(d.ZP),f={callNative:function(e,t,n){}},m=n(298),v=n(56569),_=n(9353),g=n(17366),y=n(98384),x={v_color_white:"rgba(255,255,255,0.99)",v_color_bg:"rgba(243,243,243,0.99)",v_color_border_graylight:"#ECECEC",v_color_font_weight:"#222222",v_color_gray:"#666666",v_color_gray_weakerb:"#bbbbbb",v_color_gray_weak:"#999999",v_color_font:"#333333",v_color_tag_blue_weak:"#06AEBD",v_color_indecator_bg:"#0086F6",v_color_recommend:"rgba(237,126,46,1)"},k=(0,_.Z)({m_im_wrapper:{position:"relative",width:v.Db.get("window").width},m_im_header:{height:(0,g.Vh)(44),flexDirection:"row",position:"absolute",width:"100%",top:(0,g.Vh)(0),left:(0,g.Vh)(0),backgroundColor:x.v_color_white,borderTopLeftRadius:(0,g.Vh)(8),borderTopRightRadius:(0,g.Vh)(8)},m_im_header_left:{width:(0,g.Vh)(44),height:(0,g.Vh)(44)},m_im_header_right:{width:(0,g.Vh)(44),height:(0,g.Vh)(44),justifyContent:"center",alignItems:"center"},m_im_header_center:{flex:1},m_im_header_title:{textAlign:"center",fontSize:(0,g.Vh)(17),lineHeight:(0,g.Vh)(44),height:(0,g.Vh)(44),fontWeight:"500"},m_im_body_wrapper:{paddingBottom:(0,g.Vh)(50),backgroundColor:x.v_color_bg},m_im_onlineservice:{marginBottom:(0,g.Vh)(10),paddingBottom:(0,g.Vh)(30),backgroundColor:x.v_color_white,padding:(0,g.Vh)(20),position:"relative"},m_im_onlineservice_title:{display:"flex",flexDirection:"row",alignItems:"center"},m_im_onlineservice_title_text:{fontSize:(0,g.Vh)(16),color:x.v_color_font_weight,fontWeight:"bold"},m_im_onlineservice_title_icon:{fontSize:(0,g.Vh)(10),lineHeight:(0,g.Nv)((0,g.Vh)(13)),color:x.v_color_white,backgroundColor:"#FF7700",marginLeft:(0,g.Vh)(10),paddingLeft:(0,g.Vh)(4),paddingRight:(0,g.Vh)(4),paddingTop:(0,g.Vh)(1),paddingBottom:(0,g.Vh)(1)},m_im_onlineservice_content:{flexDirection:"row",alignItems:"center"},m_im_onlineservice_left:(0,m.Z)({flex:1},y.im.m_im_onlineservice_left),m_im_onlineservice_left_text:{textAlign:"left",fontSize:(0,g.Vh)(12),color:x.v_color_gray_weakerb,marginTop:15,width:v.Db.get("window").width-75},m_im_onlineservice_right:{position:"absolute",width:(0,g.Vh)(24),height:(0,g.Vh)(24),bottom:"50%",marginBottom:0,right:0},m_im_telConsult:{marginBottom:(0,g.Vh)(18),paddingLeft:(0,g.Vh)(20),paddingRight:(0,g.Vh)(20),paddingTop:(0,g.Vh)(0),backgroundColor:x.v_color_white},m_im_telConsult_header:{paddingTop:(0,g.Vh)(16),borderBottomColor:x.v_color_border_graylight},m_im_telConsult_title:{fontSize:(0,g.Vh)(16),color:x.v_color_font_weight,marginBottom:(0,g.Vh)(18),fontWeight:"bold"},m_im_telConsult_servicetimer:{fontSize:(0,g.Vh)(12),color:x.v_color_gray,marginBottom:(0,g.Vh)(8)},m_im_telConsult_note:{display:"flex",fontSize:(0,g.Vh)(12),color:x.v_color_gray_weakerb,marginTop:(0,g.Vh)(10)},m_im_telConsult_proid:{color:"#222222"},m_im_telConsult_body:(0,m.Z)({},y.im.m_im_telConsult_body),m_im_telConsult_item:(0,m.Z)({flexDirection:"row",marginBottom:(0,g.Vh)(12),borderBottomColor:x.v_color_border_graylight},y.im.m_im_telConsult_item),m_im_telConsult_item_left:{flex:1},m_im_telConsult_item_copy:{color:x.v_color_indecator_bg},m_im_telConsult_item_right:{width:(0,g.Vh)(20),marginTop:(0,g.Vh)(20),justifyContent:"center",alignItems:"center"},m_im_telConsult_item_title:{display:"flex",fontSize:(0,g.Vh)(14),color:"#333333",marginBottom:(0,g.Vh)(8),fontWeight:"500"},m_im_telConsult_item_phonecode:{fontSize:(0,g.Vh)(12),color:x.v_color_gray_weakerb},m_im_telConsult_item_disable:{color:x.v_color_gray_weakerb},m_im_footer_text:(0,m.Z)({marginLeft:(0,g.Vh)(18),paddingTop:(0,g.Vh)(10),paddingBottom:(0,g.Vh)(10),fontSize:(0,g.Vh)(14),color:x.v_color_gray_weak},y.im.m_im_footer_text),m_im_footer_text_hidden:{height:10,display:"flex"}}),b={m_icondel_color_gray:x.v_color_font,m_message_color_blue:x.v_color_tag_blue_weak,m_phone_color_blue:x.v_color_indecator_bg,m_telConsult_disable:x.v_color_gray_weakerb},Z=(0,m.Z)((0,m.Z)({},k),b),I=n(50738),w=n(2269),S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),o.bridge=f,o}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.onlineIM,o=void 0===i?{}:i,r=t.telIM,a=void 0===r?{}:r,l=n.isShowOnlineService,u=n.onlineService,d=n.phoneService,p=n.isShowTelConsult,h=n.fixedVerbal,f=p&&d?d.title:"",m=p&&d?d.serverTimeDeclare:"",v=p&&d?d.phoneInfoLists:[],_=a.click,g=a.expo,y=void 0===g?{}:g;return(0,w.jsxs)(s.G7,{style:[Z.m_im_wrapper,Z.m_im_body_wrapper],children:[(0,w.jsx)(s.xv,{style:h?Z.m_im_footer_text:Z.m_im_footer_text_hidden,children:h}),l?(0,w.jsx)(c.Z,{onClick:this.goIM.bind(this,u.url),log:o.click,children:(0,w.jsxs)(s.G7,{style:Z.m_im_onlineservice,children:[(0,w.jsxs)(s.G7,{style:Z.m_im_onlineservice_title,children:[(0,w.jsx)(s.xv,{style:Z.m_im_onlineservice_title_text,children:u.text}),(0,w.jsx)(s.xv,{style:Z.m_im_onlineservice_title_icon,children:"\u63a8\u8350"})]}),(0,w.jsxs)(s.G7,{style:Z.m_im_onlineservice_content,children:[(0,w.jsx)(s.G7,{style:Z.m_im_onlineservice_left,children:(0,w.jsx)(s.xv,{style:Z.m_im_onlineservice_left_text,children:u.tips})}),(0,w.jsx)(s.G7,{style:Z.m_im_onlineservice_right,children:(0,w.jsx)(s.JO,{type:"message",size:50,color:Z.m_phone_color_blue,isSvg:!0})})]})]})}):null,p?(0,w.jsxs)(s.G7,{style:Z.m_im_telConsult,children:[(0,w.jsxs)(s.G7,{style:Z.m_im_telConsult_header,children:[(0,w.jsx)(s.xv,{style:Z.m_im_telConsult_title,children:f}),!!m&&(0,w.jsx)(s.xv,{style:Z.m_im_telConsult_servicetimer,children:m})]}),(0,w.jsx)(s.G7,{style:Z.m_im_telConsult_body,children:v.map((function(t,n){return(0,w.jsxs)(s.G7,{style:Z.m_im_telConsult_item,children:[(0,w.jsxs)(s.G7,{style:Z.m_im_telConsult_item_left,children:[(0,w.jsx)(s.xv,{style:[Z.m_im_telConsult_item_title,t.disabled&&Z.m_im_telConsult_item_disable],children:t.label}),(0,w.jsx)(c.Z,{onClick:e.copyPhoneNum.bind(e,t.phoneNumber),children:(0,w.jsxs)(s.xv,{style:[Z.m_im_telConsult_item_phonecode,t.disabled&&Z.m_im_telConsult_item_disable],children:[t.phoneNumber,(0,w.jsx)(s.xv,{style:Z.m_im_telConsult_item_copy,children:"\xa0\xa0\u590d\u5236"})]})}),(0,w.jsx)(s.xv,{style:Z.m_im_telConsult_note,children:t.serverTimeDeclare}),(0,w.jsx)(s.xv,{style:Z.m_im_telConsult_note,children:t.tips})]}),(0,w.jsx)(c.Z,{onClick:e.mackCall.bind(e,t.phoneNumber,t.disabled),log:_,testID:(0,I.kI)(y.key,y.params),children:(0,w.jsx)(s.G7,{style:Z.m_im_telConsult_item_right,children:(0,w.jsx)(s.JO,{type:"phone",size:50,color:t.disabled?Z.m_telConsult_disable:Z.m_phone_color_blue,isSvg:!0})})})]},n)}))})]}):null]})}}]),n}(h)},50570:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(72747)),l=n(81876),u=n(45023),d=n(56034),p=n(2446),h=n(35409),f=n(57113),m=n(79301),v=n(95308),_=function(e,t){t.type;var n,i,o=t.productId,r=t.beijingTime,a=t.agreementType,s=t.saleService,c=t.serviceTimeDesc,l=t.isdomestic,u=t.onlyShowOnline,d=t.guideInfo,p=void 0===d?{}:d,h=t.bizLineType,f=t.isSkipPoplayer,m=null===e||void 0===e?void 0:e[0],v=m.imList,_=void 0===v?[]:v,y=m.phoneList,k=void 0===y?[]:y,b=2===s,Z=!(null===_||void 0===_||!_.length),I=!f&&(!(null===k||void 0===k||!k.length)&&(b||!l)),w=u?Z:!(!Z&&!I),S=2===s&&9===a,P=!u&&(I&&(S||1==s&&!l)),T={},C=[],D=2==h,R=3==h,j=Z&&I&&P?"\u54a8\u8be2":I&&S?"\u7535\u8bdd\u54a8\u8be2":Z?"\u5728\u7ebf\u54a8\u8be2":"\u5ba2\u670d";if(!w)return T;if(Z){var N=null===_||void 0===_?void 0:_[0],V=N.url,L=D?"\u5728\u7ebf\u54a8\u8be2\u5411\u5bfc":"\u5728\u7ebf\u5ba2\u670d";i={text:L,url:V,tips:"\u6e29\u99a8\u63d0\u793a\uff1a\u4e3a\u4e86\u8282\u7ea6\u60a8\u7684\u65f6\u95f4\uff0c\u5efa\u8bae\u60a8\u4f18\u5148\u9009\u62e9".concat(L)}}if(I){var E=g({beijingtime:r,servicetime:c});null===k||void 0===k||k.forEach((function(e){C.push({label:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?"\u5883\u5185\u62e8\u6253":"\u5168\u7403\u62e8\u6253",index:"\u5728\u56fd\u5185\u8bf7\u62e8\u6253"===e.phonePrompt?1:2,phoneNumber:e.displayNumber,disabled:!E,serverTimeDeclare:e.description.substring(0,16),tips:"\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5".concat(D?"\u5411\u5bfc":"\u5ba2\u670d","\u4ea7\u54c1\u7f16\u53f7\uff1a").concat(o)}),C.sort((function(e,t){return e.index-t.index})),l&&(C=C.slice(0,1)),n={title:D?"\u62e8\u6253\u5411\u5bfc\u7535\u8bdd":"\u7535\u8bdd\u5ba2\u670d",phoneInfoLists:C}}))}var A=2!==s||9!==a||D?"":"*\u672c\u4ea7\u54c1\u7531\u96f6\u552e\u5546\u76f4\u8425\uff0c\u5e76\u63d0\u4f9b\u54a8\u8be2/\u9884\u8ba2/\u552e\u540e\u670d\u52a1";return T={productId:o,isRetail:b,fixedVerbal:A,isShowTelConsult:I,isShowOnlineService:Z,onlineService:i,phoneService:n,isShowIM:w,ticketShowPoplayer:P,imText:j,isGuide:D,isTeamLeader:R,guideStatus:x(p.status)},T},g=function(e){var t=/(?:19|20|21)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1]))/g,n=/(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]/g,i=e.beijingtime,o=e.servicetime,r=null===i||void 0===i?void 0:i.match(t),a=null===i||void 0===i?void 0:i.match(n),s=null===o||void 0===o?void 0:o.match(n);if(!r||!a||!s)return!0;var c=y(r[0],a[0]),l=y(r[0],s[0]),u=y(r[0],s[1]);return c>l&&c<u},y=function(e,t){var n="".concat(e," ").concat(t);return new Date(n).getTime()},x=function(e){var t="";switch(e){case 0:t="\u79bb\u7ebf";break;case 2:t="\u5fd9\u788c";break;default:t="";break}return t},k=n(64571),b=n(97912),Z=null,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.locateLevel,e.timeout),n=void 0===t?10:t,i=e.isForceLocate,o=void 0!==i&&i,r=e.isAccurate,a=void 0===r||r;return new Promise((function(e,t){var i;if(Z){var r=Z,s=r.CityId,c=r.CityName,l=r.IsOverSea;e({isOverSea:l,initCityId:s,initCityName:c})}var u={isAccurate:a,isForceLocate:o,interval:1e3*n,channel:"TTD_T",success:function(){var t=(0,v.Z)((0,m.Z)().mark((function t(n,i){var o,r,a,s,c,l,u;return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=n.longitude,r=n.latitude,t.next=3,(0,b.d)({list:[{request:{head:{language:"zh-CN"},body:{lat:r,lng:o,IsGsLocation:!0}},actionUrl:"/restapi/soa2/17073/json/lbs/getcurrentcity"}]});case 3:a=t.sent,Z=a[0],s=a[0],c=s.CityId,l=s.CityName,u=s.IsOverSea,e({isOverSea:u,initCityId:c,initCityName:l});case 7:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),fail:function(e){t({})}};null===(i=k.ZP.locate)||void 0===i||i.startGetGeoPoint(u)}))},w=function(){return null},S=function(e){},P={locate:I,locateIM:I,cachedLocation:S,Business:w},T=n(99739),C={platformId:1},D=function(e){return"https://m.ctrip.com/webapp/taro/pages/tnt/detail/product-detail/index/?productId=".concat(e)},R=n(56569),j=function(e){var t,n=e.type,i=e.productId,o=e.iqCode,r=e.pageId,a=e.resourceId,s=e.guideInfo,c=e.productName,l=e.spotid,u=e.destId,d=[];d.push({resourceId:String(i),idType:"PRODUCT",resourceType:"2"}),"ticket"===n&&(d.push({resourceId:String(a),idType:"RESOURCE",resourceType:"2"}),t={Type:1,spotid:l});var p=0-(new Date).getTimezoneOffset()/60;"guide"===n&&(d.push({resourceId:null===s||void 0===s?void 0:s.uid,idType:"GuideUID",resourceType:"2"}),t={textTitle:c||"",productName:c||"",toJumpUrl:"https://m.ctrip.com/webapp/things-to-do/detail/".concat(i,"?isHideNavBar=YES"),fromJumpUrl:D(i)},(null===s||void 0===s?void 0:s.id)&&(t.guideId=s.id),u&&(t.destId=u),i&&(t.productId=i),t.userTimezonesFromPage="GMT".concat(p>=0?"+":"-").concat(p));var h={isPreSale:1,iqCode:o,pageId:r,timeZone:p,version:(0,T.ZP)().version?(0,T.ZP)().version.split(".").join("")+"00":"830000",platformId:C.platformId,resourceList:d};return t&&(h.ext=JSON.stringify(t)),h},N=function(){var e=(0,v.Z)((0,m.Z)().mark((function e(t){var n,o,r,a,s,c,l,u,d=arguments;return(0,m.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},o=t.http,r=t.header,a=t.ctx,e.next=4,V(a);case 4:return s=e.sent,c=(0,i.Z)((0,i.Z)({},j(n)),{},{position:s}),e.next=8,o({list:[{request:Object.assign({},r,c),actionUrl:"/restapi/soa2/15529/json/getInQueryInfo"}]});case 8:l=e.sent,Object.assign(n,{isdomestic:"domestic"===s}),u=_(l,n),t.afterFetch(u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t="domestic";return(0,R.Z6)(null===e||void 0===e?void 0:e.userAgent)||(t=P.locateIM({locateLevel:0,isForceLocate:!1}).then((function(e){var n=e.isOverSea;return t=n?"oversea":"domestic"})).catch((function(e){return t="unknow"}))),t},L=function(e){var t=e.isShowOnlineService,n=e.isShowTelConsult,i=e.phoneService,o=e.fixedVerbal,r=i&&i.phoneInfoLists?i.phoneInfoLists:[],a=0;return a+=44,a+=o?44:0,a+=t?100:0,n&&(a+=1===r.length?190:0,a+=2===r.length?310:0),a},E=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,o.Z)(this,i),n=t.call(this,e),(0,u.Z)((0,l.Z)(n),"state",void 0),n.state={imInfoData:{},isShowIM:n.props.isShowIM,isShowTelConsult:!1,ticketShowPoplayer:!1,imText:"\u5ba2\u670d",isGuide:!1,showGuideToolTip:!1},n.init(n.props.imInfo),n.openUrl=n.openUrl.bind((0,l.Z)(n)),n.rotateValue=new c.fS.Value(0),n}return(0,r.Z)(i,[{key:"componentWillReceiveProps",value:function(e){var t,n;(null===e||void 0===e||null===(t=e.imInfo)||void 0===t?void 0:t.resourceId)!=(null===(n=this.props)||void 0===n||null===(n=n.imInfo)||void 0===n?void 0:n.resourceId)&&this.init(e.imInfo)}},{key:"handleRotate",value:function(){c.fS.sequence([c.fS.timing(this.rotateValue,{toValue:.6,duration:360,useNativeDriver:!0}),c.fS.timing(this.rotateValue,{toValue:-.5,duration:280,useNativeDriver:!0}),c.fS.timing(this.rotateValue,{toValue:.4,duration:240,useNativeDriver:!0}),c.fS.timing(this.rotateValue,{toValue:0,duration:120,useNativeDriver:!0})]).start((function(){}))}},{key:"init",value:function(e){N(this,e)}},{key:"afterFetch",value:function(e){var t=e.isShowIM,n=e.isShowTelConsult,i=e.ticketShowPoplayer,o=e.imText,r=e.isGuide;this.setState({imInfoData:e,isShowIM:t,isShowTelConsult:n,ticketShowPoplayer:i,imText:o,isGuide:r})}},{key:"componentDidMount",value:function(){var e=this;f.Z.add("IMPoplayer",h.Z,{props:{isOpened:!1}});var t=this.props,n=t.type,i=t.imInfo,o=this.state.imInfoData,r=void 0===o?{}:o;"guideBookModule"===n&&r&&!r.guideStatus&&setTimeout((function(){e.handleRotate()}),6e3);var a=i||{},s=a.guideInfo,c=void 0===s?{}:s;"guideBookModule"===n&&(0==(null===c||void 0===c?void 0:c.status)?this.setState({showGuideToolTip:!0},(function(){setTimeout((function(){e.setState({showGuideToolTip:!1})}),3e3)})):setTimeout((function(){e.setState({showGuideToolTip:!0},(function(){setTimeout((function(){e.setState({showGuideToolTip:!1})}),3e3)}))}),6e3))}},{key:"toggleImCb",value:function(e){if("0"===(null===e||void 0===e?void 0:e.ReturnCode)){var t=this.state,n=t.isShowTelConsult,i=t.ticketShowPoplayer,o=this.props.imInfo.type,r=this.state.imInfoData,a=void 0===r?{}:r,s=a.onlineService,c=void 0===s?{}:s,l=c.url;"act"===o||"guide"===o?n?this.showPoplayer(a):l&&this.push(l):"ticket"===o&&(i?this.showPoplayer(a):l&&this.push(l))}}},{key:"onClick",value:function(){var e=this,t=this.props.isSkipLogin,n=k.ZP.user.isLogin();n||t?this.toggleImCb({ReturnCode:"0"}):k.ZP.user.login({callback:function(t){e.toggleImCb(t)}})}},{key:"showPoplayer",value:function(e){var t=n(38194).Z,i=this.props,o=i.onlineIM,r=void 0===o?{}:o,a=i.telIM,s=void 0===a?{}:a,c=L(e);p.ZP.show({props:{name:"IMPoplayer",title:"\u8054\u7cfb\u5ba2\u670d",zIndex:1300,popHeight:c,isScrollView:!1},child:t,childProps:{data:e,onlineIM:r,telIM:s}})}},{key:"openUrl",value:function(e,t){var n;null===t||void 0===t||null===(n=t.stopPropagation)||void 0===n||n.call(t),e&&this.push(e)}},{key:"onCloseToolTip",value:function(){this.setState({showGuideToolTip:!1})}}]),i}(d.ZP),A=n(9353),F=n(17366),M=n(98384),O={m_im:{width:(0,F.Vh)(50),display:"flex",flexDirection:"column",alignItems:"center",marginTop:6},m_im_text:{marginTop:(0,F.Vh)(1),color:"#111",fontSize:(0,F.Vh)(12)},m_im_btn:(0,i.Z)({margin:(0,F.Vh)(10),marginTop:(0,F.Vh)(30),padding:(0,F.Vh)(10),borderWidth:(0,F.Vh)(1),borderRadius:(0,F.Vh)(6),borderColor:"#2698f7",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},M.im.m_im_btn),m_im_btn_text:{marginLeft:(0,F.Vh)(4),color:"#2698f7"},m_im_guide:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f2f8fe",width:(0,F.Vh)(60),height:(0,F.Vh)(60),borderRadius:8},m_im_guide_text:{color:"#2698f7",fontSize:(0,F.Vh)(10)},m_im_guide_formwork:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:(0,F.Vh)(28),backgroundColor:"#EBF4FF",borderRadius:(0,F.Vh)(14),marginLeft:(0,F.Vh)(30),flex:1,borderColor:"#fff",borderWidth:(0,F.Vh)(1),borderStyle:"solid"},m_im_guide_formwork_text:{color:"#3263a6",fontSize:(0,F.Vh)(12),fontFamily:"PingFangSC-Medium",fontWeight:"500",lineHeight:(0,F.Nv)((0,F.Vh)(16))},m_footer_btn_wrap:{flex:1,paddingRight:16,flexDirection:"row",alignItems:"space-around"},m_footer_btn_wrap_guide:{},m_footer_btn_box_guide:{backgroundColor:"#0086f6"},m_footer_btn_box_guide_text:{color:"#fff",fontSize:(0,F.Vh)(17),fontWeight:"400",paddingTop:(0,F.Vh)(2)},m_footer_btn:{width:(0,F.Vh)(90),height:(0,F.Vh)(44),borderRadius:(0,F.Vh)(6),textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginRight:(0,F.Vh)(12)},m_footer_guide_btn:(0,i.Z)((0,i.Z)({display:"flex",flexDirection:"row",alignItems:"center",width:(0,F.Vh)(134),height:(0,F.Vh)(44),backgroundColor:"#fff1e6",borderRadius:6},(0,F.yp)((0,F.Vh)(5))),{},{paddingLeft:(0,F.Vh)(5),paddingRight:(0,F.Vh)(5)}),m_footer_guide_img:{width:(0,F.Vh)(34),height:(0,F.Vh)(34),marginRight:(0,F.Vh)(8),borderRadius:4},m_footer_guide_tip:{width:(0,F.Vh)(74.5),color:"#ff7700",fontSize:(0,F.Vh)(11),fontWeight:"500"},m_im_teamanddriver:{width:"100%",backgroundColor:"rgb(0, 111, 246)",borderRadius:(0,F.Vh)(8),display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_im_teamanddriver_icon:{width:(0,F.Vh)(17),height:(0,F.Vh)(17),marginRight:(0,F.Vh)(3)},m_im_teamanddriver_text:{color:"#fff",fontSize:(0,F.Vh)(13),lineHeight:(0,F.Vh)(15),fontWeight:(0,F.Ue)("500"),marginTop:(0,F.Vh)(12),marginBottom:(0,F.Vh)(12)},m_footer_btn_guide_book_module:(0,i.Z)((0,i.Z)({borderRadius:6},(0,F.yp)((0,F.Vh)(11.5))),(0,F.WB)((0,F.Vh)(20))),m_footer_btn_text_guide_book_module:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:(0,F.Vh)(93.5),height:(0,F.Vh)(21),color:"#fff",fontSize:(0,F.Vh)(17),fontFamily:"PingFangSC-Medium",fontWeight:(0,F.Ue)("500"),letterSpacing:0,lineHeight:(0,F.Nv)((0,F.Vh)(22)),textAlign:"center"}},B={backgroundColor:"rgba(0,0,0,0.8)",borderRadius:(0,F.Vh)(6),height:(0,F.Vh)(19),top:-(0,F.Vh)(26)},z=(0,A.Z)(O),H=n(71557),U=n(59201),G=n(50738),q=n(19226),W=n(58472),K=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"textRef",void 0),i.state={width:0,left:0},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.dynamicCalcWidth()}},{key:"dynamicCalcWidth",value:function(){var e=this;(0,W.L6)(this.textRef,(function(t){if(t&&t.width){var n=(t.width+4)/2-67;e.setState({width:t.width+4,left:n})}}))}}]),n}(d.ZP),Y={m_tooltip_container:(0,i.Z)({backgroundColor:"rgba(34,34,34,0.7)",borderRadius:(0,F.Vh)(4),height:(0,F.Vh)(32),top:(0,F.Vh)(-40),position:"absolute"},F._7),m_tooltip_text_wrapper:(0,i.Z)({},F._7),m_tooltip_text:{color:"#fff",fontSize:(0,F.Vh)(13),position:"absolute",paddingRight:(0,F.Vh)(36),paddingLeft:(0,F.Vh)(38)},m_tooltip_text_offline:{paddingRight:(0,F.Vh)(12),paddingLeft:(0,F.Vh)(12)},m_tooltip_triangle_wrapper:(0,i.Z)((0,i.Z)({height:(0,F.Vh)(8),width:"100%",position:"absolute",left:0,bottom:(0,F.Vh)(-8)},F._7),{},{overflow:"hidden"}),m_tooltip_triangle:(0,i.Z)({width:(0,F.Vh)(10),height:(0,F.Vh)(10),backgroundColor:"rgba(34,34,34,0.7)"},(0,F.pm)({translateY:(0,F.Vh)(-6),rotate:"45deg"})),m_tooltip_close:{position:"absolute",right:(0,F.Vh)(10),height:(0,F.Vh)(15),paddingRight:(0,F.Vh)(3.5),paddingLeft:(0,F.Vh)(3.5),display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},m_tooltip_image_wrap:{position:"absolute",left:(0,F.Vh)(8),backgroundColor:"#fff",width:(0,F.Vh)(24),height:(0,F.Vh)(24),borderRadius:(0,F.Vh)(12),display:"flex",alignItems:"center",justifyContent:"center"},m_tooltip_image:{width:(0,F.Vh)(24)-2,height:(0,F.Vh)(24)-2,borderRadius:(0,F.Vh)(12)}},X=(0,A.Z)(Y),Q=n(2269),J=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e,t,n=this,i=this.props,o=i.text,r=i.style,a=void 0===r?{}:r,s=i.imgSrc,l=void 0===s?"":s,u=i.onClick,d=i.offline,p=i.bubbleLog,h=this.state,f=h.width,m=h.left;return o?(0,Q.jsxs)(U.Z,{style:(0,F.wh)([X.m_tooltip_container,{width:f,left:-(0,F.Vh)(m)},a]),activeOpacity:1,testID:(null===p||void 0===p?void 0:p.expo)&&(0,G.kI)(null===p||void 0===p||null===(e=p.expo)||void 0===e?void 0:e.key,null===p||void 0===p||null===(t=p.expo)||void 0===t?void 0:t.params),children:[(0,Q.jsx)(c.G7,{style:(0,F.wh)([X.m_tooltip_triangle_wrapper]),children:(0,Q.jsx)(c.G7,{style:(0,F.wh)([X.m_tooltip_triangle])})}),!d&&f&&l?(0,Q.jsx)(c.G7,{style:X.m_tooltip_image_wrap,children:(0,Q.jsx)(c.Ee,{url:l,style:X.m_tooltip_image})}):null,(0,Q.jsx)(c.G7,{style:(0,F.wh)([X.m_tooltip_text_wrapper,f?{opacity:1}:{opacity:0}]),children:(0,Q.jsx)(c.xv,{className:"tooptip",ref:function(e){return n.textRef=e},style:(0,F.wh)([X.m_tooltip_text,d?X.m_tooltip_text_offline:{}]),children:o})}),!d&&f?(0,Q.jsx)(U.Z,{style:(0,F.wh)([X.m_tooltip_close]),onClick:u,log:null===p||void 0===p?void 0:p.closeClick,children:(0,Q.jsx)(H.Z,{type:"xclosed",color:"#fff",size:24})}):null]}):null}}]),n}(K),$=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.isShowIM,n=e.imText,o=(e.isGuide,e.imInfoData),r=void 0===o?{}:o,a=e.showGuideToolTip,s=r.onlineService,l=void 0===s?{}:s,u=(r.isTeamLeader,r.isShowOnlineService),d=l.url,p=void 0===d?"":d,h=this.props,f=h.log,m=h.expo,v=h.fstyle,_=h.exposure,g=h.showImText,y=h.type,x=h.iconType,k=h.customImText,b=h.imButtonText,Z=void 0===b?"":b,I=h.guideCardText,w=h.iconSize,S=(h.iconColor,h.imTraceLog),P=h.customData,T=void 0===P?{}:P,C=h.logoImgUrl,D=h.guideDisplayName,R=h.imInfo,j=h.extraLog,N=void 0===j?{}:j,V=R||{},L=V.guideInfo,E=void 0===L?{}:L,A=0==E.status,M=(0,F.Ec)(z,v),O=N.bubble,W=void 0===O?{}:O;switch(y){case"guideBookModule":return u?(0,Q.jsxs)(U.Z,{onClick:this.openUrl.bind(this,p),log:f,style:(0,F.wh)([M.m_footer_btn_wrap_guide_book_module||{}]),children:[(0,Q.jsx)(c.o,{colors:["rgb(0, 136, 246)","rgb(0, 111, 246)"],start:{x:0,y:0},end:{x:1,y:0},style:M.m_footer_btn_guide_book_module,children:(0,Q.jsx)(c.xv,{style:M.m_footer_btn_text_guide_book_module,children:"\u54a8\u8be2\u5411\u5bfc"})}),D&&a?(0,Q.jsx)(J,{text:A?"\u79bb\u7ebf":D,imgSrc:C,onClick:this.onCloseToolTip.bind(this),offline:A,bubbleLog:W}):null]}):null;default:return"guideFooterBtn"===y?u?(0,Q.jsxs)(U.Z,{onClick:this.openUrl.bind(this,p),log:f,style:(0,F.wh)([M.m_footer_btn_wrap,M.m_footer_btn_wrap_guide||{}]),children:[(0,Q.jsx)(c.G7,{style:(0,F.Ec)(M.m_footer_btn_box_guide,M.m_footer_btn),children:(0,Q.jsx)(c.xv,{style:M.m_footer_btn_box_guide_text,children:Z})}),r&&r.guideStatus?(0,Q.jsx)(q.Z,{text:r.guideStatus,placement:"right",style:B}):null]}):null:"guideCardIM"===y?(0,Q.jsxs)(U.Z,{onClick:this.openUrl.bind(this,p),style:M.m_im_btn,log:f,testID:(0,G.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[!I&&(0,Q.jsx)(H.Z,{type:"im",color:"#2698f7",size:36}),(0,Q.jsx)(c.xv,{style:M.m_im_btn_text,children:I||"\u54a8\u8be2\u5411\u5bfc\u6e38\u73a9\u7ebf\u8def\u3001\u8d39\u7528\u660e\u7ec6\u53ca\u4f18\u60e0\u4fe1\u606f"})]}):"guideCardNew"===y?(0,Q.jsxs)(U.Z,{onClick:this.openUrl.bind(this,p),style:M.m_im_guide,log:f,testID:(0,G.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[!I&&(0,Q.jsx)(H.Z,{type:"im",color:"#2698f7",size:48}),(0,Q.jsx)(c.xv,{style:M.m_im_guide_text,children:"\u54a8\u8be2\u5411\u5bfc"})]}):"guideFormwork"===y?(0,Q.jsx)(U.Z,{onClick:this.openUrl.bind(this,p),style:M.m_im_guide_formwork,log:f,testID:(0,G.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:(0,Q.jsx)(c.xv,{style:M.m_im_guide_formwork_text,children:"\u514d\u8d39\u54a8\u8be2/\u5b9a\u5236"})}):"teamanddriver"===y?(0,Q.jsxs)(U.Z,{onClick:this.openUrl.bind(this,p),style:M.m_im_teamanddriver,log:f,testID:(0,G.kI)(null===m||void 0===m?void 0:m.key,(0,i.Z)({},null===m||void 0===m?void 0:m.params)),children:[(0,Q.jsx)(c.Ee,{url:"https://dimg04.c-ctrip.com/images/1o53c12000bqcxwleE73F.png",style:M.m_im_teamanddriver_icon}),(0,Q.jsx)(c.xv,{style:M.m_im_teamanddriver_text,children:"\u9884\u7ea6\u5fc3\u4eea\u5411\u5bfc"})]}):t?(0,Q.jsx)(U.Z,{onClick:this.onClick.bind(this),log:f,testID:"im",devTraceData:S,children:(0,Q.jsxs)(c.G7,{testID:_,style:M.m_im,children:["custom"===y?(0,Q.jsx)(c.Ee,{url:T.icon,style:{width:26,height:26}}):(0,Q.jsx)(H.Z,{type:x||"im",color:"#111",size:w||52}),(0,Q.jsx)(c.xv,{style:M.m_im_text,children:k||(g?n:"\u5ba2\u670d")})]})}):null}}}]),n}(E)},5046:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),c=n(72747),l=n(56034),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(l.ZP),d=n(298),p=n(9353),h=n(17366),f={m_payment_item:(0,d.Z)({},h.i3),m_item_left:{paddingRight:(0,h.Vh)(8)},m_item_right:{color:"#555"},m_margin_bottom:{marginTop:(0,h.Vh)(12)},m_item_total:{fontSize:(0,h.Vh)(15),color:"#111111",textAlign:"justify",backgroundColor:"#fff",position:"relative",zIndex:1},m_item_text:{lineHeight:(0,h.Nv)((0,h.Vh)(19))},m_item_detail:{color:"#888",fontSize:(0,h.Vh)(13),lineHeight:(0,h.Nv)((0,h.Vh)(17))},m_item_detail_light:{color:"#FF5500"},m_item_text_linethrough:{textDecorationLine:"line-through"},m_payment_item_desc:{color:"#aaa",fontSize:(0,h.Vh)(11),lineHeight:(0,h.Nv)(18)},m_payment_item_desc_1:{fontSize:(0,h.Vh)(13),lineHeight:(0,h.Nv)(19)},m_payment_item_descs:(0,d.Z)((0,d.Z)({},h.i3),{},{marginTop:(0,h.Vh)(4),maxWidth:(0,h.Vh)(276)}),m_payment_item_descs_top:{},m_payment_row_left:(0,d.Z)((0,d.Z)({},h._),{},{position:"relative",flex:1,paddingRight:(0,h.Vh)(32)}),m_discount_text_wrapper:(0,d.Z)((0,d.Z)({},h._7),{},{width:(0,h.Vh)(16),height:(0,h.Vh)(16),borderRadius:(0,h.Vh)(2),backgroundColor:"#FF7700",marginRight:(0,h.Vh)(4)}),m_discount_text:{fontSize:(0,h.Vh)(11),color:"#fff",lineHeight:(0,h.Nv)((0,h.Vh)(16))},m_payment_row_right:(0,d.Z)({},h.xI),m_payment_row_between:(0,d.Z)((0,d.Z)({},h._),{},{justifyContent:"space-between"}),m_payment_row_end:(0,d.Z)((0,d.Z)({},h._),{},{justifyContent:"flex-end",marginTop:(0,h.Vh)(2)}),m_item_linedot:{position:"absolute",zIndex:0,overflow:"hidden",left:0,right:0,top:"50%",height:h.WI,paddingRight:(0,h.Vh)(11)},m_item_border_dashed:(0,d.Z)({height:(0,h.Vh)(2),flex:1,width:"100%",borderRadius:1},(0,h.Cg)({width:(0,h.Vh)(2),style:"dashed",color:"#ddd"})),m_item_extra_price:{color:"#333",fontSize:14}},m=(0,p.Z)(f),v=n(2269),_=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.price,i=e.type,o=void 0===i?2:i,r=e.marketPrice,a=e.descs,s=void 0===a?[]:a,l=e.discountText,u=e.isDiscount,d=e.isNoDash,p=e.extraPrice,f=e.isReturnCash;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.G7,{style:(0,h.wh)([m.m_payment_item,2===o?m.m_margin_bottom:{}]),children:(0,v.jsxs)(c.G7,{style:m.m_payment_row_between,children:[(0,v.jsxs)(c.G7,{style:m.m_payment_row_left,children:[!!l&&(0,v.jsx)(c.G7,{style:m.m_discount_text_wrapper,children:(0,v.jsx)(c.xv,{style:m.m_discount_text,children:l})}),(0,v.jsx)(c.xv,{style:(0,h.wh)([m.m_item_text,m.m_item_left,1===o?m.m_item_total:m.m_item_detail,f?{backgroundColor:"transparent"}:{},1===o&&u?{fontSize:(0,h.Vh)(13),color:"#888"}:{}]),children:t}),1==o&&!d&&(0,v.jsx)(c.G7,{style:m.m_item_linedot,children:(0,v.jsx)(c.G7,{style:m.m_item_border_dashed})})]}),(0,v.jsx)(c.G7,{style:m.m_payment_row_right,children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.xv,{space:"nbsp",style:(0,h.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail]),children:"\u95e8\u5e02\u4ef7 "}),(0,v.jsx)(c.xv,{space:"nbsp",style:(0,h.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail]),children:r}),p&&p.currency?(0,v.jsx)(c.G7,{children:(0,v.jsx)(c.xv,{style:m.m_item_extra_price,children:"(\u2248".concat(p.currency).concat(p.price,")")})}):null]}):(0,v.jsx)(c.xv,{space:"nbsp",style:(0,h.wh)([m.m_item_text,m.m_item_right,1===o?m.m_item_total:m.m_item_detail,f?{backgroundColor:"transparent"}:{},u?m.m_item_detail_light:{}]),children:n})})]})}),s.length?(0,v.jsx)(c.G7,{style:(0,h.wh)([m.m_payment_item_descs]),children:s.map((function(e){return(0,v.jsx)(c.xv,{style:(0,h.wh)([m.m_payment_item_desc]),children:e})}))}):null]})}}]),n}(s.Component),g=n(56569),y=n(91599),x=.75*y.HT-(0,h.Vh)(64),k={outermost:{display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},m_payment_popLayer:{paddingTop:(0,h.Vh)(16),paddingRight:(0,h.Vh)(16),paddingBottom:(0,h.Vh)(16),paddingLeft:(0,h.Vh)(16),backgroundColor:"#fff"},scroll_view_style:{width:"auto",maxHeight:x,boxSizing:"border-box",height:"auto"},m_payment_cont:{display:"flex",flexDirection:"column",fontSize:(0,h.Vh)(14),color:"#666",lineHeight:(0,h.Nv)((0,h.Vh)(30)),fontWeight:"400",paddingBottom:(0,h.Vh)(12),width:"100%"},m_payment_cont_no_padding_bottom:{paddingBottom:0},m_payment_bottom:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:(0,h.Vh)(16)},m_payment_bottom_text:{color:"#333",fontWeight:(0,h.Ue)("500"),lineHeight:(0,h.Nv)((0,h.Vh)(40)),fontSize:(0,h.Vh)(16),textAlign:"justify"},m_payment_total:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",marginTop:(0,h.Vh)(8)},m_payment_total_text:(0,d.Z)({color:"#FF6600",fontSize:(0,h.Vh)(22),fontWeight:(0,h.Ue)("bold")},"android"==g.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),m_payment_bottom_placeholder:{width:(0,h.Vh)(1),height:20},m_payment_return_crash_info:{paddingTop:(0,h.Vh)(8)},m_payment_extra_corner:{height:(0,h.Vh)(7)},m_payment_extra_corner_view:{position:"absolute",right:(0,h.Vh)(16),width:0,height:0,borderLeftWidth:(0,h.Vh)(7),borderLeftColor:"transparent",borderRightWidth:(0,h.Vh)(7),borderRightColor:"transparent",borderBottomWidth:(0,h.Vh)(13),borderBottomColor:"#F8FAFD"},m_payment_extra_content:{backgroundColor:"#f8fafd",borderRadius:(0,h.Vh)(6),paddingTop:(0,h.Vh)(4),paddingRight:(0,h.Vh)(12),paddingBottom:(0,h.Vh)(4),paddingLeft:(0,h.Vh)(12)},m_payment_tips_content:{color:"#999",fontSize:(0,h.Vh)(12),fontWeight:"normal",fontFamily:"PingFangSC-Regular"},line:{height:.5,backgroundColor:"#F0F0F0",marginTop:(0,h.Vh)(16),marginBottom:(0,h.Vh)(4)},m_payment_descTips:{paddingTop:(0,h.Vh)(12),display:"flex",flexDirection:"column"},m_payment_overdraftTips:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},m_payment_overdraftTips_title:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},m_payment_overdraftTips_text:{color:"#888",fontSize:(0,h.Vh)(13),lineHeight:(0,h.Nv)((0,h.Vh)(17))},m_payment_overdraftTips_content_top:{marginTop:(0,h.Vh)(8)},m_payment_overdraftTips_content_bottom:{marginTop:(0,h.Vh)(12)},m_payment_overdraftTips_title_text:{color:"#111",fontSize:(0,h.Vh)(15),lineHeight:(0,h.Nv)((0,h.Vh)(19))},m_payment_overdraftTips_title_tips:(0,d.Z)((0,d.Z)({},(0,h.o3)((0,h.Vh)(1),(0,h.Vh)(4))),{},{backgroundColor:"#FF5500",borderRadius:(0,h.Vh)(2),marginLeft:(0,h.Vh)(4),display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}),m_payment_overdraftTips_title_tips_text:{color:"#fff",fontSize:(0,h.Vh)(13),lineHeight:(0,h.Nv)((0,h.Vh)(17))},m_payment_overdraftTips_gap:{marginLeft:(0,h.Vh)(6),marginRight:(0,h.Vh)(6),backgroundColor:"#C5C5C5",width:(0,h.Vh)(.5),height:(0,h.Vh)(12)},m_payment_overdraftTips_gap_top:{marginLeft:(0,h.Vh)(-16),marginBottom:(0,h.Vh)(16),backgroundColor:"#EBEFF5",width:(0,h.Vh)(391),height:(0,h.Vh)(8)}},b=(0,p.Z)({m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0}}),Z=(0,p.Z)({m_payment_tips:{marginTop:28,paddingLeft:0,paddingRight:0,marginBottom:20}}),I=(0,p.Z)(k),w=n(64571),S=n(81876),P=n(45023),T=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,P.Z)((0,S.Z)(o),"state",void 0),(0,P.Z)((0,S.Z)(o),"onLayoutFinish",(function(){o.setState({layoutFinish:!0})})),o.state={layoutFinish:!1},o}return(0,o.Z)(n)}(l.ZP),C=(0,p.Z)({m_payment_tips:{paddingLeft:16,paddingRight:16,marginTop:20},title:{color:"#111",fontSize:15,fontWeight:"normal",fontFamily:"PingFangSC-Regular"},priceTipItem:{color:"#aaaaaa",fontSize:12,fontFamily:"PingFangSC-Regular",lineHeight:(0,h.Nv)(16)},priceTip:{overflow:"hidden"}}),D=(0,p.Z)({m_textcollapse_content_text:{color:"#aaa",fontSize:12},m_button_text:{color:"#111111",fontSize:12},m_button:{width:"100%",height:32,bottom:-16},m_button_up:{bottom:0,height:16},m_button_linear:{width:"100%",height:32,display:"flex",flexDirection:"row",alignItems:"flex-end"},m_button_linear_up:{height:16},m_arrow_icon:{lineHeight:(0,h.Nv)((0,h.Vh)(16)),marginLeft:(0,h.Vh)(4)}}),R=n(36472),j=n(99739),N=(0,j.ZP)(),V=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.priceTipList,n=e.prefix,i=e.fstyle,o=void 0===i?{}:i,r=(0,h.Ec)(C,o),a="mini"==N.platform;return(0,v.jsxs)(c.G7,{style:r.m_payment_tips,children:[(0,v.jsx)(c.xv,{style:r.title,children:"\u4ef7\u683c\u8bf4\u660e"}),(0,v.jsx)(c.G7,{style:this.state.layoutFinish||"RN"===N.platform?{}:{height:4*(a?(0,h.Vh)(16):16),overflow:"scroll"},children:(0,v.jsx)(R.Z,{message:t,lineHeight:(0,h.Vh)(16,{needPx:!0}),lineNum:4,prefix:n,fstyle:D,showMoreIcon:!0,needShrinkHeight:a,linearStyle:{linearGradientStart:{x:0,y:0},linearGradientEnd:{x:0,y:1},linearGradientColor:["rgba(255, 255, 255, 0)","rgba(255, 255, 255,1) 100%"],direction:180},showMoreText:{arrowdown:"\u67e5\u770b\u66f4\u591a"},onLayoutFinish:this.onLayoutFinish})})]})}}]),n}(T),L=n(58013),E=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.totleContent,i=e.bottom,o=e.priceTipList,r=void 0===o?"":o,a=e.from,l=e.extraList,u=e.descTips,d=e.buttonInfo,p=e.callback,f=e.overdraftTips,m=d?c.G7:s.Fragment,g=d?c.pf:c.G7;(0,j.ZP)().platform;return(0,v.jsxs)(m,{style:d?(0,h.wh)([I.outermost]):null,children:[(0,v.jsxs)(g,{style:(0,h.wh)([I.m_payment_popLayer,d?I.scroll_view_style:null]),scrollY:!0,className:"m_payment",children:[(0,v.jsx)(c.G7,{children:!!t.length&&t.map((function(e,o){var s=e.total||null;return(0,v.jsxs)(c.G7,{style:(0,h.wh)([I.m_payment_cont,o!=t.length-1||(null!==n&&void 0!==n&&n.price||null!==i&&void 0!==i&&i.name||!r)&&(null===n||void 0===n||!n.price||"ticket"!=a)?{}:I.m_payment_cont_no_padding_bottom]),children:[!!s&&(0,v.jsx)(_,{name:s.name,price:s.price,marketPrice:s.marketPrice,type:1,descs:s.descs,isDiscount:s.isDiscount||!!s.discountText,discountText:s.discountText,isNoDash:s.isNoDash,extraPrice:s.extraPrice}),e.items&&!!e.items.length&&e.items.map((function(e,t){return(0,v.jsx)(c.G7,{children:(0,v.jsx)(_,{name:e.name,descs:e.descs,price:e.price,marketPrice:e.marketPrice,isDiscount:e.isDiscount||!!e.discountText,discountText:e.discountText})},"content_item_".concat(t))}))]},"content".concat(o))}))}),u&&u.length?(0,v.jsxs)(c.G7,{style:I.m_payment_descTips,children:[(0,v.jsx)(c.xv,{style:I.m_payment_tips_content,children:"\u6e29\u99a8\u63d0\u793a"}),u.map((function(e){return(0,v.jsx)(c.xv,{style:I.m_payment_tips_content,children:e},e)}))]}):null,(null===n||void 0===n?void 0:n.price)&&"ticket"==a&&(0,v.jsx)(c.G7,{style:I.line}),(null===n||void 0===n?void 0:n.price)&&(0,v.jsxs)(c.G7,{style:I.m_payment_total,children:[(0,v.jsx)(c.xv,{style:I.m_payment_total_text,children:n.price}),null!==n&&void 0!==n&&n.info?(0,v.jsx)(c.xv,{style:I.m_payment_return_crash_info,children:n.info}):null]}),l&&l.length?(0,v.jsxs)(c.G7,{children:[(0,v.jsx)(c.G7,{style:I.m_payment_extra_corner,children:(0,v.jsx)(c.G7,{style:I.m_payment_extra_corner_view})}),(0,v.jsx)(c.G7,{style:I.m_payment_extra_content,children:l.map((function(e,t){return(0,v.jsx)(c.G7,{children:(0,v.jsx)(_,{name:e.name,descs:e.descs,price:e.price,isDiscount:!0,type:1,isNoDash:!0,isReturnCash:!0})},"extra".concat(t))}))})]}):null,!(null===i||void 0===i||!i.name)&&(0,v.jsx)(c.G7,{style:I.m_payment_bottom,children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.xv,{style:(0,w.kg)((0,h.wh)([I.m_payment_bottom_text,{paddingRight:8}])),children:i.name}),(0,v.jsx)(c.xv,{style:I.m_payment_bottom_text,children:i.price})]})}),r?(0,v.jsx)(V,{priceTipList:r,prefix:".m_payment",fstyle:d?Z:b}):null,f?(0,v.jsxs)(c.G7,{style:I.m_payment_overdraftTips,children:[(0,v.jsx)(c.G7,{style:I.m_payment_overdraftTips_gap_top}),(0,v.jsxs)(c.G7,{style:(0,h.wh)([I.m_payment_overdraftTips_title]),children:[(0,v.jsx)(c.xv,{style:I.m_payment_overdraftTips_title_text,children:f.title}),(0,v.jsx)(c.G7,{style:I.m_payment_overdraftTips_gap}),(0,v.jsx)(c.xv,{style:I.m_payment_overdraftTips_title_text,children:f.titleSuffix}),f.titleTips?(0,v.jsx)(c.G7,{style:I.m_payment_overdraftTips_title_tips,children:(0,v.jsx)(c.xv,{style:I.m_payment_overdraftTips_title_tips_text,children:f.titleTips})}):null]}),(0,v.jsx)(c.G7,{style:(0,h.wh)([I.m_payment_overdraftTips_content_bottom,I.m_payment_overdraftTips_title]),children:(0,v.jsx)(c.xv,{style:I.m_payment_overdraftTips_text,children:"".concat(f.repayAmountDesc,"(").concat(f.feeDesc,")")})}),(0,v.jsx)(c.G7,{style:(0,h.wh)([I.m_payment_overdraftTips_content_top,I.m_payment_overdraftTips_title]),children:(0,v.jsx)(c.xv,{style:I.m_payment_overdraftTips_text,children:"".concat(f.firstRepayDay,"\u5f00\u59cb\u8fd8\u6b3e\uff0c").concat(f.fundDescInfo)})})]}):null,(0,v.jsx)(c.G7,{style:(0,h.wh)([I.m_payment_bottom_placeholder])})]}),!!d&&(0,v.jsx)(L.Z,{nextTitle:d?d.layerText:"",showPriceAres:!1,onlyBtn:!0,booking:p,linearGradientStyles:d.buttonLinear,fstyle:{m_icons:{marginLeft:0},m_wrapper:{zIndex:1}},notHigh:!0})]})}}]),n}(u)},36472:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(90201),o=n(72747),r=n(59201),a=n(90129),s=n(58472),c=n(56569),l=function(e){var t=e.lineHeight*e.lineNum;(0,c.gn)()&&e.needShrinkHeight&&(t=Math.floor(t));var n=(0,i.useState)(!1),r=(0,a.Z)(n,2),l=r[0],u=r[1],d=(0,i.useState)("hide"),p=(0,a.Z)(d,2),h=p[0],f=p[1],m=(0,i.useState)(!1),v=(0,a.Z)(m,2),_=v[0],g=v[1],y=(0,i.useRef)(new o.fS.Value(t)).current,x=(0,i.useRef)(null),k=(0,i.useRef)(null),b=(0,i.useState)(t),Z=(0,a.Z)(b,2),I=Z[0],w=Z[1],S=function(){if("hide"===h){var n;o.fS.timing(y,{toValue:I,duration:200,useNativeDriver:!1,dom:k.current,H5Animation:{maxHeight:I+"px"}}).start((function(){})),f("open"),null===(n=e.openCallBack)||void 0===n||n.call(e)}else{if(e.isForbiddenHide)return;o.fS.timing(y,{toValue:t,duration:200,useNativeDriver:!1,dom:k.current,H5Animation:{maxHeight:t+"px"}}).start((function(){})),f("hide")}},P=function(n){g(!0),e.onLayoutFinish&&e.onLayoutFinish(),n&&(w(n.height),Math.floor(n.height)<=t+5?(u(!1),o.fS.timing(y,{toValue:n.height,duration:200,useNativeDriver:!1,dom:k.current,H5Animation:{maxHeight:n.height+"px"}}).start((function(){}))):(u(!0),o.fS.timing(y,{toValue:t,duration:200,useNativeDriver:!1,dom:k.current,H5Animation:{maxHeight:t+"px"}}).start((function(){}))))};return(0,i.useEffect)((function(){(0,s.L6)(x.current,P,!1,e.prefix)}),[]),{textViewRef:x,wrapRef:k,heightAnim:y,defaultHeight:I,showMore:l,status:h,layOutFinish:_,setRnAnimation:S}},u=l,d=n(298),p=n(17366),h=n(9353),f={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:.5,y:0},linearGradientColor:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"]},m={m_textcollapse:{position:"relative",fontSize:(0,p.Vh)(12),marginTop:(0,p.Vh)(6)},m_textcollapse_wrap:(0,d.Z)({},(0,p.eR)("max-height 0.1s")),m_textcollapse_content_text:{fontSize:(0,p.Vh)(12),color:"#333"},m_button:{position:"absolute",right:(0,p.Vh)(0),bottom:(0,p.Vh)(0),width:(0,p.Vh)(60),paddingLeft:(0,p.Vh)(0)},m_button_up:{position:"relative",width:"100%"},m_button_text:{color:"#0086f6",display:"flex",textAlign:"right",fontSize:(0,p.Vh)(12)},m_button_linear:(0,d.Z)((0,d.Z)({},p.xI),{},{justifyContent:"flex-end"})},v=(0,h.Z)(m),_=n(99739),g=n(39140),y=n(2269),x=(0,_.ZP)(),k=(0,c.gn)()&&x.platform===g.NX.RN,b=(x.platform,g.NX.Mini,function(e){var t=u(e),n=t.heightAnim,i=t.textViewRef,a=t.wrapRef,s=t.showMore,c=t.status,l=t.layOutFinish,d=t.setRnAnimation,h=t.defaultHeight,m=e.message,_=e.ishtml,b=e.fstyle,Z=e.renderMoreButton,I=e.lineHeight,w=e.logs,S=e.lineNum,P=e.keyValue,T=e.linearStyle,C=e.showMoreIcon,D=e.showMoreText,R=void 0===D?{}:D,j=e.opacityAnimated,N=void 0!==j&&j,V=e.isForbiddenHide,L=f;T&&(L=T);var E=w||{},A=E.devtraceLog,F=E.textExposureLog,M=E.prefixTest,O=E.clickDownLog,B=E.clickUpLog,z=E.clickDownExposureLog,H=E.clickUpExposureLog,U="hide"===c,G=U?O:B,q=U?z:H,W=(0,p.Ec)(v,b),K=!(V&&!U)&&(s&&l);return(0,y.jsxs)(r.Z,{onClick:d,activeOpacity:1,log:G,testID:M?"".concat(M,"_").concat(U?"down":"up"):"",devTraceData:A&&A(U?"\u5c55\u5f00":"\u6536\u8d77"),style:(0,p.wh)([W.m_textcollapse]),children:[(0,y.jsx)(o.fS.View,{style:(0,p.wh)([W.m_textcollapse_wrap,{overflow:l?"hidden":"scroll"},N?{opacity:l?1:0}:{},x.platform===g.NX.RN?{maxHeight:n}:{}]),ref:a,children:(0,y.jsx)(o.G7,{className:P||"",ref:i,testID:F,style:(0,p.wh)([W.m_textcollapse_content,{height:l?h:"auto",lineHeight:(0,p.Nv)(I)}]),children:_?m:(0,y.jsx)(o.xv,{style:(0,p.wh)([W.m_textcollapse_content_text,{lineHeight:(0,p.Nv)(I)}]),children:m})})}),K?(0,y.jsx)(o.G7,{style:(0,p.wh)([W.m_button,U?{}:W.m_button_up]),children:Z?Z(U):(0,y.jsxs)(o.o,{direction:L.direction||90,colors:L.linearGradientColor,start:L.linearGradientStart,end:L.linearGradientEnd,style:(0,p.wh)([W.m_button_linear,U?{}:W.m_button_linear_up]),children:[(0,y.jsx)(o.xv,{style:(0,p.wh)([W.m_button_text,{lineHeight:(0,p.Nv)(I-(4==S&&k?4:0))}]),testID:s?q:null,children:U?(null===R||void 0===R?void 0:R.arrowdown)||"\u5c55\u5f00":(null===R||void 0===R?void 0:R.arrowup)||"\u6536\u8d77"}),C?(0,y.jsx)(o.JO,{style:(0,p.wh)([W.m_arrow_icon,{lineHeight:(0,p.Nv)(I-(4==S&&k&&U?3:0))}]),type:U?"arrowdown":"arrowup",size:20,color:"#666666"}):null]})}):null]})}),Z=b},91501:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var i=n(298),o=n(57042),r=n(24460),a=n(81876),s=n(21867),c=n(86066),l=n(45023),u=n(90201),d=n(1089),p=n(79301),h=n(95308),f=n(90129),m=n(71515),v=n(92954),_=n.n(v),g=n(19132),y=n(89983),x=n(59001),k=n(45116),b={Title:"key.couponcenter.receivedetailspage.title",Claim:"key.couponcenter.popup.claimall",Received:"key.couponcenter.common.receivestatus_received",Claimed:"key.couponcenter.popup.claimed",ToUse:"key.couponcenter.popup.touse",UseDesc:"key.couponcenter.common.termsandconditions",DetailDesc:"key.couponcenter.common.details",CurrencyAmount:"key.couponcenter.common.currencyamount_tiers",CurrencyAmount_two:"key.couponcenter.common.percentage_tiers",Robbed:"key.couponcenter.popup.outofstock",NowDisdount:"key.couponcenter.common.currencyamount_off",claimFailed:"key.couponcenter.popup.failurenotice",claimSuccess:"key.couponcenter.popup.successnotice",timeZoneDesc:"key.couponcenter.common.validitytimezone",promoCode:"key.couponcenter.common.promocode",validityDate:"key.couponcenter.common.validity",receive:"key.couponcenter.common.receive",noContent:"key.couponcenter.receivedetailspage.usablecodes_prompt",subTitle:"key.couponcenter.receivedetailspage.usablecodes_subtitle",claimTitle:"key.couponcenter.receivedetailspage.receivablecodes_title",useTitle:"key.couponcenter.receivedetailspage.usablecodes_title",nullError:"key.couponcenter.popup.failurenotice.nullerror",newuseronly:"key.couponcenter.common.receivestatus_newuseronly",errortoast:"key.couponcenter.common.errortoast.common",detailsrealnameconfirm:"key.couponcenter.receivedetailspage.realnameconfirm",detailsrealnameconfirmgiveup:"key.couponcenter.receivedetailspage.realnameconfirm.giveup",detailsrealnameconfirmauth:"key.couponcenter.receivedetailspage.realnameconfirm.authenticate",detailsrealnameclaimfail:"key.couponcenter.receivedetailspage.claimfailure.realname",popuprealnameconfirm:"key.couponcenter.receivepopup.realnameconfirm",popuprealnameconfirmgiveup:"key.couponcenter.receivepopup.realnameconfirm.giveup"};function Z(e){var t,n,o=e.compVersion,r=e.componentType,a=e.visible,s=e.notUseCoupon,c=e.initCouponCode,l=e.data,m=e.showToast,v=e.logTrace,_=e.logUbtDevTrace,g=e.ensureUbtHasAttached,Z=e.fetch,w=e.clientEnv,S=e.traceLogId,P=e.firstDidAmount,T=e.logMetric,C=e.miniType,D=e.auth,R=(e.kmInfo,e.timeout),j=e.onVisibleChange,N=e.onSelect,V=e.onAutoClaim,L=e.onError;null===(t=l.bookingInfo)||void 0===t||null===(t=t.priceCalendar)||void 0===t||t.forEach((function(e){e.price=String(e.price)})),null===(n=l.bookingInfo)||void 0===n||null===(n=n.resourceList)||void 0===n||n.forEach((function(e){e.price=String(e.price)})),console.log("%c \ud83c\udf48 props: ","font-size:20px;background-color: #465975;color:#fff;",e);var E=(0,u.useState)(a),A=(0,f.Z)(E,2),F=A[0],M=A[1],O=(0,u.useState)(s),B=(0,f.Z)(O,2),z=B[0],H=B[1],U=(0,u.useState)(),G=(0,f.Z)(U,2),q=G[0],W=G[1],K=(0,u.useState)(""),Y=(0,f.Z)(K,2),X=Y[0],Q=Y[1],J=(0,u.useState)({}),$=(0,f.Z)(J,2),ee=$[0],te=$[1],ne=(0,u.useState)([]),ie=(0,f.Z)(ne,2),oe=ie[0],re=ie[1],ae=(0,u.useState)(c),se=(0,f.Z)(ae,2),ce=se[0],le=se[1],ue=(0,u.useState)(null),de=(0,f.Z)(ue,2),pe=de[0],he=de[1],fe=(0,u.useState)(!1),me=(0,f.Z)(fe,2),ve=me[0],_e=me[1],ge=(0,u.useState)(),ye=(0,f.Z)(ge,2),xe=ye[0],ke=ye[1],be=(0,u.useState)(!1),Ze=(0,f.Z)(be,2),Ie=Ze[0],we=Ze[1],Se=(0,u.useMemo)((function(){return(0,y.Ze)()}),[]),Pe=(0,u.useMemo)((function(){return{pageId:l.pageId,componentId:k.o.CE.ORDER_USE_COUPON.id,componentName:k.o.CE.ORDER_USE_COUPON.name,componentVersion:o,ubtSourceKey:k.o.sH[l.source]}}),[]),Te=[d._1.Offline,d.Gi.Offline].includes(l.saleChannel);function Ce(e,t){We(k.o.NG.CLICK,{module:e,strategyid:t})}(0,u.useImperativeHandle)(e.ref,(function(){return{show:function(){M(!0),We(k.o.NG.USECOUPON_INVOKE_SHOW)},hide:function(){M(!1),We(k.o.NG.USECOUPON_INVOKE_HIDE)}}})),(0,u.useEffect)((function(){return P&&P(),g&&g(l.pageId,w.clientType),function(){j&&j(!1)}}),[]),(0,u.useEffect)((function(){Re()}),[JSON.stringify(e.data),e.hasError]),(0,u.useEffect)((function(){Ge()}),[l.locale]),(0,u.useEffect)((function(){s&&!z&&(H(!0),le(null))}),[s]),(0,u.useEffect)((function(){M(a)}),[a]),(0,u.useEffect)((function(){F&&We(k.o.NG.EXPOSURE),j&&j(F)}),[F]);var De=(0,u.useMemo)((function(){return{env:w.env,client:w.clientType,fetch:Z,logTrace:v,logUbtDevTrace:_,logMetric:T,isOffline:Te,ctType:w.ctType,auth:D,cid:l.clientId}}),[e]);function Re(){return je.apply(this,arguments)}function je(){return je=(0,h.Z)((0,p.Z)().mark((function e(){var t,n;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=new Promise((function(e,t){setTimeout((function(){t(new Error(d.De.TIMEOUT))}),R||k.o.MY)})),n=Ne(),Promise.race([t,n]).catch((function(e){L&&L({name:e.name,errorCode:e.message,errorStack:(new Error).stack})}));case 3:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function Ne(){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,h.Z)((0,p.Z)().mark((function t(){var n,o,r,a,u,h,f,m,v,_,g,y,b,Z,I,w;return(0,p.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasError){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,r=null===(n=l.extendInfoList)||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return{key:t,value:String(n)}})),a={baseInfo:Me(),bookingInfo:l.bookingInfo,isFirstValidate:!1,extendInfoList:r},u=(0,i.Z)((0,i.Z)({},De),{},{api:k.o.bl.USE_COUPON,variables:a,componentInfo:Pe,traceLogId:S}),t.next=8,(0,x.v)(u);case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={};case 11:if(h=t.t0,f=h.autoClaimResult,m=h.list,v="true"===(null===r||void 0===r||null===(o=r.find((function(e){return e.key="needAutoReceive"})))||void 0===o?void 0:o.value),v&&"function"==typeof V&&f&&(_={success:f.success,message:f.message,svcErroCode:f.svcErroCode,svcErrorMessage:f.svcErrorMessage},g=(m||[]).find((function(e){return e.couponCode==f.couponCode})),g&&Object.assign(_,{claimedInfo:{promotionSecretId:f.promotionSecretId,couponCode:g.couponCode,promotionId:g.promotionId,couponName:g.couponName,deductionStrategyType:g.deductionStrategyType,deductionList:g.deductionList,deductionAmount:g.deductionAmount,matchedQuantity:g.matchedQuantity,promotionLabel:g.promotionLabel,extendInfo:g.extendInfo}}),V&&V(_)),y=m||[],re(y||[]),!s&&!z){t.next=24;break}return t.next=21,Ke(null,y,d.GD.NotUse,q);case 21:return b=t.sent,b&&!z&&(H(!0),le(null)),t.abrupt("return");case 24:if(!c){t.next=45;break}if(q!=d.so.Default){t.next=29;break}Le((y||[]).filter((function(e){return e.status}))),t.next=43;break;case 29:return t.next=31,He(c);case 31:if(Z=t.sent,Z&&Z.available){t.next=39;break}return t.next=35,Ke(null,y,d.GD.NotAvailable,q);case 35:I=t.sent,I&&le(null),t.next=43;break;case 39:return t.next=41,Ke(Z.couponInfo,y,d.GD.Use,q);case 41:w=t.sent,w&&le(c);case 43:t.next=46;break;case 45:Le((y||[]).filter((function(e){return e.status})));case 46:We(k.o.NG.USECOUPON_LOAD),t.next=52;break;case 49:t.prev=49,t.t1=t["catch"](2),qe(t.t1);case 52:case"end":return t.stop()}}),t,null,[[2,49]])}))),Ve.apply(this,arguments)}function Le(e){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,h.Z)((0,p.Z)().mark((function e(t){var n,i,o,r,a,s=arguments;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:0,!(n>k.o.o7||n+1>t.length)){e.next=5;break}i=null,e.next=17;break;case 5:return o=t[n],e.next=8,He(o.couponCode);case 8:if(r=e.sent,!r.available){e.next=13;break}i=o,e.next=17;break;case 13:if(We(k.o.NG.USECOUPN_BESTSELECT_VALIDATEFAIL,{promotionId:o.promotionId,couponCode:o.couponCode}),!(n<k.o.o7)){e.next=17;break}return Le(t,++n),e.abrupt("return");case 17:return e.next=19,Ke(i,t,i?d.GD.Use:d.GD.NotUse,d.so.Default);case 19:a=e.sent,a&&(W(d.so.Default),le((i||{}).couponCode));case 21:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Ae(e,t){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,h.Z)((0,p.Z)().mark((function e(t,n){var i,o,r,a=arguments;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(a.length>2&&void 0!==a[2])||a[2],null!=t&&void 0!=t&&""!=t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,Ce("CodeUse"),e.next=7,He(t);case 7:if(o=e.sent,o.available){e.next=11;break}return F&&(n==d.AH.PC?(we(!0),ke(o)):m&&m({className:"coupon_toast",content:o.notAvailableMessage,duration:1500,needMask:!1,type:"failed"})),e.abrupt("return");case 11:return e.next=13,Ke(o.couponInfo,oe,d.GD.Use,d.so.UserInput);case 13:r=e.sent,r&&(Q(""),H(!1),le(t),W(d.so.UserInput),i&&ze()),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),qe(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])}))),Fe.apply(this,arguments)}var Me=(0,u.useCallback)((function(){return{channelId:l.saleChannel,allianceId:l.allianceId,siteId:l.siteId,clientId:l.clientId,source:l.source,utcOffset:Se.offset,locale:l.locale,currency:l.currency,outOpenId:l.outOpenId,uid:Te?l.uid:"",rmsToken:l.rmsToken,requestScene:d.NT.OrderUse,version:o,componentType:r,miniType:C}}),[e.data]);function Oe(e,t){return Be.apply(this,arguments)}function Be(){return Be=(0,h.Z)((0,p.Z)().mark((function e(t,n){var i,o,r,a=arguments;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(a.length>2&&void 0!==a[2])||a[2],e.prev=1,o=!0,!n){e.next=13;break}if(!z){e.next=7;break}return i&&ze(),e.abrupt("return");case 7:return e.next=9,Ke(null,oe,d.GD.NotUse,d.so.UserSelect);case 9:o=e.sent,o&&(H(!0),le(""),W(d.so.UserSelect),setTimeout((function(){i&&ze()}),0)),e.next=26;break;case 13:if(!t){e.next=26;break}if(t!=ce){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,He(t);case 18:if(r=e.sent,!F||r.available){e.next=22;break}return m&&m({className:"coupon_toast",content:r.notAvailableMessage,duration:1500,needMask:!1,type:"failed"}),e.abrupt("return");case 22:return e.next=24,Ke(r.couponInfo,oe,d.GD.Use,d.so.UserSelect);case 24:o=e.sent,o&&(le(t),H(!1),W(d.so.UserSelect),setTimeout((function(){i&&ze()}),0));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](1),qe(e.t0);case 31:case"end":return e.stop()}}),e,null,[[1,28]])}))),Be.apply(this,arguments)}function ze(){he(null),void 0!==F&&M(!1),e.onClose&&e.onClose(),We(k.o.NG.USECOUPON_CLOSE)}function He(e){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,h.Z)((0,p.Z)().mark((function e(t){var n,o,r,a,s,c,u,d,h,f;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.bookingInfo.shoppingId,r=null===(n=l.extendInfoList)||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return{key:t,value:String(n)}})),a=t,"{}"==JSON.stringify(a)&&(a=null),s={baseInfo:Me(),validateInfo:{couponCode:a,shoppingId:o,bookingInfo:l.bookingInfo,extendInfoList:r,needVerifyRealName:!1}},c=(0,i.Z)((0,i.Z)({},De),{},{api:k.o.bl.VALIDATE,variables:s,componentInfo:Pe,traceLogId:S}),e.next=8,(0,x.v)(c);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={validateCoupon:{}};case 11:return u=e.t0,d=u.couponInfo,h=u.resultStatus,f=h&&h.success&&0==h.errorCode,e.abrupt("return",{couponInfo:d,available:f,notAvailableMessage:h&&h.customerErrorMessage});case 16:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}var Ge=(0,u.useCallback)((0,h.Z)((0,p.Z)().mark((function t(){var n,o,r,a,s;return(0,p.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={sharkLocale:e.data.locale,baseInfo:Me()},o=(0,i.Z)((0,i.Z)({},De),{},{api:k.o.bl.SHARK,variables:n,componentInfo:Pe,traceLogId:S}),t.prev=2,t.next=5,(0,x.v)(o);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0={};case 8:r=t.t0,a=r.data,s=void 0===a?{}:a,te(s),t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](2),qe(t.t1);case 17:case"end":return t.stop()}}),t,null,[[2,14]])}))),[e.data.locale,e.clientEnv]);function qe(e){console.error(e),We(k.o.NG.JSERROR,{error:{name:e.name,message:e.message,stack:JSON.stringify(e.stack)}})}function We(t,n){if(v)try{var o,r={comptID:Pe.componentName,ttdver:Pe.componentVersion,productId:null===(o=l.bookingInfo)||void 0===o?void 0:o.productId,pagebu:l.source,state:{notUseCoupon:z,selectedBy:q,couponCodeText:X,selectedCouponCode:ce,expandCode:pe},props:(0,i.Z)((0,i.Z)({},e.data),{},{visible:e.visible,clientEnv:e.clientEnv,initCouponCode:e.initCouponCode,notUseCoupon:e.notUseCoupon})},a={key:t,value:n?(0,i.Z)((0,i.Z)({},n),r):r};v(a)}catch(e){console.error(e)}}function Ke(e,t,n,i){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,h.Z)((0,p.Z)().mark((function e(t,n,i,o){var r,a,s;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=((n||[]).filter((function(e){return e.isTopOne}))||[])[0],a={useStatus:i,selectedBy:null!==o&&void 0!==o?o:d.so.UserSelect,availableCount:(n||[]).filter((function(e){return e.status})).length,couponInfo:t?{promotionId:t.promotionId,couponCode:t.couponCode,couponName:t.couponName,deductionAmount:t.deductionAmount,deductionList:t.deductionList,deductionStrategyType:t.deductionStrategyType,extendInfo:t.extendInfo,matchedQuantity:t.matchedQuantity,promotionLabel:t.promotionLabel,requireRealName:t.requireRealName,receiverName:t.receiverName}:null,isTopOne:!(!t||!r||r.couponCode!=t.couponCode)},We(k.o.NG.USECOUPON_ONSELECT,{options:a}),e.next=5,N(a);case 5:if(s=e.sent,I(s)||!1!==s.success){e.next=11;break}return m&&F&&m({className:"coupon_toast",content:s.message||ee[b.errortoast],duration:1500,needMask:!1,type:"failed"}),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}var Xe={ctrl:{validateCoupon:He,handleSelectCoupon:Oe,handleClickUseCoupon:Ae,handleClose:ze,handleTraceClick:Ce},modelState:{notUseCoupon:z,sharkData:ee,couponCodeText:X,timezone:Se,couponList:oe,selectedCouponCode:ce,expandCode:pe,componentInfo:Pe,inScrolling:ve,validateCodeRst:xe,showValidateMsg:Ie,visible:F},modelAction:{setInScrolling:_e,setNotUseCoupon:H,setCouponCodeText:Q,setExpandCode:he,setSelectedCouponCode:le,setShowValidateMsg:we}};return Xe}var I=function(e){return null===e||void 0===e};function w(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1}function S(e,t){var n,i;if(!w(e)){var o=e.toString(),r=(null===o||void 0===o||null===(n=o.split(".")[0])||void 0===n?void 0:n.length)||0,a=(null===o||void 0===o||null===(i=o.split(".")[1])||void 0===i?void 0:i.length)||0,s=r+a;return t?s>=6?24:s>=4?28:32:s>=6?15:s>=4?20:32}}var P=n(2269),T=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,a.Z)(i),"handleSelect_throttle",void 0),(0,l.Z)((0,a.Z)(i),"imgRef",void 0),(0,l.Z)((0,a.Z)(i),"timer",void 0),i.handleSelect_throttle=function(){i.timer||(i.props.handleSelect(i.props.couponCode,!1,i.props.closeAfterSelect),i.props.handleTraceClick("AvailableCoupon",i.props.promotionId)),i.timer=setTimeout((function(){i.timer=null}),1e3)},i}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.groupId,t.positionId,t.couponCode),i=t.couponType,o=t.status,r=t.promotionId,a=t.unavailableReasonShown,s=t.deductionInfoShown,c=(t.deductionAmount,t.detailRemarkShown),l=t.handleExpand,u=t.expanded,d=t.handleTraceClick,p="".concat(2*S(s.amount,!1),"rpx");return(0,P.jsxs)(m.View,{className:"coupon_block",children:[(0,P.jsxs)(m.View,{className:"coupon_info ".concat(o?"available":"notAvailable"),children:[(0,P.jsx)(m.View,{className:"info_deduction",onClick:function(){l(u?null:n),d("Detail",r)},children:s.fullDeduction?(0,P.jsx)(m.View,{className:"deduction_fullamount",children:s.desc}):(0,P.jsxs)(m.View,{children:[(0,P.jsx)(m.View,{className:"deduction_part1 font10px",children:s.desc}),(0,P.jsx)(m.View,{className:"deduction_part2",children:4==s.type?(0,P.jsx)("span",{className:"",children:s.desc}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(m.View,{className:"deduction_amount",style:{fontSize:p},children:s.amount}),(0,P.jsx)(m.View,{className:"deduction_unit",children:s.discountUnit})]})}),o&&s.deductionAmountTag&&(0,P.jsx)(m.View,{className:"deduction_part3",children:s.deductionAmountTag})]})}),(0,P.jsxs)(m.View,{className:"info_desc",onClick:function(){l(u?null:n),d("Detail",r)},children:[(0,P.jsx)(m.View,{className:"desc_name",children:this.props.couponName}),(0,P.jsxs)(m.View,{className:"desc_middle",children:[(0,P.jsx)(m.View,{className:"desc_shortremark",style:{width:o?"374rpx":"462rpx"},children:this.props.shortRemark}),!!this.props.useDateShown&&(0,P.jsx)(m.View,{className:"desc_usedate",children:this.props.useDateShown})]}),(0,P.jsxs)(m.View,{className:"desc_detail",children:[(0,P.jsx)(m.View,{className:"font10px",children:"\u8be6\u7ec6\u8bf4\u660e"}),(0,P.jsx)(m.View,{className:"expandicon",children:this.props.expanded?(0,P.jsx)(m.Text,{className:"expandicon_text",children:"\ue946"}):(0,P.jsx)(m.Text,{className:"expandicon_text",children:"\ue945"})})]})]}),!!o&&(0,P.jsx)(m.View,{className:"desc_select",onClick:function(){return e.handleSelect_throttle()},children:this.props.selected?(0,P.jsx)(m.View,{className:"coupon_select_icon",children:"\ued1e"}):(0,P.jsx)(m.View,{className:"coupon_select_icon",children:"\uee35"})})]}),this.props.expanded&&(0,P.jsxs)(m.View,{className:"coupon_detail_div",children:[s&&s.deductionList&&(0,g.yo)(s.deductionList,2).map((function(e,t){return(0,P.jsx)(m.View,{className:"detail_deduction_list",children:e.map((function(e,t){return(0,P.jsx)(m.View,{className:"deduction_info_div",children:(0,P.jsx)(m.View,{className:"font10px",children:e})},t)}))},t)})),(0,P.jsx)(m.View,{className:"detail_remark_list",children:(c||[]).map((function(e,t){return(0,P.jsx)(m.View,{className:"detail_remark_list_text",children:e},t)}))}),1==i&&(0,P.jsxs)(m.View,{className:"detail_remark_code",children:["\u4f18\u60e0\u5238\u7801\uff1a",n]})]}),!o&&(0,P.jsxs)(m.View,{className:"coupon_reason_div ".concat(this.props.expanded?"withexpand":""),children:[(0,P.jsx)(m.View,{className:"icon_info font10px",children:"\uf4d5"}),(0,P.jsx)(m.View,{className:"reason_list_div",children:(a||[]).map((function(e,t){return(0,P.jsx)(m.View,{className:"font10px",children:e},t)}))})]})]})}}]),n}(u.PureComponent),C=u.useEffect,D=u.forwardRef,R=u.useState,j=D((function(e,t){var n=R(""),o=(0,f.Z)(n,2),r=o[0],a=o[1],s=R(!1),c=(0,f.Z)(s,2),l=c[0],u=c[1],y=R(!1),x=(0,f.Z)(y,2),k=x[0],b=x[1],I=(e.data,e.title),w=void 0===I?"\u9009\u62e9\u4f18\u60e0\u5238":I,S=(e.style,e.clientEnv),D=e.needCodeInput,j=void 0===D||D,N=e.needPopover,V=void 0===N||N,L=(0,i.Z)((0,i.Z)({},e),{},{clientEnv:(0,i.Z)((0,i.Z)({},S),{},{clientType:d.AH.MiniProgram}),compVersion:g.Ke,componentType:d.Lm.Taro,miniType:(0,g.H9)(),showToast:function(e){_().showToast({title:e.content,icon:"none",mask:e.needMask,duration:e.duration})},logTrace:g.qn,logMetric:g.HR,logUbtDevTrace:g.q6,auth:g.Y8&&g.Y8.user.auth||(0,g.v0)(),fetch:g.jJ,ensureUbtHasAttached:null,ref:t,onVisibleChange:function(e){},firstDidAmount:function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t;return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("%cexec useCoupon firstDidAmount","color:yellow"),e.next=3,(0,g.So)();case 3:t=e.sent,t&&t.safeArea&&t.safeArea.top&&t.safeArea.top>20&&(u(!0),console.log("%c\u68c0\u6d4b\u5230\u5f02\u5f62\u5c4f","color:yellow"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),E=Z(L),A=E.modelState,F=E.modelAction,M=E.ctrl,O=A.timezone,B=A.couponList,z=A.selectedCouponCode,H=A.couponCodeText,U=A.expandCode,G=(A.sharkData,A.notUseCoupon),q=A.visible,W=F.setCouponCodeText,K=F.setExpandCode,Y=M.handleSelectCoupon,X=M.handleClickUseCoupon,Q=M.handleClose,J=M.handleTraceClick,$=B.filter((function(e){return!!e.status})).length;return C((function(){q?(a(""),_().nextTick((function(){b(!0)}))):(b(!1),setTimeout((function(){a("displayNone")}),100))}),[q]),(0,v.useDidShow)((function(){})),(0,v.useDidHide)((function(){})),(0,v.usePullDownRefresh)((function(){})),(0,P.jsxs)(m.View,{className:"ttd-useCoupon ".concat(k?"ttd-marketing-show":"ttd-marketing-hidden"),children:[V&&(0,P.jsx)(m.View,{className:"ttd-marketing-mask ".concat(r),onClick:Q,catchMove:!0}),(0,P.jsxs)(m.View,{className:"ttd-marketing-half-screen-".concat(V?"dialog":"block"," ").concat(r),catchMove:V,children:[V&&(0,P.jsxs)(m.View,{className:"ttd-marketing-half-claim-header",children:[(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-close ttd-marketing-icon-close",hoverClass:"ttd-marketing-close-active",onClick:Q}),(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-title",children:w}),(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-right"})]}),(0,P.jsxs)(m.ScrollView,{className:"ttd-marketing-half-claim-body",scrollY:!0,scrollWithAnimation:!0,style:{marginBottom:l?"34rpx":0},children:[j&&(0,P.jsxs)(m.View,{className:"ttd-marketing-half-useCoupon-inputCode",children:[(0,P.jsx)(m.Input,{className:"code_text_input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u5238\u7801",value:H,onClick:function(){J("CodeInput")},onInput:function(e){W(e.detail.value)}}),!!H&&(0,P.jsx)(m.Text,{className:"code_clear_icon",onClick:function(){W("")},children:"\ue003"}),(0,P.jsx)(m.View,{className:"code_exchange_btn ".concat(H?"active":""),onClick:function(){J("CodeUse"),H&&X(H,e.clientEnv.clientType)},children:"\u4f7f\u7528"})]}),$<=0?(0,P.jsxs)(m.View,{className:"ttd-marketing-half-useCoupon-noContent",children:[(0,P.jsx)(m.Image,{className:"noContent-img",src:"https://pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),(0,P.jsx)(m.View,{className:"empty_text1",children:"\u6682\u65e0\u53ef\u7528\u4f18\u60e0\u5238"}),j&&(0,P.jsx)(m.View,{className:"empty_text2",children:"\u5982\u679c\u60a8\u6709\u4f18\u60e0\u5238\u7801\uff0c\u53ef\u8f93\u5165\u5e76\u4f7f\u7528\u4f18\u60e0"})]}):-480!=O.offset&&(0,P.jsx)(m.View,{className:"coupon_timezone",children:"\u6709\u6548\u671f\u663e\u793a\u65f6\u533a\uff1aGMT+08:00"}),(0,P.jsxs)(m.View,{className:"ttd-marketing-half-useCoupon-coupon_list",children:[$>0&&(0,P.jsxs)(m.View,{children:[(0,P.jsxs)(m.View,{className:"list_availablecount_text",children:["\u53ef\u7528\u4f18\u60e0\u5238\uff08",(0,P.jsx)(m.Text,{className:"list_availablecount_text_number",children:$}),"\u5f20\uff09"]}),(0,P.jsxs)(m.View,{className:"coupon_notuse",children:[(0,P.jsx)(m.View,{className:"coupon_notuse_text",children:"\u4e0d\u4f7f\u7528\u4f18\u60e0\u5238"}),(0,P.jsx)(m.View,{onClick:function(){Y(null,!0,V),J("NotUse")},children:G?(0,P.jsx)(m.View,{className:"coupon_notuse_btn",children:"\ued1e"}):(0,P.jsx)(m.View,{className:"coupon_notuse_btn",children:"\uee35"})})]})]}),(B||[]).map((function(e,t){return(0,P.jsx)(T,(0,i.Z)({},(0,i.Z)((0,i.Z)({},e),{},{groupId:e.status?1:2,positionId:e.status?t+1:t-$,selected:!G&&e.couponCode==z,expanded:e.couponCode==U,closeAfterSelect:V,handleSelect:Y,handleExpand:K,handleTraceClick:J})),"".concat(e.couponCode,"-").concat(t))}))]})]})]})]})})),N=u.memo(j);function V(e){var t=e.title,n=void 0===t?"\u9009\u62e9\u4f18\u60e0\u5238":t,i=e.needPopover,o=void 0===i||i,r=(0,u.useState)(e.visible),a=(0,f.Z)(r,2),s=a[0],c=a[1];(0,u.useEffect)((function(){c(e.visible)}),[e.visible]);var l=function(){c(!1),e.onClose&&e.onClose()};return(0,P.jsxs)(m.View,{className:"ttd-useCoupon ".concat(s?"ttd-marketing-show":"ttd-marketing-hidden"),children:[o&&(0,P.jsx)(m.View,{className:"ttd-marketing-mask ".concat(s?"":"displayNone"),onClick:l,catchMove:!0}),(0,P.jsxs)(m.View,{className:"ttd-marketing-half-screen-".concat(o?"dialog":"block"," ").concat(s?"":"displayNone"),catchMove:!0,children:[o&&(0,P.jsxs)(m.View,{className:"ttd-marketing-half-claim-header",children:[(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-close ttd-marketing-icon-close",hoverClass:"ttd-marketing-close-active",onClick:l}),(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-title",children:n}),(0,P.jsx)(m.View,{className:"ttd-marketing-half-claim-header-right"})]}),(0,P.jsxs)(m.View,{className:"ttd-marketing-half-useCoupon-error",children:[(0,P.jsx)(m.Image,{className:"error-img",src:"https://pic.c-ctrip.com/VacationH5Pic/tangram-pic/coupon_empty.png"}),(0,P.jsx)(m.View,{className:"error-text1",children:"\u52a0\u8f7d\u672a\u6210\u529f"}),(0,P.jsx)(m.View,{className:"error-text2",children:"\u5982\u957f\u65f6\u95f4\u672a\u89e3\u51b3\u8bf7\u8054\u7cfb\u643a\u7a0b\u5ba2\u670d"}),(0,P.jsx)(m.Button,{className:"retry",onClick:e.handleRetry,children:"\u5728\u8bd5\u4e00\u6b21"})]})]})]})}var L=V,E=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,a.Z)(i),"instance",void 0),i.state={hasError:!1},i.instance=u.createRef(),i.handleRefresh=i.handleRefresh.bind((0,a.Z)(i)),i.triggerError=i.triggerError.bind((0,a.Z)(i)),i}return(0,r.Z)(n,[{key:"componentDidCatch",value:function(e,t){var n={name:e.name,message:e.message,errorStack:e.stack,componentStack:t.componentStack,errorCode:d.De.JSERROR};console.warn("componentDidCatch",n),this.props.onError&&this.props.onError(n)}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"handleRefresh",value:function(){this.setState({hasError:!1})}},{key:"triggerError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError;return e?(0,P.jsx)(L,(0,i.Z)((0,i.Z)({},this.props),{},{handleRetry:this.handleRefresh})):(0,P.jsx)(N,(0,i.Z)((0,i.Z)({},this.props),{},{ref:this.instance}))}}],[{key:"getDerivedStateFromError",value:function(){return console.log("----getDerivedStateFromError"),{hasError:!0}}}]),n}(u.Component),A=E,F=A},91652:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});n(90201);var i=n(72747),o=n(59201),r=n(28570),a=n(9353),s=n(17366),c=(0,a.Z)({container:{alignItems:"center",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},img:{width:(0,s.Vh)(170),height:(0,s.Vh)(170)},tip:{lineHeight:(0,s.Nv)((0,s.Vh)(27)),marginTop:(0,s.Vh)(12),maxWidth:(0,s.Vh)(243.5),color:"#333",fontSize:(0,s.Vh)(17),fontWeight:"500",textAlign:"center"},btn:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:(0,s.Vh)(125),height:(0,s.Vh)(30),backgroundColor:"#006ff6",borderRadius:(0,s.Vh)(4),marginTop:(0,s.Vh)(12)},btnText:{color:"#ffffff",fontSize:(0,s.Vh)(13),letterSpacing:-.16,lineHeight:(0,s.Nv)((0,s.Vh)(17))}}),l=n(2269),u=function(e){return(0,l.jsxs)(i.G7,{style:c.container,children:[(0,l.jsx)(i.Ee,{url:"https://dimg04.c-ctrip.com/images/0AS4e12000amicivdAE29.png_.webp",style:c.img}),(0,l.jsx)(i.xv,{style:c.tip,children:"App\u7248\u672c\u8fc7\u4f4e\uff0c\u6682\u4e0d\u652f\u6301\u9884\u8ba2\u3002\u8bf7\u66f4\u65b0\u81f3\u6700\u65b0\u7248\u643a\u7a0bApp\u9884\u8ba2\u54e6"}),(0,l.jsx)(o.Z,{style:c.btn,onClick:function(){(0,r.Sw)()},children:(0,l.jsx)(i.xv,{style:c.btnText,children:"\u8fd4\u56de\u4e0a\u4e00\u9875"})})]})},d=u},12232:function(e,t,n){"use strict";var i=n(64571);t["Z"]=function(e,t,n){n=n||{};var r=n,a=r.h5Overdue,s=r.ignoreMini,c=r.checkLoginStatusFromServer;c&&i.ZP?i.ZP.user.checkLoginStatusFromServer((function(n){n?e({ReturnCode:"0"}):o({callback:e,rnNotNeedLogin:t,ignoreMini:s})})):i.ZP&&!i.ZP.user.isLogin()||a?o({callback:e,rnNotNeedLogin:t,ignoreMini:s}):e({ReturnCode:"0"})};var o=function(e){var t=e.callback,n=e.rnNotNeedLogin,o=e.ignoreMini;i.ZP.user.login({param:{},callback:function(e){t(e)},rnNotNeedLogin:n,ignoreMini:o})}},48407:function(e,t,n){"use strict";var i=n(298),o=n(64571),r=n(39140),a=n(99739),s={default:["needBasicInfo"],booking:["needBasicInfo","needCityInfo","needUsageTimeLimit","needPackageInfos","needResourceInfos","needSaleProperties","needVendorInfo","needTagInfos","needRelatedPackageLimitSaleInfos","needSubUsageTimeLimit","needSubBasicInfo","needSubResourceBasicInfo"],sku:["needBasicInfo","needVendorInfo"],skuU:["needUsageTimeLimit","needSubUsageTimeLimit"]};t["Z"]=function(e,t){var n,c,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"booking",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",d=e.productId,p=e.needParams,h=(e.pshowcode,[]),f={resourceIds:[]},m={},v=[],_={};if("booking"!=l&&"sku"!=l&&"resource"!=l||e.optid&&e.optid.forEach((function(e){h.push({id:e,idType:3}),f.resourceIds.push(e)})),"booking"==l&&(m={useDate:e.date,needRefundPolicy:!0},_={seckillId:null===e||void 0===e?void 0:e.skid}),"resource"==l&&(m={useDate:"",needRefundPolicy:!0}),"detail"==l){var g=t.clientInfo,y=void 0===g?{}:g,x={extension:[],cid:o.ZP.clientID||"",syscode:y.syscode};y.extension;e.snapshotId&&(_.snapshotId=e.snapshotId);var k=e.previewTestEdition,b=e.previewTime,Z=e.configId,I=e.cityId,w=e.location,S=e.tangMapping;k&&x.extension.push({name:"previewTestEdition",value:k.toString()}),b&&x.extension.push({name:"previewTime",value:b.toString()}),Z&&x.extension.push({name:"configId",value:Z.toString()}),w&&x.extension.push({name:"userDepartureId",value:I?String(I):"2"}),x.extension.push({name:"newRefundAdditionInfo",value:"true"}),S&&x.extension.push({name:"tangMapping",value:S}),Object.assign(t,{head:x,tags:[{key:"itineraryClause",value:""},{key:"performance",value:"automaticSelected"},{key:"performance",value:"manualSelected"},{key:"needTrafficInfoDesc",value:(0,a.ZP)().platform===r.NX.RN?"true":"false"},{key:"filterAllViewTags",value:"true"}]}),h=[{id:d,idType:1}],m={needRefundPolicy:!0},v=[{type:0},{type:2},{type:99},{type:3},{type:4}]}var P={};(p||s[u]).map((function(e){P[e]=!0}));var T=(0,i.Z)((0,i.Z)({searchParams:h,filterParam:f,refundParam:m,imgSizes:v},P),_);return Object.assign((null===t||void 0===t?void 0:t.head)||{},{syscode:(null===t||void 0===t||null===(n=t.clientInfo)||void 0===n?void 0:n.oriSyscode)||(null===t||void 0===t||null===(c=t.clientInfo)||void 0===c?void 0:c.syscode)}),{request:Object.assign({},t,T),actionUrl:"/restapi/soa2/21052/getProductInfo"}}},20297:function(e,t){"use strict";t["Z"]=function(e,t){return{request:Object.assign({},e,t),actionUrl:"/restapi/soa2/21052/json/getScenicSpotInfo"}}},75971:function(e,t,n){"use strict";n.d(t,{_:function(){return i},n:function(){return o}});var i=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object.keys(e||{}).filter((function(e){return-1!==e.indexOf("ext-")})),i={};return n.forEach((function(n){var o=n;t||(o=n.replace(/^ext-(.*)$/,"$1")),e[n]&&(i[o]=e[n])})),i},o=function(e){return{isNewNaquhua:"newNaquhua"==e.label,naquhuaLabel:e.label}}},90134:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var i=n(298),o=n(79301),r=n(95308),a=n(57042),s=n(24460),c=n(81876),l=n(21867),u=n(86066),d=n(45023),p=n(64571),h=n(90201),f="",m=function(){},v=f,_=n(72747),g=n(61252),y=n(57113),x=n(28570),k=n(99739),b=n(55039),Z=n(2446),I=n(40771),w=n(56569),S=n(2269),P=function(e,t,f){var b,P=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return b=function(b){(0,l.Z)(D,b);var C=(0,u.Z)(D);function D(i){var o,r,s;(0,a.Z)(this,D),"product-detail"!==f&&"list"!==f&&"booking"!==f&&"search"!==f&&"resource-detail"!==f&&"ticket-detail"!==f&&(0,I.ku)("Loadjs"),s=C.call(this,i),(0,d.Z)((0,c.Z)(s),"pageId",void 0),(0,d.Z)((0,c.Z)(s),"state",void 0),(0,d.Z)((0,c.Z)(s),"count",void 0),(0,d.Z)((0,c.Z)(s),"componentRef",void 0),(0,d.Z)((0,c.Z)(s),"autoExpose",void 0),(0,d.Z)((0,c.Z)(s),"checkPerformance",void 0),(0,d.Z)((0,c.Z)(s),"isViewPort",void 0),g.bw.setRef(s.targetPageRef);var l=(0,k.ZP)().platform;if(s.pageId=t[l],s.state={assistComponent:y.K},(0,p.Ki)((0,c.Z)(s)),s.setParams(),console.log("==============constructor"),s.register(),s.count=0,s.autoExpose=!0,s.checkPerformance=!0,s.isViewPort="vacation"!==(null===(o=s.props)||void 0===o||null===(o=o.app)||void 0===o||null===(o=o.urlQuery)||void 0===o?void 0:o.sourceFrom),console.log(s.isViewPort,"this.isViewPort"),null!==(r=n.g)&&void 0!==r&&r.__crnpages&&!(0,I.b6)("pageNames")&&s.isViewPort){var u,h=null===(u=n.g)||void 0===u||null===(u=u.__crnpages)||void 0===u?void 0:u.map((function(e){var t=e.name;return t}));(0,I.FD)("pageNames",h)}return e.stopRenderCheck&&e.stopRenderCheck()&&p.nh.stopRenderCheck&&p.nh.stopRenderCheck(),s}return(0,s.Z)(D,[{key:"renderCheckInfo",value:function(){return e.renderCheckInfo?e.renderCheckInfo():{top:.2,bottom:.1}}},{key:"getInitialState",value:function(){var t=(0,r.Z)((0,o.Z)().mark((function t(n){var i,r,a,s,c,l,u,d,p,h,f;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("==============getInitialState",n),null===e||void 0===e||!e.getInitialState){t.next=27;break}if(null===e||void 0===e||e.setContext(n),console.log("==============getInitialState setContext",n),!(0,w.rI)()){t.next=27;break}return(0,k.ZP)(void 0,void 0,void 0,e.ctx),console.log("==============getInitialState isInServer",n),null===(i=e.ssrTimeRecorder)||void 0===i||i.record("serverRenderTime"),t.next=10,e.getInitialState();case 10:if(s=t.sent,c=s.state,l=c.preloadImage,u=c.preloadImageList,d=null===n||void 0===n||null===(r=n.req)||void 0===r?void 0:r.__needBase64,!d||!v||!l&&!u){t.next=25;break}if(null===(p=e.ssrTimeRecorder)||void 0===p||p.record("imageToBase64Time"),!(u&&u.length>0)){t.next=19;break}u.forEach((function(e,t){e.base64Url=m(e.sourceImageUrl,!1),console.log("imageToBase64 preloadImageList >>>",e.sourceImageUrl,e.base64Url,t)})),t.next=24;break;case 19:return t.next=21,v(l.sourceImageUrl,n.req);case 21:f=t.sent,l.base64Url=f,console.log("imageToBase64 preloadImage >>>",l,f);case 24:null===(h=e.ssrTimeRecorder)||void 0===h||h.recordEnd("imageToBase64Time");case 25:return null===(a=e.ssrTimeRecorder)||void 0===a||a.recordEnd("serverRenderTime"),t.abrupt("return",{initialState:s});case 27:return t.abrupt("return",{});case 28:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"register",value:function(){if(P){if((0,w.yF)()&&y.Z.getTarget()&&y.Z.getTarget().pageId===this.pageId)return;y.Z.register(this),e.isSavePop&&e.isSavePop()||(0,Z.mz)()&&Z.ZP.hide()}f&&(0,x.z2)(this,f)}},{key:"onBackAndroid",value:function(){e.onBackAndroid?e.onBackAndroid():this.pop()}},{key:"componentDidCatch",value:function(){}},{key:"pageWillAppear",value:function(){e.pageWillAppear&&(e.pageWillAppear(),this.setParams())}},{key:"pageDidAppear",value:function(){var t;this.targetPageRef?g.bw.setRef(this.targetPageRef):g.bw.setRef(void 0),(0,I.b6)("noNeedRegister")||this.register(),p.nh.enableJSHandleBackEvent&&p.nh.enableJSHandleBackEvent(),e.pageDidAppear&&e.pageDidAppear(),null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.pageDidAppear&&this.componentRef.pageDidAppear()}},{key:"pageWillDisappear",value:function(){var t;e.pageWillDisappear&&e.pageWillDisappear(),null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.pageWillDisappear&&this.componentRef.pageWillDisappear()}},{key:"pageDidDisappear",value:function(){var t;e.pageDidDisappearList&&e.pageDidDisappearList(),null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.pageDidDisappearList&&this.componentRef.pageDidDisappearList(),g.bw.setRef("")}},{key:"getPageId",value:function(){var t,n,i,o,r;return e.isIgnorePagePv&&e.isIgnorePagePv()||null!==this&&void 0!==this&&null!==(t=this.componentRef)&&void 0!==t&&t.isIgnorePagePv&&null!==this&&void 0!==this&&null!==(n=this.componentRef)&&void 0!==n&&n.isIgnorePagePv()?"ignore_page_pv":null!==this&&void 0!==this&&null!==(i=this.componentRef)&&void 0!==i&&i.getInitPageId&&null!==this&&void 0!==this&&null!==(o=this.componentRef)&&void 0!==o&&o.getInitPageId()?null===this||void 0===this||null===(r=this.componentRef)||void 0===r?void 0:r.getInitPageId():this.pageId}},{key:"setParams",value:function(){(0,g.PX)({pageId:this.pageId})}},{key:"componentDidShow",value:function(){if(P){if(((0,w.o6)()||(0,w.yF)())&&y.Z.getTarget()&&y.Z.getTarget().pageId===this.pageId)return;y.Z.register(this)}}},{key:"rendContent",value:function(){var t=this,n=this.state,o=n.assistComponent,r=n.initialState;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(e,(0,i.Z)((0,i.Z)({},this.props),{},{initialState:r,count:this.count++,ref:function(e){return t.componentRef=e}})),P&&(0,S.jsxs)(_.$e,{children:[Object.keys(o).map((function(e,t){var n,r,a,s,c=o[e].component,l=null===(n=o[e])||void 0===n||null===(n=n.assistComponent)||void 0===n?void 0:n.props,u=null===(r=o[e])||void 0===r||null===(r=r.assistComponent)||void 0===r?void 0:r.child,d=null===(a=o[e])||void 0===a||null===(a=a.assistComponent)||void 0===a?void 0:a.childProps,p=null===(s=o[e])||void 0===s||null===(s=s.assistComponent)||void 0===s?void 0:s.uniqueKey;return(0,S.jsx)(c,(0,i.Z)((0,i.Z)({},l),{},{children:(0,S.jsx)(T,{uniqueKey:p,name:null===l||void 0===l?void 0:l.name,children:u&&(0,S.jsx)(u,(0,i.Z)({},d))})}),t)})),(0,S.jsx)(_.G7,{})]}),(0,S.jsx)(_.G7,{className:"view-check",onAnimationEnd:function(){return t.viewReadyHandle&&t.viewReadyHandle()}})]})}},{key:"render",value:function(){console.log("ssr",this.state);var t=e.useFragment?h.Fragment:_.JD,n={flex:1,backgroundColor:e.useFragment?"transparent":"#fff",height:"100%"},i="android"==w.t4.OS?_.G7:h.Fragment;return this.isViewPort?(0,S.jsx)(t,{children:(0,S.jsx)(i,{style:n,children:this.rendContent()})}):(0,S.jsx)(_.G7,{style:{flex:1},children:this.rendContent()})}}]),D}(p.nh),(0,d.Z)(b,"isForceRender",C),b},T=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,e)}return(0,s.Z)(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.uniqueKey!=this.props.uniqueKey;return t}},{key:"render",value:function(){return(0,S.jsx)(S.Fragment,{children:this.props.children})}}]),n}(b.Z)},56034:function(e,t,n){"use strict";n.d(t,{Pg:function(){return S},ZP:function(){return P},eG:function(){return T}});var i=n(90129),o=n(79301),r=n(298),a=n(68277),s=n(95308),c=n(57042),l=n(24460),u=n(81876),d=n(21867),p=n(86066),h=n(45023),f=n(90201),m=n(97912),v=n(55039),_=n(99739),g=n(28570),y=n(9349),x=n(99765),k=n(56569),b=n(61252),Z=n(38915),I=n(32180)["window"],w=["target"];!(0,k.rI)()&&(0,Z.eV)(["getProductPriceCalendar","CreateTicketOrder","SearchBookingReducetools","searchBookingSalesPromotionRestful","getProductShelf","searchAdditionalResource","getActPreferenceInfo","resourceDetails","getShelfResourceList","getShopScenes","getTicketGroupInfo"]);var S=function(){var e=(0,_.ZP)();return{clientInfo:{currency:"CNY",locale:"zh-CN",pageId:(0,b.dD)().toString(),channelId:e.channelId,version:e.version,appPlatform:k.t4.OS,extension:[],syscode:e.syscode,oriSyscode:e.oriSyscode},enviroment:e.enviroment}},P=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,h.Z)((0,u.Z)(i),"http",void 0),(0,h.Z)((0,u.Z)(i),"header",void 0),(0,h.Z)((0,u.Z)(i),"cName",void 0),(0,h.Z)((0,u.Z)(i),"timer",void 0),(0,h.Z)((0,u.Z)(i),"platform",void 0),(0,h.Z)((0,u.Z)(i),"fetchStatus",0),(0,h.Z)((0,u.Z)(i),"ctx",void 0),(0,h.Z)((0,u.Z)(i),"isSSR",!1),(0,h.Z)((0,u.Z)(i),"isCSR",!1),(0,h.Z)((0,u.Z)(i),"toast",y.ZP),(0,h.Z)((0,u.Z)(i),"confirm",x.Z),(0,h.Z)((0,u.Z)(i),"push",g.VF),(0,h.Z)((0,u.Z)(i),"pop",g.Sw),i.cName="",i.timer=(new Date).getTime(),i.http=m.d,i.header=S(),i.platform=(0,_.ZP)().platform,i.isSSR=n.isSSR,i.isCSR=n.isCSR,i.ctx=n.ctx,i}return(0,l.Z)(n,[{key:"setFetchStatus",value:function(e){this.fetchStatus=e?1:2}},{key:"componentDidMount",value:function(){this.cName&&console.log("%c\u6027\u80fd\u68c0\u6d4b-".concat(this.cName,"\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u8017\u65f6:").concat((new Date).getTime()-this.timer,"ms"),"color:red")}}],[{key:"setContext",value:function(e){var t,i,o,r,a,s,c,l,u;n.isSSR=(0,k.yF)(),n.isCSR=(0,k.o6)(),n.ctx={url:null===e||void 0===e||null===(t=e.req)||void 0===t?void 0:t.url,query:null===e||void 0===e||null===(i=e.req)||void 0===i?void 0:i.query,cid:null===e||void 0===e||null===(o=e.req)||void 0===o?void 0:o.clientId,middleware:null===e||void 0===e||null===(r=e.req)||void 0===r?void 0:r.__middleware,isLogin:null===e||void 0===e||null===(a=e.req)||void 0===a?void 0:a.isLogin,isLoginWithoutType:null===e||void 0===e||null===(s=e.req)||void 0===s?void 0:s.isLoginWithoutType,userAgent:null===e||void 0===e||null===(c=e.req)||void 0===c?void 0:c.headers["user-agent"],cookies:null===e||void 0===e||null===(l=e.req)||void 0===l?void 0:l.cookies,isUseSkuModel:null===e||void 0===e||null===(u=e.req)||void 0===u?void 0:u.isUseSkuModel},n.__req__=null===e||void 0===e?void 0:e.req,(0,k.rI)()?n.http=function(e,t){return(0,m.d)(e,t,n.__req__)}:n.ctx.middleware=I["__middleware"],(0,k.rI)()||(I.__SSR__NFES__CONTEXT=n.ctx,I.isSSR=n.isSSR,I.isCSR=n.isCSR)}},{key:"getBaseInitialState",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,s,c,l,u,d,p,h,f,m,v=arguments;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=v.length>2&&void 0!==v[2]?v[2]:{},c=new Promise((function(e){s=e})),l=t.getBaseState?t.getBaseState():{},l||(l={}),u=i||{},d=u.target,p=void 0===d?{}:d,h=(0,a.Z)(u,w),f=(0,r.Z)({state:l,header:t.header(),http:t.http,ctx:t.ctx,platform:t.platform,isCSR:t.isCSR,isSSR:t.isSSR,afterFetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ds,i=t.cb;s&&s({state:Object.assign(l,e),ds:n}),i&&i()}},p),n.init((0,r.Z)((0,r.Z)((0,r.Z)({second:function(){}},p),h),{},{target:f})),e.next=9,c;case 9:return m=e.sent,e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(v.Z);(0,h.Z)(P,"http",m.d),(0,h.Z)(P,"header",S),(0,h.Z)(P,"platform",(0,_.ZP)().platform),(0,h.Z)(P,"ctx",(0,k.rI)()?void 0:I.__SSR__NFES__CONTEXT),(0,h.Z)(P,"__req__",void 0),(0,h.Z)(P,"isSSR",!!(0,k.rI)()||!!I.isSSR),(0,h.Z)(P,"isCSR",!(0,k.rI)()&&!!I.isCSR);var T=function(e,t,n,o){var a=(0,f.useMemo)((function(){return{http:m.d,header:S(),platform:(0,_.ZP)().platform,toast:y.ZP,confirm:x.Z,push:g.VF,pop:g.Sw,props:e,ref:n,state:{}}}),[e]),s=(0,f.useState)((function(){return("function"==typeof t?t(a,e):t)||{}})),c=(0,i.Z)(s,2),l=c[0],u=c[1];return Object.assign(a,{state:l,setState:function(e){u((0,r.Z)((0,r.Z)({},a.state||{}),e||{}))}}),(0,f.useEffect)((function(){o&&o(l)}),[l]),{target:a,state:l,setState:u}}},98384:function(e,t,n){"use strict";n.d(t,{im:function(){return o},Mv:function(){return r}});var i=n(17366),o={m_im_btn:{borderStyle:"solid"},m_im_footer_text:{display:"block"},m_im_telConsult_item:{display:"flex",marginBottom:0,marginTop:12},m_im_telConsult_body:{paddingBottom:12},m_im_onlineservice_left:{paddingRight:(0,i.Vh)(25)}},r={m_footer_left_detail:{lineHeight:(0,i.Nv)(12)},arrow:{marginTop:2},m_footer_btn:{width:"100%"}}},48830:function(e,t,n){"use strict";n.d(t,{Me:function(){return c},RO:function(){return l},zc:function(){return u}});var i=n(45023),o=n(99739),r=n(39140),a=n(64571),s=(0,o.wU)(),c=function(e){var t=(0,a.Yy)(),n="".concat(s,"/webapp/taro/pages/tnt/booking/index?");return["FAT","dev"].includes(t)&&(n+="env=fat&"),(0,i.Z)((0,i.Z)((0,i.Z)({},r.NX.Mini,"/pages/tnt/booking/index?"),r.NX.RN,"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=booking&isNew=true&"),r.NX.H5,n)[e||(0,o.ZP)().platform]},l=function(e){var t=(0,a.Yy)(),n="".concat(s,"/webapp/taro/pages/tnt/detail/resource/index?");return["FAT","dev"].includes(t)&&(n+="env=fat&"),(0,i.Z)((0,i.Z)((0,i.Z)({},r.NX.Mini,"/pages/gs/detail/resource/index?"),r.NX.RN,"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=resource&"),r.NX.H5,n)[e||(0,o.ZP)().platform]},u=function(e){var t=(0,a.Yy)(),n="".concat(s,"/webapp/taro/pages/tnt/detail/product-sku/index?");return"FAT"==t&&(n+="env=fat&"),(0,i.Z)((0,i.Z)((0,i.Z)({},r.NX.Mini,"/pages/tnt/detail/product-sku/index?"),r.NX.RN,"/rn_ttd_taro/_crn_config?CRNModuleName=rn_ttd_taro&CRNType=1&initialPage=productSku&"),r.NX.H5,n)[e||(0,o.ZP)().platform]}},26805:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(45023),l=n(56034),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,s.Z)(o),"props",void 0),(0,c.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(l.ZP),d=n(298),p=n(9353),h=n(17366),f=(0,p.Z)({m_calendar_extra_valid:{display:"flex",flexDirection:"row",alignItems:"flex-start",fontSize:(0,h.Vh)(14),paddingBottom:(0,h.Vh)(8),paddingRight:(0,h.Vh)(12),paddingLeft:(0,h.Vh)(12)},m_calendar_extra_valid_book:(0,d.Z)((0,d.Z)({paddingBottom:(0,h.Vh)(20),paddingRight:(0,h.Vh)(16),paddingLeft:(0,h.Vh)(16),marginTop:(0,h.Vh)(-12)},(0,h.Cg)({width:h.WI,style:"solid",color:"rgb(235,239,245)",direction:"bottom"})),{},{backgroundColor:"#fff",position:"relative"}),m_icon_style:{marginTop:(0,h.Vh)(8),marginRight:(0,h.Vh)(4)},m_textcollapse:{marginTop:(0,h.Vh)(0),flex:1},m_textcollapse_content_text:{color:"rgb(17,17,17)",fontSize:(0,h.Vh)(13)},m_more_btn:(0,d.Z)((0,d.Z)({},h._),{},{paddingRight:(0,h.Vh)(4),paddingLeft:(0,h.Vh)(12),height:(0,h.Vh)(16),justifyContent:"flex-end"})}),m=f,v=n(72747),_=n(36472),g=n(71557),y=n(2269),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.desc,n=e.logs,i=void 0===n?{}:n,o=e.hideIcon,r=i.validUnfoldExposureLog,a=i.validUnfoldClickLog,s=i.validCollapseExposureLog,c=i.validCollapseClickLog;return t?(0,y.jsxs)(v.G7,{style:(0,h.wh)([m.m_calendar_extra_valid,o?m.m_calendar_extra_valid_book:{}]),children:[(0,y.jsx)(v.G7,{children:!o&&(0,y.jsx)(g.Z,{type:"info",color:"#333",size:28,style:m.m_icon_style})}),(0,y.jsx)(_.Z,{message:t,lineHeight:o?21:18,lineNum:2,prefix:".m_sku",logs:{clickUpExposureLog:s,clickDownExposureLog:r,clickUpLog:c,clickDownLog:a},fstyle:o?m:{m_textcollapse:{flex:1}}})]}):null}}]),n}(u)},82195:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=n(90201),l=n(72747),u=n(56569),d=n(81876),p=n(79038),h=n(59772),f=n(45023),m=n(56034),v=n(32545),_=n(48501),g=n(92300),y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,e),(0,f.Z)((0,d.Z)(r),"state",void 0),(0,f.Z)((0,d.Z)(r),"monthIndex",0),(0,f.Z)((0,d.Z)(r),"dateRef",void 0),(0,f.Z)((0,d.Z)(r),"isInit",!0),(0,f.Z)((0,d.Z)(r),"dateIndex",0),(0,f.Z)((0,d.Z)(r),"titleHeight",36),(0,f.Z)((0,d.Z)(r),"itemSize",53),(0,f.Z)((0,d.Z)(r),"monthPadBot",20),(0,f.Z)((0,d.Z)(r),"isTile",!0),r.props.isFromAct&&(r.isTile=!1);var a=r.initMonth();return r.state=(0,i.Z)({anchor:"",calendar:a,showLength:12},r.setScrollDistance(a)),r.cName="calendar",[_.zh.book,_.zh.detail,_.zh.sku].includes(e.usePage)&&(r.itemSize=64),r}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.initMonth(e);if(this.setState({calendar:n}),e.defaultDate&&!this.props.defaultDate&&!e.isInPopLayer&&this.dateRef||e.isOpened&&(this.props.defaultDate!==e.defaultDate||this.props.firstLevelId!==e.firstLevelId)){var i=this.setScrollDistance(n),o=i.scrollDistance;this.setState({scrollDistance:o},(function(){(t.dateIndex>0||t.monthIndex>0)&&setTimeout((function(){t.dateRef.scrollToLocation&&t.dateRef.scrollToLocation({animated:!0,itemIndex:0,sectionIndex:t.monthIndex,viewOffset:0,viewPosition:0})}),100)}))}}},{key:"componentDidMount",value:function(){(0,p.Z)((0,h.Z)(n.prototype),"componentDidMount",this).call(this)}},{key:"setScrollDistance",value:function(e){var t=this,n=e.monthCalendar.map((function(e){return e.calendar.length*t.itemSize+t.titleHeight+t.monthPadBot})),i=n.slice(0,this.monthIndex).reduce((function(e,t){return e+t}),0);return{scrollDistance:i,sectionHeights:n}}},{key:"initMonth",value:function(e){var t=this,n=e||this.props,o=n.calendar,r=n.holiday,a=n.titleText,s=n.defaultDate,c=n.endDate,l=n.minBookingDays,u=n.maxBookingDays,d=n.isMulti,p=n.tooltipText,h=n.isWIFI,f={titleText:a,monthCalendar:[]},m={},_=function(e){return["\u65e5","\u516d"].includes((0,v.q7)(e))},g=s||o[0].date;return o.forEach((function(e,n){var o=e.date.slice(0,7),a=r[e.date]||{},f=s&&d&&!c?(0,v.gw)(s,e.date):-1,g=(0,i.Z)((0,i.Z)({},e),{},{day:Number(e.date.slice(-2)),holidayText:a.name||"",work:void 0==a.work?!_(e.date):a.work,isSelect:e.date==s||e.date==c,isInSelect:d&&1==(0,v.qu)(e.date,s)&&1==(0,v.qu)(c,e.date),disableToast:t.getDisableToast(l,u,f),tooltipText:d&&s&&!c&&e.date==s?p:"",tipText:d?"".concat(s&&e.date==s?h?"\u53d6\u4ef6":"\u5f00\u59cb":"").concat(c&&e.date==c?"".concat(c==s?" ":"").concat(h?"\u8fd8\u4ef6":"\u7ed3\u675f"):""):"",isFirst:0==n});m[o]?m[o].push(g):m[o]=[g]})),Object.keys(m).map((function(e,n){(s&&e==s.slice(0,7)||!s&&e==g.slice(0,7))&&(t.monthIndex=n),f.monthCalendar.push({year:e.slice(0,4),month:e.slice(5,7),calendar:t.getDate("".concat(e,"-01"),m[e],g,o[0].date)})})),f}},{key:"getDate",value:function(e,t,n,o){for(var r=(0,g.l)(e),a=[],s=r.month(),c=r.day(),l={disableText:"",price:"",day:"",holidayText:"",work:!0},u=[],d=0;d<c;d++)u.push(l);var p=(0,g.l)(t[0].date),h=(0,g.l)(t[t.length-1].date),f=0;while(r.month()===s){var m=r.date()<10?"0".concat(r.date()):r.date();n&&m==n.slice(-2)&&(this.dateIndex=a.length),r<p||r>h?u.push((0,i.Z)((0,i.Z)({},l),{},{day:r.date(),date:r.format("YYYY-MM-DD")})):t[f]&&t[f].date.slice(-2)==m?(u.push(t[f]),f++):u.push(Object.assign({},l,{day:r.date()})),7==u.length&&(0==(0,v.qu)(r.format("YYYY-MM-DD"),o)&&this.isTile||a.push(u),u=[]),r=r.add(1,"day")}while(u.length>0)u.push(l),7==u.length&&(a.push(u),u=[]);return a}},{key:"onChooseDate",value:function(e){var t=this.props,n=t.onChooseDate,o=t.onClickCallback,r=t.isInPopLayer,a=t.defaultDate;if(r&&a!==e.date){var s=this.initMonth((0,i.Z)((0,i.Z)({},this.props),{},{defaultDate:e.date}));this.setState({calendar:s})}o&&o(),n&&n(e)}},{key:"getOffset",value:function(e,t){for(var n=0,i=0;i<Math.floor(t/3);i++){var o=e[i].data[0].calendar;n+=o.length}return 60*n+36*Math.floor(t/3)+36*(t%3-1)}},{key:"getDisableToast",value:function(e,t,n){if(n>0){if(n<e)return"\u8be5\u4ea7\u54c1\u6700\u5c11\u9700\u8981\u9884\u8ba2".concat(e,"\u5929");if(n>t)return"\u8be5\u4ea7\u54c1\u6700\u591a\u9884\u8ba2".concat(t,"\u5929")}return""}}]),n}(m.ZP),x=n(76777),k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,f.Z)((0,d.Z)(i),"openCompare","RN"==i.platform),i}return(0,r.Z)(n,[{key:"onClick",value:function(e,t,n){var i=this.props,o=i.usePage,r=i.defaultDate,a=i.calendar;if(e.day&&(o!=_.zh.book||e.date!=r)){var s=this.props.onChooseDate,c=e.disableText,l=e.disableToast;if(t)this.toast.show(l||"\u5f53\u524d\u65e5\u671f"+(c||"\u4e0d\u53ef\u8ba2"));else{var u=a[n].find((function(t){return t.date==e.date}));s&&s(u)}}}},{key:"shouldComponentUpdate",value:function(e,t){var i=e.isInSwiper,o=e.index,r=e.currentTabIndex;return i?[o-1,o,o+1].includes(r):(0,p.Z)((0,h.Z)(n.prototype),"shouldComponentUpdate",this).call(this,e,t)}}]),n}(m.ZP),b=n(36957),Z=n(9353),I=n(17366),w=(0,Z.Z)({m_month:{position:"relative",paddingLeft:(0,I.Vh)(5),paddingRight:(0,I.Vh)(5)},m_ceil_item:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},m_ceil_prop:{display:"flex",alignItems:"center",justifyContent:"flex-start"},m_month_body:{backgroundColor:"#ffffff",width:"100%"},m_date_line:(0,i.Z)({textAlign:"center",display:"flex",flexDirection:"row"},(0,b.dX)((0,I.Vh)(4))),m_select_ceil_item:{zIndex:1}}),S=w,P=n(59201),T=n(64571),C=n(2269),D=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.calendar,o=t.monthPadBot;return(0,C.jsx)(l.G7,{style:S.m_month,className:"m_month",children:(0,C.jsx)(l.G7,{style:(0,I.wh)([S.m_month_body,{paddingBottom:o}]),children:n.map((function(t,n){return(0,C.jsx)(l.G7,{style:S.m_date_line,children:t.map((function(t,o){var r=t.disableText,a=t.price,s=t.date,c=t.disableToast,l=r||"number"!=typeof a||!s||c;return(0,C.jsx)(j,(0,i.Z)((0,i.Z)({},e.props),{},{isDisable:l,dateItem:t,index:o,onClick:function(t,i){return e.onClick(t,i,n)}}))}))},n)}))})})}}]),n}(k);function R(e){var t=e.dateItem,n=e.index,o=e.isDisable,r=e.dateClickLog,a=e.itemSize,s=e.traceData,l=e.defaultDate,u=e.isDateShowPrice,d=e.usePage,p=e.isTile,h=e.onClick,f=e.showLocalTime,m=e.isNewGuideSku;return(0,C.jsx)(P.Z,{className:"calendar_item",log:r&&r({cdate:t.date}),onClick:function(){return h(t,o)},style:(0,I.wh)([S.m_ceil_item,t.isSelect?(0,i.Z)({},S.m_select_ceil_item):{},t.hasReservation?{height:(0,I.Vh)(a+6)}:{}]),testID:"calendar_item_".concat(t.date),devTraceData:s&&!t.isSelect&&s(l||"",t.date),children:(0,c.createElement)(x.Z,(0,i.Z)((0,i.Z)({id:t.date,lineIndex:n,date:t.date},t),{},{isShowInvenText:[_.zh.book,_.zh.detail,_.zh.sku].includes(d),key:t.date||n,isSelect:t.isSelect,style:(0,T.kg)((0,I.wh)([S.m_ceil_prop,{width:"100%",height:t.isSelect?t.hasReservation?(0,I.Vh)(a+6):(0,I.Vh)(a+4):(0,I.Vh)(a)}])),isAct:[_.zh.actSku,_.zh.dayplay,_.zh.actSkuInline].includes(d),isMoreDate:!0,isDateShowPrice:u,showFrom:!t.hideFrom,isDisable:o,isTile:p,showReservationText:t.hasReservation,showLocalTime:f,isNewGuideSku:m}))},t.date||n)}var j=(0,c.memo)(R,(function(e,t){var n=t.dateItem,i=t.isDateShowPrice,o=n.hideFrom,r=n.disableText,a=n.invenText,s=n.price,c=n.isSelect,l=n.disableToast,u=n.tooltipText,d=n.tipText,p=n.isInSelect,h=n.isError,f=n.hasReservation,m=n.date,v=e.dateItem,_=e.isDateShowPrice,g=v.hideFrom,y=v.disableText,x=v.invenText,k=v.price,b=v.isSelect,Z=v.disableToast,I=v.tooltipText,w=v.tipText,S=v.isInSelect,P=v.isError,T=v.hasReservation,C=v.date;return c===b&&o===g&&r===y&&a===x&&s===k&&l===Z&&u===I&&d===w&&p===S&&h===P&&_===i&&T===f&&m===C})),N=n(93936),V=(0,Z.Z)({m_calendar_wrapper:{flex:1,height:"100%",marginTop:(0,I.Vh)(0),position:"relative",display:"flex",flexDirection:"column",paddingLeft:(0,I.Vh)(1),paddingRight:(0,I.Vh)(1)},m_calendar_header:{position:"relative",width:"100%",zIndex:3},m_calendar_header_hold:{height:(0,I.Vh)(25)},m_weekdays:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",height:(0,I.Vh)(25),alignItems:"center",backgroundColor:"#ffffff",top:(0,I.Vh)(0),left:(0,I.Vh)(0),zIndex:5,fontSize:(0,I.Vh)(18)},m_weekdays_text:{fontSize:(0,I.Vh)(13)},m_weekend:{color:"#f5190a"},m_weekdays_inpoplayer:{position:"absolute"},m_calendar_title:{backgroundColor:"#ffffff",paddingLeft:(0,I.Vh)(16),display:"flex",flexDirection:"row",alignItems:"center",height:(0,I.Vh)(52)},m_calendar_title_tips:(0,i.Z)((0,i.Z)({paddingLeft:(0,I.Vh)(10),display:"flex",flexDirection:"row",backgroundColor:"#FFF8F2",fontSize:(0,I.Vh)(12)},(0,I.yp)((0,I.Vh)(10))),{},{paddingRight:(0,I.Vh)(12)}),m_calendar_title_tips_icon:{fontSize:(0,I.Vh)(12),color:"#FF7700",paddingRight:(0,I.Vh)(4),flex:0,marginTop:(0,I.Vh)(2)},m_calendar_title_tips_text:{fontSize:(0,I.Vh)(12),color:"#FF7700",fontWeight:"normal",flex:1,lineHeight:(0,I.Nv)((0,I.Vh)(16))},m_calendar_title_text:{fontSize:(0,I.Vh)(18),color:"#333333",fontWeight:"bold"},m_month_title:function(e){return{backgroundColor:"#f6f8fa",paddingLeft:(0,I.Vh)(20),height:e,zIndex:2}},m_month_title_text:function(e){return(0,i.Z)({fontSize:(0,I.Vh)(20),lineHeight:(0,I.Nv)((0,I.Vh)(e)),color:"#333333"},N.ZP.m_month_title_text)},m_calendar_footer:{backgroundColor:"#f4f4f4",height:(0,I.Vh)(35),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},m_calendar_footer_text:{color:"#666",fontSize:(0,I.Vh)(12)},m_calendar:{flex:1,overflow:"scroll"},m_swiper_calendar:{},m_calendar_tab_wrapper:{backgroundColor:"#f8f8f8",height:(0,I.Vh)(44),marginLeft:(0,I.Vh)(-10)},m_month_tab_item:(0,i.Z)((0,i.Z)({},I._7),{},{height:(0,I.Vh)(44),width:(0,I.Vh)(50),position:"relative"},(0,I.oM)((0,I.Vh)(15))),m_month_tab_item_text:{color:"#333",fontFamily:"PingFang SC",fontSize:(0,I.Vh)(15),fontWeight:"bold"},m_month_active_tab_item_text:{color:"#0086F6"},m_active_border:{height:(0,I.Vh)(2),backgroundColor:"#0086f6",width:(0,I.Vh)(50),position:"absolute",bottom:0,left:0},m_month_wrapper:{width:u.Db.get("window").width},m_reservtion_tip_container:(0,i.Z)((0,i.Z)((0,i.Z)({position:"relative",backgroundColor:"#fff8f2"},(0,I.yp)((0,I.Vh)(12))),(0,I.WB)((0,I.Vh)(16))),{},{lineHeight:1}),m_reservtion_tip_tag:(0,i.Z)((0,i.Z)({backgroundColor:"#ff7700",borderRadius:(0,I.Vh)(3)},(0,I.WB)((0,I.Vh)(3))),{},{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:(0,I.Vh)(12),left:(0,I.Vh)(16)}),m_reservtion_tip_tag_placeholder:{color:"transparent",fontSize:(0,I.Vh)(11),fontWeight:(0,I.Ue)("500"),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_reservtion_tip_tag_text:{color:"#fff",fontSize:(0,I.Vh)(11),fontWeight:(0,I.Ue)("500"),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_reservtion_tip_text:{color:"#ff7700",fontSize:(0,I.Vh)(12),fontWeight:"normal",lineHeight:(0,I.Nv)((0,I.Vh)(17)),whiteSpace:"normal"},m_calendar_guide_title_tips:(0,i.Z)((0,i.Z)({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"#fff8f2"},(0,I.yp)((0,I.Vh)(6))),(0,I.WB)((0,I.Vh)(16))),m_calendar_guide_title_tips_icon:{fontSize:(0,I.Vh)(14),color:"#ff7700",paddingRight:(0,I.Vh)(4),flex:0},m_calendar_guide_title_tips_text:{color:"#ff5500",fontSize:(0,I.Vh)(12),fontFamily:"PingFangSC-Regular",lineHeight:(0,I.Vh)(16),flex:1}}),L=((0,Z.Z)({m_wrap:{height:(0,I.Vh)(44),maxHeight:(0,I.Vh)(44)},m_inner:{position:"relative",justifyContent:"flex-start"}}),V),E=n(35409),A=n(2446),F=n(57113),M=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,o.Z)(this,i),n=t.call(this,e),(0,f.Z)((0,d.Z)(n),"props",void 0),n.showPriceInfo=n.showPriceInfo.bind((0,d.Z)(n)),n}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){F.Z.add("priceInfoPopLayer",E.Z,{props:{isOpened:!1}})}},{key:"showPriceInfo",value:function(){var e=this.props.priceNotesList,t=void 0===e?[]:e,i=n(35329).Z;A.ZP.show({props:{isScrollView:!0,popHeight:"90%",minHeight:"50%",maxHeight:"90%",name:"priceInfoPopLayer",title:"\u4ef7\u683c\u8bf4\u660e",zIndex:2001},child:i,childProps:{list:t}})}}]),i}(m.ZP),O={m_price_tip:(0,i.Z)({display:"flex",paddingRight:(0,I.Vh)(16),paddingLeft:(0,I.Vh)(16),paddingTop:(0,I.Vh)(12),paddingBottom:(0,I.Vh)(12),flexDirection:"row",alignItems:"center",backgroundColor:"#FFFAF5"},(0,I.ix)("border-box")),m_price_tip_text:{color:"#FF7700",fontSize:(0,I.Vh)(12),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_show_price_info:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},m_price_info_text:{color:"#FF7700",fontSize:(0,I.Vh)(12),lineHeight:(0,I.Nv)((0,I.Vh)(17))},m_forward:{},m_price_tip_padding_top:{paddingTop:0},m_price_tip_padding_bottom:{paddingBottom:(0,I.Vh)(8)}},B=(0,Z.Z)(O),z=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.priceTipText,i=void 0===n?"":n,o=t.showPriceInfoText,r=void 0===o?"":o,a=t.warnTip,s=void 0===a?"":a,c=t.hasReservation;return(0,C.jsxs)(l.G7,{style:(0,I.wh)([B.m_price_tip,s?B.m_price_tip_padding_top:{},c?B.m_price_tip_padding_bottom:{}]),children:[(0,C.jsx)(l.xv,{style:B.m_price_tip_text,children:i}),(0,C.jsxs)(P.Z,{style:B.m_show_price_info,onClick:function(){e.showPriceInfo()},children:[(0,C.jsx)(l.xv,{style:B.m_price_info_text,children:r}),(0,C.jsx)(l.JO,{type:"forward",color:"#FF7700",size:28,style:B.m_forward})]})]})}}]),n}(M),H=n(39140),U=n(50738),G=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.showLength,o=t.calendar,r=this.props,a=r.titleText,s=r.footerText,c=r.isInPopLayer,d=r.dateClickLog,p=r.isDateShowPrice,h=r.titleTips,f=r.traceData,m=r.defaultDate,v=r.usePage,_=r.marginBottom,g=r.priceInfo,y=r.hasPromotion,x=r.warnTip,k=r.hasReservation,b=r.showLocalTime,Z=r.isNewGuideSku,w=r.newCalendarExpoLog,S=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"].map((function(e,t){return 0==t||6==t?(0,C.jsx)(l.xv,{style:(0,I.wh)([L.m_weekdays_text,{color:"#f5190a"}]),children:e}):(0,C.jsx)(l.xv,{style:L.m_weekdays_text,children:e})})),P=o.monthCalendar.map((function(e,t){return{data:[{calendar:e.calendar,year:e.year,month:e.month}],index:t,title:e.year+"\u5e74"+e.month+"\u6708"}})),T=!!g&&y&&p;return(0,C.jsxs)(l.G7,{style:L.m_calendar_wrapper,testID:Z?w&&(0,U.kI)(w.key,w.params):void 0,children:[T&&(0,C.jsx)(z,(0,i.Z)((0,i.Z)({},g),{},{warnTip:x,hasReservation:k})),k?(0,C.jsxs)(l.G7,{style:(0,I.wh)([L.m_reservtion_tip_container,x||T?{paddingTop:0}:null]),children:[(0,C.jsx)(l.G7,{style:(0,I.wh)([L.m_reservtion_tip_tag,x||T?{top:0}:null]),children:(0,C.jsx)(l.xv,{style:L.m_reservtion_tip_tag_text,children:"\u9884\u7ea6\u62a2"})}),(0,C.jsxs)(l.aA,{style:L.m_reservtion_tip_text,children:[(0,C.jsx)(l.xv,{style:L.m_reservtion_tip_tag_placeholder,children:this.platform===H.NX.RN&&"android"===u.t4.OS?"\u9884\u7ea6\u62a2\u5360.":"\u9884\u7ea6\u62a2\u5360"}),"\u6807\u6ce8\u65e5\u671f\u666f\u533a\u5c1a\u672a\u5f00\u653e\u552e\u5356\uff0c\u9700\u8981\u9884\u7ea6\u62a2\u7968\uff0c\u5f00\u653e\u552e\u5356\u540e\u5e73\u53f0\u5c06\u4f1a\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u62a2\u7968\u3002\u62a2\u7968\u5931\u8d25\u81ea\u52a8\u9000\u6b3e\uff0c\u62a2\u7968\u7ed3\u679c\u8bf7\u4ee5\u8ba2\u5355\u8be6\u60c5\u9875\u4e3a\u51c6\u3002"]})]}):null,!!h&&(0,C.jsxs)(l.G7,{style:L.m_calendar_title_tips,children:[(0,C.jsx)(l.JO,{type:"info",style:L.m_calendar_title_tips_icon}),(0,C.jsx)(l.xv,{style:L.m_calendar_title_tips_text,children:h})]}),!!Z&&(0,C.jsxs)(l.G7,{style:L.m_calendar_guide_title_tips,children:[(0,C.jsx)(l.JO,{type:"info",style:L.m_calendar_guide_title_tips_icon}),(0,C.jsx)(l.xv,{style:L.m_calendar_guide_title_tips_text,children:"\u4ee5\u4e0b\u4ef7\u683c\u4e3a\u5355\u4efd\u4ea7\u54c1\u7684\u8d77\u59cb\u552e\u4ef7"})]}),!!a&&(0,C.jsx)(l.G7,{style:L.m_calendar_title,children:(0,C.jsx)(l.xv,{style:L.m_calendar_title_text,children:a})}),(0,C.jsxs)(l.G7,{style:L.m_calendar_header,children:[(0,C.jsx)(l.G7,{style:c?L.m_calendar_header_hold:null}),(0,C.jsx)(l.G7,{style:(0,I.wh)([L.m_weekdays,c?L.m_weekdays_inpoplayer:null]),children:S})]}),(0,C.jsx)(l.Xn,{style:(0,I.wh)([L.m_calendar]),showLength:n,scrollTop:this.state.scrollDistance,sectionHeights:this.state.sectionHeights,locatePos:this.monthIndex,initialNumToRender:this.monthIndex<2?9:3*(this.monthIndex+2),ref:function(t){return e.dateRef=t},sections:P,stickySectionHeadersEnabled:!0,renderItem:function(t){var n=t.item,o=t.section.index;return(0,C.jsx)(D,(0,i.Z)((0,i.Z)({},n),{},{dateClickLog:d,isNewGuideSku:Z,isDateShowPrice:p,itemSize:e.itemSize,monthPadBot:e.monthPadBot,onChooseDate:e.onChooseDate.bind(e),isTile:!0,traceData:f,defaultDate:m,usePage:v,showLocalTime:b}),o)},renderSectionHeader:function(t){var n=t.section.title;return(0,C.jsx)(l.G7,{style:L.m_month_title(e.titleHeight),children:(0,C.jsx)(l.xv,{style:L.m_month_title_text(e.titleHeight),className:"m_month_title_text_normal",children:n})})},keyExtractor:function(e,t){return t},onLayout:function(){(c||e.isInit)&&(e.dateIndex>0||e.monthIndex>0)&&setTimeout((function(){e.dateRef.scrollToLocation&&e.dateRef.scrollToLocation({animated:!0,itemIndex:0,sectionIndex:e.monthIndex,viewOffset:0,viewPosition:0})}),100),e.isInit=!1},getItemLayout:function(t,n){return{index:n,offset:e.getOffset(t,n),length:n%3==1?36:60*t[Math.floor(n/3)].data[0].calendar.length}},ListFooterComponent:s?(0,C.jsx)(l.G7,{style:(0,I.wh)([L.m_calendar_footer,{marginBottom:_}]),children:(0,C.jsx)(l.xv,{style:L.m_calendar_footer_text,children:s})}):(0,C.jsx)(l.G7,{style:{marginBottom:_}})})]})}}]),n}(y)},18427:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(17366),l=n(56034),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(l.ZP),d=n(298),p=n(9353),h=(0,p.Z)({m_loading:{display:"flex",flexDirection:"column",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},m_image_background:{with:"100%"},m_loading_text:{marginTop:(0,c.Vh)(12),fontSize:(0,c.Vh)(12),color:"#666"},rotate:(0,d.Z)({},(0,c.oQ)("rotate 0.7s linear infinite"))}),f=h,m=n(64571),v=n(2269),_=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e="https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png_.webp";return(0,v.jsxs)(s.G7,{style:f.m_loading,children:[(0,v.jsx)(s.G7,{style:(0,c.wh)([f.m_image_background,{backgroundImage:"url(".concat(e,")")}])}),(0,v.jsx)(s.Ee,{url:e,style:(0,m.kg)((0,c.wh)([{width:35,height:35},f.rotate])),mode:"aspectFit"}),(0,v.jsx)(s.xv,{style:f.m_loading_text,children:"\u5373\u5c06\u5448\u73b0"})]})}}]),n}(u)},46241:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(56034),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(c.ZP),u=n(17366),d=n(9353),p={m_ceil:{backgroundColor:"#ffffff",position:"relative"},m_ceil_border:{borderRadius:(0,u.Vh)(4),borderWidth:(0,u.Vh)(1),borderStyle:"solid",borderColor:"#dddddd"},m_ceil_tabCalendar:{marginRight:(0,u.Vh)(8)},m_icon_container:{position:"absolute",bottom:(0,u.Vh)(-.5),right:(0,u.Vh)(-.5),backgroundColor:"#0086f6",borderTopLeftRadius:(0,u.Vh)(4),borderTopRightRadius:0,borderBottomRightRadius:(0,u.Vh)(4),borderBottomLeftRadius:0,height:(0,u.Vh)(12),fontSize:(0,u.Vh)(12),display:"flex",justifyContent:"center",alignItems:"center",width:(0,u.Vh)(18)},active:{borderColor:"#007fe9",backgroundColor:"#e6f3fe"},moreCalendarActive:{borderColor:"#0086F6",backgroundColor:"#0086F6",borderRadius:(0,u.Vh)(2)},gray:{backgroundColor:"#f7f7f7",color:"#ccc"}},h=(0,d.Z)(p),f=n(2269),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isGray,i=e.style,o=e.isMoreDate,r=e.isSelect,a=e.id,c=e.fstyle,l=(0,u.Ec)(h,c);return(0,f.jsx)(s.G7,{id:a,className:"m_ceil ".concat(o?null:"m_ceil_border"," ").concat(!o&&r?"active":n?"gray":null," ").concat(o&&r?"moreCalendarActive":null),style:(0,u.wh)([l.m_ceil,o?null:l.m_ceil_border,!o&&r?l.active:n?l.gray:null,o&&r?l.moreCalendarActive:null,i]),children:t})}}]),n}(l)},39328:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ge}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(298),c=n(81876),l=n(79038),u=n(59772),d=n(45023),p=n(48501),h=n(22276),f=n(48074),m=n(15259),v=n(76966),_=n(48816),g=n(41003),y=n(46982),x=n(9304),k=n(38507),b=n(79301),Z=n(95308),I=n(64571),w=n(56569),S=n(79522),P=n(61101),T=n(48407),C=n(20297),D=n(56034),R=n(46e3),j=function(e,t,n){var i=e||{},o=i.resourceId,r=i.snapshotId,a={key:n||"PRICE_DESCRIBE",resourceIds:[o]};return r&&(a.snapshotId=r),{request:Object.assign({},t,a),actionUrl:"/restapi/soa2/12530/json/applicationConfig?v=PRICE_DESCRIBE"}},N=function(){var e=(0,Z.Z)((0,b.Z)().mark((function e(t){var n,i,o,r,a,c,l,u,d,f,m,v,_;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params,i=t.http,o=t.pageId,r=t.getProductInfo,a=t.devTraceAttrs,c=t.isFromPrefetch,e.prev=1,l=(0,D.Pg)(),o&&(l.clientInfo.pageId=o),u=[],1==n.bizLineType?u.push({key:"needAdditionalPrice",value:!0}):u.push({key:"noNeedTicketRelationResources",value:"true"}),n.aggregation&&u.push({key:"callRecallPK",value:"pkOneOrMore"}),d=[].concat((0,h.Z)(n.aggregation?[{name:"defaultHideWhitelistSaleProp",value:"true"}]:[]),(0,h.Z)(n.sourcePageType&&"searchList"==n.sourcePageType?[{name:"sourcePageType",value:"searchList"}]:[])),f=[(0,P.Z)((0,s.Z)({},n),l,{extension:d,tags:u}),(0,R.Z)()],n.usePage!=p.zh.actSku&&n.usePage!=p.zh.dayplay&&n.usePage!=p.zh.actSkuInline&&f.push(j((0,s.Z)({},n),l),(0,C.Z)(l,{scenicSpotIds:n.spotid||n.poiid?[n.spotid]:[0],poiIds:n.poiid?[n.poiid]:[],saleUnitParam:{resourceIds:n.optid},needBasicInfo:!0,needBargainInfo:!1})),r||n.usePage!=p.zh.detail&&n.usePage!=p.zh.actSku&&n.usePage!=p.zh.actSkuInline&&n.usePage!=p.zh.sku||f.push((0,T.Z)(n,l,"sku","skuU")),m=(0,w.gn)()&&"ticket-detail"!==n.subPage?null:{enableCache:!0,cacheExpireTime:15,cacheLocation:"MEM"},v={list:f,cachePolicy:m,isFromPrefetch:c},a&&(v.needDevTrace=!0,v.devTraceData={attrs:a,scene:n.isUseInBooking?"Action":"\u9996\u5c4f"}),e.next=16,i(v);case 16:return _=e.sent,e.abrupt("return",{response:_});case 20:return e.prev=20,e.t0=e["catch"](1),console.log("\u9519\u8bef\u4e86",e.t0),e.abrupt("return",{});case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),V=n(61252),L=null,E=function(){function e(t,n){(0,i.Z)(this,e),(0,d.Z)(this,"target",void 0),(0,d.Z)(this,"timer",void 0),(0,d.Z)(this,"method",void 0),this.target=t,this.method=n,this.init(),this.timer=(new Date).getTime()}return(0,o.Z)(e,[{key:"init",value:function(){var e=(0,Z.Z)((0,b.Z)().mark((function e(){var t,n,i,o,r,a,s,c,l,u,d,h,f,m,v,_,g,y,x=this;return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.target.state.request,this.timer=(new Date).getTime(),c=(null===(t=L)||void 0===t?void 0:t.state)||{},L=this.target,l=c.request,u=void 0===l?{}:l,d=c.priceMode,u.productId!=s.productId||!(d&&"M"!=d||u.endDate)||s.usePage!=p.zh.actSku||c.isNewGuideSku!=this.target.state.isNewGuideSku){e.next=10;break}return this.target.state=c,this.target.props.hideBreath&&this.target.props.hideBreath(),this.target.setLogData(c),e.abrupt("return");case 10:return e.next=12,N({http:this.target.http,params:s,getProductInfo:this.target.props.getProductInfo,devTraceAttrs:this.target.devTraceAttrs,isFromPrefetch:!1});case 12:if(h=e.sent,f=h.response,f){e.next=16;break}return e.abrupt("return");case 16:if(console.log("%c\u6027\u80fd\u68c0\u6d4b-\u9996\u5c4f\u8bf7\u6c42\u8017\u65f6:".concat((new Date).getTime()-this.timer,"ms"),"color:yellow"),m=!1,f[0].data&&f[0].data.priceAndStockInfos&&f[0].data.priceAndStockInfos.length&&f[0].data.packageInfos&&f[0].data.packageInfos.length&&!f[0].data.packageInfos.some((function(e){return!e.salesProperties}))){e.next=23;break}return m=!(null===(v=f[0])||void 0===v||!v.__hasSendLogError),this.target.afterFetch({isSaleOut:!0,hasSendErrorLog:m}),this.target.confirm.show({delayTime:500,content:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",btnCallBack:[function(){if(x.target.props.onClose)x.target.props.onClose();else{var e=s.spotid,t=s.optid,n=void 0===t?[]:t,i=n[0];62722===Number(e)&&[46403856,46404071].includes(i)&&(0,V.v5)(),x.target.pop()}}]}),e.abrupt("return");case 23:if(!f[0].data.boxProductInfos||!f[0].data.boxProductInfos.length){e.next=29;break}if(f[0].data.firstLevelInfos&&f[0].data.firstLevelInfos.length){e.next=29;break}return(0,V.gp)({type:"ttd_dev_sku_pack3calendar_response_err",body:{getProductPriceCalendar:f[0].data}}),this.target.afterFetch({isSaleOut:!0}),this.target.confirm.show({delayTime:500,content:"\u4ea7\u54c1\u5df2\u552e\u7f44\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u5427",btnCallBack:[function(){x.target.props.onClose?x.target.props.onClose():x.target.pop()}]}),e.abrupt("return");case 29:if(!f[0].data.entendInfos||!f[0].data.entendInfos.length){e.next=34;break}if(_=f[0].data.entendInfos.find((function(e){return!("needUpdateAppVersion"!==e.key||!e.value)})),!_){e.next=34;break}return this.target.props.changeNeedUpdate&&this.target.props.changeNeedUpdate(),e.abrupt("return");case 34:g={getProductPriceCalendar:f[0].data,getHoliday:f[1],getPriceInfo:null===f||void 0===f||null===(n=f[2])||void 0===n?void 0:n.data,getScenicSpotInfo:null===f||void 0===f||null===(i=f[3])||void 0===i?void 0:i.scenicSpotInfos,getProductInfo:null!==(o=this.target)&&void 0!==o&&null!==(o=o.props)&&void 0!==o&&o.getProductInfo?[this.target.props.getProductInfo]:(null===f||void 0===f||null===(r=f[4])||void 0===r?void 0:r.productInfos)||null,getActPreferenceInfo:null===(a=this.target)||void 0===a||null===(a=a.props)||void 0===a?void 0:a.getActPreferenceInfo},this.timer=(new Date).getTime(),y=k.ZP.getFormatByModules(s,g,["sku","holiday","ticketInfo","itinerary","promotion","packages","imInfo","priceInfo"],this.method),console.log("%c\u6027\u80fd\u68c0\u6d4b-\u9996\u5c4f\u6570\u636e\u8f6c\u6362\u8017\u65f6:".concat((new Date).getTime()-this.timer,"ms"),"color:yellow"),this.target.afterFetch(y,!0);case 39:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),A=n(44434),F=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,c.Z)(o),"state",void 0),(0,d.Z)((0,c.Z)(o),"logData",{}),(0,d.Z)((0,c.Z)(o),"changeFlag",!1),(0,d.Z)((0,c.Z)(o),"changeKey",""),e.request&&e.request.usePage==p.zh.book&&(o.state={chioceDateData:e.calendar.find((function(t){return t.date==e.defaultDate})),calendar:(0,h.Z)(e.calendar),resources:(0,h.Z)(e.resources),countArr:o.initCounts(e.request.optid,e.request.count,e.resources),request:(0,s.Z)({},e.request),priceMode:e.priceMode,reservation:e.reservation,ticketInfo:e.ticketInfo,holiday:e.holiday,calendarTip:e.calendarTip,showLocalTime:e.showLocalTime,isUseDateSame:e.isUseDateSame,isPack3:e.isPack3,hasSingleDateCalendar:e.hasSingleDateCalendar,firstLevelInfos:e.firstLevelInfos,hasReservation:e.hasReservation},o.logData=e.logs||{}),o}return(0,o.Z)(n,[{key:"changeDate",value:function(e,t){}},{key:"changeDatePack3",value:function(e,t,n){}},{key:"initCounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Array.from(Array(n.length)).map((function(){return 0}));return this.state&&this.state.countArr&&(i=(0,h.Z)(this.state.countArr)),n.forEach((function(n,o){if(e.length)for(var r=0;r<e.length;r++)n.mixedIds.includes(Number(e[r]))&&void 0!==t[r]&&(i[o]=t[r]);else 0==o&&(i[0]=t[0])})),i}},{key:"componentWillReceiveProps",value:function(e){var t,n=this,i=e.request,o=void 0===i?{}:i,r=e.defaultDate,a=e.fetchStatus,c=e.mainResourceChanged,l=e.resources,u=e.holiday;if(o.usePage&&![p.zh.sku,p.zh.detail].includes(o.usePage)){o.usePage==p.zh.book&&(this.logData=e.logs||{},this.setState({holiday:u})),(o.usePage==p.zh.book&&((null===l||void 0===l?void 0:l.length)!=(null===(t=this.props.resources)||void 0===t?void 0:t.length)||l.some((function(e,t){return n.props.resources[t].resourceName!=e.resourceName})))||o.isShowChangeButton&&!(0,S.uE)(l,this.props.resources)||e.refreshSku!=this.props.refreshSku)&&(this.state.countArr=Array.from(Array(l.length)).map((function(){return 0})),this.setState({countArr:this.initCounts(o.optid,o.count,(0,h.Z)(l)),request:(0,s.Z)({},o)}));var d=!(0,S.uE)(o.count,this.props.request.count)||!(0,S.uE)(o.optid,this.props.request.optid);if(d&&(o.isShowChangeButton&&(this.state.countArr=Array.from(Array(l.length)).map((function(){return 0}))),this.setState({countArr:this.initCounts(o.optid,o.count,l),request:(0,s.Z)({},o)})),r!==this.props.defaultDate||!(0,S.uE)(e.calendar,this.props.calendar)||!(0,S.uE)(e.dateRecord,this.props.dateRecord)){var f=e.calendar.find((function(e){return e.date==o.date}));this.setState({chioceDateData:f,calendar:(0,h.Z)(e.calendar),resources:(0,h.Z)(e.resources)})}c&&!this.changeFlag&&o.usePage==p.zh.book&&2==a&&(this.changeFlag=!0,this.state.isPack3?this.changeDatePack3(this.state.chioceDateData):this.changeDate(this.state.chioceDateData))}}},{key:"formatValidText",value:function(e,t,n){var i;if(!e||!this.state.chioceDateData&&"U"!=n||"M"==n)return"";var o=null===(i=this.state.chioceDateData)||void 0===i?void 0:i.date,r="U"!=n?e.replace("{0}",o):e;return t&&(r+="\uff0c"+t),r}},{key:"onDateOrResourceChange",value:function(e){var t,n=this.state,i=n.resources,o=n.countArr,r=n.chioceDateData,a=n.request,c=this.props,l=c.changeCalender,u=c.changeCount,d=c.changeRecom,p=c.dateRecord,h=c.hasRecommend;if(l&&u&&d){var f=function(e){(0,V.gp)({body:(0,s.Z)({title:"changeCalender\u56de\u8c03\u7a7a\u6570\u7ec4"},e)})},m=[],v=a.optid[0];if(r)if(null!==i&&void 0!==i&&null!==(t=i[0])&&void 0!==t&&null!==(t=t.mixedIds)&&void 0!==t&&t.length)i.forEach((function(e,t){var n,i,s,c=r.resources.filter((function(t){return e.mixedIds.includes(t.resourceId)}));s=c.find((function(e){return a.optid.includes(e.resourceId)}))||c[0],s&&o[t]?m.push({id:s.resourceId,count:o[t],productId:s.productId}):s||f({matchDateResources:c,request:a,countArr:o}),0==t&&(v=(null===(n=s)||void 0===n?void 0:n.resourceId)||(null===(i=r.resources)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.resourceId))}));else{var _;v=null===(_=r.resources)||void 0===_||null===(_=_[0])||void 0===_?void 0:_.resourceId,h||f({resources:i})}else m=[{id:a.optid[0],count:o[0]}];if(e){if(null===r||void 0===r||!r.date)return;var g=h&&!p[r.date];if(g)d(r.date,o,v);else{var y="";h&&(y=(0,A.Z)({countArr:o,chioceDateData:r,resources:i,aggregation:a.aggregation,resourceList:m})),l(r.date,m,y)}}else u(m)}}},{key:"onChangePerson",value:function(e,t){var n=this,i=this.state.countArr;i[e]=t,this.setState({countArr:i},(function(){return n.onDateOrResourceChange(!1)}))}}]),n}(D.ZP),M=n(77138),O=n(8066),B=n(121),z=n(75971),H=function(e){return{salePropertyFinish:!1,dateFinish:!1,peopleFinish:!1,selectPropertyIds:[],grayPropertys:{},request:(0,s.Z)((0,s.Z)({},e),(0,z.n)(e)),footer:{total:"",subPriceDes:"",isGrayBtn:!0},beforeOptidLen:e.optid?e.optid.length:0}},U=n(9349),G=n(48830),q=function(){var e=(0,Z.Z)((0,b.Z)().mark((function e(t){return(0,b.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=n(39140),K=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,i.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,c.Z)(o),"fetch",void 0),(0,d.Z)((0,c.Z)(o),"request",void 0),(0,d.Z)((0,c.Z)(o),"clickedMore",!1),(0,d.Z)((0,c.Z)(o),"aniFuns",{}),(0,d.Z)((0,c.Z)(o),"devTraceType",""),(0,d.Z)((0,c.Z)(o),"devTraceAttrs",void 0),(0,d.Z)((0,c.Z)(o),"onFinishChioce",(function(e,t){var n=e.selectPropertyIds,i=e.firstLevelMapSelectedPropertyIds,r=n;if(i){var a=o.state.firstLevelInfos,l=[];a.forEach((function(e){var t=e.firstLevelId;l.push.apply(l,(0,h.Z)(i[t]))})),r=l}var u=r?r.filter((function(e){return!!e})):[];(0,O.Z)((0,s.Z)({itemIdList:u},e),(0,c.Z)(o),(function(){var e=o.state.request.subPage;"ticket-detail"!=e&&o.runFuns();var n=o.state.footer.isGrayBtn;n?o.confirm.show({content:"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u9009\u8d2d\u5176\u4ed6\u4ea7\u54c1\u6216\u7a0d\u540e\u518d\u8bd5",btnOK:["\u77e5\u9053\u4e86"],btnCallBack:[function(){o.props.onClose?o.props.onClose():o.pop()}]}):t&&t()}))}));var r=e.request||k.ZP.getParamsFromUrl();p.zh.actSku!=r.usePage&&M.F.clear(),o.devTraceAttrs=[{key:"token",value:r.token}],U.ol&&(0,U.ol)({attrs:o.devTraceAttrs});var a=e||{},l=a.pageId;return l&&((0,V.PX)({pageId:l}),o.header=(0,s.Z)((0,s.Z)({},o.header),{},{clientInfo:(0,s.Z)((0,s.Z)({},o.header.clientInfo),{},{pageId:l})})),[p.zh.sku,p.zh.detail].includes(r.usePage)&&(o.state=(0,s.Z)((0,s.Z)({},o.state),H(r)),o.fetch=new E((0,c.Z)(o))),o}return(0,o.Z)(n,[{key:"addFun",value:function(e,t){this.aniFuns[e]?this.aniFuns[e].push(t):this.aniFuns[e]=[t]}},{key:"runFuns",value:function(){var e=this;Object.keys(this.aniFuns).map((function(t){var n=e.aniFuns[t].pop();"function"==typeof n&&n(),e.aniFuns[t]=[]}))}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.footer,n=e.request;"number"==typeof(null===t||void 0===t?void 0:t.total)&&null!==n&&void 0!==n&&n.aggregation||this.runFuns()}},{key:"getChoiceDateData",value:function(e){var t=e.calendar,n=void 0===t?[]:t,i=e.request;return n.find((function(e){return e.date==i.date}))}},{key:"getChoiceDateDataDiffDate",value:function(e){var t={},n=e.firstLevelMapCalendar,i=void 0===n?{}:n,o=e.request,r=o.date,a=void 0===r?"":r,s=o.firstLevelIds,c=void 0===s?[]:s,l=a.split("|");return l.length===c.length&&c.forEach((function(e,n){var o=i[e],r=l[n];t[e]=o.find((function(e){return e.date===r}))})),t}},{key:"afterFetch",value:function(e,t){var n=this,i=this.state.request,o=i||{},r=o.usePage,a=this.props.onSkuLoad;this.logData=(0,k.OB)(this.props,(0,s.Z)((0,s.Z)({},this.state),e),this.devTraceAttrs),this.devTraceType="afterFetch",(0,_.Z)(this,(0,s.Z)({},e),(function(){if(a&&a(null===e||void 0===e?void 0:e.isSaleOut,e),!e.isSaleOut){var i=n.state,o=i.isPack3,c=i.isUseDateSame,l=n.getChoiceDateData(n.state),u={};o&&!c&&(u=n.getChoiceDateDataDiffDate(n.state));var d=(0,s.Z)((0,s.Z)({},n.state.request),n.props.request),h=d.peopleId,f=void 0===h?"":h,m=d.firstLevelIds,v=void 0===m?[]:m,_=n.state.choicePeopleId,g=function(e){n.devTraceType="",t&&[p.zh.sku,p.zh.detail].includes(r)&&M.F.save({sku_init_state:e})},y=function(){if(o&&!c){if(r===p.zh.book)return;var e=v.some((function(e){return!!u[e]}));e?n.changeDatePack3(u,(function(){n.setPropsSalesPropertyPack3(g)}),v):n.setPropsSalesPropertyPack3(g)}else l?o?n.changeDatePack3(l,(function(){n.setPropsSalesPropertyPack3(g)})):n.changeDate(l,(function(){n.setPropsSalesProperty(g)})):o?n.setPropsSalesPropertyPack3(g):n.setPropsSalesProperty(g)};if(n.devTraceType="defaultSelect",f){var x=f||_;o?n.changePeoplePack3(x,(function(){return y()})):n.changePeople(x,(function(){return y()}))}else y()}}))}},{key:"setPropsSalesProperty",value:function(e){var t=this.props.otherParams,n=void 0===t?{}:t,i=n.salesPropertyIds,o=void 0===i?[]:i;o&&o.length>0?this.changeSaleProperty(o,-1,e):e(this.state)}},{key:"setPropsSalesPropertyPack3",value:function(e){var t=this.props,n=t.otherParams,i=void 0===n?{}:n,o=t.request,r=void 0===o?{}:o,a=i.salesPropertyIds,s=void 0===a?[]:a;if(s&&s.length>0){var c=r.firstLevelIds,l=void 0===c?[]:c,u={};l.forEach((function(e,t){var n=s[t],i=n.split("-").map((function(e){return e?Number(e):""}));u[e]=i})),this.changeSalePropertyPack3(u,-1,e,l)}else e(this.state)}},{key:"renderCalendar",value:function(e){}},{key:"clickChangePeople",value:function(e){this.devTraceType="changePeople",this.changePeople(e),this.setState({haveClearBtn:!0})}},{key:"changePeople",value:function(e,t){var n=this,i=(0,v.ZP)(e,this);(0,_.Z)(this,i,(function(){n.checkFinishChioce(i,t)}))}},{key:"clickChangePeoplePack3",value:function(e){this.devTraceType="changePeople",this.changePeoplePack3(e),this.setState({haveClearBtn:!0})}},{key:"changePeoplePack3",value:function(e,t){var n=this,i=(0,g.ZP)(e,this);(0,_.Z)(this,i,(function(){n.checkFinishChioce(i,t)}))}},{key:"clearAll",value:function(){var e=(0,B.I8)(M.F.load("sku_init_state")||{});e&&delete e.assistComponent,this.setState((0,s.Z)((0,s.Z)({chioceDateData:null,choicePeopleId:"",selectPropertyIds:[],salePropertyFinish:!1,dateFinish:!1,footer:{total:"",subPriceDes:"",isGrayBtn:!0},grayPropertys:[]},e),{},{haveClearBtn:!1}))}},{key:"getSkutype",value:function(){var e=this.state,t=e.request.aggregation,n=e.choicePeopleId,i=e.expandCalendar,o=p.pL.skuResource;return i||(o=p.pL.skuProduct),n&&(o=p.pL.skuPeople),t||(o=p.pL.commonSku),o}},{key:"booking",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.platform&&"RN"==this.platform;!t&&this.renderCalendar(!1,!1),this.clickedMore=!1;var n=this.state,i=n.request,o=i.optid,r=void 0===o?[]:o,a=i.date,s=i.spotid,c=i.isscan,l=i.ctm_ref,u=i.usenative,d=i.token,p=i.extParams,f=i.traceid,m=i.isScanShelf,_=n.selectPropertyIds,g=void 0===_?[]:_,y=n.isPack3,x=n.diffDateBoxResIds,k=void 0===x?[]:x,b=n.sameDateBoxResIds,Z=void 0===b?[]:b,w=n.firstLevelInfos,P=void 0===w?[]:w,T=n.firstLevelMapSubResId,C=void 0===T?{}:T,D=n.firstLevelMapSelectedPropertyIds,R=void 0===D?{}:D,j=n.boxResIdMapSubResId,N=void 0===j?{}:j,V=n.beforeOptidLen,L=n.choicePeopleId,E=n.footer.hasNaquhua,A=n.resourcetype,F=this.props.otherParams,M=void 0===F?{}:F,O=M.resourcetype,B="spotid=".concat(s,"&date=").concat(a);B="".concat(B,"&resourcetype=").concat(O||A),c&&(B="".concat(B,"&isscan=T")),m&&(B="".concat(B,"&isScanShelf=true")),l&&(B="".concat(B,"&ctm_ref=").concat(l)),u&&(B="".concat(B,"&usenative=").concat(u)),f&&(B="".concat(B,"&traceid=").concat(f)),E&&(B="".concat(B,"&label=newNaquhua"));var z=(0,G.Me)(this.platform),H=(0,G.RO)(this.platform==W.NX.RN?W.NX.RN:W.NX.H5),U=g.join("|");B="".concat(B,"&token=").concat(encodeURIComponent(d));var K={date:a,optid:r.join("|"),spotid:s,isscan:c,ctm_ref:l,usenative:u,salesPropertyIds:U,token:d,isNewNaquhua:!!E},Y=this.getSkutype();if(L&&(K.peopleId=L),y){var X=[],Q=[];P.forEach((function(e){var t=e.firstLevelId;X.push(t);var n=R[t];Q.push(n.join("-"))})),U=Q.join("|"),B="".concat(B,"&firstLevelIds=").concat(X.join("|")),K.firstLevelIds=X}if(B="".concat(B,"&salesPropertyIds=").concat(U),K.salesPropertyIds=U,r&&1==r.length){var J=r[0];if(B="".concat(B,"&optid=").concat(J),y){var $=[].concat((0,h.Z)(k),(0,h.Z)(Z)).includes(J);if($){var ee=[],te=N[J];P.forEach((function(e){var t=e.firstLevelId,n=C[t];ee.push.apply(ee,(0,h.Z)((0,v.ve)(te,n)))})),B="".concat(B,"&subResourceId=").concat(ee.join("-")),K.subResourceId=ee.join("-")}}if(1==V&&this.props.onNextCallBack)this.props.onNextCallBack(Object.assign(K,{fromSkuType:Y}));else{B="".concat(B,"&fromSkuType=").concat(Y);var ne="".concat(z).concat(B,"&").concat((0,S.Xh)(p));if("RN"==this.platform){var ie=(0,I.FN)(),oe=ie.router.url;if(/.*CRNModuleName=rn_ttd_taro&CRNType=1/.test(oe)){var re=(0,S.vn)(ne);this.push(null===re||void 0===re?void 0:re.initialPage,!1,re)}else{if(e)return ne;this.push(ne)}}else{if(e)return ne;this.push(ne)}q({url:ne,http:this.http})}}else{if(y){var ae=[],se=[],ce=[];if(r.forEach((function(e){k.includes(e)?(se.push(e),ce.push(0)):Z.includes(e)?(se.push(e),ce.push(1)):ae.push(e)})),B="".concat(B,"&optid=").concat(ae.join("|"),"&boxid=").concat(se.join("|"),"&boxType=").concat(ce.join("|")),K.optid=ae.join("|"),K.boxid=se.join("|"),K.boxType=ce.join("|"),se.length){var le=[];se.forEach((function(e){var t=[],n=N[e];P.forEach((function(e){var i=e.firstLevelId,o=C[i];t.push.apply(t,(0,h.Z)((0,v.ve)(n,o)))})),le.push(t.join("-"))})),B="".concat(B,"&subResourceId=").concat(le.join("|")),K.subResourceId=le.join("|")}}else B="".concat(B,"&optid=").concat(r.join("|"));if(V>1&&this.props.onNextCallBack)this.props.onNextCallBack(K);else{var ue="".concat(H).concat(B,"&fromSkuType=").concat(Y,"&").concat((0,S.Xh)(p));if(e)return ue;this.push(ue,!1,null,void 0,void 0,!1)}}this.onPoplayerHide()}},{key:"onPoplayerHide",value:function(){}},{key:"getWarningTip",value:function(){var e="",t=this.state,n=t.chioceDateData,i=t.choicePeopleId,o=t.selectPropertyIds,r=void 0===o?[]:o,a=t.saleProperties,s=void 0===a?[]:a,c=t.expandCalendar,l=t.isPeopleAggregations,u=t.priceMode,d=t.request,p=[];return!l||c||i||p.push("\u4f7f\u7528\u4eba\u7fa4"),n||"U"==u||p.push("\u4f7f\u7528\u65e5\u671f"),c||s.forEach((function(e,t){if(!e.hide&&!r[t]){var n=e.salesPropertyName;p.push(n)}})),e=p.reduce((function(e,t,n,i){return 0===n?e="\u8bf7\u5148\u9009\u62e9".concat(t):n<i.length-1?e+="\u3001".concat(t):e+="\u548c".concat(t),e}),""),e&&d.isNewNaquhua&&(e+="\uff0c\u9009\u4e2d\u540e\u5c55\u793a\u62ff\u53bb\u82b1\u4f18\u60e0"),e}},{key:"getPack3WarningTip",value:function(){var e="",t=this.state,n=t.chioceDateData,i=t.firstLevelMapChoiceDateData,o=void 0===i?{}:i,r=t.choicePeopleId,a=t.firstLevelInfos,s=void 0===a?[]:a,c=t.firstLevelMapSelectedPropertyIds,l=void 0===c?{}:c,u=t.firstLevelMapSaleProperties,d=void 0===u?{}:u,p=t.isUseDateSame,f=t.request,m=p?(0,y.hC)(this,l,n,d,r):(0,y.Xz)(this,l,o,d,r),v=[];m.peopleFinish||v.push("\u4f7f\u7528\u4eba\u7fa4"),m.dateFinish||v.push("\u4f7f\u7528\u65e5\u671f");var _=[];if(s.length>1)m.salePropertyFinish||_.push("\u5957\u9910");else{var g=s[0].firstLevelId,x=d[g],k=l[g];(x||[]).forEach((function(e,t){if(!e.hide&&!k[t]){var n=e.salesPropertyName;_.push(n)}}))}return _.length&&v.push.apply(v,(0,h.Z)(Array.from(new Set(_)))),e=v.reduce((function(e,t,n,i){return 0===n?e="\u8bf7\u5148\u9009\u62e9".concat(t):n<i.length-1?e+="\u3001".concat(t):e+="\u548c".concat(t),e}),""),e&&f.isNewNaquhua&&(e+="\uff0c\u9009\u4e2d\u540e\u5c55\u793a\u62ff\u53bb\u82b1\u4f18\u60e0"),e}},{key:"clickChangeSaleProperty",value:function(e,t,n){this.devTraceType="changeSaleProperty";var i=this.changeSaleProperty(e,t);this.setState({haveClearBtn:!0}),n&&n(i)}},{key:"changeSaleProperty",value:function(e,t,n){var i=this,o=(0,f.ZP)(e,t,this);return(0,_.Z)(this,o,(function(){i.checkFinishChioce(o,(function(){n&&n(i.state)}))})),o}},{key:"clickChangeSalePropertyPack3",value:function(e,t,n){this.devTraceType="changeSaleProperty",this.changeSalePropertyPack3(e,t,void 0,n),this.setState({haveClearBtn:!0})}},{key:"changeSalePropertyPack3",value:function(e,t,n,i){var o=this,r=(0,x.Z)(e,t,this,i);return(0,_.Z)(this,r,(function(){o.checkFinishChioce(r,(function(){n&&n(o.state)}))})),r}},{key:"checkFinishChioce",value:function(e,t){var n=this,i=e.salePropertyFinish,o=e.dateFinish,r=e.peopleFinish,a=e.chioceDateData,c=void 0===a?{}:a,l=e.firstLevelMapChoiceDateData,u=void 0===l?{}:l,d=e.request,h=void 0===d?{}:d,f=e.selectPropertyIds,m=e.firstLevelMapSelectedPropertyIds,v=e.choicePeopleId,_=e.footer,g=this.state,y=g.expandCalendar,x=g.reservation,k=g.isUseDateSame,b=g.isPack3,Z=g.firstLevelInfos,I=g.diffDateBoxResIds,w=g.sameDateBoxResIds,S=g.firstLevelMapSubResId,P=g.boxResIdMapSubResId,T=h.token,C=h.spotid,D=h.optid,R=h.isNewNaquhua,j=h.isScanShelf,N=this.props.onSkuChange,V=(null===c||void 0===c?void 0:c.date)||"";if(this.changeKey="".concat((new Date).getTime(),"-").concat(Math.random()),b&&!k){var L=[];Z.forEach((function(e){var t=e.firstLevelId,n=u[t];L.push((n||{}).date||"")})),V=L.join("|")}var E={date:V,selectPropertyIds:f,firstLevelMapSelectedPropertyIds:m,peopleId:v,optid:D,footer:_,isNewNaquhua:R,spotid:C,reservation:x,isPack3:b,diffDateBoxResIds:I,sameDateBoxResIds:w,firstLevelInfos:Z,firstLevelMapSubResId:S,boxResIdMapSubResId:P};if(i&&o&&r&&[p.zh.detail,p.zh.sku].includes(this.state.request.usePage)){var A=function(){t&&t();var e=n.getSkutype(),i=n.state,o=i.request,r=i.footer,a=i.resourcetype;E=(0,s.Z)((0,s.Z)({},E),{},{optid:o.optid,footer:r,skutype:e,resourcetype:a}),N&&N(E)};this.onFinishChioce({date:V,selectPropertyIds:y?[]:f,firstLevelMapSelectedPropertyIds:m,token:T,choicePeopleId:v,spotid:C,optid:D,isNewNaquhua:R,isScanShelf:j},A)}else{var F=this.getSkutype();E.skutype=F,N&&N(E),t&&t()}}}]),n}(F),Y=n(2446),X=n(57113),Q=n(35409),J=n(32545),$=n(17366),ee=function(e){(0,r.Z)(h,e);var t=(0,a.Z)(h);function h(e){var n,o;(0,i.Z)(this,h),o=t.call(this,e),(0,d.Z)((0,c.Z)(o),"cName",void 0),(0,d.Z)((0,c.Z)(o),"calendar",void 0),(0,d.Z)((0,c.Z)(o),"calendarLoading",void 0),(0,d.Z)((0,c.Z)(o),"poplayerHeight",.8*w.Db.get("window").height-w.iO),(0,d.Z)((0,c.Z)(o),"showDefault",void 0),(0,d.Z)((0,c.Z)(o),"hasSendExpo",void 0),o.cName="product-sku";var r=(null===(n=o.state)||void 0===n?void 0:n.request)||{};return o.state=(0,s.Z)((0,s.Z)({},o.state),{},{assistComponent:X.K},r.usePage==p.zh.actSku||r.usePage==p.zh.dayplay||r.usePage==p.zh.actSkuInline?H(r):{}),o.showDefault=!r.isscan&&(r.date&&r.usePage!=p.zh.book||o.props.showDefault),r&&r.usePage==p.zh.detail&&!o.props.hasAssistCompRender&&X.Z.register((0,c.Z)(o)),o.hasSendExpo=!1,o}return(0,o.Z)(h,[{key:"componentDidMount",value:function(){(0,l.Z)((0,u.Z)(h.prototype),"componentDidMount",this).call(this),this.props.initCallBack&&this.props.initCallBack(this.onBackAndroid.bind(this)),X.Z.add("calendarPopLayer",Q.Z,{props:{isOpened:!1}}),X.Z.add("peopleHelpInfoPopLayer",Q.Z,{props:{isOpened:!1}})}},{key:"componentWillUnmount",value:function(){var e=M.F.load("sku_init_state");M.F.clear(),M.F.save({sku_init_state:e}),this.hidePop()}},{key:"hidePop",value:function(){(0,Y.sg)("calendarPopLayer")?Y.ZP.hide("calendarPopLayer"):(0,Y.sg)("buyNotes")?Y.ZP.hide("buyNotes"):(0,Y.sg)("peopleHelpInfoPopLayer")?Y.ZP.hide("peopleHelpInfoPopLayer"):(0,Y.sg)("paymentPopLayer")?Y.ZP.hide("paymentPopLayer"):this.props.onClose&&this.props.onClose()}},{key:"clickChangeDate",value:function(e){this.showDefault=!1,this.devTraceType="changeDate";var t=this.changeDate(e);return this.setState({haveClearBtn:!0}),t}},{key:"changeDate",value:function(e,t){var n=this,i=(0,m.ZP)(e,this);return(0,_.Z)(this,i,(function(){n.checkFinishChioce(i,t),n.onDateOrResourceChange(!0)})),i}},{key:"clickChangeDatePack3",value:function(e,t){this.showDefault=!1,this.devTraceType="changeDate";var n=this.changeDatePack3(e,void 0,t);return this.setState({haveClearBtn:!0}),n}},{key:"changeDatePack3",value:function(e,t,n){var i=this,o=(0,y.ZP)(e,this,n);return(0,_.Z)(this,o,(function(){i.checkFinishChioce(o,t),i.onDateOrResourceChange(!0)})),o}},{key:"renderCalendar",value:function(e){var t,i,o=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4?arguments[4]:void 0,l=this.state,u=l.holiday,d=void 0===u?{}:u,p=l.peopleProperties,h=l.choicePeopleId,f=l.request,m=l.selectedPackage,v=l.priceInfo,_=l.hasPromotion,g=l.hasReservation,y=l.firstLevelMapCalendar,x=l.firstLevelMapChoiceDateData,k=void 0===x?{}:x,b=l.isPack3,Z=l.isUseDateSame,I=l.showLocalTime,S=l.isNewGuideSku;t=c?y[c]:this.state.calendar,i=c?k[c]:this.state.chioceDateData;var P=n(82195).Z,T=n(18427).Z,C=this.logData,D=C.dateClickLog,R=C.act_guidebook_2023new_calendar_expo,j=C.act_guidebook_2023new_calendardate_click;t&&(0,J.Ht)(t[0].date,t[t.length-1].date)<=3&&(a=!1),this.platform==W.NX.Mini&&(a=!1);var N=!(p&&p.length>0)||!!h;Y.ZP.show({props:{name:"calendarPopLayer",title:"\u9009\u62e9\u65e5\u671f",popHeight:S?.8*w.Db.get("window").height:this.poplayerHeight,isScrollView:!1,scrollHeight:(S?.8*w.Db.get("window").height:this.poplayerHeight)-44,renderOnshow:a,isOpened:e,needSave:r,Breath:T,zIndex:2e3,conentStyles:{paddingBottom:0},direction:S?"right":"bottom"},child:P,childProps:{calendar:t,holiday:d,onChooseDate:function(e){b?c?o.clickChangeDatePack3(e,c):o.clickChangeDatePack3(e):o.clickChangeDate(e),o.showDefault=!1},defaultDate:i&&i.date,firstLevelId:c,onClickCallback:function(){Y.ZP.hide("calendarPopLayer")},dateClickLog:S?j:D&&D(i&&i.date),isInPopLayer:!0,isOpened:e,footerText:"\u540e\u7eed\u65e5\u671f\u6682\u4e0d\u53ef\u8ba2",isDateShowPrice:b?!!Z&&N:N,isFromAct:s,titleTips:null===m||void 0===m?void 0:m.inMinPriceDesc,traceData:this.logData.calendarTraceData,usePage:f.usePage,marginBottom:(0,w.cY)()?(0,$.Vh)(24):0,priceInfo:v,hasPromotion:_,hasReservation:g,showLocalTime:I,isNewGuideSku:S,newCalendarExpoLog:R}})}},{key:"onShowMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;this.renderCalendar(!0,!0,!this.clickedMore,!0===e,t),!this.clickedMore&&(this.clickedMore=!0)}},{key:"onPoplayerHide",value:function(){this.hidePop()}},{key:"onBackAndroid",value:function(){this.hidePop()}}]),h}(K),te=(n(90201),n(72747)),ne=n(64156),ie=n(73435),oe=n(27868),re=n(27097),ae=n(99739),se=(0,ae.ZP)(),ce=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;(0,i.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,c.Z)(o),"state",void 0),(0,d.Z)((0,c.Z)(o),"colorCodes",void 0),(0,d.Z)((0,c.Z)(o),"moreTitle",void 0),(0,d.Z)((0,c.Z)(o),"moreTitleText",void 0),(0,d.Z)((0,c.Z)(o),"mainResourceId",void 0),(0,d.Z)((0,c.Z)(o),"operated",!1),(0,d.Z)((0,c.Z)(o),"isRN",se.platform==W.NX.RN),o.cName="select-quantity";var r=e.countArr&&e.countArr.filter((function(e){return!!e}));return o.state={isCollapse:!e.isscan&&!(r&&r.length>1)&&!e.isAct,hasClickIndexs:[],hasChange:!1},o.colorCodes=["BookingEffectiveTime","limitedcancellation","nocancellation","lossycancellation","NeedTicket","AirPort","Delivery","Printing","NotScenicSpot","AggregateIn","AggregateUse","EnterNecessary"],o.mainResourceId=o.getMainResourceId(e),o.moreTitle=o.getHideItemName(),o.moreTitleText=o.getMoreTitleText(),o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){X.Z.add("buyNotes",Q.Z,{props:{isOpened:!1}})}},{key:"onChange",value:function(e,t){var n=this.props,i=n.onChangePerson,o=n.countArr;o[t]!=e&&i&&i(t,e)}},{key:"onChoiceDisabled",value:function(e,t,n,i,o){if(this.props.handleErrorToast)this.props.handleErrorToast();else if(n){var r=n.inventoryNum,a=t.max,s=t.count,c=t.start,l=this.getLimitMsg(n,"",!0),u=this.props,d=u.salePropertyFinish,p=void 0===d||d,h=u.logs,f=h||{},m=f.skuShowTraceData;if(i&&s+e<c&&s+e>0)return m&&(0,oe.Z)(m("sub","tkt_3100008","\u6700\u5c11\u9009\u62e9".concat(c,"\u4efd"))),this.toast.show("\u6700\u5c11\u9009\u62e9".concat(c,"\u4efd"));if(p){if(e>0){var v=this.getPkgLimitMsg(!0,e);return v||(v=s>=r?"\u4ec5\u5269".concat(r,"\u4efd"):l||"\u6700\u591a".concat(a,"\u4efd"),m&&(0,oe.Z)(m("add","tkt_3100009",v))),this.toast.show(v)}return e<0&&s<=c&&c>1&&0==o?(m&&(0,oe.Z)(m("sub","tkt_3100008","".concat(c,"\u4efd\u8d77\u8ba2"))),this.toast.show("".concat(c,"\u4efd\u8d77\u8ba2"))):void 0}}}},{key:"getTarPackage",value:function(e){var t=this.props,n=t.chioceDateData,i=t.selectedPackage,o=null===n||void 0===n?void 0:n.packages.find((function(e){return e.packageId==(null===i||void 0===i?void 0:i.packageId)}));return e?o:o||i}},{key:"getPkgLimitMsg",value:function(e,t){var n=this.props,i=n.isAct,o=n.countArr,r=n.isNewGuideSku,a=i?this.getTarPackage():null;if(i&&a){var s=a.minQuantity,c=a.maxQuantity,l=o.reduce((function(e,t){return e+t}),0);if(t&&(l+=t),!e)return this.getLimitMsg(a,r?"":"\u9884\u8ba2\u603b\u6570\uff1a");if(l>c||l<s)return this.getLimitMsg(a,"\u9884\u8ba2\u603b\u6570\uff1a",e)}return""}},{key:"getLimitMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=this.props.isAct;if(!e||!i)return"";var o=e.maxQuantity,r=e.minQuantity,a=t;return r==o?a+="\u4ec5\u9650\u9884\u8ba2".concat(r,"\u4efd"):1==r&&o<=10?a+="\u6700\u591a\u9884\u8ba2".concat(o,"\u4efd"):r>1&&o<=10?a+="".concat(r,"\u4efd\u8d77\u8ba2\uff0c\u6700\u591a").concat(o,"\u4efd"):r>1&&o>10?a+="".concat(r,"\u4efd\u8d77\u8ba2"):n&&o>10&&(a+="\u6700\u591a\u9884\u8ba2".concat(o,"\u4efd")),a==t?"":a}},{key:"isLimitError",value:function(e,t){var n=this.props.isAct;if(!e||!n||!t)return!1;var i=e.maxQuantity,o=e.minQuantity;return t<o||t>i}},{key:"componentWillReceiveProps",value:function(e){var t=this.getMainResourceId(e);this.mainResourceId&&t!==this.mainResourceId&&this.setState({hasChange:!0,hasClickIndexs:[]}),this.moreTitle=this.getHideItemName(),this.moreTitleText=this.getMoreTitleText(),this.mainResourceId=t}},{key:"getMainResourceId",value:function(e){var t=null,n=e.chioceDateData,i=e.resources;if(n&&n.resources.length){var o=i[0],r=n.resources.find((function(e){var t;return null===(t=o.mixedIds)||void 0===t?void 0:t.includes(e.resourceId)}));t=(r||{}).resourceId}return t}},{key:"initChioceOptions",value:function(e,t){var n={min:0,max:0,count:0,start:1},i=this.props,o=i.countArr,r=i.selectedPackage,a=void 0===r?null:r,s=i.isAct,c=i.isStandAndPeople;if(!e)return n;n.count=o[t]||0;var l=e,u=l.maxQuantity,d=l.inventoryNum,p=l.minQuantity,h=l.templateSettingItemCode;if(n.max=Math.min(u,d||1/0),n.min=0==t?p:0,s){var f=999;if(a){var m=this.getTarPackage(!0);m&&(f=m.maxQuantity)}var v=f-o.reduce((function(e,t){return e+t}),0)+n.count;n.max=Math.min(v,u,d||1/0),n.min=o.length>1&&(!c||"Stand"!=h)?0:p,!this.operated&&o[t]<p&&p>0&&(0==t||c&&1==t)&&(n.count=p,this.onChange(p,t))}return n.start=p,n}},{key:"initCountText",value:function(e,t){var n=this.props.isAct;return e&&t?n?t>e.inventoryNum||e.inventoryNum<10?"\u4ec5\u5269".concat(e.inventoryNum,"\u4efd"):null:e.inventoryDesc?e.inventoryDesc:null:null}},{key:"initMaxCountText",value:function(e){return e&&se.platform==W.NX.RN&&e.maxQuantity<e.inventoryNum&&e.maxQuantity<=5?"\u6bcf\u5355\u6700\u591a\u53ef\u8ba2".concat(e.maxQuantity,"\u4efd"):null}},{key:"initSaleOutText",value:function(e,t){if(!e||0==e.inventoryNum){var n=this.props.isAct;return n?"\u5982\u9700\u8d2d\u4e70\u8bf7\u5207\u6362\u5957\u9910":"\u5f53\u65e5\u5df2\u8ba2\u5b8c"}return null}},{key:"initRefundInfo",value:function(e,t){var n=this.props.chioceDateData;if(!e||!t||!n)return null;var i=t["".concat(n.date,"|").concat(e.productId)];return i?{text:i.refundShowText,type:0===i.costType?"info":"warn"}:null}},{key:"getHideItemName",value:function(){var e=[];if(this.props.isAct)return e;var t=this.props,n=t.resources,i=t.chioceDateData,o=t.countArr,r=Array.isArray(o)&&!!o.find((function(e,t){return 0!=t&&0!=e}));return n.forEach((function(t,n){if(n>0)if(null!==i&&void 0!==i&&i.resources){var a,s=null===i||void 0===i||null===(a=i.resources)||void 0===a?void 0:a.find((function(e){var n;return null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e.resourceId)}));s?r?o[n]&&e.push("".concat(s.resourceName,"x".concat(o[n]))):e.push("".concat(s.resourceName,"\xa5".concat(s.salePrice))):e.push(t.resourceName)}else e.push(t.resourceName)})),r&&(e[0]="\u5df2\u9009\uff1a".concat(e[0])),e}},{key:"getMoreTitleText",value:function(){var e="";if(this.props.isAct)return e;var t=this.props.resources;return t.forEach((function(t,n){n>0&&(e+=(e?"\u3001":"")+t.resourceName)})),e?"\u540c\u65f6\u8d2d\u4e70".concat(e):""}},{key:"getToday",value:function(){return(0,J.fh)(new Date)}},{key:"initOutRangeText",value:function(e,t){var n=this.state.hasChange,i=this.props,o=i.countArr,r=i.isAct,a=o[t];if(!n||!e||r)return"";var s=e.maxQuantity,c=e.inventoryNum,l=e.minQuantity;return a&&(a<l||a>Math.min(s,c))?"\u5546\u54c1\u4fe1\u606f\u5df2\u53d8\u66f4\uff0c\u8bf7\u6ce8\u610f\u8d2d\u4e70\u987b\u77e5\u53d8\u5316\u5e76\u91cd\u65b0\u9009\u62e9\u4efd\u6570":""}},{key:"filterTags",value:function(e,t,n){var i=this.props.chioceDateData,o=[];o=e?e.tags.concat([]):t.concat([]);var r=!!i&&i.date==this.getToday();if(!r){var a=o.findIndex((function(e){return"BookingEffectiveTime"==e.code}));a>-1&&o.splice(a,1)}if(n&&i){var s=o.findIndex((function(e){return"limitedcancellation"==e.code||"lossycancellation"==e.code}));s>-1&&o.splice(s,1)}return o}},{key:"onExpand",value:function(){if(this.props.chioceDateData){var e=this.state.isCollapse;this.setState({isCollapse:!e})}else this.toast.show("\u8bf7\u5148\u9009\u62e9\u4f7f\u7528\u65e5\u671f")}},{key:"showBuyNotesLayer",value:function(e,t){var n;if(t&&(t.resourceId||1===(null===(n=t.mixedIds)||void 0===n?void 0:n.length))){var i=this.state.hasClickIndexs;i.includes(e)||this.setState({hasClickIndexs:i.concat(e)});var o=this.props,r=o.spotId,a=o.chioceDateData,s=o.boxMap,c=void 0===s?{}:s,l=o.isPack3,u=t.resourceId,d=(t.productId,null!==a&&void 0!==a&&a.date?[{type:"DateFilter",filterItems:[{key:"Date",value:a.date}]}]:[]),p=[];if(l){var h=c[u]||[];p=h.map((function(e){return{subResourceId:e.resourceId,date:e.date}}))}(0,ne.n)({spotId:r,resourceId:u||t.mixedIds[0],hideBottom:!0,filters:d,subFilters:p})}else this.props.handleErrorToast&&this.props.handleErrorToast()}},{key:"getMultiPrice",value:function(e){var t,n=this.props.calendar;return e&&(null===n||void 0===n||n.forEach((function(n){var i=n.resources.find((function(t){return t.resourceId==e}));t=(0,ie.IH)((null===i||void 0===i?void 0:i.salePrice)||0,t||0)}))),t}},{key:"handleClickHelpInfo",value:function(e){(0,re.Z)({title:"\u9002\u7528\u4eba\u7fa4\u8bf4\u660e",dataList:[{peopleDescStr:e.resourceDesc,peopleName:e.resourceName,peopleId:0}]})}}]),n}(D.ZP),le=n(9353),ue=(0,ae.ZP)().taroEnv==ae.fO.rn,de={letterSpacing:-.65},pe={m_select_quantity:{overflow:"hidden",fontFamily:"PingFang SC"},m_select_quantity_container:(0,s.Z)((0,s.Z)({paddingRight:(0,$.Vh)(16)},(0,$.yp)((0,$.Vh)(16))),{},{paddingLeft:(0,$.Vh)(16),position:"relative"}),m_select_quantity_container_border:(0,s.Z)({},(0,$.Cg)({width:$.WI,style:"solid",color:"rgb(235,239,245)",direction:"top"})),m_select_quantity_container_active:{paddingTop:(0,$.Vh)(54)},top_before:{zIndex:0,width:"110%",height:(0,$.Vh)(40),position:"absolute",left:(0,$.Vh)(0),top:(0,$.Vh)(0)},m_select_quantity_container_top:{paddingTop:(0,$.Vh)(16)},gray:{color:"rgb(197,197,197)"},m_select_quantity_content:{position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between"},m_select_quantity_content_left:{flex:1,marginRight:(0,$.Vh)(8),width:0},m_select_quantity_content_left_top:(0,s.Z)({},$._),m_select_quantity_source:{color:"rgb(17,17,17)",flexWrap:"wrap",fontSize:(0,$.Vh)(17),fontWeight:(0,$.Ue)("500"),lineHeight:(0,$.Nv)((0,$.Vh)(21)),marginRight:(0,$.Vh)(8),letterSpacing:(0,$.Vh)(-.5)},m_select_limit_text:{color:"#555",fontSize:(0,$.Vh)(13),fontFamily:"PingFangSC-Regular",lineHeight:(0,$.Nv)((0,$.Vh)(17)),flex:1},m_select_resource_desc_space:{marginTop:(0,$.Vh)(10)},m_select_limit_space:{marginTop:(0,$.Vh)(2)},medium:{fontSize:(0,$.Vh)(17)},m_select_quantity_price:(0,s.Z)((0,s.Z)((0,s.Z)({},(0,$.Sf)(1)),{},{color:"rgb(255,85,0)",fontSize:(0,$.Vh)(19),lineHeight:(0,$.Nv)((0,$.Vh)(23)),fontWeight:"bold"},"android"==w.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_bold"}),{},{marginRight:(0,$.Vh)(7)}),m_select_quantity_price_free:{fontSize:(0,$.Vh)(17),fontFamily:"PingFangSC-Medium",fontWeight:(0,$.Ue)("500")},m_select_quantity_price_act:{marginRight:(0,$.Vh)(9),fontSize:(0,$.Vh)(17),marginBottom:0},m_select_chioceOption_wraper:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",flex:0},m_select_chioceOption_content:{display:"flex",flexDirection:"row",alignItems:"center"},m_select_chioceOption_content_row:{display:"flex",flexDirection:"row",alignItems:"center"},m_selectquantity_count_tip:{color:"rgb(242,21,0)",fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(17)),marginTop:(0,$.Vh)(8)},m_error_color:{color:"#f5190a"},m_select_resource_tags:{marginTop:(0,$.Vh)(5),display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap"},m_select_resource_tags_text:(0,s.Z)({fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(17)),color:"rgb(15,73,153)"},de),m_select_resource_tags_single:{display:"flex",flexDirection:"row"},m_select_quantity_tag_warning:{color:"rgb(255,119,0)"},m_select_quantity_tag_border:{fontSize:(0,$.Vh)(12),lineHeight:(0,$.Nv)((0,$.Vh)(17)),paddingRight:(0,$.Vh)(6),paddingLeft:(0,$.Vh)(6),color:"rgb(197,197,197)",fontFamily:"PingFangSC-Light",fontWeight:"200"},m_select_quantity_tag_buy:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},m_select_quantity_tag_buy_text:(0,s.Z)({fontSize:(0,$.Vh)(13),color:"rgb(85,85,85)",lineHeight:(0,$.Nv)((0,$.Vh)(17))},de),m_select_quantity_tag_dot:{background:"#f5190a",borderRadius:(0,$.Vh)(3),height:(0,$.Vh)(6),width:(0,$.Vh)(6),position:"absolute",top:(0,$.Vh)(-2),right:(0,$.Vh)(11)},m_select_quantity_info:{marginTop:(0,$.Vh)(5)},m_select_quantity_info_text:(0,s.Z)({display:"flex",fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(17)),color:"rgb(85,85,85)"},de),warn:{color:"rgb(255,119,0)"},info:{color:"rgb(15,73,153)"},m_select_quantity_change_text:{fontSize:(0,$.Vh)(13),color:"rgb(242,21,0)",lineHeight:(0,$.Nv)((0,$.Vh)(17))},m_select_quantity_more_wrapper:{marginLeft:(0,$.Vh)(16),marginRight:(0,$.Vh)(16)},m_select_quantity_more:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:(0,$.Vh)(5),paddingBottom:(0,$.Vh)(12)},m_select_quantity_more_old:(0,s.Z)({paddingTop:(0,$.Vh)(12),paddingBottom:(0,$.Vh)(12),marginLeft:(0,$.Vh)(16),marginRight:(0,$.Vh)(16)},(0,$.Cg)({direction:"top",width:1/(0,w.md)(),style:"solid",color:"#eee"})),m_select_quantity_more_left:{flex:1,alignItems:"center",paddingRight:(0,$.Vh)(12)},m_select_quantity_more_left_line1:(0,s.Z)({},(0,$.Sf)(1)),m_select_quantity_more_left_inner:{display:"flex",flexDirection:"row",alignItems:"center"},m_select_quantity_more_Right:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:(0,$.Vh)(2)},m_select_quantity_more_image:{display:"flex",flexDirection:"row",postion:"absolute",left:(0,$.Vh)(0),marginRight:(0,$.Vh)(4),flex:0},m_select_quantity_more_text:{display:"flex"},m_select_quantity_more_text_more:(0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({display:"flex",borderRadius:15},(0,$.Cg)({width:1.5,style:"solid",color:"rgb(0,102,246)"})),(0,$.WB)((0,$.Vh)(10))),(0,$.yp)((0,$.Vh)(5))),{},{fontSize:0}),m_select_quantity_more_text_left:(0,s.Z)((0,s.Z)({fontSize:0},(0,$.Sf)(1)),{},{flex:1}),m_select_quantity_more_text_wrapper:{display:"flex",flexDirection:"row"},m_select_quantity_more_text_title:(0,s.Z)({fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(23)),color:"rgb(85,85,85)"},"android"==w.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),m_select_quantity_more_text_title_click:{fontSize:(0,$.Vh)(12),lineHeight:(0,$.Nv)(15),color:"rgb(0,102,246)",fontWeight:(0,$.Ue)("500")},m_select_quantity_more_text_title_collapse:{fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)(19)},m_select_limit_title:(0,s.Z)((0,s.Z)((0,s.Z)({},$._),(0,$.WB)((0,$.Vh)(12))),(0,$.yp)((0,$.Vh)(8))),m_select_limit_title_guide:{paddingTop:0},m_select_limit_label_text:{fontSize:(0,$.Vh)(18),fontWeight:"bold",lineHeight:(0,$.Nv)((0,$.Vh)(24)),marginRight:(0,$.Vh)(8),color:"#333"},m_act_select_quantity_container:(0,s.Z)((0,s.Z)((0,s.Z)({},(0,$.WB)((0,$.Vh)(12))),(0,$.yp)((0,$.Vh)(4))),{},{marginLeft:0,marginRight:0}),m_act_select_quantity_source:{fontSize:(0,$.Vh)(15),fontWeight:"400",color:"#333"},m_font0:{fontSize:0,display:ue?"flex":"contents"},m_select_quantity_desc:{display:"flex",flexDirection:"row",flexWrap:"nowrap",marginTop:(0,$.Vh)(8),alignItems:"center"},m_select_quantity_desc_text:(0,s.Z)({fontSize:(0,$.Vh)(13),color:"rgb(85,85,85)",lineHeight:(0,$.Nv)((0,$.Vh)(17)),height:(0,$.Vh)(17),flexShrink:1},de),m_select_quantity_desc_icon:{flexShrink:0,marginLeft:(0,$.Vh)(3)},m_select_quantity_more_head_wrap:(0,s.Z)((0,s.Z)({marginLeft:(0,$.Vh)(16),marginRight:(0,$.Vh)(16),paddingTop:(0,$.Vh)(16)},(0,$.Cg)({direction:"top",width:1/(0,w.md)(),color:"#EBEFF5"})),{},{lineHeight:(0,$.Nv)((0,$.Vh)(23))}),m_select_quantity_more_head:{fontSize:(0,$.Vh)(17),fontWeight:(0,$.Ue)("500"),lineHeight:(0,$.Nv)((0,$.Vh)(21)),color:"rgb(17,17,17)",letterSpacing:(0,$.Vh)(-.5)},m_select_quantity_more_head_thin:{fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(17)),color:"#555",fontWeight:(0,$.Ue)("500")},m_flex:{display:"flex",flexShrink:0,marginLeft:(0,$.Vh)(2)},click:{color:"#006FF6"},m_dark_111:{color:"#111"},m_image_excitationTips:{height:(0,$.Vh)(17),width:(0,$.Vh)(17),marginRight:(0,$.Vh)(2),position:"relative"},m_text_excitationTips:{fontSize:(0,$.Vh)(13),lineHeight:(0,$.Nv)((0,$.Vh)(17)),letterSpacing:-(0,$.Vh)(.16),fontWeight:"normal"},m_tab_excitationTips:{height:(0,$.Vh)(25),marginBottom:(0,$.Vh)(12),borderRadius:(0,$.Vh)(13),display:"flex",flexDirection:"row",alignItems:"center",marginLeft:-(0,$.Vh)(5),paddingLeft:(0,$.Vh)(8)},m_select_card_tips:(0,s.Z)((0,s.Z)({},$.xI),{},{lineHeight:(0,$.Nv)((0,$.Vh)(17)),marginTop:(0,$.Vh)(16),marginLeft:(0,$.Vh)(12)}),m_select_card_tips_icon:{marginRight:(0,$.Vh)(4),marginTop:(0,$.Vh)(1)},m_select_card_tips_text:{fontSize:(0,$.Vh)(13),color:"#555"}},he={linearGradientStart:{x:0,y:1},linearGradientEnd:{x:0,y:0},linearGradientColor:["#fff","#f6f8fa"]},fe={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},orange:["#FFF4EB","#FFFFFF"],green:["#F2FCF9","#FFFFFF"]},me=(0,le.Z)(pe),ve=n(29509),_e=n(59201),ge=n(71557),ye=n(63306),xe=n(51614),ke=n(82901),be=n(2269),Ze=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.resources,i=t.refundPolicys,o=t.chioceDateData,r=t.countArr,a=t.optidArr,c=t.isFromSku,l=t.setRef,u=t.logs,d=void 0===u?{}:u,h=t.isAct,f=t.beforeChoice,m=t.selectedPackage,v=void 0===m?null:m,_=t.salePropertyFinish,g=void 0===_||_,y=t.isMulti,x=void 0!==y&&y,k=t.isStandAndPeople,b=t.dateRecord,Z=void 0===b?{}:b,w=t.aggregation,S=t.usePage,P=t.traceData,T=t.reservation,C=t.excitationTips,D=t.excitationTipsExposureLog,R=t.priceMode,j=t.title,N=void 0===j?"\u9884\u8ba2\u9009\u62e9":j,V=t.isNewGuideSku,L=this.state,E=L.isCollapse,A=L.hasChange,F=L.hasClickIndexs,M=d.addCountLog,O=d.reduceCountLog,B=d.buyMoreExposureLog,z=d.buyMoreClickLog,H=d.productNoticeExposureLog,U=d.noticeClickLog,G=d.unfoldExposure,q=d.unfoldLog,W=(d.collapseLog,d.buyNoteTraceData),K=(d.resourceDescTraceData,d.buyMoreDevtraceLog),Y=this.getPkgLimitMsg(),X=this.isLimitError(h?this.getTarPackage():null,r.reduce((function(e,t){return e+t}),0)),Q=r.filter((function(e){return!!e})).length>1,J={fontSize:h?me.m_select_quantity_price_act.fontSize:me.m_select_quantity_price.fontSize,fontFamily:me.m_select_quantity_price.fontFamily,fontWeight:me.m_select_quantity_price.fontWeight},ee="H5"==this.platform?te.xv:te.G7;return(0,be.jsxs)(te.G7,{style:me.m_select_quantity,id:"select_quantity",ref:function(e){return l&&l("select_quantity",e)},collapsable:!1,children:[!!h&&(0,be.jsxs)(te.G7,{style:(0,$.wh)([me.m_select_limit_title,V?me.m_select_limit_title_guide:{}]),children:[(0,be.jsx)(te.xv,{style:me.m_select_limit_label_text,children:N}),!!Y&&(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_limit_text,X?me.m_error_color:{}]),children:Y})]}),n.map((function(t,l){var u,d,m,_,y,b;if(E&&l>0)return null;var I=(null===o||void 0===o||null===(u=o.resources)||void 0===u?void 0:u.filter((function(e){var n;return null===(n=t.mixedIds)||void 0===n?void 0:n.includes(e.resourceId)})))||[],j=I.filter((function(e){return a.includes(e.resourceId)})),N=t;if(o&&!j.length?h?x&&!o.endDate||(N=null):N=I[0]:1==(null===j||void 0===j?void 0:j.length)&&g&&(N=j[0]),v&&(!o||x&&!o.endDate)){var L=v.resourceInfo.find((function(e){return t.mixedIds.includes(e.resourceId)}));N=(0,s.Z)((0,s.Z)({},N),L)}w&&S==p.zh.book&&!Z[null===o||void 0===o?void 0:o.date]&&(N=t);var B=e.initChioceOptions(N,l),z=e.initCountText(N,r[l]),K=e.initMaxCountText(N),Y=e.initSaleOutText(N,l),X=e.initRefundInfo(N,i),Q=e.initOutRangeText(N,l),ne=e.filterTags(N,t.tags,X),ie=e.getLimitMsg(N),oe=e.isLimitError(N,r[l]),re=N&&(N.resourceId||N.mixedIds&&1==N.mixedIds.length)||0==l,ae=0==(null===(d=N)||void 0===d?void 0:d.salePrice),se=x?e.getMultiPrice(null===(m=N)||void 0===m?void 0:m.resourceId):null===(_=N)||void 0===_?void 0:_.salePrice;if(Y&&k)return null;var ce=!(!t.shortResourceDesc&&t.resourceDesc&&t.resourceDesc.length<13&&t.resourceDesc.indexOf("/n")<0);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)(te.G7,{style:(0,$.wh)([me.m_select_quantity_container,h?me.m_act_select_quantity_container:l>1?me.m_select_quantity_container_border:{},1!=l||h?{}:me.m_select_quantity_container_active]),children:[1!=l||h?null:(0,be.jsx)(te.o,{start:he.linearGradientStart,end:he.linearGradientEnd,direction:0,colors:["#fff","#f6f8fa"],style:me.top_before,children:(0,be.jsxs)(te.G7,{style:me.m_select_card_tips,children:[(0,be.jsx)(te.G7,{style:me.m_select_card_tips_icon,children:(0,be.jsx)(ge.Z,{type:"roundCheck",size:30,color:"#555"})}),(0,be.jsx)(te.xv,{style:me.m_select_card_tips_text,children:"\u4e3a\u4fdd\u8bc1\u51fa\u7968\uff0c\u4e3a\u60a8\u63a8\u8350\u540c\u5546\u5bb6\u6700\u4f18\u4ea7\u54c1"})]})}),(c||"S"!==R)&&0==l&&(null===C||void 0===C?void 0:C.contents)&&(null===C||void 0===C||null===(y=C.contents[0])||void 0===y?void 0:y.value)&&(0,be.jsx)(ke.Z,{delay:0,children:(0,be.jsx)(te.G7,{testID:D({content:C.contents.map((function(e){return e.value})).join("")}),children:(0,be.jsxs)(te.o,{start:fe.linearGradientStart,end:fe.linearGradientEnd,direction:"orange"==C.color?85.36306432618633:90,colors:"orange"==C.color?fe.orange:fe.green,style:me.m_tab_excitationTips,children:[(0,be.jsx)(ye.Z,{url:C.icon,style:me.m_image_excitationTips}),C.contents.map((function(e){return(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_text_excitationTips,"orange"==e.key?{color:"#FF5500"}:{color:"#09A76F"}]),children:e.value})}))]})})}),(0,be.jsxs)(te.G7,{style:me.m_select_quantity_content,children:[(0,be.jsxs)(te.G7,{style:(0,$.wh)([me.m_select_quantity_content_left,h?{marginRight:0}:{}]),children:[(0,be.jsx)(te.G7,{style:me.m_select_quantity_content_left_top,children:(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_quantity_source,h?me.m_act_select_quantity_source:{},Y?me.gray:{},(t.resourceName+t.subName).length>18?me.medium:{}]),children:"".concat(t.resourceName).concat(t.subName?"".concat(t.subName):"")})}),!!h&&!!t.resourceDesc&&(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_limit_text,me.m_select_resource_desc_space,Y?me.gray:{}]),children:t.resourceDesc}),!!h&&!!ie&&(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_limit_text,me.m_select_limit_space,Y?me.gray:{},oe?me.m_error_color:{}]),children:ie}),t.resourceDesc&&!h?(0,be.jsxs)(_e.Z,{style:me.m_select_quantity_desc,onClick:ce?e.handleClickHelpInfo.bind(e,t):void 0,log:q,activeOpacity:1,children:[(0,be.jsx)(te.xv,{style:me.m_select_quantity_desc_text,numberOfLines:1,children:t.shortResourceDesc||t.resourceDesc}),ce&&(0,be.jsx)(te.xv,{testID:G,style:me.m_flex,children:(0,be.jsx)(ge.Z,{type:"help",color:"rgb(51,51,51)",className:"m_title_icon",size:30})})]}):null]}),(0,be.jsxs)(te.G7,{style:me.m_select_chioceOption_wraper,children:[(0,be.jsxs)(te.G7,{style:h?me.m_select_chioceOption_content_row:me.m_select_chioceOption_content,children:[N&&"number"==typeof se&&(0,be.jsx)(te.G7,{style:me.m_font0,children:(0,be.jsx)(xe.Z,{value:se,fstyle:{u_price_wrapper:(0,s.Z)((0,s.Z)({},me.m_select_quantity_price),h?me.m_select_quantity_price_act:{}),u_price_price:J,u_price_free:(0,s.Z)((0,s.Z)((0,s.Z)({},me.m_select_quantity_price),me.m_select_quantity_price_free),{},{display:"flex"}),u_price_icon:J},free:ae})}),(0,be.jsx)(te.G7,{children:(0,be.jsx)(ve.Z,(0,s.Z)((0,s.Z)({},B),{},{useNewStyle:!h,prefixTest:"skuresource_".concat(l,"_"),onChange:function(t){e.operated=!0,e.onChange(t,l)},onChoiceDisabled:function(t,n){return e.onChoiceDisabled(t,B,N,n,l)},minusLog:function(){var e;return O&&O(null===(e=N)||void 0===e?void 0:e.resourceId)},plusLog:function(){var e;return M&&M(null===(e=N)||void 0===e?void 0:e.resourceId)},beforeChoice:f,traceData:P,resourceName:"".concat(t.resourceName).concat(null!==(b=N)&&void 0!==b&&b.resourceId?"\uff08".concat(N.resourceId,"\uff09"):""),activeColor:V?"#0066F6":void 0}))})]}),z&&(0,be.jsx)(te.xv,{style:me.m_selectquantity_count_tip,children:z}),Y&&(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_selectquantity_count_tip,{marginTop:(0,$.Vh)(10)}]),children:Y})]})]}),(0,be.jsxs)(_e.Z,{onClick:e.showBuyNotesLayer.bind(e,l,N),style:me.m_select_resource_tags,log:re&&U,devTraceData:re&&W&&W("".concat(t.resourceName,"\uff08").concat(t.mixedIds,"\uff09")),testID:"sku_showbuynote_".concat(l),children:[!!B.count&&ne.map((function(t){return(0,be.jsxs)(te.G7,{style:me.m_select_resource_tags_single,children:[(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_resource_tags_text,e.colorCodes.indexOf(t.code)>-1?me.m_select_quantity_tag_warning:{}]),children:t.text}),(0,be.jsx)(te.xv,{style:me.m_select_quantity_tag_border,children:"|"})]})})),re&&!h&&(0,be.jsxs)(ee,{style:me.m_select_quantity_tag_buy,testID:H,children:[(0,be.jsx)(te.xv,{style:me.m_select_quantity_tag_buy_text,children:T?"\u9884\u7ea6\u987b\u77e5":"\u8d2d\u4e70\u987b\u77e5"}),(0,be.jsx)(ge.Z,{type:"arrow-right",color:"rgb(85,85,85)",size:34}),A&&!F.includes(l)&&(0,be.jsx)(te.G7,{style:me.m_select_quantity_tag_dot})]})]}),B.count&&null!==X&&void 0!==X&&X.text?(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_quantity_info_text,me[X.type],me.m_select_quantity_info]),children:X.text}):null,Q?(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_quantity_change_text,me.m_select_quantity_info]),children:Q}):null,t&&t.limitSaleDesc&&B.count||K?(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_quantity_info_text,me.m_select_quantity_info]),children:t&&t.limitSaleDesc&&B.count?t.limitSaleDesc:K}):null]}),0==l&&n.length>1&&!h&&E&&(0,be.jsx)(te.G7,{style:me.m_select_quantity_more_head_wrap,children:(0,be.jsx)(te.xv,{style:E?me.m_select_quantity_more_head:me.m_select_quantity_more_head_thin,children:"\u5bb6\u4eba\u670b\u53cb\u4e00\u8d77\u8ba2"})})]})})),this.moreTitle.length&&!h?(0,be.jsx)(te.G7,{style:(0,$.wh)([me.m_select_quantity_more_wrapper]),children:(0,be.jsxs)(_e.Z,{style:(0,$.wh)([me.m_select_quantity_more,E?{}:{justifyContent:"center"}]),onClick:this.onExpand.bind(this),log:z,testID:B,devTraceData:K&&K(E?"\u5c55\u5f00":"\u6536\u8d77"),activeOpacity:1,children:[E&&(0,be.jsx)(te.aA,{style:(0,$.wh)([me.m_select_quantity_more_left,me.m_select_quantity_more_text_title,Q?{}:me.m_select_quantity_more_left_line1]),numberOfLines:Q?void 0:1,children:this.isRN?this.moreTitle.map((function(t,n){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(te.xv,{style:me.m_select_quantity_more_text_title,children:t}),n!=e.moreTitle.length-1&&(0,be.jsx)(te.xv,{style:me.m_select_quantity_tag_border,children:"  |  "})]})})):this.moreTitle.join("  |  ")}),(0,be.jsxs)(te.G7,{style:me.m_select_quantity_more_Right,children:[(0,be.jsx)(te.G7,{style:E?me.m_select_quantity_more_text_more:me.m_select_quantity_more_text,children:(0,be.jsx)(te.xv,{style:(0,$.wh)([me.m_select_quantity_more_text_title_click,E?{}:me.m_select_quantity_more_text_title_collapse]),children:E?Q?"\u5c55\u5f00\u67e5\u770b":"\u5c55\u5f00\u8d2d\u4e70":"\u6536\u8d77"})}),!E&&(0,be.jsx)(ge.Z,{type:"arrowup",color:"rgb(0,102,246)",size:24,style:(0,I.kg)({marginLeft:4})})]})]})}):null]})}}]),n}(ce),Ie=n(23033),we=n(50738),Se=n(49451),Pe=n(55478),Te=n(30492),Ce=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(D.ZP),De={m_sku_section_title:{display:"flex",flexDirection:"row",position:"relative",paddingLeft:(0,$.Vh)(16),paddingRight:(0,$.Vh)(16),paddingTop:(0,$.Vh)(20)},m_sku_section_title_text:{flex:1,color:"#111",fontFamily:"PingFangSC-Medium",fontSize:(0,$.Vh)(17),letterSpacing:(0,$.Vh)(-.28),fontWeight:(0,$.Ue)("500"),lineHeight:(0,$.Nv)((0,$.Vh)(21))},m_sku_section_title_shadow:{position:"absolute",left:(0,$.Vh)(16),top:(0,$.Vh)(36),height:(0,$.Vh)(5),width:(0,$.Vh)(64)}},Re=(0,le.Z)(De),je=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.ticketTitle,n=e.isShowShadow;return(0,be.jsx)(te.G7,{style:Re.m_sku_section_title,children:!!t&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(te.xv,{style:Re.m_sku_section_title_text,children:t}),!!n&&(0,be.jsx)(te.o,{style:Re.m_sku_section_title_shadow,start:{x:1,y:0},end:{x:0,y:0},direction:-90,colors:["rgba(255, 255, 255, 0.04)","rgba(16, 73, 153, 0.28)"]})]})})}}]),n}(Ce),Ne=function(e){return(0,be.jsx)(Te.Z,(0,s.Z)({},e))},Ve=Ne,Le=Ne,Ee=Ne,Ae=Ne,Fe=Ne,Me=Ne,Oe=Ne,Be=Ne,ze=Ne,He=Ne,Ue=Ne,Ge=function(e){(0,r.Z)(c,e);var t=(0,a.Z)(c);function c(e){return(0,i.Z)(this,c),t.call(this,e)}return(0,o.Z)(c,[{key:"render",value:function(){var e=this,t=this.props,i=t.refundPolicys,o=t.validDesc,r=t.disabledDateDesc,a=t.prodMapValidDesc,c=t.prodMapDisabledDateDesc,l=t.hasAssistCompRender,u=t.setRef,d=t.anchor,h=t.prefix,f=t.dateRecord,m=t.isServerData,v=t.otherParams,_=void 0===v?{}:v,g=t.excitationTips,y=t.waitCalendar,x=this.state,k=x.request,b=x.priceMode,Z=x.chioceDateData,I=x.firstLevelMapChoiceDateData,w=void 0===I?{}:I,S=x.resources,P=x.countArr,T=x.calendar,C=x.firstLevelMapCalendar,D=x.expandCalendar,R=x.grayPropertys,j=void 0===R?{}:R,N=x.saleProperties,V=x.holiday,L=x.salePropertyFinish,E=x.selectPropertyIds,A=x.footer,F=x.isSaleOut,M=x.ticketInfo,O=void 0===M?{}:M,B=O.ticketTitle,z=void 0===B?"":B,H=x.assistComponent,U=x.peopleProperties,G=x.choicePeopleId,q=x.peopleGrayProperty,W=x.isHideProperties,K=x.haveClearBtn,Y=x.peoplePropertiesUnable,X=x.reservation,Q=x.calendarTip,J=x.showLocalTime,ee=x.priceInfo,ne=x.hasPromotion,ie=x.isPack3,oe=x.isUseDateSame,re=x.firstLevelInfos,ae=x.hasSingleDateCalendar,se=x.isConcatSalePropertyName,ce=x.isConcatUseDateTitle,le=x.firstLevelMapSaleProperties,ue=x.firstLevelMapSelectedPropertyIds,de=x.firstLevelMapGrayPropertys,pe=void 0===de?{}:de,he=x.peoplePackageDesc,fe=void 0===he?"":he,me=x.hasReservation,ve=function(){return e.toast.show("\u65e5\u671f\u5207\u6362\u4e2d\uff0c\u8bf7\u7a0d\u540e\u5207\u6362\u4efd\u6570"),!0},_e=function(){return!0},ge=function(){!r&&(r=e.state.disabledDateDesc),!o&&(o=e.state.validDesc);var t=k.usePage,a=(k.date,k.subPage),c=k.isUseInBooking,v=void 0!==c&&c,x=e.getWarningTip(),I=e.logData.tkt_sightdetail_browse_package,w={};z&&!e.hasSendExpo&&(w=I&&I(+new Date,"T")||{},e.hasSendExpo=!0);var C=!(U&&U.length>0)||!!G,R=D||![p.zh.sku,p.zh.detail].includes(t)||"ticket-detail"==a?te.G7:te.pf,M="ticket-detail"==a,O=D&&"ticket-detail"!=a;t!==p.zh.book&&(!M&&(Ve=n(50358).Z),Le=n(18427).Z,Ee=n(2077).Z,Ae=n(91804).Z,Fe=n(20225).Z,Me=n(23862).Z,O&&(Be=n(82195).Z));var B="ticket-detail"!=a&&z;return B&&(Oe=n(43926).Z),k.isFromSku||("S"==b?((!D||"ticket-detail"==a)&&(Ue=n(79381).Z),ze=n(26805).Z):"U"==b&&t!==p.zh.book&&(He=n(29540).Z)),(0,be.jsxs)(te.G7,{className:"m_sku",style:(0,$.wh)([Ie.ZP.m_container,t==p.zh.detail?Ie.ZP.m_container_radius:null,[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_height:null]),children:[[p.zh.sku,p.zh.book].includes(t)||T&&T.length?null:(0,be.jsx)(te.G7,{style:(0,$.wh)([_.skuMinHeight?{height:_.skuMinHeight}:{height:"100%"}]),children:(0,be.jsx)(Le,{})}),!!F&&(0,be.jsx)(Fe,{}),null!==E&&void 0!==E&&E.length?(0,be.jsx)(te.G7,{style:Ie.ZP.m_height_0}):(0,be.jsx)(te.xv,{style:Ie.ZP.m_height_0}),!F&&(0,be.jsxs)(te.G7,{style:(0,$.wh)([Ie.ZP.m_sku,[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_height:null]),children:[B&&(0,be.jsx)(Oe,{ticketTitle:z,testID:(0,we.kI)(w.key,w.params),usePage:t,closeClickLog:e.logData.tkt_sightdetail_click_package_close,onPoplayerHide:e.props.onClosePage||e.onPoplayerHide.bind(e)}),(0,be.jsx)(Pe.Z,{show:!!x&&[p.zh.sku,p.zh.detail].includes(t),noFirstAni:!0,changeData:x,delay:!0,collectAniFun:e.addFun.bind(e,"sku"),style:[p.zh.sku,p.zh.detail].includes(t)?{height:"100%",flex:1,overflow:"hidden"}:null,AniComp:(0,be.jsx)(te.G7,{style:Ie.ZP.m_sku_warn_wrapper,children:!(![p.zh.sku,p.zh.detail].includes(t)||!T)&&(0,be.jsx)(Me,{text:x,priceInfo:ee,hasPromotion:ne,isDateShowPrice:C,priceMode:b,showCalendar:O,hasReservation:me})}),Siblings:(0,be.jsxs)(R,{style:[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_index:null,scrollY:!0,enableFlex:!0,id:"sku",children:[!k.isFromSku&&(0,be.jsxs)(be.Fragment,{children:[!!U&&!!U.length&&!D&&(0,be.jsx)(Ae,{thinTitle:M,titleText:"\u4f7f\u7528\u4eba\u7fa4",dataList:U,peoplePropertiesUnable:Y,peopleGrayProperty:q,choicePeopleId:G,onClick:e.clickChangePeople.bind(e),peopleExposureLog:e.logData.tkt_pzxqypeople_exposure,propertyClickLog:e.logData.tkt_sightdetail_click_package_property,popClickLog:e.logData.tkt_sightdetail_click_package_propertypolicy}),"S"==b&&(!D||"ticket-detail"==a)&&(0,be.jsx)(Ue,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:T,isDateShowPrice:C,onChooseDate:function(t){e.clickChangeDate(t)},onShowMore:e.onShowMore.bind(e),defaultDate:Z&&Z.date,showLocalTime:J,thinTitle:M,dateTitle:t==p.zh.book?"\u9009\u62e9\u65e5\u671f":"\u4f7f\u7528\u65e5\u671f",usePage:t,showDefault:e.showDefault,showFrom:!L,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(Z&&Z.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,hasReservation:me,showReservationTip:Z&&Z.hasReservation}),"S"==b&&O&&[p.zh.sku,p.zh.detail].includes(t)&&(0,be.jsx)(Be,{titleText:"\u4f7f\u7528\u65e5\u671f",calendar:T,holiday:V,onChooseDate:function(t){e.clickChangeDate(t)},defaultDate:Z&&Z.date,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(Z&&Z.date),usePage:t,footerText:"\u540e\u7eed\u65e5\u671f\u6682\u4e0d\u53ef\u8ba2",traceData:e.logData.calendarTraceData,priceInfo:ee,hasPromotion:ne,isDateShowPrice:C,warnTip:x,hasReservation:me,showLocalTime:J}),"U"==b&&p.zh.book!=t&&(0,be.jsx)(He,{validDesc:o,disabledDateDesc:r,logs:e.logData}),[p.zh.sku,p.zh.detail].includes(t)&&!W&&N&&N.length&&(0,be.jsx)(Ee,{thinTitle:M,saleProperties:N,onChooseSaleProperty:e.clickChangeSaleProperty.bind(e),selectPropertyIds:E,grayPropertys:j,propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Ie.Y4}),[p.zh.book].includes(t)&&"S"==b&&(0,be.jsx)(ze,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0})]}),t==p.zh.book&&S&&S.length?(0,be.jsx)(Ze,{setRef:u,logs:e.logData,isscan:k.isscan,isFromSku:k.isFromSku,optidArr:k.optid,spotId:k.spotid,reservation:X,aggregation:k.aggregation,dateRecord:f,countArr:P,usePage:t,resources:S,refundPolicys:i,chioceDateData:Z,onChangePerson:e.onChangePerson.bind(e),handleErrorToast:e.props.handleErrorToast,traceData:e.logData.countTraceData,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,priceMode:b,beforeChoice:y?ve:m?_e:null,isServerData:m}):null]}),siblingStyle:[p.zh.sku,p.zh.detail].includes(t)?{display:"flex",flex:1,overflow:"hidden"}:null,prefix:h}),[p.zh.sku,p.zh.detail].includes(t)&&"ticket-detail"!=a&&(0,be.jsx)(Ve,(0,s.Z)((0,s.Z)({},A),{},{notHigh:t==p.zh.detail&&"RN"==e.platform,spotid:k.spotid,optid:k.optid,isScanShelf:k.isScanShelf,isFromShelfSku:!!e.props.isFromShelfSku,booking:e.booking.bind(e),collectAniFun:e.addFun.bind(e,"skufooter"),showBuyNotes:e.props.showBuyNotes,buyNoteClickLog:e.logData.tkt_sightdetail_click_package_notice,buyNoteExposureLog:e.logData.tkt_sightdetail_view_package_notice,btnClickLog:e.logData.tkt_sightdetail_click_package_next,haveClear:K,clearAll:e.clearAll.bind(e),prefix:h,isInpop:!!e.props.initCallBack,hideBuynoteCallBack:e.props.hideBuynoteCallBack,btnTraceData:e.logData.btnTraceData,buyNoteTraceData:e.logData.buyNoteTraceData,priceDetailTraceData:e.logData.priceDetailTraceData,cleanTraceData:e.logData.cleanTraceData,reservation:X,chioceDateData:Z,isUseInBooking:v}))]}),p.zh.detail==t&&!l&&(0,be.jsx)(Se.Z,{assistComponent:H})]})},ye=function(){!r&&(r=e.state.disabledDateDesc),!o&&(o=e.state.validDesc),!a&&(a=e.state.prodMapValidDesc),!c&&(c=e.state.prodMapDisabledDateDesc);var t=k.usePage,v=k.subPage,x=k.isUseInBooking,I=void 0!==x&&x,D=e.getPack3WarningTip(),R=e.logData.tkt_sightdetail_browse_package,j={};z&&!e.hasSendExpo&&(j=R&&R(+new Date,"T")||{},e.hasSendExpo=!0);var N=!!oe&&(!(U&&U.length>0)||!!G),V=[p.zh.sku,p.zh.detail].includes(t)&&"ticket-detail"!=v?te.pf:te.G7,E="ticket-detail"==v;t!==p.zh.book&&(!E&&(Ve=n(50358).Z),Le=n(18427).Z,Ee=n(2077).Z,Ae=n(91804).Z,Fe=n(20225).Z,Me=n(23862).Z);var M="ticket-detail"!=v&&z;M&&(Oe=n(43926).Z),k.isFromSku||(Ue=n(79381).Z,t!==p.zh.book&&(He=n(29540).Z));var O=function(){return(0,be.jsxs)(be.Fragment,{children:[!!ae&&T&&T.length&&X(),t!==p.zh.book&&ge(),t!==p.zh.book&&he()]})},B=function(){return(0,be.jsxs)(be.Fragment,{children:[!!ae&&T&&T.length&&de(),t!==p.zh.book&&me()]})},W=function(){return(0,be.jsxs)(be.Fragment,{children:[ce&&B(),t!==p.zh.book&&ye()]})},X=function(){var n="\u4f7f\u7528\u65e5\u671f";if(ce){var i=[],a=re[0].peopleGroupInfos,s=void 0===a?[]:a;s.forEach((function(e){var t=e.priceMode,n=e.peopleGroupName;0===t&&i.push(n)})),n=i.length?"".concat(i.join("+"),"\xb7").concat(n):n}return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ue,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:T,isDateShowPrice:N,onChooseDate:function(t){e.clickChangeDatePack3(t)},onShowMore:e.onShowMore.bind(e),defaultDate:Z&&Z.date,showLocalTime:J,thinTitle:E,dateTitle:t==p.zh.book?"\u9009\u62e9\u65e5\u671f":n,usePage:t,showDefault:e.showDefault,showFrom:!L,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(Z&&Z.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog}),t===p.zh.book&&ae?(0,be.jsx)(ze,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0}):null]})},de=function(){var n="\u4f7f\u7528\u65e5\u671f";if(ce){var i=[];re.forEach((function(e){var t=e.priceMode,n=e.firstLevelName,o=e.peopleGroupInfos;if(0===t){var r=o.length&&o[0],a=r.peopleGroupName,s=r.subName,c=U&&U.length?n:"".concat(n).concat(a).concat(s);i.push(c)}})),n=i.length?"".concat(i.join("+"),"\xb7").concat(n):n}return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ue,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:T,isDateShowPrice:N,onChooseDate:function(t){e.clickChangeDatePack3(t)},onShowMore:e.onShowMore.bind(e),defaultDate:Z&&Z.date,showLocalTime:J,thinTitle:E,dateTitle:t==p.zh.book?"\u9009\u62e9\u65e5\u671f":n,usePage:t,showDefault:e.showDefault,showFrom:!L,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(Z&&Z.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,isPack3MultiSale:!se}),t===p.zh.book&&ae?(0,be.jsx)(ze,{desc:e.formatValidText(o,r),logs:e.logData,hideIcon:!0}):null]})},he=function(){var t=re[0].firstLevelId,n=le[t],i=ue[t],o=pe[t];return n.length?(0,be.jsx)(Ee,{thinTitle:E,saleProperties:n,onChooseSaleProperty:function(n,i){e.clickChangeSalePropertyPack3(n,i,t)},selectPropertyIds:i,grayPropertys:o||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Ie.Y4}):null},me=function(){var t=re.filter((function(e){var t=e.priceMode;return 0===t}));return t.map((function(n){var i=n.firstLevelName,o=n.firstLevelId,r=n.peopleGroupInfos,a=void 0===r?[]:r,s=le[o],c=ue[o],l=pe[o],u=a.length&&a[0],d=u.peopleGroupName,p=u.subName,h=U&&U.length?i:"".concat(i).concat(d).concat(p),f=s.filter((function(e){return!e.hide}));return s.length?(0,be.jsxs)(be.Fragment,{children:[!se&&f.length?(0,be.jsx)(te.G7,{style:Ie.ZP.m_section_seperator}):null,!se&&f.length&&t.length>1?(0,be.jsx)(je,{ticketTitle:h,isShowShadow:!0}):null,(0,be.jsx)(Ee,{thinTitle:E,smallTitle:!se,isPack3MultiSale:!se,isPack3SingleSale:se,saleProperties:s,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,o)},selectPropertyIds:c,grayPropertys:l||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Ie.Y4,ticketName:se?h:""})]}):null}))},ge=function(){var t=re[0].peopleGroupInfos,n=void 0===t?[]:t;return n.map((function(t){var n=t.peopleGroupName,i=t.subName,o=t.priceMode,r=t.productIds;if(1!==o)return null;var s=r[0],l="".concat(n).concat(i),u=a[s],d=c[s];return(0,be.jsx)(He,{validDesc:u,disabledDateDesc:d,logs:e.logData,ticketName:l,fstyle:Ie.jo})}))},ye=function(){var t=re.filter((function(e){var t=e.priceMode;return 1===t}));return t.map((function(t,n){var i=t.firstLevelId,o=t.firstLevelName,r=t.peopleGroupInfos,s=void 0===r?[]:r,l=le[i],u=ue[i],d=pe[i],p=s.length&&s[0],h=p.peopleGroupName,f=p.subName,m=p.productIds,v=m[0],_=l.filter((function(e){return!e.hide})),g=_.length>0,y=U&&U.length?o:"".concat(o).concat(h).concat(f),x=a[v],k=c[v];return(0,be.jsxs)(be.Fragment,{children:[ce&&(!ae&&n>0||ae)?(0,be.jsx)(te.G7,{style:Ie.ZP.m_section_seperator}):null,g?(0,be.jsx)(je,{ticketTitle:y,isShowShadow:!0}):null,(0,be.jsx)(He,{validDesc:x,disabledDateDesc:k,logs:e.logData,ticketName:g?"":y,fstyle:Ie.jo,smallTitle:g}),g?(0,be.jsx)(Ee,{thinTitle:E,smallTitle:!0,saleProperties:l,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,i)},selectPropertyIds:u,grayPropertys:d||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Ie.Y4,isPack3SameDateValid:g}):null]})}))},xe=function(){return re.map((function(n,i){var o=n.priceMode,r=n.firstLevelId,s=n.firstLevelName,l=n.peopleGroupInfos,p=void 0===l?[]:l,h=le[r],f=ue[r],v=w[r],_=pe[r],y=C[r],x=p.length&&p[0],k=x.peopleGroupName,b=x.subName,Z=x.productIds,I=Z[0],S=U&&U.length?s:"".concat(s).concat(k).concat(b),P=a[I],T=c[I],D=h.filter((function(e){return!e.hide})),R=D.length>0,j="\u4f7f\u7528\u65e5\u671f";return ce&&(j="".concat(S,"\xb7").concat(j)),(0,be.jsxs)(be.Fragment,{children:[!ce&&i>0?(0,be.jsx)(te.G7,{style:Ie.ZP.m_section_seperator}):null,ce?null:(0,be.jsx)(je,{ticketTitle:S,isShowShadow:!0}),0===o&&(0,be.jsx)(Ue,{isServerData:m,anchor:"tab_calendar"==d,setRef:u,calendar:y,isDateShowPrice:N,onChooseDate:function(t){e.clickChangeDatePack3(t,r)},onShowMore:e.onShowMore.bind(e,!1,r),defaultDate:v&&v.date,showLocalTime:J,thinTitle:E,smallTitle:!ce,dateTitle:j,usePage:t,showDefault:e.showDefault,showFrom:!L,maxLength:60,dateClickLog:e.logData.dateClickLog&&e.logData.dateClickLog(v&&v.date),moreDateClickLog:e.logData.moreButtonClickLog,tabExposureLog:e.logData.tabExposureLog,moreButtonExposureLog:e.logData.moreButtonExposureLog,traceData:e.logData.calendarTraceData,clickMoreTraceData:e.logData.clickMoreTraceData,calendarTip:Q,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog}),1===o&&(0,be.jsx)(He,{validDesc:P,disabledDateDesc:T,logs:e.logData,ticketName:ce?S:"",fstyle:Ie.jo,smallTitle:!0}),R?(0,be.jsx)(Ee,{thinTitle:E,smallTitle:!0,saleProperties:h,onChooseSaleProperty:function(t,n){e.clickChangeSalePropertyPack3(t,n,r)},selectPropertyIds:f,grayPropertys:_||{},propertyClickLog:e.logData.tkt_sightdetail_click_package_option,saleExposureLog:e.logData.tkt_pzxqysku_exposure,traceData:e.logData.salepropertiesTraceData,ceilfstyle:Ie.Y4,isPack3DiffDate:R}):null]})}))};return(0,be.jsxs)(te.G7,{className:"m_sku",style:(0,$.wh)([Ie.ZP.m_container,t==p.zh.detail?Ie.ZP.m_container_radius:null,[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_height:null]),children:[t!==p.zh.detail||oe&&T&&T.length||!oe&&C?null:(0,be.jsx)(te.G7,{style:(0,$.wh)([_.skuMinHeight?{height:_.skuMinHeight}:{height:"100%"}]),children:(0,be.jsx)(Le,{})}),!!F&&(0,be.jsx)(Fe,{}),!F&&(0,be.jsxs)(te.G7,{style:(0,$.wh)([Ie.ZP.m_sku,[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_height:null]),children:[M&&(0,be.jsx)(Oe,{ticketTitle:z,testID:(0,we.kI)(j.key,j.params),usePage:t,closeClickLog:e.logData.tkt_sightdetail_click_package_close,onPoplayerHide:e.props.onClosePage||e.onPoplayerHide.bind(e),peoplePackageDesc:fe}),(0,be.jsx)(Pe.Z,{show:!!D&&[p.zh.sku,p.zh.detail].includes(t),noFirstAni:!0,changeData:D,delay:!0,collectAniFun:e.addFun.bind(e,"sku"),style:[p.zh.sku,p.zh.detail].includes(t)?{height:"100%",flex:1,overflow:"hidden"}:null,AniComp:(0,be.jsx)(te.G7,{style:Ie.ZP.m_sku_warn_wrapper,children:[p.zh.sku,p.zh.detail].includes(t)&&(oe&&T&&T.length||!oe&&!!C)&&(0,be.jsx)(Me,{text:D,priceInfo:ee,hasPromotion:ne,isDateShowPrice:N,priceMode:b,showCalendar:!1})}),Siblings:(0,be.jsxs)(V,{style:[p.zh.sku,p.zh.detail].includes(t)?Ie.ZP.m_sku_index:null,scrollY:!0,enableFlex:!0,id:"sku",children:[!k.isFromSku&&(0,be.jsxs)(be.Fragment,{children:[!!U&&!!U.length&&(0,be.jsx)(Ae,{thinTitle:E,titleText:"\u4f7f\u7528\u4eba\u7fa4",dataList:U,peoplePropertiesUnable:Y,peopleGrayProperty:q,choicePeopleId:G,onClick:e.clickChangePeoplePack3.bind(e),peopleExposureLog:e.logData.tkt_pzxqypeople_exposure,propertyClickLog:e.logData.tkt_sightdetail_click_package_property,popClickLog:e.logData.tkt_sightdetail_click_package_propertypolicy}),oe?1===re.length?(0,be.jsx)(be.Fragment,{children:O()}):ce?(0,be.jsx)(be.Fragment,{children:W()}):(0,be.jsx)(be.Fragment,{children:B()}):(0,be.jsx)(be.Fragment,{children:re&&t!==p.zh.book&&xe()})]}),t==p.zh.book&&S&&S.length?(0,be.jsx)(Ze,{setRef:u,logs:e.logData,isscan:k.isscan,isFromSku:k.isFromSku,optidArr:k.optid,spotId:k.spotid,reservation:!1,aggregation:k.aggregation,dateRecord:f,countArr:P,usePage:t,resources:S,refundPolicys:i,chioceDateData:Z,onChangePerson:e.onChangePerson.bind(e),handleErrorToast:e.props.handleErrorToast,traceData:e.logData.countTraceData,excitationTips:g,excitationTipsExposureLog:e.logData.excitationTipsExposureLog,priceMode:b,beforeChoice:y?ve:m?_e:null,isServerData:m,isPack3:ie,boxMap:k.boxMap}):null]}),siblingStyle:[p.zh.sku,p.zh.detail].includes(t)?{display:"flex",flex:1,overflow:"hidden"}:null,prefix:h}),[p.zh.sku,p.zh.detail].includes(t)&&"ticket-detail"!=v&&(0,be.jsx)(Ve,(0,s.Z)((0,s.Z)({},A),{},{notHigh:t==p.zh.detail&&"RN"==e.platform,spotid:k.spotid,optid:k.optid,isScanShelf:k.isScanShelf,isFromShelfSku:!!e.props.isFromShelfSku,booking:e.booking.bind(e),collectAniFun:e.addFun.bind(e,"skufooter"),showBuyNotes:e.props.showBuyNotes,buyNoteClickLog:e.logData.tkt_sightdetail_click_package_notice,buyNoteExposureLog:e.logData.tkt_sightdetail_view_package_notice,btnClickLog:e.logData.tkt_sightdetail_click_package_next,haveClear:K,clearAll:e.clearAll.bind(e),prefix:h,isInpop:!!e.props.initCallBack,hideBuynoteCallBack:e.props.hideBuynoteCallBack,btnTraceData:e.logData.btnTraceData,buyNoteTraceData:e.logData.buyNoteTraceData,priceDetailTraceData:e.logData.priceDetailTraceData,cleanTraceData:e.logData.cleanTraceData,reservation:!1,chioceDateData:Z,isUseInBooking:I,diffDateBoxResIds:e.state.diffDateBoxResIds,sameDateBoxResIds:e.state.sameDateBoxResIds,boxResIdMapSubResId:e.state.boxResIdMapSubResId,filteredFirstLevelMapSubResId:e.state.filteredFirstLevelMapSubResId,firstLevelMapChoiceDateData:e.state.firstLevelMapChoiceDateData,isPack3:ie}))]}),p.zh.detail!=t||l?null:(0,be.jsx)(Se.Z,{assistComponent:H})]})};return ie?ye():ge()}}]),c}(ee)},50358:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(72747)),l=n(81876),u=n(45023),d=n(56034),p=n(57113),h=n(35409),f=n(64156),m=n(56569),v=n(79301),_=n(95308),g=function(){var e=(0,_.Z)((0,v.Z)().mark((function e(t,n,i){return(0,v.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),y=n(17366),x=n(99739),k=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"state",void 0),(0,u.Z)((0,l.Z)(i),"buyNoteContent",void 0),(0,u.Z)((0,l.Z)(i),"getSubFilterOptionFromResId",(function(e){var t=i.props,n=t.diffDateBoxResIds,o=t.sameDateBoxResIds,r=t.boxResIdMapSubResId,a=t.filteredFirstLevelMapSubResId,s=void 0===a?{}:a,c=t.firstLevelMapChoiceDateData,l=t.chioceDateData,u=t.isPack3;if(!u)return[];var d=[],p=n.includes(e),h=o.includes(e);if(p||h){var f=r[e]||[];f.forEach((function(e){var t="";if(p){var n=Object.keys(s).find((function(t){return s[t].includes(e)}))||"",i=c[n];i&&i.date&&(t=i.date)}h&&l.date&&(t=l.date),d.push({subResourceId:e,date:t})}))}return d})),i.state={keepSpace:!1,imInfo:null===e||void 0===e?void 0:e.imInfo},i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){p.Z.add("buyNotes",h.Z,{props:{isOpened:!1}})}},{key:"onOpen",value:function(){this.setState({keepSpace:!0})}},{key:"onClose",value:function(){this.setState({keepSpace:!1})}},{key:"showBuyNotesLayer",value:function(e){if(e){var t=this.props,n=t.spotid,i=t.showBuyNotes,o=t.chioceDateData,r=t.isScanShelf,a=t.booking,s=t.isUseInBooking,c=t.isFromShelfSku,l="mini"==(0,x.ZP)().platform,u=this.getSubFilterOptionFromResId(e);g(e,n,this);var d=null!==o&&void 0!==o&&o.date?[{type:"DateFilter",filterItems:[{key:"Date",value:o.date}]}]:[];if(l){var p="undefined";s||(p=a(!0)),(0,f.n)({spotId:n,resourceId:e,buttonInfo:{type:"booking",text:"\u4e0b\u4e00\u6b65",canJump:!0,url:p},filters:d,subFilters:u,noRenderOnshow:r})}else(0,f.R)({spotId:n,resourceId:e,bottomHeight:!i&&(0,m.cY)()?(0,y.Vh)(87):(0,y.Vh)(63),hideBottom:!0,filters:d,subFilters:u,noRenderOnshow:r,isFromShelfSku:c})}}},{key:"onBtnClick",value:function(){var e=this.props,t=e.booking,n=e.isGrayBtn;n||t&&t()}}]),n}(d.ZP),b=n(58013),Z=n(71557),I=n(9353),w={m_footer_detail:{width:"100%",display:"flex",flexDirection:"column"},m_view_detail:{display:"flex",flexDirection:"row",alignItems:"center",zIndex:99,backgroundColor:"rgb(255,250,245)",height:(0,y.Vh)(39),paddingLeft:(0,y.Vh)(16),paddingRight:(0,y.Vh)(12)},m_flex_start:{justifyContent:"flex-start"},m_disnone:{display:"none"},m_view_item:(0,i.Z)((0,i.Z)({},y._),{},{flexShrink:(0,y.i4)(0),overflow:"hidden"}),m_line_clamp1:(0,i.Z)((0,i.Z)({},(0,y.Sf)(1)),{},{color:"#FF7700"}),m_view_left:(0,i.Z)((0,i.Z)({flex:1},y._),{},{overflow:"hidden"}),m_view_detail_text:{color:"#ff7700",fontSize:(0,y.Vh)(13),verticalAlign:"middle"},m_transparent:{color:"transparent",fontSize:(0,y.Vh)(6),verticalAlign:"middle"},m_line:{color:"#FFC899",fontSize:(0,y.Vh)(10),verticalAlign:"middle"},m_view_detail_position:{height:(0,y.Vh)(34)},m_footer_wrapper_hold:{height:(0,y.Vh)(64)},m_footer_wrapper:{width:"100%",alignSelf:"flex-end"},m_footer_clear:{marginRight:(0,y.Vh)(-2),minWidth:(0,y.Vh)(60),flex:1,flexDirection:"row",justifyContent:"flex-end",display:"flex"},m_footer_clear_disable:{color:"#666666"},m_footer_clear_text:{fontSize:(0,y.Vh)(14),color:"#0086f6"},m_select_detail:{display:"flex",flexDirection:"row",justifyContent:"center",backgroundColor:"#fff",paddingTop:(0,y.Vh)(12),height:(0,y.Vh)(31)},m_select_detail_text:{color:"#999999",fontSize:(0,y.Vh)(12)}},S={m_im:{marginRight:5,marginTop:0},m_im_text:{marginTop:(0,y.Vh)(2),color:"#222"}},P={m_im:{marginRight:(0,y.Vh)(6),marginLeft:(0,y.Vh)(8)}},T=(0,I.Z)(w),C=n(59201),D=n(50738),R=n(55478),j=n(2446),N=n(2269),V=n(50570).Z,L=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.optid,n=e.total,o=e.subPriceDes,r=e.isGrayBtn,a=e.buyNoteClickLog,s=e.buyNoteExposureLog,l=e.btnClickLog,u=e.notHigh,d=(e.haveClear,e.clearAll,e.deductDesc),p=e.otherDesc,h=e.footPop,f=e.marketPrice,v=e.prefix,_=e.collectAniFun,g=(e.hideReset,e.showIm),x=e.otherDescColor,k=e.isLoading,I=e.imText,w=e.hideBuynote,L=e.showTags,E=void 0===L?[]:L,A=e.isManualSelect,F=e.vendorName,M=e.btnTraceData,O=e.buyNoteTraceData,B=e.reservation,z=e.priceDetailTraceData,H=(e.cleanTraceData,e.fstyle),U=e.notKeepSpace,G=e.renderPayBtn,q=e.footerConfig,W=e.imLog,K=e.isNewGuideSku,Y=this.state,X=Y.imInfo,Q=Y.keepSpace,J=!(!t||1!=t.length||"number"!=typeof n)&&!w||A,$=u?64:(0,m.cY)()?88:64,ee=(0,j.sg)("buyNotes")||g,te=$,ne=(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.xv,{style:T.m_transparent,children:"\u7a7a"}),(0,N.jsx)(c.xv,{style:T.m_line,children:"|"}),(0,N.jsx)(c.xv,{style:T.m_transparent,children:"\u7a7a"})]}),ie=(0,y.Vh)(A?31:39,{needPx:!0}),oe=!1;oe=!q||!!q.find((function(e){return"service"===e.category&&!!e.selected}));var re=oe&&ee&&X&&!A;return(0,N.jsx)(c.G7,{style:(0,y.wh)([T.m_footer_detail,Q&&J&&!U?{marginTop:ie}:null]),children:(0,N.jsx)(R.Z,{prefix:v,name:"sku-footer",show:J,delay:!0,collectAniFun:_,onOpen:this.onOpen.bind(this),onClose:this.onClose.bind(this),slideDirection:"top",opacityDuration:1,style:(0,i.Z)({flexBasis:(0,y.Vh)(te),overflow:"visible",justifyContent:"flex-end"},J&&(0,m.gn)()?(0,y.Wn)({hShadow:-16,vShadow:-16,blur:16,spread:2,color:"rgba(0, 0, 0, 0.08)",rnColor:"rgba(0,0,0)",opacity:.05}):{}),siblingStyle:(0,i.Z)((0,i.Z)({},(0,y.vs)("none")),{},{justifyContent:"flex-end",transform:[{translateY:0}],paddingBottom:0,position:"relative",zIndex:1}),aniStyle:{zIndex:0},defaultHeight:ie,noFirstAni:!!A,AniComp:(0,N.jsx)(c.G7,{children:A?(0,N.jsx)(c.G7,{style:T.m_select_detail,children:(0,N.jsx)(c.xv,{style:T.m_select_detail_text,children:'\u70b9\u51fb"\u53bb\u9009\u5ea7"\u8fdb\u5165'.concat(F||"","\u9009\u5ea7\u9875\u9762")})}):(0,N.jsxs)(C.Z,{style:(0,y.wh)([T.m_view_detail,E.length?{}:T.m_flex_start]),onClick:this.showBuyNotesLayer.bind(this,null===t||void 0===t?void 0:t[0]),log:a&&a({resourceid:null===t||void 0===t?void 0:t[0]}),activeOpacity:1,devTraceData:O,children:[(0,N.jsx)(c.G7,{style:(0,y.wh)([T.m_view_left,E.length?{}:T.m_disnone]),children:(0,N.jsx)(c.k0,{style:(0,y.wh)([T.m_view_item,T.m_line_clamp1]),numberOfLines:1,children:E.map((function(e,t){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.xv,{style:T.m_view_detail_text,children:e}),t+1!==E.length?ne:null]})}))})}),(0,N.jsxs)(c.G7,{style:(0,y.wh)([T.m_view_item,E.length?{paddingLeft:(0,y.Vh)(4)}:{}]),children:[(0,N.jsx)(c.xv,{testID:s&&(0,D.kI)(s.key,s.params),style:T.m_view_detail_text,children:"".concat(E.length?"":"\u70b9\u51fb\u67e5\u770b").concat(B?"\u9884\u7ea6\u987b\u77e5":"\u8d2d\u4e70\u987b\u77e5")}),(0,N.jsx)(Z.Z,{type:"forward",size:28,color:"#ff7700"})]})]})}),Siblings:(0,N.jsx)(c.G7,{style:T.m_footer_wrapper,children:(0,N.jsx)(b.Z,{notHigh:u,currency:"\xa5",nextTitle:A?"\u53bb\u9009\u5ea7":"\u4e0b\u4e00\u6b65",total:k?"":"number"==typeof n?String(n):"--",renderPayBtn:G,marketPrice:f,isGrayBtn:r,subPriceDes:o,booking:this.onBtnClick.bind(this),btnClickLog:!r&&l&&l({resourceid:t?t.join(","):""}),deductDesc:d,otherDesc:p,footPop:h,imStyle:{justifyContent:"flex-end"},ignoreIphoneX:this.props.isInpop,hideShadow:J,isPopLayer:!0,fstyle:H,renderIM:function(){return re?(0,N.jsx)(V,{showImText:!0,imInfo:X,fstyle:(0,y.Ec)(S,K?P:null),customImText:I,log:W}):null},otherDescColor:x,ConfigPriceComp:A?function(){return null}:null,onlyBtn:!!A,btnTraceData:M,detailTraceLog:z})})})})}}]),n}(k)},23033:function(e,t,n){"use strict";n.d(t,{Y4:function(){return d},jo:function(){return p}});var i=n(298),o=n(9353),r=n(17366),a=n(99739),s=n(93936),c=n(56569),l=(0,a.ZP)().taroEnv,u={m_height_0:{height:0},m_container:{backgroundColor:"#ffffff",position:"relative"},m_sku_height:{height:"100%"},m_container_radius:{borderTopLeftRadius:(0,r.Vh)(8),borderTopRightRadius:(0,r.Vh)(8)},m_sku_warn_wrapper:{},m_sku:{display:"flex",flexDirection:"column"},m_sku_index:{flex:1,overflow:l===a.fO.rn?"hidden":"scroll",height:"100%"},pagePadding:function(e){return console.log("platform >>>",e),(0,i.Z)((0,i.Z)({height:l===a.fO.alipay?"100vh":"100%"},(0,r.Cg)({direction:"top",style:"solid",color:"#eee",width:(0,r.Vh)(1)})),{},{display:"flex",flexDirection:"column"})},m_sku_wrapper:{flex:1,height:l===a.fO.h5?"calc(100% - 44px)":"100%"},m_scroll_view:(0,i.Z)({},s.ZU.m_scroll_view),m_title_wrap:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},m_title_text:{color:"#333",fontFamily:"PingFang SC",fontSize:(0,r.Vh)(17),fontWeight:"bold",height:(0,r.Vh)(21)},m_section_seperator:{height:1/(0,c.md)(),backgroundColor:"#E1E7F0",marginLeft:(0,r.Vh)(16),marginRight:(0,r.Vh)(16)}};t["ZP"]=(0,o.Z)(u);(0,r.Vh)(16),(0,r.Vh)(8),(0,r.Vh)(12),(0,r.Nv)((0,r.Vh)(18)),(0,r.Vh)(14);var d={m_ceil_border:{borderColor:"#ebeff5",backgroundColor:"rgb(245,247,250)"},active:{borderColor:"rgb(0,102,246)",backgroundColor:"rgb(235,243,255)"}},p=(0,o.Z)({m_valid_component_head:{fontWeight:(0,r.Ue)("500"),lineHeight:(0,r.Nv)((0,r.Vh)(21))}})},76777:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=n(90201),c=n(72747),l=n(298),u=n(9353),d=n(17366),p=n(93936),h=n(56569),f=(0,u.Z)({m_tips_container:(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({borderTopLeftRadius:(0,d.Vh)(8),borderBottomRightRadius:(0,d.Vh)(8),borderTopRightRadius:(0,d.Vh)(8),borderBottomLeftRadius:(0,d.Vh)(0),position:"absolute",left:(0,d.Vh)(-1),top:(0,d.Vh)(-10),backgroundColor:"rgb(255,85,0)",height:(0,d.Vh)(16),display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",lineHeight:(0,d.Nv)((0,d.Vh)(16))},(0,d.WB)((0,d.Vh)(6))),(0,d.yp)((0,d.Vh)(1))),(0,d.ix)("border-box")),{},{zIndex:2}),m_tips_container_text:{color:"#ffffff",fontSize:(0,d.Vh)(11)},m_reservation_tag_container:(0,l.Z)((0,l.Z)((0,l.Z)({borderTopLeftRadius:(0,d.Vh)(8),borderBottomRightRadius:(0,d.Vh)(8),borderTopRightRadius:(0,d.Vh)(8),borderBottomLeftRadius:(0,d.Vh)(0),position:"absolute",left:(0,d.Vh)(-1),top:(0,d.Vh)(-10),backgroundColor:"#ff7700",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},(0,d.WB)((0,d.Vh)(6))),(0,d.yp)((0,d.Vh)(2))),{},{zIndex:2}),m_reservation_tag_text:{fontWeight:(0,d.Ue)("500"),color:"#fff",fontSize:(0,d.Vh)(11),lineHeight:(0,d.Nv)((0,d.Vh)(12))},m_date_item:(0,l.Z)({height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingVertical:(0,d.Vh)(8),width:"100%"},(0,d.ix)("border-box")),m_date_item_inven:{height:(0,d.Vh)(76)},m_date_item_moreDate:{height:"auto",paddingVertical:0},m_date_container:{},m_inselect_date_item:{backgroundColor:"#e6f3fe"},m_invenText:{fontSize:(0,d.Vh)(12),lineHeight:(0,d.Nv)(14),color:"#F5190A",letterSpacing:(0,d.Vh)(-.16)},m_invenText_more:(0,l.Z)((0,l.Z)({lineHeight:(0,d.Nv)(12),fontSize:(0,d.Vh)(10)},(0,d.vs)("scale(0.83)")),{},{marginTop:(0,d.Vh)(1)}),m_reservation_text:{color:"#ff7700",fontSize:(0,d.Vh)(11),fontWeight:(0,d.Ue)("500"),lineHeight:(0,d.Nv)((0,d.Vh)(12)),paddingTop:(0,d.Vh)(3)},m_reservation_text_selected:{color:"#fff"}}),m=(0,u.Z)({row_item_other:(0,l.Z)((0,l.Z)((0,l.Z)({color:"#333333",fontSize:(0,d.Vh)(10),lineHeight:(0,d.Nv)((0,d.Vh)(14))},(0,d.o3)(0)),(0,d.yp)((0,d.Vh)(1))),(0,d.ix)("border-box")),otherHasTextView:{backgroundColor:"rgba(0,134,246,0.23)",borderRadius:(0,d.Vh)(8),borderBottomLeftRadius:0,paddingLeft:(0,d.Vh)(4),paddingRight:(0,d.Vh)(6)},otherHasTextViewCommon:(0,l.Z)((0,l.Z)({},p.ZP.otherHasTextViewCommon),{},{height:(0,d.Vh)(16),display:"flex"}),otherHasTextViewRed:{backgroundColor:"rgba(246,59,46,0.2)"},otherHasTextViewDisable:{backgroundColor:"#F4F4F4"},otherHasTextText:{color:"#0086F6",fontSize:(0,d.Vh)(11),fontWeight:"bold"},otherRed:{color:"#ff0000"},otherActive:{color:"#ffffff"},disable:{color:"#dddddd"}}),v=(0,u.Z)({row_item_date:{color:"rgb(17,17,17)",fontSize:(0,d.Vh)(13),lineHeight:(0,d.Nv)((0,d.Vh)(17)),letterSpacing:-.18},row_item_date_font:(0,l.Z)({},"android"==h.t4.OS?{fontFamily:"Roboto"}:{fontFamily:"20TH_regular"}),row_item_date_moreDate:{fontWeight:(0,d.Ue)("500"),color:"#333333",fontSize:(0,d.Vh)(17),textAlign:"center",lineHeight:(0,d.Nv)((0,d.Vh)(21))},dateRed:{color:"#ff0000"},dateActive:{color:"#ffffff"},disable:{color:"#ccc"},flexLayout:p.NG.flexLayout}),_=(0,u.Z)({row_item_price:{color:"#FF5500"},row_item_price_text:{fontWeight:"500",fontSize:(0,d.Vh)(13)},row_item_price_moreDate:(0,l.Z)({textAlign:"center",marginTop:0,color:"#333333",fontSize:(0,d.Vh)(10),lineHeight:(0,d.Nv)((0,d.Vh)(11))},"android"==h.t4.OS?{fontFamily:"Roboto"}:{}),priceActive:{color:"#fff"},moreDate_disable:{color:"#bbb"},disable:{color:"#ccc"}}),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(s.PureComponent),y=n(32545),x=n(46241),k=n(64571),b=n(19226),Z=n(23033),I=n(51614),w=n(2269),S=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.price,i=e.disableText,o=e.index,r=e.lineIndex,a=e.showLocalTime,s=e.firstDay,l=e.showFrom,u=e.holidayText,p=e.isMoreDate,h=e.day,g=e.style,S=e.work,P=e.id,T=e.isSelect,C=e.isInSelect,D=e.isDateShowPrice,R=void 0===D||D,j=e.tooltipText,N=void 0===j?"":j,V=e.tipText,L=void 0===V?"":V,E=e.isDisable,A=e.isTile,F=e.isFirst,M=e.isShowInvenText,O=void 0!==M&&M,B=e.invenText,z=e.isError,H=e.isAct,U=e.isPromotionPrice,G=e.showReservationTag,q=void 0!==G&&G,W=e.showReservationText,K=void 0!==W&&W,Y=e.isNewGuideSku,X=void 0!==Y&&Y,Q=t?t.substr(t.indexOf("-")+1):"",J=["\u4eca","\u660e","\u540e"],$=t?(0,y.XV)(t):-1,ee=!a&&0==o&&$>0,te=$>0,ne=0==r?"left":6==r?"right":"center",ie=A&&!!(J[$]&&F&&!a||u&&u.length>1),oe=!0,re=" ",ae=!1,se=!1,ce=function(){return E&&i?"".concat(i," "):"number"==typeof n&&R?((l||0!==n)&&(oe=!1),l&&(ae=!0),se=!0,n+""):re}(),le=Object.assign.apply(Object,[{}].concat([{top:0},v.row_item_date,_.row_item_price,!p&&v.row_item_date_font,ce.length>5?{fontSize:(0,d.Vh)(ce.length>7?12:13)}:null,X&&!oe&&ce.length>5?{fontSize:(0,d.Vh)(10),lineHeight:(0,d.Vh)(12)}:null,p&&_.row_item_price_moreDate,p&&X&&!oe&&ce.length>5?{fontSize:(0,d.Vh)(8)}:null,T&&p&&_.priceActive,E&&_.disable,E&&p&&_.moreDate_disable,v.flexLayout,oe&&!p&&_.row_item_price_text]));return(0,w.jsxs)(x.Z,{id:P,style:(0,k.kg)((0,d.wh)([f.m_date_item,p&&f.m_date_item_moreDate,C&&te?f.m_inselect_date_item:{},g])),isSelect:T,isMoreDate:p,fstyle:z?Object.assign({},Z.Y4,{m_ceil_border:{borderColor:"#fff",backgroundColor:"#fff"}}):Z.Y4,children:[ee&&(0,w.jsx)(c.G7,{style:f.m_tips_container,children:(0,w.jsx)(c.xv,{style:f.m_tips_container_text,children:$>2?"".concat($,"\u5929\u540e"):"".concat(J[$],"\u5929")})}),q&&(0,w.jsx)(c.G7,{style:f.m_reservation_tag_container,children:(0,w.jsx)(c.xv,{style:f.m_reservation_tag_text,children:"\u9884\u7ea6\u62a2"})}),p&&!L&&(0,w.jsx)(c.G7,{style:(0,d.wh)([ie&&m.otherHasTextView,!S&&ie&&!T&&m.otherHasTextViewRed,ie&&E&&m.otherHasTextViewDisable,m.otherHasTextViewCommon,v.flexLayout]),children:ie?(0,w.jsx)(c.xv,{style:(0,d.wh)([m.row_item_other,m.otherHasTextText,T&&m.otherActive,!S&&m.otherRed,E&&m.disable]),space:"ensp",children:J[$]&&F&&(null===u||void 0===u?void 0:u.length)<2?"".concat(J[$],"\u5929"):u||" "}):null}),T&&!!N&&(0,w.jsx)(b.Z,{text:N,placement:ne}),!!L&&(0,w.jsx)(c.xv,{style:(0,d.wh)([m.row_item_other,T&&m.otherActive,E&&m.disable]),space:"ensp",children:L}),!p&&(0,w.jsx)(c.xv,{style:(0,d.wh)([v.row_item_date,E&&v.disable,v.flexLayout]),space:"ensp",children:!a&&0==s&&$<3?"".concat(J[$],"\u5929"):"\u5468".concat((0,y.q7)(t))}),(0,w.jsx)(c.xv,{style:(0,d.wh)([v.row_item_date,!p&&v.row_item_date_font,p&&v.row_item_date_moreDate,p&&!S&&v.dateRed,T&&p&&v.dateActive,E&&v.disable,v.flexLayout]),space:"ensp",children:p?h||" ":"".concat(Q)}),(!!i||R)&&(ce!==re?(0,w.jsx)(I.Z,{fstyle:{u_price_price:le,u_price_icon:le,u_price_start_text:le,u_price_free:le},value:ce,free:"0"===ce&&!U&&!H,isShowStart:ae,isShowCurrency:se}):null),!!B&&!i&&O&&(0,w.jsx)(c.xv,{style:(0,d.wh)([f.m_invenText,p&&f.m_invenText_more,p&&T&&m.otherActive]),children:B}),K&&(0,w.jsx)(c.xv,{style:(0,d.wh)([f.m_reservation_text,T&&f.m_reservation_text_selected]),children:"\u9884\u7ea6\u62a2"})]})}}]),n}(g)},79381:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var i,o=n(298),r=n(57042),a=n(24460),s=n(21867),c=n(86066),l=n(90201),u=n(72747),d=n(81876),p=n(45023),h=n(56034),f=n(48501),m=n(56569),v=n(17366),_=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,d.Z)(i),"state",void 0),(0,p.Z)((0,d.Z)(i),"width",void 0),(0,p.Z)((0,d.Z)(i),"tipInfo",void 0),i.width=(0,v.Vh)((m.Db.get("window").width-(e.usePage==f.zh.book?48:24))/5),i.state={isInit:!1},i.tipInfo={showDefault:{text:"\u5df2\u9009\u62e9\u60a8\u7b5b\u9009\u7684\u65e5\u671f"},error:{text:e.calendarTip||"\u8bf7\u9009\u62e9\u4f7f\u7528\u65e5\u671f",type:"error"},default:{text:e.calendarTip||"\u8bf7\u5148\u9009\u62e9\u65e5\u671f",type:"default"}},i}return(0,a.Z)(n,[{key:"onClick",value:function(e){var t=this.props,n=t.onChooseDate,i=t.usePage,o=t.defaultDate,r=e.disableText,a=e.price,s=r||"number"!=typeof a;s?this.toast.show("\u5f53\u524d\u65e5\u671f"+(r||"\u4e0d\u53ef\u8ba2")):i==f.zh.book&&e.date==o||n&&n(e)}},{key:"onTipshow",value:function(){var e=this;this.setState({isTipShow:!0}),i&&clearTimeout(i),i=setTimeout((function(){e.setState({isTipShow:!1})}),2e3)}},{key:"componentDidMount",value:function(){this.state.isInit||this.setState({isInit:!0})}}]),n}(h.ZP),g=n(71557),y=n(9353),x={m_tab_calendar:{paddingRight:(0,v.Vh)(8),paddingLeft:(0,v.Vh)(16),paddingBottom:(0,v.Vh)(12),position:"relative"},m_tab_calendar_book:(0,o.Z)({paddingBottom:(0,v.Vh)(20)},(0,v.Cg)({width:v.WI,style:"solid",color:"rgb(235,239,245)",direction:"bottom"})),m_back_red:{backgroundColor:"#fee8e6"},m_tab_padding_bottom:{paddingBottom:(0,v.Vh)(10)},m_tab_wrapper:{position:"relative"},m_tab_calendar_header:{display:"flex",flexDirection:"row",paddingTop:(0,v.Vh)(16),paddingBottom:(0,v.Vh)(12),alignItems:"center",flexWrap:"wrap"},m_tab_calendar_small_header:{paddingTop:(0,v.Vh)(20)},m_tab_calendar_header_text:{color:"rgb(17,17,17)",fontSize:(0,v.Vh)(17),fontWeight:(0,v.Ue)("500"),lineHeight:(0,v.Nv)((0,v.Vh)(21)),display:"flex"},m_tab_calendar_header_text_book:(0,o.Z)({letterSpacing:(0,v.Vh)(-.5)},(0,v.yp)((0,v.Vh)(2))),m_tab_calendar_header_select:(0,o.Z)((0,o.Z)((0,o.Z)({height:(0,v.Vh)(21)},(0,v.yp)((0,v.Vh)(2))),(0,v.WB)((0,v.Vh)(8))),{},{display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"rgb(245,247,250)",borderTopLeftRadius:(0,v.Vh)(10.5),borderBottomRightRadius:(0,v.Vh)(10.5),borderTopRightRadius:(0,v.Vh)(10.5),borderBottomLeftRadius:0},(0,v.ix)("border-box")),error:{backgroundColor:"rgb(255,246,245)"},texterror:{color:"rgb(242,21,0)"},m_tab_calendar_header_select_text:{fontSize:(0,v.Vh)(13),color:"rgb(16,73,153)",lineHeight:(0,v.Nv)((0,v.Vh)(17)),fontWeight:"bold",fontFamily:"PingFangSC-Medium"},m_tab_calendar_localTime:{color:"#111111",fontSize:(0,v.Vh)(15),fontWeight:"normal",display:"flex",lineHeight:(0,v.Nv)((0,v.Vh)(19))},m_ceil_wrapper:(0,o.Z)((0,o.Z)({backgroundColor:"#fff",height:(0,v.Vh)(75),width:(0,v.Vh)(60),position:"absolute",bottom:(0,v.Vh)(-2),right:(0,v.Vh)(-3),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",paddingLeft:(0,v.Vh)(12)},(0,v.ix)("border-box")),{},{zIndex:98,borderRadius:(0,v.Vh)(2)}),m_moreDate_text:{color:"#006FF6",fontSize:(0,v.Vh)(13),lineHeight:(0,v.Nv)((0,v.Vh)(19)),letterSpacing:(0,v.Vh)(-.18),fontFamily:"PingFangSC-Regular"},m_moreDate_text_wrapper:{display:"flex",flexDirection:"column"},m_tooltip_wrapper:{position:"absolute",right:(0,v.Vh)(6),bottom:(0,v.Vh)(50),flexDirection:"column",zIndex:99},m_tooltip_content:{position:"relative",height:(0,v.Vh)(24),display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:(0,v.Vh)(8),paddingRight:(0,v.Vh)(8),borderRadius:(0,v.Vh)(12)},m_tooltip_text:{color:"#ffffff",fontSize:(0,v.Vh)(10),fontWeight:"500",lineHeight:(0,v.Nv)((0,v.Vh)(24))},commonArrow_top:{position:"relative",width:(0,v.Vh)(0),height:(0,v.Vh)(0),borderStyle:"solid",borderWidth:(0,v.Vh)(5),borderLeftColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderTopColor:"#F78E0A",left:(0,v.Vh)(24)},m_tab_calendar_shadow_android:{position:"absolute",left:"auto",top:"auto",right:(0,v.Vh)(-3),bottom:(0,v.Vh)(-3),width:(0,v.Vh)(68),height:(0,v.Vh)(75)},m_shadow_higher:{height:(0,v.Vh)(88)},translateX:(0,o.Z)({},(0,v.oQ)("translateX 0.6s linear 0.2s 3")),error_translateX:(0,o.Z)({},(0,v.oQ)("error-translate 0.6s linear 0.2s 3")),translateExcitationTips:{},m_text_thin:{fontSize:(0,v.Vh)(15)},m_text_small:{fontSize:(0,v.Vh)(15),fontWeight:(0,v.Ue)("500"),lineHeight:(0,v.Nv)((0,v.Vh)(19))},m_text_excitationTips:{fontSize:(0,v.Vh)(13),lineHeight:(0,v.Nv)((0,v.Vh)(17)),letterSpacing:-(0,v.Vh)(.16),fontWeight:"normal"},m_tab_excitationTips:{height:(0,v.Vh)(25),borderRadius:(0,v.Vh)(13),display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:(0,v.Vh)(6)},m_image_excitationTipsOrange:{height:(0,v.Vh)(17),width:(0,v.Vh)(17),marginRight:(0,v.Vh)(2),position:"relative"},m_image_excitationTipsGreen:{height:(0,v.Vh)(17),width:(0,v.Vh)(17),marginRight:(0,v.Vh)(2),marginLeft:(0,v.Vh)(2),position:"relative"},m_tab_calendar_pack3:{paddingBottom:(0,v.Vh)(20)},m_reservation_tip_container:{paddingTop:(0,v.Vh)(8),paddingRight:(0,v.Vh)(8),display:"flex",flexDirection:"row",alignItems:"flex-start"},m_reservation_tip_icon:{paddingRight:(0,v.Vh)(6),height:(0,v.Vh)(19),display:"flex",alignItems:"center",justifyContent:"center"},m_reservation_tip_text:{color:"#111",fontSize:(0,v.Vh)(13),fontWeight:"normal",lineHeight:(0,v.Nv)((0,v.Vh)(19)),flex:1},m_tab_calendar_guide:{paddingBottom:0}},k={linearGradientStart:{x:0,y:0},linearGradientEnd:{x:1,y:0},orange:["#FFF4EB","#FFFFFF"],green:["#F2FCF9","#FFFFFF"]},b=(0,y.Z)(x),Z=n(59201),I=n(90129),w=function(){return function(){}},S=n(82901),P=n(2269),T=function(e){var t,n=e.text,i=e.type,r=e.isInit,a=e.excitationTips,s=e.excitationTipsExposureLog,c=(0,l.useState)(new u.fS.Value(0)),d=(0,I.Z)(c,1),p=d[0],h=(0,l.useState)(new u.fS.Value(1)),f=(0,I.Z)(h,1),m=f[0],_=(0,l.useState)(new u.fS.Value(0)),g=(0,I.Z)(_,1),y=g[0],x=w((0,o.Z)((0,o.Z)({},e),{},{x:p,fadeAnim:m,fadeTips:y})),Z=x.showTip,T=x.fadeIn,C=x.fadeOut,D=x.fadeInTips;return T&&(0,l.useEffect)(T,[r,i]),C&&(0,l.useEffect)(C,[n]),D&&(0,l.useEffect)(D,[null===a||void 0===a?void 0:a.contents]),n||Z||null!==a&&void 0!==a&&a.contents?(0,P.jsxs)(P.Fragment,{children:[(n||Z)&&(0,P.jsx)(u.fS.View,{style:(0,v.wh)([b.m_tab_calendar_header_select,i?b[i]:"",{transform:[{translateX:p}],opacity:m},"default"==i?b.translateX:{},"error"==i?b.error_translateX:{}]),children:(0,P.jsx)(u.xv,{style:(0,v.wh)([b.m_tab_calendar_header_select_text,i?b["text".concat(i)]:""]),children:n||Z})}),(null===a||void 0===a?void 0:a.contents)&&(null===a||void 0===a||null===(t=a.contents[0])||void 0===t?void 0:t.value)&&!Z&&(0,P.jsx)(S.Z,{children:(0,P.jsx)(u.G7,{style:b.translateExcitationTips,children:(0,P.jsx)(u.G7,{testID:s({content:a.contents.map((function(e){return e.value})).join("")}),children:(0,P.jsxs)(u.o,{start:k.linearGradientStart,end:k.linearGradientEnd,direction:"orange"==a.color?85.36306432618633:90,colors:"orange"==a.color?k.orange:k.green,style:b.m_tab_excitationTips,children:[(0,P.jsx)(u.Ee,{url:a.icon,style:"orange"==a.color?b.m_image_excitationTipsOrange:b.m_image_excitationTipsGreen}),a.contents.map((function(e){return(0,P.jsx)(u.xv,{style:(0,v.wh)([b.m_text_excitationTips,"orange"==e.key?{color:"#FF5500"}:{color:"#09A76F"}]),children:e.value})}))]})})})})]}):null},C=n(58472),D=n(99739),R=n(39140),j=n(61252),N=n(79522),V=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,p.Z)((0,d.Z)(i),"openCompare","RN"==i.platform),(0,p.Z)((0,d.Z)(i),"state",void 0),(0,p.Z)((0,d.Z)(i),"tabScroll",void 0),(0,p.Z)((0,d.Z)(i),"ceil",void 0),(0,p.Z)((0,d.Z)(i),"containerWidth",0),(0,p.Z)((0,d.Z)(i),"loaded",!1),(0,p.Z)((0,d.Z)(i),"isAlipay",!1),i.state={wrapperWidth:m.Db.get("window").width-40,itemWidth:e.isNewGuideSku?(0,v.Vh)(55,{needPx:!0}):(0,v.Vh)(60,{needPx:!0}),scrollDistance:0,showLength:(0,D.ZP)().taroEnv===D.fO.h5?e.maxLength||60:5,startIndex:0,marginRight:(0,v.Vh)(6,{needPx:!0}),marginRightLast:(0,v.Vh)(65,{needPx:!0}),defaultDate:e.defaultDate},i.isAlipay=(0,D.ZP)().taroEnv===D.fO.alipay,i.sendDateSlideClickLog=(0,N.Ds)(i.sendDateSlideClickLog,500),i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillReceiveProps",value:function(e){var t,n;this.state.defaultDate!=e.defaultDate&&(this.setCalendarStart(e),this.setState({defaultDate:e.defaultDate})),(null===(t=e.calendar)||void 0===t?void 0:t.length)!=(null===(n=this.props.calendar)||void 0===n?void 0:n.length)&&this.updateShowLen(e)}},{key:"updateShowLen",value:function(e){var t=this,n=e.maxLength,i=void 0===n?60:n,o=e.calendar;this.setState({showLength:Math.min(i,o.length)},(function(){t.loaded=!0,t.getContainerWidth(),t.setCalendarStart(e,!0)}))}},{key:"init",value:function(){var e=this;(0,C.L6)(this.tabScroll,(function(t){t&&t.width&&e.setState({wrapperWidth:t.width})}),!1,"",{interval:50}),(0,C.L6)(this.ceil,(function(t){t&&t.width&&e.setState({itemWidth:t.width},(function(){e.getContainerWidth()}))})),setTimeout((function(){e.updateShowLen(e.props)}),600)}},{key:"getContainerWidth",value:function(){var e=this.state,t=e.itemWidth,n=e.marginRightLast,i=e.showLength,o=e.marginRight;this.containerWidth=(t+o)*i+n}},{key:"setCalendarStart",value:function(e,t){var n=this.props,i=n.calendar,o=n.defaultDate,r=n.maxLength,a=void 0===r?60:r,s=e.defaultDate,c=this.state,l=c.startIndex,u=c.showLength;if(s&&(o!=s||t)){var d=i.findIndex((function(e){return e.date==s}));(d<l||d>=l+u)&&(l=d>a/2?d-a/2:0,l+a>i.length&&(l=i.length-a>0?i.length-a:0),this.setState({startIndex:l})),this.changeScrollDistance(d-l)}}},{key:"onClick",value:function(e,t){var n=this.props,i=n.onChooseDate,o=n.usePage,r=n.defaultDate,a=n.calendar,s=n.disableInvertSelection,c=e.disableText,l=e.price,u=c||"number"!=typeof l;if(u)this.toast.show("\u5f53\u524d\u65e5\u671f"+(c||"\u4e0d\u53ef\u8ba2"));else if(o!=f.zh.book&&!s||e.date!=r){var d=r==e.date?null:e.date;this.setState({defaultDate:d});var p=a.find((function(t){return t.date==e.date}));i&&i(p),this.changeScrollDistance(t)}}},{key:"componentDidUpdate",value:function(){}},{key:"changeScrollDistance",value:function(e){var t=this,n=this.state,i=n.wrapperWidth,o=n.itemWidth,r=n.marginRight,a=(o+r)*e,s=(i-o)/2,c=a-s;c!==this.state.scrollDistance&&this.loaded&&setTimeout((function(){if(t.platform==R.NX.Mini)t.setState({scrollDistance:c});else if(t.platform==R.NX.H5){var e;(null===(e=t.tabScroll)||void 0===e?void 0:e.scrollTo)&&t.tabScroll.scrollTo({left:c,top:0,behavior:"smooth"})}else{var n;(null===(n=t.tabScroll)||void 0===n?void 0:n.scrollTo)&&t.tabScroll.scrollTo({x:c,y:0})}}))}},{key:"onScrollToSide",value:function(e){var t=this.props.calendar,n=this.state,i=n.startIndex,o=n.showLength;(0!==i&&"left"==e||t.length>i+o&&"right"==e)&&this.props.onTipshow&&this.props.onTipshow()}},{key:"onScroll",value:function(e){try{var t=this.state,n=t.wrapperWidth,i=t.startIndex,o=t.showLength,r=this.props,a=r.calendar,s=r.isNewGuideSku,c=r.newDateSlideClickLog,l=e.nativeEvent.contentOffset.x,u=10;(l+n>=this.containerWidth-u&&a.length>i+o||l<=0&&0!==i)&&this.props.onTipshow&&this.props.onTipshow(),s&&c&&this.sendDateSlideClickLog(c)}catch(e){}}},{key:"sendDateSlideClickLog",value:function(e){var t=e.params,n=e.type;(0,j.Zz)(t,n)}}]),n}(h.ZP),L=n(76777),E=n(32545),A={m_tab_scroll:{width:"100%",position:"relative",marginTop:(0,v.Vh)(-10)},m_tab:{paddingTop:(0,v.Vh)(10),display:"flex",flexDirection:"row",position:"relative"},last_item_hold:function(e){return{width:e,flexBasis:(0,v.P_)(e),flexGrow:(0,v.H7)(0),flexShrink:(0,v.i4)(0)}},m_tab_more_date:{},addMarginRight:function(e,t){return{height:(0,v.Vh)(67),width:t,marginRight:e,flexGrow:(0,v.H7)(0),flexShrink:(0,v.i4)(0),flexBasis:(0,v.P_)(t)}},m_tab_alipay:{position:"relative"},m_tab_date_ceil_height:{height:(0,v.Vh)(72)}},F=(0,y.Z)(A),M=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.calendar,n=this.state,i=n.showLength,r=n.marginRightLast,a=n.scrollDistance,s=n.startIndex,c=n.defaultDate,l=(0,E.XV)(t[0].date),d=function(t){e.ceil||(e.ceil=t)},p=t.slice(s,s+i).map((function(t,n){var i=!!c&&t.date===c;return(0,P.jsx)(B,(0,o.Z)((0,o.Z)((0,o.Z)({},e.props),e.state),{},{item:t,isSelect:i,index:n,firstDay:l,startIndex:s,setRef:d,onClick:function(){return e.onClick(t,n)}}))})),h={};return this.platform==R.NX.Mini&&(h.scrollLeft=a,h.enhanced=!0,h.showScrollbar=!1),(0,P.jsx)(u.pf,(0,o.Z)((0,o.Z)({id:"m_tab_scroll",className:"m_tab_scroll",style:F.m_tab_scroll,scrollX:!0,horizontal:!0,showsHorizontalScrollIndicator:!1,scrollWithAnimation:!0,enableFlex:!0},h),{},{scrollEventThrottle:16,ref:function(t){return e.tabScroll=t},onScroll:this.onScroll.bind(this),onScrollToLower:this.onScrollToSide.bind(this,"right"),onScrollToUpper:this.onScrollToSide.bind(this,"left"),children:(0,P.jsxs)(u.G7,{className:"m_tab ".concat(t.length>3?"m_tab_more_date":null),style:(0,v.wh)([F.m_tab,t.length>3?F.m_tab_more_date:null,this.isAlipay?F.m_tab_alipay:null]),children:[p,t.length>3&&(0,P.jsx)(u.G7,{style:F.last_item_hold(r)})]})}))}}]),n}(V),O=function(e){var t=e.dateClickLog,n=e.item,i=e.index,o=e.showLength,r=e.marginRight,a=e.itemWidth,s=e.usePage,c=e.isSelect,l=e.traceData,u=e.defaultDate,d=e.isDateShowPrice,p=e.showLocalTime,h=e.firstDay,m=e.isServerData,_=e.onClick,g=e.setRef,y=e.calendar,x=e.isNewGuideSku,k=e.newDateClickLog,b=y.findIndex((function(e){return e.date==n.date}))+1;return(0,P.jsx)(Z.Z,{log:x?k&&k(b):t&&t({cdate:n.date}),onClick:function(){return _()},style:(0,v.wh)([F.addMarginRight(i==o-1?0:r,a),[f.zh.detail,f.zh.sku].includes(s)?F.m_tab_date_ceil_height:{}]),testID:"dateceil".concat(n.date),devTraceData:l&&!c&&l(u||"",n.date),activeOpacity:1,children:(0,P.jsx)(L.Z,{ref:function(e){return g(e)},isShowInvenText:[f.zh.detail,f.zh.sku].includes(s),id:"id".concat(n.date),className:"m_tab .m_ceil",date:n.date,price:n.price,isDateShowPrice:d,disableText:n.disableText,invenText:n.invenText,index:i,isSelect:c,showLocalTime:p,firstDay:h,marginRight:r,showFrom:!n.hideFrom,isDisable:n.disableText||"number"!==typeof n.price&&!m,isPromotionPrice:n.isPromotionPrice,showReservationTag:n.hasReservation,isNewGuideSku:x},n.date)})},B=(0,l.memo)(O,(function(e,t){var n=t.showLength,i=t.itemWidth,o=t.isSelect,r=t.item,a=t.isServerData,s=t.isDateShowPrice,c=t.startIndex,l=r.hideFrom,u=r.disableText,d=r.invenText,p=r.price,h=r.hasReservation,f=r.date,m=e.showLength,v=e.itemWidth,_=e.isSelect,g=e.item,y=e.isServerData,x=e.isDateShowPrice,k=e.startIndex,b=g.hideFrom,Z=g.disableText,I=g.invenText,w=g.price,S=g.hasReservation,P=g.date;return n===m&&i===v&&o===_&&l===b&&u===Z&&d===I&&p===w&&a===y&&x===s&&k===c&&S===h&&f===P})),z=n(50738),H=(0,D.ZP)(),U=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.showLocalTime,i=t.calendar,r=t.dateTitle,a=t.moreDateClickLog,s=t.moreButtonExposureLog,c=t.tabExposureLog,l=t.showDefault,d=t.usePage,p=t.setRef,h=t.anchor,m=t.clickMoreTraceData,_=t.defaultDate,y=t.thinTitle,x=t.smallTitle,k=t.excitationTips,I=t.excitationTipsExposureLog,w=t.isPack3MultiSale,S=t.hasReservation,C=t.showReservationTip,D=t.isNewGuideSku,N=t.newMoreDateExpoLog,V=t.newMoreDateClickLog;return(0,P.jsxs)(u.G7,{id:"tab_calendar",ref:function(e){return p&&p("tab_calendar",e)},style:(0,v.wh)([b.m_tab_calendar,h?(0,o.Z)((0,o.Z)({},b.m_back_red),b.m_tab_padding_bottom):null,d==f.zh.book?b.m_tab_calendar_book:{},w?b.m_tab_calendar_pack3:null,D?b.m_tab_calendar_guide:null]),testID:c,children:[(0,P.jsxs)(u.G7,{style:(0,v.wh)([b.m_tab_calendar_header,x?b.m_tab_calendar_small_header:{}]),children:[(0,P.jsx)(u.xv,{style:(0,v.wh)([b.m_tab_calendar_header_text,d==f.zh.book?b.m_tab_calendar_header_text_book:{},y?b.m_text_thin:{},x?b.m_text_small:{},{marginRight:n?0:(0,v.Vh)(6)},d==f.zh.book&&S&&H.platform==R.NX.RN?{marginTop:(0,v.Vh)(10)}:null]),children:r}),n?(0,P.jsx)(u.xv,{style:(0,v.wh)([b.m_tab_calendar_localTime,D?b.m_tab_calendar_header_text:{}]),children:"\uff08\u5f53\u5730\u65f6\u95f4\uff09"}):null,d==f.zh.book?(0,P.jsx)(T,(0,o.Z)((0,o.Z)({},l?this.tipInfo["showDefault"]:h?this.tipInfo["error"]:_?{}:this.tipInfo["default"]),{},{isInit:this.state.isInit,excitationTips:k,showLocalTime:n,excitationTipsExposureLog:I})):null]}),(0,P.jsxs)(u.G7,{style:b.m_tab_wrapper,children:[(0,P.jsx)(M,(0,o.Z)((0,o.Z)({},this.props),{},{onTipshow:function(){try{e.onTipshow()}catch(e){(0,j.gp)({type:"ttd_dev_crn_bind_error",body:{title:"this.onTipshow error",content:"error === ".concat(JSON.stringify(e))}})}}})),i.length>5?(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(Z.Z,{style:(0,v.wh)([b.m_ceil_wrapper,S?{height:(0,v.Vh)(85),paddingTop:(0,v.Vh)(10)}:null,d==f.zh.book?S?{height:(0,v.Vh)(83),paddingTop:(0,v.Vh)(10)}:{height:(0,v.Vh)(73)}:null,h?{backgroundColor:"#fff",borderColor:"#fff"}:{}]),log:D?V:a,testID:D?N&&(0,z.kI)(N.key,N.params):s,onClick:this.props.onShowMore,activeOpacity:1,devTraceData:m,children:[(0,P.jsxs)(u.G7,{style:b.m_moreDate_text_wrapper,children:[(0,P.jsx)(u.xv,{style:(0,v.wh)([b.m_moreDate_text,{marginLeft:(0,v.Vh)(1)}]),children:"\u66f4\u591a"}),(0,P.jsx)(u.xv,{style:b.m_moreDate_text,children:"\u65e5\u671f"})]}),(0,P.jsx)(g.Z,{type:"arrow-right",color:"#006FF6",className:"icon",size:40})]})}):null]}),C?(0,P.jsxs)(u.G7,{style:b.m_reservation_tip_container,children:[(0,P.jsx)(u.G7,{style:b.m_reservation_tip_icon,children:(0,P.jsx)(g.Z,{type:"info",size:28})}),(0,P.jsx)(u.xv,{style:b.m_reservation_tip_text,children:"\u5f53\u524d\u65e5\u671f\u666f\u533a\u5c1a\u672a\u5f00\u653e\u552e\u5356\uff0c\u9700\u8981\u9884\u7ea6\u62a2\u7968\uff0c\u5f00\u653e\u552e\u5356\u540e\u5e73\u53f0\u5c06\u4f1a\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u62a2\u7968\u3002\u62a2\u7968\u5931\u8d25\u81ea\u52a8\u9000\u6b3e\uff0c\u62a2\u7968\u7ed3\u679c\u8bf7\u4ee5\u8ba2\u5355\u8be6\u60c5\u9875\u4e3a\u51c6\u3002"})]}):null]})}}]),n}(_)},91804:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(46241),l=n(71557),u=n(298),d=n(17366),p=n(9353),h=n(36833),f=(0,u.Z)((0,u.Z)((0,u.Z)({},h.aO),{},{m_tab_title_desc:{color:"rgb(17,17,17)",fontSize:(0,d.Vh)(14),marginLeft:(0,d.Vh)(10)}},h.BH),{},{m_text_thin:{fontSize:(0,d.Vh)(15)}}),m=(0,p.Z)(f),v=n(59201),_=n(81876),g=n(45023),y=n(56034),x=n(56569),k=n(27097),b=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,g.Z)((0,_.Z)(o),"state",void 0),(0,g.Z)((0,_.Z)(o),"poplayerHeight",.8*x.Db.get("window").height-x.iO),o.state={choicePeopleId:e.choicePeopleId},o.handleClickHelpInfo=o.handleClickHelpInfo.bind((0,_.Z)(o)),o}return(0,o.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.choicePeopleId;t!==this.state.choicePeopleId&&this.setState({choicePeopleId:t})}},{key:"selectCeil",value:function(e){var t=this.props,n=t.dataList,i=t.peopleGrayProperty,o=e.peopleId,r=this.state.choicePeopleId;if(i[o])return this.toast.show("\u8be5\u4eba\u7fa4\u65e0\u6cd5\u4e0e\u5176\u4ed6\u5df2\u9009\u9879\u6216\u65e5\u671f\u7ec4\u5408\u3002");if(n.length>1){var a=o==r?"":o;this.setState({choicePeopleId:a});var s=this.props.onClick;s&&s(a)}}},{key:"handleClickHelpInfo",value:function(){var e=this.props,t=e.dataList,n=e.peoplePropertiesUnable;(0,k.Z)({dataList:t,peoplePropertiesUnable:n})}}]),n}(y.ZP),Z=n(23033),I=n(2269),w=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.titleText,i=t.dataList,o=t.choicePeopleId,r=t.peopleGrayProperty,a=t.peoplePropertiesUnable,u=t.propertyClickLog,p=t.peopleExposureLog,h=t.popClickLog,f=t.thinTitle;return(0,I.jsxs)(s.G7,{style:m.m_tab_ceil,testID:p,children:[(0,I.jsxs)(v.Z,{style:m.m_tab_title,onClick:this.handleClickHelpInfo,log:h,children:[(0,I.jsx)(s.xv,{style:(0,d.wh)([m.m_tab_title_text,f?m.m_text_thin:{}]),children:n}),!(!a||!a.tip)&&(0,I.jsx)(s.xv,{style:m.m_tab_title_desc,children:a.tip}),(0,I.jsx)(l.Z,{type:"help",color:"rgb(17,17,17)",className:"m_title_icon",size:32,style:m.m_icon_center})]}),(0,I.jsx)(s.G7,{style:m.m_tab,children:i&&i.length?i.map((function(t,n){var i=t.peopleId,a=t.peopleName,l=r[i],p=o==i;return(0,I.jsx)(c.Z,{id:i,isGray:l,isSelect:p,style:m.m_ceil_props,fstyle:Z.Y4,children:(0,I.jsx)(v.Z,{style:m.m_ceil_child,onClick:e.selectCeil.bind(e,t),log:u&&u({isSelect:o==i,pos:n+1}),children:(0,I.jsx)(s.xv,{style:(0,d.wh)([m.m_ceil_child_text,l?m.gray:{color:"rgb(17,17,17)"},p?m.active:{}]),children:a})})},i)})):null})]})}}]),n}(b)},27097:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(2446),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(17366)),l=n(72747),u=n(56034),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"onClose",value:function(){i.ZP.hide("peopleHelpInfoPopLayer")}}]),n}(u.ZP),p=n(298),h=n(9353),f={m_help_info:{paddingLeft:(0,c.Vh)(16),paddingRight:(0,c.Vh)(16),paddingBottom:(0,c.Vh)(9)},m_help_info_border:(0,p.Z)((0,p.Z)({},(0,c.Cg)({direction:"top",width:1,style:"solid",color:"#ededed"})),{},{paddingTop:20,marginTop:20}),m_help_info_name:{color:"#333",fontWeight:"bold",fontSize:(0,c.Vh)(15),flex:1,lineHeight:(0,c.Nv)(21)},m_help_info_desc:{display:"flex",flexDirection:"row",marginTop:(0,c.Vh)(8)},m_help_info_item:{marginTop:(0,c.Vh)(20)},m_help_info_text:{fontSize:(0,c.Vh)(14),lineHeight:(0,c.Nv)((0,c.Vh)(22)),color:"#333",wordBreak:"break-all"},m_help_info_wrapper:{flexDirection:"row",justifyContent:"space-between"},m_help_info_title:{color:"#333",fontWeight:"bold",fontSize:(0,c.Vh)(16)},m_help_header:{width:"100%",height:61,borderTopLeftRadius:8,borderTopRightRadius:8,borderColor:"#999",textAlign:"center",overflow:"hidden",position:"relative"},m_help_back_btn:{width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:8.5,left:4},m_help_header_title:{textAlign:"center",lineHeight:(0,c.Nv)(61),fontWeight:"700",fontSize:18,color:"#333"}},m=(0,h.Z)(f),v=n(2269),_=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"renderItem",value:function(e){var t=e.peopleId,n=e.peopleName,i=e.peopleDescStr,o=e.priceDesc;return(0,v.jsxs)(l.G7,{style:m.m_help_info_item,children:[(0,v.jsxs)(l.G7,{style:m.m_help_info_wrapper,children:[(0,v.jsx)(l.xv,{style:m.m_help_info_name,children:n}),!!o&&(0,v.jsx)(l.xv,{style:(0,c.wh)([m.m_help_info_name,{flex:0,marginLeft:(0,c.Vh)(16)}]),children:o})]}),(0,v.jsx)(l.G7,{style:m.m_help_info_desc,children:(0,v.jsx)(l.xv,{style:m.m_help_info_text,children:i})})]},t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataList,i=t.otherDataList,o=t.maxHeight;return n&&n.length>0?(0,v.jsxs)(l.G7,{style:(0,c.wh)([m.m_help_info,o?{maxHeight:o}:{}]),children:[n.map((function(t){return e.renderItem(t)})),!!i&&i.length>0&&(0,v.jsxs)(l.G7,{style:m.m_help_info_border,children:[(0,v.jsx)(l.xv,{style:m.m_help_info_title,children:"\u4ee5\u4e0b\u7968\u8bf7\u81f3\u666f\u533a\u5b98\u65b9\u6e20\u9053\u8d2d\u4e70\u6216\u9884\u7ea6"}),i.map((function(t){return e.renderItem(t)}))]})]}):null}}]),n}(d),g=n(56569),y=n(99739),x=n(39140),k=(0,y.ZP)();function b(e){var t=e.dataList,n=e.peoplePropertiesUnable,o=void 0===n?{}:n,r=e.title,a=void 0===r?"":r,s=.8*g.Db.get("window").height-g.iO;i.ZP.show({props:{name:"peopleHelpInfoPopLayer",title:a||"\u4f7f\u7528\u4eba\u7fa4\u8bf4\u660e",isOpened:!0,needSave:!0,isShowHeader:!0,maxHeight:s,minHeight:.5*s,contentMaxHeight:k.platform==x.NX.Mini?s-((0,g.cY)()?(0,c.Vh)(24):0)-44:0},child:_,childProps:{dataList:t,otherDataList:o.info,maxHeight:k.isInMini?s-80:0}})}},2077:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(298),o=n(57042),r=n(24460),a=n(21867),s=n(86066),c=(n(90201),n(72747)),l=n(81876),u=n(45023),d=n(56034),p=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"state",void 0),i.state={packageIntroduction:e.packageIntroduction},i}return(0,r.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.packageIntroduction!=this.state.packageIntroduction&&this.setState({packageIntroduction:""},(function(){t.setState({packageIntroduction:e.packageIntroduction})}))}},{key:"onClick",value:function(e,t){var n=this.props.onChooseSaleProperty;n&&n(t,e)}}]),n}(d.ZP),h=n(92954),f=n.n(h),m={show:function(e){e&&e.urls&&e.urls.length>0&&f().previewImage({urls:e.urls})},showNewGalleryBrowser:function(e){},renderPhotoBrowser:function(e){return null}},v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,o.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,l.Z)(i),"state",void 0),(0,u.Z)((0,l.Z)(i),"isNewCarItems",void 0),(0,u.Z)((0,l.Z)(i),"selectCeil",(function(e,t){var n=i.props,o=n.dataList,r=n.grayPropertys,a=n.grayClickToast,s=i.state.selectPropertyId,c=e.salesPropertyValueId;if(r[c])return a&&i.toast.show("\u8be5\u9879\u65e0\u6cd5\u4e0e\u5176\u4ed6\u5df2\u9009\u9879\u6216\u65e5\u671f\u7ec4\u5408\u3002");if(o.length>1){i.setState({selectPropertyId:c==s?"":c});var l=i.props.onClick;l&&l(c,t)}}));var r=e.parentId,a=e.isNewGuideSku;return i.state={selectPropertyId:e.selectPropertyId,showPhoto:!1,configs:{}},i.isNewCarItems=297==r&&a,i}return(0,r.Z)(n,[{key:"handleClickPhoto",value:function(e){var t=this;if(e&&0!=e.length){var n=e.map((function(e){return{imageUrl:e,imageThumbnailUrl:"",imageTitle:"",imageDescription:"",name:"",url:e}})),i={buChanel:"activity",showPhotoIndex:0,items:n,urls:(n||[]).map((function(e){return e.url})),setShowPhoto:function(){t.setState({configs:{items:n,onBigPhotoHide:function(){setTimeout((function(){t.setState({showPhoto:!1})}),300)},showPhotoIndex:0,isThumbnailModel:!1},showPhoto:!0})}};m.show(i)}}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectPropertyId;t!==this.state.selectPropertyId&&this.setState({selectPropertyId:t})}}]),n}(d.ZP),_=n(46241),g=n(71557),y=n(36833),x=n(59201),k=n(17366),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,r.Z)(n)}(d.ZP),Z=n(9353),I=(0,Z.Z)({m_car_info_card:(0,i.Z)((0,i.Z)((0,i.Z)({backgroundColor:"#fff"},k.xI),(0,k.WB)((0,k.Vh)(16))),(0,k.yp)((0,k.Vh)(12))),m_small_car_info_card:{backgroundColor:"#f7f7f7"},m_selected_car_info_card:{backgroundColor:"#FFF8F2",borderRadius:(0,k.Vh)(4)},m_car_img_wrapper:{width:(0,k.Vh)(120),height:(0,k.Vh)(64),marginRight:(0,k.Vh)(8)},m_car_img:{width:(0,k.Vh)(120),height:(0,k.Vh)(64)},m_car_info_wrapper:(0,i.Z)((0,i.Z)({flex:1},k.i3),{},{width:0}),m_car_name:{fontFamily:"PingFangSC-Medium",fontSize:(0,k.Vh)(17),color:"#333"},m_car_same_level:(0,i.Z)({fontSize:(0,k.Vh)(12),color:"#333"},(0,k.dX)((0,k.Vh)(4))),m_car_extra_info:(0,i.Z)({},k._),m_prefix_text:{fontSize:(0,k.Vh)(12),color:"#333",marginRight:(0,k.Vh)(2)},m_count_text:{fontSize:(0,k.Vh)(12),color:"#333",fontWeight:"bold"},m_add_text:(0,i.Z)({fontSize:(0,k.Vh)(12),color:"#333"},(0,k.oM)((0,k.Vh)(4))),m_split_line:(0,i.Z)({fontSize:(0,k.Vh)(12),color:"#DADFE6"},(0,k.oM)((0,k.Vh)(8))),m_car_tip:{marginTop:(0,k.Vh)(4),fontSize:(0,k.Vh)(12),color:"#aaa"}}),w=I,S=n(33392),P=function(e){return e[e["small"]=0]="small",e[e["normal"]=1]="normal",e[e["selected"]=2]="selected",e}(P||{}),T=n(2269),C=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.type,i=e.carInfo,o=n===P.small,r=n===P.selected,a=i||{},s=a.carImg,l=void 0===s?"":s,u=a.carName,d=void 0===u?"":u,p=a.canChangeLuggage,h=a.luggageNum,f=void 0===h?0:h,m=a.passengerNum,v=void 0===m?0:m,_=a.sameLevelCars,y=void 0===_?[]:_;return(0,T.jsxs)(c.G7,{style:(0,k.wh)([w.m_car_info_card,o?w.m_small_car_info_card:{},r?w.m_selected_car_info_card:{},t||{}]),children:[(0,T.jsx)(c.G7,{style:(0,k.wh)([w.m_car_img_wrapper]),children:(0,T.jsx)(S.Z,{url:l,width:w.m_car_img.width,height:w.m_car_img.height})}),(0,T.jsxs)(c.G7,{style:w.m_car_info_wrapper,children:[(0,T.jsx)(c.xv,{style:w.m_car_name,children:d}),y.length>0&&(0,T.jsx)(c.xv,{style:(0,k.wh)([w.m_car_same_level]),numberOfLines:1,children:"".concat(y[0],"\u7b49\u540c\u7ea7\u8f66")}),(0,T.jsxs)(c.G7,{style:(0,k.wh)([w.m_car_extra_info]),children:[!o&&(0,T.jsx)(c.xv,{style:w.m_prefix_text,children:"\u6700\u591a\u53ef\u4e58\u5750"}),(0,T.jsx)(g.Z,{type:"pepoplenum",size:24,color:"#333"}),(0,T.jsx)(c.xv,{style:(0,k.wh)([w.m_count_text]),children:"x".concat(v)}),(0,T.jsx)(c.xv,{style:w.m_add_text,children:"+"}),(0,T.jsx)(g.Z,{type:"luggage",size:24,color:"#333"}),(0,T.jsx)(c.xv,{style:(0,k.wh)([w.m_count_text]),children:"x".concat(f)})]}),!o&&(!f||p)&&(0,T.jsx)(c.xv,{style:w.m_car_tip,children:"".concat(f?"":"\u4e0d\u53ef\u643a\u5e2624\u5bf8\u53ca\u4ee5\u4e0a\u884c\u674e").concat(!f&&p?"\u3002":"").concat(p?"\u6bcf\u51cf\u5c111\u4f4d\u4e58\u5ba2\uff0c\u53ef\u589e\u52a01\u4e2a24\u5bf8\u884c\u674e":"")})]})]})}}]),n}(b),D=n(50738),R=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.titleText,o=t.dataList,r=t.url,a=t.selectPropertyId,s=t.grayPropertys,l=t.propertyClickLog,u=t.grayClickToast,d=t.selectStyle,p=t.isAct,h=t.traceData,f=t.fstyle,v=void 0===f?{}:f,b=t.ceilfstyle,Z=void 0===b?{}:b,I=t.parentId,w=t.thinTitle,S=t.smallTitle,R=t.isPack3MultiSale,j=t.isPack3SingleSale,N=t.isPack3DiffDate,V=t.isPack3SameDateValid,L=t.ticketName,E=t.notFirst,A=t.isNewGuideSku,F=t.carModeExpoLog,M=t.CarItems,O=this.state,B=O.showPhoto,z=O.configs,H=(0,k.Ec)(y.ZP,v),U=o&&o.length?o.map((function(t,i){var o=s[t.salesPropertyValueId],r=a==t.salesPropertyValueId;return t.hide?null:(0,T.jsx)(_.Z,{id:t.salesPropertyValueId,isSelect:r,isGray:o,style:(0,k.wh)([H.m_ceil_props,p?{marginRight:(0,k.Vh)(12)}:{},A?{marginRight:(0,k.Vh)(8),marginBottom:(0,k.Vh)(8)}:{}]),hideSelectIcon:!u,isAct:p,fstyle:Z,children:(0,T.jsx)(x.Z,{style:H.m_ceil_child,onClick:e.selectCeil.bind(e,t,i),log:l&&l({selectPropertyId:a,optionid:t.salesPropertyValueId,pos:i+1,parentId:I}),devTraceData:h&&h(t.salesPropertyValueName,n),children:(0,T.jsx)(c.xv,{style:(0,k.wh)([H.m_ceil_child_text,o?H.gray:{color:"rgb(17,17,17)"},r?d||H.active:{}]),children:t.salesPropertyValueName})})},t.salesPropertyValueId)})):null,G=o.find((function(e){return a==e.salesPropertyValueId}));return(0,T.jsxs)(c.G7,{style:(0,k.wh)([H.m_tab_ceil,R?H.m_tab_ceil_pack3:null,N?H.m_tab_ceil_pack3_diff_date:null,V?H.m_tab_ceil_pack3_same_date_valid:null,A?H.m_tab_ceil_guide:null]),children:[!!n&&(0,T.jsxs)(c.G7,{style:(0,k.wh)([H.m_tab_title,R?H.m_tab_title_pack3_multi:{},j?H.m_tab_title_pack3_single:{},N?H.m_tab_title_pack3_diff_date:{},V?H.m_tab_title_pack3_same_date_valid:{},E?H.m_tab_title_pack3_not_first:{},A?H.m_tab_title_guide:{}]),children:[(0,T.jsx)(c.xv,{style:(0,k.wh)([H.m_tab_title_text,w?H.m_text_thin:{},S?H.m_text_small:{}]),children:L?"".concat(L,"\xb7").concat(n):n}),r&&r.length>0?(0,T.jsx)(x.Z,{style:H.m_icon_center,onClick:this.handleClickPhoto.bind(this,r),children:(0,T.jsx)(g.Z,{type:"help",color:"#333333",className:"m_title_icon",size:32})}):null]}),(0,T.jsx)(c.G7,{style:H.m_tab,testID:this.isNewCarItems?F&&(0,D.kI)(F.key,F.params):void 0,children:this.isNewCarItems?!!M&&(0,T.jsx)(M,(0,i.Z)((0,i.Z)({},this.props),{},{selectCeil:this.selectCeil.bind(this)})):U}),!(null===G||void 0===G||!G.carInfo)&&!A&&(0,T.jsxs)(c.G7,{style:H.m_option_part_car,children:[(0,T.jsx)(c.G7,{children:(0,T.jsx)(c.xv,{style:H.m_car_card_select,children:"\u5df2\u9009\u8f66\u578b"})}),(0,T.jsx)(C,{carInfo:G.carInfo,type:P.selected})]}),B?m.renderPhotoBrowser(z):null]})}}]),n}(v),j={m_tab_sale:{paddingBottom:(0,k.Vh)(40)},m_tab_sale_pack3_multi:{paddingBottom:(0,k.Vh)(20)},m_tab_sale_pack3_single:{paddingBottom:0},m_tab_sale_pack3_diff_date:{paddingBottom:(0,k.Vh)(20)},m_tab_sale_pack3_same_date_valid:{paddingBottom:(0,k.Vh)(20)}},N=(0,Z.Z)(j),V=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e,t,n,o=this,r=this.props,a=r.saleProperties,s=r.grayPropertys,l=r.selectPropertyIds,u=r.propertyClickLog,d=r.grayClickToast,p=void 0===d||d,h=r.selectStyle,f=r.setRef,m=r.style,v=r.isAct,_=r.promotionInfo,g=r.promotionClickLog,y=r.traceData,x=r.ceilfstyle,b=r.thinTitle,Z=r.smallTitle,I=r.isPack3MultiSale,w=r.isPack3SingleSale,S=r.isPack3DiffDate,P=r.isPack3SameDateValid,C=r.saleExposureLog,D=r.ticketName,j=r.PackageDescription,V=r.PromotionTip,L=r.isNewGuideSku,E=r.isCarExpanded,A=r.showAllCarItems,F=r.carModeExpoLog,M=r.moreCarExpoLog,O=r.moreCarClickLog,B=r.carModeCarCardSlideClickLog,z=r.CarItems,H=this.state.packageIntroduction,U=a.map((function(e,t){return e.hide?null:(0,T.jsx)(c.G7,{activeOpacity:1,ref:function(e){return f&&f("sale_property_".concat(t),e)},collapsable:!1,children:(0,T.jsx)(R,{thinTitle:b,smallTitle:Z,isPack3MultiSale:I,isPack3SingleSale:w,isPack3DiffDate:S,isPack3SameDateValid:P,parentId:e.salesPropertyId,titleText:e.salesPropertyName,dataList:e.salesPropertyValues,grayPropertys:s,grayClickToast:p,selectStyle:h,url:e.salesPropertyImgUrls,selectPropertyId:l[t],propertyClickLog:u,onClick:o.onClick.bind(o,t),isAct:v,traceData:y,ceilfstyle:x,ticketName:D,notFirst:t>0&&(S||P),isNewGuideSku:L,isCarExpanded:E,showAllCarItems:A,carModeExpoLog:F,moreCarExpoLog:M,moreCarClickLog:O,carModeCarCardSlideClickLog:B,CarItems:z},e.salesPropertyName)})})),G=null!==_&&void 0!==_&&null!==(e=_.labels)&&void 0!==e&&e[0]?"\u53ef\u4eab".concat(null===_||void 0===_||null===(t=_.labels)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.text,"\u7b49\u4f18\u60e0\u4fc3\u9500\uff08\u5171").concat(null===_||void 0===_||null===(n=_.labels)||void 0===n?void 0:n.length,"\u4e2a\uff09"):"";return(0,T.jsxs)(c.G7,{testID:C,children:[!!G&&V&&(0,T.jsx)(V,(0,i.Z)((0,i.Z)({tip:G},(null===_||void 0===_?void 0:_.layerData)||{}),{},{clickLog:g})),(0,T.jsx)(c.G7,{style:(0,k.wh)([N.m_tab_sale,m,I?N.m_tab_sale_pack3_multi:null,w?N.m_tab_sale_pack3_single:null,S?N.m_tab_sale_pack3_diff_date:null,P?N.m_tab_sale_pack3_same_date_valid:null]),children:U}),!!H&&j&&(0,T.jsx)(j,{description:H})]})}}]),n}(p)},36833:function(e,t,n){"use strict";n.d(t,{BH:function(){return a},aO:function(){return s}});var i=n(298),o=n(17366),r=n(9353),a={m_ceil_props:{fontSize:(0,o.Vh)(14),marginRight:(0,o.Vh)(8),marginBottom:(0,o.Vh)(10)},m_ceil_child:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",padding:(0,o.Vh)(10.5),paddingLeft:(0,o.Vh)(12),paddingRight:(0,o.Vh)(12)},gray:{color:"rgb(197,197,197)"},m_ceil_child_text:{fontSize:(0,o.Vh)(13),lineHeight:(0,o.Nv)((0,o.Vh)(17))},active:{color:"#111"}},s={m_tab_ceil:{paddingLeft:(0,o.Vh)(16),paddingRight:(0,o.Vh)(16),paddingBottom:(0,o.Vh)(12)},m_tab_ceil_pack3:{paddingBottom:0},m_tab_ceil_pack3_diff_date:{paddingBottom:0},m_tab_ceil_pack3_same_date_valid:{paddingBottom:0},m_tab_ceil_guide:{paddingBottom:0},m_tab_title:(0,i.Z)({display:"flex",flexDirection:"row",justifyContent:"flex-start",paddingTop:(0,o.Vh)(16),paddingBottom:(0,o.Vh)(16),alignItems:"center"},(0,o.ix)("border-box")),m_tab_title_pack3_multi:{paddingTop:(0,o.Vh)(20),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_single:{paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_diff_date:{paddingTop:(0,o.Vh)(8),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_same_date_valid:{paddingTop:(0,o.Vh)(8),paddingBottom:(0,o.Vh)(8)},m_tab_title_pack3_not_first:{paddingTop:(0,o.Vh)(20)},m_tab_title_guide:{paddingBottom:(0,o.Vh)(12)},m_icon_center:{marginLeft:(0,o.Vh)(5),display:"flex",alignItems:"center",justifyContent:"center"},m_tab_title_text:{color:"#111",fontSize:(0,o.Vh)(17),fontWeight:(0,o.Ue)("500"),lineHeight:(0,o.Nv)((0,o.Vh)(21))},m_title_icon:{marginLeft:(0,o.Vh)(5)},m_tab:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginBottom:(0,o.Vh)(-10)},m_saleproperty_item:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:(0,o.Vh)(15),paddingRight:(0,o.Vh)(15)}},c=(0,i.Z)((0,i.Z)((0,i.Z)({},s),{},{m_option_part_car:{marginTop:16},m_car_card_select:{color:"#999",fontSize:14,lineHeight:(0,o.Nv)(18),marginBottom:8}},a),{},{m_text_thin:{fontSize:(0,o.Vh)(15)},m_text_small:{fontSize:(0,o.Vh)(15),fontWeight:(0,o.Ue)("500"),lineHeight:(0,o.Nv)((0,o.Vh)(19))}});t["ZP"]=(0,r.Z)(c)},43926:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(56034),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(c.ZP),u=n(298),d=n(9353),p=n(17366),h=n(56569),f={m_sku_header:{paddingLeft:(0,p.Vh)(16),paddingRight:(0,p.Vh)(16),paddingTop:(0,p.Vh)(18),paddingBottom:(0,p.Vh)(12)},m_header_title:{display:"flex",flexDirection:"row",justifyContent:"space-between"},m_sku_header_hide:{paddingTop:(0,p.Vh)(0),paddingBottom:(0,p.Vh)(0)},m_sku_header_text:(0,u.Z)({flex:1,color:"#111",fontFamily:"PingFangSC-Medium",fontSize:(0,p.Vh)(17),letterSpacing:(0,p.Vh)(-.28),fontWeight:"bold",lineHeight:(0,p.Nv)((0,p.Vh)(21))},(0,p.Sf)(2)),m_sku_header_text_book:{color:"rgb(17,17,17)",fontFamily:"PingFangSC-Medium",fontSize:(0,p.Vh)(17),letterSpacing:(0,p.Vh)(-.24),fontWeight:"bold",lineHeight:(0,p.Nv)((0,p.Vh)(21))},m_sku_header_icon:{width:(0,p.Vh)(22),height:(0,p.Vh)(22),marginTop:(0,p.Vh)(-8),marginLeft:(0,p.Vh)(16),alignItems:"center",justifyContent:"center"},m_sku_header_border:(0,u.Z)((0,u.Z)({},(0,p.Cg)({direction:"bottom",width:1/(0,h.md)(),style:"solid",color:"rgb(235,239,245)"})),{},{paddingBottom:(0,p.Vh)(12),paddingTop:(0,p.Vh)(16)}),m_header_people_desc:{display:"flex",flexDirection:"row",paddingTop:(0,p.Vh)(4)},m_sku_header_people_desc_text:{flex:1,fontSize:(0,p.Vh)(13),color:"#555",fontWeight:"normal",lineHeight:(0,p.Nv)((0,p.Vh)(17))}},m=(0,d.Z)(f),v=n(48501),_=n(59201),g=n(2269),y=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.ticketTitle,n=e.testID,i=e.usePage,o=e.closeClickLog,r=e.onPoplayerHide;return[v.zh.sku,v.zh.detail].includes(i)||i==v.zh.book&&t?(0,g.jsx)(s.G7,{style:(0,p.wh)([m.m_sku_header,v.zh.sku!=i||t?null:m.m_sku_header_hide,v.zh.book==i?m.m_sku_header_border:null]),children:(0,g.jsxs)(s.G7,{style:m.m_header_title,children:[t?v.zh.book!=i?(0,g.jsx)(s.xv,{style:m.m_sku_header_text,testID:n,numberOfLines:2,children:t}):(0,g.jsx)(s.xv,{style:m.m_sku_header_text_book,children:t}):(0,g.jsx)(s.xv,{style:m.m_sku_header_text}),v.zh.detail==i&&(0,g.jsx)(_.Z,{log:!!t&&o,onClick:r,style:m.m_sku_header_icon,children:(0,g.jsx)(s.JO,{type:"xclosed",color:"#111111",size:42})})]})}):null}}]),n}(l)},77138:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var i={},o={save:function(e){Object.assign(i,e)},load:function(e){return i[e]},clear:function(){i={}}}},46e3:function(e,t){"use strict";t["Z"]=function(){return{request:{key:"Holiday"},actionUrl:"/restapi/soa2/12378/json/getGeneralConfigData?key=Holiday"}}},14830:function(e,t,n){"use strict";n.d(t,{S5:function(){return h},Nq:function(){return f},Wy:function(){return m},Po:function(){return v},DW:function(){return _},eT:function(){return g},jh:function(){return y},pp:function(){return x},Gx:function(){return k},td:function(){return b},GJ:function(){return Z}});var i=n(45023),o=n(298),r=n(22276),a=n(48501),s=n(48830),c=n(99739),l=n(39140),u=n(28570),d=n(9304),p=n(46982),h=function(e,t){return e&&e.effectiveDateDesc?1!==e.useType&&"S"==t.priceMode?"":e.effectiveDateDesc:""},f=function(e){if(!e)return"";var t="",n=e.invalidDateDesc,i=e.countLimit;return n&&(t="\u4e0d\u53ef\u4f7f\u7528\u65e5\u671f\uff1a".concat(n)),i&&i>1&&(t+="".concat(t?"\uff0c":"","\u53ef\u4f7f\u7528").concat(i,"\u6b21")),t},m=function(e,t){var n=t.calendar,i=t.priceMode,o=t.productId,r=t.isPack3,s=t.hasSingleDateCalendar,c=function(t){return!!t.resources.find((function(t){return t.resourceId==(e.optid&&e.optid[0])}))},l=function(e){return!!e.resources.find((function(e){return e.productId==o}))};if(e.date){var u=n.find((function(t){return t.date==e.date}));t.isSaleOut=!u||!!u.disableText;var d=e.date;if(!u||c(u)||e.usePage!=a.zh.book&&e.aggregation)u||(e.date="");else if(e.isscan){var p=n.find((function(e){return c(e)}));e.date=p&&p.date||""}else{if(e.date="",!r&&l(u))return t.mainResourceChanged=!0,d;t.isSaleOut=!0}if(r&&!s&&e.usePage==a.zh.book){var h,f=e.boxMap,m=e.optid;null===(h=f[m[0]])||void 0===h||h.map((function(t){return t.date=e.date}))}return e.date}if(e&&(e.isscan||(r?!s:"U"===i))&&n.length>0){var v=n[0],_=n.find((function(e){return c(e)}));if(l(v)&&(_&&_.date)!==v.date&&e.isscan)return t.mainResourceChanged=!0,e.date=v.date;if(r&&e.usePage==a.zh.book){var g,y=e.boxMap,x=e.optid;null===(g=y[x[0]])||void 0===g||g.map((function(e){return e.date=_&&_.date||""}))}return e.date=_&&_.date||""}return""},v=function(e,t,n,i){var o,r,a,s,c=t.calendar,l=t.diffDateBoxResIds,u=t.firstLevelInfos,d=t.firstLevelMapSubResId,p=e.boxMap||{},h=[],f=l.find((function(e){return Object.keys(p).some((function(t){return t==e}))})),m=null===(o=p[f])||void 0===o?void 0:o.every((function(e){return!!e.date}));m?t.defaultDate=null===(s=p[f][0])||void 0===s?void 0:s.date:(u.forEach((function(e){var t=e.firstLevelId,o=d[t][0],r=c.find((function(e){return e.resources.some((function(e){return e.resourceId===o}))})),a={};n.find((function(e){return e.pack3ResourceInfos.find((function(e){return e.resourceId==f&&(a=e.subResourceInfos.find((function(e){return e.subResourceId==o}))),e.resourceId==f}))}));var s=r||{},l=s.date,u=void 0===l?"":l,p=i.find((function(e){return e.productId==a.subProductId}));h.push({resourceId:o,date:u,unitQuantity:a.unitQuantity,priceMode:(null===p||void 0===p?void 0:p.priceMode)||0})})),p[f]=h,t.defaultDate=null===(r=h[0])||void 0===r?void 0:r.date,Object.assign(e,{boxMap:p,isCrossDate:!0,date:(null===(a=h[0])||void 0===a?void 0:a.date)||""}))},_=function(e,t){var n,i=t.firstLevelInfos,o=t.calendar,a=t.firstLevelMapSaleProperties,s=t.firstLevelMapSelectedPropertyIds,c=[],l=[];i.forEach((function(e){var t=e.firstLevelId,n=a[t],i=s[t];c.push.apply(c,(0,r.Z)(n)),l.push.apply(l,(0,r.Z)(i))}));var u=(0,d.s)(c,l),p=null;u&&(p=o.find((function(e){return!!e.price}))||{}),e.date=(null===(n=p)||void 0===n?void 0:n.date)||""},g=function(e,t){var n=t.firstLevelInfos,i=t.firstLevelMapCalendar,o=t.firstLevelMapSaleProperties,r=t.firstLevelMapSelectedPropertyIds,a=[];n.forEach((function(t){var s=t.firstLevelId,c=t.priceMode,l=o[s],u=r[s],h=i[s],f=null;if(1===c){var m=(0,d.s)(l,u);m&&(f=h.find((function(e){return!!e.price}))||{},e.date=(0,p.br)(s,f,e,n))}a.push(s)})),e.firstLevelIds=a},y=function(e,t,n){var i=e.resourceInfos,o=e.packageInfos,r=[];return i&&o&&i.map((function(e){var s=o.find((function(t){return t.resourceInfos.length>0&&e.mixedIds&&e.mixedIds.includes(t.resourceInfos[0].resourceId)})),c=[a.zh.actSku,a.zh.dayplay,a.zh.actSkuInline].includes(t.usePage);if(s||c||t.aggregation&&t.usePage==a.zh.book){var l=(null===s||void 0===s?void 0:s.resourceInfos[0])||{},u={maxQuantity:c?99:l.maxQuantity||1,minQuantity:c?0:l.minQuantity||1,resourceName:e.resourceName,subName:l.subName,resourceDesc:e.peopleApplicableInfo.resourceDesc,shortResourceDesc:e.peopleApplicableInfo.shortResourceDesc,tags:l.tags||[],limitSaleDesc:l.limitSaleDesc,mixedIds:e.mixedIds,peoplePropertyId:e.peoplePropertyId};r.push(u),t&&t.count&&0==t.count.length&&t.count.push(l.minQuantity||u.minQuantity),"Stand"==e.templateSettingItemCode&&(null===i||void 0===i?void 0:i.length)>1&&n&&(n.isStandAndPeople=!0)}})),r},x=function(e,t){var n={},i={},o=null;return t&&t.length&&(o=t[0].subProductInfos),e.forEach((function(e){var t=e.productId,r=e.priceMode,a=(o||[]).find((function(e){return e.productId===t}));if(a){var s=a.usageTimeLimit;if(s){var c="",l=s.invalidDateDesc,u=s.countLimit,d=s.effectiveDateDesc,p=s.useType;d&&(n[t]=1!==p&&0===r?"":d),l&&(c="\u4e0d\u53ef\u4f7f\u7528\u65e5\u671f\uff1a".concat(l)),u&&u>1&&(c+="".concat(c?"\uff0c":"","\u53ef\u4f7f\u7528").concat(u,"\u6b21")),i[t]=c}else n[t]="",i[t]=""}})),{prodMapValidDesc:n,prodMapDisabledDateDesc:i}},k=function(e){return e&&e.effectiveDateDesc?1!==e.useType?"":e.effectiveDateDesc:""},b=function(e){var t=(0,s.zc)(),n=e.optid,i=e.token,o=e.spotid,r=e.poiid,a={};o&&(t+="scenicSpotId=".concat(o,"&"),a.scenicSpotId=o),r&&(t+="poiid=".concat(r,"&"),a.poiid=r),null!==n&&void 0!==n&&n.length&&(t+="resourceId=".concat(n[0],"&"),a.resourceId=n[0]),i&&(t+="token=".concat(encodeURIComponent(i),"&"),a.token=encodeURIComponent(i)),(0,c.ZP)().platform==l.NX.RN?(0,u.VF)("productSku",!0,a):(0,u.VF)(t,!0)},Z=function(e,t){t.subResFullInfo||(t.subResFullInfo={});var n=e||{},r=n.firstLevelInfos,a=void 0===r?[]:r,s=n.packageInfos,c=void 0===s?[]:s,l=n.boxProductInfos,u=void 0===l?[]:l,d=n.productInfos,p=void 0===d?[]:d;return u.map((function(e){e.pack3ResourceInfos.map((function(e){e.subResourceInfos.map((function(n){var r,s=n.subResourceId,l=n.subProductId,u=n.unitQuantity,d="";c.find((function(e){return e.resourceInfos.find((function(e){return e.resourceId==s&&(d=e.resourceName,!0)}))}));var h="",f="";a.find((function(e){return e.peopleGroupInfos.find((function(t){return!!t.productIds.includes(l)&&(h=e.name,f=e.id,!0)}))}));var m=p.find((function(e){return e.productId==n.subProductId}));t.subResFullInfo[s]={subResourceId:s,subProductId:l,unitQuantity:(0,o.Z)((0,o.Z)({},null===(r=t.subResFullInfo[s])||void 0===r?void 0:r.unitQuantity),{},(0,i.Z)({},e.resourceId,u)),resourceName:d,firstLevelName:h,firstLevelId:f,priceMode:(null===m||void 0===m?void 0:m.priceMode)||0}}))}))})),t.subResFullInfo}},55029:function(e,t,n){"use strict";n.d(t,{UE:function(){return p},AY:function(){return h},s2:function(){return f},iG:function(){return m},eJ:function(){return v}});var i=n(45023),o=n(298),r=n(32545),a=n(48501),s=n(37814),c=n(14830),l=n(92300),u=n(56569),d=n(61252),p=function(e){if(1!==e.length)return"";var t=e[0]||{},n=t.inventoryDesc,i=void 0===n?"":n,o=t.unAvailableReason,r=void 0===o?"":o;return r?"":i},h=function(e,t){if(null===e||void 0===e||!e.length)return t?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2";var n=e.every((function(e){return!!e.unAvailableReason}));if(!n)return"";for(var i,o=["poiClosed","soldOut","other"],r=function(t){var n=e.find((function(e){return e.unAvailableReason.key==o[t]}));if(n)return{v:n.unAvailableReason.value}},a=0;a<o.length;a++)if(i=r(a),i)return i.v;return""},f=function(e,t,n){return!!n||e==t},m=function(e,t){return t<e},v=function(e,t){var n,i=e.priceAndStockInfos,s=e.unavailableSaleDates,c=e.packageInfos,d=e.basicInfo,v=e.saleProperties,_=e.aggregations,g=e.cashBackInfos,y=e.resourceType,x=[],k=!1,b=!1,Z=[a.zh.sku,a.zh.detail,a.zh.book].includes(null===t||void 0===t?void 0:t.usePage),I=t&&t.optid&&t.optid[0],w=[2,3].includes(t.bizLineType)&&"2"==t.tooltipStyle;if(i&&i.length>0&&c){var S=[];v.forEach((function(e){e.salesProperty.hide&&e.salesPropertyValues.forEach((function(e){return S.push(e.salesPropertyId)}))}));var P=[];if(t.usePage==a.zh.book&&I)try{var T;P=c.find((function(e){return!!e.resourceInfos.find((function(e){return e.resourceId==I}))})).salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).filter((function(e){return!S.includes(e)}));var C=v.filter((function(e){return!e.salesProperty.hide}));1==(null===C||void 0===C?void 0:C.length)&&1==(null===C||void 0===C||null===(T=C[0])||void 0===T?void 0:T.salesPropertyValues.length)&&(P=[])}catch(e){console.log(e)}for(var D=i[0].date,R=i[i.length-1].date,j=(0,r.gw)(D,R),N=0,V=function(){var e,r,v,S=null===(e=i[N])||void 0===e?void 0:e.unAvailableReason,T=function(e){var t={date:D,inventoryNum:0,price:void 0,disableText:e,resources:[]};x.push(t)};if((null===(r=i[N])||void 0===r?void 0:r.date)!=D||S)if((null===(v=i[N])||void 0===v?void 0:v.date)==D&&S)T(S.value),N++;else if(s){var C=s.find((function(e){return e.date==D}));C&&T(C.unavailableSaleDesc)}else T(d.reservation?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2");else{var R=i[N],j={date:D,price:(0,u.rI)()?" ":(R.hasOwnProperty("price")?R.price:R.minPrice)||0,hideFrom:![a.zh.actSku,a.zh.dayplay,a.zh.actSkuInline].includes(t.usePage)||w,disableText:"",resources:[],packages:[],hasReservation:!1};n=Math.min("number"===typeof n?n:1/0,"number"===typeof j.price?j.price:1/0);for(var V=[],L=function(){var e,n=R.packagePriceAndStockInfos[E],i=n.packageId,o=n.resourcePriceAndStockInfos,r=(c||[]).find((function(e){return e.packageId==i}));null!==r&&void 0!==r&&r.resourceInfos&&(null===(e=j.packages)||void 0===e||e.push({packageId:r.packageId,maxQuantity:r.maxPackageSaleCount,minQuantity:r.minPackageSaleCount}),r.resourceInfos.forEach((function(e){var n=o.find((function(n){return n.resourceId==e.resourceId&&(t.usePage!=a.zh.book||!!n.inventoryNum)})),i=g&&g.find((function(e){return e.resourceId==(null===n||void 0===n?void 0:n.resourceId)})),s=r.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId}));if(e&&n&&(a.zh.book!=t.usePage||P.every((function(e){return s.includes(e)})))){var c=n.hasOwnProperty("price")?n.price:n.salePrice,l=n.salePrice,p=n.hasOwnProperty("marketPrice")?n.marketPrice:0;!k&&Z&&(k=m(l,c)),j.resources.push({productId:r.productId||d.productId,inventoryNum:n.inventoryNum,maxQuantity:n.maxQuantity,minQuantity:n.minQuantity,resourceName:e.resourceName,subName:e.subName,resourceId:n.resourceId,salePrice:(0,u.rI)()?" ":"dayplay"===(null===t||void 0===t?void 0:t.usePage)?c:l,marketPrice:(0,u.rI)()?" ":p,promotionPrice:(0,u.rI)()?" ":c,feeFree:e.feeFree,tags:e.tags||[],cashBackAmount:n.cashBackAmount,cashBackInfo:i,templateSettingItemCode:e.templateSettingItemCode,canBuyAlone:e.canBuyAlone,unAvailableReason:!1===n.available?n.unAvailableReason:null,unitSaleCount:e.unitSaleCount,inventoryDesc:n.inventoryDesc||"",canReserve:1===n.priceDateType}),s.forEach((function(e){r.productId||V.includes(e)||V.push(e)}))}})))},E=0;E<R.packagePriceAndStockInfos.length;E++)L();var A=j.resources;if(_||(A=A.filter((function(e){return e.productId==d.productId}))),(6==y||!_||_&&x.length<30)&&(j.invenText=p(A)),j.disableText=h(A,!!d.reservation),[a.zh.sku,a.zh.detail].includes(t.usePage)){var F,M,O=!0;j.resources.map((function(e){!e.unAvailableReason&&f(e.productId,d.productId,_)&&(F&&e.promotionPrice==F||(O=!F,F=(0,u.rI)()?" ":Math.min(e.promotionPrice,"number"==typeof F?F:1/0),M=(0,u.rI)()?" ":Math.min(e.salePrice,"number"==typeof M?M:1/0)),e.canReserve&&(j.hasReservation=!0,b=!0))})),j=(0,o.Z)((0,o.Z)({},j),{},{price:F,hideFrom:O,isPromotionPrice:M!=F})}else if(t.usePage==a.zh.book)if(_)j.resources.map((function(e){e.unAvailableReason||e.canReserve&&(j.hasReservation=!0,b=!0)}));else{var B=j.resources.find((function(e){return e.resourceId==I}));B?(j.price=(0,u.rI)()?" ":B.promotionPrice,j.isPromotionPrice=B.salePrice!=B.promotionPrice,B.canReserve&&(j.hasReservation=!0,b=!0)):P.some((function(e){return!V.includes(e)}))&&(j.price=null)}x.push(j),N++}var z=(0,l.l)(D);z=z.add(1,"day"),D=z.format("YYYY-MM-DD")},L=0;L<j;L++)V()}return{calendar:x,hasPromotion:k,hasReservation:b,actMinPrice:n}},_=function(e,t,n,i){var s=e.priceAndStockInfos,c=e.unavailableSaleDates,d=e.packageInfos,v=e.basicInfo,_=e.saleProperties,g=e.aggregations,y=e.cashBackInfos,x=i.isUseDateSame,k=i.firstLevelMapSubResId,b=i.firstLevelInfos,Z=i.boxResIdMapSubResId,I=[],w={},S=!1,P=t&&t.optid&&t.optid[0],T=t.usePage==a.zh.book&&g,C=d;if(n.length>0&&(C=d.filter((function(e){return n.includes(e.packageId)}))),s&&s.length>0&&d){var D=[];_.forEach((function(e){e.salesProperty.hide&&e.salesPropertyValues.forEach((function(e){return D.push(e.salesPropertyId)}))}));var R=[];if(t.usePage==a.zh.book&&P)try{var j;R=d.find((function(e){return!!e.resourceInfos.find((function(e){return e.resourceId==P}))})).salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).filter((function(e){return!D.includes(e)}));var N=_.filter((function(e){return!e.salesProperty.hide}));1==(null===N||void 0===N?void 0:N.length)&&1==(null===N||void 0===N||null===(j=N[0])||void 0===j?void 0:j.salesPropertyValues.length)&&(R=[])}catch(e){console.log(e)}for(var V=s[0].date,L=s[s.length-1].date,E=(0,r.gw)(V,L),A=0,F=function(){var e,n,i,r=null===(e=s[A])||void 0===e?void 0:e.unAvailableReason,d=function(e){var t={date:V,inventoryNum:0,price:void 0,disableText:e,resources:[]};I.push(t)};if((null===(n=s[A])||void 0===n?void 0:n.date)!=V||r)if((null===(i=s[A])||void 0===i?void 0:i.date)==V&&r)d(r.value),A++;else if(c){var _=c.find((function(e){return e.date==V}));_&&d(_.unavailableSaleDesc)}else I.length&&d(v.reservation?"\u4e0d\u53ef\u7ea6":"\u4e0d\u53ef\u8ba2");else{for(var D=s[A],j={date:V,price:(0,u.rI)()?" ":D.minPrice||0,hideFrom:!0,disableText:"",resources:[]},N=[],L=function(){var e=D.packagePriceAndStockInfos[E],t=e.packageId,n=e.resourcePriceAndStockInfos,i=(C||[]).find((function(e){var n=e.packageId;return n==t}));null!==i&&void 0!==i&&i.resourceInfos&&i.resourceInfos.forEach((function(e){var t=n.find((function(t){return t.resourceId==e.resourceId&&!!t.inventoryNum})),o=y&&y.find((function(e){return e.resourceId==(null===t||void 0===t?void 0:t.resourceId)})),r=i.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId}));if(e&&t){var a=t.hasOwnProperty("price")?t.price:t.salePrice,s=t.salePrice,c=t.hasOwnProperty("marketPrice")?t.marketPrice:0;S||(S=m(s,a)),j.resources.push({productId:i.productId||v.productId,inventoryNum:t.inventoryNum,maxQuantity:t.maxQuantity,minQuantity:t.minQuantity,resourceName:e.resourceName,subName:e.subName,resourceId:t.resourceId,salePrice:(0,u.rI)()?" ":s,marketPrice:(0,u.rI)()?" ":c,promotionPrice:(0,u.rI)()?" ":a,feeFree:e.feeFree,tags:e.tags||[],cashBackAmount:t.cashBackAmount,cashBackInfo:o,templateSettingItemCode:e.templateSettingItemCode,canBuyAlone:e.canBuyAlone,unAvailableReason:!1===t.available?t.unAvailableReason:null,unitSaleCount:e.unitSaleCount,inventoryDesc:t.inventoryDesc||""}),r.forEach((function(e){i.productId||N.includes(e)||N.push(e)}))}}))},E=0;E<D.packagePriceAndStockInfos.length;E++)L();x&&b.forEach((function(e){var t={date:V,resources:[],disableText:""},n=e.firstLevelId,i=k[n],o=j.resources.map((function(e){return e.resourceId})),r=[];o.forEach((function(e){var t=Z[e];t?t.forEach((function(e){i&&i.includes(e)&&r.push(e)})):r.push(e)})),r=Array.from(new Set(r)),t.resources=r.map((function(e){return{resourceId:e,productId:v.productId}})),w[n]?w[n].push(t):w[n]=[t]}));var F=j.resources;if(g||(F=F.filter((function(e){return e.productId==v.productId}))),(!g||g&&I.length<30)&&(j.invenText=p(F)),j.disableText=h(F,!!v.reservation),[a.zh.sku,a.zh.detail].includes(t.usePage)){var M,O,B=!0;j.resources.map((function(e){e.unAvailableReason||!f(e.productId,v.productId,g)||M&&e.promotionPrice==M||(B=!M,M=(0,u.rI)()?" ":Math.min(e.promotionPrice,"number"==typeof M?M:1/0),O=(0,u.rI)()?" ":Math.min(e.salePrice,"number"==typeof O?O:1/0))})),j=(0,o.Z)((0,o.Z)({},j),{},{price:M,hideFrom:B,isPromotionPrice:O!=M})}else if(t.usePage==a.zh.book&&!T){var z=j.resources.find((function(e){return e.resourceId==P}));z?(j.price=(0,u.rI)()?" ":z.promotionPrice,j.isPromotionPrice=z.salePrice!=z.promotionPrice):R.some((function(e){return!N.includes(e)}))&&(j.price=null)}(j.resources.length||I.length)&&I.push(j),A++}var H=(0,l.l)(V);H=H.add(1,"day"),V=H.format("YYYY-MM-DD")},M=0;M<E;M++)F()}return{calendar:I,hasPromotion:S,firstLevelMapCalendar:w}},g=function(e,t,n){var i={},o=!1,r=n.firstLevelInfos,a=n.firstLevelMapPackageId;return r.forEach((function(r){var s=r.firstLevelId,c=a[s],l=_(e,t,c,n),u=l.calendar,d=l.hasPromotion;i[s]=u,o=o||d})),{firstLevelMapCalendar:i,hasPromotion:o}};t["ZP"]=function(e,t){var n=t.getProductPriceCalendar,o=t.getProductInfo,r=t.getScenicSpotInfo,l=null;o&&o.length>0&&(l=o[0].usageTimeLimit);var p={};if(n){var h=n.basicInfo,f=n.priceAndStockInfos,m=n.aggregations,y=n.saleProperties,x=n.peopleProperties,k=n.resourceInfos,b=(n.extendInfos,n.resourceType),Z=n.boxProductInfos,I=n.productInfos,w=n.firstLevelInfos;if(h&&(!Z||!Z.length)&&f){var S,P;p.isServerData=(0,u.rI)(),p.productId=h.productId,p.priceMode=h.priceMode,p.reservation=!!h.reservation,p.showLocalTime=!h.inChina,p.aggregation=e.aggregation=!!m,p.validDesc=(0,c.S5)(l,h),p.disabledDateDesc=(0,c.Nq)(l),p.hasRecommend=(null===k||void 0===k?void 0:k.length)>1||e.aggregation&&e.usePage==a.zh.book,p.dateRecord=e.date?(0,i.Z)({},e.date,!0):{},p.isPeopleAggregations=m&&!!x,p.peoplePropertiesUnable={tip:"",info:[]},r&&(e.spotid=r[0].id),p.peopleProperties=(0,s.BN)(n,p.peoplePropertiesUnable),p.peopleGrayProperty=(0,s._Z)(p.peopleProperties),p.choicePeopleId=(0,s.$X)(p.peopleProperties);var T=v(n,e),C=T.calendar,D=T.hasPromotion,R=T.hasReservation,j=T.actMinPrice;p.calendar=C,p.hasPromotion=D,p.hasReservation=R,p.actMinPrice=j;var N=y.some((function(e){return e.salesPropertyValues.length>0&&!e.salesProperty.hide}));e.usePage==a.zh.book||e.isscan&&"U"!=p.priceMode||e.usePage==a.zh.sku&&"U"==p.priceMode&&!N?(p.defaultDate=(0,c.Wy)(e,p),p.showDefault=!!p.defaultDate):p.showDefault=!e.isscan&&e.date&&e.usePage!=a.zh.book,p.isHideProperties=p.aggregation&&!N,p.expandCalendar=!p.isPeopleAggregations&&p.isHideProperties,p.saleProperties=(0,s.c1)(y,null===o||void 0===o||null===(S=o[0])||void 0===S?void 0:S.packageConfigList,null===o||void 0===o||null===(P=o[0])||void 0===P?void 0:P.guideTitleHeaderList),p.selectPropertyIds=p.expandCalendar?[]:(0,s.R6)(p.saleProperties,m),p.packageResources=(0,s.qm)(n),p.resources=(0,c.jh)(n,e,p),p.refundPolicys={},p.maxBookingDays=h.maxBookingDays,p.minBookingDays=h.minBookingDays,p.isWIFI="wifi"==(null===h||void 0===h?void 0:h.categoryTemplateCode),p.resourcetype=b}if(h&&Z&&Z.length&&f){p.isPack3=!0,p.isServerData=(0,u.rI)(),p.productId=h.productId,p.priceMode=h.priceMode;var V=(0,s.Bt)(Z),L=V.isUseDateSame,E=V.isInChina,A=V.boxResIdMapSubResId,F=V.subResIdMapBoxResId,M=V.diffDateBoxResIds,O=V.sameDateBoxResIds;p.isUseDateSame=L,p.showLocalTime=!E,p.boxResIdMapSubResId=A,p.subResIdMapBoxResId=F,p.diffDateBoxResIds=M,p.sameDateBoxResIds=O;var B=(0,c.pp)(I,o),z=B.prodMapValidDesc,H=B.prodMapDisabledDateDesc;if(p.prodMapValidDesc=z,p.prodMapDisabledDateDesc=H,p.aggregation=e.aggregation=!!m,p.hasRecommend=(null===k||void 0===k?void 0:k.length)>1||e.aggregation&&e.usePage==a.zh.book,p.dateRecord=e.date?(0,i.Z)({},e.date,!0):{},p.isPeopleAggregations=m&&!!x,p.peoplePropertiesUnable={tip:"",info:[]},r&&(e.spotid=r[0].id),p.peopleProperties=(0,s.BN)(n,p.peoplePropertiesUnable),p.peopleGrayProperty=(0,s._Z)(p.peopleProperties),p.choicePeopleId=(0,s.$X)(p.peopleProperties),p.isPeopleAggregations&&(0,s.J4)(n)&&(0,d.gp)({type:"ttd_dev_sku_firstLevelInfos_err",body:{title:"\u4eba\u7fa4\u5408\u96c6\u5305\u542b\u666e\u901a\u4ea7\u54c1\uff0c\u4e00\u7ea7\u7968\u79cd\u4e0d\u552f\u4e00",data:{request:e}}}),p.firstLevelInfos=(0,s.OO)(w,I,L),p.firstLevelMapSubResId=(0,s.eI)(Z,I,w),p.firstLevelMapSaleProperties=(0,s.jf)(w),p.firstLevelMapSelectedPropertyIds=(0,s.z6)(p.firstLevelMapSaleProperties),1===w.length&&(p.isSalePropertyIdDiff=(0,s.d_)(w,p.firstLevelMapSaleProperties)),p.firstLevelMapPackageId=(0,s.BR)(w,I),p.subResFullInfo=(0,c.GJ)(n,p),p.isUseDateSame||e.usePage==a.zh.book){var U=_(n,e,[],p),G=U.calendar,q=U.hasPromotion,W=U.firstLevelMapCalendar;p.calendar=G,p.firstLevelMapCalendar=W,p.hasPromotion=q}else{var K=g(n,e,p),Y=K.firstLevelMapCalendar,X=K.hasPromotion;p.firstLevelMapCalendar=Y,p.hasPromotion=X}p.packageResources=(0,s.qm)(n),p.resources=(0,c.jh)(n,e,p),p.refundPolicys={},p.hasSingleDateCalendar=(0,s.SW)(p.firstLevelInfos),L?(p.isConcatSalePropertyName=(0,s.Ew)(w),p.isConcatUseDateTitle=(0,s.DW)(p.firstLevelInfos),p.peoplePackageDesc=(0,s.zL)(w,Z,p.isPeopleAggregations,p.isConcatUseDateTitle),e.usePage===a.zh.book&&(p.validDesc=(0,c.Gx)(l),p.disabledDateDesc=(0,c.Nq)(l)),e.usePage==a.zh.book||e.isscan&&p.hasSingleDateCalendar?(p.defaultDate=(0,c.Wy)(e,p),p.showDefault=!!p.defaultDate):[a.zh.detail,a.zh.sku].includes(e.usePage)&&(p.hasSingleDateCalendar||(0,c.DW)(e,p),p.showDefault=!e.isscan&&e.date)):(p.isConcatUseDateTitle=(0,s._m)(p.firstLevelInfos,p.firstLevelMapSaleProperties),e.usePage===a.zh.book?p.hasSingleDateCalendar?p.defaultDate=e.date:(0,c.Po)(e,p,Z,I):[a.zh.detail,a.zh.sku].includes(e.usePage)&&(0,c.eT)(e,p)),p.resourcetype=b}}return p}},60594:function(e,t,n){"use strict";var i=n(32545);t["Z"]=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.getHoliday,r={};if(o)try{t=JSON.parse(JSON.parse(o.rspJsonStr).configList[0].configContent).Holiday}catch(e){}if(!t)return r;var a=n.start,s=n.end,c=n.isHideWork,l=a||(new Date).getTime(),u=new Date;u.setFullYear(u.getFullYear()+2);var d=s||u.getTime();if(t.forEach((function(e){var t=e.HolidayList,n=e.Year;t.forEach((function(e){var t=e.StartDay,o=e.HolidayCount,a=e.WorkDay,c=e.HolidayName,u=e.HolidayDay,p=Number(o||0),h=Number(t.slice(0,2)),f=Number(t.slice(2,4)),m=new Date(Number(n),h-1,f);if(!(m.getTime()<l||s&&m.getTime()>d)){for(var v=new Date(Number(n),Number(u.slice(0,2))-1,Number(u.slice(2,4))),_=0;_<p;_++)r[(0,i.fh)(m)]?r[(0,i.fh)(m)].work=!1:r[(0,i.fh)(m)]={name:"\u4f11",work:!1},m.setDate(m.getDate()+1);if(a){var g=a.split(",");g.map((function(e){var t=Number(e.slice(0,2)),o=Number(e.slice(2,4)),a=new Date(Number(n),t-1,o);r[(0,i.fh)(a)]={name:"\u73ed",work:!0}}))}if(r[(0,i.fh)(v)])r[(0,i.fh)(v)].name=c,r[(0,i.fh)(v)].count=p||1;else{var y=[0,6].includes(v.getDay());r[(0,i.fh)(v)]={name:c,work:!p&&!y,count:p||1}}}}))})),c)for(var p in r){var h=r[p];"\u4f11"!==h.name&&"\u73ed"!==h.name||delete r[p]}return r}},38507:function(e,t,n){"use strict";n.d(t,{ZP:function(){return f},OB:function(){return s},nc:function(){return r.ZP}});var i=n(298),o=n(64571),r=n(55029),a=n(50738),s=function(e,t,n){if(!e||!t)return{};var o=t.request,r=o.spotid,s=o.traceid,c=t.ticketInfo,l=void 0===c?{}:c,u=t.resourcetype,d=e.otherParams,p=void 0===d?{}:d,h={viewspotid:r,level1saleunitid:l.ticketGroupId,level2saleunitid:l.subTicketGroupId,resourcetype:p.resourcetype||u,channelid:5};return{tkt_sightdetail_browse_package:function(e){return{key:"tkt_sightdetail_browse_package",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_browse_package",loadtime:e-p.showPoplayerTime||+new Date},h),{},{keyid:196137,actiontype:"browse",actioncode:"tkt_sightdetail_browse_package"})}},dateClickLog:function(e){return function(t){return{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_date"},h),{},{date:t.cdate,applytype:e===t.cdate?"uncheck":"click",keyid:196141,actiontype:"click",actioncode:"tkt_sightdetail_click_package_date"})}}},tkt_sightdetail_click_package_option:function(e){return{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_option"},h),{},{applytype:e.selectPropertyId==e.optionid?"uncheck":"click",keyid:196142,actiontype:"click",actioncode:"tkt_sightdetail_click_package_option",optionid:e.optionid,pos:e.pos})}},moreButtonClickLog:{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_more"},h),{},{keyid:196143,actiontype:"click",actioncode:"tkt_sightdetail_click_package_more"})},tkt_sightdetail_view_package_notice:{key:"tkt_sightdetail_view_package_notice",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_view_package_notice"},h),{},{keyid:196366,actiontype:"browse",actioncode:"tkt_sightdetail_view_package_notice"})},tkt_sightdetail_click_package_notice:function(e){return{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_notice"},h),{},{keyid:196367,actiontype:"click",actioncode:"tkt_sightdetail_click_package_notice",resourceid:e.resourceid})}},tkt_sightdetail_click_package_next:function(e){return{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_next"},h),{},{keyid:196368,actiontype:"click",actioncode:"tkt_sightdetail_click_package_next",resourceid:e.resourceid,traceid:s})}},tkt_sightdetail_click_package_close:{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_close"},h),{},{keyid:196369,actiontype:"click",actioncode:"tkt_sightdetail_click_package_close"})},tkt_sightdetail_click_package_property:function(e){return{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_property"},h),{},{applytype:e.isSelect?"uncheck":"click",keyid:198676,actiontype:"click",actioncode:"tkt_sightdetail_click_package_property",pos:e.pos})}},tkt_sightdetail_click_package_propertypolicy:{type:"click",params:(0,i.Z)((0,i.Z)({key:"tkt_sightdetail_click_package_propertypolicy"},h),{},{keyid:198677,actioncode:"tkt_sightdetail_click_package_propertypolicy"})},tkt_pzxqysku_exposure:(0,a.ap)({key:"tkt_pzxqysku_exposure",params:(0,i.Z)((0,i.Z)({},h),{},{key:"tkt_pzxqysku_exposure",keyid:""})}),tkt_pzxqypeople_exposure:(0,a.ap)({key:"tkt_pzxqypeople_exposure",params:(0,i.Z)((0,i.Z)({},h),{},{key:"tkt_pzxqypeople_exposure",keyid:""})}),salepropertiesTraceData:function(e,t){return{action:"usr_click",attrs:n,module:"\u9500\u552e\u5c5e\u6027",value:e,scene:"\u70b9\u51fb".concat(t,"\u4e0b\u5c5e\u6027")}},btnTraceData:{module:"\u4e0b\u4e00\u6b65\u6309\u94ae",scene:"\u70b9\u51fb\u4e0b\u4e00\u6b65\u6309\u94ae",action:"usr_click",attrs:n,value:"\u4e0b\u4e00\u6b65"},buyNoteTraceData:{action:"usr_click",module:"\u8d2d\u4e70\u987b\u77e5",attrs:n,scene:"\u70b9\u51fb\u8d2d\u4e70\u987b\u77e5",value:"\u8d2d\u4e70\u987b\u77e5"},priceDetailTraceData:{action:"usr_click",module:"\u660e\u7ec6\u6309\u94ae",attrs:n,scene:"\u70b9\u51fb\u660e\u7ec6\u6309\u94ae",value:"\u660e\u7ec6"},cleanTraceData:{action:"usr_click",module:"\u6e05\u7a7a\u9009\u62e9\u6309\u94ae",attrs:n,scene:"\u70b9\u51fb\u6e05\u7a7a\u9009\u62e9\u6309\u94ae",value:"\u6e05\u7a7a\u9009\u62e9"},clickMoreTraceData:{action:"usr_click",module:"\u66f4\u591a\u65e5\u671f",attrs:n,scene:"\u70b9\u51fb\u66f4\u591a\u65e5\u671f\u6309\u94ae",value:"\u66f4\u591a\u65e5\u671f"}}},c=n(60594),l=function(e){var t=e.getProductPriceCalendar,n=t.aggregations,i=t.peopleProperties,o={},r=e.getScenicSpotInfo&&e.getScenicSpotInfo[0].saleUnitInfo;if(r&&r[0]){var a=r[0],s=a.ticketGroupId,c=a.subTicketGroupName,l=a.subTicketGroupSubName,u=a.ticketGroupName,d=a.subTicketGroupId,p=a.ticketGroupAlias;n&&i?o.ticketTitle="".concat(p||u):(o.ticketTitle="".concat(p||u).concat(c).concat(l||""),o.ticketResourceName="".concat(c).concat(l||"")),Object.assign(o,{ticketGroupId:s,subTicketGroupId:d})}return o},u=n(48501),d=n(61252),p=n(75971),h=function(e){var t=e||{},n=t.getPriceInfo;if(n){var i=JSON.parse((null===n||void 0===n?void 0:n.value)||"{}"),o=i.desc,r=(o||[]).map((function(e){return{type:"text",text:e}})),a=r.map((function(e){return e.text})).join("\n"),s="\u4ee5\u4e0b\u4ef7\u683c\u4e3a\u9884\u4f30\u5230\u624b\u4ef7,\u6700\u7ec8\u4ef7\u683c\u4ee5\u652f\u4ed8\u9875\u4e3a\u51c6\u3002",c="\u67e5\u770b\u4ef7\u683c\u8bf4\u660e";return{priceNotesList:r,priceTipList:a,priceTipText:s,showPriceInfoText:c}}},f={getParamsFromUrl:function(){var e,t=(0,o.FN)(),n=(null===t||void 0===t||null===(e=t.router)||void 0===e?void 0:e.params)||{},r=(0,p._)(n),a=(0,d.dD)();return(0,i.Z)((0,i.Z)({date:n.defaultDate||"",productId:n.productId,spotid:n.scenicSpotId||n.spotid,poiid:n.poiid,optid:[Number(n.resourceId||n.optid)],token:n.token?decodeURIComponent(n.token):"",isscan:"T"==n.isscan,useNative:"T"==n.usenative,aggregation:!(!n.token&&!n.productId),usePage:n.usePage||u.kQ[a]||u.zh.sku,ctm_ref:n.ctm_ref,traceid:n.traceid,isScanShelf:"true"==n.isScanShelf},(0,p.n)(n)),{},{sourcePageType:n.sourcePageType,extParams:r})},getFormatByModules:function(e,t,n,o){var a={};return n.forEach((function(n){switch(n){case"holiday":a.holiday=(0,c.Z)(t);break;case"sku":a=(0,i.Z)((0,i.Z)({},a),(0,r.ZP)(e,t));break;case"ticketInfo":a.ticketInfo=l(t);break;case"priceInfo":a.priceInfo=h(t);break;case"itinerary":case"promotion":case"packages":case"imInfo":if(o){var s=o[n],u="";if("imInfo"==n){var d,p=(null===(d=t.getProductInfo)||void 0===d||null===(d=d[0])||void 0===d?void 0:d.basicInfo)||{},f=p.flags,m=void 0===f?[]:f,v=m.includes("domestic");u=2==(null===e||void 0===e?void 0:e.bizLineType)||3==(null===e||void 0===e?void 0:e.bizLineType)?"ftsi44cv98erf":v?"5q5hp3977c6eb":"d1l1caksmnu0r"}s&&(a=(0,i.Z)((0,i.Z)({},a),s(e,t,u,a)))}break}})),a}}},37814:function(e,t,n){"use strict";n.d(t,{c1:function(){return r},qm:function(){return s},R6:function(){return c},BN:function(){return l},_Z:function(){return u},$X:function(){return d},Bt:function(){return f},OO:function(){return m},jf:function(){return v},z6:function(){return g},zL:function(){return y},SW:function(){return x},Ew:function(){return k},DW:function(){return b},_m:function(){return Z},eI:function(){return I},BR:function(){return w},d_:function(){return S},J4:function(){return P}});var i=n(22276),o=n(298),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=[];if(null===t||void 0===t||t.map((function(t){var n,r=null===e||void 0===e?void 0:e.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.salesProperty)||void 0===n?void 0:n.salesPropertyId)==t.code}));r>-1&&(i.push((0,o.Z)((0,o.Z)({},a(e[r])),{},{showMoreLimit:t.showMoreLimit,name:t.name||e[r].salesPropertyName,iconUrl:null===t||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.url})),e.splice(r,1))})),n.length>0)return n.map((function(t){var n=null===e||void 0===e?void 0:e.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.salesProperty)||void 0===n?void 0:n.salesPropertyId)==t.code}));if(n>-1){var r=t.name,s=t.content,c=t.type,l=t.icon,u=a(e[n]),d=u.salesPropertyName,p=u.salesPropertyValues,h=s;2==c&&(h=h.replace(/{{number}}/g,p.length)),i.push((0,o.Z)((0,o.Z)({},u),{},{name:r||d,content:h,icon:l||""}))}})),i;var r=e.map(a);return i.concat(r)},a=function(e){return{hide:e.salesProperty.hide,salesPropertyName:e.salesProperty.salesPropertyName,salesPropertyId:String(e.salesProperty.salesPropertyId),salesPropertyImgUrls:e.salesPropertyImgUrls,salesPropertyValues:e.salesPropertyValues.map((function(e){return{salesPropertyValueId:e.salesPropertyId,salesPropertyValueName:e.salesPropertyName,carInfo:e.carInfo,hide:!1}}))}},s=function(e){var t=e.packageInfos,n=void 0===t?[]:t,o={};return n.forEach((function(e){var t=e.salesProperties.map((function(e){return e.salesPropertyValues[0].salesPropertyId})).join("-");o[t]?o[t]=[].concat((0,i.Z)(o[t]),(0,i.Z)(e.resourceInfos.map((function(e){return e.resourceId})))):o[t]=(0,i.Z)(e.resourceInfos.map((function(e){return e.resourceId})))})),o},c=function(e,t){var n=Array.from(Array(e.length||0)).map((function(){return""}));return e?(e.forEach((function(e,t){1!=e.salesPropertyValues.length||e.hide||(n[t]=e.salesPropertyValues[0].salesPropertyValueId)})),n):n},l=function(e,t){var n=e.peopleProperties,i=e.packageInfos,o=e.boxProductInfos,r=void 0===o?[]:o,a=[],s=p(i),c="",l="\u7684";return Array.isArray(n)&&n.map((function(e){var n=e.id,i=e.name,o=e.subName,u=e.peopleDescs,d=e.productIds,p=e.price,f=e.priceType,m="";if(d&&d.length>0){var v=d.filter((function(e){return!!r.find((function(t){return t.productId==e}))})),_=h(v,s),g=h(d,s),y=g.filter((function(e){return!_.includes(e)}));a.push({peopleId:n,peopleName:"".concat(i).concat(o?"("+o+")":""),peopleDescStr:"\u9002\u7528\u6761\u4ef6:".concat(u.join(";")),resourceIds:g,boxIds:_,commonResIds:y})}else{switch(c?l="\u7b49":c="".concat(i).concat(o?"\uff08"+o+"\uff09":""),f){case 1:m="\u514d\u8d39";break;case 0:m="\u6682\u65e0\u62a5\u4ef7";break;case 2:m="\u53c2\u8003\u4ef7".concat(p,"\u5143");break;case 3:m="\u53c2\u8003\u4ef7".concat(p,"\u5143\u8d77");break;default:m="\u6682\u65e0\u62a5\u4ef7"}t.info.push({peopleName:"".concat(i).concat(o?"("+o+")":""),peopleDescStr:"\u9002\u7528\u6761\u4ef6:".concat(u.join(";")),priceDesc:m})}})),t.tip=c?"".concat(c.length>10?c.slice(0,10)+"...":c).concat(l,"\u8d2d\u7968\u4fe1\u606f"):"",a},u=function(e){var t={};return e&&0!==e.length?(e.forEach((function(e){var n=e.peopleId,i=e.resourceIds;t[n]=0===i.length})),t):t},d=function(e){if(e&&0!==e.length){var t,n=e.filter((function(e){var t=e.resourceIds;return t.length>0}));return 1===n.length&&(t=n[0].peopleId),t}},p=function(e){var t={};return Array.isArray(e)&&e.forEach((function(e){var n=e.productId;t[n]?t[n].push(e.resourceInfos[0].resourceId):t[n]=[e.resourceInfos[0].resourceId]})),t},h=function(e,t){var n=[];return Array.isArray(e)&&(n=e.reduce((function(e,n){return[].concat((0,i.Z)(e),(0,i.Z)(t[n]||[]))}),[])),n},f=function(e){var t=!0,n=!0,o={},r={},a=[],s=[];return e.forEach((function(e){var c=e.inChina,l=e.packingUseDateSame,u=e.pack3ResourceInfos;t=t&&!!l,n=n&&c,u.forEach((function(e){var t=e.resourceId,n=e.subResourceInfos;0===l?a.push(t):s.push(t),o[t]=n.map((function(e){return e.subResourceId})),n.forEach((function(e){var n=e.subResourceId;r[n]?r[n]=Array.from(new Set([].concat((0,i.Z)(r[n]),[t]))):r[n]=[t]}))}))})),{isUseDateSame:t,isInChina:n,boxResIdMapSubResId:o,subResIdMapBoxResId:r,diffDateBoxResIds:a,sameDateBoxResIds:s}},m=function(e,t,n){var i=[],o=n&&1===e.length&&1===e[0].peopleGroupInfos.length;return e.forEach((function(e){var n=e.id,r=e.name,a=e.peopleGroupInfos,s={firstLevelId:String(n),firstLevelName:r,peopleGroupInfos:[],priceMode:0};o?a.forEach((function(e){var n=e.productIds,i=e.peopleGroupId,o=e.peopleGroupName,r=e.subName;n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),a=n.priceMode,c={peopleGroupId:String(i),peopleGroupName:o,subName:r,productIds:[e],priceMode:a};s.priceMode=s.priceMode||a,s.peopleGroupInfos.push(c)}))})):a.forEach((function(e){var n=e.productIds,i=e.peopleGroupId,o=e.peopleGroupName,r=e.subName,a={peopleGroupId:String(i),peopleGroupName:o,subName:r,productIds:n,priceMode:0};n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),i=n.priceMode;s.priceMode=s.priceMode||i,a.priceMode=a.priceMode||i})),s.peopleGroupInfos.push(a)})),i.push(s)})),i},v=function(e){var t={};return e.forEach((function(e){var n=e.id,i=e.saleProperties;t[n]=i.map(_)})),t},_=function(e){var t=[207],n=[1917],i=e.salesPropertyValues.every((function(e){return e.hide})),o=t.includes(e.salesProperty.salesPropertyId)&&1===e.salesPropertyValues.length&&n.includes(e.salesPropertyValues[0].salesPropertyId)||i;return{salesPropertyId:e.salesProperty.salesPropertyId,salesPropertyName:e.salesProperty.salesPropertyName,hide:!!o||e.salesProperty.hide,salesPropertyImgUrls:e.salesPropertyImgUrls,salesPropertyValues:e.salesPropertyValues.map((function(e){return{salesPropertyValueId:e.salesPropertyId,salesPropertyValueName:e.salesPropertyName,hide:e.hide}}))}},g=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n],o=Array.from(Array(i.length||0)).map((function(){return""}));i.forEach((function(e,t){var n=e.salesPropertyValues.filter((function(e){return!e.hide}));1!=n.length||e.hide||(o[t]=n[0].salesPropertyValueId)})),t[n]=o})),t},y=function(e,t,n,i){var o="";if(!i)return o;var r=[];if(1===e.length&&!n){var a=e[0].peopleGroupInfos;a.length>1&&a.forEach((function(e){var n=e.productIds,i=e.peopleGroupName,o=0;n.forEach((function(e){t.forEach((function(t){var n=t.pack3ResourceInfos;n.forEach((function(t){var n=t.subResourceInfos,i=n.find((function(t){return t.subProductId===e})),r=i||{},a=r.unitQuantity,s=void 0===a?0:a;0===o&&(o=s)}))}))})),o>0&&r.push("".concat(o,"\u5f20").concat(i))}))}return r.length&&(o="\u5305\u542b".concat(r.join("\u3001"))),o},x=function(e){var t=!1,n=1===e.length;return e&&e.length&&e.forEach((function(e){var i=e.priceMode,o=e.peopleGroupInfos;t=n?o.some((function(e){return 0===e.priceMode})):t||0===i})),t},k=function(e){var t=!1;return e&&e.length&&e.length>1&&(t=e.every((function(e){return!e.saleProperties||e.saleProperties&&e.saleProperties.length<=1}))),t},b=function(e){var t=!1;if(e&&e.length)if(1===e.length){var n=e[0].peopleGroupInfos,i=void 0===n?[]:n;i.forEach((function(e){var n=e.priceMode;t=t||1===n}))}else e.forEach((function(e){var n=e.priceMode;t=t||1===n}));return t},Z=function(e,t){var n=!1;return e&&e.length&&(n=e.every((function(e){var n=e.firstLevelId,i=t[n],o=i.filter((function(e){return!e.hide}));return 0===o.length}))),n},I=function(e,t,n){var i={};return e.forEach((function(e){var n=e.pack3ResourceInfos;n.forEach((function(e){var n=e.subResourceInfos;n.forEach((function(e){var n=e.subProductId,o=e.subResourceId,r=t.find((function(e){return e.productId===n}))||{},a=r.firstLevelId;i[a]?i[a].push(o):i[a]=[o]}))}))})),n.forEach((function(e){var t=e.id;i[t]?i[t]=Array.from(new Set(i[t])):i[t]=[]})),i},w=function(e,t){var n={};return e.forEach((function(e){var o=e.id,r=e.peopleGroupInfos,a=[];r.forEach((function(e){var n=e.productIds;n.forEach((function(e){var n=t.find((function(t){return t.productId===e})),o=n||{},r=o.packageIds;a.push.apply(a,(0,i.Z)(r))}))})),n[o]=Array.from(new Set(a))})),n},S=function(e,t){var n=e[0].id,i=t[n],o=i.filter((function(e){return!e.hide})).map((function(e){return e.salesPropertyId})),r=Array.from(new Set(o));return o.length!==r.length},P=function(e){var t=e.firstLevelInfos,n=void 0===t?[]:t,o=e.boxProductInfos,r=void 0===o?[]:o,a=e.peopleProperties,s=void 0===a?[]:a,c=[];r.forEach((function(e){var t=e.productId;c.push(t)}));var l=[];s.forEach((function(e){var t=e.productIds;l.push.apply(l,(0,i.Z)(t))}));var u=!l.every((function(e){return c.includes(e)}));return!!u&&1!==n.length}},46982:function(e,t,n){"use strict";n.d(t,{hC:function(){return v},Xz:function(){return _},br:function(){return g},fb:function(){return x}});var i=n(45023),o=n(22276),r=n(298),a=n(48074),s=n(76966),c=n(41003),l=n(15259),u=n(121),d=n(48501),p=n(22417),h=n(77138);t["ZP"]=function(e,t,n){var i=t.state.isUseDateSame,o=i?f(e,t):m(e,t,n);return o};var f=function(e,t){var n,i=t.state,f=i.chioceDateData,m=i.request,_=i.firstLevelInfos,g=i.firstLevelMapSaleProperties,x=i.firstLevelMapSelectedPropertyIds,k=i.isPeopleAggregations,b=i.choicePeopleId,Z=i.peopleProperties,I=i.firstLevelMapCalendar,w=i.calendar,S=i.isSalePropertyIdDiff,P=void 0!==S&&S,T=(0,u.I8)(m);if(T.usePage==d.zh.book)return{chioceDateData:e};f&&f.date==e.date||(n=e),n&&(n=(0,r.Z)((0,r.Z)({},n),{},{resources:n.resources.filter((function(e){return!e.unAvailableReason}))}));var C=(0,s.s0)(b,t),D=(0,c.Kt)(C,t),R=[],j=[],N={},V={},L={},E={};_.forEach((function(e){var i=e.firstLevelId,r=g[i];R.push.apply(R,(0,o.Z)(r));var c=x[i];j.push.apply(j,(0,o.Z)(c));var u=P?w:I[i],d=(0,a.iT)(u,n);E[i]=d;var p=(0,l.By)(P?h.F.load("allResourceId")||(0,l.q2)(t.state):h.F.load("allResourceId-SameDate")||y(t.state),d,t),f=(0,a.BY)(c,t,i),m=(0,s.ve)(p,f);N[i]=m;var v=P?C:D[i],_=(0,s.ve)(m,v);V[i]=_}));var A=P?Object.values(V)[0]:(0,c.o)(V,t,b),F=(0,c.he)(V,A,t,b),M=F.firstLevelMapCommonResIds,O=F.filteredFirstLevelMapSubResId,B=F.commonResIds;_.forEach((function(e){if(!P){var n=e.firstLevelId,i=[].concat((0,o.Z)(O[n]),(0,o.Z)(M[n])),r=x[n],a=g[n],s=D[n],c=E[n],u=(0,l.mQ)(i,r,c,t,b,a,s,n,V),d=u.grayPropertys;L[n]=d}}));var z=(0,c.EV)(N,k,Z,t),H=v(t,x,n,g,b),U=H.salePropertyFinish,G=H.dateFinish,q=H.peopleFinish;T.date=n?n.date:"";var W=(0,p.jY)(U&&G&&q,n,(0,r.Z)((0,r.Z)({},t.state),{},{request:T}));return{footer:W,request:(0,r.Z)((0,r.Z)({},T),{},{optid:[].concat((0,o.Z)(A),(0,o.Z)(B))}),chioceDateData:n,firstLevelMapGrayPropertys:L,firstLevelMapSelectedPropertyIds:x,salePropertyFinish:U,dateFinish:G,peopleFinish:q,peopleGrayProperty:z,choicePeopleId:b}},m=function(e,t,n){var i,f=t.state,m=f.firstLevelMapChoiceDateData,v=void 0===m?{}:m,y=f.request,k=f.firstLevelInfos,b=f.firstLevelMapSaleProperties,Z=f.firstLevelMapSelectedPropertyIds,I=f.isPeopleAggregations,w=f.choicePeopleId,S=f.peopleProperties,P=f.firstLevelMapCalendar,T=(0,u.I8)(y),C=(0,u.I8)(v);if(T.usePage==d.zh.book)return C[n]=e,{firstLevelMapChoiceDateData:C};if(Array.isArray(n))n.forEach((function(t){if(e[t]){var n=(0,r.Z)((0,r.Z)({},e[t]),{},{resources:e[t].resources.filter((function(e){return!e.unAvailableReason}))});C[t]=n}else C[t]=e[t]}));else{var D=v[n];D&&D.date==e.date||(i=e),i&&(i=(0,r.Z)((0,r.Z)({},i),{},{resources:i.resources.filter((function(e){return!e.unAvailableReason}))})),C[n]=i}var R=(0,s.s0)(w,t),j=(0,c.Kt)(R,t),N={},V={},L={},E={};k.forEach((function(e){var n=e.firstLevelId,i=C[n],o=(0,l.By)(h.F.load("allResourceId")||(0,l.q2)(t.state),i,t),r=Z[n],c=(0,a.BY)(r,t,n),u=(0,s.ve)(o,c);V[n]=u;var d=j[n];N[n]=(0,s.ve)(c,d),L[n]=(0,s.ve)(u,d)}));var A=(0,c.o)(L,t,w),F=(0,c.he)(L,A,t,w),M=F.firstLevelMapCommonResIds,O=F.filteredFirstLevelMapSubResId,B=F.commonResIds,z={},H=!1;k.forEach((function(e){var n=e.firstLevelId,i=[].concat((0,o.Z)(O[n]),(0,o.Z)(M[n])),r=Z[n],s=b[n],c=P[n],u=j[n],d=x(L,N,n,t,w),p=(0,a.vW)(r,t,u,w,s,c,d),h=p.newCalendar,f=p.hasPromotion;z[n]=h,H=H||f;var m=C[n],v=(0,a.iT)(h,m);C[n]=v;var _=(0,l.mQ)(i,r,v,t,w,s,u,n,L),g=_.grayPropertys;E[n]=g}));var U=(0,c.EV)(V,I,S,t),G=_(t,Z,C,b,w),q=G.salePropertyFinish,W=G.dateFinish,K=G.peopleFinish;Array.isArray(n)||(T.date=g(n,i,y,k));var Y=(0,p._i)(q&&W&&K,(0,r.Z)((0,r.Z)({},t.state),{},{request:T}));return{footer:Y,request:(0,r.Z)((0,r.Z)({},T),{},{optid:[].concat((0,o.Z)(A),(0,o.Z)(B))}),firstLevelMapChoiceDateData:C,firstLevelMapCalendar:z,hasPromotion:H,firstLevelMapGrayPropertys:E,firstLevelMapSelectedPropertyIds:Z,salePropertyFinish:q,dateFinish:W,peopleFinish:K,peopleGrayProperty:U,choicePeopleId:w,firstLevelMapCommonResIds:M,filteredFirstLevelMapSubResId:O}},v=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=!0;return Object.keys(t).forEach((function(e){var n=t[e],o=i[e],r=o.map((function(e,t){if(e.hide)return t})),s=n.every((function(e,t){return!!e||r.includes(t)}));a=a&&s})),{salePropertyFinish:a,dateFinish:!!n,peopleFinish:!r||!!o}},_=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=!0,s=!0;return Object.keys(t).forEach((function(e){var o=t[e],r=i[e],c=r.map((function(e,t){if(e.hide)return t})),l=o.every((function(e,t){return!!e||c.includes(t)}));a=a&&l;var u=n[e];s=s&&!!u})),{salePropertyFinish:a,dateFinish:s,peopleFinish:!r||!!o}},g=function(e,t,n,i){var o=n.date,r=o?o.split("|"):[],a=i.map((function(e){return e.firstLevelId})),s=r.length!==a.length?new Array(a.length).map((function(){return""})):r,c=a.indexOf(e);return c>-1&&(s[c]=t&&t.date||""),s.join("|")},y=function(e){var t=e.packageResources,n=e.boxResIdMapSubResId,r=[];if(!t)return r;Object.keys(t).forEach((function(e){r=[].concat((0,o.Z)(r),(0,o.Z)(t[e]))})),r=Array.from(new Set(r));var a=[];return r.forEach((function(e){var t,i=n[e];i?(t=a).push.apply(t,(0,o.Z)(i)):a.push(e)})),a=Array.from(new Set(a)),h.F.save((0,i.Z)({},"allResourceId-SameDate",a)),a},x=function(e,t,n,i,r){var a=(0,u.I8)(e);a[n]=t[n];var s=(0,c.o)(a,i,r),l=(0,c.he)(a,s,i,r),d=l.firstLevelMapCommonResIds,p=l.filteredFirstLevelMapSubResId,h=[].concat((0,o.Z)(p[n]),(0,o.Z)(d[n]));return h}},15259:function(e,t,n){"use strict";n.d(t,{By:function(){return v},mQ:function(){return _},q2:function(){return b},Se:function(){return Z}});var i=n(298),o=n(45023),r=n(22276),a=n(48074),s=n(22417),c=n(77138),l=n(48501),u=n(76966),d=n(94411),p=n(61252),h=n(55029),f=n(121),m=n(41003),v=function(e,t,n){if(!t)return e;var i=t.resources||[],o=n.state,r=o.productId,a=o.aggregation;return i.filter((function(t){return e.includes(t.resourceId)&&(0,h.s2)(t.productId,r,a)})).map((function(e){return e.resourceId}))},_=function(e,t,n,i,o,a,s,c,l){!a&&(a=i.state.saleProperties);var d=i.state.request,p={},h=k(e,i);return!s&&(s=(0,u.s0)(o,i)),a.forEach((function(e,u){t[u]?y((0,r.Z)(t),n,u,p,s,i,a,c,l,o):e.salesPropertyValues.forEach((function(e){h.includes(e.salesPropertyValueId)||(p[e.salesPropertyValueId]=!0)}))})),g(p,a,d),{grayPropertys:p,filterProperty:h}},g=function(e,t,n){var i=t.find((function(t){return t.salesPropertyValues.every((function(t){return e[t.salesPropertyValueId]}))}));i&&null!==n&&void 0!==n&&n.spotid&&(0,p.gp)({type:"sku_resource_none",body:{title:"\u4e00\u7ec4\u9500\u552e\u5c5e\u6027\u5168\u90e8\u88ab\u7f6e\u7070",content:JSON.stringify(n)}})},y=function(e,t,n,i,o,s,l,d,p,h){var _=s.state,g=_.isPack3,y=_.priceMode;e[n]="";var b=(d?c.F.load("allPropertyArray-".concat(d)):c.F.load("allPropertyArray"))||x(l,d),Z=b[n]||[],I=(0,a.BY)(e,s,d);if((g||"U"!==y)&&(I=v(I,t,s)),I=(0,u.ve)(o,I),g){var w=(0,f.I8)(p);w[d]=I;var S=(0,m.o)(w,s,h),P=(0,m.he)(w,S,s,h),T=P.firstLevelMapCommonResIds,C=P.filteredFirstLevelMapSubResId;I=[].concat((0,r.Z)(T[d]),(0,r.Z)(C[d]))}var D=k(I,s);Z.forEach((function(e){D.includes(e)||(i[e]=!0)}))},x=function(e,t){if(!e||!e.length)return[];var n=e.map((function(e){return e.salesPropertyValues.map((function(e){return e.salesPropertyValueId}))}));return t?c.F.save((0,o.Z)({},"allPropertyArray-".concat(t),n)):c.F.save({allPropertyArray:n}),n},k=function(e,t){var n=t.state.packageResources,i=void 0===n?{}:n,o=Object.keys(i),a=[];return o.map((function(t){var n=i[t];n.some((function(t){return e.includes(t)}))&&(a=[].concat((0,r.Z)(a),(0,r.Z)(t.split("-").map((function(e){return Number(e)})))))})),a=Array.from(new Set(a)),a},b=function(e){var t=e.packageResources,n=[];return t?(Object.keys(t).forEach((function(e){n=[].concat((0,r.Z)(n),(0,r.Z)(t[e]))})),c.F.save({allResourceId:n}),n):n},Z=function(e,t,n,i,o){var r=e.state.isPeopleAggregations,a=i.map((function(e,t){if(e.hide)return t}));return{salePropertyFinish:t.every((function(e,t){return!!e||a.indexOf(t)>-1})),dateFinish:!!n,peopleFinish:!r||!!o}};t["ZP"]=function(e,t){var n=t.state,o=n.chioceDateData,p=n.request,h=n.saleProperties,m=n.expandCalendar,g=n.isPeopleAggregations,y=n.choicePeopleId,x=n.peopleGrayProperty,k=n.peopleProperties,I=n.priceMode,w=n.calendar,S=(0,f.I8)(p);if(S.usePage==l.zh.book)return{chioceDateData:e};var P=null;if("M"==I){var T=(0,d.mc)(e,t);if(0==T)return(0,d.ct)(e,t);T&&(P=T)}else o&&o.date==e.date||(P=e);P&&(P=(0,i.Z)((0,i.Z)({},P),{},{resources:P.resources.filter((function(e){return!e.unAvailableReason}))}));var C,D,R,j,N,V=v(c.F.load("allResourceId")||b(t.state),P,t);if(m)D={},R=V,j=[],C={salePropertyFinish:!0,dateFinish:!!P,peopleFinish:!0};else{j=t.state.selectPropertyIds;var L=(0,a.BY)(j,t),E=(0,u.ve)(V,L);x=(0,u.YM)(E,g,k);var A=(0,u.s0)(y,t);R=(0,u.ve)(E,A),D=_(R,j,P,t,y).grayPropertys,C=Z(t,j,P,h,y)}"M"==I?(S.endDate=P?P.endDate:"",N=(0,d.Sm)(w,S.date,S.endDate)):S.date=P?P.date:"";var F=(0,s.iG)(C.salePropertyFinish&&C.dateFinish&&C.peopleFinish,P,R,(0,i.Z)((0,i.Z)({},t.state),{},{request:S,multiCalendar:N}));return{footer:F,request:(0,i.Z)((0,i.Z)({},S),{},{optid:(0,r.Z)(R)}),chioceDateData:P,grayPropertys:D,selectPropertyIds:j,salePropertyFinish:C.salePropertyFinish,dateFinish:C.dateFinish,peopleFinish:C.peopleFinish,peopleGrayProperty:x,choicePeopleId:y,multiCalendar:N}}},41003:function(e,t,n){"use strict";n.d(t,{o:function(){return h},he:function(){return f},Kt:function(){return m},EV:function(){return v}});var i=n(298),o=n(22276),r=n(46982),a=n(48074),s=n(22417),c=n(121),l=n(76966),u=n(15259);t["ZP"]=function(e,t){var n=t.state.isUseDateSame,i=n?d(e,t):p(e,t);return i};var d=function(e,t){var n=t.state,d=n.firstLevelInfos,p=n.chioceDateData,v=n.firstLevelMapSaleProperties,_=n.firstLevelMapSelectedPropertyIds,g=n.request,y=n.calendar,x=n.firstLevelMapCalendar,k=n.isSalePropertyIdDiff,b=void 0!==k&&k,Z=(0,c.I8)(g),I=[],w=[],S=(0,l.s0)(e,t),P=m(S,t),T={},C={},D={},R={};d.forEach((function(e){var n=e.firstLevelId,i=v[n];I.push.apply(I,(0,o.Z)(i));var r=_[n];w.push.apply(w,(0,o.Z)(r));var s=(0,a.BY)(r,t,n),c=b?S:P[n];T[n]=(0,l.ve)(s,c);var d=(0,l.ve)(s,c),h=b?y:x[n],f=(0,a.iT)(h,p);R[n]=f;var m=(0,u.By)(d,f,t);C[n]=m}));var j=b?Object.values(C)[0]:h(C,t,e),N=f(C,j,t,e),V=N.firstLevelMapCommonResIds,L=N.filteredFirstLevelMapSubResId,E=N.commonResIds;d.forEach((function(n){if(!b){var i=n.firstLevelId,r=[].concat((0,o.Z)(L[i]),(0,o.Z)(V[i])),a=_[i],s=v[i],c=P[i],l=R[i],d=(0,u.mQ)(r,a,l,t,e,s,c,i,C),p=d.grayPropertys;D[i]=p}}));var A=b?Object.values(T)[0]:h(T,t,e),F=f(T,A,t,e),M=F.commonResIds,O=[].concat((0,o.Z)(A),(0,o.Z)(M)),B=(0,a.vW)(w,t,S,e,I,y,O),z=B.newCalendar,H=B.hasPromotion,U=(0,a.iT)(z,p),G=(0,r.hC)(t,_,U,v,e),q=G.salePropertyFinish,W=G.dateFinish,K=G.peopleFinish,Y=(0,s.jY)(q&&W&&K,U,t.state);return{footer:Y,request:(0,i.Z)((0,i.Z)({},Z),{},{optid:[].concat((0,o.Z)(j),(0,o.Z)(E))}),chioceDateData:U,calendar:z,firstLevelMapGrayPropertys:D,firstLevelMapSelectedPropertyIds:_,choicePeopleId:e,salePropertyFinish:q,dateFinish:W,peopleFinish:K,hasPromotion:H}},p=function(e,t){var n=t.state,d=n.firstLevelInfos,p=n.firstLevelMapCalendar,v=n.firstLevelMapChoiceDateData,_=void 0===v?{}:v,g=n.firstLevelMapSaleProperties,y=n.firstLevelMapSelectedPropertyIds,x=n.request,k=(0,c.I8)(x),b=(0,l.s0)(e,t),Z=m(b,t),I={},w={},S={},P={},T={},C=!1;d.forEach((function(n){var i=n.firstLevelId,o=y[i],r=(0,a.BY)(o,t,i),s=Z[i];S[i]=(0,l.ve)(r,s);var c=(0,l.ve)(r,s),d=g[i],h=p[i],f=(0,a.vW)(o,t,s,e,d,h),m=f.newCalendar,v=f.hasPromotion;I[i]=m,C=C||v;var x=_[i],k=(0,a.iT)(m,x);w[i]=k,P[i]=(0,u.By)(c,k,t)}));var D=h(P,t,e),R=f(P,D,t,e),j=R.firstLevelMapCommonResIds,N=R.filteredFirstLevelMapSubResId,V=R.commonResIds;d.forEach((function(n){var i=n.firstLevelId,s=[].concat((0,o.Z)(N[i]),(0,o.Z)(j[i])),c=y[i],l=g[i],d=I[i],p=Z[i],h=(0,r.fb)(P,S,i,t,e),f=(0,a.vW)(c,t,p,e,l,d,h),m=f.newCalendar,v=f.hasPromotion;I[i]=m,C=C||v;var _=w[i],x=(0,a.iT)(m,_);w[i]=x;var k=(0,u.mQ)(s,c,x,t,e,l,p,i,P),b=k.grayPropertys;T[i]=b}));var L=(0,r.Xz)(t,y,w,g,e),E=L.salePropertyFinish,A=L.dateFinish,F=L.peopleFinish,M=(0,s._i)(E&&A&&F,t.state);return{footer:M,request:(0,i.Z)((0,i.Z)({},k),{},{optid:[].concat((0,o.Z)(D),(0,o.Z)(V))}),firstLevelMapChoiceDateData:w,firstLevelMapCalendar:I,firstLevelMapGrayPropertys:T,firstLevelMapSelectedPropertyIds:y,choicePeopleId:e,salePropertyFinish:E,dateFinish:A,peopleFinish:F,hasPromotion:C,firstLevelMapCommonResIds:j,filteredFirstLevelMapSubResId:N}},h=function(e,t,n){var i=t.state,r=i.subResIdMapBoxResId,a=i.peopleProperties,s=[];return Object.keys(e).forEach((function(t){var i=e[t];n&&a.map((function(e){e.peopleId==n&&(i=i.filter((function(t){return!e.commonResIds.includes(t)})))}));var c=[];i.forEach((function(e){c=[].concat((0,o.Z)(c),(0,o.Z)(r[e]||[]))})),c=Array.from(new Set(c)),c.length&&(s=s.length?(0,l.ve)(s,c):c)})),n&&a.map((function(e){e.peopleId==n&&(s=s.filter((function(t){return e.boxIds.includes(t)})))})),s},f=function(e,t,n,i){var r=n.state,a=r.boxResIdMapSubResId,s=r.subResIdMapBoxResId,c=r.peopleProperties,u=[];i&&c.map((function(e){e.peopleId==i&&(t=(0,l.ve)(t,e.boxIds),u=e.commonResIds)}));var d={},p=[],h={},f=[],m=[];return t.forEach((function(e){var t;(t=m).push.apply(t,(0,o.Z)(a[e]))})),m=Array.from(new Set(m)),Object.keys(e).forEach((function(t){var n,i=e[t];h[t]=[],d[t]=[],i.forEach((function(e){m.includes(e)?h[t].push(e):!u.includes(e)&&s[e]||d[t].push(e)})),(n=p).push.apply(n,(0,o.Z)(d[t])),f.push.apply(f,(0,o.Z)(h[t]))})),p=Array.from(new Set(p)),{firstLevelMapCommonResIds:d,filteredFirstLevelMapSubResId:h,commonResIds:p,subResIds:f}},m=function(e,t){var n=t.state,i=n.firstLevelInfos,r=n.boxResIdMapSubResId,a=n.subResIdMapBoxResId,s=n.firstLevelMapSubResId,c={},l=[],u=[];return e.forEach((function(e){if(r[e]){var t,n=r[e];(t=l).push.apply(t,(0,o.Z)(n))}else a[e]?l.push(e):u.push(e)})),l=Array.from(new Set(l)),i.forEach((function(e){var t=e.firstLevelId,n=s[t],i=l.filter((function(e){return n.includes(e)}));c[t]=[].concat((0,o.Z)(i),u)})),c},v=function(e,t,n,i){var r=h(e,i),a=f(e,r,i),s=a.commonResIds,c=a.subResIds,u=[].concat((0,o.Z)(r),(0,o.Z)(s),(0,o.Z)(c)),d=(0,l.YM)(u,t,n);return d}},76966:function(e,t,n){"use strict";n.d(t,{ve:function(){return u},YM:function(){return d},s0:function(){return p}});var i=n(22276),o=n(298),r=n(15259),a=n(48074),s=n(77138),c=n(22417),l=n(121);t["ZP"]=function(e,t){var n=t.state,s=n.chioceDateData,d=n.request,h=n.saleProperties,f=n.selectPropertyIds,m=n.priceMode,v=(0,l.I8)(d),_=p(e,t),g=(0,a.BY)(f,t),y=u(g,_),x=(0,a.vW)(f,t,_,e),k=x.newCalendar,b=x.hasPromotion,Z=x.hasReservation;s=(0,a.iT)(k,s);var I=(0,r.By)(y,s,t),w=(0,r.mQ)("U"===m?y:I,f,s,t,e),S=w.grayPropertys,P=(0,r.Se)(t,f,s,h,e),T=P.salePropertyFinish,C=P.dateFinish,D=P.peopleFinish,R=(0,c.iG)(T&&C&&D,s,I,t.state);return{footer:R,request:(0,o.Z)((0,o.Z)({},v),{},{optid:(0,i.Z)(I)}),chioceDateData:s,calendar:k,grayPropertys:S,selectPropertyIds:f,choicePeopleId:e,salePropertyFinish:T,dateFinish:C,peopleFinish:D,hasPromotion:b,hasReservation:Z}};var u=function(e,t){return Array.from(new Set(t.filter((function(t){return e.includes(t)}))))},d=function(e,t,n){var i={};return t?(n.forEach((function(t){var n=t.peopleId,o=t.resourceIds,r=o.some((function(t){return(e||[]).includes(t)}));i[n]=!r})),i):i},p=function(e,t){var n=t.state,i=n.isPeopleAggregations,o=n.peopleProperties;if(i&&e){var a=o.find((function(t){return t.peopleId==e})),c=null===a||void 0===a?void 0:a.resourceIds;return c}return s.F.load("allResourceId")||(0,r.q2)(t.state)}},9304:function(e,t,n){"use strict";n.d(t,{s:function(){return m}});var i=n(298),o=n(22276),r=n(15259),a=n(76966),s=n(22417),c=n(48501),l=n(121),u=n(48074),d=n(46982),p=n(41003);t["Z"]=function(e,t,n,i){var o=n.state.isUseDateSame,r=o?h(e,t,n,i):f(e,t,n,i);return r};var h=function(e,t,n,h){var f=n.state,v=f.chioceDateData,_=f.request,g=f.firstLevelMapSaleProperties,y=f.firstLevelMapSelectedPropertyIds,x=f.isPeopleAggregations,k=f.choicePeopleId,b=f.peopleProperties,Z=f.firstLevelInfos,I=f.calendar,w=f.firstLevelMapCalendar,S=f.hasSingleDateCalendar,P=f.isSalePropertyIdDiff,T=void 0!==P&&P,C=(0,l.I8)(_),D=(0,l.I8)(y);Array.isArray(h)?D=e:D[h][t]==e?D[h][t]="":D[h][t]=e;var R=[],j=[],N=(0,a.s0)(k,n),V=(0,p.Kt)(N,n),L={},E={},A={},F={},M={};Z.forEach((function(e){var t=e.firstLevelId,i=g[t],s=D[t];R.push.apply(R,(0,o.Z)(i)),j.push.apply(j,(0,o.Z)(s));var c=(0,u.BY)(s,n,t),l=T?X:w[t],d=(0,u.iT)(l,v);M[t]=d;var p=(0,r.By)(c,d,n);E[t]=p;var h=T?N:V[t];L[t]=(0,a.ve)(c,h);var f=(0,a.ve)(p,h);A[t]=f}));var O=T?Object.values(A)[0]:(0,p.o)(A,n,k),B=(0,p.he)(A,O,n,k),z=B.firstLevelMapCommonResIds,H=B.filteredFirstLevelMapSubResId,U=B.commonResIds;Z.forEach((function(e){if(!T){var t=e.firstLevelId,i=[].concat((0,o.Z)(H[t]),(0,o.Z)(z[t])),a=D[t],s=g[t],c=V[t],l=M[t],u=(0,r.mQ)(i,a,l,n,k,s,c,t,A),d=u.grayPropertys;F[t]=d}}));var G=T?Object.values(L)[0]:(0,p.o)(L,n,k),q=(0,p.he)(L,G,n,k),W=q.commonResIds,K=[].concat((0,o.Z)(G),(0,o.Z)(W)),Y=(0,u.vW)(j,n,N,k,R,I,K),X=Y.newCalendar,Q=Y.hasPromotion,J=v&&(0,l.I8)(v);if(!S&&[c.zh.detail,c.zh.sku].includes(C.usePage)){var $=m(R,j);$&&!J?(J=X.find((function(e){return!!e.price}))||{},C.date=J.date||""):$||(J=null,C.date="")}J=(0,u.iT)(X,J);var ee=(0,p.EV)(E,x,b,n),te=(0,d.hC)(n,D,J,g,k),ne=te.salePropertyFinish,ie=te.dateFinish,oe=te.peopleFinish,re=(0,s.jY)(ne&&ie&&oe,J,n.state);return{footer:re,request:(0,i.Z)((0,i.Z)({},C),{},{optid:[].concat((0,o.Z)(O),(0,o.Z)(U))}),chioceDateData:J,calendar:X,firstLevelMapGrayPropertys:F,firstLevelMapSelectedPropertyIds:D,salePropertyFinish:ne,dateFinish:ie,peopleFinish:oe,peopleGrayProperty:ee,choicePeopleId:k,hasPromotion:Q}},f=function(e,t,n,h){var f=n.state,v=f.firstLevelMapChoiceDateData,_=void 0===v?{}:v,g=f.request,y=f.firstLevelMapSaleProperties,x=f.firstLevelMapSelectedPropertyIds,k=f.isPeopleAggregations,b=f.choicePeopleId,Z=f.peopleProperties,I=f.firstLevelInfos,w=f.firstLevelMapCalendar,S=(0,l.I8)(g),P=(0,l.I8)(x);Array.isArray(h)?P=e:P[h][t]==e?P[h][t]="":P[h][t]=e;var T=(0,a.s0)(b,n),C=(0,p.Kt)(T,n),D={},R={},j={},N={},V={},L=!1;I.forEach((function(e){var t=e.firstLevelId,i=e.priceMode,o=P[t],s=(0,u.BY)(o,n,t),l=y[t],p=w[t],h=C[t];R[t]=(0,a.ve)(s,h);var f=(0,u.vW)(o,n,h,b,l,p),v=f.newCalendar,x=f.hasPromotion;D[t]=v,L=L||x;var k=_[t];if(1==i&&[c.zh.detail,c.zh.sku].includes(S.usePage)){var Z=m(l,o);Z&&!k?k=v.find((function(e){return!!e.price}))||{}:Z||(k=null),g.date=(0,d.br)(t,k,g,I)}k=(0,u.iT)(v,k),_[t]=k;var T=(0,r.By)(s,k,n);j[t]=T,N[t]=(0,a.ve)(T,h)}));var E=(0,p.o)(N,n,b),A=(0,p.he)(N,E,n,b),F=A.firstLevelMapCommonResIds,M=A.filteredFirstLevelMapSubResId,O=A.commonResIds;I.forEach((function(e){var t=e.firstLevelId,i=e.priceMode,a=[].concat((0,o.Z)(M[t]),(0,o.Z)(F[t])),s=P[t],l=y[t],p=D[t],h=C[t],f=(0,d.fb)(N,R,t,n,b),v=(0,u.vW)(s,n,h,b,l,p,f),x=v.newCalendar,k=v.hasPromotion;D[t]=x,L=L||k;var Z=_[t];if(1==i&&[c.zh.detail,c.zh.sku].includes(S.usePage)){var w=m(l,s);w&&!Z?Z=x.find((function(e){return!!e.price}))||{}:w||(Z=null),S.date=(0,d.br)(t,Z,g,I)}Z=(0,u.iT)(x,Z),_[t]=Z;var T=(0,r.mQ)(a,s,Z,n,b,l,h,t,N),j=T.grayPropertys;V[t]=j}));var B=(0,p.EV)(j,k,Z,n),z=(0,d.Xz)(n,P,_,y,b),H=z.salePropertyFinish,U=z.dateFinish,G=z.peopleFinish,q=(0,s._i)(H&&U&&G,n.state);return{footer:q,request:(0,i.Z)((0,i.Z)({},S),{},{optid:[].concat((0,o.Z)(E),(0,o.Z)(O))}),firstLevelMapChoiceDateData:_,firstLevelMapGrayPropertys:V,firstLevelMapSelectedPropertyIds:P,salePropertyFinish:H,dateFinish:U,peopleFinish:G,peopleGrayProperty:B,choicePeopleId:b,firstLevelMapCalendar:D,hasPromotion:L,firstLevelMapCommonResIds:F,filteredFirstLevelMapSubResId:M}},m=function(e,t){var n=e.map((function(e,t){if(e.hide)return t})),i=t.every((function(e,t){return!!e||n.includes(t)}));return i}},48074:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y},BY:function(){return v},iT:function(){return g},vW:function(){return _}});var i=n(298),o=n(45023),r=n(22276),a=n(15259),s=n(77138),c=n(76966),l=n(22417),u=n(61252),d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1,o=[];e=e.filter((function(e){return!e.unAvailableReason}));for(var r=0;r<(null===(a=e)||void 0===a?void 0:a.length);r++){var a,s=e[r];if(t&&(null===s||void 0===s?void 0:s.templateSettingItemCode)==t){if(i=i>-1?Math.min(i,s.minPrice||s.salePrice):s.minPrice||s.salePrice,!n)break}else s.canBuyAlone&&o.push(s.minPrice||s.salePrice)}return i=-1==i?o.length?Math.min.apply(Math,o):void 0:i,i},p=n(48501),h=n(94411),f=n(55029),m=n(121),v=function(e,t,n){var i=[],a=t.state.packageResources,c=void 0===a?{}:a;if(!c)return i;var l=Object.keys(c),u="-".concat(e.join("-"),"-");return n&&(u="".concat(u).concat(n,"-")),s.F.load(u)?i=(0,r.Z)(s.F.load(u)):(l.map((function(t){e.every((function(e){return"-".concat(t,"-").indexOf("-".concat(e,"-"))>-1||!e}))&&(i=[].concat((0,r.Z)(i),(0,r.Z)(c[t])))})),s.F.save((0,o.Z)({},u,(0,r.Z)(i)))),i},_=function(e,t,n,a,l,h,m){!l&&(l=t.state.saleProperties),!h&&(h=t.state.calendar);var _=(0,r.Z)(e),g=t.state,y=g.request,x=g.minPricePerson,k=g.resourcetype,b=g.reservation,Z=g.isPack3,I=g.isUseDateSame;l&&l.length&&l.map((function(e,t){e.hide&&(_[t]="")}));var w="|".concat(_.join("|"),"|").concat(a,"|");if(s.F.load(w)&&(!Z||I))return s.F.load(w);!m&&(m=v(_,t)),m=(0,c.ve)(m,n);var S,P=[p.zh.actSku,p.zh.dayplay,p.zh.actSkuInline].includes(y.usePage),T=0,C=!1,D=!1,R=h.map((function(e,n){var o,r,a=!0,s="",c=e.disableText,l=!1;if(P){var u,p=e.resources.filter((function(e){return m.includes(e.resourceId)})),h=t.state.isNewGuideSku;o=d(p,x,!0),a=!!h,S=Math.min("number"===typeof S?S:1/0,"number"===typeof o?o:1/0),h&&null!==(u=e.resources)&&void 0!==u&&u.length&&(c=(0,f.AY)(p,b))}else{var v,_=t.state,g=_.productId,y=_.aggregation;e.resources.map((function(e){var t=(0,f.s2)(e.productId,g,y);if(!e.unAvailableReason&&m.includes(e.resourceId)&&t){var n=e.promotionPrice,i=e.salePrice;C||(C=(0,f.iG)(i,n)),o&&e.promotionPrice==o||(a=!o,o=Math.min(n,"number"==typeof o?o:1/0),r=Math.min(i,"number"==typeof r?r:1/0)),l||(l=e.canReserve),D||(D=e.canReserve)}}));var Z=e.resources;y||(Z=Z.filter((function(e){return e.productId==g})));var I=Z.filter((function(e){return m.includes(e.resourceId)}));(6==k||!y||y&&n<30)&&(s=(0,f.UE)(I)),null!==(v=e.resources)&&void 0!==v&&v.length&&(c=(0,f.AY)(I,b))}return o||0===o||T++,(0,i.Z)((0,i.Z)({},e),{},{price:o,hideFrom:a,invenText:s,disableText:c,isPromotionPrice:!P&&r!=o,hasReservation:l})}));return T&&T==R.length&&!P&&(0,u.gp)({type:"sku_resource_none",body:{title:"\u6240\u6709\u65e5\u671f\u88ab\u7f6e\u7070",content:JSON.stringify(y)}}),s.F.save((0,o.Z)({},w,{newCalendar:R,hasPromotion:C,hasReservation:D,actMinPrice:S})),{newCalendar:R,hasPromotion:C,hasReservation:D,actMinPrice:S}},g=function(e,t){if(!t||!e)return t;var n=e.find((function(e){return e.date==t.date}));return n&&(n=(0,i.Z)((0,i.Z)({},n),{},{resources:n.resources.filter((function(e){return!e.unAvailableReason}))})),n},y=function(e,t,n){var o,s=+new Date,u=n.state,d=u.chioceDateData,f=u.request,y=u.saleProperties,x=u.isPeopleAggregations,k=u.choicePeopleId,b=u.peopleGrayProperty,Z=u.peopleProperties,I=u.priceMode,w=(0,m.I8)(f);if((0,h.Yr)(n))return{};Array.isArray(e)?o=e:(o=(0,r.Z)(n.state.selectPropertyIds),o[t]==e?o[t]="":o[t]=e);var S=v(o,n),P=(0,c.s0)(k,n),T=_(o,n,P,k),C=T.newCalendar,D=T.hasPromotion,R=T.hasReservation,j=T.actMinPrice;if("U"==I&&(w.usePage==p.zh.actSku||w.usePage==p.zh.detail||w.usePage==p.zh.sku)){var N,V=y.map((function(e,t){if(e.hide)return t})),L=o.every((function(e,t){return!!e||V.indexOf(t)>-1}));if(L)d=C.find((function(e){return!!e.price})),w.date=null===(N=d)||void 0===N?void 0:N.date;else d=null,w.date=""}d=g(C,d);var E=(0,c.ve)(P,S),A=(0,a.By)(S,d,n);b=(0,c.YM)("U"===I?S:A,x,Z);var F=(0,c.ve)(A,P),M=(0,a.mQ)("U"===I?E:F,o,d,n,k),O=M.grayPropertys,B=(0,a.Se)(n,o,d,y,k),z=B.salePropertyFinish,H=B.dateFinish,U=B.peopleFinish,G=(0,l.iG)(z&&H&&U,d,F,n.state,o.some((function(e){return!!e}))?j:"");return console.log("\u9500\u552e\u5c5e\u6027\u9009\u4e2d\u8fd0\u7b97\u8ba1\u65f6",+new Date-s),{footer:G,request:(0,i.Z)((0,i.Z)({},w),{},{optid:(0,r.Z)(F)}),chioceDateData:d,calendar:C,grayPropertys:O,selectPropertyIds:o,salePropertyFinish:z,dateFinish:H,peopleFinish:U,peopleGrayProperty:b,choicePeopleId:k,hasPromotion:D,hasReservation:R,actMinPrice:j}}},48816:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var i=n(298),o=n(79301),r=n(22276),a=n(95308),s=n(48501),c=n(61252);t["Z"]=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var a,c,d,p,h,f,m,v,_,g,y,x,k,b,Z,I,w,S,P,T,C,D,R,j,N,V,L,E,A,F,M,O,B,z,H,U,G,q,W,K,Y,X,Q,J,$,ee,te,ne,ie,oe,re,ae,se,ce,le,ue;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=n||{},c=a.ticketInfo,d=void 0===c?{}:c,p=d.ticketTitle,h=void 0===p?"":p,f=a.selectPropertyIds,m=a.saleProperties,v=a.chioceDateData,_=void 0===v?{}:v,g=a.isSaleOut,y=a.hasSendLogError,x=void 0!==y&&y,k=a.firstLevelMapSelectedPropertyIds,b=a.firstLevelMapSaleProperties,Z=a.firstLevelMapChoiceDateData,I=void 0===Z?{}:Z,w=t.state,S=w.firstLevelInfos,P=w.isPack3,T=w.isUseDateSame,C="",C=(_||{}).date||"",P&&!T&&(D=[],S.forEach((function(e){var t=e.firstLevelId,n=I[t];D.push((n||{}).date||"")})),C=D.join("|")),R=t.state.request,j=void 0===R?{}:R,N=j.usePage,V=j.isUseInBooking,N!=s.zh.detail){e.next=32;break}L=!1,E=m,A=f,e.t0=t.devTraceType,e.next="afterFetch"===e.t0?14:"defaultSelect"===e.t0||"changeDate"===e.t0||"changeSaleProperty"===e.t0?23:"changePeople"===e.t0?28:30;break;case 14:if(!V){e.next=16;break}return e.abrupt("break",31);case 16:return F="",P&&(M=[],O=[],S.forEach((function(e){var t=e.firstLevelId;M.push.apply(M,(0,r.Z)(b[t])),O.push.apply(O,(0,r.Z)(k[t]))})),E=M,A=O),E.forEach((function(e,t){e.hide&&(F+="".concat(t?",":"").concat(e.salesPropertyName).concat(e.salesPropertyId,":"),e.salesPropertyValues.forEach((function(e){F+="".concat(e.salesPropertyValueName).concat(e.salesPropertyValueId," ")})))})),B=[{key:"PageId",value:t.header.clientInfo.pageId||""},{key:"\u7968\u79cd\u540d\u79f0",value:h||""},{key:"\u6e20\u9053\u5e73\u53f0",value:"app"},{key:"\u7248\u672c",value:t.header.clientInfo.version},{key:"\u662f\u5426\u5730\u63a8",value:"\u5426"},{key:"\u9500\u552e\u5c5e\u6027\u767d\u540d\u5355",value:F},{key:"\u975e\u767d\u540d\u5355\u552f\u4e00\u9500\u552e\u5c5e\u6027",value:A.join(",")}],u({contents:B},t,"sys_pageinfo"),g&&!x&&u({attrs:t.devTraceAttrs,module:"\u53ef\u8ba2\u963b\u65ad",value:"\u4ea7\u54c1\u5df2\u552e\u7f44",scene:"\u521d\u59cb\u5316"},t,"sys_show"),e.abrupt("break",31);case 23:return z=t.state,H=z.chioceDateData,U=void 0===H?{}:H,G=U.date,q=void 0===G?"":G,W=z.selectPropertyIds,K=void 0===W?[]:W,Y=z.firstLevelMapChoiceDateData,X=void 0===Y?{}:Y,Q=z.firstLevelMapSelectedPropertyIds,P&&!T&&(J=[],S.forEach((function(e){var t=e.firstLevelId,n=X[t];J.push((n||{}).date||"")})),q=J.join("|")),C!=q&&($="defaultSelect"==t.devTraceType?"\u521d\u59cb\u5316":"",u({attrs:t.devTraceAttrs,module:"\u4ef7\u683c\u65e5\u5386",before:q||"\u65e0",value:C||"\u65e0",scene:q?"\u5207\u6362\u65e5\u671f":"".concat($,"\u9009\u62e9\u65e5\u671f")},t,"changeDate"==t.devTraceType?"usr_change":"sys_change"),L=!0),"defaultSelect"!=t.devTraceType&&"changeSaleProperty"!=t.devTraceType||(ee=t.state.saleProperties,E=ee,te=K,P&&(ne=[],ie=[],oe=[],S.forEach((function(e){var t=e.firstLevelId;ne.push.apply(ne,(0,r.Z)(b[t])),ie.push.apply(ie,(0,r.Z)(k[t])),oe.push.apply(oe,(0,r.Z)(Q[t]))})),E=ne,A=ie,te=oe),re=[],ae=[],te.forEach((function(e,t){var n=l(E,e,t);n&&re.push(n)})),A.forEach((function(e,t){var n=l(E,e,t);n&&ae.push(n)})),JSON.stringify(re)!=JSON.stringify(ae)&&(u({attrs:t.devTraceAttrs,module:"\u9500\u552e\u5c5e\u6027",scene:("defaultSelect"==t.devTraceType?"\u521d\u59cb\u5316":"")+"\u6539\u53d8\u9500\u552e\u9009\u4e2d\u503c",jsonData:{"\u7f16\u8f91\u524d":re,"\u7f16\u8f91\u540e":ae},value:"\u6539\u53d8\u9500\u552e\u9009\u4e2d\u503c"},t,"changeSaleProperty"==t.devTraceType?"usr_change":"sys_change"),L=!0)),e.abrupt("break",31);case 28:return n.choicePeopleId!==t.state.choicePeopleId&&(le=null===(se=t.state.peopleProperties)||void 0===se?void 0:se.find((function(e){return e.peopleId===n.choicePeopleId})),ue=null===(ce=t.state.peopleProperties)||void 0===ce?void 0:ce.find((function(e){return e.peopleId===t.state.choicePeopleId})),u({attrs:t.devTraceAttrs,module:"\u4f7f\u7528\u4eba\u7fa4",before:(null===ue||void 0===ue?void 0:ue.peopleName)||"\u65e0",value:(null===le||void 0===le?void 0:le.peopleName)||"\u65e0",scene:ue?"\u5207\u6362\u4eba\u7fa4":"\u9009\u62e9\u4eba\u7fa4"},t,"usr_change"),L=!0),e.abrupt("break",31);case 30:return e.abrupt("break",31);case 31:L&&"defaultSelect"!=t.devTraceType&&(t.devTraceType="");case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](0),console.log("devtrace",e.t1);case 37:t.setState&&t.setState(n,i);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(t,n,i){return e.apply(this,arguments)}}();var l=function(e,t,n){if(t){var i=e[n];if(i){var o,r=null===(o=i.salesPropertyValues)||void 0===o?void 0:o.find((function(e){return e.salesPropertyValueId==t}));return{"\u9500\u552e\u5c5e\u6027\u540d\u79f0":i.salesPropertyName,"\u9500\u552e\u5c5e\u6027\u9009\u4e2d\u503c":r.salesPropertyValueName}}}},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sys_change";(0,c.Vg)((0,i.Z)((0,i.Z)({},e),{},{attrs:t.devTraceAttrs,action:n}))}},8066:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(22276),o=n(79301),r=n(298),a=n(95308),s=function(e,t){return{request:Object.assign({},t,(0,r.Z)((0,r.Z)({},e),{},{needResourceFilter:!0})),actionUrl:"/restapi/soa2/21052/getShelfResourceList"}},c=n(48816),l=n(22417),u=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i,a){var u,p,h,f,m,v,_,g,y,x,k,b,Z,I,w,S,P,T;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=t.itemIdList,p=t.date,h=t.token,f=t.choicePeopleId,m=t.optid,v=t.spotid,_=t.isNewNaquhua,g=t.isScanShelf,m&&0===m.length&&(0,c.E)({attrs:n.devTraceAttrs,module:"SKU",value:m,scene:"\u8d44\u6e90\u7b5b\u9009\u7ed3\u679c\u4e3a\u7a7a"},n,"usr_change"),y=n.header,x=n.state,k=n.changeKey,b=x.isUseDateSame,Z=x.isPack3,I=[{key:"callRecallPK",value:a?"pkOne":"pkOneOrMore"}],_&&I.push({key:"preposeInstallment",value:"true"}),g&&I.push({key:"isScanShelf",value:"onlyScanShelf"}),w=Z?b?{idList:m,date:p,spotid:v,tags:I,token:h}:{options:d(t,x),spotid:v,tags:I,token:h}:h?{itemIdList:u,date:p,token:h,tags:I}:{idList:m,spotid:v,date:p,tags:I},f&&(w.peoplePropertyId=Number(f)),e.next=11,n.http({list:[s(w,y)],needDevTrace:!0,devTraceData:{attrs:n.devTraceAttrs,scene:"\u53ec\u56de\u63a5\u53e3"}});case 11:if(S=e.sent,k===n.changeKey){e.next=14;break}return e.abrupt("return");case 14:if(!a){e.next=16;break}return e.abrupt("return",null===S||void 0===S?void 0:S[0].resourceIds);case 16:if(!Z||b){e.next=21;break}if(S&&S.length&&S[0].resourceIds&&S[0].resourceIds.length&&S[0].priceInfo){e.next=21;break}return null!==S&&void 0!==S&&null!==(P=S[0])&&void 0!==P&&P.__hasSendLogError||(0,c.E)({attrs:n.devTraceAttrs,module:"SKU",scene:"pk\u63a5\u53e3\u5931\u8d25"},n,"usr_change"),i&&i(),e.abrupt("return");case 21:if(S&&S.length&&S[0].resourceIds){e.next=24;break}return n.setState({footer:(0,r.Z)((0,r.Z)({},n.state.footer),{isGrayBtn:!1})},(function(){return i&&i()})),e.abrupt("return");case 24:if(S[0].resourceIds.length){e.next=27;break}return i&&i(),e.abrupt("return");case 27:T=(0,l.kQ)(S[0],n),n.setState({request:(0,r.Z)((0,r.Z)({},n.state.request),{optid:S[0].resourceIds}),footer:(0,r.Z)((0,r.Z)({},T),{isGrayBtn:!1})},(function(){return i&&i()}));case 29:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),d=function(e,t){var n=e.optid,o=e.date,r=t.diffDateBoxResIds,a=t.sameDateBoxResIds,s=t.boxResIdMapSubResId,c=t.firstLevelMapCommonResIds,l=void 0===c?{}:c,u=t.filteredFirstLevelMapSubResId,d=void 0===u?{}:u,p=t.firstLevelInfos,h=[],f={},m={},v=o.split("|"),_=1===Array.from(new Set(v)).length,g=[];return p.forEach((function(e,t){var n=e.firstLevelId;m[n]=v[t],g.push.apply(g,(0,i.Z)(l[n]))})),n.forEach((function(e){var t,n="";if(r.includes(e)){var i=s[e];i.forEach((function(i){var o=Object.keys(d).find((function(e){return d[e].includes(i)}))||"";n=m[o],t={resourceId:e,subResourceId:i},f[n]?f[n].push(t):f[n]=[t]}))}else if(a.includes(e))_&&(n=v[0],t={resourceId:e},f[n]?f[n].push(t):f[n]=[t]);else if(g.includes(e)){var o=Object.keys(l).find((function(t){return l[t].includes(e)}))||"";n=m[o],t={resourceId:e},f[n]?f[n].push(t):f[n]=[t]}})),Object.keys(f).forEach((function(e){var t=f[e],n={date:e,optionResources:t};h.push(n)})),h}},94411:function(e,t,n){"use strict";n.d(t,{mc:function(){return a},ct:function(){return s},Yr:function(){return c},Sm:function(){return l}});var i=n(298),o=n(32545),r=n(22417),a=function(e,t){var n=t.state,r=n.calendar,a=n.chioceDateData,s=n.request;if(!a||!a.date||null===s||void 0===s||!s.date)return!1;var c=s.date,l=s.endDate;if(!c||c&&l)return!1;var u=(0,o.FD)(e.date,c,!0);if(u<0)return!1;for(var d,p=r.findIndex((function(e){return e.date==a.date})),h=r[p].resources,f=function(){var e,n=r[m];if(!n.price&&0!=n.price||n.disableText||0==(null===(e=n.resources)||void 0===e?void 0:e.length))return t.toast.show("\u60a8\u9009\u62e9\u7684\u65e5\u671f\u4e2d\u6709\u552e\u7a7a\u65e5\u671f\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),{v:null};var i=[];h.map((function(e){n.resources.map((function(t){t.resourceId==e.resourceId&&i.push(t)}))})),h=i},m=p;m<u+p;m++)if(d=f(),d)return d.v;return(0,i.Z)((0,i.Z)({},a),{},{endDate:e.date,resources:h})},s=function(e,t){var n=t.state.request;n.date=e.date,n.endDate="";var i=(0,r.iG)(!1,null,null,t.state);return{chioceDateData:e,request:n,dateFinish:!1,footer:i}},c=function(e){var t=e.state,n=t.request,i=t.priceMode,o=t.isWIFI;return!("M"!=i||!n.date||n.endDate)&&(e.toast.show(o?"\u8bf7\u9009\u62e9\u8fd8\u4ef6\u65e5\u671f":"\u8bf7\u9009\u62e9\u7ed3\u675f\u65e5\u671f"),!0)},l=function(e,t,n){if(t&&n){var i=(e||[]).findIndex((function(e){return e.date==t})),r=(0,o.gw)(t,n),a=(e||[]).slice(i,i+r);return a}return null}},22417:function(e,t,n){"use strict";n.d(t,{kQ:function(){return s},iG:function(){return c},jY:function(){return l},_i:function(){return u}});var i=n(298),o=n(73435),r=n(48501),a=n(9349),s=function(e,t){var n,r,s=e||{},c=s.promotions,l=s.priceInfo,u=s.marketPriceInfo,d=s.flags,p=s.tags,h=s.preposeInstallmentInfo,f=l||{},m=f.price;m||0===m||(m=(null===(r=t.state)||void 0===r||null===(r=r.footer)||void 0===r?void 0:r.total)||0);var v=Number(m),_="";null!==u&&void 0!==u&&u.price&&(null===u||void 0===u?void 0:u.price)>(null===l||void 0===l?void 0:l.price)&&(_=null===u||void 0===u?void 0:u.price);var g=[];p&&p.length&&p.forEach((function(e){var t=e.tagType,n=e.tagItems;"Reservation"==t?n.forEach((function(e){["BookingSuccessCanUse","ReadyToUse"].includes(e.tagCode)&&g.push(e.tagName)})):["Refund","Apply","ticketsresourcetag"].includes(t)&&n.forEach((function(e){g.push(e.tagName)}))}));var y=t.state,x=y.ticketInfo,k=y.choicePeopleId,b=y.peopleProperties,Z="";if(k){var I=b.find((function(e){return e.peopleId==k}));Z=null===I||void 0===I?void 0:I.peopleName}else Z=(null===x||void 0===x?void 0:x.ticketResourceName)||"";var w=[{total:{name:Z,marketPrice:_?"\xa5".concat(_):"",price:"\xa5"+m}}],S=[],P=0,T=_?Number(_):0,C=(0,o.lu)(T,v),D=C>0?C:0;D&&S.push({total:{name:"\u643a\u7a0b\u9884\u8ba2\u4f18\u60e0",price:"-\xa5".concat(D),discountText:"\u60e0",isNoDash:!0}}),c&&c.length&&c.map((function(e){if(0==e.promotionstatus){var t,n,i=2==e.reductionMode&&3==e.type?e.startAmount:e.amount;S.push({total:{name:null===(t=e.descriptions)||void 0===t?void 0:t[0],price:"-\xa5".concat(i),descs:(null===(n=e.descriptions)||void 0===n?void 0:n.slice(1))||[],discountText:3==e.type?"\u60e0":"\u51cf",isNoDash:!0}}),P=(0,o.IH)(P,i)}})),S.length&&w.push.apply(w,S);var R,j=(0,o.lu)(m,P)>0?(0,o.lu)(m,P):0;if(null!==h&&void 0!==h&&h.discountAmount){var N=h.discountAmount;P=(0,o.IH)(P,N),j=(0,o.lu)(j,N)>0?(0,o.lu)(j,N):0,w.push({total:{name:"\u4f7f\u7528\u62ff\u53bb\u82b1\u4ed8\u6b3e\uff08\u65b0\u5ba2\u518d\u51cf\xa5".concat(N,"\uff09"),price:"-\xa5"+N}}),R=!0}else if(null!==h&&void 0!==h&&h.descInfoList){var V,L=null===(V=h.descInfoList)||void 0===V?void 0:V.find((function(e){return 1==e.type}));null!==L&&void 0!==L&&L.desc&&a.ZP.show(null===L||void 0===L?void 0:L.desc)}var E=0;T&&T>v&&v>j?E=(0,o.lu)(T,j):T&&T>v&&v==j?E=D:(!T||T<=v)&&v>j&&(E=(0,o.lu)(v,j));var A=null===(n=t.state)||void 0===n||null===(n=n.priceInfo)||void 0===n?void 0:n.priceTipList,F={title:"\u4f18\u60e0\u8bf4\u660e",content:w,priceTipList:A};return(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},t.state.footer),{deductDesc:E>0?"\u5df2\u4f18\u60e0".concat(E):"",marketPrice:_,subPriceDes:(d||[]).indexOf("minPriceFlag")<0?"":"\u8d77",total:j,isLoading:!1,showTags:g}),P||_?{footPop:F}:{}),{},{hasNaquhua:R})},c=function(e,t,n,i,a){var s=i.request,c=s.aggregation,l=s.usePage,u=i.countArr,d=void 0===u?[]:u,p=i.resources,h=void 0===p?[]:p,f=i.multiCalendar,m=i.footer,v=i.isNewGuideSku,_=i.selectedGuideId,g=i.additionalSale;!a&&(a=i.actMinPrice);var y=null===g||void 0===g?void 0:g.additionalResources.find((function(e){return e.salePropertyValueId==_&&e.available})),x=(null===y||void 0===y?void 0:y.price)||0,k={showTags:null===m||void 0===m?void 0:m.showTags};if(e){if(l==r.zh.actSku){var b=0,Z=!1;(f||[t]).map((function(e){d.map((function(t,i){var r,a=n.find((function(e){var t;return null===(t=h[i])||void 0===t?void 0:t.mixedIds.includes(e)})),s=null===(r=e.resources)||void 0===r?void 0:r.find((function(e){return e.resourceId==a}));s&&!s.unAvailableReason&&t&&(Z=!0,b=(0,o.IH)((0,o.dC)((null===s||void 0===s?void 0:s.salePrice)||0,t),b))}))})),k.total=Z?(0,o.IH)(b,x):""}else k.total=t.price;k.isGrayBtn=!!c,k.subPriceDes=l==r.zh.actSku||t.hideFrom?"":"\u8d77"}else k.total=v&&(t&&(0,o.IH)(t.price,x)||(0,o.IH)(a,x))||"",k.isGrayBtn=!0,k.subPriceDes=v&&(t&&(0,o.IH)(t.price,x)||(0,o.IH)(a,x))?"\u8d77":"";return k.isLoading=!1,k},l=function(e,t,n){var i=n.request.aggregation,o=n.footer,r={showTags:null===o||void 0===o?void 0:o.showTags};return e?(r.total=t.price,r.isGrayBtn=!!i,r.subPriceDes=t.hideFrom?"":"\u8d77"):(r.total="",r.isGrayBtn=!0,r.subPriceDes=""),r.isLoading=!1,r},u=function(e,t){var n=t.request.aggregation,i=t.footer,o={showTags:null===i||void 0===i?void 0:i.showTags};return o.isGrayBtn=!e||!!n,o.total="",o.subPriceDes="",o.isLoading=!1,o}},93936:function(e,t,n){"use strict";n.d(t,{ZU:function(){return o},NG:function(){return r}});var i={m_not_selected_text:{},otherHasTextViewCommon:{},m_month_title_text:{fontWeight:"500"}},o={m_scroll_view:{},m_selected:{},m_scrollview_wrapper:{},m_more_shadow_android:{},m_more_btn:{},m_tooltip_text:{}},r={flexLayout:{}};t["ZP"]=i},44434:function(e,t,n){"use strict";t["Z"]=function(e){var t=e.countArr,n=e.chioceDateData,o=e.resources,r=e.aggregation,a=e.resourceList,s=[],c=[],l="";return o.forEach((function(e,o){var l=null===n||void 0===n?void 0:n.resources.find((function(t){var n;return null===(n=e.mixedIds)||void 0===n?void 0:n.includes(t.resourceId)}));if(t[o])if(l){var u=l.inventoryNum,d=l.resourceName,p=l.minQuantity;u>0&&u<t[o]?(s.push(d),u>=p&&(t[o]=u,i(a,l.resourceId,u))):p>t[o]&&(t[o]=p,i(a,l.resourceId,p))}else if(r){var h=e.resourceName;c.push(h)}})),s.length&&(l="".concat(s.join("\u3001"),"\u5e93\u5b58\u4e0d\u8db3")),c.length&&(l+="".concat(l?"\uff0c":"").concat(c.join("\u3001"),"\u5df2\u8ba2\u5b8c")),l?"\u5df2\u9009\u65e5\u671f\u4e0b\uff0c".concat(l):""};var i=function(e,t,n){var i=null===e||void 0===e?void 0:e.find((function(e){return e.id==t}));i&&(i.count=n)}},19226:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(45023),l=n(58472),u=n(56034),d=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,s.Z)(o),"textRef",void 0),o.state={width:0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.dynamicCalcWidth()}},{key:"dynamicCalcWidth",value:function(){var e=this;(0,l.L6)(this.textRef,(function(t){t&&t.width&&e.setState({width:t.width+4})}))}}]),n}(u.ZP),p=n(72747),h=n(298),f=n(9353),m=n(17366),v=n(93936),_={m_tooltip_container:(0,h.Z)({backgroundColor:"rgba(34,34,34,0.85)",borderRadius:(0,m.Vh)(4),height:(0,m.Vh)(30),top:(0,m.Vh)(-40),position:"absolute"},m._7),m_tooltip_left:{left:(0,m.Vh)(0)},m_tooltip_right:{right:(0,m.Vh)(0)},m_tooltip_text_wrapper:(0,h.Z)({},m._7),m_tooltip_text:(0,h.Z)((0,h.Z)({color:"#fff",fontSize:(0,m.Vh)(12),position:"absolute"},(0,m.WB)((0,m.Vh)(8))),v.ZU.m_tooltip_text),m_tooltip_triangle_wrapper:(0,h.Z)((0,h.Z)({height:(0,m.Vh)(8),width:"100%",position:"absolute",left:0,bottom:(0,m.Vh)(-8)},m._7),{},{overflow:"hidden"}),m_tooltip_triangle:(0,h.Z)({width:(0,m.Vh)(10),height:(0,m.Vh)(10),backgroundColor:"rgba(34,34,34,0.85)"},(0,m.pm)({translateY:(0,m.Vh)(-6),rotate:"45deg"})),m_tooltip_left_triangle_wrapper:{alignItems:"flex-start"},m_tooltip_right_triangle_wrapper:{alignItems:"flex-end"},m_tooltip_left_triangle:{alignItems:"flex-start",marginLeft:(0,m.Vh)(14)},m_tooltip_right_triangle:{alignItems:"flex-end",marginRight:(0,m.Vh)(14)}},g=(0,f.Z)(_),y=n(2269),x=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.text,i=t.style,o=void 0===i?{}:i,r=t.placement,a=void 0===r?"center":r,s=this.state.width,c="left"===a,l="right"===a;return(0,y.jsxs)(p.G7,{style:(0,m.wh)([g.m_tooltip_container,c?g.m_tooltip_left:{},l?g.m_tooltip_right:{},{width:s},o]),children:[(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_triangle_wrapper,c?g.m_tooltip_left_triangle_wrapper:{},l?g.m_tooltip_right_triangle_wrapper:{}]),children:(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_triangle,c?g.m_tooltip_left_triangle:{},l?g.m_tooltip_right_triangle:{}])})}),(0,y.jsx)(p.G7,{style:(0,m.wh)([g.m_tooltip_text_wrapper,s?{opacity:1}:{opacity:0}]),children:(0,y.jsx)(p.xv,{className:"tooptip",ref:function(t){return e.textRef=t},style:(0,m.wh)([g.m_tooltip_text]),children:n})})]})}}]),n}(d)},29540:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(45023),l=n(56034),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,s.Z)(o),"props",void 0),(0,c.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(l.ZP),d=n(298),p=n(9353),h=n(17366),f={m_valid_component:{paddingTop:(0,h.Vh)(16),paddingRight:(0,h.Vh)(16),paddingLeft:(0,h.Vh)(16),paddingBottom:(0,h.Vh)(12)},m_valid_component_small:{paddingTop:(0,h.Vh)(20),paddingRight:(0,h.Vh)(16),paddingLeft:(0,h.Vh)(16),paddingBottom:(0,h.Vh)(12)},m_valid_component_head:{display:"flex",fontSize:(0,h.Vh)(17),fontWeight:"bold",fontFamily:"PingFangSC-Medium",lineHeight:(0,h.Nv)((0,h.Vh)(24)),color:"rgb(17,17,17)"},m_valid_component_small_head:{display:"flex",fontSize:(0,h.Vh)(15),fontWeight:(0,h.Ue)("500"),lineHeight:(0,h.Nv)((0,h.Vh)(19)),fontFamily:"PingFangSC-Medium",color:"rgb(17,17,17)"},m_valid_component_info:{display:"flex",marginTop:(0,h.Vh)(8),lineHeight:(0,h.Nv)((0,h.Vh)(19)),color:"rgb(17,17,17)",fontSize:(0,h.Vh)(15),fontWeight:"normal",fontFamily:"PingFangSC-Regular"},m_textcollapse:{marginTop:(0,h.Vh)(4)},m_textcollapse_content_text:{color:"rgb(17,17,17)",fontSize:(0,h.Vh)(15)},m_more_btn:(0,d.Z)((0,d.Z)({},h._),{},{paddingRight:(0,h.Vh)(4),paddingLeft:(0,h.Vh)(12),height:(0,h.Vh)(16),justifyContent:"flex-end"})},m=(0,p.Z)(f),v=n(72747),_=n(36472),g=n(2269),y=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.validDesc,n=e.disabledDateDesc,i=e.logs,o=void 0===i?{}:i,r=e.fstyle,a=(e.textHeight,e.ticketName),s=e.smallTitle,c=o.validUnfoldExposureLog,l=o.validUnfoldClickLog,u=o.validCollapseExposureLog,d=o.validCollapseClickLog,p=(0,h.Ec)(m,r);return(0,g.jsxs)(v.G7,{style:s?p.m_valid_component_small:p.m_valid_component,children:[(0,g.jsx)(v.G7,{children:(0,g.jsx)(v.xv,{style:s?p.m_valid_component_small_head:p.m_valid_component_head,children:a?"".concat(a,"\xb7\u4f7f\u7528\u6709\u6548\u671f"):"\u4f7f\u7528\u6709\u6548\u671f"})}),(0,g.jsx)(v.G7,{children:(0,g.jsx)(v.xv,{style:p.m_valid_component_info,children:t})}),!!n&&(0,g.jsx)(_.Z,{message:n,lineHeight:19,lineNum:2,prefix:".m_sku",logs:{prefixTest:"m_valid_component",clickUpExposureLog:u,clickDownExposureLog:c,clickUpLog:d,clickDownLog:l},fstyle:p,renderMoreButton:function(e){return(0,g.jsx)(v.o,{direction:90,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255,1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},style:m.m_more_btn,children:(0,g.jsx)(v.JO,{type:e?"arrowdown":"arrowup",size:(0,h.Vh)(24),color:"#111"})})}})]})}}]),n}(u)},23862:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(81876)),c=n(45023),l=n(56034),u=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e){var o;return(0,i.Z)(this,n),o=t.call(this,e),(0,c.Z)((0,s.Z)(o),"props",void 0),(0,c.Z)((0,s.Z)(o),"state",void 0),o.state={},o}return(0,o.Z)(n)}(l.ZP),d=n(72747),p=n(298),h=n(9353),f=n(17366),m={m_sku_warn:(0,p.Z)({display:"flex",backgroundColor:"rgb(255,250,245)",paddingRight:(0,f.Vh)(16),paddingLeft:(0,f.Vh)(16),paddingTop:(0,f.Vh)(12),paddingBottom:(0,f.Vh)(12),flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},(0,f.ix)("border-box")),m_sku_warn_text:{color:"rgb(255,119,0)",fontSize:(0,f.Vh)(12),lineHeight:(0,f.Nv)((0,f.Vh)(17))},m_sku_warn_padding:{paddingBottom:(0,f.Vh)(8)}},v=(0,h.Z)(m),_=n(2269),g=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.priceInfo,i=e.hasPromotion,o=e.isDateShowPrice,r=e.showCalendar,a=e.priceMode,s=e.hasReservation,c=!!n&&i&&o,l="S"===a&&r&&(c||s);return(0,_.jsx)(_.Fragment,{children:t?(0,_.jsx)(d.G7,{style:(0,f.wh)([v.m_sku_warn,l?v.m_sku_warn_padding:{}]),children:(0,_.jsx)(d.xv,{style:v.m_sku_warn_text,children:t})}):null})}}]),n}(u)},35329:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(57042),o=n(24460),r=n(21867),a=n(86066),s=(n(90201),n(72747)),c=n(56034),l=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(c.ZP),u=n(9353),d=n(56569),p=n(17366),h={m_note_wrapper:{paddingTop:9,paddingRight:16,paddingLeft:16,backgroundColor:"#FFFFFF"},m_note_content:{marginBottom:11,display:"flex",flexDirection:"row"},m_note_dot_content:{backgroundColor:"#666666",borderRadius:4,width:4,height:4,marginRight:8,marginTop:7},m_note_text:{fontSize:14,color:"#333333",lineHeight:(0,p.Nv)(18)},m_note_text_isdot:{maxWidth:d.Db.get("window").width-44}},f=(0,u.Z)(h),m=n(2269),v=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return(0,m.jsx)(s.G7,{style:f.m_note_wrapper,children:!!t.length&&t.map((function(e,t){return(0,m.jsxs)(s.G7,{style:f.m_note_content,children:["dotted"===e.type&&(0,m.jsx)(s.G7,{style:f.m_note_dot_content}),(0,m.jsx)(s.xv,{style:(0,p.wh)([f.m_note_text,"dotted"===e.type?f.m_note_text_isdot:{}]),children:e.text})]},"note".concat(t))}))})}}]),n}(l)},31137:function(e,t,n){"use strict";n.d(t,{AF:function(){return kt},GQ:function(){return _i},fG:function(){return St},c0:function(){return o},vw:function(){return ai},GI:function(){return r},x:function(){return Rn},t_:function(){return A},sR:function(){return bt},rD:function(){return le},Y:function(){return ke},hQ:function(){return ii},cn:function(){return fe},OK:function(){return Jn},HG:function(){return s},JO:function(){return oi},H5:function(){return Vt},Px:function(){return c},ft:function(){return Vn},pT:function(){return tt},N9:function(){return sn},UJ:function(){return ht},X_:function(){return Ie},hj:function(){return i},hS:function(){return a},En:function(){return ee},iY:function(){return ge},IH:function(){return hi},AK:function(){return V},Y8:function(){return En},y0:function(){return L},dC:function(){return mi},tO:function(){return sn},lu:function(){return fi},ua:function(){return i}});var i={};n.r(i),n.d(i,{isAlipay:function(){return Ve},isAndroid:function(){return Pe},isApp:function(){return Ce},isBaidu:function(){return je},isH5:function(){return De},isIOS:function(){return Se},isIPhoneX:function(){return Te},isInAlipay:function(){return ze},isInApp:function(){return He},isInBaidu:function(){return Oe},isInKuaiShou:function(){return Me},isInMini:function(){return Ge},isInQQ:function(){return qe},isInQuick:function(){return Fe},isInServer:function(){return Ae},isInTouTiao:function(){return Be},isInWechat:function(){return Ue},isLowIOS:function(){return We},isMini:function(){return Re},isQQ:function(){return Ee},isTouTiao:function(){return Ne},isWechat:function(){return Le}});var o={};n.r(o),n.d(o,{getBoundingClientRect:function(){return rt}});var r={};n.r(r),n.d(r,{APP_TYPE:function(){return At},DEV_ENV_TYPE:function(){return Et},PLATFORM_TYPE:function(){return Lt},getAppId:function(){return Ut},getAppType:function(){return zt},getClientID:function(){return Ht},getDevEnv:function(){return Ot},getPlatform:function(){return Bt}});var a={};n.r(a),n.d(a,{logDevTrace:function(){return M},logExposure:function(){return B},logMetric:function(){return O},logSendPV:function(){return z},logTrace:function(){return F}});var s={};n.r(s),n.d(s,{setNavigationBarTitle:function(){return Ln}});var c={};n.r(c),n.d(c,{navigateBack:function(){return qn},navigateTo:function(){return Un},redirectTo:function(){return Gn}});var l=n(90201),u=n(2269),d=n(93212),p=n(298),h=n(57042),f=n(24460),m=n(21867),v=n(86066),_=n(71515),g=n(81876),y=n(45023),x=n(92954),k=n.n(x),b=function(e){return 2*e+"rpx"},Z=b,I=function(e,t){var n=function(e){return"number"===typeof e?t?Z(e):e+"px":e},i={width:n,height:n,fontSize:n,lineHeight:function(e){return"number"===typeof e&&e>11?e+"px":e},left:n,top:n,right:n,bottom:n,paddingLeft:n,paddingRight:n,paddingTop:n,paddingBottom:n,marginLeft:n,marginRight:n,marginTop:n,marginBottom:n,borderWidth:n,borderTopLeftRadius:n,borderBottomRightRadius:n,borderTopRightRadius:n,borderBottomLeftRadius:n,borderRadius:n,minHeight:n,minWidth:n,maxHeight:n,maxWidth:n,shadowRadius:n,shadowOffset:function(e){if("object"===(0,d.Z)(e))for(var t in e)e[t]="number"===typeof e[t]?e[t]+"px":e[t]},flexBasis:function(e){return"number"===typeof e||"string"===typeof e&&-1==e.indexOf("px")?e+"px":e},flexGrow:function(e){return"string"===typeof e?+e:e},flexShrink:function(e){return"string"===typeof e?+e:e}},o=function(){if("function"===typeof e[r]){var t=e[r];e[r]=function(){var e=t.apply(void 0,arguments);for(var n in e)i[n]&&(e[n]=i[n](e[n]));return e}}else if("object"!==(0,d.Z)(e[r]))i[r]&&(e[r]=i[r](e[r]));else for(var n in e[r])i[n]&&(e[r][n]=i[n](e[r][n]))};for(var r in e)o();var a="";for(var s in e)a+=s.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))+": "+e[s]+";\n";return a},w=I,S=function(e){k().setClipboardData({data:e})},P=S,T=n(32180)["document"],C=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"linkArr",void 0),(0,y.Z)((0,g.Z)(i),"htmlViewUUID",void 0),(0,y.Z)((0,g.Z)(i),"el",void 0),(0,y.Z)((0,g.Z)(i),"htmlOperation",(function(){var e=i.props,t=e.imageProps,n=e.linkProps,o=e.tagsStyles,r=e.unitTransform,a=t||{},s=a.onImageClick,c=a.imageCallback,l=a.imageStyle,u=(a.mode,a.width),d=a.height,p=n||{},h=p.onLinkClick,f=p.linkCallback,m=(p.isCopy,0);k().options.html.transformElement=function(e){var a;if(t&&"image"===e.nodeName){var p;if(c&&c(null===e||void 0===e||null===(p=e.props)||void 0===p?void 0:p.src,m),e.setAttribute("mode","widthFix"),l){var v=e.getAttribute("style")+";";v+=w(l),u&&(v+="width:".concat(u,";")),d&&(v+="height:".concat(d,";")),e.setAttribute("style",v)}s&&function(t){e.addEventListener("tap",(function(){var n;return s(null===e||void 0===e||null===(n=e.props)||void 0===n?void 0:n.src,t)}))}(m),m++}if(n&&"text"===(null===e||void 0===e?void 0:e.nodeName)&&null!==(a=e.getAttribute("class"))&&void 0!==a&&a.includes("h5-a")&&e.getAttribute("href")){var _,g;i.el.push(e);var y=null===e||void 0===e||null===(_=e.childNodes)||void 0===_||null===(_=_[0])||void 0===_?void 0:_._value;f&&f(null===e||void 0===e||null===(g=e.props)||void 0===g?void 0:g.href,y),h&&e.addEventListener("tap",(function(){var t;return h(null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.href,y)}))}if(o){var x,k=Object.keys(o),b=null===e||void 0===e||null===(x=e.props)||void 0===x||null===(x=x.class)||void 0===x?void 0:x.replace("h5-","");if(b&&k.includes(b)){var Z=e.getAttribute("style")+";";Z+=w(o[b],r),e.setAttribute("style",Z)}}return e}})),i.htmlOperation(),i.linkArr=[],i.el=[],i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.linkProps,t=e||{},n=t.isCopy;n&&this.el.forEach((function(e){var t=null===e||void 0===e?void 0:e.props.href,n=T.createElement("image");n.setAttribute("src","https://dimg04.c-ctrip.com/images/0AS5a12000alzjrmf176C.png"),n.style.width="18px",n.style.height="18px",n.style.position="relative",n.style.top="5px",n.style.display="inline-block",n.addEventListener("tap",(function(){return P(t)})),e.parentNode.insertBefore(n,e.nextSibling)}))}}]),n}(l.Component),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#006FF6",n=e.replace(/<img.*?>|\/>/g,""),i=n.match(/<a.*?>.*?<\/a>/g)||[],o="";return i.forEach((function(n){var i=e.indexOf(n);if(-1!==i){var r=e.slice(0,i);r&&(o+=R(r,t)),e=e.slice(i+n.length,e.length),n=n.slice(0,2)+' style="color:'.concat(t,'"')+n.slice(2,n.length),o+=n}})),e&&(o+=R(e,t)),o},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#006FF6",n=e.replace(/<img.*?>|\/>/g,""),i=/((http|https):\/\/(\w+)+(\.(\w+)+)+(\.(\w+)+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g,o=n.match(i)||[],r=e.replace(i,(function(e){return o.indexOf(e)>-1?"<a href='".concat(e,"' style='color:").concat(t,"'>").concat(e,"</a>"):e}));return r},j=D,N=n(22276),V=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat((0,N.Z)(t.filter(Boolean))))},E=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){return(0,h.Z)(this,n),t.call(this,e)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.html,n=e.className,i=e.baseFontStyle,o=e.linkProps,r=e.style,a=o?j(t):t;return(0,u.jsx)(_.View,{style:(0,p.Z)((0,p.Z)({wordBreak:"break-word"},"object"==(0,d.Z)(i)?i:{}),"object"==(0,d.Z)(r)?r:{}),className:V("xt-htmlview",n,this.htmlViewUUID),dangerouslySetInnerHTML:{__html:a}})}}]),n}(C),A=E;function F(e,t){var n,i;null===(n=x.Current.page)||void 0===n||null===(i=n["ubtTrace"])||void 0===i||i.call(n,e,t)}function M(e,t){var n,i;null===(n=x.Current.page)||void 0===n||null===(i=n["ubtDevTrace"])||void 0===i||i.call(n,e,t)}function O(e,t,n){var i,o;null===(i=x.Current.page)||void 0===i||null===(o=i["ubtMetric"])||void 0===o||o.call(i,{name:e,value:t,tag:n||{}})}function B(e,t,n){var i,o;null===(i=x.Current.page)||void 0===i||null===(o=i["ubtExposure"])||void 0===o||o.call(i,e,t,n)}function z(e,t){var n,i;null===(n=x.Current.page)||void 0===n||null===(i=n["ubtSendPV"])||void 0===i||i.call(n,(0,p.Z)({pageId:e},t||{}))}var H=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),i.state={isActive:!1},i.handleClick=i.handleClick.bind((0,g.Z)(i)),i.handleTouchEnd=i.handleTouchEnd.bind((0,g.Z)(i)),i.handleTouchStart=i.handleTouchStart.bind((0,g.Z)(i)),i.handleOnLongPress=i.handleOnLongPress.bind((0,g.Z)(i)),i}return(0,f.Z)(n,[{key:"handleClick",value:function(e){var t=this,i=this.props.onClick,o=n._Tasks;o.forEach((function(n){n&&n(e,t)})),this.sendLog(),i&&i(e)}},{key:"handleTouchStart",value:function(e){var t=this.props,n=t.withFeedback,i=t.onTouchStart,o=this.state.isActive;n&&!o&&this.setState({isActive:!0}),i&&i(e)}},{key:"handleTouchEnd",value:function(e){var t=this.props,n=t.withFeedback,i=t.onTouchEnd;n&&this.setState({isActive:!1}),i&&i(e)}},{key:"handleOnLongPress",value:function(e){var t=this.props,n=t.withFeedback,i=t.onLongPress;n&&this.setState({isActive:!1}),i&&i(e)}},{key:"sendLog",value:function(){var e=this.props.log;if(e){var t=Array.isArray(e)?e:[e];t.length<=0||t.forEach((function(e){e.key&&F(e.key,e.params||{})}))}}},{key:"isNeedRegisterClick",value:function(){var e=this.props,t=e.onClick,i=e.log,o=n._Tasks.length>0,r=Array.isArray(i)?i.length>0:!!i;return o||r||!!t}},{key:"isNeedRegisterTouchStart",value:function(){var e=this.props,t=e.onTouchStart,n=e.withFeedback;return!!t||!!n}},{key:"isNeedRegisterTouchEnd",value:function(){var e=this.props,t=e.onTouchEnd,n=e.withFeedback;return!!t||!!n}},{key:"isNeedRegisterLongPress",value:function(){var e=this.props,t=e.onLongPress,n=e.withFeedback;return!!t||!!n}}]),n}(l.Component);(0,y.Z)(H,"_Tasks",[]);var U,G=n(68277),q=n(56884),W=n.n(q),K=["id","className","testID"],Y=["id","className"],X=function(e){var t=e||{},n=t.ubtKey,i=t.data;return n?{"data-expose":{ubtKeyName:n,data:i},id:"".concat(Date.now(),"_").concat(Math.random().toString().slice(2,6)),className:"autoExpose"}:{}},Q=function(e){return l.forwardRef((function(t,n){var i=t||{},o=i.id,r=i.className,a=i.testID,s=(0,G.Z)(i,K),c=(0,l.useMemo)((function(){return X(a)}),[a]),d=c.id,h=c.className,f=(0,G.Z)(c,Y);return(0,u.jsx)(e,(0,p.Z)((0,p.Z)((0,p.Z)({},f),s),{},{id:V(o,d),className:V(r,h),ref:n}))}))},J=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=void 0===t?"":t,i=e.style,o=void 0===i?{}:i,r=e.activeOpacity,a=void 0===r?.2:r,s=e.activeStyle,c=void 0===s?{}:s,l=e.withFeedback,d=void 0!==l&&l,h=e.children,f=this.state.isActive,m=d?L({opacity:a},c):{},v=f?L(o,m):o,g=this.isNeedRegisterClick(),y=this.isNeedRegisterTouchStart(),x=this.isNeedRegisterTouchEnd(),k=this.isNeedRegisterLongPress();return(0,u.jsx)(_.View,(0,p.Z)((0,p.Z)({},this.props),{},{className:V("xt-xview",n),style:v,hoverStyle:d?m:void 0,onClick:g?this.handleClick:void 0,onTouchStart:y?this.handleTouchStart:void 0,onTouchEnd:x?this.handleTouchEnd:void 0,onLongPress:k?this.handleOnLongPress:void 0,children:h}))}}]),n}(H);U=J,(0,y.Z)(J,"register",(function(e){var t;Array.isArray(e)?(t=U._Tasks).push.apply(t,(0,N.Z)(e)):U._Tasks.push(e)}));var $=Q(J);$.register=J.register;var ee=$,te=function(e){var t=e.renderBottom,n=e.renderTop,i=e.layout,o=e.children,r=n||l.Fragment,a=t||l.Fragment;return oe(i)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_.View,{style:{display:"inline-flex"},children:(0,u.jsx)(r,{})}),o,(0,u.jsx)(_.View,{style:{display:"inline-flex"},children:(0,u.jsx)(a,{})})]}):(0,u.jsxs)(_.View,{children:[(0,u.jsx)(r,{}),o,(0,u.jsx)(a,{})]})},ne=n(32180)["document"],ie=["layout","onTouchMove","className","renderBottom","renderTop"],oe=function(e){return"horizontal"===e},re="nearest",ae=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"$ref",void 0),(0,y.Z)((0,g.Z)(i),"reWriteScrollTo",(function(){var e=i.props.layout;i.$ref.current.oldScrollTo=i.$ref.current.scrollTo,i.$ref.current.scrollTo=function(t){var n=t.offset,o=t.animated,r=ne.getElementsByClassName("xt-flatlist_warp")[0];if(r&&null!==r&&void 0!==r&&r.scrollTo)return r.scrollTo({top:oe(e)?0:n,left:oe(e)?n:0,behavior:o?"smooth":"instant"});if(i.$ref.current.oldScrollTo)return i.$ref.current.oldScrollTo({top:oe(e)?0:n,left:oe(e)?n:0,behavior:o?"smooth":"instant"});i.setState({scrollWithAnimation:o});var a=n+.1*Math.random();k().nextTick((function(){oe(e)?i.setState({scrollLeft:a,scrollTop:0}):i.setState({scrollTop:a,scrollLeft:0})}))}})),(0,y.Z)((0,g.Z)(i),"scrollToIndex",(function(e){var t=e.index,n=e.align,o=void 0===n?"start":n,r=e.animated,a=void 0===r||r,s=e.alignToTop,c=void 0===s||s,l=i.props.layout,u=ne.getElementById("xt-flatlist_".concat(t)),d={start:"start",center:"center",end:"end",auto:"nearest"},p=d[o];if(u&&u.scrollIntoView){var h=re,f=re;oe(l)?f=p:h=p,u.scrollIntoView({alignToTop:c,behavior:a?"smooth":"instant",block:h,inline:f})}else i.setState({scrollWithAnimation:a}),k().nextTick((function(){i.setState({scrollIntoView:"xt-flatlist_".concat(t),scrollIntoViewAlignment:p||re})}))})),i.state={isScrolled:!1,scrollTop:0,scrollLeft:0,scrollIntoView:null,scrollIntoViewAlignment:null,scrollWithAnimation:!0},i.$ref=i.props.forwardedRef||l.createRef(),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.reWriteScrollTo(),this.$ref.current.scrollToIndex=this.scrollToIndex}},{key:"renderChildren",value:function(){var e,t=this.props,n=t.itemData,i=t.item,o=t.layout,r=t.initialNumToRender,a=void 0===r?10:r;return e=this.state.isScrolled?n:n.slice(0,a),(0,u.jsx)(u.Fragment,{children:e.map((function(e,t){var n,r=null!==(n=(0,u.jsx)(_.View,{className:oe(o)?"xt-flatlist_item":"",id:"xt-flatlist_".concat(t),children:i({item:e,index:t})},"xt-flatlist_".concat(t)))&&void 0!==n?n:(0,u.jsx)(u.Fragment,{});return r}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.layout,i=t.onTouchMove,o=t.className,r=t.renderBottom,a=t.renderTop,s=(0,G.Z)(t,ie),c=this.state,l=c.scrollTop,d=c.scrollLeft;return delete s.forwardedRef,(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(_.ScrollView,(0,p.Z)((0,p.Z)({},s),{},{ref:this.$ref,scrollX:oe(n),scrollY:!oe(n),scrollTop:l,scrollLeft:d,enhanced:!0,scrollIntoView:this.state.scrollIntoView,scrollWithAnimation:this.state.scrollWithAnimation,scrollIntoViewAlignment:this.state.scrollIntoViewAlignment,onScroll:function(){var t;e.setState({scrollIntoView:null,scrollIntoViewAlignment:null}),e.props.onScroll&&(t=e.props).onScroll.apply(t,arguments)},onTouchMove:function(){e.state.isScrolled||e.setState({isScrolled:!0}),i&&i.apply(void 0,arguments)},className:V("xt-flatlist_scroll",o),children:(0,u.jsx)(te,{renderBottom:r,renderTop:a,layout:n,children:this.renderChildren()})}))})}}]),n}(l.Component);(0,y.Z)(ae,"defaultProps",{layout:"vertical"});var se=["children","fontFamily","style"],ce=function(e){var t=e.children,n=e.fontFamily,i=e.style,o=void 0===i?{}:i,r=(0,G.Z)(e,se);return(0,u.jsx)(_.Text,(0,p.Z)((0,p.Z)({style:(0,p.Z)({fontFamily:n},o)},r),{},{children:t}))},le=l.memo(ce),ue=["start","end","colors","locations","useAngle","angleCenter","angle","style","children"],de=[["top left","top","top right"],["left",null,"right"],["bottom left","bottom","bottom right"]];function pe(e,t){var n,i=null===(n=de[t.y-e.y+1])||void 0===n?void 0:n[t.x-e.x+1];return i?"to ".concat(i):null}var he=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){var e;(0,h.Z)(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),(0,y.Z)((0,g.Z)(e),"state",{width:1,height:1}),(0,y.Z)((0,g.Z)(e),"getAngle",(function(){var t=e.props,n=t.start,i=t.end;if(e.props.useAngle)return e.props.angle+"deg";var o=pe(n,i);if(o)return o;var r=Math.atan2(e.state.width*(e.props.end.y-e.props.start.y),e.state.height*(e.props.end.x-e.props.start.x))+Math.PI/2;return r+"rad"})),(0,y.Z)((0,g.Z)(e),"getColors",(function(){return e.props.colors.map((function(t,n){var i=e.props.locations[n],o="";return i&&(o=" "+100*i+"%"),t+o})).join(",")})),e}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.start,e.end,e.colors,e.locations,e.useAngle,e.angleCenter,e.angle,e.style),n=void 0===t?{}:t,i=e.children,o=(0,G.Z)(e,ue);return(0,u.jsx)(_.View,(0,p.Z)((0,p.Z)({},o),{},{style:(0,p.Z)((0,p.Z)({},n),{},{backgroundImage:"linear-gradient(".concat(this.getAngle(),",").concat(this.getColors(),")")}),children:i}))}}]),n}(l.PureComponent);(0,y.Z)(he,"defaultProps",{start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0});var fe=he,me=function(e){var t=e.className,n=e.style;return(0,u.jsx)(_.View,{className:V("xt-iphonex-adapter__top",t),style:n})},ve=function(e){var t=e.className,n=e.style;return(0,u.jsx)(_.View,{className:V("xt-iphonex-adapter__bottom",t),style:n})},_e={Top:me,Bottom:ve},ge=_e,ye=function(e){return(0,u.jsx)(_.Image,(0,p.Z)({},e))},xe=Q(ye),ke=xe,be=n(90129),Ze=l.forwardRef((function(e,t){var n=e.numberOfLines,i=e.style,o=e.className,r=(0,l.useMemo)((function(){var e=Number(n);return!e||e<=0?["",{}]:1===e?["xt-text_single_line",{}]:["xt-text_multy_line",{"-webkit-line-clamp":"".concat(e)}]}),[n]),a=(0,be.Z)(r,2),s=a[0],c=a[1];return(0,u.jsx)(_.Text,(0,p.Z)((0,p.Z)({},e),{},{className:V(o,s),style:L(i,c),numberOfLines:n?"".concat(n):"",ref:t}))})),Ie=Q(Ze),we=k().getSystemInfoSync(),Se=function(e){return"ios"===we.platform},Pe=function(e){return"android"===we.platform},Te=function(e){var t=we.model,n=Ve(),i=n?/iPhone(\d{0,3}),(\d{0,3})/i:/iPhone (X|\d{0,3})/,o=t.match(i)||[],r=n?Number(o[1])>10||10==Number(o[1])&&(3==Number(o[2])||6==Number(o[2])):"X"==o[1]||Number(o[1])>10;return r},Ce=function(){return!1},De=function(){return!1},Re=function(){return!0},je=function(){var e="weapp".toUpperCase();return e==x.ENV_TYPE.SWAN},Ne=function(){var e="weapp".toUpperCase();return e==x.ENV_TYPE.TT},Ve=function(){var e="weapp".toUpperCase();return e==x.ENV_TYPE.ALIPAY},Le=function(){var e="weapp".toUpperCase();return e==x.ENV_TYPE.WEAPP},Ee=function(){var e="weapp".toUpperCase();return e==x.ENV_TYPE.QQ},Ae=function(e){return!1},Fe=function(e){return!1},Me=function(e){return!1},Oe=function(e){return!1},Be=function(e){return!1},ze=function(e){return!1},He=function(e){return!1},Ue=function(e){return!1},Ge=function(e){return!1},qe=function(e){return!1},We=function(e){var t=we.system,n=t.indexOf("iOS")>-1;if(n){var i=parseInt(t.split(" ")[1].split(".")[0]);if(i<=13)return!0}return!1},Ke=n(32180)["window"],Ye=function(e){Ae()||Ke["CtripBar"]&&Ke["CtripBar"]["app_set_navbar_hidden"]&&Ke["CtripBar"]["app_set_navbar_hidden"](e)},Xe=function(e){Ae()||Ke["CtripBar"]&&Ke["CtripBar"]["appSetStatusBarStyle"]&&Ke["CtripBar"]["appSetStatusBarStyle"](e)},Qe=function(){Ae()||Ke["CtripBar"]&&Ke["CtripBar"]["appSetTransparentForWindow"]&&Ke["CtripBar"]["appSetTransparentForWindow"]()},Je=function(){return new Promise((function(e,t){try{if(!He())return e(0);if(Se()){var n=20;return Te()&&(n+=24),void e(n)}Ke["CtripBar"]&&Ke["CtripBar"]["appGetStatusBarHeight"]&&Ke["CtripBar"]["appGetStatusBarHeight"]((function(t){e(t/Ke.devicePixelRatio)}))}catch(e){t(e)}}))},$e=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),i.updateStatusBarHeight(),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.handleH5InApp()}},{key:"componentDidUpdate",value:function(e,t,n){this.handleH5InApp()}},{key:"handleH5InApp",value:function(){He()&&(this.updateStatusBarHeight(),this.updateFromProps())}},{key:"updateStatusBarHeight",value:function(){Je().then((function(e){n.currentHeight=e}))}},{key:"updateFromProps",value:function(){var e=this.props,t=e.barStyle,i=e.translucent,o=e.hidden;t&&n.setBarStyle(t),"boolean"===typeof i&&n.setTranslucent(i),"boolean"===typeof o&&n.setHidden(o)}}]),n}(l.Component);(0,y.Z)($e,"currentHeight",void 0),(0,y.Z)($e,"setHidden",(function(e,t){Ye(e)})),(0,y.Z)($e,"setBarStyle",(function(e,t){Xe(e)})),(0,y.Z)($e,"setNetworkActivityIndicatorVisible",(function(e){})),(0,y.Z)($e,"setBackgroundColor",(function(e,t){})),(0,y.Z)($e,"setTranslucent",(function(e){e&&Qe()}));var et=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){return(0,u.jsx)(u.Fragment,{})}}]),n}($e),tt=et,nt=n(79301),it=n(95308),ot=function(e,t,n){var i=e,o=!Ve()&&!je();if(o){var r=t||"__xtaro__root__";i=".".concat(r," >>> ").concat(e)}k().createSelectorQuery().select(i).boundingClientRect().exec((function(t){var i=t;if(t&&t.length&&(i=t[0]),i||!o)return n(i);k().createSelectorQuery().select(e).boundingClientRect().exec((function(e){var t=e;return e&&e.length&&(t=e[0]),n(t)}))}))},rt=function(e){return new Promise((function(t,n){var i,o=e.node,r=e.prefixCls;if(!o)return n({errMsg:"getBoundingClientRect:fail node is not exist"});var a,s,c="",l=(null===o||void 0===o?void 0:o.uid)||(null===o||void 0===o||null===(i=o.props)||void 0===i?void 0:i.id)||(null===o||void 0===o?void 0:o.id),u="";l||(u=(o.className||(null===(a=o.props)||void 0===a?void 0:a.className)||(null===(s=o.props)||void 0===s?void 0:s.class)||"").split(" ").filter(Boolean).map((function(e,t){return 0==t?"".concat(e):0==e.indexOf(".")?" ".concat(e):".".concat(e)})).join(""));if(c=l?"#".concat(l):u?".".concat(u):"",!c)return n({errMsg:"getBoundingClientRect:fail node requires a class name or unique id"});try{ot(c,r,(function(e){t(e)}))}catch(e){return n({errMsg:"getBoundingClientRect:fail ".concat(e)})}}))},at=function(e){var t,n=e.data,i=void 0===n?[]:n,o=e.current,r=void 0===o?0:o,a=e.scrollAble,s=void 0===a||a,c=e.initialNumToRender,u=e.onTabChange,d=e.onTabClick,p=e.prefixCls,h=void 0===p?"":p,f=e.indicatorAnimate,m=void 0===f||f,v=(0,l.useRef)(Math.random().toString(36).substr(6)),g=(0,l.useState)(r),y=(0,be.Z)(g,2),x=y[0],b=y[1],Z=(0,l.useState)(0),I=(0,be.Z)(Z,2),w=I[0],S=I[1],P=(0,l.useState)([]),T=(0,be.Z)(P,2),C=T[0],D=T[1],R=(0,l.useState)(0),j=(0,be.Z)(R,2),N=j[0],V=j[1],L=(0,l.useState)(),E=(0,be.Z)(L,2),A=E[0],F=E[1],M=(0,l.useState)(i.slice(0,r<=0?c:i.length)),O=(0,be.Z)(M,2),B=O[0],z=O[1],H=(0,l.useRef)(0),U=(0,l.useRef)(0),G=s?{}:{overflow:"hidden"},q=(0,l.useRef)(null),W=(0,l.useRef)([]),K=(0,l.useRef)({left:0,width:0}),Y=(0,l.useRef)([]),X=function(e){var t;null===(t=e.stopPropagation)||void 0===t||t.call(e)},Q=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t,n){return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(B.length===i.length){e.next=4;break}setTimeout((0,it.Z)((0,nt.Z)().mark((function e(){return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J(t,!0);case 2:case"end":return e.stop()}}),e)}))),0),e.next=6;break;case 4:return e.next=6,J(t,!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t){var n,i=arguments;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],e.next=3,$(t,!1);case 3:n&&d&&d(x,t),u&&u(x,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(n,o){var r,a,s,c,l,u,d,p,f,v,_,g,y,x,Z,I,w,P,T,C,R,j,N,L,E,A;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n<0||n>i.length-1)){e.next=3;break}return b(n),e.abrupt("return");case 3:return g=n<0||n>=B.length?0:n,e.next=6,rt({node:q.current,prefixCls:h});case 6:K.current=e.sent,y=Y[g]||{},x=y.left,Z=void 0===x?0:x,I=y.width,w=void 0===I?0:I,P=null!==(r=null===(a=K.current)||void 0===a?void 0:a.left)&&void 0!==r?r:0,T=Ce()?Z:null!==(s=Z-P)&&void 0!==s?s:0,C=null!==(c=null===(l=K.current)||void 0===l?void 0:l.width)&&void 0!==c?c:0,R=(C-w)/2,j=g<0?0:T-R,N=null===(u=Y[g])||void 0===u?void 0:u.width,m?(t=t||k().createAnimation({duration:100,timingFunction:"linear"}),t.translateX(T),t.opacity(1),isNaN(N)||t.width(null!==N&&void 0!==N?N:0),t.step({duration:Re()?220:150}),E=function(){F(t.export())},E()):(S(N),L=Ce()?[{translateX:T}]:"translateX(".concat(T,"px)"),D(L)),V(j),A={x:j,y:0,left:j,behavior:"smooth",distance:0},null!==(d=null===(p=q.current)||void 0===p||null===(f=p.scrollTo)||void 0===f?void 0:f.call(p,A))&&void 0!==d||null===(v=q.current)||void 0===v||null===(v=v.$scrollView)||void 0===v||null===(v=v.current)||void 0===v||null===(_=v.scrollTo)||void 0===_||_.call(v,A),b(n);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=s?_.ScrollView:_.View,te=_.View,ne=function(e,t){var n,i,o=null!==(n=null===t||void 0===t||null===(i=t.nativeEvent)||void 0===i?void 0:i.layout)&&void 0!==n?n:{},r=o.width,a=void 0===r?0:r,s=o.x,c=void 0===s?0:s;Y[e]={width:a,left:c},e===x&&S(a),ie()};(0,l.useEffect)((function(){var e=setTimeout((function(){r!==x&&(B.length!==i.length?z(i):J(r))}),100);return function(){clearTimeout(e)}}),[r]);var ie=function(){(H.current<B.length||B.length===i.length)&&H.current++,H.current==B.length-1&&$(r,!0)};(0,l.useEffect)((function(){var e=Re()?500:0,t=function(){H.current=0,oe()};Re()?setTimeout((function(){t()}),e):t()}),[B]);var oe=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(){return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ce()){e.next=2;break}return e.abrupt("return");case 2:if(!B||!B.length){e.next=5;break}return e.next=5,(B||[]).forEach(function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t,n){var i;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=W.current[n],!i){e.next=6;break}return e.next=4,rt({node:i,prefixCls:h});case 4:Y[n]=e.sent,ie();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){U.current?z(i):U.current=1}),[i]),{Com:ee,active:x,animationIndicator:A,comRef:q,distance:N,itemRefs:W,lineWidth:w,renderData:B,setRenderData:z,onScroll:X,clickTab:Q,onNodeLayout:ne,Wrapper:te,IDKey:v,unScrollStyles:G,lineTransform:C}},st=at,ct=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),(0,y.Z)((0,g.Z)(i),"loopTimer",void 0),(0,y.Z)((0,g.Z)(i),"isInAnimating",!1),(0,y.Z)((0,g.Z)(i),"el",void 0),i.state={animationData:null},i.onTransitionEnd=i.onTransitionEnd.bind((0,g.Z)(i)),i}return(0,f.Z)(n,[{key:"componentDidMount",value:function(){this.startAnimation()}},{key:"componentDidUpdate",value:function(e,t){e.animation!==this.props.animation&&this.startAnimation()}},{key:"componentWillUnmount",value:function(){this.isInAnimating=!1,this.clearLoopTimer()}},{key:"clearLoopTimer",value:function(){this.loopTimer&&clearTimeout(this.loopTimer)}},{key:"startAnimation",value:function(){var e,t,n=this.props,i=n.animation,o=n.loop;o&&this.isInAnimating||(null===i||void 0===i||null===(e=i.actions)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.animates)||void 0===e?void 0:e.length)>0&&(this.isInAnimating=!0,0===(null===i||void 0===i||null===(t=i.option)||void 0===t||null===(t=t.transition)||void 0===t?void 0:t.duration)&&(this.isInAnimating=!1),this.setState({animationData:this.props.animation}))}},{key:"clearAnimation",value:function(e){this.setState({animationData:{actions:[{animates:[{type:"style",args:[]}]}],option:{transformOrigin:"50% 50% 0",transition:{delay:0,duration:0,timingFunction:"linear"}}}},e)}},{key:"onTransitionEnd",value:function(e){var t=this,n=this.props,i=n.loop,o=n.onTransitionEnd;if(i){var r=this.props.animation;r&&this.isInAnimating&&this.clearAnimation((function(){t.clearLoopTimer(),t.loopTimer=setTimeout((function(){t.setState({animationData:r})}),15)}))}else this.isInAnimating=!1,o&&o(e)}}]),n}(l.Component),lt=ct,ut=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,u.jsx)(_.View,(0,p.Z)((0,p.Z)({},this.props),{},{onTransitionEnd:this.onTransitionEnd,ref:function(t){return e.el=t}}))}}]),n}(lt),dt=ut,pt=function(e){var t=e.data,n=void 0===t?[]:t,i=e.renderItem,o=e.tabsActiveTextColor,r=void 0===o?"#0086f6":o,a=e.tabsInactiveTextColor,s=void 0===a?"#666":a,c=e.tabsBackgroundColor,l=void 0===c?"#fff":c,d=e.scrollAble,h=void 0===d||d,f=e.showBgIndicator,m=void 0!==f&&f,v=e.renderIndicator,g=e.indictorColor,y=void 0===g?"#0086f6":g,x=e.indictorWidth,k=e.comClassName,b=void 0===k?"":k,Z=e.comStyle,I=void 0===Z?{}:Z,w=e.bgIndicatorStyles,S=void 0===w?{}:w,P=e.indicatorAnimate,T=void 0===P||P,C=st(e),D=C.Com,R=C.active,j=C.animationIndicator,N=C.comRef,L=C.distance,E=C.itemRefs,A=C.lineWidth,F=C.renderData,M=C.setRenderData,O=C.onScroll,B=C.clickTab,z=C.onNodeLayout,H=C.Wrapper,U=C.IDKey,G=C.unScrollStyles,q=C.lineTransform;return F&&F.length?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(D,{ref:function(e){return N.current=e},scrollX:!0,scrollLeft:L,showScrollbar:!1,bounces:!1,enhanced:!1,onTouchStart:function(){F.length!==n.length&&M(n)},onScroll:O,scrollWithAnimation:h,showsHorizontalScrollIndicator:!1,automaticallyAdjustContentInsets:!1,style:{backgroundColor:l},className:V("xt-tabs__scroll_wrapper"),id:"contain_".concat(U.current),children:(0,u.jsxs)(H,{style:(0,p.Z)((0,p.Z)({backgroundColor:l},G),I),className:V("xt-tabs__com",b),children:[F.map((function(e,t){return(0,u.jsx)(_.View,{id:"tabs_com_i_".concat(U.current,"_").concat(t),onClick:function(e){return B(t,e)},ref:function(e){E.current[t]=e},onLayout:function(e){return z(t,e)},className:"xt-tabs__item",children:(null===i||void 0===i?void 0:i(e,t,R))||(0,u.jsx)(_.Text,{style:{textAlign:"center",color:R===t?r:s,padding:16,fontWeight:"500"},children:e.text})},t)})),m&&(R||0===R)?(0,u.jsx)(dt,{animation:j,className:"xt-tabs__line",style:{backgroundColor:l,opacity:T?0:1,width:A||"auto",display:"flex",position:"absolute",bottom:0,left:0,transform:q},children:(0,u.jsx)(_.View,{className:"xt-tabs__line",style:(0,p.Z)({height:4,width:null!==x&&void 0!==x?x:"100%",backgroundColor:y},S),children:v&&v()})}):(0,u.jsx)(u.Fragment,{})]})})}):null},ht=l.memo(pt),ft=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,u.jsx)(_.Text,(0,p.Z)((0,p.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(lt),mt=ft,vt=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,u.jsx)(_.Image,(0,p.Z)((0,p.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(lt),_t=vt,gt=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){var e=this;return(0,u.jsx)(_.ScrollView,(0,p.Z)((0,p.Z)({},this.props),{},{ref:function(t){return e.el=t}}))}}]),n}(lt),yt=gt,xt={View:dt,Text:mt,Image:_t,ScrollView:yt},kt=xt,bt=function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,f.Z)(n,[{key:"render",value:function(){return null}}]),n}(l.Component),Zt=function(e){var t=e.collapseHeight||80,n=!!e.defaultExpand,i=e.offset||0,o=function(e){var t=Date.now().toString(36);return t+=Math.random().toString(36).substr(2,e),t},r=(0,l.useState)(n?"open":"hide"),a=(0,be.Z)(r,2),s=a[0],c=a[1],u=(0,l.useState)(t),d=(0,be.Z)(u,2),p=d[0],h=d[1],f=(0,l.useState)(null),m=(0,be.Z)(f,2),v=m[0],_=m[1],g=(0,l.useState)(!1),y=(0,be.Z)(g,2),x=y[0],b=y[1],Z=(0,l.useState)(!1),I=(0,be.Z)(Z,2),w=I[0],S=I[1],P=(0,l.useState)(t),T=(0,be.Z)(P,2),C=T[0],D=T[1],R=(0,l.useRef)(null),j=(0,l.useRef)(o(5)),N=function(){var e=k().createAnimation({duration:200,delay:0,timingFunction:"linear"});"hide"===s?(e.height(p).step(),c("open")):(e.height(t).step(),c("hide")),_(e.export())},V=(0,l.useCallback)((function(e){h(e+i),Math.floor(e)<=t+5?(b(!1),D(e)):(b(!0),D("open"===s?e:t))}),[s]),L=(0,l.useCallback)((function(){setTimeout((function(){rt({node:R.current,prefixCls:e.prefixCls}).then((function(e){e&&(V(e.height),S(!0))}))}),0)}),[V]);return(0,l.useEffect)((function(){setTimeout((function(){L()}),Re()?600:0)}),[]),{status:s,setAnimation:N,animationData:v,showMore:x,refreshCollapseHeight:L,textViewRef:R,classname:j,height:t,layOutFinish:w,initHeight:C}},It=Zt,wt=l.forwardRef((function(e,t){var n=It(e),i=n.status,o=n.setAnimation,r=n.animationData,a=n.showMore,s=n.refreshCollapseHeight,c=n.textViewRef,d=n.classname,p=n.height,h=n.layOutFinish,f=n.initHeight,m=e.renderContent,v=e.renderMoreButton,g=e.showMoreText,y=void 0===g?{}:g,x=e.onClick,k=e.onlyEnableMoreButton,b=void 0!==k&&k,Z="hide"===i,I=function(e){a&&(o(),x&&x(e))};return(0,l.useImperativeHandle)(t,(function(){return{refreshCollapseHeight:s}})),(0,u.jsxs)(_.View,{style:{position:"relative"},children:[(0,u.jsx)(dt,{animation:r,className:"xt-collapse__wrap",onClick:function(){b||I(!Z)},style:h?{overflow:Ce()?"scroll":"hidden",height:f}:{overflow:Ce()?"scroll":"hidden",maxHeight:p},children:(0,u.jsx)(_.View,{ref:c,className:d.current,collapsable:!1,children:m&&m()})}),!!a&&(0,u.jsx)(_.View,{onClick:function(){return I(!Z)},className:v?"":"xt-collapse__button ".concat(Z?"":"xt-collapse__button__up"),children:v?v(Z):(0,u.jsx)(fe,{direction:0,colors:["rgba(255, 255, 255, 0.5)","rgba(255, 255, 255, 1) 50%"],start:{x:0,y:0},end:{x:.5,y:0},className:"xt-collapse__button__linear ".concat(Z?"":"xt-collapse__button__linear__up"),children:(0,u.jsx)(_.Text,{className:"xt-collapse__button__text",children:Z?(null===y||void 0===y?void 0:y.arrowdown)||"\u5c55\u5f00":(null===y||void 0===y?void 0:y.arrowup)||"\u6536\u8d77"})})})]})})),St=wt,Pt=_.View,Tt=function(e,t){clearTimeout(t.current),t.current=setTimeout(e,20)},Ct=_.CustomWrapper,Dt=function(e){return e["bottom"]="bottom",e["top"]="top",e["left"]="left",e["right"]="right",e}({}),Rt=function(e){var t=e.visible,n=void 0!==t&&t,i=e.closeOnMaskClick,o=void 0===i||i,r=e.onClose,a=e.onMaskClick,s=e.position,c=void 0===s?Dt.bottom:s,u=e.closeTransitionEnd,d=e.duration,p=void 0===d?300:d,h=(0,l.useState)(n),f=(0,be.Z)(h,2),m=f[0],v=f[1],_=(0,l.useRef)(0),g=(0,l.useRef)(0),y=(0,l.useRef)(k().getSystemInfoSync().windowWidth),x=(0,l.useRef)(k().getSystemInfoSync().windowHeight),b=(0,l.useRef)(null),Z=(0,l.useRef)(null);(0,l.useEffect)((function(){switch(c){case Dt.left:_.current=-y.current,g.current=0;break;case Dt.right:_.current=y.current,g.current=0;break;case Dt.top:_.current=0,g.current=-x.current;break;default:_.current=0,g.current=x.current;break}}),[c]),(0,l.useEffect)((function(){n&&!m&&v(!0),(n&&!m||!n&&m)&&V(n)}),[n,m]),(0,l.useEffect)((function(){return function(){clearTimeout(b.current),clearTimeout(Z.current)}}),[]);var I=(0,l.useCallback)((function(){null===a||void 0===a||a(),o&&(null===r||void 0===r||r())}),[a,r]),w=(0,l.useCallback)((function(){n||(v(!1),null===u||void 0===u||u())}),[n,m]),S=(0,l.useState)(null),P=(0,be.Z)(S,2),T=P[0],C=P[1],D=(0,l.useState)(null),R=(0,be.Z)(D,2),j=R[0],N=R[1],V=(0,l.useCallback)((function(e){var t=k().createAnimation({duration:p,delay:0,timingFunction:"ease"}),i=k().createAnimation({duration:p,delay:0,timingFunction:"ease"}),o=function(){t.translateX(0).translateY(0).opacity(1).step(),i.opacity(1).step(),C(t.export()),N(i.export())};e?(clearTimeout(Z.current),Tt(o,b)):(t.translateX(_.current).translateY(g.current).opacity(0).step(),i.opacity(0).step(),C(t.export()),N(i.export()),Z.current=setTimeout((function(){n||(v(!1),null===u||void 0===u||u())}),400))}),[]);return{animationData:T,animationMask:j,handleMaskClick:I,handleTransitionEnd:w,isShow:m}},jt=Rt,Nt=function(e){var t=e.visible,n=e.children,i=e.position,o=void 0===i?Dt.bottom:i,r=e.zIndex,a=void 0===r?0:r,s=e.showCloseButton,c=void 0!==s&&s,d=e.closeButtonPosition,h=void 0===d?"right":d,f=e.className,m=void 0===f?"":f,v=e.style,g=void 0===v?{}:v,y=e.titleStyle,x=void 0===y?{}:y,k=e.contentClassName,b=void 0===k?"":k,Z=e.contentStyle,I=void 0===Z?{}:Z,w=e.mask,S=void 0===w||w,P=e.maskClassName,T=void 0===P?"":P,C=e.maskStyle,D=void 0===C?{}:C,R=e.title,j=void 0===R?"":R,N=e.crnModalProps,V=void 0===N?{}:N,E=e.hideIphoneXAdapter,A=void 0!==E&&E,F=e.isCrnModal,M=void 0===F||F,O=e.onClose,B=M?Pt:_.View,z=jt(e),H=z.isShow,U=z.animationData,G=z.animationMask,q=z.handleMaskClick,W=z.handleTransitionEnd,K=(0,l.useState)(!1),Y=(0,be.Z)(K,2),X=Y[0],Q=Y[1];return(0,l.useEffect)((function(){t&&!X&&Q(!0)}),[t,X]),(0,u.jsx)(Ct,{children:(0,u.jsx)(B,(0,p.Z)((0,p.Z)({catchMove:!0,className:"xt-poplayer xt-poplayer-fixed",style:{zIndex:a,display:H?void 0:"none"},visible:H,transparent:!0},V),{},{children:(0,u.jsxs)(_.View,{className:"xt-poplayer__container",children:[S?(0,u.jsx)(dt,{disableScroll:"disableScroll",className:"xt-poplayer__container__mask ".concat(T),style:D,animation:G,onClick:q}):null,(0,u.jsxs)(dt,{style:(0,p.Z)({opacity:0},g),className:"xt-poplayer__container__content xt-poplayer__container__content__".concat(o," ").concat(m," ").concat(M?"xt-poplayer__container__content_crn_model":"xt-poplayer__container__content_view"),animation:U,onTransitionEnd:W,children:[j?(0,u.jsxs)(_.View,{className:"xt-poplayer__container__content__header",style:x,children:[(0,u.jsx)(_.Text,{className:"xt-poplayer__container__content__header__title",children:j}),c?(0,u.jsx)(_.View,{className:"xt-poplayer__container__content__header__close xt-poplayer__container__content__header__close__".concat(h),onClick:O,children:(0,u.jsx)(_.Image,{className:"xt-poplayer__container__content__header__close__icon",src:"https://dimg04.c-ctrip.com/images/1o52m12000aswrc8dB020.png"})}):null]}):null,(0,u.jsx)(_.View,{style:L({flex:1},Ce()?{}:{overflow:"auto"},I),className:b,children:X?n:null}),A?null:(0,u.jsx)(ge.Bottom,{})]})]})}))})},Vt=Nt,Lt=function(e){return e["CRN"]="CRN",e["Mini"]="mini",e["H5"]="H5",e["Online"]="online",e}({}),Et=function(e){return e["FAT"]="FAT",e["UAT"]="UAT",e["PROD"]="PROD",e["DEV"]="DEV",e}({}),At=function(e){return e["TRIP"]="TRIP",e["CTRIP"]="CTRIP",e}({}),Ft=n(65238),Mt=n.n(Ft),Ot=function(e){var t,n=Mt().env||"";switch("undefined"!==typeof process&&"development"===(null===(t=process)||void 0===t||null===(t=t.env)||void 0===t?void 0:"production")&&(n=Et.DEV),n=n.toLowerCase(),n){case"dev":return Et.DEV;case"fat":return Et.FAT;case"uat":return Et.UAT;case"prd":return Et.PROD;default:return Et.PROD}},Bt=function(){return Lt.Mini},zt=function(){return At.CTRIP},Ht=function(){return W().clientID},Ut=function(){return W().appId},Gt=(W().util.base64Encode,W().util.base64Decode,"__xtaro-storage-time__"),qt=function(e,t){var n=e.data,i=e.expires,o=e.key,r=e.domain;if(i){var a=Object.prototype.toString.call(i);if("[object Date]"===a||"[object Number]"===a){var s="[object Date]"===a?i.getTime():(new Date).getTime()+i;return k().setStorage({key:Gt+o,data:s,domain:r}),t?k().setStorageSync(o,n,r):k().setStorage(e)}console.error("type error: expires is not Date or number")}return t?k().setStorageSync(o,n,r):k().setStorage(e)},Wt=function(e){return qt(e)},Kt=function(e,t,n,i){return qt({data:t,key:e,expires:n,domain:i},!0)},Yt=function(e,t){return new Promise((function(n,i){var o=k().getStorageSync(e,t);n(o)}))},Xt=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t){var n,i,o,r,a,s;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.key,i=t.complete,o=t.fail,r=t.domain,e.next=3,Yt(Gt+n,r);case 3:if(a=e.sent,!(a&&a<(new Date).getTime())){e.next=11;break}return s={errMsg:"getStorage:fail data not found"},o&&o(s),i&&i(s),k().removeStorage({key:n}),k().removeStorage({key:Gt+n}),e.abrupt("return");case 11:return e.abrupt("return",k().getStorage(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(e,t){var n=k().getStorageSync(Gt+e,t);return n?n>(new Date).getTime()?k().getStorageSync(e,t):(k().removeStorage({key:e}),k().removeStorage({key:Gt+e}),""):k().getStorageSync(e,t)},Jt=k().removeStorage,$t=k().removeStorageSync,en=k().clearStorage,tn=k().clearStorageSync,nn=k().getStorageInfo,on=k().getStorageInfoSync,rn={set:Wt,setSync:Kt,get:Xt,getSync:Qt,remove:Jt,removeSync:$t,clear:en,clearSync:tn,getInfoSync:on,getInfo:nn},an=rn,sn=an,cn=function(){var e,t=(0,x.getCurrentPages)();return null===(e=t[t.length-1])||void 0===e?void 0:e.route},ln=(0,y.Z)((0,y.Z)((0,y.Z)((0,y.Z)({},Et.DEV,"https://m.ctrip.com"),Et.PROD,"https://m.ctrip.com"),Et.FAT,"https://gateway.m.fws.qa.nt.ctripcorp.com"),Et.UAT,"https://gateway.m.uat.qa.nt.ctripcorp.com"),un=function(e){},dn=un,pn=n(32180)["document"],hn=n(32180)["window"];function fn(e,t){var n=pn.createElement("script");return n.async=!0,n.src=e,t&&(n.onerror=t),pn.getElementsByTagName("head")[0].appendChild(n),n}function mn(e){var t="";for(var n in e){var i=void 0!==e[n]?e[n]:"";t+="&".concat(n,"=").concat(encodeURIComponent(i))}return t}function vn(e,t,n){e.parentNode&&(e.parentNode.removeChild(e),delete hn[t],n&&clearTimeout(n))}function _n(){var e=0;return function(t,n){if("undefined"===typeof hn){var i=n.fail;return i(null)}var o,r,a=n.prefix,s=void 0===a?"__jp":a,c=n.cbName,l=void 0===c?"callback":c,u=n.timeout,d=void 0===u?15e3:u,p=n.data,h=void 0===p?{}:p,f=n.success,m=n.fail,v=s+e++;hn[v]=function(e){return hn[v]&&vn(o,v,r),f(e)},t="".concat(t).concat(t.indexOf("?")>0?"":"?").concat(mn(h).substr(1),"&").concat(l,"=").concat(v),o=fn(t,(function(e){return m(e),vn(o,v,r)})),d&&(r=setTimeout((function(){return vn(o,v,r),m("timeout")}),d))}}var gn=_n(),yn=gn,xn=n(32180)["window"],kn=["url","head","data","method","retryTimes","req","timeout","cachePolicy","isSOAAgent","useAutoParseSoaParams","needLock","jsonp","cbName","isFullRes","debounceTime","beforeHandleData","afterHandleData"],bn={},Zn={},In="",wn=function(e){return e.replace("https://","http://")},Sn=function(e){var t=ln[Ot(e)]||ln[Et.PROD];return Ae()?wn(t):t},Pn=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t,n,i,o){var r,a,s,c,l;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=o||{},a=r.isFullRes,s=a?i:i.data||i,c={data:s,isSuccess:t},!n){e.next=12;break}if(l=n(c),!(l instanceof Promise)){e.next=11;break}return e.next=8,l;case 8:c=e.sent,e.next=12;break;case 11:c=l;case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}();function Tn(e,t,n){var i=t.afterHandleData,o=e.cbName,r=e.url,a=e.jsonp,s=e.data,c=e.timeout,l=e.isFullRes;return new Promise((function(u){var d,h={success:function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t){var n;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pn(!0,i,t,{isFullRes:l});case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fail:function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(o){var r;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n&&n(t,o),e.next=3,Pn(!1,i,o,{isFullRes:l});case 3:r=e.sent,u(r);case 5:case"end":return e.stop()}}),e)})));function o(t){return e.apply(this,arguments)}return o}()};if(!Ce()&&(null!==e&&void 0!==e&&null!==(d=e.others)&&void 0!==d&&d.extension)){var f,m=(null===e||void 0===e||null===(f=e.data)||void 0===f?void 0:f.head)||{};m.extension=e.others.extension,e.data.head=m}if(a)return yn(r,(0,p.Z)({data:s,cbName:o,timeout:c},h));W().request((0,p.Z)((0,p.Z)({},e),h))}))}var Cn=function(){var e=(0,it.Z)((0,nt.Z)().mark((function e(t,n,i,o){var r,a,s,c,l,u;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=Sn(o),a=[],Array.isArray(t)||(t=[t]),s="";try{s=cn()}catch(e){console.log("curPageContextId => getPageContextId  error:",e)}In!==s&&(bn={},Zn={},In=s),c=(0,nt.Z)().mark((function e(){var n,s,c,l,d,h,f,m,v,_,g,y,x,k,b,Z,I,w,S,P,T,C,D,R,j,N,V,L,E,A,F,M;return(0,nt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t[u],s=n.url,c=n.head,l=n.data,d=n.method,h=void 0===d?"POST":d,f=n.retryTimes,m=void 0===f?0:f,v=n.req,_=n.timeout,g=void 0===_?15e3:_,y=n.cachePolicy,x=n.isSOAAgent,k=n.useAutoParseSoaParams,b=void 0!==k&&k,Z=n.needLock,I=n.jsonp,w=n.cbName,S=n.isFullRes,P=n.debounceTime,T=void 0===P?200:P,C=n.beforeHandleData,n.afterHandleData,D=(0,G.Z)(n,kn),R=v||o,j={},s=-1==s.indexOf("http")?"".concat(r).concat(s):s,c&&(l.head=Object.assign(l.head||{},c)),!C){e.next=15;break}if(N=C(l),!(N instanceof Promise)){e.next=14;break}return e.next=11,N;case 11:l=e.sent,e.next=15;break;case 14:l=N;case 15:if("undefined"===typeof xn&&x&&(b&&(V=dn(s)||{},L=V.serviceCode,E=V.serviceOperation,j.serviceCode=L,j.serviceOperation=E),R.clientId||(j.ignoreCID=!0),j.body=l),A=(0,p.Z)((0,p.Z)({url:s,method:h,data:l,jsonp:I,isFullRes:S,cbName:w,retryTimes:m,timeout:g,cachePolicy:y,req:R,isSOAAgent:x},D),j),1!==Z){e.next=24;break}return bn[s]&&bn[s](null),F=new Promise((function(e){bn[s]=e,setTimeout((0,it.Z)((0,nt.Z)().mark((function t(){var o;return(0,nt.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e===bn[s]){t.next=3;break}return t.abrupt("return",e(null));case 3:return t.next=5,Tn(A,n,i);case 5:o=t.sent,e(o),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("request error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),T)})),a.push(F),e.abrupt("return",0);case 24:if(2!==Z){e.next=29;break}if(!Zn[s]){e.next=28;break}return a.push(null),e.abrupt("return",0);case 28:Zn[s]=!0;case 29:M=Tn(A,n,i).finally((function(){delete Zn[s]})),a.push(M);case 31:case"end":return e.stop()}}),e)})),u=0;case 8:if(!(u<t.length)){e.next=16;break}return e.delegateYield(c(),"t0",10);case 10:if(l=e.t0,0!==l){e.next=13;break}return e.abrupt("continue",13);case 13:u++,e.next=8;break;case 16:return Ae()||n&&(0,x.showLoading)({title:n.text||""}),e.abrupt("return",Promise.all(a).finally((function(){Ae()||n&&(0,x.hideLoading)()})));case 18:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),Dn=Cn,Rn={request:Cn},jn=function(e,t){return e},Nn=function(e,t){},Vn={share:jn,customShare:Nn},Ln=function(e){var t=e.title;k().setNavigationBarTitle({title:t})},En=W(),An=function(e,t){var n=[];if("object"===(0,d.Z)(t)&&t instanceof Array===!1){for(var i in t){var o=t[i];"string"!==typeof o&&"number"!==typeof o&&"boolean"!==typeof o||n.push("".concat(i,"=").concat(o))}return n.length<=0?e:e+(-1===e.indexOf("?")?"?":"&")+n.join("&")}return e},Fn=["complete","success","fail","url","data","beforeRouteChange"],Mn=["url","data","beforeRouteChange","fail","complete","success"],On=["beforeRouteChange"],Bn=En.navigateTo,zn=En.redirectTo,Hn=En.navigateBack,Un=function(e){var t=e.complete,n=e.success,i=e.fail,o=e.url,r=e.data,a=e.beforeRouteChange,s=(0,G.Z)(e,Fn);if(!o||"string"!=typeof o)return console.error("\u5f53\u524dURL\u53c2\u6570\u975e\u6cd5"),i&&i(),void(t&&t());if(o=An(o,r),o.indexOf("http://")>-1||o.indexOf("https://")>-1){var c="/cwx/component/cwebview/cwebview";a&&a(),Bn((0,p.Z)((0,p.Z)({},s),{},{url:"".concat(c,"?data=").concat(JSON.stringify((0,p.Z)({url:encodeURIComponent(o),needLogin:e.needLogin||!1,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},e.other||{}))),success:n,complete:t,fail:i}))}else a&&a(),Bn((0,p.Z)((0,p.Z)({},s),{},{url:o,success:n,complete:t,fail:i}))},Gn=function(e){var t=e.url,n=e.data,i=e.beforeRouteChange,o=e.fail,r=e.complete,a=e.success,s=(0,G.Z)(e,Mn);if(!t||"string"!=typeof t)return console.error("\u5f53\u524dURL\u53c2\u6570\u975e\u6cd5"),o&&o(),void(r&&r());if(t=An(t,n),i&&i(),t.indexOf("http://")>-1||t.indexOf("https://")>-1){var c="/cwx/component/cwebview/cwebview";i&&i(),zn((0,p.Z)((0,p.Z)({},s),{},{url:"".concat(c,"?data=").concat(JSON.stringify((0,p.Z)({url:encodeURIComponent(t),needLogin:e.needLogin||!1,pageTitle:{color:{frontColor:"#000000",backgroundColor:"#ffffff"}}},e.other||{}))),success:a,complete:r,fail:o}))}else zn((0,p.Z)({url:t,fail:o,complete:r},s))},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.beforeRouteChange,n=(0,G.Z)(e,On);t&&t(),Hn(n)},Wn=n(32180)["document"];function Kn(e){if(!Wn)return null;for(var t=Wn.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(e==i[0].trim())return decodeURIComponent(i[1])}return null}var Yn=n(32180)["navigator"],Xn=function(){function e(){(0,h.Z)(this,e),(0,y.Z)(this,"appId","h5"),(0,y.Z)(this,"env",Ot())}return(0,f.Z)(e,[{key:"getApplicationInfo",value:function(){return{locale:Kn("ibu_h5_local"),userAgent:Yn.userAgent}}}]),e}(),Qn=(new Xn,function(e){(0,m.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,h.Z)(this,n),i=t.call(this,e),i.state={},i}return(0,f.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?24:t,i=e.text,o=void 0===i?"\u5373\u5c06\u5448\u73b0":i,r=e.fontStyle,a=void 0===r?{}:r,s=e.style,c=e.url,l=void 0===c?"https://dimg04.c-ctrip.com/images/0AS5v120008wcbunh538C.png":c,d=e.className,p=e.fontClassName;return(0,u.jsxs)(_.View,{className:V("xt-loading",d),style:s,children:[(0,u.jsx)(_.Image,{src:l,style:{width:n,height:n,animation:"xtaroloadingrotate 0.7s linear infinite"},mode:"aspectFit"}),(0,u.jsx)(_.Text,{className:V("xt-loading__text",p),style:a,children:o})]})}}]),n}(l.Component)),Jn=Qn,$n=function(e){var t=e.resizeMode,n=void 0===t?"cover":t,i=e.source,o={center:"center",contain:"aspectFit",cover:"aspectFill",repeat:void 0,stretch:"scaleToFill"},r=function(e){return o[e]},a=function(e){var t,n=!Ne();return n||(e=null===(t=e)||void 0===t?void 0:t.replace(/(jpg|png)_\.webp/,"$1")),e},s=(0,l.useState)(r(n)),c=(0,be.Z)(s,2),u=c[0],d=c[1],p=(0,l.useState)(a(i?i.uri:"")),h=(0,be.Z)(p,2),f=h[0],m=h[1];return(0,l.useEffect)((function(){d(r(n))}),[n]),(0,l.useEffect)((function(){m(a(i?i.uri:""))}),[i]),{mode:u,src:f}},ei=$n,ti=["children","imageRef","style","imageStyle","className","imageClassName"],ni=l.forwardRef((function(e,t){var n=e.children,i=e.imageRef,o=e.style,r=void 0===o?{}:o,a=e.imageStyle,s=void 0===a?{}:a,c=e.className,l=e.imageClassName,d=(0,G.Z)(e,ti),h=ei(e),f=h.mode,m=h.src,v=r.width,g=r.height;return(0,u.jsxs)(_.View,{ref:t,className:V("xt-imagebackground",c),style:r,children:[(0,u.jsx)(_.Image,(0,p.Z)({ref:i,src:m,className:V("xt-imagebackground__image",l),style:(0,p.Z)({width:v||"100%",height:g||"100%"},s),mode:f,webp:!0},d)),n]})})),ii=ni,oi={show:function(e){var t=e||{},n=t.items,i=void 0===n?[]:n,o=t.showPhotoIndex,r=void 0===o?0:o,a=i.map((function(e){return e.url})),s=a[r]||"";e&&e.items&&e.items.length>0&&k().previewImage({urls:a,current:s})}};function ri(e,t){var n=l.lazy(e),i=t||{},o=i.loading;return function(e){return(0,u.jsx)(l.Suspense,{fallback:o?(0,u.jsx)(o,{}):null,children:(0,u.jsx)(n,(0,p.Z)({},e))})}}var ai=ri,si=["url","className","style","numberOfLines","onClick"],ci=l.forwardRef((function(e,t){var n=e||{},i=n.url,o=n.className,r=n.style,a=n.numberOfLines,s=n.onClick,c=(0,G.Z)(n,si),d=(0,l.useCallback)((function(e){i&&Un({url:i}),s&&s(e)}),[i]),h=(0,l.useMemo)((function(){var e=Number(a);return!e||e<=0?["",{}]:1===e?["xt-link_single_line",{}]:["xt-link_multy_line",{"-webkit-line-clamp":"".concat(e)}]}),[a]),f=(0,be.Z)(h,2),m=f[0],v=f[1];return(0,u.jsx)(_.Text,(0,p.Z)((0,p.Z)({},c),{},{className:V("xt-link",o,m),style:L(r,v),numberOfLines:"".concat(a),onClick:d,ref:t}))})),li=(Q(ci),function(e){return e["ctrip"]="ctrip",e["trip"]="trip",e}(li||{})),ui=function(){function e(){(0,h.Z)(this,e)}return(0,f.Z)(e,null,[{key:"getEmojiMap",value:function(e,t,n){var i="trip"===e,o=t?i?this.CACHE_TRIP_KEY_GIF:this.CACHE_KEY_GIF:i?this.CACHE_TRIP_KEY:this.CACHE_KEY,r=sn.getSync(o)||{};return r&&0!==Object.keys(r).length||("function"===typeof n&&this.callbackQueue.push(n),this.fetchEmojiMap(e,t)),r}},{key:"clearCallbackQueue",value:function(){var e=null;while(e=this.callbackQueue.shift())e&&"function"===typeof e&&e()}},{key:"parseStyleName",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"parseStringStyle",value:function(e){for(var t=(e||"").replace(/[\s|\n]/g,"").split(";"),n={},i=0;i<t.length;i++){var o=t[i].split(":"),r=this.parseStyleName(o[0]),a=o[1];r&&a&&(n[r]=a)}return n}},{key:"fetchEmojiMap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li.ctrip,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isFetching[t]||(this.isFetching[t]=!0,Dn([{url:"https://m.".concat(t,".com/restapi/soa2/19530/getEmojiImageMap"),method:"POST",data:{site:t,type:n?"gif":"image"}}]).then((function(i){var o=i[0]||{},r=o.data;try{var a=r.data&&(n?r.data.gifMap:r.data.map);if(a&&Object.keys(a).length>0){var s=n?"trip"===t?e.CACHE_TRIP_KEY_GIF:e.CACHE_KEY_GIF:"trip"===t?e.CACHE_TRIP_KEY:e.CACHE_KEY;return sn.setSync(s,a),e.clearCallbackQueue(),a}}catch(e){console.log(e)}e.isFetching[t]=!1})).catch((function(e){console.log(e)})))}},{key:"parseEmojiText",value:function(t,n){if(!t)return"";var i=n.site,o=void 0===i?li.ctrip:i,r=n.showGif,a=void 0===r||r,s=n.callback,c=e.getEmojiMap(o,a,s)||{};return e.getResult(t,c,n)}},{key:"parseEmojiContentArray",value:function(t,n){if(!t)return[{content:t,type:"text"}];var i=n.site,o=void 0===i?li.ctrip:i,r=n.showGif,a=void 0===r||r,s=n.callback,c=e.getEmojiMap(o,a,s)||{};return this.getEmojiContentArray(t,c,n)}},{key:"getEmojiContentArray",value:function(e,t,n){var i=[],o=0;while(o<e.length){if("["===e[o]){var r=e.indexOf("]",o+1);if(-1!==r){var a=e.substring(o+1,r);t[a]?i.push({content:this.getEmojiByKey(a,t,n),type:"emoji"}):i.push({content:"[".concat(a,"]"),type:"text"}),o=r}else{var s=e.substring(o,e.length);i.push({content:s,type:"text"}),o=e.length}}else{var c=e.indexOf("[",o+1);if(-1!==c){var l=e.substring(o,c);i.push({content:l,type:"text"}),o=c-1}else{var u=e.substring(o,e.length);i.push({content:u,type:"text"}),o=e.length}}o++}return i}},{key:"getResult",value:function(t,n,i){var o=Object.keys(n),r=/\[[^(\[|\])]+\]/g,a=t.match(r);if(!a)return t;for(var s=e.handleUniqueArray(a),c=i.emojiClassName,l=void 0===c?"":c,u=i.emojiStyles,d=void 0===u?"":u,p=t,h=0;h<s.length;h++){var f=s[h],m=f.substring(1,f.length-1);if(-1!==o.indexOf(m)){var v=this.getEmojiByKey(m,n,i),_='<img class="'.concat(l,'" style="').concat(d,'" src="').concat(v,'" alt="').concat(f,'" />'),g=e.replaceAll(p,f,_);p=g}}return p}},{key:"getEmojiByKey",value:function(e,t,n){var i="",o="",r=null===n||void 0===n?void 0:n.showGif;return r&&"object"===(0,d.Z)(t[e])?(i=t[e].gif||"",o=t[e].image):o="object"===(0,d.Z)(t[e])?t[e].image:t[e],r&&i||o}},{key:"replaceAll",value:function(e,t,n){var i="",o=e,r=t.length;while(o.indexOf(t)>-1){var a=o.indexOf(t);i+=o.substring(0,a),i+=n;var s=o.substring(a+r);o=s}return i+=o,i}},{key:"handleUniqueArray",value:function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}}]),e}();(0,y.Z)(ui,"CACHE_KEY","XTARO_EMOJI_MAP"),(0,y.Z)(ui,"CACHE_KEY_GIF","XTARO_EMOJI_MAP_GIF"),(0,y.Z)(ui,"CACHE_TRIP_KEY","XTARO_EMOJI_MAP_TRIP"),(0,y.Z)(ui,"CACHE_TRIP_KEY_GIF","XTARO_EMOJI_MAP_TRIP_GIF"),(0,y.Z)(ui,"isFetching",{ctrip:!1,trip:!1}),(0,y.Z)(ui,"callbackQueue",[]);var di=["children","columnData"],pi=function(e){e.children,e.columnData,(0,G.Z)(e,di);return(0,u.jsx)(_.PickerViewColumn,(0,p.Z)({className:"column-style"},e))};pi.displayName="_XPickerViewColumn";W().component.ocr;var hi=function(e,t){var n,i,o;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),Number(((e*o+t*o)/o).toFixed(Math.max(n,i)))},fi=function(e,t){var n,i,o,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return o=Math.pow(10,Math.max(n,i)),r=n>=i?n:i,Number(((e*o-t*o)/o).toFixed(r))},mi=function(e,t){var n=0,i=e.toString(),o=t.toString();try{n+=i.split(".")[1].length}catch(e){}try{n+=o.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)},vi=function(e,t){W().component.calendar(gi(e),t)},_i={showCalendar:vi},gi=function(e){if(e)for(var t in e)if("info"!==t)e[t]=yi(e[t]);else{var n=e[t],i={};for(var o in n){var r=yi(o);i[r]=n[o]}e[t]=i}return e},yi=function(e){if(!e)return e;var t=/^\d{4}-\d{1,2}-\d{1,2}$/.test(e);return t?e.split("-").map((function(e){return 2===(null===e||void 0===e?void 0:e.length)&&"0"===e[0]?e[1]:e})).join("-"):e},xi=(W().user.logout,function(){function e(t){(0,h.Z)(this,e),(0,y.Z)(this,"_number",0),(0,y.Z)(this,"symbol",void 0),(0,y.Z)(this,"value",0),(0,y.Z)(this,"maximumFractionDigits",0),(0,y.Z)(this,"_functionMap",{"Kilometer-Mile":function(e){return 0},"Mile-Kilometer":function(e){return 0},"Kilometer-Feet":function(e){return 0},"Feet-Kilometer":function(e){return 0},"Kilometer-Meter":function(e){return 0},"Meter-Kilometer":function(e){return 0},"Meter-Mile":function(e){return 0},"Mile-Meter":function(e){return 0},"Meter-Feet":function(e){return 0},"Feet-Meter":function(e){return 0},"Feet-Mile":function(e){return 0},"Mile-Feet":function(e){return 0},"Inch-centimeter":function(e){return 0},"centimeter-Inch":function(e){return 0},"SquareMeter-SquareFeet":function(e){return 0},"SquareFeet-SquareMeter":function(e){return 0},"Celsius-Fahrenheit":function(e){return 0},"Fahrenheit-Celsius":function(e){return 0},"Kilogram-Pound":function(e){return 0},"Pound-Kilogram":function(e){return 0}})}return(0,f.Z)(e,[{key:"convert",value:function(e,t){return 0}},{key:"convertToPreferences",value:function(e){return 0}}],[{key:"preferfenceToType",value:function(e){return""}}]),e}());(0,y.Z)(xi,"KilometerType",""),(0,y.Z)(xi,"MileType",""),(0,y.Z)(xi,"SquareMeterType",""),(0,y.Z)(xi,"SquareFeetType",""),(0,y.Z)(xi,"CelsiusType",""),(0,y.Z)(xi,"FahrenheitType",""),(0,y.Z)(xi,"MeterType",""),(0,y.Z)(xi,"FeetType",""),(0,y.Z)(xi,"KilogramType",""),(0,y.Z)(xi,"PoundType",""),(0,y.Z)(xi,"PercentType",""),(0,y.Z)(xi,"centimeterType",""),(0,y.Z)(xi,"InchType",""),(0,y.Z)(xi,"symbolMap",{Mile:"",Kilometer:"",SquareFeet:"",SquareMeter:"",Celsius:"",Fahrenheit:"",Meter:"",Feet:"",Kilogram:"",Pound:"",Percent:"",centimeter:"",Inch:""})},91192:function(e){"use strict";e.exports=JSON.parse('{"compVerison":"2.0.3"}')}}]);
//# sourceMappingURL=taroCommon.js.map